<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>openfaas | PaperMod</title><meta name=keywords content><meta name=description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta name=author content="Theme PaperMod"><link rel=canonical href=/tags/openfaas/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><link rel=icon href=favicon.ico><link rel=icon type=image/png sizes=16x16 href=favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=favicon-32x32.png><link rel=apple-touch-icon href=apple-touch-icon.png><link rel=mask-icon href=safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.97.3"><link rel=alternate type=application/rss+xml href=/tags/openfaas/index.xml><link rel=alternate hreflang=en href=/tags/openfaas/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="openfaas"><meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta property="og:type" content="website"><meta property="og:url" content="/tags/openfaas/"><meta property="og:image" content="papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="papermod-cover.png"><meta name=twitter:title content="openfaas"><meta name=twitter:description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8502076734034112" crossorigin=anonymous></script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8502076734034112" crossorigin=anonymous></script><header class=header><nav class=nav><div class=logo><a href accesskey=h title="PaperMod (Alt + H)">PaperMod</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=/fr/ title=French aria-label=:fr:>ğŸ‡«ğŸ‡·</a></li><li><a href=/fa/ title=Fa aria-label=Fa>Fa</a></li></ul></span></div><ul id=menu><li><a href=archives title=Archive><span>Archive</span></a></li><li><a href=categories/ title=Categories><span>Categories</span></a></li><li><a href=search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href>Home</a>&nbsp;Â»&nbsp;<a href=/tags/>Tags</a></div><h1>openfaas</h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://github.com/openfaas/media/raw/master/OpenFaaS_Magnet_3_1_png.png alt></figure><header class=entry-header><h2>Openfaas Workshop Lab11</h2></header><section class=entry-content><p>Lab 11 - é«˜çº§å‡½æ•° - ä½¿ç”¨ HMAC çš„ä¿¡ä»»
å‰è¨€ ç”¨äºå¾®æœåŠ¡çš„ä¼ ç»Ÿè®¤è¯ç­–ç•¥ä¸å‡½æ•°çš„å·¥ä½œåŸç†å®Œå…¨ç›¸åŒã€‚åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä½¿ç”¨å…±äº«ç§˜å¯†å’ŒåŸºäºå“ˆå¸Œçš„æ¶ˆæ¯éªŒè¯ç ï¼ˆHMACï¼‰çš„å‡ ç§å¯ç”¨æ–¹æ³•ä¹‹ä¸€ã€‚æœ‰å…³å…¶ä»–è®¤è¯ç­–ç•¥å’Œæƒ³æ³•ï¼Œè¯·å‚è§ã€‚openfaas-function-auth
è¿™ç»ä¸æ˜¯ä¸€ä¸ªå¹¿æ³›çš„æ¸…å•ï¼Œå®‰å…¨å’Œè®¤è¯æ˜¯ä¸€ä¸ªå¤æ‚çš„é¢†åŸŸï¼Œæœ€å¥½ç•™ç»™ä¸“å®¶ä½¿ç”¨ç»è¿‡è¯•éªŒçš„æ–¹æ³•ã€‚
å‡†å¤‡å¥½ä½ çš„ç¯å¢ƒ åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹
mkdir -p lab11\`bash && cd lab11 ä¹Ÿè¦ç¡®ä¿ä½ çš„faas-cli'ç‰ˆæœ¬æ˜¯0.7.4â€™æˆ–ä»¥ä¸Šï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ã€‚
faas-cli version ä»€ä¹ˆæ˜¯ HMAC å¦‚æœæ²¡æœ‰ä»»ä½•å½¢å¼çš„è®¤è¯æˆ–ä¿¡ä»»ï¼Œæˆ‘ä»¬çš„å‡½æ•°å¯èƒ½ä¼šæš´éœ²ç»™ä»»ä½•èƒ½çŒœåˆ°å…¶ URL çš„äººã€‚å¦‚æœæˆ‘ä»¬çš„å‡½æ•°å¯ä»¥åœ¨äº’è”ç½‘æˆ–æœ¬åœ°ç½‘ç»œä¸Šè®¿é—®ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯èƒ½è¢«åçš„è¡Œä¸ºè€…è°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°ä¼šå¯¹ä»»ä½•è¯·æ±‚åšå‡ºå“åº”ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶å¯¹å‡½æ•°çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸºäºå“ˆå¸Œçš„æ¶ˆæ¯éªŒè¯ç ï¼ˆHMACï¼‰æ¥éªŒè¯ä¿¡æ¯çš„æ¥æºã€‚
æ¥è‡ª[alexellis/hmac]ï¼ˆhttps://github.com/alexellis/hmacï¼‰ã€‚
HMAC ä½¿ç”¨å‘é€æ–¹/æ¥æ”¶æ–¹æå‰å…±äº«çš„å¯¹ç§°å¯†é’¥ã€‚å‘é€æ–¹åœ¨æƒ³è¦ä¼ è¾“ä¿¡æ¯æ—¶å°†äº§ç”Ÿä¸€ä¸ªå“ˆå¸Œå€¼â€“è¯¥æ•°æ®ä¸æœ‰æ•ˆè½½è·ä¸€èµ·å‘é€ã€‚ç„¶åï¼Œæ”¶ä»¶äººå°†ç”¨å…±äº«å¯†é’¥ç­¾ç½²æœ‰æ•ˆè½½è·ï¼Œå¦‚æœå“ˆå¸Œå€¼åŒ¹é…ï¼Œåˆ™å‡å®šæœ‰æ•ˆè½½è·æ¥è‡ªå‘ä»¶äººã€‚
è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é¿å…æˆ‘ä»¬çš„å‡½æ•°è¢«æ— æ•ˆçš„ç”šè‡³æ˜¯å±é™©çš„ä¿¡æ¯æ‰€è°ƒç”¨ã€‚
ä½¿ç”¨ HMAC æˆ‘ä»¬å°†ä½¿ç”¨ faas-cli æä¾›çš„--signæ ‡å¿—æ¥åŒ…å«ä¸€ä¸ªå¤´ï¼Œå…¶ä¸­åŒ…å«ä½¿ç”¨æˆ‘ä»¬ç”¨--keyæ ‡å¿—æä¾›çš„å…±äº«å¯†é’¥åˆ›å»ºçš„æ•£åˆ—ä¿¡æ¯ã€‚
æ³¨æ„: --signå’Œ--keyå¿…é¡»åŒæ—¶å­˜åœ¨ã€‚
è®©æˆ‘ä»¬é¦–å…ˆé€šè¿‡éƒ¨ç½²-envå‡½æ•°æ¥æ£€æŸ¥è¯¥æ ‡å¿—çš„ä½œç”¨ï¼Œè¯¥å‡½æ•°å°†æ‰“å°å‡½æ•°ä¸­å¯è®¿é—®çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚
faas-cli deploy --name env --fprocess="env" --image="function/alpine:new" è°ƒç”¨ä¸å¸¦--signæ ‡å¿—çš„å‡½æ•°ã€‚ $ echo "The message" | faas-cli invoke env PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin HOSTNAME=d2c1a2cb20c2 fprocess=env HOME=/root Http_X_Call_Id=b84947c6-2970-4fcf-ba3b-66dde6943999 Http_X_Forwarded_For=10.255.0.2:34974 Http_X_Forwarded_Host=127.0.0.1:8080 Http_Content_Length=0 Http_Accept_Encoding=gzip Http_Content_Type=text/plain Http_User_Agent=Go-http-client/1....</p></section><footer class=entry-footer><span title="2022-01-04 13:44:15 +0800 +0800">January 4, 2022</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Theme PaperMod</footer><a class=entry-link aria-label="post link to Openfaas Workshop Lab11" href=/post/openfaas-workshop-lab11/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://github.com/openfaas/media/raw/master/OpenFaaS_Magnet_3_1_png.png alt></figure><header class=entry-header><h2>Openfaas Workshop Lab10</h2></header><section class=entry-content><p>Lab 10 - é«˜çº§å‡½æ•° - ç§˜å¯†
åœ¨å¼€å§‹æœ¬å®éªŒå®¤ä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚ç”±äºæœ¬å®éªŒå®¤æ˜¯å»ºç«‹åœ¨å…ˆå‰çš„å®éªŒå®¤åŸºç¡€ä¸Šçš„ï¼Œå› æ­¤è¯·å¤åˆ¶ lab5ã€‚
$ cp -r lab5 lab10\ && cd lab10 ä½¿ç”¨ç§˜å¯† å®éªŒå®¤ 5ç ”ç©¶äº†issue-botå¦‚ä½•ä»ç¯å¢ƒå˜é‡ï¼ˆauth_tokenï¼‰è·å¾— GitHub çš„*ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æœºå¯†æ¥å­˜å‚¨æ•æ„Ÿä¿¡æ¯ã€‚
æ¥è‡ª Docker æ–‡æ¡£ã€‚
â€¦ ç§˜å¯†æ˜¯ä¸€å›¢æ•°æ®ï¼Œå¦‚å¯†ç ã€SSH ç§é’¥ã€SSL è¯ä¹¦æˆ–å…¶ä»–æ•°æ®ï¼Œä¸åº”é€šè¿‡ç½‘ç»œä¼ è¾“æˆ–æœªç»åŠ å¯†å­˜å‚¨åœ¨ Docker æ–‡ä»¶æˆ–åº”ç”¨ç¨‹åºçš„æºä»£ç ä¸­ã€‚
è¿™æ˜¯ä¸€ä¸ªæ¯”ç¯å¢ƒå˜é‡æ›´å®‰å…¨çš„é€‰æ‹©ã€‚ç¯å¢ƒå˜é‡æ›´å®¹æ˜“ä½¿ç”¨ï¼Œä½†æœ€é€‚åˆäºéä¿å¯†çš„é…ç½®é¡¹ç›®ã€‚ ä¼¼ä¹å¾ˆé€‚åˆç”¨äºå­˜å‚¨auth_tokenå€¼ã€‚
è¯·å‚é˜…docsä¸­å…³äºç§˜å¯†çš„æ›´å¤šä¿¡æ¯å’Œå®ƒçš„è®¾è®¡ã€‚
åˆ›å»ºä¸€ä¸ªç§˜å¯† ç§˜å¯†åç§°å¿…é¡»éµå¾ª DNS-1123 æƒ¯ä¾‹ï¼Œç”±å°å†™å­—æ¯æ•°å­—å­—ç¬¦æˆ–â€™-â€˜ç»„æˆï¼Œå¹¶ä¸”å¿…é¡»ä»¥ä¸€ä¸ªå­—æ¯æ•°å­—å­—ç¬¦å¼€å§‹å’Œç»“æŸ
ä»ä¸€ä¸ªç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚
echo -n &lt;auth_token> | faas-cli secret create auth-token æµ‹è¯•ç§˜å¯†æ˜¯å¦è¢«åˆ›å»ºã€‚
faas-cli secret ls æ³¨æ„ï¼šè¯·è®°ä½ï¼Œ-gæ ‡å¿—å¯ä»¥åœ¨ç½‘å…³ä¹‹é—´è½»æ¾åˆ‡æ¢ã€‚ è¿™ä¹Ÿé€‚ç”¨äºç§˜å¯†ã€‚
kubectl get secret auth-token -n openfaas-fn -o json æ³¨æ„ï¼šå¦‚æœä½ åœ¨è¿œç¨‹ç½‘å…³ä¸Šéƒ¨ç½²ä½ çš„å‡½æ•°ï¼Œç¡®ä¿ä½ åœ¨ä½ ç”¨äºç½‘å…³çš„è™šæ‹Ÿæœºä¸Šåˆ›å»ºä½ çš„ç§˜å¯†ã€‚...</p></section><footer class=entry-footer><span title="2022-01-04 13:44:12 +0800 +0800">January 4, 2022</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Theme PaperMod</footer><a class=entry-link aria-label="post link to Openfaas Workshop Lab10" href=/post/openfaas-workshop-lab10/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://github.com/openfaas/media/raw/master/OpenFaaS_Magnet_3_1_png.png alt></figure><header class=entry-header><h2>Openfaas Workshop Lab9</h2></header><section class=entry-content><p>Lab 9 - é«˜çº§å‡½æ•° - è‡ªåŠ¨ç¼©æ”¾
è‡ªåŠ¨ç¼©æ”¾å‡½æ•°çš„åº”ç”¨ æ­£å¦‚æ–‡æ¡£ä¸­æè¿°çš„é‚£æ ·ï¼ŒOpenFaaS å¸¦æœ‰è‡ªåŠ¨æ‰©å±•å‡½æ•°ã€‚åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹è‡ªåŠ¨æ‰©å±•æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚
å‰ææ¡ä»¶ åœ¨å®Œæˆäº†Lab 1ä¸­å¯¹ OpenFaaS çš„è®¾ç½®åï¼Œä½ å°†æ‹¥æœ‰è§¦å‘è‡ªåŠ¨æ‰©å±•æ‰€éœ€çš„ä¸€åˆ‡ã€‚
å¤šä¸ªå·¥å…·å¯ä»¥ç”¨æ¥åˆ›å»ºè¶³å¤Ÿçš„æµé‡æ¥è§¦å‘è‡ªåŠ¨æ‰©å±• - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`curlâ€™å°†è¢«ä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“åœ¨ Mac å’Œ Linux ä¸Šä½¿ç”¨ï¼Œå¹¶åœ¨ Windows ä¸Šä¸ Git Bash æ‰“åŒ…ã€‚
è‡ªåŠ¨æ‰©å±•çš„èƒŒæ™¯ å¼€ç®±å³ç”¨çš„ OpenFaaS æ˜¯è¿™æ ·é…ç½®çš„ï¼Œå®ƒå°†æ ¹æ® Prometheus æµ‹é‡çš„ æ¯ç§’è¯·æ±‚æŒ‡æ ‡è¿›è¡Œè‡ªåŠ¨æ‰©å±•ã€‚ è¿™ä¸ªæŒ‡æ ‡æ˜¯åœ¨æµé‡é€šè¿‡ API ç½‘å…³çš„æ—¶å€™æ•è·çš„ã€‚å¦‚æœè¶…è¿‡äº†å®šä¹‰çš„ æ¯ç§’è¯·æ±‚çš„é˜ˆå€¼ï¼ŒAlertManager å°±ä¼šå¯åŠ¨ã€‚è¿™ä¸ªé˜ˆå€¼åº”è¯¥è¢«é‡æ–°é…ç½®ä¸ºé€‚åˆç”Ÿäº§ä½¿ç”¨çš„æ°´å¹³ï¼Œå› ä¸ºåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸ºäº†æ¼”ç¤ºï¼Œå®ƒè¢«è®¾ç½®ä¸ºä¸€ä¸ªä½å€¼ã€‚
åœ¨æ–‡æ¡£ç½‘ç«™ä¸­æ‰¾åˆ°æ›´å¤šå…³äºè‡ªåŠ¨ç¼©æ”¾çš„ä¿¡æ¯ã€‚
æ¯æ¬¡è­¦æŠ¥è¢« AlertManager è§¦å‘æ—¶ï¼ŒAPI ç½‘å…³å°†æŠŠä½ çš„å‡½æ•°çš„ä¸€å®šæ•°é‡çš„å‰¯æœ¬æ·»åŠ åˆ°é›†ç¾¤ä¸­ã€‚OpenFaaS æœ‰ä¸¤ä¸ªé…ç½®é€‰é¡¹ï¼Œå…è®¸æŒ‡å®šå¤åˆ¶çš„èµ·å§‹/æœ€ä½æ•°é‡ï¼Œä¹Ÿå…è®¸åœæ­¢å¤åˆ¶çš„æœ€å¤§æ•°é‡ã€‚
ä½ å¯ä»¥é€šè¿‡è®¾ç½®com.openfaas.scale.minæ¥æ§åˆ¶å‡½æ•°çš„æœ€å°å¤åˆ¶é‡ï¼Œç›®å‰é»˜è®¤å€¼ä¸º1ã€‚
ä½ å¯ä»¥é€šè¿‡è®¾ç½®com.openfaas.scale.maxæ¥æ§åˆ¶ä¸€ä¸ªå‡½æ•°å¯ä»¥äº§ç”Ÿçš„æœ€å¤§å¤åˆ¶é‡ï¼Œç›®å‰é»˜è®¤å€¼æ˜¯20ã€‚
æ³¨æ„: å¦‚æœä½ æŠŠcom.openfaas.scale.minå’Œcom.openfaas.scale.maxè®¾ç½®æˆç›¸åŒçš„å€¼ï¼Œä½ å°±ä¼šç¦ç”¨è‡ªåŠ¨ç¼©æ”¾å‡½æ•°ã€‚
æŸ¥çœ‹ Prometheus ä½ éœ€è¦è¿è¡Œè¿™ä¸ªç«¯å£è½¬å‘å‘½ä»¤ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨http://127.0.0.1:9090è®¿é—® Prometheusã€‚
kubectl port-forward deployment/prometheus 9090:9090 -n openfaas ç°åœ¨æ·»åŠ ä¸€ä¸ªæ‰€æœ‰æˆåŠŸè°ƒç”¨éƒ¨ç½²çš„å‡½æ•°çš„å›¾ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œrate( gateway_function_invocation_total{code="200"} [20s])ä½œä¸ºæŸ¥è¯¢æ¥å®ç°ã€‚å¯¼è‡´ä¸€ä¸ªçœ‹èµ·æ¥åƒè¿™æ ·çš„é¡µé¢ã€‚...</p></section><footer class=entry-footer><span title="2022-01-04 13:44:09 +0800 +0800">January 4, 2022</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Theme PaperMod</footer><a class=entry-link aria-label="post link to Openfaas Workshop Lab9" href=/post/openfaas-workshop-lab9/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://github.com/openfaas/media/raw/master/OpenFaaS_Magnet_3_1_png.png alt></figure><header class=entry-header><h2>Openfaas Workshop Lab8</h2></header><section class=entry-content><p>Lab 8 - é«˜çº§å‡½æ•° - è¶…æ—¶
åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚
$ mkdir -p lab8 \ && cd lab8 ç”¨read_timeoutæ‰©å±•è¶…æ—¶æ—¶é—´ timeoutå¯¹åº”äºä¸€ä¸ªå‡½æ•°å¯ä»¥è¿è¡Œå¤šé•¿æ—¶é—´ï¼Œç›´åˆ°è¢«æ‰§è¡Œã€‚å®ƒå¯¹é˜²æ­¢åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è¯¯æ“ä½œå¾ˆé‡è¦ã€‚
æœ‰å‡ ä¸ªåœ°æ–¹å¯ä»¥ä¸ºä½ çš„å‡½æ•°é…ç½®è¶…æ—¶ï¼Œåœ¨æ¯ä¸ªåœ°æ–¹éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥å®Œæˆã€‚
å‡½æ•°è¶…æ—¶
read_timeout - å…è®¸å‡½æ•°é€šè¿‡ HTTP è¯»å–ä¸€ä¸ªè¯·æ±‚çš„æ—¶é—´
write_timeout - å…è®¸å‡½æ•°åœ¨ HTTP ä¸Šå†™ä¸€ä¸ªå“åº”çš„æ—¶é—´
exec_timeout - ä¸€ä¸ªå‡½æ•°åœ¨è¢«ç»ˆæ­¢å‰å¯ä»¥è¿è¡Œçš„æœ€å¤§æ—¶é—´ã€‚
API ç½‘å…³çš„é»˜è®¤æ—¶é—´æ˜¯ 20 ç§’ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹åœ¨ä¸€ä¸ªå‡½æ•°ä¸Šè®¾ç½®ä¸€ä¸ªæ›´çŸ­çš„è¶…æ—¶æ—¶é—´ã€‚
faas-cli new --lang python3 sleep-for --prefix="&lt;your-docker-username-here>" ç¼–è¾‘handler.pyã€‚
import time import os def handle(req): """handle a request to the function Args: req (str): request body """ sleep_duration = int(os....</p></section><footer class=entry-footer><span title="2022-01-04 13:44:05 +0800 +0800">January 4, 2022</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Theme PaperMod</footer><a class=entry-link aria-label="post link to Openfaas Workshop Lab8" href=/post/openfaas-workshop-lab8/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://github.com/openfaas/media/raw/master/OpenFaaS_Magnet_3_1_png.png alt></figure><header class=entry-header><h2>Openfaas Workshop Lab7</h2></header><section class=entry-content><p>å®éªŒ 7â€“å¼‚æ­¥å‡½æ•°
åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚
$ mkdir -p lab7 \ && cd lab7 åŒæ­¥ä¸å¼‚æ­¥åœ°è°ƒç”¨ä¸€ä¸ªå‡½æ•° å½“ä½ åŒæ­¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¸€ä¸ªè¿æ¥ä¼šé€šè¿‡ç½‘å…³è¿æ¥åˆ°ä½ çš„å‡½æ•°ï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­ä¿æŒå¼€æ”¾ã€‚åŒæ­¥è°ƒç”¨æ˜¯*é˜»å¡çš„ï¼Œæ‰€ä»¥ä½ åº”è¯¥çœ‹åˆ°ä½ çš„å®¢æˆ·ç«¯æš‚åœï¼Œå˜å¾—ä¸æ´»è·ƒï¼Œç›´åˆ°è¯¥å‡½æ•°å®Œæˆå…¶ä»»åŠ¡ã€‚
ç½‘å…³ä½¿ç”¨çš„è·¯ç”±æ˜¯ã€‚/function/&lt;function_name>ã€‚ ä½ å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å®ƒå®Œæˆ ä½ åœ¨è°ƒç”¨åå¾—åˆ°ç»“æœ ä½ çŸ¥é“å®ƒæ˜¯é€šè¿‡è¿˜æ˜¯å¤±è´¥ å¼‚æ­¥ä»»åŠ¡ä»¥ç±»ä¼¼çš„æ–¹å¼è¿è¡Œï¼Œä½†æœ‰ä¸€äº›åŒºåˆ«ã€‚
ç½‘å…³ä½¿ç”¨ä¸åŒçš„è·¯ç”±ï¼š/async-function/&lt;function_name>ã€‚ å®¢æˆ·ç«¯ä»ç½‘å…³å¾—åˆ°ä¸€ä¸ªç«‹å³çš„202 æ¥å—çš„å“åº”ã€‚ è¯¥å‡½æ•°ç¨åä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—å·¥ä½œå™¨æ¥è°ƒç”¨ é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æœè¢«ä¸¢å¼ƒ è®©æˆ‘ä»¬è¯•ä¸€è¯•å¿«é€Ÿæ¼”ç¤ºã€‚
faas-cli new --lang dockerfile long-task --prefix="&lt;your-docker-username-here>" ç¼–è¾‘long-task/Dockerfileå¹¶å°† fprocess æ”¹ä¸ºsleep 1ã€‚
ç°åœ¨æ„å»ºã€éƒ¨ç½²å¹¶åŒæ­¥è°ƒç”¨ä½ çš„å‡½æ•° 10 æ¬¡ï¼Œåƒè¿™æ ·ã€‚
echo -n "" | faas-cli invoke long-task echo -n "" | faas-cli invoke long-task echo -n "" | faas-cli invoke long-task echo -n "" | faas-cli invoke long-task echo -n "" | faas-cli invoke long-task echo -n "" | faas-cli invoke long-task echo -n "" | faas-cli invoke long-task echo -n "" | faas-cli invoke long-task echo -n "" | faas-cli invoke long-task echo -n "" | faas-cli invoke long-task ç°åœ¨å¼‚æ­¥è°ƒç”¨è¯¥å‡½æ•° 10 æ¬¡ã€‚...</p></section><footer class=entry-footer><span title="2022-01-04 13:44:02 +0800 +0800">January 4, 2022</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Theme PaperMod</footer><a class=entry-link aria-label="post link to Openfaas Workshop Lab7" href=/post/openfaas-workshop-lab7/></a></article><footer class=page-footer><nav class=pagination><a class=next href=/tags/openfaas/page/2/>Next Page Â»</a></nav></footer></main><footer class=footer><span>&copy; 2022 <a href>PaperMod</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>