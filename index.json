[{"content":"ä¸ºäº†åº†ç¥æˆ‘ä»¬å¿ƒçˆ±çš„è¯­è¨€çš„ 1.X ç³»åˆ—çš„ç¬¬ä¸€å¹´ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œå…¶ä¸­æœ‰å‡ ä¸ª bug çš„ä¿®å¤å’Œæ”¹è¿›ã€‚\nä¸‹é¢æˆ‘ä»¬åˆ—å‡ºäº†æœ€é‡è¦æˆ–æœ€æœ‰è¶£çš„å˜åŒ–ï¼Œä½†æ²¡æœ‰æåˆ°å‡ ä¸ªé”™è¯¯çš„ä¿®å¤å’Œè¾ƒå°çš„æ”¹è¿›ã€‚æ¬²äº†è§£æ›´å¤šç»†èŠ‚ï¼Œè¯·è®¿é—®æ›´æ–°æ—¥å¿—ã€‚é‚£äº›å¯¹æ–°çš„è§£é‡Šå™¨æ„Ÿåˆ°å…´å¥‹çš„äººå¯èƒ½ä¼šé«˜å…´åœ°å‘ç°æ­£åœ¨è¿›è¡Œçš„æ”¹è¿›å·¥ä½œã€‚\né¢„å»ºåŒ…å¯ä»¥åœ¨ GitHub Releases å’Œæˆ‘ä»¬çš„å®˜æ–¹å‘å¸ƒæ¸ é“ä¸Šæ‰¾åˆ°ã€‚å®‰è£…è¯´æ˜è§ crystal-lang.org/installã€‚\nåƒå¾€å¸¸ä¸€æ ·ï¼Œçªç ´æ€§çš„æ”¹åŠ¨ä¼šç”¨âš ï¸æ ‡è®°ã€‚\nç»Ÿè®¡èµ„æ–™ åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬åŒ…å«äº†è‡ª 1.3.2 ç‰ˆæœ¬ä»¥æ¥ç”± 31 ä½è´¡çŒ®è€…æ‰€åšçš„ 132 é¡¹ä¿®æ”¹ã€‚æˆ‘ä»¬æ„Ÿè°¢æ‰€æœ‰ä¸ºæ”¹è¿›è¯­è¨€æ‰€åšçš„åŠªåŠ› â¤ï¸\nå¯¹ WASM çš„æ”¯æŒ 1.4.0 ç‰ˆç›®å‰åªæ”¯æŒç¼–è¯‘æˆ WebAssemblyï¼ˆå°†ç¨‹åºä¸åŸºäº WASI çš„ LibC è¿æ¥ï¼‰ã€‚æœ‰å‡ ä¸ªé‡è¦çš„éƒ¨åˆ†ç¼ºå¤±ï¼›è¯·æŸ¥çœ‹#10870 äº†è§£è¯¦æƒ…ã€‚æœ€æ–°çš„è¯•ç”¨è¯´æ˜æ˜¯ã€‚\nå†™ä¸€ä¸ªç®€å•çš„ crystal ç¨‹åºï¼Œæ¯”æ–¹è¯´ã€‚\nputs \u0026#34;Hello WebAssembly!\u0026#34; å¹¶å°†å…¶å‘½åä¸º main.crã€‚ä½ ä¹Ÿå¯ä»¥å°è¯•æ›´å¤æ‚çš„ç¨‹åºï¼Œä½†è¯·è®°ä½ï¼Œè¿™ä»ç„¶æ˜¯å®éªŒæ€§çš„ï¼Œè¿˜æ²¡æœ‰å‡†å¤‡å¥½ç”¨äºç”Ÿäº§ã€‚\nä½ éœ€è¦åœ¨ä½ çš„ç³»ç»Ÿä¸Šå®‰è£… wasm-ldï¼Œå®ƒæ˜¯æ¥è‡ª LLVM çš„ WebAssembly è¿æ¥ç¨‹åºã€‚åœ¨ä¸€äº›ç³»ç»Ÿä¸Šï¼Œå®ƒæ˜¯é€šè¿‡å®‰è£… ld æ¥å®ç°çš„ã€‚é€šè¿‡ä½¿ç”¨ wasm-ld \u0026ndash;version ç¡®è®¤å®ƒå·²ç»å®‰è£…ã€‚ä¹Ÿè¯·æ£€æŸ¥å®ƒçš„ç‰ˆæœ¬æ˜¯å¦ä¸ Crystal çš„ LLVM ç‰ˆæœ¬ç›¸ä¼¼ï¼ˆ crystal \u0026ndash;versionï¼‰ã€‚\nä½ å°†éœ€è¦ libc å’Œ libpcre ç¼–è¯‘åˆ° wasm32-wasi ç›®æ ‡ä¸Šã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œè·å–å®ƒä»¬çš„é¢„ç¼–è¯‘ç‰ˆæœ¬ã€‚æ£€æŸ¥ wasm32-wasi-libs.tar.gz èµ„äº§ï¼Œä¸‹è½½å¹¶è§£å‹å®ƒã€‚\nç”¨ crystal build main.cr \u0026ndash;cross-compile \u0026ndash;target wasm32-wasi è¿›è¡Œäº¤å‰ç¼–è¯‘ã€‚\né“¾æ¥åˆ°\nwasm-ld main.wasm -o main-final.wasm -L \u0026#34;$PWD/wasm32-wasi-libs\u0026#34; -lc -lpcre -lclang_rt.builtins-wasm32 ç”¨ wasmer main-final.wasm æˆ– wasmtime main-final.wasm è¿è¡Œ WebAssembly æ¨¡å—ï¼Œå¹¶è·å¾—ä¹è¶£ã€‚\næ³¨æ„ï¼šç›®å‰æœ‰#11948ï¼Œå°†ç®€åŒ–ä¸Šè¿°ç¬¬ 4 å’Œç¬¬ 5 æ­¥ã€‚\nå¯¹å®ä¾‹å’Œç±»å˜é‡è¿›è¡Œæ›´å¥½çš„ç±»å‹æ¨ç† åœ¨è¿™ä¸ªç‰ˆæœ¬ä¹‹å‰ï¼Œåƒä¸‹é¢è¿™æ ·çš„ç®€å•ç¨‹åºä¼šå› ä¸ºæ— æ³•æ¨æ–­å‡ºå®ä¾‹å˜é‡çš„ç±»å‹è€Œæ— æ³•æ‰“å­—ã€‚\nclass DisplayHello  DELAY = 10.milliseconds   @timer_countdown = DELAY end ç°åœ¨å®ƒç¼–è¯‘å¾—å¾ˆå¥½ï¼Œæ­£ç¡®æ¨æ–­å‡º@timer_countdown çš„ç±»å‹æ˜¯ Time::Spanã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ä¹Ÿå¯ä»¥çœç•¥ç±»å‹ï¼ˆè¯¦æƒ…ï¼‰ã€‚\nclass DisplayHello   def initialize(delay : Time::Span)  @timer_countdown = delay + 10.seconds  end end é›†åˆ Enumerable\nåœ¨è¿™ä¸ªç±»ä¸­æœ‰ä¸¤ä¸ªç›¸å…³çš„æ”¹è¿›ã€‚é¦–å…ˆï¼Œæœ‰äº†#find å’Œ#index çš„æé«˜å˜ä½“ï¼Œåˆ†åˆ«ç§°ä¸º#findï¼å’Œ#indexï¼ã€‚\n[1, 2, 3].find! { |x| x \u0026gt; 1 } # =\u0026gt; 2 [1, 2, 3].find! { |x| x \u0026gt; 4 } # raises Enumerable::NotFoundError  [1, 2, 3].index! { |x| x \u0026gt; 1 } # =\u0026gt; 1 [1, 2, 3].index! { |x| x \u0026gt; 4 } # raises Enumerable::NotFoundError å…¶æ¬¡ï¼ŒEnumerable#tally å’Œ#tally_by å¯ä»¥è¢«èµ‹äºˆä¸€ä¸ªç°æœ‰çš„å“ˆå¸Œå€¼æ¥å¡«å……ã€‚\nHash\nå“ˆå¸Œä¹Ÿå¾—åˆ°äº†ä¸¤é¡¹æ”¹è¿›ã€‚é¦–å…ˆï¼Œselectã€selectï¼å’Œ reject ç°åœ¨å¯ä»¥æ¥å—ä»»ä½•å¯æšä¸¾çš„ä¸œè¥¿ã€‚åœ¨ 1.4.0 ä¹‹å‰ï¼Œåªæ¥å— Array å’Œ Tupleã€‚\nå…¶æ¬¡ï¼Œæœ‰ä¸€ä¸ªæ–°çš„æ–¹æ³• Hash#updateï¼Œç»™å®šä¸€ä¸ªé”®å’Œä¸€ä¸ªå—ï¼Œç”¨è¯¥å—çš„ç»“æœå€¼æ›´æ–°å…ƒç´ ã€‚è¯¥æ–¹æ³•è¿”å›æ—§å€¼ã€‚\nh = {\u0026#34;a\u0026#34; =\u0026gt; 0, \u0026#34;b\u0026#34; =\u0026gt; 1} h.update(\u0026#34;b\u0026#34;) { |v| v + 41 } # =\u0026gt; 1 h[\u0026#34;b\u0026#34;] # =\u0026gt; 42 å…¶ä»–æ˜¾è‘—å˜åŒ–  Support for LLVM 14 (#11905). Completed compiler support for Int128 (#11576). âš ï¸ Support for scientific notation in BigFloat#to_s (#10632). âš ï¸ Drop support of undocumented flag skip_abstract_def_check (#9217). New IO#getb_to_end method for reading all the Bytes of an IO (docs). New macro method parse_type to parse a type given as a String (docs).  ","permalink":"https://zhenfeng-zhu.github.io/post/crystal-1.4.0/","summary":"ä¸ºäº†åº†ç¥æˆ‘ä»¬å¿ƒçˆ±çš„è¯­è¨€çš„ 1.X ç³»åˆ—çš„ç¬¬ä¸€å¹´ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œå…¶ä¸­æœ‰å‡ ä¸ª bug çš„ä¿®å¤å’Œæ”¹è¿›ã€‚\nä¸‹é¢æˆ‘ä»¬åˆ—å‡ºäº†æœ€é‡è¦æˆ–æœ€æœ‰è¶£çš„å˜åŒ–ï¼Œä½†æ²¡æœ‰æåˆ°å‡ ä¸ªé”™è¯¯çš„ä¿®å¤å’Œè¾ƒå°çš„æ”¹è¿›ã€‚æ¬²äº†è§£æ›´å¤šç»†èŠ‚ï¼Œè¯·è®¿é—®æ›´æ–°æ—¥å¿—ã€‚é‚£äº›å¯¹æ–°çš„è§£é‡Šå™¨æ„Ÿåˆ°å…´å¥‹çš„äººå¯èƒ½ä¼šé«˜å…´åœ°å‘ç°æ­£åœ¨è¿›è¡Œçš„æ”¹è¿›å·¥ä½œã€‚\né¢„å»ºåŒ…å¯ä»¥åœ¨ GitHub Releases å’Œæˆ‘ä»¬çš„å®˜æ–¹å‘å¸ƒæ¸ é“ä¸Šæ‰¾åˆ°ã€‚å®‰è£…è¯´æ˜è§ crystal-lang.org/installã€‚\nåƒå¾€å¸¸ä¸€æ ·ï¼Œçªç ´æ€§çš„æ”¹åŠ¨ä¼šç”¨âš ï¸æ ‡è®°ã€‚\nç»Ÿè®¡èµ„æ–™ åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬åŒ…å«äº†è‡ª 1.3.2 ç‰ˆæœ¬ä»¥æ¥ç”± 31 ä½è´¡çŒ®è€…æ‰€åšçš„ 132 é¡¹ä¿®æ”¹ã€‚æˆ‘ä»¬æ„Ÿè°¢æ‰€æœ‰ä¸ºæ”¹è¿›è¯­è¨€æ‰€åšçš„åŠªåŠ› â¤ï¸\nå¯¹ WASM çš„æ”¯æŒ 1.4.0 ç‰ˆç›®å‰åªæ”¯æŒç¼–è¯‘æˆ WebAssemblyï¼ˆå°†ç¨‹åºä¸åŸºäº WASI çš„ LibC è¿æ¥ï¼‰ã€‚æœ‰å‡ ä¸ªé‡è¦çš„éƒ¨åˆ†ç¼ºå¤±ï¼›è¯·æŸ¥çœ‹#10870 äº†è§£è¯¦æƒ…ã€‚æœ€æ–°çš„è¯•ç”¨è¯´æ˜æ˜¯ã€‚\nå†™ä¸€ä¸ªç®€å•çš„ crystal ç¨‹åºï¼Œæ¯”æ–¹è¯´ã€‚\nputs \u0026#34;Hello WebAssembly!\u0026#34; å¹¶å°†å…¶å‘½åä¸º main.crã€‚ä½ ä¹Ÿå¯ä»¥å°è¯•æ›´å¤æ‚çš„ç¨‹åºï¼Œä½†è¯·è®°ä½ï¼Œè¿™ä»ç„¶æ˜¯å®éªŒæ€§çš„ï¼Œè¿˜æ²¡æœ‰å‡†å¤‡å¥½ç”¨äºç”Ÿäº§ã€‚\nä½ éœ€è¦åœ¨ä½ çš„ç³»ç»Ÿä¸Šå®‰è£… wasm-ldï¼Œå®ƒæ˜¯æ¥è‡ª LLVM çš„ WebAssembly è¿æ¥ç¨‹åºã€‚åœ¨ä¸€äº›ç³»ç»Ÿä¸Šï¼Œå®ƒæ˜¯é€šè¿‡å®‰è£… ld æ¥å®ç°çš„ã€‚é€šè¿‡ä½¿ç”¨ wasm-ld \u0026ndash;version ç¡®è®¤å®ƒå·²ç»å®‰è£…ã€‚ä¹Ÿè¯·æ£€æŸ¥å®ƒçš„ç‰ˆæœ¬æ˜¯å¦ä¸ Crystal çš„ LLVM ç‰ˆæœ¬ç›¸ä¼¼ï¼ˆ crystal \u0026ndash;versionï¼‰ã€‚\nä½ å°†éœ€è¦ libc å’Œ libpcre ç¼–è¯‘åˆ° wasm32-wasi ç›®æ ‡ä¸Šã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œè·å–å®ƒä»¬çš„é¢„ç¼–è¯‘ç‰ˆæœ¬ã€‚æ£€æŸ¥ wasm32-wasi-libs.tar.gz èµ„äº§ï¼Œä¸‹è½½å¹¶è§£å‹å®ƒã€‚\nç”¨ crystal build main.cr \u0026ndash;cross-compile \u0026ndash;target wasm32-wasi è¿›è¡Œäº¤å‰ç¼–è¯‘ã€‚","title":"Crystal 1.4.0"},{"content":"","permalink":"https://zhenfeng-zhu.github.io/post/hello/","summary":"","title":"Hello"},{"content":"åœ¨æˆ‘è¿„ä»Š 18 å¹´äººç”Ÿçš„å 10 å¹´é‡Œï¼Œæˆ‘ä¸€ç›´åœ¨è¿½å¯»ç€çš„æ˜¯ä¸€ç§çº·ä¹±çš„ã€å……æ»¡ææƒ§çš„çˆ±ã€‚æˆ‘æ˜¯ä¸€åä¸“ä¸šçš„è‡ªç”±å¼æ»‘é›ªè¿åŠ¨å‘˜ï¼Œè„šä¸Šçš„ä¸€åŒé›ªæ¿ã€22 è‹±å°ºé•¿çš„ u å‹æ± å’Œå„ç§ç‰¹æŠ€åŠ¨ä½œæ˜¯æˆ‘è‚¾ä¸Šè…ºç´ çš„ä¸»è¦æ¥æºï¼Œä¹Ÿæ˜¯æé™è¿åŠ¨ä¸­çœŸæ­£ä»¤äººä¸Šç˜¾çš„æ ¸å¿ƒè¦ç´ ã€‚\næ­£å¦‚æ‰€æœ‰é‚£äº›èƒ½è¿·å€’å¸¸äººçš„æ‹äººä¸€æ ·ï¼ˆè‡³å°‘æ˜¯åƒæˆ‘ä»å°è¯´ä¸­è¯»åˆ°çš„é‚£äº›ä¸€æ ·ï¼Œå› ä¸ºç°å®ç”Ÿæ´»ä¸­æˆ‘è¿˜ç¼ºä¹ç›¸åº”çš„ç»éªŒï¼‰ï¼Œä½ è¿™ä¸ªé‡è¦çš„å¦ä¸€åŠæœ‰æ—¶å¯èƒ½ä¼šå¾ˆâ€¦â€¦åå¤æ— å¸¸ã€‚å®é™…ä¸Šï¼Œâ€œææƒ§â€å¯ä»¥ç®—æ˜¯ä¸‰ç§ä¸åŒæ„Ÿè§‰çš„æ€»ç§°ï¼Œé‚£å°±æ˜¯å…´å¥‹ã€ä¸ç¡®å®šå’Œå‹åŠ›ã€‚\næˆ‘å·²ç»å‘ç°ï¼Œå¦‚æœè¿™äº›æ„Ÿè§‰èƒ½è¢«è¯†åˆ«å’Œç§¯æåœ°åˆ©ç”¨ï¼Œé‚£ä¹ˆæ¯ä¸€ç§æ„Ÿè§‰ä¸­éƒ½æœ‰ä¸€äº›å¾®å¦™çš„æŒ‡æ ‡å¯ä»¥å¸®åŠ©ä½ æˆåŠŸï¼Œè€Œå¦‚æœå…¶åŸç†è¢«å¿½è§†ï¼Œé‚£ä¹ˆè¿™äº›æ„Ÿè§‰å¯èƒ½å°±ä¼šæ˜¯ä½ å—ä¼¤çš„å‰å…†ã€‚\nè™½ç„¶ä»äº‹æé™è¿åŠ¨çš„è¿åŠ¨å‘˜å¾ˆå®¹æ˜“è¢«è´´ä¸Šâ€œæ— ç•â€æˆ–â€œä»»æ€§â€çš„æ ‡ç­¾ï¼Œä½†æ— è®ºæ˜¯æˆ‘ä¸ºæ„æ€æŠ€å·§è€ŒèŠ±è´¹çš„æ— æ•°ä¸ªå°æ—¶ï¼Œè¿˜æ˜¯åœ¨æ³¡æ²«å‘(æ³¡æ²«ç²’å­åˆ°å¤„éƒ½æ˜¯çš„é‚£ç§)é‡Œå’Œå®‰å…¨æ°”å›Šä¸Šåº¦è¿‡çš„æ— æ•°æ—¶é—´éƒ½å¯ä»¥è¡¨æ˜æƒ…å†µå¹¶éå¦‚æ­¤ã€‚\næˆ‘ä»¬è¦è¿åè‡ªå·±çš„ç”Ÿç‰©ç›´è§‰ï¼ŒæŠŠè‡ªå·±ç½®äºé£é™©ä¹‹ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ä¼šå°½ä¸€åˆ‡åŠªåŠ›åšå¥½èº«ä½“ä¸Šçš„å‡†å¤‡ï¼Œä½†å†å¤šçš„å®‰å…¨ç½‘æ¨¡æ‹Ÿè®­ç»ƒä¹Ÿæ— æ³•ç­‰åŒäºæˆ‘ä»¬ä»é™¡å¡ä¸Šèµ·é£ã€æŠŠèº«ä½“æŠ›åˆ°ç©ºä¸­å¹¶å³å°†è½åœ°æ—¶æ‰€å°†é¢å¯¹çš„é›ªå¡ï¼Œå®ƒæ˜¯ä¸ä¼šè®²æƒ…é¢çš„ã€‚\næˆ‘ä»¬å¹¶éæ— è§†ææƒ§ï¼Œè€Œæ˜¯è¦åŸ¹å…»æ·±åˆ»çš„è‡ªæˆ‘æ„è¯†ï¼Œå¹¶è¿›è¡Œæ·±æ€ç†Ÿè™‘çš„é£é™©è¯„ä¼°ï¼Œä»è€Œä¸ææƒ§å»ºç«‹èµ·ç‹¬ç‰¹çš„å…³ç³»ã€‚\nè¿™é¡¹å·¥ä½œçš„ç¬¬ä¸€æ­¥å«åšå…·è±¡åŒ–ï¼šåœ¨æˆ‘å°è¯•ä¸€ä¸ªæ–°çš„æŠ€å·§åŠ¨ä½œä¹‹å‰ï¼Œæˆ‘ä¼šæ„Ÿåˆ°èƒ¸è…”ï¼ˆå‡†ç¡®åœ°è¯´ï¼Œæ˜¯åœ¨æˆ‘çš„å–‰å’™åº•éƒ¨å’Œè†ˆè‚Œé¡¶éƒ¨ä¹‹é—´ï¼‰æœ‰ä¸€ç§ç´§å¼ æ„Ÿã€‚\næˆ‘æ·±å¸ä¸€å£æ°”ï¼Œé—­ä¸Šçœ¼ç›ã€‚å½“æˆ‘çˆ¬ä¸Šå·¨å¤§çš„èµ·é£å¡é“æ—¶ï¼Œæˆ‘ä¼šåœ¨æƒ³è±¡ä¸­ä¼¸å±•æˆ‘çš„åŒè…¿ä»¥æœ€å¤§é™åº¦åœ°æé«˜å‡åŠ›ã€‚ç„¶åï¼Œæˆ‘è¦åœ¨è„‘æµ·ä¸­æç»˜å¦‚ä½•ä»¥ç›¸åçš„æ–¹å‘æ‰­è½¬æˆ‘çš„ä¸ŠåŠèº«ï¼Œäº§ç”Ÿæ‰­çŸ©ï¼Œç„¶åå†è®©å®ƒæœå¦ä¸€ä¸ªæ–¹å‘å¼¹å›æ¥ã€‚\nç°åœ¨ï¼Œåœ¨æˆ‘çš„æ„è¯†é‡Œï¼Œæˆ‘å·²ç»æ˜¯é£åœ¨ç©ºä¸­çš„çŠ¶æ€äº†ã€‚\næˆ‘åœ¨è·ƒèµ·åç¬¬ä¸€æ—¶é—´å°±ä¼šçœ‹åˆ°è‡ªå·±çš„èƒŒåï¼Œç„¶åèº«ä½“æ—‹è½¬ä¼šæŠŠæˆ‘çš„è§†çº¿æ‹½å‘å¤´é¡¶ä¸‡é‡Œæ— äº‘çš„å¤©ç©ºã€‚é£å£°å¦‚åŒæˆ‘è€³æœµé‡Œçš„ä¸€ç§éŸ³ä¹ï¼Œæ¯ä¸€ä¸ª 360 åº¦çš„æ—‹è½¬éƒ½åœ¨ä¸ºæˆ‘çš„è¿åŠ¨æä¾›éŸ³ä¹èˆ¬çš„èŠ‚æ‹ã€‚\nå½“æˆ‘çš„è„šåœ¨æˆ‘çš„èº«ä½“ä¸‹é¢æ—¶ï¼Œæˆ‘å°±å¯ä»¥åœ¨æŠŠèº«ä½“æ‹‰åˆ°ç¬¬äºŒä¸ªç©ºç¿»å‰çš„ä¸€ç¬é—´å‘ç°æœ€ç»ˆè½åœ°çš„åœ°ç‚¹ã€‚å½“æˆ‘å›åˆ°å¯ä»¥é¢å‘å‰æ–¹çš„ä½ç½®æ—¶ï¼Œæˆ‘ä¼šæƒ³è±¡ç€æˆ‘çš„è…¿åœ¨æˆ‘çš„è„šä¸‹æ‘†åŠ¨ï¼Œå¹¶è®©é›ªé‹çš„å‰ç«¯æ‰¿è½½ç€æˆ‘çš„é‡é‡ç¢°åˆ°åœ°é¢ã€‚\næˆ‘éœ²å‡ºå¾®ç¬‘ï¼Œç„¶åçå¼€çœ¼ç›ï¼Œä¸€ä¸ª 1440 åº¦çš„ç¿»è½¬åŠ¨ä½œå°±å®Œæˆäº†ã€‚\nåœ¨å®Œæˆâ€œå…·è±¡åŒ–â€çš„å‡ ç§’ä¹‹åï¼Œæˆ‘èƒ¸è…”ä¸­çš„ç´§è¿«æ„Ÿä¼šæœ‰ä¸€é˜µä¸Šä¸‹çš„æ³¢åŠ¨ï¼Œç„¶åå¼€å§‹æ‰©æ•£â€”â€”è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å·²ç»æ¥åˆ°ç ´èŒ§æˆè¶çš„å…³é”®é˜¶æ®µã€‚\nå…´å¥‹æ„Ÿæ˜¯è‚¾ä¸Šè…ºç´ çš„äº§ç‰©ï¼Œä¹Ÿæ˜¯æˆ‘æ‰€é…·çˆ±å’Œç€è¿·çš„å­˜åœ¨ã€‚æˆ‘æ—¢æœ‰ç€å¯¹è‡ªå·±å®‰å…¨åˆ›é€ å¥‡è¿¹çš„ä¿¡å¿ƒï¼Œä¹Ÿä¼šäº§ç”Ÿå¯¹å³å°†åˆ°æ¥çš„ä¸å¯é¢„çŸ¥ä½“éªŒçš„å…´å¥‹æ„Ÿï¼ŒäºŒè€…çš„å¹³è¡¡éå¸¸ä¸ç¨³å®šã€‚æˆ‘å¬è¯´è¿™ä¸ªçŠ¶æ€å¯ä»¥è¢«ç§°ä¸ºâ€œå…¥å¢ƒï¼ˆzoneï¼‰â€ï¼Œå»å¹´ç§‹å¤©ï¼Œå½“æˆ‘æˆä¸ºå†å²ä¸Šç¬¬ä¸€ä¸ªå®Œæˆ 1440 åº¦åè½´è½¬ä½“åŠ¨ä½œçš„çš„å¥³æ€§åŒæ¿æ»‘é›ªè¿åŠ¨å‘˜æ—¶ï¼Œæˆ‘å°±æ›¾ä½“ä¼šè¿‡è¿™æ ·çš„å¿ƒå¢ƒã€‚\nä¸å¹¸çš„æ˜¯ï¼Œä½ å¿ƒä¸­çš„ä¸ç¡®å®šæ„Ÿå¾€å¾€å¾ˆå®¹æ˜“å°±ä¼šå‹å€’è‡ªä¿¡å¿ƒã€‚\nä¸å®Œç¾çš„å‡†å¤‡ä¼šä½¿æˆ‘çš„æ‰‹å¿ƒå‡ºæ±—ï¼Œå¹¶ä½¿å¾—æˆ‘ä¹‹å‰æ‰€è¯´çš„é‚£ä¸ªæ„Ÿåˆ°ç´§å¼ çš„ä½ç½®è¢«è½¬ç§»åˆ°è‡ªå·±çš„èƒƒé‡Œï¼Œä»è€Œä½¿ä½ çš„æ¯æ¬¡å‘¼å¸éƒ½æ¯”ä¸Šä¸€æ¬¡æ›´æµ…ã€‚è¿™ç§æ„Ÿè§‰ä¸æ˜¯ææ…Œï¼Œè€Œæ˜¯æŸç§ç±»ä¼¼äºç•æƒ§çš„æ„Ÿè§‰ã€‚å±é™©çš„ä¿¡å·ä¼šæ¿€å‘å‡ºè¿›åŒ–çš„æœ¬èƒ½ã€‚\nå¦‚æœæˆ‘é€‰æ‹©å¿½ç•¥è¿™ä¸ªå®‰å…¨æœºåˆ¶ï¼Œæˆ‘çš„èº«ä½“å¯èƒ½ä¼šåœ¨ç©ºä¸­ä¸ç”±è‡ªä¸»åœ°è¡ŒåŠ¨ï¼Œæ—‹è½¬ä¼šå¤±å»æ§åˆ¶ï¼Œå¹¶è¿«ä½¿æˆ‘ä¸ºå³å°†é­å—çš„å†²å‡»åšå¥½å‡†å¤‡ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™çš„æˆ‘çœŸçš„è¦ææƒ§äº†ï¼šå¦‚æœå®Œå…¨æŠ•å…¥è¿™ä¸ªåŠ¨ä½œï¼Œå¯èƒ½ä¼šäº§ç”Ÿç¾éš¾æ€§çš„åæœã€‚\næ¯ä¸ªè‡ªç”±å¼æ»‘é›ªè¿åŠ¨å‘˜éƒ½è¦ä»¥è¯†åˆ«å‡ºå…´å¥‹æ„Ÿå’Œä¸ç¡®å®šæ„Ÿä¹‹é—´çš„ç»†å¾®å·®åˆ«ä¸ºç›®æ ‡ï¼Œä»¥ä¾¿åœ¨æœ€å¤§é™åº¦åœ°å‘æŒ¥èƒ½åŠ›çš„åŒæ—¶ï¼ŒæŠŠå—ä¼¤çš„é£é™©å‡å°‘åˆ°æœ€å°ã€‚\næœ€åè¦è®²çš„å°±æ˜¯å‹åŠ›ã€‚è¿™æ˜¯ä¸€ç§ç”¨é€”å¯èƒ½ä¼šå¾ˆå¹¿æ³›çš„èƒ½é‡æºã€‚åœ¨æœ¬æ–‡æåˆ°çš„ä¸ææƒ§ç›¸å…³çš„å‡ ä¸ªæ–¹é¢ä¸­ï¼Œå‹åŠ›æ˜¯æœ€ä¸»è§‚çš„ä¸€ä¸ªé¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªäººå¯¹äºå‹åŠ›çš„ä½“éªŒä¼šå—åˆ°è‡ªèº«å®è·µç»éªŒå’Œæ€æƒ³è§‚ç‚¹çš„å½±å“ã€‚\nå®¶äººå’Œæœ‹å‹çš„æœŸæœ›ï¼Œæ¿€çƒˆç«äº‰çš„æ—¶æ®µï¼Œä¹ƒè‡³äºå¯èƒ½è·å¾—èµåŠ©çš„æœºé‡ï¼Œéƒ½å¯èƒ½ä¸ºä¸€ä¸ªé«˜å‹çš„å¤–åœ¨ç¯å¢ƒæä¾›æ”¯æ’‘ã€‚å¯¹äºé‚£äº›èƒ½æŠŠæ¡åˆ†å¯¸çš„èµ›æ‰‹æ¥è¯´ï¼Œå‹åŠ›å¯ä»¥å˜æˆä¸€ç§å¸®ä»–ä»¬è¿æ¥æŒ‘æˆ˜çš„ç§¯æåŠ›é‡ã€‚ä½†å‹åŠ›ä¹Ÿå¯èƒ½ä¼šå‡­å€Ÿä¸€å·±ä¹‹åŠ›å°±è®©ä½ ä¸€è´¥æ¶‚åœ°ã€‚\nä¸è¿‡ï¼Œå¯¹äºè¿™ç§åŸ‹è—åœ¨å¿ƒåº•çš„ã€æ¸´æœ›â€œè¯æ˜è‡ªå·±â€çš„æ„Ÿè§‰ï¼Œè¿åŠ¨å‘˜æ—¢å¯èƒ½ä¼šé€‰æ‹©å‹åˆ¶å®ƒï¼Œä¹Ÿå¯èƒ½é€‰æ‹©å¼ºåŒ–å®ƒï¼Œè€Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸Šè¦å–å†³äºä»–ä»¬çš„è‡ªä¿¡å¿ƒã€‚\nä½œä¸ºä¸€ä¸ªåˆšåˆšæˆå¹´çš„å¥³è¿åŠ¨å‘˜ï¼Œæˆ‘å¯¹äºè¿™æ–¹é¢è¿˜æ˜¯å¾ˆæœ‰äº›è‡ªè±ªçš„ï¼Œæˆ‘å¯ä»¥å¢å¼ºè‡ªå·±çš„è‡ªå°Šï¼Œå¹¶å°½é‡å‡å°‘è‡ªå·±å¯¹äºå¤–ç•ŒæœŸå¾…çš„éœ€æ±‚ï¼Œä»è€Œæ§åˆ¶æˆ‘èº«è¾¹çš„å‹åŠ›ã€‚\næ— è®ºå­¤èº«ä¸€äººè¿˜æ˜¯é¢å‘æ•´ä¸ªä¸–ç•Œï¼Œæˆ‘éƒ½ä¸“æ³¨äºæ„Ÿæ©å½“ä¸‹ã€åˆ¤æ–­å½“ä¸‹ï¼Œå¹¶äº«å—ä½“è‚²å¸¦ç»™æˆ‘çš„å¿«ä¹ã€‚\nè™½è¯´æˆ‘ä¸ªäººå’Œè¿™ä¸ªä¸–ç•Œçš„è§†è§’æ€»ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ¼”å˜ï¼Œä½†æœ‰ä¸€ä»¶äº‹æ˜¯ä¸ä¼šå˜çš„ï¼šæ— è®ºæ—¶é—´è¿‡äº†å¤šä¹…ï¼Œåœ¨ææƒ§é¢å‰çš„æˆ‘éƒ½ä¼šæ˜¯ä¸€ä¸ªæ— å¯æ•‘è¯çš„æµªæ¼«ä¸»ä¹‰è€…ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E6%88%91%E6%89%BF%E8%AE%A4%E6%88%91%E7%88%B1%E4%B8%8A%E4%BA%86%E6%81%90%E6%83%A7/","summary":"åœ¨æˆ‘è¿„ä»Š 18 å¹´äººç”Ÿçš„å 10 å¹´é‡Œï¼Œæˆ‘ä¸€ç›´åœ¨è¿½å¯»ç€çš„æ˜¯ä¸€ç§çº·ä¹±çš„ã€å……æ»¡ææƒ§çš„çˆ±ã€‚æˆ‘æ˜¯ä¸€åä¸“ä¸šçš„è‡ªç”±å¼æ»‘é›ªè¿åŠ¨å‘˜ï¼Œè„šä¸Šçš„ä¸€åŒé›ªæ¿ã€22 è‹±å°ºé•¿çš„ u å‹æ± å’Œå„ç§ç‰¹æŠ€åŠ¨ä½œæ˜¯æˆ‘è‚¾ä¸Šè…ºç´ çš„ä¸»è¦æ¥æºï¼Œä¹Ÿæ˜¯æé™è¿åŠ¨ä¸­çœŸæ­£ä»¤äººä¸Šç˜¾çš„æ ¸å¿ƒè¦ç´ ã€‚\næ­£å¦‚æ‰€æœ‰é‚£äº›èƒ½è¿·å€’å¸¸äººçš„æ‹äººä¸€æ ·ï¼ˆè‡³å°‘æ˜¯åƒæˆ‘ä»å°è¯´ä¸­è¯»åˆ°çš„é‚£äº›ä¸€æ ·ï¼Œå› ä¸ºç°å®ç”Ÿæ´»ä¸­æˆ‘è¿˜ç¼ºä¹ç›¸åº”çš„ç»éªŒï¼‰ï¼Œä½ è¿™ä¸ªé‡è¦çš„å¦ä¸€åŠæœ‰æ—¶å¯èƒ½ä¼šå¾ˆâ€¦â€¦åå¤æ— å¸¸ã€‚å®é™…ä¸Šï¼Œâ€œææƒ§â€å¯ä»¥ç®—æ˜¯ä¸‰ç§ä¸åŒæ„Ÿè§‰çš„æ€»ç§°ï¼Œé‚£å°±æ˜¯å…´å¥‹ã€ä¸ç¡®å®šå’Œå‹åŠ›ã€‚\næˆ‘å·²ç»å‘ç°ï¼Œå¦‚æœè¿™äº›æ„Ÿè§‰èƒ½è¢«è¯†åˆ«å’Œç§¯æåœ°åˆ©ç”¨ï¼Œé‚£ä¹ˆæ¯ä¸€ç§æ„Ÿè§‰ä¸­éƒ½æœ‰ä¸€äº›å¾®å¦™çš„æŒ‡æ ‡å¯ä»¥å¸®åŠ©ä½ æˆåŠŸï¼Œè€Œå¦‚æœå…¶åŸç†è¢«å¿½è§†ï¼Œé‚£ä¹ˆè¿™äº›æ„Ÿè§‰å¯èƒ½å°±ä¼šæ˜¯ä½ å—ä¼¤çš„å‰å…†ã€‚\nè™½ç„¶ä»äº‹æé™è¿åŠ¨çš„è¿åŠ¨å‘˜å¾ˆå®¹æ˜“è¢«è´´ä¸Šâ€œæ— ç•â€æˆ–â€œä»»æ€§â€çš„æ ‡ç­¾ï¼Œä½†æ— è®ºæ˜¯æˆ‘ä¸ºæ„æ€æŠ€å·§è€ŒèŠ±è´¹çš„æ— æ•°ä¸ªå°æ—¶ï¼Œè¿˜æ˜¯åœ¨æ³¡æ²«å‘(æ³¡æ²«ç²’å­åˆ°å¤„éƒ½æ˜¯çš„é‚£ç§)é‡Œå’Œå®‰å…¨æ°”å›Šä¸Šåº¦è¿‡çš„æ— æ•°æ—¶é—´éƒ½å¯ä»¥è¡¨æ˜æƒ…å†µå¹¶éå¦‚æ­¤ã€‚\næˆ‘ä»¬è¦è¿åè‡ªå·±çš„ç”Ÿç‰©ç›´è§‰ï¼ŒæŠŠè‡ªå·±ç½®äºé£é™©ä¹‹ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ä¼šå°½ä¸€åˆ‡åŠªåŠ›åšå¥½èº«ä½“ä¸Šçš„å‡†å¤‡ï¼Œä½†å†å¤šçš„å®‰å…¨ç½‘æ¨¡æ‹Ÿè®­ç»ƒä¹Ÿæ— æ³•ç­‰åŒäºæˆ‘ä»¬ä»é™¡å¡ä¸Šèµ·é£ã€æŠŠèº«ä½“æŠ›åˆ°ç©ºä¸­å¹¶å³å°†è½åœ°æ—¶æ‰€å°†é¢å¯¹çš„é›ªå¡ï¼Œå®ƒæ˜¯ä¸ä¼šè®²æƒ…é¢çš„ã€‚\næˆ‘ä»¬å¹¶éæ— è§†ææƒ§ï¼Œè€Œæ˜¯è¦åŸ¹å…»æ·±åˆ»çš„è‡ªæˆ‘æ„è¯†ï¼Œå¹¶è¿›è¡Œæ·±æ€ç†Ÿè™‘çš„é£é™©è¯„ä¼°ï¼Œä»è€Œä¸ææƒ§å»ºç«‹èµ·ç‹¬ç‰¹çš„å…³ç³»ã€‚\nè¿™é¡¹å·¥ä½œçš„ç¬¬ä¸€æ­¥å«åšå…·è±¡åŒ–ï¼šåœ¨æˆ‘å°è¯•ä¸€ä¸ªæ–°çš„æŠ€å·§åŠ¨ä½œä¹‹å‰ï¼Œæˆ‘ä¼šæ„Ÿåˆ°èƒ¸è…”ï¼ˆå‡†ç¡®åœ°è¯´ï¼Œæ˜¯åœ¨æˆ‘çš„å–‰å’™åº•éƒ¨å’Œè†ˆè‚Œé¡¶éƒ¨ä¹‹é—´ï¼‰æœ‰ä¸€ç§ç´§å¼ æ„Ÿã€‚\næˆ‘æ·±å¸ä¸€å£æ°”ï¼Œé—­ä¸Šçœ¼ç›ã€‚å½“æˆ‘çˆ¬ä¸Šå·¨å¤§çš„èµ·é£å¡é“æ—¶ï¼Œæˆ‘ä¼šåœ¨æƒ³è±¡ä¸­ä¼¸å±•æˆ‘çš„åŒè…¿ä»¥æœ€å¤§é™åº¦åœ°æé«˜å‡åŠ›ã€‚ç„¶åï¼Œæˆ‘è¦åœ¨è„‘æµ·ä¸­æç»˜å¦‚ä½•ä»¥ç›¸åçš„æ–¹å‘æ‰­è½¬æˆ‘çš„ä¸ŠåŠèº«ï¼Œäº§ç”Ÿæ‰­çŸ©ï¼Œç„¶åå†è®©å®ƒæœå¦ä¸€ä¸ªæ–¹å‘å¼¹å›æ¥ã€‚\nç°åœ¨ï¼Œåœ¨æˆ‘çš„æ„è¯†é‡Œï¼Œæˆ‘å·²ç»æ˜¯é£åœ¨ç©ºä¸­çš„çŠ¶æ€äº†ã€‚\næˆ‘åœ¨è·ƒèµ·åç¬¬ä¸€æ—¶é—´å°±ä¼šçœ‹åˆ°è‡ªå·±çš„èƒŒåï¼Œç„¶åèº«ä½“æ—‹è½¬ä¼šæŠŠæˆ‘çš„è§†çº¿æ‹½å‘å¤´é¡¶ä¸‡é‡Œæ— äº‘çš„å¤©ç©ºã€‚é£å£°å¦‚åŒæˆ‘è€³æœµé‡Œçš„ä¸€ç§éŸ³ä¹ï¼Œæ¯ä¸€ä¸ª 360 åº¦çš„æ—‹è½¬éƒ½åœ¨ä¸ºæˆ‘çš„è¿åŠ¨æä¾›éŸ³ä¹èˆ¬çš„èŠ‚æ‹ã€‚\nå½“æˆ‘çš„è„šåœ¨æˆ‘çš„èº«ä½“ä¸‹é¢æ—¶ï¼Œæˆ‘å°±å¯ä»¥åœ¨æŠŠèº«ä½“æ‹‰åˆ°ç¬¬äºŒä¸ªç©ºç¿»å‰çš„ä¸€ç¬é—´å‘ç°æœ€ç»ˆè½åœ°çš„åœ°ç‚¹ã€‚å½“æˆ‘å›åˆ°å¯ä»¥é¢å‘å‰æ–¹çš„ä½ç½®æ—¶ï¼Œæˆ‘ä¼šæƒ³è±¡ç€æˆ‘çš„è…¿åœ¨æˆ‘çš„è„šä¸‹æ‘†åŠ¨ï¼Œå¹¶è®©é›ªé‹çš„å‰ç«¯æ‰¿è½½ç€æˆ‘çš„é‡é‡ç¢°åˆ°åœ°é¢ã€‚\næˆ‘éœ²å‡ºå¾®ç¬‘ï¼Œç„¶åçå¼€çœ¼ç›ï¼Œä¸€ä¸ª 1440 åº¦çš„ç¿»è½¬åŠ¨ä½œå°±å®Œæˆäº†ã€‚\nåœ¨å®Œæˆâ€œå…·è±¡åŒ–â€çš„å‡ ç§’ä¹‹åï¼Œæˆ‘èƒ¸è…”ä¸­çš„ç´§è¿«æ„Ÿä¼šæœ‰ä¸€é˜µä¸Šä¸‹çš„æ³¢åŠ¨ï¼Œç„¶åå¼€å§‹æ‰©æ•£â€”â€”è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å·²ç»æ¥åˆ°ç ´èŒ§æˆè¶çš„å…³é”®é˜¶æ®µã€‚\nå…´å¥‹æ„Ÿæ˜¯è‚¾ä¸Šè…ºç´ çš„äº§ç‰©ï¼Œä¹Ÿæ˜¯æˆ‘æ‰€é…·çˆ±å’Œç€è¿·çš„å­˜åœ¨ã€‚æˆ‘æ—¢æœ‰ç€å¯¹è‡ªå·±å®‰å…¨åˆ›é€ å¥‡è¿¹çš„ä¿¡å¿ƒï¼Œä¹Ÿä¼šäº§ç”Ÿå¯¹å³å°†åˆ°æ¥çš„ä¸å¯é¢„çŸ¥ä½“éªŒçš„å…´å¥‹æ„Ÿï¼ŒäºŒè€…çš„å¹³è¡¡éå¸¸ä¸ç¨³å®šã€‚æˆ‘å¬è¯´è¿™ä¸ªçŠ¶æ€å¯ä»¥è¢«ç§°ä¸ºâ€œå…¥å¢ƒï¼ˆzoneï¼‰â€ï¼Œå»å¹´ç§‹å¤©ï¼Œå½“æˆ‘æˆä¸ºå†å²ä¸Šç¬¬ä¸€ä¸ªå®Œæˆ 1440 åº¦åè½´è½¬ä½“åŠ¨ä½œçš„çš„å¥³æ€§åŒæ¿æ»‘é›ªè¿åŠ¨å‘˜æ—¶ï¼Œæˆ‘å°±æ›¾ä½“ä¼šè¿‡è¿™æ ·çš„å¿ƒå¢ƒã€‚\nä¸å¹¸çš„æ˜¯ï¼Œä½ å¿ƒä¸­çš„ä¸ç¡®å®šæ„Ÿå¾€å¾€å¾ˆå®¹æ˜“å°±ä¼šå‹å€’è‡ªä¿¡å¿ƒã€‚\nä¸å®Œç¾çš„å‡†å¤‡ä¼šä½¿æˆ‘çš„æ‰‹å¿ƒå‡ºæ±—ï¼Œå¹¶ä½¿å¾—æˆ‘ä¹‹å‰æ‰€è¯´çš„é‚£ä¸ªæ„Ÿåˆ°ç´§å¼ çš„ä½ç½®è¢«è½¬ç§»åˆ°è‡ªå·±çš„èƒƒé‡Œï¼Œä»è€Œä½¿ä½ çš„æ¯æ¬¡å‘¼å¸éƒ½æ¯”ä¸Šä¸€æ¬¡æ›´æµ…ã€‚è¿™ç§æ„Ÿè§‰ä¸æ˜¯ææ…Œï¼Œè€Œæ˜¯æŸç§ç±»ä¼¼äºç•æƒ§çš„æ„Ÿè§‰ã€‚å±é™©çš„ä¿¡å·ä¼šæ¿€å‘å‡ºè¿›åŒ–çš„æœ¬èƒ½ã€‚\nå¦‚æœæˆ‘é€‰æ‹©å¿½ç•¥è¿™ä¸ªå®‰å…¨æœºåˆ¶ï¼Œæˆ‘çš„èº«ä½“å¯èƒ½ä¼šåœ¨ç©ºä¸­ä¸ç”±è‡ªä¸»åœ°è¡ŒåŠ¨ï¼Œæ—‹è½¬ä¼šå¤±å»æ§åˆ¶ï¼Œå¹¶è¿«ä½¿æˆ‘ä¸ºå³å°†é­å—çš„å†²å‡»åšå¥½å‡†å¤‡ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™çš„æˆ‘çœŸçš„è¦ææƒ§äº†ï¼šå¦‚æœå®Œå…¨æŠ•å…¥è¿™ä¸ªåŠ¨ä½œï¼Œå¯èƒ½ä¼šäº§ç”Ÿç¾éš¾æ€§çš„åæœã€‚\næ¯ä¸ªè‡ªç”±å¼æ»‘é›ªè¿åŠ¨å‘˜éƒ½è¦ä»¥è¯†åˆ«å‡ºå…´å¥‹æ„Ÿå’Œä¸ç¡®å®šæ„Ÿä¹‹é—´çš„ç»†å¾®å·®åˆ«ä¸ºç›®æ ‡ï¼Œä»¥ä¾¿åœ¨æœ€å¤§é™åº¦åœ°å‘æŒ¥èƒ½åŠ›çš„åŒæ—¶ï¼ŒæŠŠå—ä¼¤çš„é£é™©å‡å°‘åˆ°æœ€å°ã€‚\næœ€åè¦è®²çš„å°±æ˜¯å‹åŠ›ã€‚è¿™æ˜¯ä¸€ç§ç”¨é€”å¯èƒ½ä¼šå¾ˆå¹¿æ³›çš„èƒ½é‡æºã€‚åœ¨æœ¬æ–‡æåˆ°çš„ä¸ææƒ§ç›¸å…³çš„å‡ ä¸ªæ–¹é¢ä¸­ï¼Œå‹åŠ›æ˜¯æœ€ä¸»è§‚çš„ä¸€ä¸ªé¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªäººå¯¹äºå‹åŠ›çš„ä½“éªŒä¼šå—åˆ°è‡ªèº«å®è·µç»éªŒå’Œæ€æƒ³è§‚ç‚¹çš„å½±å“ã€‚\nå®¶äººå’Œæœ‹å‹çš„æœŸæœ›ï¼Œæ¿€çƒˆç«äº‰çš„æ—¶æ®µï¼Œä¹ƒè‡³äºå¯èƒ½è·å¾—èµåŠ©çš„æœºé‡ï¼Œéƒ½å¯èƒ½ä¸ºä¸€ä¸ªé«˜å‹çš„å¤–åœ¨ç¯å¢ƒæä¾›æ”¯æ’‘ã€‚å¯¹äºé‚£äº›èƒ½æŠŠæ¡åˆ†å¯¸çš„èµ›æ‰‹æ¥è¯´ï¼Œå‹åŠ›å¯ä»¥å˜æˆä¸€ç§å¸®ä»–ä»¬è¿æ¥æŒ‘æˆ˜çš„ç§¯æåŠ›é‡ã€‚ä½†å‹åŠ›ä¹Ÿå¯èƒ½ä¼šå‡­å€Ÿä¸€å·±ä¹‹åŠ›å°±è®©ä½ ä¸€è´¥æ¶‚åœ°ã€‚\nä¸è¿‡ï¼Œå¯¹äºè¿™ç§åŸ‹è—åœ¨å¿ƒåº•çš„ã€æ¸´æœ›â€œè¯æ˜è‡ªå·±â€çš„æ„Ÿè§‰ï¼Œè¿åŠ¨å‘˜æ—¢å¯èƒ½ä¼šé€‰æ‹©å‹åˆ¶å®ƒï¼Œä¹Ÿå¯èƒ½é€‰æ‹©å¼ºåŒ–å®ƒï¼Œè€Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸Šè¦å–å†³äºä»–ä»¬çš„è‡ªä¿¡å¿ƒã€‚\nä½œä¸ºä¸€ä¸ªåˆšåˆšæˆå¹´çš„å¥³è¿åŠ¨å‘˜ï¼Œæˆ‘å¯¹äºè¿™æ–¹é¢è¿˜æ˜¯å¾ˆæœ‰äº›è‡ªè±ªçš„ï¼Œæˆ‘å¯ä»¥å¢å¼ºè‡ªå·±çš„è‡ªå°Šï¼Œå¹¶å°½é‡å‡å°‘è‡ªå·±å¯¹äºå¤–ç•ŒæœŸå¾…çš„éœ€æ±‚ï¼Œä»è€Œæ§åˆ¶æˆ‘èº«è¾¹çš„å‹åŠ›ã€‚\næ— è®ºå­¤èº«ä¸€äººè¿˜æ˜¯é¢å‘æ•´ä¸ªä¸–ç•Œï¼Œæˆ‘éƒ½ä¸“æ³¨äºæ„Ÿæ©å½“ä¸‹ã€åˆ¤æ–­å½“ä¸‹ï¼Œå¹¶äº«å—ä½“è‚²å¸¦ç»™æˆ‘çš„å¿«ä¹ã€‚\nè™½è¯´æˆ‘ä¸ªäººå’Œè¿™ä¸ªä¸–ç•Œçš„è§†è§’æ€»ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ¼”å˜ï¼Œä½†æœ‰ä¸€ä»¶äº‹æ˜¯ä¸ä¼šå˜çš„ï¼šæ— è®ºæ—¶é—´è¿‡äº†å¤šä¹…ï¼Œåœ¨ææƒ§é¢å‰çš„æˆ‘éƒ½ä¼šæ˜¯ä¸€ä¸ªæ— å¯æ•‘è¯çš„æµªæ¼«ä¸»ä¹‰è€…ã€‚","title":"è°·çˆ±å‡Œï¼šæˆ‘æ‰¿è®¤ï¼Œæˆ‘çˆ±ä¸Šäº†ææƒ§"},{"content":"æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªçœŸå®æ¡ˆä¾‹ï¼š\nï¼ˆèƒŒæ™¯ï¼‰æŸé¡¹ç›®åŸå®šäº 6 æœˆ 7 æ—¥å®Œæˆï¼Œå¯æ˜¯å®é™…åˆ° 6 æœˆ 9 æ—¥æ‰å®Œæˆï¼Œäºæ˜¯ç ”å‘ç»ç†åˆ˜å¤‡å°±æ‰¾è´Ÿè´£çš„å·¥ç¨‹å¸ˆå¼ é£æ²Ÿé€šã€‚\n  åˆ˜å¤‡è¯´ï¼šâ€œå’±ä»¬è¿™ä¸ªé¡¹ç›®æŒ‰è®¡åˆ’ 7 å·å®Œæˆï¼Œä½  delay äº†ä¸¤å¤©ä¹Ÿä¸è·Ÿæˆ‘è¯´ä¸€å£°ï¼Œæˆ‘æ˜¯æœ€åä¸€ä¸ªçŸ¥é“çš„ï¼â€\n  å¼ é£è¯´ï¼šâ€œæˆ‘è·Ÿè´Ÿè´£é¡¹ç›®çš„äº§å“ç»ç†å­”æ˜è¯´äº†å•Šï¼Œä»–ä¹Ÿè§‰å¾—æ²¡é—®é¢˜ï¼Œå¤§å®¶æ²¡æœ‰å¼‚è®®å°±è¡Œäº†å‘—ï¼Œé¡¹ç›®ä¸æ˜¯æˆåŠŸå‘å¸ƒäº†å—ï¼â€\n  åˆ˜å¤‡è¯´ï¼šâ€œé‚£ä¹Ÿåº”è¯¥æå‰è·Ÿæˆ‘è¯´ä¸€å£°å•Šï¼Œæˆ‘å¦‚æœæå‰çŸ¥é“å°±ä¼šè®©å­é¾™æ¥å¸®ä½ ï¼Œæœ€åä¹Ÿä¸è‡³äº delay ä¸¤å¤©ã€‚â€\n  å¼ é£è¯´ï¼šâ€œæˆ‘è§‰å¾—æˆ‘èƒ½æå®šï¼Œä½ ä¸è¦åŠ¨ä¸åŠ¨å°±è®©å­é¾™æ¥å¸®æˆ‘ï¼Œè¿™æ˜¯å¯¹æˆ‘çš„ä¸ä¿¡ä»»ã€‚è¦ä¸æ˜¯æœ€è¿‘å­©å­ç”Ÿç—…æˆ‘ä¹Ÿä¸ä¼š delayã€‚å³ä¾¿ delay äº†ï¼Œæˆ‘ä¹Ÿå’Œåˆä½œæ–¹éƒ½æ²Ÿé€šå¥½äº†ï¼Œä»€ä¹ˆäº‹éƒ½æ²¡è€½è¯¯ã€‚è€Œä¸”æˆ‘å·²ç»å°½æœ€å¤§åŠªåŠ›äº†å•Šï¼Œä½ è¿˜è¦æ€ä¹ˆæ ·å‘¢ï¼Ÿä¿¡ä¸è¿‡æˆ‘çš„è¯ï¼Œä¸‹æ¬¡è¿™æ ·çš„é¡¹ç›®ä½ äº¤ç»™äºŒå“¥å»åšå§ï¼â€\n  åˆ˜å¤‡è¯´ï¼šâ€œæˆ‘å°±æ˜¯æƒ³è®©ä½ æå‰å‘Šè¯‰æˆ‘ä¸€å£°ï¼Œä½ æ€¥å•¥ï¼â€\n  å¼ é£è¯´ï¼šâ€œä½ å…ˆæ€¥çš„å¥½ä¸å¥½ï¼â€\n  â€¦â€¦\n  ä½ è§‰å¾—æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿå¦‚æœä½ æ˜¯å…¶ä¸­çš„åˆ˜å¤‡æˆ–è€…å¼ é£ï¼Œæ¥ä¸‹æ¥ä½ ä¼šæ€ä¹ˆæ²Ÿé€šå‘¢ï¼Ÿ\nåœ¨æ—¥å¸¸çš„æ²Ÿé€šä¸­ï¼Œç±»ä¼¼çš„åœºæ™¯æ•°ä¸èƒœæ•°ã€‚æœ‰çš„ä¼šäº’æ€¼ä¸‹å»ï¼ŒåƒµæŒä¸ä¸‹ï¼›ä¹Ÿæœ‰çš„ä¼šé€‰æ‹©é€ƒé¿ï¼Œæ•·è¡äº†äº‹ã€‚ä½†æ˜¯è¿™éƒ½è¾¾ä¸åˆ°å½¼æ­¤æ²Ÿé€šçš„æ„å›¾å’Œç›®çš„ã€‚é‚£ä¹ˆï¼Œæ€ä¹ˆæ²Ÿé€šæ‰èƒ½è¾¾åˆ°å½¼æ­¤çš„ç›®çš„å‘¢ï¼Ÿ\nä¸‹é¢ï¼Œæˆ‘ä»‹ç»ä¸€ä¸ªå·¥å…·ï¼Œåœ¨æ²Ÿé€šä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å¯¹é½å½¼æ­¤çš„ä¿¡æ¯ã€æ„Ÿå—å’Œæ„å›¾ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š\n  äº‹å®ï¼ˆFACTï¼‰\n åˆ—ä¸¾äº‹å®ä¿¡æ¯ ç¡®è®¤å¯¹æ–¹çš„å®¢è§‚æƒ…å†µ    æ„Ÿå—ï¼ˆFEELINGï¼‰\n å¯¹æ–¹å¯¹ã€äº‹å®ã€çš„æ„Ÿå—å’Œæ€åº¦ åŒæ–¹å¯¹ã€äº‹å®ã€çš„è®ºæ–­æ˜¯å¦ä¸€è‡´    æ„å›¾ï¼ˆFOCUSï¼‰\n å¯¹æ–¹çš„ç„¦ç‚¹åœ¨å“ªé‡Œï¼Œæˆ‘çš„ç„¦ç‚¹åœ¨å“ªé‡Œ å¯¹æ–¹çš„æ„å›¾æ˜¯ä»€ä¹ˆï¼Œæˆ‘çš„æ„å›¾æ˜¯ä»€ä¹ˆ    å…±è¯†\n æ˜¯å¦è¾¾æˆå…±è¯†ï¼Œå¹¶ç¡®è®¤ä¸€è‡´ æ¥ä¸‹æ¥æ€ä¹ˆåš    è¿™ä¸ªå·¥å…·çš„å‰ä¸‰æ­¥ï¼Œå…¶å®å°±æ˜¯â€œ3Fâ€å€¾å¬ï¼Œåªæ˜¯åœ¨ç›¸äº’å€¾å¬çš„åŸºç¡€ä¹‹ä¸Šï¼Œåˆèµ°åˆ°äº†ç¬¬å››æ­¥ï¼Œå»ç¡®è®¤æœ‰æ²¡æœ‰è¾¾æˆå…±è¯†ã€‚\næ‰€è°“â€œ3Fâ€å€¾å¬ï¼Œå°±æ˜¯è¦ä»å¯¹æ–¹çš„è°ˆè¯ä¸­å¬å‡ºä¸‰å±‚ä¿¡æ¯ï¼š\nç¬¬ä¸€ï¼Œäº‹å®ä¿¡æ¯ï¼ˆFACTï¼‰ã€‚å³ï¼Œå¯¹æ–¹è¯´äº†å“ªäº›äº‹å®æ€§ä¿¡æ¯ï¼Ÿå’Œä½ æŒæ¡çš„ä¿¡æ¯ç›¸æ¯”æœ‰æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Ÿè¿™æ˜¯æ²Ÿé€šçš„ç¬¬ä¸€å±‚ï¼Œä¹Ÿæ˜¯æœ€åŸºç¡€çš„ä¸€å±‚ã€‚å¦‚æœåŒæ–¹è¿åŸºæœ¬çš„äº‹å®ä¿¡æ¯éƒ½ä¸ä¸€è‡´ï¼Œè¾¾æˆæœ‰æ•ˆçš„æ²Ÿé€šç»“æœå°±æ— ä»è°ˆèµ·äº†ã€‚\næˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œåœ¨ä¸Šè¿°æ¡ˆä¾‹ä¸­ï¼Œåˆ˜å¤‡å’Œå¼ é£çš„æ²Ÿé€šæ˜¯åŸºäºä¸€è‡´çš„äº‹å®ä¿¡æ¯å—ï¼Ÿä¸éš¾å‘ç°ï¼Œå¯¹äºè¿™ä¸‰ç‚¹é‡è¦çš„äº‹å®ï¼š\nåŒæ–¹éƒ½è®¤åŒï¼Œæ˜¯æ²¡æœ‰å¼‚è®®çš„ï¼Œå¯è§ä»–ä»¬æ²Ÿé€šçš„åŸºç¡€ä¿¡æ¯æ²¡æœ‰åˆ†æ­§ã€‚\nç”±äºäº‹å®ä¿¡æ¯çš„å®¢è§‚æ€§ï¼Œåªè¦è‚¯æ²Ÿé€šï¼Œè¿™å±‚ä¿¡æ¯æ˜¯æœ€å®¹æ˜“è¾¾æˆä¸€è‡´çš„ã€‚æ‰€ä»¥ï¼Œåœ¨å‘ç”Ÿæ„è§å’Œçœ‹æ³•ä¸ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œé¦–å…ˆæ¥å¯¹é½äº‹å®ä¿¡æ¯æ˜¯å¿…è¦ä¸”æœ‰æ•ˆçš„ã€‚å½“ç„¶ï¼Œéšç€åŒæ–¹èƒŒæ™¯ä¿¡æ¯çš„ä¸æ–­åŒæ­¥å’Œé»˜å¥‘åº¦çš„ä¸æ–­æå‡ï¼Œåœ¨ä¸€äº›æ²Ÿé€šä¸­è¯¥æ­¥éª¤å¸¸å¸¸è¢«çœç•¥ã€‚ä½†æ˜¯ï¼Œè¢«çœç•¥å¹¶ä¸æ„å‘³ç€ä¸é‡è¦ï¼Œä¸€æ—¦å‘ç”Ÿåˆ†æ­§çš„æ—¶å€™ï¼Œå°±éœ€è¦æŠŠè¿™å±‚å†…å®¹æ‹¿å‡ºæ¥æ£€è§†å’Œå¯¹é½ä¸€ä¸‹äº†ã€‚\nç¬¬äºŒï¼Œæ„Ÿå—å’Œåˆ¤æ–­ï¼ˆFEELINGï¼‰ã€‚å³ï¼Œå¯¹äºä¸Šè¿°äº‹å®ä¿¡æ¯ï¼ŒåŒæ–¹æ˜¯ä»€ä¹ˆæ ·çš„æ„Ÿå—å’Œåˆ¤æ–­ã€‚ç”±äºæ¯ä¸ªäººç”Ÿæ´»çš„ç¯å¢ƒä¸åŒï¼Œæ‰€å¤„çš„è§’è‰²ä¸åŒï¼Œæƒ¯ç”¨çš„æ€ç»´æ–¹å¼ä¸åŒï¼Œæ²Ÿé€šçš„åˆè¡·ä¹Ÿä¸åŒï¼Œæ‰€ä»¥ï¼Œå³ä¾¿æ˜¯é’ˆå¯¹åŒæ ·çš„å®¢è§‚äº‹å®ï¼ŒåŒæ–¹çš„æ„Ÿå—å’Œçœ‹æ³•ä¹Ÿå¸¸å¸¸æ˜¯ä¸åŒçš„ã€‚è¿™å°±æ˜¯æ²Ÿé€šä¸­æœ€å®¹æ˜“å‘ç”Ÿåˆ†æ­§çš„åœ°æ–¹ã€‚\næˆ‘ä»¬è¿˜æ˜¯é€šè¿‡å‰é¢çš„ä¾‹å­æ¥çœ‹ï¼ŒåŸºäºåŒä¸€ä¸ªäº‹å®ï¼Œåˆ˜å¤‡å’Œå¼ é£å„è‡ªçš„æ„Ÿå—å’Œåˆ¤æ–­æ˜¯ä»€ä¹ˆã€‚\nåœ¨åˆ˜å¤‡çœ‹èµ·æ¥ï¼šå¦‚æœå¼ é£æå‰å‘Šè¯‰ä»–è¿™ä¸ªé£é™©ï¼Œè¿™ä¸ªé¡¹ç›®æœ¬å¯ä»¥ä¸ç”¨ delayï¼›è€Œä¸”ï¼Œè‡ªå·±ä½œä¸ºå¼ é£çš„ç›´æ¥ä¸Šçº§ï¼Œæœ€åæ‰çŸ¥é“æœ‰è¿™å›äº‹ï¼Œæ— è®ºæ€ä¹ˆè¯´ï¼Œè‡ªå·±å’Œå¼ é£ä¹‹é—´çš„åä½œæ–¹å¼éƒ½éœ€è¦æ”¹è¿›ã€‚\nåœ¨å¼ é£çœ‹èµ·æ¥ï¼šdelay ä¸¤å¤©ç¡®å®ä¸åº”è¯¥ï¼Œä½†ä¹Ÿæ˜¯ä¸å¯æŠ—æ‹’çš„å®¢è§‚æƒ…å†µé€ æˆçš„ï¼Œè€Œä¸”ä¸ºäº†ä¸ç»™åˆ˜å¤‡æ·»éº»çƒ¦ï¼Œè‡ªå·±ä¸»åŠ¨åè°ƒå¥½äº†å„ä¸ªåˆä½œæ–¹ï¼Œå¹¶ä¿è¯é¡¹ç›®æˆåŠŸå‘å¸ƒï¼Œåˆ˜å¤‡ä¸ä½†ä¸é¢†æƒ…ï¼Œè¿˜ä¸€å‰¯ä¿¡ä¸è¿‡æˆ‘çš„æ ·å­ï¼Œæ˜¾ç„¶åœ¨ä»–çœ¼é‡Œå­é¾™æ›´èƒ½å¹²ã€‚\nå½“ç„¶ï¼Œæˆ‘ä¸æ˜¯åˆ˜å¤‡ï¼Œä¹Ÿä¸æ˜¯å¼ é£ï¼Œè¿™äº›å†…å¿ƒçš„æ„Ÿå—å’Œè§‚ç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘é‡‡è®¿ä»–ä»¬ä¹‹åå¾—çŸ¥çš„ã€‚ä½ å¯ä»¥çœ‹åˆ°ä»–ä»¬å¯¹äºåŒä¸€ä¸ªäº‹å®ï¼ŒåŒæ–¹çš„æ„Ÿå—ã€åˆ¤æ–­å’ŒæœŸå¾…æ˜¯å¾ˆä¸ä¸€æ ·çš„ï¼Œä¹‹æ‰€ä»¥ä¼šå‘ç”Ÿåé¢çš„æƒ…ç»ªå¯¹æŠ—ï¼Œå…¶å®å°±æ˜¯ä»è¿™é‡Œå¼€å§‹çš„ã€‚\nå®é™…ä¸Šï¼Œæˆ‘ä»¬å¸¸è¯´çš„â€œé»˜å¥‘â€ï¼Œå°±ä¸»è¦ä½“ç°åœ¨æ²Ÿé€šåŒæ–¹å¯¹å½¼æ­¤çš„æ„Ÿå—å’Œåˆ¤æ–­é€»è¾‘çš„ç†è§£ç¨‹åº¦ä¸Šã€‚å› æ­¤ï¼Œä½ ä»¬è¶Šæ˜¯ç†Ÿæ‚‰å½¼æ­¤çš„ç«‹åœºã€æ€ç»´æ–¹å¼å’Œæ²Ÿé€šé£æ ¼ï¼Œå°±è¶Šæ˜¯å®¹æ˜“å’Œå¯¹æ–¹è¾¾æˆé»˜å¥‘ã€‚æ‰€ä»¥ï¼Œé»˜å¥‘æ˜¯åœ¨ä¸æ–­åˆä½œçš„è¿‡ç¨‹ä¸­ç£¨åˆå‡ºæ¥çš„ï¼Œå¾ˆéš¾è‡ªç„¶è€Œç„¶åœ°å½¢æˆã€‚\né‚£ä¹ˆï¼Œåœ¨è¿˜æ²¡æœ‰è¿™ç§é»˜å¥‘çš„æ—¶å€™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿéš¾é“å°±è¦åƒåˆ˜å¤‡å’Œå¼ é£ä¸€æ ·äº‰æ‰§å’Œäº’æ€¼å—ï¼Ÿ\næˆ‘çš„å›ç­”æ˜¯ï¼Œæœ‰æ„è¯†åœ°å»è¯¢é—®ï¼Œè€Œä¸æ˜¯é»˜è®¤å¯¹æ–¹ä¸€å®šæ¸…æ¥šè‡ªå·±çš„é€»è¾‘å’Œåˆ¤æ–­ã€‚æ€ä¹ˆè¯¢é—®å‘¢ï¼Ÿå¦‚æœæˆ‘æ˜¯åˆ˜å¤‡æˆ–è€…å¼ é£çš„è¯ï¼Œæˆ‘å¯ä»¥è¿™æ ·è¯´ï¼šâ€œå¯¹äºè¿™äº›äº‹å®æƒ…å†µï¼Œæˆ‘çš„çœ‹æ³•æ˜¯è¿™æ ·çš„â€¦â€¦æˆ‘æƒ³äº†è§£ä¸‹ï¼Œä½ çš„çœ‹æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€è¿™æ ·ä¸€ç¡®è®¤ï¼Œå°±é¿å…äº†â€œçŒœæµ‹â€å’Œâ€œæƒ³å½“ç„¶â€å¸¦æ¥çš„å„ç§å„æ ·çš„è¯¯ä¼šã€‚\nç¬¬ä¸‰ï¼Œæ„å›¾ï¼ˆFOCUSï¼‰ã€‚å³ï¼Œå¯¹æ–¹æ²Ÿé€šçš„ç„¦ç‚¹åœ¨å“ªé‡Œï¼Œå„è‡ªä¸ºäº†è¾¾åˆ°ä»€ä¹ˆæ„å›¾å’Œç›®çš„ã€‚æ¯ä¸€æ¬¡æ²Ÿé€šï¼Œéƒ½æ˜¯åŸºäºæŸä¸ªç‰¹å®šçš„ç›®çš„å’Œåˆè¡·çš„ï¼Œæ— è®ºè¿™ä¸ªé—®é¢˜ä½ æœ‰æ²¡æœ‰åœ¨æ²Ÿé€šä¹‹å‰å»åˆ»æ„å˜æ¸…ï¼Œéƒ½æ˜¯å¦‚æ­¤ã€‚\næ²Ÿé€šçš„ç›®çš„ä¸å¤–ä¹å››ä¸ªï¼šå»ºç«‹é€šé“ã€åŒæ­¥ä¿¡æ¯ã€è¡¨è¾¾æƒ…æ„Ÿå’Œè¾“å‡ºå½±å“ã€‚æ˜¾ç„¶ï¼Œåœ¨å‰é¢çš„æ¡ˆä¾‹ä¸­ï¼Œåˆ˜å¤‡æ²Ÿé€šçš„ç›®çš„å’Œæ„å›¾æ˜¯æƒ³è¯´æœå¼ é£ï¼Œè®©ä»–åœ¨ä»¥åçš„å·¥ä½œä¸­ï¼Œæå‰é€šæŠ¥é£é™©ï¼Œè€Œä¸æ˜¯ç’è€Œä¸æŠ¥ï¼Œä»–ä»æ¥æ²¡æœ‰è´¨ç–‘è¿‡å¼ é£çš„èƒ½åŠ›ã€‚è€Œå¼ é£çš„ç›®çš„å’Œæ„å›¾æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»–åœ¨è¡¨è¾¾ä¸€ç§ä¸æ»¡ï¼Œè¿™ç§ä¸æ»¡æƒ…ç»ªçš„èƒŒåï¼Œæ˜¯ä»–å¸Œæœ›åˆ˜å¤‡å¯ä»¥ç»™ä»–ä¸€äº›è®¤å¯å’Œé¼“åŠ±ï¼Œå¹¶ä¿¡ä»»ä»–çš„èƒ½åŠ›ã€‚\næ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œä»–ä»¬çš„æ„å›¾å¹¶æ²¡æœ‰çŸ›ç›¾å’Œå†²çªï¼Œè¿™åœºæ²Ÿé€šï¼Œå®Œå…¨å¯ä»¥è¾¾åˆ°å½¼æ­¤æ»¡æ„çš„ç»“æœã€‚åªæ˜¯å› ä¸ºä»–ä»¬åœ¨æ²Ÿé€šä¸­ï¼Œä¸åœ¨ä¸€ä¸ªé¢‘é“ä¸Šï¼ŒæŠŠäº‹å®ã€åˆ¤æ–­ã€æ„Ÿå—ã€è´£ä»»ã€åŸå› ã€æ–¹æ¡ˆç­‰ç»Ÿç»Ÿæ‰åˆ°ä¸€èµ·æ¥è¯´äº†ï¼šä½ è®²äº‹å®ä»–è¯´åŸå› ï¼Œä½ è¯´åŸå› ä»–è¯´æ„Ÿå—ï¼Œä½ è¯´æ„Ÿå—ä»–è¯´é€»è¾‘ï¼Œä½ è¯´é€»è¾‘ä»–è¯´è´£ä»»ï¼Œä½ è¯´è´£ä»»ä»–è¯´è§£å†³æ–¹æ¡ˆï¼Œä½ è¯´è§£å†³æ–¹æ¡ˆä»–è¯´å›°éš¾â€¦â€¦æœ€ç»ˆå°±æˆäº†â€œé¸¡åŒé¸­è®²â€ï¼Œäº’ç›¸çš„ä¸ç†è§£å’Œä¸è®¤åŒã€‚\né€šè¿‡ç”¨â€œ3Fâ€å€¾å¬å’Œæ²Ÿé€šå±‚æ¬¡å›¾å¯¹ä¸Šé¢çš„æ¡ˆä¾‹è¿›è¡Œåˆ†å±‚æ‹†è§£ï¼Œä½ ä¸éš¾å‘ç°ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ²Ÿé€šä¸­ï¼Œæœ‰æ„è¯†åœ°åˆ†äº‹å®ã€æ„Ÿå—ã€æ„å›¾è¿™ä¸‰ä¸ªå±‚æ¬¡å»ç†è§£å¯¹æ–¹çš„è¯ï¼Œå¹¶ä¸”ä»è¿™ä¸‰ä¸ªå±‚æ¬¡åˆ†åˆ«å’Œè‡ªå·±çš„äº‹å®ã€æ„Ÿå—ã€æ„å›¾åšä¸€ä¸ªå¯¹åº”ï¼Œå°±å¯ä»¥å‡å°‘å¾ˆå¤šä¸å¿…è¦çš„è¯¯ä¼šï¼ŒåŒæ—¶é¿å…æƒ…ç»ªå¯¹æŠ—ï¼Œä»è€Œè¾¾æˆæœ‰æ•ˆçš„æ²Ÿé€šç»“æœã€‚\nå¯¹äºä¸€ä¸ªç»å¸¸æ²Ÿé€šçš„å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªå·¥å…·ï¼Œåœ¨å’Œå¯¹æ–¹ä¸æ–­åœ°å€¾å¬ä¸ç¡®è®¤ä¸­ï¼Œå½¢æˆé»˜å¥‘ï¼›åœ¨ä¸æ–­åœ°é»˜å¥‘åˆä½œä¸­ï¼Œæå‡ä¿¡ä»»ã€‚å½“ä¿¡ä»»å’Œé»˜å¥‘ç¨‹åº¦è¶Šæ¥è¶Šé«˜ï¼Œä¹Ÿå°±æ˜¯æ²Ÿé€šé€šé“å“è´¨è¶Šæ¥è¶Šå¥½æ—¶ï¼Œå¾ˆå¤šå·¥å…·å’ŒæŠ€å·§ä¹Ÿå°±å¯ä»¥çœç•¥å’Œç®€åŒ–äº†ã€‚äºæ˜¯ï¼Œä½ ä¹Ÿå°±çŸ¥é“äº†ï¼Œè¶Šæ˜¯åœ¨ä¿¡ä»»åº¦å’Œé»˜å¥‘åº¦ä½çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå·¥å…·è¶Šæœ‰ç”¨æ­¦ä¹‹åœ°ï¼›è¶Šæ˜¯åœ¨äººå¤šå£æ‚çš„æ—¶å€™ï¼Œè¶Šå®¹æ˜“è®©å¤§å®¶åœ¨åŒä¸€ä¸ªæ¡†æ¶ä¸‹è¾¾æˆæ²Ÿé€šæˆæœã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E5%A6%82%E4%BD%95%E6%8F%90%E5%8D%87%E6%B2%9F%E9%80%9A%E6%8A%80%E8%83%BD/","summary":"æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªçœŸå®æ¡ˆä¾‹ï¼š\nï¼ˆèƒŒæ™¯ï¼‰æŸé¡¹ç›®åŸå®šäº 6 æœˆ 7 æ—¥å®Œæˆï¼Œå¯æ˜¯å®é™…åˆ° 6 æœˆ 9 æ—¥æ‰å®Œæˆï¼Œäºæ˜¯ç ”å‘ç»ç†åˆ˜å¤‡å°±æ‰¾è´Ÿè´£çš„å·¥ç¨‹å¸ˆå¼ é£æ²Ÿé€šã€‚\n  åˆ˜å¤‡è¯´ï¼šâ€œå’±ä»¬è¿™ä¸ªé¡¹ç›®æŒ‰è®¡åˆ’ 7 å·å®Œæˆï¼Œä½  delay äº†ä¸¤å¤©ä¹Ÿä¸è·Ÿæˆ‘è¯´ä¸€å£°ï¼Œæˆ‘æ˜¯æœ€åä¸€ä¸ªçŸ¥é“çš„ï¼â€\n  å¼ é£è¯´ï¼šâ€œæˆ‘è·Ÿè´Ÿè´£é¡¹ç›®çš„äº§å“ç»ç†å­”æ˜è¯´äº†å•Šï¼Œä»–ä¹Ÿè§‰å¾—æ²¡é—®é¢˜ï¼Œå¤§å®¶æ²¡æœ‰å¼‚è®®å°±è¡Œäº†å‘—ï¼Œé¡¹ç›®ä¸æ˜¯æˆåŠŸå‘å¸ƒäº†å—ï¼â€\n  åˆ˜å¤‡è¯´ï¼šâ€œé‚£ä¹Ÿåº”è¯¥æå‰è·Ÿæˆ‘è¯´ä¸€å£°å•Šï¼Œæˆ‘å¦‚æœæå‰çŸ¥é“å°±ä¼šè®©å­é¾™æ¥å¸®ä½ ï¼Œæœ€åä¹Ÿä¸è‡³äº delay ä¸¤å¤©ã€‚â€\n  å¼ é£è¯´ï¼šâ€œæˆ‘è§‰å¾—æˆ‘èƒ½æå®šï¼Œä½ ä¸è¦åŠ¨ä¸åŠ¨å°±è®©å­é¾™æ¥å¸®æˆ‘ï¼Œè¿™æ˜¯å¯¹æˆ‘çš„ä¸ä¿¡ä»»ã€‚è¦ä¸æ˜¯æœ€è¿‘å­©å­ç”Ÿç—…æˆ‘ä¹Ÿä¸ä¼š delayã€‚å³ä¾¿ delay äº†ï¼Œæˆ‘ä¹Ÿå’Œåˆä½œæ–¹éƒ½æ²Ÿé€šå¥½äº†ï¼Œä»€ä¹ˆäº‹éƒ½æ²¡è€½è¯¯ã€‚è€Œä¸”æˆ‘å·²ç»å°½æœ€å¤§åŠªåŠ›äº†å•Šï¼Œä½ è¿˜è¦æ€ä¹ˆæ ·å‘¢ï¼Ÿä¿¡ä¸è¿‡æˆ‘çš„è¯ï¼Œä¸‹æ¬¡è¿™æ ·çš„é¡¹ç›®ä½ äº¤ç»™äºŒå“¥å»åšå§ï¼â€\n  åˆ˜å¤‡è¯´ï¼šâ€œæˆ‘å°±æ˜¯æƒ³è®©ä½ æå‰å‘Šè¯‰æˆ‘ä¸€å£°ï¼Œä½ æ€¥å•¥ï¼â€\n  å¼ é£è¯´ï¼šâ€œä½ å…ˆæ€¥çš„å¥½ä¸å¥½ï¼â€\n  â€¦â€¦\n  ä½ è§‰å¾—æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿå¦‚æœä½ æ˜¯å…¶ä¸­çš„åˆ˜å¤‡æˆ–è€…å¼ é£ï¼Œæ¥ä¸‹æ¥ä½ ä¼šæ€ä¹ˆæ²Ÿé€šå‘¢ï¼Ÿ\nåœ¨æ—¥å¸¸çš„æ²Ÿé€šä¸­ï¼Œç±»ä¼¼çš„åœºæ™¯æ•°ä¸èƒœæ•°ã€‚æœ‰çš„ä¼šäº’æ€¼ä¸‹å»ï¼ŒåƒµæŒä¸ä¸‹ï¼›ä¹Ÿæœ‰çš„ä¼šé€‰æ‹©é€ƒé¿ï¼Œæ•·è¡äº†äº‹ã€‚ä½†æ˜¯è¿™éƒ½è¾¾ä¸åˆ°å½¼æ­¤æ²Ÿé€šçš„æ„å›¾å’Œç›®çš„ã€‚é‚£ä¹ˆï¼Œæ€ä¹ˆæ²Ÿé€šæ‰èƒ½è¾¾åˆ°å½¼æ­¤çš„ç›®çš„å‘¢ï¼Ÿ\nä¸‹é¢ï¼Œæˆ‘ä»‹ç»ä¸€ä¸ªå·¥å…·ï¼Œåœ¨æ²Ÿé€šä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å¯¹é½å½¼æ­¤çš„ä¿¡æ¯ã€æ„Ÿå—å’Œæ„å›¾ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š\n  äº‹å®ï¼ˆFACTï¼‰\n åˆ—ä¸¾äº‹å®ä¿¡æ¯ ç¡®è®¤å¯¹æ–¹çš„å®¢è§‚æƒ…å†µ    æ„Ÿå—ï¼ˆFEELINGï¼‰\n å¯¹æ–¹å¯¹ã€äº‹å®ã€çš„æ„Ÿå—å’Œæ€åº¦ åŒæ–¹å¯¹ã€äº‹å®ã€çš„è®ºæ–­æ˜¯å¦ä¸€è‡´    æ„å›¾ï¼ˆFOCUSï¼‰\n å¯¹æ–¹çš„ç„¦ç‚¹åœ¨å“ªé‡Œï¼Œæˆ‘çš„ç„¦ç‚¹åœ¨å“ªé‡Œ å¯¹æ–¹çš„æ„å›¾æ˜¯ä»€ä¹ˆï¼Œæˆ‘çš„æ„å›¾æ˜¯ä»€ä¹ˆ    å…±è¯†\n æ˜¯å¦è¾¾æˆå…±è¯†ï¼Œå¹¶ç¡®è®¤ä¸€è‡´ æ¥ä¸‹æ¥æ€ä¹ˆåš    è¿™ä¸ªå·¥å…·çš„å‰ä¸‰æ­¥ï¼Œå…¶å®å°±æ˜¯â€œ3Fâ€å€¾å¬ï¼Œåªæ˜¯åœ¨ç›¸äº’å€¾å¬çš„åŸºç¡€ä¹‹ä¸Šï¼Œåˆèµ°åˆ°äº†ç¬¬å››æ­¥ï¼Œå»ç¡®è®¤æœ‰æ²¡æœ‰è¾¾æˆå…±è¯†ã€‚","title":"å¦‚ä½•æå‡æ²Ÿé€šæŠ€èƒ½"},{"content":"0x00ï¼šç§‘å­¦ä¸Šç½‘ å¦‚æœä¸èƒ½å¤Ÿç§‘å­¦ä¸Šç½‘çš„è¯ï¼Œæ•´ä¸ªå¼€å‘ä½“éªŒå°†å¤§æ‰“æŠ˜æ‰£ã€‚\næ­¤è¿‡ç¨‹è¾ƒä¸ºæ•æ„Ÿï¼Œæ‰€ä»¥éœ€è¦å¤§å®¶è‡ªè¡Œé€‰æ‹©ç§‘å­¦ä¸Šç½‘çš„æ–¹å¼ã€‚\n0x01ï¼šåŸºæœ¬å¯ç”¨çš„ç»ˆç«¯ https://gitforwindows.org/\ngit for windows å†…åµŒäº† git bashï¼Œgit bash çš„ä½¿ç”¨ä½“éªŒå’Œ linux æˆ– mac çš„ä½“éªŒç±»ä¼¼ã€‚\nå®‰è£…å¥½ä¹‹åï¼Œéœ€è¦è¿›å…¥åˆ° home ç›®å½•ï¼Œç¼–è¾‘ .bashrc æ–‡ä»¶ï¼Œä½¿ç»ˆç«¯ä¹Ÿå¯ä»¥ç§‘å­¦ä¸Šç½‘ï¼š\ncd vim .bashrc é…ç½®å¦‚ä¸‹ï¼š\nfunction proxy_on(){  git config --global https.proxy http://127.0.0.1:1081  git config --global https.proxy http://127.0.0.1:1081   export http_proxy=\u0026#34;http://127.0.0.1:1081\u0026#34;  export https_proxy=\u0026#34;http://127.0.0.1:1081\u0026#34;  export all_proxy=\u0026#34;http://127.0.0.1:1081\u0026#34;   print_proxy }  function proxy_off(){  git config --global --unset https.proxy  git config --global --unset https.proxy   unset http_proxy  unset https_proxy  unset all_proxy   print_proxy }   function print_proxy(){  echo $http_proxy  echo $https_proxy  echo $all_proxy }  function l(){  ll }  proxy_on proxy_on æ˜¯æ‰“å¼€ä»£ç†ï¼Œproxy_off æ˜¯å…³é—­ä»£ç†ï¼Œprint_proxy æ˜¯ä¸€ä¸ªå¸®åŠ©å‡½æ•°ï¼Œç”¨æ¥æŸ¥çœ‹å½“å‰çš„ä»£ç†ï¼Œl å‡½æ•°æ˜¯å› ä¸ºè‡ªå·±ç»å¸¸ä½¿ç”¨ l å‘½ä»¤ï¼Œä¸ºäº†ä¸æŠ¥é”™è€ŒåŠ çš„ã€‚\n0x02ï¼šscoop æ‰“å¼€ powershellï¼Œå®‰è£… win ä¸‹å¥½ç”¨çš„å‘½ä»¤è¡Œè½¯ä»¶ç®¡ç†å·¥å…·ï¼šscoop\nInvoke-Expression (New-Object System.Net.WebClient).DownloadString(\u0026#39;https://get.scoop.sh\u0026#39;) å¦‚æœå®‰è£…å¤±è´¥ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nSet-ExecutionPolicy RemoteSigned -scope CurrentUser 0x03ï¼šèŠ±å“¨çš„ç»ˆç«¯ https://starship.rs/\nåœ¨ git bash ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nscoop install starship åœ¨.bashrc è¿½åŠ é…ç½®ï¼Œä½¿å…¶å¯ä»¥é»˜è®¤ä½¿ç”¨ starshipï¼š\neval \u0026#34;$(starship init bash)\u0026#34; ç„¶åè¿›å…¥åˆ° home ç›®å½•ï¼Œåˆ›å»º starship çš„é…ç½®æ–‡ä»¶\nmkdir -p .config cd .config vim starship.toml è¾“å…¥ä»¥ä¸‹é…ç½®ï¼š\n# ~/.config/starship.toml  [battery] full_symbol = \u0026#34;ğŸ”‹\u0026#34; charging_symbol = \u0026#34;ğŸ”Œ\u0026#34; discharging_symbol = \u0026#34;âš¡\u0026#34;  [[battery.display]] threshold = 30 style = \u0026#34;bold red\u0026#34;  [character] error_symbol = \u0026#34;[âœ–](bold red) \u0026#34;  [cmd_duration] min_time = 10_000 # Show command duration over 10,000 milliseconds (=10 sec) format = \u0026#34; took [$duration]($style)\u0026#34;  [directory] truncation_length = 5 format = \u0026#34;[$path]($style)[$lock_symbol]($lock_style) \u0026#34;  [git_branch] format = \u0026#34; [$symbol$branch]($style) \u0026#34; symbol = \u0026#34;ğŸ£ \u0026#34; style = \u0026#34;bold yellow\u0026#34;  [git_commit] commit_hash_length = 8 style = \u0026#34;bold white\u0026#34;  [git_state] format = \u0026#39;[\\($state( $progress_current of $progress_total)\\)]($style) \u0026#39;  [git_status] conflicted = \u0026#34;âš”ï¸ \u0026#34; ahead = \u0026#34;ğŸï¸ ğŸ’¨ Ã—${count}\u0026#34; behind = \u0026#34;ğŸ¢ Ã—${count}\u0026#34; diverged = \u0026#34;ğŸ”± ğŸï¸ ğŸ’¨ Ã—${ahead_count} ğŸ¢ Ã—${behind_count}\u0026#34; untracked = \u0026#34;ğŸ›¤ï¸ Ã—${count}\u0026#34; stashed = \u0026#34;ğŸ“¦ \u0026#34; modified = \u0026#34;ğŸ“ Ã—${count}\u0026#34; staged = \u0026#34;ğŸ—ƒï¸ Ã—${count}\u0026#34; renamed = \u0026#34;ğŸ“› Ã—${count}\u0026#34; deleted = \u0026#34;ğŸ—‘ï¸ Ã—${count}\u0026#34; style = \u0026#34;bright-white\u0026#34; format = \u0026#34;$all_status$ahead_behind\u0026#34;  [hostname] ssh_only = false format = \u0026#34;\u0026lt;[$hostname]($style)\u0026gt;\u0026#34; trim_at = \u0026#34;-\u0026#34; style = \u0026#34;bold dimmed white\u0026#34; disabled = true  [julia] format = \u0026#34;[$symbol$version]($style) \u0026#34; symbol = \u0026#34;à®ƒ \u0026#34; style = \u0026#34;bold green\u0026#34;  [memory_usage] format = \u0026#34;$symbol[${ram}( | ${swap})]($style) \u0026#34; threshold = 70 style = \u0026#34;bold dimmed white\u0026#34; disabled = false  [package] disabled = true  [python] format = \u0026#34;[$symbol$version]($style) \u0026#34; style = \u0026#34;bold green\u0026#34;  [rust] format = \u0026#34;[$symbol$version]($style) \u0026#34; style = \u0026#34;bold green\u0026#34;  [time] time_format = \u0026#34;%T\u0026#34; format = \u0026#34;ğŸ•™ $time($style) \u0026#34; style = \u0026#34;bright-white\u0026#34; disabled = false  [username] style_user = \u0026#34;bold dimmed blue\u0026#34; show_always = false æ­¤æ—¶ï¼Œç»ˆç«¯å°±å¼€å§‹èŠ±é‡Œèƒ¡å“¨èµ·æ¥äº†ï¼Œæ¯”å¦‚æˆ‘çš„ç»ˆç«¯å°±é•¿è¿™æ ·ï¼š\n0x04ï¼šå…¶ä»–æå‡å¹¸ç¦æ„Ÿçš„å·¥å…·  vscode  ","permalink":"https://zhenfeng-zhu.github.io/post/%E6%89%93%E9%80%A0%E5%A5%BD%E7%94%A8%E7%9A%84win%E4%B8%8A%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C/","summary":"0x00ï¼šç§‘å­¦ä¸Šç½‘ å¦‚æœä¸èƒ½å¤Ÿç§‘å­¦ä¸Šç½‘çš„è¯ï¼Œæ•´ä¸ªå¼€å‘ä½“éªŒå°†å¤§æ‰“æŠ˜æ‰£ã€‚\næ­¤è¿‡ç¨‹è¾ƒä¸ºæ•æ„Ÿï¼Œæ‰€ä»¥éœ€è¦å¤§å®¶è‡ªè¡Œé€‰æ‹©ç§‘å­¦ä¸Šç½‘çš„æ–¹å¼ã€‚\n0x01ï¼šåŸºæœ¬å¯ç”¨çš„ç»ˆç«¯ https://gitforwindows.org/\ngit for windows å†…åµŒäº† git bashï¼Œgit bash çš„ä½¿ç”¨ä½“éªŒå’Œ linux æˆ– mac çš„ä½“éªŒç±»ä¼¼ã€‚\nå®‰è£…å¥½ä¹‹åï¼Œéœ€è¦è¿›å…¥åˆ° home ç›®å½•ï¼Œç¼–è¾‘ .bashrc æ–‡ä»¶ï¼Œä½¿ç»ˆç«¯ä¹Ÿå¯ä»¥ç§‘å­¦ä¸Šç½‘ï¼š\ncd vim .bashrc é…ç½®å¦‚ä¸‹ï¼š\nfunction proxy_on(){  git config --global https.proxy http://127.0.0.1:1081  git config --global https.proxy http://127.0.0.1:1081   export http_proxy=\u0026#34;http://127.0.0.1:1081\u0026#34;  export https_proxy=\u0026#34;http://127.0.0.1:1081\u0026#34;  export all_proxy=\u0026#34;http://127.0.0.1:1081\u0026#34;   print_proxy }  function proxy_off(){  git config --global --unset https.proxy  git config --global --unset https.proxy   unset http_proxy  unset https_proxy  unset all_proxy   print_proxy }   function print_proxy(){  echo $http_proxy  echo $https_proxy  echo $all_proxy }  function l(){  ll }  proxy_on proxy_on æ˜¯æ‰“å¼€ä»£ç†ï¼Œproxy_off æ˜¯å…³é—­ä»£ç†ï¼Œprint_proxy æ˜¯ä¸€ä¸ªå¸®åŠ©å‡½æ•°ï¼Œç”¨æ¥æŸ¥çœ‹å½“å‰çš„ä»£ç†ï¼Œl å‡½æ•°æ˜¯å› ä¸ºè‡ªå·±ç»å¸¸ä½¿ç”¨ l å‘½ä»¤ï¼Œä¸ºäº†ä¸æŠ¥é”™è€ŒåŠ çš„ã€‚","title":"æ‰“é€ å¥½ç”¨çš„ win ä¸Šå¼€å‘ä½“éªŒ"},{"content":"The RatingBar widget is used to show a rating or collect ratings from users (this is an interactive RatingBar). For example, you can use the RatingBar widget inside an e-commerce app to show ratings for a product.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_ratingbar/","summary":"The RatingBar widget is used to show a rating or collect ratings from users (this is an interactive RatingBar). For example, you can use the RatingBar widget inside an e-commerce app to show ratings for a product.","title":"Flutter RatingBar"},{"content":"The RadioButton widget is used to allow a user to select one option from multiple selections. You can use the RadioButton widget for implementing a single selection such as gender selection, notification preferences, etc.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_ratiobutton/","summary":"The RadioButton widget is used to allow a user to select one option from multiple selections. You can use the RadioButton widget for implementing a single selection such as gender selection, notification preferences, etc.","title":"Flutter RatioButton"},{"content":"The DropDown widget is used to allow a user to select from a list of items. The DropDown widget shows the currently selected item and opens up a list of options when you click on it. You can use the Dropdown widget for implementing a single selection such as language selection, shirt size, etc.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_dropdown/","summary":"The DropDown widget is used to allow a user to select from a list of items. The DropDown widget shows the currently selected item and opens up a list of options when you click on it. You can use the Dropdown widget for implementing a single selection such as language selection, shirt size, etc.","title":"Flutter Dropdown"},{"content":"The TextField widget allows users to input text into your app. You can use the TextField widget for building forms, send messages, dialogs, search, etc.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_textfield/","summary":"The TextField widget allows users to input text into your app. You can use the TextField widget for building forms, send messages, dialogs, search, etc.","title":"Flutter TextField"},{"content":"The ToggleIcon widget is used to allow a user to switch between two icons that represent two different states. You can use the ToggleIcon widget to implement a feature such as an on-off button, like button, etc.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_toggleicon/","summary":"The ToggleIcon widget is used to allow a user to switch between two icons that represent two different states. You can use the ToggleIcon widget to implement a feature such as an on-off button, like button, etc.","title":"Flutter ToggleIcon"},{"content":"The CheckboxListTile is a combination of Checkbox and ListTile. Tapping anywhere on the CheckboxListTile toggles the checkbox. You can use the CheckboxListTile to show a list of ToDo items to mark them as complete.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_checkboxlisttitle/","summary":"The CheckboxListTile is a combination of Checkbox and ListTile. Tapping anywhere on the CheckboxListTile toggles the checkbox. You can use the CheckboxListTile to show a list of ToDo items to mark them as complete.","title":"Flutter CheckboxListTitle"},{"content":"The SlidableListTile is a special type of ListTile widget that reveals a list of actions that can be taken on a ListTile when a user swipes right.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_slidablelisttitle/","summary":"The SlidableListTile is a special type of ListTile widget that reveals a list of actions that can be taken on a ListTile when a user swipes right.","title":"Flutter SlidableListTitle"},{"content":"The ListTile widget contains a Title, Subtitle, Leading Icon, and Trailing Icon. The ListTile widget is typically used to populate a ListView. For example, you can use the ListTile to show a list of To Do items or emails.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_listtitle/","summary":"The ListTile widget contains a Title, Subtitle, Leading Icon, and Trailing Icon. The ListTile widget is typically used to populate a ListView. For example, you can use the ListTile to show a list of To Do items or emails.","title":"Flutter ListTitle"},{"content":"The ChoiceChips widget is used to allow the selection of a single chip from a group of chips. Each chip represents has an icon and text. You can use the ChoiceChips widget to show the options that can be used to filter a list or to change the UI based on selection.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_choicechips/","summary":"The ChoiceChips widget is used to allow the selection of a single chip from a group of chips. Each chip represents has an icon and text. You can use the ChoiceChips widget to show the options that can be used to filter a list or to change the UI based on selection.","title":"Flutter ChoiceChips"},{"content":"The Icon widget is used to show a small image or a symbol. You can use the Icon widget to let users quickly understand the meaning of the text. For example, placing a location icon ( ) before the numbers such as 23.35, 79.57 helps users identify that the values are a latitude and longitude.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_icon/","summary":"The Icon widget is used to show a small image or a symbol. You can use the Icon widget to let users quickly understand the meaning of the text. For example, placing a location icon ( ) before the numbers such as 23.35, 79.57 helps users identify that the values are a latitude and longitude.","title":"Flutter Icon"},{"content":"The IconButton widget allows users to take action with a single tap. Unlike the regular Button widget, an IconButton shows a small image or a symbol and does not include text. You can use the Icon widget to let users quickly understand the meaning of an action. For example, the delete action can be easily conveyed using the trash can icon which looks like this ( )\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_iconbutton/","summary":"The IconButton widget allows users to take action with a single tap. Unlike the regular Button widget, an IconButton shows a small image or a symbol and does not include text. You can use the Icon widget to let users quickly understand the meaning of an action. For example, the delete action can be easily conveyed using the trash can icon which looks like this ( )","title":"Flutter IconButton"},{"content":"The Button widget allows users to take an action such as saving data, opening a new page, etc. It is one of the most widely used widgets in Flutter. You can use the Button widget in forms, dialogs, cards, etc.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_button/","summary":"The Button widget allows users to take an action such as saving data, opening a new page, etc. It is one of the most widely used widgets in Flutter. You can use the Button widget in forms, dialogs, cards, etc.","title":"Flutter Button"},{"content":"The CircleImage widget is used to show a circular image from uploaded assets or the URL link. The CircleImage widget can display the different types of images such as JPEG, PNG, GIF, Animated GIF, WebP, Animated WebP, BMP, and WBMP.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_circleimage/","summary":"The CircleImage widget is used to show a circular image from uploaded assets or the URL link. The CircleImage widget can display the different types of images such as JPEG, PNG, GIF, Animated GIF, WebP, Animated WebP, BMP, and WBMP.","title":"Flutter CircleImage"},{"content":"The Image widget is used to show an image from uploaded assets or the URL link. The Image widget can display the different types of images such as JPEG, PNG, GIF, Animated GIF, WebP, Animated WebP, BMP, and WBMP.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_image/","summary":"The Image widget is used to show an image from uploaded assets or the URL link. The Image widget can display the different types of images such as JPEG, PNG, GIF, Animated GIF, WebP, Animated WebP, BMP, and WBMP.","title":"Flutter Image"},{"content":"The Text widget is used to show text on the screen. It is one of the most frequently used widgets.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_text/","summary":"The Text widget is used to show text on the screen. It is one of the most frequently used widgets.","title":"Flutter Text"},{"content":"The FloatingActionButton widget (also known as FAB) floats above the content on the screen and is tied to an action. The FAB widget is circular in shape and resides in the bottom right corner of the screen. You can use the FAB widget to perform the primary action on the screen, such as Add, Create, etc.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_fab/","summary":"The FloatingActionButton widget (also known as FAB) floats above the content on the screen and is tied to an action. The FAB widget is circular in shape and resides in the bottom right corner of the screen. You can use the FAB widget to perform the primary action on the screen, such as Add, Create, etc.","title":"Flutter FAB"},{"content":"The EndDrawer is typically used to provide navigation to other pages. The EndDrawer opens up from the right side of the screen by swiping right-to-left or clicking the menu icon in the AppBar. The EndDrawer can be closed by clicking outside of the EndDrawer or by swiping left-to-right. You can use the EndDrawer widget when the space for showing the navigation options is not sufficient.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_enddrawer/","summary":"The EndDrawer is typically used to provide navigation to other pages. The EndDrawer opens up from the right side of the screen by swiping right-to-left or clicking the menu icon in the AppBar. The EndDrawer can be closed by clicking outside of the EndDrawer or by swiping left-to-right. You can use the EndDrawer widget when the space for showing the navigation options is not sufficient.","title":"Flutter EndDrawer"},{"content":"The Drawer widget is used to provide navigation to other pages. The Drawer opens up from the left side of the screen by swiping left-to-right or clicking the menu icon in the AppBar. The Drawer can be closed by clicking outside of the Drawer or by swiping left-to-right. You can use the Drawer widget when the space for showing the navigation options is not sufficient.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_drawer/","summary":"The Drawer widget is used to provide navigation to other pages. The Drawer opens up from the left side of the screen by swiping left-to-right or clicking the menu icon in the AppBar. The Drawer can be closed by clicking outside of the Drawer or by swiping left-to-right. You can use the Drawer widget when the space for showing the navigation options is not sufficient.","title":"Flutter Drawer"},{"content":"The AppBar widget is used to show the information and actions related to the current page. You can use the AppBar widget to display the menu icon, back button, page title, various actions such as share, search, delete, and so on.\nThe AppBar widget consists of three sections, Leading, Title, and Actions. The Leading section is typically used to show a clickable widget such as the back button, cancel icon, profile icon, menu icon, etc. The Title section usually includes a title. The Actions section typically contains clickable widgets that can be used to take actions on that page.\nEach section can be customized based on your needs. Multiple widgets can be added to each section by using layout elements such as rows and columns.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_appbar/","summary":"The AppBar widget is used to show the information and actions related to the current page. You can use the AppBar widget to display the menu icon, back button, page title, various actions such as share, search, delete, and so on.\nThe AppBar widget consists of three sections, Leading, Title, and Actions. The Leading section is typically used to show a clickable widget such as the back button, cancel icon, profile icon, menu icon, etc.","title":"Flutter AppBar"},{"content":"The Wrap widget is similar to Row and Column as it shows its children one after another. If there is not enough space to show your item, the Wrap widget will automatically place it in a new row or column.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_wrap/","summary":"The Wrap widget is similar to Row and Column as it shows its children one after another. If there is not enough space to show your item, the Wrap widget will automatically place it in a new row or column.","title":"Flutter Wrap"},{"content":"The Container widget is like a box that allows you to add a background color, rounded corners, or set some size constraints to a child widget. You can use Containers to help create your UI structure. Containers can be helpful in dividing the screen into smaller logical parts.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_container/","summary":"The Container widget is like a box that allows you to add a background color, rounded corners, or set some size constraints to a child widget. You can use Containers to help create your UI structure. Containers can be helpful in dividing the screen into smaller logical parts.","title":"Flutter Container"},{"content":"The Divider widget is a horizontal line that is used to visually separate widgets. You can use the Divider widget to create some space between a group of widgets or between the items in a ListView.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_divider/","summary":"The Divider widget is a horizontal line that is used to visually separate widgets. You can use the Divider widget to create some space between a group of widgets or between the items in a ListView.","title":"Flutter Divider"},{"content":"The PageView widget is used to create swipeable pages. It contains a list of scrollable pages that you can swipe either horizontally or vertically. For example, you can use the PageView widget to create onboarding screens, an app that shows a short video on swipe up or down just like Instagram, TikTok, Youtube shorts, etc.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_pageview/","summary":"The PageView widget is used to create swipeable pages. It contains a list of scrollable pages that you can swipe either horizontally or vertically. For example, you can use the PageView widget to create onboarding screens, an app that shows a short video on swipe up or down just like Instagram, TikTok, Youtube shorts, etc.","title":"Flutter PageView"},{"content":"The TabBar widget is used to show different categories of content. You can use the TabBar widget to quickly glance at each option and move between the categories by swiping or clicking on the Tab.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_tabbar/","summary":"The TabBar widget is used to show different categories of content. You can use the TabBar widget to quickly glance at each option and move between the categories by swiping or clicking on the Tab.","title":"Flutter TabBar"},{"content":"The Spacer widget is used to insert a flexible empty space between the children of the Column and Row widget. If you want even space between your child widgets, you can add space by setting the Main Axis Alignment to Space Around, Space Evenly, and Space Between. If you want a more customized space between your child widgets (example below), you should use the Spacer Widget.\n The Spacer widget takes all of the available space so the Spacer Widget will have no effect on a Column or Row where the Main Axis Alignment is set to Space Around, Space Evenly, and Space Between.\n ","permalink":"https://zhenfeng-zhu.github.io/post/flutter_spacer/","summary":"The Spacer widget is used to insert a flexible empty space between the children of the Column and Row widget. If you want even space between your child widgets, you can add space by setting the Main Axis Alignment to Space Around, Space Evenly, and Space Between. If you want a more customized space between your child widgets (example below), you should use the Spacer Widget.\n The Spacer widget takes all of the available space so the Spacer Widget will have no effect on a Column or Row where the Main Axis Alignment is set to Space Around, Space Evenly, and Space Between.","title":"Flutter Spacer"},{"content":"The Card widget is used to represent some related information. For example, you can use a Card widget to show a Business card, restaurant information, movie details, etc. The Card widget is frequently used with a List to display the item information for a specific record.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_card/","summary":"The Card widget is used to represent some related information. For example, you can use a Card widget to show a Business card, restaurant information, movie details, etc. The Card widget is frequently used with a List to display the item information for a specific record.","title":"Flutter Card"},{"content":"The GridView widget is used to display a list of items in a grid or 2- dimensions (Both vertically and horizontally at the same time.) For example, you can use GridView to show a list of photos or a list of products.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_gridview/","summary":"The GridView widget is used to display a list of items in a grid or 2- dimensions (Both vertically and horizontally at the same time.) For example, you can use GridView to show a list of photos or a list of products.","title":"Flutter Gridview"},{"content":"The ListView widget is used to show a large number of items as a scrollable list. ListView is an advanced version of the Column widget that automatically provides scrolling when the list of items won\u0026rsquo;t fit on the screen. You can use the ListView to show the list of items either vertically or horizontally.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_listview/","summary":"The ListView widget is used to show a large number of items as a scrollable list. ListView is an advanced version of the Column widget that automatically provides scrolling when the list of items won\u0026rsquo;t fit on the screen. You can use the ListView to show the list of items either vertically or horizontally.","title":"Flutter ListView"},{"content":"The Stack widget allows child widgets to overlap on top of each other. The last child of the Stack stays on top. Sometimes basic widgets such as Column and Row are not sufficient for creating a complex UI. For example, if want to show text on top of an image - you should consider using the Stack widget. The following figure helps you understand how the Stack widget is different from other widgets.\nHere\u0026rsquo;s another example that shows the use of the Stack widget:\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_stack/","summary":"The Stack widget allows child widgets to overlap on top of each other. The last child of the Stack stays on top. Sometimes basic widgets such as Column and Row are not sufficient for creating a complex UI. For example, if want to show text on top of an image - you should consider using the Stack widget. The following figure helps you understand how the Stack widget is different from other widgets.","title":"Flutter Stack"},{"content":"The Row widget is used to create a horizontal layout. It is one of the most used widgets. Hereâ€™s how the Row arranges its children:\nAs shown in the figure above, the Main Axis and the Cross Axis are two important properties of the Row. For a Row, the Main Axis runs horizontally and the Cross Axis runs vertically. By default, all the children inside of the Row will be arranged in a horizontal fashion.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_row/","summary":"The Row widget is used to create a horizontal layout. It is one of the most used widgets. Hereâ€™s how the Row arranges its children:\nAs shown in the figure above, the Main Axis and the Cross Axis are two important properties of the Row. For a Row, the Main Axis runs horizontally and the Cross Axis runs vertically. By default, all the children inside of the Row will be arranged in a horizontal fashion.","title":"Flutter Row"},{"content":"The Column widget is one of the most used widgets and is essential in creating a vertical layout for any UI. Hereâ€™s how the column arranges its children:\nAs shown in the figure above, the Main Axis and the Cross Axis are two important properties of the column. For a column, the Main Axis runs vertically and the Cross Axis runs horizontally. By default, all the children inside of the column will be arranged in a vertical fashion.\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_columns/","summary":"The Column widget is one of the most used widgets and is essential in creating a vertical layout for any UI. Hereâ€™s how the column arranges its children:\nAs shown in the figure above, the Main Axis and the Cross Axis are two important properties of the column. For a column, the Main Axis runs vertically and the Cross Axis runs horizontally. By default, all the children inside of the column will be arranged in a vertical fashion.","title":"Flutter Columns"},{"content":"ä¸¤ç§æ–‡æ¡£è§†è§’ï¼šéœ€æ±‚è§†è§’å’Œä¾›ç»™è§†è§’ éœ€æ±‚è§†è§’ï¼šæƒ³æƒ³ä½ çš„å—ä¼—æ˜¯è°ï¼Œäº†è§£ä»–ä»¬çš„æœŸæœ›å€¼ ç®¡ç†è€…\n æ±‡æŠ¥ä¸Šçº§\n  ä¸šåŠ¡æ•´ä½“æƒ…å†µ æˆ˜ç•¥é‡å¿ƒå’Œèµ„æºæŠ•å…¥ é¢ä¸´é—®é¢˜å’Œè§£å†³åŠæ³•  åä½œè€…\n ä¸šåŠ¡æµç¨‹èŠ‚ç‚¹ä¸­çš„ä¸€ç¯ï¼Œä½ çš„å·¥ä½œä¼šå½±å“ taï¼Œæˆ–è€… ta çš„å·¥ä½œä¼šå½±å“ä½ ã€‚\n  ä¸šåŠ¡æ•´ä½“æƒ…å†µ æ¥ä¸‹æ¥ä½ çš„å“ªäº›äº‹æƒ…ä¼šå½±å“åˆ°æˆ‘çš„äº‹æƒ…ï¼Ÿæˆ‘è¯¥æ€ä¹ˆé…åˆï¼Ÿ  ä¿¡æ¯åŒæ­¥è€…\n ä»–ä»¬å¤§éƒ¨åˆ†æ—¶é—´å¹¶ä¸åœ¨ä¸šåŠ¡æµç¨‹èŠ‚ç‚¹ä¸­ã€‚\n  ä¸šåŠ¡æ•´ä½“æƒ…å†µï¼Œæˆ‘å°±æ˜¯æƒ³çŸ¥é“ä¸€ä¸‹ã€‚  ä¾›ç»™è§†è§’ï¼šæŠŠæˆ‘åšäº†ä»€ä¹ˆå±•ç¤ºç»™ä½ çœ‹  ç‰¹ç‚¹ï¼šæ–‡æ¡£çš„æ•´ä½“ç»“æ„å’Œä¸šåŠ¡çš„äºŒçº§éƒ¨é—¨æ¶æ„é«˜åº¦ç›¸ä¼¼ï¼Œå„ä¸ªäºŒçº§éƒ¨é—¨è´Ÿè´£å†™ä¸€å°å—ï¼Œæœ€åæ‰¾ PMO ç¼åˆåœ¨ä¸€èµ·ã€‚ é™·é˜±ï¼šå¾ˆå®¹æ˜“å¤±å»é‡ç‚¹ï¼Œå˜æˆå·¥ä½œçš„æµæ°´è´¦ï¼Œæ˜¥æ™šå¼æ±‡æŠ¥ ç¼ºç‚¹ï¼šå¯¹ä¸ç†Ÿæ‚‰çš„äººæ¥è¯´ï¼Œè¿™äº›è€¦åˆå…³ç³»å’Œä¸šåŠ¡é€»è¾‘ç†è§£æˆæœ¬æ¯”è¾ƒé«˜ï¼Œå¾ˆå®¹æ˜“å¬æ™•ï¼Œä½†åˆä¸å¥½æ„æ€ç°åœºæé—®ï¼Œä¼šåä¸€çŸ¥åŠè§£ã€‚ ä¼˜ç‚¹ï¼šäº‹æ— å·¨ç»†ï¼Œé¢é¢ä¿±åˆ°ã€‚  ã€æ€»ç»“ã€‘\n å…¬å¸åŒæœˆä¼šï¼šéœ€æ±‚è§†è§’ä¼˜å…ˆ å†…éƒ¨ reviewï¼šä¾›ç»™è§†è§’ä¼˜å…ˆ  èšç„¦ï¼šæ€ä¹ˆæŠŠä¸€å—å„¿ä¸šåŠ¡è¯´æ¸…æ¥šã€è®²æ˜ç™½ è§£æ³•ï¼šç”¨ 2.5 ä¸ªç»´åº¦æ¥å™è¿°ä¸šåŠ¡  ç»´åº¦ 1ï¼šä¸šåŠ¡ä¸»çº¿ï¼Œæ¦‚æ‹¬æ€§è´¨çš„ä¸œè¥¿ï¼Œåç²— ç»´åº¦ 2ï¼šä»ä¸€ä¸ªæˆ–å‡ ä¸ªç»´åº¦å¯¹ä¸šåŠ¡çš„ break downï¼Œè®©å¤§å®¶çœ‹åˆ°å¢é•¿æˆ–ä¸‹é™çš„å½’å›  ç»´åº¦ 2.5ï¼šé€‰ä¸€ä¸ªæœ€å€¼å¾—æ‹¿å‡ºæ¥è¯´çš„å•ç‚¹ï¼Œå¾€ä¸‹é’»ï¼Œå±•å¼€æ¥è¯´ï¼Œå¢åŠ ä¿¡æ¯ä¸°å¯Œåº¦ï¼Œä»¥å°è§å¤§ã€‚  ç»´åº¦ 1ï¼šä¸šåŠ¡æ•´ä½“çŠ¶å†µï¼Œå¦‚ä½•åœ¨æœ€çŸ­çš„æ—¶é—´å†…è®©å¤§å®¶äº†è§£è¿™ä¸ªä¸šåŠ¡çš„è¿›å±•  for è´Ÿè´£äººï¼šå¦‚æœæ¯å¤©åªæœ‰ä¸€åˆ†é’Ÿï¼Œä½ ä¼šå…³æ³¨å“ªäº›æŒ‡æ ‡å’Œäº‹æƒ…è¿›å±•ï¼Ÿ for ä¸‰ç§è§’è‰²ï¼šå‡è®¾æœ‰ä¸”åªæœ‰ä¸‰ä¸ªé—®é¢˜ï¼Œä½ ä¼šé—®å…³äºè¿™ä¸ªä¸šåŠ¡çš„ä»€ä¹ˆé—®é¢˜ï¼Ÿ  æƒ³æ˜ç™½ä¸Šè¿°çš„ä¸¤ä¸ªé—®é¢˜ï¼Œç­”æ¡ˆå‘¼ä¹‹æ¬²å‡ºï¼›æƒ³ä¸å‡ºæ¥ï¼Œå°±ç»§ç»­æƒ³ï¼Œå’Œä¸Šçº§è®¨è®ºï¼Œå’Œåä½œæ–¹è®¨è®ºï¼Œç›´åˆ°å¾—å‡ºè®©ä½ å¾ˆè¸å®å’Œè‡ªä¿¡çš„ç­”æ¡ˆã€‚\nè¦æ±‚ç®€å•ç›´æ¥ï¼Œè®©äººç§’æ‡‚ã€‚\nç»´åº¦ 2ï¼šæ‰¾åˆ°ä¸šåŠ¡çš„å¢é•¿å…¬å¼ï¼Œæ‹†è§£å¼€æ¥çœ‹ æ·±åˆ»ç†è§£ä¸šåŠ¡æ˜¯èµ·ç‚¹ï¼Œé’ˆå¯¹ç»´åº¦ 1 é‡Œé¢çš„å…³é”®æŒ‡æ ‡ï¼ŒæŠŠä»–ä»¬åˆ†è§£æˆä¸€çº§å¢é•¿å…¬å¼ã€‚\n performance = A B C * D\n ABCD é‡Œæœ‰äº›æ˜¯å¿«å˜é‡ï¼Œæœ‰äº›æ˜¯æ…¢å˜é‡ï¼Œåœ¨è¿™ä¸ªç¯èŠ‚ä¸­ï¼Œéœ€è¦æ¸…æ™°çš„ç»™å—ä¼—æŒ‡å‡ºï¼šé©±åŠ¨ä¸šåŠ¡å½“å‰å‘å±•çš„ä¸»è¦åŠ¨åŠ›å’Œé˜»åŠ›æ˜¯ä»€ä¹ˆï¼Ÿä»¥åŠå¯¹åº”çš„åç»­æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ\næ‰€ä»¥å™äº‹çº¿ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š\nPerformance è¾¾åˆ°é¢„æœŸï¼Œä¸»è¦æ˜¯å› ä¸º AB è¶…å‡ºé¢„æœŸï¼ŒC æ— æ˜æ˜¾å˜åŒ–ï¼ŒD æ˜æ˜¾åœ°åŸŸé¢„æœŸ A ä¸»è¦æ˜¯å› ä¸ºåšäº† xxxxï¼Œåç»­æ‰“ç®— xxx B ä¸»è¦æ˜¯å› ä¸º xxxï¼Œåç»­æ‰“ç®— xxx C åšäº† xxxï¼Œæ²¡æœ‰æ•ˆæœï¼Œåç»­ä¸æäº† D ä¸»è¦æ˜¯ xxxï¼Œå¯¼è‡´æ²¡æœ‰è¾¾åˆ°é¢„æœŸï¼Œåç»­ todo æ˜¯ xxxï¼Œéœ€è¦æ”¯æŒï¼š@xxx\nç®€å•å¹²å‡€ï¼Œä¸æ‹–æ³¥å¸¦æ°´ã€‚\næ¥ä¸‹æ¥æ˜¯çµé­‚ä¸‰é—®ã€‚\n å¦‚ä½•é€‰æ‹© break down çš„è§’åº¦ è¿™é‡Œçš„åˆ†è§£åŠ¨ä½œï¼Œé€šå¸¸æœ‰å¤šä¸ªç»´åº¦å¯ä»¥é€‰æ‹©ã€‚  å…³é”®çš„å†³ç­–ç‚¹åœ¨äºï¼šæ€ä¹ˆåˆ‡åˆ†æœ€èƒ½ååº”çœŸå®çš„é—®é¢˜ï¼Œå°±é€‰æ‹©å“ªä¸ªè§’åº¦ã€‚æ‰€ä»¥å®é™…æ“ä½œä¸­ï¼Œéƒ½ä¼šåœ¨åº•ä¸‹å„ç§æ¨æ¼”ï¼Œç›´åˆ°æ‰¾å¥½æœ€ä½³çš„ä¸šåŠ¡è§‚å¯Ÿè§’åº¦ã€‚\nä¸ºä»€ä¹ˆé¿å…æŠŠå¢é•¿å…¬å¼æ‹†è§£åˆ° -2 ç”šè‡³ -3 å±‚çº§ï¼Ÿ   å¤ªå¤æ‚ çœ‹ä¸æ‡‚ å¤§å®¶ä¸å…³å¿ƒï¼ˆè¿™æ˜¯ä½ ä»½å†…çš„äº‹å„¿ï¼‰  åå®šå‹çš„èŒèƒ½çº¿ã€æ”¯æŒç±»çš„ä¸šåŠ¡æ˜¯å¦ä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹å¼ï¼Ÿ   å¯ä»¥ è¿™ç§æœªå¿…å¯ä»¥æ˜æ˜¾é‡åŒ–ï¼Œä½†æ˜¯å®é™…äº§å‡ºæœ€åä¹Ÿæ˜¯å¯ä»¥åˆ†è§£æˆå‡ ä¸ªåŠ¨ä½œï¼Œé“ç†ä¸€æ ·çš„ã€‚å¦‚æœæ— æ³•åˆ†è§£ï¼Œå¾ˆå¯èƒ½ä½ å¯¹ä¸šåŠ¡çš„ç†è§£è¿˜æ˜¯ç¼ºä¹ä¸€ä¸ªã€å‘ä¸ŠæŠ½ç¦»ã€çš„åŠ¨ä½œã€‚  nothing is unbreakable.\nç»´åº¦ 2.5ï¼šæ·±å…¥ä¸‹é’»ï¼Œä»¥å°è§å¤§ å‰é¢ä¼šæ— é™å‹åˆ¶ä½ æƒ³ä¸‹é’»åˆ°-2 -3 å±‚çº§çš„å†²åŠ¨ï¼Œè¿™é‡Œå¯ä»¥å‘æ³„ä¸€ä¸‹ã€‚\næ— è®º 1 æˆ– 2ï¼Œéƒ½ä¼šç»™äººä¸€ç§æµ®äºè¡¨é¢çš„æ„Ÿè§‰ï¼Œè¿™é‡Œæ˜¯æ‹¿ä¸ªæ”¾å¤§é•œï¼ŒæŠŠæŸä¸ªç‚¹æ‰“å¼€æ¥çœ‹ã€‚\nä¸ºä»€ä¹ˆè¯´è¿™ä¸ªç»´åº¦æ˜¯ä¸šåŠ¡çš„ä»¥å°è§å¤§å‘¢ï¼Œå› ä¸ºè¿™ä¸ª case èƒŒåååº”çš„æ˜¯ç³»ç»Ÿå±‚é¢çš„ todoï¼Œå¤šå°‘æœ‰ä¸€äº›ä¸Šçº²ä¸Šçº¿çš„å‘³é“ï¼Œæ¯”å¦‚ï¼š\n ä¸€ä¸ª bad case çš„åˆ†æï¼Œéœ€è¦æç‚¼åˆ°ååº”å‡ºçš„ xx å±‚é¢æœ‰å“ªäº›ä¸è¶³ï¼Œåç»­ todo æ˜¯å•¥ï¼Œéœ€è¦ xx æ¥æ”¯æŒé…åˆã€‚ \u0026hellip;  å¦‚ä½•ç²¾ç›Šæ±‚ç²¾ ä¸‰ç§è§’è‰²çš„ä¸ªæ€§åŒ–éœ€æ±‚æ€ä¹ˆåŠ è¿™ä¸ªä¸ç”¨æ‹…å¿ƒã€‚\nå¦‚æœä»ä¸Šé¢ 2.5 ä¸ªè§’åº¦è¯´æ¸…æ¥šäº†ä¸šåŠ¡ï¼Œä½ ä¼šå‘ç°è¿™äº›é—®é¢˜çš„ç­”æ¡ˆéƒ½åœ¨å„ç§ todo é‡Œäº†ã€‚\nå¦ä¸€ç§æ›´ä¸ºç›´æ¥ï¼Œåœ¨è®²æ¸…æ¥šä¸šåŠ¡æœ¬èº«çš„ facts ä¹‹åï¼Œåé¢å•ç‹¬èµ·ä¸ªæ¨¡å—ï¼Œç”¨æ¥è®²æ¸…æ¥šéœ€è¦è®¨è®ºçš„é—®é¢˜å’Œéœ€è¦çš„æ”¯æŒï¼Œå¯¹åº” at åˆ°å…·ä½“çš„äººã€‚\nOKR æ€ä¹ˆåŠ å¦‚æœåšå®Œä¸Šè¿°é‚£ä¹ˆå¤šå·¥ä½œä¹‹åï¼Œè¿˜æ˜¯å¯¹äºæ¥ä¸‹æ¥è¦åšçš„äº‹å„¿ä¸æ¸…æ¥šï¼Œå†™ä¸å‡º okrï¼Œé‚£å°±å†èµ°ä¸€éã€‚\nç¬¦åˆé¢„æœŸçš„äº‹å„¿ï¼Œéƒ½æ˜¯ä½ å¥½æˆ‘å¥½å¤§å®¶å¥½ï¼Œæ— éæ˜¯é‡è®¾ç›®æ ‡çš„äº‹å„¿ã€‚ä¸ç¬¦åˆé¢„æœŸçš„äº‹å„¿ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨ï¼Œç”¨ okr åšç›®æ ‡ç®¡ç†ã€‚\n å¯ä»¥ç«‹ç«¿è§å½±çš„äº‹å„¿ï¼Œæ˜¯å¿«å˜é‡ï¼Œé€šå¸¸å¾ˆå¤šäººæ¥ç›¯ï¼Œè¿™äº›å¿«å˜é‡å› ä¸ºæ˜¯çŸ­æœŸä¸šåŠ¡å¢é•¿çš„åŠ¨åŠ›ï¼Œåè€Œä¸å®¹æ˜“å‡ºé—®é¢˜ï¼Œå³ä½¿å‡ºäº†é—®é¢˜ä¿®èµ·æ¥ä¹Ÿç‰¹åˆ«å¿«ã€‚ å®¹æ˜“å‡ºé—®é¢˜çš„æ˜¯é‚£äº›å½±å“é•¿æœŸå¢é•¿çš„æ…¢å˜é‡ï¼ŒçŸ­æœŸæœªå¿…é©¬ä¸Šäº§å‡ºä½œç”¨ï¼Œéœ€è¦æ›´é«˜å±‚çº§çš„ç®¡ç†å±‚å…³æ³¨ï¼Œå¹¶ç”¨å‡ ä¸ªæœˆçš„ okr æ¥çªç ´ï¼Œæ¯”å¦‚ç»„ç»‡é—®é¢˜ã€æ•ˆç‡é—®é¢˜ã€åˆè§„é—®é¢˜ã€å®‰å…¨é—®é¢˜ç­‰ã€‚ ä¸€çº¿å‘˜å·¥é™¤äº†å¤§é‡å…³æ³¨æ—¥å¸¸å¿«å˜é‡ä¹‹å¤–ï¼Œè¿˜éœ€è¦ç»§æ‰¿ä¸€éƒ¨åˆ†æ¥è‡ªæ›´é«˜å±‚çº§çš„æ…¢å˜é‡å·¥ä½œã€‚  å¿«å˜é‡\n çŸ­æœŸä¸šåŠ¡å¢é•¿çš„åŠ¨åŠ›ï¼Œåé¦ˆè§æ•ˆå¿«ã€‚\n  ç¬¦åˆé¢„æœŸï¼šé‡è®¾ç›®æ ‡ ä¸ç¬¦åˆé¢„æœŸï¼šä¸šåŠ¡çº¿è´Ÿè´£äºº-1 -2 çš„ okrï¼Œmanager -1 -2 çš„ okr  æ…¢å˜é‡\n é•¿æœŸå¢é•¿çš„åŸºçŸ³ï¼Œéœ€è¦å¤§é‡æ™´å¤©ä¿®é›¨ä¼çš„å·¥ä½œã€‚\n  ç¬¦åˆé¢„æœŸï¼šç»§ç»­ä¿æŒ ä¸ç¬¦åˆé¢„æœŸï¼šä¸šåŠ¡çº¿è´Ÿè´£äººçš„ okrï¼Œmanger çš„ okr  å…¶ä»–  ä½¿ç”¨å°ç™½è¯­è¨€ï¼Œå°½é‡å‡å°‘æœ¯è¯­ã€‚ æ§åˆ¶ç¯‡å¹…ï¼Œ1w å­—ä»¥å†… æ— æ ¼å¼å’Œè¯­æ³•é”™è¯¯  ","permalink":"https://zhenfeng-zhu.github.io/post/%E6%89%93%E9%80%A0%E6%96%87%E6%A1%A3/","summary":"ä¸¤ç§æ–‡æ¡£è§†è§’ï¼šéœ€æ±‚è§†è§’å’Œä¾›ç»™è§†è§’ éœ€æ±‚è§†è§’ï¼šæƒ³æƒ³ä½ çš„å—ä¼—æ˜¯è°ï¼Œäº†è§£ä»–ä»¬çš„æœŸæœ›å€¼ ç®¡ç†è€…\n æ±‡æŠ¥ä¸Šçº§\n  ä¸šåŠ¡æ•´ä½“æƒ…å†µ æˆ˜ç•¥é‡å¿ƒå’Œèµ„æºæŠ•å…¥ é¢ä¸´é—®é¢˜å’Œè§£å†³åŠæ³•  åä½œè€…\n ä¸šåŠ¡æµç¨‹èŠ‚ç‚¹ä¸­çš„ä¸€ç¯ï¼Œä½ çš„å·¥ä½œä¼šå½±å“ taï¼Œæˆ–è€… ta çš„å·¥ä½œä¼šå½±å“ä½ ã€‚\n  ä¸šåŠ¡æ•´ä½“æƒ…å†µ æ¥ä¸‹æ¥ä½ çš„å“ªäº›äº‹æƒ…ä¼šå½±å“åˆ°æˆ‘çš„äº‹æƒ…ï¼Ÿæˆ‘è¯¥æ€ä¹ˆé…åˆï¼Ÿ  ä¿¡æ¯åŒæ­¥è€…\n ä»–ä»¬å¤§éƒ¨åˆ†æ—¶é—´å¹¶ä¸åœ¨ä¸šåŠ¡æµç¨‹èŠ‚ç‚¹ä¸­ã€‚\n  ä¸šåŠ¡æ•´ä½“æƒ…å†µï¼Œæˆ‘å°±æ˜¯æƒ³çŸ¥é“ä¸€ä¸‹ã€‚  ä¾›ç»™è§†è§’ï¼šæŠŠæˆ‘åšäº†ä»€ä¹ˆå±•ç¤ºç»™ä½ çœ‹  ç‰¹ç‚¹ï¼šæ–‡æ¡£çš„æ•´ä½“ç»“æ„å’Œä¸šåŠ¡çš„äºŒçº§éƒ¨é—¨æ¶æ„é«˜åº¦ç›¸ä¼¼ï¼Œå„ä¸ªäºŒçº§éƒ¨é—¨è´Ÿè´£å†™ä¸€å°å—ï¼Œæœ€åæ‰¾ PMO ç¼åˆåœ¨ä¸€èµ·ã€‚ é™·é˜±ï¼šå¾ˆå®¹æ˜“å¤±å»é‡ç‚¹ï¼Œå˜æˆå·¥ä½œçš„æµæ°´è´¦ï¼Œæ˜¥æ™šå¼æ±‡æŠ¥ ç¼ºç‚¹ï¼šå¯¹ä¸ç†Ÿæ‚‰çš„äººæ¥è¯´ï¼Œè¿™äº›è€¦åˆå…³ç³»å’Œä¸šåŠ¡é€»è¾‘ç†è§£æˆæœ¬æ¯”è¾ƒé«˜ï¼Œå¾ˆå®¹æ˜“å¬æ™•ï¼Œä½†åˆä¸å¥½æ„æ€ç°åœºæé—®ï¼Œä¼šåä¸€çŸ¥åŠè§£ã€‚ ä¼˜ç‚¹ï¼šäº‹æ— å·¨ç»†ï¼Œé¢é¢ä¿±åˆ°ã€‚  ã€æ€»ç»“ã€‘\n å…¬å¸åŒæœˆä¼šï¼šéœ€æ±‚è§†è§’ä¼˜å…ˆ å†…éƒ¨ reviewï¼šä¾›ç»™è§†è§’ä¼˜å…ˆ  èšç„¦ï¼šæ€ä¹ˆæŠŠä¸€å—å„¿ä¸šåŠ¡è¯´æ¸…æ¥šã€è®²æ˜ç™½ è§£æ³•ï¼šç”¨ 2.5 ä¸ªç»´åº¦æ¥å™è¿°ä¸šåŠ¡  ç»´åº¦ 1ï¼šä¸šåŠ¡ä¸»çº¿ï¼Œæ¦‚æ‹¬æ€§è´¨çš„ä¸œè¥¿ï¼Œåç²— ç»´åº¦ 2ï¼šä»ä¸€ä¸ªæˆ–å‡ ä¸ªç»´åº¦å¯¹ä¸šåŠ¡çš„ break downï¼Œè®©å¤§å®¶çœ‹åˆ°å¢é•¿æˆ–ä¸‹é™çš„å½’å›  ç»´åº¦ 2.5ï¼šé€‰ä¸€ä¸ªæœ€å€¼å¾—æ‹¿å‡ºæ¥è¯´çš„å•ç‚¹ï¼Œå¾€ä¸‹é’»ï¼Œå±•å¼€æ¥è¯´ï¼Œå¢åŠ ä¿¡æ¯ä¸°å¯Œåº¦ï¼Œä»¥å°è§å¤§ã€‚  ç»´åº¦ 1ï¼šä¸šåŠ¡æ•´ä½“çŠ¶å†µï¼Œå¦‚ä½•åœ¨æœ€çŸ­çš„æ—¶é—´å†…è®©å¤§å®¶äº†è§£è¿™ä¸ªä¸šåŠ¡çš„è¿›å±•  for è´Ÿè´£äººï¼šå¦‚æœæ¯å¤©åªæœ‰ä¸€åˆ†é’Ÿï¼Œä½ ä¼šå…³æ³¨å“ªäº›æŒ‡æ ‡å’Œäº‹æƒ…è¿›å±•ï¼Ÿ for ä¸‰ç§è§’è‰²ï¼šå‡è®¾æœ‰ä¸”åªæœ‰ä¸‰ä¸ªé—®é¢˜ï¼Œä½ ä¼šé—®å…³äºè¿™ä¸ªä¸šåŠ¡çš„ä»€ä¹ˆé—®é¢˜ï¼Ÿ  æƒ³æ˜ç™½ä¸Šè¿°çš„ä¸¤ä¸ªé—®é¢˜ï¼Œç­”æ¡ˆå‘¼ä¹‹æ¬²å‡ºï¼›æƒ³ä¸å‡ºæ¥ï¼Œå°±ç»§ç»­æƒ³ï¼Œå’Œä¸Šçº§è®¨è®ºï¼Œå’Œåä½œæ–¹è®¨è®ºï¼Œç›´åˆ°å¾—å‡ºè®©ä½ å¾ˆè¸å®å’Œè‡ªä¿¡çš„ç­”æ¡ˆã€‚\nè¦æ±‚ç®€å•ç›´æ¥ï¼Œè®©äººç§’æ‡‚ã€‚\nç»´åº¦ 2ï¼šæ‰¾åˆ°ä¸šåŠ¡çš„å¢é•¿å…¬å¼ï¼Œæ‹†è§£å¼€æ¥çœ‹ æ·±åˆ»ç†è§£ä¸šåŠ¡æ˜¯èµ·ç‚¹ï¼Œé’ˆå¯¹ç»´åº¦ 1 é‡Œé¢çš„å…³é”®æŒ‡æ ‡ï¼ŒæŠŠä»–ä»¬åˆ†è§£æˆä¸€çº§å¢é•¿å…¬å¼ã€‚","title":"æ‰“é€ æ–‡æ¡£"},{"content":"ä¸€ã€ç†è§£è‡ªå·±ä¹‹ç”Ÿç†ä¸å¿ƒç†å¥åº·\n è‚¥èƒ–ä»£ç  æ­£å¿µçš„å¥‡è¿¹ å†¥æƒ³çš„åŸç†ä¸å®è·µè¿›é˜¶  äºŒã€ç†è§£è‡ªå·±ä¹‹å·…å³°æ—¶åˆ»\n è·¨è¶Šä¸å¯èƒ½ çº³ç“¦å°”å®å…¸ï¼šè´¢å¯Œå’Œå¹¸ç¦æŒ‡å— å·¨äººçš„å·¥å…·ä¹¦  ä¸‰ã€ç†è§£ä¸–ç•Œä¹‹å¤æ‚ç§‘å­¦\n å·´æ‹‰å·´è¥¿æˆåŠŸå®šå¾‹ è§„æ¨¡ ç›´è§‰æ³µ å¦‚ä½•è§£å†³å¤æ‚é—®é¢˜  å››ã€ç†è§£ä¸–ç•Œä¹‹é‡‘èã€æŠ•èµ„ã€ç»æµ\n è´¢å¯Œçš„èµ·æº æŠ€æœ¯é©å‘½ä¸é‡‘èèµ„æœ¬ æŠ€æœ¯çš„æœ¬è´¨ å¤æ‚ç»æµå­¦ï¼šç»æµæ€æƒ³çš„æ–°æ¡†æ¶ æ–‡æ˜-ç°ä»£åŒ–ä»·å€¼æŠ•èµ„ä¸ä¸­å›½ å¤§è¡°é€€å¹´ä»£  äº”ã€ç†è§£ä¸–ç•Œä¹‹ç”Ÿæ´»\n ç½®èº«äº‹å†…ï¼šä¸­å›½æ”¿åºœä¸ç»æµå‘å±• ä¸­å›½çš„é€‰æ‹©ï¼šä¸­ç¾åšå¼ˆä¸æˆ˜ç•¥æŠ‰æ‹© ä¸­å›½çš„å®—æ•™  ä¸ƒã€ä¸¤æœ¬ä¼ è®°\n å¯Œå…°å…‹æ—ä¼  ä¹”å¸ƒæ–¯ä¼   ","permalink":"https://zhenfeng-zhu.github.io/post/%E4%B9%A6%E5%8D%95/","summary":"ä¸€ã€ç†è§£è‡ªå·±ä¹‹ç”Ÿç†ä¸å¿ƒç†å¥åº·\n è‚¥èƒ–ä»£ç  æ­£å¿µçš„å¥‡è¿¹ å†¥æƒ³çš„åŸç†ä¸å®è·µè¿›é˜¶  äºŒã€ç†è§£è‡ªå·±ä¹‹å·…å³°æ—¶åˆ»\n è·¨è¶Šä¸å¯èƒ½ çº³ç“¦å°”å®å…¸ï¼šè´¢å¯Œå’Œå¹¸ç¦æŒ‡å— å·¨äººçš„å·¥å…·ä¹¦  ä¸‰ã€ç†è§£ä¸–ç•Œä¹‹å¤æ‚ç§‘å­¦\n å·´æ‹‰å·´è¥¿æˆåŠŸå®šå¾‹ è§„æ¨¡ ç›´è§‰æ³µ å¦‚ä½•è§£å†³å¤æ‚é—®é¢˜  å››ã€ç†è§£ä¸–ç•Œä¹‹é‡‘èã€æŠ•èµ„ã€ç»æµ\n è´¢å¯Œçš„èµ·æº æŠ€æœ¯é©å‘½ä¸é‡‘èèµ„æœ¬ æŠ€æœ¯çš„æœ¬è´¨ å¤æ‚ç»æµå­¦ï¼šç»æµæ€æƒ³çš„æ–°æ¡†æ¶ æ–‡æ˜-ç°ä»£åŒ–ä»·å€¼æŠ•èµ„ä¸ä¸­å›½ å¤§è¡°é€€å¹´ä»£  äº”ã€ç†è§£ä¸–ç•Œä¹‹ç”Ÿæ´»\n ç½®èº«äº‹å†…ï¼šä¸­å›½æ”¿åºœä¸ç»æµå‘å±• ä¸­å›½çš„é€‰æ‹©ï¼šä¸­ç¾åšå¼ˆä¸æˆ˜ç•¥æŠ‰æ‹© ä¸­å›½çš„å®—æ•™  ä¸ƒã€ä¸¤æœ¬ä¼ è®°\n å¯Œå…°å…‹æ—ä¼  ä¹”å¸ƒæ–¯ä¼   ","title":"ä¹¦å•"},{"content":"æœ€è¿‘ä¸¤å¹´ï¼Œæ·±æ„Ÿè¶Šæ¥è¶Šå¤šäººæ‚£ä¸Šäº†â€œæ¯’é¸¡æ±¤è¢«è¿«å®³å¦„æƒ³ç—‡â€ï¼Œå½“åˆ«äººæŠ›å‡ºä¸€ä¸ªè®ºç‚¹åï¼Œä½ ä¸‹æ„è¯†çš„å°†å…¶å½’ä¸ºâ€œé¸¡æ±¤â€ã€â€œè£…é€¼â€ã€â€œå‡æ­£ç»â€ï¼Œè™½ç„¶å†…å¿ƒä¸€æ—¶ç«™ä¸Šäº†é“å¾·é«˜åœ°å¹¶æ²¾æ²¾è‡ªå–œï¼Œä½†é•¿æœŸåšæŒä¸‹æ¥ï¼Œä½ å·²ç»æ“…é•¿äº†ç™¾æ¯’ä¸ä¾µï¼Œè¿™éå¸¸å¥½ï¼Œä½†è¿™ä¹Ÿæ˜¯å¦ä¸€ç§è‡ªæˆ‘ç»é£Ÿã€‚\næˆ‘å€’æ˜¯è®¤ä¸ºï¼Œæ”¾ä½ä¸€ç‚¹å¯¹è‡ªæˆ‘æ™ºè¯†é«˜åœ°çš„ç»´æŠ¤ï¼Œè®¤çœŸå¯¹å¾…é‚£äº›è®©ä½ ä¸‹æ„è¯†å¿ƒç”ŸåŒæ¶çš„è§‚ç‚¹ï¼Œä¼šè®©è‡ªå·±å¿ƒé‡Œå°‘ç‚¹æˆ¾æ°”ï¼Œé¡ºä¾¿æ‰¾åˆ°ä¸€äº›æœªæ¥çš„æœºä¼šã€‚\nä¸è¦è¯•å›¾è‡ªå¾‹ keep çš„ slogan å«â€œè‡ªå¾‹ç»™æˆ‘è‡ªç”±â€ï¼Œå¯ç°å®ç”Ÿæ´»ä¸­æœ‰å¤šå°‘äººçœŸçš„èƒ½åšæŒè‡ªå¾‹ï¼Ÿ\næˆ‘é—®è¿‡å¾ˆå¤šåšæŒå¥èº«çš„äººï¼Œä»–ä»¬å¹¶ä¸æ˜¯æ¯å¤©å¾ˆç—›è‹¦çš„å»å¥èº«æˆ¿ï¼Œè€Œæ˜¯æ¯å¤©è¿«ä¸åŠå¾…çš„å»å¥èº«æˆ¿ï¼Œå› ä¸ºé‚£é‡Œä¼šè®©ä»–ä»¬å¾ˆçˆ½ã€‚è¦æ˜¯ä¸ä¿¡çš„è¯ï¼Œä½ å¯ä»¥å»æ‰¾èº«è¾¹çš„äººé—®é—®ã€‚\nè¦äº†è§£â€œè‡ªå¾‹â€è¿™ç§æ„è¯†çœ‹ä¼¼å¾ˆè™šæ— ç¼¥ç¼ˆï¼Œä½†æ‰€æœ‰çš„æ„è¯†éƒ½æ˜¯è¢«å¤§è„‘ç¥ç»é€’è´¨æ‰€æ§åˆ¶çš„ï¼Œæˆ‘ä»¬åº”è¯¥ä»å¤§è„‘ç¥ç»é€’è´¨å±‚é¢ï¼Œçœ‹è¯¥å¦‚ä½•åˆ©ç”¨å®ƒä»¬ï¼Œè€Œä¸æ˜¯æŠµæŠ—ä»–ä»¬ã€‚\næˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™äº›ç¥ç»é€’è´¨æ˜¯å¦‚ä½•èµ·ä½œç”¨çš„ï¼š\n å¤šå·´èƒºæ˜¯å¤§è„‘ä¸­æœ€ä¸»è¦çš„å¥–åŠ±åŒ–å­¦ç‰©è´¨ï¼Œå‚¬äº§ç´ ç´§éšå…¶åï¼Œç„¶è€Œè¡€æ¸…ç´ ã€å†…å•¡è‚½ã€å»ç”²è‚¾ä¸Šè…ºç´ å’ŒèŠ±ç”Ÿå››çƒ¯ä¹™é†‡èƒºä¹Ÿå‘æŒ¥ç€ä½œç”¨ã€‚ è¿™äº›åŒ–å­¦ç‰©è´¨ä¸­çš„æ¯ä¸€ç§æ‰€äº§ç”Ÿçš„æ„‰æ‚¦æ„Ÿéƒ½ä¼šé©±ä½¿æˆ‘ä»¬é‡‡å–è¡ŒåŠ¨ï¼Œå¦‚æœè¡ŒåŠ¨æˆåŠŸä¾¿æœ‰äº†æ­£åé¦ˆï¼Œå°±ä¼šåœ¨è®°å¿†ä¸­å¼ºåŒ–è¯¥è¡Œä¸ºã€‚\n æ­£ç¡®çš„å­¦ä¹ æ–¹å¼ï¼Œä¸æ˜¯ä¾é è‡ªå¾‹ï¼Œè€Œæ˜¯è¦å€ŸåŠ©è¿™äº›ç¥ç»é€’è´¨å‘æŒ¥ä½œç”¨ã€‚\nä¸ºä»€ä¹ˆå–œæ¬¢åˆ·æŠ–éŸ³å’Œ B ç«™è€Œä¸æƒ³åˆ·å­¦ä¹  æ˜¯é‚£äº›è®©ä½ äº§ç”Ÿå¥½å¥‡å¿ƒçš„æ ‡é¢˜ï¼Œæ¯”å¦‚é‚£äº›äººäººéƒ½å¬è¿‡ã€æ²¡äººçœŸçš„æ‡‚çš„äº‹æƒ…ã€‚\nå¥½å¥‡å¿ƒæ˜¯ç”Ÿç‰©å­¦è®¾è®¡çš„èµ·ç‚¹ã€‚è¿™æ˜¯ä½ å¯¹æŸäº‹çš„åŸºæœ¬å…´è¶£ï¼Œåœ¨ç¥ç»åŒ–å­¦ä¸Šç”±ä¸€ç‚¹å»ç”²è‚¾ä¸Šè…ºç´ å’Œå¤šå·´èƒºæ”¯æ’‘ã€‚è€Œå¥½å¥‡å¿ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŠ¨åŠ›ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯æ¿€æƒ…çš„åŸºç¡€æˆåˆ†ï¼Œæ˜¯ä¸€ä¸ªæ›´å¤§çš„åŠ¨åŠ›ã€‚\né‚£ä»€ä¹ˆæ ·çš„å†…å®¹è®©ä½ çœ‹å®Œåä¹Ÿè§‰å¾—å¾ˆçˆ½å‘¢ï¼Ÿ\nå¤ªç®€å•çš„å†…å®¹ä¼šè®©ä½ è§‰å¾—å¥½æ— èŠï¼Œå¤ªå¤æ‚çš„å†…å®¹åˆå¾ˆæ¯ç‡¥çœ‹ä¸æ‡‚ï¼Œæ˜¯é‚£äº›ä½ æ—¢æœ‰ä¸€äº›äº†è§£ä½†åˆå‡ºä¹ä½ æ„æ–™çš„å†…å®¹ï¼ŒåŒæ—¶å™äº‹æ‰‹æ³•åˆå¯Œæœ‰èŠ‚å¥æ„Ÿï¼Œä¸åœçš„å¼•å‘ä½ æƒ…ç»ªå˜åŒ–çš„å†…å®¹ã€‚\nåˆ©ç”¨å¥½å¥‡å¿ƒè®©è‡ªå·±å¼€å§‹ä¸€æ¬¡å­¦ä¹ ï¼Œåˆ©ç”¨å¿ƒæµè®©æˆ‘ä»¬æ²‰æµ¸ï¼Œæœ€åç”¨è‡ªæ´½çš„é€»è¾‘å’Œç»“è®ºå®Œæˆç»ˆææš´å‡»ã€‚\næ­£ç¡®çš„åˆ·å­¦ä¹ æ–¹å¼ 1ã€å¦‚ä½•åˆ©ç”¨å¥½å¥‡å¿ƒå¼€å§‹\nå­¦ä¹ å°±å’Œåˆ·è§†é¢‘ä¸€æ ·ï¼Œé¦–å…ˆï¼Œä½ è¦æœ‰ä¸ªè®©ä½ å¥½å¥‡å¿ƒçš„é—®é¢˜ã€‚\nè¿™ä¸€æ­¥å¯èƒ½æ˜¯æœ€éš¾åˆ°å¤§å®¶çš„ï¼Œæ¯•ç«Ÿå­¦ç”Ÿæ—¶ä»£çš„æˆ‘ä»¬ï¼Œä¹ æƒ¯äº†åœ¨åˆ«äººè§„å®šå¥½çš„æ¡†æ¶å†…çœ‹ä¹¦ã€ç­”é¢˜ï¼Œæ—©å°±æ²¡äº†å¥½å¥‡å¿ƒã€‚\nå¯¹æ­¤ï¼Œæˆ‘çš„è§‚ç‚¹æ˜¯ï¼Œä½ ä¸æ˜¯å¤±å»äº†å¥½å¥‡å¿ƒï¼Œåªæ˜¯æ‰¾ä¸åˆ°äº†å¥½å¥‡å¿ƒï¼Œå…´è¶£ä¹Ÿä¸æ˜¯å¤©ç”Ÿçš„ï¼Œè€Œæ˜¯åå¤©åŸ¹å…»çš„ã€‚\nè¿™çš„ç¡®æŒºéš¾ï¼Œåœ¨èº«è¾¹æœ‹å‹ä¸­å®è·µè¿‡ä¸€ä¸ªå¯è¡Œçš„åŠæ³•ã€‚\n 1 æ‹¿ä¸€å¼ çº¸ï¼ŒæŠŠä½ ç”Ÿæ´»ä¸­æ„Ÿå…´è¶£çš„äº‹æƒ…å…¨éƒ¨åˆ—ä¸Šå»ï¼Œå¤§äº‹å°äº‹éƒ½å¯ä»¥åˆ—ï¼› 2 æ‰¾åˆ°è¿™äº›äº‹æƒ…çš„äº¤å‰ç‚¹ï¼Œä»¥åŠå¼„æ¸…æ¥šæŸä¸ªç‰¹å®šçš„äº¤å‰ç‚¹æ˜¯å¦çœŸçš„è¶³å¤Ÿæœ‰è¶£ï¼Œè¿™äº›äº¤å‰ç‚¹ï¼Œå¾€å¾€è•´å«äº†å¯èƒ½çˆ†å‘çš„å¥½å¥‡å¿ƒï¼› 3 æ€ä¹ˆçŸ¥é“ä¸€ä¸ªäº¤å‰ç‚¹æ˜¯å®Œç¾çš„ï¼Ÿå»è¿™äº›äº¤å‰ç‚¹ä¸Šâ€œç©ä¸€ç©â€ï¼ŒçœŸæ˜¯æ˜¯æ‰¾ä¸€äº›ä¸œè¥¿ç©ä¸€ç©ï¼Œè€Œä¸æ˜¯å­¦ä¸€å­¦ã€‚ 4 ç”¨â€œå…¬å¼€çš„æˆåŠŸâ€æ¿€åŠ±å†æ·±å…¥ä¸€ç‚¹ï¼Œäººç±»æ˜¯ä¸€ç§ç¤¾ä¼šåŠ¨ç‰©ï¼Œæˆ‘ä»¬è¦åˆ©ç”¨å¥½èº«è¾¹äººçš„æ­£åé¦ˆï¼Œå“ªæ€•æ˜¯å‘ä¸ªæœ‹å‹åœˆåˆ†äº«ä¸€ä¸‹ã€‚\n ä¸Šé¢çš„è¿‡ç¨‹çœ‹ä¼¼æœ‰äº›æ— è¶£ï¼Œä½†è¯·å®Œæ•´çš„æŠŠè¿™å››éƒ¨æµç¨‹èµ°å‡ éï¼Œç›¸ä¿¡æˆ‘ï¼Œä¼šæˆ–å¤šæˆ–å°‘çš„å¼€å¯ä¸€ç‚¹çš„ã€‚\n2ã€å¦‚ä½•åˆ©ç”¨å¿ƒæµè®©æˆ‘ä»¬æ²‰æµ¸\nå¿ƒæµæ˜¯ä¸€ä¸ªç‰¹åˆ«å¤æ‚çš„è¯é¢˜ï¼Œè¿™é‡Œæ¨èä¸€æœ¬å½»åº•è®²æ¸…æ¥šå¿ƒæµçš„ä¹¦ã€Šthe art of impossibleã€‹ï¼Œä½†è¿™é‡Œï¼Œåªè®²ä¸€ä¸ªæœ€æ ¸å¿ƒçš„ç†è®ºï¼šå¿ƒæµåŒºé—´ã€‚\nå‰é¢æè¿‡ï¼Œå¤ªç®€å•çš„å†…å®¹è®©äººæ— èŠï¼Œå¤ªéš¾çš„å†…å®¹è®©äººç—›è‹¦ï¼Œè¿™å°±æ˜¯å¿ƒæµåŒºé—´çš„æ¥æºã€‚\næˆ‘ä»¬è¦è§£å†³çš„æ˜¯é‚£äº›ä¸å¤ªéš¾åˆä¸å¤ªå®¹æ˜“çš„å›°æƒ‘ï¼Œå³ä½ å·²ç»æ¨¡æ¨¡ç³Šç³ŠçŸ¥é“æ€è·¯ï¼Œä½†åˆä¸å®Œå…¨æ¸…æ¥šè§£æ³•çš„å›°æƒ‘ã€‚è¿™æ ·çš„å›°æƒ‘æœ€å®¹æ˜“è®©ä½ ä½“ä¼šåˆ°â€å­¦ä¹ è¿‡ç¨‹çš„ä¹è¶£â€œã€‚\nè€Œçœ‹ä¹¦ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“äº§ç”Ÿå¿ƒæµçŠ¶æ€çš„äº‹æƒ…ï¼Œä½†å¾ˆå¤šäººæ˜æ˜å¯åŠ¨äº†çœ‹ä¹¦ï¼Œä½†çœ‹ä¸è¿›å»ï¼Œæ ¸å¿ƒåŸå› æ˜¯ï¼šä½ çš„ä¹¦é€‰é”™äº†ã€‚\nè®°ä½è¿™ä¸€ç‚¹ï¼šä»»ä½•è®©ä½ çœ‹ä¸è¿›å»çš„ä¹¦ï¼Œè¦ä¹ˆæ˜¯ä¹¦æœ¬èº«å†™çš„å¤ªçƒ‚äº†ï¼ˆå°±åƒä¸€ä¸ªç”µå½±é€‰é¢˜å¾ˆå¥½ä½†ç¼–å‰§å¤ªçƒ‚ä¸€æ ·ï¼‰ï¼Œè¦ä¹ˆå°±æ˜¯ä½ çš„çŸ¥è¯†ç»“æ„è¿˜ä¸è¶³ä»¥æ”¯æ’‘çœ‹æ‡‚è¿™æœ¬ä¹¦ã€‚\næ¯”å¦‚ä¸€ä¸ªæ²¡æœ‰ä»»ä½•ç»æµå­¦æ¦‚å¿µçš„äººå»å­¦ä¹ ç»æµå­¦åŸç†ï¼Œä»–æ˜¯å¾ˆéš¾è¯»ä¸‹å»çš„ï¼Œå³ä¾¿å‹‰å¼ºè¯»ä¸‹å»æ˜¯ç—›è‹¦ä¸”å¾ˆå°‘è¾“å…¥çš„è¯»ä¸‹å»ã€‚è¿™ç§â€œç¡¬éª¨å¤´â€åº”è¯¥èµ¶ç´§æ”¾ä¸‹ï¼Œå†é€‰ä¸€æœ¬ä½ æ„Ÿå…´è¶£çš„ä¹¦ï¼Œæ‰¾ä¸€æœ¬ä¹¦èƒ½è®©ä½ çœ‹çš„çˆ½çš„ä¹¦ã€‚\nè¿™ä¹Ÿæ˜¯ã€ŠThe Motivation Myth åŠ¨åŠ›ç¥è¯ã€‹ä¸€ä¹¦é‡Œçš„æ ¸å¿ƒè§‚ç‚¹ï¼šå°æˆåŠŸå½¢æˆåŠ¨åŠ›ï¼ŒåŠ¨åŠ›ä¿ƒæˆæ›´å¤§çš„æˆåŠŸï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ­£åé¦ˆè¿é”ååº”ã€‚ä¸€èˆ¬çš„æ”¹å˜æ€æƒ³å’Œä¿¡å¿µéƒ½æ˜¯ä¸å¯é çš„ã€‚\nç›¸ä¿¡è„‘ç§‘å­¦çš„åŠ›é‡ï¼Œä½ ä¼šè¯»ä¸‹å»çš„ã€‚\n3ã€åˆ©ç”¨æ­£åé¦ˆè®©æˆ‘ä»¬è·å¾—æƒ…ç»ªçš„é«˜æ½®\næ­£åé¦ˆä¸»è¦æ¥æºäºä¸¤æ–¹é¢ï¼š\nç¬¬ä¸€ï¼Œå¤§è„‘å¤©æ€§å–œæ¬¢åœ†æ»¡ã€è‡ªæ´½ã€ç§©åºã€ç¡®å®šæ€§ã€‚\næ•´æ•´é½é½çš„æ¡Œé¢è®©äººçˆ½å¿ƒæ‚¦ç›®ï¼Œç¡®å®šæ€§çš„æ”¶è·è®©äººæœ‰å®‰å…¨æ„Ÿï¼Œå…¶å®ï¼Œäººçš„å¤§è„‘ä¹Ÿä¼šå› ä¸ºå›°æƒ‘çš„é—®é¢˜è¢«å®‰æ’ä¸€ä¸ªåˆç†çš„é€»è¾‘è€Œæ„‰æ‚¦ï¼Œè¿™å°±æ˜¯è‡ªæ´½ï¼Œæˆ‘ä»¬æ€»æƒ³ä¸ºä¸€ä¸ªé—®é¢˜æ‰¾åˆ°å…¶è§£é‡Šç†ç”±ã€‚\nè¿™ä¹Ÿæ˜¯æ‰€è°“ aha ha moment çš„é­…åŠ›ï¼ŒæŒç»­çš„â€œå­¦ä¹ â†’ææ¸…æ¥šé—®é¢˜â€ä¼šæŒç»­çš„åˆ†æ³Œå¤šå·´èƒºï¼Œè¿›è€Œä¼šäº§ç”Ÿâ€œå­¦ä¹ ä¸Šç˜¾â€çš„æ„Ÿè§‰ï¼Œå°±åƒâ€œå¸çƒŸâ†’çƒŸè¢«å¸è¿›å’Œå‘¼å‡ºâ€ çš„ä¸Šç˜¾ä¸€æ ·ã€‚è¿™æ˜¯å¤§è„‘çˆ±å­¦ä¹ çš„åŸå› ä¹‹ä¸€ã€‚\nå¤§éƒ¨åˆ†äººéä½†æ²¡æœ‰ä¸Šç˜¾ï¼Œåè€Œè§‰å¾—å¾ˆæ¯ç‡¥ï¼Œæ ¸å¿ƒæ˜¯å› ä¸ºï¼šæ²¡æœ‰å“å°è¿‡â€œå­¦ä¹ â†’ææ¸…æ¥šé—®é¢˜â€ è¿™ä¸€è¿‡ç¨‹çš„æ­£åé¦ˆå¿«æ„Ÿï¼Œå°±åƒåˆšå¼€å§‹æŠ½çƒŸéƒ½è§‰å¾—å¾ˆæ¶å¿ƒï¼Œè€Œä¸æ˜¯å¾ˆçˆ½ã€‚\næ‰€ä»¥åœ¨å¿ƒæµåŒºé—´é‡Œçœ‹å®Œä¸€æœ¬è§£ç­”ä½ å›°æƒ‘çš„ä¹¦ï¼Œæœ¬èº«å°±æ˜¯ç”Ÿç†æ€§çš„çˆ½ã€‚\nç¬¬äºŒï¼Œé€šè¿‡å…¬å¼€çš„æ­£åé¦ˆè®©ä½ æ›´çˆ½\næˆ‘çŸ¥é“å¾ˆå¤šäººä½è°ƒï¼ŒåŒæ¶é«˜è°ƒçš„ç‚«è€€ï¼Œä½†ä½ è¦åšçš„ä¸æ˜¯ç‚«è€€ï¼Œè€Œä½ è¦åšçš„ï¼Œæ˜¯çœŸè¯šçš„åˆ†äº«ã€‚\nå¤§å¤šæ•°äººä¸æ’æ–¥çœŸè¯šã€è°¦è™šï¼Œä½ çš„æŒç»­å­¦ä¹ ï¼Œä¹Ÿéœ€è¦æ¥è‡ªä»–äººç§¯æçš„åé¦ˆã€‚\nèƒŒååŸå› æ˜¯ä»»ä½•ä¸€ç§ç¤¾ä¼šå¼ºåŒ–éƒ½ä¼šå¢åŠ æ„Ÿè§‰è‰¯å¥½çš„ç¥ç»åŒ–å­¦ï¼Œä»è€Œå¢åŠ åŠ¨åŠ›ï¼Œæœ‰ä¸¤ä¸ªç”Ÿç†å­¦åŸå› ï¼š\n æ¥è‡ªä»–äººçš„ç§¯æå…³æ³¨ä¼šä½¿å¤§è„‘é‡Šæ”¾å‡ºæ¯”æˆ‘ä»¬å•ç‹¬ä»æ¿€æƒ…ä¸­è·å¾—æ›´å¤šçš„å¤šå·´èƒº åŒæ—¶å¢åŠ äº†å‚¬äº§ç´ ã€‚å¤šå·´èƒºå’Œå‚¬äº§ç´ çš„ç»“åˆï¼Œå¥–åŠ±äº†\u0026quot;ç¤¾ä¼šäº’åŠ¨\u0026quot;ï¼Œåˆ›é€ äº†ä¿¡ä»»å’Œçˆ±çš„æ„Ÿè§‰ï¼Œè¿™å¯¹æˆ‘ä»¬çš„ç”Ÿå­˜æ˜¯å¦‚æ­¤çš„å…³é”®ã€‚  ","permalink":"https://zhenfeng-zhu.github.io/post/%E5%AD%A6%E4%B9%A0%E4%B8%8A%E7%98%BE/","summary":"æœ€è¿‘ä¸¤å¹´ï¼Œæ·±æ„Ÿè¶Šæ¥è¶Šå¤šäººæ‚£ä¸Šäº†â€œæ¯’é¸¡æ±¤è¢«è¿«å®³å¦„æƒ³ç—‡â€ï¼Œå½“åˆ«äººæŠ›å‡ºä¸€ä¸ªè®ºç‚¹åï¼Œä½ ä¸‹æ„è¯†çš„å°†å…¶å½’ä¸ºâ€œé¸¡æ±¤â€ã€â€œè£…é€¼â€ã€â€œå‡æ­£ç»â€ï¼Œè™½ç„¶å†…å¿ƒä¸€æ—¶ç«™ä¸Šäº†é“å¾·é«˜åœ°å¹¶æ²¾æ²¾è‡ªå–œï¼Œä½†é•¿æœŸåšæŒä¸‹æ¥ï¼Œä½ å·²ç»æ“…é•¿äº†ç™¾æ¯’ä¸ä¾µï¼Œè¿™éå¸¸å¥½ï¼Œä½†è¿™ä¹Ÿæ˜¯å¦ä¸€ç§è‡ªæˆ‘ç»é£Ÿã€‚\næˆ‘å€’æ˜¯è®¤ä¸ºï¼Œæ”¾ä½ä¸€ç‚¹å¯¹è‡ªæˆ‘æ™ºè¯†é«˜åœ°çš„ç»´æŠ¤ï¼Œè®¤çœŸå¯¹å¾…é‚£äº›è®©ä½ ä¸‹æ„è¯†å¿ƒç”ŸåŒæ¶çš„è§‚ç‚¹ï¼Œä¼šè®©è‡ªå·±å¿ƒé‡Œå°‘ç‚¹æˆ¾æ°”ï¼Œé¡ºä¾¿æ‰¾åˆ°ä¸€äº›æœªæ¥çš„æœºä¼šã€‚\nä¸è¦è¯•å›¾è‡ªå¾‹ keep çš„ slogan å«â€œè‡ªå¾‹ç»™æˆ‘è‡ªç”±â€ï¼Œå¯ç°å®ç”Ÿæ´»ä¸­æœ‰å¤šå°‘äººçœŸçš„èƒ½åšæŒè‡ªå¾‹ï¼Ÿ\næˆ‘é—®è¿‡å¾ˆå¤šåšæŒå¥èº«çš„äººï¼Œä»–ä»¬å¹¶ä¸æ˜¯æ¯å¤©å¾ˆç—›è‹¦çš„å»å¥èº«æˆ¿ï¼Œè€Œæ˜¯æ¯å¤©è¿«ä¸åŠå¾…çš„å»å¥èº«æˆ¿ï¼Œå› ä¸ºé‚£é‡Œä¼šè®©ä»–ä»¬å¾ˆçˆ½ã€‚è¦æ˜¯ä¸ä¿¡çš„è¯ï¼Œä½ å¯ä»¥å»æ‰¾èº«è¾¹çš„äººé—®é—®ã€‚\nè¦äº†è§£â€œè‡ªå¾‹â€è¿™ç§æ„è¯†çœ‹ä¼¼å¾ˆè™šæ— ç¼¥ç¼ˆï¼Œä½†æ‰€æœ‰çš„æ„è¯†éƒ½æ˜¯è¢«å¤§è„‘ç¥ç»é€’è´¨æ‰€æ§åˆ¶çš„ï¼Œæˆ‘ä»¬åº”è¯¥ä»å¤§è„‘ç¥ç»é€’è´¨å±‚é¢ï¼Œçœ‹è¯¥å¦‚ä½•åˆ©ç”¨å®ƒä»¬ï¼Œè€Œä¸æ˜¯æŠµæŠ—ä»–ä»¬ã€‚\næˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™äº›ç¥ç»é€’è´¨æ˜¯å¦‚ä½•èµ·ä½œç”¨çš„ï¼š\n å¤šå·´èƒºæ˜¯å¤§è„‘ä¸­æœ€ä¸»è¦çš„å¥–åŠ±åŒ–å­¦ç‰©è´¨ï¼Œå‚¬äº§ç´ ç´§éšå…¶åï¼Œç„¶è€Œè¡€æ¸…ç´ ã€å†…å•¡è‚½ã€å»ç”²è‚¾ä¸Šè…ºç´ å’ŒèŠ±ç”Ÿå››çƒ¯ä¹™é†‡èƒºä¹Ÿå‘æŒ¥ç€ä½œç”¨ã€‚ è¿™äº›åŒ–å­¦ç‰©è´¨ä¸­çš„æ¯ä¸€ç§æ‰€äº§ç”Ÿçš„æ„‰æ‚¦æ„Ÿéƒ½ä¼šé©±ä½¿æˆ‘ä»¬é‡‡å–è¡ŒåŠ¨ï¼Œå¦‚æœè¡ŒåŠ¨æˆåŠŸä¾¿æœ‰äº†æ­£åé¦ˆï¼Œå°±ä¼šåœ¨è®°å¿†ä¸­å¼ºåŒ–è¯¥è¡Œä¸ºã€‚\n æ­£ç¡®çš„å­¦ä¹ æ–¹å¼ï¼Œä¸æ˜¯ä¾é è‡ªå¾‹ï¼Œè€Œæ˜¯è¦å€ŸåŠ©è¿™äº›ç¥ç»é€’è´¨å‘æŒ¥ä½œç”¨ã€‚\nä¸ºä»€ä¹ˆå–œæ¬¢åˆ·æŠ–éŸ³å’Œ B ç«™è€Œä¸æƒ³åˆ·å­¦ä¹  æ˜¯é‚£äº›è®©ä½ äº§ç”Ÿå¥½å¥‡å¿ƒçš„æ ‡é¢˜ï¼Œæ¯”å¦‚é‚£äº›äººäººéƒ½å¬è¿‡ã€æ²¡äººçœŸçš„æ‡‚çš„äº‹æƒ…ã€‚\nå¥½å¥‡å¿ƒæ˜¯ç”Ÿç‰©å­¦è®¾è®¡çš„èµ·ç‚¹ã€‚è¿™æ˜¯ä½ å¯¹æŸäº‹çš„åŸºæœ¬å…´è¶£ï¼Œåœ¨ç¥ç»åŒ–å­¦ä¸Šç”±ä¸€ç‚¹å»ç”²è‚¾ä¸Šè…ºç´ å’Œå¤šå·´èƒºæ”¯æ’‘ã€‚è€Œå¥½å¥‡å¿ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŠ¨åŠ›ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯æ¿€æƒ…çš„åŸºç¡€æˆåˆ†ï¼Œæ˜¯ä¸€ä¸ªæ›´å¤§çš„åŠ¨åŠ›ã€‚\né‚£ä»€ä¹ˆæ ·çš„å†…å®¹è®©ä½ çœ‹å®Œåä¹Ÿè§‰å¾—å¾ˆçˆ½å‘¢ï¼Ÿ\nå¤ªç®€å•çš„å†…å®¹ä¼šè®©ä½ è§‰å¾—å¥½æ— èŠï¼Œå¤ªå¤æ‚çš„å†…å®¹åˆå¾ˆæ¯ç‡¥çœ‹ä¸æ‡‚ï¼Œæ˜¯é‚£äº›ä½ æ—¢æœ‰ä¸€äº›äº†è§£ä½†åˆå‡ºä¹ä½ æ„æ–™çš„å†…å®¹ï¼ŒåŒæ—¶å™äº‹æ‰‹æ³•åˆå¯Œæœ‰èŠ‚å¥æ„Ÿï¼Œä¸åœçš„å¼•å‘ä½ æƒ…ç»ªå˜åŒ–çš„å†…å®¹ã€‚\nåˆ©ç”¨å¥½å¥‡å¿ƒè®©è‡ªå·±å¼€å§‹ä¸€æ¬¡å­¦ä¹ ï¼Œåˆ©ç”¨å¿ƒæµè®©æˆ‘ä»¬æ²‰æµ¸ï¼Œæœ€åç”¨è‡ªæ´½çš„é€»è¾‘å’Œç»“è®ºå®Œæˆç»ˆææš´å‡»ã€‚\næ­£ç¡®çš„åˆ·å­¦ä¹ æ–¹å¼ 1ã€å¦‚ä½•åˆ©ç”¨å¥½å¥‡å¿ƒå¼€å§‹\nå­¦ä¹ å°±å’Œåˆ·è§†é¢‘ä¸€æ ·ï¼Œé¦–å…ˆï¼Œä½ è¦æœ‰ä¸ªè®©ä½ å¥½å¥‡å¿ƒçš„é—®é¢˜ã€‚\nè¿™ä¸€æ­¥å¯èƒ½æ˜¯æœ€éš¾åˆ°å¤§å®¶çš„ï¼Œæ¯•ç«Ÿå­¦ç”Ÿæ—¶ä»£çš„æˆ‘ä»¬ï¼Œä¹ æƒ¯äº†åœ¨åˆ«äººè§„å®šå¥½çš„æ¡†æ¶å†…çœ‹ä¹¦ã€ç­”é¢˜ï¼Œæ—©å°±æ²¡äº†å¥½å¥‡å¿ƒã€‚\nå¯¹æ­¤ï¼Œæˆ‘çš„è§‚ç‚¹æ˜¯ï¼Œä½ ä¸æ˜¯å¤±å»äº†å¥½å¥‡å¿ƒï¼Œåªæ˜¯æ‰¾ä¸åˆ°äº†å¥½å¥‡å¿ƒï¼Œå…´è¶£ä¹Ÿä¸æ˜¯å¤©ç”Ÿçš„ï¼Œè€Œæ˜¯åå¤©åŸ¹å…»çš„ã€‚\nè¿™çš„ç¡®æŒºéš¾ï¼Œåœ¨èº«è¾¹æœ‹å‹ä¸­å®è·µè¿‡ä¸€ä¸ªå¯è¡Œçš„åŠæ³•ã€‚\n 1 æ‹¿ä¸€å¼ çº¸ï¼ŒæŠŠä½ ç”Ÿæ´»ä¸­æ„Ÿå…´è¶£çš„äº‹æƒ…å…¨éƒ¨åˆ—ä¸Šå»ï¼Œå¤§äº‹å°äº‹éƒ½å¯ä»¥åˆ—ï¼› 2 æ‰¾åˆ°è¿™äº›äº‹æƒ…çš„äº¤å‰ç‚¹ï¼Œä»¥åŠå¼„æ¸…æ¥šæŸä¸ªç‰¹å®šçš„äº¤å‰ç‚¹æ˜¯å¦çœŸçš„è¶³å¤Ÿæœ‰è¶£ï¼Œè¿™äº›äº¤å‰ç‚¹ï¼Œå¾€å¾€è•´å«äº†å¯èƒ½çˆ†å‘çš„å¥½å¥‡å¿ƒï¼› 3 æ€ä¹ˆçŸ¥é“ä¸€ä¸ªäº¤å‰ç‚¹æ˜¯å®Œç¾çš„ï¼Ÿå»è¿™äº›äº¤å‰ç‚¹ä¸Šâ€œç©ä¸€ç©â€ï¼ŒçœŸæ˜¯æ˜¯æ‰¾ä¸€äº›ä¸œè¥¿ç©ä¸€ç©ï¼Œè€Œä¸æ˜¯å­¦ä¸€å­¦ã€‚ 4 ç”¨â€œå…¬å¼€çš„æˆåŠŸâ€æ¿€åŠ±å†æ·±å…¥ä¸€ç‚¹ï¼Œäººç±»æ˜¯ä¸€ç§ç¤¾ä¼šåŠ¨ç‰©ï¼Œæˆ‘ä»¬è¦åˆ©ç”¨å¥½èº«è¾¹äººçš„æ­£åé¦ˆï¼Œå“ªæ€•æ˜¯å‘ä¸ªæœ‹å‹åœˆåˆ†äº«ä¸€ä¸‹ã€‚\n ä¸Šé¢çš„è¿‡ç¨‹çœ‹ä¼¼æœ‰äº›æ— è¶£ï¼Œä½†è¯·å®Œæ•´çš„æŠŠè¿™å››éƒ¨æµç¨‹èµ°å‡ éï¼Œç›¸ä¿¡æˆ‘ï¼Œä¼šæˆ–å¤šæˆ–å°‘çš„å¼€å¯ä¸€ç‚¹çš„ã€‚\n2ã€å¦‚ä½•åˆ©ç”¨å¿ƒæµè®©æˆ‘ä»¬æ²‰æµ¸\nå¿ƒæµæ˜¯ä¸€ä¸ªç‰¹åˆ«å¤æ‚çš„è¯é¢˜ï¼Œè¿™é‡Œæ¨èä¸€æœ¬å½»åº•è®²æ¸…æ¥šå¿ƒæµçš„ä¹¦ã€Šthe art of impossibleã€‹ï¼Œä½†è¿™é‡Œï¼Œåªè®²ä¸€ä¸ªæœ€æ ¸å¿ƒçš„ç†è®ºï¼šå¿ƒæµåŒºé—´ã€‚\nå‰é¢æè¿‡ï¼Œå¤ªç®€å•çš„å†…å®¹è®©äººæ— èŠï¼Œå¤ªéš¾çš„å†…å®¹è®©äººç—›è‹¦ï¼Œè¿™å°±æ˜¯å¿ƒæµåŒºé—´çš„æ¥æºã€‚\næˆ‘ä»¬è¦è§£å†³çš„æ˜¯é‚£äº›ä¸å¤ªéš¾åˆä¸å¤ªå®¹æ˜“çš„å›°æƒ‘ï¼Œå³ä½ å·²ç»æ¨¡æ¨¡ç³Šç³ŠçŸ¥é“æ€è·¯ï¼Œä½†åˆä¸å®Œå…¨æ¸…æ¥šè§£æ³•çš„å›°æƒ‘ã€‚è¿™æ ·çš„å›°æƒ‘æœ€å®¹æ˜“è®©ä½ ä½“ä¼šåˆ°â€å­¦ä¹ è¿‡ç¨‹çš„ä¹è¶£â€œã€‚\nè€Œçœ‹ä¹¦ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“äº§ç”Ÿå¿ƒæµçŠ¶æ€çš„äº‹æƒ…ï¼Œä½†å¾ˆå¤šäººæ˜æ˜å¯åŠ¨äº†çœ‹ä¹¦ï¼Œä½†çœ‹ä¸è¿›å»ï¼Œæ ¸å¿ƒåŸå› æ˜¯ï¼šä½ çš„ä¹¦é€‰é”™äº†ã€‚\nè®°ä½è¿™ä¸€ç‚¹ï¼šä»»ä½•è®©ä½ çœ‹ä¸è¿›å»çš„ä¹¦ï¼Œè¦ä¹ˆæ˜¯ä¹¦æœ¬èº«å†™çš„å¤ªçƒ‚äº†ï¼ˆå°±åƒä¸€ä¸ªç”µå½±é€‰é¢˜å¾ˆå¥½ä½†ç¼–å‰§å¤ªçƒ‚ä¸€æ ·ï¼‰ï¼Œè¦ä¹ˆå°±æ˜¯ä½ çš„çŸ¥è¯†ç»“æ„è¿˜ä¸è¶³ä»¥æ”¯æ’‘çœ‹æ‡‚è¿™æœ¬ä¹¦ã€‚\næ¯”å¦‚ä¸€ä¸ªæ²¡æœ‰ä»»ä½•ç»æµå­¦æ¦‚å¿µçš„äººå»å­¦ä¹ ç»æµå­¦åŸç†ï¼Œä»–æ˜¯å¾ˆéš¾è¯»ä¸‹å»çš„ï¼Œå³ä¾¿å‹‰å¼ºè¯»ä¸‹å»æ˜¯ç—›è‹¦ä¸”å¾ˆå°‘è¾“å…¥çš„è¯»ä¸‹å»ã€‚è¿™ç§â€œç¡¬éª¨å¤´â€åº”è¯¥èµ¶ç´§æ”¾ä¸‹ï¼Œå†é€‰ä¸€æœ¬ä½ æ„Ÿå…´è¶£çš„ä¹¦ï¼Œæ‰¾ä¸€æœ¬ä¹¦èƒ½è®©ä½ çœ‹çš„çˆ½çš„ä¹¦ã€‚\nè¿™ä¹Ÿæ˜¯ã€ŠThe Motivation Myth åŠ¨åŠ›ç¥è¯ã€‹ä¸€ä¹¦é‡Œçš„æ ¸å¿ƒè§‚ç‚¹ï¼šå°æˆåŠŸå½¢æˆåŠ¨åŠ›ï¼ŒåŠ¨åŠ›ä¿ƒæˆæ›´å¤§çš„æˆåŠŸï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ­£åé¦ˆè¿é”ååº”ã€‚ä¸€èˆ¬çš„æ”¹å˜æ€æƒ³å’Œä¿¡å¿µéƒ½æ˜¯ä¸å¯é çš„ã€‚\nç›¸ä¿¡è„‘ç§‘å­¦çš„åŠ›é‡ï¼Œä½ ä¼šè¯»ä¸‹å»çš„ã€‚\n3ã€åˆ©ç”¨æ­£åé¦ˆè®©æˆ‘ä»¬è·å¾—æƒ…ç»ªçš„é«˜æ½®\næ­£åé¦ˆä¸»è¦æ¥æºäºä¸¤æ–¹é¢ï¼š\nç¬¬ä¸€ï¼Œå¤§è„‘å¤©æ€§å–œæ¬¢åœ†æ»¡ã€è‡ªæ´½ã€ç§©åºã€ç¡®å®šæ€§ã€‚\næ•´æ•´é½é½çš„æ¡Œé¢è®©äººçˆ½å¿ƒæ‚¦ç›®ï¼Œç¡®å®šæ€§çš„æ”¶è·è®©äººæœ‰å®‰å…¨æ„Ÿï¼Œå…¶å®ï¼Œäººçš„å¤§è„‘ä¹Ÿä¼šå› ä¸ºå›°æƒ‘çš„é—®é¢˜è¢«å®‰æ’ä¸€ä¸ªåˆç†çš„é€»è¾‘è€Œæ„‰æ‚¦ï¼Œè¿™å°±æ˜¯è‡ªæ´½ï¼Œæˆ‘ä»¬æ€»æƒ³ä¸ºä¸€ä¸ªé—®é¢˜æ‰¾åˆ°å…¶è§£é‡Šç†ç”±ã€‚\nè¿™ä¹Ÿæ˜¯æ‰€è°“ aha ha moment çš„é­…åŠ›ï¼ŒæŒç»­çš„â€œå­¦ä¹ â†’ææ¸…æ¥šé—®é¢˜â€ä¼šæŒç»­çš„åˆ†æ³Œå¤šå·´èƒºï¼Œè¿›è€Œä¼šäº§ç”Ÿâ€œå­¦ä¹ ä¸Šç˜¾â€çš„æ„Ÿè§‰ï¼Œå°±åƒâ€œå¸çƒŸâ†’çƒŸè¢«å¸è¿›å’Œå‘¼å‡ºâ€ çš„ä¸Šç˜¾ä¸€æ ·ã€‚è¿™æ˜¯å¤§è„‘çˆ±å­¦ä¹ çš„åŸå› ä¹‹ä¸€ã€‚\nå¤§éƒ¨åˆ†äººéä½†æ²¡æœ‰ä¸Šç˜¾ï¼Œåè€Œè§‰å¾—å¾ˆæ¯ç‡¥ï¼Œæ ¸å¿ƒæ˜¯å› ä¸ºï¼šæ²¡æœ‰å“å°è¿‡â€œå­¦ä¹ â†’ææ¸…æ¥šé—®é¢˜â€ è¿™ä¸€è¿‡ç¨‹çš„æ­£åé¦ˆå¿«æ„Ÿï¼Œå°±åƒåˆšå¼€å§‹æŠ½çƒŸéƒ½è§‰å¾—å¾ˆæ¶å¿ƒï¼Œè€Œä¸æ˜¯å¾ˆçˆ½ã€‚\næ‰€ä»¥åœ¨å¿ƒæµåŒºé—´é‡Œçœ‹å®Œä¸€æœ¬è§£ç­”ä½ å›°æƒ‘çš„ä¹¦ï¼Œæœ¬èº«å°±æ˜¯ç”Ÿç†æ€§çš„çˆ½ã€‚\nç¬¬äºŒï¼Œé€šè¿‡å…¬å¼€çš„æ­£åé¦ˆè®©ä½ æ›´çˆ½\næˆ‘çŸ¥é“å¾ˆå¤šäººä½è°ƒï¼ŒåŒæ¶é«˜è°ƒçš„ç‚«è€€ï¼Œä½†ä½ è¦åšçš„ä¸æ˜¯ç‚«è€€ï¼Œè€Œä½ è¦åšçš„ï¼Œæ˜¯çœŸè¯šçš„åˆ†äº«ã€‚","title":"å­¦ä¹ ä¸Šç˜¾"},{"content":"æ£€æŸ¥ä½ æ˜¯å¦è½å…¥äº†è¿™äº›åä¹ æƒ¯ 1ã€å–œæ¬¢å¹²äº‹è€Œä¸å–œæ¬¢æƒ³äº‹ ï¼ˆçªç„¶æƒ³èµ·å¥½åƒæ˜¯ç‹å…´è¯´çš„ä¸€å¥è¯ï¼Œå¤§å¤šæ•°äººä¸ºäº†é€ƒé¿çœŸæ­£çš„æ€è€ƒï¼Œæ„¿æ„åšä»»ä½•äº‹æƒ…ã€‚ï¼‰\n2ã€æ²¡ææ¸…æœåŠ¡å¯¹è±¡åˆ°åº•æ˜¯è° ï¼ˆä½ è§‰å¾—æ˜¯è°ï¼Ÿä¸ºä»€ä¹ˆæ˜¯ taï¼Ÿä½ åœ¨å¸® ta è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿè§£å†³äº†èƒ½æ€æ ·ï¼Ÿå¸® ta è§£å†³é—®é¢˜æ˜¯ä¸æ˜¯ä½ çš„æœ€ç»ˆç›®æ ‡ï¼Ÿï¼‰\n3ã€ç†å¿µæƒ…æ€€ä¸»å¯¼ï¼Œä»æ„Ÿæ€§å’Œå–„æ„å‡ºå‘ï¼Œä½†è®¤è¯†ä¸–ç•Œä¸å¤Ÿå®¢è§‚ï¼Œç§‘å­¦åˆ†æç¼ºå¤±ï¼Œé—®é¢˜å’Œè§£æ³•éƒ½ç¦ä¸èµ·æ¶é—®\n4ã€å¹³è¡¡ä¸­åº¸ï¼Œé»˜è®¤æœä»â€œç¨‹åºæ­£ç¡®â€ã€â€œæ”¿æ²»æ­£ç¡®â€ï¼Œè¡¨é¢ä¸Šå¹³ç­‰å°Šé‡æ¸©æƒ…è„‰è„‰ï¼Œå®é™…ç¼ºå°‘å±‚å±‚é€’è¿›çš„ã€æ¢æ±‚é—®é¢˜æœ¬è´¨çš„è®¨è®ºï¼Œè¿½æ±‚å’Œè°ã€ä¸è¦å‡ºé”™\u0026gt; åˆ¶å®šæ­£ç¡®æ¸…æ™°çš„ç›®æ ‡å¹¶ç«­å°½æ‰€èƒ½ï¼ˆé€æ¸å˜æˆâ€œå‡‘åˆâ€ï¼‰\nä¸Šé¢è¿™äº›ä¹ æƒ¯ï¼Œå¦‚æœè®©ä½ ç‰¹åˆ«æœ‰æ„Ÿè§‰ï¼Œé‚£å°±è¦å°å¿ƒäº†ï¼ å¦‚æœä½ ä¸€ä¸ªæ„Ÿè§‰éƒ½æ²¡æœ‰ï¼Œé‚£æ›´è¦å°å¿ƒäº†ï¼ï¼ï¼ï¼ˆå› ä¸ºè¿™äº›éƒ½æ˜¯å¾ˆå¸¸è§çš„æ— æ„è¯†çš„åä¹ æƒ¯ï¼Œå¾ˆå®¹æ˜“é™·å…¥å…¶ä¸­è€Œä¸è‡ªçŸ¥ï¼Œéœ€è¦æœ‰æ„è¯†çš„è®­ç»ƒè‡ªå·±çš„è§‰å¯Ÿèƒ½åŠ›ï¼‰\nè¶…è¶Šé—®é¢˜ï¼Œè®©é—®é¢˜ä¸å†æ˜¯é—®é¢˜ ç®¡ç†çš„é—®é¢˜ã€ç»„ç»‡çš„é—®é¢˜ä»æ¥éƒ½ä¸æ˜¯æœ‰æ˜ç¡®â€œå•å› å•æœâ€çš„é—®é¢˜ï¼Œè€Œæ˜¯å­˜åœ¨äºé”™ç»¼å¤æ‚çš„ç»„ç»‡ç³»ç»Ÿï¼Œä¹ƒè‡³æ›´å¹¿æ³›çš„å¤–éƒ¨ç¤¾ä¼šç³»ç»Ÿä¸­çš„é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„å·¥ä½œã€é¡¹ç›®ï¼Œéƒ½æ˜¯ä¸€ä¸ªâ€œæ¢ç´¢çœŸé—®é¢˜çš„è¿‡ç¨‹â€ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼ŒæŒç»­ã€æœ‰æ„è¯†åœ°åšæ·±åº¦æ€è€ƒå’Œå­¦ä¹ æ˜¯æ¯”æ’¸èµ·è¢–å­å¹²äº‹æ›´é‡è¦çš„ï¼Œå¦‚æœç–äºä»˜å‡ºæ€è€ƒä¸Šçš„åŠªåŠ›ï¼Œé¢˜æ‰¾é”™äº†ã€æ–¹å‘åäº†ï¼Œåé¢çš„ä¹Ÿå°±åˆ«æƒ³äº†ã€‚\næ¶åœ¨é”™è¯¯çš„é—®é¢˜ä¸Šï¼Œé¡¹ç›®å³ä½¿æ²¡åšåï¼Œä½†ä¹Ÿåšä¸åˆ°å¤šå¥½ã€‚å¾€åäº†è¯´ï¼Œä½ é”™è¿‡äº†ä¸€ä¸ªæˆåŠŸè§£å†³æœ‰ä»·å€¼é—®é¢˜çš„æœºä¼šï¼Œæµªè´¹äº†ä½ çš„æ—¶é—´ã€æ‰åå’Œèµ„æºã€‚\nè‡³äºæˆ‘ä»¬ä¸ºä»€ä¹ˆå®¹æ˜“ä¸è‡ªçŸ¥åœ°å¿½è§†è¿™äº›â€œçœŸæ€è€ƒâ€ï¼š\n ä»ç”Ÿç†ä¸Šè®²ï¼Œå¤§è„‘æ˜¯å¾ˆä¸å–œæ¬¢è´¹åŠ›æ°”æ€è€ƒçš„ï¼Œå› æ­¤æˆ‘ä»¬å¾€å¾€ä¼šé™·å…¥å¿«é€ŸåŸºäºä¸»è§‚æ€ç»´æƒ¯æ€§ä¸‹ç»“è®ºçš„é”™è¯¯ä¹‹ä¸­è€Œä¸è‡ªçŸ¥ï¼ˆtake for grantedï¼‰ã€‚é™¤äº†é‚£äº›å¤©èµ‹å’Œä¿®ä¸ºæé«˜çš„äººï¼Œå¦‚æœæ™®é€šäººæƒ³è®©æˆé•¿æ›´å¿«ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªé è°±çš„ç§‘å­¦æ–¹æ³•è®ºæ¥æŒ‡å¼•è‡ªå·±ã€‚ ä»ç»„ç»‡è§’åº¦ï¼Œåœ¨ä¸€ä¸ªå¤§ç»„ç»‡é‡Œè§£å†³é—®é¢˜ï¼Œä¼¼ä¹æ¯ä¸ªäººå¯¹é—®é¢˜è´Ÿæœ‰çš„è´£ä»»ä¹ŸåŒæ—¶è¢«ç¨€é‡Šäº†ï¼Œâ€œæˆ‘æƒ³äº†åˆæœ‰ä»€ä¹ˆç”¨ï¼Ÿâ€ï¼Œâ€œè¿™ä¸ªé—®é¢˜è¯¥æˆ‘å»æƒ³å—ï¼Ÿâ€ï¼Œleader è§‰å¾—åšäº‹æƒ…çš„ä¸‹å±åº”è¯¥è¦ä¸»åŠ¨æƒ³ï¼Œä¸‹å±è§‰å¾— leader æ¯”æˆ‘æ›´è´Ÿæœ‰æ€è€ƒçš„è´£ä»»ï¼Œå†åŠ ä¸Šæ¯ä¸ªäººéƒ½æœ‰å¾ˆå¤šäº‹æƒ…åœ¨ç‰µæ‰¯ç²¾åŠ›ï¼Œâ€œæ·±åº¦æ€è€ƒâ€æ¸æ¸ä¼¼ä¹å˜å°‘äº†ã€‚  ä¸€åˆ‡ä»æ‰¾å¯¹é—®é¢˜å‡ºå‘ è®©æˆ‘ä»¬ä»å¸¸è§çš„è¯¯åŒºå¼€å§‹\nåå·®ä¸€ï¼šæˆ‘ä»¬çš„é—®é¢˜ vs ç›®æ ‡å¯¹è±¡çš„é—®é¢˜ ç¬¬ä¸€ç§å¸¸è§çš„åå·®æ˜¯ï¼Œäººä»¬å¾€å¾€æ— æ³•å°†è‡ªå·±è®¤ä¸ºçš„é—®é¢˜ä¸ç›®æ ‡æœåŠ¡å¯¹è±¡è®¤ä¸ºçš„é—®é¢˜åŒºåˆ†å¼€ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹åˆ«å®¹æ˜“å®šä½é”™è¯¯çš„åœ°æ–¹ï¼Œå‚è€ƒä¸‹å›¾ï¼š\nå¤§å®¶éƒ½æ‡‚ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨æˆ‘ä»¬è‡ªå·±å’Œç›®æ ‡å¯¹è±¡éƒ½è®¤ä¸ºæ˜¯é—®é¢˜çš„åœ°æ–¹é‡‡å–è¡ŒåŠ¨ï¼Œä½†å®é™…å·¥ä½œèµ·æ¥ï¼Œè¿˜æ˜¯å¾€å¾€è¢«â€œæˆ‘ä»¬è®¤ä¸ºæ˜¯é—®é¢˜ï¼Œå®¢æˆ·ä¸è®¤ä¸ºæ˜¯é—®é¢˜çš„é—®é¢˜â€ç»Šä½ã€‚\n å°±åƒå®¶é•¿è¦æ±‚å­©å­å¥½å¥½åƒé¥­ï¼Œä¸º ta ä¸èƒ½å¥½å¥½åƒé¥­è€Œç”Ÿæ°”ï¼Œå¯å­©å­å¯èƒ½å°±æ˜¯é›¶é£Ÿåƒå¤šäº†ï¼ŒçœŸçš„ä¸é¥¿ä¹Ÿåƒä¸ä¸‹å» æˆ‘ä»¬è§‰å¾—æŸäº›åœ°æ–¹å­˜åœ¨ä¸å…¬å¹³çš„é—®é¢˜ï¼Œå¯åœ¨å®¢æˆ·çœ¼é‡Œï¼Œæ˜¯ä¸æ˜¯é‚£ä¹ˆå…¬å¹³å¯èƒ½å¹¶ä¸é‡è¦ä¹Ÿå¹¶ä¸å…³é”® æˆ‘ä»¬è§‰å¾—éœ€è¦åšæŸé¡¹èƒ½åŠ›æå‡çš„é¡¹ç›®ï¼Œå¯å®¢æˆ·ç°åœ¨é¢ä¸´å…¶ä»–æ¯”èƒ½åŠ›æå‡æ›´é‡è¦ã€æ›´è¦ç´§çš„é—®é¢˜  è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸æ˜¯è¦è´¹åŠ²å»ç»™å®¢æˆ·æ´—è„‘ï¼Œè€Œæ˜¯åº”è¯¥ä»”ç»†è†å¬å¯¹æ–¹çš„å£°éŸ³ï¼Œä»¥åŠæ›´å¤šç›¸å…³æ–¹çš„å£°éŸ³ï¼Œæ‰¾å‡ºâ€œçœŸé—®é¢˜â€ä»¥åŠèƒŒåçš„åŸå› ï¼Œå¯¹é—®é¢˜â€œå»ä¼ªå­˜çœŸâ€ï¼Œæ‰¾åˆ°å…¶ä¸­çš„é€»è¾‘å…³ç³»ï¼Œç„¶åå†å†³å®šè¦æ€ä¹ˆåŠã€‚\nå¦å¤–ï¼Œæœ‰æ—¶æˆ‘ä»¬ç¡®å®èƒ½å¤Ÿçœ‹è§çœŸé—®é¢˜ï¼Œä½†å®¢æˆ·ä¸å¤Ÿè®¤åŒï¼Œè¿™æ—¶å€™æœ€åº”è¯¥åšçš„äº‹æƒ…ï¼Œæ˜¯å¯»æ‰¾é‚£äº›æŒæœ‰ç›¸åŒè®¤çŸ¥çš„äººï¼Œç„¶åå’Œä»–ä»¬ä¸€èµ·å·¥ä½œï¼Œä¸€è¾¹åšå‡ºä¸€å®šæˆç»©ï¼Œä¸€è¾¹å¯å‘å’Œå¸¦åŠ¨æ›´å¤šäººã€‚ä¸ç”¨æŠŠç²¾åŠ›çº ç»“åœ¨ä¸ºä»€ä¹ˆå¯¹æ–¹ä¸è®¤åŒè¿™ä¸ªäº‹æƒ…ä¸Šï¼Œç„¶åè®©è‡ªå·±å’Œå›¢é˜Ÿæ¶ˆè€—åœ¨è¿™ä¸ªä¸è®¤åŒä¸Šã€‚\nåå·®äºŒï¼šè¿‡ç¨‹å¯¹è±¡ vs æœ€ç»ˆå¯¹è±¡ ç¬¬äºŒç§å¸¸è§çš„åå·®æ˜¯ï¼Œä¸èƒ½åˆ†è¾¨â€œè¿‡ç¨‹å¯¹è±¡â€å’Œâ€œæœ€ç»ˆå¯¹è±¡â€ï¼Œå®¹æ˜“åœ¨å…³æ³¨è¿‡ç¨‹å¯¹è±¡ä¸­è¿·å¤±ï¼Œä¸è§åˆè¡·ã€‚\n ä¸Šå¥½å¤§å­¦æ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œäººçš„å……åˆ†å‘å±•æ˜¯æœ€ç»ˆå¯¹è±¡ å­¦è‹±è¯­æ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œæ— éšœç¢çš„äº¤æµã€æ¥è§¦æ›´å¤šæ€æƒ³æ˜¯æœ€ç»ˆå¯¹è±¡ è–ªé…¬å…¬å¹³å’Œæœ‰æ•ˆæ¿€åŠ±æ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œè®©ä¼˜ç§€çš„å‘˜å·¥æ„¿æ„å’Œå…¬å¸ä¸€èµ·é•¿æœŸå‘å±•æ˜¯æœ€ç»ˆå¯¹è±¡ åœ¨å•†ä¸šç»„ç»‡é‡Œï¼Œä¸šåŠ¡çš„æˆåŠŸæ˜¯æœ€ç»ˆå¯¹è±¡ï¼Œå‘˜å·¥çš„æ»¡æ„åº¦å’Œå‘˜å·¥çš„èƒ½åŠ›æå‡æ˜¯è¿‡ç¨‹å¯¹è±¡ã€‚ä½†äººå¤©ç„¶å¯¹è·ç¦»è‡ªå·±æ›´è¿‘å’Œè‡ªå·±æ›´ç›¸å…³çš„äº‹ç‰©æ•æ„Ÿï¼Œå¯¹è¿œè·ç¦»çš„ç›®æ ‡ä¸æ•æ„Ÿã€‚æˆ‘ä»¬è¦å…³æ³¨å‘˜å·¥çš„æ»¡æ„åº¦å’Œå‘˜å·¥æˆé•¿ï¼Œè¿™æ²¡æœ‰é”™ï¼Œä½†ä¸è¦ç–å¿½äº†å¤§å®¶èšåœ¨ä¸€ä¸ªå…¬å¸é‡Œçš„ç›®çš„æ˜¯ä¸ºè§£å†³æŸç§é—®é¢˜æä¾›å•†ä¸šæœåŠ¡ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„é¦–è¦ç›®æ ‡å’Œé¦–è¦è´£ä»»ã€‚  å¹¶ä¸æ˜¯è¯´ä¸åº”è¯¥ä»è¿‡ç¨‹å¯¹è±¡å…¥æ‰‹ï¼Œè€Œæ˜¯æˆ‘ä»¬å§‹ç»ˆä¸èƒ½å¿½ç•¥æ‰æœåŠ¡çš„æœ€ç»ˆå¯¹è±¡æ˜¯è°ã€‚\nåå·®ä¸‰ï¼šç¬¼ç»Ÿå¯¹è±¡ vs å…·ä½“å¯¹è±¡ ç¬¬ä¸‰ç§å¸¸è§çš„åå·®æ˜¯ï¼Œå°†é—®é¢˜æ¦‚æ‹¬åŒ–ã€ç¬¼ç»ŸåŒ–ï¼Œå¾ˆå¤šæŠ½è±¡çš„æ¦‚å¿µå’Œå¤§è¯ï¼Œä½†å…·ä½“æ˜¯è°ã€é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Œä¸å¾—è€ŒçŸ¥ã€‚è¿™äº›è¯ä¸ä¸€å®šæ˜¯é»‘è¯ï¼Œä½†å’Œé»‘è¯æ•ˆæœç±»ä¼¼ï¼Œéƒ½é˜»ç¢äº†æˆ‘ä»¬ç›´è¾¾çœŸæ­£çš„é—®é¢˜ã€‚\nå°¤å…¶å¯¹ç®¡ç†é—®é¢˜çš„æè¿°ï¼Œå¤ªå®¹æ˜“æ»‘å‘ç¬¼ç»Ÿäº†ã€‚\n éœ€è¦ä»æ–‡åŒ–å’Œæ„è¯†ä¸Šï¼Œå¼ºè°ƒä¸è¦å†…å· å‘˜å·¥çš„å®‰å…¨æ„Ÿéœ€è¦æå‡ æˆ‘ä»¬éœ€è¦å¹³è¡¡æ•ˆç‡å’Œè´¨é‡ã€æ•ˆç‡å’Œå…¬å¹³çš„çŸ›ç›¾  å¦‚æœæˆ‘ä»¬å¯¹é—®é¢˜çš„ç•Œå®šè¿‡äºç¬¼ç»Ÿï¼Œè§£å†³æ€è·¯ä¹Ÿå¿…ç„¶èµ°å‘â€œå®å¤§â€ï¼Œå°±æ²¡æœ‰åŠæ³•åšåˆ°å°å¤„ç€æ‰‹ï¼Œä¹Ÿéš¾ä»¥å¾—å‡ºç¦å¾—èµ·æ‹·é—®çš„ã€å¯æ“ä½œçš„ã€é€»è¾‘ä¸Šæ­£ç¡®çš„è¡ŒåŠ¨ã€‚\nåå·®å››ï¼šä¸»è§‚åˆ¤æ–­ vs å®¢è§‚ç°è±¡ æˆ‘ä»¬å‡ ä¹å¯¹çœ‹åˆ°çš„äº‹å®é—®é¢˜éƒ½ä¼šå¿«é€Ÿå¾—å‡ºä¸€ä¸ªä¸»è§‚çš„åˆ¤æ–­å’Œç»“è®ºï¼Œä½†æˆ‘ä»¬éœ€è¦æ„è¯†åˆ°ï¼Œå½“æˆ‘ä»¬æŠŠè¿™äº›ä¸»è§‚åˆ¤æ–­å½“æˆé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å·²ç»çŠ¯äº†åç¦»é—®é¢˜æœ¬èº«çš„é”™è¯¯ã€‚\nä¸¾ä¾‹ï¼š\n éœ€è¦æå‡å‘˜å·¥çš„å£è¯­è¡¨è¾¾èƒ½åŠ› åœ¨ XX å›¢é˜Ÿï¼Œå¤§å®¶å¼€å‘¨ä¼šçš„æ—¶å€™å› ä¸ºè¯­è¨€éšœç¢ï¼Œé™åˆ¶äº†é—®é¢˜ç†è§£å’Œè¡¨è¾¾  ç¬¬ä¸€ç§æè¿°æ˜¯ä¸€ç§å¼ºçƒˆçš„ä¸»è§‚è¡¨è¾¾ï¼Œä»£è¡¨ä¸€ç§è§‚ç‚¹å’Œåˆ¤æ–­ï¼Œè€Œä¸æ˜¯åœ¨æè¿°å…·ä½“æ˜¯å“ªäº›ç›®æ ‡å¯¹è±¡ï¼Œå…·ä½“é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ã€‚ç›´æ¥ä»ä¸»è§‚åˆ¤æ–­å¼€å§‹æ‰¾è§£å†³æ–¹æ¡ˆï¼Œä¸åˆ©äºæˆ‘ä»¬è¯†åˆ«æœ€ç»ˆè¦è§£å†³ä»€ä¹ˆé—®é¢˜ã€å®ç°ä»€ä¹ˆç›®æ ‡ã€‚\nå¥½çš„é—®é¢˜åº”è¯¥æè¿°çš„æ˜¯å®¢è§‚ç°è±¡ï¼ˆå“ªäº›å¯¹è±¡ã€é‡åˆ°äº†ä»€ä¹ˆé˜»ç¢ï¼‰ï¼Œè€Œä¸æ˜¯æè¿°ä¸»è§‚åˆ¤æ–­ã€‚å®¢è§‚ç°è±¡åº”è¯¥æ˜¯â€”â€”å¯è§‚æµ‹ã€å¯è¯ä¼ªã€å®¹æ˜“åœ¨åˆ©ç›Šç›¸å…³æ–¹ä¹‹é—´è¾¾æˆå…±è¯†\næ•²é»‘æ¿â€”â€”æ€»ç»“ æ£€æŸ¥é—®é¢˜æ˜¯ä¸æ˜¯æ‰¾å‡†äº†çš„ checklistï¼ˆé€‚åˆå¯¹ç…§ä½ ç›®å‰æ­£åœ¨è§£å†³çš„é—®é¢˜ï¼Œè‡ªçº è‡ªæŸ¥ä¸€ä¸‹ï¼Œç„¶åä¿®æ­£ä½ çš„é—®é¢˜ï¼‰\n è¿™æ˜¯ä¸æ˜¯ä½ æœåŠ¡çš„å¯¹è±¡è®¤å¯çš„é—®é¢˜ï¼ŒåŒæ—¶ä½ ä¹Ÿè®¤å¯çš„é—®é¢˜ï¼Ÿ ä½ é€‰æ‹©å·¥ä½œçš„é—®é¢˜å¯¹è±¡æ˜¯è¿‡ç¨‹å¯¹è±¡è¿˜æ˜¯æœ€ç»ˆå¯¹è±¡ï¼Œå¦‚æœæ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œå¸® ta è§£å†³å¥½è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å¦æœ‰åˆ©äºå¸®åŠ©æœ€ç»ˆå¯¹è±¡ï¼Œè¿™æ˜¯ä¸æ˜¯å¸®åŠ©æœ€ç»ˆå¯¹è±¡çš„æœ€å¯é çš„æ‰‹æ®µï¼Ÿ ä½ çš„é—®é¢˜æ˜¯ä¸æ˜¯å¤ªè¿‡ç¬¼ç»Ÿï¼Œä½ èƒ½ä¸èƒ½æŠŠå®ƒæ”¹çš„æ›´å…·ä½“ï¼Ÿ ä½ æè¿°çš„æ˜¯å®¢è§‚é—®é¢˜ç°è±¡å—ï¼Ÿè¿˜æ˜¯ä½ çš„ä¸»è§‚åˆ¤æ–­æˆ–æŸç§ä¸»è§‚æ„¿æœ›ï¼Ÿå®ƒæ˜¯å¦æ˜¯ï¼š  å¯è§‚æµ‹çš„ å¯è¯ä¼ªçš„ å®¹æ˜“å’Œåˆ©ç›Šç›¸å…³æ–¹è¾¾æˆå…±è¯†çš„    ","permalink":"https://zhenfeng-zhu.github.io/post/%E5%A6%82%E4%BD%95%E8%AE%A9%E8%87%AA%E5%B7%B1%E4%B8%8D%E5%BF%99%E4%B8%8D%E5%8D%B7%E8%BF%98%E6%9C%89%E6%88%90%E9%95%BF/","summary":"æ£€æŸ¥ä½ æ˜¯å¦è½å…¥äº†è¿™äº›åä¹ æƒ¯ 1ã€å–œæ¬¢å¹²äº‹è€Œä¸å–œæ¬¢æƒ³äº‹ ï¼ˆçªç„¶æƒ³èµ·å¥½åƒæ˜¯ç‹å…´è¯´çš„ä¸€å¥è¯ï¼Œå¤§å¤šæ•°äººä¸ºäº†é€ƒé¿çœŸæ­£çš„æ€è€ƒï¼Œæ„¿æ„åšä»»ä½•äº‹æƒ…ã€‚ï¼‰\n2ã€æ²¡ææ¸…æœåŠ¡å¯¹è±¡åˆ°åº•æ˜¯è° ï¼ˆä½ è§‰å¾—æ˜¯è°ï¼Ÿä¸ºä»€ä¹ˆæ˜¯ taï¼Ÿä½ åœ¨å¸® ta è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿè§£å†³äº†èƒ½æ€æ ·ï¼Ÿå¸® ta è§£å†³é—®é¢˜æ˜¯ä¸æ˜¯ä½ çš„æœ€ç»ˆç›®æ ‡ï¼Ÿï¼‰\n3ã€ç†å¿µæƒ…æ€€ä¸»å¯¼ï¼Œä»æ„Ÿæ€§å’Œå–„æ„å‡ºå‘ï¼Œä½†è®¤è¯†ä¸–ç•Œä¸å¤Ÿå®¢è§‚ï¼Œç§‘å­¦åˆ†æç¼ºå¤±ï¼Œé—®é¢˜å’Œè§£æ³•éƒ½ç¦ä¸èµ·æ¶é—®\n4ã€å¹³è¡¡ä¸­åº¸ï¼Œé»˜è®¤æœä»â€œç¨‹åºæ­£ç¡®â€ã€â€œæ”¿æ²»æ­£ç¡®â€ï¼Œè¡¨é¢ä¸Šå¹³ç­‰å°Šé‡æ¸©æƒ…è„‰è„‰ï¼Œå®é™…ç¼ºå°‘å±‚å±‚é€’è¿›çš„ã€æ¢æ±‚é—®é¢˜æœ¬è´¨çš„è®¨è®ºï¼Œè¿½æ±‚å’Œè°ã€ä¸è¦å‡ºé”™\u0026gt; åˆ¶å®šæ­£ç¡®æ¸…æ™°çš„ç›®æ ‡å¹¶ç«­å°½æ‰€èƒ½ï¼ˆé€æ¸å˜æˆâ€œå‡‘åˆâ€ï¼‰\nä¸Šé¢è¿™äº›ä¹ æƒ¯ï¼Œå¦‚æœè®©ä½ ç‰¹åˆ«æœ‰æ„Ÿè§‰ï¼Œé‚£å°±è¦å°å¿ƒäº†ï¼ å¦‚æœä½ ä¸€ä¸ªæ„Ÿè§‰éƒ½æ²¡æœ‰ï¼Œé‚£æ›´è¦å°å¿ƒäº†ï¼ï¼ï¼ï¼ˆå› ä¸ºè¿™äº›éƒ½æ˜¯å¾ˆå¸¸è§çš„æ— æ„è¯†çš„åä¹ æƒ¯ï¼Œå¾ˆå®¹æ˜“é™·å…¥å…¶ä¸­è€Œä¸è‡ªçŸ¥ï¼Œéœ€è¦æœ‰æ„è¯†çš„è®­ç»ƒè‡ªå·±çš„è§‰å¯Ÿèƒ½åŠ›ï¼‰\nè¶…è¶Šé—®é¢˜ï¼Œè®©é—®é¢˜ä¸å†æ˜¯é—®é¢˜ ç®¡ç†çš„é—®é¢˜ã€ç»„ç»‡çš„é—®é¢˜ä»æ¥éƒ½ä¸æ˜¯æœ‰æ˜ç¡®â€œå•å› å•æœâ€çš„é—®é¢˜ï¼Œè€Œæ˜¯å­˜åœ¨äºé”™ç»¼å¤æ‚çš„ç»„ç»‡ç³»ç»Ÿï¼Œä¹ƒè‡³æ›´å¹¿æ³›çš„å¤–éƒ¨ç¤¾ä¼šç³»ç»Ÿä¸­çš„é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„å·¥ä½œã€é¡¹ç›®ï¼Œéƒ½æ˜¯ä¸€ä¸ªâ€œæ¢ç´¢çœŸé—®é¢˜çš„è¿‡ç¨‹â€ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼ŒæŒç»­ã€æœ‰æ„è¯†åœ°åšæ·±åº¦æ€è€ƒå’Œå­¦ä¹ æ˜¯æ¯”æ’¸èµ·è¢–å­å¹²äº‹æ›´é‡è¦çš„ï¼Œå¦‚æœç–äºä»˜å‡ºæ€è€ƒä¸Šçš„åŠªåŠ›ï¼Œé¢˜æ‰¾é”™äº†ã€æ–¹å‘åäº†ï¼Œåé¢çš„ä¹Ÿå°±åˆ«æƒ³äº†ã€‚\næ¶åœ¨é”™è¯¯çš„é—®é¢˜ä¸Šï¼Œé¡¹ç›®å³ä½¿æ²¡åšåï¼Œä½†ä¹Ÿåšä¸åˆ°å¤šå¥½ã€‚å¾€åäº†è¯´ï¼Œä½ é”™è¿‡äº†ä¸€ä¸ªæˆåŠŸè§£å†³æœ‰ä»·å€¼é—®é¢˜çš„æœºä¼šï¼Œæµªè´¹äº†ä½ çš„æ—¶é—´ã€æ‰åå’Œèµ„æºã€‚\nè‡³äºæˆ‘ä»¬ä¸ºä»€ä¹ˆå®¹æ˜“ä¸è‡ªçŸ¥åœ°å¿½è§†è¿™äº›â€œçœŸæ€è€ƒâ€ï¼š\n ä»ç”Ÿç†ä¸Šè®²ï¼Œå¤§è„‘æ˜¯å¾ˆä¸å–œæ¬¢è´¹åŠ›æ°”æ€è€ƒçš„ï¼Œå› æ­¤æˆ‘ä»¬å¾€å¾€ä¼šé™·å…¥å¿«é€ŸåŸºäºä¸»è§‚æ€ç»´æƒ¯æ€§ä¸‹ç»“è®ºçš„é”™è¯¯ä¹‹ä¸­è€Œä¸è‡ªçŸ¥ï¼ˆtake for grantedï¼‰ã€‚é™¤äº†é‚£äº›å¤©èµ‹å’Œä¿®ä¸ºæé«˜çš„äººï¼Œå¦‚æœæ™®é€šäººæƒ³è®©æˆé•¿æ›´å¿«ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªé è°±çš„ç§‘å­¦æ–¹æ³•è®ºæ¥æŒ‡å¼•è‡ªå·±ã€‚ ä»ç»„ç»‡è§’åº¦ï¼Œåœ¨ä¸€ä¸ªå¤§ç»„ç»‡é‡Œè§£å†³é—®é¢˜ï¼Œä¼¼ä¹æ¯ä¸ªäººå¯¹é—®é¢˜è´Ÿæœ‰çš„è´£ä»»ä¹ŸåŒæ—¶è¢«ç¨€é‡Šäº†ï¼Œâ€œæˆ‘æƒ³äº†åˆæœ‰ä»€ä¹ˆç”¨ï¼Ÿâ€ï¼Œâ€œè¿™ä¸ªé—®é¢˜è¯¥æˆ‘å»æƒ³å—ï¼Ÿâ€ï¼Œleader è§‰å¾—åšäº‹æƒ…çš„ä¸‹å±åº”è¯¥è¦ä¸»åŠ¨æƒ³ï¼Œä¸‹å±è§‰å¾— leader æ¯”æˆ‘æ›´è´Ÿæœ‰æ€è€ƒçš„è´£ä»»ï¼Œå†åŠ ä¸Šæ¯ä¸ªäººéƒ½æœ‰å¾ˆå¤šäº‹æƒ…åœ¨ç‰µæ‰¯ç²¾åŠ›ï¼Œâ€œæ·±åº¦æ€è€ƒâ€æ¸æ¸ä¼¼ä¹å˜å°‘äº†ã€‚  ä¸€åˆ‡ä»æ‰¾å¯¹é—®é¢˜å‡ºå‘ è®©æˆ‘ä»¬ä»å¸¸è§çš„è¯¯åŒºå¼€å§‹\nåå·®ä¸€ï¼šæˆ‘ä»¬çš„é—®é¢˜ vs ç›®æ ‡å¯¹è±¡çš„é—®é¢˜ ç¬¬ä¸€ç§å¸¸è§çš„åå·®æ˜¯ï¼Œäººä»¬å¾€å¾€æ— æ³•å°†è‡ªå·±è®¤ä¸ºçš„é—®é¢˜ä¸ç›®æ ‡æœåŠ¡å¯¹è±¡è®¤ä¸ºçš„é—®é¢˜åŒºåˆ†å¼€ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹åˆ«å®¹æ˜“å®šä½é”™è¯¯çš„åœ°æ–¹ï¼Œå‚è€ƒä¸‹å›¾ï¼š\nå¤§å®¶éƒ½æ‡‚ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨æˆ‘ä»¬è‡ªå·±å’Œç›®æ ‡å¯¹è±¡éƒ½è®¤ä¸ºæ˜¯é—®é¢˜çš„åœ°æ–¹é‡‡å–è¡ŒåŠ¨ï¼Œä½†å®é™…å·¥ä½œèµ·æ¥ï¼Œè¿˜æ˜¯å¾€å¾€è¢«â€œæˆ‘ä»¬è®¤ä¸ºæ˜¯é—®é¢˜ï¼Œå®¢æˆ·ä¸è®¤ä¸ºæ˜¯é—®é¢˜çš„é—®é¢˜â€ç»Šä½ã€‚\n å°±åƒå®¶é•¿è¦æ±‚å­©å­å¥½å¥½åƒé¥­ï¼Œä¸º ta ä¸èƒ½å¥½å¥½åƒé¥­è€Œç”Ÿæ°”ï¼Œå¯å­©å­å¯èƒ½å°±æ˜¯é›¶é£Ÿåƒå¤šäº†ï¼ŒçœŸçš„ä¸é¥¿ä¹Ÿåƒä¸ä¸‹å» æˆ‘ä»¬è§‰å¾—æŸäº›åœ°æ–¹å­˜åœ¨ä¸å…¬å¹³çš„é—®é¢˜ï¼Œå¯åœ¨å®¢æˆ·çœ¼é‡Œï¼Œæ˜¯ä¸æ˜¯é‚£ä¹ˆå…¬å¹³å¯èƒ½å¹¶ä¸é‡è¦ä¹Ÿå¹¶ä¸å…³é”® æˆ‘ä»¬è§‰å¾—éœ€è¦åšæŸé¡¹èƒ½åŠ›æå‡çš„é¡¹ç›®ï¼Œå¯å®¢æˆ·ç°åœ¨é¢ä¸´å…¶ä»–æ¯”èƒ½åŠ›æå‡æ›´é‡è¦ã€æ›´è¦ç´§çš„é—®é¢˜  è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸æ˜¯è¦è´¹åŠ²å»ç»™å®¢æˆ·æ´—è„‘ï¼Œè€Œæ˜¯åº”è¯¥ä»”ç»†è†å¬å¯¹æ–¹çš„å£°éŸ³ï¼Œä»¥åŠæ›´å¤šç›¸å…³æ–¹çš„å£°éŸ³ï¼Œæ‰¾å‡ºâ€œçœŸé—®é¢˜â€ä»¥åŠèƒŒåçš„åŸå› ï¼Œå¯¹é—®é¢˜â€œå»ä¼ªå­˜çœŸâ€ï¼Œæ‰¾åˆ°å…¶ä¸­çš„é€»è¾‘å…³ç³»ï¼Œç„¶åå†å†³å®šè¦æ€ä¹ˆåŠã€‚\nå¦å¤–ï¼Œæœ‰æ—¶æˆ‘ä»¬ç¡®å®èƒ½å¤Ÿçœ‹è§çœŸé—®é¢˜ï¼Œä½†å®¢æˆ·ä¸å¤Ÿè®¤åŒï¼Œè¿™æ—¶å€™æœ€åº”è¯¥åšçš„äº‹æƒ…ï¼Œæ˜¯å¯»æ‰¾é‚£äº›æŒæœ‰ç›¸åŒè®¤çŸ¥çš„äººï¼Œç„¶åå’Œä»–ä»¬ä¸€èµ·å·¥ä½œï¼Œä¸€è¾¹åšå‡ºä¸€å®šæˆç»©ï¼Œä¸€è¾¹å¯å‘å’Œå¸¦åŠ¨æ›´å¤šäººã€‚ä¸ç”¨æŠŠç²¾åŠ›çº ç»“åœ¨ä¸ºä»€ä¹ˆå¯¹æ–¹ä¸è®¤åŒè¿™ä¸ªäº‹æƒ…ä¸Šï¼Œç„¶åè®©è‡ªå·±å’Œå›¢é˜Ÿæ¶ˆè€—åœ¨è¿™ä¸ªä¸è®¤åŒä¸Šã€‚\nåå·®äºŒï¼šè¿‡ç¨‹å¯¹è±¡ vs æœ€ç»ˆå¯¹è±¡ ç¬¬äºŒç§å¸¸è§çš„åå·®æ˜¯ï¼Œä¸èƒ½åˆ†è¾¨â€œè¿‡ç¨‹å¯¹è±¡â€å’Œâ€œæœ€ç»ˆå¯¹è±¡â€ï¼Œå®¹æ˜“åœ¨å…³æ³¨è¿‡ç¨‹å¯¹è±¡ä¸­è¿·å¤±ï¼Œä¸è§åˆè¡·ã€‚\n ä¸Šå¥½å¤§å­¦æ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œäººçš„å……åˆ†å‘å±•æ˜¯æœ€ç»ˆå¯¹è±¡ å­¦è‹±è¯­æ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œæ— éšœç¢çš„äº¤æµã€æ¥è§¦æ›´å¤šæ€æƒ³æ˜¯æœ€ç»ˆå¯¹è±¡ è–ªé…¬å…¬å¹³å’Œæœ‰æ•ˆæ¿€åŠ±æ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œè®©ä¼˜ç§€çš„å‘˜å·¥æ„¿æ„å’Œå…¬å¸ä¸€èµ·é•¿æœŸå‘å±•æ˜¯æœ€ç»ˆå¯¹è±¡ åœ¨å•†ä¸šç»„ç»‡é‡Œï¼Œä¸šåŠ¡çš„æˆåŠŸæ˜¯æœ€ç»ˆå¯¹è±¡ï¼Œå‘˜å·¥çš„æ»¡æ„åº¦å’Œå‘˜å·¥çš„èƒ½åŠ›æå‡æ˜¯è¿‡ç¨‹å¯¹è±¡ã€‚ä½†äººå¤©ç„¶å¯¹è·ç¦»è‡ªå·±æ›´è¿‘å’Œè‡ªå·±æ›´ç›¸å…³çš„äº‹ç‰©æ•æ„Ÿï¼Œå¯¹è¿œè·ç¦»çš„ç›®æ ‡ä¸æ•æ„Ÿã€‚æˆ‘ä»¬è¦å…³æ³¨å‘˜å·¥çš„æ»¡æ„åº¦å’Œå‘˜å·¥æˆé•¿ï¼Œè¿™æ²¡æœ‰é”™ï¼Œä½†ä¸è¦ç–å¿½äº†å¤§å®¶èšåœ¨ä¸€ä¸ªå…¬å¸é‡Œçš„ç›®çš„æ˜¯ä¸ºè§£å†³æŸç§é—®é¢˜æä¾›å•†ä¸šæœåŠ¡ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„é¦–è¦ç›®æ ‡å’Œé¦–è¦è´£ä»»ã€‚  å¹¶ä¸æ˜¯è¯´ä¸åº”è¯¥ä»è¿‡ç¨‹å¯¹è±¡å…¥æ‰‹ï¼Œè€Œæ˜¯æˆ‘ä»¬å§‹ç»ˆä¸èƒ½å¿½ç•¥æ‰æœåŠ¡çš„æœ€ç»ˆå¯¹è±¡æ˜¯è°ã€‚\nåå·®ä¸‰ï¼šç¬¼ç»Ÿå¯¹è±¡ vs å…·ä½“å¯¹è±¡ ç¬¬ä¸‰ç§å¸¸è§çš„åå·®æ˜¯ï¼Œå°†é—®é¢˜æ¦‚æ‹¬åŒ–ã€ç¬¼ç»ŸåŒ–ï¼Œå¾ˆå¤šæŠ½è±¡çš„æ¦‚å¿µå’Œå¤§è¯ï¼Œä½†å…·ä½“æ˜¯è°ã€é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Œä¸å¾—è€ŒçŸ¥ã€‚è¿™äº›è¯ä¸ä¸€å®šæ˜¯é»‘è¯ï¼Œä½†å’Œé»‘è¯æ•ˆæœç±»ä¼¼ï¼Œéƒ½é˜»ç¢äº†æˆ‘ä»¬ç›´è¾¾çœŸæ­£çš„é—®é¢˜ã€‚\nå°¤å…¶å¯¹ç®¡ç†é—®é¢˜çš„æè¿°ï¼Œå¤ªå®¹æ˜“æ»‘å‘ç¬¼ç»Ÿäº†ã€‚\n éœ€è¦ä»æ–‡åŒ–å’Œæ„è¯†ä¸Šï¼Œå¼ºè°ƒä¸è¦å†…å· å‘˜å·¥çš„å®‰å…¨æ„Ÿéœ€è¦æå‡ æˆ‘ä»¬éœ€è¦å¹³è¡¡æ•ˆç‡å’Œè´¨é‡ã€æ•ˆç‡å’Œå…¬å¹³çš„çŸ›ç›¾  å¦‚æœæˆ‘ä»¬å¯¹é—®é¢˜çš„ç•Œå®šè¿‡äºç¬¼ç»Ÿï¼Œè§£å†³æ€è·¯ä¹Ÿå¿…ç„¶èµ°å‘â€œå®å¤§â€ï¼Œå°±æ²¡æœ‰åŠæ³•åšåˆ°å°å¤„ç€æ‰‹ï¼Œä¹Ÿéš¾ä»¥å¾—å‡ºç¦å¾—èµ·æ‹·é—®çš„ã€å¯æ“ä½œçš„ã€é€»è¾‘ä¸Šæ­£ç¡®çš„è¡ŒåŠ¨ã€‚\nåå·®å››ï¼šä¸»è§‚åˆ¤æ–­ vs å®¢è§‚ç°è±¡ æˆ‘ä»¬å‡ ä¹å¯¹çœ‹åˆ°çš„äº‹å®é—®é¢˜éƒ½ä¼šå¿«é€Ÿå¾—å‡ºä¸€ä¸ªä¸»è§‚çš„åˆ¤æ–­å’Œç»“è®ºï¼Œä½†æˆ‘ä»¬éœ€è¦æ„è¯†åˆ°ï¼Œå½“æˆ‘ä»¬æŠŠè¿™äº›ä¸»è§‚åˆ¤æ–­å½“æˆé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å·²ç»çŠ¯äº†åç¦»é—®é¢˜æœ¬èº«çš„é”™è¯¯ã€‚","title":"å¦‚ä½•è®©è‡ªå·±ä¸å¿™ä¸å·è¿˜æœ‰æˆé•¿"},{"content":"åŠ¨æœºæ˜¯ä¸€ç§å¼ºå¤§çš„æƒ…æ„Ÿæ¿€åŠ±å› ç´ \nåŠ¨æœº=åŠ¨åŠ›=è‡ªé©±åŠ›=è‡ªæˆ‘é©±åŠ¨åŠ›\nåŠ¨æœº=å¥½å¥‡å¿ƒ+æ¿€æƒ…+ç›®æ ‡+è‡ªä¸»æ€§+æŒæ§æ„Ÿã€‚\nè‡ªä¸»çš„åŠ¨æœºæ‰æ˜¯çœŸåŠ¨æœº è‡ªä¸»æ€§æ˜¯å¯¹è¿½æ±‚ä½ çš„æ¿€æƒ…å’Œç›®çš„æ‰€éœ€çš„æ¸´æœ›ã€‚\nè¿™ç§æ¸´æœ›çš„åŠ¨æœºåˆ†ä¸ºå¤–åœ¨åŠ¨æœºå’Œå†…åœ¨åŠ¨æœºï¼Œå¤–åœ¨åŠ¨æœºæ˜¯ä½ å¿…é¡»è¦åšçš„å·¥ä½œï¼Œå†…åœ¨åŠ¨æœºåˆç§°ä¸ºè‡ªä¸»åŠ¨æœºï¼Œæœ‰ç ”ç©¶å‘ç°ï¼Œä»»ä½•æƒ…å†µä¸‹ï¼Œè‡ªä¸»åŠ¨æœºéƒ½ä¼šæ‰¼æ€å¤–åœ¨åŠ¨æœºã€‚è‡ªä¸»åŠ¨æœºæ˜¯ä¸€ç§æ›´å¼ºå¤§çš„åŠ¨åŠ›\nå¥½å¥‡å¿ƒã€æ¿€æƒ…ã€ç›®æ ‡æ˜¯æœ€å¤§åŒ–è‡ªä¸»æ€§çš„åŸºç¡€ å½“æˆ‘ä»¬å› ä¸º\u0026quot;å¥½å¥‡å¿ƒã€æ¿€æƒ…ã€ç›®æ ‡\u0026quot;è€Œåšæˆ‘ä»¬æ­£åœ¨åšçš„äº‹æƒ…æ—¶ï¼Œæˆ‘ä»¬æ­£åœ¨æ­£ç¡®åœ°æŒ–æ˜è‡ªä¸»æ€§ã€‚æ¢å¥è¯è¯´ï¼Œå¯»æ±‚ç³»ç»Ÿå–œæ¬¢æŒæ§è‡ªå·±ç©¶ç«Ÿåœ¨å¯»æ±‚ä»€ä¹ˆæ ·çš„èµ„æºã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä»å¥½å¥‡å¿ƒã€æ¿€æƒ…å’Œç›®æ ‡å¼€å§‹æ¢ç´¢é©±åŠ¨åŠ›çš„åŸå› ã€‚è¿™ä¸‰é‡å¥å»ºç«‹äº†å…´è¶£å’Œäº«å—\u0026ndash;é€šè¿‡å¥½å¥‡å¿ƒå’Œæ¿€æƒ…ï¼Œç„¶åé€šè¿‡ç›®æ ‡æ¥å·©å›ºæ ¸å¿ƒä¿¡å¿µå’Œä»·å€¼è§‚ã€‚æ¢å¥è¯è¯´ï¼Œå¥½å¥‡å¿ƒã€æ¿€æƒ…ã€ç›®æ ‡æ˜¯æœ€å¤§åŒ–è‡ªä¸»æ€§çš„åŸºç¡€ã€‚\nè‡ªä¸»æ€§å°†æˆ‘ä»¬å˜æˆä¸€ä¸ªæ›´æœ‰æ•ˆçš„è‡ªå·± å·¥ä½œä¸­å¢åŠ è‡ªä¸»æ€§ è°·æ­Œç”¨ 20%çš„æ—¶é—´æ¥æŒ–æ˜è¿™ä¸ªé©±åŠ¨åŠ›ï¼Œè¿™æ„å‘³ç€ä»–ä»¬æ¯å‘¨ç»™äººä»¬ 8 ä¸ªå°æ—¶çš„æ—¶é—´æ¥è¿½æ±‚ä¸€ä¸ªä»–ä»¬çƒ­è¡·çš„æƒ³æ³•ã€‚ç„¶è€Œ 3M å…¬å¸ä»…ç”¨ 15%çš„æ—¶é—´å°±è·å¾—äº†æƒŠäººçš„æˆæœï¼Œä¹Ÿå°±æ˜¯æ¯å‘¨åªæœ‰ä¸€ä¸ªä¸‹åˆçš„æ—¶é—´ã€‚\nè·å¾—è‡ªä¸»æ€§æä¾›çš„é©±åŠ¨åŠ›çš„æå‡ï¼Œä½ éœ€è¦è‡ªç”±æ§åˆ¶ä½ çš„ç¡çœ ã€å·¥ä½œå’Œè¿åŠ¨æ—¶é—´è¡¨ã€‚ä½ è¿˜éœ€è¦è‡ªä¸»åœ°å®šæœŸé€šè¿‡è‡ªå·±é€‰æ‹©çš„æ´»åŠ¨æ¥è¿½é€å¿ƒæµã€‚\nç†æƒ³çš„æƒ…å†µæ˜¯ï¼Œä½ çš„å·¥ä½œæ—¶é—´å°†ç”¨äºä¿ƒè¿›ä½ çš„ç›®çš„çš„æ´»åŠ¨ï¼Œè€Œäº§ç”Ÿå¿ƒæµçš„æ´»åŠ¨ç±»ä¼¼äºå†²æµªæ„å‘³ç€å®ƒå®é™…ä¸Šæ˜¯å·¥ä½œçš„ä¼‘æ¯ã€‚\nå¦‚æœè¿™åœ¨ä½ ä»Šå¤©çš„ç”Ÿæ´»ä¸­æ˜¯ä¸å¯èƒ½çš„ï¼Œé‚£ä¹ˆå°±ä» 3M è®¡åˆ’å¼€å§‹ï¼šå°† 15%çš„æ—¶é—´ç”¨äºä¸€ä¸ªä¸ä½ çš„æ ¸å¿ƒæ¿€æƒ…å’Œç›®çš„ç›¸ä¸€è‡´çš„é¡¹ç›®ã€‚15%å¤§çº¦æ˜¯æ¯å‘¨ä¸€ä¸ªä¸‹åˆçš„æ—¶é—´ï¼Œä¸è¿‡ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°æŠŠè¿™ä¸ªæ—¶é—´åˆ†æˆä¸€å¯¹ä¸¤ä¸ªåŠå°æ—¶çš„åŒºå—ï¼Œå¾—åˆ°ç±»ä¼¼çš„ç»“æœã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E5%A6%82%E4%BD%95%E5%A2%9E%E5%BC%BA%E5%81%9A%E4%BA%8B%E7%9A%84%E5%8A%A8%E6%9C%BA/","summary":"åŠ¨æœºæ˜¯ä¸€ç§å¼ºå¤§çš„æƒ…æ„Ÿæ¿€åŠ±å› ç´ \nåŠ¨æœº=åŠ¨åŠ›=è‡ªé©±åŠ›=è‡ªæˆ‘é©±åŠ¨åŠ›\nåŠ¨æœº=å¥½å¥‡å¿ƒ+æ¿€æƒ…+ç›®æ ‡+è‡ªä¸»æ€§+æŒæ§æ„Ÿã€‚\nè‡ªä¸»çš„åŠ¨æœºæ‰æ˜¯çœŸåŠ¨æœº è‡ªä¸»æ€§æ˜¯å¯¹è¿½æ±‚ä½ çš„æ¿€æƒ…å’Œç›®çš„æ‰€éœ€çš„æ¸´æœ›ã€‚\nè¿™ç§æ¸´æœ›çš„åŠ¨æœºåˆ†ä¸ºå¤–åœ¨åŠ¨æœºå’Œå†…åœ¨åŠ¨æœºï¼Œå¤–åœ¨åŠ¨æœºæ˜¯ä½ å¿…é¡»è¦åšçš„å·¥ä½œï¼Œå†…åœ¨åŠ¨æœºåˆç§°ä¸ºè‡ªä¸»åŠ¨æœºï¼Œæœ‰ç ”ç©¶å‘ç°ï¼Œä»»ä½•æƒ…å†µä¸‹ï¼Œè‡ªä¸»åŠ¨æœºéƒ½ä¼šæ‰¼æ€å¤–åœ¨åŠ¨æœºã€‚è‡ªä¸»åŠ¨æœºæ˜¯ä¸€ç§æ›´å¼ºå¤§çš„åŠ¨åŠ›\nå¥½å¥‡å¿ƒã€æ¿€æƒ…ã€ç›®æ ‡æ˜¯æœ€å¤§åŒ–è‡ªä¸»æ€§çš„åŸºç¡€ å½“æˆ‘ä»¬å› ä¸º\u0026quot;å¥½å¥‡å¿ƒã€æ¿€æƒ…ã€ç›®æ ‡\u0026quot;è€Œåšæˆ‘ä»¬æ­£åœ¨åšçš„äº‹æƒ…æ—¶ï¼Œæˆ‘ä»¬æ­£åœ¨æ­£ç¡®åœ°æŒ–æ˜è‡ªä¸»æ€§ã€‚æ¢å¥è¯è¯´ï¼Œå¯»æ±‚ç³»ç»Ÿå–œæ¬¢æŒæ§è‡ªå·±ç©¶ç«Ÿåœ¨å¯»æ±‚ä»€ä¹ˆæ ·çš„èµ„æºã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä»å¥½å¥‡å¿ƒã€æ¿€æƒ…å’Œç›®æ ‡å¼€å§‹æ¢ç´¢é©±åŠ¨åŠ›çš„åŸå› ã€‚è¿™ä¸‰é‡å¥å»ºç«‹äº†å…´è¶£å’Œäº«å—\u0026ndash;é€šè¿‡å¥½å¥‡å¿ƒå’Œæ¿€æƒ…ï¼Œç„¶åé€šè¿‡ç›®æ ‡æ¥å·©å›ºæ ¸å¿ƒä¿¡å¿µå’Œä»·å€¼è§‚ã€‚æ¢å¥è¯è¯´ï¼Œå¥½å¥‡å¿ƒã€æ¿€æƒ…ã€ç›®æ ‡æ˜¯æœ€å¤§åŒ–è‡ªä¸»æ€§çš„åŸºç¡€ã€‚\nè‡ªä¸»æ€§å°†æˆ‘ä»¬å˜æˆä¸€ä¸ªæ›´æœ‰æ•ˆçš„è‡ªå·± å·¥ä½œä¸­å¢åŠ è‡ªä¸»æ€§ è°·æ­Œç”¨ 20%çš„æ—¶é—´æ¥æŒ–æ˜è¿™ä¸ªé©±åŠ¨åŠ›ï¼Œè¿™æ„å‘³ç€ä»–ä»¬æ¯å‘¨ç»™äººä»¬ 8 ä¸ªå°æ—¶çš„æ—¶é—´æ¥è¿½æ±‚ä¸€ä¸ªä»–ä»¬çƒ­è¡·çš„æƒ³æ³•ã€‚ç„¶è€Œ 3M å…¬å¸ä»…ç”¨ 15%çš„æ—¶é—´å°±è·å¾—äº†æƒŠäººçš„æˆæœï¼Œä¹Ÿå°±æ˜¯æ¯å‘¨åªæœ‰ä¸€ä¸ªä¸‹åˆçš„æ—¶é—´ã€‚\nè·å¾—è‡ªä¸»æ€§æä¾›çš„é©±åŠ¨åŠ›çš„æå‡ï¼Œä½ éœ€è¦è‡ªç”±æ§åˆ¶ä½ çš„ç¡çœ ã€å·¥ä½œå’Œè¿åŠ¨æ—¶é—´è¡¨ã€‚ä½ è¿˜éœ€è¦è‡ªä¸»åœ°å®šæœŸé€šè¿‡è‡ªå·±é€‰æ‹©çš„æ´»åŠ¨æ¥è¿½é€å¿ƒæµã€‚\nç†æƒ³çš„æƒ…å†µæ˜¯ï¼Œä½ çš„å·¥ä½œæ—¶é—´å°†ç”¨äºä¿ƒè¿›ä½ çš„ç›®çš„çš„æ´»åŠ¨ï¼Œè€Œäº§ç”Ÿå¿ƒæµçš„æ´»åŠ¨ç±»ä¼¼äºå†²æµªæ„å‘³ç€å®ƒå®é™…ä¸Šæ˜¯å·¥ä½œçš„ä¼‘æ¯ã€‚\nå¦‚æœè¿™åœ¨ä½ ä»Šå¤©çš„ç”Ÿæ´»ä¸­æ˜¯ä¸å¯èƒ½çš„ï¼Œé‚£ä¹ˆå°±ä» 3M è®¡åˆ’å¼€å§‹ï¼šå°† 15%çš„æ—¶é—´ç”¨äºä¸€ä¸ªä¸ä½ çš„æ ¸å¿ƒæ¿€æƒ…å’Œç›®çš„ç›¸ä¸€è‡´çš„é¡¹ç›®ã€‚15%å¤§çº¦æ˜¯æ¯å‘¨ä¸€ä¸ªä¸‹åˆçš„æ—¶é—´ï¼Œä¸è¿‡ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°æŠŠè¿™ä¸ªæ—¶é—´åˆ†æˆä¸€å¯¹ä¸¤ä¸ªåŠå°æ—¶çš„åŒºå—ï¼Œå¾—åˆ°ç±»ä¼¼çš„ç»“æœã€‚","title":"å¦‚ä½•å¢å¼ºåšäº‹çš„åŠ¨æœº"},{"content":"15%çš„è‡ªä¸»æ—¶é—´ äººç±»æœ€å–œæ¬¢çš„å°±æ˜¯æŠŠå°èƒœåˆ©å åŠ åœ¨å°èƒœåˆ©ä¹‹ä¸Šï¼Œå†å åŠ åœ¨å°èƒœåˆ©ä¹‹ä¸Šã€‚åœ¨ç¥ç»åŒ–å­¦ä¸Šï¼Œè¿™äº›èƒœåˆ©ä¼šäº§ç”Ÿå¤šå·´èƒºã€‚\nè¦æƒ³çœŸæ­£é©¾é©­æŒæ§åŠ›ä½œä¸ºä¸€ç§åŠ¨åŠ›ï¼Œå°±æŠŠä½ ç”Ÿå‘½ä¸­ä¸ºè‡ªå·±åˆ’å‡ºçš„ 15%çš„æ—¶é—´\u0026ndash;ç§°ä¹‹ä¸ºä½ çš„è‡ªä¸»æ—¶é—´\u0026ndash;èŠ±åœ¨æ¨åŠ¨æŒ‘æˆ˜ä¸æŠ€èƒ½çš„å¹³è¡¡ä¸Šï¼ŒåŠªåŠ›åœ¨ä¸€äº›ä¸å¥½å¥‡å¿ƒã€æ¿€æƒ…å’Œç›®æ ‡ä¸€è‡´çš„äº‹æƒ…ä¸Šåšå¾—æ›´å¥½ä¸€äº›ã€‚ å¼€å§‹è¿½é€æ¸è¿›å¼æ”¹è¿›çš„é«˜å¢ƒç•Œã€‚è¿·ä¸Šè¿›æ­¥çš„å¤šå·´èƒºå¾ªç¯ã€‚\nè¯•ç€è®©ä»Šå¤©æ›´å¥½ä¸€ç‚¹ï¼Œè¯•ç€è®©æ˜å¤©æ›´å¥½ä¸€ç‚¹ã€‚ç„¶åé‡å¤ã€‚å†é‡å¤ã€‚\nå°æˆåŠŸä¿ƒè¿›åŠ¨åŠ› äººæ˜¯æ— æ³•æ¬ºéª—è‡ªå·±çš„ä¸‹æ„è¯†çš„ã€‚\nå¾ˆå¤šæ—¶å€™æ‹–å»¶ï¼Œä¸æ„¿æ„åšæŸä»¶äº‹æƒ…ï¼Œæ˜¯å› ä¸ºä¸‹æ„è¯†è§‰å¾—è¿™ä¸ªä¸œè¥¿éº»çƒ¦æ¯ç‡¥æˆ–è€…éå¸¸å›°éš¾ï¼Œä½†å¦‚æœèƒ½å¤ŸæŠŠäº‹æƒ…æ‹†è§£ç»†åˆ†ï¼Œèƒ½å¤Ÿç†è§£æ¯ä¸ªé˜¶æ®µå¤§æ¦‚ä¼šæœ‰ä»€ä¹ˆæ ·çš„æœŸå¾…ï¼Œä»€ä¹ˆæ—¶å€™ä¼šå¾—åˆ°ä»€ä¹ˆå¥–åŠ±ï¼Œä¸€æ—¦ç†è§£é€šäº†ï¼Œé©¬ä¸Šè¡ŒåŠ¨çš„åŠ¨åŠ›å°±ä¼šå¼ºå¤§å¾ˆå¤šã€‚\næ‰€ä»¥ç¼ºä¹è¡ŒåŠ¨åŠ›ï¼Œå¾ˆå¤šæ—¶å€™æœ¬è´¨è¿˜æ˜¯æ¥æºäºå¤§è„‘å¯¹ç»†èŠ‚ä¸€æ— æ‰€çŸ¥ï¼Œç¼ºä¹ä¸€ä¸ªç›¸å¯¹ç»†åŒ–çš„ç†è§£å’ŒæœŸå¾…ã€‚è¿™æ—¶å€™ä¸åº”å½“ç€æ€¥è›®å¹²ï¼Œè€Œåº”å½“å…ˆå°½é‡è·å–æ›´å¤šä¿¡æ¯ï¼Œè·å¾—å¯¹çŸ­æœŸæ›´åŠ æ¸…æ™°çš„æœŸå¾…å€¼ï¼Œè¿™æ ·æ‰èƒ½æ¿€åŠ±è‡ªå·±åŠ¨èµ·æ¥ã€‚\nå¦‚æœä¸èƒ½é›†ä¸­æ³¨æ„åŠ›åšè‡ªå·±æœ‰å…´è¶£çš„äº‹æƒ…ï¼Œç¨å¾®æ¾æ•£ä¸‹æ¥ï¼Œéç†æ€§å¤§è„‘çš„ä¸€äº›è´Ÿé¢æƒ…ç»ªæˆ–è€…æ€è€ƒä¼šå·å·çš„æ¶Œç°åˆ°å°å‰ã€‚è¿™ç§è´Ÿé¢æƒ…ç»ªæœ‰å®ƒçš„å¹³è¡¡ä½œç”¨ï¼Œä½†æ˜¯è´Ÿé¢æƒ…ç»ªå¤ªå¤šäº†ï¼Œä¼šé™ä½äººçš„å†…åœ¨åŠ¨åŠ›ï¼Œæ—¶é—´é•¿äº†å½¢æˆæ¶æ€§å¾ªç¯ï¼Œç”šè‡³å‡ºç°å¿§éƒæƒ…ç»ªã€‚æ‰€ä»¥ä¸æ–­å¯»æ‰¾å¯ä»¥æ¿€å‘è‡ªå·±å…´è¶£çš„äº‹æƒ…å»åšï¼Œæ˜¯æé«˜ç”Ÿæ´»è´¨é‡çš„é‡è¦è®®é¢˜ã€‚\nè¿™å°±æ˜¯ã€ŠThe Motivation Myth åŠ¨åŠ›ç¥è¯ã€‹ä¸€ä¹¦é‡Œçš„æ ¸å¿ƒè§‚ç‚¹ï¼šå°æˆåŠŸå½¢æˆåŠ¨åŠ›ï¼ŒåŠ¨åŠ›ä¿ƒæˆæ›´å¤§çš„æˆåŠŸï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ­£åé¦ˆè¿é”ååº”ã€‚ä¸€èˆ¬çš„æ”¹å˜æ€æƒ³å’Œä¿¡å¿µéƒ½æ˜¯ä¸å¯é çš„ã€‚\næ‰€ä»¥æŠŠè‡ªå·±æ‰“é€ æˆä¸€ä¸ªå¤šé¢æ‰‹ï¼Œæ›´å®¹æ˜“æ‰¾åˆ°å±€éƒ¨å°æˆåŠŸï¼Œè€Œç»™è‡ªå·±æ–°çš„åŠ¨åŠ›ç»§ç»­å‰è¿›ã€‚ä»äº‹éå¸¸ç‹­éš˜çš„å•ä¸€å·¥ä½œï¼Œå®¹æ˜“å¡å£³ï¼Œé•¿æœŸç¼ºä¹æ­£åé¦ˆè€Œæ°”é¦ï¼Œæˆ–å› å¤ªæ¯ç‡¥è€Œæ²¡äº‹æ‰¾äº‹å¼„å¾—æ›´ç³Ÿï¼ˆè‚¡å¸‚é¢‘ç¹äº¤æ˜“ï¼‰ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E5%A6%82%E4%BD%95%E5%A2%9E%E5%BC%BA%E6%8E%8C%E6%8E%A7%E6%84%9F/","summary":"15%çš„è‡ªä¸»æ—¶é—´ äººç±»æœ€å–œæ¬¢çš„å°±æ˜¯æŠŠå°èƒœåˆ©å åŠ åœ¨å°èƒœåˆ©ä¹‹ä¸Šï¼Œå†å åŠ åœ¨å°èƒœåˆ©ä¹‹ä¸Šã€‚åœ¨ç¥ç»åŒ–å­¦ä¸Šï¼Œè¿™äº›èƒœåˆ©ä¼šäº§ç”Ÿå¤šå·´èƒºã€‚\nè¦æƒ³çœŸæ­£é©¾é©­æŒæ§åŠ›ä½œä¸ºä¸€ç§åŠ¨åŠ›ï¼Œå°±æŠŠä½ ç”Ÿå‘½ä¸­ä¸ºè‡ªå·±åˆ’å‡ºçš„ 15%çš„æ—¶é—´\u0026ndash;ç§°ä¹‹ä¸ºä½ çš„è‡ªä¸»æ—¶é—´\u0026ndash;èŠ±åœ¨æ¨åŠ¨æŒ‘æˆ˜ä¸æŠ€èƒ½çš„å¹³è¡¡ä¸Šï¼ŒåŠªåŠ›åœ¨ä¸€äº›ä¸å¥½å¥‡å¿ƒã€æ¿€æƒ…å’Œç›®æ ‡ä¸€è‡´çš„äº‹æƒ…ä¸Šåšå¾—æ›´å¥½ä¸€äº›ã€‚ å¼€å§‹è¿½é€æ¸è¿›å¼æ”¹è¿›çš„é«˜å¢ƒç•Œã€‚è¿·ä¸Šè¿›æ­¥çš„å¤šå·´èƒºå¾ªç¯ã€‚\nè¯•ç€è®©ä»Šå¤©æ›´å¥½ä¸€ç‚¹ï¼Œè¯•ç€è®©æ˜å¤©æ›´å¥½ä¸€ç‚¹ã€‚ç„¶åé‡å¤ã€‚å†é‡å¤ã€‚\nå°æˆåŠŸä¿ƒè¿›åŠ¨åŠ› äººæ˜¯æ— æ³•æ¬ºéª—è‡ªå·±çš„ä¸‹æ„è¯†çš„ã€‚\nå¾ˆå¤šæ—¶å€™æ‹–å»¶ï¼Œä¸æ„¿æ„åšæŸä»¶äº‹æƒ…ï¼Œæ˜¯å› ä¸ºä¸‹æ„è¯†è§‰å¾—è¿™ä¸ªä¸œè¥¿éº»çƒ¦æ¯ç‡¥æˆ–è€…éå¸¸å›°éš¾ï¼Œä½†å¦‚æœèƒ½å¤ŸæŠŠäº‹æƒ…æ‹†è§£ç»†åˆ†ï¼Œèƒ½å¤Ÿç†è§£æ¯ä¸ªé˜¶æ®µå¤§æ¦‚ä¼šæœ‰ä»€ä¹ˆæ ·çš„æœŸå¾…ï¼Œä»€ä¹ˆæ—¶å€™ä¼šå¾—åˆ°ä»€ä¹ˆå¥–åŠ±ï¼Œä¸€æ—¦ç†è§£é€šäº†ï¼Œé©¬ä¸Šè¡ŒåŠ¨çš„åŠ¨åŠ›å°±ä¼šå¼ºå¤§å¾ˆå¤šã€‚\næ‰€ä»¥ç¼ºä¹è¡ŒåŠ¨åŠ›ï¼Œå¾ˆå¤šæ—¶å€™æœ¬è´¨è¿˜æ˜¯æ¥æºäºå¤§è„‘å¯¹ç»†èŠ‚ä¸€æ— æ‰€çŸ¥ï¼Œç¼ºä¹ä¸€ä¸ªç›¸å¯¹ç»†åŒ–çš„ç†è§£å’ŒæœŸå¾…ã€‚è¿™æ—¶å€™ä¸åº”å½“ç€æ€¥è›®å¹²ï¼Œè€Œåº”å½“å…ˆå°½é‡è·å–æ›´å¤šä¿¡æ¯ï¼Œè·å¾—å¯¹çŸ­æœŸæ›´åŠ æ¸…æ™°çš„æœŸå¾…å€¼ï¼Œè¿™æ ·æ‰èƒ½æ¿€åŠ±è‡ªå·±åŠ¨èµ·æ¥ã€‚\nå¦‚æœä¸èƒ½é›†ä¸­æ³¨æ„åŠ›åšè‡ªå·±æœ‰å…´è¶£çš„äº‹æƒ…ï¼Œç¨å¾®æ¾æ•£ä¸‹æ¥ï¼Œéç†æ€§å¤§è„‘çš„ä¸€äº›è´Ÿé¢æƒ…ç»ªæˆ–è€…æ€è€ƒä¼šå·å·çš„æ¶Œç°åˆ°å°å‰ã€‚è¿™ç§è´Ÿé¢æƒ…ç»ªæœ‰å®ƒçš„å¹³è¡¡ä½œç”¨ï¼Œä½†æ˜¯è´Ÿé¢æƒ…ç»ªå¤ªå¤šäº†ï¼Œä¼šé™ä½äººçš„å†…åœ¨åŠ¨åŠ›ï¼Œæ—¶é—´é•¿äº†å½¢æˆæ¶æ€§å¾ªç¯ï¼Œç”šè‡³å‡ºç°å¿§éƒæƒ…ç»ªã€‚æ‰€ä»¥ä¸æ–­å¯»æ‰¾å¯ä»¥æ¿€å‘è‡ªå·±å…´è¶£çš„äº‹æƒ…å»åšï¼Œæ˜¯æé«˜ç”Ÿæ´»è´¨é‡çš„é‡è¦è®®é¢˜ã€‚\nè¿™å°±æ˜¯ã€ŠThe Motivation Myth åŠ¨åŠ›ç¥è¯ã€‹ä¸€ä¹¦é‡Œçš„æ ¸å¿ƒè§‚ç‚¹ï¼šå°æˆåŠŸå½¢æˆåŠ¨åŠ›ï¼ŒåŠ¨åŠ›ä¿ƒæˆæ›´å¤§çš„æˆåŠŸï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ­£åé¦ˆè¿é”ååº”ã€‚ä¸€èˆ¬çš„æ”¹å˜æ€æƒ³å’Œä¿¡å¿µéƒ½æ˜¯ä¸å¯é çš„ã€‚\næ‰€ä»¥æŠŠè‡ªå·±æ‰“é€ æˆä¸€ä¸ªå¤šé¢æ‰‹ï¼Œæ›´å®¹æ˜“æ‰¾åˆ°å±€éƒ¨å°æˆåŠŸï¼Œè€Œç»™è‡ªå·±æ–°çš„åŠ¨åŠ›ç»§ç»­å‰è¿›ã€‚ä»äº‹éå¸¸ç‹­éš˜çš„å•ä¸€å·¥ä½œï¼Œå®¹æ˜“å¡å£³ï¼Œé•¿æœŸç¼ºä¹æ­£åé¦ˆè€Œæ°”é¦ï¼Œæˆ–å› å¤ªæ¯ç‡¥è€Œæ²¡äº‹æ‰¾äº‹å¼„å¾—æ›´ç³Ÿï¼ˆè‚¡å¸‚é¢‘ç¹äº¤æ˜“ï¼‰ã€‚","title":"å¦‚ä½•å¢å¼ºæŒæ§æ„Ÿ"},{"content":"å¯¹é—®é¢˜æˆ–å›°å¢ƒçš„æ— èƒ½ä¸ºåŠ›ï¼Œå¯¹ä»–äººæœ‰æ‰€æ¸´æ±‚å’Œå¯„æ‰˜ï¼ŒæœŸæœ›ä»–äººå¸®åŠ©è§£å†³é—®é¢˜ã€‚åŒæ—¶ï¼Œæ¸´æœ›åˆ«äººè¯»æ‡‚è‡ªå·±ï¼Œäº²è¿‘è‡ªå·±ã€‚\næŠ±æ€¨ï¼Œå…¶å®æ˜¯â€œè¦æŠ±æŠ±â€ã€‚æŠ±æ€¨è¿˜ç»å¸¸ä¼´æœ‰è½»å¾®çš„æ„¤æ€’å’Œå¯¹ä»–äººçš„æ”»å‡»ã€‚ä¸çˆ±æŠ±æ€¨çš„äººï¼Œåœ¨é¢å¯¹æŒ«æŠ˜å’Œæ— æ³•è§£å†³çš„é—®é¢˜æ—¶ï¼Œä»–ä»¬èƒ½å¯¹è‡ªå·±çš„æ— èƒ½ä¸ºåŠ›åŠ ä»¥æ¥çº³ï¼Œèƒ½æ˜ç¡®åœ°æ„ŸçŸ¥é“è‡ªå·±å“ªäº›æ–¹é¢æ˜¯æœ‰ä»·å€¼çš„ï¼Œå“ªäº›æ–¹é¢æ˜¯æ²¡æœ‰ä»·å€¼çš„ï¼Œä¸éœ€è¦æ±‚è¯¸äºä»–äººçš„è‚¯å®šå’Œç†è§£ã€‚\næŠ±æ€¨ä¼ é€’çš„ä¿¡å·æ˜¯ï¼Œå°†å¤ªå¤šä¸ªäººçš„ä»·å€¼éœ€æ±‚å¯„æ‰˜åˆ°äº†åˆ«äººèº«ä¸Šï¼Œæ²¡æœ‰è¯•å›¾å»å¯»æ‰¾è‡ªå·±åº”å¯¹é—®é¢˜çš„ç­–ç•¥ï¼Œéœ€è¦åŠ å¼ºä¸ªäººè§£å†³é—®é¢˜çš„è¡ŒåŠ¨åŠ›å’Œä¸ªäººä»·å€¼æ„Ÿã€‚ï¼ˆè¯´ç™½äº†ï¼Œäººè¿˜æ˜¯å¾—é è‡ªå·±å‘€ï¼ï¼‰\n","permalink":"https://zhenfeng-zhu.github.io/post/%E6%8A%B1%E6%80%A8/","summary":"å¯¹é—®é¢˜æˆ–å›°å¢ƒçš„æ— èƒ½ä¸ºåŠ›ï¼Œå¯¹ä»–äººæœ‰æ‰€æ¸´æ±‚å’Œå¯„æ‰˜ï¼ŒæœŸæœ›ä»–äººå¸®åŠ©è§£å†³é—®é¢˜ã€‚åŒæ—¶ï¼Œæ¸´æœ›åˆ«äººè¯»æ‡‚è‡ªå·±ï¼Œäº²è¿‘è‡ªå·±ã€‚\næŠ±æ€¨ï¼Œå…¶å®æ˜¯â€œè¦æŠ±æŠ±â€ã€‚æŠ±æ€¨è¿˜ç»å¸¸ä¼´æœ‰è½»å¾®çš„æ„¤æ€’å’Œå¯¹ä»–äººçš„æ”»å‡»ã€‚ä¸çˆ±æŠ±æ€¨çš„äººï¼Œåœ¨é¢å¯¹æŒ«æŠ˜å’Œæ— æ³•è§£å†³çš„é—®é¢˜æ—¶ï¼Œä»–ä»¬èƒ½å¯¹è‡ªå·±çš„æ— èƒ½ä¸ºåŠ›åŠ ä»¥æ¥çº³ï¼Œèƒ½æ˜ç¡®åœ°æ„ŸçŸ¥é“è‡ªå·±å“ªäº›æ–¹é¢æ˜¯æœ‰ä»·å€¼çš„ï¼Œå“ªäº›æ–¹é¢æ˜¯æ²¡æœ‰ä»·å€¼çš„ï¼Œä¸éœ€è¦æ±‚è¯¸äºä»–äººçš„è‚¯å®šå’Œç†è§£ã€‚\næŠ±æ€¨ä¼ é€’çš„ä¿¡å·æ˜¯ï¼Œå°†å¤ªå¤šä¸ªäººçš„ä»·å€¼éœ€æ±‚å¯„æ‰˜åˆ°äº†åˆ«äººèº«ä¸Šï¼Œæ²¡æœ‰è¯•å›¾å»å¯»æ‰¾è‡ªå·±åº”å¯¹é—®é¢˜çš„ç­–ç•¥ï¼Œéœ€è¦åŠ å¼ºä¸ªäººè§£å†³é—®é¢˜çš„è¡ŒåŠ¨åŠ›å’Œä¸ªäººä»·å€¼æ„Ÿã€‚ï¼ˆè¯´ç™½äº†ï¼Œäººè¿˜æ˜¯å¾—é è‡ªå·±å‘€ï¼ï¼‰","title":"æŠ±æ€¨"},{"content":"å«‰å¦’æ˜¯ï¼Œä½ æœ‰è€Œæˆ‘æ²¡æœ‰ï¼Œè®©æˆ‘è§‰å¾—è‡ªå·±å¾ˆæ²¡æœ‰ä»·å€¼ã€‚\nè‡ªæˆ‘ä»·å€¼æ„Ÿè¶Šå®Œå–„ï¼Œå«‰å¦’å‡ºç°çš„æ¦‚ç‡è¶Šä½ï¼Œä¹Ÿä¸å€¾å‘äºé€šè¿‡å’Œä»–äººæ¯”è¾ƒï¼Œæ¥å¡«è¡¥è‡ªå·±çš„ä»·å€¼æ„Ÿã€‚å¦‚æœå€¾å‘äºæ€»æ˜¯å’Œåˆ«äººæ¯”è¾ƒï¼Œæœ¬è´¨åŸå› æ˜¯è‡ªæˆ‘æ„è¯†ä¸ä»–äººåˆ†åŒ–ä¸å¤Ÿï¼Œè‡ªæˆ‘è¾¹ç•Œä¸æ¸…æ™°ï¼Œè€Œå¤§éƒ¨åˆ†äººçš„è‡ªæˆ‘æ„è¯†éƒ½ä¸æ˜¯å¾ˆå®Œå–„ï¼Œæˆ‘ä»¬ä¸ä»–äººä¹‹é—´çš„åˆ†åŒ–åšå¾—å¹¶ä¸å¥½ï¼Œå› ä¸ºåˆ†åŒ–ä¸å¤Ÿï¼Œå¯¼è‡´æˆ‘ä»¬ç»å¸¸ä¸ä»–äººå‘ç”Ÿæ··æ·†ã€‚\nå«‰å¦’æƒ…ç»ªå…¶å®æ˜¯è‡ªæˆ‘è¯„å®šç³»ç»Ÿå‡ºäº†é—®é¢˜ï¼Œå¯¹è‡ªå·±æ²¡æœ‰å®¢è§‚çš„è®¤è¯†ï¼Œä¸èƒ½å‡†ç¡®åœ°æç‚¼å‡ºè‡ªæˆ‘éœ€æ±‚å’Œè‡ªæˆ‘æ„è¯†ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€æ¡è‡ªå·±åšä¿¡çš„è‡ªæˆ‘ä»·å€¼å®ç°çš„é“è·¯ï¼Œæˆ‘ä»¬ä¹Ÿå°±æ— éœ€å«‰å¦’ä»–äººã€‚å«‰å¦’å¯ä»¥å‡åä¸ºç¾¡æ…•å’Œå´‡æ‹œï¼Œè¿™æ˜¯å»ºè®¾æ€§çš„ç§¯æçš„è½¬åŒ–ã€‚é€šè¿‡ç¾¡æ…•å’Œå´‡æ‹œä»–äººï¼Œä¿ƒä½¿æˆ‘ä»¬å‘ä»–äººå­¦ä¹ ï¼Œå®ç°è‡ªæˆ‘ä»·å€¼çš„æå‡ã€‚\nå«‰å¦’æƒ…ç»ªæé†’æˆ‘ä»¬ï¼Œæ··æ·†äº†è‡ªå·±ä¸ä»–äººçš„è¾¹ç•Œï¼Œåº”è¯¥è¯•å›¾å»å»ºç«‹è‡ªå·±ç‹¬ç‰¹çš„ä»·å€¼æ„Ÿï¼Œå°†è‡ªå·±ä¸ä»–äººåŒºåˆ«å¼€ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E5%AB%89%E5%A6%92/","summary":"å«‰å¦’æ˜¯ï¼Œä½ æœ‰è€Œæˆ‘æ²¡æœ‰ï¼Œè®©æˆ‘è§‰å¾—è‡ªå·±å¾ˆæ²¡æœ‰ä»·å€¼ã€‚\nè‡ªæˆ‘ä»·å€¼æ„Ÿè¶Šå®Œå–„ï¼Œå«‰å¦’å‡ºç°çš„æ¦‚ç‡è¶Šä½ï¼Œä¹Ÿä¸å€¾å‘äºé€šè¿‡å’Œä»–äººæ¯”è¾ƒï¼Œæ¥å¡«è¡¥è‡ªå·±çš„ä»·å€¼æ„Ÿã€‚å¦‚æœå€¾å‘äºæ€»æ˜¯å’Œåˆ«äººæ¯”è¾ƒï¼Œæœ¬è´¨åŸå› æ˜¯è‡ªæˆ‘æ„è¯†ä¸ä»–äººåˆ†åŒ–ä¸å¤Ÿï¼Œè‡ªæˆ‘è¾¹ç•Œä¸æ¸…æ™°ï¼Œè€Œå¤§éƒ¨åˆ†äººçš„è‡ªæˆ‘æ„è¯†éƒ½ä¸æ˜¯å¾ˆå®Œå–„ï¼Œæˆ‘ä»¬ä¸ä»–äººä¹‹é—´çš„åˆ†åŒ–åšå¾—å¹¶ä¸å¥½ï¼Œå› ä¸ºåˆ†åŒ–ä¸å¤Ÿï¼Œå¯¼è‡´æˆ‘ä»¬ç»å¸¸ä¸ä»–äººå‘ç”Ÿæ··æ·†ã€‚\nå«‰å¦’æƒ…ç»ªå…¶å®æ˜¯è‡ªæˆ‘è¯„å®šç³»ç»Ÿå‡ºäº†é—®é¢˜ï¼Œå¯¹è‡ªå·±æ²¡æœ‰å®¢è§‚çš„è®¤è¯†ï¼Œä¸èƒ½å‡†ç¡®åœ°æç‚¼å‡ºè‡ªæˆ‘éœ€æ±‚å’Œè‡ªæˆ‘æ„è¯†ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€æ¡è‡ªå·±åšä¿¡çš„è‡ªæˆ‘ä»·å€¼å®ç°çš„é“è·¯ï¼Œæˆ‘ä»¬ä¹Ÿå°±æ— éœ€å«‰å¦’ä»–äººã€‚å«‰å¦’å¯ä»¥å‡åä¸ºç¾¡æ…•å’Œå´‡æ‹œï¼Œè¿™æ˜¯å»ºè®¾æ€§çš„ç§¯æçš„è½¬åŒ–ã€‚é€šè¿‡ç¾¡æ…•å’Œå´‡æ‹œä»–äººï¼Œä¿ƒä½¿æˆ‘ä»¬å‘ä»–äººå­¦ä¹ ï¼Œå®ç°è‡ªæˆ‘ä»·å€¼çš„æå‡ã€‚\nå«‰å¦’æƒ…ç»ªæé†’æˆ‘ä»¬ï¼Œæ··æ·†äº†è‡ªå·±ä¸ä»–äººçš„è¾¹ç•Œï¼Œåº”è¯¥è¯•å›¾å»å»ºç«‹è‡ªå·±ç‹¬ç‰¹çš„ä»·å€¼æ„Ÿï¼Œå°†è‡ªå·±ä¸ä»–äººåŒºåˆ«å¼€ã€‚","title":"å«‰å¦’"},{"content":"ä¸€ç§å…·æœ‰å¼ºçƒˆåˆºæ¿€æ€§çš„æƒ…ç»ªï¼Œç”±åˆºæ¿€äº‹ä»¶å¼•å‘äº†å¿ƒç†ä¸Šæåº¦çš„æŒ«æŠ˜æ„Ÿï¼Œä½“ç°åœ¨ä»·å€¼æ„Ÿå’Œå®‰å…¨æ„Ÿéƒ½ä¸§å¤±äº†ï¼Œå¼•å‘äº†å¼ºçƒˆçš„ä¸æ»¡ï¼Œè¿›è€Œè®©äººçˆ†å‘å‡ºåæŠ—ä»–äººçš„æœ¬èƒ½ååº”ã€‚ï¼ˆæœ‰ä¸€å¥è¯ï¼Œæ„¤æ€’çš„èƒŒåæ˜¯è™šå¼±ã€‚ï¼‰\næ„¤æ€’ä¼šè®©äººæš‚æ—¶å¤±å»ç†æ™ºã€‚\næ„¤æ€’æƒ…ç»ªè¡¨ç°ä¸ºï¼šå¼ºçƒˆçš„å¯¹å¤–æ”»å‡»æ€§ã€ç ´åæ€§ã€ä¼´éšæœ‰è‚¢ä½“è¯­è¨€ï¼Œè¡Œä¸ºçªç„¶å¤±æ§ï¼Œç¬é—´å¤±å»ç†æ™ºï¼Œæœ‰æ—¶è¿˜æœ‰å¯¹å†…çš„æ”»å‡»æ€§ã€‚æ„¤æ€’çš„å¯¹å†…æ”»å‡»å¯ä»¥ç†è§£ä¸ºè‡ªæˆ‘ä¼¤å®³ï¼Œæ˜¯æŠŠå¯¹å¤–çš„æ„¤æ€’è½¬åŒ–ä¸ºå¯¹è‡ªå·±çš„æ„¤æ€’ï¼Œé€šè¿‡è‡ªæˆ‘æ”»å‡»è‡ªæˆ‘ä¼¤å®³æ¥è¾¾åˆ°ä¼¤å®³å¯¹æ–¹çš„æ•ˆæœã€‚\næ„¤æ€’çš„æ ¸å¿ƒæ˜¯ã€Œææƒ§æƒ…ç»ªçš„è”“å»¶ã€ï¼Œæ„å›¾ç”¨ä¸€ç§è½¬å˜çˆ†å‘çš„æ–¹å¼æ¥é‡Šæ”¾ææƒ§æƒ…ç»ªï¼Œå‡ºäºå¯¹å®‰å…¨æ„Ÿè¢«ä¼¤å®³çš„ä¿æŠ¤ã€‚\næ„¤æ€’æƒ…ç»ªå‘Šè¯‰æˆ‘ä»¬ï¼šé¢å¯¹å½“å‰çš„é—®é¢˜çš„åŠ›é‡æ˜¯ä¸è¶³çš„ã€‚æˆ‘ä»¬çš„åŠ›é‡ä¸è¶³ä»¥æ”¯æ’‘æˆ‘ä»¬çš„è‡ªå°Šå’Œè‡ªä¿¡ï¼Œéœ€è¦è°ƒåŠ¨ä½“å†…æ›´å¤§çš„åŠ›é‡æ¥åº”å¯¹é—®é¢˜ã€‚\n æ˜“æ¿€æƒ¹çŠ¶æ€ï¼š äººåœ¨çˆ†å‘å‰çš„çŠ¶æ€ï¼Œè¡¨ç°æ˜¯ä¸€ç‚¹å°äº‹å°±æƒ…ç»ªæ¿€åŠ¨äº†ï¼Œæç¤ºçš„ä¿¡å·æ˜¯ï¼Œä½ çš„æƒ…ç»ªå®¹é‡å·²ç»æ»¡äº†ï¼Œæ€¥éœ€é‡Šæ”¾ä¸€äº›æƒ…ç»ªï¼Œå¹¶ä¸”å°½é‡ä¸è¦å†å—åˆ°åˆºæ¿€ã€‚æƒ…ç»ªçˆ†å‘ä¹Ÿæ˜¯ä¸€ç§æƒ…ç»ªé‡Šæ”¾çš„æ–¹å¼ï¼Œä½†æ€ä¼¤åŠ›æœ‰ç‚¹å¤§ï¼Œä¸æ˜¯æœ€å¥½çš„æ–¹å¼ã€‚æ£€è§†ä¸€ä¸‹è‡ªå·±å†…åœ¨çš„æƒ…ç»ªéƒ½æœ‰ä»€ä¹ˆï¼Œç„¶åä¸€ä¸€å°†å…¶ç”¨æ­£å¸¸çš„æ¸ é“ã€æ€ä¼¤åŠ›å°ä¸€ç‚¹çš„æ–¹å¼æ’é£æ‰ã€‚\n æå‰è§‰å¯Ÿè‡ªå·±çš„æƒ…ç»ªä¸´ç•Œç‚¹ï¼Œå½“è¾¾åˆ°æ˜“æ¿€æƒ¹çŠ¶æ€ä¹‹åè¿…é€Ÿå¯»æ‰¾åŠæ³•è§£å†³ï¼Œä¸è®©è‡ªå·±å¤±å»ç†æ™ºåœ°çˆ†å‘ã€‚å½“ç„¶ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯å†æå‰ä¸€ç‚¹ï¼Œä¸è¦è®©è‡ªå·±å‘å±•åˆ°æ˜“æ¿€æƒ¹çŠ¶æ€ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E6%84%A4%E6%80%92/","summary":"ä¸€ç§å…·æœ‰å¼ºçƒˆåˆºæ¿€æ€§çš„æƒ…ç»ªï¼Œç”±åˆºæ¿€äº‹ä»¶å¼•å‘äº†å¿ƒç†ä¸Šæåº¦çš„æŒ«æŠ˜æ„Ÿï¼Œä½“ç°åœ¨ä»·å€¼æ„Ÿå’Œå®‰å…¨æ„Ÿéƒ½ä¸§å¤±äº†ï¼Œå¼•å‘äº†å¼ºçƒˆçš„ä¸æ»¡ï¼Œè¿›è€Œè®©äººçˆ†å‘å‡ºåæŠ—ä»–äººçš„æœ¬èƒ½ååº”ã€‚ï¼ˆæœ‰ä¸€å¥è¯ï¼Œæ„¤æ€’çš„èƒŒåæ˜¯è™šå¼±ã€‚ï¼‰\næ„¤æ€’ä¼šè®©äººæš‚æ—¶å¤±å»ç†æ™ºã€‚\næ„¤æ€’æƒ…ç»ªè¡¨ç°ä¸ºï¼šå¼ºçƒˆçš„å¯¹å¤–æ”»å‡»æ€§ã€ç ´åæ€§ã€ä¼´éšæœ‰è‚¢ä½“è¯­è¨€ï¼Œè¡Œä¸ºçªç„¶å¤±æ§ï¼Œç¬é—´å¤±å»ç†æ™ºï¼Œæœ‰æ—¶è¿˜æœ‰å¯¹å†…çš„æ”»å‡»æ€§ã€‚æ„¤æ€’çš„å¯¹å†…æ”»å‡»å¯ä»¥ç†è§£ä¸ºè‡ªæˆ‘ä¼¤å®³ï¼Œæ˜¯æŠŠå¯¹å¤–çš„æ„¤æ€’è½¬åŒ–ä¸ºå¯¹è‡ªå·±çš„æ„¤æ€’ï¼Œé€šè¿‡è‡ªæˆ‘æ”»å‡»è‡ªæˆ‘ä¼¤å®³æ¥è¾¾åˆ°ä¼¤å®³å¯¹æ–¹çš„æ•ˆæœã€‚\næ„¤æ€’çš„æ ¸å¿ƒæ˜¯ã€Œææƒ§æƒ…ç»ªçš„è”“å»¶ã€ï¼Œæ„å›¾ç”¨ä¸€ç§è½¬å˜çˆ†å‘çš„æ–¹å¼æ¥é‡Šæ”¾ææƒ§æƒ…ç»ªï¼Œå‡ºäºå¯¹å®‰å…¨æ„Ÿè¢«ä¼¤å®³çš„ä¿æŠ¤ã€‚\næ„¤æ€’æƒ…ç»ªå‘Šè¯‰æˆ‘ä»¬ï¼šé¢å¯¹å½“å‰çš„é—®é¢˜çš„åŠ›é‡æ˜¯ä¸è¶³çš„ã€‚æˆ‘ä»¬çš„åŠ›é‡ä¸è¶³ä»¥æ”¯æ’‘æˆ‘ä»¬çš„è‡ªå°Šå’Œè‡ªä¿¡ï¼Œéœ€è¦è°ƒåŠ¨ä½“å†…æ›´å¤§çš„åŠ›é‡æ¥åº”å¯¹é—®é¢˜ã€‚\n æ˜“æ¿€æƒ¹çŠ¶æ€ï¼š äººåœ¨çˆ†å‘å‰çš„çŠ¶æ€ï¼Œè¡¨ç°æ˜¯ä¸€ç‚¹å°äº‹å°±æƒ…ç»ªæ¿€åŠ¨äº†ï¼Œæç¤ºçš„ä¿¡å·æ˜¯ï¼Œä½ çš„æƒ…ç»ªå®¹é‡å·²ç»æ»¡äº†ï¼Œæ€¥éœ€é‡Šæ”¾ä¸€äº›æƒ…ç»ªï¼Œå¹¶ä¸”å°½é‡ä¸è¦å†å—åˆ°åˆºæ¿€ã€‚æƒ…ç»ªçˆ†å‘ä¹Ÿæ˜¯ä¸€ç§æƒ…ç»ªé‡Šæ”¾çš„æ–¹å¼ï¼Œä½†æ€ä¼¤åŠ›æœ‰ç‚¹å¤§ï¼Œä¸æ˜¯æœ€å¥½çš„æ–¹å¼ã€‚æ£€è§†ä¸€ä¸‹è‡ªå·±å†…åœ¨çš„æƒ…ç»ªéƒ½æœ‰ä»€ä¹ˆï¼Œç„¶åä¸€ä¸€å°†å…¶ç”¨æ­£å¸¸çš„æ¸ é“ã€æ€ä¼¤åŠ›å°ä¸€ç‚¹çš„æ–¹å¼æ’é£æ‰ã€‚\n æå‰è§‰å¯Ÿè‡ªå·±çš„æƒ…ç»ªä¸´ç•Œç‚¹ï¼Œå½“è¾¾åˆ°æ˜“æ¿€æƒ¹çŠ¶æ€ä¹‹åè¿…é€Ÿå¯»æ‰¾åŠæ³•è§£å†³ï¼Œä¸è®©è‡ªå·±å¤±å»ç†æ™ºåœ°çˆ†å‘ã€‚å½“ç„¶ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯å†æå‰ä¸€ç‚¹ï¼Œä¸è¦è®©è‡ªå·±å‘å±•åˆ°æ˜“æ¿€æƒ¹çŠ¶æ€ã€‚","title":"æ„¤æ€’"},{"content":" ææƒ§çš„æœ¬è´¨æ˜¯è‡ªæˆ‘å®‰å…¨æ„Ÿå—åˆ°äº†å¨èƒï¼Œè€Œç†æ€§è„‘æ— æ³•è§£å†³è¿™ç§å¨èƒï¼Œäºæ˜¯ä»£ä¹‹ä»¥æƒ…ç»ªçš„æ–¹æ³•æ¥åº”å¯¹ã€‚\n ææƒ§çš„æ ¹æºæ˜¯äººçš„å¤±ç­–æˆ–å¤±èƒ½ï¼Œäººåœ¨é¢å¯¹ä¸€ç§çŠ¶å†µæ—¶å¤±å»äº†åº”å¯¹çš„ç­–ç•¥å’Œèƒ½åŠ›ï¼Œè¿™ç§å¤±ç­–å’Œå¤±èƒ½è®©äººçš„ç„¦è™‘æƒ…ç»ªæ— æ³•åŒ–è§£ï¼Œè¿›è€Œæ¼”å˜æˆæˆ–é€ƒé¿æˆ–æ”»å‡»çš„è¡Œä¸ºï¼ˆé€ƒé¿ï¼Œä¹Ÿæ˜¯ä¸€ç§â€œæ”»å‡»â€ï¼‰ã€‚é€šè¿‡æ”»å‡»ï¼Œäººä»¬èƒ½å¤Ÿè¥é€ ä¸€ç§è‡†æƒ³ä¸­å¼ºå¤§çš„è‡ªå·±æ¥è·å¾—è‡ªå·±å†…å¿ƒçš„å®‰å…¨æ„Ÿã€‚ï¼ˆæ­¤å¤„@ç»å¸¸å‘è„¾æ°”çš„åŒå­¦ï¼Œè¯¥åšè§‰å¯Ÿå’Œåæ€äº†ï¼‰\nææƒ§å¸¦ç»™æˆ‘ä»¬çš„ä¿¡æ¯æ˜¯ï¼Œä½ å½“å‰è§£å†³é—®é¢˜çš„èµ„æºã€åŠ›é‡æˆ–ç­–ç•¥æ˜¯ä¸å¤Ÿçš„ï¼Œä½ éœ€è¦ç»„ç»‡èµ„æºï¼Œè°ƒæ•´ç­–ç•¥ã€è°ƒåŠ¨åŠ›é‡æ¥é‡æ–°è§£å†³é—®é¢˜ã€‚\næ‰¿è®¤è‡ªå·±çš„å®³æ€•å’Œéœ€è¦å¸®åŠ©ï¼Œå…¶å®æ˜¯ä¸€ç§å¼ºå¤§çš„è¡¨ç°ï¼Œä¸ä¸¢äººã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E6%81%90%E6%83%A7/","summary":"ææƒ§çš„æœ¬è´¨æ˜¯è‡ªæˆ‘å®‰å…¨æ„Ÿå—åˆ°äº†å¨èƒï¼Œè€Œç†æ€§è„‘æ— æ³•è§£å†³è¿™ç§å¨èƒï¼Œäºæ˜¯ä»£ä¹‹ä»¥æƒ…ç»ªçš„æ–¹æ³•æ¥åº”å¯¹ã€‚\n ææƒ§çš„æ ¹æºæ˜¯äººçš„å¤±ç­–æˆ–å¤±èƒ½ï¼Œäººåœ¨é¢å¯¹ä¸€ç§çŠ¶å†µæ—¶å¤±å»äº†åº”å¯¹çš„ç­–ç•¥å’Œèƒ½åŠ›ï¼Œè¿™ç§å¤±ç­–å’Œå¤±èƒ½è®©äººçš„ç„¦è™‘æƒ…ç»ªæ— æ³•åŒ–è§£ï¼Œè¿›è€Œæ¼”å˜æˆæˆ–é€ƒé¿æˆ–æ”»å‡»çš„è¡Œä¸ºï¼ˆé€ƒé¿ï¼Œä¹Ÿæ˜¯ä¸€ç§â€œæ”»å‡»â€ï¼‰ã€‚é€šè¿‡æ”»å‡»ï¼Œäººä»¬èƒ½å¤Ÿè¥é€ ä¸€ç§è‡†æƒ³ä¸­å¼ºå¤§çš„è‡ªå·±æ¥è·å¾—è‡ªå·±å†…å¿ƒçš„å®‰å…¨æ„Ÿã€‚ï¼ˆæ­¤å¤„@ç»å¸¸å‘è„¾æ°”çš„åŒå­¦ï¼Œè¯¥åšè§‰å¯Ÿå’Œåæ€äº†ï¼‰\nææƒ§å¸¦ç»™æˆ‘ä»¬çš„ä¿¡æ¯æ˜¯ï¼Œä½ å½“å‰è§£å†³é—®é¢˜çš„èµ„æºã€åŠ›é‡æˆ–ç­–ç•¥æ˜¯ä¸å¤Ÿçš„ï¼Œä½ éœ€è¦ç»„ç»‡èµ„æºï¼Œè°ƒæ•´ç­–ç•¥ã€è°ƒåŠ¨åŠ›é‡æ¥é‡æ–°è§£å†³é—®é¢˜ã€‚\næ‰¿è®¤è‡ªå·±çš„å®³æ€•å’Œéœ€è¦å¸®åŠ©ï¼Œå…¶å®æ˜¯ä¸€ç§å¼ºå¤§çš„è¡¨ç°ï¼Œä¸ä¸¢äººã€‚","title":"ææƒ§"},{"content":" æŠ‘éƒæƒ…ç»ªæ˜¯åœ¨å¯¹ç°å®æ¯«æ— å¯¹ç­–çš„æ—¶å€™å‡ºç°çš„ï¼Œå®ƒåœ¨æé†’æˆ‘ä»¬å½“å‰è§£å†³é—®é¢˜çš„ç­–ç•¥æ˜¯æ— æ•ˆçš„ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾å¦å¤–ä¸€ç§æœ‰æ•ˆçš„åº”å¯¹ç­–ç•¥ã€‚\n æŠ‘éƒäº§ç”Ÿçš„æ¨¡å¼æ˜¯ï¼Œæˆ‘ä»¬ä»˜å‡ºåŠªåŠ›äº†â¡ï¸å¯¹äº‹æƒ…çš„æœŸå¾…æ²¡æœ‰å¾—åˆ°æ»¡è¶³ã€äº§ç”Ÿå¤±è½â¡ï¸å¤±è½æ— æ³•æ’é£ï¼Œäº§ç”Ÿä¸€ç§æ— åŠ©â¡ï¸æ— åŠ©ç»™è‡ªå·±å†…å¿ƒå¸¦æ¥å†²å‡»ï¼Œäº§ç”Ÿè‡ªæˆ‘æ€€ç–‘å’Œè‡ªæˆ‘æŠ›å¼ƒâ¡ï¸æœ€ç»ˆè®¤å®šè‡ªèº«æ²¡ä»·å€¼ï¼ŒåŠªåŠ›æ²¡æœ‰ä»·å€¼ï¼Œäº‹æƒ…æ²¡æœ‰ä»·å€¼ï¼Œä¸€åˆ‡éƒ½æ²¡æœ‰ä»·å€¼ï¼Œé™·å…¥æŠ‘éƒã€‚\næŠ‘éƒçš„æ ¸å¿ƒæ˜¯ä»·å€¼æ„Ÿå’Œæ„ä¹‰æ„Ÿçš„ç¼ºå¤±ã€‚\næŠ‘éƒçš„è¡¨ç°ï¼šè®¤çŸ¥æ¶ˆæï¼ˆâ€œè¿™éƒ½ä»€ä¹ˆç©æ„å„¿â€ï¼‰ï¼Œæƒ…ç»ªä½è½ï¼ˆâ€œæ²¡æ„æ€ï¼Œä¸€åˆ‡éƒ½æ²¡æ„æ€â€ï¼‰ï¼Œæ„å¿—åŠ›å‡é€€ï¼Œå¯¹ä»»åŠ¡çš„å¯åŠ¨å›°éš¾ï¼ˆæ€ç»´è¿Ÿé’ï¼‰ï¼Œè®°å¿†åŠ›å’Œåˆ¤æ–­åŠ›å‡é€€ï¼Œè‡ªæˆ‘éš”ç¦»ã€‚\næŠ‘éƒä¼ é€’çš„ä¿¡æ¯ï¼šä½ å½“å‰æ­£é¢å¯¹ç€ä¸¥é‡çš„é—®é¢˜ï¼Œè€Œä¸”ï¼Œä½ è§£å†³é—®é¢˜çš„æ–¹æ³•æ˜¯æ— æ•ˆçš„âŒã€‚ä½ å¿…é¡»æ›´æ¢è§£å†³é—®é¢˜çš„ç­–ç•¥ï¼Œå°¤å…¶æ˜¯æ­£è§†é—®é¢˜çš„å­˜åœ¨ï¼Œå¹¶è¿«ä½¿è‡ªå·±æ›´åŠ çµæ´»åœ°é¢å¯¹é—®é¢˜ã€‚ï¼ˆé€šå¸¸å›ºæ‰§çš„äººæ›´å®¹æ˜“æŠ‘éƒï¼Œè€Œæ€ç»´æ¯”è¾ƒçµæ´»çš„äººï¼Œå³ä½¿æŠ‘éƒäº†ï¼Œä¹Ÿå®¹æ˜“èµ°å‡ºæ¥ã€‚è®©è‡ªå·±ä¸å†é‚£ä¹ˆâ€œåˆšâ€ï¼Œå¼¹æ€§ä¸€ç‚¹ã€‚ï¼‰\næŠ‘éƒçš„æ˜“æ„Ÿæ€§å’Œè‡ªæ‹æ°´å¹³ä¹Ÿæœ‰ä¸€å®šçš„å…³ç³»ï¼Œå¦‚æœæˆ‘ä»¬æ”¾ä½ä¸€ç‚¹â€œè‡ªæ‹æ°´å¹³â€ï¼Œå°±æ›´ä¸å®¹æ˜“è¢«æŒ«è´¥ï¼Œä¿æŒå¯¹ä¸–ç•Œã€å¯¹è‡ªæˆ‘æ¸…æ™°å‡†ç¡®çš„è¯„ä¼°å’Œè®¤è¯†ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬ä¸é‚£ä¹ˆå®¹æ˜“æŠ‘éƒã€‚ä»ç²¾ç¥åˆ†æè§’åº¦ï¼Œâ€œæŠ‘éƒâ€å’Œâ€œè¶…æˆ‘â€å¤ªè¿‡äºå¼ºå¤§æœ‰å…³ï¼Œä¸€ä¸ªå¼ºå¤§çš„â€œè¶…æˆ‘â€æ€»åœ¨å‘Šè¯‰æˆ‘ä»¬â€œä½ åº”è¯¥æ€æ ·æ€æ ·â€ï¼Œä¸åœåœ°å‘å†…æ”»å‡»ï¼Œæ‰€ä»¥ï¼Œå¦‚æœç°åœ¨æœ‰æ„Ÿè§‰åˆ°æŠ‘éƒçš„æœ‹å‹ï¼Œå¯¹è‡ªå·±å¥½ä¸€äº›ï¼Œåœæ­¢è¯„ä»·å’Œæ”»å‡»è‡ªå·±ã€‚åŒæ—¶ï¼Œå°è¯•ç”¨â€œå¤šå…ƒä»·å€¼ä½“ç³»â€æ¥çœ‹ä¸€çœ‹è‡ªå·±ï¼Œæˆ‘ä»¬çš„ä»·å€¼ä¸ä»…ä»…ä½“ç°åœ¨ä¸€ä»¶äº‹æƒ…ä¸Šï¼Œä¸è¦è¿‡åº¦æ”¾å¤§ä¸€ä»¶äº‹æƒ…å¯¹äºæˆ‘ä»¬çš„ä»·å€¼ã€‚\nå¦‚æœä½ è§‰å¾—æŠ‘éƒè®©ä½ å¾ˆéš¾å—äº†ï¼Œè¯·åŠæ—¶å°±åŒ»æ£€æŸ¥ã€‚\nå¯¹äº†ï¼Œäººå¦‚æœä¸€ç›´åœ¨å‘æŒ¥â€œåŠŸèƒ½â€è€Œä¸å¾—ä¼‘æ¯ï¼Œä¹Ÿä¼šå¼•å‘æŠ‘éƒï¼Œæ‰€ä»¥ä¸€å®šè¦è®©è‡ªå·±æœ‰ä»€ä¹ˆéƒ½ä¸å›¾ã€ä¸å‘æŒ¥åŠŸèƒ½ã€è®©è‡ªå·±ä½œä¸ºä¸€ä¸ªäººæ¢å¤çš„æ—¶é—´ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E6%8A%91%E9%83%81/","summary":"æŠ‘éƒæƒ…ç»ªæ˜¯åœ¨å¯¹ç°å®æ¯«æ— å¯¹ç­–çš„æ—¶å€™å‡ºç°çš„ï¼Œå®ƒåœ¨æé†’æˆ‘ä»¬å½“å‰è§£å†³é—®é¢˜çš„ç­–ç•¥æ˜¯æ— æ•ˆçš„ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾å¦å¤–ä¸€ç§æœ‰æ•ˆçš„åº”å¯¹ç­–ç•¥ã€‚\n æŠ‘éƒäº§ç”Ÿçš„æ¨¡å¼æ˜¯ï¼Œæˆ‘ä»¬ä»˜å‡ºåŠªåŠ›äº†â¡ï¸å¯¹äº‹æƒ…çš„æœŸå¾…æ²¡æœ‰å¾—åˆ°æ»¡è¶³ã€äº§ç”Ÿå¤±è½â¡ï¸å¤±è½æ— æ³•æ’é£ï¼Œäº§ç”Ÿä¸€ç§æ— åŠ©â¡ï¸æ— åŠ©ç»™è‡ªå·±å†…å¿ƒå¸¦æ¥å†²å‡»ï¼Œäº§ç”Ÿè‡ªæˆ‘æ€€ç–‘å’Œè‡ªæˆ‘æŠ›å¼ƒâ¡ï¸æœ€ç»ˆè®¤å®šè‡ªèº«æ²¡ä»·å€¼ï¼ŒåŠªåŠ›æ²¡æœ‰ä»·å€¼ï¼Œäº‹æƒ…æ²¡æœ‰ä»·å€¼ï¼Œä¸€åˆ‡éƒ½æ²¡æœ‰ä»·å€¼ï¼Œé™·å…¥æŠ‘éƒã€‚\næŠ‘éƒçš„æ ¸å¿ƒæ˜¯ä»·å€¼æ„Ÿå’Œæ„ä¹‰æ„Ÿçš„ç¼ºå¤±ã€‚\næŠ‘éƒçš„è¡¨ç°ï¼šè®¤çŸ¥æ¶ˆæï¼ˆâ€œè¿™éƒ½ä»€ä¹ˆç©æ„å„¿â€ï¼‰ï¼Œæƒ…ç»ªä½è½ï¼ˆâ€œæ²¡æ„æ€ï¼Œä¸€åˆ‡éƒ½æ²¡æ„æ€â€ï¼‰ï¼Œæ„å¿—åŠ›å‡é€€ï¼Œå¯¹ä»»åŠ¡çš„å¯åŠ¨å›°éš¾ï¼ˆæ€ç»´è¿Ÿé’ï¼‰ï¼Œè®°å¿†åŠ›å’Œåˆ¤æ–­åŠ›å‡é€€ï¼Œè‡ªæˆ‘éš”ç¦»ã€‚\næŠ‘éƒä¼ é€’çš„ä¿¡æ¯ï¼šä½ å½“å‰æ­£é¢å¯¹ç€ä¸¥é‡çš„é—®é¢˜ï¼Œè€Œä¸”ï¼Œä½ è§£å†³é—®é¢˜çš„æ–¹æ³•æ˜¯æ— æ•ˆçš„âŒã€‚ä½ å¿…é¡»æ›´æ¢è§£å†³é—®é¢˜çš„ç­–ç•¥ï¼Œå°¤å…¶æ˜¯æ­£è§†é—®é¢˜çš„å­˜åœ¨ï¼Œå¹¶è¿«ä½¿è‡ªå·±æ›´åŠ çµæ´»åœ°é¢å¯¹é—®é¢˜ã€‚ï¼ˆé€šå¸¸å›ºæ‰§çš„äººæ›´å®¹æ˜“æŠ‘éƒï¼Œè€Œæ€ç»´æ¯”è¾ƒçµæ´»çš„äººï¼Œå³ä½¿æŠ‘éƒäº†ï¼Œä¹Ÿå®¹æ˜“èµ°å‡ºæ¥ã€‚è®©è‡ªå·±ä¸å†é‚£ä¹ˆâ€œåˆšâ€ï¼Œå¼¹æ€§ä¸€ç‚¹ã€‚ï¼‰\næŠ‘éƒçš„æ˜“æ„Ÿæ€§å’Œè‡ªæ‹æ°´å¹³ä¹Ÿæœ‰ä¸€å®šçš„å…³ç³»ï¼Œå¦‚æœæˆ‘ä»¬æ”¾ä½ä¸€ç‚¹â€œè‡ªæ‹æ°´å¹³â€ï¼Œå°±æ›´ä¸å®¹æ˜“è¢«æŒ«è´¥ï¼Œä¿æŒå¯¹ä¸–ç•Œã€å¯¹è‡ªæˆ‘æ¸…æ™°å‡†ç¡®çš„è¯„ä¼°å’Œè®¤è¯†ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬ä¸é‚£ä¹ˆå®¹æ˜“æŠ‘éƒã€‚ä»ç²¾ç¥åˆ†æè§’åº¦ï¼Œâ€œæŠ‘éƒâ€å’Œâ€œè¶…æˆ‘â€å¤ªè¿‡äºå¼ºå¤§æœ‰å…³ï¼Œä¸€ä¸ªå¼ºå¤§çš„â€œè¶…æˆ‘â€æ€»åœ¨å‘Šè¯‰æˆ‘ä»¬â€œä½ åº”è¯¥æ€æ ·æ€æ ·â€ï¼Œä¸åœåœ°å‘å†…æ”»å‡»ï¼Œæ‰€ä»¥ï¼Œå¦‚æœç°åœ¨æœ‰æ„Ÿè§‰åˆ°æŠ‘éƒçš„æœ‹å‹ï¼Œå¯¹è‡ªå·±å¥½ä¸€äº›ï¼Œåœæ­¢è¯„ä»·å’Œæ”»å‡»è‡ªå·±ã€‚åŒæ—¶ï¼Œå°è¯•ç”¨â€œå¤šå…ƒä»·å€¼ä½“ç³»â€æ¥çœ‹ä¸€çœ‹è‡ªå·±ï¼Œæˆ‘ä»¬çš„ä»·å€¼ä¸ä»…ä»…ä½“ç°åœ¨ä¸€ä»¶äº‹æƒ…ä¸Šï¼Œä¸è¦è¿‡åº¦æ”¾å¤§ä¸€ä»¶äº‹æƒ…å¯¹äºæˆ‘ä»¬çš„ä»·å€¼ã€‚\nå¦‚æœä½ è§‰å¾—æŠ‘éƒè®©ä½ å¾ˆéš¾å—äº†ï¼Œè¯·åŠæ—¶å°±åŒ»æ£€æŸ¥ã€‚\nå¯¹äº†ï¼Œäººå¦‚æœä¸€ç›´åœ¨å‘æŒ¥â€œåŠŸèƒ½â€è€Œä¸å¾—ä¼‘æ¯ï¼Œä¹Ÿä¼šå¼•å‘æŠ‘éƒï¼Œæ‰€ä»¥ä¸€å®šè¦è®©è‡ªå·±æœ‰ä»€ä¹ˆéƒ½ä¸å›¾ã€ä¸å‘æŒ¥åŠŸèƒ½ã€è®©è‡ªå·±ä½œä¸ºä¸€ä¸ªäººæ¢å¤çš„æ—¶é—´ã€‚","title":"æŠ‘éƒ"},{"content":" ç„¦è™‘æ¥è‡ªä¸ªä½“åŠªåŠ›è¿½æ±‚ç”Ÿå­˜ï¼Œä»¥åŠç»´æŒå’Œè‚¯å®šè‡ªæˆ‘å­˜åœ¨ã€å®‰å…¨æ„Ÿå’Œä»·å€¼æ„Ÿçš„è¿‡ç¨‹ï¼Œç„¦è™‘æ„Ÿæ˜¯äººç”Ÿä¸­ä¸å¯é¿å…çš„é—®é¢˜ã€‚\n ç„¦è™‘æ˜¯æˆ‘ä»¬çš„å¤§è„‘å¯¹æŠ—æ½œåœ¨å±æœºçš„ç§¯æè¡Œä¸ºï¼Œæ˜¯ä¸€ç§è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå½“ä½ æ„Ÿè§‰åˆ°è‡ªæˆ‘çš„ä»·å€¼å—åˆ°è´¨ç–‘ï¼Œæˆ–è€…æ„Ÿè§‰åˆ°ä¸å®‰æ—¶å¤§è„‘å°±ä¼šå¯åŠ¨è¿™ä¸ªæœºåˆ¶ï¼Œè®©æˆ‘ä»¬è¡¨ç°å‡ºç„¦è™‘ä¸å®‰ã€‚\nç„¦è™‘æƒ…ç»ªå¯ä»¥åˆ†ä¸º 3 ç±»ï¼šå­˜åœ¨æ€§ç„¦è™‘ï¼Œç›®æ ‡ç¼ºå¤±çš„ç„¦è™‘ï¼Œæœ‰æ˜ç¡®æŒ‡å‘çš„ç„¦è™‘ã€‚\n å­˜åœ¨æ€§ç„¦è™‘ï¼šæˆ‘ä»¬æ¯ä¸ªäººéƒ½æœ‰é“¾æ¥åˆ«äººã€å½±å“åˆ«äººã€ä¿æŒå½±å“åŠ›çš„éœ€æ±‚ï¼ˆç²¾ç¥åˆ†æä¸­æœ‰ä¸€å¥è¯ï¼Œè‡ªæˆ‘æ˜¯å­˜åœ¨äºå…³ç³»ä¹‹ä¸­çš„ï¼‰ï¼Œå¦‚æœè¿™äº›éœ€æ±‚å¾—ä¸åˆ°æ»¡è¶³ï¼Œæˆ‘ä»¬ä¸ªäººå­˜åœ¨çš„ä»·å€¼å°±ä¼šè¢«å‰Šå¼±ï¼ˆæ„Ÿå—ä¸åˆ°è‡ªå·±çš„å­˜åœ¨ï¼‰ï¼Œå°±ä¼šäº§ç”Ÿç„¦è™‘ï¼Œä¾‹å¦‚å­¤ç‹¬ç„¦è™‘ï¼Œä»·å€¼ç„¦è™‘ï¼Œåªè¦æ˜¯äººï¼Œæˆ–å¤šæˆ–å°‘éƒ½æœ‰å­˜åœ¨æ€§ç„¦è™‘ï¼Œå­˜åœ¨æ€§ç„¦è™‘æ— æ³•æ ¹é™¤ï¼Œåªè¦ä¸æ˜¯ç‰¹åˆ«é¡½å›ºåœ°æŒ¥ä¹‹ä¸å»ï¼Œä¹Ÿä¸ä¼šå¯¹äººé€ æˆå¤šå¤§ä¼¤å®³ã€‚  å¦‚æœä½ è§‰å¾—ä½ ç°åœ¨æœ‰æ¯”è¾ƒä¸¥é‡çš„å­˜åœ¨æ€§ç„¦è™‘ï¼Œå¯èƒ½èƒ½ç¼“è§£çš„æ–¹å¼æ˜¯åšä¸€äº›èƒ½è®©ä½ æ„Ÿå—åˆ°è‡ªå·±å­˜åœ¨çš„äº‹æƒ…ï¼Œe.g. å»çˆ±ï¼Œå»å·¥ä½œï¼Œå»å¯»æ‰¾ä½ çš„ç›®æ ‡ï¼Œå»å‘å±•ä½ çš„çˆ±å¥½ï¼Œå»å¤§è‡ªç„¶é‡Œå¾…ç€ï¼Œæ„Ÿå—é˜³å…‰ç…§åœ¨ä½ èº«ä¸Šï¼Œå»å†™ä½œï¼Œå»å’Œåˆ«äººé—²èŠï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®­ç»ƒè‡ªå·±ä»€ä¹ˆéƒ½ä¸å¹²ï¼Œå°±å¥½å¥½åœ°å’Œè‡ªå·±å¾…ç€ã€‚\nç›®æ ‡ç¼ºå¤±çš„ç„¦è™‘ï¼šä¸çŸ¥é“è‡ªå·±å› ä¸ºä»€ä¹ˆè€Œç„¦è™‘ï¼Œå¼¥æ¼«æ€§ç„¦è™‘ï¼Œç²¾åŠ›å¾ˆéš¾é›†ä¸­ï¼Œæ„Ÿè§‰èº«å¿ƒç–²æƒ«ï¼Œä¸çŸ¥é“è‡ªå·±æ¯å¤©åº”è¯¥å¹²ä»€ä¹ˆï¼Œç„¦è™‘ä»ä¸€ä¸ªç‚¹ï¼Œä¸€ä¸ªæ—¶é—´æ®µå¼¥æ¼«åˆ°æ•´ä¸ªç”Ÿæ´»ï¼Œè¿™ç§ç„¦è™‘æ˜¯ç›®æ ‡ç¼ºå¤±å¯¼è‡´çš„ã€‚æé†’æˆ‘ä»¬éœ€è¦ä¸ºè‡ªå·±å¯»æ‰¾ä¸€ä¸ªç›®æ ‡ï¼Œå®ƒå°±åƒä¸€ä¸ªä¿¡å·ï¼Œå‘Šè¯‰ä½ â€œä½ å¾—å¹²ç‚¹ä»€ä¹ˆäº†â€ï¼Œå½“ä½ æˆåŠŸæ•æ‰åˆ°è¿™ä¸ªä¿¡å·ï¼Œå¹¶è¯•ç€ç”¨è‡ªå·±çš„æ–¹å¼å»è§£å†³å®ƒä¹‹åï¼Œç„¦è™‘ä¹Ÿä¼šç¼“è§£ã€‚å½“ä½ ä¸ºè‡ªå·±æ‰¾åˆ°ä¸€ä¸ªç›®æ ‡å¹¶çœŸçš„è¸è¸å®å®å»åšä¸€äº›äº‹æƒ…ä¹‹åï¼Œä¼šæ„Ÿåˆ°èº«å¿ƒæ— æ¯”è½»æ¾ã€‚  å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨è™½ç„¶æœ‰çŸ­æœŸè¦åšçš„ç›®æ ‡ï¼Œä½†å¦‚æœè¿™ç§ç›®æ ‡å’Œæˆ‘ä»¬çš„é•¿æœŸç›®æ ‡ä¸åŒ¹é…ï¼Œä¹Ÿä¼šå¼•èµ·ç„¦è™‘ã€‚æ¯”å¦‚ï¼Œæ¯å¤©å·¥ä½œå¿™å¿™ç¢Œç¢Œï¼Œä½†ä¾ç„¶ç„¦è™‘ï¼Œå…¶å®å¯èƒ½åæ˜ å‡ºæˆ‘ä»¬é•¿æœŸç›®æ ‡çš„ç¼ºå¤±ï¼ˆåœ¨æ½œæ„è¯†ä¸­å¯¹æœªæ¥æ²¡æœ‰å®‰å…¨æ„Ÿ\næœ‰æ˜ç¡®æŒ‡å‘çš„ç„¦è™‘ï¼ˆç°å®æ€§ç„¦è™‘ï¼‰ï¼šå› ä¸ºæŸä»¶äº‹æƒ…å¼•èµ·ï¼Œææƒ§äº‹æƒ…å¸¦æ¥çš„åæœï¼Œä¾‹å¦‚è¯¥åšçš„äº‹æƒ…è¿˜æ²¡æœ‰åšï¼Œè€ƒè¯•ç„¦è™‘ï¼ˆå®³æ€•è€ƒç ¸ï¼‰ï¼Œâ€œåŒæœˆç„¦è™‘â€ï¼Œæ¥åˆ°æ–°ç¯å¢ƒçš„ç„¦è™‘ç­‰ã€‚æœ‰æ˜ç¡®æŒ‡å‘çš„ç„¦è™‘å…¶å®æŒ‡å‘çš„æ˜¯ææƒ§ï¼Œå¤§å¤šæ•°ææƒ§æƒ…ç»ªä¹Ÿæ˜¯ä¼´éšç„¦è™‘å‡ºç°çš„ã€‚ç„¦è™‘æ°´å¹³ä¸ç°å®å¨èƒçš„ç¨‹åº¦æˆæ­£æ¯”ã€‚  è§£å†³è¿™ç±»ç„¦è™‘çš„æ–¹æ³•ï¼Œè¦ä¹ˆé€ƒè·‘ï¼Œè¦ä¹ˆæˆ˜æ–—â€”â€”ã€Œé™ä½å¯¹ç›®æ ‡å¯¹è±¡çš„é‡è§†ç¨‹åº¦å’ŒæœŸå¾…ã€å’Œã€Œæå‡è‡ªå·±æŒæ¡ç›®æ ‡çš„èƒ½åŠ›ã€‚ã€è¯´å¤§ç™½è¯ï¼Œè¦ä¹ˆæˆ‘ä»¬ç»è¿‡æƒè¡¡æ€è€ƒä¹‹åï¼Œè®©è‡ªå·±ç¦»å¼€å‹åŠ›æºï¼Œè¦ä¹ˆå’Œå®ƒæˆ˜æ–—ï¼Œå¿ƒç†ä¸Šå‘Šè¯‰è‡ªå·±ï¼Œè¿™ä¸ªäº‹æƒ…æ²¡æœ‰ä½ æƒ³çš„é‚£ä¹ˆé‡è¦/é‚£ä¹ˆç€æ€¥ï¼ŒåŒæ—¶æ‰¾åˆ°æœ‰æ•ˆçš„ç­–ç•¥ï¼Œè®©è‡ªå·±èƒ½å¤Ÿèƒœä»»è¿™ä¸ªäº‹æƒ…ã€‚\n æ€»ç»“ä¸€ä¸‹ï¼Œç„¦è™‘ä½œä¸ºä¸€ç§ä¿¡å·ï¼š\n  å¦‚æœå®ƒä¸æ˜¯ç”±äºå…·ä½“äº‹æƒ…å¼•èµ·çš„ï¼Œåˆ™æé†’æˆ‘ä»¬éœ€è¦ä¸ºè‡ªå·±å¯»æ‰¾ç›®æ ‡åšç‚¹ä»€ä¹ˆäº†ï¼›\n  å¦‚æœæœ‰å…·ä½“åŸå› ï¼Œè¦ä¹ˆé€‰æ‹©è¿œç¦»å‹åŠ›æºï¼Œè¦ä¹ˆé™ä½å¯¹ç„¦è™‘å¯¹è±¡çš„æœŸå¾…ï¼ˆä¾‹å¦‚ï¼Œæ”¾ä½ä¸€ç‚¹å¯¹è´¨é‡çš„è¦æ±‚ã€ç»™å¤šä¸€ç‚¹æ—¶é—´ï¼‰å¹¶æå‡è‡ªå·±æŒæ¡å®ƒçš„èƒ½åŠ›ï¼ˆåˆ†è§£æˆå¯æ‰§è¡Œçš„è¡Œä¸ºå¹¶å»æ‰§è¡Œï¼‰ã€‚\n   ","permalink":"https://zhenfeng-zhu.github.io/post/%E7%84%A6%E8%99%91/","summary":" ç„¦è™‘æ¥è‡ªä¸ªä½“åŠªåŠ›è¿½æ±‚ç”Ÿå­˜ï¼Œä»¥åŠç»´æŒå’Œè‚¯å®šè‡ªæˆ‘å­˜åœ¨ã€å®‰å…¨æ„Ÿå’Œä»·å€¼æ„Ÿçš„è¿‡ç¨‹ï¼Œç„¦è™‘æ„Ÿæ˜¯äººç”Ÿä¸­ä¸å¯é¿å…çš„é—®é¢˜ã€‚\n ç„¦è™‘æ˜¯æˆ‘ä»¬çš„å¤§è„‘å¯¹æŠ—æ½œåœ¨å±æœºçš„ç§¯æè¡Œä¸ºï¼Œæ˜¯ä¸€ç§è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå½“ä½ æ„Ÿè§‰åˆ°è‡ªæˆ‘çš„ä»·å€¼å—åˆ°è´¨ç–‘ï¼Œæˆ–è€…æ„Ÿè§‰åˆ°ä¸å®‰æ—¶å¤§è„‘å°±ä¼šå¯åŠ¨è¿™ä¸ªæœºåˆ¶ï¼Œè®©æˆ‘ä»¬è¡¨ç°å‡ºç„¦è™‘ä¸å®‰ã€‚\nç„¦è™‘æƒ…ç»ªå¯ä»¥åˆ†ä¸º 3 ç±»ï¼šå­˜åœ¨æ€§ç„¦è™‘ï¼Œç›®æ ‡ç¼ºå¤±çš„ç„¦è™‘ï¼Œæœ‰æ˜ç¡®æŒ‡å‘çš„ç„¦è™‘ã€‚\n å­˜åœ¨æ€§ç„¦è™‘ï¼šæˆ‘ä»¬æ¯ä¸ªäººéƒ½æœ‰é“¾æ¥åˆ«äººã€å½±å“åˆ«äººã€ä¿æŒå½±å“åŠ›çš„éœ€æ±‚ï¼ˆç²¾ç¥åˆ†æä¸­æœ‰ä¸€å¥è¯ï¼Œè‡ªæˆ‘æ˜¯å­˜åœ¨äºå…³ç³»ä¹‹ä¸­çš„ï¼‰ï¼Œå¦‚æœè¿™äº›éœ€æ±‚å¾—ä¸åˆ°æ»¡è¶³ï¼Œæˆ‘ä»¬ä¸ªäººå­˜åœ¨çš„ä»·å€¼å°±ä¼šè¢«å‰Šå¼±ï¼ˆæ„Ÿå—ä¸åˆ°è‡ªå·±çš„å­˜åœ¨ï¼‰ï¼Œå°±ä¼šäº§ç”Ÿç„¦è™‘ï¼Œä¾‹å¦‚å­¤ç‹¬ç„¦è™‘ï¼Œä»·å€¼ç„¦è™‘ï¼Œåªè¦æ˜¯äººï¼Œæˆ–å¤šæˆ–å°‘éƒ½æœ‰å­˜åœ¨æ€§ç„¦è™‘ï¼Œå­˜åœ¨æ€§ç„¦è™‘æ— æ³•æ ¹é™¤ï¼Œåªè¦ä¸æ˜¯ç‰¹åˆ«é¡½å›ºåœ°æŒ¥ä¹‹ä¸å»ï¼Œä¹Ÿä¸ä¼šå¯¹äººé€ æˆå¤šå¤§ä¼¤å®³ã€‚  å¦‚æœä½ è§‰å¾—ä½ ç°åœ¨æœ‰æ¯”è¾ƒä¸¥é‡çš„å­˜åœ¨æ€§ç„¦è™‘ï¼Œå¯èƒ½èƒ½ç¼“è§£çš„æ–¹å¼æ˜¯åšä¸€äº›èƒ½è®©ä½ æ„Ÿå—åˆ°è‡ªå·±å­˜åœ¨çš„äº‹æƒ…ï¼Œe.g. å»çˆ±ï¼Œå»å·¥ä½œï¼Œå»å¯»æ‰¾ä½ çš„ç›®æ ‡ï¼Œå»å‘å±•ä½ çš„çˆ±å¥½ï¼Œå»å¤§è‡ªç„¶é‡Œå¾…ç€ï¼Œæ„Ÿå—é˜³å…‰ç…§åœ¨ä½ èº«ä¸Šï¼Œå»å†™ä½œï¼Œå»å’Œåˆ«äººé—²èŠï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®­ç»ƒè‡ªå·±ä»€ä¹ˆéƒ½ä¸å¹²ï¼Œå°±å¥½å¥½åœ°å’Œè‡ªå·±å¾…ç€ã€‚\nç›®æ ‡ç¼ºå¤±çš„ç„¦è™‘ï¼šä¸çŸ¥é“è‡ªå·±å› ä¸ºä»€ä¹ˆè€Œç„¦è™‘ï¼Œå¼¥æ¼«æ€§ç„¦è™‘ï¼Œç²¾åŠ›å¾ˆéš¾é›†ä¸­ï¼Œæ„Ÿè§‰èº«å¿ƒç–²æƒ«ï¼Œä¸çŸ¥é“è‡ªå·±æ¯å¤©åº”è¯¥å¹²ä»€ä¹ˆï¼Œç„¦è™‘ä»ä¸€ä¸ªç‚¹ï¼Œä¸€ä¸ªæ—¶é—´æ®µå¼¥æ¼«åˆ°æ•´ä¸ªç”Ÿæ´»ï¼Œè¿™ç§ç„¦è™‘æ˜¯ç›®æ ‡ç¼ºå¤±å¯¼è‡´çš„ã€‚æé†’æˆ‘ä»¬éœ€è¦ä¸ºè‡ªå·±å¯»æ‰¾ä¸€ä¸ªç›®æ ‡ï¼Œå®ƒå°±åƒä¸€ä¸ªä¿¡å·ï¼Œå‘Šè¯‰ä½ â€œä½ å¾—å¹²ç‚¹ä»€ä¹ˆäº†â€ï¼Œå½“ä½ æˆåŠŸæ•æ‰åˆ°è¿™ä¸ªä¿¡å·ï¼Œå¹¶è¯•ç€ç”¨è‡ªå·±çš„æ–¹å¼å»è§£å†³å®ƒä¹‹åï¼Œç„¦è™‘ä¹Ÿä¼šç¼“è§£ã€‚å½“ä½ ä¸ºè‡ªå·±æ‰¾åˆ°ä¸€ä¸ªç›®æ ‡å¹¶çœŸçš„è¸è¸å®å®å»åšä¸€äº›äº‹æƒ…ä¹‹åï¼Œä¼šæ„Ÿåˆ°èº«å¿ƒæ— æ¯”è½»æ¾ã€‚  å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨è™½ç„¶æœ‰çŸ­æœŸè¦åšçš„ç›®æ ‡ï¼Œä½†å¦‚æœè¿™ç§ç›®æ ‡å’Œæˆ‘ä»¬çš„é•¿æœŸç›®æ ‡ä¸åŒ¹é…ï¼Œä¹Ÿä¼šå¼•èµ·ç„¦è™‘ã€‚æ¯”å¦‚ï¼Œæ¯å¤©å·¥ä½œå¿™å¿™ç¢Œç¢Œï¼Œä½†ä¾ç„¶ç„¦è™‘ï¼Œå…¶å®å¯èƒ½åæ˜ å‡ºæˆ‘ä»¬é•¿æœŸç›®æ ‡çš„ç¼ºå¤±ï¼ˆåœ¨æ½œæ„è¯†ä¸­å¯¹æœªæ¥æ²¡æœ‰å®‰å…¨æ„Ÿ\næœ‰æ˜ç¡®æŒ‡å‘çš„ç„¦è™‘ï¼ˆç°å®æ€§ç„¦è™‘ï¼‰ï¼šå› ä¸ºæŸä»¶äº‹æƒ…å¼•èµ·ï¼Œææƒ§äº‹æƒ…å¸¦æ¥çš„åæœï¼Œä¾‹å¦‚è¯¥åšçš„äº‹æƒ…è¿˜æ²¡æœ‰åšï¼Œè€ƒè¯•ç„¦è™‘ï¼ˆå®³æ€•è€ƒç ¸ï¼‰ï¼Œâ€œåŒæœˆç„¦è™‘â€ï¼Œæ¥åˆ°æ–°ç¯å¢ƒçš„ç„¦è™‘ç­‰ã€‚æœ‰æ˜ç¡®æŒ‡å‘çš„ç„¦è™‘å…¶å®æŒ‡å‘çš„æ˜¯ææƒ§ï¼Œå¤§å¤šæ•°ææƒ§æƒ…ç»ªä¹Ÿæ˜¯ä¼´éšç„¦è™‘å‡ºç°çš„ã€‚ç„¦è™‘æ°´å¹³ä¸ç°å®å¨èƒçš„ç¨‹åº¦æˆæ­£æ¯”ã€‚  è§£å†³è¿™ç±»ç„¦è™‘çš„æ–¹æ³•ï¼Œè¦ä¹ˆé€ƒè·‘ï¼Œè¦ä¹ˆæˆ˜æ–—â€”â€”ã€Œé™ä½å¯¹ç›®æ ‡å¯¹è±¡çš„é‡è§†ç¨‹åº¦å’ŒæœŸå¾…ã€å’Œã€Œæå‡è‡ªå·±æŒæ¡ç›®æ ‡çš„èƒ½åŠ›ã€‚ã€è¯´å¤§ç™½è¯ï¼Œè¦ä¹ˆæˆ‘ä»¬ç»è¿‡æƒè¡¡æ€è€ƒä¹‹åï¼Œè®©è‡ªå·±ç¦»å¼€å‹åŠ›æºï¼Œè¦ä¹ˆå’Œå®ƒæˆ˜æ–—ï¼Œå¿ƒç†ä¸Šå‘Šè¯‰è‡ªå·±ï¼Œè¿™ä¸ªäº‹æƒ…æ²¡æœ‰ä½ æƒ³çš„é‚£ä¹ˆé‡è¦/é‚£ä¹ˆç€æ€¥ï¼ŒåŒæ—¶æ‰¾åˆ°æœ‰æ•ˆçš„ç­–ç•¥ï¼Œè®©è‡ªå·±èƒ½å¤Ÿèƒœä»»è¿™ä¸ªäº‹æƒ…ã€‚\n æ€»ç»“ä¸€ä¸‹ï¼Œç„¦è™‘ä½œä¸ºä¸€ç§ä¿¡å·ï¼š\n  å¦‚æœå®ƒä¸æ˜¯ç”±äºå…·ä½“äº‹æƒ…å¼•èµ·çš„ï¼Œåˆ™æé†’æˆ‘ä»¬éœ€è¦ä¸ºè‡ªå·±å¯»æ‰¾ç›®æ ‡åšç‚¹ä»€ä¹ˆäº†ï¼›\n  å¦‚æœæœ‰å…·ä½“åŸå› ï¼Œè¦ä¹ˆé€‰æ‹©è¿œç¦»å‹åŠ›æºï¼Œè¦ä¹ˆé™ä½å¯¹ç„¦è™‘å¯¹è±¡çš„æœŸå¾…ï¼ˆä¾‹å¦‚ï¼Œæ”¾ä½ä¸€ç‚¹å¯¹è´¨é‡çš„è¦æ±‚ã€ç»™å¤šä¸€ç‚¹æ—¶é—´ï¼‰å¹¶æå‡è‡ªå·±æŒæ¡å®ƒçš„èƒ½åŠ›ï¼ˆåˆ†è§£æˆå¯æ‰§è¡Œçš„è¡Œä¸ºå¹¶å»æ‰§è¡Œï¼‰ã€‚\n   ","title":"ç„¦è™‘"},{"content":"  æƒ…ç»ªæ˜¯æ¥å¸®æˆ‘ä»¬çš„ï¼Œæ˜¯ä¸ºæˆ‘ä»¬é€ä¿¡å·çš„å†…åœ¨å°å­©ï¼Œå¦‚æœæˆ‘ä»¬çœ‹ä¸è§å®ƒã€ä¸æ­ç†å®ƒã€å‹æŠ‘å®ƒã€ç”šè‡³å’Œå®ƒå¯¹ç€å¹²ï¼Œæ€»æœ‰ä¸€å¤©å®ƒä¼šã€Œåƒæ‰æˆ‘ä»¬ã€ï¼ˆè¢«æƒ…ç»ªåå™¬ï¼‰ã€‚\n  æƒ…ç»ªä¸æ˜¯ï¼Œä¹Ÿä¸åº”è¯¥è¢«ç†è§£ä¸ºæ˜¯â€œåä¸œè¥¿â€ï¼Œæå‡æˆ‘ä»¬å¯¹å„ç§æƒ…ç»ªçš„ç†è§£åŠ›å’Œè€å—åŠ›ï¼Œå½“æƒ…ç»ªæ¥ä¸´çš„æ—¶å€™ï¼Œåˆ«è¯„ä»·å®ƒï¼ˆä¸ç”¨å› ä¸ºæœ‰æƒ…ç»ªè€Œè‡ªè´£ï¼‰ï¼Œä¸ç”¨å®³æ€•çš„èº²å¼€ï¼Œä¹Ÿä¸ç”¨ç€æ€¥å‡ºæ¥ï¼Œæˆ–è€…æŠŠå®ƒä¸€æ‹³æ‰“å›å»ï¼Œå¯ä»¥é™ªå®ƒå¾…ä¸€ä¼šå„¿ï¼Œå’Œé‚£ä¸ªæƒ…ç»ªä¸‹çš„è‡ªå·±å¾…ä¸€ä¼šå„¿ï¼Œé—®é—® â€œå˜¿ï¼Œä½ å’‹å•¦ï¼Ÿâ€ã€‚ï¼ˆè¿™æ˜¯æˆ‘ä»¬éš¾å¾—çš„ï¼Œçœ‹è§è‡ªå·±å’Œæ„Ÿå—è‡ªå·±å­˜åœ¨çš„æœºä¼šï¼‰\n  æˆ‘ä»¬å…¶å®ä¸å¤ªèƒ½â€œæ§åˆ¶æƒ…ç»ªâ€ï¼Œå·²ç»äº§ç”Ÿçš„æƒ…ç»ªå¾ˆéš¾è¢«æ§åˆ¶ï¼Œåªèƒ½è¢«ç–è§£ã€‚æˆ‘ä»¬èƒ½é€‰æ‹©çš„ï¼Œæ˜¯ä»¥ä½•ç§å§¿æ€åº”å¯¹ä¸€ä¸ªäº‹æƒ…çš„å‘ç”Ÿã€‚\n  æƒ…ç»ªæ˜¯æˆ‘ä»¬åœ¨å—åˆ°å¤–éƒ¨åˆºæ¿€åäº§ç”Ÿçš„è¿‘ä¹è‡ªåŠ¨çš„ååº”ï¼Œæ˜¯ä¸€ç§â€œç—‡çŠ¶â€å’Œâ€œç»“æœâ€ã€‚æœ‰ä¸€ç§è§£é‡Šæƒ…ç»ªçš„ ABC æ¨¡å‹ï¼Œé¦–å…ˆä¸€ä¸ªè¯±å‘äº‹ä»¶å‘ç”Ÿï¼Œç„¶åæˆ‘ä»¬æ€ä¹ˆçœ‹å¾…è¿™ä¸ªäº‹ä»¶çš„æ€åº¦/ä¿¡å¿µï¼Œå¯¼è‡´æˆ‘ä»¬äº§ç”Ÿä¸åŒçš„æƒ…ç»ªå’Œè¡Œä¸ºã€‚\næ¯ä¸ªäººéƒ½æœ‰å„ç§æƒ…ç»ªï¼Œå®ƒæ­ç¤ºçš„æ˜¯æˆ‘ä»¬å†…å¿ƒçš„å„ç§ä¿¡å¿µã€‚å½“è´Ÿé¢æƒ…ç»ªå‡ºæ¥çš„æ—¶å€™ï¼Œæ˜¯åœ¨æé†’æˆ‘ä»¬ï¼Œâ€œå‘Šè¯‰ä½ å“¦ï¼Œå“ªé‡Œå‡ºäº†ä»€ä¹ˆé—®é¢˜â€ï¼Œæé†’æˆ‘ä»¬æœ‰ä¸€äº›é‡è¦çš„äº‹æƒ…æ²¡æœ‰è§£å†³ã€æœ‰é‡è¦çš„éœ€æ±‚æ²¡æœ‰è¢«æ»¡è¶³ï¼Œè¯¥åšæ€è€ƒå’Œæ£€æŸ¥äº†ã€‚\n åˆ»æ„ç»ƒä¹ æ—¶åˆ»\nå½“ä½ ä¸‹æ¬¡æœ‰æƒ…ç»ªçš„æ—¶å€™ï¼Œå¯ä»¥è¯•è¯•â€œæƒ…ç»ªè¨€è¯­è¯â€ï¼Œå°±æ˜¯é€šè¿‡è¯­è¨€ï¼ŒæŠŠè‡ªå·±çš„æƒ…ç»ªè¯´å‡ºæ¥ï¼Œå¥å¼å¯ä»¥æ˜¯â€œå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…/åˆ«äººå¯¹æˆ‘åšäº†ä»€ä¹ˆï¼Œæˆ‘æ„Ÿè§‰åˆ°ä»€ä¹ˆï¼Œæˆ‘çš„å“ªäº›éœ€æ±‚æ²¡æœ‰è¢«æ»¡è¶³ï¼Œæˆ‘å¾ˆâ€¦â€¦â€\nä¹Ÿå¯ä»¥é€šè¿‡å†™ä½œï¼Œæ•´ç†è¡¨è¾¾è‡ªå·±çš„æƒ…ç»ªï¼Œåœ¨å¾®ä¿¡å…¬ä¼—å·â€œæš‚åœå®éªŒå®¤â€æœ‰æä¾›æ­£å¿µå’Œæƒ…ç»ªä¹¦å†™è®­ç»ƒè¥ã€‚é€šè¿‡è¿™ç§åˆ»æ„çš„è¿‡ç¨‹ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è¯†åˆ«å’Œçœ‹è§è‡ªå·±çš„å„ç§æ„Ÿå—ï¼Œåœ¨åˆºæ¿€äº‹ä»¶å’Œæˆ‘ä»¬çš„ååº”ä¹‹é—´æŒ‰ä¸‹ä¸€ä¸ªæš‚åœé”®ï¼Œä»è€Œå¢åŠ å¯¹æƒ…ç»ªçš„æŒæ§åŠ›ï¼Œè€Œä¸æ˜¯ä½œå‡ºè‡ªåŠ¨åŒ–çš„ååº”ã€‚\n å¦‚æœæˆ‘ä»¬èƒ½å¤ŸæŠŠæƒ…ç»ªçš„ä¿¡å·è§£è¯»å‡ºæ¥ï¼Œä¸ä½†å¯ä»¥å¹³å¤æƒ…ç»ªï¼Œè¿˜èƒ½å¤Ÿå¯¹æˆ‘ä»¬å½“å‰çš„è¡Œä¸ºå’ŒçŠ¶æ€è¿›è¡ŒåŠæ—¶çš„çŸ«æ­£ï¼ˆå˜æˆäº†ä¸€ä¸ªæ›´å¥½çš„äººå‘¢ï¼‰ã€‚å¦‚æœæƒ…ç»ªæ²¡æœ‰å¾—åˆ°ç…§é¡¾å’Œå¹³å¤ï¼Œå†…åœ¨è‡ªæˆ‘æ±‚æ•‘çš„ä¿¡å·æ²¡æœ‰è¢«æ„ŸçŸ¥åˆ°ï¼Œå®ƒå°±ä¼šæŒç»­å­˜åœ¨ä¸‹å»ï¼Œç”šè‡³ä¼šå¸¦ç€æˆ‘ä»¬åšå‡ºä¸€äº›å¤±æ§çš„è¡Œä¸ºï¼Œå³ä¾¿æœ‰æ—¶æš‚æ—¶è¢«å‹æŠ‘ï¼Œä¹Ÿä¼šå †ç§¯åœ¨æˆ‘ä»¬çš„å¿ƒé‡Œï¼Œæˆ–è€…èµ°å‘æˆ‘ä»¬çš„èº«ä½“ï¼ˆç”Ÿç—…ï¼‰ã€‚\næˆ‘ä»¬åšâ€œæƒ…ç»ªç®¡ç†â€ï¼Œå¹¶ä¸æ˜¯è¦å‹æŠ‘å·²ç»å‡ºæ¥çš„æƒ…ç»ªï¼Œè€Œæ˜¯è¦ä¸€æ–¹é¢åœ¨æƒ…ç»ªæœ‰è‹—å¤´çš„æ—¶å€™å°±è§‰å¯Ÿåˆ°è‡ªå·±çš„ååº”ï¼ŒåŠæ—¶ä½œå‡ºè°ƒæ•´ï¼›æˆ–è€…é€šè¿‡å·²ç»å‡ºç°çš„æƒ…ç»ªï¼Œæ›´å¥½åœ°çœ‹çœ‹åœ¨è‡ªå·±èº«ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆï¼Œå†…å¿ƒçš„å“ªäº›æƒ³æ³•å’Œç¯å¢ƒäº§ç”Ÿå†²çªäº†ï¼Œç„¶åå†â€œä¿®é€šâ€ä¸€ä¸‹â€”â€”è°ƒæ•´å½“å‰çš„åº”å¯¹ç­–ç•¥ï¼Œæˆ–è°ƒæ•´æˆ‘ä»¬çš„æƒ³æ³•ï¼Œè®©å†…å¿ƒä¸–ç•Œä¸å¤–ç•Œä¸å†å†²çªã€‚\n â€œåœ¨åˆºæ¿€å’Œååº”ä¹‹é—´ï¼Œæœ‰ä¸€ç‰‡ç©ºé—´ã€‚åœ¨é‚£ç‰‡ç©ºé—´é‡Œï¼Œæˆ‘ä»¬æœ‰è‡ªç”±ã€æœ‰èƒ½åŠ›é€‰æ‹©è‡ªå·±çš„ååº”â€ã€‚\n ","permalink":"https://zhenfeng-zhu.github.io/post/%E5%A6%82%E4%BD%95%E6%9B%B4%E5%A5%BD%E5%9C%B0%E7%90%86%E8%A7%A3%E6%88%91%E4%BB%AC%E7%9A%84%E6%83%85%E7%BB%AA/","summary":"  æƒ…ç»ªæ˜¯æ¥å¸®æˆ‘ä»¬çš„ï¼Œæ˜¯ä¸ºæˆ‘ä»¬é€ä¿¡å·çš„å†…åœ¨å°å­©ï¼Œå¦‚æœæˆ‘ä»¬çœ‹ä¸è§å®ƒã€ä¸æ­ç†å®ƒã€å‹æŠ‘å®ƒã€ç”šè‡³å’Œå®ƒå¯¹ç€å¹²ï¼Œæ€»æœ‰ä¸€å¤©å®ƒä¼šã€Œåƒæ‰æˆ‘ä»¬ã€ï¼ˆè¢«æƒ…ç»ªåå™¬ï¼‰ã€‚\n  æƒ…ç»ªä¸æ˜¯ï¼Œä¹Ÿä¸åº”è¯¥è¢«ç†è§£ä¸ºæ˜¯â€œåä¸œè¥¿â€ï¼Œæå‡æˆ‘ä»¬å¯¹å„ç§æƒ…ç»ªçš„ç†è§£åŠ›å’Œè€å—åŠ›ï¼Œå½“æƒ…ç»ªæ¥ä¸´çš„æ—¶å€™ï¼Œåˆ«è¯„ä»·å®ƒï¼ˆä¸ç”¨å› ä¸ºæœ‰æƒ…ç»ªè€Œè‡ªè´£ï¼‰ï¼Œä¸ç”¨å®³æ€•çš„èº²å¼€ï¼Œä¹Ÿä¸ç”¨ç€æ€¥å‡ºæ¥ï¼Œæˆ–è€…æŠŠå®ƒä¸€æ‹³æ‰“å›å»ï¼Œå¯ä»¥é™ªå®ƒå¾…ä¸€ä¼šå„¿ï¼Œå’Œé‚£ä¸ªæƒ…ç»ªä¸‹çš„è‡ªå·±å¾…ä¸€ä¼šå„¿ï¼Œé—®é—® â€œå˜¿ï¼Œä½ å’‹å•¦ï¼Ÿâ€ã€‚ï¼ˆè¿™æ˜¯æˆ‘ä»¬éš¾å¾—çš„ï¼Œçœ‹è§è‡ªå·±å’Œæ„Ÿå—è‡ªå·±å­˜åœ¨çš„æœºä¼šï¼‰\n  æˆ‘ä»¬å…¶å®ä¸å¤ªèƒ½â€œæ§åˆ¶æƒ…ç»ªâ€ï¼Œå·²ç»äº§ç”Ÿçš„æƒ…ç»ªå¾ˆéš¾è¢«æ§åˆ¶ï¼Œåªèƒ½è¢«ç–è§£ã€‚æˆ‘ä»¬èƒ½é€‰æ‹©çš„ï¼Œæ˜¯ä»¥ä½•ç§å§¿æ€åº”å¯¹ä¸€ä¸ªäº‹æƒ…çš„å‘ç”Ÿã€‚\n  æƒ…ç»ªæ˜¯æˆ‘ä»¬åœ¨å—åˆ°å¤–éƒ¨åˆºæ¿€åäº§ç”Ÿçš„è¿‘ä¹è‡ªåŠ¨çš„ååº”ï¼Œæ˜¯ä¸€ç§â€œç—‡çŠ¶â€å’Œâ€œç»“æœâ€ã€‚æœ‰ä¸€ç§è§£é‡Šæƒ…ç»ªçš„ ABC æ¨¡å‹ï¼Œé¦–å…ˆä¸€ä¸ªè¯±å‘äº‹ä»¶å‘ç”Ÿï¼Œç„¶åæˆ‘ä»¬æ€ä¹ˆçœ‹å¾…è¿™ä¸ªäº‹ä»¶çš„æ€åº¦/ä¿¡å¿µï¼Œå¯¼è‡´æˆ‘ä»¬äº§ç”Ÿä¸åŒçš„æƒ…ç»ªå’Œè¡Œä¸ºã€‚\næ¯ä¸ªäººéƒ½æœ‰å„ç§æƒ…ç»ªï¼Œå®ƒæ­ç¤ºçš„æ˜¯æˆ‘ä»¬å†…å¿ƒçš„å„ç§ä¿¡å¿µã€‚å½“è´Ÿé¢æƒ…ç»ªå‡ºæ¥çš„æ—¶å€™ï¼Œæ˜¯åœ¨æé†’æˆ‘ä»¬ï¼Œâ€œå‘Šè¯‰ä½ å“¦ï¼Œå“ªé‡Œå‡ºäº†ä»€ä¹ˆé—®é¢˜â€ï¼Œæé†’æˆ‘ä»¬æœ‰ä¸€äº›é‡è¦çš„äº‹æƒ…æ²¡æœ‰è§£å†³ã€æœ‰é‡è¦çš„éœ€æ±‚æ²¡æœ‰è¢«æ»¡è¶³ï¼Œè¯¥åšæ€è€ƒå’Œæ£€æŸ¥äº†ã€‚\n åˆ»æ„ç»ƒä¹ æ—¶åˆ»\nå½“ä½ ä¸‹æ¬¡æœ‰æƒ…ç»ªçš„æ—¶å€™ï¼Œå¯ä»¥è¯•è¯•â€œæƒ…ç»ªè¨€è¯­è¯â€ï¼Œå°±æ˜¯é€šè¿‡è¯­è¨€ï¼ŒæŠŠè‡ªå·±çš„æƒ…ç»ªè¯´å‡ºæ¥ï¼Œå¥å¼å¯ä»¥æ˜¯â€œå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…/åˆ«äººå¯¹æˆ‘åšäº†ä»€ä¹ˆï¼Œæˆ‘æ„Ÿè§‰åˆ°ä»€ä¹ˆï¼Œæˆ‘çš„å“ªäº›éœ€æ±‚æ²¡æœ‰è¢«æ»¡è¶³ï¼Œæˆ‘å¾ˆâ€¦â€¦â€\nä¹Ÿå¯ä»¥é€šè¿‡å†™ä½œï¼Œæ•´ç†è¡¨è¾¾è‡ªå·±çš„æƒ…ç»ªï¼Œåœ¨å¾®ä¿¡å…¬ä¼—å·â€œæš‚åœå®éªŒå®¤â€æœ‰æä¾›æ­£å¿µå’Œæƒ…ç»ªä¹¦å†™è®­ç»ƒè¥ã€‚é€šè¿‡è¿™ç§åˆ»æ„çš„è¿‡ç¨‹ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è¯†åˆ«å’Œçœ‹è§è‡ªå·±çš„å„ç§æ„Ÿå—ï¼Œåœ¨åˆºæ¿€äº‹ä»¶å’Œæˆ‘ä»¬çš„ååº”ä¹‹é—´æŒ‰ä¸‹ä¸€ä¸ªæš‚åœé”®ï¼Œä»è€Œå¢åŠ å¯¹æƒ…ç»ªçš„æŒæ§åŠ›ï¼Œè€Œä¸æ˜¯ä½œå‡ºè‡ªåŠ¨åŒ–çš„ååº”ã€‚\n å¦‚æœæˆ‘ä»¬èƒ½å¤ŸæŠŠæƒ…ç»ªçš„ä¿¡å·è§£è¯»å‡ºæ¥ï¼Œä¸ä½†å¯ä»¥å¹³å¤æƒ…ç»ªï¼Œè¿˜èƒ½å¤Ÿå¯¹æˆ‘ä»¬å½“å‰çš„è¡Œä¸ºå’ŒçŠ¶æ€è¿›è¡ŒåŠæ—¶çš„çŸ«æ­£ï¼ˆå˜æˆäº†ä¸€ä¸ªæ›´å¥½çš„äººå‘¢ï¼‰ã€‚å¦‚æœæƒ…ç»ªæ²¡æœ‰å¾—åˆ°ç…§é¡¾å’Œå¹³å¤ï¼Œå†…åœ¨è‡ªæˆ‘æ±‚æ•‘çš„ä¿¡å·æ²¡æœ‰è¢«æ„ŸçŸ¥åˆ°ï¼Œå®ƒå°±ä¼šæŒç»­å­˜åœ¨ä¸‹å»ï¼Œç”šè‡³ä¼šå¸¦ç€æˆ‘ä»¬åšå‡ºä¸€äº›å¤±æ§çš„è¡Œä¸ºï¼Œå³ä¾¿æœ‰æ—¶æš‚æ—¶è¢«å‹æŠ‘ï¼Œä¹Ÿä¼šå †ç§¯åœ¨æˆ‘ä»¬çš„å¿ƒé‡Œï¼Œæˆ–è€…èµ°å‘æˆ‘ä»¬çš„èº«ä½“ï¼ˆç”Ÿç—…ï¼‰ã€‚\næˆ‘ä»¬åšâ€œæƒ…ç»ªç®¡ç†â€ï¼Œå¹¶ä¸æ˜¯è¦å‹æŠ‘å·²ç»å‡ºæ¥çš„æƒ…ç»ªï¼Œè€Œæ˜¯è¦ä¸€æ–¹é¢åœ¨æƒ…ç»ªæœ‰è‹—å¤´çš„æ—¶å€™å°±è§‰å¯Ÿåˆ°è‡ªå·±çš„ååº”ï¼ŒåŠæ—¶ä½œå‡ºè°ƒæ•´ï¼›æˆ–è€…é€šè¿‡å·²ç»å‡ºç°çš„æƒ…ç»ªï¼Œæ›´å¥½åœ°çœ‹çœ‹åœ¨è‡ªå·±èº«ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆï¼Œå†…å¿ƒçš„å“ªäº›æƒ³æ³•å’Œç¯å¢ƒäº§ç”Ÿå†²çªäº†ï¼Œç„¶åå†â€œä¿®é€šâ€ä¸€ä¸‹â€”â€”è°ƒæ•´å½“å‰çš„åº”å¯¹ç­–ç•¥ï¼Œæˆ–è°ƒæ•´æˆ‘ä»¬çš„æƒ³æ³•ï¼Œè®©å†…å¿ƒä¸–ç•Œä¸å¤–ç•Œä¸å†å†²çªã€‚\n â€œåœ¨åˆºæ¿€å’Œååº”ä¹‹é—´ï¼Œæœ‰ä¸€ç‰‡ç©ºé—´ã€‚åœ¨é‚£ç‰‡ç©ºé—´é‡Œï¼Œæˆ‘ä»¬æœ‰è‡ªç”±ã€æœ‰èƒ½åŠ›é€‰æ‹©è‡ªå·±çš„ååº”â€ã€‚\n ","title":"å¦‚ä½•æ›´å¥½åœ°ç†è§£æˆ‘ä»¬çš„æƒ…ç»ª"},{"content":" è¨ç‰¹è¯´ï¼šæ†æ¨çš„æœ¬è´¨å°±æ˜¯æ‰¿è®¤äº†ä»–äººçš„è‡ªç”±\n è¿™å¥è¯æ€ä¹ˆç†è§£ï¼Ÿ\næˆ‘ä»¬ç¾¡æ…•çš„äººï¼Œä»–ä»¬è‡ªç”±åº¦å¤ªé«˜ä»¥è‡³äºæœ‰åˆç†é¢„æœŸï¼›\næˆ‘ä»¬å«‰å¦’çš„äººï¼Œä»–ä»¬åªæ˜¯ç¨ç¨å‹æˆ‘ä»¬ä¸€å¤´ï¼›\nè€Œæˆ‘ä»¬æ¨çš„äººï¼Œæ˜¯é‚£äº›å®åŠ›å·®ä¸å¤šï¼Œä½†å› ä¸ºä»–ä»¬è¿‡äºè‡ªç”±è‡ªåœ¨ï¼Œè®©æˆ‘ä»¬äº§ç”Ÿâ€œæˆ‘ä¸è¡Œâ€çš„æ„Ÿè§‰ï¼Œå“²å­¦ä¸­ï¼Œç§°ä¸ºâ€œä¸§å¤±äº†è‡ªæˆ‘ä¸»ä½“æ€§â€ï¼Œç¿»è¯‘æˆå¤§ç™½è¯å°±æ˜¯â€œæ„Ÿå—ä¸åˆ°è‡ªå·±çš„åŠ›é‡â€ã€‚\nå¾ˆå¤šè´Ÿé¢çš„æƒ…ç»ªï¼Œéƒ½æ¥æºäºæˆ‘ä»¬æ„Ÿå—ä¸åˆ°è‡ªå·±æ‰€è•´å«çš„èƒ½é‡ï¼›è€Œä½ æœ€å¼€å¿ƒçš„æƒ…ç»ªï¼Œä¹Ÿéƒ½æ¥æºä½ ä½ æ„Ÿå—åˆ°äº†è‡ªå·±çš„åŠ›é‡ï¼š\n å†¥æƒ³ï¼Œè®©ä½ è§‚å¯Ÿåˆ°è‡ªå·±æƒ…ç»ªçš„åŠ›é‡ï¼› è¿åŠ¨ï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±èº«ä½“çš„åŠ›é‡ï¼› æ¸¸æˆï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±ä½¿ç”¨æŸä¸ªè‹±é›„çš„åŠ›é‡ï¼› è·Ÿæœ‹å‹å” å—‘ï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±è¿æ¥ä»–äººçš„åŠ›é‡ï¼› å…»å¨ƒå¸çŒ«ï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±èƒ½å¤ŸæŠšå…»ç”Ÿå‘½çš„åŠ›é‡ï¼› \u0026hellip;  è¿™ç§åŠ›é‡æ„Ÿï¼Œä¹Ÿæœ‰äººç§°ä¸ºæŒæ§æ„Ÿã€è‡ªç”±æ„Ÿï¼Œéœ€è¦è‡ªå·±ç»™è‡ªå·±ã€‚\nå¯æ˜¯ï¼Œæ‰“å·¥äººä¸‹ç­åï¼ŒçœŸçš„æ²¡æœ‰åŠ›æ°”è¿åŠ¨ã€æ²¡æœ‰æ³¨æ„åŠ›å†¥æƒ³äº†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦è®¤è®¤çœŸçœŸåæ€ä¸€ä¸‹ä½ åœ¨å·¥ä½œé‡Œçš„ä¸»ä½“æ€§äº†ï¼Œå¦‚æœå·¥ä½œä¸­æ²¡æœ‰è‡ªä¸»æƒï¼Œäººä»¬å°±ä¼šæœ‰â€œè‡ªå·±ä¸èƒ½åšå†³å®šï¼Œæ— æ³•åšé€‰æ‹©â€çš„æ„Ÿè§‰ï¼Œè¿™ç§æ„Ÿè§‰ä¼šå‡å°‘äººä»¬æ¿€åŠ±è‡ªå·±ï¼Œä»è€Œä¹Ÿå‡å°‘äº†é”»ç‚¼çš„åŠ¨æœºã€‚\nåœ¨é«˜å‹åŠ›ã€æ²¡æœ‰è‡ªä¸»æ§åˆ¶æƒçš„ç¯å¢ƒé‡Œï¼Œäººä¼šå˜å¾—å¯¹ç”Ÿæ´»éƒ½æ²¡æœ‰å¹²åŠ²äº†ã€‚\nè¿™æ˜¯ä¸€ç§å¾ˆå¯æ€•çš„æ¶æ€§å¾ªç¯ï¼Œä¹Ÿæ˜¯ä¸€ç§å¾ˆä¸¥é‡çš„æƒ…ç»ªä¼¤å®³ï¼Œå·¥ä½œä¸­ï¼Œè¦æ—¶åˆ»è­¦æƒ•è‡ªå·±çè´µçš„æƒ…ç»ªè¢«ç ´åï¼Œæƒ…ç»ªè¢«ç”Ÿç†æ€§çš„ç ´åï¼Œå¸¦æ¥çš„åæœè¿˜æŒºä¸¥é‡çš„ã€‚\nè®°å¾—å½“ä½ æƒ…ç»ªä¸å¥½çš„æ—¶å€™ï¼Œå¤šå°è¯•æ„Ÿå—ä¸€ä¸‹ä¸‹è‡ªå·±çš„åŠ›é‡ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E6%84%9F%E5%8F%97%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8A%9B%E9%87%8F/","summary":"è¨ç‰¹è¯´ï¼šæ†æ¨çš„æœ¬è´¨å°±æ˜¯æ‰¿è®¤äº†ä»–äººçš„è‡ªç”±\n è¿™å¥è¯æ€ä¹ˆç†è§£ï¼Ÿ\næˆ‘ä»¬ç¾¡æ…•çš„äººï¼Œä»–ä»¬è‡ªç”±åº¦å¤ªé«˜ä»¥è‡³äºæœ‰åˆç†é¢„æœŸï¼›\næˆ‘ä»¬å«‰å¦’çš„äººï¼Œä»–ä»¬åªæ˜¯ç¨ç¨å‹æˆ‘ä»¬ä¸€å¤´ï¼›\nè€Œæˆ‘ä»¬æ¨çš„äººï¼Œæ˜¯é‚£äº›å®åŠ›å·®ä¸å¤šï¼Œä½†å› ä¸ºä»–ä»¬è¿‡äºè‡ªç”±è‡ªåœ¨ï¼Œè®©æˆ‘ä»¬äº§ç”Ÿâ€œæˆ‘ä¸è¡Œâ€çš„æ„Ÿè§‰ï¼Œå“²å­¦ä¸­ï¼Œç§°ä¸ºâ€œä¸§å¤±äº†è‡ªæˆ‘ä¸»ä½“æ€§â€ï¼Œç¿»è¯‘æˆå¤§ç™½è¯å°±æ˜¯â€œæ„Ÿå—ä¸åˆ°è‡ªå·±çš„åŠ›é‡â€ã€‚\nå¾ˆå¤šè´Ÿé¢çš„æƒ…ç»ªï¼Œéƒ½æ¥æºäºæˆ‘ä»¬æ„Ÿå—ä¸åˆ°è‡ªå·±æ‰€è•´å«çš„èƒ½é‡ï¼›è€Œä½ æœ€å¼€å¿ƒçš„æƒ…ç»ªï¼Œä¹Ÿéƒ½æ¥æºä½ ä½ æ„Ÿå—åˆ°äº†è‡ªå·±çš„åŠ›é‡ï¼š\n å†¥æƒ³ï¼Œè®©ä½ è§‚å¯Ÿåˆ°è‡ªå·±æƒ…ç»ªçš„åŠ›é‡ï¼› è¿åŠ¨ï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±èº«ä½“çš„åŠ›é‡ï¼› æ¸¸æˆï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±ä½¿ç”¨æŸä¸ªè‹±é›„çš„åŠ›é‡ï¼› è·Ÿæœ‹å‹å” å—‘ï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±è¿æ¥ä»–äººçš„åŠ›é‡ï¼› å…»å¨ƒå¸çŒ«ï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±èƒ½å¤ŸæŠšå…»ç”Ÿå‘½çš„åŠ›é‡ï¼› \u0026hellip;  è¿™ç§åŠ›é‡æ„Ÿï¼Œä¹Ÿæœ‰äººç§°ä¸ºæŒæ§æ„Ÿã€è‡ªç”±æ„Ÿï¼Œéœ€è¦è‡ªå·±ç»™è‡ªå·±ã€‚\nå¯æ˜¯ï¼Œæ‰“å·¥äººä¸‹ç­åï¼ŒçœŸçš„æ²¡æœ‰åŠ›æ°”è¿åŠ¨ã€æ²¡æœ‰æ³¨æ„åŠ›å†¥æƒ³äº†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦è®¤è®¤çœŸçœŸåæ€ä¸€ä¸‹ä½ åœ¨å·¥ä½œé‡Œçš„ä¸»ä½“æ€§äº†ï¼Œå¦‚æœå·¥ä½œä¸­æ²¡æœ‰è‡ªä¸»æƒï¼Œäººä»¬å°±ä¼šæœ‰â€œè‡ªå·±ä¸èƒ½åšå†³å®šï¼Œæ— æ³•åšé€‰æ‹©â€çš„æ„Ÿè§‰ï¼Œè¿™ç§æ„Ÿè§‰ä¼šå‡å°‘äººä»¬æ¿€åŠ±è‡ªå·±ï¼Œä»è€Œä¹Ÿå‡å°‘äº†é”»ç‚¼çš„åŠ¨æœºã€‚\nåœ¨é«˜å‹åŠ›ã€æ²¡æœ‰è‡ªä¸»æ§åˆ¶æƒçš„ç¯å¢ƒé‡Œï¼Œäººä¼šå˜å¾—å¯¹ç”Ÿæ´»éƒ½æ²¡æœ‰å¹²åŠ²äº†ã€‚\nè¿™æ˜¯ä¸€ç§å¾ˆå¯æ€•çš„æ¶æ€§å¾ªç¯ï¼Œä¹Ÿæ˜¯ä¸€ç§å¾ˆä¸¥é‡çš„æƒ…ç»ªä¼¤å®³ï¼Œå·¥ä½œä¸­ï¼Œè¦æ—¶åˆ»è­¦æƒ•è‡ªå·±çè´µçš„æƒ…ç»ªè¢«ç ´åï¼Œæƒ…ç»ªè¢«ç”Ÿç†æ€§çš„ç ´åï¼Œå¸¦æ¥çš„åæœè¿˜æŒºä¸¥é‡çš„ã€‚\nè®°å¾—å½“ä½ æƒ…ç»ªä¸å¥½çš„æ—¶å€™ï¼Œå¤šå°è¯•æ„Ÿå—ä¸€ä¸‹ä¸‹è‡ªå·±çš„åŠ›é‡ã€‚","title":"æ„Ÿå—è‡ªå·±çš„åŠ›é‡"},{"content":"ä»€ä¹ˆæ˜¯ä¸‰å¶è‰æ¨¡å‹ å·¥ä½œçš„æœ¬è´¨æ˜¯ï¼Œé€šè¿‡ä»·å€¼åˆ›é€ å®Œæˆä»·å€¼å…‘ç°ã€‚æˆ‘ä»¬èƒ½å¤Ÿè¿›è¡Œä»·å€¼åˆ›é€ çš„å‰ææ˜¯å¯¹æ‰€ä»äº‹çš„å·¥ä½œå†…å®¹æœ‰å…´è¶£ï¼Œå…´è¶£åŠ ä¸ŠæŒç»­çš„æŠ•å…¥ï¼Œè®©æˆ‘ä»¬å…·å¤‡å®Œæˆå·¥ä½œæ‰€éœ€è¦çš„èƒ½åŠ›ã€‚é€šè¿‡èƒ½åŠ›åˆ›é€ ä»·å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ç‰©è´¨å›æŠ¥å’Œç²¾ç¥å›æŠ¥ï¼Œè¿™äº›ä¸œè¥¿è®©æˆ‘ä»¬æ„Ÿå—åˆ°ä»·å€¼æ„Ÿå’Œæ»¡è¶³æ„Ÿï¼Œä»è€Œæœ‰æ›´å¼ºçš„å…´è¶£æŠ•å…¥åˆ°å·¥ä½œä¸­ï¼Œè¿™æ ·å½¢æˆä¸€ä¸ªé—­ç¯ã€‚\næ‰€ä»¥å®Œç¾çš„å·¥ä½œåº”è¯¥åŒ…å«å…´è¶£ã€èƒ½åŠ›ã€ä»·å€¼ä¸‰ä¸ªæ–¹é¢ã€‚\n æˆ‘ä»¬æ„Ÿå…´è¶£çš„ï¼› æˆ‘ä»¬æœ‰èƒ½åŠ›èƒœä»»çš„ï¼› èƒ½å¤Ÿå›é¦ˆç»™æˆ‘ä»¬ä»·å€¼çš„ï¼Œä¸æˆ‘ä»¬å½“ä¸‹æ‰€è¿½æ±‚çš„ä»·å€¼è§‚ç›¸ç¬¦çš„ã€‚  å½“ä»¥ä¸Šä¸‰ä¸ªæ–¹é¢éƒ½è·å¾—æ»¡è¶³æ—¶ï¼Œæˆ‘ä»¬ä½“éªŒåˆ°çš„æ˜¯å¿«ä¹ã€å¯¹å·¥ä½œæœ‰çƒ­æƒ…ã€æœ‰æˆå°±æ„Ÿå’ŒæŒæ§æ„Ÿã€è§‰å¾—å·¥ä½œæœ‰æ„ä¹‰ã€æœ‰ä»·å€¼ã€‚ç›¸åï¼Œå¦‚æœå½“æŸä¸€æ–¹é¢å¾—ä¸åˆ°æ»¡è¶³æ—¶ï¼Œæˆ‘ä»¬ä¼šäº§ç”Ÿè´Ÿé¢çš„ä½“éªŒå’Œæƒ…ç»ªã€‚\nä¸‰å¶è‰æ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡æˆ‘ä»¬åœ¨å·¥ä½œä¸­è¡¨ç°å‡ºçš„æƒ…ç»ªçŠ¶æ€ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œè‡ªæˆ‘è§‰å¯Ÿï¼Œæˆ–è€…å¸®åŠ©åˆ«äººåˆ¤æ–­å½“ä¸‹èŒä¸šå‘å±•çš„çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Œå“ªé‡Œå­˜åœ¨é—®é¢˜ï¼Œåº”è¯¥ä»ä½•å¤„ç€æ‰‹è§£å†³é—®é¢˜ï¼Œä¿ƒè¿›å‘å±•ã€‚\nä¸ç†æƒ³çš„èŒä¸šçŠ¶æ€å’Œå…¸å‹ç‰¹å¾\n å…´è¶£ç¼ºå¤±ï¼šåŒå€¦ï¼Œæ˜“æ„Ÿäººç¾¤ï¼šå·¥ä½œ 3 å¹´ä»¥ä¸Šï¼Œæˆ–åŒä¸€ä¸ªå²—ä½å·¥ä½œ 2 å¹´ä»¥ä¸Šï¼Œå·²ç»åº¦è¿‡äº†èµ·æ­¥é€‚åº”é˜¶æ®µï¼Œåœ¨å‘å±•æœŸå‡ºç°å·¥ä½œå€¦æ€   å¿ƒç†ååº”ï¼šåŒå€¦ï¼Œè®°å¿†åŠ›ä¸‹é™ï¼Œååº”é€Ÿåº¦å˜æ…¢ï¼Œé•¿æ—¶é—´çš„åŒå€¦å®¹æ˜“æ¼”åŒ–ä¸ºæŠ‘éƒ èº«ä½“ååº”ï¼šæ‰‹è„šå†°å‡‰ï¼Œå‘å†·ï¼Œå¤´ç–¼ï¼Œæ³¨æ„åŠ›æ¶£æ•£ï¼Œè¡ŒåŠ¨é€Ÿåº¦ä¸‹é™   èƒ½åŠ›ç¼ºå¤±ï¼šç„¦è™‘ï¼Œæ˜“æ„Ÿäººç¾¤ï¼šåˆšè¿›å…¥èŒåœºã€åˆšæ™‹å‡ã€åˆšè¿›å…¥æ–°çš„å²—ä½ã€å·¥ä½œæŒ‘æˆ˜å¤§æ—¶  å¿ƒç†ååº”ï¼šæ˜“æ€’ï¼Œæš´èºï¼Œè¯´è¯å£°éŸ³å¿«ï¼Œå®¹æ˜“æƒ…ç»ªæ¿€åŠ¨ èº«ä½“ååº”ï¼šå¤±çœ ï¼Œå‘çƒ§ï¼Œèƒƒç—…ï¼Œå¤´ç–¼   ä»·å€¼ç¼ºå¤±ï¼šå¤±è½ï¼Œæ˜“æ„Ÿäººç¾¤ï¼šå·¥ä½œå¾—ä¸åˆ°å›æŠ¥å’Œè®¤å¯æ—¶ã€æ‰€åšäº‹æƒ…ä¸è‡ªå·±çš„ä»·å€¼è§‚å‘ç”Ÿå†²çªæ—¶  å¿ƒç†ååº”ï¼šçŸ­æœŸä¼šæœ‰æŠ±æ€¨å’Œæ„¤æ€’çš„è¡¨ç°ï¼Œå·¥ä½œæ²¡åŠ¨åŠ› èº«ä½“ååº”ï¼šè¡ŒåŠ¨é€Ÿåº¦ä¸‹é™    å¦‚ä½•ä½¿ç”¨ å½“æˆ‘ä»¬è‡ªå·±æˆ–è€…å…¶ä»–äººé™·å…¥åˆ°ä¸ç†æƒ³çš„å·¥ä½œçŠ¶æ€ä¸­ï¼Œæ‰¾åˆ°æˆ‘ä»¬å¯»æ±‚å¸®åŠ©æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥è¯†åˆ«é—®é¢˜å¹¶ä½œå‡ºåŠªåŠ›æ”¹å–„ã€‚\næ­¥éª¤ 1ï¼šçŠ¶æ€è¯„ä¼°   å¯¹äºå·¥ä½œçŠ¶æ€çœ‹èµ·æ¥æ¯”è¾ƒå¥½çš„äººå¯ä»¥è¿™æ ·æé—®ï¼šâ€œä½ è§‰å¾—ç°åœ¨çš„å·¥ä½œçŠ¶æ€å¯¹ä½ æ¥è¯´ï¼Œåœ¨æ–°é²œæ„Ÿã€æŒæ§æ„Ÿå’Œæ»¡è¶³æ„Ÿæ–¹é¢åˆ†åˆ«å¯ä»¥æ‰“å¤šå°‘åˆ†ï¼ˆ1-10 åˆ†ï¼‰ï¼Ÿå¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„çœŸå®æ„Ÿå—ï¼Œåœ¨è¿™ä¸‰æ–¹é¢æ‰“ä¸ªåˆ†ã€‚â€\n æ„Ÿåˆ°å·¥ä½œæ–°é²œã€å¿«ä¹æœ‰è¶£ï¼› å¯¹å·¥ä½œæœ‰æŒæ§æ„Ÿï¼Œèƒ½ä½“éªŒåˆ°æˆå°±æ„Ÿï¼› å·¥ä½œç»™ä½ å¸¦æ¥æ»¡è¶³æ„Ÿå’Œå¹¸ç¦æ„Ÿï¼›    å¯¹äºå·¥ä½œçŠ¶æ€çœ‹èµ·æ¥ä¸å¥½çš„äººå¯ä»¥è¿™æ ·æé—®ï¼šâ€œæƒ…ç»ªå¯ä»¥åæ˜ æˆ‘ä»¬åœ¨å·¥ä½œä¸­é¢ä¸´çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æƒ…ç»ªçš„è‡ªè¯„ï¼Œäº†è§£æˆ‘ä»¬å·¥ä½œä¸­çš„ä¸»è¦é—®é¢˜åœ¨å“ªé‡Œï¼Œå¯ä»¥æ ¹æ®ä½ ç°åœ¨çš„çœŸå®æ„Ÿå—ï¼Œåœ¨ä»¥ä¸‹ä¸‰ä¸ªæƒ…ç»ªæ–¹é¢åˆ†åˆ«æ‰“ä¸ªåˆ†ï¼ˆ1-10 åˆ†ï¼‰ã€‚â€\n å¯¹å·¥ä½œæ„Ÿåˆ°åŒå€¦ã€æä¸èµ·æ¥å…´è¶£ï¼› å¯¹å·¥ä½œæ„Ÿåˆ°ç„¦è™‘ã€ç¼ºå°‘æŒæ§æ„Ÿã€ç»å¸¸æ„Ÿåˆ°ä¸å®‰ï¼› å¯¹å·¥ä½œæ„Ÿåˆ°å¤±è½ã€ç¼ºå°‘ä»·å€¼æ„Ÿï¼›    å…¸å‹æ‰“åˆ†ç»„åˆ\u0026amp;çŠ¶æ€åˆ¤æ–­\n å…´è¶£é«˜ï¼Œèƒ½åŠ›ä½ï¼Œä»·å€¼è¿˜å¯ä»¥ï¼šå¤„äºèµ·æ­¥å‘å±•æœŸï¼Œå› ä¸ºå…´è¶£æ˜¯åœ¨çš„ï¼Œæ„å‘³ç€æ„¿æ„æŒç»­åœ°æŠ•å…¥å’Œå­¦ä¹ ï¼Œæœªæ¥ä»æœ‰è¾ƒå¤§å‘å±•ç©ºé—´ï¼Œå½“ä¸‹éœ€è¦é‡ç‚¹åšçš„æ˜¯å…³æ³¨èƒ½åŠ›çš„æå‡ã€‚ å…´è¶£ä½ï¼Œä½†æ˜¯èƒ½åŠ›å’Œä»·å€¼å›æŠ¥ç›¸å¯¹é«˜ï¼šå¤„äºå¹³å°æœŸï¼Œå¾ˆå¤šèŒåœºè€å‘˜å·¥ä¼šæœ‰è¿™æ ·çš„æ„Ÿè§‰ï¼Œå…´è¶£ä¸€èˆ¬ï¼Œä½†æ˜¯èƒ½ hold ä½å½“å‰çš„å·¥ä½œï¼Œä»·å€¼å›æŠ¥ä¹Ÿä¸é”™ï¼Œé€šå¸¸è¿™ä¸ªæ—¶å€™å‘˜å·¥çŸ­æœŸä¼šç›¸å¯¹ç¨³å®šï¼Œå› ä¸ºå·¥ä½œä¸­èƒ½å¤Ÿæ‹¿åˆ°è‡ªå·±æƒ³è¦çš„ä»·å€¼ï¼Œå› æ­¤æš‚æ—¶ä¸ä¼šæœ‰å˜åŒ–ï¼Œä½†å› ä¸ºå¯¹å·¥ä½œå·²ç»äº§ç”Ÿäº†å€¦æ€ çš„æ„Ÿè§‰ï¼ŒèŒä¸šå‘å±•ä¼šé™·å…¥ä¸€æ®µåœæ»çš„é˜¶æ®µï¼Œæœªæ¥çš„ä¸Šå‡å’Œæˆé•¿ä¼šç›¸å¯¹å—é™åˆ¶ï¼Œéœ€è¦æ’¬åŠ¨æ–°çš„å…´è¶£å’Œä»·å€¼å¢é•¿ç‚¹ï¼Œæ‰èƒ½è¿›é˜¶åˆ°æ–°çš„é˜¶æ®µã€‚ å…´è¶£é«˜ï¼Œèƒ½åŠ›ä¹Ÿè¿˜å¯ä»¥ï¼Œä½†ä»·å€¼ä½ï¼šè™½ç„¶å¯¹å·¥ä½œæœ‰å…´è¶£ä¹Ÿèƒ½èƒœä»»ï¼Œä½†å¾—åˆ°çš„ä»·å€¼æ— æ³•ä»¤è‡ªå·±æ»¡è¶³æˆ–è€…è¯´ä¸è‡ªå·±å†…å¿ƒçœŸå®æƒ³è¦çš„æœ‰ä¸€å®šå·®è·ï¼Œè¿™ä¸ªä»·å€¼ä¸ä¸€å®šæŒ‡ç‰©è´¨å›æŠ¥ï¼Œä¹ŸæŒ‡ç²¾ç¥å’Œå¿ƒç†éœ€æ±‚ä¸Šçš„æ»¡è¶³ï¼Œæ¯”å¦‚æ˜¯å¦æœ‰æ„ä¹‰æ„Ÿï¼Œæ˜¯å¦è¢«è®¤å¯ï¼Œæ˜¯å¦èƒ½å¤Ÿä½“éªŒåˆ°è‡ªå·±æƒ³è¦çš„äººé™…å…³ç³»ã€‚è¿™ä¸ªæ—¶å€™é€šå¸¸éœ€è¦æ¾„æ¸…ä¸‹è‡ªå·±æƒ³è¦çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Œç„¶åå†æ ¹æ®è‡ªå·±æƒ³è¦çš„ä»·å€¼å°è¯•è½¬æ¢æ–¹å‘ï¼Œæˆ–è€…åœ¨åŸæœ‰çš„å·¥ä½œä¸Šé“¾æ¥ã€æ’¬åŠ¨æ›´å¤šä»·å€¼ã€‚  åˆ’é‡ç‚¹ï¼š å¥½çš„èŒä¸šç”Ÿæ¶¯æ˜¯èƒ½å¤ŸæŒç»­ä¸æ–­åœ°æ‰¾åˆ°å…´è¶£ã€æå‡èƒ½åŠ›ã€å…‘æ¢ä»·å€¼ï¼Œé€šå¸¸ 2-3 å¹´æ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œç„¶åæ—¢æœ‰äº‹æƒ…å¯¹æˆ‘ä»¬çš„å¸å¼•åŠ›ä¼šä¸‹é™ï¼Œè¿™æ˜¯å®¢è§‚è§„å¾‹ï¼Œæˆ‘ä»¬è¦ä¸æ–­æ‰¾åˆ°æ–°çš„äº‹æƒ…ã€æ–°çš„å…´è¶£ç‚¹å’Œä»·å€¼å¢é•¿ç‚¹ï¼Œè®©æ¯ä¸ªé˜¶æ®µç§¯ç´¯å’Œä¿®ç‚¼çš„èƒ½åŠ›éƒ½æ˜¯åœ¨ä¸ºä¸‹ä¸ªé˜¶æ®µé“ºè·¯ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯æˆ‘ä»¬ä¸æ–­åæ€è‡ªå·±ã€å¹¶ä¸”å’Œå‘¨å›´ç¯å¢ƒäº’åŠ¨ã€å¹¶ä¸”åœ¨äº’åŠ¨ä¸­æŒç»­è°ƒé€‚è‡ªå·±çš„è¿‡ç¨‹ã€‚\næ­¥éª¤ 2ï¼šæ¢è®¨å’Œåæ€ åœ¨å®Œæˆæ­¥éª¤ 1 çš„æ‰“åˆ†ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç…§åˆ†æ•°æ¥åˆ†æç°çŠ¶ï¼Œå¹¶æ€è€ƒèƒ½å¤Ÿå¸¦æ¥ç§¯ææ”¹å˜çš„å…³é”®é©±åŠ¨å› ç´ ï¼Œå¯ä»¥é—®è‡ªå·±/é—®å¯¹æ–¹çš„é—®é¢˜ï¼š\n ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·çš„åˆ†æ•°ï¼Ÿ åˆ°åº•ä»€ä¹ˆåœ°æ–¹è®©ä½ è§‰å¾—ä¸å¤Ÿèˆ’æœï¼Ÿ è§‰å¾—è‡ªå·±åœ¨å“ªäº›æ–¹é¢å¯ä»¥æå‡ï¼Ÿ æœ‰æ²¡æœ‰å“ªä¸ªéƒ¨åˆ†ï¼Œå¦‚æœä¸€æ—¦å®ƒæå‡ï¼Œå°±èƒ½ç»™ä½ å¸¦æ¥å…¨å±€æå‡å‘¢ï¼Ÿ ç¯å¢ƒä¸­æœ‰å“ªäº›èµ„æºæ˜¯è‡ªå·±å¯ä»¥åˆ©ç”¨çš„ï¼Ÿ  æ­¥éª¤ 3ï¼šæå‡ºæ”¹å–„ç­–ç•¥   å¦‚æœæ˜¯å…´è¶£ä¸è¶³ï¼šå…´è¶£å…¶å®ä¸å–å†³äºå¤–åœ¨ï¼Œè€Œæ˜¯ä¸€ç§è‡ªæˆ‘ç®¡ç†çš„èƒ½åŠ›ï¼Œå…´è¶£åæ˜ çš„æ˜¯æˆ‘ä»¬å¯¹ä¸€ä»¶äº‹æƒ…çš„â€œè®¤çŸ¥â€ï¼Œè€Œæˆ‘ä»¬å¦‚ä½•â€œè®¤çŸ¥â€ä¸€ä»¶äº‹æƒ…ï¼Œæ˜¯å¯ä»¥è¢«æ”¹å˜çš„ã€‚\n  â€œæŒ–æ˜â€å·¥ä½œä¸­çš„å…´è¶£ç‚¹ï¼šæ‰€æœ‰å·¥ä½œéƒ½å¯ä»¥å‘å±•å‡ºå…´è¶£ç‚¹ï¼Œå…³é”®æ˜¯æ‰¾åˆ°æˆ‘ä»¬ä¸ªäººçš„ä»·å€¼è§‚å’Œå½“å‰ç¯å¢ƒä»¥åŠå½“å‰å·¥ä½œå¯ä»¥é“¾æ¥çš„éƒ¨åˆ†ï¼Œå…´è¶£éƒ½æ˜¯å¯ä»¥æŒ–æ˜å’ŒåŸ¹å…»çš„ã€‚é€šè¿‡åˆ»æ„ç»ƒä¹ ï¼Œæˆ‘ä»¬èƒ½å¤ŸåŸ¹å…»è‡ªå·±ä»ä¸€ä»¶äº‹æƒ…ä¸­æ‰¾åˆ°ä¹è¶£çš„èƒ½åŠ›ã€‚\n  ç»™è‡ªå·±æå‡ºæ›´é«˜ã€æ›´å¿«ã€æ›´å¼ºã€æ›´æ·±ã€æ›´å¹¿çš„è¦æ±‚ï¼šå½“æŠŠç°æœ‰å·¥ä½œçš„æ ‡å‡†æé«˜æ—¶ï¼Œæœ‰æ—¶ä¼šæ¿€å‘å‡ºæˆ‘ä»¬æ–°çš„æŒ‘æˆ˜æ¬²æœ›å’Œå…´è¶£ã€‚\n  å‘æœ‰èƒ½åŠ›çš„å…´è¶£é¢†åŸŸè¿›è¡Œè§„åˆ’ï¼šå‡èŒã€è½¬å²—ã€‚è½¬å‹ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œéœ€è¦æŒç»­åœ°ç§¯ç´¯å’Œæœ‰ç›®çš„åœ°è¿›è¡Œè§„åˆ’ã€‚å¦‚æœç¡®å®šå½“å‰é¢†åŸŸä¸æ˜¯è‡ªå·±æ„Ÿå…´è¶£çš„ï¼Œå¯ä»¥è¯„ä¼°ä¸€ä¸‹å“ªäº›æ˜¯è‡ªå·±æ„Ÿå…´è¶£å¹¶ä¸”å…·å¤‡èƒœä»»åŠ›çš„ï¼Œç„¶åå†å»è®¾è®¡å’Œè§„åˆ’è‡ªå·±çš„è½¬å‹è·¯å¾„ï¼ŒåŒæ—¶é‡ç‚¹çœ‹ä¸€ä¸‹ï¼Œæœ‰å“ªäº›æ–¹å¼ï¼Œå¯ä»¥è®©è‡ªå·±çš„èƒ½åŠ›åœ¨å½“å‰çš„å·¥ä½œä¸­å¾—åˆ°ç§¯ç´¯å’Œè®­ç»ƒï¼Œæˆ–è€…åœ¨å½“å‰å·¥ä½œä¸­èƒ½å¤Ÿç§¯ç´¯å“ªäº›èµ„æºï¼Œè®©è‡ªå·±å¯ä»¥æ›´é¡ºåˆ©åœ°è¿‡æ¸¡åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚\n    å¦‚æœæ˜¯èƒ½åŠ›ä¸è¶³ï¼šé€‚å½“è°ƒæ•´é¢„æœŸï¼Œæ­£ç¡®ä½¿ç”¨èƒ½åŠ›ç®¡ç†ç­–ç•¥\n é€‚å½“è°ƒæ•´é¢„æœŸï¼šåˆç†è¯„ä¼°è‡ªå·±çš„èƒ½åŠ›å’Œèµ„æºï¼Œé€‚å½“è°ƒæ•´å·¥ä½œç›®æ ‡ï¼Œé¿å…å®Œç¾ä¸»ä¹‰å€¾å‘ã€‚ è¯„ä¼°è‡ªå·±å½“ä¸‹èƒ½åŠ›çš„è¾¹ç•Œï¼Œå¯¹äºè¶…å‡ºèƒ½åŠ›èŒƒå›´çš„äº‹æƒ…ï¼Œå¯»æ±‚åˆ«äººçš„å¸®åŠ©ï¼Œèƒ½å¤Ÿå¯»æ±‚å¸®åŠ©ï¼Œä¹Ÿæ˜¯èŒåœºä¸­ä¸€é¡¹å…³é”®çš„èƒ½åŠ›ï¼Œè¿™æ ·å¯ä»¥é¿å…è‡ªå·±å‡ºç°å‹åŠ›çˆ†æ£šï¼ŒåŒæ—¶ä¹Ÿä¸è‡³äºæŠŠäº‹æƒ…æç ¸ã€‚ ä½¿ç”¨æ­£ç¡®çš„èƒ½åŠ›ç®¡ç†ç­–ç•¥ï¼ˆè¿™ç‚¹éå¸¸éå¸¸éå¸¸å…³é”®ï¼‰ã€‚  äººçš„æˆé•¿æ˜¯çº¿æ€§ç¼“æ…¢çš„ï¼Œè€Œæœ‰æ—¶å€™äº‹æƒ…çš„éš¾åº¦ä¼šè¶…å‡ºæˆ‘ä»¬å½“ä¸‹çš„èƒ½åŠ›æ°´å¹³ï¼Œå› æ­¤ç„¦è™‘å’Œå±æœºæ„Ÿå°±ä¼šäº§ç”Ÿã€‚è¿™æ—¶å€™æœ€ç¬¨çš„æ–¹å¼å°±æ˜¯ä¸€ä¸ªäººä¼å›¾é€šè¿‡ä¸ªäººçš„å­¦ä¹ å’ŒåŠªåŠ›æ¥è§£å†³é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åšåŠ æ³•ï¼Œè¿™ç§ä¼šè®©è‡ªå·±é™·å…¥â€œç–²äºåº”ä»˜â€ã€â€œäº‹æƒ…è¶Šåšè¶Šå¤šâ€ã€â€œè¶Šæ¥è¶Šå¿™â€çš„çŠ¶æ€ï¼Œå› ä¸ºèƒ½åŠ›æå‡çš„é€Ÿåº¦å’Œè§£å†³é—®é¢˜çš„é€Ÿåº¦è·Ÿä¸ä¸Šè¦æ±‚ï¼Œå¯¼è‡´ä¸æ–­äº§ç”Ÿæ›´å¤šçš„é—®é¢˜ï¼Œé—®é¢˜è¶Šç§¯è¶Šå¤šï¼Œè‡ªå·±çš„çŠ¶æ€ä¹Ÿè¶Šæ¥è¶Šå·®ã€‚ æœ€å¥½çš„èƒ½åŠ›ç®¡ç†ç­–ç•¥æ˜¯ï¼šå‡-ä¹˜-é™¤-åŠ   å…ˆåšå‡æ³•ï¼Œçœ‹å“ªäº›äº‹æƒ…å…¶å®æ˜¯å¯ä»¥ä¸ç”¨åšçš„ï¼Œæˆ–è€…å¯ä»¥æˆæƒå…¶ä»–äººæ¥åšçš„ï¼Œç»™è‡ªå·±ç•™å‡ºæ›´å¤šæ—¶é—´å»åšé«˜æ æ†çš„æ€è€ƒå’Œè§„åˆ’ï¼Œè®©è‡ªå·±ä»æ—‹è½¬çš„é™€èºçŠ¶æ€å…ˆæŠ½èº«å‡ºæ¥ã€‚ å†åšä¹˜æ³•ï¼Œé¢å¯¹æˆ‘ä»¬é è‡ªå·±æ— åŠ›è§£å†³çš„äº‹æƒ…ï¼Œå¼•å…¥æ›´å¤šçš„äººè¿›æ¥ï¼Œåˆ©ç”¨é›†ä½“çš„æ™ºæ…§å’Œèµ„æºè§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯è®©è‡ªå·±æˆä¸ºå¢é•¿çš„ç“¶é¢ˆã€‚ å†åšé™¤æ³•ï¼Œæ ¹æ®è¦å®Œæˆçš„ç›®æ ‡ï¼Œè¿›è¡Œäº‹æƒ…çš„åˆ†è§£ï¼Œæ‰¾åˆ°åˆé€‚çš„äººå»åšå…·ä½“çš„äº‹æƒ…ã€‚ æœ€åæ‰æ˜¯åšåŠ æ³•ï¼Œä¸æ–­å­¦ä¹ å’Œæå‡å„ç§çŸ¥è¯†å’ŒæŠ€èƒ½ï¼Œè®©è‡ªå·±çš„ç»éªŒå’Œèƒ½åŠ›æå‡ä¸Šæ¥ï¼Œè¿™æ˜¯éœ€è¦æ—¶é—´çš„ç§¯ç´¯çš„ã€‚        å¦‚æœæ˜¯ä»·å€¼ä¸è¶³ï¼šé‡æ–°å®¡è§†ç°æœ‰å·¥ä½œçš„ä»·å€¼ï¼ŒåŒæ—¶é“¾æ¥æ›´å¤šä»·å€¼\n åˆ—å‡ºè‡ªå·±å½“ä¸‹é˜¶æ®µæœ€å¸Œæœ›åœ¨å·¥ä½œä¸­æ‹¿åˆ°çš„ä»·å€¼ï¼Œæ˜¯ç‰©è´¨å›æŠ¥ã€ç²¾ç¥è®¤å¯ã€æ˜¯å­¦ä¹ çš„æœºä¼šã€è¿˜æ˜¯é“¾æ¥æ›´å¤šçš„ç¤¾ä¼šèµ„æºï¼Ÿ æ€è€ƒç°æœ‰å·¥ä½œå¦‚ä½•èƒ½å¤Ÿäº§ç”Ÿã€é“¾æ¥ã€æˆ–è€…è¯´æ’¬åŠ¨æ›´å¤šä»·å€¼ï¼›èº«è¾¹æ€»æ˜¯æœ‰è¶³å¤Ÿçš„æœºä¼šè®©æˆ‘ä»¬å»å®ç°è‡ªå·±çš„ä»·å€¼ã€‚ æ¢ä¸åŒçš„è§†è§’ã€è§’åº¦çœ‹äº‹æƒ…çš„ä»·å€¼ï¼Œæœ‰æ—¶å€™å…¶å®æˆ‘ä»¬çš„æ ¸å¿ƒä»·å€¼å·²ç»è¢«æ»¡è¶³äº†ï¼Œä½†äººå¾€å¾€å®¹æ˜“é«˜ä¼°æš‚æ—¶æœªè¢«æ»¡è¶³çš„ä»·å€¼ï¼ŒåŒæ—¶å¿½ç•¥å’Œä½ä¼°å·²ç»æ»¡è¶³çš„ä»·å€¼ã€‚é€šè¿‡é‡æ–°è¯„ä¼°å’Œç†è§£ä¸€ä»½å·¥ä½œçš„ä»·å€¼ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å·²ç»è¢«æ»¡è¶³çš„ä»·å€¼ã€‚ åœ¨æ›´å¤§çš„æ—¶é—´æ¡†æ¶å†…è¯„ä¼°ç°æœ‰å·¥ä½œçš„ä»·å€¼ï¼Œäººä»¬ç»å¸¸ä»…åœ¨ä¸€ä¸ªè¾ƒçŸ­çš„æ—¶é—´æ¡†æ¶å†…è¯„ä»·äº‹æƒ…çš„ä»·å€¼ï¼Œè€Œå¿½ç•¥é•¿æœŸä»·å€¼ã€‚æˆ‘ä»¬é™¤äº†çœ‹é™æ€çš„å½“ä¸‹çš„ä»·å€¼ï¼Œä¹Ÿè¦çœ‹æœªæ¥çš„ä»·å€¼å˜åŒ–è¶‹åŠ¿ã€‚ æ¢ç´¢è½¬æ¢å·¥ä½œçš„å¯èƒ½æ€§ï¼šå¦‚æœç»è¿‡ä»¥ä¸Šæ–¹é¢çš„åŠªåŠ›ï¼Œä»ç„¶è®¤ä¸ºå·¥ä½œä»·å€¼ä¸æ˜¯è‡ªå·±æƒ³è¦çš„ï¼Œå¯ä»¥åŠªåŠ›æ™‹å‡åˆ°ä¸‹ä¸€é˜¶æ®µçš„å²—ä½ï¼Œæˆ–è½¬å²—åˆ°å…¶ä»–å·¥ä½œä¸Šã€‚    å¦‚æœæ˜¯ä¸‰æ–¹é¢éƒ½æ¬ ç¼ºï¼šæŒ–æ˜å…´è¶£ã€åˆ©ç”¨ç°æœ‰æœºä¼šå’Œå¹³å°æå‡èƒ½åŠ›\n  å…·ä½“è¯´ï¼Œæœ‰ä¸¤ä¸ªå»ºè®®ï¼š\n æŒ–æ˜è‡ªå·±çš„å…´è¶£ç‚¹ï¼šä¼˜å…ˆä»æˆ‘ä»¬è‡ªèº«æœ€å®¹æ˜“å½±å“çš„éƒ¨åˆ†å¼€å§‹æ“ä½œï¼Œä¹Ÿå°±æ˜¯ç®¡ç†è‡ªå·±çš„å…´è¶£ç‚¹ï¼Œæå‡è‡ªå·±å‘ç°å…´è¶£çš„èƒ½åŠ›ï¼Œå¯ä»¥å¤šæƒ³æƒ³è‡ªå·±åœ¨åšå“ªäº›äº‹æƒ…çš„æ—¶å€™æœ€å¿«ä¹ï¼Œç°åœ¨çš„å·¥ä½œæœ‰æ²¡æœ‰å“ªäº›æ–¹é¢èƒ½è®©æˆ‘ä»¬æœ‰å¿«ä¹çš„ä½“éªŒã€‚ åŒæ—¶å…³æ³¨èƒ½åŠ›æå‡ï¼šåœ¨â€œä¸‰å¶è‰â€æ¨¡å‹ä¸­ï¼Œåªæœ‰å…·å¤‡äº†èƒ½åŠ›æˆ‘ä»¬æ‰èƒ½å…‘æ¢ä»·å€¼ï¼Œè€Œä»·å€¼åˆå¯ä»¥ä¿ƒè¿›æˆ‘ä»¬å¯¹ä¸€ä»¶äº‹æƒ…äº§ç”Ÿå…´è¶£ï¼Œå› æ­¤å…ˆæå‡èƒ½åŠ›ï¼Œå¹¶ä¸”é€šè¿‡èƒ½åŠ›é“¾æ¥ä»·å€¼ï¼Œä¹Ÿæ˜¯æ”¹å˜çš„å…³é”®ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨èŒä¸šå‘å±•è¿‡ç¨‹ä¸­ï¼Œå¯¹æˆ‘ä»¬å½±å“æœ€å¤§çš„å…¶å®æ˜¯ä¸€äº›é€šç”¨èƒ½åŠ›ï¼Œæ¯”å¦‚æ²Ÿé€šèƒ½åŠ›ã€åˆ†æé—®é¢˜æœ¬è´¨çš„èƒ½åŠ›ã€è¡¨è¾¾å’Œè¾“å‡ºè§‚ç‚¹çš„èƒ½åŠ›ã€å½±å“åˆ«äººçš„èƒ½åŠ›ã€é¡¹ç›®ç®¡ç†èƒ½åŠ›ç­‰ç­‰ï¼Œè€Œè¿™äº›èƒ½åŠ›çš„ä¿®ç‚¼å’ŒåŸ¹å…»æ˜¯ä¸åˆ†å²—ä½å’ŒèŒä¸šçš„ï¼Œå› æ­¤å¦‚æœåœ¨å…´è¶£ã€èƒ½åŠ›ã€ä»·å€¼éƒ½ç¼ºå¤±ã€æˆ‘ä»¬è‡ªèº«å°šä¸”ä¸å…·å¤‡é€‰æ‹©èµ„æ ¼å’Œè®®ä»·èƒ½åŠ›çš„æ—¶å€™ï¼Œæœ€å¥½çš„é€‰æ‹©æ°æ°æ˜¯ä¸“å¿ƒäºç›®å‰å·²æœ‰çš„æœºä¼šï¼Œçœ‹çœ‹åœ¨å½“å‰çš„å²—ä½ä¸Šå¦‚ä½•æå‡è‡ªå·±çš„èƒ½åŠ›ï¼Œä»è€Œä¸ºä»¥åæ›´å¥½åœ°é“ºè·¯ã€‚è¿™æ˜¯å¯¹å¾ˆå¤šèŒåœºæ–°äººçš„å»ºè®®ã€‚  ä½•æ—¶ç”¨ å“ªäº›æ—¶å€™å¯ä»¥åˆ©ç”¨â€œä¸‰å¶è‰â€æ¨¡å‹å±•å¼€è°ˆè¯å‘¢ï¼Ÿä¸å¦¨ä»ä»¥ä¸‹åœºæ™¯å…¥æ‰‹ï¼Œç›¸åŒçš„ç›®æ ‡éƒ½æ˜¯æŒ–æ˜ä¸ªäººçœŸå®çš„æ„Ÿå—å’ŒçŠ¶æ€ï¼ŒæŒ–æ˜å†…åœ¨åŠ¨æœºï¼Œæ‰¾åˆ°æ”¹å–„çš„çªç ´å£ï¼š\n ç»©æ•ˆæ²Ÿé€š è½¬å²—è°ˆè¯ ç¦»èŒæŒ½ç•™ æ—¥å¸¸å®šæœŸ 1-on-1 å‘˜å·¥è°ƒç ”ç»“æŸåçš„æ·±åº¦ä¸ªäººè®¿è°ˆ ä¸å®šæœŸä¸ªäººæ£€æŸ¥å’Œå›é¡¾åæ€  å¯å‘ å¯¹ä¸ªäººçš„å¯å‘ï¼š\n èŒä¸šå®šä½è¦ç»“åˆå…´è¶£å’Œèƒ½åŠ›ï¼Œåªæœ‰å…´è¶£æ²¡èƒ½åŠ›é¡¶å¤šæ˜¯çˆ±å¥½ï¼Œæœ‰èƒ½åŠ›ä½†æ²¡æœ‰å…´è¶£ä¹Ÿä¸å¯æŒç»­å‘å±• åšæœªæ¥ 2 å¹´å·¦å³çš„å‘å±•è§„åˆ’ï¼Œæœ€å¥½ 2-3 å¹´ä¸Šä¸€ä¸ªå°é˜¶ï¼Œå¼€å¯ä¸‹ä¸€è½®å¾ªç¯ åŸ¹å…»ä»ç§¯æçš„è§†è§’æ„å»ºäº‹æƒ…ä»·å€¼çš„èƒ½åŠ›ï¼Œæ‹¥æœ‰ä¸€åŒå–„äºå‘ç°ç¾çš„çœ¼ç› å¯¹ç®¡ç†è€…çš„å¯å‘ï¼š é¼“åŠ±è€å‘˜å·¥åšæ–°äº‹ï¼Œè€äººå¸¦æ–°ä¸šåŠ¡ ä¸åŒçš„äººã€æˆ–è€…åŒä¸€ä¸ªäººåœ¨ä¸åŒé˜¶æ®µï¼Œæ‰€è¿½æ±‚çš„ä»·å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¦å–„äºé€šè¿‡æŒ–æ˜å·¥ä½œå’Œä¸ªäººä»·å€¼é‡åˆçš„éƒ¨åˆ†ï¼Œæå‡å·¥ä½œåŠ¨åŠ› é™¤äº†ç‰©è´¨å›æŠ¥ï¼Œä¹Ÿè¦å»ºè®¾â€œç²¾ç¥å›æŠ¥â€ï¼Œå¦‚è®¤å¯ã€ç§¯æå¥åº·çš„å›¢é˜Ÿæ°›å›´ã€ä¸šåŠ¡çš„é•¿æœŸä»·å€¼å’Œç¤¾ä¼šä»·å€¼ã€å²—ä½èƒ½æä¾›çš„æ½œåœ¨èµ„æºå’Œæˆé•¿æœºä¼š  ","permalink":"https://zhenfeng-zhu.github.io/post/%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87%E4%B8%89%E5%8F%B6%E8%8D%89%E6%A8%A1%E5%9E%8B%E6%8A%A2%E6%95%91%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81/","summary":"ä»€ä¹ˆæ˜¯ä¸‰å¶è‰æ¨¡å‹ å·¥ä½œçš„æœ¬è´¨æ˜¯ï¼Œé€šè¿‡ä»·å€¼åˆ›é€ å®Œæˆä»·å€¼å…‘ç°ã€‚æˆ‘ä»¬èƒ½å¤Ÿè¿›è¡Œä»·å€¼åˆ›é€ çš„å‰ææ˜¯å¯¹æ‰€ä»äº‹çš„å·¥ä½œå†…å®¹æœ‰å…´è¶£ï¼Œå…´è¶£åŠ ä¸ŠæŒç»­çš„æŠ•å…¥ï¼Œè®©æˆ‘ä»¬å…·å¤‡å®Œæˆå·¥ä½œæ‰€éœ€è¦çš„èƒ½åŠ›ã€‚é€šè¿‡èƒ½åŠ›åˆ›é€ ä»·å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ç‰©è´¨å›æŠ¥å’Œç²¾ç¥å›æŠ¥ï¼Œè¿™äº›ä¸œè¥¿è®©æˆ‘ä»¬æ„Ÿå—åˆ°ä»·å€¼æ„Ÿå’Œæ»¡è¶³æ„Ÿï¼Œä»è€Œæœ‰æ›´å¼ºçš„å…´è¶£æŠ•å…¥åˆ°å·¥ä½œä¸­ï¼Œè¿™æ ·å½¢æˆä¸€ä¸ªé—­ç¯ã€‚\næ‰€ä»¥å®Œç¾çš„å·¥ä½œåº”è¯¥åŒ…å«å…´è¶£ã€èƒ½åŠ›ã€ä»·å€¼ä¸‰ä¸ªæ–¹é¢ã€‚\n æˆ‘ä»¬æ„Ÿå…´è¶£çš„ï¼› æˆ‘ä»¬æœ‰èƒ½åŠ›èƒœä»»çš„ï¼› èƒ½å¤Ÿå›é¦ˆç»™æˆ‘ä»¬ä»·å€¼çš„ï¼Œä¸æˆ‘ä»¬å½“ä¸‹æ‰€è¿½æ±‚çš„ä»·å€¼è§‚ç›¸ç¬¦çš„ã€‚  å½“ä»¥ä¸Šä¸‰ä¸ªæ–¹é¢éƒ½è·å¾—æ»¡è¶³æ—¶ï¼Œæˆ‘ä»¬ä½“éªŒåˆ°çš„æ˜¯å¿«ä¹ã€å¯¹å·¥ä½œæœ‰çƒ­æƒ…ã€æœ‰æˆå°±æ„Ÿå’ŒæŒæ§æ„Ÿã€è§‰å¾—å·¥ä½œæœ‰æ„ä¹‰ã€æœ‰ä»·å€¼ã€‚ç›¸åï¼Œå¦‚æœå½“æŸä¸€æ–¹é¢å¾—ä¸åˆ°æ»¡è¶³æ—¶ï¼Œæˆ‘ä»¬ä¼šäº§ç”Ÿè´Ÿé¢çš„ä½“éªŒå’Œæƒ…ç»ªã€‚\nä¸‰å¶è‰æ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡æˆ‘ä»¬åœ¨å·¥ä½œä¸­è¡¨ç°å‡ºçš„æƒ…ç»ªçŠ¶æ€ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œè‡ªæˆ‘è§‰å¯Ÿï¼Œæˆ–è€…å¸®åŠ©åˆ«äººåˆ¤æ–­å½“ä¸‹èŒä¸šå‘å±•çš„çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Œå“ªé‡Œå­˜åœ¨é—®é¢˜ï¼Œåº”è¯¥ä»ä½•å¤„ç€æ‰‹è§£å†³é—®é¢˜ï¼Œä¿ƒè¿›å‘å±•ã€‚\nä¸ç†æƒ³çš„èŒä¸šçŠ¶æ€å’Œå…¸å‹ç‰¹å¾\n å…´è¶£ç¼ºå¤±ï¼šåŒå€¦ï¼Œæ˜“æ„Ÿäººç¾¤ï¼šå·¥ä½œ 3 å¹´ä»¥ä¸Šï¼Œæˆ–åŒä¸€ä¸ªå²—ä½å·¥ä½œ 2 å¹´ä»¥ä¸Šï¼Œå·²ç»åº¦è¿‡äº†èµ·æ­¥é€‚åº”é˜¶æ®µï¼Œåœ¨å‘å±•æœŸå‡ºç°å·¥ä½œå€¦æ€   å¿ƒç†ååº”ï¼šåŒå€¦ï¼Œè®°å¿†åŠ›ä¸‹é™ï¼Œååº”é€Ÿåº¦å˜æ…¢ï¼Œé•¿æ—¶é—´çš„åŒå€¦å®¹æ˜“æ¼”åŒ–ä¸ºæŠ‘éƒ èº«ä½“ååº”ï¼šæ‰‹è„šå†°å‡‰ï¼Œå‘å†·ï¼Œå¤´ç–¼ï¼Œæ³¨æ„åŠ›æ¶£æ•£ï¼Œè¡ŒåŠ¨é€Ÿåº¦ä¸‹é™   èƒ½åŠ›ç¼ºå¤±ï¼šç„¦è™‘ï¼Œæ˜“æ„Ÿäººç¾¤ï¼šåˆšè¿›å…¥èŒåœºã€åˆšæ™‹å‡ã€åˆšè¿›å…¥æ–°çš„å²—ä½ã€å·¥ä½œæŒ‘æˆ˜å¤§æ—¶  å¿ƒç†ååº”ï¼šæ˜“æ€’ï¼Œæš´èºï¼Œè¯´è¯å£°éŸ³å¿«ï¼Œå®¹æ˜“æƒ…ç»ªæ¿€åŠ¨ èº«ä½“ååº”ï¼šå¤±çœ ï¼Œå‘çƒ§ï¼Œèƒƒç—…ï¼Œå¤´ç–¼   ä»·å€¼ç¼ºå¤±ï¼šå¤±è½ï¼Œæ˜“æ„Ÿäººç¾¤ï¼šå·¥ä½œå¾—ä¸åˆ°å›æŠ¥å’Œè®¤å¯æ—¶ã€æ‰€åšäº‹æƒ…ä¸è‡ªå·±çš„ä»·å€¼è§‚å‘ç”Ÿå†²çªæ—¶  å¿ƒç†ååº”ï¼šçŸ­æœŸä¼šæœ‰æŠ±æ€¨å’Œæ„¤æ€’çš„è¡¨ç°ï¼Œå·¥ä½œæ²¡åŠ¨åŠ› èº«ä½“ååº”ï¼šè¡ŒåŠ¨é€Ÿåº¦ä¸‹é™    å¦‚ä½•ä½¿ç”¨ å½“æˆ‘ä»¬è‡ªå·±æˆ–è€…å…¶ä»–äººé™·å…¥åˆ°ä¸ç†æƒ³çš„å·¥ä½œçŠ¶æ€ä¸­ï¼Œæ‰¾åˆ°æˆ‘ä»¬å¯»æ±‚å¸®åŠ©æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥è¯†åˆ«é—®é¢˜å¹¶ä½œå‡ºåŠªåŠ›æ”¹å–„ã€‚\næ­¥éª¤ 1ï¼šçŠ¶æ€è¯„ä¼°   å¯¹äºå·¥ä½œçŠ¶æ€çœ‹èµ·æ¥æ¯”è¾ƒå¥½çš„äººå¯ä»¥è¿™æ ·æé—®ï¼šâ€œä½ è§‰å¾—ç°åœ¨çš„å·¥ä½œçŠ¶æ€å¯¹ä½ æ¥è¯´ï¼Œåœ¨æ–°é²œæ„Ÿã€æŒæ§æ„Ÿå’Œæ»¡è¶³æ„Ÿæ–¹é¢åˆ†åˆ«å¯ä»¥æ‰“å¤šå°‘åˆ†ï¼ˆ1-10 åˆ†ï¼‰ï¼Ÿå¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„çœŸå®æ„Ÿå—ï¼Œåœ¨è¿™ä¸‰æ–¹é¢æ‰“ä¸ªåˆ†ã€‚â€\n æ„Ÿåˆ°å·¥ä½œæ–°é²œã€å¿«ä¹æœ‰è¶£ï¼› å¯¹å·¥ä½œæœ‰æŒæ§æ„Ÿï¼Œèƒ½ä½“éªŒåˆ°æˆå°±æ„Ÿï¼› å·¥ä½œç»™ä½ å¸¦æ¥æ»¡è¶³æ„Ÿå’Œå¹¸ç¦æ„Ÿï¼›    å¯¹äºå·¥ä½œçŠ¶æ€çœ‹èµ·æ¥ä¸å¥½çš„äººå¯ä»¥è¿™æ ·æé—®ï¼šâ€œæƒ…ç»ªå¯ä»¥åæ˜ æˆ‘ä»¬åœ¨å·¥ä½œä¸­é¢ä¸´çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æƒ…ç»ªçš„è‡ªè¯„ï¼Œäº†è§£æˆ‘ä»¬å·¥ä½œä¸­çš„ä¸»è¦é—®é¢˜åœ¨å“ªé‡Œï¼Œå¯ä»¥æ ¹æ®ä½ ç°åœ¨çš„çœŸå®æ„Ÿå—ï¼Œåœ¨ä»¥ä¸‹ä¸‰ä¸ªæƒ…ç»ªæ–¹é¢åˆ†åˆ«æ‰“ä¸ªåˆ†ï¼ˆ1-10 åˆ†ï¼‰ã€‚â€\n å¯¹å·¥ä½œæ„Ÿåˆ°åŒå€¦ã€æä¸èµ·æ¥å…´è¶£ï¼› å¯¹å·¥ä½œæ„Ÿåˆ°ç„¦è™‘ã€ç¼ºå°‘æŒæ§æ„Ÿã€ç»å¸¸æ„Ÿåˆ°ä¸å®‰ï¼› å¯¹å·¥ä½œæ„Ÿåˆ°å¤±è½ã€ç¼ºå°‘ä»·å€¼æ„Ÿï¼›    å…¸å‹æ‰“åˆ†ç»„åˆ\u0026amp;çŠ¶æ€åˆ¤æ–­\n å…´è¶£é«˜ï¼Œèƒ½åŠ›ä½ï¼Œä»·å€¼è¿˜å¯ä»¥ï¼šå¤„äºèµ·æ­¥å‘å±•æœŸï¼Œå› ä¸ºå…´è¶£æ˜¯åœ¨çš„ï¼Œæ„å‘³ç€æ„¿æ„æŒç»­åœ°æŠ•å…¥å’Œå­¦ä¹ ï¼Œæœªæ¥ä»æœ‰è¾ƒå¤§å‘å±•ç©ºé—´ï¼Œå½“ä¸‹éœ€è¦é‡ç‚¹åšçš„æ˜¯å…³æ³¨èƒ½åŠ›çš„æå‡ã€‚ å…´è¶£ä½ï¼Œä½†æ˜¯èƒ½åŠ›å’Œä»·å€¼å›æŠ¥ç›¸å¯¹é«˜ï¼šå¤„äºå¹³å°æœŸï¼Œå¾ˆå¤šèŒåœºè€å‘˜å·¥ä¼šæœ‰è¿™æ ·çš„æ„Ÿè§‰ï¼Œå…´è¶£ä¸€èˆ¬ï¼Œä½†æ˜¯èƒ½ hold ä½å½“å‰çš„å·¥ä½œï¼Œä»·å€¼å›æŠ¥ä¹Ÿä¸é”™ï¼Œé€šå¸¸è¿™ä¸ªæ—¶å€™å‘˜å·¥çŸ­æœŸä¼šç›¸å¯¹ç¨³å®šï¼Œå› ä¸ºå·¥ä½œä¸­èƒ½å¤Ÿæ‹¿åˆ°è‡ªå·±æƒ³è¦çš„ä»·å€¼ï¼Œå› æ­¤æš‚æ—¶ä¸ä¼šæœ‰å˜åŒ–ï¼Œä½†å› ä¸ºå¯¹å·¥ä½œå·²ç»äº§ç”Ÿäº†å€¦æ€ çš„æ„Ÿè§‰ï¼ŒèŒä¸šå‘å±•ä¼šé™·å…¥ä¸€æ®µåœæ»çš„é˜¶æ®µï¼Œæœªæ¥çš„ä¸Šå‡å’Œæˆé•¿ä¼šç›¸å¯¹å—é™åˆ¶ï¼Œéœ€è¦æ’¬åŠ¨æ–°çš„å…´è¶£å’Œä»·å€¼å¢é•¿ç‚¹ï¼Œæ‰èƒ½è¿›é˜¶åˆ°æ–°çš„é˜¶æ®µã€‚ å…´è¶£é«˜ï¼Œèƒ½åŠ›ä¹Ÿè¿˜å¯ä»¥ï¼Œä½†ä»·å€¼ä½ï¼šè™½ç„¶å¯¹å·¥ä½œæœ‰å…´è¶£ä¹Ÿèƒ½èƒœä»»ï¼Œä½†å¾—åˆ°çš„ä»·å€¼æ— æ³•ä»¤è‡ªå·±æ»¡è¶³æˆ–è€…è¯´ä¸è‡ªå·±å†…å¿ƒçœŸå®æƒ³è¦çš„æœ‰ä¸€å®šå·®è·ï¼Œè¿™ä¸ªä»·å€¼ä¸ä¸€å®šæŒ‡ç‰©è´¨å›æŠ¥ï¼Œä¹ŸæŒ‡ç²¾ç¥å’Œå¿ƒç†éœ€æ±‚ä¸Šçš„æ»¡è¶³ï¼Œæ¯”å¦‚æ˜¯å¦æœ‰æ„ä¹‰æ„Ÿï¼Œæ˜¯å¦è¢«è®¤å¯ï¼Œæ˜¯å¦èƒ½å¤Ÿä½“éªŒåˆ°è‡ªå·±æƒ³è¦çš„äººé™…å…³ç³»ã€‚è¿™ä¸ªæ—¶å€™é€šå¸¸éœ€è¦æ¾„æ¸…ä¸‹è‡ªå·±æƒ³è¦çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Œç„¶åå†æ ¹æ®è‡ªå·±æƒ³è¦çš„ä»·å€¼å°è¯•è½¬æ¢æ–¹å‘ï¼Œæˆ–è€…åœ¨åŸæœ‰çš„å·¥ä½œä¸Šé“¾æ¥ã€æ’¬åŠ¨æ›´å¤šä»·å€¼ã€‚  åˆ’é‡ç‚¹ï¼š å¥½çš„èŒä¸šç”Ÿæ¶¯æ˜¯èƒ½å¤ŸæŒç»­ä¸æ–­åœ°æ‰¾åˆ°å…´è¶£ã€æå‡èƒ½åŠ›ã€å…‘æ¢ä»·å€¼ï¼Œé€šå¸¸ 2-3 å¹´æ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œç„¶åæ—¢æœ‰äº‹æƒ…å¯¹æˆ‘ä»¬çš„å¸å¼•åŠ›ä¼šä¸‹é™ï¼Œè¿™æ˜¯å®¢è§‚è§„å¾‹ï¼Œæˆ‘ä»¬è¦ä¸æ–­æ‰¾åˆ°æ–°çš„äº‹æƒ…ã€æ–°çš„å…´è¶£ç‚¹å’Œä»·å€¼å¢é•¿ç‚¹ï¼Œè®©æ¯ä¸ªé˜¶æ®µç§¯ç´¯å’Œä¿®ç‚¼çš„èƒ½åŠ›éƒ½æ˜¯åœ¨ä¸ºä¸‹ä¸ªé˜¶æ®µé“ºè·¯ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯æˆ‘ä»¬ä¸æ–­åæ€è‡ªå·±ã€å¹¶ä¸”å’Œå‘¨å›´ç¯å¢ƒäº’åŠ¨ã€å¹¶ä¸”åœ¨äº’åŠ¨ä¸­æŒç»­è°ƒé€‚è‡ªå·±çš„è¿‡ç¨‹ã€‚","title":"å¦‚ä½•é€šè¿‡â€œä¸‰å¶è‰â€æ¨¡å‹æŠ¢æ•‘ä½ çš„å·¥ä½œçŠ¶æ€"},{"content":"æˆé•¿çš„æœ¬è´¨æ˜¯æ½œåŠ›å…‘ç°çš„è¿‡ç¨‹ ä»»ä½•äººéƒ½æœ‰æ½œåŠ›ï¼Œæ½œåŠ›æœ‰é«˜æœ‰ä½ï¼Œæœ‰å¤§æœ‰å°ã€‚\næ½œåŠ›æ˜¯å¾ˆå¤§ï¼Œæ¯ä¸ªäººéƒ½æœ‰å¾ˆå¤§çš„æ½œåŠ›ï¼Œåªæ˜¯å¤§éƒ¨åˆ†äººè¿˜æ²¡æœ‰è¾¾åˆ°è‡ªå·±æ½œåŠ›å…‘ç°çš„ä¸‹é™ï¼Œæ›´åˆ«è¯´ä¸Šé™ã€‚\nè½¯ç´ è´¨ è½¯ç´ è´¨åˆ†ä¸ºä¸‰ç±»ï¼š\n ä¸€ç±»æ˜¯æ€åº¦  å®ƒå¾ˆå¤šæ—¶å€™æ˜¯æ„è¯†çš„ä½“ç°ï¼Œæ¯”å¦‚ä¸»åŠ¨æ€§ã€è´£ä»»å¿ƒã€å¦è¯šã€è¿½æ±‚æè‡´ï¼Œè¿™äº›æœ¬è´¨ä¸Šéƒ½æ˜¯æ˜¯ä¸€ä¸ªæ€åº¦ã€‚\nç¬¬äºŒä¸ªæ˜¯ç‰¹è´¨  ç‰¹è´¨æ˜¯æ¯ä¸ªäººçš„æ€§æ ¼ç‰¹ç‚¹ï¼Œæœ‰äº›å¯ä»¥æ”¹å˜çš„ï¼Œæœ‰äº›æ˜¯æ¯”è¾ƒå›ºåŒ–çš„ã€‚è¿™ä¸ªäººæ˜¯ä¹è§‚è¿˜æ˜¯æ‚²è§‚ï¼Œæœ‰éŸ§æ€§ï¼Œè¿˜æ˜¯æœ‰é‡å¿ƒè¿˜æ˜¯ç›¸å¯¹ä½›ä¸€ç‚¹ï¼Œæ˜¯ä¸æ˜¯èªæ˜ç­‰ã€‚\nå…¶å®ç‰¹è´¨æ²¡æœ‰å¥½å’Œåï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±æ“…é•¿çš„åœ°æ–¹å’Œè‡ªå·±ä¸æ“…é•¿çš„åœ°æ–¹ï¼Œä¸»è¦çœ‹è‡ªå·±èƒ½å¦æ¸…é†’è®¤è¯†åˆ°ã€‚\næœ€åæ˜¯èƒ½åŠ›  èƒ½åŠ›æ˜¯å­¦ä¹ èƒ½åŠ›æŠ€æœ¯åˆ¤æ–­åŠ›æ²Ÿé€šè¡¨è¾¾èƒ½åŠ›ï¼Œè¿™äº›å¯ä»¥é€šè¿‡è®­ç»ƒæé«˜çš„ã€‚\nè½¯ç´ è´¨å†³å®šæˆ‘ä»¬çš„ä¸Šä¸‹é™ ä¸‹é™ï¼Œæ„æ€å°±æ˜¯è¯´æ½œåŠ›æœ€å°‘å¯ä»¥å…‘ç°å‡ºæ¥çš„ä¸œè¥¿ï¼›ä¸Šé™æ˜¯ç†è®ºçš„æœ€é«˜å€¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å¤©èŠ±æ¿ã€‚\næˆ‘ä»¬çš„è½¯ç´ è´¨ï¼Œæœ‰äº›å†³å®šä¸‹é™æœ‰äº›å†³å®šä¸Šé™ã€‚æˆ‘ä»¬è¦æ¸…é†’çš„æ„è¯†åˆ°æ‰€è°“çš„è½¯ç´ è´¨çš„ä¸œè¥¿ï¼Œå“ªäº›æ˜¯åŸºç¡€å†³å®šä¸‹é™è¦ä¿è¯å¥½ï¼Œå“ªäº›æ˜¯ä¸Šé™çš„ä¸œè¥¿è¦æŒ–æ˜å¥½ã€‚\nä¸‹é™çš„è½¯ç´ è´¨ æ­£ç›´ã€è¯šä¿¡å’Œè´£ä»»å¿ƒå¼ºã€‚\nèµ°æ­£é“è€Œä¸èµ°åé—¨ï¼Œå®ˆæ­£åˆå¿ƒï¼Œæ‰æ‰å®å®æŠŠäº‹æƒ…åšå¥½ï¼›è´£ä»»å¿ƒå¼ºï¼Œäº¤ç»™ä½ çš„äº‹æƒ…æ˜¯ä¸æ˜¯åŠªåŠ›åšå¥½ï¼Œè¶³å¤Ÿè‡ªå¾‹ã€‚èƒ½åšåˆ°ä¸Šè¿°å‡ ç‚¹ï¼Œæ½œåŠ›å…‘ç°åŸºæœ¬æ²¡æœ‰é—®é¢˜ã€‚å¦å¤–è¿˜æœ‰åç‰¹è´¨ä¸€äº›çš„èªæ˜å’Œçƒ­çˆ±æŠ€æœ¯ï¼Œèƒ½ä¸èƒ½é€šè¿‡ä¸»åŠ¨ç§¯ææœ‰è´£ä»»å¿ƒï¼Œå¹¶ä¸”ç”¨æ­£ç¡®éæŠ•æœºçš„æ–¹å¼æŠŠäº‹æƒ…åšå¥½ã€‚\nå¦‚æœéƒ½æ‰æ‰å®å®çš„åšå¥½ï¼Œä¸‹é™éƒ½æ˜¯æ¯”è¾ƒé«˜çš„ã€‚\nä¸Šé™çš„è½¯ç´ è´¨  ç¬¬ä¸€ä¸ªè¿½æ±‚æè‡´ã€‚  è¿™å¥è¯æèµ·æ¥å¾ˆç®€å•ï¼Œåšèµ·æ¥å¾ˆéš¾å¾ˆéš¾ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½çªç ´å¤©èŠ±æ¿ï¼Œå°±æ˜¯è¿½æ±‚æè‡´ã€‚ä½†æè‡´ä¸ç­‰äºå®Œç¾ï¼Œä¸ç­‰äºè¿‡åº¦è®¾è®¡ã€‚æè‡´æ˜¯åœ¨å½“å‰æœ‰é™æƒ…å†µä¸‹ä½ æ˜¯ä¸æ˜¯åŠªåŠ›æŠŠè¿™ä»¶äº‹æƒ³å¾—æ›´å¥½ï¼Œè¿˜æœ‰æ²¡æœ‰åšåˆ°æ›´å¥½çš„åœ°æ–¹ï¼ŒåŠªåŠ›æƒ³ä¼˜åŒ–ç©ºé—´åœ¨å“ªé‡Œï¼Œã€‚\nå“ªä¸ªé˜¶æ®µåšå“ªä¸ªäº‹æƒ…æ”¶ç›Šæ˜¯æœ€é«˜çš„ï¼ŒçŸ­æœŸä¸­æœŸé•¿æœŸå„è‡ªçš„è§£é‡Šæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå¹³è¡¡å¥½ï¼Œå»åŠªåŠ›åˆ¤æ–­å½“å‰æ›´ä¼˜è§£æ˜¯ä»€ä¹ˆã€‚\n ç¬¬äºŒï¼Œä¸»åŠ¨ç§¯æã€‚è¿™å¥è¯å¬èµ·æ¥å¾ˆç®€å•ï¼Œå®é™…è¿‡ç¨‹ä¸­ä¸»åŠ¨ç§¯ææœ‰é‡å¿ƒçš„äººå’Œç›¸å¯¹ä½›çš„äººï¼Œæœ€ç»ˆä½ ä¼šå‘ç°æ—¶é—´æ‹‰é•¿ä¸€ç‚¹ï¼Œå¤§å®¶å‘å±•åŒºåˆ«ä¼šéå¸¸å¤§ã€‚\n  å‰©ä¸‹å°±æ˜¯å¥½å¥‡å¿ƒæœ‰éŸ§æ€§ç‹¬ç«‹æ€è€ƒå¼€æ”¾æ¸…æ™°ï¼Œå¯¹æˆåŠŸçš„æ¸´æœ›ï¼Œå…³æ³¨é•¿æœŸæ ¼å±€è¿™äº›éƒ½æ˜¯ä¸Šé™ã€‚\n  ","permalink":"https://zhenfeng-zhu.github.io/post/what_is_growth/","summary":"æˆé•¿çš„æœ¬è´¨æ˜¯æ½œåŠ›å…‘ç°çš„è¿‡ç¨‹ ä»»ä½•äººéƒ½æœ‰æ½œåŠ›ï¼Œæ½œåŠ›æœ‰é«˜æœ‰ä½ï¼Œæœ‰å¤§æœ‰å°ã€‚\næ½œåŠ›æ˜¯å¾ˆå¤§ï¼Œæ¯ä¸ªäººéƒ½æœ‰å¾ˆå¤§çš„æ½œåŠ›ï¼Œåªæ˜¯å¤§éƒ¨åˆ†äººè¿˜æ²¡æœ‰è¾¾åˆ°è‡ªå·±æ½œåŠ›å…‘ç°çš„ä¸‹é™ï¼Œæ›´åˆ«è¯´ä¸Šé™ã€‚\nè½¯ç´ è´¨ è½¯ç´ è´¨åˆ†ä¸ºä¸‰ç±»ï¼š\n ä¸€ç±»æ˜¯æ€åº¦  å®ƒå¾ˆå¤šæ—¶å€™æ˜¯æ„è¯†çš„ä½“ç°ï¼Œæ¯”å¦‚ä¸»åŠ¨æ€§ã€è´£ä»»å¿ƒã€å¦è¯šã€è¿½æ±‚æè‡´ï¼Œè¿™äº›æœ¬è´¨ä¸Šéƒ½æ˜¯æ˜¯ä¸€ä¸ªæ€åº¦ã€‚\nç¬¬äºŒä¸ªæ˜¯ç‰¹è´¨  ç‰¹è´¨æ˜¯æ¯ä¸ªäººçš„æ€§æ ¼ç‰¹ç‚¹ï¼Œæœ‰äº›å¯ä»¥æ”¹å˜çš„ï¼Œæœ‰äº›æ˜¯æ¯”è¾ƒå›ºåŒ–çš„ã€‚è¿™ä¸ªäººæ˜¯ä¹è§‚è¿˜æ˜¯æ‚²è§‚ï¼Œæœ‰éŸ§æ€§ï¼Œè¿˜æ˜¯æœ‰é‡å¿ƒè¿˜æ˜¯ç›¸å¯¹ä½›ä¸€ç‚¹ï¼Œæ˜¯ä¸æ˜¯èªæ˜ç­‰ã€‚\nå…¶å®ç‰¹è´¨æ²¡æœ‰å¥½å’Œåï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±æ“…é•¿çš„åœ°æ–¹å’Œè‡ªå·±ä¸æ“…é•¿çš„åœ°æ–¹ï¼Œä¸»è¦çœ‹è‡ªå·±èƒ½å¦æ¸…é†’è®¤è¯†åˆ°ã€‚\næœ€åæ˜¯èƒ½åŠ›  èƒ½åŠ›æ˜¯å­¦ä¹ èƒ½åŠ›æŠ€æœ¯åˆ¤æ–­åŠ›æ²Ÿé€šè¡¨è¾¾èƒ½åŠ›ï¼Œè¿™äº›å¯ä»¥é€šè¿‡è®­ç»ƒæé«˜çš„ã€‚\nè½¯ç´ è´¨å†³å®šæˆ‘ä»¬çš„ä¸Šä¸‹é™ ä¸‹é™ï¼Œæ„æ€å°±æ˜¯è¯´æ½œåŠ›æœ€å°‘å¯ä»¥å…‘ç°å‡ºæ¥çš„ä¸œè¥¿ï¼›ä¸Šé™æ˜¯ç†è®ºçš„æœ€é«˜å€¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å¤©èŠ±æ¿ã€‚\næˆ‘ä»¬çš„è½¯ç´ è´¨ï¼Œæœ‰äº›å†³å®šä¸‹é™æœ‰äº›å†³å®šä¸Šé™ã€‚æˆ‘ä»¬è¦æ¸…é†’çš„æ„è¯†åˆ°æ‰€è°“çš„è½¯ç´ è´¨çš„ä¸œè¥¿ï¼Œå“ªäº›æ˜¯åŸºç¡€å†³å®šä¸‹é™è¦ä¿è¯å¥½ï¼Œå“ªäº›æ˜¯ä¸Šé™çš„ä¸œè¥¿è¦æŒ–æ˜å¥½ã€‚\nä¸‹é™çš„è½¯ç´ è´¨ æ­£ç›´ã€è¯šä¿¡å’Œè´£ä»»å¿ƒå¼ºã€‚\nèµ°æ­£é“è€Œä¸èµ°åé—¨ï¼Œå®ˆæ­£åˆå¿ƒï¼Œæ‰æ‰å®å®æŠŠäº‹æƒ…åšå¥½ï¼›è´£ä»»å¿ƒå¼ºï¼Œäº¤ç»™ä½ çš„äº‹æƒ…æ˜¯ä¸æ˜¯åŠªåŠ›åšå¥½ï¼Œè¶³å¤Ÿè‡ªå¾‹ã€‚èƒ½åšåˆ°ä¸Šè¿°å‡ ç‚¹ï¼Œæ½œåŠ›å…‘ç°åŸºæœ¬æ²¡æœ‰é—®é¢˜ã€‚å¦å¤–è¿˜æœ‰åç‰¹è´¨ä¸€äº›çš„èªæ˜å’Œçƒ­çˆ±æŠ€æœ¯ï¼Œèƒ½ä¸èƒ½é€šè¿‡ä¸»åŠ¨ç§¯ææœ‰è´£ä»»å¿ƒï¼Œå¹¶ä¸”ç”¨æ­£ç¡®éæŠ•æœºçš„æ–¹å¼æŠŠäº‹æƒ…åšå¥½ã€‚\nå¦‚æœéƒ½æ‰æ‰å®å®çš„åšå¥½ï¼Œä¸‹é™éƒ½æ˜¯æ¯”è¾ƒé«˜çš„ã€‚\nä¸Šé™çš„è½¯ç´ è´¨  ç¬¬ä¸€ä¸ªè¿½æ±‚æè‡´ã€‚  è¿™å¥è¯æèµ·æ¥å¾ˆç®€å•ï¼Œåšèµ·æ¥å¾ˆéš¾å¾ˆéš¾ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½çªç ´å¤©èŠ±æ¿ï¼Œå°±æ˜¯è¿½æ±‚æè‡´ã€‚ä½†æè‡´ä¸ç­‰äºå®Œç¾ï¼Œä¸ç­‰äºè¿‡åº¦è®¾è®¡ã€‚æè‡´æ˜¯åœ¨å½“å‰æœ‰é™æƒ…å†µä¸‹ä½ æ˜¯ä¸æ˜¯åŠªåŠ›æŠŠè¿™ä»¶äº‹æƒ³å¾—æ›´å¥½ï¼Œè¿˜æœ‰æ²¡æœ‰åšåˆ°æ›´å¥½çš„åœ°æ–¹ï¼ŒåŠªåŠ›æƒ³ä¼˜åŒ–ç©ºé—´åœ¨å“ªé‡Œï¼Œã€‚\nå“ªä¸ªé˜¶æ®µåšå“ªä¸ªäº‹æƒ…æ”¶ç›Šæ˜¯æœ€é«˜çš„ï¼ŒçŸ­æœŸä¸­æœŸé•¿æœŸå„è‡ªçš„è§£é‡Šæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå¹³è¡¡å¥½ï¼Œå»åŠªåŠ›åˆ¤æ–­å½“å‰æ›´ä¼˜è§£æ˜¯ä»€ä¹ˆã€‚\n ç¬¬äºŒï¼Œä¸»åŠ¨ç§¯æã€‚è¿™å¥è¯å¬èµ·æ¥å¾ˆç®€å•ï¼Œå®é™…è¿‡ç¨‹ä¸­ä¸»åŠ¨ç§¯ææœ‰é‡å¿ƒçš„äººå’Œç›¸å¯¹ä½›çš„äººï¼Œæœ€ç»ˆä½ ä¼šå‘ç°æ—¶é—´æ‹‰é•¿ä¸€ç‚¹ï¼Œå¤§å®¶å‘å±•åŒºåˆ«ä¼šéå¸¸å¤§ã€‚\n  å‰©ä¸‹å°±æ˜¯å¥½å¥‡å¿ƒæœ‰éŸ§æ€§ç‹¬ç«‹æ€è€ƒå¼€æ”¾æ¸…æ™°ï¼Œå¯¹æˆåŠŸçš„æ¸´æœ›ï¼Œå…³æ³¨é•¿æœŸæ ¼å±€è¿™äº›éƒ½æ˜¯ä¸Šé™ã€‚\n  ","title":"æˆé•¿çš„æœ¬è´¨æ˜¯æ½œåŠ›å…‘ç°çš„è¿‡ç¨‹"},{"content":"geolocator æ˜¯ä¸€ä¸ª flutter çš„åœ°ç†ä½ç½®æ’ä»¶ï¼ŒåŒæ—¶æ”¯æŒ Androidã€iOSã€web å’Œ macosã€‚\nå®‰è£… flutter pub add geolocator ä½¿ç”¨æ–¹å¼ å®šä¹‰ä¸€ä¸ªåŸºç¡€çš„éª¨æ¶\nclass NewGeoRoute extends StatefulWidget {  @override  State\u0026lt;StatefulWidget\u0026gt; createState() {  return NewGeoRouteState();  } }  class NewGeoRouteState extends State\u0026lt;NewGeoRoute\u0026gt; {  String _pos = \u0026#34;\u0026#34;;   Future\u0026lt;Position\u0026gt; _determinLocation() async {   }   @override  void initState() {  super.initState();  _determinLocation().then((value) {  setState(() {  _pos = value.toString();  });  });  }   @override  Widget build(BuildContext context) {  return Scaffold(  appBar: AppBar(  title: const Text(\u0026#34;åœ°ç†ä½ç½®æ¼”ç¤º\u0026#34;),  ),  body: Center(  child: Column(  children: [  () {  if (_pos == \u0026#34;\u0026#34;) {  return const CircularProgressIndicator();  } else {  return Text(\u0026#34;å½“å‰ä½ç½®æ˜¯ï¼š$_pos\u0026#34;);  }  }(),  ],  ),  ),  floatingActionButton: FloatingActionButton(  onPressed: () async {  setState(() {  _pos = \u0026#34;\u0026#34;;  });  var local = await _determinLocation();  setState(() {  _pos = local.toString();  });  },  child: const Icon(Icons.location_city),  ),  );  } } ä½¿ç”¨æ–¹å¼ import \u0026#39;package:geolocator/geolocator.dart\u0026#39;;  Position position = await Geolocator.getCurrentPosition(desiredAccuracy: LocationAccuracy.high); æœ¬æ¬¡é’ˆå¯¹ iosï¼Œéœ€è¦æ·»åŠ  plist æè¿°ï¼š\n\u0026lt;key\u0026gt;NSLocationWhenInUseUsageDescription\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;This app needs access to location when open.\u0026lt;/string\u0026gt; \u0026lt;key\u0026gt;NSLocationAlwaysUsageDescription\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;This app needs access to location when in the background.\u0026lt;/string\u0026gt; XCODE æ‰“å¼€ ","permalink":"https://zhenfeng-zhu.github.io/post/flutter_geolocation/","summary":"geolocator æ˜¯ä¸€ä¸ª flutter çš„åœ°ç†ä½ç½®æ’ä»¶ï¼ŒåŒæ—¶æ”¯æŒ Androidã€iOSã€web å’Œ macosã€‚\nå®‰è£… flutter pub add geolocator ä½¿ç”¨æ–¹å¼ å®šä¹‰ä¸€ä¸ªåŸºç¡€çš„éª¨æ¶\nclass NewGeoRoute extends StatefulWidget {  @override  State\u0026lt;StatefulWidget\u0026gt; createState() {  return NewGeoRouteState();  } }  class NewGeoRouteState extends State\u0026lt;NewGeoRoute\u0026gt; {  String _pos = \u0026#34;\u0026#34;;   Future\u0026lt;Position\u0026gt; _determinLocation() async {   }   @override  void initState() {  super.initState();  _determinLocation().then((value) {  setState(() {  _pos = value.toString();  });  });  }   @override  Widget build(BuildContext context) {  return Scaffold(  appBar: AppBar(  title: const Text(\u0026#34;åœ°ç†ä½ç½®æ¼”ç¤º\u0026#34;),  ),  body: Center(  child: Column(  children: [  () {  if (_pos == \u0026#34;\u0026#34;) {  return const CircularProgressIndicator();  } else {  return Text(\u0026#34;å½“å‰ä½ç½®æ˜¯ï¼š$_pos\u0026#34;);  }  }(),  ],  ),  ),  floatingActionButton: FloatingActionButton(  onPressed: () async {  setState(() {  _pos = \u0026#34;\u0026#34;;  });  var local = await _determinLocation();  setState(() {  _pos = local.","title":"Flutter åœ°ç†ä½ç½®æ’ä»¶ä½¿ç”¨æŒ‡å—"},{"content":"Flutter WeChat Camera Picker ä»¿å¾®ä¿¡èµ„æºé€‰æ‹©å™¨ çš„æ‰©å±•ã€‚ åŸºäº camera å®ç°ç›¸æœºç›¸å…³åŠŸèƒ½ï¼Œphoto_manager å®ç°èµ„æºç›¸å…³å†…å®¹ã€‚\nhttps://pub.flutter-io.cn/packages/wechat_camera_picker/example\nå¼•å…¥åŒ… åœ¨ pubspec.yaml ä¸­å¼•å…¥ä¾èµ–\nwechat_camera_picker: any ä»£ç  demo class NewPictureRoute extends StatefulWidget {  @override  State\u0026lt;StatefulWidget\u0026gt; createState() {  // TODO: implement createState  return NewPictureRouteState();  } }  class NewPictureRouteState extends State\u0026lt;NewPictureRoute\u0026gt; {  AssetEntity? entity;  Uint8List? data;   Future\u0026lt;void\u0026gt; pick(BuildContext context) async {  final Size size = MediaQuery.of(context).size;  final double scale = MediaQuery.of(context).devicePixelRatio;  try {  final AssetEntity? _entity = await CameraPicker.pickFromCamera(  context,  enableRecording: true,  );  if (_entity != null \u0026amp;\u0026amp; entity != _entity) {  entity = _entity;  if (mounted) {  setState(() {});  }  data = await _entity.thumbDataWithSize(  (size.width * scale).toInt(),  (size.height * scale).toInt(),  );  if (mounted) {  setState(() {});  }  }  } catch (e) {  rethrow;  }  }   @override  Widget build(BuildContext context) {  // TODO: implement build  return Scaffold(  appBar: AppBar(  title: Text(\u0026#34;æ‘„åƒæ¼”ç¤ºdemo\u0026#34;),  ),  body: Stack(  children: \u0026lt;Widget\u0026gt;[  if (entity != null \u0026amp;\u0026amp; data != null)  Positioned.fill(child: Image.memory(data!, fit: BoxFit.contain))  else if (entity != null \u0026amp;\u0026amp; data == null)  const Center(child: CircularProgressIndicator())  else  const Center(child: Text(\u0026#39;Click the button to start picking.\u0026#39;)),  ],  ),  floatingActionButton: FloatingActionButton(  onPressed: () {  pick(context);  },  tooltip: \u0026#34;æ‹ç…§\u0026#34;,  child: Icon(Icons.camera),  ),  );  } } ä¿®æ”¹ ios ç›¸å…³é…ç½® ä¿®æ”¹ podfile platform :ios, \u0026#39;9.0\u0026#39; ä¹Ÿå°±æ˜¯æ‰“å¼€è¿™ä¸ªé…ç½®ã€‚\nç„¶å cd åˆ° ios æ–‡ä»¶å¤¹å†…ï¼Œæ‰§è¡Œ pod update å³å¯ã€‚\nä¿®æ”¹ plist è¿›å…¥åˆ° ios/Runneræ–‡ä»¶å¤¹ä¸‹ï¼Œä¿®æ”¹ info.plist\n æ·»åŠ è®¿é—® asset ç›¸å…³çš„é…ç½®   \u0026lt;key\u0026gt;NSAppTransportSecurity\u0026lt;/key\u0026gt; \u0026lt;dict\u0026gt; \u0026lt;key\u0026gt;NSAllowsArbitraryLoads\u0026lt;/key\u0026gt; \u0026lt;true/\u0026gt; \u0026lt;/dict\u0026gt; \u0026lt;key\u0026gt;NSPhotoLibraryUsageDescription\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;Replace with your permission description.\u0026lt;/string\u0026gt; æ·»åŠ è®¿é—® camera ç›¸å…³çš„é…ç½®   \u0026lt;key\u0026gt;NSCameraUsageDescription\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;Can I use the camera please?\u0026lt;/string\u0026gt; \u0026lt;key\u0026gt;NSMicrophoneUsageDescription\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;Can I use the mic please?\u0026lt;/string\u0026gt; åœ¨ xcode å†…è¿è¡Œ ç„¶åå°±å¯ä»¥åœ¨è‡ªå·±æ‰‹æœºä¸Šä½¿ç”¨äº†ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_wechat_camera_picker/","summary":"Flutter WeChat Camera Picker ä»¿å¾®ä¿¡èµ„æºé€‰æ‹©å™¨ çš„æ‰©å±•ã€‚ åŸºäº camera å®ç°ç›¸æœºç›¸å…³åŠŸèƒ½ï¼Œphoto_manager å®ç°èµ„æºç›¸å…³å†…å®¹ã€‚\nhttps://pub.flutter-io.cn/packages/wechat_camera_picker/example\nå¼•å…¥åŒ… åœ¨ pubspec.yaml ä¸­å¼•å…¥ä¾èµ–\nwechat_camera_picker: any ä»£ç  demo class NewPictureRoute extends StatefulWidget {  @override  State\u0026lt;StatefulWidget\u0026gt; createState() {  // TODO: implement createState  return NewPictureRouteState();  } }  class NewPictureRouteState extends State\u0026lt;NewPictureRoute\u0026gt; {  AssetEntity? entity;  Uint8List? data;   Future\u0026lt;void\u0026gt; pick(BuildContext context) async {  final Size size = MediaQuery.of(context).size;  final double scale = MediaQuery.","title":"Flutter WeChat Camera Picker ä½¿ç”¨"},{"content":"æ‘„åƒï¼š https://pub.flutter-io.cn/packages/wechat_camera_picker\nå½•éŸ³ï¼š https://pub.flutter-io.cn/packages/flutter_sound_lite\nå®šä½ï¼š https://pub.flutter-io.cn/packages/geolocator\nå¾ˆå¤šç”¨èµ·æ¥æ¯”åŸç”Ÿè¿˜ç®€å•æ–¹ä¾¿å¾ˆå¤šï¼Œè€Œä¸”è¿˜ä¸ç”¨å†™ä¸¤ä»½ä»£ç \n","permalink":"https://zhenfeng-zhu.github.io/post/flutter_tools/","summary":"æ‘„åƒï¼š https://pub.flutter-io.cn/packages/wechat_camera_picker\nå½•éŸ³ï¼š https://pub.flutter-io.cn/packages/flutter_sound_lite\nå®šä½ï¼š https://pub.flutter-io.cn/packages/geolocator\nå¾ˆå¤šç”¨èµ·æ¥æ¯”åŸç”Ÿè¿˜ç®€å•æ–¹ä¾¿å¾ˆå¤šï¼Œè€Œä¸”è¿˜ä¸ç”¨å†™ä¸¤ä»½ä»£ç ","title":"Flutter å¸¸ç”¨å·¥å…·"},{"content":"ç¬¬ä¸€ä¸ªé—®é¢˜  Cannot run with sound null safety because dependencies don\u0026rsquo;t support null safety\n First, you should read through the guide to understand unsound null safety. If you are sure that you want to run your application with unsound null safety, you can use the following command:\nflutter run \u0026ndash;no-sound-null-safety\nThe \u0026ndash;no-sound-null-safety option is not documented in the article, however, I have not experienced any problems with it for the last few months (and especially not since the whole Flutter framework has been migrated to null safety).\nThe documentation has now been updated to include this. See Testing or running mixed-version programs.\nIDE run arguments/configuration To set this up in your IDE of choice, you can use:\nIn IntelliJ/Android Studio: \u0026ldquo;Edit Configurations\u0026rdquo; (in your run configurations) â†’ \u0026ldquo;Additional run args\u0026rdquo;. In Visual Studio Code: search for \u0026ldquo;Flutter run additional args\u0026rdquo; in your user settings. In both cases, add \u0026ndash;no-sound-null-safety.\nTest configuration For tests, you will want to do the same thing:\nIn IntelliJ/Android Studio: \u0026ldquo;Edit Configurations\u0026rdquo; (in your run configurations) â†’ \u0026ldquo;Additional args\u0026rdquo;. In Visual Studio Code: search for \u0026ldquo;Flutter test additional args\u0026rdquo; in your user settings. In both cases, add \u0026ndash;no-sound-null-safety.\nIn case you were using Visual Studio Code and faced it in your unit test.\nVisual Studio Code â†’ Preferences â†’ Settings â†’ Search setting, type in \u0026ldquo;flutter test\u0026rdquo; â†’ Dart: Flutter Test Additional Args, Add item â†’ Add \u0026ldquo;\u0026ndash;no-sound-null-safety\u0026rdquo;\nç¬¬äºŒä¸ªé—®é¢˜  iOS 14 not letting Flutter apps (still in dev) to launch from the home screen compared to Building/Running from the IDE\n Apparently, this is a known issue of Flutter on iOS 14 for apps in debug mode, see this article on the Flutter website, and this GitHub issue. So for the time being, I believe your main workarounds are the following:\nAlways run the app from the host PC (using flutter run, IDE debug, etc.) Build a release version of your app (instead of debug) and use that on your device, e.g. use flutter run \u0026ndash;release Use a device with iOS 13 or older Use a simulator\nIf you want to use the app without being connected via usb\nOpen the ios folder on Xcode\nMake sure your device is connected\nSelect Product from the menu bar -\u0026gt; Scheme -\u0026gt; Edit Scheme\nOr simply use the shortcut: command + \u0026gt;\nChange the build configure to Release Run the app from Xcode Disconnect your device and you\u0026rsquo;re good to go!\n","permalink":"https://zhenfeng-zhu.github.io/post/flutters/","summary":"ç¬¬ä¸€ä¸ªé—®é¢˜  Cannot run with sound null safety because dependencies don\u0026rsquo;t support null safety\n First, you should read through the guide to understand unsound null safety. If you are sure that you want to run your application with unsound null safety, you can use the following command:\nflutter run \u0026ndash;no-sound-null-safety\nThe \u0026ndash;no-sound-null-safety option is not documented in the article, however, I have not experienced any problems with it for the last few months (and especially not since the whole Flutter framework has been migrated to null safety).","title":"Flutter å¸¸è§é—®é¢˜è®°å½•"},{"content":"æ°¸åˆ«äº† æ­£å¦‚ Semisonic åœ¨ 90 å¹´ä»£çš„çƒ­é—¨æ­Œæ›² \u0026ldquo;Closing Time \u0026ldquo;æ‰€å‘Šè¯‰æˆ‘ä»¬çš„é‚£æ ·ï¼Œæ¯ä¸€ä¸ªæ–°çš„å¼€å§‹éƒ½æ¥è‡ªäºå…¶ä»–ä¸€äº›å¼€å§‹çš„ç»“æŸã€‚æ­å–œä½ ï¼Œé«˜è´µçš„è¯»è€…ï¼Œå®Œæˆäº†è¿™æ¬¡ Clojure ä¹‹æ—…ã€‚æˆ‘å¸Œæœ›ä½ å‘ç°å®ƒæ˜¯æœ‰ä»·å€¼çš„ï¼Œæˆ‘ä¹Ÿå¸Œæœ›ä½ æœŸå¾…ç€æ›´å¤šçš„ä¸œè¥¿ï¼ç›¸ä¿¡æˆ‘ï¼Œè¿˜æœ‰æ›´å¤šçš„ä¸œè¥¿ç­‰ç€ä½ ã€‚\nç›¸ä¿¡æˆ‘ï¼Œè¿˜æœ‰å¾ˆå¤šä¸œè¥¿ã€‚æˆ‘æœ€å–œæ¬¢ Clojure çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒæœ‰ä¸€ä¸ªå®Œæ•´çš„ä¸–ç•Œå¯ä»¥æ¢ç´¢ã€‚é€»è¾‘ç¼–ç¨‹ã€è§£æå™¨ã€ç±»å‹ç³»ç»Ÿâ€¦â€¦åªè¦ä½ èƒ½è¯´å‡ºè®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªæœ‰è¶£é¢†åŸŸï¼Œä½ å°±å¯ä»¥ç”¨ Clojure æ¥ç ”ç©¶å®ƒã€‚æˆ‘æŠŠæˆ‘å¯¹ä¸‹ä¸€æ­¥è¦å»å“ªé‡Œçš„å»ºè®®ç•™ç»™ä½ ã€‚\nå¦‚æœä½ æƒ³å¯¹ Clojure ç”Ÿæ€ç³»ç»Ÿæœ‰ä¸€ä¸ªå¹¿æ³›çš„äº†è§£ï¼Œè¯·æŸ¥çœ‹The Clojure Toolboxï¼Œå®ƒåˆ—å‡ºäº†æ•°ç™¾ä¸ª Clojure é¡¹ç›®ï¼Œå¹¶æŒ‰ç…§å®ƒä»¬æ‰€è§£å†³çš„é—®é¢˜è¿›è¡Œç»„ç»‡ã€‚\nå¦‚æœä½ å¯¹ç½‘ç»œç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹æ˜¯ Luminus æ¡†æ¶ï¼ˆLuminus - ä¸€ä¸ª Clojure ç½‘ç»œæ¡†æ¶ï¼‰ã€‚å®ƒçš„æ–‡æ¡£éå¸¸å¥½ï¼Œä½ å¾ˆå¿«å°±ä¼šæœ‰ä¸€ä¸ªç½‘ç«™åœ¨è¿è¡Œã€‚\nè¦æƒ³äº†è§£ Clojure çš„æœ€æ–°åŠ¨æ€ï¼ŒEric Normand çš„ Clojure Gazzette æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ„æºï¼ˆæ³¨å†Œæ¯å‘¨åŠŸèƒ½ç¼–ç¨‹é€šè®¯ï¼‰ã€‚å½“ç„¶ï¼Œè¿˜æœ‰ Clojure é‚®ä»¶åˆ—è¡¨ï¼ˆhttps://groups.google.com/forum/#!forum/clojureï¼‰å’Œ Clojure subreddit ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ã€å‹å¥½çš„åœ°æ–¹ï¼ˆhttp://www.reddit.com/r/clojureï¼‰ã€‚\nå¦‚æœ Twitter æ˜¯ä½ é€‰æ‹©çš„ç¤¾äº¤åª’ä½“ï¼Œé‚£ä¹ˆ@swannodette (David Nolen), @gigasquid (Carin Meier), @puredanger (Alex Miller), @ztellman (Zach Tellman), @bbatsov (Bozidar Batsov) å’Œ @stuartsierra (Stuart Sierra) æ˜¯ä½ çš„å°çº¢å¸½ã€‚ä½ ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘ï¼Œ@nonrecursive!\nå†è§äº†ï¼Œå°èŒ¶æ¯ï¼Œç¥ä½  Clojuring æ„‰å¿«\n","permalink":"https://zhenfeng-zhu.github.io/post/farewell/","summary":"æ°¸åˆ«äº† æ­£å¦‚ Semisonic åœ¨ 90 å¹´ä»£çš„çƒ­é—¨æ­Œæ›² \u0026ldquo;Closing Time \u0026ldquo;æ‰€å‘Šè¯‰æˆ‘ä»¬çš„é‚£æ ·ï¼Œæ¯ä¸€ä¸ªæ–°çš„å¼€å§‹éƒ½æ¥è‡ªäºå…¶ä»–ä¸€äº›å¼€å§‹çš„ç»“æŸã€‚æ­å–œä½ ï¼Œé«˜è´µçš„è¯»è€…ï¼Œå®Œæˆäº†è¿™æ¬¡ Clojure ä¹‹æ—…ã€‚æˆ‘å¸Œæœ›ä½ å‘ç°å®ƒæ˜¯æœ‰ä»·å€¼çš„ï¼Œæˆ‘ä¹Ÿå¸Œæœ›ä½ æœŸå¾…ç€æ›´å¤šçš„ä¸œè¥¿ï¼ç›¸ä¿¡æˆ‘ï¼Œè¿˜æœ‰æ›´å¤šçš„ä¸œè¥¿ç­‰ç€ä½ ã€‚\nç›¸ä¿¡æˆ‘ï¼Œè¿˜æœ‰å¾ˆå¤šä¸œè¥¿ã€‚æˆ‘æœ€å–œæ¬¢ Clojure çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒæœ‰ä¸€ä¸ªå®Œæ•´çš„ä¸–ç•Œå¯ä»¥æ¢ç´¢ã€‚é€»è¾‘ç¼–ç¨‹ã€è§£æå™¨ã€ç±»å‹ç³»ç»Ÿâ€¦â€¦åªè¦ä½ èƒ½è¯´å‡ºè®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªæœ‰è¶£é¢†åŸŸï¼Œä½ å°±å¯ä»¥ç”¨ Clojure æ¥ç ”ç©¶å®ƒã€‚æˆ‘æŠŠæˆ‘å¯¹ä¸‹ä¸€æ­¥è¦å»å“ªé‡Œçš„å»ºè®®ç•™ç»™ä½ ã€‚\nå¦‚æœä½ æƒ³å¯¹ Clojure ç”Ÿæ€ç³»ç»Ÿæœ‰ä¸€ä¸ªå¹¿æ³›çš„äº†è§£ï¼Œè¯·æŸ¥çœ‹The Clojure Toolboxï¼Œå®ƒåˆ—å‡ºäº†æ•°ç™¾ä¸ª Clojure é¡¹ç›®ï¼Œå¹¶æŒ‰ç…§å®ƒä»¬æ‰€è§£å†³çš„é—®é¢˜è¿›è¡Œç»„ç»‡ã€‚\nå¦‚æœä½ å¯¹ç½‘ç»œç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹æ˜¯ Luminus æ¡†æ¶ï¼ˆLuminus - ä¸€ä¸ª Clojure ç½‘ç»œæ¡†æ¶ï¼‰ã€‚å®ƒçš„æ–‡æ¡£éå¸¸å¥½ï¼Œä½ å¾ˆå¿«å°±ä¼šæœ‰ä¸€ä¸ªç½‘ç«™åœ¨è¿è¡Œã€‚\nè¦æƒ³äº†è§£ Clojure çš„æœ€æ–°åŠ¨æ€ï¼ŒEric Normand çš„ Clojure Gazzette æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ„æºï¼ˆæ³¨å†Œæ¯å‘¨åŠŸèƒ½ç¼–ç¨‹é€šè®¯ï¼‰ã€‚å½“ç„¶ï¼Œè¿˜æœ‰ Clojure é‚®ä»¶åˆ—è¡¨ï¼ˆhttps://groups.google.com/forum/#!forum/clojureï¼‰å’Œ Clojure subreddit ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ã€å‹å¥½çš„åœ°æ–¹ï¼ˆhttp://www.reddit.com/r/clojureï¼‰ã€‚\nå¦‚æœ Twitter æ˜¯ä½ é€‰æ‹©çš„ç¤¾äº¤åª’ä½“ï¼Œé‚£ä¹ˆ@swannodette (David Nolen), @gigasquid (Carin Meier), @puredanger (Alex Miller), @ztellman (Zach Tellman), @bbatsov (Bozidar Batsov) å’Œ @stuartsierra (Stuart Sierra) æ˜¯ä½ çš„å°çº¢å¸½ã€‚ä½ ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘ï¼Œ@nonrecursive!\nå†è§äº†ï¼Œå°èŒ¶æ¯ï¼Œç¥ä½  Clojuring æ„‰å¿«","title":"Farewell æ°¸åˆ«äº†"},{"content":"Bootï¼ŒèŠ±å“¨çš„ Clojure æ„å»ºæ¡†æ¶ Boot æ˜¯ Leiningen çš„æ›¿ä»£å“ï¼Œæä¾›åŒæ ·çš„åŠŸèƒ½ã€‚Leiningen æ›´å—æ¬¢è¿ï¼ˆæˆªè‡³ 2015 å¹´å¤å¤©ï¼‰ï¼Œä½†æˆ‘ä¸ªäººå–œæ¬¢ç”¨ Boot å·¥ä½œï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“æ‰©å±•ã€‚æœ¬é™„å½•è§£é‡Šäº† Boot çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶æŒ‡å¯¼ä½ ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª Boot ä»»åŠ¡ã€‚å¦‚æœä½ å¯¹ä½¿ç”¨ Boot æ„å»ºé¡¹ç›®æ„Ÿå…´è¶£ï¼Œè¯·æŸ¥çœ‹å®ƒçš„ GitHub READMEï¼ˆGitHub - boot-clj/boot: Build tooling for Clojure.ï¼‰å’Œå®ƒçš„ wikiï¼ˆHome - boot-clj/boot Wiki - GitHubï¼‰ã€‚\næ³¨æ„ æˆªè‡³æœ¬æ–‡å†™ä½œæ—¶ï¼ŒBoot å¯¹ Windows çš„æ”¯æŒæœ‰é™ã€‚Boot å›¢é˜Ÿæ¬¢è¿å¤§å®¶çš„è´¡çŒ®!\nBoot çš„æŠ½è±¡ Boot ç”± Micha Niskin å’Œ Alan Dipert åˆ›å»ºï¼Œæ˜¯å¯¹ Clojure å·¥å…·é¢†åŸŸçš„ä¸€ä¸ªæœ‰è¶£è€Œå¼ºå¤§çš„è¡¥å……ã€‚ä»è¡¨é¢ä¸Šçœ‹ï¼Œå®ƒæ˜¯æ„å»º Clojure åº”ç”¨ç¨‹åºå’Œä»å‘½ä»¤è¡Œè¿è¡Œ Clojure ä»»åŠ¡çš„ä¸€ç§ä¾¿æ·æ–¹å¼ã€‚æ·±å…¥ç ”ç©¶ä¸€ä¸‹ï¼Œä½ ä¼šå‘ç° Boot å°±åƒ Git å’Œ Unix çš„çˆ±æƒ…ç»“æ™¶ï¼Œå®ƒæä¾›çš„æŠ½è±¡ä½¿ä½ åœ¨æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„äº¤å‰ç‚¹ä¸Šç¼–å†™ä»£ç æ—¶æ›´åŠ æ„‰å¿«ã€‚\nUnix æä¾›äº†æˆ‘ä»¬éƒ½å¾ˆç†Ÿæ‚‰çš„æŠ½è±¡ï¼Œä»¥è‡³äºæˆ‘ä»¬è®¤ä¸ºå®ƒä»¬æ˜¯ç†æ‰€å½“ç„¶çš„ã€‚(å¶å°”å¸¦ä½ çš„ç”µè„‘å»åƒä¸€é¡¿å¥½çš„é¤å…ä¼šæ­»å—ï¼Ÿ) è¿›ç¨‹æŠ½è±¡è®©ä½ æŠŠç¨‹åºæ¨ç†æˆç‹¬ç«‹çš„é€»è¾‘å•å…ƒï¼Œå¯ä»¥é€šè¿‡ STDIN å’Œ STDOUT æ–‡ä»¶æè¿°ç¬¦è½»æ¾åœ°ç»„æˆä¸€ä¸ªæµå¤„ç†ç®¡é“ã€‚è¿™äº›æŠ½è±¡ä½¿æŸäº›ç±»å‹çš„æ“ä½œï¼Œå¦‚æ–‡æœ¬å¤„ç†ï¼Œå˜å¾—éå¸¸ç›´æ¥ã€‚\nåŒæ ·ï¼ŒBoot ä¹Ÿæä¾›äº†ä¸€äº›æŠ½è±¡ï¼Œä½¿å¾—ç‹¬ç«‹çš„æ“ä½œå¾ˆå®¹æ˜“è¢«ç»„åˆæˆæ„å»ºå·¥å…·æœ€ç»ˆè¦åšçš„é‚£ç§å¤æ‚ã€åè°ƒçš„æ“ä½œï¼Œæ¯”å¦‚å°† ClojureScript è½¬æ¢ä¸º JavaScriptã€‚Â Boot çš„ä»»åŠ¡æŠ½è±¡è®©ä½ å¯ä»¥è½»æ¾åœ°å®šä¹‰é€»è¾‘å•å…ƒï¼Œé€šè¿‡æ–‡ä»¶é›†åˆè¿›è¡Œé€šä¿¡ã€‚æ–‡ä»¶é›†åˆæŠ½è±¡å¯ä»¥è·Ÿè¸ªä¸æ–­å˜åŒ–çš„æ„å»ºç¯å¢ƒï¼Œå¹¶æä¾›ä¸€ä¸ªå®šä¹‰æ˜ç¡®ã€å¯é çš„ä»»åŠ¡åè°ƒæ–¹æ³•ã€‚\nè¿™å°±æ˜¯å¾ˆå¤šé«˜å±‚æ¬¡çš„æè¿°ï¼Œå¸Œæœ›èƒ½å¸å¼•ä½ çš„æ³¨æ„åŠ›ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘å¸¦ç€ä¸€æ¿ä¸€çœ¼çš„éšå–»ç¦»å¼€ä½ ï¼Œé‚£å°±å¤ªä¸¢äººäº†ã€‚å“¦ï¼Œä¸ï¼Œäº²çˆ±çš„è¯»è€…ï¼Œè¿™åªæ˜¯å¼€èƒƒèœè€Œå·²ã€‚åœ¨æœ¬é™„å½•çš„å…¶ä½™éƒ¨åˆ†ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å»ºç«‹è‡ªå·±çš„ Boot ä»»åŠ¡ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šå‘ç°ï¼Œæ„å»ºå·¥å…·å®é™…ä¸Šæ˜¯æœ‰æ¦‚å¿µåŸºç¡€çš„ã€‚\nä»»åŠ¡ åƒ makeã€rakeã€grunt å’Œå…¶ä»–ä»¥å‰çš„æ„å»ºå·¥å…·ä¸€æ ·ï¼ŒBoot è®©ä½ å®šä¹‰ä»»åŠ¡ã€‚Â ä»»åŠ¡æ˜¯å‘½åçš„æ“ä½œï¼Œæ¥å—ç”±æŸä¸ªä¸­é—´ç¨‹åºï¼ˆmakeã€rakeã€Bootï¼‰è°ƒåº¦çš„å‘½ä»¤è¡Œé€‰é¡¹ã€‚\nBoot æä¾›äº†è°ƒåº¦ç¨‹åºbootå’Œä¸€ä¸ª Clojure åº“ï¼Œä½¿ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨deftaskå®æ¥å®šä¹‰å‘½åçš„æ“ä½œåŠå…¶å‘½ä»¤è¡Œé€‰é¡¹ã€‚ä¸ºäº†çœ‹çœ‹æ‰€æœ‰çš„å¤§æƒŠå°æ€ªï¼Œè®©æˆ‘ä»¬æ¥åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œç¼–ç¨‹æ•™ç¨‹é¼“åŠ±ä½ å†™ä»£ç æ¥æ‰“å° \u0026ldquo;Hello World\u0026rdquo;ï¼Œä½†æˆ‘å¸Œæœ›æˆ‘çš„ä¾‹å­èƒ½æœ‰çœŸå®çš„æ•ˆç”¨ï¼Œæ‰€ä»¥ä½ çš„ä»»åŠ¡æ˜¯æ‰“å° \u0026ldquo;æˆ‘çš„è£¤å­ç€ç«äº†ï¼\u0026rdquo; è¿™ä¸ªä¿¡æ¯å®¢è§‚ä¸Šæ›´æœ‰ç”¨ã€‚é¦–å…ˆï¼Œå®‰è£… Bootï¼›ç„¶ååˆ›å»ºä¸€ä¸ªåä¸ºboot-walkthroughçš„æ–°ç›®å½•ï¼Œå¯¼èˆªåˆ°è¯¥ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º*build.boot**çš„æ–‡ä»¶ï¼Œ*ç„¶åè¿™æ ·å†™ã€‚\n(deftask fire \u0026#34;Prints \u0026#39;My pants are on fire!\u0026#39;\u0026#34; [] (println \u0026#34;My pants are on fire!\u0026#34;)) ç°åœ¨ç”¨boot fireä»å‘½ä»¤è¡Œè¿è¡Œè¿™ä¸ªä»»åŠ¡ï¼›ä½ åº”è¯¥çœ‹åˆ°ä½ å†™çš„ä¿¡æ¯è¢«æ‰“å°åˆ°ç»ˆç«¯ã€‚è¿™ä¸ªä»»åŠ¡å±•ç¤ºäº†ä¸‰ä¸ªä»»åŠ¡ç»„ä»¶ä¸­çš„ä¸¤ä¸ªï¼šä»»åŠ¡è¢«å‘½åä¸ºï¼ˆfireï¼‰ï¼Œå¹¶ä¸”ç”± boot è°ƒåº¦ã€‚è¿™çœŸæ˜¯å¤ªé…·äº†ã€‚ä½ åŸºæœ¬ä¸Šå·²ç»åˆ›å»ºäº†ä¸€ä¸ª Clojure shell è„šæœ¬ï¼Œç‹¬ç«‹çš„ Clojure ä»£ç ï¼Œä½ å¯ä»¥è½»æ¾åœ°ä»å‘½ä»¤è¡Œè¿è¡Œã€‚ä¸éœ€è¦project.cljï¼Œä¸éœ€è¦ç›®å½•ç»“æ„ï¼Œä¹Ÿä¸éœ€è¦å‘½åç©ºé—´!\nè®©æˆ‘ä»¬æ‰©å±•ä¸€ä¸‹è¿™ä¸ªä¾‹å­ï¼Œæ¼”ç¤ºä¸€ä¸‹ä½ å¦‚ä½•ç¼–å†™å‘½ä»¤è¡Œé€‰é¡¹ã€‚\n(deftask fire \u0026#34;Announces that something is on fire\u0026#34; [t thing THING str \u0026#34;The thing that\u0026#39;s on fire\u0026#34; p pluralize bool \u0026#34;Whether to pluralize\u0026#34;] (let [verb (if pluralize \u0026#34;are\u0026#34; \u0026#34;is\u0026#34;)] (println \u0026#34;My\u0026#34; thing verb \u0026#34;on fire!\u0026#34;))) è¯•ç€åƒè¿™æ ·è¿è¡Œè¯¥ä»»åŠ¡ã€‚\nboot fire -t heart # =\u0026gt; My heart is on fire! boot fire -t logs -p # =\u0026gt; My logs are on fire! åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œè¦ä¹ˆä½ æ˜¯æ–°è¿‘æ‹çˆ±ï¼Œè¦ä¹ˆä½ éœ€è¦èµ¶åˆ°æ€¥è¯Šå®¤ã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œä½ æ˜¯ä¸€ä¸ªç«¥å­å†›ï¼Œå°´å°¬åœ°è¡¨è¾¾äº†ä½ å¯¹è¾¾åˆ°åŠŸç»©å‹‹ç« è¦æ±‚çš„å…´å¥‹ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ éƒ½èƒ½è½»æ¾åœ°æŒ‡å®šä»»åŠ¡çš„é€‰é¡¹ã€‚\nè¿™æ¬¡å¯¹fireä»»åŠ¡çš„æ”¹è¿›å¼•å…¥äº†ä¸¤ä¸ªå‘½ä»¤è¡Œé€‰é¡¹ï¼Œthingå’Œpluralizeã€‚è¿™ä¸¤ä¸ªé€‰é¡¹éƒ½æ˜¯ç”¨*åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰*å®šä¹‰çš„ã€‚DSL æ˜¯ä»–ä»¬è‡ªå·±çš„ä¸»é¢˜ï¼Œä½†ç®€å•åœ°è¯´ï¼Œè¿™ä¸ªæœ¯è¯­æŒ‡çš„æ˜¯å¾®å‹è¯­è¨€ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªå¤§çš„ç¨‹åºä¸­ä½¿ç”¨ï¼Œä¸ºç‹­ä¹‰çš„é¢†åŸŸï¼ˆå¦‚å®šä¹‰é€‰é¡¹ï¼‰ç¼–å†™ç´§å‡‘çš„ã€å¯Œæœ‰è¡¨ç°åŠ›çš„ä»£ç ã€‚\nåœ¨é€‰é¡¹thingä¸­ï¼ŒtæŒ‡å®šå…¶çŸ­åç§°ï¼ŒthingæŒ‡å®šå…¶é•¿åç§°ã€‚Â THINGæœ‰ç‚¹å¤æ‚ï¼Œæˆ‘ç¨åä¼šè®²åˆ°å®ƒã€‚Â stræŒ‡å®šäº†é€‰é¡¹çš„ç±»å‹ï¼ŒBoot ç”¨å®ƒæ¥éªŒè¯å‚æ•°å¹¶è¿›è¡Œè½¬æ¢ã€‚Â \u0026quot;ç€ç«çš„ä¸œè¥¿ \u0026quot;æ˜¯è¯¥é€‰é¡¹çš„æ–‡æ¡£ã€‚ä½ å¯ä»¥ç”¨boot task-name -h`åœ¨ç»ˆç«¯æŸ¥çœ‹ä¸€ä¸ªä»»åŠ¡çš„æ–‡æ¡£ã€‚\nboot fire -h # Announces that something is on fire # # Options: # -h, --help Print this help info. # -t, --thing THING Set the thing that\u0026#39;s on fire to THING. # -p, --pluralize Whether to pluralize ç›¸å½“æ£’çš„! Boot ä½¿ç¼–å†™è¦ä»å‘½ä»¤è¡Œè°ƒç”¨çš„ä»£ç å˜å¾—éå¸¸å®¹æ˜“ã€‚\nç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹THINGã€‚THINGæ˜¯ä¸€ä¸ªoptargï¼Œå®ƒè¡¨ç¤ºè¿™ä¸ªé€‰é¡¹éœ€è¦ä¸€ä¸ªå‚æ•°ã€‚å½“ä½ å®šä¹‰ä¸€ä¸ªé€‰é¡¹æ—¶ï¼Œä½ ä¸éœ€è¦åŒ…æ‹¬ optargï¼ˆæ³¨æ„pluralizeé€‰é¡¹æ²¡æœ‰ optargï¼‰ã€‚optarg ä¸å¿…ä¸é€‰é¡¹çš„å…¨åç›¸å¯¹åº”ï¼›ä½ å¯ä»¥ç”¨BILLY_JOEL'æˆ–å…¶ä»–ä½ æƒ³è¦çš„ä¸œè¥¿æ¥ä»£æ›¿THING\u0026rsquo;ï¼Œä»»åŠ¡ä¹Ÿä¼šç…§å¸¸è¿›è¡Œã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ optarg æ¥æŒ‡å®šå¤æ‚çš„é€‰é¡¹ã€‚(è®¿é—®https://github.com/boot-clj/boot/wiki/Task-Options-DSL#complex-optionsäº†è§£ Boot å…³äºè¿™ä¸ªé—®é¢˜çš„æ–‡æ¡£ã€‚) åŸºæœ¬ä¸Šï¼Œå¤æ‚é€‰é¡¹å…è®¸ä½ æŒ‡å®šé€‰é¡¹å‚æ•°åº”è¢«è§†ä¸º Mapã€é›†åˆã€Vectorï¼Œç”šè‡³æ˜¯åµŒå¥—é›†åˆã€‚è¿™æ˜¯å¾ˆå¼ºå¤§çš„ã€‚\nBoot ä¸ºä½ æä¾›äº†ç”¨ Clojure æ„å»ºå‘½ä»¤è¡Œç•Œé¢æ‰€éœ€çš„æ‰€æœ‰å·¥å…·ã€‚è€Œä½ æ‰åˆšåˆšå¼€å§‹å­¦ä¹ å®ƒ!\nThe REPL Boot æœ‰è®¸å¤šæœ‰ç”¨çš„å†…ç½®ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä¸€ä¸ª REPL ä»»åŠ¡ã€‚è¿è¡Œ boot repl æ¥å¯åŠ¨è¿™ä¸ªå°å®¶ä¼™ã€‚Boot çš„ REPL ä¸ Leiningen çš„ç±»ä¼¼ï¼Œå®ƒè´Ÿè´£åŠ è½½ä½ çš„é¡¹ç›®ä»£ç ï¼Œè¿™æ ·ä½ å°±å¯ä»¥éšæ„ç©è€ã€‚ä½ å¯èƒ½è®¤ä¸ºè¿™ä¸é€‚ç”¨äºä½ æ‰€å†™çš„é¡¹ç›®ï¼Œå› ä¸ºä½ åªå†™äº†ä»»åŠ¡ï¼Œä½†å®é™…ä¸Šä½ å¯ä»¥åœ¨ REPL ä¸­è¿è¡Œä»»åŠ¡ï¼ˆæˆ‘çœç•¥äº†boot.user=\u0026gt;æç¤ºï¼‰ã€‚ä½ å¯ä»¥ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‡å®šé€‰é¡¹ã€‚\n(fire \u0026#34;-t\u0026#34; \u0026#34;NBA Jam guy\u0026#34;) ; My NBA Jam guy is on fire! ; =\u0026gt; nil æ³¨æ„ï¼Œé€‰é¡¹çš„å€¼å°±åœ¨é€‰é¡¹çš„åé¢ã€‚\nä½ ä¹Ÿå¯ä»¥ç”¨å…³é”®å­—æ¥æŒ‡å®šä¸€ä¸ªé€‰é¡¹ã€‚\n(fire :thing \u0026#34;NBA Jam guy\u0026#34;) ; My NBA Jam guy is on fire! ; =\u0026gt; nil ä½ ä¹Ÿå¯ä»¥ç»“åˆé€‰é¡¹ã€‚\n(fire \u0026#34;-p\u0026#34; \u0026#34;-t\u0026#34; \u0026#34;NBA Jam guys\u0026#34;) ; My NBA Jam guys are on fire! ; =\u0026gt; nil (fire :pluralize true :thing \u0026#34;NBA Jam guys\u0026#34;) ; My NBA Jam guys are on fire! ; =\u0026gt; nil å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ REPL ä¸­ä½¿ç”¨deftaskï¼Œæ¯•ç«Ÿè¿™åªæ˜¯ Clojureã€‚æˆ‘ä»¬çš„æ”¶è·æ˜¯ï¼ŒBoot å¯ä»¥è®©ä½ æŠŠä»»åŠ¡ä½œä¸º Clojure å‡½æ•°è¿›è¡Œäº¤äº’ï¼Œå› ä¸ºå®ƒä»¬å°±æ˜¯è¿™æ ·çš„ã€‚\nç»„æˆå’Œåè°ƒ å¦‚æœåˆ°ç›®å‰ä¸ºæ­¢ä½ æ‰€çœ‹åˆ°çš„å°±æ˜¯ Boot æ‰€èƒ½æä¾›çš„ä¸€åˆ‡ï¼Œé‚£å®ƒå°†æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„å·¥å…·ï¼Œä½†å®ƒä¸å…¶ä»–æ„å»ºå·¥å…·æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚è®© Boot ä¸ä¼—ä¸åŒçš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥è®©ä½ ç¼–æ’ä»»åŠ¡ã€‚ä¸ºäº†ä¾¿äºæ¯”è¾ƒï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª Rake è°ƒç”¨çš„ä¾‹å­ï¼ˆRake æ˜¯ä¸»è¦çš„ Ruby æ„å»ºå·¥å…·ï¼‰ã€‚\nrake db:create d{:tag :a, :attrs {:href \u0026#34;db:seed\u0026#34;}, :content [\u0026#34;b:migra\u0026#34;]}te db:seed è¿™æ®µä»£ç å°†åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œåœ¨å…¶ä¸Šè¿è¡Œè¿ç§»ï¼Œå¹¶åœ¨ Rails é¡¹ç›®ä¸­è¿è¡Œæ—¶å‘å…¶å¡«å……ç§å­æ•°æ®ã€‚ç„¶è€Œï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒRake å¹¶æ²¡æœ‰æä¾›ä»»ä½•æ–¹æ³•è®©è¿™äº›ä»»åŠ¡ä¹‹é—´ç›¸äº’é€šä¿¡ã€‚æŒ‡å®šå¤šä¸ªä»»åŠ¡åªæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œè®©ä½ ä¸å¿…è¿è¡Œrake db:create; rake db:migrate; rake db:seedã€‚å¦‚æœä½ æƒ³åœ¨ä»»åŠ¡ B ä¸­è®¿é—®ä»»åŠ¡ A çš„ç»“æœï¼Œæ„å»ºå·¥å…·å¹¶ä¸èƒ½å¸®åŠ©ä½ ï¼›ä½ å¿…é¡»è‡ªå·±ç®¡ç†è¿™ç§åè°ƒã€‚é€šå¸¸ï¼Œä½ è¦åšçš„æ˜¯æŠŠä»»åŠ¡ A çš„ç»“æœå¡è¿›æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç‰¹æ®Šä½ç½®ï¼Œç„¶åç¡®ä¿ä»»åŠ¡ B è¯»å–è¿™ä¸ªç‰¹æ®Šä½ç½®ã€‚è¿™çœ‹èµ·æ¥å°±åƒç”¨æ˜“å˜çš„å…¨å±€å˜é‡è¿›è¡Œç¼–ç¨‹ï¼Œè€Œä¸”å®ƒä¹Ÿæ˜¯å¾ˆè„†å¼±çš„ã€‚\nHandler å’Œä¸­é—´ä»¶ Boot é€šè¿‡å°†ä»»åŠ¡è§†ä¸ºä¸­é—´**ä»¶å·¥å‚æ¥è§£å†³è¿™ä¸ªä»»åŠ¡é€šä¿¡é—®é¢˜ã€‚å¦‚æœä½ ç†Ÿæ‚‰ Ringï¼ŒBoot çš„ä»»åŠ¡å·¥ä½œèµ·æ¥éå¸¸ç›¸ä¼¼ï¼Œæ‰€ä»¥è¯·éšæ„è·³åˆ°\u0026ldquo;ä»»åŠ¡æ˜¯ä¸­é—´ä»¶å·¥å‚ \u0026ldquo;ç¬¬ 287 é¡µã€‚å¦‚æœä½ å¯¹ä¸­é—´ä»¶çš„æ¦‚å¿µä¸ç†Ÿæ‚‰ï¼Œè¯·å…è®¸æˆ‘è§£é‡Šä¸€ä¸‹!Â ä¸­é—´ä»¶æŒ‡çš„æ˜¯ç¨‹åºå‘˜éµå®ˆçš„ä¸€å¥—å…¬çº¦ï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥çµæ´»åœ°åˆ›å»ºç‰¹å®šé¢†åŸŸçš„åŠŸèƒ½ç®¡é“ã€‚è¿™æ˜¯ç›¸å½“å¯†é›†çš„ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬è§£é™¤å¯†é›†ã€‚æˆ‘å°†åœ¨æœ¬èŠ‚ä¸­è®¨è®ºçµæ´»çš„éƒ¨åˆ†ï¼Œå¹¶åœ¨\u0026ldquo;æ–‡ä»¶é›†åˆ \u0026ldquo;ç¬¬ 288 é¡µä¸­ä»‹ç»ç‰¹å®šé¢†åŸŸçš„ã€‚\nä¸ºäº†ç†è§£ä¸­é—´ä»¶æ–¹æ³•ä¸æ™®é€šå‡½æ•°ç»„åˆçš„ä¸åŒä¹‹å¤„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç»„åˆæ—¥å¸¸å‡½æ•°çš„ä¾‹å­ã€‚\n(def strinc (comp str inc)) (strinc 3) ; =\u0026gt; \u0026#34;4\u0026#34; è¿™ä¸ªå‡½æ•°ç»„åˆå¹¶æ²¡æœ‰ä»€ä¹ˆæœ‰è¶£çš„åœ°æ–¹ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªå‡½æ•°ç»„åˆæ˜¯å¦‚æ­¤çš„ä¸èµ·çœ¼ï¼Œä»¥è‡³äºæˆ‘ä½œä¸ºä¸€ä¸ªä½œå®¶ï¼Œè¦å¯¹å®ƒè¯´äº›ä»€ä¹ˆéƒ½å¾ˆè´¹åŠ²ã€‚æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œå„è‡ªåšè‡ªå·±çš„äº‹æƒ…ï¼Œç°åœ¨å®ƒä»¬è¢«ç»„æˆäº†ä¸€ä¸ªã€‚Whoop-dee-doo!\nä¸­é—´ä»¶ä¸ºå‡½æ•°ç»„åˆå¼•å…¥äº†ä¸€ä¸ªé¢å¤–çš„æ­¥éª¤ï¼Œä½¿ä½ åœ¨å®šä¹‰å‡½æ•°ç®¡é“æ—¶æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚å‡è®¾åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œä½ æƒ³å¯¹ä»»æ„çš„æ•°å­—è¿”å› \u0026ldquo;æˆ‘ä¸å–œæ¬¢è¿™ä¸ªæ•°å­— X\u0026rdquo;ï¼Œè€Œå¯¹å…¶ä»–çš„ä¸œè¥¿è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åŒ–çš„æ•°å­—ã€‚ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ã€‚\n(defn whiney-str [rejects] {:pre [(set? rejects)]} (fn [x] (if (rejects x) (str \u0026#34;I don\u0026#39;t like \u0026#34; x) (str x)))) (def whiney-strinc (comp (whiney-str #{2}) inc)) (whiney-strinc 1) ; =\u0026gt; \u0026#34;I don\u0026#39;t like 2\u0026#34; ç°åœ¨è®©æˆ‘ä»¬å†è¿›ä¸€æ­¥ã€‚å¦‚æœä½ æƒ³å†³å®šæ˜¯å¦é¦–å…ˆè°ƒç”¨incå‘¢ï¼Ÿæ¸…å• B-1 æ˜¾ç¤ºäº†ä½ å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚\n(defn whiney-middleware [next-handler rejects] {:pre [(set? rejects)]} (fn [x] âŠ (if (= x 1) \u0026#34;I\u0026#39;m not going to bother doing anything to that\u0026#34; (let [y (next-handler x)] (if (rejects y) (str \u0026#34;I don\u0026#39;t like \u0026#34; y) (str y)))))) (def whiney-strinc (whiney-middleware inc #{2})) (whiney-strinc 1) ; =\u0026gt; \u0026#34;I\u0026#39;m not going to bother doing anything to that\u0026#34;  B-1. å‡½æ•°ç»„åˆçš„ä¸­é—´ä»¶æ–¹æ³•è®©ä½ å¼•å…¥é€‰æ‹©æƒ  åœ¨è¿™é‡Œï¼Œä½ ä¸æ˜¯ç”¨compæ¥åˆ›å»ºä½ çš„å‡½æ•°ç®¡é“ï¼Œè€Œæ˜¯å°†ç®¡é“ä¸­çš„ä¸‹ä¸€ä¸ªå‡½æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ä¸­é—´ä»¶å‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å°†incä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™whiney-middlewareä½œä¸ºnext-handlerã€‚Â whiney-middlewareç„¶åè¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¯¥å‡½æ•°å…³é—­äº†incå¹¶æœ‰èƒ½åŠ›é€‰æ‹©æ˜¯å¦è°ƒç”¨å®ƒã€‚ä½ å¯ä»¥åœ¨âŠçœ‹åˆ°è¿™ä¸ªé€‰æ‹©ã€‚\næˆ‘ä»¬è¯´ï¼Œä¸€ä¸ªä¸­é—´ä»¶æŠŠä¸€ä¸ª Handler ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª Handlerã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œwhiney-middlewareå°†ä¸€ä¸ª Handler ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œincï¼Œå®ƒè¿”å›å¦ä¸€ä¸ª Handlerï¼Œå³åŒ¿åå‡½æ•°ï¼Œxæ˜¯å®ƒå”¯ä¸€çš„å‚æ•°ã€‚ä¸­é—´ä»¶ä¹Ÿå¯ä»¥æ¥å—é¢å¤–çš„å‚æ•°ï¼Œå¦‚rejectsï¼Œä½œä¸ºé…ç½®ã€‚å…¶ç»“æœæ˜¯ï¼Œä¸­é—´ä»¶è¿”å›çš„ Handler å¯ä»¥è¡¨ç°å¾—æ›´åŠ çµæ´»ï¼ˆç”±äºé…ç½®ï¼‰ï¼Œè€Œä¸”å®ƒå¯¹å‡½æ•°ç®¡é“æœ‰æ›´å¤šçš„æ§åˆ¶ï¼ˆå› ä¸ºå®ƒå¯ä»¥é€‰æ‹©æ˜¯å¦è°ƒç”¨ä¸‹ä¸€ä¸ª Handlerï¼‰ã€‚\nä»»åŠ¡æ˜¯ä¸­é—´ä»¶å·¥å‚ Boot é€šè¿‡å°†ä¸­é—´ä»¶çš„é…ç½®ä¸ Handler çš„åˆ›å»ºåˆ†å¼€ï¼Œå°†è¿™ç§ä½¿å‡½æ•°ç»„åˆæ›´åŠ çµæ´»çš„æ¨¡å¼å‘å‰æ¨è¿›äº†ä¸€æ­¥ã€‚é¦–å…ˆï¼Œä½ åˆ›å»ºä¸€ä¸ªæ¥å—né…ç½®å‚æ•°çš„å‡½æ•°ã€‚è¿™å°±æ˜¯ä¸­é—´ä»¶å·¥å‚ï¼Œå®ƒè¿”å›ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚ä¸­é—´ä»¶å‡½æ•°å¸Œæœ›å¾—åˆ°ä¸€ä¸ªå‚æ•°ï¼Œå³ä¸‹ä¸€ä¸ª Handlerï¼Œå¹¶è¿”å›ä¸€ä¸ª Handlerï¼Œå°±åƒå‰é¢çš„ä¾‹å­ä¸­ä¸€æ ·ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‘ç‰¢éªšçš„ä¸­é—´ä»¶å·¥å‚ã€‚\n(defn whiney-middleware-factory [rejects] {:pre [(set? rejects)]} (fn [handler] (fn [x] (if (= x 1) \u0026#34;I\u0026#39;m not going to bother doing anything to that\u0026#34; (let [y (handler x)] (if (rejects y) (str \u0026#34;I don\u0026#39;t like \u0026#34; y \u0026#34; :\u0026#39;(\u0026#34;) (str y))))))) (def whiney-strinc ((whiney-middleware-factory #{3}) inc)) æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™æ®µä»£ç ä¸æ¸…å• B-1 å‡ ä¹ç›¸åŒã€‚å˜åŒ–åœ¨äºï¼Œæœ€ä¸Šé¢çš„å‡½æ•°ï¼Œwhiney-middleware-factoryï¼Œç°åœ¨åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œrejectsã€‚å®ƒè¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå³ä¸­é—´ä»¶ï¼Œå®ƒå¸Œæœ›å¾—åˆ°ä¸€ä¸ªå‚æ•°ï¼Œå³ Handlerã€‚å…¶ä½™çš„ä»£ç éƒ½æ˜¯ä¸€æ ·çš„ã€‚\nåœ¨ Boot ä¸­ï¼Œä»»åŠ¡å¯ä»¥å……å½“ä¸­é—´ä»¶å·¥å‚ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬æŠŠfireä»»åŠ¡åˆ†æˆä¸¤ä¸ªä»»åŠ¡ï¼šwhatå’Œfireï¼ˆè§æ¸…å• B-2ï¼‰ã€‚Â whatè®©ä½ æŒ‡å®šä¸€ä¸ªå¯¹è±¡ä»¥åŠå®ƒæ˜¯å¦æ˜¯å¤æ•°ï¼Œè€Œfireåˆ™å®£å¸ƒå®ƒç€ç«äº†ã€‚è¿™æ˜¯ä¼Ÿå¤§çš„æ¨¡å—åŒ–è½¯ä»¶å·¥ç¨‹ï¼Œå› ä¸ºå®ƒå…è®¸ä½ æ·»åŠ å…¶ä»–ä»»åŠ¡ï¼Œå¦‚gnomesï¼Œå®£å¸ƒä¸€ä¸ªä¸œè¥¿è¢«åœ°ç²¾å é¢†äº†ï¼Œè¿™åœ¨å®¢è§‚ä¸ŠåŒæ ·æœ‰ç”¨ã€‚(ä½œä¸ºä¸€ä¸ªç»ƒä¹ ï¼Œå°è¯•åˆ›å»º gnome ä»»åŠ¡ã€‚å®ƒåº”è¯¥å’Œwhatä»»åŠ¡ç»„æˆï¼Œå°±åƒfireä¸€æ ·ï¼‰ã€‚\n(deftask what \u0026#34;Specify a thing\u0026#34; [t thing THING str \u0026#34;An object\u0026#34; p pluralize bool \u0026#34;Whether to pluralize\u0026#34;] (fn middleware [next-handler] âŠ (fn handler [fileset] (next-handler (merge fileset {:thing thing :pluralize pluralize}))))) (deftask fire \u0026#34;Announce a thing is on fire\u0026#34; [] (fn middleware [next-handler] â‹ (fn handler [fileset] (let [verb (if (:pluralize fileset) \u0026#34;are\u0026#34; \u0026#34;is\u0026#34;)] (println \u0026#34;My\u0026#34; (:thing fileset) verb \u0026#34;on fire!\u0026#34;) fileset))))  å®£å¸ƒæŸç‰©ç€ç«çš„å¯ç»„åˆ Boot ä»»åŠ¡çš„å®Œæ•´ä»£ç   ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•åœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œå®ƒã€‚\nboot what -t \u0026#34;pants\u0026#34; -p - fire ä¸‹é¢æ˜¯åœ¨ REPL ä¸­çš„è¿è¡Œæ–¹å¼ã€‚\n(boot (what :thing \u0026#34;pants\u0026#34; :pluralize true) (fire)) ç­‰ä¸€ä¸‹ï¼Œé‚£ä¸ªboot'çš„è°ƒç”¨æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿåœ¨âŠå’Œâ‹çš„filesetåˆæ˜¯æ€ä¹ˆå›äº‹ï¼Ÿç”¨Michaçš„è¯è¯´ï¼Œ\u0026quot;bootå®è´Ÿè´£è®¾ç½®å’Œæ¸…ç†ï¼ˆåˆ›å»ºåˆå§‹æ–‡ä»¶é›†åˆï¼Œåœæ­¢ç”±ä»»åŠ¡å¯åŠ¨çš„æœåŠ¡å™¨ï¼Œè¯¸å¦‚æ­¤ç±»çš„äº‹æƒ…ï¼‰ã€‚ä»»åŠ¡æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥è°ƒç”¨å®ƒä»¬ï¼Œä½†å¦‚æœå®ƒä»¬ä½¿ç”¨äº†æ–‡ä»¶é›†åˆï¼Œå°±ä¼šå¤±è´¥ï¼Œé™¤éä½ é€šè¿‡boot`å®è°ƒç”¨å®ƒä»¬ã€‚\u0026rdquo; è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹æ–‡ä»¶é›†åˆçš„æƒ…å†µã€‚\næ–‡ä»¶é›†åˆ å‰é¢æˆ‘æåˆ°ï¼Œä¸­é—´ä»¶æ˜¯ç”¨æ¥åˆ›å»ºåŸŸç‰¹å®šçš„å‡½æ•°ç®¡é“ã€‚è¿™æ„å‘³ç€æ¯ä¸ª Handler éƒ½æœŸæœ›æ¥æ”¶ç‰¹å®šé¢†åŸŸçš„æ•°æ®å¹¶è¿”å›ç‰¹å®šé¢†åŸŸçš„æ•°æ®ã€‚ä»¥ Ring ä¸ºä¾‹ï¼Œæ¯ä¸ª Handler éƒ½å¸Œæœ›æ”¶åˆ°ä¸€ä¸ªä»£è¡¨ HTTP è¯·æ±‚çš„è¯·æ±‚ Mapï¼Œå®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ã€‚\n{:server-port 80 :request-method :get :scheme :http} æ¯ä¸ª Handler å¯ä»¥é€‰æ‹©ä»¥æŸç§æ–¹å¼ä¿®æ”¹è¿™ä¸ªè¯·æ±‚ Mapï¼Œç„¶åå†ä¼ é€’ç»™ä¸‹ä¸€ä¸ª Handlerï¼Œä¾‹å¦‚ï¼Œæ·»åŠ ä¸€ä¸ª:paramsé”®ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²å’Œ POST å‚æ•°çš„æ¼‚äº® Clojure Mapã€‚ç¯å½¢ Handler è¿”å›ä¸€ä¸ªå“åº” Mapï¼Œç”±:status'ã€:headers\u0026rsquo;å’Œ`:body\u0026rsquo;ä¸‰ä¸ªé”®ç»„æˆï¼Œæ¯ä¸ª Handler å¯ä»¥å†æ¬¡ä»¥æŸç§æ–¹å¼è½¬æ¢è¿™äº›æ•°æ®ï¼Œç„¶åå†è¿”å›ç»™å…¶çˆ¶ Handlerã€‚\nåœ¨ Boot ä¸­ï¼Œæ¯ä¸ª Handler æ¥æ”¶å¹¶è¿”å›ä¸€ä¸ªfilesetã€‚æ–‡ä»¶é›†åˆçš„æŠ½è±¡è®©ä½ æŠŠæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶å½“ä½œä¸å¯æ›´æ”¹çš„æ•°æ®ï¼Œè¿™å¯¹æ„å»ºå·¥å…·æ¥è¯´æ˜¯ä¸€é¡¹ä¼Ÿå¤§çš„åˆ›æ–°ï¼Œå› ä¸ºæ„å»ºé¡¹ç›®æ˜¯ä»¥æ–‡ä»¶ä¸ºä¸­å¿ƒçš„ã€‚ä¾‹å¦‚ï¼Œä½ çš„é¡¹ç›®å¯èƒ½éœ€è¦åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šæ”¾ç½®ä¸´æ—¶çš„ã€ä¸­é—´çš„æ–‡ä»¶ã€‚é€šå¸¸ï¼Œåœ¨å¤§å¤šæ•°æ„å»ºå·¥å…·ä¸­ï¼Œè¿™äº›æ–‡ä»¶è¢«æ”¾ç½®åœ¨ä¸€äº›ç‰¹åˆ«å‘½åçš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼Œproject/target/tmpã€‚è¿™æ ·åšçš„é—®é¢˜æ˜¯ï¼Œproject/target/tmpå®é™…ä¸Šæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå…¶ä»–ä»»åŠ¡å¯èƒ½ä¼šæ„å¤–åœ°æŠŠå®ƒæä¹±ã€‚\nBoot çš„æ–‡ä»¶é›†åˆæŠ½è±¡é€šè¿‡åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šå¢åŠ ä¸€å±‚é—´æ¥æ€§æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¯”æ–¹è¯´ï¼Œä»»åŠ¡ A åˆ›å»ºäº†æ–‡ä»¶ Xï¼Œå¹¶å‘Šè¯‰æ–‡ä»¶é›†åˆæ¥å­˜å‚¨å®ƒã€‚åœ¨å¹•åï¼Œæ–‡ä»¶é›†åˆå°†è¯¥æ–‡ä»¶å­˜å‚¨åœ¨ä¸€ä¸ªåŒ¿åçš„ä¸´æ—¶ç›®å½•ä¸­ã€‚ç„¶åï¼Œè¯¥æ–‡ä»¶é›†åˆè¢«ä¼ é€’ç»™ä»»åŠ¡ Bï¼Œä»»åŠ¡ B ä¿®æ”¹äº†æ–‡ä»¶ X å¹¶è¦æ±‚æ–‡ä»¶é›†åˆå­˜å‚¨ç»“æœã€‚åœ¨å¹•åï¼Œä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œæ–‡ä»¶ Yï¼Œè¢«åˆ›å»ºå’Œå­˜å‚¨ï¼Œä½†æ–‡ä»¶ X ä»ç„¶æ²¡æœ‰è¢«è§¦åŠ¨ã€‚åœ¨ä»»åŠ¡ B ä¸­ï¼Œä¸€ä¸ªæ›´æ–°çš„æ–‡ä»¶é›†åˆè¢«è¿”å›ã€‚è¿™ç›¸å½“äºç”¨ Map åš \u0026ldquo;assoc-in\u0026rdquo;ã€‚ä»»åŠ¡ A ä»ç„¶å¯ä»¥è®¿é—®åŸå§‹æ–‡ä»¶é›†åˆå’Œå®ƒå¼•ç”¨çš„æ–‡ä»¶ã€‚\nåœ¨æ¸…å• B-2 ä¸­çš„what'å’Œfire\u0026rsquo;ä»»åŠ¡ä¸­ï¼Œä½ ç”šè‡³éƒ½æ²¡æœ‰ä½¿ç”¨è¿™äº›å¾ˆé…·çš„æ–‡ä»¶ç®¡ç†åŠŸèƒ½ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå½“ Boot ç»„æˆä»»åŠ¡æ—¶ï¼Œå®ƒå¸Œæœ› Handler èƒ½æ¥æ”¶å¹¶è¿”å› fileset è®°å½•ã€‚å› æ­¤ï¼Œä¸ºäº†è·¨ä»»åŠ¡ä¼ è¾¾ä½ çš„æ•°æ®ï¼Œä½ å·å·åœ°ç”¨(merge fileset {:thing thing :pluralize pluralize})æŠŠå®ƒåŠ åˆ°æ–‡ä»¶é›†åˆè®°å½•ä¸­ã€‚\nè™½ç„¶è¿™æ¶µç›–äº†ä¸­é—´ä»¶å·¥å‚çš„åŸºæœ¬æ¦‚å¿µï¼Œä½†ä½ è¿˜éœ€è¦å­¦ä¹ æ›´å¤šçš„ä¸œè¥¿æ¥å……åˆ†åˆ©ç”¨æ–‡ä»¶é›†åˆçš„ä¼˜åŠ¿ã€‚åœ¨ fileset wikiï¼ˆFilesets - boot-clj/boot Wiki - GitHubï¼‰ä¸­ï¼Œå¯¹ä½¿ç”¨ filesets çš„æœºåˆ¶éƒ½æœ‰è§£é‡Šã€‚åŒæ—¶ï¼Œæˆ‘å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½ç»™ä½ ä¸€ä¸ªå¾ˆå¥½çš„æ¦‚å¿µæ€§æ¦‚è¿°!\næ¥ä¸‹æ¥çš„æ­¥éª¤ æœ¬é™„å½•çš„é‡ç‚¹æ˜¯è§£é‡Š Boot èƒŒåçš„æ¦‚å¿µã€‚ä¸è¿‡ï¼ŒBoot è¿˜æœ‰ä¸€å †å…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚set-env!å’Œtask-options!ï¼Œå½“ä½ çœŸæ­£ä½¿ç”¨å®ƒçš„æ—¶å€™ï¼Œä¼šè®©ä½ çš„ç¼–ç¨‹ç”Ÿæ´»æ›´è½»æ¾ã€‚å®ƒæä¾›äº†æƒŠäººçš„ç¥å¥‡åŠŸèƒ½ï¼Œæ¯”å¦‚æä¾› classpath éš”ç¦»ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç”¨ä¸€ä¸ª JVM è¿è¡Œå¤šä¸ªé¡¹ç›®ï¼Œå¹¶è®©ä½ åœ¨æ— éœ€é‡å¯ REPL çš„æƒ…å†µä¸‹å‘é¡¹ç›®æ·»åŠ æ–°çš„ä¾èµ–é¡¹ã€‚å¦‚æœ Boot è®©ä½ å¿ƒç—’éš¾è€ï¼Œè¯·æŸ¥çœ‹å®ƒçš„ READMEï¼Œäº†è§£æ›´å¤šå…³äºå®é™…ä½¿ç”¨çš„ä¿¡æ¯ã€‚å¦å¤–ï¼Œå®ƒçš„ wiki æä¾›äº†ä¸€æµçš„æ–‡æ¡£ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/appendixb/","summary":"Bootï¼ŒèŠ±å“¨çš„ Clojure æ„å»ºæ¡†æ¶ Boot æ˜¯ Leiningen çš„æ›¿ä»£å“ï¼Œæä¾›åŒæ ·çš„åŠŸèƒ½ã€‚Leiningen æ›´å—æ¬¢è¿ï¼ˆæˆªè‡³ 2015 å¹´å¤å¤©ï¼‰ï¼Œä½†æˆ‘ä¸ªäººå–œæ¬¢ç”¨ Boot å·¥ä½œï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“æ‰©å±•ã€‚æœ¬é™„å½•è§£é‡Šäº† Boot çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶æŒ‡å¯¼ä½ ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª Boot ä»»åŠ¡ã€‚å¦‚æœä½ å¯¹ä½¿ç”¨ Boot æ„å»ºé¡¹ç›®æ„Ÿå…´è¶£ï¼Œè¯·æŸ¥çœ‹å®ƒçš„ GitHub READMEï¼ˆGitHub - boot-clj/boot: Build tooling for Clojure.ï¼‰å’Œå®ƒçš„ wikiï¼ˆHome - boot-clj/boot Wiki - GitHubï¼‰ã€‚\næ³¨æ„ æˆªè‡³æœ¬æ–‡å†™ä½œæ—¶ï¼ŒBoot å¯¹ Windows çš„æ”¯æŒæœ‰é™ã€‚Boot å›¢é˜Ÿæ¬¢è¿å¤§å®¶çš„è´¡çŒ®!\nBoot çš„æŠ½è±¡ Boot ç”± Micha Niskin å’Œ Alan Dipert åˆ›å»ºï¼Œæ˜¯å¯¹ Clojure å·¥å…·é¢†åŸŸçš„ä¸€ä¸ªæœ‰è¶£è€Œå¼ºå¤§çš„è¡¥å……ã€‚ä»è¡¨é¢ä¸Šçœ‹ï¼Œå®ƒæ˜¯æ„å»º Clojure åº”ç”¨ç¨‹åºå’Œä»å‘½ä»¤è¡Œè¿è¡Œ Clojure ä»»åŠ¡çš„ä¸€ç§ä¾¿æ·æ–¹å¼ã€‚æ·±å…¥ç ”ç©¶ä¸€ä¸‹ï¼Œä½ ä¼šå‘ç° Boot å°±åƒ Git å’Œ Unix çš„çˆ±æƒ…ç»“æ™¶ï¼Œå®ƒæä¾›çš„æŠ½è±¡ä½¿ä½ åœ¨æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„äº¤å‰ç‚¹ä¸Šç¼–å†™ä»£ç æ—¶æ›´åŠ æ„‰å¿«ã€‚\nUnix æä¾›äº†æˆ‘ä»¬éƒ½å¾ˆç†Ÿæ‚‰çš„æŠ½è±¡ï¼Œä»¥è‡³äºæˆ‘ä»¬è®¤ä¸ºå®ƒä»¬æ˜¯ç†æ‰€å½“ç„¶çš„ã€‚(å¶å°”å¸¦ä½ çš„ç”µè„‘å»åƒä¸€é¡¿å¥½çš„é¤å…ä¼šæ­»å—ï¼Ÿ) è¿›ç¨‹æŠ½è±¡è®©ä½ æŠŠç¨‹åºæ¨ç†æˆç‹¬ç«‹çš„é€»è¾‘å•å…ƒï¼Œå¯ä»¥é€šè¿‡ STDIN å’Œ STDOUT æ–‡ä»¶æè¿°ç¬¦è½»æ¾åœ°ç»„æˆä¸€ä¸ªæµå¤„ç†ç®¡é“ã€‚è¿™äº›æŠ½è±¡ä½¿æŸäº›ç±»å‹çš„æ“ä½œï¼Œå¦‚æ–‡æœ¬å¤„ç†ï¼Œå˜å¾—éå¸¸ç›´æ¥ã€‚\nåŒæ ·ï¼ŒBoot ä¹Ÿæä¾›äº†ä¸€äº›æŠ½è±¡ï¼Œä½¿å¾—ç‹¬ç«‹çš„æ“ä½œå¾ˆå®¹æ˜“è¢«ç»„åˆæˆæ„å»ºå·¥å…·æœ€ç»ˆè¦åšçš„é‚£ç§å¤æ‚ã€åè°ƒçš„æ“ä½œï¼Œæ¯”å¦‚å°† ClojureScript è½¬æ¢ä¸º JavaScriptã€‚Â Boot çš„ä»»åŠ¡æŠ½è±¡è®©ä½ å¯ä»¥è½»æ¾åœ°å®šä¹‰é€»è¾‘å•å…ƒï¼Œé€šè¿‡æ–‡ä»¶é›†åˆè¿›è¡Œé€šä¿¡ã€‚æ–‡ä»¶é›†åˆæŠ½è±¡å¯ä»¥è·Ÿè¸ªä¸æ–­å˜åŒ–çš„æ„å»ºç¯å¢ƒï¼Œå¹¶æä¾›ä¸€ä¸ªå®šä¹‰æ˜ç¡®ã€å¯é çš„ä»»åŠ¡åè°ƒæ–¹æ³•ã€‚","title":"AppendixB èŠ±å“¨çš„ Boot"},{"content":"ç”¨ Leiningen æ„å»ºå’Œå¼€å‘ ç”¨ä»»ä½•è¯­è¨€ç¼–å†™è½¯ä»¶éƒ½éœ€è¦ç”Ÿæˆå·¥ä»¶ï¼Œå³å¯æ‰§è¡Œæ–‡ä»¶æˆ–åº“åŒ…ï¼Œç”¨äºéƒ¨ç½²æˆ–å…±äº«ã€‚å®ƒè¿˜æ¶‰åŠåˆ°ç®¡ç†ä¾èµ–å·¥ä»¶ï¼Œä¹Ÿç§°ä¸ºä¾èµ–ï¼Œä»¥ç¡®ä¿å®ƒä»¬è¢«åŠ è½½åˆ°ä½ æ­£åœ¨æ„å»ºçš„é¡¹ç›®ä¸­ã€‚Clojurists ä¸­æœ€æµè¡Œçš„ç®¡ç†å·¥ä»¶çš„å·¥å…·æ˜¯ Leiningenï¼Œæœ¬é™„å½•å°†å‘Šè¯‰ä½ å¦‚ä½•ä½¿ç”¨å®ƒã€‚ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Leiningen æ¥å®Œå…¨å¢å¼ºä½ çš„å¼€å‘ç»éªŒï¼Œä½¿ç”¨æ’ä»¶ã€‚\nArtifact Ecosystem å› ä¸º Clojure æ‰˜ç®¡åœ¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šï¼Œæ‰€ä»¥ Clojure çš„å·¥ä»¶æ˜¯ä»¥ JAR æ–‡ä»¶çš„å½¢å¼åˆ†å‘çš„ï¼ˆåœ¨ç¬¬ 12 ç« æœ‰ä»‹ç»ï¼‰ã€‚Java åœ°å·²ç»æœ‰ä¸€ä¸ªå¤„ç† JAR æ–‡ä»¶çš„å®Œæ•´çš„å·¥ä»¶ç”Ÿæ€ç³»ç»Ÿï¼ŒClojure ä¹Ÿä½¿ç”¨å®ƒã€‚ç¥å™¨ç”Ÿæ€ç³»ç»Ÿå¹¶ä¸æ˜¯ä¸€ä¸ªå®˜æ–¹çš„ç¼–ç¨‹æœ¯è¯­ï¼›æˆ‘ç”¨å®ƒæ¥æŒ‡ä»£ç”¨äºè¯†åˆ«å’Œåˆ†å‘ç¥å™¨çš„ä¸€å¥—å·¥å…·ã€èµ„æºå’Œæƒ¯ä¾‹ã€‚Java çš„ç”Ÿæ€ç³»ç»Ÿæ˜¯å›´ç»•ç€ Maven æ„å»ºå·¥å…·å‘å±•èµ·æ¥çš„ï¼Œç”±äº Clojure ä½¿ç”¨è¿™ä¸ªç”Ÿæ€ç³»ç»Ÿï¼Œä½ ä¼šç»å¸¸çœ‹åˆ°å¯¹ Maven çš„å¼•ç”¨ã€‚Maven æ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥å…·ï¼Œå¯ä»¥æ‰§è¡Œå„ç§å¤æ€ªçš„é¡¹ç›®ç®¡ç†ä»»åŠ¡ã€‚å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œä½ ä¸éœ€è¦è·å¾— Maven å­¦çš„åšå£«å­¦ä½å°±èƒ½æˆä¸ºä¸€åæœ‰æ•ˆçš„ Clojuristã€‚ä½ éœ€è¦çŸ¥é“çš„å”¯ä¸€ç‰¹å¾æ˜¯ï¼ŒMaven è§„å®šäº†ä¸€ç§è¯†åˆ« Clojure é¡¹ç›®æ‰€éµå®ˆçš„å·¥ä»¶çš„æ¨¡å¼ï¼Œå®ƒè¿˜è§„å®šäº†å¦‚ä½•åœ¨ Maven ä»“åº“ä¸­æ‰˜ç®¡è¿™äº›å·¥ä»¶ï¼ŒMaven *ä»“åº“åªæ˜¯å­˜å‚¨å·¥ä»¶ä»¥ä¾›åˆ†å‘çš„æœåŠ¡å™¨ã€‚\nIdentification Maven å·¥ä»¶éœ€è¦ä¸€ä¸ªç»„ IDï¼Œä¸€ä¸ªå·¥ä»¶ IDï¼Œä»¥åŠä¸€ä¸ªç‰ˆæœ¬ã€‚ä½ å¯ä»¥åœ¨project.cljæ–‡ä»¶ä¸­ä¸ºä½ çš„é¡¹ç›®æŒ‡å®šè¿™äº›ã€‚ä»¥ä¸‹æ˜¯ä½ åœ¨ç¬¬ä¸€ç« åˆ›å»ºçš„clojure-noobé¡¹ç›®çš„project.cljç¬¬ä¸€è¡Œçš„å†…å®¹ã€‚\n(defproject clojure-noob \u0026#34;0.1.0-SNAPSHOT\u0026#34; clojure-noobæ˜¯ä½ é¡¹ç›®çš„ç»„ ID å’Œå·¥ä»¶ IDï¼Œ\u0026quot;0.1.0-SNAPSHOT\u0026quot;æ˜¯å…¶ç‰ˆæœ¬ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç‰ˆæœ¬æ˜¯æ°¸ä¹…æ€§çš„ï¼›å¦‚æœä½ å°†ä¸€ä¸ªç‰ˆæœ¬ä¸º 0.1.0 çš„å·¥ä»¶éƒ¨ç½²åˆ°å­˜å‚¨åº“ï¼Œä½ ä¸èƒ½å¯¹è¯¥å·¥ä»¶è¿›è¡Œä¿®æ”¹å¹¶ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬å·è¿›è¡Œéƒ¨ç½²ã€‚æ‚¨éœ€è¦æ”¹å˜ç‰ˆæœ¬å·ã€‚(è®¸å¤šç¨‹åºå‘˜å–œæ¬¢ Semantic Versioning ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥åœ¨*Semantic Versioning 2.0.0 | Semantic Versioning.*ä¸­é˜…è¯»åˆ°è¿™ä¸€ç³»ç»Ÿã€‚ï¼‰ å¦‚æœä½ æƒ³è¡¨æ˜è¯¥ç‰ˆæœ¬æ˜¯ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼Œå¹¶ä¸”ä½ è®¡åˆ’ä¸æ–­åœ°æ›´æ–°å®ƒï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç‰ˆæœ¬å·åé¢åŠ ä¸Š-SNAPSHOTã€‚\nå¦‚æœä½ æƒ³è®©ä½ çš„ç»„ ID ä¸ä½ çš„å·¥ä»¶ ID ä¸åŒï¼Œä½ å¯ä»¥ç”¨æ–œçº¿å°†ä¸¤è€…åˆ†å¼€ï¼Œåƒè¿™æ ·ã€‚\n(defproject group-id/artifact-id \u0026#34;0.1.0-SNAPSHOT\u0026#34; é€šå¸¸ï¼Œå¼€å‘è€…ä¼šä½¿ç”¨ä»–ä»¬çš„å…¬å¸åç§°æˆ– GitHub ç”¨æˆ·åä½œä¸ºç»„çš„ IDã€‚\nä¾èµ– ä½ çš„project.cljæ–‡ä»¶è¿˜åŒ…æ‹¬ä¸€è¡Œçœ‹èµ·æ¥åƒè¿™æ ·çš„å†…å®¹ï¼Œå®ƒåˆ—å‡ºäº†ä½ é¡¹ç›®çš„ä¾èµ–ã€‚\n :dependencies [[org.clojure/clojure \u0026#34;1.9.0\u0026#34;]] å¦‚æœä½ æƒ³ä½¿ç”¨ä¸€ä¸ªåº“ï¼Œä½¿ç”¨ä¸ä½ å‘½åé¡¹ç›®æ—¶ç›¸åŒçš„å‘½åæ¨¡å¼å°†å…¶æ·»åŠ åˆ°è¿™ä¸ªä¾èµ– Vector ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³è½»æ¾åœ°å¤„ç†æ—¥æœŸå’Œæ—¶é—´ï¼Œä½ å¯ä»¥æ·»åŠ  clj-time åº“ï¼Œåƒè¿™æ ·ã€‚\n :dependencies [[org.clojure/clojure \u0026#34;1.9.0\u0026#34;] [clj-time \u0026#34;0.9.0\u0026#34;]] ä¸‹æ¬¡ä½ å¯åŠ¨ä½ çš„é¡¹ç›®æ—¶ï¼Œæ— è®ºæ˜¯é€šè¿‡è¿è¡Œå®ƒè¿˜æ˜¯é€šè¿‡å¯åŠ¨ REPLï¼ŒLeiningen éƒ½ä¼šè‡ªåŠ¨ä¸‹è½½ clj-time å¹¶ä½¿å…¶åœ¨ä½ çš„é¡¹ç›®ä¸­å¯ç”¨ã€‚\nClojure ç¤¾åŒºåˆ›é€ äº†å¤§é‡æœ‰ç”¨çš„åº“ï¼Œå¯»æ‰¾å®ƒä»¬çš„å¥½åœ°æ–¹æ˜¯*http://www.clojure-toolbox.com*çš„ Clojure å·¥å…·ç®±ï¼Œå®ƒæ ¹æ®é¡¹ç›®çš„ç›®çš„è¿›è¡Œåˆ†ç±»ã€‚å‡ ä¹æ¯ä¸€ä¸ª Clojure åº“éƒ½åœ¨å…¶ README çš„é¡¶éƒ¨æä¾›äº†å®ƒçš„æ ‡è¯†ç¬¦ï¼Œä½¿ä½ å¾ˆå®¹æ˜“æ‰¾å‡ºå¦‚ä½•æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„ Leiningen ä¾èµ–é¡¹ä¸­ã€‚\næœ‰æ—¶ä½ å¯èƒ½æƒ³ä½¿ç”¨ä¸€ä¸ª Java åº“ï¼Œä½†æ ‡è¯†ç¬¦å¹¶ä¸é‚£ä¹ˆå®¹æ˜“è·å¾—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³æ·»åŠ  Apache Commons Emailï¼Œä½ å¿…é¡»åœ¨ç½‘ä¸Šæœç´¢ï¼Œç›´åˆ°ä½ æ‰¾åˆ°ä¸€ä¸ªåŒ…å«è¿™æ ·å†…å®¹çš„ç½‘é¡µã€‚\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.apache.commons\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;commons-email\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.3.3\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; è¯¥ XML æ˜¯ Java é¡¹ç›®æ²Ÿé€šå…¶ Maven æ ‡è¯†ç¬¦çš„æ–¹å¼ã€‚è¦æŠŠå®ƒæ·»åŠ åˆ° Clojure é¡¹ç›®ä¸­ï¼Œä½ éœ€è¦ä¿®æ”¹:dependenciesVectorï¼Œä½¿å…¶çœ‹èµ·æ¥åƒè¿™æ ·ã€‚\n :dependencies [[org.clojure/clojure \u0026#34;1.9.0\u0026#34;] [clj-time \u0026#34;0.9.0\u0026#34;] [org.apache.commons/commons-email \u0026#34;1.3.3\u0026#34;]] ä¸»è¦çš„ Clojure åº“æ˜¯ Clojarsï¼ˆClojarsï¼‰ï¼Œä¸»è¦çš„ Java åº“æ˜¯ The Central Repositoryï¼ˆMaven Central Repository Searchï¼‰ï¼Œäººä»¬é€šå¸¸åªæŠŠå®ƒç§°ä¸ºCentralï¼Œå°±åƒæ—§é‡‘å±±å±…æ°‘æŠŠæ—§é‡‘å±±ç§°ä¸ºthe cityä¸€æ ·ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™äº›ç½‘ç«™æ¥å¯»æ‰¾åº“å’Œå®ƒä»¬çš„æ ‡è¯†ç¬¦ã€‚\nè¦æŠŠä½ è‡ªå·±çš„é¡¹ç›®éƒ¨ç½²åˆ° Clojarsï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯åœ¨é‚£é‡Œåˆ›å»ºä¸€ä¸ªè´¦æˆ·ï¼Œç„¶ååœ¨ä½ çš„é¡¹ç›®ä¸­è¿è¡Œlein deploy clojarsã€‚è¯¥ä»»åŠ¡ä¼šç”Ÿæˆ Maven å·¥ä»¶æ‰€éœ€çš„ä¸€åˆ‡ï¼ŒåŒ…æ‹¬ POM æ–‡ä»¶ï¼ˆæˆ‘å°±ä¸å¤šè¯´äº†ï¼‰å’Œ JAR æ–‡ä»¶ï¼Œä»¥ä¾¿å‚¨å­˜åœ¨ä»“åº“ä¸­ã€‚ç„¶åå°†å®ƒä»¬ä¸Šä¼ åˆ° Clojarsã€‚\næ’ä»¶ Leiningen è®©ä½ ä½¿ç”¨æ’ä»¶ï¼Œè¿™æ˜¯ä¸€äº›åœ¨ä½ å†™ä»£ç æ—¶èƒ½å¸®åŠ©ä½ çš„åº“ã€‚ä¾‹å¦‚ï¼ŒEastwood æ’ä»¶æ˜¯ä¸€ä¸ª Clojure æ£€æŸ¥å·¥å…·ï¼›å®ƒå¯ä»¥è¯†åˆ«å†™å¾—ä¸å¥½çš„ä»£ç ã€‚ä½ é€šå¸¸è¦åœ¨*$HOME/.lein/profiles.cljæ–‡ä»¶ä¸­æŒ‡å®šä½ çš„æ’ä»¶ã€‚è¦æ·»åŠ  Eastwoodï¼Œä½ è¦æŠŠprofiles.clj*æ”¹æˆè¿™æ ·ã€‚\n{:user {:plugins [[jonase/eastwood \u0026#34;0.2.1\u0026#34;]] ] ã€‚}} è¿™å°±ä¸ºä½ çš„æ‰€æœ‰é¡¹ç›®å¯ç”¨äº†ä¸€ä¸ªeastwood'Leiningenä»»åŠ¡ï¼Œä½ å¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ç”¨lein eastwood\u0026rsquo;è¿è¡Œã€‚\nLeiningen çš„ GitHub é¡¹ç›®é¡µé¢æœ‰å…³äºå¦‚ä½•ä½¿ç”¨é…ç½®æ–‡ä»¶å’Œæ’ä»¶çš„ä¼˜ç§€æ–‡æ¡£ï¼Œå®ƒåŒ…æ‹¬ä¸€ä¸ªæ–¹ä¾¿çš„æ’ä»¶åˆ—è¡¨ã€‚\næ€»ç»“ æœ¬é™„å½•ç€é‡ä»‹ç»äº†é¡¹ç›®ç®¡ç†ä¸­é‚£äº›é‡è¦ä½†åˆéš¾ä»¥äº†è§£çš„æ–¹é¢ï¼Œæ¯”å¦‚ä»€ä¹ˆæ˜¯ Maven ä»¥åŠ Clojure ä¸å®ƒçš„å…³ç³»ã€‚å®ƒå‘ä½ å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Leiningen æ¥å‘½åä½ çš„é¡¹ç›®ï¼ŒæŒ‡å®šä¾èµ–å…³ç³»ï¼Œå¹¶éƒ¨ç½²åˆ° Clojarsã€‚Leiningen ä¸ºè½¯ä»¶å¼€å‘ä»»åŠ¡æä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä½†å¹¶ä¸æ¶‰åŠå®é™…ç¼–å†™ä»£ç ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œè¯·åœ¨ç½‘ä¸ŠæŸ¥çœ‹ Leiningen æ•™ç¨‹*[leiningen/TUTORIAL.md at stable - technomancy/leiningen - GitHub]ï¼ˆhttps://github.com/technomancy/leiningen/blob/stable/doc/TUTORIAL.mdï¼‰*.\n","permalink":"https://zhenfeng-zhu.github.io/post/appendixa/","summary":"ç”¨ Leiningen æ„å»ºå’Œå¼€å‘ ç”¨ä»»ä½•è¯­è¨€ç¼–å†™è½¯ä»¶éƒ½éœ€è¦ç”Ÿæˆå·¥ä»¶ï¼Œå³å¯æ‰§è¡Œæ–‡ä»¶æˆ–åº“åŒ…ï¼Œç”¨äºéƒ¨ç½²æˆ–å…±äº«ã€‚å®ƒè¿˜æ¶‰åŠåˆ°ç®¡ç†ä¾èµ–å·¥ä»¶ï¼Œä¹Ÿç§°ä¸ºä¾èµ–ï¼Œä»¥ç¡®ä¿å®ƒä»¬è¢«åŠ è½½åˆ°ä½ æ­£åœ¨æ„å»ºçš„é¡¹ç›®ä¸­ã€‚Clojurists ä¸­æœ€æµè¡Œçš„ç®¡ç†å·¥ä»¶çš„å·¥å…·æ˜¯ Leiningenï¼Œæœ¬é™„å½•å°†å‘Šè¯‰ä½ å¦‚ä½•ä½¿ç”¨å®ƒã€‚ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Leiningen æ¥å®Œå…¨å¢å¼ºä½ çš„å¼€å‘ç»éªŒï¼Œä½¿ç”¨æ’ä»¶ã€‚\nArtifact Ecosystem å› ä¸º Clojure æ‰˜ç®¡åœ¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šï¼Œæ‰€ä»¥ Clojure çš„å·¥ä»¶æ˜¯ä»¥ JAR æ–‡ä»¶çš„å½¢å¼åˆ†å‘çš„ï¼ˆåœ¨ç¬¬ 12 ç« æœ‰ä»‹ç»ï¼‰ã€‚Java åœ°å·²ç»æœ‰ä¸€ä¸ªå¤„ç† JAR æ–‡ä»¶çš„å®Œæ•´çš„å·¥ä»¶ç”Ÿæ€ç³»ç»Ÿï¼ŒClojure ä¹Ÿä½¿ç”¨å®ƒã€‚ç¥å™¨ç”Ÿæ€ç³»ç»Ÿå¹¶ä¸æ˜¯ä¸€ä¸ªå®˜æ–¹çš„ç¼–ç¨‹æœ¯è¯­ï¼›æˆ‘ç”¨å®ƒæ¥æŒ‡ä»£ç”¨äºè¯†åˆ«å’Œåˆ†å‘ç¥å™¨çš„ä¸€å¥—å·¥å…·ã€èµ„æºå’Œæƒ¯ä¾‹ã€‚Java çš„ç”Ÿæ€ç³»ç»Ÿæ˜¯å›´ç»•ç€ Maven æ„å»ºå·¥å…·å‘å±•èµ·æ¥çš„ï¼Œç”±äº Clojure ä½¿ç”¨è¿™ä¸ªç”Ÿæ€ç³»ç»Ÿï¼Œä½ ä¼šç»å¸¸çœ‹åˆ°å¯¹ Maven çš„å¼•ç”¨ã€‚Maven æ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥å…·ï¼Œå¯ä»¥æ‰§è¡Œå„ç§å¤æ€ªçš„é¡¹ç›®ç®¡ç†ä»»åŠ¡ã€‚å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œä½ ä¸éœ€è¦è·å¾— Maven å­¦çš„åšå£«å­¦ä½å°±èƒ½æˆä¸ºä¸€åæœ‰æ•ˆçš„ Clojuristã€‚ä½ éœ€è¦çŸ¥é“çš„å”¯ä¸€ç‰¹å¾æ˜¯ï¼ŒMaven è§„å®šäº†ä¸€ç§è¯†åˆ« Clojure é¡¹ç›®æ‰€éµå®ˆçš„å·¥ä»¶çš„æ¨¡å¼ï¼Œå®ƒè¿˜è§„å®šäº†å¦‚ä½•åœ¨ Maven ä»“åº“ä¸­æ‰˜ç®¡è¿™äº›å·¥ä»¶ï¼ŒMaven *ä»“åº“åªæ˜¯å­˜å‚¨å·¥ä»¶ä»¥ä¾›åˆ†å‘çš„æœåŠ¡å™¨ã€‚\nIdentification Maven å·¥ä»¶éœ€è¦ä¸€ä¸ªç»„ IDï¼Œä¸€ä¸ªå·¥ä»¶ IDï¼Œä»¥åŠä¸€ä¸ªç‰ˆæœ¬ã€‚ä½ å¯ä»¥åœ¨project.cljæ–‡ä»¶ä¸­ä¸ºä½ çš„é¡¹ç›®æŒ‡å®šè¿™äº›ã€‚ä»¥ä¸‹æ˜¯ä½ åœ¨ç¬¬ä¸€ç« åˆ›å»ºçš„clojure-noobé¡¹ç›®çš„project.cljç¬¬ä¸€è¡Œçš„å†…å®¹ã€‚\n(defproject clojure-noob \u0026#34;0.1.0-SNAPSHOT\u0026#34; clojure-noobæ˜¯ä½ é¡¹ç›®çš„ç»„ ID å’Œå·¥ä»¶ IDï¼Œ\u0026quot;0.1.0-SNAPSHOT\u0026quot;æ˜¯å…¶ç‰ˆæœ¬ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç‰ˆæœ¬æ˜¯æ°¸ä¹…æ€§çš„ï¼›å¦‚æœä½ å°†ä¸€ä¸ªç‰ˆæœ¬ä¸º 0.1.0 çš„å·¥ä»¶éƒ¨ç½²åˆ°å­˜å‚¨åº“ï¼Œä½ ä¸èƒ½å¯¹è¯¥å·¥ä»¶è¿›è¡Œä¿®æ”¹å¹¶ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬å·è¿›è¡Œéƒ¨ç½²ã€‚æ‚¨éœ€è¦æ”¹å˜ç‰ˆæœ¬å·ã€‚(è®¸å¤šç¨‹åºå‘˜å–œæ¬¢ Semantic Versioning ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥åœ¨*Semantic Versioning 2.0.0 | Semantic Versioning.*ä¸­é˜…è¯»åˆ°è¿™ä¸€ç³»ç»Ÿã€‚ï¼‰ å¦‚æœä½ æƒ³è¡¨æ˜è¯¥ç‰ˆæœ¬æ˜¯ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼Œå¹¶ä¸”ä½ è®¡åˆ’ä¸æ–­åœ°æ›´æ–°å®ƒï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç‰ˆæœ¬å·åé¢åŠ ä¸Š-SNAPSHOTã€‚\nå¦‚æœä½ æƒ³è®©ä½ çš„ç»„ ID ä¸ä½ çš„å·¥ä»¶ ID ä¸åŒï¼Œä½ å¯ä»¥ç”¨æ–œçº¿å°†ä¸¤è€…åˆ†å¼€ï¼Œåƒè¿™æ ·ã€‚","title":"AppendixA ç”¨ Leiningen æ„å»ºå’Œå¼€å‘"},{"content":"ç”¨ Multimethodsã€åè®®å’Œè®°å½•åˆ›å»ºå’Œæ‰©å±•æŠ½è±¡æ¦‚å¿µ èŠ±ä¸€åˆ†é’Ÿæ€è€ƒä¸€ä¸‹ï¼Œä½œä¸ºå¤§è‡ªç„¶çš„é¡¶çº§äº§å“ä¹‹ä¸€ï¼šäººç±»æ˜¯å¤šä¹ˆä¼Ÿå¤§ã€‚ä½œä¸ºä¸€ä¸ªäººç±»ï¼Œä½ å¯ä»¥åœ¨ç¤¾äº¤åª’ä½“ä¸Šé—²èŠï¼Œç©é¾™ä¸åœ°ä¸‹åŸï¼Œæˆ´å¸½å­ã€‚ä¹Ÿè®¸æ›´é‡è¦çš„æ˜¯ï¼Œä½ å¯ä»¥ç”¨æŠ½è±¡çš„æ¦‚å¿µæ¥æ€è€ƒå’Œäº¤æµã€‚\næŠ½è±¡æ€è€ƒçš„èƒ½åŠ›ç¡®å®æ˜¯äººç±»æœ€å¥½çš„ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒå¯ä»¥è®©ä½ è§„é¿ä½ çš„è®¤çŸ¥æé™ï¼Œå°†ä¸åŒçš„ç»†èŠ‚æ†ç»‘åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæ•´é½çš„æ¦‚å¿µåŒ…ï¼Œè®©ä½ å¯ä»¥åœ¨å·¥ä½œè®°å¿†ä¸­æŒæœ‰ã€‚ä½ ä¸éœ€è¦å»æƒ³ \u0026ldquo;å¯æŒ¤å‹çš„çº¢çƒé¼»å­è£…é¥° \u0026ldquo;è¿™ç§ç¬¨é‡çš„æƒ³æ³•ï¼Œè€Œåªéœ€è¦ \u0026ldquo;å°ä¸‘é¼»å­ \u0026ldquo;è¿™ä¸ªæ¦‚å¿µã€‚\nåœ¨ Clojure ä¸­ï¼Œä¸€ä¸ªæŠ½è±¡æ˜¯ä¸€ä¸ªæ“ä½œçš„é›†åˆï¼Œè€Œæ•°æ®ç±»å‹å®ç°æŠ½è±¡ã€‚ä¾‹å¦‚ï¼Œseq æŠ½è±¡ç”± \u0026ldquo;first \u0026ldquo;å’Œ \u0026ldquo;rest \u0026ldquo;ç­‰æ“ä½œç»„æˆï¼Œè€Œ Vector æ•°æ®ç±»å‹æ˜¯è¯¥æŠ½è±¡çš„å®ç°ï¼›å®ƒå¯¹æ‰€æœ‰ seq æ“ä½œåšå‡ºå“åº”ã€‚åƒ[:seltzer :water]è¿™æ ·çš„ç‰¹å®š Vector æ˜¯è¯¥æ•°æ®ç±»å‹çš„*å®ä¾‹ã€‚\nç¼–ç¨‹è¯­è¨€è¶Šæ˜¯è®©ä½ ä»¥æŠ½è±¡çš„æ–¹å¼æ€è€ƒå’Œå†™ä½œï¼Œä½ çš„ç”Ÿäº§åŠ›å°±è¶Šé«˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çŸ¥é“ä¸€ä¸ªæ•°æ®ç»“æ„æ˜¯ seq æŠ½è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œä½ å°±å¯ä»¥ç«‹å³è°ƒç”¨ä¸€ä¸ªå¤§çš„çŸ¥è¯†ç½‘ï¼Œäº†è§£å“ªäº›å‡½æ•°å¯ä»¥ä¸æ•°æ®ç»“æ„ä¸€èµ·å·¥ä½œã€‚å› æ­¤ï¼Œä½ ä¼šèŠ±æ—¶é—´å»å®é™…ä½¿ç”¨è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œè€Œä¸æ˜¯ä¸æ–­åœ°å»æŸ¥æ‰¾å…³äºå®ƒå¦‚ä½•å·¥ä½œçš„æ–‡æ¡£ã€‚åŒæ ·åœ°ï¼Œå¦‚æœä½ æ‰©å±•ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä½¿å…¶ä¸ seq æŠ½è±¡ä¸€èµ·å·¥ä½œï¼Œä½ å°±å¯ä»¥åœ¨ä¸Šé¢ä½¿ç”¨å¤§é‡çš„ seq å‡½æ•°åº“ã€‚\nåœ¨ç¬¬å››ç« ä¸­ï¼Œä½ äº†è§£åˆ° Clojure æ˜¯ä»¥æŠ½è±¡çš„æ–¹å¼ç¼–å†™çš„ã€‚è¿™å¾ˆå¼ºå¤§ï¼Œå› ä¸ºåœ¨ Clojure ä¸­ï¼Œä½ å¯ä»¥ä¸“æ³¨äºä½ å¯ä»¥ç”¨æ•°æ®ç»“æ„å®é™…åšçš„äº‹æƒ…ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå®ç°çš„ç»†ææœ«èŠ‚ã€‚æœ¬ç« å‘ä½ ä»‹ç»äº†åˆ›å»ºå’Œå®ç°ä½ è‡ªå·±çš„æŠ½è±¡çš„ä¸–ç•Œã€‚ä½ å°†å­¦ä¹  Multimethodsã€åè®®å’Œè®°å½•çš„åŸºç¡€çŸ¥è¯†ã€‚\nå¤šæ€ æˆ‘ä»¬åœ¨ Clojure ä¸­å®ç°æŠ½è±¡çš„ä¸»è¦æ–¹å¼æ˜¯å°†ä¸€ä¸ªæ“ä½œåç§°ä¸ä¸€ä¸ªä»¥ä¸Šçš„ç®—æ³•è”ç³»èµ·æ¥ã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºå¤šæ€ã€‚ä¾‹å¦‚ï¼Œåœ¨åˆ—è¡¨ä¸Šæ‰§è¡Œ \u0026ldquo;conj \u0026ldquo;çš„ç®—æ³•ä¸ Vector çš„ç®—æ³•ä¸åŒï¼Œä½†æˆ‘ä»¬æŠŠå®ƒä»¬ç»Ÿä¸€åœ¨åŒä¸€ä¸ªåå­—ä¸‹ï¼Œä»¥è¡¨æ˜å®ƒä»¬å®ç°äº†åŒä¸€ä¸ªæ¦‚å¿µï¼Œå³å‘è¿™ä¸ªæ•°æ®ç»“æ„æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚\nå› ä¸º Clojure çš„è®¸å¤šæ•°æ®ç±»å‹éƒ½ä¾èµ–äº Java çš„æ ‡å‡†åº“ï¼Œæ‰€ä»¥æœ¬ç« ä¸­ä½¿ç”¨äº†ä¸€ç‚¹ Javaã€‚ä¾‹å¦‚ï¼ŒClojure çš„å­—ç¬¦ä¸²åªæ˜¯ Java çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ Java ç±»java.lang.Stringçš„å®ä¾‹ã€‚è¦åœ¨ Java ä¸­å®šä¹‰ä½ è‡ªå·±çš„æ•°æ®ç±»å‹ï¼Œä½ è¦ä½¿ç”¨ç±»ã€‚Clojure æä¾›äº†é¢å¤–çš„ç±»å‹ç»“æ„ã€‚Â è®°å½•å’Œç±»å‹ã€‚æœ¬ä¹¦åªæ¶‰åŠè®°å½•ã€‚\nåœ¨æˆ‘ä»¬å­¦ä¹ è®°å½•ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ Multimethodsï¼Œè¿™æ˜¯æˆ‘ä»¬å®šä¹‰å¤šæ€è¡Œä¸ºçš„ç¬¬ä¸€ä¸ªå·¥å…·ã€‚\nMultimethods Multimethodsä¸ºä½ æä¾›äº†ä¸€ç§ç›´æ¥çš„ã€çµæ´»çš„æ–¹æ³•ï¼Œå°†å¤šæ€å¼•å…¥ä½ çš„ä»£ç ä¸­ã€‚ä½¿ç”¨ Multimethodsï¼Œä½ å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªè°ƒåº¦å‡½æ•°å°†ä¸€ä¸ªåå­—ä¸å¤šä¸ªå®ç°è”ç³»èµ·æ¥ï¼Œè¯¥å‡½æ•°äº§ç”Ÿè°ƒåº¦å€¼ï¼Œç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ªæ–¹æ³•ã€‚è°ƒåº¦å‡½æ•°å°±åƒé¤å…é‡Œçš„ä¸»äººã€‚ä¸»äººä¼šé—®ä½ ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ \u0026ldquo;ä½ æœ‰é¢„è®¢å—ï¼Ÿ\u0026ldquo;å’Œ \u0026ldquo;èšä¼šäººæ•°ï¼Ÿ\u0026quot;ï¼Œç„¶åç»™ä½ å®‰æ’ç›¸åº”çš„åº§ä½ã€‚åŒæ ·ï¼Œå½“ä½ è°ƒç”¨ä¸€ä¸ª Multimethods æ—¶ï¼Œè°ƒåº¦å‡½æ•°å°†è¯¢é—®å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°æ­£ç¡®çš„æ–¹æ³•ï¼Œæ­£å¦‚è¿™ä¸ªä¾‹å­æ‰€æ˜¾ç¤ºçš„ã€‚\n(ns were-creatures) âŠ (defmulti full-moon-behavior (fn [were-creature] (:were-type were-creature))) â‹ (defmethod full-moon-behavior :wolf [were-creature] (str (:name were-creature) \u0026#34; will howl and murder\u0026#34;)) âŒ (defmethod full-moon-behavior :simmons [were-creature] (str (:name were-creature) \u0026#34; will encourage people and sweat to the oldies\u0026#34;)) (full-moon-behavior {:were-type :wolf â :name \u0026#34;Rachel from next door\u0026#34;}) ; =\u0026gt; \u0026#34;Rachel from next door will howl and murder\u0026#34; (full-moon-behavior {:name \u0026#34;Andy the baker\u0026#34; â :were-type :simmons}) ; =\u0026gt; \u0026#34;Andy the baker will encourage people and sweat to the oldies\u0026#34; è¿™ä¸ª Multimethods æ˜¾ç¤ºäº†ä½ å¦‚ä½•å®šä¹‰ä¸åŒç§ç±»çš„ç‹¼äººç”Ÿç‰©çš„æ»¡æœˆè¡Œä¸ºã€‚å¤§å®¶éƒ½çŸ¥é“ç‹¼äººå˜æˆäº†ç‹¼ï¼Œåˆ°å¤„åšå«ç€æ€äººã€‚ä¸€ç§ä¸å¤ªçŸ¥åçš„ç‹¼äººï¼Œå³ç‹¼-è¥¿è’™æ–¯ï¼Œå˜æˆç†æŸ¥å¾·-è¥¿è’™æ–¯ï¼Œçƒ«ç€å¤´å‘ï¼Œåˆ°å¤„è·‘ï¼Œé¼“åŠ±äººä»¬åšæœ€å¥½çš„è‡ªå·±ï¼Œä¸ºè€äººä»¬æµæ±—ã€‚ä½ ä¸æƒ³è¢«è¿™ä¸¤ç§ç”Ÿç‰©å’¬åˆ°ï¼Œå¦åˆ™ä½ å°±ä¼šå˜æˆå®ƒä»¬ã€‚\næˆ‘ä»¬åœ¨âŠå¤„åˆ›å»º Multimethodsã€‚è¿™å‘Šè¯‰ Clojureï¼Œ\u0026ldquo;å˜¿ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºfull-moon-behavior'çš„æ–°Multimethodsã€‚æ¯å½“æœ‰äººè°ƒç”¨full-moon-behavioræ—¶ï¼Œåœ¨å‚æ•°ä¸Šè¿è¡Œè°ƒåº¦å‡½æ•°(fn [were-creature] (:were-type were-creature))`ã€‚ä½¿ç”¨è¯¥å‡½æ•°çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯è°ƒåº¦å€¼ï¼Œæ¥å†³å®šä½¿ç”¨å“ªä¸ªå…·ä½“æ–¹æ³•ï¼\u0026rdquo;\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å½“è°ƒåº¦å‡½æ•°è¿”å›çš„å€¼æ˜¯â‹çš„:wolfæ—¶ï¼Œå¦ä¸€ä¸ªæ˜¯å½“å®ƒæ˜¯âŒçš„:simmonsæ—¶ã€‚æ–¹æ³•å®šä¹‰çœ‹èµ·æ¥å¾ˆåƒå‡½æ•°å®šä¹‰ï¼Œä½†ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼Œæ–¹æ³•åç§°åé¢ç´§è·Ÿç€dispatch å€¼ã€‚Â :wolfå’Œ:simmonséƒ½æ˜¯dispatch å€¼ã€‚è¿™ä¸è°ƒåº¦*å€¼ä¸åŒï¼Œåè€…æ˜¯è°ƒåº¦å‡½æ•°çš„è¿”å›å€¼ã€‚å®Œæ•´çš„è°ƒåº¦åºåˆ—æ˜¯è¿™æ ·çš„ã€‚\n å½¢å¼(full-moon-behavior {:wer-type :wolf :name \u0026quot;Rachel from next door\u0026quot;})è¢«æ±‚å€¼ã€‚ è¿è¡Œfull-moon-behaviorçš„è°ƒåº¦å‡½æ•°ï¼Œè¿”å›:wolfä½œä¸ºè°ƒåº¦å€¼ã€‚ Clojure å°†è°ƒåº¦å€¼:wolfä¸ä¸ºfull-moon-behaviorå®šä¹‰çš„æ‰€æœ‰æ–¹æ³•çš„è°ƒåº¦å€¼ç›¸æ¯”è¾ƒã€‚è¿™äº›è°ƒåº¦å€¼æ˜¯:wolfå’Œ:simmonsã€‚ å› ä¸ºè°ƒåº¦å€¼:wolfç­‰äºè°ƒåº¦å€¼:wolfï¼Œæ‰€ä»¥:wolfçš„ç®—æ³•è¿è¡Œã€‚  ä¸è¦è®©æœ¯è¯­æŠŠä½ ç»Šå€’! ä¸»è¦çš„æƒ³æ³•æ˜¯ï¼Œè°ƒåº¦å‡½æ•°è¿”å›ä¸€äº›å€¼ï¼Œè¿™ä¸ªå€¼è¢«ç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ªæ–¹æ³•å®šä¹‰ã€‚\nå›åˆ°æˆ‘ä»¬çš„ä¾‹å­! æ¥ä¸‹æ¥æˆ‘ä»¬è°ƒç”¨è¯¥æ–¹æ³•ä¸¤æ¬¡ã€‚åœ¨âå¤„ï¼Œè°ƒåº¦å‡½æ•°è¿”å›å€¼\u0026rdquo;:wolf\u0026rdquo;ï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œé€šçŸ¥ä½  \u0026ldquo;éš”å£çš„ Rachel å°†åšå«å¹¶æ€äºº\u0026rdquo;ã€‚åœ¨âï¼Œè¯¥å‡½æ•°çš„è¡Œä¸ºç±»ä¼¼ï¼Œåªæ˜¯:simmonsæ˜¯è°ƒåº¦å€¼ã€‚\nä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªä»¥nilä¸ºè°ƒåº¦å€¼çš„æ–¹æ³•ã€‚\n(defmethod full-moon-behavior nil [were-creature] (str (:name were-creature) \u0026#34; will stay at home and eat ice cream\u0026#34;)) (full-moon-behavior {:were-type nil :name \u0026#34;Martin the nurse\u0026#34;}) ; =\u0026gt; \u0026#34;Martin the nurse will stay at home and eat ice cream\u0026#34; å½“ä½ è¿™æ¬¡è°ƒç”¨full-moon-behavioræ—¶ï¼Œä½ ç»™å®ƒçš„å‚æ•°:wer-typeæ˜¯nilï¼Œæ‰€ä»¥å¯¹åº”äºnilçš„æ–¹æ³•è¢«æ±‚å€¼ï¼Œä½ è¢«å‘ŠçŸ¥`\u0026ldquo;æŠ¤å£« Martin å°†å‘†åœ¨å®¶é‡Œåƒå†°æ·‡æ·‹\u0026rdquo;ã€‚\nä½ ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š:defaultä½œä¸ºè°ƒåº¦å€¼ï¼Œå®šä¹‰ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œåœ¨æ²¡æœ‰å…¶ä»–æ–¹æ³•åŒ¹é…çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç»™å‡ºçš„å‚æ•°çš„:were-typeä¸ä¹‹å‰å®šä¹‰çš„æ–¹æ³•éƒ½ä¸åŒ¹é…ï¼Œæ‰€ä»¥ä½¿ç”¨äº†é»˜è®¤æ–¹æ³•ã€‚\n(defmethod full-moon-behavior :default [were-creature] (str (:name were-creature) \u0026#34; will stay up all night fantasy footballing\u0026#34;)) (full-moon-behavior {:were-type :office-worker :name \u0026#34;Jimmy from sales\u0026#34;}) ; =\u0026gt; \u0026#34;Jimmy from sales will stay up all night fantasy footballing\u0026#34; Multimethods çš„ä¸€ä¸ªå¾ˆé…·çš„åœ°æ–¹æ˜¯ï¼Œä½ å¯ä»¥éšæ—¶æ·»åŠ æ–°çš„æ–¹æ³•ã€‚å¦‚æœä½ å‘å¸ƒäº†ä¸€ä¸ªåŒ…æ‹¬wer-creatureså‘½åç©ºé—´çš„åº“ï¼Œå…¶ä»–äººå¯ä»¥ç»§ç»­æ‰©å±• Multimethods æ¥å¤„ç†æ–°çš„æ´¾å‘å€¼ã€‚è¿™ä¸ªä¾‹å­æ˜¾ç¤ºï¼Œä½ åˆ›å»ºäº†è‡ªå·±çš„éšæœºå‘½åç©ºé—´å¹¶åŒ…æ‹¬äº†wer-creatureså‘½åç©ºé—´ï¼Œç„¶åä¸ºfull-moon-behaviorMultimethods å®šä¹‰äº†å¦ä¸€ä¸ªæ–¹æ³•ã€‚\n(ns random-namespace (:require [were-creatures])) (defmethod were-creatures/full-moon-behavior :bill-murray [were-creature] (str (:name were-creature) \u0026#34; will be the most likeable celebrity\u0026#34;)) (were-creatures/full-moon-behavior {:name \u0026#34;Laura the intern\u0026#34; :were-type :bill-murray}) ; =\u0026gt; \u0026#34;Laura the intern will be the most likeable celebrity\u0026#34; ä½ çš„è°ƒåº¦å‡½æ•°å¯ä»¥ä½¿ç”¨å®ƒçš„ä»»ä½•æˆ–æ‰€æœ‰å‚æ•°è¿”å›ä»»æ„çš„å€¼ã€‚ä¸‹ä¸€ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ª Multimethodsï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ¯ä¸ªå‚æ•°ç±»å‹çš„ Vectorã€‚å®ƒè¿˜å®šä¹‰äº†è¯¥æ–¹æ³•çš„ä¸€ä¸ªå®ç°ï¼Œå½“æ¯ä¸ªå‚æ•°éƒ½æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚\n(ns user) (defmulti types (fn [x y] [(class x) (class y)])) (defmethod types [java.lang.String java.lang.String] [x y] \u0026#34;Two strings!\u0026#34;) (types \u0026#34;String 1\u0026#34; \u0026#34;String 2\u0026#34;) ; =\u0026gt; \u0026#34;Two strings!\u0026#34; é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä»¬è¢«ç§°ä¸ºmultimethodsï¼šå®ƒä»¬å…è®¸å¯¹å¤šä¸ªå‚æ•°è¿›è¡Œè°ƒåº¦ã€‚æˆ‘æ²¡æœ‰ç»å¸¸ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æˆ‘å¯ä»¥çœ‹åˆ°å®ƒè¢«ç”¨äºè§’è‰²æ‰®æ¼”æ¸¸æˆä¸­ï¼Œæ ¹æ®æ³•å¸ˆçš„ä¸»è¦é­”æ³•å­¦æ ¡å’Œä»–çš„é­”æ³•ä¸“é•¿æ¥ç¼–å†™æ–¹æ³•ã€‚æ— è®ºå¦‚ä½•ï¼Œæœ‰å®ƒè€Œä¸éœ€è¦å®ƒæ€»æ¯”éœ€è¦å®ƒè€Œæ²¡æœ‰å®ƒå¥½ã€‚\næ³¨æ„ Multimethods ä¹Ÿå…è®¸åˆ†å±‚è°ƒåº¦ã€‚Clojure å¯ä»¥è®©ä½ å»ºç«‹è‡ªå®šä¹‰çš„å±‚æ¬¡ç»“æ„ï¼Œæˆ‘ä¸ä¼šä»‹ç»è¿™äº›ï¼Œä½†ä½ å¯ä»¥é€šè¿‡é˜…è¯»http://clojure.org/multimethods/ çš„æ–‡æ¡£æ¥äº†è§£å®ƒä»¬ã€‚\nåè®® åœ¨å¤§çº¦ 93.58%çš„æƒ…å†µä¸‹ï¼Œä½ ä¼šå¸Œæœ›æ ¹æ®å‚æ•°çš„ç±»å‹æ¥è°ƒåº¦æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œcountéœ€è¦å¯¹ Vector ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯å¯¹ map æˆ– list ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚å°½ç®¡å¯ä»¥ç”¨ Multimethods è¿›è¡Œç±»å‹è°ƒåº¦ï¼Œä½†åè®®æ˜¯ä¸ºç±»å‹è°ƒåº¦è€Œä¼˜åŒ–çš„ã€‚å®ƒä»¬æ¯” Multimethods æ›´æœ‰æ•ˆï¼Œè€Œä¸” Clojure è®©ä½ å¾ˆå®¹æ˜“ç®€æ´åœ°æŒ‡å®šåè®®çš„å®ç°ã€‚\nMultimethods åªæ˜¯ä¸€ä¸ªå¤šæ€çš„æ“ä½œï¼Œè€Œåè®®æ˜¯ä¸€ä¸ªé›†åˆçš„ä¸€ä¸ªæˆ–å¤šä¸ªå¤šæ€æ“ä½œã€‚åè®®æ“ä½œè¢«ç§°ä¸ºæ–¹æ³•ï¼Œå°±åƒ Multimethods æ“ä½œä¸€æ ·ã€‚ä¸ Multimethods ä¸åŒçš„æ˜¯ï¼ŒMultimethods å¯¹è°ƒåº¦å‡½æ•°è¿”å›çš„ä»»æ„å€¼è¿›è¡Œè°ƒåº¦ï¼Œè€Œåè®®æ–¹æ³•æ˜¯æ ¹æ®ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹è¿›è¡Œè°ƒåº¦ï¼Œå¦‚æœ¬ä¾‹æ‰€ç¤ºã€‚\n(ns data-psychology) âŠ(defprotocol â‹Psychodynamics âŒ\u0026#34;Plumb the inner depths of your data types\u0026#34; â(thoughts [x] \u0026#34;The data type\u0026#39;s innermost thoughts\u0026#34;) â(feelings-about [x] [x y] \u0026#34;Feelings about self or other\u0026#34;)) é¦–å…ˆï¼Œåœ¨âŠæœ‰defprotocolã€‚è¿™éœ€è¦ä¸€ä¸ªåå­—ï¼ŒPsychodynamics â‹ï¼Œå’Œä¸€ä¸ªå¯é€‰çš„æ–‡ä»¶ä¸²ï¼Œ\u0026quot;æ¢ç©¶ä½ çš„æ•°æ®ç±»å‹çš„å†…éƒ¨æ·±åº¦\u0026quot;âŒã€‚æ¥ä¸‹æ¥æ˜¯æ–¹æ³•ç­¾åã€‚ä¸€ä¸ªæ–¹æ³•ç­¾åç”±ä¸€ä¸ªåç§°ã€ä¸€ä¸ªå‚æ•°è¯´æ˜å’Œä¸€ä¸ªå¯é€‰çš„æ–‡æ¡£ä¸²ç»„æˆã€‚ç¬¬ä¸€ä¸ªæ–¹æ³•ç­¾åè¢«å‘½åä¸ºthoughtsâï¼Œåªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°ã€‚ç¬¬äºŒä¸ªåä¸ºfeelings-aboutâï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ã€‚åè®®æœ‰ä¸€ä¸ªé™åˆ¶ï¼šæ–¹æ³•ä¸èƒ½æœ‰å…¶ä½™å‚æ•°ã€‚æ‰€ä»¥åƒä¸‹é¢è¿™æ ·çš„è¡Œæ˜¯ä¸å…è®¸çš„ã€‚\n(feels-about [x] [x \u0026amp; others]) é€šè¿‡å®šä¹‰ä¸€ä¸ªåè®®ï¼Œä½ åœ¨å®šä¹‰ä¸€ä¸ªæŠ½è±¡ï¼Œä½†ä½ è¿˜æ²¡æœ‰å®šä¹‰å¦‚ä½•å®ç°è¿™ä¸ªæŠ½è±¡ã€‚è¿™å°±åƒä½ ä¸ºè¡Œä¸ºä¿ç•™äº†åå­—ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ ä¿ç•™äº†æ€æƒ³å’Œæ„Ÿè§‰-å…³äºï¼‰ï¼Œä½†ä½ è¿˜æ²¡æœ‰å®šä¹‰å…·ä½“çš„è¡Œä¸ºã€‚å¦‚æœä½ è¦æ±‚å€¼(thoughts \u0026quot;blorb\u0026quot;)ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ï¼Œå†…å®¹æ˜¯ï¼š\u0026ldquo;æ²¡æœ‰ä¸º java.lang.String ç±»æ‰¾åˆ°æ–¹æ³•çš„å®ç°ï¼šprotocol: data-psychology/psychodynamics çš„ thoughtsã€‚\u0026rdquo; åè®®æ˜¯æ ¹æ®ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹åˆ†é…çš„ï¼Œæ‰€ä»¥å½“ä½ è°ƒç”¨(thoughts \u0026quot;blorb\u0026quot;)æ—¶ï¼ŒClojure è¯•å›¾ä¸ºå­—ç¬¦ä¸²æŸ¥æ‰¾thoughtsæ–¹æ³•çš„å®ç°ï¼Œä½†å¤±è´¥äº†ã€‚\nä½ å¯ä»¥é€šè¿‡æ‰©å±•å­—ç¬¦ä¸²æ•°æ®ç±»å‹æ¥å®ç°Psychodynamicsåè®®æ¥è§£å†³è¿™ä¸€é—æ†¾ã€‚\nâŠ (extend-type java.lang.String â‹ Psychodynamics âŒ (thoughts [x] (str x \u0026#34; thinks, \u0026#39;Truly, the character defines the data type\u0026#39;\u0026#34;) â (feelings-about ([x] (str x \u0026#34; is longing for a simpler way of life\u0026#34;)) ([x y] (str x \u0026#34; is envious of \u0026#34; y \u0026#34;\u0026#39;s simpler way of life\u0026#34;)))) (thoughts \u0026#34;blorb\u0026#34;) â ; =\u0026gt; \u0026#34;blorb thinks, \u0026#39;Truly, the character defines the data type\u0026#39;\u0026#34; (feelings-about \u0026#34;schmorb\u0026#34;) ; =\u0026gt; \u0026#34;schmorb is longing for a simpler way of life\u0026#34; (feelings-about \u0026#34;schmorb\u0026#34; 2) ; =\u0026gt; \u0026#34;schmorb is envious of 2\u0026#39;s simpler way of life\u0026#34; extend-typeåé¢æ˜¯ä½ æƒ³æ‰©å±•çš„ç±»æˆ–ç±»å‹çš„åç§°å’Œä½ æƒ³è®©å®ƒæ”¯æŒçš„åè®®\u0026ndash;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åœ¨âŠå¤„æŒ‡å®šäº†ç±»java.lang.Stringå’Œä½ æƒ³è®©å®ƒæ”¯æŒçš„åè®®Psychodynamicsï¼Œåœ¨â‹ã€‚ä¹‹åï¼Œä½ åœ¨âŒä¸º \u0026ldquo;thoughts \u0026ldquo;æ–¹æ³•å’Œâä¸º \u0026ldquo;feelings-about \u0026ldquo;æ–¹æ³•æä¾›ä¸€ä¸ªå®ç°ã€‚å¦‚æœä½ è¦æ‰©å±•ä¸€ä¸ªç±»å‹æ¥å®ç°ä¸€ä¸ªåè®®ï¼Œä½ å¿…é¡»å®ç°åè®®ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•ï¼Œå¦åˆ™ Clojure ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¸èƒ½åªå®ç°æ€æƒ³'æˆ–åªå®ç°æ„Ÿè§‰\u0026rsquo;ï¼›ä½ å¿…é¡»åŒæ—¶å®ç°è¿™ä¸¤ç§æ–¹æ³•ã€‚\næ³¨æ„ï¼Œè¿™äº›æ–¹æ³•çš„å®ç°ä¸åƒ Multimethods é‚£æ ·ä»¥defmethodå¼€å¤´ã€‚äº‹å®ä¸Šï¼Œå®ƒä»¬çœ‹èµ·æ¥ç±»ä¼¼äºå‡½æ•°å®šä¹‰ï¼Œåªæ˜¯æ²¡æœ‰defn'ã€‚è¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•çš„å®ç°ï¼Œä½ è¦å†™ä¸€ä¸ªä»¥æ–¹æ³•åç§°å¼€å¤´çš„è¡¨æ ¼ï¼Œåƒthoughts\u0026rsquo;ï¼Œç„¶åæä¾›ä¸€ä¸ªå‚æ•° Vector å’Œæ–¹æ³•çš„ä¸»ä½“ã€‚è¿™äº›æ–¹æ³•ä¹Ÿå…è®¸é‡è½½ï¼Œå°±åƒå‡½æ•°ä¸€æ ·ï¼Œä½ å®šä¹‰å¤šé‡æ€§çš„æ–¹æ³•å®ç°ä¸å¤šé‡æ€§çš„å‡½æ•°ç±»ä¼¼ã€‚ä½ å¯ä»¥åœ¨âçš„ \u0026ldquo;feelings-about \u0026ldquo;å®ç°ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚\nåœ¨ä½ æ‰©å±•äº†java.lang.Stringç±»å‹ä»¥å®ç°Psychodynamicsåè®®åï¼ŒClojure çŸ¥é“å¦‚ä½•è°ƒåº¦è°ƒç”¨(thoughts \u0026quot;blorb\u0026quot;)ï¼Œä½ ä¼šåœ¨âå¾—åˆ°å­—ç¬¦ä¸²`\u0026ldquo;blorb thinks, \u0026lsquo;Truly, the character defines the data type\u0026rsquo;\u0026quot;ã€‚\nå¦‚æœä½ æƒ³æä¾›ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œå°±åƒä½ å¯¹ multimethods æ‰€åšçš„é‚£æ ·å‘¢ï¼Ÿè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥æ‰©å±•java.lang.Objectã€‚è¿™æ ·åšæ˜¯å› ä¸º Javaï¼ˆä¹Ÿå°±æ˜¯ Clojureï¼‰ä¸­çš„æ¯ä¸ªç±»å‹éƒ½æ˜¯java.lang.Objectçš„åä»£ã€‚å¦‚æœè¿™ä¸æ˜¯å¾ˆæœ‰æ„ä¹‰ï¼ˆä¹Ÿè®¸æ˜¯å› ä¸ºä½ ä¸ç†Ÿæ‚‰é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼‰ï¼Œä¸è¦æ‹…å¿ƒï¼Œåªè¦çŸ¥é“å®ƒæ˜¯æœ‰æ•ˆçš„ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯ä¸ºPsychodynamicsåè®®æä¾›ä¸€ä¸ªé»˜è®¤å®ç°ã€‚\n(extend-type java.lang.Object Psychodynamics (thoughts [x] \u0026#34;Maybe the Internet is just a vector for toxoplasmosis\u0026#34;) (feelings-about ([x] \u0026#34;meh\u0026#34;) ([x y] (str \u0026#34;meh about \u0026#34; y)))) (thoughts 3) ; =\u0026gt; \u0026#34;Maybe the Internet is just a vector for toxoplasmosis\u0026#34; (feelings-about 3) ; =\u0026gt; \u0026#34;meh\u0026#34; (feelings-about 3 \u0026#34;blorb\u0026#34;) ; =\u0026gt; \u0026#34;meh about blorb\u0026#34; å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ä¸ºæ•°å­—å®šä¹‰ä¸€ä¸ªå¿ƒç†åŠ¨åŠ›å­¦'çš„å®ç°ï¼ŒClojureå°†å¯¹æ€æƒ³\u0026rsquo;å’Œæ„Ÿè§‰-å…³äº'çš„è°ƒç”¨åˆ†æ´¾ç»™ä¸ºjava.lang.Object\u0026rsquo;å®šä¹‰çš„å®ç°ã€‚\nä½ å¯ä»¥ä½¿ç”¨extend-protocol'æ¥ä»£æ›¿å¤šæ¬¡è°ƒç”¨extend-type\u0026rsquo;æ¥æ‰©å±•å¤šä¸ªç±»å‹ï¼Œå®ƒå¯ä»¥è®©ä½ ä¸€æ¬¡ä¸ºå¤šä¸ªç±»å‹å®šä¹‰åè®®å®ç°ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•å®šä¹‰å‰é¢çš„åè®®å®ç°ã€‚\n(extend-protocol Psychodynamics java.lang.String (thoughts [x] \u0026#34;Truly, the character defines the data type\u0026#34;) (feelings-about ([x] \u0026#34;longing for a simpler way of life\u0026#34;) ([x y] (str \u0026#34;envious of \u0026#34; y \u0026#34;\u0026#39;s simpler way of life\u0026#34;))) java.lang.Object (thoughts [x] \u0026#34;Maybe the Internet is just a vector for toxoplasmosis\u0026#34;) (feelings-about ([x] \u0026#34;meh\u0026#34;) ([x y] (str \u0026#34;meh about \u0026#34; y)))) ä½ å¯èƒ½ä¼šå‘ç°è¿™ä¸ªæŠ€æœ¯æ¯”ä½¿ç”¨extend-typeæ›´æ–¹ä¾¿ã€‚ç„¶åï¼Œä½ ä¹Ÿå¯èƒ½ä¸è§‰å¾—ã€‚extend-typeè®©ä½ æ„Ÿè§‰å¦‚ä½•ï¼Ÿextend-protocolæ€ä¹ˆæ ·ï¼Ÿæ¥ååœ¨è¿™ä¸ªæ²™å‘ä¸Šï¼Œå‘Šè¯‰æˆ‘è¿™ä¸€åˆ‡ã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªåè®®çš„æ–¹æ³• \u0026ldquo;å±äº \u0026ldquo;å®ƒä»¬æ‰€å®šä¹‰çš„å‘½åç©ºé—´ã€‚åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œ\u0026ldquo;å¿ƒç†åŠ¨åŠ›å­¦ \u0026ldquo;æ–¹æ³•çš„å®Œå…¨é™å®šåç§°æ˜¯ \u0026ldquo;æ•°æ®-å¿ƒç†å­¦/æƒ³æ³• \u0026ldquo;å’Œ \u0026ldquo;æ•°æ®-å¿ƒç†å­¦/æ„Ÿè§‰-å…³äº\u0026rdquo;ã€‚å¦‚æœä½ æœ‰é¢å‘å¯¹è±¡çš„èƒŒæ™¯ï¼Œè¿™å¯èƒ½çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œå› ä¸ºæ–¹æ³•å±äº OOP ä¸­çš„æ•°æ®ç±»å‹ã€‚ä½†ä¸è¦å“åäº†! è¿™åªæ˜¯ Clojure èµ‹äºˆæŠ½è±¡ä¼˜å…ˆæƒçš„å¦ä¸€ç§æ–¹å¼ã€‚è¿™ä¸ªäº‹å®çš„ä¸€ä¸ªåæœæ˜¯ï¼Œå¦‚æœä½ æƒ³è®©ä¸¤ä¸ªä¸åŒçš„åè®®åŒ…æ‹¬å…·æœ‰ç›¸åŒåç§°çš„æ–¹æ³•ï¼Œä½ éœ€è¦æŠŠåè®®æ”¾åœ¨ä¸åŒçš„å‘½åç©ºé—´ä¸­ã€‚\nè®°å½• Clojure å…è®¸ä½ åˆ›å»ºrecordsï¼Œå®ƒæ˜¯è‡ªå®šä¹‰çš„ã€ç±»ä¼¼ Map çš„æ•°æ®ç±»å‹ã€‚å®ƒä»¬ç±»ä¼¼äº Mapï¼Œå› ä¸ºå®ƒä»¬å°†é”®å’Œå€¼è”ç³»èµ·æ¥ï¼Œä½ å¯ä»¥åƒä½¿ç”¨ Map ä¸€æ ·æŸ¥è¯¢å®ƒä»¬çš„å€¼ï¼Œè€Œä¸”å®ƒä»¬åƒ Map ä¸€æ ·æ˜¯ä¸å¯æ”¹å˜çš„ã€‚å®ƒä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œä½ ä¸ºè®°å½•æŒ‡å®š*å­—æ®µã€‚å­—æ®µæ˜¯æ•°æ®çš„æ§½ï¼›ä½¿ç”¨å®ƒä»¬å°±åƒæŒ‡å®šä¸€ä¸ªæ•°æ®ç»“æ„åº”è¯¥æœ‰å“ªäº›é”®ã€‚è®°å½•ä¹Ÿä¸ Map ä¸åŒï¼Œä½ å¯ä»¥æ‰©å±•å®ƒä»¬æ¥å®ç°åè®®ã€‚\nè¦åˆ›å»ºä¸€ä¸ªè®°å½•ï¼Œä½ å¯ä»¥ä½¿ç”¨defrecordæ¥æŒ‡å®šå®ƒçš„åå­—å’Œå­—æ®µã€‚\n(ns were-records) (defrecord WereWolf [name title]) è¿™ä¸ªè®°å½•çš„åå­—æ˜¯WereWolfï¼Œå®ƒçš„ä¸¤ä¸ªå­—æ®µæ˜¯nameå’Œtitleã€‚ä½ å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼åˆ›å»ºè¿™ä¸ªè®°å½•çš„å®ä¾‹ã€‚\nâŠ (WereWolf. \u0026#34;David\u0026#34; \u0026#34;London Tourist\u0026#34;) ; =\u0026gt; #were_records.WereWolf{:name \u0026#34;David\u0026#34;, :title \u0026#34;London Tourist\u0026#34;}. â‹ (-\u0026gt;WereWolf \u0026#34;Jacob\u0026#34; \u0026#34;Lead Shirt Discarder\u0026#34;) ; =\u0026gt; #were_records.WereWolf{:name \u0026#34;Jacob\u0026#34;, :title \u0026#34;Lead Shirt Discarder\u0026#34;}ã€‚ âŒ (map-\u0026gt;WereWolf {:name \u0026#34;Lucian\u0026#34; :title \u0026#34;CEO of Melodrama\u0026#34;}) ; =\u0026gt; #were_records.WereWolf{:name \u0026#34;Lucian\u0026#34;, :title \u0026#34;CEO of Melodrama\u0026#34;}. åœ¨âŠï¼Œæˆ‘ä»¬ä»¥åˆ›å»º Java å¯¹è±¡çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œä½¿ç”¨ç±»å®ä¾‹åŒ–çš„äº’æ“ä½œè°ƒç”¨ã€‚(InteropæŒ‡çš„æ˜¯åœ¨ Clojure ä¸­ä¸æœ¬åœ° Java ç»“æ„äº¤äº’çš„èƒ½åŠ›)ã€‚è¯·æ³¨æ„ï¼Œå‚æ•°å¿…é¡»éµå¾ªä¸å­—æ®µå®šä¹‰ç›¸åŒçš„é¡ºåºã€‚è¿™æ ·åšçš„åŸå› æ˜¯ï¼Œè®°å½•å®é™…ä¸Šæ˜¯è¢«æ©ç›–çš„ Java ç±»ã€‚\nâ‹çš„å®ä¾‹çœ‹èµ·æ¥ä¸âŠçš„å®ä¾‹å‡ ä¹ç›¸åŒï¼Œä½†å…³é”®çš„åŒºåˆ«åœ¨äº-\u0026gt;WereWolfæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å½“ä½ åˆ›å»ºä¸€æ¡è®°å½•æ—¶ï¼Œå·¥å‚å‡½æ•°-\u0026gt;RecordName å’Œmap-\u0026gt;RecordName ä¼šè‡ªåŠ¨åˆ›å»ºã€‚åœ¨âŒï¼Œmap-\u0026gt;WereWolfæ¥æ”¶ä¸€ä¸ª map ä½œä¸ºå‚æ•°ï¼Œå…¶å…³é”®å­—ä¸è®°å½•ç±»å‹çš„å­—æ®µç›¸å¯¹åº”ï¼Œå¹¶è¿”å›ä¸€ä¸ªè®°å½•ã€‚\nå¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–å‘½åç©ºé—´çš„è®°å½•ç±»å‹ï¼Œä½ å¿…é¡»å¯¼å…¥å®ƒï¼Œå°±åƒä½ åœ¨ç¬¬ 12 ç« ä¸­å¯¹ Java ç±»æ‰€åšçš„é‚£æ ·ã€‚è¯·æ³¨æ„å°†å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰ç ´æŠ˜å·æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ã€‚è¿™ä¸ªç®€å•çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•åœ¨å¦ä¸€ä¸ªå‘½åç©ºé—´å¯¼å…¥WereWolfè®°å½•ç±»å‹ã€‚\n(ns monster-mash (:import [were_records WereWolf]) (WereWolf. \u0026#34;David\u0026#34; \u0026#34;London Tourist\u0026#34;) ; =\u0026gt; #were_records.WereWolf{:name \u0026#34;David\u0026#34;, :title \u0026#34;London Tourist\u0026#34;} æ³¨æ„ï¼Œwere_recordsæœ‰ä¸€ä¸ªä¸‹åˆ’çº¿ï¼Œè€Œä¸æ˜¯ç ´æŠ˜å·ã€‚\nä½ å¯ä»¥ç”¨æŸ¥è¯¢ Map å€¼çš„æ–¹å¼æŸ¥è¯¢è®°å½•å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Java å­—æ®µè®¿é—®äº’æ“ä½œã€‚\n(def jacob (-\u0026gt;WereWolf \u0026#34;Jacob\u0026#34; \u0026#34;Lead Shirt Discarder\u0026#34;) âŠ (.name jacob) ; =\u0026gt; \u0026#34;Jacob\u0026#34; â‹ (:name jacob) ; =\u0026gt; \u0026#34;Jacob\u0026#34; âŒ (get jacob :name) ;=\u0026gt; \u0026#34;Jacob\u0026#34; ç¬¬ä¸€ä¸ªä¾‹å­(.name jacob)åœ¨âŠï¼Œä½¿ç”¨äº† Java äº’æ“ä½œï¼Œâ‹å’ŒâŒçš„ä¾‹å­è®¿é—®:nameçš„æ–¹å¼ä¸ä½¿ç”¨ map ç›¸åŒã€‚\nå½“æµ‹è¯•ç›¸ç­‰æ—¶ï¼ŒClojure å°†æ£€æŸ¥æ‰€æœ‰å­—æ®µæ˜¯å¦ç›¸ç­‰ï¼Œä»¥åŠä¸¤ä¸ªæ¯”è¾ƒä½“æ˜¯å¦å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚\nâŠ (= jacob (-\u0026gt;WereWolf \u0026#34;Jacob\u0026#34; \u0026#34;Lead Shirt Discarder\u0026#34;)) ; =\u0026gt; true â‹ (= jacob (WereWolf. \u0026#34;David\u0026#34; \u0026#34;London Tourist\u0026#34;)) ; =\u0026gt; false âŒ (= jacob {:name \u0026#34;Jacob\u0026#34; :title \u0026#34;Lead Shirt Discarder\u0026#34;}) ; =\u0026gt; false âŠå¤„çš„æµ‹è¯•è¿”å›trueï¼Œå› ä¸ºjacob'å’Œæ–°åˆ›å»ºçš„è®°å½•æ˜¯åŒä¸€ç±»å‹ï¼Œå¹¶ä¸”å®ƒä»¬çš„å­—æ®µæ˜¯ç›¸ç­‰çš„ã€‚â‹å¤„çš„æµ‹è¯•è¿”å› \u0026quot;false\u0026quot;ï¼Œå› ä¸ºå­—æ®µä¸ç›¸ç­‰ã€‚æœ€ååœ¨âŒå¤„çš„æµ‹è¯•è¿”å› \u0026quot;false\u0026quot;ï¼Œå› ä¸ºä¸¤ä¸ªæ¯”è¾ƒå¯¹è±¡çš„ç±»å‹ä¸ä¸€æ ·ã€‚jacob\u0026rsquo;æ˜¯ä¸€ä¸ª`WereWolf\u0026rsquo;è®°å½•ï¼Œè€Œå¦ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª Mapã€‚\nä»»ä½•ä½ èƒ½åœ¨ Map ä¸Šä½¿ç”¨çš„å‡½æ•°ï¼Œä½ ä¹Ÿèƒ½åœ¨è®°å½•ä¸Šä½¿ç”¨ã€‚\n(assoc jacob :title \u0026#34;Lead Third Wheel\u0026#34;) ; =\u0026gt; #were_records.WereWolf{:name \u0026#34;Jacob\u0026#34;, :title \u0026#34;Lead Third Wheel\u0026#34;}ã€‚ ç„¶è€Œï¼Œå¦‚æœä½ dissocä¸€ä¸ªå­—æ®µï¼Œç»“æœçš„ç±»å‹å°†æ˜¯ä¸€ä¸ªæ™®é€šçš„\u0026rsquo;Clojure mapï¼›å®ƒå°†ä¸ä¼šæœ‰ä¸åŸå§‹è®°å½•ç›¸åŒçš„æ•°æ®ç±»å‹ã€‚\n(dissoc jacob :title) ; =\u0026gt; {:name \u0026#34;Jacob\u0026#34;} \u0026lt;- that\u0026#39;s not a were_records.WereWolf è¿™è‡³å°‘æœ‰ä¸¤ä¸ªåŸå› ï¼šç¬¬ä¸€ï¼Œè®¿é—® Map å€¼æ¯”è®¿é—®è®°å½•å€¼è¦æ…¢ï¼Œæ‰€ä»¥å¦‚æœä½ è¦å»ºç«‹ä¸€ä¸ªé«˜æ€§èƒ½çš„ç¨‹åºï¼Œå°±è¦æ³¨æ„äº†ã€‚ç¬¬äºŒï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„è®°å½•ç±»å‹æ—¶ï¼Œä½ å¯ä»¥æ‰©å±•å®ƒæ¥å®ç°ä¸€ä¸ªåè®®ï¼Œç±»ä¼¼äºä½ ä¹‹å‰ä½¿ç”¨extend-typeæ‰©å±•ä¸€ä¸ªç±»å‹ã€‚å¦‚æœä½ dissocä¸€ä¸ªè®°å½•ï¼Œç„¶åè¯•å›¾åœ¨ç»“æœä¸Šè°ƒç”¨ä¸€ä¸ªåè®®æ–¹æ³•ï¼Œè®°å½•çš„åè®®æ–¹æ³•å°±ä¸ä¼šè¢«è°ƒç”¨ã€‚\nä¸‹é¢æ˜¯ä½ åœ¨å®šä¹‰è®°å½•æ—¶å¦‚ä½•æ‰©å±•ä¸€ä¸ªåè®®ã€‚\nâŠ (defprotocol WereCreature â‹ (full-moon-behavior [x])) âŒ (defrecord WereWolf [name title] WereCreature (full-moon-behavior [x] (str name \u0026#34; will howl and murder\u0026#34;))) (full-moon-behavior (map-\u0026gt;WereWolf {:name \u0026#34;Lucian\u0026#34; :title \u0026#34;CEO of Melodrama\u0026#34;})) ; =\u0026gt; \u0026#34;Lucian will howl and murder\u0026#34; æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åè®®ï¼ŒWereCreature âŠï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œfull-moon-behavior â‹ã€‚åœ¨âŒï¼Œdefrecordä¸ºWereWolfå®ç°äº†WereCreatureã€‚åœ¨full-moon-behaviorå®ç°ä¸­æœ€æœ‰è¶£çš„éƒ¨åˆ†æ˜¯ä½ å¯ä»¥è®¿é—®nameã€‚ä½ è¿˜å¯ä»¥è®¿é—®title'å’Œä»»ä½•å…¶ä»–å¯èƒ½ä¸ºä½ çš„è®°å½•å®šä¹‰çš„å­—æ®µã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨extend-typeå’Œextend-protocol`æ¥æ‰©å±•è®°å½•ã€‚\nä½ ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨è®°å½•ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ Mapï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ å‘ç°è‡ªå·±åœ¨åˆ›å»º Map æ—¶åå¤ä½¿ç”¨ç›¸åŒçš„å­—æ®µï¼Œä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨è®°å½•ã€‚è¿™å‘Šè¯‰ä½ ï¼Œè¿™ç»„æ•°æ®ä»£è¡¨äº†ä½ çš„åº”ç”¨ç¨‹åºé¢†åŸŸçš„ä¿¡æ¯ï¼Œå¦‚æœä½ æä¾›ä¸€ä¸ªåŸºäºä½ è¯•å›¾å»ºæ¨¡çš„æ¦‚å¿µçš„åç§°ï¼Œä½ çš„ä»£ç å°†æ›´å¥½åœ°ä¼ è¾¾å…¶ç›®çš„ã€‚ä¸ä»…å¦‚æ­¤ï¼Œè®°å½•è®¿é—®æ¯” Map è®¿é—®æ›´æœ‰è¡¨ç°åŠ›ï¼Œæ‰€ä»¥ä½ çš„ç¨‹åºä¼šå˜å¾—æ›´æœ‰æ•ˆç‡ä¸€äº›ã€‚æœ€åï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨åè®®ï¼Œä½ å°±éœ€è¦åˆ›å»ºä¸€ä¸ªè®°å½•ã€‚\nè¿›ä¸€æ­¥ç ”ç©¶ Clojure æä¾›äº†å…¶ä»–çš„å·¥å…·æ¥å¤„ç†æŠ½è±¡å’Œæ•°æ®ç±»å‹ã€‚è¿™äº›å·¥å…·ï¼Œæˆ‘è®¤ä¸ºæ˜¯é«˜çº§çš„ï¼ŒåŒ…æ‹¬deftypeï¼Œreifyï¼Œå’Œproxyã€‚å¦‚æœä½ æœ‰å…´è¶£äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹*http://clojure.org/datatypes/*ä¸Šå…³äºæ•°æ®ç±»å‹çš„æ–‡æ¡£ã€‚\næ€»ç»“ Clojure çš„è®¾è®¡åŸåˆ™ä¹‹ä¸€å°±æ˜¯è¦å†™åˆ°æŠ½è±¡ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦åˆ°äº†å¦‚ä½•ä½¿ç”¨ Multimethods å’ŒåŸå‹æ¥å®šä¹‰ä½ è‡ªå·±çš„æŠ½è±¡æ¦‚å¿µã€‚è¿™äº›ç»“æ„æä¾›äº†å¤šæ€ï¼Œå…è®¸åŒä¸€ä¸ªæ“ä½œæ ¹æ®å®ƒçš„å‚æ•°æœ‰ä¸åŒçš„è¡¨ç°ã€‚ä½ è¿˜å­¦ä¼šäº†å¦‚ä½•ç”¨defrecordåˆ›å»ºå’Œä½¿ç”¨è‡ªå·±çš„å…³è”æ•°æ®ç±»å‹ï¼Œä»¥åŠå¦‚ä½•æ‰©å±•è®°å½•æ¥å®ç°åè®®ã€‚\nå½“æˆ‘åˆšå¼€å§‹å­¦ä¹  Clojure æ—¶ï¼Œæˆ‘å¯¹ä½¿ç”¨ Multimethodsã€åè®®å’Œè®°å½•æ„Ÿåˆ°å¾ˆå®³ç¾ã€‚ç„¶è€Œï¼Œå®ƒä»¬åœ¨ Clojure åº“ä¸­ç»å¸¸è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥äº†è§£å®ƒä»¬çš„å·¥ä½œåŸç†æ˜¯å¾ˆå¥½çš„ã€‚ä¸€æ—¦ä½ æŒæ¡äº†å®ƒä»¬ï¼Œå®ƒä»¬ä¼šå¸®åŠ©ä½ å†™å‡ºæ›´å¹²å‡€çš„ä»£ç ã€‚\nç»ƒä¹   æ‰©å±•full-moon-behaviorMultimethodsï¼Œä¸ºä½ è‡ªå·±çš„ were-creature ç±»å‹æ·»åŠ è¡Œä¸ºã€‚ åˆ›å»ºä¸€ä¸ªWereSimmonsè®°å½•ç±»å‹ï¼Œç„¶åæ‰©å±•WereCreatureåè®®ã€‚ åˆ›å»ºä½ è‡ªå·±çš„åè®®ï¼Œç„¶åä½¿ç”¨extend-typeå’Œextend-protocolæ¥æ‰©å±•å®ƒã€‚ åˆ›å»ºä¸€ä¸ªè§’è‰²æ‰®æ¼”æ¸¸æˆï¼Œä½¿ç”¨å¤šé‡è°ƒåº¦æ¥å®ç°è¡Œä¸ºã€‚  ","permalink":"https://zhenfeng-zhu.github.io/post/chapter13/","summary":"ç”¨ Multimethodsã€åè®®å’Œè®°å½•åˆ›å»ºå’Œæ‰©å±•æŠ½è±¡æ¦‚å¿µ èŠ±ä¸€åˆ†é’Ÿæ€è€ƒä¸€ä¸‹ï¼Œä½œä¸ºå¤§è‡ªç„¶çš„é¡¶çº§äº§å“ä¹‹ä¸€ï¼šäººç±»æ˜¯å¤šä¹ˆä¼Ÿå¤§ã€‚ä½œä¸ºä¸€ä¸ªäººç±»ï¼Œä½ å¯ä»¥åœ¨ç¤¾äº¤åª’ä½“ä¸Šé—²èŠï¼Œç©é¾™ä¸åœ°ä¸‹åŸï¼Œæˆ´å¸½å­ã€‚ä¹Ÿè®¸æ›´é‡è¦çš„æ˜¯ï¼Œä½ å¯ä»¥ç”¨æŠ½è±¡çš„æ¦‚å¿µæ¥æ€è€ƒå’Œäº¤æµã€‚\næŠ½è±¡æ€è€ƒçš„èƒ½åŠ›ç¡®å®æ˜¯äººç±»æœ€å¥½çš„ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒå¯ä»¥è®©ä½ è§„é¿ä½ çš„è®¤çŸ¥æé™ï¼Œå°†ä¸åŒçš„ç»†èŠ‚æ†ç»‘åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæ•´é½çš„æ¦‚å¿µåŒ…ï¼Œè®©ä½ å¯ä»¥åœ¨å·¥ä½œè®°å¿†ä¸­æŒæœ‰ã€‚ä½ ä¸éœ€è¦å»æƒ³ \u0026ldquo;å¯æŒ¤å‹çš„çº¢çƒé¼»å­è£…é¥° \u0026ldquo;è¿™ç§ç¬¨é‡çš„æƒ³æ³•ï¼Œè€Œåªéœ€è¦ \u0026ldquo;å°ä¸‘é¼»å­ \u0026ldquo;è¿™ä¸ªæ¦‚å¿µã€‚\nåœ¨ Clojure ä¸­ï¼Œä¸€ä¸ªæŠ½è±¡æ˜¯ä¸€ä¸ªæ“ä½œçš„é›†åˆï¼Œè€Œæ•°æ®ç±»å‹å®ç°æŠ½è±¡ã€‚ä¾‹å¦‚ï¼Œseq æŠ½è±¡ç”± \u0026ldquo;first \u0026ldquo;å’Œ \u0026ldquo;rest \u0026ldquo;ç­‰æ“ä½œç»„æˆï¼Œè€Œ Vector æ•°æ®ç±»å‹æ˜¯è¯¥æŠ½è±¡çš„å®ç°ï¼›å®ƒå¯¹æ‰€æœ‰ seq æ“ä½œåšå‡ºå“åº”ã€‚åƒ[:seltzer :water]è¿™æ ·çš„ç‰¹å®š Vector æ˜¯è¯¥æ•°æ®ç±»å‹çš„*å®ä¾‹ã€‚\nç¼–ç¨‹è¯­è¨€è¶Šæ˜¯è®©ä½ ä»¥æŠ½è±¡çš„æ–¹å¼æ€è€ƒå’Œå†™ä½œï¼Œä½ çš„ç”Ÿäº§åŠ›å°±è¶Šé«˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çŸ¥é“ä¸€ä¸ªæ•°æ®ç»“æ„æ˜¯ seq æŠ½è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œä½ å°±å¯ä»¥ç«‹å³è°ƒç”¨ä¸€ä¸ªå¤§çš„çŸ¥è¯†ç½‘ï¼Œäº†è§£å“ªäº›å‡½æ•°å¯ä»¥ä¸æ•°æ®ç»“æ„ä¸€èµ·å·¥ä½œã€‚å› æ­¤ï¼Œä½ ä¼šèŠ±æ—¶é—´å»å®é™…ä½¿ç”¨è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œè€Œä¸æ˜¯ä¸æ–­åœ°å»æŸ¥æ‰¾å…³äºå®ƒå¦‚ä½•å·¥ä½œçš„æ–‡æ¡£ã€‚åŒæ ·åœ°ï¼Œå¦‚æœä½ æ‰©å±•ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä½¿å…¶ä¸ seq æŠ½è±¡ä¸€èµ·å·¥ä½œï¼Œä½ å°±å¯ä»¥åœ¨ä¸Šé¢ä½¿ç”¨å¤§é‡çš„ seq å‡½æ•°åº“ã€‚\nåœ¨ç¬¬å››ç« ä¸­ï¼Œä½ äº†è§£åˆ° Clojure æ˜¯ä»¥æŠ½è±¡çš„æ–¹å¼ç¼–å†™çš„ã€‚è¿™å¾ˆå¼ºå¤§ï¼Œå› ä¸ºåœ¨ Clojure ä¸­ï¼Œä½ å¯ä»¥ä¸“æ³¨äºä½ å¯ä»¥ç”¨æ•°æ®ç»“æ„å®é™…åšçš„äº‹æƒ…ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå®ç°çš„ç»†ææœ«èŠ‚ã€‚æœ¬ç« å‘ä½ ä»‹ç»äº†åˆ›å»ºå’Œå®ç°ä½ è‡ªå·±çš„æŠ½è±¡çš„ä¸–ç•Œã€‚ä½ å°†å­¦ä¹  Multimethodsã€åè®®å’Œè®°å½•çš„åŸºç¡€çŸ¥è¯†ã€‚\nå¤šæ€ æˆ‘ä»¬åœ¨ Clojure ä¸­å®ç°æŠ½è±¡çš„ä¸»è¦æ–¹å¼æ˜¯å°†ä¸€ä¸ªæ“ä½œåç§°ä¸ä¸€ä¸ªä»¥ä¸Šçš„ç®—æ³•è”ç³»èµ·æ¥ã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºå¤šæ€ã€‚ä¾‹å¦‚ï¼Œåœ¨åˆ—è¡¨ä¸Šæ‰§è¡Œ \u0026ldquo;conj \u0026ldquo;çš„ç®—æ³•ä¸ Vector çš„ç®—æ³•ä¸åŒï¼Œä½†æˆ‘ä»¬æŠŠå®ƒä»¬ç»Ÿä¸€åœ¨åŒä¸€ä¸ªåå­—ä¸‹ï¼Œä»¥è¡¨æ˜å®ƒä»¬å®ç°äº†åŒä¸€ä¸ªæ¦‚å¿µï¼Œå³å‘è¿™ä¸ªæ•°æ®ç»“æ„æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚\nå› ä¸º Clojure çš„è®¸å¤šæ•°æ®ç±»å‹éƒ½ä¾èµ–äº Java çš„æ ‡å‡†åº“ï¼Œæ‰€ä»¥æœ¬ç« ä¸­ä½¿ç”¨äº†ä¸€ç‚¹ Javaã€‚ä¾‹å¦‚ï¼ŒClojure çš„å­—ç¬¦ä¸²åªæ˜¯ Java çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ Java ç±»java.lang.Stringçš„å®ä¾‹ã€‚è¦åœ¨ Java ä¸­å®šä¹‰ä½ è‡ªå·±çš„æ•°æ®ç±»å‹ï¼Œä½ è¦ä½¿ç”¨ç±»ã€‚Clojure æä¾›äº†é¢å¤–çš„ç±»å‹ç»“æ„ã€‚Â è®°å½•å’Œç±»å‹ã€‚æœ¬ä¹¦åªæ¶‰åŠè®°å½•ã€‚\nåœ¨æˆ‘ä»¬å­¦ä¹ è®°å½•ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ Multimethodsï¼Œè¿™æ˜¯æˆ‘ä»¬å®šä¹‰å¤šæ€è¡Œä¸ºçš„ç¬¬ä¸€ä¸ªå·¥å…·ã€‚\nMultimethods Multimethodsä¸ºä½ æä¾›äº†ä¸€ç§ç›´æ¥çš„ã€çµæ´»çš„æ–¹æ³•ï¼Œå°†å¤šæ€å¼•å…¥ä½ çš„ä»£ç ä¸­ã€‚ä½¿ç”¨ Multimethodsï¼Œä½ å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªè°ƒåº¦å‡½æ•°å°†ä¸€ä¸ªåå­—ä¸å¤šä¸ªå®ç°è”ç³»èµ·æ¥ï¼Œè¯¥å‡½æ•°äº§ç”Ÿè°ƒåº¦å€¼ï¼Œç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ªæ–¹æ³•ã€‚è°ƒåº¦å‡½æ•°å°±åƒé¤å…é‡Œçš„ä¸»äººã€‚ä¸»äººä¼šé—®ä½ ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ \u0026ldquo;ä½ æœ‰é¢„è®¢å—ï¼Ÿ\u0026ldquo;å’Œ \u0026ldquo;èšä¼šäººæ•°ï¼Ÿ\u0026quot;ï¼Œç„¶åç»™ä½ å®‰æ’ç›¸åº”çš„åº§ä½ã€‚åŒæ ·ï¼Œå½“ä½ è°ƒç”¨ä¸€ä¸ª Multimethods æ—¶ï¼Œè°ƒåº¦å‡½æ•°å°†è¯¢é—®å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°æ­£ç¡®çš„æ–¹æ³•ï¼Œæ­£å¦‚è¿™ä¸ªä¾‹å­æ‰€æ˜¾ç¤ºçš„ã€‚\n(ns were-creatures) âŠ (defmulti full-moon-behavior (fn [were-creature] (:were-type were-creature))) â‹ (defmethod full-moon-behavior :wolf [were-creature] (str (:name were-creature) \u0026#34; will howl and murder\u0026#34;)) âŒ (defmethod full-moon-behavior :simmons [were-creature] (str (:name were-creature) \u0026#34; will encourage people and sweat to the oldies\u0026#34;)) (full-moon-behavior {:were-type :wolf â :name \u0026#34;Rachel from next door\u0026#34;}) ; =\u0026gt; \u0026#34;Rachel from next door will howl and murder\u0026#34; (full-moon-behavior {:name \u0026#34;Andy the baker\u0026#34; â :were-type :simmons}) ; =\u0026gt; \u0026#34;Andy the baker will encourage people and sweat to the oldies\u0026#34; è¿™ä¸ª Multimethods æ˜¾ç¤ºäº†ä½ å¦‚ä½•å®šä¹‰ä¸åŒç§ç±»çš„ç‹¼äººç”Ÿç‰©çš„æ»¡æœˆè¡Œä¸ºã€‚å¤§å®¶éƒ½çŸ¥é“ç‹¼äººå˜æˆäº†ç‹¼ï¼Œåˆ°å¤„åšå«ç€æ€äººã€‚ä¸€ç§ä¸å¤ªçŸ¥åçš„ç‹¼äººï¼Œå³ç‹¼-è¥¿è’™æ–¯ï¼Œå˜æˆç†æŸ¥å¾·-è¥¿è’™æ–¯ï¼Œçƒ«ç€å¤´å‘ï¼Œåˆ°å¤„è·‘ï¼Œé¼“åŠ±äººä»¬åšæœ€å¥½çš„è‡ªå·±ï¼Œä¸ºè€äººä»¬æµæ±—ã€‚ä½ ä¸æƒ³è¢«è¿™ä¸¤ç§ç”Ÿç‰©å’¬åˆ°ï¼Œå¦åˆ™ä½ å°±ä¼šå˜æˆå®ƒä»¬ã€‚","title":"Chapter13 æŠ½è±¡"},{"content":"ä¸ JVM ä¸€èµ·å·¥ä½œ åœ¨æ¯ä¸ª Clojurist çš„ç”Ÿå‘½ä¸­éƒ½ä¼šæœ‰è¿™ä¹ˆä¸€å¤©ï¼Œå¥¹å¿…é¡»ä»çº¯å‡½æ•°å’Œä¸å¯å˜æ•°æ®ç»“æ„çš„åº‡æŠ¤æ‰€å†’é™©è¿›å…¥é‡è›®çš„ Java å¤§é™†ã€‚è¿™æ®µè‰°éš¾çš„æ—…ç¨‹æ˜¯å¿…è¦çš„ï¼Œå› ä¸º Clojure æ˜¯åœ¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šæ‰˜ç®¡çš„ï¼Œè¿™èµ‹äºˆäº†å®ƒä¸‰ä¸ªåŸºæœ¬ç‰¹æ€§ã€‚\nèµ‹äºˆå®ƒä¸‰ä¸ªåŸºæœ¬ç‰¹å¾ã€‚é¦–å…ˆï¼Œä½ è¿è¡Œ Clojure åº”ç”¨ç¨‹åºçš„æ–¹å¼ä¸ä½ è¿è¡Œ Java åº”ç”¨ç¨‹åºçš„æ–¹å¼ç›¸åŒã€‚ç¬¬äºŒï¼Œä½ éœ€è¦ä½¿ç”¨ Java å¯¹è±¡æ¥å®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå¦‚è¯»å–æ–‡ä»¶å’Œå¤„ç†æ—¥æœŸã€‚ç¬¬ä¸‰ï¼ŒJava æœ‰ä¸€ä¸ªåºå¤§çš„æœ‰ç”¨åº“çš„ç”Ÿæ€ç³»ç»Ÿï¼Œä½ éœ€è¦å¯¹ Java æœ‰ä¸€å®šçš„äº†è§£æ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚\nè¿™æ ·ä¸€æ¥ï¼ŒClojure å°±æœ‰ç‚¹åƒä¸€ä¸ªä¹Œæ‰˜é‚¦ç¤¾åŒºï¼Œè¢«æ”¾ç½®åœ¨ä¸€ä¸ªä¹Œæ‰˜é‚¦å›½å®¶çš„ä¸­é—´ã€‚æ˜¾ç„¶ï¼Œä½ æ›´æ„¿æ„ä¸å…¶ä»–ä¹Œæ‰˜é‚¦äººäº’åŠ¨ï¼Œä½†å¶å°”ä½ ä¹Ÿéœ€è¦ä¸å½“åœ°äººäº¤è°ˆï¼Œä»¥ä¾¿å®Œæˆå·¥ä½œã€‚\nè¿™ä¸€ç« å°±åƒä¸€æœ¬çŸ­è¯­ä¹¦å’Œ Java å›½å®¶çš„æ–‡åŒ–ä»‹ç»ä¹‹é—´çš„äº¤å‰ã€‚ä½ å°†äº†è§£ä»€ä¹ˆæ˜¯ JVMï¼Œå®ƒæ˜¯å¦‚ä½•è¿è¡Œç¨‹åºçš„ï¼Œä»¥åŠå¦‚ä½•ä¸ºå®ƒç¼–è¯‘ç¨‹åºã€‚æœ¬ç« è¿˜å°†ä¸ºä½ ç®€è¦ä»‹ç»å¸¸ç”¨çš„ Java ç±»å’Œæ–¹æ³•ï¼Œå¹¶è§£é‡Šå¦‚ä½•ä½¿ç”¨ Clojure ä¸å®ƒä»¬äº’åŠ¨ã€‚ä½ å°†å­¦ä¼šå¦‚ä½•æ€è€ƒå’Œç†è§£ Javaï¼Œä»¥ä¾¿å°†ä»»ä½• Java åº“çº³å…¥ä½ çš„ Clojure ç¨‹åºä¸­ã€‚\nè¦è¿è¡Œæœ¬ç« çš„ä¾‹å­ï¼Œä½ éœ€è¦åœ¨ç”µè„‘ä¸Šå®‰è£… 1.6 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ Java å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯è¿è¡Œjavac -versionæ¥æ£€æŸ¥ã€‚ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ \u0026ldquo;java 1.8.0_40 \u0026ldquo;çš„å†…å®¹ï¼›å¦‚æœæ²¡æœ‰ï¼Œè¯·è®¿é—®http://www.oracle.com/ï¼Œä¸‹è½½æœ€æ–°çš„ JDKã€‚\nJVM å¼€å‘äººå‘˜ç”¨ JVM è¿™ä¸ªè¯æ¥æŒ‡ä»£ä¸€äº›ä¸åŒçš„ä¸œè¥¿ã€‚ä½ ä¼šå¬åˆ°ä»–ä»¬è¯´ï¼Œ\u0026ldquo;Clojure åœ¨the JVM ä¸Šè¿è¡Œ\u0026rdquo;ï¼Œä½ ä¹Ÿä¼šå¬åˆ°ï¼Œ\u0026ldquo;Clojure ç¨‹åºåœ¨a JVM ä¸­è¿è¡Œ\u0026rdquo;ã€‚åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼ŒJVM æŒ‡çš„æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µ\u0026ndash;Java è™šæ‹Ÿæœºçš„ä¸€èˆ¬æ¨¡å‹ã€‚åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œå®ƒæŒ‡çš„æ˜¯ä¸€ä¸ªè¿›ç¨‹\u0026ndash;ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„å®ä¾‹ã€‚æˆ‘ä»¬å°†ä¸“æ³¨äº JVM æ¨¡å‹ï¼Œä½†å½“æˆ‘ä»¬è°ˆè®ºè¿è¡Œä¸­çš„ JVM è¿›ç¨‹æ—¶ï¼Œæˆ‘å°†æŒ‡å‡ºæ¥ã€‚\nä¸ºäº†ç†è§£ JVMï¼Œè®©æˆ‘ä»¬å›å¤´çœ‹çœ‹æ™®é€šçš„è®¡ç®—æœºæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨è®¡ç®—æœºå¿ƒè„çš„æ·±å¤„æ˜¯å®ƒçš„ CPUï¼Œè€Œ CPU çš„å·¥ä½œæ˜¯æ‰§è¡ŒåƒåŠ å’Œæ— ç¬¦å·ä¹˜æ³•è¿™æ ·çš„æ“ä½œã€‚ä½ å¯èƒ½å¬è¯´è¿‡ç¨‹åºå‘˜å°†è¿™äº›æŒ‡ä»¤ç¼–ç åœ¨æ‰“å¡æœºä¸Šã€ç¯æ³¡é‡Œã€ä¹Œé¾Ÿå£³çš„ç¥åœ£ç¼éš™é‡Œï¼Œæˆ–è€…ä»€ä¹ˆçš„ï¼Œä½†ç°åœ¨è¿™äº›æ“ä½œåœ¨æ±‡ç¼–è¯­è¨€ä¸­ç”¨ ADD å’Œ MUL è¿™æ ·çš„è®°å¿†ç¬¦å·è¡¨ç¤ºã€‚CPU æ¶æ„ï¼ˆX86ã€ARMv7ï¼Œç­‰ç­‰ï¼‰å†³å®šäº†å“ªäº›æ“ä½œå¯ä»¥ä½œä¸ºè¯¥æ¶æ„çš„æŒ‡ä»¤é›†çš„ä¸€éƒ¨åˆ†ã€‚\nç”±äºç”¨æ±‡ç¼–è¯­è¨€ç¼–ç¨‹å¹¶ä¸æœ‰è¶£ï¼Œäººä»¬å‘æ˜äº†åƒ C å’Œ C++è¿™æ ·çš„é«˜çº§è¯­è¨€ï¼Œå°†å…¶ç¼–è¯‘æˆ CPU å¯ä»¥ç†è§£çš„æŒ‡ä»¤ã€‚å¤§ä½“ä¸Šè¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯\n ç¼–è¯‘å™¨è¯»å–æºä»£ç ã€‚ ç¼–è¯‘å™¨è¾“å‡ºä¸€ä¸ªåŒ…å«æœºå™¨æŒ‡ä»¤çš„æ–‡ä»¶ã€‚ CPU æ‰§è¡Œè¿™äº›æŒ‡ä»¤ã€‚  åœ¨å›¾ 12-1 ä¸­æ³¨æ„åˆ°ï¼Œæœ€ç»ˆï¼Œä½ å¿…é¡»å°†ç¨‹åºç¿»è¯‘æˆ CPU èƒ½å¤Ÿç†è§£çš„æŒ‡ä»¤ï¼Œè€Œ CPU å¹¶ä¸å…³å¿ƒä½ ç”¨å“ªç§ç¼–ç¨‹è¯­è¨€æ¥äº§ç”Ÿè¿™äº›æŒ‡ä»¤ã€‚\nJVM ç±»ä¼¼äºè®¡ç®—æœºï¼Œå®ƒä¹Ÿéœ€è¦å°†ä»£ç ç¿»è¯‘æˆä½çº§åˆ«çš„æŒ‡ä»¤ï¼Œç§°ä¸ºJava å­—èŠ‚ç ã€‚ç„¶è€Œï¼Œä½œä¸ºä¸€ä¸ªè™šæ‹Ÿæœºå™¨ï¼Œè¿™ç§ç¿»è¯‘æ˜¯ä½œä¸ºè½¯ä»¶è€Œä¸æ˜¯ç¡¬ä»¶å®ç°çš„ã€‚è¿è¡Œä¸­çš„ JVM é€šè¿‡å°†å­—èŠ‚ç å®æ—¶ç¿»è¯‘æˆä¸»æœºå¯ä»¥ç†è§£çš„æœºå™¨ä»£ç æ¥æ‰§è¡Œï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºåŠæ—¶**ç¼–è¯‘ã€‚\nå›¾ 12-1ï¼šC è¯­è¨€ç¨‹åºå¦‚ä½•è¢«ç¿»è¯‘æˆæœºå™¨ç çš„é«˜çº§æ¦‚è¿°\nä¸ºäº†è®©ä¸€ä¸ªç¨‹åºåœ¨ JVM ä¸Šè¿è¡Œï¼Œå®ƒå¿…é¡»è¢«ç¼–è¯‘æˆ Java å­—èŠ‚ç ã€‚é€šå¸¸ï¼Œå½“ä½ ç¼–è¯‘ç¨‹åºæ—¶ï¼Œäº§ç”Ÿçš„å­—èŠ‚ç è¢«ä¿å­˜åœ¨ä¸€ä¸ª*.classæ–‡ä»¶ä¸­ã€‚ç„¶åä½ ä¼šæŠŠè¿™äº›æ–‡ä»¶æ‰“åŒ…åœ¨Java å½’æ¡£*æ–‡ä»¶ï¼ˆJAR æ–‡ä»¶ï¼‰ä¸­ã€‚å°±åƒ CPU ä¸å…³å¿ƒä½ ç”¨å“ªç§ç¼–ç¨‹è¯­è¨€æ¥ç”Ÿæˆæœºå™¨æŒ‡ä»¤ä¸€æ ·ï¼ŒJVM ä¹Ÿä¸å…³å¿ƒä½ å¦‚ä½•åˆ›å»ºå­—èŠ‚ç ã€‚å®ƒä¸å…³å¿ƒä½ æ˜¯å¦ä½¿ç”¨ Scalaã€JRubyã€Clojureï¼Œç”šè‡³æ˜¯ Java æ¥åˆ›å»º Java å­—èŠ‚ç ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±åƒå›¾ 12-2 ä¸­æ‰€ç¤ºçš„é‚£æ ·ã€‚\n Java ç¼–è¯‘å™¨è¯»å–æºä»£ç ã€‚ ç¼–è¯‘å™¨è¾“å‡ºå­—èŠ‚ç ï¼Œé€šå¸¸æ˜¯åœ¨ä¸€ä¸ª JAR æ–‡ä»¶ä¸­ã€‚ JVM æ‰§è¡Œå­—èŠ‚ç ã€‚ VM å‘ CPU å‘é€æœºå™¨æŒ‡ä»¤ã€‚  å½“æœ‰äººè¯´ Clojure åœ¨ JVM ä¸Šè¿è¡Œæ—¶ï¼Œä»–ä»¬çš„æ„æ€ä¹‹ä¸€æ˜¯ Clojure ç¨‹åºè¢«ç¼–è¯‘æˆ Java å­—èŠ‚ç ï¼ŒJVM è¿›ç¨‹æ‰§è¡Œå®ƒä»¬ã€‚ä»æ“ä½œçš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ„å‘³ç€ä½ å¯¹å¾… Clojure ç¨‹åºå’Œ Java ç¨‹åºæ˜¯ä¸€æ ·çš„ã€‚ä½ æŠŠå®ƒä»¬ç¼–è¯‘æˆ JAR æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨javaå‘½ä»¤è¿è¡Œå®ƒä»¬ã€‚å¦‚æœå®¢æˆ·éœ€è¦ä¸€ä¸ªåœ¨ JVM ä¸Šè¿è¡Œçš„ç¨‹åºï¼Œä½ å¯ä»¥å·å·åœ°ç”¨ Clojure è€Œä¸æ˜¯ Java æ¥ç¼–å†™ï¼Œä»–ä»¬ä¸ä¼šçŸ¥é“çš„ã€‚ä»å¤–é¢çœ‹ï¼Œä½ æ— æ³•åˆ†è¾¨ Java å’Œ Clojure ç¨‹åºä¹‹é—´çš„åŒºåˆ«ï¼Œå°±åƒä½ æ— æ³•åˆ†è¾¨ C å’Œ C++ç¨‹åºä¹‹é—´çš„åŒºåˆ«ä¸€æ ·ã€‚Clojure å¯ä»¥è®©ä½ å˜å¾—å¯Œæœ‰æˆæ•ˆï¼Œè€Œä¸”æ˜¯å·å·æ‘¸æ‘¸çš„ã€‚\nï¼\nå›¾ 12-2ï¼šJava ç¨‹åºäº§ç”Ÿ JVM å­—èŠ‚ç ï¼Œä½† JVM ä»ç„¶éœ€è¦äº§ç”Ÿæœºå™¨æŒ‡ä»¤ï¼Œå°±åƒ C è¯­è¨€ç¼–è¯‘å™¨ä¸€æ ·ã€‚\nç¼–å†™ã€ç¼–è¯‘å’Œè¿è¡Œä¸€ä¸ª Java ç¨‹åº è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªçœŸæ­£çš„ Java ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†äº†è§£åˆ° Java æ‰€ä½¿ç”¨çš„é¢å‘å¯¹è±¡çš„èŒƒå¼ã€‚ç„¶åï¼Œä½ å°†ç”¨ Java å»ºç«‹ä¸€ä¸ªç®€å•çš„æµ·ç›—çŸ­è¯­ä¹¦ã€‚è¿™å°†å¸®åŠ©ä½ å¯¹ JVM æ„Ÿåˆ°æ›´åŠ èˆ’é€‚ï¼Œå®ƒå°†ä¸ºå³å°†åˆ°æ¥çš„ Java äº’æ“ä½œï¼ˆç¼–å†™ç›´æ¥ä½¿ç”¨ Java ç±»ã€å¯¹è±¡å’Œæ–¹æ³•çš„ Clojure ä»£ç ï¼‰ä¸€èŠ‚åšå¥½å‡†å¤‡ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ¶æ£è¯•å›¾åœ¨å…¬æµ·ä¸Šç ´åä½ çš„æˆ˜åˆ©å“ï¼Œå®ƒå°±ä¼šæ´¾ä¸Šç”¨åœºã€‚ä¸ºäº†æŠŠæ‰€æœ‰çš„ä¿¡æ¯è”ç³»åœ¨ä¸€èµ·ï¼Œä½ å°†åœ¨æœ¬ç« çš„æœ€åå·çœ‹ä¸€äº› Clojure çš„ Java ä»£ç ã€‚\né¢å‘å¯¹è±¡çš„ç¼–ç¨‹åœ¨ä¸–ç•Œæœ€å¾®å°çš„æœå£³ä¸­çš„åº”ç”¨ Java æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³äº†è§£ä½ åœ¨ Clojure ç¼–ç¨‹ä¸­ä½¿ç”¨ Java åº“æˆ–ç¼–å†™ Java äº’æ“ä½œä»£ç æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä½ å°±éœ€è¦äº†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ä½ ä¹Ÿä¼šåœ¨ Clojure æ–‡æ¡£ä¸­å‘ç°é¢å‘å¯¹è±¡çš„æœ¯è¯­ï¼Œæ‰€ä»¥å­¦ä¹ è¿™äº›æ¦‚å¿µå¾ˆé‡è¦ã€‚å¦‚æœä½ ç²¾é€š OOPï¼Œå¯ä»¥éšæ„è·³è¿‡æœ¬èŠ‚ã€‚å¯¹äºé‚£äº›éœ€è¦ä¸¤åˆ†é’Ÿäº†è§£çš„äººæ¥è¯´ï¼Œè¿™é‡Œæ˜¯ï¼šOOP çš„æ ¸å¿ƒè§’è‰²æ˜¯ç±»ã€å¯¹è±¡å’Œæ–¹æ³•ã€‚\næˆ‘è®¤ä¸ºå¯¹è±¡æ˜¯çœŸæ­£çš„ã€çœŸæ­£çš„ã€å¯ç¬‘çš„è ¢è´§æœºå™¨äººã€‚å®ƒä»¬æ˜¯é‚£ç§æ°¸è¿œä¸ä¼šå¼•èµ·å“²å­¦è¾©è®ºçš„æœºå™¨äººï¼Œå³å¼ºè¿«æœ‰çŸ¥è§‰çš„ç”Ÿç‰©è¿›è¡Œæ°¸ä¹…çš„å¥´å½¹çš„ä¼¦ç†ã€‚è¿™äº›æœºå™¨äººåªåšä¸¤ä»¶äº‹ï¼šä»–ä»¬å“åº”å‘½ä»¤å’Œç»´æŠ¤æ•°æ®ã€‚åœ¨æˆ‘çš„æƒ³è±¡ä¸­ï¼Œå®ƒä»¬é€šè¿‡åœ¨å° Hello Kitty å‰ªè´´æ¿ä¸Šå†™ä¸‹ä¸œè¥¿æ¥åšè¿™ä»¶äº‹ã€‚\næƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªåˆ¶é€ è¿™äº›æœºå™¨äººçš„å·¥å‚ã€‚æœºå™¨äººæ‰€ç†è§£çš„å‘½ä»¤é›†å’Œå®ƒæ‰€ç»´æŠ¤çš„æ•°æ®é›†éƒ½æ˜¯ç”±åˆ¶é€ æœºå™¨äººçš„å·¥å‚å†³å®šçš„ã€‚åœ¨ OOP æœ¯è¯­ä¸­ï¼Œå·¥å‚å¯¹åº”äºç±»ï¼Œandroids å¯¹åº”äºå¯¹è±¡ï¼Œè€Œå‘½ä»¤å¯¹åº”äºæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ªScaryClown'å·¥å‚ï¼ˆç±»ï¼‰ï¼Œå®ƒç”Ÿäº§çš„androidsï¼ˆå¯¹è±¡ï¼‰å“åº”makeBalloonArt\u0026rsquo;å‘½ä»¤ï¼ˆæ–¹æ³•ï¼‰ã€‚è¿™ä¸ªå®‰å“æœºä¸€ç›´è·Ÿè¸ªå®ƒæ‰€æ‹¥æœ‰çš„æ°”çƒçš„æ•°é‡ï¼Œç„¶ååœ¨æ°”çƒçš„æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°è¿™ä¸ªæ•°å­—ã€‚å®ƒå¯ä»¥ç”¨balloonCountæŠ¥å‘Šè¿™ä¸ªæ•°å­—ï¼Œç”¨receiveBalloonsæ¥æ”¶ä»»ä½•æ•°é‡çš„æ°”çƒã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä¸ä»£è¡¨å°ä¸‘ Belly Rubs çš„ Java å¯¹è±¡è¿›è¡Œäº¤äº’ã€‚\nScaryClown bellyRubsTheClown = new ScaryClown(); bellyRubsTheClown.balloonCount(); // =\u0026gt; 0 bellyRubsTheClown.receiveBalloons(2); bellyRubsTheClown.balloonCount(); // =\u0026gt; 2 bellyRubsTheClown.makeBalloonArt(); // =\u0026gt; \u0026#34;Belly Rubs makes a balloon shaped like a clown, because Belly Rubs // =\u0026gt; is trying to scare you and nothing is scarier than clowns.\u0026#34; è¿™ä¸ªä¾‹å­å‘Šè¯‰ä½ å¦‚ä½•ä½¿ç”¨ScaryClownç±»åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡bellyRubsTheClownã€‚å®ƒè¿˜å‘ä½ å±•ç¤ºäº†å¦‚ä½•åœ¨è¯¥å¯¹è±¡ä¸Šè°ƒç”¨æ–¹æ³•ï¼ˆå¦‚æ°”çƒè®¡æ•°'ã€æ¥æ”¶æ°”çƒ\u0026rsquo;å’Œ`åˆ¶ä½œæ°”çƒè‰ºæœ¯\u0026rsquo;ï¼‰ï¼Œå¤§æ¦‚æ˜¯ä¸ºäº†è®©ä½ èƒ½å“å”¬å­©å­ã€‚\nä½ åº”è¯¥çŸ¥é“ OOP çš„æœ€åä¸€ä¸ªæ–¹é¢ï¼Œæˆ–è€…è‡³å°‘æ˜¯å®ƒåœ¨ Java ä¸­çš„å®ç°æ–¹å¼ï¼Œå°±æ˜¯ä½ ä¹Ÿå¯ä»¥å‘å·¥å‚å‘é€å‘½ä»¤ã€‚åœ¨ OOP æœ¯è¯­ä¸­ï¼Œä½ ä¼šè¯´ï¼Œç±»ä¹Ÿæœ‰æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå†…ç½®ç±»Mathæœ‰è®¸å¤šç±»æ–¹æ³•ï¼ŒåŒ…æ‹¬Math.absï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°å­—çš„ç»å¯¹å€¼ã€‚\nMath.abs(-50) // =\u0026gt; 50 æˆ‘å¸Œæœ›è¿™äº›å°ä¸‘æ²¡æœ‰ç»™ä½ é€ æˆå¤ªå¤§çš„åˆ›ä¼¤ã€‚ç°åœ¨è®©æˆ‘ä»¬æŠŠä½ çš„ OOP çŸ¥è¯†ç”¨åœ¨å·¥ä½œä¸Šå§!\nAhoy, World ç»§ç»­å‰è¿›ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºphrasebookçš„æ–°ç›®å½•ã€‚åœ¨è¯¥ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºPiratePhrases.javaçš„æ–‡ä»¶ï¼Œå¹¶ç¼–å†™ä»¥ä¸‹å†…å®¹ã€‚\npublic class PiratePhrases { public static void main(String[] args) { System.out.println(\u0026#34;Shiver me timbers!!\u0026#34;); } } è¿™ä¸ªéå¸¸ç®€å•çš„ç¨‹åºå°†åœ¨ä½ è¿è¡Œæ—¶å‘ä½ çš„ç»ˆç«¯æ‰“å° \u0026ldquo;Shiver me timbers!!!\u0026ldquo;è¿™å¥è¯ã€‚(è¿™å°±æ˜¯æµ·ç›—è¯´ \u0026ldquo;ä½ å¥½ï¼Œä¸–ç•Œï¼\u0026ldquo;çš„æ–¹å¼ï¼‰ï¼Œå½“ä½ è¿è¡Œå®ƒæ—¶ï¼Œå®ƒå°†æ‰“å°åˆ°ä½ çš„ç»ˆç«¯ã€‚å®ƒç”±ä¸€ä¸ªç±»PiratePhraseså’Œä¸€ä¸ªå±äºè¯¥ç±»çš„é™æ€æ–¹æ³•mainç»„æˆã€‚é™æ€æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯ç±»çš„æ–¹æ³•ã€‚\nåœ¨ä½ çš„ç»ˆç«¯ï¼Œç”¨ javac PiratePhrases.java å‘½ä»¤ç¼–è¯‘PiratePhrasesæºä»£ç ã€‚å¦‚æœä½ æ‰“çš„å­—éƒ½æ˜¯æ­£ç¡®çš„ï¼Œ**ä½ çš„å¿ƒæ˜¯çº¯æ´çš„ï¼Œä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªåä¸ºPiratePhrases.classçš„æ–‡ä»¶ã€‚\n$ ls PiratePhrases.class PiratePhrases.java ä½ åˆšåˆšç¼–è¯‘äº†ä½ çš„ç¬¬ä¸€ä¸ª Java ç¨‹åºï¼Œæˆ‘çš„æœ‹å‹! ç°åœ¨ç”¨java PiratePhrasesè¿è¡Œå®ƒã€‚ä½ åº”è¯¥çœ‹åˆ°è¿™ä¸ªã€‚\nShiver me timbers!!! è¿™é‡Œå‘ç”Ÿçš„äº‹æƒ…æ˜¯ä½ ç”¨ Java ç¼–è¯‘å™¨javacåˆ›å»ºäº†ä¸€ä¸ª Java ç±»æ–‡ä»¶ï¼ŒPiratePhrases.classã€‚è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†å¤§é‡çš„ Java å­—èŠ‚ç ï¼ˆå¥½å§ï¼Œå¯¹äºè¿™ä¹ˆå¤§çš„ç¨‹åºï¼Œä¹Ÿè®¸åªæœ‰ä¸€ä¸ªå­—èŠ‚ï¼‰ã€‚\nå½“ä½ è¿è¡Œ \u0026ldquo;java PiratePhrases \u0026ldquo;æ—¶ï¼ŒJVM é¦–å…ˆæŸ¥çœ‹äº†ä½ çš„classpathï¼Œå¯»æ‰¾ä¸€ä¸ªåä¸º \u0026ldquo;PiratePhrases \u0026ldquo;çš„ç±»ã€‚classpath æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„åˆ—è¡¨ï¼ŒJVM é€šè¿‡æœç´¢æ¥å¯»æ‰¾å®šä¹‰ç±»çš„æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œclasspath åŒ…æ‹¬ä½ è¿è¡Œ java æ—¶æ‰€åœ¨çš„ç›®å½•ã€‚è¯•ç€è¿è¡Œ java -classpath /tmp PiratePhrasesï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå°½ç®¡PiratePhrases.classå°±åœ¨ä½ çš„å½“å‰ç›®å½•ä¸­ã€‚\næ³¨æ„ ä½ å¯ä»¥åœ¨ä½ çš„ classpath ä¸Šæœ‰å¤šä¸ªè·¯å¾„ï¼Œå¦‚æœä½ åœ¨ Mac ä¸Šæˆ–è¿è¡Œ Linuxï¼Œå¯ä»¥ç”¨å†’å·éš”å¼€ï¼Œå¦‚æœä½ åœ¨ä½¿ç”¨ Windowsï¼Œå¯ä»¥ç”¨åˆ†å·ã€‚ä¾‹å¦‚ï¼Œclasspath /tmp:/var/maven:.åŒ…æ‹¬/tmpã€/var/maven å’Œ.ç›®å½•ã€‚\nåœ¨ Java ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶åªå…è®¸æœ‰ä¸€ä¸ªå…¬æœ‰ç±»ï¼Œè€Œä¸”æ–‡ä»¶åå¿…é¡»ä¸ç±»åä¸€è‡´ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆjavaçŸ¥é“è¦å°è¯•åœ¨PiratePhrases.classä¸­å¯»æ‰¾PiratePhrasesç±»çš„å­—èŠ‚ç ã€‚åœ¨javaæ‰¾åˆ°PiratePhrasesç±»çš„å­—èŠ‚ç åï¼Œå®ƒæ‰§è¡Œäº†è¯¥ç±»çš„mainæ–¹æ³•ã€‚Java ä¸ C è¯­è¨€ç±»ä¼¼ï¼Œåªè¦ä½ è¯´ \u0026ldquo;è¿è¡ŒæŸäº›ä¸œè¥¿ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªç±»ä½œä¸ºå…¥å£ç‚¹\u0026rdquo;ï¼Œå®ƒå°±ä¼šä¸€ç›´è¿è¡Œè¿™ä¸ªç±»çš„main'æ–¹æ³•ï¼›å› æ­¤ï¼Œè¿™ä¸ªæ–¹æ³•å¿…é¡»æ˜¯public\u0026rsquo;ï¼Œä½ å¯ä»¥åœ¨`PiratePhrases\u0026rsquo;çš„æºä»£ç ä¸­çœ‹åˆ°ã€‚\nåœ¨ä¸‹ä¸€èŠ‚ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å¤„ç†è·¨è¶Šå¤šä¸ªæ–‡ä»¶çš„ç¨‹åºä»£ç ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Java åº“ã€‚\nåŒ…å’Œå¯¼å…¥ ä¸ºäº†äº†è§£å¦‚ä½•ä½¿ç”¨å¤šæ–‡ä»¶ç¨‹åºå’Œ Java åº“ï¼Œæˆ‘ä»¬å°†ç¼–è¯‘å¹¶è¿è¡Œä¸€ä¸ªç¨‹åºã€‚æœ¬èŠ‚å¯¹ Clojure æœ‰ç›´æ¥çš„å½±å“ï¼Œå› ä¸ºä½ å°†ä½¿ç”¨åŒæ ·çš„æƒ³æ³•å’Œæœ¯è¯­æ¥ä¸ Java åº“è¿›è¡Œäº¤äº’ã€‚\nè®©æˆ‘ä»¬ä»å‡ ä¸ªå®šä¹‰å¼€å§‹ã€‚\n åŒ…ä¸ Clojure çš„å‘½åç©ºé—´ç±»ä¼¼ï¼ŒåŒ…æä¾›äº†ä»£ç ç»„ç»‡ã€‚åŒ…åŒ…å«ç±»ï¼ŒåŒ…åå¯¹åº”äºæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸­æœ‰ \u0026ldquo;package com.shapemaster \u0026ldquo;ä¸€è¡Œï¼Œé‚£ä¹ˆç›®å½•com/shapemasterä¸€å®šå­˜åœ¨äºä½ çš„ classpath ä¸Šã€‚åœ¨è¯¥ç›®å½•ä¸­ä¼šæœ‰å®šä¹‰ç±»çš„æ–‡ä»¶ã€‚ import Java å…è®¸ä½ å¯¼å…¥ç±»ï¼Œè¿™åŸºæœ¬ä¸Šæ„å‘³ç€ä½ å¯ä»¥ä¸ä½¿ç”¨å®ƒä»¬çš„å‘½åç©ºé—´å‰ç¼€æ¥å¼•ç”¨å®ƒä»¬ã€‚æ‰€ä»¥å¦‚æœä½ åœ¨com.shapemasterä¸­æœ‰ä¸€ä¸ªåä¸ºSquareçš„ç±»ï¼Œä½ å¯ä»¥åœ¨.javaæ–‡ä»¶çš„é¡¶éƒ¨å†™ä¸Šimport``com.shapemaster.Square;æˆ–import com.shapemaster.*;ï¼Œä»¥ä¾¿åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨Squareè€Œä¸æ˜¯com.shapemaster.Squareã€‚  è®©æˆ‘ä»¬è¯•è¯•ä½¿ç”¨packageå’Œimportã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªåä¸ºpirate_phrasesçš„åŒ…ï¼Œå®ƒæœ‰ä¸¤ä¸ªç±»ï¼Œé—®å€™'å’Œå‘Šåˆ«\u0026rsquo;ã€‚Â é¦–å…ˆï¼Œæµè§ˆä½ çš„phrasebookï¼Œåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºå¦ä¸€ä¸ªç›®å½•ï¼Œpirate_phrasesã€‚åˆ›å»ºpirate_phrasesæ˜¯å¿…è¦çš„ï¼Œå› ä¸º Java åŒ…çš„åç§°ä¸æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç›¸å¯¹åº”ã€‚ç„¶åï¼Œåœ¨pirate_phrasesç›®å½•ä¸‹åˆ›å»ºGreetings.javaã€‚\nâŠ package pirate_phrases; public class Greetings { public static void hello() { System.out.println(\u0026#34;Shiver me timbers!!!\u0026#34;); } } åœ¨âŠï¼Œpackage pirate_phrases;è¡¨ç¤ºè¿™ä¸ªç±»å°†æ˜¯pirate_phrasesåŒ…çš„ä¸€éƒ¨åˆ†ã€‚ç°åœ¨åœ¨pirate_phrasesç›®å½•ä¸‹åˆ›å»ºFarewells.javaã€‚\npackage pirate_phrases; public class Farewells { public static void goodbye() { System.out.println(\u0026#34;A fair turn of the tide ter ye thar, ye magnificent sea friend!!\u0026#34;); } } ç°åœ¨åœ¨phrasebookç›®å½•ä¸‹åˆ›å»ºPirateConversation.javaã€‚\nimport pirate_phrases.*; public class PirateConversation { public static void main(String[] args) { Greetings greetings = new Greetings(); greetings.hello(); Farewells farewells = new Farewells(); farewells.goodbye(); } } ç¬¬ä¸€è¡Œï¼Œimport pirate_phrases.*;ï¼Œå¯¼å…¥äº†pirate_phrasesåŒ…ä¸­çš„æ‰€æœ‰ç±»ï¼Œå…¶ä¸­åŒ…å«é—®å€™'å’Œå‘Šåˆ«\u0026rsquo;ç±»ã€‚\nå¦‚æœä½ åœ¨phrasebookç›®å½•ä¸‹è¿è¡Œjavac PirateConversation.javaï¼Œæ¥ç€è¿è¡Œjava PirateConversationï¼Œä½ åº”è¯¥çœ‹åˆ°è¿™ä¸ªã€‚\nShiver me timbers!!! A fair turn of the tide ter ye thar, ye magnificent sea friend!! äº²çˆ±çš„è¯»è€…ï¼Œå¥¹åœ¨é‚£é‡Œå¹äº†èµ·æ¥ã€‚å¥¹ç¡®å®åœ¨å¹ã€‚\næ³¨æ„ï¼Œå½“ä½ ç¼–è¯‘ä¸€ä¸ª Java ç¨‹åºæ—¶ï¼ŒJava ä¼šåœ¨ä½ çš„ classpath ä¸­æœç´¢åŒ…ã€‚è¯•ç€è¾“å…¥ä»¥ä¸‹å†…å®¹ã€‚\ncd pirate_phrases javac ../PirateConversation.java ä½ ä¼šå¾—åˆ°è¿™ä¸ªç»“æœã€‚\n../PirateConversation.java:1: error: package pirate_phrases does not exist import pirate_phrases.*; ^ è½°éš†éš†! Java ç¼–è¯‘å™¨åˆšåˆšå‘Šè¯‰ä½ ï¼Œè®©ä½ ç¾æ„§åœ°å‚ä¸‹å¤´æ¥ï¼Œä¹Ÿè®¸è¿˜ä¼šå“­æ³£ä¸€ä¸‹ã€‚\nä¸ºä»€ä¹ˆï¼Ÿå®ƒè®¤ä¸ºpirate_phrasesåŒ…ä¸å­˜åœ¨ã€‚ä½†è¿™å¾ˆæ„šè ¢ï¼Œå¯¹å—ï¼Ÿä½ æ˜¯åœ¨pirate_phrasesç›®å½•ä¸‹ï¼ä½ æ˜¯åœ¨pirate_phrasesç›®å½•ä¸‹ã€‚\nè¿™é‡Œå‘ç”Ÿçš„æƒ…å†µæ˜¯ï¼Œé»˜è®¤çš„ classpath åªåŒ…æ‹¬å½“å‰çš„ç›®å½•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯pirate_phrasesã€‚Â javacè¯•å›¾æ‰¾åˆ°phrasebook/pirate_phrases/pirate_phrasesç›®å½•ï¼Œä½†è¯¥ç›®å½•å¹¶ä¸å­˜åœ¨ã€‚å½“ä½ åœ¨phrasebookç›®å½•ä¸‹è¿è¡Œjavac ../PirateConversation.javaæ—¶ï¼Œjavacè¯•å›¾æ‰¾åˆ°phrasebook/pirate_phrasesç›®å½•ï¼Œè¯¥ç›®å½•ç¡®å®å­˜åœ¨ã€‚åœ¨ä¸æ”¹å˜ç›®å½•çš„æƒ…å†µä¸‹ï¼Œå°è¯•è¿è¡Œ javac -classpath ../ ../PirateConversation.javaã€‚å“æˆ‘ä¸€è·³ï¼Œå±…ç„¶æˆåŠŸäº†! è¿™æ˜¯å› ä¸ºä½ æ‰‹åŠ¨å°† classpath è®¾ç½®ä¸ºpirate_phrasesçš„çˆ¶ç›®å½•ï¼Œä¹Ÿå°±æ˜¯phrasebookã€‚ä»é‚£é‡Œï¼Œjavacå¯ä»¥æˆåŠŸåœ°æ‰¾åˆ°pirate_phrasesç›®å½•ã€‚\nç»¼ä¸Šæ‰€è¿°ï¼ŒåŒ…ç»„ç»‡äº†ä»£ç ï¼Œå¹¶è¦æ±‚æœ‰ä¸€ä¸ªåŒ¹é…çš„ç›®å½•ç»“æ„ã€‚å¯¼å…¥ç±»å¯ä»¥è®©ä½ å¼•ç”¨å®ƒä»¬ï¼Œè€Œä¸éœ€è¦é¢„ç•™æ•´ä¸ªç±»çš„åŒ…åã€‚Â javacå’Œ Java ä½¿ç”¨ classpath æŸ¥æ‰¾åŒ…ã€‚\nJAR æ–‡ä»¶ JAR æ–‡ä»¶å…è®¸ä½ å°†æ‰€æœ‰çš„*.classæ–‡ä»¶æ†ç»‘æˆä¸€ä¸ªå•ä¸€çš„æ–‡ä»¶ã€‚å¯¼èˆªåˆ°ä½ çš„phrasebook*ç›®å½•å¹¶è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚\njar cvfe conversation.jar PirateConversation PirateConversation.class pirate_phrases/*.class java -jar conversation.jar è¿™æ ·å°±èƒ½æ­£ç¡®æ˜¾ç¤ºæµ·ç›—å¯¹è¯äº†ã€‚ä½ æŠŠæ‰€æœ‰çš„ç±»æ–‡ä»¶æ†ç»‘åœ¨conversation.jarä¸­ã€‚ä½¿ç”¨eæ ‡å¿—ï¼Œä½ è¿˜æŒ‡å‡ºPirateConversationç±»æ˜¯å…¥å£ç‚¹ã€‚å…¥å£ç‚¹æ˜¯åŒ…å« JAR æ•´ä½“è¿è¡Œæ—¶åº”è¯¥æ‰§è¡Œçš„main'æ–¹æ³•çš„ç±»ï¼Œjar\u0026rsquo;å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨ JAR æ–‡ä»¶ä¸­çš„META-INF/MANIFEST.MFæ–‡ä»¶ä¸­ã€‚å¦‚æœä½ è¦é˜…è¯»è¯¥æ–‡ä»¶ï¼Œå®ƒå°†åŒ…å«è¿™ä¸€è¡Œã€‚\nMain-Class: PirateConversation é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå½“ä½ æ‰§è¡Œ JAR æ–‡ä»¶æ—¶ï¼Œä½ ä¸å¿…æ‹…å¿ƒä½ åœ¨å“ªä¸ªç›®å½•ä¸‹ï¼Œç›¸å¯¹äºæ–‡ä»¶è€Œè¨€ã€‚ä½ å¯ä»¥æ¢åˆ°pirate_phrasesç›®å½•ï¼Œç„¶åè¿è¡Œjava -jar .../conversation.jarï¼Œå°±å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚åŸå› æ˜¯ JAR æ–‡ä»¶ç»´æŠ¤äº†ç›®å½•ç»“æ„ã€‚ä½ å¯ä»¥ç”¨ jar tf conversation.jar æŸ¥çœ‹å®ƒçš„å†…å®¹ï¼Œå®ƒçš„è¾“å‡ºæ˜¯è¿™æ ·çš„ã€‚\nMETA-INF/ meta-inf/manifest.mf PirateConversation.class pirate_phrases/Farewells.class Pirate_phrases/Greetings.class ä½ å¯ä»¥çœ‹åˆ°ï¼ŒJAR æ–‡ä»¶åŒ…æ‹¬pirate_phrasesç›®å½•ã€‚å…³äº JARs è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„äº‹å®ï¼šå®ƒä»¬å®é™…ä¸Šåªæ˜¯å¸¦æœ‰*.jar*æ‰©å±•åçš„ ZIP æ–‡ä»¶ã€‚ä½ å¯ä»¥åƒå¯¹å¾…å…¶ä»– ZIP æ–‡ä»¶ä¸€æ ·å¯¹å¾…å®ƒä»¬ã€‚\nclojure.jar ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½çœ‹çœ‹ Clojure åœ¨å¼•æ“ç›–ä¸‹æ˜¯å¦‚ä½•å·¥ä½œçš„äº†! ä¸‹è½½[1.9.0 ç¨³å®šç‰ˆ]ï¼ˆhttp://repo1.maven.org/maven2/org/clojure/clojure/1.7.0/clojure-1.9.0.zipï¼‰å¹¶è¿è¡Œå®ƒã€‚\njava -jar clojure-1.7.0.jar ä½ åº”è¯¥çœ‹åˆ°æœ€èˆ’å¿ƒçš„æ™¯è±¡ï¼ŒClojure REPLã€‚å®ƒç©¶ç«Ÿæ˜¯å¦‚ä½•å¯åŠ¨çš„å‘¢ï¼Ÿè®©æˆ‘ä»¬çœ‹çœ‹ JAR æ–‡ä»¶ä¸­çš„META-INF/MANIFEST.MFã€‚\nManifest-Version: 1.0 Archiver-Version: Plexus Archiver Created-By: Apache Maven Built-By: hudson Build-Jdk: 1.7.0_20 Main-Class: clojure.main çœ‹èµ·æ¥ï¼Œclojure.mainè¢«æŒ‡å®šä¸ºå…¥å£ç‚¹ã€‚è¿™ä¸ªç±»æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿå—¯ï¼Œçœ‹çœ‹ GitHub ä¸Šçš„clojure/main.javaï¼Œç½‘å€æ˜¯*https://github.com/clojure/clojure/blob/master/src/jvm/clojure/main.java*ã€‚\n/** * Copyright (c) Rich Hickey. All rights reserved. * The use and distribution terms for this software are covered by the * Eclipse Public License 1.0 (http://opensource.org/licenses/eclipse-1.0.php) * which can be found in the file epl-v10.html at the root of this distribution. * By using this software in any fashion, you are agreeing to be bound by * the terms of this license. * You must not remove this notice, or any other, from this software. **/ package clojure; import clojure.lang.Symbol; import clojure.lang.Var; import clojure.lang.RT; public class main{ final static private Symbol CLOJURE_MAIN = Symbol.intern(\u0026#34;clojure.main\u0026#34;); final static private Var REQUIRE = RT.var(\u0026#34;clojure.core\u0026#34;, \u0026#34;require\u0026#34;); final static private Var LEGACY_REPL = RT.var(\u0026#34;clojure.main\u0026#34;, \u0026#34;legacy-repl\u0026#34;); final static private Var LEGACY_SCRIPT = RT.var(\u0026#34;clojure.main\u0026#34;, \u0026#34;legacy-script\u0026#34;); final static private Var MAIN = RT.var(\u0026#34;clojure.main\u0026#34;, \u0026#34;main\u0026#34;); public static void legacy_repl(String[] args) { REQUIRE.invoke(CLOJURE_MAIN); LEGACY_REPL.invoke(RT.seq(args)); } public static void legacy_script(String[] args) { REQUIRE.invoke(CLOJURE_MAIN); LEGACY_SCRIPT.invoke(RT.seq(args)); } public static void main(String[] args) { REQUIRE.invoke(CLOJURE_MAIN); MAIN.applyTo(RT.seq(args)); } } æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¯¥æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸ºmainçš„ç±»ã€‚å®ƒå±äº \u0026ldquo;clojure \u0026ldquo;åŒ…ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ª \u0026ldquo;å…¬å…±é™æ€ \u0026ldquo;çš„ \u0026ldquo;main \u0026ldquo;æ–¹æ³•ï¼ŒJVM å®Œå…¨ä¹æ„å°†å…¶ä½œä¸ºä¸€ä¸ªå…¥å£ç‚¹ã€‚ä»¥è¿™ç§æ–¹å¼æ¥çœ‹ï¼ŒClojure æ˜¯ä¸€ä¸ª JVM ç¨‹åºï¼Œå°±åƒå…¶ä»–ç¨‹åºä¸€æ ·ã€‚\nè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ·±å…¥çš„ Java æ•™ç¨‹ï¼Œä½†æˆ‘å¸Œæœ›å®ƒæœ‰åŠ©äºæ¾„æ¸…ç¨‹åºå‘˜åœ¨è°ˆè®º Clojure \u0026ldquo;åœ¨ JVM ä¸Šè¿è¡Œ \u0026ldquo;æˆ–æˆä¸ºä¸€ç§ \u0026ldquo;æ‰˜ç®¡ \u0026ldquo;è¯­è¨€æ—¶çš„æ„æ€ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œä½ å°†ç»§ç»­æ¢ç´¢ JVM çš„é­…åŠ›ï¼Œå­¦ä¹ å¦‚ä½•åœ¨ä½ çš„ Clojure é¡¹ç›®ä¸­ä½¿ç”¨é¢å¤–çš„ Java åº“ã€‚\nClojure åº”ç”¨ç¨‹åº JARs\nä½ ç°åœ¨çŸ¥é“ Java æ˜¯å¦‚ä½•è¿è¡Œ Java JARs çš„ï¼Œä½†å®ƒæ˜¯å¦‚ä½•è¿è¡Œæ†ç»‘ä¸º JARs çš„ Clojure åº”ç”¨ç¨‹åºçš„å‘¢ï¼Ÿæ¯•ç«Ÿï¼ŒClojure åº”ç”¨ç¨‹åºæ²¡æœ‰ç±»ï¼Œä¸æ˜¯å—ï¼Ÿ\näº‹å®è¯æ˜ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨å‘½åç©ºé—´å£°æ˜ä¸­åŠ å…¥(:gen-class)æŒ‡ä»¤ï¼Œè®© Clojure ç¼–è¯‘å™¨ä¸ºä¸€ä¸ªå‘½åç©ºé—´ç”Ÿæˆä¸€ä¸ªç±»ã€‚(ä½ å¯ä»¥åœ¨ä½ åˆ›å»ºçš„ç¬¬ä¸€ä¸ª Clojure ç¨‹åºä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œå³ç¬¬ä¸€ç« çš„clojure-noobã€‚è¿˜è®°å¾—é‚£ä¸ªç¨‹åºå—ï¼Œå°èŒ¶å£¶ï¼Ÿï¼‰ è¿™æ„å‘³ç€ç¼–è¯‘å™¨ä¼šäº§ç”Ÿå¿…è¦çš„å­—èŠ‚ç ï¼Œä½¿ JVM æŠŠå‘½åç©ºé—´å½“ä½œå®šä¹‰äº†ä¸€ä¸ª Java ç±»ã€‚\nä½ åœ¨ç¨‹åºçš„project.cljæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨:mainå±æ€§ï¼Œä¸ºä½ çš„ç¨‹åºè®¾ç½®å…¥å£ç‚¹çš„å‘½åç©ºé—´ã€‚å¯¹äºclojure-noobï¼Œä½ åº”è¯¥çœ‹åˆ°:main ^:skip-aot clojure-noob.coreã€‚å½“ Leiningen ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œå®ƒå°†æ·»åŠ ä¸€ä¸ªmeta-inf/manifest.mfæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«äº†ç”Ÿæˆçš„ JAR æ–‡ä»¶çš„å…¥å£ç‚¹ã€‚\nå› æ­¤ï¼Œå¦‚æœä½ åœ¨å‘½åç©ºé—´ä¸­å®šä¹‰äº†ä¸€ä¸ª-mainå‡½æ•°ï¼Œå¹¶åŒ…æ‹¬(:gen-class)æŒ‡ä»¤ï¼ŒåŒæ—¶åœ¨ä½ çš„project.cljæ–‡ä»¶ä¸­è®¾ç½®äº†:mainï¼Œä½ çš„ç¨‹åºåœ¨è¢«ç¼–è¯‘ä¸º JAR æ—¶ï¼Œå°†æ‹¥æœ‰ Java è¿è¡Œå®ƒæ‰€éœ€çš„ä¸€åˆ‡ã€‚ä½ å¯ä»¥åœ¨ä½ çš„ç»ˆç«¯ä¸­è¯•ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæµè§ˆä½ çš„clojure-noobç›®å½•å¹¶è¿è¡Œè¿™ä¸ªã€‚\nlein uberjar java -jar target/uberjar/clojure-noob-0.1.0-SNAPSHOT-standalone.jar ä½ åº”è¯¥çœ‹åˆ°æ‰“å°å‡ºæ¥çš„ä¸¤æ¡ä¿¡æ¯ã€‚\u0026ldquo;æ¸…æ´åº¦ä»…æ¬¡äºç¥æ€§ \u0026ldquo;å’Œ \u0026ldquo;I\u0026rsquo;m a little teapot!\u0026rdquo; æ³¨æ„ï¼Œä½ ä¸éœ€è¦ Leiningen æ¥è¿è¡Œè¿™ä¸ª JAR æ–‡ä»¶ï¼›ä½ å¯ä»¥æŠŠå®ƒå‘é€ç»™æœ‹å‹å’Œé‚»å±…ï¼Œåªè¦ä»–ä»¬å®‰è£…äº† Javaï¼Œå°±å¯ä»¥è¿è¡Œå®ƒã€‚\nJava Interop Rich Hickey å¯¹ Clojure çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€æ˜¯åˆ›é€ ä¸€ç§å®ç”¨çš„è¯­è¨€ã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼ŒClojure çš„è®¾è®¡æ˜¯ä¸ºäº†ä½¿ä½ èƒ½å¤Ÿè½»æ¾åœ°ä¸ Java ç±»å’Œå¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ Java å¹¿æ³›çš„æœ¬åœ°åŠŸèƒ½å’Œå®ƒçš„å·¨å¤§ç”Ÿæ€ç³»ç»Ÿã€‚ä½¿ç”¨ Java ç±»ã€å¯¹è±¡å’Œæ–¹æ³•çš„èƒ½åŠ›è¢«ç§°ä¸ºJava interop*ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Clojure çš„äº’æ“ä½œè¯­æ³•ï¼Œå¦‚ä½•å¯¼å…¥ Java åŒ…ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨æœ€å¸¸ç”¨çš„ Java ç±»ã€‚\näº’é€šè¯­æ³• ä½¿ç”¨ Clojure çš„äº’æ“ä½œè¯­æ³•ï¼Œä¸ Java å¯¹è±¡å’Œç±»çš„äº¤äº’æ˜¯å¾ˆç›´æ¥çš„ã€‚è®©æˆ‘ä»¬ä»å¯¹è±¡äº’æ“ä½œè¯­æ³•å¼€å§‹ã€‚\nä½ å¯ä»¥ä½¿ç”¨(.methodName object)æ¥è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå› ä¸ºæ‰€æœ‰çš„ Clojure å­—ç¬¦ä¸²éƒ½æ˜¯ä½œä¸º Java å­—ç¬¦ä¸²å®ç°çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¯¹å®ƒä»¬è°ƒç”¨ Java æ–¹æ³•ã€‚\n(.toUpperCase \u0026#34;By Bluebeard\u0026#39;s bananas!\u0026#34; ) ; =\u0026gt; \u0026#34;by bluebeard\u0026#39;s bananas!\u0026#34; âŠ (.indexOf \u0026#34;Let\u0026#39;s synergize our bleeding edges\u0026#34; \u0026#34;y\u0026#34;) ; =\u0026gt; 7 è¿™äº›ç­‰åŒäºè¿™ä¸ª Javaã€‚\n\u0026#34;By Bluebeard\u0026#39;s bananas!\u0026#34;.toUpperCase() \u0026#34;Let\u0026#39;s synergize our bleeding edges\u0026#34;.indexOf(\u0026#34;y\u0026#34;) æ³¨æ„ï¼ŒClojure çš„è¯­æ³•å…è®¸ä½ å‘ Java æ–¹æ³•ä¼ é€’å‚æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåœ¨âŠï¼Œä½ æŠŠå‚æ•°\u0026quot;y\u0026quot;ä¼ ç»™äº†indexOfæ–¹æ³•ã€‚\nä½ ä¹Ÿå¯ä»¥è°ƒç”¨ç±»ä¸Šçš„é™æ€æ–¹æ³•å’Œè®¿é—®ç±»çš„é™æ€å­—æ®µã€‚è§‚å¯Ÿä¸€ä¸‹!\nâŠ (java.lang.Math/abs -3) ; =\u0026gt; 3 â‹ java.lang.Math/PI ; =\u0026gt; 3.141592653589793 åœ¨âŠï¼Œä½ è°ƒç”¨äº†java.lang.Mathç±»çš„absé™æ€æ–¹æ³•ï¼Œåœ¨â‹ï¼Œä½ è®¿é—®äº†è¯¥ç±»çš„PIé™æ€å­—æ®µã€‚\næ‰€æœ‰è¿™äº›ä¾‹å­ï¼ˆé™¤äº†java.lang.Math/PIï¼‰éƒ½ä½¿ç”¨äº†æ‰©å±•åˆ°ä½¿ç”¨*dot ç‰¹æ®Šå½¢å¼çš„å®ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½ ä¸éœ€è¦ä½¿ç”¨ç‚¹çš„ç‰¹æ®Šå½¢å¼ï¼Œé™¤éä½ æƒ³å†™è‡ªå·±çš„å®æ¥ä¸ Java å¯¹è±¡å’Œç±»äº¤äº’ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä¸‹é¢æ˜¯æ¯ä¸ªä¾‹å­åé¢çš„å®æ‰©å±•ã€‚\n(macroexpand-1 \u0026#39;(.toUpperCase \u0026#34;By Bluebeard\u0026#39;s bananas!\u0026#34;)) ; =\u0026gt; (. \u0026#34;By Bluebeard\u0026#39;s bananas!\u0026#34; toUpperCase) (macroexpand-1 \u0026#39;(.indexOf \u0026#34;Let\u0026#39;s synergize our bleeding edges\u0026#34; \u0026#34;y\u0026#34;)) ; =\u0026gt; (. \u0026#34;Let\u0026#39;s synergize our bleeding edges\u0026#34; indexOf \u0026#34;y\u0026#34;) (macroexpand-1 \u0026#39;(Math/abs -3)) ; =\u0026gt; (. Math abs -3) è¿™æ˜¯ç‚¹è¿ç®—ç¬¦çš„ä¸€èˆ¬å½¢å¼ã€‚\n(. object-expr-or-classname-symbol method-or-member-symbol optional-args*) ç‚¹è¿ç®—ç¬¦è¿˜æœ‰ä¸€äº›åŠŸèƒ½ï¼Œå¦‚æœä½ æœ‰å…´è¶£è¿›ä¸€æ­¥æ¢ç´¢å®ƒï¼Œä½ å¯ä»¥çœ‹çœ‹ clojure.org å…³äº Java äº’æ“ä½œçš„æ–‡æ¡£*http://clojure.org/java_interop#Java%20Interop-The%20Dot%20special%20form*ã€‚\nåˆ›å»ºå’Œå˜å¼‚å¯¹è±¡\nä¸Šä¸€èŠ‚å‘Šè¯‰ä½ å¦‚ä½•è°ƒç”¨å·²ç»å­˜åœ¨çš„å¯¹è±¡çš„æ–¹æ³•ã€‚æœ¬èŠ‚å‘ä½ å±•ç¤ºå¦‚ä½•åˆ›å»ºæ–°çš„å¯¹è±¡ä»¥åŠå¦‚ä½•ä¸å®ƒä»¬è¿›è¡Œäº¤äº’ã€‚\nä½ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚(new ClassName optional-args)å’Œ(ClassName. optional-args)ã€‚\n(new String) ; =\u0026gt; \u0026#34;\u0026#34; (String.) ; =\u0026gt; \u0026#34;\u0026#34; (String. \u0026#34;To Davey Jones\u0026#39;s Locker with ye hardies\u0026#34;) ; =\u0026gt; \u0026#34;To Davey Jones\u0026#39;s Locker with ye hardies\u0026#34; å¤§å¤šæ•°äººä½¿ç”¨ç‚¹çš„ç‰ˆæœ¬ï¼Œ(ClassName.)ã€‚\nè¦ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ï¼Œä½ è¦åƒä¸Šä¸€èŠ‚é‚£æ ·è°ƒç”¨å…¶ä¸Šçš„æ–¹æ³•ã€‚ä¸ºäº†ç ”ç©¶è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨java.util.Stackã€‚è¿™ä¸ªç±»ä»£è¡¨äº†ä¸€ä¸ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„å¯¹è±¡å †æ ˆï¼Œæˆ–è€…åªæ˜¯å †æ ˆã€‚å †æ ˆæ˜¯ä¸€ç§å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå®ƒä»¬ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºå †æ ˆï¼Œæ˜¯å› ä¸ºä½ å¯ä»¥æŠŠå®ƒä»¬æƒ³è±¡æˆä¸€æ‘å®ç‰©ï¼Œæ¯”å¦‚è¯´ï¼Œä¸€æ‘ä½ åˆšåˆšæ å¤ºæ¥çš„é‡‘å¸ã€‚å½“ä½ å‘ä½ çš„å †æ ˆæ·»åŠ ä¸€ä¸ªç¡¬å¸æ—¶ï¼Œä½ å°±æŠŠå®ƒæ·»åŠ åˆ°å †æ ˆçš„é¡¶éƒ¨ã€‚å½“ä½ å–å‡ºä¸€æšé‡‘å¸æ—¶ï¼Œä½ å°±æŠŠå®ƒä»ä¸Šé¢ç§»èµ°ã€‚å› æ­¤ï¼Œæœ€åæ·»åŠ çš„å¯¹è±¡å°±æ˜¯ç¬¬ä¸€ä¸ªè¢«ç§»é™¤çš„å¯¹è±¡ã€‚\nä¸ Clojure æ•°æ®ç»“æ„ä¸åŒï¼ŒJava å †æ ˆæ˜¯å¯å˜çš„ã€‚ä½ å¯ä»¥å‘å®ƒä»¬æ·»åŠ é¡¹ç›®å’Œåˆ é™¤é¡¹ç›®ï¼Œæ”¹å˜å¯¹è±¡è€Œä¸æ˜¯æ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°çš„å€¼ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åˆ›å»ºä¸€ä¸ªå †æ ˆå¹¶å‘å…¶æ·»åŠ ä¸€ä¸ªå¯¹è±¡ã€‚\n(java.util.Stack.) ; =\u0026gt; [] âŠ (let [stack (java.util.Stack.)] (.push stack \u0026#34;Latest episode of Game of Thrones, ho!\u0026#34;) stack) ; =\u0026gt; [\u0026#34;Latest episode of Game of Thrones, ho!\u0026#34;] è¿™é‡Œæœ‰å‡ ä¸ªæœ‰è¶£çš„ç»†èŠ‚ã€‚é¦–å…ˆï¼Œä½ éœ€è¦ä¸ºstackåˆ›å»ºä¸€ä¸ªletç»‘å®šï¼Œå°±åƒä½ åœ¨âŠçœ‹åˆ°çš„é‚£æ ·ï¼Œå¹¶æŠŠå®ƒä½œä¸ºletå½¢å¼çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼ã€‚å¦‚æœä½ ä¸è¿™æ ·åšï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼å°†æ˜¯å­—ç¬¦ä¸²\u0026quot;Game of Thrones, ho!\u0026quot;ï¼Œå› ä¸ºé‚£æ˜¯pushçš„è¿”å›å€¼ã€‚\nç¬¬äºŒï¼ŒClojure ç”¨æ–¹æ‹¬å·æ¥æ‰“å°å †æ ˆï¼Œä¸å®ƒç”¨äº Vector çš„æ–‡æœ¬è¡¨ç¤ºæ³•ç›¸åŒï¼Œè¿™å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°å›°æƒ‘ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ª Vectorã€‚ç„¶è€Œï¼Œä½ å¯ä»¥ä½¿ç”¨ Clojure çš„seqå‡½æ•°æ¥è¯»å–å †æ ˆä¸­çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚firstï¼Œã€‚\n(let [stack (java.util.Stack.)] (.push stack \u0026#34;Latest episode of Game of Thrones, ho!\u0026#34;) (first stack)) ; =\u0026gt; \u0026#34;Latest episode of Game of Thrones, ho!\u0026#34; ä½†æ˜¯ä½ ä¸èƒ½ä½¿ç”¨åƒconjå’Œintoè¿™æ ·çš„å‡½æ•°æ¥æ·»åŠ å…ƒç´ åˆ°æ ˆä¸­ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ã€‚ä½¿ç”¨ Clojure å‡½æ•°è¯»å–å †æ ˆæ˜¯å¯èƒ½çš„ï¼Œå› ä¸º Clojure æ‰©å±•äº†å¯¹java.util.Stackçš„æŠ½è±¡ï¼Œè¿™ä¸ªä¸»é¢˜ä½ å°†åœ¨ç¬¬ 13 ç« å­¦ä¹ ã€‚\nClojure æä¾›äº†dotoå®ï¼Œå®ƒå…è®¸ä½ æ›´ç®€æ´åœ°åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œå¤šä¸ªæ–¹æ³•ã€‚\n(doto (java.util.Stack.) (.push \u0026#34;Latest episode of Game of Thrones, ho!\u0026#34;) (.push \u0026#34;Whoops, I meant \u0026#39;Land, ho!\u0026#39;\u0026#34;)) ; =\u0026gt; [\u0026#34;Latest episode of Game of Thrones, ho!\u0026#34; \u0026#34;Whoops, I meant \u0026#39;Land, ho!\u0026#39;\u0026#34;] dotoå®è¿”å›å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä»»ä½•æ–¹æ³•è°ƒç”¨çš„è¿”å›å€¼ï¼Œå®ƒæ›´å®¹æ˜“ç†è§£ã€‚å¦‚æœä½ ç”¨macroexpand-1å±•å¼€å®ƒï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒçš„ç»“æ„ä¸ä½ åˆšæ‰åœ¨å‰é¢çš„ä¾‹å­ä¸­çœ‹åˆ°çš„letè¡¨è¾¾å¼ç›¸åŒã€‚\n(macroexpand-1 \u0026#39;(doto (java.util.Stack.) (.push \u0026#34;Latest episode of Game of Thrones, ho!\u0026#34;) (.push \u0026#34;Whoops, I meant \u0026#39;Land, ho!\u0026#39;\u0026#34;))) ; =\u0026gt; (clojure.core/let [G__2876 (java.util.Stack.)] (.push G__2876 \u0026#34;Latest episode of Game of Thrones, ho!\u0026#34;) (.push G__2876 \u0026#34;Whoops, I meant \u0026#39;Land, ho!\u0026#39;\u0026#34;) G__2876) å¾ˆæ–¹ä¾¿!\nå¯¼å…¥ åœ¨ Clojure ä¸­ï¼Œå¯¼å…¥çš„æ•ˆæœå’Œ Java ä¸­çš„ä¸€æ ·ï¼šä½ å¯ä»¥ä½¿ç”¨ç±»ï¼Œè€Œä¸éœ€è¦æ‰“å‡ºæ•´ä¸ªåŒ…çš„å‰ç¼€ã€‚\n(import java.util.Stack) (Stack.) ; =\u0026gt; [] ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§ä¸€èˆ¬å½¢å¼ä¸€æ¬¡å¯¼å…¥å¤šä¸ªç±»ã€‚\n(import [package.name1 ClassName1 ClassName2] [package.name2 ClassName3 ClassName4]) ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n(import [java.util Date Stack] [java.net Proxy URI]) (Date.) ; =\u0026gt; #inst \u0026#34;2016-09-19T20:40:02.733-00:00\u0026#34; ä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ ä¼šåœ¨nså®ä¸­åšæ‰€æœ‰çš„å¯¼å…¥å·¥ä½œï¼Œåƒè¿™æ ·ã€‚\n(ns pirate.talk (:import [java.util Date Stack]. [java.net Proxy URI]) è¿™ä¸¤ç§ä¸åŒçš„å¯¼å…¥ç±»çš„æ–¹æ³•æœ‰ç›¸åŒçš„ç»“æœï¼Œä½†é€šå¸¸ç¬¬äºŒç§æ–¹æ³•æ›´å¯å–ï¼Œå› ä¸ºå¯¹äºé˜…è¯»ä½ çš„ä»£ç çš„äººæ¥è¯´ï¼Œåœ¨nså£°æ˜ä¸­çœ‹åˆ°æ‰€æœ‰æ¶‰åŠå‘½åçš„ä»£ç å¾ˆæ–¹ä¾¿ã€‚\nè¿™å°±æ˜¯ä½ å¯¼å…¥ç±»çš„æ–¹æ³•! å¾ˆç®€å•ã€‚ä¸ºäº†ä½¿ç”Ÿæ´»æ›´åŠ ç®€å•ï¼ŒClojure è‡ªåŠ¨å¯¼å…¥äº†java.langä¸­çš„ç±»ï¼ŒåŒ…æ‹¬java.lang.Stringå’Œjava.lang.Mathï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ èƒ½å¤Ÿä½¿ç”¨Stringè€Œä¸ç”¨å‰é¢çš„åŒ…åã€‚\nå¸¸ç”¨çš„ Java ç±» ä¸ºäº†å®Œå–„æœ¬ç« ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿæµè§ˆä¸€ä¸‹ä½ æœ€å¯èƒ½ç”¨åˆ°çš„ Java ç±»ã€‚\nç³»ç»Ÿç±» ç³»ç»Ÿ \u0026ldquo;ç±»å…·æœ‰æœ‰ç”¨çš„ç±»å­—æ®µå’Œæ–¹æ³•ï¼Œå¯ä»¥ä¸ç¨‹åºè¿è¡Œçš„ç¯å¢ƒè¿›è¡Œäº¤äº’ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è·å–ç¯å¢ƒå˜é‡ï¼Œä¸æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºæµè¿›è¡Œäº¤äº’ã€‚\næœ€æœ‰ç”¨çš„æ–¹æ³•å’Œæˆå‘˜æ˜¯exitã€getenvå’ŒgetPropertyã€‚ä½ å¯èƒ½åœ¨ç¬¬ 5 ç« ä¸­è®¤è¯†System/exitï¼Œåœ¨é‚£é‡Œä½ ç”¨å®ƒæ¥é€€å‡º Peg Thing æ¸¸æˆã€‚`System/exit\u0026rsquo;å¯ä»¥ç»ˆæ­¢å½“å‰ç¨‹åºï¼Œä½ å¯ä»¥æŠŠçŠ¶æ€ä»£ç ä½œä¸ºå‚æ•°ä¼ ç»™å®ƒã€‚å¦‚æœä½ å¯¹çŠ¶æ€ä»£ç ä¸ç†Ÿæ‚‰ï¼Œæˆ‘æ¨èç»´åŸºç™¾ç§‘çš„ \u0026ldquo;é€€å‡ºçŠ¶æ€ \u0026ldquo;æ–‡ç« ï¼Œç½‘å€æ˜¯*é€€å‡ºçŠ¶æ€-ç»´åŸºç™¾ç§‘*ã€‚\nSystem/getenvå°†ä»¥ Map å½¢å¼è¿”å›æ‰€æœ‰ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ã€‚\n(System/getenv) {\u0026#34;USER\u0026#34; \u0026#34;the-incredible-bulk\u0026#34; \u0026#34;JAVA_ARCH\u0026#34; \u0026#34;x86_64\u0026#34; } ç¯å¢ƒå˜é‡çš„ä¸€ä¸ªå¸¸è§ç”¨é€”æ˜¯é…ç½®ä½ çš„ç¨‹åºã€‚\nJVM æœ‰è‡ªå·±çš„å±æ€§åˆ—è¡¨ï¼Œä¸è®¡ç®—æœºçš„ç¯å¢ƒå˜é‡åˆ†å¼€ï¼Œå¦‚æœéœ€è¦è¯»å–å®ƒä»¬ï¼Œå¯ä»¥ä½¿ç”¨System/getPropertyã€‚\nâŠ (System/getProperty \u0026#34;user.dir\u0026#34;) ; =\u0026gt; \u0026#34;/Users/dabulk/projects/dabook\u0026#34; â‹ (System/getProperty \u0026#34;java.version\u0026#34;) ; =\u0026gt; \u0026#34;1.7.0_17\u0026#34; ç¬¬ä¸€ä¸ªè°ƒç”¨âŠè¿”å› JVM å¯åŠ¨çš„ç›®å½•ï¼Œç¬¬äºŒä¸ªè°ƒç”¨â‹è¿”å› JVM çš„ç‰ˆæœ¬ã€‚\næ—¥æœŸç±» Java æœ‰å¾ˆå¥½çš„å·¥å…·æ¥å¤„ç†æ—¥æœŸé—®é¢˜ã€‚æˆ‘ä¸ä¼šå¯¹java.util.Dateç±»åšå¤ªå¤šçš„ä»‹ç»ï¼Œå› ä¸ºåœ¨çº¿çš„ API æ–‡æ¡£ï¼ˆå¯åœ¨*Date (Java Platform SE 7 )*)å¾ˆè¯¦å°½ã€‚ä½œä¸ºä¸€ä¸ª Clojure å¼€å‘è€…ï¼Œä½ åº”è¯¥çŸ¥é“è¿™ä¸ªdateç±»çš„ä¸‰ä¸ªç‰¹ç‚¹ã€‚é¦–å…ˆï¼ŒClojure å…è®¸ä½ ä½¿ç”¨è¿™æ ·çš„å½¢å¼å°†æ—¥æœŸè¡¨ç¤ºä¸ºå­—é¢æ„ä¹‰ã€‚\n#inst \u0026#34;2016-09-19T20:40:02.733-00:00\u0026#34; ç¬¬äºŒï¼Œå¦‚æœä½ æƒ³è‡ªå®šä¹‰å¦‚ä½•å°†æ—¥æœŸè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œæˆ–è€…ä½ æƒ³å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ—¥æœŸï¼Œä½ éœ€è¦ä½¿ç”¨java.util.DateFormatç±»ã€‚ç¬¬ä¸‰ï¼Œå¦‚æœä½ è¦åšçš„ä»»åŠ¡æ˜¯æ¯”è¾ƒæ—¥æœŸæˆ–è¯•å›¾åœ¨æ—¥æœŸä¸Šæ·»åŠ åˆ†é’Ÿã€å°æ—¶æˆ–å…¶ä»–æ—¶é—´å•ä½ï¼Œä½ åº”è¯¥ä½¿ç”¨æå…¶æœ‰ç”¨çš„ clj-time åº“ï¼ˆä½ å¯ä»¥åœ¨*GitHub - clj-time/clj-time: ä¸€ä¸ªç”¨äº Clojure çš„æ—¥æœŸå’Œæ—¶é—´åº“ï¼ŒåŒ…è£…äº† Joda æ—¶é—´åº“ã€‚*)ã€‚\næ–‡ä»¶å’Œè¾“å…¥/è¾“å‡º åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†äº†è§£åˆ° Java çš„è¾“å…¥/è¾“å‡ºï¼ˆIOï¼‰æ–¹æ³•ï¼Œä»¥åŠ Clojure å¦‚ä½•ç®€åŒ–å®ƒã€‚clojure.java.ioå‘½åç©ºé—´æä¾›äº†è®¸å¤šæ–¹ä¾¿çš„å‡½æ•°æ¥ç®€åŒ– IOï¼ˆclojure.java.io - Clojure v1.10.3 API æ–‡æ¡£ï¼‰ã€‚è¿™å¾ˆå¥½ï¼Œå› ä¸º Java çš„ IO å¹¶ä¸å®Œå…¨æ˜¯ç®€å•çš„ã€‚å› ä¸ºåœ¨ä½ çš„ç¼–ç¨‹ç”Ÿæ¶¯ä¸­ï¼Œä½ å¯èƒ½ä¼šåœ¨æŸäº›æ—¶å€™æƒ³è¦æ‰§è¡Œ IOï¼Œè®©æˆ‘ä»¬å¼€å§‹æŠŠä½ çš„æ€æƒ³è§¦è§’ç¼ ç»•åœ¨å®ƒä¸Šé¢ã€‚\nIO æ¶‰åŠåˆ°èµ„æºï¼Œæ— è®ºæ˜¯æ–‡ä»¶ã€å¥—æ¥å­—ã€ç¼“å†²åŒºï¼Œè¿˜æ˜¯å…¶ä»–ä»€ä¹ˆã€‚Java æœ‰ç‹¬ç«‹çš„ç±»æ¥è¯»å–èµ„æºçš„å†…å®¹ï¼Œå†™å…¥å…¶å†…å®¹ï¼Œä»¥åŠä¸èµ„æºçš„å±æ€§è¿›è¡Œäº¤äº’ã€‚\nä¾‹å¦‚ï¼Œjava.io.Fileç±»ç”¨äºä¸æ–‡ä»¶çš„å±æ€§è¿›è¡Œäº¤äº’ã€‚\n(let [file (java.io.File. \u0026#34;/\u0026#34;)] âŠ (println (.exists file)) â‹ (println (.canWrite file)) âŒ (println (.getPath file))) ; =\u0026gt; true ; =\u0026gt; false ; =\u0026gt; / åœ¨å…¶ä»–ä»»åŠ¡ä¸­ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æ£€æŸ¥ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè·å¾—æ–‡ä»¶çš„è¯»/å†™/æ‰§è¡Œæƒé™ï¼Œå¹¶è·å¾—å…¶æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼Œä½ å¯ä»¥åœ¨âŠã€â‹å’ŒâŒåˆ†åˆ«çœ‹åˆ°ã€‚\nåœ¨è¿™ä¸ªèƒ½åŠ›åˆ—è¡¨ä¸­ï¼Œæ˜æ˜¾ç¼ºå°‘è¯»å’Œå†™ã€‚è¦è¯»ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨java.io.BufferedReaderç±»æˆ–è€…java.io.FileReaderã€‚åŒæ ·åœ°ï¼Œä½ å¯ä»¥ä½¿ç”¨java.io.BufferedWriteræˆ–java.io.FileWriterç±»æ¥å†™ã€‚å…¶ä»–ç±»ä¹Ÿå¯ç”¨äºè¯»å†™ï¼Œä½ é€‰æ‹©å“ªä¸€ä¸ªå–å†³äºä½ çš„å…·ä½“éœ€æ±‚ã€‚è¯»å–å™¨å’Œå†™å…¥å™¨ç±»çš„æ¥å£éƒ½æœ‰ç›¸åŒçš„åŸºæœ¬æ–¹æ³•é›†ï¼›è¯»å–å™¨å®ç°äº†è¯»å–'ã€å…³é—­\u0026rsquo;ç­‰ï¼Œè€Œå†™å…¥å™¨å®ç°äº†æ·»åŠ 'ã€å†™å…¥\u0026rsquo;ã€å…³é—­'å’Œåˆ·æ–°\u0026rsquo;ã€‚Java ç»™ä½ æä¾›äº†å„ç§ IO å·¥å…·ã€‚ä¸€ä¸ªæ„¤ä¸–å«‰ä¿—çš„äººå¯èƒ½ä¼šè¯´ï¼ŒJava ç»™ä½ çš„ç»³å­è¶³ä»¥è®©ä½ ä¸ŠåŠï¼Œå¦‚æœä½ æ‰¾åˆ°è¿™æ ·ä¸€ä¸ªäººï¼Œæˆ‘å¸Œæœ›ä½ èƒ½ç»™ä»–ä¸€ä¸ªæ‹¥æŠ±ã€‚\nä¸ç®¡æ€ä¹ˆè¯´ï¼ŒClojure ä½¿ä½ çš„è¯»å†™æ›´å®¹æ˜“ï¼Œå› ä¸ºå®ƒåŒ…æ‹¬äº†ç»Ÿä¸€ä¸åŒç§ç±»èµ„æºçš„è¯»å†™çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œspitå†™åˆ°ä¸€ä¸ªèµ„æºï¼Œè€Œslurpä»ä¸€ä¸ªèµ„æºä¸­è¯»å‡ºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨å®ƒä»¬æ¥å†™å’Œè¯»ä¸€ä¸ªæ–‡ä»¶çš„ä¾‹å­ã€‚\n(spit \u0026#34;/tmp/hercules-todo-list\u0026#34; \u0026#34;- kill dat lion brov - chop up what nasty multi-headed snake thing\u0026#34;) (slurp \u0026#34;/tmp/hercules-todo-list\u0026#34;) ; =\u0026gt; \u0026#34;- kill dat lion brov - chop up what nasty multi-headed snake thing\u0026#34; ä½ ä¹Ÿå¯ä»¥å¯¹ä»£è¡¨æ–‡ä»¶ä»¥å¤–çš„èµ„æºçš„å¯¹è±¡ä½¿ç”¨è¿™äº›å‡½æ•°ã€‚ä¸‹ä¸€ä¸ªä¾‹å­ä½¿ç”¨äº†ä¸€ä¸ªStringWriterï¼Œå®ƒå…è®¸ä½ å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œ IO æ“ä½œã€‚\n(let [s (java.io.StringWriter.)] (spit s \u0026#34;- capture cerynian hind like for real\u0026#34;) (.toString s)) ; =\u0026gt; \u0026#34;- capture cerynian hind like for real\u0026#34; ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ \u0026ldquo;slurp \u0026ldquo;ä»StringReaderä¸­è¯»å–ã€‚\n(let [s (java.io.StringReader. \u0026#34;- get erymanthian pig what with the tusks\u0026#34;)] (slurp s)) ; =\u0026gt; \u0026#34;- get erymanthian pig what with the tusks\u0026#34; æ­¤å¤–ï¼Œä½ å¯ä»¥å¯¹èµ„æºä½¿ç”¨è¯»å’Œå†™æ–¹æ³•ã€‚ä½¿ç”¨å“ªç§æ–¹æ³•å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼›spitå’Œslurpå¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºå®ƒä»¬åªéœ€ä½¿ç”¨ä¸€ä¸ªä»£è¡¨æ–‡ä»¶ç³»ç»Ÿè·¯å¾„æˆ– URL çš„å­—ç¬¦ä¸²ã€‚\nwith-openå®æ˜¯å¦ä¸€ç§ä¾¿åˆ©ï¼šå®ƒåœ¨å…¶ä¸»ä½“çš„æœ«å°¾éšå«åœ°å…³é—­ä¸€ä¸ªèµ„æºï¼Œç¡®ä¿ä½ ä¸ä¼šå› ä¸ºå¿˜è®°æ‰‹åŠ¨å…³é—­èµ„æºè€Œæ„å¤–åœ°å ç”¨èµ„æºã€‚readerå‡½æ•°æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ï¼Œæ ¹æ®clojure.java.ioAPI æ–‡æ¡£ï¼Œ\u0026ldquo;è¯•å›¾å°†å…¶å‚æ•°å¼ºåˆ¶åˆ°ä¸€ä¸ªå¼€æ”¾çš„java.io.Reader\u0026quot;ã€‚å½“ä½ ä¸æƒ³ä½¿ç”¨slurpæ—¶ï¼Œè¿™å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºä½ ä¸æƒ³å°è¯•å®Œæ•´åœ°è¯»å–ä¸€ä¸ªèµ„æºï¼Œä½ ä¹Ÿä¸æƒ³å¼„æ¸…æ¥šä½ éœ€è¦ä½¿ç”¨å“ªä¸ª Java ç±»ã€‚å¦‚æœä½ æƒ³ä¸€è¡Œä¸€è¡Œåœ°è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨readerå’Œwith-openä»¥åŠline-seqå‡½æ•°ã€‚ä¸‹é¢æ˜¯å¦‚ä½•æ‰“å° Hercules å¾…åŠäº‹é¡¹æ¸…å•çš„ç¬¬ä¸€é¡¹çš„ã€‚\n(with-open [todo-list-rdr (clojure.java.io/reader \u0026#34;/tmp/hercules-todo-list\u0026#34;)] (println (first (line-seq todo-list-rdr)))) ; =\u0026gt; - kill dat lion brov è¿™åº”è¯¥è¶³ä»¥è®©ä½ åœ¨ Clojure ä¸­å¼€å§‹ä½¿ç”¨ IOã€‚å¦‚æœä½ æƒ³åšæ›´å¤æ‚çš„ä»»åŠ¡ï¼Œä¸€å®šè¦çœ‹çœ‹clojure.java.io docsï¼Œ[java.nio.file](https://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html)åŒ…æ–‡æ¡£ï¼Œæˆ–[java.io](http://docs.oracle.com/javase/7/docs/api/java/io/package-summary.html)åŒ…æ–‡æ¡£ã€‚\nèµ„æº  \u0026ldquo;Java è™šæ‹Ÿæœºå’Œç¼–è¯‘å™¨çš„è§£é‡Š\u0026rdquo;ã€‚Â Java è™šæ‹Ÿæœºå’Œç¼–è¯‘å™¨çš„è§£é‡Š\u0026ndash;YouTube clojure.org Java äº’æ“ä½œæ–‡æ¡£ã€‚Â Clojure - Java Interop ç»´åŸºç™¾ç§‘çš„ \u0026ldquo;é€€å‡ºçŠ¶æ€ \u0026ldquo;æ–‡ç« ã€‚Â é€€å‡ºçŠ¶æ€ - ç»´åŸºç™¾ç§‘  æ€»ç»“ åœ¨æœ¬ç« ä¸­ï¼Œä½ äº†è§£äº† Clojure è¢«æ‰˜ç®¡åœ¨ JVM ä¸Šçš„å«ä¹‰ã€‚Clojure ç¨‹åºè¢«ç¼–è¯‘æˆ Java å­—èŠ‚ç å¹¶åœ¨ JVM è¿›ç¨‹ä¸­æ‰§è¡Œã€‚Clojure ç¨‹åºä¹Ÿå¯ä»¥è®¿é—® Java åº“ï¼Œä½ å¯ä»¥ä½¿ç”¨ Clojure çš„äº’æ“ä½œè®¾æ–½è½»æ¾åœ°ä¸å®ƒä»¬äº¤äº’ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/chapter12/","summary":"ä¸ JVM ä¸€èµ·å·¥ä½œ åœ¨æ¯ä¸ª Clojurist çš„ç”Ÿå‘½ä¸­éƒ½ä¼šæœ‰è¿™ä¹ˆä¸€å¤©ï¼Œå¥¹å¿…é¡»ä»çº¯å‡½æ•°å’Œä¸å¯å˜æ•°æ®ç»“æ„çš„åº‡æŠ¤æ‰€å†’é™©è¿›å…¥é‡è›®çš„ Java å¤§é™†ã€‚è¿™æ®µè‰°éš¾çš„æ—…ç¨‹æ˜¯å¿…è¦çš„ï¼Œå› ä¸º Clojure æ˜¯åœ¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šæ‰˜ç®¡çš„ï¼Œè¿™èµ‹äºˆäº†å®ƒä¸‰ä¸ªåŸºæœ¬ç‰¹æ€§ã€‚\nèµ‹äºˆå®ƒä¸‰ä¸ªåŸºæœ¬ç‰¹å¾ã€‚é¦–å…ˆï¼Œä½ è¿è¡Œ Clojure åº”ç”¨ç¨‹åºçš„æ–¹å¼ä¸ä½ è¿è¡Œ Java åº”ç”¨ç¨‹åºçš„æ–¹å¼ç›¸åŒã€‚ç¬¬äºŒï¼Œä½ éœ€è¦ä½¿ç”¨ Java å¯¹è±¡æ¥å®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå¦‚è¯»å–æ–‡ä»¶å’Œå¤„ç†æ—¥æœŸã€‚ç¬¬ä¸‰ï¼ŒJava æœ‰ä¸€ä¸ªåºå¤§çš„æœ‰ç”¨åº“çš„ç”Ÿæ€ç³»ç»Ÿï¼Œä½ éœ€è¦å¯¹ Java æœ‰ä¸€å®šçš„äº†è§£æ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚\nè¿™æ ·ä¸€æ¥ï¼ŒClojure å°±æœ‰ç‚¹åƒä¸€ä¸ªä¹Œæ‰˜é‚¦ç¤¾åŒºï¼Œè¢«æ”¾ç½®åœ¨ä¸€ä¸ªä¹Œæ‰˜é‚¦å›½å®¶çš„ä¸­é—´ã€‚æ˜¾ç„¶ï¼Œä½ æ›´æ„¿æ„ä¸å…¶ä»–ä¹Œæ‰˜é‚¦äººäº’åŠ¨ï¼Œä½†å¶å°”ä½ ä¹Ÿéœ€è¦ä¸å½“åœ°äººäº¤è°ˆï¼Œä»¥ä¾¿å®Œæˆå·¥ä½œã€‚\nè¿™ä¸€ç« å°±åƒä¸€æœ¬çŸ­è¯­ä¹¦å’Œ Java å›½å®¶çš„æ–‡åŒ–ä»‹ç»ä¹‹é—´çš„äº¤å‰ã€‚ä½ å°†äº†è§£ä»€ä¹ˆæ˜¯ JVMï¼Œå®ƒæ˜¯å¦‚ä½•è¿è¡Œç¨‹åºçš„ï¼Œä»¥åŠå¦‚ä½•ä¸ºå®ƒç¼–è¯‘ç¨‹åºã€‚æœ¬ç« è¿˜å°†ä¸ºä½ ç®€è¦ä»‹ç»å¸¸ç”¨çš„ Java ç±»å’Œæ–¹æ³•ï¼Œå¹¶è§£é‡Šå¦‚ä½•ä½¿ç”¨ Clojure ä¸å®ƒä»¬äº’åŠ¨ã€‚ä½ å°†å­¦ä¼šå¦‚ä½•æ€è€ƒå’Œç†è§£ Javaï¼Œä»¥ä¾¿å°†ä»»ä½• Java åº“çº³å…¥ä½ çš„ Clojure ç¨‹åºä¸­ã€‚\nè¦è¿è¡Œæœ¬ç« çš„ä¾‹å­ï¼Œä½ éœ€è¦åœ¨ç”µè„‘ä¸Šå®‰è£… 1.6 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ Java å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯è¿è¡Œjavac -versionæ¥æ£€æŸ¥ã€‚ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ \u0026ldquo;java 1.8.0_40 \u0026ldquo;çš„å†…å®¹ï¼›å¦‚æœæ²¡æœ‰ï¼Œè¯·è®¿é—®http://www.oracle.com/ï¼Œä¸‹è½½æœ€æ–°çš„ JDKã€‚\nJVM å¼€å‘äººå‘˜ç”¨ JVM è¿™ä¸ªè¯æ¥æŒ‡ä»£ä¸€äº›ä¸åŒçš„ä¸œè¥¿ã€‚ä½ ä¼šå¬åˆ°ä»–ä»¬è¯´ï¼Œ\u0026ldquo;Clojure åœ¨the JVM ä¸Šè¿è¡Œ\u0026rdquo;ï¼Œä½ ä¹Ÿä¼šå¬åˆ°ï¼Œ\u0026ldquo;Clojure ç¨‹åºåœ¨a JVM ä¸­è¿è¡Œ\u0026rdquo;ã€‚åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼ŒJVM æŒ‡çš„æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µ\u0026ndash;Java è™šæ‹Ÿæœºçš„ä¸€èˆ¬æ¨¡å‹ã€‚åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œå®ƒæŒ‡çš„æ˜¯ä¸€ä¸ªè¿›ç¨‹\u0026ndash;ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„å®ä¾‹ã€‚æˆ‘ä»¬å°†ä¸“æ³¨äº JVM æ¨¡å‹ï¼Œä½†å½“æˆ‘ä»¬è°ˆè®ºè¿è¡Œä¸­çš„ JVM è¿›ç¨‹æ—¶ï¼Œæˆ‘å°†æŒ‡å‡ºæ¥ã€‚\nä¸ºäº†ç†è§£ JVMï¼Œè®©æˆ‘ä»¬å›å¤´çœ‹çœ‹æ™®é€šçš„è®¡ç®—æœºæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨è®¡ç®—æœºå¿ƒè„çš„æ·±å¤„æ˜¯å®ƒçš„ CPUï¼Œè€Œ CPU çš„å·¥ä½œæ˜¯æ‰§è¡ŒåƒåŠ å’Œæ— ç¬¦å·ä¹˜æ³•è¿™æ ·çš„æ“ä½œã€‚ä½ å¯èƒ½å¬è¯´è¿‡ç¨‹åºå‘˜å°†è¿™äº›æŒ‡ä»¤ç¼–ç åœ¨æ‰“å¡æœºä¸Šã€ç¯æ³¡é‡Œã€ä¹Œé¾Ÿå£³çš„ç¥åœ£ç¼éš™é‡Œï¼Œæˆ–è€…ä»€ä¹ˆçš„ï¼Œä½†ç°åœ¨è¿™äº›æ“ä½œåœ¨æ±‡ç¼–è¯­è¨€ä¸­ç”¨ ADD å’Œ MUL è¿™æ ·çš„è®°å¿†ç¬¦å·è¡¨ç¤ºã€‚CPU æ¶æ„ï¼ˆX86ã€ARMv7ï¼Œç­‰ç­‰ï¼‰å†³å®šäº†å“ªäº›æ“ä½œå¯ä»¥ä½œä¸ºè¯¥æ¶æ„çš„æŒ‡ä»¤é›†çš„ä¸€éƒ¨åˆ†ã€‚","title":"Chapter12 ä¸ Java çš„äº’æ“ä½œ"},{"content":"ç”¨ core.async æŒæ¡å¹¶å‘è¿›ç¨‹ æœ‰ä¸€å¤©ï¼Œå½“ä½ èµ°åœ¨å¤§è¡—ä¸Šæ—¶ï¼Œä½ ä¼šæƒŠè®¶ã€å¥½å¥‡ï¼Œå¹¶æœ‰ç‚¹åŒæ¶åœ°å‘ç°ä¸€å°çƒ­ç‹—è‡ªåŠ¨è´©å–æœºã€‚ä½ çš„å¤´çš®è¢«æœ‰ç½ªçš„å¥½å¥‡å¿ƒåˆºç—›ï¼Œä½ ä¼šå¿ä¸ä½æå‡ºä¸‰å—é’±ï¼Œçœ‹çœ‹è¿™ä¸ªè£…ç½®æ˜¯å¦çœŸçš„èƒ½å·¥ä½œã€‚åœ¨ \u0026ldquo;å’”åš“ \u0026ldquo;ä¸€å£°æ¥å—äº†ä½ çš„é’±åï¼Œå®ƒå¼¹å‡ºäº†ä¸€ä¸ªæ–°é²œçš„çƒ­ç‹—ï¼ŒåŒ…æ‹¬é¢åŒ…å’Œæ‰€æœ‰çš„ä¸œè¥¿ã€‚\nè‡ªåŠ¨å”®è´§æœºè¡¨ç°å‡ºç®€å•çš„è¡Œä¸ºï¼šå½“å®ƒæ”¶åˆ°é’±æ—¶ï¼Œå®ƒä¼šæ”¾å‡ºä¸€ä¸ªçƒ­ç‹—ï¼Œç„¶åä¸ºä¸‹ä¸€æ¬¡è´­ä¹°åšå‡†å¤‡ã€‚å½“å®ƒçš„çƒ­ç‹—ç”¨å®Œæ—¶ï¼Œå®ƒå°±ä¼šåœæ­¢ã€‚æˆ‘ä»¬å‘¨å›´çš„çƒ­ç‹—è‡ªåŠ¨å”®è´§æœºä»¥ä¸åŒçš„é¢è²Œå‡ºç°ï¼Œå®ƒä»¬æ˜¯ç‹¬ç«‹çš„å®ä½“ï¼ŒåŒæ—¶å¯¹ä¸–ç•Œä¸Šçš„äº‹ä»¶ä½œå‡ºååº”ã€‚ä½ æœ€å–œæ¬¢çš„å’–å•¡åº—çš„æµ“ç¼©å’–å•¡æœºï¼Œä½ å°æ—¶å€™å–œæ¬¢çš„å® ç‰©ä»“é¼ \u0026ndash;æ‰€æœ‰çš„ä¸œè¥¿éƒ½å¯ä»¥è¢«åˆ†è§£æˆä¸€ç»„è¡Œä¸ºï¼Œè¿™äº›è¡Œä¸ºéµå¾ªä¸€èˆ¬çš„å½¢å¼ \u0026ldquo;å½“xå‘ç”Ÿæ—¶ï¼Œåšy\u0026quot;ã€‚ç”šè‡³æˆ‘ä»¬å†™çš„ç¨‹åºä¹Ÿåªæ˜¯ç¾åŒ–çš„çƒ­ç‹—è´©å–æœºï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œç­‰å¾…ç€ä¸‹ä¸€ä¸ªäº‹ä»¶çš„å‘ç”Ÿï¼Œæ— è®ºæ˜¯å‡»é”®ã€è¶…æ—¶ï¼Œè¿˜æ˜¯å¥—æ¥å­—ä¸Šçš„æ•°æ®åˆ°è¾¾ã€‚\nClojure çš„ core.async åº“å…è®¸ä½ åœ¨ä¸€ä¸ªç¨‹åºä¸­åˆ›å»ºå¤šä¸ªç‹¬ç«‹è¿›ç¨‹ã€‚Â æœ¬ç« æè¿°äº†æ€è€ƒè¿™ç§ç¼–ç¨‹é£æ ¼çš„æœ‰ç”¨æ¨¡å‹ï¼Œä»¥åŠä½ åœ¨å®é™…ç¼–å†™ä»£ç æ—¶éœ€è¦äº†è§£çš„å®é™…ç»†èŠ‚ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨é€šé“åœ¨ç”± go å—å’Œthreadåˆ›å»ºçš„ç‹¬ç«‹è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼›äº†è§£ä¸€äº›å…³äº Clojure å¦‚ä½•é€šè¿‡åœæ”¾å’Œé˜»å¡æœ‰æ•ˆåœ°ç®¡ç†çº¿ç¨‹ï¼›å¦‚ä½•ä½¿ç”¨alts!!ï¼›ä»¥åŠä¸€ç§æ›´ç›´æ¥çš„åˆ›å»ºé˜Ÿåˆ—çš„æ–¹æ³•ã€‚æœ€åï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ç”¨è¿›ç¨‹ç®¡é“æ¥è¸¢å›è°ƒçš„å±è‚¡ã€‚\nè¿›ç¨‹çš„å…¥é—¨ core.async çš„æ ¸å¿ƒæ˜¯*è¿›ç¨‹ï¼Œä¸€ä¸ªå¹¶å‘è¿è¡Œçš„é€»è¾‘å•å…ƒï¼Œå¯¹äº‹ä»¶åšå‡ºååº”ã€‚è¿›ç¨‹å¯¹åº”äºæˆ‘ä»¬å¯¹ç°å®ä¸–ç•Œçš„å¿ƒç†æ¨¡å‹ï¼šå®ä½“ä¹‹é—´çš„äº’åŠ¨å’Œå“åº”æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰æŸç§ä¸­å¤®æ§åˆ¶æœºåˆ¶çš„ç‰µåˆ¶ã€‚ä½ æŠŠé’±æ”¾è¿›æœºå™¨é‡Œï¼Œå°±ä¼šæœ‰ä¸€ä¸ªçƒ­ç‹—å‡ºæ¥ï¼Œæ‰€æœ‰è¿™äº›éƒ½ä¸éœ€è¦å…‰ç…§æ´¾æˆ–è€å¤§å“¥æ¥ç­–åˆ’æ•´ä¸ªäº‹æƒ…ã€‚è¿™ä¸ä½ è¿„ä»Šä¸ºæ­¢ä¸€ç›´åœ¨æ¢ç´¢çš„å¹¶å‘æ€§è§‚ç‚¹ä¸åŒï¼Œåœ¨é‚£é‡Œï¼Œä½ å®šä¹‰çš„ä»»åŠ¡è¦ä¹ˆåªæ˜¯æ§åˆ¶ä¸»çº¿ç¨‹çš„æ‰©å±•ï¼ˆä¾‹å¦‚ï¼Œç”¨pmapå®ç°æ•°æ®å¹¶è¡Œï¼‰ï¼Œè¦ä¹ˆæ˜¯ä½ æ²¡æœ‰å…´è¶£ä¸ä¹‹äº¤æµçš„ä»»åŠ¡ï¼ˆå¦‚ç”¨futureåˆ›å»ºçš„ä¸€æ¬¡æ€§ä»»åŠ¡ï¼‰ã€‚\næŠŠè‡ªåŠ¨å”®è´§æœºçœ‹æˆæ˜¯ä¸€ä¸ªè¿›ç¨‹å¯èƒ½å¾ˆå¥‡æ€ªï¼šè‡ªåŠ¨å”®è´§æœºæ˜¯åè¯å’Œäº‹ç‰©ï¼Œè€Œè¿›ç¨‹æ˜¯åŠ¨è¯å’Œè¡Œä¸ºã€‚ä¸ºäº†è·å¾—æ­£ç¡®çš„æ€ç»´æ–¹å¼ï¼Œå¯ä»¥å°è¯•å°†ç°å®ä¸–ç•Œçš„ç‰©ä½“å®šä¹‰ä¸ºå…¶äº‹ä»¶é©±åŠ¨çš„è¡Œä¸ºçš„æ€»å’Œã€‚å½“ä¸€ç²’ç§å­è¢«æµ‡æ°´æ—¶ï¼Œå®ƒå°±ä¼šå‘èŠ½ï¼›å½“æ¯äº²çœ‹ç€å¥¹çš„æ–°ç”Ÿå„¿æ—¶ï¼Œå¥¹å°±ä¼šæ„Ÿå—åˆ°çˆ±ï¼›è€Œå½“ä½ è§‚çœ‹ã€Šæ˜Ÿæˆ˜ã€‹ç¬¬ä¸€é›†æ—¶ï¼Œä½ ä¼šå……æ»¡æ„¤æ€’å’Œç»æœ›ã€‚å¦‚æœä½ æƒ³å˜å¾—è¶…çº§å“²å­¦ï¼Œå¯ä»¥è€ƒè™‘æ˜¯å¦æœ‰å¯èƒ½å°†æ¯ä¸ªäº‹ç‰©çš„æœ¬è´¨å®šä¹‰ä¸ºå®ƒæ‰€è¯†åˆ«çš„äº‹ä»¶çš„é›†åˆï¼Œä»¥åŠå®ƒå¦‚ä½•åšå‡ºååº”ã€‚ç°å®æ˜¯å¦åªæ˜¯çƒ­ç‹—å”®å–æœºçš„ç»„æˆï¼Ÿ\næ€»ä¹‹ï¼Œæˆ‘è¯´å¾—å¤Ÿå¤šäº†! è®©æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€äº›ç®€å•çš„è¿‡ç¨‹ï¼Œä»ç†è®ºä¸Šèµ°å‘å…·ä½“ã€‚é¦–å…ˆï¼Œç”¨ \u0026ldquo;lein new app playsync \u0026ldquo;åˆ›å»ºä¸€ä¸ªæ–°çš„ Leiningen é¡¹ç›®ï¼Œåä¸ºplaysyncã€‚ç„¶åï¼Œæ‰“å¼€project.cljæ–‡ä»¶ï¼Œå°† core.async æ·»åŠ åˆ°:dependenciesVector ä¸­ï¼Œä½¿å…¶å†…å®¹å¦‚ä¸‹ã€‚\n[[org.clojure/clojure \u0026#34;1.9.0\u0026#34;] [org.clojure/core.async \u0026#34;0.1.346.0-17112a-alpha\u0026#34;]] æ³¨æ„ è‡ªä»æˆ‘å†™å®Œè¿™ç¯‡æ–‡ç« åï¼Œcore.async çš„ç‰ˆæœ¬æœ‰å¯èƒ½æœ‰æ‰€è¿›æ­¥ã€‚å…³äºæœ€æ–°çš„ç‰ˆæœ¬ï¼Œè¯·æŸ¥çœ‹ core.async çš„ GitHub é¡¹ç›®é¡µé¢ã€‚ä½†ä¸ºäº†è¿™äº›ç»ƒä¹ çš„ç›®çš„ï¼Œè¯·ä½¿ç”¨è¿™é‡Œåˆ—å‡ºçš„ç‰ˆæœ¬ã€‚\næ¥ä¸‹æ¥ï¼Œæ‰“å¼€src/playsync/core.cljï¼Œä½¿å…¶çœ‹èµ·æ¥åƒè¿™æ ·ã€‚\n(ns playsync.core (:require [clojure.core.async :as a :refer [\u0026gt;! \u0026lt;! \u0026gt;!! \u0026lt;!! go chan buffer close! thread alts! alts!! timeout]])) ç°åœ¨ï¼Œå½“ä½ åœ¨ REPL ä¸­æ‰“å¼€å®ƒæ—¶ï¼Œä½ å°†æ‹¥æœ‰æœ€å¸¸ç”¨çš„ core.async å‡½æ•°ä¾›ä½ ä½¿ç”¨ã€‚å¾ˆå¥½! åœ¨åˆ›å»ºåƒçƒ­ç‹—å”®å–æœºé‚£æ ·å¤æ‚å’Œé©å‘½æ€§çš„ä¸œè¥¿ä¹‹å‰ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œç®€å•åœ°æ‰“å°å®ƒæ”¶åˆ°çš„æ¶ˆæ¯ã€‚\n(def echo-chan (chan)) (go (println (\u0026lt;! echo-chan))) (\u0026gt;!! echo-chan \u0026#34;ketchup\u0026#34;) ; =\u0026gt; true ; =\u0026gt; ketchup åœ¨ç¬¬ä¸€è¡Œä»£ç ä¸­ï¼Œä½ ç”¨chanå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªåä¸ºecho-chançš„é€šé“ã€‚é€šé“ä¼ è¾¾æ¶ˆæ¯*ã€‚ä½ å¯ä»¥æŠŠæ¶ˆæ¯æ”¾åˆ°ä¸€ä¸ªé€šé“ä¸Šï¼Œä¹Ÿå¯ä»¥æŠŠæ¶ˆæ¯ä»ä¸€ä¸ªé€šé“ä¸Šæ‹¿ä¸‹æ¥ã€‚è¿›ç¨‹ç­‰å¾…æ”¾å’Œå–çš„å®Œæˆ\u0026ndash;è¿™äº›æ˜¯è¿›ç¨‹æ‰€å“åº”çš„äº‹ä»¶ã€‚ä½ å¯ä»¥è®¤ä¸ºè¿›ç¨‹æœ‰ä¸¤ä¸ªè§„åˆ™ã€‚1ï¼‰å½“è¯•å›¾æŠŠä¸€ä¸ªæ¶ˆæ¯æ”¾åˆ°é€šé“ä¸Šæˆ–ä»é€šé“ä¸Šå–èµ°ä¸€ä¸ªæ¶ˆæ¯æ—¶ï¼Œç­‰å¾…å¹¶ä¸åšä»»ä½•äº‹æƒ…ï¼Œç›´åˆ°æ”¾æˆ–å–æˆåŠŸï¼›2ï¼‰å½“æ”¾æˆ–å–æˆåŠŸæ—¶ï¼Œç»§ç»­æ‰§è¡Œã€‚\nåœ¨ä¸‹ä¸€è¡Œï¼Œä½ ç”¨goæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ã€‚goè¡¨è¾¾å¼ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½è¢«ç§°ä¸ºgo å—ï¼Œåœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šå¹¶å‘è¿è¡Œã€‚Go å—åœ¨ä¸€ä¸ªçº¿ç¨‹æ± ä¸Šè¿è¡Œä½ çš„è¿›ç¨‹ï¼Œè¯¥çº¿ç¨‹æ± åŒ…å«çš„çº¿ç¨‹æ•°é‡ç­‰äºä½ çš„æœºå™¨ä¸Šçš„æ ¸å¿ƒæ•°é‡çš„ä¸¤å€ï¼Œè¿™æ„å‘³ç€ä½ çš„ç¨‹åºä¸å¿…ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚è¿™é€šå¸¸ä¼šå¸¦æ¥æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºä½ é¿å…äº†ä¸åˆ›å»ºçº¿ç¨‹æœ‰å…³çš„å¼€é”€ã€‚\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿›ç¨‹(println (\u0026lt;! echo-chan))è¡¨è¾¾äº† \u0026ldquo;å½“æˆ‘ä»`echo-chan\u0026rsquo;é‚£é‡Œå¾—åˆ°ä¸€ä¸ªæ¶ˆæ¯æ—¶ï¼Œæ‰“å°å®ƒ\u0026rdquo;ã€‚è¯¥è¿›ç¨‹è¢«åˆ†æµåˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œé‡Šæ”¾äº†å½“å‰çº¿ç¨‹ï¼Œä½¿ä½ èƒ½å¤Ÿç»§ç»­ä¸ REPL äº¤äº’ã€‚\nåœ¨è¡¨è¾¾å¼(\u0026lt;! echo-chan)ä¸­ï¼Œ\u0026lt;!æ˜¯takeå‡½æ•°ã€‚å®ƒç›‘å¬ä½ ç»™å®ƒä½œä¸ºå‚æ•°çš„é€šé“ï¼Œå®ƒæ‰€å±çš„è¿›ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªè¿›ç¨‹åœ¨è¯¥é€šé“ä¸Šæ”¾å‡ºä¸€ä¸ªæ¶ˆæ¯ã€‚å½“\u0026lt;!æ£€ç´¢åˆ°ä¸€ä¸ªå€¼æ—¶ï¼Œè¯¥å€¼è¢«è¿”å›å¹¶æ‰§è¡Œprintlnè¡¨è¾¾å¼ã€‚\nè¡¨è¾¾å¼(\u0026gt;!! echo-chan \u0026quot;ketchup\u0026quot;)å°†å­—ç¬¦ä¸²\u0026quot;ketchup\u0026quot;æ”¾åˆ°echo-chanä¸Šå¹¶è¿”å›trueã€‚å½“ä½ æŠŠä¸€ä¸ªæ¶ˆæ¯æ”¾åœ¨ä¸€ä¸ªé€šé“ä¸Šæ—¶ï¼Œè¯¥è¿›ç¨‹ä¼šé˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ªè¿›ç¨‹æ¥æ”¶è¯¥æ¶ˆæ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒREPL è¿›ç¨‹æ ¹æœ¬ä¸éœ€è¦ç­‰å¾…ï¼Œå› ä¸ºå·²ç»æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ç›‘å¬è¯¥é€šé“ï¼Œç­‰å¾…ä»è¯¥é€šé“ä¸­è·å–ä¿¡æ¯ã€‚ç„¶è€Œï¼Œå¦‚æœä½ åšäº†ä»¥ä¸‹äº‹æƒ…ï¼Œä½ çš„ REPL å°†æ— é™æœŸåœ°é˜»å¡ã€‚\n(\u0026gt;!! (chan) \u0026#34;mustard\u0026#34;) ä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„é€šé“ï¼Œå¹¶åœ¨ä¸Šé¢æ”¾äº†ä¸€äº›ä¸œè¥¿ï¼Œä½†æ²¡æœ‰è¿›ç¨‹åœ¨ç›‘å¬è¿™ä¸ªé€šé“ã€‚è¿›ç¨‹ä¸ä»…ä»…æ˜¯ç­‰å¾…æ¥æ”¶æ¶ˆæ¯ï¼Œä»–ä»¬ä¹Ÿåœ¨ç­‰å¾…ä»–ä»¬æ”¾åœ¨é€šé“ä¸Šçš„æ¶ˆæ¯è¢«æ¥æ”¶ã€‚\nç¼“å†² å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå‰é¢çš„ç»ƒä¹ åŒ…å«ä¸¤ä¸ªè¿›ç¨‹ï¼šä½ ç”¨goåˆ›å»ºçš„è¿›ç¨‹å’Œ REPL è¿›ç¨‹ã€‚è¿™äº›è¿›ç¨‹ç›¸äº’ä¹‹é—´æ²¡æœ‰æ˜ç¡®çš„çŸ¥è¯†ï¼Œè€Œä¸”å®ƒä»¬ç‹¬ç«‹è¡ŒåŠ¨ã€‚\nè®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™äº›è¿‡ç¨‹å‘ç”Ÿåœ¨ä¸€ä¸ªé¤å…é‡Œã€‚REPL æ˜¯ç•ªèŒ„é…±å¨å¸ˆï¼Œå½“ä»–å®Œæˆä¸€ä¸ªæ‰¹æ¬¡æ—¶ï¼Œä»–å¤§å£°è¯´ï¼š\u0026ldquo;ç•ªèŒ„é…±ï¼\u0026rdquo; å®Œå…¨æœ‰å¯èƒ½çš„æ˜¯ï¼Œå…¶ä»–å‘˜å·¥éƒ½åœ¨å¤–é¢æ¬£èµä»–ä»¬æœ‰æœºèŠ±å›­é‡Œæœ€æ–°çš„ä¸€æ‰¹ç‰›è‡³ï¼Œè€Œå¨å¸ˆåªæ˜¯åç€ç­‰å¾…ï¼Œç›´åˆ°æœ‰äººæ¥å–ä»–çš„ç•ªèŒ„é…±ã€‚åè¿‡æ¥è¯´ï¼Œ\u0026ldquo;å» \u0026ldquo;çš„è¿‡ç¨‹ä»£è¡¨äº†å…¶ä¸­ä¸€ä¸ªå·¥ä½œäººå‘˜ï¼Œä»–æ­£åœ¨è€å¿ƒåœ°ç­‰å¾…ç€ä»€ä¹ˆå›åº”ã€‚å¯èƒ½æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰å‘ç”Ÿï¼Œä»–åªæ˜¯æ— é™æœŸåœ°ç­‰å¾…ï¼Œç›´åˆ°é¤å…å…³é—¨ã€‚\nè¿™ç§æƒ…å†µä¼¼ä¹æœ‰ç‚¹å‚»ï¼šå“ªä¸ªè‡ªå°Šå¿ƒå¼ºçš„ç•ªèŒ„é…±å¨å¸ˆä¼šåœ¨åˆ¶ä½œæ›´å¤šçš„ç•ªèŒ„é…±ä¹‹å‰ï¼Œåªæ˜¯åç­‰åˆ«äººæ‹¿èµ°ä»–æœ€æ–°çš„ä¸€æ‰¹ç•ªèŒ„é…±ï¼Ÿä¸ºäº†é¿å…è¿™ç§æ‚²å‰§çš„å‘ç”Ÿï¼Œä½ å¯ä»¥åˆ›å»ºç¼“å†²é€šé“ã€‚\n(def echo-buffer (chan 2)) (\u0026gt;!! echo-buffer \u0026#34;ketchup\u0026#34;) ; =\u0026gt; true (\u0026gt;!! echo-buffer \u0026#34;ketchup\u0026#34;) ; =\u0026gt; true (\u0026gt;!! echo-buffer \u0026#34;ketchup\u0026#34;) ; This blocks because the channel buffer is full (å°å¿ƒæ±‚å€¼æœ€åä¸€ä¸ª(\u0026gt;! ! echo-buffer \u0026quot;ketchup\u0026quot;)ï¼Œå› ä¸ºå®ƒå°†é˜»å¡ä½ çš„ REPLã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Leiningen REPLï¼Œctrl-C ä¼šè§£é™¤å°é”ï¼‰ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç¼“å†²åŒºå¤§å°ä¸º 2 çš„é€šé“ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨é€šé“ä¸Šæ”¾ä¸¤ä¸ªå€¼è€Œä¸éœ€è¦ç­‰å¾…ï¼Œä½†æ”¾ç¬¬ä¸‰ä¸ªå€¼æ„å‘³ç€è¿›ç¨‹å°†ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ä»é€šé“ä¸Šå–å€¼ã€‚ä½ è¿˜å¯ä»¥ç”¨sliding-bufferåˆ›å»ºæ»‘åŠ¨ç¼“å†²åŒºï¼Œå®ƒä»¥å…ˆå…¥å…ˆå‡ºçš„æ–¹å¼ä¸¢å¼ƒæ•°å€¼ï¼›ç”¨dropping-bufferåˆ›å»ºä¸¢å¼ƒç¼“å†²åŒºï¼Œå®ƒä»¥åå…¥å…ˆå‡ºçš„æ–¹å¼ä¸¢å¼ƒæ•°å€¼ã€‚è¿™ä¸¤ç§ç¼“å†²åŒºéƒ½ä¸ä¼šå¯¼è‡´\u0026gt;!!é˜»å¡ã€‚\né€šè¿‡ä½¿ç”¨ç¼“å†²åŒºï¼Œç•ªèŒ„é…±å¤§å¸ˆå¯ä»¥ç»§ç»­åˆ¶ä½œæˆæ‰¹ä»¤äººå‚æ¶æ¬²æ»´çš„ç•ªèŒ„é…±ï¼Œè€Œä¸å¿…ç­‰å¾…ä»–çš„å‘˜å·¥æŠŠå®ƒä»¬å¸¦èµ°ã€‚å¦‚æœä»–ä½¿ç”¨æ™®é€šçš„ç¼“å†²å™¨ï¼Œå°±åƒä»–æœ‰ä¸€ä¸ªæ¶å­ï¼Œå¯ä»¥æŠŠæ‰€æœ‰çš„ç•ªèŒ„é…±æ‰¹æ¬¡æ”¾åœ¨ä¸Šé¢ï¼›ä¸€æ—¦æ¶å­æ»¡äº†ï¼Œä»–è¿˜å¾—ç­‰å¾…ç©ºé—´çš„æ‰“å¼€ã€‚å¦‚æœä»–ç”¨çš„æ˜¯æ»‘åŠ¨ç¼“å†²å™¨ï¼Œå½“æ¶å­ä¸Šçš„ç•ªèŒ„é…±æ»¡äº†ï¼Œä»–å°±ä¼šæŠŠæœ€æ—§çš„ä¸€æ‰¹æ‰”æ‰ï¼ŒæŠŠæ‰€æœ‰çš„ç•ªèŒ„é…±æ»‘ä¸‹æ¥ï¼Œç„¶åæŠŠæ–°çš„ä¸€æ‰¹æ”¾åˆ°ç©ºå‡ºæ¥çš„åœ°æ–¹ã€‚å¦‚æœæ˜¯è·Œè½å¼ç¼“å†²å™¨ï¼Œä»–å°±ä¼šæŠŠæœ€æ–°é²œçš„ä¸€æ‰¹ç•ªèŒ„é…±ä»è´§æ¶ä¸Šæ‰“ä¸‹æ¥ï¼Œç„¶åæŠŠæ–°çš„ä¸€æ‰¹ç•ªèŒ„é…±æ”¾åœ¨é‚£ä¸ªç©ºé—´é‡Œã€‚\nç¼“å†²åŒºåªæ˜¯å¯¹æ ¸å¿ƒæ¨¡å‹çš„é˜è¿°ï¼šè¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ã€å¹¶å‘æ‰§è¡Œçš„é€»è¾‘å•å…ƒï¼Œå¯¹äº‹ä»¶ä½œå‡ºååº”ã€‚ä½ å¯ä»¥ç”¨ go å—æ¥åˆ›å»ºè¿›ç¨‹ï¼Œå¹¶é€šè¿‡é€šé“æ¥æ²Ÿé€šäº‹ä»¶ã€‚\nå µå¡å’Œåœè½¦ ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œtake å‡½æ•°\u0026lt;!åªä½¿ç”¨äº†ä¸€ä¸ªæ„Ÿå¹å·ï¼Œè€Œ put å‡½æ•°\u0026gt;!åˆ™ä½¿ç”¨äº†ä¸¤ä¸ªæ„Ÿå¹å·ã€‚äº‹å®ä¸Šï¼Œput å’Œ take éƒ½æœ‰ä¸€ä¸ªæ„Ÿå¹å·å’Œä¸¤ä¸ªæ„Ÿå¹å·çš„ç§ç±»ã€‚ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å“ªä¸ªï¼Ÿç®€å•çš„ç­”æ¡ˆæ˜¯ï¼Œä½ å¯ä»¥åœ¨ go å—å†…ä½¿ç”¨ä¸€ä¸ªæ„Ÿå¹å·ï¼Œä½†ä½ å¿…é¡»åœ¨ go å—å¤–ä½¿ç”¨ä¸¤ä¸ªæ„Ÿå¹å·ã€‚\n    Inside go block Outside go block     put \u0026gt;! or \u0026gt;!! \u0026gt;!!   take \u0026lt;! or \u0026lt;!! \u0026lt;!!    è¿™ä¸€åˆ‡éƒ½å½’ç»“ä¸ºæ•ˆç‡é—®é¢˜ã€‚å› ä¸º go å—ä½¿ç”¨ä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œä½ å¯ä»¥åˆ›å»º 1000 ä¸ª go è¿›ç¨‹ï¼Œä½†åªä½¿ç”¨å°‘é‡çš„çº¿ç¨‹ã€‚\n(def hi-chan (chan)) (doseq [n (range 1000)]) (go (\u0026gt;! hi-chan (str \u0026#34;hi \u0026#34; n))))) ä¸ºäº†ç†è§£ Clojure æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼Œæˆ‘ä»¬éœ€è¦æ¢ç´¢è¿›ç¨‹å¦‚ä½•ç­‰å¾…ã€‚ç­‰å¾…æ˜¯ä½¿ç”¨ core.async è¿›ç¨‹çš„ä¸€ä¸ªå…³é”®æ–¹é¢ï¼šæˆ‘ä»¬å·²ç»ç¡®å®šï¼Œputä¼šç­‰å¾…åˆ°å¦ä¸€ä¸ªè¿›ç¨‹åœ¨åŒä¸€é€šé“ä¸Šåštake*ï¼Œåä¹‹äº¦ç„¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ1,000 ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…å¦ä¸€ä¸ªè¿›ç¨‹ä» \u0026ldquo;hi-chan \u0026ldquo;ä¸­æå–ã€‚\næœ‰ä¸¤ç§ç±»å‹çš„ç­‰å¾…ã€‚Â åœè½¦å’Œé˜»å¡ã€‚é˜»å¡æ˜¯ä½ ç†Ÿæ‚‰çš„é‚£ç§ç­‰å¾…ï¼šä¸€ä¸ªçº¿ç¨‹åœæ­¢æ‰§è¡Œï¼Œç›´åˆ°ä¸€ä¸ªä»»åŠ¡å®Œæˆã€‚é€šå¸¸è¿™å‘ç”Ÿåœ¨ä½ è¿›è¡ŒæŸç§ I/O æ“ä½œçš„æ—¶å€™ã€‚è¿™ä¸ªçº¿ç¨‹ä»ç„¶æ´»ç€ï¼Œä½†ä¸åšä»»ä½•å·¥ä½œï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³è®©ä½ çš„ç¨‹åºç»§ç»­å·¥ä½œï¼Œä½ å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚åœ¨ç¬¬ 9 ç« ä¸­ï¼Œä½ å­¦åˆ°äº†å¦‚ä½•ç”¨ \u0026ldquo;future \u0026ldquo;æ¥åšè¿™ä»¶äº‹ã€‚\nåœè½¦é‡Šæ”¾äº†çº¿ç¨‹ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ç»§ç»­å·¥ä½œäº†ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªçº¿ç¨‹å’Œä¸¤ä¸ªè¿›ç¨‹ï¼ŒProcess A å’Œ Process Bï¼ŒProcess A åœ¨çº¿ç¨‹ä¸Šè¿è¡Œï¼Œç„¶åç­‰å¾…æ”¾æˆ–å–ã€‚Clojure å°†è¿›ç¨‹ A ç§»å‡ºçº¿ç¨‹ï¼Œå¹¶å°†è¿›ç¨‹ B ç§»åˆ°çº¿ç¨‹ä¸Šã€‚å¦‚æœè¿›ç¨‹ B å¼€å§‹ç­‰å¾…ï¼Œè€Œè¿›ç¨‹ A çš„ put æˆ– take å·²ç»å®Œæˆï¼Œé‚£ä¹ˆ Clojure å°†æŠŠè¿›ç¨‹ B ç§»å‡ºçº¿ç¨‹ï¼ŒæŠŠè¿›ç¨‹ A æ”¾å›çº¿ç¨‹ä¸Šã€‚åœæ”¾å…è®¸å¤šä¸ªè¿›ç¨‹çš„æŒ‡ä»¤åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šäº¤é”™ï¼Œç±»ä¼¼äºä½¿ç”¨å¤šä¸ªçº¿ç¨‹å…è®¸åœ¨ä¸€ä¸ªæ ¸å¿ƒä¸Šäº¤é”™çš„æ–¹å¼ã€‚åœæ”¾çš„å®ç°å¹¶ä¸é‡è¦ï¼›åªéœ€è¯´å®ƒåªåœ¨ go å—å†…å®ç°ï¼Œå¹¶ä¸”åªåœ¨ä½¿ç”¨\u0026gt;!å’Œ\u0026lt;!ï¼Œæˆ–åœæ”¾ putå’Œåœæ”¾ takeæ—¶å®ç°ã€‚\u0026gt;!!å’Œ\u0026lt;!!æ˜¯åœæ”¾çš„æ”¾å’Œåœæ”¾çš„å–ã€‚\nçº¿ç¨‹ è‚¯å®šæœ‰ä¸€äº›æ—¶å€™ä½ ä¼šæƒ³ä½¿ç”¨é˜»å¡è€Œä¸æ˜¯åœæ”¾ï¼Œæ¯”å¦‚ä½ çš„è¿›ç¨‹è¦èŠ±å¾ˆé•¿æ—¶é—´æ‰èƒ½æ”¾æˆ–å–ï¼Œåœ¨è¿™äº›åœºåˆä½ åº”è¯¥ä½¿ç”¨çº¿ç¨‹ã€‚\n(thread (println (\u0026lt;!! echo-chan))) (\u0026gt;!! echo-chan \u0026#34;mustard\u0026#34;) ; =\u0026gt; true ; =\u0026gt; mustard threadçš„è¡Œä¸ºå‡ ä¹ä¸futureå®Œå…¨ä¸€æ ·ï¼šå®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹å¹¶åœ¨è¯¥çº¿ç¨‹ä¸Šæ‰§è¡Œä¸€ä¸ªè¿›ç¨‹ã€‚ä¸future'ä¸åŒçš„æ˜¯ï¼Œthread\u0026rsquo;ä¸æ˜¯è¿”å›ä¸€ä¸ªå¯ä»¥åæ¨çš„å¯¹è±¡ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªé€šé“ã€‚å½“threadçš„è¿›ç¨‹åœæ­¢æ—¶ï¼Œè¯¥è¿›ç¨‹çš„è¿”å›å€¼ä¼šè¢«æ”¾åœ¨threadè¿”å›çš„é€šé“ä¸Šã€‚\n(let [t (thread \u0026#34;chili\u0026#34;) ] (\u0026lt;!! t)) ; =\u0026gt; \u0026#34;chili\u0026#34; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿›ç¨‹ä¸ç­‰å¾…ä»»ä½•äº‹ä»¶ï¼›ç›¸åï¼Œå®ƒç«‹å³åœæ­¢ã€‚å®ƒçš„è¿”å›å€¼æ˜¯ \u0026ldquo;chili\u0026rdquo;ï¼Œå®ƒè¢«æ”¾åœ¨ä¸tç»‘å®šçš„é€šé“ä¸Šã€‚æˆ‘ä»¬ä»tä¸­è·å–ï¼Œè¿”å›`\u0026ldquo;chili\u0026rdquo;ã€‚\nå½“ä½ æ‰§è¡Œä¸€ä¸ªé•¿æœŸè¿è¡Œçš„ä»»åŠ¡æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨threadè€Œä¸æ˜¯ go blockï¼ŒåŸå› æ˜¯ä½ ä¸ä¼šå µå¡ä½ çš„çº¿ç¨‹æ± ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨è¿è¡Œå››ä¸ªè¿›ç¨‹ï¼Œä¸‹è½½å·¨å¤§çš„æ–‡ä»¶ï¼Œä¿å­˜å®ƒä»¬ï¼Œç„¶åæŠŠæ–‡ä»¶çš„è·¯å¾„æ”¾åœ¨ä¸€ä¸ªé€šé“ä¸Šã€‚å½“è¿™äº›è¿›ç¨‹åœ¨ä¸‹è½½æ–‡ä»¶å’Œä¿å­˜è¿™äº›æ–‡ä»¶æ—¶ï¼ŒClojure ä¸èƒ½åœæ”¾å®ƒä»¬çš„çº¿ç¨‹ã€‚å®ƒåªèƒ½åœ¨æœ€åä¸€æ­¥åœæ”¾çº¿ç¨‹ï¼Œå³è¿›ç¨‹å°†æ–‡ä»¶çš„è·¯å¾„æ”¾åœ¨é€šé“ä¸Šæ—¶ã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„çº¿ç¨‹æ± åªæœ‰å››ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰å››ä¸ªçº¿ç¨‹éƒ½å°†è¢«ç”¨äºä¸‹è½½ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ªä¸‹è½½å®Œæˆä¹‹å‰ï¼Œä¸å…è®¸å…¶ä»–è¿›ç¨‹è¿è¡Œã€‚\ngoã€threadã€chanã€\u0026lt;!ã€\u0026lt;!ã€\u0026gt;!å’Œ\u0026gt;!æ˜¯ä½ ç”¨æ¥åˆ›å»ºå’Œä¸è¿›ç¨‹é€šä¿¡çš„æ ¸å¿ƒå·¥å…·ã€‚put å’Œ take éƒ½ä¼šä½¿ä¸€ä¸ªè¿›ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å®ƒçš„è¡¥ç åœ¨ç»™å®šçš„é€šé“ä¸Šè¢«æ‰§è¡Œã€‚goå…è®¸ä½ ä½¿ç”¨ put å’Œ take çš„åœè½¦å˜ä½“ï¼Œè¿™å¯ä»¥æé«˜æ€§èƒ½ã€‚å¦‚æœä½ åœ¨ put å’Œ take ä¹‹å‰æ‰§è¡Œé•¿æœŸè¿è¡Œçš„ä»»åŠ¡ï¼Œä½ åº”è¯¥ä½¿ç”¨é˜»å¡å¼å˜ä½“ï¼Œä»¥åŠthreadã€‚\nè¿™åº”è¯¥èƒ½æ»¡è¶³ä½ çš„ä¸€åˆ‡éœ€æ±‚ï¼Œè®©ä½ å®ç°ä½ çš„å¿ƒæ„¿ï¼Œåˆ›é€ ä¸€å°æŠŠé’±å˜æˆçƒ­ç‹—çš„æœºå™¨ã€‚\nä½ ä¸€ç›´æ¸´æœ›çš„çƒ­ç‹—æœºè¿‡ç¨‹ çœ‹å“ªï¼Œä½ çš„æ¢¦æƒ³æˆçœŸäº†!\n(defn hot-dog-machine [] (let [in (chan) out (chan)] (go (\u0026lt;! in) (\u0026gt;! out \u0026#34;hot dog\u0026#34;)) [in out])) è¿™ä¸ªå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªiné€šé“ç”¨äºæ¥æ”¶é’±ï¼Œä¸€ä¸ªouté€šé“ç”¨äºå‘æ”¾çƒ­ç‹—ã€‚ç„¶åç”¨goåˆ›å»ºä¸€ä¸ªå¼‚æ­¥è¿›ç¨‹ï¼Œç­‰å¾…é’±ï¼Œç„¶åå‘æ”¾çƒ­ç‹—ã€‚æœ€åï¼Œå®ƒå°†inå’Œouté€šé“ä½œä¸ºä¸€ä¸ª Vector è¿”å›ã€‚\næ˜¯æ—¶å€™åƒçƒ­ç‹—äº†!\n(let [[in out] (hot-dog-machine)] (\u0026gt;!! in \u0026#34;pocket lint\u0026#34;) (\u0026lt;!! out)) ; =\u0026gt; \u0026#34;hot dog\u0026#34; åœ¨è¿™ä¸ªç‰‡æ®µä¸­ï¼Œä½ ç”¨ destructuringï¼ˆåœ¨ç¬¬ä¸‰ç« ä¸­è®²åˆ°ï¼‰å’Œletå°†inå’Œouté€šé“ç»‘å®šåˆ°inå’Œoutç¬¦å·ã€‚ç„¶åä½ æŠŠ \u0026ldquo;pocket lint \u0026ldquo;æ”¾åœ¨ \u0026ldquo;in \u0026ldquo;é€šé“ä¸Šã€‚çƒ­ç‹—æœºå™¨è¿›ç¨‹ç­‰å¾…ç€ä¸€äº›ä¸œè¥¿ï¼Œä»»ä½•ä¸œè¥¿ï¼Œåˆ°è¾¾iné€šé“ï¼›ä¸€æ—¦\u0026quot;pocket lint\u0026quot;åˆ°è¾¾ï¼Œçƒ­ç‹—æœºå™¨è¿›ç¨‹æ¢å¤æ‰§è¡Œï¼Œå°†\u0026quot;hot dog\u0026quot;æ”¾åœ¨outé€šé“ä¸Šã€‚\nç­‰ä¸€ä¸‹â€¦â€¦è¿™ä¸å¯¹ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œæ˜¯çš„ï¼Œå…è´¹çš„çƒ­ç‹—ï¼Œä½†æ˜¯ä¸€å®šä¼šæœ‰äººå› ä¸ºæœºå™¨æ¥å—å°æ£‰çµ®ä½œä¸ºä»˜æ¬¾è€Œä¸é«˜å…´ã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿™å°æœºå™¨åœ¨å…³é—­å‰åªèƒ½å‘æ”¾ä¸€ä¸ªçƒ­ç‹—ã€‚è®©æˆ‘ä»¬æ”¹å˜çƒ­ç‹—æœºçš„åŠŸèƒ½ï¼Œè®©ä½ å¯ä»¥æŒ‡å®šå®ƒæœ‰å¤šå°‘ä¸ªçƒ­ç‹—ï¼Œå¹¶ä¸”å½“ä½ ç»™å®ƒæ•°å­— 3 æ—¶ï¼Œå®ƒæ‰ä¼šå‘æ”¾ä¸€ä¸ªçƒ­ç‹—ã€‚\n(defn hot-dog-machine-v2 [hot-dog-count] (let [in (chan) out (chan)] (go (loop [hc hot-dog-count] (if (\u0026gt; hc 0) (let [input (\u0026lt;! in)] âŠ(if (= 3 input) (do (\u0026gt;! out \u0026#34;hot dog\u0026#34;) (recur (dec hc))) (do (\u0026gt;! out \u0026#34;wilted lettuce\u0026#34;) (recur hc)))) â‹(do (close! in) (close! out))))) [in out])) è¿™é‡Œæœ‰å¾ˆå¤šä»£ç ï¼Œä½†ç­–ç•¥æ˜¯ç›´æ¥çš„ã€‚æ–°å‡½æ•°hot-dog-machine-v2å…è®¸ä½ æŒ‡å®šhot-dog-countã€‚åœ¨âŠçš„ go å—å†…ï¼Œåªæœ‰å½“æ•°å­— 3ï¼ˆæ„æ€æ˜¯ä¸‰å—é’±ï¼‰è¢«æ”¾åœ¨`in\u0026rsquo;é€šé“ä¸Šæ—¶ï¼Œå®ƒæ‰ä¼šæ´¾å‘çƒ­ç‹—ï¼›å¦åˆ™ï¼Œå®ƒæ´¾å‘æ¯èçš„ç”Ÿèœï¼Œè¿™ç»å¯¹ä¸æ˜¯çƒ­ç‹—ã€‚ä¸€æ—¦ä¸€ä¸ªè¿›ç¨‹é‡‡å–äº†è¾“å‡ºï¼Œçƒ­ç‹—æœºè¿›ç¨‹å°±ä¼šå¸¦ç€æ›´æ–°çš„çƒ­ç‹—æ•°é‡å¾ªç¯å›æ¥ï¼Œå¹¶å‡†å¤‡å†æ¬¡æ¥æ”¶é’±ã€‚\nå½“æœºå™¨è¿›ç¨‹çš„çƒ­ç‹—ç”¨å®Œæ—¶ï¼Œè¯¥è¿›ç¨‹å°±ä¼šåœ¨â‹å¤„å…³é—­é€šé“ã€‚å½“ä½ å…³é—­ä¸€ä¸ªé€šé“æ—¶ï¼Œä½ å°±ä¸èƒ½å†å¯¹å®ƒæ‰§è¡Œ putï¼Œè€Œä¸”ä¸€æ—¦ä½ ä»ä¸€ä¸ªå…³é—­çš„é€šé“ä¸Šå–èµ°æ‰€æœ‰çš„å€¼ï¼Œä»»ä½•åç»­çš„å–å€¼éƒ½å°†è¿”å› \u0026ldquo;nil\u0026rdquo;ã€‚\nè®©æˆ‘ä»¬æ¥è¯•è¯•æ¸…å• 11-1 ä¸­çš„å‡çº§ç‰ˆçƒ­ç‹—æœºï¼ŒæŠŠé’±å’Œå£è¢‹é‡Œçš„æ£‰çµ®æ”¾è¿›å»ã€‚\n(let [[in out] (hot-dog-machine-v2 2)] (\u0026gt;!! in \u0026#34;pocket lint\u0026#34;) (println (\u0026lt;!! out)) (\u0026gt;!! in 3) (println (\u0026lt;!! out)) (\u0026gt;!! in 3) (println (\u0026lt;!! out)) (\u0026gt;!! in 3) (\u0026lt;!! out)) ; =\u0026gt; wilted lettuce ; =\u0026gt; hotdog ; =\u0026gt; hotdog ; =\u0026gt; nil  æ¸…å• 11-1. ä¸ä¸€ä¸ªå¥å£®çš„çƒ­ç‹—å”®è´§æœºè¿›ç¨‹äº¤äº’  é¦–å…ˆï¼Œæˆ‘ä»¬å°è¯•äº† \u0026ldquo;å£è¢‹é‡Œçš„æ£‰çµ® \u0026ldquo;è¿™ä¸€æ‹›ï¼Œå¾—åˆ°äº†æ‰“è”«çš„ç”Ÿèœã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸¤æ¬¡æŠ•å…¥ 3 ç¾å…ƒï¼Œä¸¤æ¬¡éƒ½å¾—åˆ°ä¸€ä¸ªçƒ­ç‹—ã€‚ç„¶åï¼Œæˆ‘ä»¬è¯•å›¾å†æŠ•å…¥ 3 ç¾å…ƒï¼Œä½†è¿™è¢«å¿½ç•¥äº†ï¼Œå› ä¸ºé€šé“å·²ç»å…³é—­ï¼›æ•°å­— 3 æ²¡æœ‰è¢«æ”¾åœ¨é€šé“ä¸Šã€‚å½“æˆ‘ä»¬è¯•å›¾ä» \u0026ldquo;å‡º \u0026ldquo;é€šé“å–é’±æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°çš„æ˜¯ \u0026ldquo;é›¶\u0026rdquo;ï¼Œè¿™ä¹Ÿæ˜¯å› ä¸ºè¯¥é€šé“æ˜¯å…³é—­çš„ã€‚ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°hot-dog-machine-v2çš„å‡ ä¸ªæœ‰è¶£çš„ç»†èŠ‚ã€‚é¦–å…ˆï¼Œå®ƒåœ¨åŒä¸€ä¸ª go å—ä¸­åšäº†ä¸€ä¸ª put å’Œä¸€ä¸ª takeã€‚è¿™å¹¶ä¸ç½•è§ï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºè¿›ç¨‹ç®¡é“çš„ä¸€ç§æ–¹æ³•ï¼šåªè¦è®©ä¸€ä¸ªè¿›ç¨‹çš„å…¥é€šé“æˆä¸ºå¦ä¸€ä¸ªè¿›ç¨‹çš„å‡º*é€šé“ã€‚ä¸‹é¢çš„ä¾‹å­å°±æ˜¯è¿™æ ·åšçš„ï¼ŒæŠŠä¸€ä¸ªå­—ç¬¦ä¸²é€šè¿‡ä¸€ç³»åˆ—çš„è¿›ç¨‹è¿›è¡Œè½¬æ¢ï¼Œç›´åˆ°æœ€åä¸€ä¸ªè¿›ç¨‹æ‰“å°å‡ºè¿™ä¸ªå­—ç¬¦ä¸²ã€‚\n(let [c1 (chan) c2 (chan) c3 (chan)] (go (\u0026gt;! c2 (clojure.string/upper-case (\u0026lt;! c1)))) (go (\u0026gt;! c3 (clojure.string/reverse (\u0026lt;! c2)))) (go (println (\u0026lt;! c3))) (\u0026gt;!! c1 \u0026#34;redrum\u0026#34;)) ; =\u0026gt; MURDER åœ¨æœ¬ç« çš„æœ€åï¼Œæˆ‘å°†ä¼šæœ‰æ›´å¤šå…³äºè¿›ç¨‹ç®¡é“ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥ä»£æ›¿å›è°ƒçš„å†…å®¹ã€‚\nå›åˆ°æ¸…å• 11-1! å¦ä¸€ä»¶éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œçƒ­ç‹—æœºåœ¨ä½ å¤„ç†å®Œå®ƒæ‰€å‘æ”¾çš„ä¸œè¥¿ä¹‹å‰ï¼Œä¸ä¼šæ¥å—æ›´å¤šçš„é’±ã€‚è¿™å…è®¸ä½ å»ºç«‹ç±»ä¼¼äºçŠ¶æ€æœºçš„è¡Œä¸ºæ¨¡å‹ï¼Œå…¶ä¸­é€šé“æ“ä½œçš„å®Œæˆä¼šè§¦å‘çŠ¶æ€è½¬æ¢ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¤ä¸ºè‡ªåŠ¨å”®è´§æœºæœ‰ä¸¤ä¸ªçŠ¶æ€ã€‚å‡†å¤‡æ¥æ”¶é’±å’Œå‘æ”¾ç‰©å“*ã€‚æ’å…¥é’±å’Œå–èµ°ç‰©å“ä¼šè§¦å‘è¿™ä¸¤è€…ä¹‹é—´çš„è½¬æ¢ã€‚\nalts core.async å‡½æ•°alts!!å¯ä»¥è®©ä½ ä½¿ç”¨ä¸€ä¸ªæ“ä½œé›†åˆä¸­ç¬¬ä¸€ä¸ªæˆåŠŸçš„é€šé“æ“ä½œçš„ç»“æœã€‚æˆ‘ä»¬åœ¨ç¬¬ 198 é¡µçš„ \u0026ldquo;å»¶è¿Ÿ \u0026ldquo;ä¸­ç”¨å»¶è¿Ÿå’Œ Future åšäº†ç±»ä¼¼çš„äº‹æƒ…ã€‚åœ¨é‚£ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠä¸€ç»„å¤´åƒä¸Šä¼ åˆ°ä¸€ä¸ªå¤´åƒåˆ†äº«ç½‘ç«™ï¼Œå¹¶åœ¨ç¬¬ä¸€å¼ ç…§ç‰‡ä¸Šä¼ æ—¶é€šçŸ¥å¤´åƒæ‰€æœ‰è€…ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ç”¨alts!!åšåŒæ ·çš„äº‹æƒ…ã€‚\n(defn upload [headshot c] (go (Thread/sleep (rand 100)) (\u0026gt;! c headshot))) âŠ (let [c1 (chan) c2 (chan) c3 (chan)] (upload \u0026#34;serious.jpg\u0026#34; c1) (upload \u0026#34;fun.jpg\u0026#34; c2) (upload \u0026#34;sassy.jpg\u0026#34; c3) â‹ (let [[headshot channel] (alts!! [c1 c2 c3])] (println \u0026#34;Sending headshot notification for\u0026#34; headshot))) ; =\u0026gt; Sending headshot notification for sassy.jpg åœ¨è¿™é‡Œï¼Œuploadå‡½æ•°æ¥æ”¶ä¸€ä¸ªå¤´åƒå’Œä¸€ä¸ªé¢‘é“ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹å°†éšæœºç¡çœ ä¸€æ®µæ—¶é—´ï¼ˆæ¨¡æ‹Ÿä¸Šä¼ ï¼‰ï¼Œç„¶åå°†å¤´åƒæ”¾åˆ°é¢‘é“ä¸Šã€‚ä»âŠå¼€å§‹çš„letç»‘å®šå’Œuploadå‡½æ•°è°ƒç”¨åº”è¯¥æ˜¯æœ‰æ„ä¹‰çš„ï¼šæˆ‘ä»¬åˆ›å»ºäº†ä¸‰ä¸ªé€šé“ï¼Œç„¶åç”¨å®ƒä»¬æ¥æ‰§è¡Œä¸Šä¼ ã€‚\näº‹æƒ…åœ¨â‹å¤„å˜å¾—æœ‰è¶£ã€‚alts!!å‡½æ•°éœ€è¦ä¸€ä¸ªé€šé“çš„ Vector ä½œä¸ºå…¶å‚æ•°ã€‚è¿™å°±å¥½æ¯”è¯´ï¼Œ\u0026ldquo;è¯•ç€åœ¨è¿™äº›é€šé“ä¸ŠåŒæ—¶åšä¸€ä¸ªé˜»å¡æ€§çš„æ‹æ‘„ã€‚ä¸€æ—¦å–å€¼æˆåŠŸï¼Œè¿”å›ä¸€ä¸ª Vectorï¼Œå…¶ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å–å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯è·èƒœçš„é€šé“\u0026rdquo;ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸sassy.jpgç›¸å…³çš„é€šé“é¦–å…ˆæ”¶åˆ°äº†ä¸€ä¸ªå€¼ã€‚å¦‚æœä½ æƒ³è·å–å®ƒä»¬çš„å€¼å¹¶å¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ï¼Œå…¶ä»–é€šé“ä»ç„¶å¯ç”¨ã€‚alts!!æ‰€åšçš„åªæ˜¯ä»ç¬¬ä¸€ä¸ªæœ‰å€¼çš„é€šé“ä¸­è·å–ä¸€ä¸ªå€¼ï¼›å®ƒå¹¶ä¸è§¦åŠå…¶ä»–é€šé“ã€‚\nalts!!çš„ä¸€ä¸ªå¾ˆé…·çš„æ–¹é¢æ˜¯ï¼Œä½ å¯ä»¥ç»™å®ƒä¸€ä¸ªtimeout é€šé“ï¼Œå®ƒç­‰å¾…æŒ‡å®šçš„æ¯«ç§’æ•°ï¼Œç„¶åå…³é—­ã€‚è¿™æ˜¯ä¸€ä¸ªä¼˜é›…çš„æœºåˆ¶ï¼Œå¯ä»¥ä¸ºå¹¶å‘æ“ä½œè®¾ç½®ä¸€ä¸ªæ—¶é—´é™åˆ¶ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åœ¨ä¸Šä¼ æœåŠ¡ä¸­ä½¿ç”¨å®ƒã€‚\n(let [c1 (chan)] (upload \u0026#34;serious.jpg\u0026#34; c1) (let [[headshot channel] (alts!! [c1 (timeout 20)])] (if headshot (println \u0026#34;Sending headshot notification for\u0026#34; headshot) (println \u0026#34;Timed out!\u0026#34;)))) ; =\u0026gt; Timed out! åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†è¶…æ—¶è®¾ç½®ä¸º 20 æ¯«ç§’ã€‚å› ä¸ºä¸Šä¼ æ²¡æœ‰åœ¨è¿™ä¸ªæ—¶é—´æ®µå®Œæˆï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªè¶…æ—¶æ¶ˆæ¯ã€‚\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨alts!!æ¥æŒ‡å®š put æ“ä½œã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåœ¨ä½ ä¼ é€’ç»™alts!!çš„ Vector å†…æ”¾ç½®ä¸€ä¸ª Vectorï¼Œå°±åƒæœ¬ä¾‹ä¸­çš„âŠã€‚\n(let [c1 (chan) c2 (chan)] (go (\u0026lt;! c2)) âŠ (let [[value channel] (alts!! [c1 [c2 \u0026#34;put!\u0026#34;]])] (println value) (= channel c2))) ; =\u0026gt; true ; =\u0026gt; true è¿™é‡Œä½ åˆ›å»ºäº†ä¸¤ä¸ªé€šé“ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªè¿›ç¨‹ï¼Œç­‰å¾…å¯¹c2è¿›è¡Œå¤„ç†ã€‚ä½ æä¾›ç»™alts!!çš„ Vector å‘Šè¯‰å®ƒï¼Œ\u0026ldquo;å°è¯•å¯¹c1'è¿›è¡Œå–èˆï¼Œå¹¶å°è¯•å°†\u0026ldquo;put!\u0026quot;æ”¾åœ¨c2\u0026rsquo;ä¸Šã€‚å¦‚æœåœ¨c1ä¸Šçš„å–å€¼é¦–å…ˆå®Œæˆï¼Œè¿”å›å…¶å€¼å’Œé€šé“ã€‚å¦‚æœåœ¨c2ä¸Šçš„æŠ•æ”¾å…ˆå®Œæˆï¼Œå¦‚æœæŠ•æ”¾æˆåŠŸï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚\u0026rdquo; æœ€åï¼Œvalueçš„ç»“æœï¼ˆæ˜¯trueï¼Œå› ä¸ºc2çš„é€šé“æ˜¯å¼€æ”¾çš„ï¼‰æ‰“å°å‡ºæ¥ï¼Œæ˜¾ç¤ºè¿”å›çš„é€šé“ç¡®å®æ˜¯c2ã€‚\nåƒ\u0026lt;!!å’Œ\u0026gt;!!ä¸€æ ·ï¼Œalts!!æœ‰ä¸€ä¸ªåœè½¦çš„é€‰æ‹©ï¼Œalts!ï¼Œä½ å¯ä»¥åœ¨ go å—ä¸­ä½¿ç”¨å®ƒã€‚Â alts!æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ï¼Œå¯ä»¥å¯¹ä¸€ç»„é€šé“ä¸­çš„å“ªä¸€ä¸ªè¿›è¡ŒæŠ•å…¥æˆ–å–å‡ºçš„é€‰æ‹©ã€‚å®ƒä»ç„¶æ‰§è¡Œæ”¾å’Œå–ï¼Œæ‰€ä»¥ä½¿ç”¨åœæ”¾æˆ–é˜»å¡å˜é‡çš„ç†ç”±åŒæ ·é€‚ç”¨ã€‚\nè¿™å°±æ¶µç›–äº† core.async çš„åŸºç¡€çŸ¥è¯†! æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†è§£é‡Šäº†åè°ƒè¿›ç¨‹çš„ä¸¤ç§å¸¸è§æ¨¡å¼ã€‚\né˜Ÿåˆ— åœ¨ç¬¬ 202 é¡µçš„ \u0026ldquo;æ»šåŠ¨ä½ è‡ªå·±çš„é˜Ÿåˆ— \u0026ldquo;ä¸­ï¼Œä½ å†™äº†ä¸€ä¸ªå®ï¼Œè®©ä½ å¯¹ Future è¿›è¡Œæ’é˜Ÿã€‚è¿›ç¨‹è®©ä½ ä»¥ä¸€ç§æ›´ç›´æ¥çš„æ–¹å¼ä½¿ç”¨ç±»ä¼¼çš„æŠ€æœ¯ã€‚å‡è®¾ä½ æƒ³ä»ä¸€ä¸ªç½‘ç«™ä¸Šè·å¾—ä¸€å †éšæœºçš„æŠ¥ä»·ï¼Œå¹¶æŠŠå®ƒä»¬å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ä½ æƒ³ç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ªæŠ¥ä»·è¢«å†™å…¥æ–‡ä»¶ï¼Œè¿™æ ·æ–‡æœ¬å°±ä¸ä¼šè¢«äº¤é”™ï¼Œæ‰€ä»¥ä½ æŠŠä½ çš„æŠ¥ä»·æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€‚ä¸‹é¢æ˜¯å®Œæ•´çš„ä»£ç ã€‚\n(defn append-to-file \u0026#34;Write a string to the end of a file\u0026#34; [filename s] (spit filename s :append true)) (defn format-quote \u0026#34;Delineate the beginning and end of a quote because it\u0026#39;s convenient\u0026#34; [quote] (str \u0026#34;=== BEGIN QUOTE ===\\n\u0026#34; quote \u0026#34;=== END QUOTE ===\\n\\n\u0026#34;)) (defn random-quote \u0026#34;Retrieve a random quote and format it\u0026#34; [] (format-quote (slurp \u0026#34;http://www.braveclojure.com/random-quote\u0026#34;))) (defn snag-quotes [filename num-quotes] (let [c (chan)] (go (while true (append-to-file filename (\u0026lt;! c)))) (dotimes [n num-quotes] (go (\u0026gt;! c (random-quote)))))) å‡½æ•°append-to-fileã€format-quoteå’Œrandom-quoteæœ‰æ–‡æ¡£è¯´æ˜å®ƒä»¬çš„ä½œç”¨ã€‚snag-quotesæ˜¯å‘ç”Ÿæœ‰è¶£å·¥ä½œçš„åœ°æ–¹ã€‚é¦–å…ˆï¼Œå®ƒåˆ›å»ºä¸€ä¸ªé€šé“ï¼Œåœ¨äº§ç”ŸæŠ¥ä»·çš„è¿›ç¨‹å’Œæ¶ˆè´¹æŠ¥ä»·çš„è¿›ç¨‹ä¹‹é—´å…±äº«ã€‚ç„¶åï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªä½¿ç”¨ \u0026ldquo;while true \u0026ldquo;æ¥åˆ›å»ºä¸€ä¸ªæ— é™å¾ªç¯çš„è¿›ç¨‹ã€‚åœ¨å¾ªç¯çš„æ¯ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œå®ƒç­‰å¾…ä¸€ä¸ªæŠ¥ä»·åˆ°è¾¾cï¼Œç„¶åå°†å…¶è¿½åŠ åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚æœ€åï¼Œsnag-quotesåˆ›å»ºä¸€ä¸ªnum-quotesæ•°é‡çš„è¿›ç¨‹æ¥è·å–ä¸€ä¸ªå¼•å·ï¼Œç„¶åæŠŠå®ƒæ”¾åœ¨cä¸Šã€‚å¦‚æœä½ æ±‚å€¼(snag-quotes \u0026quot;quotes\u0026quot; 2)å¹¶æ£€æŸ¥ä½ å¯åŠ¨ REPL çš„ç›®å½•ä¸­çš„quotesæ–‡ä»¶ï¼Œå®ƒåº”è¯¥æœ‰ä¸¤ä¸ªå¼•å·ã€‚\n=== BEGIN QUOTE === Nobody\u0026#39;s gonna believe that computers are intelligent until they start coming in late and lying about it. === END QUOTE === === BEGIN QUOTE === Give your child mental blocks for Christmas. === END QUOTE === è¿™ç§æ’é˜Ÿæ–¹å¼ä¸ç¬¬ 9 ç« ä¸­çš„ä¾‹å­ä¸åŒã€‚åœ¨é‚£ä¸ªä¾‹å­ä¸­ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æ˜¯æŒ‰ç…§å…¶åˆ›å»ºçš„é¡ºåºæ¥å¤„ç†çš„ã€‚åœ¨è¿™é‡Œï¼Œæ¯ä¸ªè·å–æŠ¥ä»·çš„ä»»åŠ¡æ˜¯æŒ‰ç…§å®ƒå®Œæˆçš„é¡ºåºæ¥å¤„ç†çš„ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ éƒ½è¦ç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ªæŠ¥ä»·è¢«å†™å…¥æ–‡ä»¶ã€‚\nç”¨è¿›ç¨‹ç®¡é“é€ƒç¦»å›è°ƒåœ°ç‹± åœ¨æ²¡æœ‰é€šé“çš„è¯­è¨€ä¸­ï¼Œä½ éœ€è¦ç”¨ \u0026ldquo;å›è°ƒ \u0026ldquo;æ¥è¡¨è¾¾ \u0026ldquo;å½“xå‘ç”Ÿæ—¶ï¼Œåšy\u0026ldquo;çš„æƒ³æ³•ã€‚åœ¨åƒ JavaScript è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå›è°ƒæ˜¯ä¸€ç§å®šä¹‰ä»£ç çš„æ–¹å¼ï¼Œä¸€æ—¦å…¶ä»–ä»£ç å®Œæˆå°±ä¼šå¼‚æ­¥æ‰§è¡Œã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JavaScriptï¼Œä½ å¯èƒ½å·²ç»èŠ±äº†ä¸€äº›æ—¶é—´åœ¨å›è°ƒåœ°ç‹±ä¸­æ²‰æººã€‚\nå®ƒè¢«ç§°ä¸ºå›è°ƒåœ°ç‹±çš„åŸå› æ˜¯ï¼Œåœ¨å›è°ƒå±‚ä¹‹é—´å¾ˆå®¹æ˜“äº§ç”Ÿä¸æ˜æ˜¾çš„ä¾èµ–å…³ç³»ã€‚å®ƒä»¬æœ€ç»ˆä¼šå…±äº«çŠ¶æ€ï¼Œä½¿å¾—åœ¨å›è°ƒè¢«è§¦å‘æ—¶å¾ˆéš¾æ¨ç†æ•´ä¸ªç³»ç»Ÿçš„çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæµç¨‹ç®¡é“æ¥é¿å…è¿™ç§ä»¤äººæ²®ä¸§çš„ç»“æœã€‚è¿™æ ·ä¸€æ¥ï¼Œæ¯ä¸ªé€»è¾‘å•å…ƒéƒ½ç”Ÿæ´»åœ¨è‡ªå·±ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼Œé€»è¾‘å•å…ƒä¹‹é—´çš„æ‰€æœ‰é€šä¿¡éƒ½é€šè¿‡æ˜ç¡®å®šä¹‰çš„è¾“å…¥å’Œè¾“å‡ºé€šé“è¿›è¡Œã€‚\nåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸‰ä¸ªé€šè¿‡é€šé“è¿æ¥çš„æ— é™å¾ªç¯è¿›ç¨‹ï¼Œå°†ä¸€ä¸ªè¿›ç¨‹çš„è¾“å‡ºé€šé“ä½œä¸ºç®¡é“ä¸­ä¸‹ä¸€ä¸ªè¿›ç¨‹çš„è¾“å…¥é€šé“ã€‚\n(defn upper-caser [inï¼½ (let [out (chan)] (è®© [out (chan)]) (go (while true (\u0026gt;! out (clojure.string/upper-case (\u0026lt;! in)))))) out)) (defn reverser [inï¼½ (let [out (chan)] (go (while true (\u0026gt;! (go (while true (\u0026gt;! out (clojure.string/reverse (\u0026lt;! in)))))) out)) (defn printer [inï¼½ (go (while true (println (\u0026lt;! in)))))) (def in-chan (chan)) (def upper-caser-out (upper-caser in-chan)) (def reverser-out (reverser upper-caser-out)) (Printer reverser-out) (\u0026gt;ï¼ï¼in-chan \u0026#34;redrum\u0026#34;) ; =\u0026gt; MURDER (\u0026gt;!! in-chan \u0026#34;repaid\u0026#34;) ; =\u0026gt; DIAPER é€šè¿‡ä½¿ç”¨è¿™æ ·çš„æµç¨‹å¤„ç†äº‹ä»¶ï¼Œæ¨ç†æ•´ä¸ªæ•°æ®è½¬æ¢ç³»ç»Ÿçš„å„ä¸ªæ­¥éª¤å°±æ›´å®¹æ˜“äº†ã€‚ä½ å¯ä»¥æŸ¥çœ‹æ¯ä¸ªæ­¥éª¤å¹¶ç†è§£å®ƒçš„ä½œç”¨ï¼Œè€Œä¸å¿…å‚è€ƒä¹‹å‰å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…æˆ–ä¹‹åå¯èƒ½å‘ç”Ÿçš„äº‹æƒ…ï¼›æ¯ä¸ªè¿‡ç¨‹å°±åƒä¸€ä¸ªçº¯å‡½æ•°ä¸€æ ·å®¹æ˜“æ¨ç†ã€‚\né¢å¤–èµ„æº Clojure çš„ core.async åº“åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå—åˆ° Go çš„å¹¶å‘æ¨¡å‹çš„å¯å‘ï¼Œå®ƒæ˜¯åŸºäº Tony Hoare åœ¨Communicating Sequential Processesä¸­çš„å·¥ä½œï¼Œå¯åœ¨*http://www.usingcsp.com/ã€‚*\nGo çš„å…±åŒåˆ›é€ è€… Rob Pike æœ‰ä¸€ä¸ªå¾ˆå¥½çš„å…³äºå¹¶å‘çš„æ¼”è®²ï¼Œå¯åœ¨*Google I/O 2012 - Go å¹¶å‘æ¨¡å¼ - YouTube*ã€‚\nClojureScriptï¼Œä¹Ÿè¢«ç§°ä¸ºæµè§ˆå™¨çš„æœ€ä½³é€‰æ‹©ï¼Œä½¿ç”¨ core.asyncã€‚ä¸å†æœ‰å›è°ƒçš„åœ°ç‹±! ä½ å¯ä»¥åœ¨*https://github.com/clojure/clojurescript*äº†è§£ ClojureScript çš„æƒ…å†µã€‚\næœ€åï¼Œåœ¨*clojure.core.async - core.async 1.2.599-SNAPSHOT API documentation*æŸ¥çœ‹ API æ–‡æ¡£ã€‚\næ€»ç»“ åœ¨æœ¬ç« ä¸­ï¼Œä½ äº†è§£äº† core.async å¦‚ä½•å…è®¸ä½ åˆ›å»ºå¹¶å‘è¿›ç¨‹ï¼Œä»¥å“åº”é€šé“ä¸Šçš„ put å’Œ take é€šä¿¡äº‹ä»¶ã€‚ä½ äº†è§£äº†å¦‚ä½•ä½¿ç”¨goå’Œthreadæ¥åˆ›å»ºå¹¶å‘è¿›ç¨‹ï¼Œé€šè¿‡åœæ”¾å’Œé˜»å¡æ¥ç­‰å¾…é€šä¿¡äº‹ä»¶ã€‚ä½ è¿˜å­¦ä¹ äº†å¦‚ä½•é€šè¿‡ä½¿ä¸€ä¸ªè¿›ç¨‹çš„å‡ºé€šé“æˆä¸ºå¦ä¸€ä¸ªè¿›ç¨‹çš„å…¥é€šé“æ¥åˆ›å»ºè¿›ç¨‹ç®¡é“ï¼Œä»¥åŠè¿™å¦‚ä½•ä½¿ä½ å†™çš„ä»£ç æ¯”åµŒå¥—å›è°ƒæ›´å®¹æ˜“ç†è§£ã€‚æœ€åï¼Œä½ æ€è€ƒäº†ä½ æ˜¯å¦åªæ˜¯ä¸€å°èŠ±å“¨çš„çƒ­ç‹—å”®è´§æœºã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/chapter11/","summary":"ç”¨ core.async æŒæ¡å¹¶å‘è¿›ç¨‹ æœ‰ä¸€å¤©ï¼Œå½“ä½ èµ°åœ¨å¤§è¡—ä¸Šæ—¶ï¼Œä½ ä¼šæƒŠè®¶ã€å¥½å¥‡ï¼Œå¹¶æœ‰ç‚¹åŒæ¶åœ°å‘ç°ä¸€å°çƒ­ç‹—è‡ªåŠ¨è´©å–æœºã€‚ä½ çš„å¤´çš®è¢«æœ‰ç½ªçš„å¥½å¥‡å¿ƒåˆºç—›ï¼Œä½ ä¼šå¿ä¸ä½æå‡ºä¸‰å—é’±ï¼Œçœ‹çœ‹è¿™ä¸ªè£…ç½®æ˜¯å¦çœŸçš„èƒ½å·¥ä½œã€‚åœ¨ \u0026ldquo;å’”åš“ \u0026ldquo;ä¸€å£°æ¥å—äº†ä½ çš„é’±åï¼Œå®ƒå¼¹å‡ºäº†ä¸€ä¸ªæ–°é²œçš„çƒ­ç‹—ï¼ŒåŒ…æ‹¬é¢åŒ…å’Œæ‰€æœ‰çš„ä¸œè¥¿ã€‚\nè‡ªåŠ¨å”®è´§æœºè¡¨ç°å‡ºç®€å•çš„è¡Œä¸ºï¼šå½“å®ƒæ”¶åˆ°é’±æ—¶ï¼Œå®ƒä¼šæ”¾å‡ºä¸€ä¸ªçƒ­ç‹—ï¼Œç„¶åä¸ºä¸‹ä¸€æ¬¡è´­ä¹°åšå‡†å¤‡ã€‚å½“å®ƒçš„çƒ­ç‹—ç”¨å®Œæ—¶ï¼Œå®ƒå°±ä¼šåœæ­¢ã€‚æˆ‘ä»¬å‘¨å›´çš„çƒ­ç‹—è‡ªåŠ¨å”®è´§æœºä»¥ä¸åŒçš„é¢è²Œå‡ºç°ï¼Œå®ƒä»¬æ˜¯ç‹¬ç«‹çš„å®ä½“ï¼ŒåŒæ—¶å¯¹ä¸–ç•Œä¸Šçš„äº‹ä»¶ä½œå‡ºååº”ã€‚ä½ æœ€å–œæ¬¢çš„å’–å•¡åº—çš„æµ“ç¼©å’–å•¡æœºï¼Œä½ å°æ—¶å€™å–œæ¬¢çš„å® ç‰©ä»“é¼ \u0026ndash;æ‰€æœ‰çš„ä¸œè¥¿éƒ½å¯ä»¥è¢«åˆ†è§£æˆä¸€ç»„è¡Œä¸ºï¼Œè¿™äº›è¡Œä¸ºéµå¾ªä¸€èˆ¬çš„å½¢å¼ \u0026ldquo;å½“xå‘ç”Ÿæ—¶ï¼Œåšy\u0026quot;ã€‚ç”šè‡³æˆ‘ä»¬å†™çš„ç¨‹åºä¹Ÿåªæ˜¯ç¾åŒ–çš„çƒ­ç‹—è´©å–æœºï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œç­‰å¾…ç€ä¸‹ä¸€ä¸ªäº‹ä»¶çš„å‘ç”Ÿï¼Œæ— è®ºæ˜¯å‡»é”®ã€è¶…æ—¶ï¼Œè¿˜æ˜¯å¥—æ¥å­—ä¸Šçš„æ•°æ®åˆ°è¾¾ã€‚\nClojure çš„ core.async åº“å…è®¸ä½ åœ¨ä¸€ä¸ªç¨‹åºä¸­åˆ›å»ºå¤šä¸ªç‹¬ç«‹è¿›ç¨‹ã€‚Â æœ¬ç« æè¿°äº†æ€è€ƒè¿™ç§ç¼–ç¨‹é£æ ¼çš„æœ‰ç”¨æ¨¡å‹ï¼Œä»¥åŠä½ åœ¨å®é™…ç¼–å†™ä»£ç æ—¶éœ€è¦äº†è§£çš„å®é™…ç»†èŠ‚ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨é€šé“åœ¨ç”± go å—å’Œthreadåˆ›å»ºçš„ç‹¬ç«‹è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼›äº†è§£ä¸€äº›å…³äº Clojure å¦‚ä½•é€šè¿‡åœæ”¾å’Œé˜»å¡æœ‰æ•ˆåœ°ç®¡ç†çº¿ç¨‹ï¼›å¦‚ä½•ä½¿ç”¨alts!!ï¼›ä»¥åŠä¸€ç§æ›´ç›´æ¥çš„åˆ›å»ºé˜Ÿåˆ—çš„æ–¹æ³•ã€‚æœ€åï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ç”¨è¿›ç¨‹ç®¡é“æ¥è¸¢å›è°ƒçš„å±è‚¡ã€‚\nè¿›ç¨‹çš„å…¥é—¨ core.async çš„æ ¸å¿ƒæ˜¯*è¿›ç¨‹ï¼Œä¸€ä¸ªå¹¶å‘è¿è¡Œçš„é€»è¾‘å•å…ƒï¼Œå¯¹äº‹ä»¶åšå‡ºååº”ã€‚è¿›ç¨‹å¯¹åº”äºæˆ‘ä»¬å¯¹ç°å®ä¸–ç•Œçš„å¿ƒç†æ¨¡å‹ï¼šå®ä½“ä¹‹é—´çš„äº’åŠ¨å’Œå“åº”æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰æŸç§ä¸­å¤®æ§åˆ¶æœºåˆ¶çš„ç‰µåˆ¶ã€‚ä½ æŠŠé’±æ”¾è¿›æœºå™¨é‡Œï¼Œå°±ä¼šæœ‰ä¸€ä¸ªçƒ­ç‹—å‡ºæ¥ï¼Œæ‰€æœ‰è¿™äº›éƒ½ä¸éœ€è¦å…‰ç…§æ´¾æˆ–è€å¤§å“¥æ¥ç­–åˆ’æ•´ä¸ªäº‹æƒ…ã€‚è¿™ä¸ä½ è¿„ä»Šä¸ºæ­¢ä¸€ç›´åœ¨æ¢ç´¢çš„å¹¶å‘æ€§è§‚ç‚¹ä¸åŒï¼Œåœ¨é‚£é‡Œï¼Œä½ å®šä¹‰çš„ä»»åŠ¡è¦ä¹ˆåªæ˜¯æ§åˆ¶ä¸»çº¿ç¨‹çš„æ‰©å±•ï¼ˆä¾‹å¦‚ï¼Œç”¨pmapå®ç°æ•°æ®å¹¶è¡Œï¼‰ï¼Œè¦ä¹ˆæ˜¯ä½ æ²¡æœ‰å…´è¶£ä¸ä¹‹äº¤æµçš„ä»»åŠ¡ï¼ˆå¦‚ç”¨futureåˆ›å»ºçš„ä¸€æ¬¡æ€§ä»»åŠ¡ï¼‰ã€‚\næŠŠè‡ªåŠ¨å”®è´§æœºçœ‹æˆæ˜¯ä¸€ä¸ªè¿›ç¨‹å¯èƒ½å¾ˆå¥‡æ€ªï¼šè‡ªåŠ¨å”®è´§æœºæ˜¯åè¯å’Œäº‹ç‰©ï¼Œè€Œè¿›ç¨‹æ˜¯åŠ¨è¯å’Œè¡Œä¸ºã€‚ä¸ºäº†è·å¾—æ­£ç¡®çš„æ€ç»´æ–¹å¼ï¼Œå¯ä»¥å°è¯•å°†ç°å®ä¸–ç•Œçš„ç‰©ä½“å®šä¹‰ä¸ºå…¶äº‹ä»¶é©±åŠ¨çš„è¡Œä¸ºçš„æ€»å’Œã€‚å½“ä¸€ç²’ç§å­è¢«æµ‡æ°´æ—¶ï¼Œå®ƒå°±ä¼šå‘èŠ½ï¼›å½“æ¯äº²çœ‹ç€å¥¹çš„æ–°ç”Ÿå„¿æ—¶ï¼Œå¥¹å°±ä¼šæ„Ÿå—åˆ°çˆ±ï¼›è€Œå½“ä½ è§‚çœ‹ã€Šæ˜Ÿæˆ˜ã€‹ç¬¬ä¸€é›†æ—¶ï¼Œä½ ä¼šå……æ»¡æ„¤æ€’å’Œç»æœ›ã€‚å¦‚æœä½ æƒ³å˜å¾—è¶…çº§å“²å­¦ï¼Œå¯ä»¥è€ƒè™‘æ˜¯å¦æœ‰å¯èƒ½å°†æ¯ä¸ªäº‹ç‰©çš„æœ¬è´¨å®šä¹‰ä¸ºå®ƒæ‰€è¯†åˆ«çš„äº‹ä»¶çš„é›†åˆï¼Œä»¥åŠå®ƒå¦‚ä½•åšå‡ºååº”ã€‚ç°å®æ˜¯å¦åªæ˜¯çƒ­ç‹—å”®å–æœºçš„ç»„æˆï¼Ÿ\næ€»ä¹‹ï¼Œæˆ‘è¯´å¾—å¤Ÿå¤šäº†! è®©æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€äº›ç®€å•çš„è¿‡ç¨‹ï¼Œä»ç†è®ºä¸Šèµ°å‘å…·ä½“ã€‚é¦–å…ˆï¼Œç”¨ \u0026ldquo;lein new app playsync \u0026ldquo;åˆ›å»ºä¸€ä¸ªæ–°çš„ Leiningen é¡¹ç›®ï¼Œåä¸ºplaysyncã€‚ç„¶åï¼Œæ‰“å¼€project.cljæ–‡ä»¶ï¼Œå°† core.async æ·»åŠ åˆ°:dependenciesVector ä¸­ï¼Œä½¿å…¶å†…å®¹å¦‚ä¸‹ã€‚\n[[org.clojure/clojure \u0026#34;1.9.0\u0026#34;] [org.clojure/core.async \u0026#34;0.1.346.0-17112a-alpha\u0026#34;]] æ³¨æ„ è‡ªä»æˆ‘å†™å®Œè¿™ç¯‡æ–‡ç« åï¼Œcore.async çš„ç‰ˆæœ¬æœ‰å¯èƒ½æœ‰æ‰€è¿›æ­¥ã€‚å…³äºæœ€æ–°çš„ç‰ˆæœ¬ï¼Œè¯·æŸ¥çœ‹ core.async çš„ GitHub é¡¹ç›®é¡µé¢ã€‚ä½†ä¸ºäº†è¿™äº›ç»ƒä¹ çš„ç›®çš„ï¼Œè¯·ä½¿ç”¨è¿™é‡Œåˆ—å‡ºçš„ç‰ˆæœ¬ã€‚\næ¥ä¸‹æ¥ï¼Œæ‰“å¼€src/playsync/core.cljï¼Œä½¿å…¶çœ‹èµ·æ¥åƒè¿™æ ·ã€‚\n(ns playsync.core (:require [clojure.core.async :as a :refer [\u0026gt;! \u0026lt;! \u0026gt;!! \u0026lt;!! go chan buffer close! thread alts! alts!! timeout]])) ç°åœ¨ï¼Œå½“ä½ åœ¨ REPL ä¸­æ‰“å¼€å®ƒæ—¶ï¼Œä½ å°†æ‹¥æœ‰æœ€å¸¸ç”¨çš„ core.async å‡½æ•°ä¾›ä½ ä½¿ç”¨ã€‚å¾ˆå¥½! åœ¨åˆ›å»ºåƒçƒ­ç‹—å”®å–æœºé‚£æ ·å¤æ‚å’Œé©å‘½æ€§çš„ä¸œè¥¿ä¹‹å‰ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œç®€å•åœ°æ‰“å°å®ƒæ”¶åˆ°çš„æ¶ˆæ¯ã€‚","title":"Chapter11 core.async"},{"content":"Clojure Metaphysics: åŸå­ã€Refsã€Vars å’Œæ‹¥æŠ±åƒµå°¸ ä¸‰ä¸ªå¹¶å‘æ€§çš„å°å¦–ç²¾éƒ½æ˜¯ä»åŒä¸€ä¸ªé‚ªæ¶çš„å‘é‡Œç”Ÿå‡ºæ¥çš„ï¼šå¯¹å¯å˜çŠ¶æ€çš„å…±äº«è®¿é—®ã€‚ä½ å¯ä»¥åœ¨ç¬¬ä¹ç« çš„å¼•ç”¨å•å…ƒè®¨è®ºä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚å½“ä¸¤ä¸ªçº¿ç¨‹å¯¹å¼•ç”¨å•å…ƒè¿›è¡Œä¸åè°ƒçš„æ›´æ”¹æ—¶ï¼Œç»“æœæ˜¯ä¸å¯é¢„æµ‹çš„ã€‚\nRich Hickey è®¾è®¡ Clojure æ˜¯ä¸ºäº†ä¸“é—¨è§£å†³å…±äº«è®¿é—®æ˜“å˜çŠ¶æ€æ‰€äº§ç”Ÿçš„é—®é¢˜ã€‚äº‹å®ä¸Šï¼ŒClojure ä½“ç°äº†ä¸€ç§éå¸¸æ¸…æ™°çš„çŠ¶æ€æ¦‚å¿µï¼Œä½¿å…¶åœ¨æœ¬è´¨ä¸Šæ¯”å¤§å¤šæ•°æµè¡Œçš„ç¼–ç¨‹è¯­è¨€æ›´å®‰å…¨ã€‚å®ƒæ˜¯å®‰å…¨çš„ï¼Œä¸€ç›´åˆ°å®ƒçš„meta-freakin-physicsã€‚\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å°†äº†è§£ Clojure çš„åº•å±‚å½¢è€Œä¸Šå­¦ï¼Œä¸å…¸å‹çš„é¢å‘å¯¹è±¡ï¼ˆOOï¼‰è¯­è¨€çš„å½¢è€Œä¸Šå­¦ç›¸æ¯”è¾ƒã€‚å­¦ä¹ è¿™ç§å“²å­¦å°†ä½¿ä½ å‡†å¤‡å¥½å¤„ç† Clojure å‰©ä¸‹çš„å¹¶å‘å·¥å…·ï¼Œatomã€refå’Œvarå¼•ç”¨ç±»å‹ã€‚(Clojure è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„å¼•ç”¨ç±»å‹ï¼Œagentsï¼Œæœ¬ä¹¦æ²¡æœ‰æ¶‰åŠã€‚) è¿™äº›ç±»å‹ä¸­çš„æ¯ä¸€ä¸ªéƒ½èƒ½è®©ä½ å®‰å…¨åœ°åŒæ—¶æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹æ“ä½œã€‚ä½ è¿˜ä¼šå­¦åˆ°ä¸€äº›ç®€å•çš„æ–¹æ³•ï¼Œä½¿ä½ çš„ç¨‹åºæ›´æœ‰æ•ˆç‡ï¼Œè€Œä¸éœ€è¦å¼•å…¥çŠ¶æ€ã€‚\nå½¢è€Œä¸Šå­¦è¯•å›¾ç”¨æœ€å¹¿æ³›çš„æœ¯è¯­æ¥å›ç­”ä¸¤ä¸ªåŸºæœ¬é—®é¢˜ã€‚\n é‚£é‡Œæœ‰ä»€ä¹ˆï¼Ÿ å®ƒæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ  ä¸ºäº†å¼•å‡º Clojure å’Œ OO è¯­è¨€ä¹‹é—´çš„å·®å¼‚ï¼Œæˆ‘å°†è§£é‡Šä¸¤ç§ä¸åŒçš„æ‹¥æŠ±åƒµå°¸çš„å»ºæ¨¡æ–¹å¼ã€‚ä¸æ™®é€šçš„åƒµå°¸ä¸åŒï¼Œæ‹¥æŠ±åƒµå°¸å¹¶ä¸æƒ³è¦åå™¬ä½ çš„å¤§è„‘ã€‚å®ƒåªæƒ³ç”¨å‹ºå­èˆ€ä½ ï¼Œä¹Ÿè®¸è¿˜æƒ³é—»é—»ä½ çš„è„–å­ã€‚è¿™ä½¿å¾—å®ƒçš„ä¸æ­»ã€æ‘‡æ™ƒã€è…çƒ‚çš„çŠ¶æ€æ›´åŠ æ‚²æƒ¨ã€‚ä½ æ€ä¹ˆèƒ½è¯•å›¾æ€æ­»åªæƒ³è¦çˆ±çš„ä¸œè¥¿å‘¢ï¼Ÿè°æ˜¯è¿™é‡ŒçœŸæ­£çš„æ€ªç‰©ï¼Ÿ\né¢å‘å¯¹è±¡çš„å½¢è€Œä¸Šå­¦ OO å½¢è€Œä¸Šå­¦å°†æ‹¥æŠ±åƒµå°¸è§†ä¸ºå­˜åœ¨äºä¸–ç•Œä¸Šçš„ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„å±æ€§å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ”¹å˜ï¼Œä½†å®ƒä»ç„¶è¢«å½“ä½œä¸€ä¸ªå•ä¸€çš„ã€ä¸å˜çš„å¯¹è±¡ã€‚å¦‚æœè¿™çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå®Œå…¨æ˜æ˜¾çš„ã€æ²¡æœ‰äº‰è®®çš„åƒµå°¸å½¢è€Œä¸Šå­¦çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å¯èƒ½æ²¡æœ‰åœ¨å“²å­¦å…¥é—¨è¯¾ä¸ŠèŠ±å‡ ä¸ªå°æ—¶æ¥äº‰è®ºä¸€æŠŠæ¤…å­çš„å­˜åœ¨æ„å‘³ç€ä»€ä¹ˆï¼Œä»¥åŠä»€ä¹ˆçœŸæ­£ä½¿å®ƒé¦–å…ˆæˆä¸ºä¸€æŠŠæ¤…å­ã€‚\næ£˜æ‰‹çš„éƒ¨åˆ†æ˜¯ï¼Œæ‹¥æŠ±çš„åƒµå°¸æ€»æ˜¯åœ¨å˜åŒ–ã€‚å®ƒçš„èº«ä½“æ…¢æ…¢æ¶åŒ–ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒå¯¹æ‹¥æŠ±çš„ä¸ç­æ¸´æœ›è¶Šæ¥è¶Šå¼ºçƒˆã€‚åœ¨ OO æœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬ä¼šè¯´æ‹¥æŠ±åƒµå°¸æ˜¯ä¸€ä¸ªå…·æœ‰å¯æ”¹å˜çŠ¶æ€çš„å¯¹è±¡ï¼Œå®ƒçš„çŠ¶æ€æ˜¯ä¸æ–­æ³¢åŠ¨çš„ã€‚ä½†æ˜¯ä¸ç®¡è¿™ä¸ªåƒµå°¸æœ‰å¤šå¤§çš„å˜åŒ–ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠå®ƒè®¤å®šä¸ºåŒä¸€ä¸ªåƒµå°¸ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åœ¨ Ruby ä¸­å¯¹æŠ±å›¢åƒµå°¸è¿›è¡Œå»ºæ¨¡å’Œäº¤äº’ã€‚\nclass CuddleZombie # attr_accessor is just a shorthand way for creating getters and # setters for the listed instance variables attr_accessor :cuddle_hunger_level, :percent_deteriorated def initialize(cuddle_hunger_level = 1, percent_deteriorated = 0) self.cuddle_hunger_level = cuddle_hunger_level self.percent_deteriorated = percent_deteriorated end end fred = CuddleZombie.new(2, 3) fred.cuddle_hunger_level # =\u0026gt; 2 fred.percent_deteriorated # =\u0026gt; 3 fred.cuddle_hunger_level = 3 fred.cuddle_hunger_level # =\u0026gt; 3  10-1. ç”¨ Ruby å»ºç«‹æŠ±å›¢åƒµå°¸è¡Œä¸ºæ¨¡å‹  åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªæŠ±å›¢åƒµå°¸ï¼Œfredï¼Œæœ‰ä¸¤ä¸ªå±æ€§ã€‚cuddle_hunger_levelå’Œpercent_deterioratedã€‚fredä¸€å¼€å§‹çš„cuddle_hunger_levelæ˜¯ 2ï¼Œä½†æ˜¯ä½ å¯ä»¥æŠŠå®ƒæ”¹æˆä»»ä½•ä½ æƒ³è¦çš„ä¸œè¥¿ï¼Œå®ƒä»ç„¶æ˜¯å¥½çš„\u0026rsquo;Fredï¼ŒåŒä¸€ä¸ªæ‹¥æŠ±åƒµå°¸ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æŠŠå®ƒçš„`cuddle_hunger_level\u0026rsquo;æ”¹ä¸º 3ã€‚\nä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå¯¹è±¡åªæ˜¯ä¸€ä¸ªèŠ±å“¨çš„å¼•ç”¨å•å…ƒã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå®ƒä¹Ÿä¼šå—åˆ°åŒæ ·çš„éç¡®å®šæ€§ç»“æœçš„å½±å“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹è¯•å›¾ç”¨fred.cuddle_hunger_level = fred.cuddle_hunger_level + 1è¿™æ ·çš„æ–¹å¼æ¥å¢åŠ  Fred çš„é¥¥é¥¿åº¦ï¼Œå…¶ä¸­ä¸€ä¸ªå¢é‡å¯èƒ½ä¼šä¸¢å¤±ï¼Œå°±åƒã€Šä¸‰ä¸ªå°å¦–ç²¾ã€‹ä¸­ä¸¤ä¸ªçº¿ç¨‹å‘Xå†™å…¥çš„ä¾‹å­ä¸€æ ·ã€‚å‚è€ƒå•å…ƒæ ¼ã€ç›¸äº’æ’æ–¥å’ŒçŸ®äººç‹‚æˆ˜å£« \u0026ldquo;ä¸­çš„ä¾‹å­ã€‚\nå³ä½¿ä½ åªåœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šè¿›è¡Œè¯»å–ï¼Œç¨‹åºä»å°†æ˜¯éç¡®å®šæ€§çš„ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æ­£åœ¨è¿›è¡Œå…³äºæŠ±å›¢åƒµå°¸è¡Œä¸ºçš„ç ”ç©¶ã€‚ä½ æƒ³è®°å½•ä¸€ä¸ªåƒµå°¸çš„é¥¥é¥¿ç¨‹åº¦ï¼Œåªè¦å®ƒè¾¾åˆ° 50%çš„æ¶åŒ–ç¨‹åº¦ï¼Œä½†ä½ æƒ³åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šè¿›è¡Œï¼Œä»¥æé«˜æ€§èƒ½ï¼Œä½¿ç”¨ç±»ä¼¼æ¸…å• 10-1 ä¸­çš„ä»£ç ã€‚\nif fred.percent_deteriorated \u0026gt;= 50 Thread.new { database_logger.log(fred.cuddle_hunger_level) } end  è¿™æ®µ Ruby ä»£ç åœ¨å¹¶å‘æ‰§è¡Œæ—¶å¹¶ä¸å®‰å…¨ã€‚  é—®é¢˜æ˜¯ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½åœ¨å®é™…å†™å…¥ä¹‹å‰æ”¹å˜fredã€‚\nä¾‹å¦‚ï¼Œå›¾ 10-1 æ˜¾ç¤ºäº†ä¸¤ä¸ªä»ä¸Šåˆ°ä¸‹æ‰§è¡Œçš„çº¿ç¨‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°† 5 å†™å…¥æ•°æ®åº“æ˜¯æ­£ç¡®çš„ï¼Œä½† 10 å´è¢«å†™å…¥äº†ã€‚\nå›¾ 10-1ï¼šè®°å½•ä¸ä¸€è‡´çš„æŠ±å›¢åƒµå°¸æ•°æ®\nè¿™å°†æ˜¯å¾ˆä¸å¹¸çš„ã€‚å½“ä½ è¯•å›¾ä»æ‹¥æŠ±åƒµå°¸çš„å¯ç¤ºä¸­æ¢å¤æ—¶ï¼Œä½ ä¸å¸Œæœ›ä½ çš„æ•°æ®æ˜¯ä¸ä¸€è‡´çš„ã€‚ç„¶è€Œï¼Œæ²¡æœ‰åŠæ³•ä¿ç•™ä¸€ä¸ªå¯¹è±¡åœ¨æŸä¸€ç‰¹å®šæ—¶åˆ»çš„çŠ¶æ€ã€‚\næ­¤å¤–ï¼Œä¸ºäº†åŒæ—¶æ”¹å˜cuddle_hunger_levelå’Œpercent_deterioratedï¼Œä½ å¿…é¡»ç‰¹åˆ«å°å¿ƒã€‚å¦åˆ™ï¼Œfredæœ‰å¯èƒ½è¢«è§†ä¸ºä¸ä¸€è‡´çš„çŠ¶æ€ï¼Œå› ä¸ºå¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½ä¼šåœ¨ä½ æ‰“ç®—åŒæ—¶è¿›è¡Œçš„ä¸¤ä¸ªå˜åŒ–ä¹‹é—´è¯»å–fred`å¯¹è±¡ï¼Œåƒè¿™æ ·ã€‚\nfred.cuddle_hunger_level = fred.cuddle_hunger_level + 1 # At this time, another thread could read fred\u0026#39;s attributes and # \u0026#34;perceive\u0026#34; fred in an inconsistent state unless you use a mutex fred.percent_deteriorated = fred.percent_deteriorated + 1 è¿™æ˜¯å¦ä¸€ä¸ªç‰ˆæœ¬çš„äº’æ–¥é—®é¢˜ã€‚åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸­ï¼Œä½ å¯ä»¥ç”¨mutexæ¥æ‰‹åŠ¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥ç¡®ä¿åœ¨ mutex çš„æŒç»­æ—¶é—´å†…ï¼Œæ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ä¸€ä¸ªèµ„æºï¼ˆåœ¨æœ¬ä¾‹ä¸­ï¼Œå°±æ˜¯fredå¯¹è±¡ï¼‰ã€‚\nå¯¹è±¡æ°¸è¿œä¸ç¨³å®šçš„äº‹å®å¹¶ä¸å¦¨ç¢æˆ‘ä»¬æŠŠå®ƒä»¬å½“ä½œç¨‹åºçš„åŸºæœ¬æ„ä»¶ã€‚äº‹å®ä¸Šï¼Œè¿™è¢«è®¤ä¸ºæ˜¯ OOP çš„ä¸€ä¸ªä¼˜åŠ¿ã€‚çŠ¶æ€å¦‚ä½•å˜åŒ–å¹¶ä¸é‡è¦ï¼›ä½ ä»ç„¶å¯ä»¥ä¸ä¸€ä¸ªç¨³å®šçš„æ¥å£è¿›è¡Œäº¤äº’ï¼Œä¸€åˆ‡éƒ½ä¼šæ­£å¸¸å·¥ä½œã€‚è¿™ç¬¦åˆæˆ‘ä»¬å¯¹ä¸–ç•Œçš„ç›´è§‚æ„Ÿè§‰ã€‚ä¸€å—èœ¡ä»ç„¶æ˜¯åŒä¸€å—èœ¡ï¼Œå³ä½¿å®ƒçš„å±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼šå¦‚æœæˆ‘æ”¹å˜äº†å®ƒçš„é¢œè‰²ï¼ŒèåŒ–äº†å®ƒï¼Œç„¶åæŠŠå®ƒå€’åœ¨æˆ‘çš„æ•Œäººçš„è„¸ä¸Šï¼Œæˆ‘ä»ç„¶ä¼šè®¤ä¸ºå®ƒæ˜¯æˆ‘å¼€å§‹æ—¶çš„é‚£ä¸ªèœ¡å¯¹è±¡ã€‚\nå¦å¤–ï¼Œåœ¨ OOP ä¸­ï¼Œå¯¹è±¡ä¹Ÿä¼šåšäº‹ã€‚å®ƒä»¬ç›¸äº’ä½œç”¨ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶æ”¹å˜çŠ¶æ€ã€‚åŒæ ·ï¼Œè¿™ä¹Ÿç¬¦åˆæˆ‘ä»¬å¯¹ä¸–ç•Œçš„ç›´è§‚æ„Ÿè§‰ï¼šå˜åŒ–æ˜¯å¯¹è±¡ç›¸äº’ä½œç”¨çš„ç»“æœã€‚ä¸€ä¸ªäººçš„å¯¹è±¡æ¨åˆ°ä¸€ä¸ªé—¨çš„å¯¹è±¡ä¸Šï¼Œè¿›å…¥ä¸€ä¸ªæˆ¿å­çš„å¯¹è±¡ã€‚\nClojure å½¢è€Œä¸Šå­¦ åœ¨ Clojure å½¢è€Œä¸Šå­¦ä¸­ï¼Œæˆ‘ä»¬ä¼šè¯´ï¼Œæˆ‘ä»¬æ°¸è¿œä¸ä¼šé‡åˆ°ä¸¤æ¬¡ç›¸åŒçš„æ‹¥æŠ±åƒµå°¸ã€‚æ‹¥æŠ±åƒµå°¸å¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹äºå…¶å˜å¼‚è€Œå­˜åœ¨äºä¸–ç•Œä¸Šçš„ç¦»æ•£äº‹ç‰©ï¼šå®ƒå®é™…ä¸Šæ˜¯ä¸€è¿ä¸²çš„ä»·å€¼ã€‚\næœ¯è¯­å€¼ç»å¸¸è¢« Clojurists ä½¿ç”¨ï¼Œå…¶å…·ä½“å«ä¹‰å¯èƒ½ä¸ä½ çš„ä¹ æƒ¯ä¸åŒã€‚ä»·å€¼æ˜¯*åŸå­æ€§çš„ï¼Œå³å®ƒä»¬åœ¨ä¸€ä¸ªæ›´å¤§çš„ç³»ç»Ÿä¸­å½¢æˆä¸€ä¸ªå•ä¸€çš„ä¸å¯è¿˜åŸçš„å•ä½æˆ–ç»„æˆéƒ¨åˆ†ï¼›å®ƒä»¬æ˜¯ä¸å¯åˆ†å‰²çš„ã€ä¸å˜çš„ã€ç¨³å®šçš„å®ä½“ã€‚æ•°å­—æ˜¯ä»·å€¼ï¼šæ•°å­— 15 å˜å¼‚ä¸ºå¦ä¸€ä¸ªæ•°å­—æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚å½“ä½ ä» 15 åŠ å‡æ—¶ï¼Œä½ å¹¶æ²¡æœ‰æ”¹å˜ 15 è¿™ä¸ªæ•°å­—ï¼›ä½ åªæ˜¯å¾—åˆ°äº†ä¸€ä¸ªä¸åŒçš„æ•°å­—ã€‚Clojure çš„æ•°æ®ç»“æ„ä¹Ÿæ˜¯ä»·å€¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸å¯æ”¹å˜çš„ã€‚å½“ä½ åœ¨ä¸€ä¸ª Map ä¸Šä½¿ç”¨assocæ—¶ï¼Œä½ ä¸ä¼šä¿®æ”¹åŸæ¥çš„ Mapï¼›ç›¸åï¼Œä½ ä¼šæ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°çš„ Mapã€‚\næ‰€ä»¥ä¸€ä¸ªå€¼ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯ä½ å¯ä»¥å¯¹ä¸€ä¸ªå€¼åº”ç”¨ä¸€ä¸ªè¿‡ç¨‹æ¥äº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ä»ä¸€ä¸ªå€¼F1å¼€å§‹ï¼Œç„¶åæˆ‘ä»¬æŠŠæ‹¥æŠ±åƒµå°¸è¿‡ç¨‹åº”ç”¨åˆ°F1*ï¼Œäº§ç”Ÿå€¼F2ã€‚ç„¶åè¿™ä¸ªè¿‡ç¨‹åˆè¢«åº”ç”¨åˆ°F2çš„å€¼ä¸Šï¼Œäº§ç”ŸF3çš„å€¼ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nè¿™å¯¼è‡´äº†å¯¹èº«ä»½çš„ä¸åŒæ¦‚å¿µã€‚Clojure å½¢è€Œä¸Šå­¦ä¸æ˜¯åƒ OO å½¢è€Œä¸Šå­¦é‚£æ ·æŠŠèº«ä»½ç†è§£ä¸ºå˜åŒ–çš„å¯¹è±¡æ‰€å›ºæœ‰çš„ï¼Œè€Œæ˜¯æŠŠèº«ä»½ç†è§£ä¸ºæˆ‘ä»¬äººç±»å¼ºåŠ ç»™ç”±ä¸€ä¸ªè¿‡ç¨‹éšæ—¶é—´äº§ç”Ÿçš„ä¸€è¿ä¸²ä¸å˜çš„å€¼çš„ä¸œè¥¿ã€‚æˆ‘ä»¬ä½¿ç”¨åå­—æ¥æŒ‡å®šèº«ä»½ã€‚åå­—Fredæ˜¯æŒ‡ä¸€ç³»åˆ—å•ç‹¬çš„çŠ¶æ€F1ã€F2ã€F3ç­‰ç­‰çš„æ–¹ä¾¿æ–¹æ³•ã€‚ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œä¸å­˜åœ¨æ‰€è°“çš„å¯æ”¹å˜çš„çŠ¶æ€ã€‚ç›¸åï¼ŒstateæŒ‡çš„æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„èº«ä»½å€¼ã€‚\nRich Hickey ç”¨ç”µè¯å·ç çš„æ¯”å–»æ¥è§£é‡ŠçŠ¶æ€ã€‚Â Alan çš„ç”µè¯å·ç å·²ç»æ”¹å˜äº† 10 æ¬¡ï¼Œä½†æˆ‘ä»¬å°†æ°¸è¿œç”¨åŒä¸€ä¸ªåå­—æ¥ç§°å‘¼è¿™äº›å·ç ï¼Œå³Alan çš„ç”µè¯å·ç ã€‚è‰¾ä¼¦äº”å¹´å‰çš„ç”µè¯å·ç ä¸ä»Šå¤©çš„ç”µè¯å·ç æ˜¯ä¸åŒçš„æ•°å€¼ï¼Œä¸¤è€…æ˜¯è‰¾ä¼¦ç”µè¯å·ç èº«ä»½çš„ä¸¤ç§çŠ¶æ€ã€‚\nå½“ä½ è€ƒè™‘åˆ°åœ¨ä½ çš„ç¨‹åºä¸­ä½ æ˜¯åœ¨å¤„ç†å…³äºä¸–ç•Œçš„ä¿¡æ¯æ—¶ï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¸å…¶è¯´ä¿¡æ¯å‘ç”Ÿäº†å˜åŒ–ï¼Œä¸å¦‚è¯´ä½ æ”¶åˆ°äº†æ–°çš„ä¿¡æ¯ã€‚å‘¨äº”ä¸­åˆ 12 ç‚¹ï¼Œ\u0026ldquo;æŠ±æŠ±åƒµå°¸ \u0026ldquo;å¼—é›·å¾·å¤„äº 50%çš„è…çƒ‚çŠ¶æ€ã€‚åœ¨ä¸‹åˆ 1 ç‚¹ï¼Œä»–æ˜¯ 60%çš„è…çƒ‚ã€‚è¿™éƒ½æ˜¯ä½ å¯ä»¥å¤„ç†çš„äº‹å®ï¼Œå¼•å…¥ä¸€ä¸ªæ–°çš„äº‹å®å¹¶ä¸ä¼šä½¿ä»¥å‰çš„äº‹å®å¤±æ•ˆã€‚å³ä½¿å¼—é›·å¾·çš„è¡°å˜ç‡ä» 50%å¢åŠ åˆ° 60%ï¼Œä½†åœ¨ä¸‹åˆ 12:00 æ—¶ä»–å¤„äº 50%çš„è¡°å˜çŠ¶æ€ä»ç„¶æ˜¯äº‹å®ã€‚\nå›¾ 10-2 æ˜¾ç¤ºäº†ä½ å¯ä»¥å¦‚ä½•å°†ä»·å€¼ã€è¿‡ç¨‹ã€èº«ä»½å’ŒçŠ¶æ€å¯è§†åŒ–ã€‚\nå›¾ 10-2ï¼šä»·å€¼ã€è¿‡ç¨‹ã€èº«ä»½å’ŒçŠ¶æ€\nè¿™äº›ä»·å€¼ä¸ä¼šç›¸äº’ä½œç”¨ï¼Œä¹Ÿä¸èƒ½è¢«æ”¹å˜ã€‚å®ƒä»¬ä¸èƒ½*åšä»»ä½•äº‹æƒ…ã€‚åªæœ‰åœ¨ä»¥ä¸‹æƒ…å†µä¸‹æ‰ä¼šå‘ç”Ÿå˜åŒ–ï¼šaï¼‰ä¸€ä¸ªè¿‡ç¨‹äº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„å€¼ï¼›bï¼‰æˆ‘ä»¬é€‰æ‹©å°†èº«ä»½ä¸æ–°çš„å€¼è”ç³»èµ·æ¥ã€‚\nä¸ºäº†å¤„ç†è¿™ç§å˜åŒ–ï¼ŒClojure ä½¿ç”¨å‚è€ƒç±»å‹ã€‚å‚è€ƒç±»å‹è®©ä½ åœ¨ Clojure ä¸­ç®¡ç†èº«ä»½ã€‚ä½¿ç”¨å®ƒä»¬ï¼Œä½ å¯ä»¥å‘½åä¸€ä¸ªèº«ä»½å¹¶æ£€ç´¢å…¶çŠ¶æ€ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å…¶ä¸­æœ€ç®€å•çš„ï¼ŒåŸå­ã€‚\nåŸå­ Clojure çš„åŸå­å¼•ç”¨ç±»å‹å…è®¸ä½ èµ‹äºˆä¸€è¿ä¸²çš„ç›¸å…³å€¼ä»¥èº«ä»½ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸå­ã€‚\n(def fred (atom {:cuddle-hunger-level 0 :percent-deteriorated 0})) è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„åŸå­ï¼Œå¹¶å°†å…¶ä¸åç§°fredç»‘å®šã€‚è¿™ä¸ªåŸå­*å¼•ç”¨äº†{:cuddle-hunger-level 0 :percent-deteriorated 0}çš„å€¼ï¼Œä½ å¯ä»¥è¯´è¿™æ˜¯å®ƒçš„å½“å‰çŠ¶æ€ã€‚\nè¦å¾—åˆ°ä¸€ä¸ªåŸå­çš„å½“å‰çŠ¶æ€ï¼Œä½ è¦è§£é™¤å¯¹å®ƒçš„å¼•ç”¨ã€‚ä¸‹é¢æ˜¯ Fred çš„å½“å‰çŠ¶æ€ã€‚\n@fred ; =\u0026gt; {:cuddle-hunger-level 0, :percent-deteriorated 0} ä¸æœŸè´§ã€å»¶è¿Ÿå’Œæ‰¿è¯ºä¸åŒï¼Œè§£é™¤å¯¹åŸå­ï¼ˆæˆ–ä»»ä½•å…¶ä»–å¼•ç”¨ç±»å‹ï¼‰çš„å¼•ç”¨å°†æ°¸è¿œä¸ä¼šé˜»å¡ã€‚å½“ä½ è§£é™¤å¯¹æœŸè´§ã€å»¶è¿Ÿå’Œæ‰¿è¯ºçš„å¼•ç”¨æ—¶ï¼Œå°±åƒä½ åœ¨è¯´ \u0026ldquo;æˆ‘ç°åœ¨éœ€è¦ä¸€ä¸ªå€¼ï¼Œæˆ‘ä¼šä¸€ç›´ç­‰åˆ°æˆ‘å¾—åˆ°å®ƒ\u0026rdquo;ï¼Œæ‰€ä»¥è¿™ä¸ªæ“ä½œä¼šé˜»å¡æ˜¯åˆç†çš„ã€‚ç„¶è€Œï¼Œå½“ä½ è§£é™¤å¼•ç”¨ç±»å‹çš„å¼•ç”¨æ—¶ï¼Œå°±åƒä½ åœ¨è¯´ \u0026ldquo;ç»™æˆ‘æˆ‘ç°åœ¨å¼•ç”¨çš„å€¼\u0026rdquo;ï¼Œæ‰€ä»¥æ“ä½œä¸ä¼šé˜»å¡æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºå®ƒä¸éœ€è¦ç­‰å¾…ä»»ä½•ä¸œè¥¿ã€‚\nåœ¨æ¸…å• 10-1 ä¸­çš„ Ruby ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°å½“ä½ è¯•å›¾åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šè®°å½•æ•°æ®æ—¶ï¼Œå¯¹è±¡æ•°æ®å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å½“ä½¿ç”¨åŸå­æ¥ç®¡ç†çŠ¶æ€æ—¶å°±ä¸ä¼šå‘ç”Ÿè¿™ç§å±é™©ï¼Œå› ä¸ºæ¯ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸å¯æ”¹å˜çš„ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ç”¨printlnæ¥è®°å½•ä¸€ä¸ªåƒµå°¸çš„çŠ¶æ€ã€‚\n(let [zombie-state @fred] (if (\u0026gt;= (:percent-deteriorated zombie-state) 50) (future (println (:cuddle-hunger-level zombie-state))))) æ¸…å• 10-1 ä¸­çš„ Ruby ä¾‹å­çš„é—®é¢˜æ˜¯ï¼Œå®ƒéœ€è¦ä¸¤æ­¥æ¥è¯»å–åƒµå°¸çš„ä¸¤ä¸ªå±æ€§ï¼Œè€Œå…¶ä»–çº¿ç¨‹å¯èƒ½åœ¨è¿™ä¸¤æ­¥ä¹‹é—´æ”¹å˜è¿™äº›å±æ€§ã€‚ç„¶è€Œï¼Œé€šè¿‡ä½¿ç”¨åŸå­æ¥å¼•ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼Œä½ åªéœ€è¦æ‰§è¡Œä¸€æ¬¡è¯»å–ï¼Œå¹¶ä¸”è¿”å›çš„æ•°æ®ç»“æ„ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹æ”¹å˜ã€‚\nè¦æ›´æ–°åŸå­ï¼Œä½¿å…¶æŒ‡å‘ä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œä½ å¯ä»¥ä½¿ç”¨swap!ã€‚è¿™ä¼¼ä¹æ˜¯çŸ›ç›¾çš„ï¼Œå› ä¸ºæˆ‘è¯´è¿‡ï¼ŒåŸå­å€¼æ˜¯ä¸å˜çš„ã€‚çš„ç¡®ï¼Œå®ƒä»¬æ˜¯ä¸å˜çš„ã€‚ä½†æ˜¯ç°åœ¨æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨åŸå­çš„å‚è€ƒç±»å‹ï¼Œä¸€ä¸ªæŒ‡å‘åŸå­å€¼çš„ç»“æ„ã€‚åŸå­å€¼ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯å¼•ç”¨ç±»å‹å¯ä»¥è¢«æ›´æ–°å¹¶è¢«åˆ†é…ä¸€ä¸ªæ–°çš„å€¼ã€‚\nswap!æ¥æ”¶ä¸€ä¸ªåŸå­å’Œä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚å®ƒå°†å‡½æ•°åº”ç”¨äºåŸå­çš„å½“å‰çŠ¶æ€ä»¥äº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ï¼Œç„¶åå®ƒæ›´æ–°åŸå­ä»¥å¼•ç”¨è¿™ä¸ªæ–°çš„å€¼ã€‚æ–°çš„å€¼ä¹Ÿè¢«è¿”å›ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•å°† Fred çš„æ‹¥æŠ±é¥¥é¥¿åº¦æé«˜ 1ã€‚\n(swap! fred (fn [current-state] (merge-with + current-state {:cuddle-hunger-level 1}))) ; =\u0026gt; {:cuddle-hunger-level 1, :percent-deteriorated 0} å–æ¶ˆå¼•ç”¨fredå°†è¿”å›æ–°çš„çŠ¶æ€ã€‚\n@fred ; =\u0026gt; {:cuddle-hunger-level 1, :percent-deteriorated 0} ä¸ Ruby ä¸åŒï¼Œfredä¸å¯èƒ½å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ï¼Œå› ä¸ºä½ å¯ä»¥åŒæ—¶æ›´æ–°é¥¥é¥¿åº¦å’Œæ¶åŒ–ç™¾åˆ†æ¯”ï¼Œåƒè¿™æ ·ã€‚\n(swap! fred (fn [current-state] (merge-with + current-state {:cuddle-hunger-level 1 :percent-deteriorated 1}))) ; =\u0026gt; {:cuddle-hunger-level 2, :percent-deteriorated 1} è¿™æ®µä»£ç ä¼ é€’ç»™swap!ä¸€ä¸ªåªéœ€è¦ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œcurrent-stateã€‚ä½ ä¹Ÿå¯ä»¥ä¼ é€’swap!ä¸€ä¸ªéœ€è¦å¤šä¸ªå‚æ•°çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªéœ€è¦ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯åƒµå°¸çŠ¶æ€ï¼Œå¦ä¸€ä¸ªæ˜¯å¢åŠ å…¶æ‹¥æŠ±é¥¥é¥¿åº¦çš„æ•°é‡ã€‚\n(defn increase-cuddle-hunger-level [zombie-state increase-by] (merge-with + zombie-state {:cuddle-hunger-level increase-by})) è®©æˆ‘ä»¬åœ¨åƒµå°¸çŠ¶æ€ä¸‹å¿«é€Ÿæµ‹è¯•ä¸€ä¸‹increase-cuddle-hunger-levelã€‚\n(increase-cuddle-hunger-level @fred 10) ; =\u0026gt; {:cuddle-hunger-level 12, :percent-deteriorated 1} æ³¨æ„ï¼Œè¿™æ®µä»£ç å®é™…ä¸Šå¹¶æ²¡æœ‰æ›´æ–°fredï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨swap!ï¼Œæˆ‘ä»¬åªæ˜¯å¯¹increase-cuddle-hunger-levelåšäº†ä¸€ä¸ªæ­£å¸¸çš„å‡½æ•°è°ƒç”¨ï¼Œå®ƒè¿”å›ä¸€ä¸ªç»“æœã€‚\nç°åœ¨ç”¨é™„åŠ å‚æ•°è°ƒç”¨swap!ï¼Œ@fredå°†è¢«æ›´æ–°ï¼Œå°±åƒè¿™æ ·ã€‚\n(swap! fred increase-cuddle-hunger-level 10) ; =\u0026gt; {:cuddle-hunger-level 12, :percent-deteriorated 1} @fred ; =\u0026gt; {:cuddle-hunger-level 12, :percent-deteriorated 1} æˆ–è€…ä½ å¯ä»¥ç”¨ Clojure çš„å†…ç½®å‡½æ•°æ¥è¡¨è¾¾æ•´ä¸ªäº‹æƒ…ã€‚update-inå‡½æ•°éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼šä¸€ä¸ªé›†åˆï¼Œä¸€ä¸ªç”¨äºè¯†åˆ«è¦æ›´æ–°çš„å€¼çš„ Vectorï¼Œä»¥åŠä¸€ä¸ªæ›´æ–°è¯¥å€¼çš„å‡½æ•°ã€‚å®ƒè¿˜å¯ä»¥æ¥å—é¢å¤–çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°å°†è¢«ä¼ é€’ç»™æ›´æ–°å‡½æ•°ã€‚ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ã€‚\n(update-in {:a {:b 3}} [:a :b] inc) ; =\u0026gt; {:a {:b 4}} (update-in {:a {:b 3}} [:a :b] + 10) ; =\u0026gt; {:a {:b 13}} åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä½ æ­£åœ¨æ›´æ–° Map{:a {:b 3}}ã€‚Clojureä½¿ç”¨Vector[:a :b]æ¥éå†åµŒå¥—å›¾ï¼›:aäº§ç”ŸåµŒå¥—å›¾{:b 3}ï¼Œ:bäº§ç”Ÿå€¼3ã€‚Clojureå°†incå‡½æ•°åº”ç”¨äº3ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›¿æ¢äº†3`çš„æ–° Mapã€‚\nä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨update-inå‡½æ•°æ¥æ”¹å˜ Fred çš„çŠ¶æ€ã€‚\n(swap! fred update-in [:cuddle-hunger-level] + 10) ; =\u0026gt; {:cuddle-hunger-level 22, : percent-deteriorated 1}. é€šè¿‡ä½¿ç”¨åŸå­ï¼Œä½ å¯ä»¥ä¿ç•™è¿‡å»çš„çŠ¶æ€ã€‚ä½ å¯ä»¥è§£é™¤å¼•ç”¨ä¸€ä¸ªåŸå­æ¥æ£€ç´¢çŠ¶æ€ 1ï¼Œç„¶åæ›´æ–°è¯¥åŸå­ï¼Œåˆ›å»ºçŠ¶æ€ 2ï¼Œå¹¶ä»ç„¶ä½¿ç”¨çŠ¶æ€ 1ã€‚\n(let [num (atom 1) s1 @num] (swap! num inc) (println \u0026#34;State 1:\u0026#34; s1) (println \u0026#34;Current state:\u0026#34; @num)) ; =\u0026gt; State 1: 1 ; =\u0026gt; Current state: 2 è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸º \u0026ldquo;num \u0026ldquo;çš„åŸå­ï¼Œæ£€ç´¢å…¶çŠ¶æ€ï¼Œæ›´æ–°å…¶çŠ¶æ€ï¼Œç„¶åæ‰“å°å…¶è¿‡å»çš„çŠ¶æ€å’Œå½“å‰çš„çŠ¶æ€ï¼Œè¡¨æ˜å½“æˆ‘è¯´ä½ å¯ä»¥ä¿ç•™è¿‡å»çš„çŠ¶æ€æ—¶ï¼Œæˆ‘å¹¶ä¸æ˜¯è¦æ¬ºéª—ä½ ï¼Œå› æ­¤ä½ å¯ä»¥ä¿¡ä»»æˆ‘æ‰€æœ‰çš„ä¸œè¥¿\u0026ndash;åŒ…æ‹¬ä½ çš„çœŸå®å§“åï¼Œæˆ‘ä¿è¯åªè¯´å‡ºä½ çš„çœŸå®å§“åï¼Œä»¥æ‹¯æ•‘ä½ è„±ç¦»è‡´å‘½çš„å±é™©ã€‚\nè¿™ä¸€åˆ‡éƒ½å¾ˆæœ‰è¶£ï¼Œä½†å¦‚æœä¸¤ä¸ªç‹¬ç«‹çš„çº¿ç¨‹è°ƒç”¨\u0026rdquo;ï¼ˆäº¤æ¢ï¼å¼—é›·å¾·å¢åŠ -æ‹¥æŠ±-é¥¥é¥¿ç­‰çº§ 1ï¼‰\u0026ldquo;ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ˜¯å¦æœ‰å¯èƒ½åƒæ¸…å• 10-1 ä¸­çš„ Ruby ä¾‹å­é‚£æ ·ï¼Œå…¶ä¸­ä¸€ä¸ªå¢é‡è¢«ä¸¢å¤±ï¼Ÿ\nç­”æ¡ˆæ˜¯å¦å®šçš„!Â swap!å®ç°äº†æ¯”è¾ƒå’Œè®¾ç½®çš„è¯­ä¹‰ï¼Œæ„å‘³ç€å®ƒåœ¨å†…éƒ¨åšäº†ä»¥ä¸‹å·¥ä½œã€‚\n å®ƒè¯»å–åŸå­çš„å½“å‰çŠ¶æ€ã€‚ ç„¶åå°†æ›´æ–°å‡½æ•°åº”ç”¨äºè¯¥çŠ¶æ€ã€‚ æ¥ä¸‹æ¥ï¼Œå®ƒæ£€æŸ¥å®ƒåœ¨æ­¥éª¤ 1 ä¸­è¯»å–çš„å€¼æ˜¯å¦ä¸åŸå­çš„å½“å‰å€¼ç›¸åŒã€‚ å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆswap!å°±æ›´æ–°åŸå­ä»¥å¼•ç”¨æ­¥éª¤ 2 çš„ç»“æœã€‚ å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆswap!é‡è¯•ï¼Œä»ç¬¬ 1 æ­¥å¼€å§‹å†æ¬¡ç»å†è¿™ä¸ªè¿‡ç¨‹ã€‚  è¿™ä¸ªè¿‡ç¨‹ä¿è¯äº†æ²¡æœ‰äº¤æ¢ä¼šä¸¢å¤±ã€‚\nå…³äºswap!éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼ŒåŸå­æ›´æ–°æ˜¯åŒæ­¥å‘ç”Ÿçš„ï¼›å®ƒä»¬å°†é˜»å¡å…¶çº¿ç¨‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æ›´æ–°å‡½æ•°ç”±äºæŸç§åŸå› è°ƒç”¨äº†Thread/sleep 1000ï¼Œé‚£ä¹ˆå½“swap!å®Œæˆæ—¶ï¼Œçº¿ç¨‹å°†é˜»å¡è‡³å°‘ä¸€ç§’é’Ÿã€‚\næœ‰æ—¶ä½ ä¼šæƒ³æ›´æ–°ä¸€ä¸ªåŸå­è€Œä¸æ£€æŸ¥å®ƒçš„å½“å‰å€¼ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šå¼€å‘ä¸€ç§è¡€æ¸…ï¼Œå°†ä¸€ä¸ªæŠ±æ•åƒµå°¸çš„é¥¥é¥¿åº¦å’Œæ¶åŒ–åº¦è®¾ç½®ä¸ºé›¶ã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œä½ å¯ä»¥ä½¿ç”¨reset!å‡½æ•°ã€‚\n(reset! fred {:cuddle-hunger-level 0 :percent-deteriorated 0}) è¿™å°±æ¶µç›–äº† atoms çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½! æ€»ç»“ä¸€ä¸‹ï¼šåŸå­å®ç°äº† Clojure çš„çŠ¶æ€æ¦‚å¿µã€‚å®ƒä»¬å…è®¸ä½ ä¸ºä¸€ç³»åˆ—ä¸å¯å˜çš„å€¼èµ‹äºˆä¸€ä¸ªèº«ä»½ã€‚å®ƒä»¬é€šè¿‡æ¯”è¾ƒå’Œè®¾ç½®è¯­ä¹‰ä¸ºå¼•ç”¨å•å…ƒå’Œäº’æ–¥é—®é¢˜æä¾›äº†è§£å†³æ–¹æ¡ˆã€‚å®ƒä»¬è¿˜å…è®¸ä½ å¤„ç†è¿‡å»çš„çŠ¶æ€ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå®ƒä»¬ä¼šåœ¨åŸåœ°å˜å¼‚ã€‚\né™¤äº†è¿™äº›æ ¸å¿ƒç‰¹æ€§å¤–ï¼ŒåŸå­è¿˜ä¸å…¶ä»–å¼•ç”¨ç±»å‹å…±äº«ä¸¤ä¸ªç‰¹æ€§ã€‚ä½ å¯ä»¥åœ¨åŸå­ä¸Šé™„åŠ watcheså’Œvalidatorsã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›ã€‚\næ‰‹è¡¨å’ŒéªŒè¯å™¨ è§‚å¯Ÿå™¨å…è®¸ä½ è¶…çº§çŒ¥çåœ°æ£€æŸ¥ä½ çš„å‚è€ƒç±»å‹çš„ä¸€ä¸¾ä¸€åŠ¨ã€‚éªŒè¯å™¨å…è®¸ä½ æœ‰è¶…å¼ºçš„æ§åˆ¶åŠ›ï¼Œé™åˆ¶å“ªäº›çŠ¶æ€æ˜¯å¯ä»¥å…è®¸çš„ã€‚é’Ÿè¡¨å’ŒéªŒè¯å™¨éƒ½æ˜¯æ™®é€šçš„å‡½æ•°ã€‚\næ‰‹è¡¨ ä¸€ä¸ªwatchæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒéœ€è¦å››ä¸ªå‚æ•°ï¼šä¸€ä¸ªé”®ï¼Œè¢«ç›‘è§†çš„å¼•ç”¨ï¼Œå®ƒçš„å‰ä¸€ä¸ªçŠ¶æ€ï¼Œä»¥åŠå®ƒçš„æ–°çŠ¶æ€ã€‚ä½ å¯ä»¥ä¸ºä¸€ä¸ªå¼•ç”¨ç±»å‹æ³¨å†Œä»»æ„æ•°é‡çš„æ‰‹è¡¨ã€‚\næ¯”æ–¹è¯´ï¼Œä¸€ä¸ªåƒµå°¸çš„æ´—ç‰Œé€Ÿåº¦ï¼ˆä»¥æ¯å°æ—¶æ´—ç‰Œæ¬¡æ•°è¡¡é‡ï¼Œæˆ–ç§° SPHï¼‰å–å†³äºå…¶é¥¥é¥¿ç¨‹åº¦å’Œæ¶åŒ–ç¨‹åº¦ã€‚ä¸‹é¢æ˜¯ä½ çš„è®¡ç®—æ–¹æ³•ï¼Œç”¨æ‹¥æŠ±çš„é¥¥é¥¿ç¨‹åº¦ä¹˜ä»¥å®ƒçš„å®Œæ•´ç¨‹åº¦ã€‚\n(defn shuffle-speed [zombie] (* (:cuddle-hunger-level zombie) (- 100 (:percent-deteriorated zombie)))) æˆ‘ä»¬è¿˜å¯ä»¥è¯´ï¼Œæ¯å½“åƒµå°¸çš„æ´—ç‰Œé€Ÿåº¦è¾¾åˆ° 5000SPH çš„å±é™©æ°´å¹³æ—¶ï¼Œä½ éƒ½æƒ³å¾—åˆ°æé†’ã€‚å¦åˆ™ï¼Œä½ æƒ³è¢«å‘ŠçŸ¥ä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè§‚å¯Ÿå‡½æ•°ï¼Œä½ å¯ä»¥ç”¨æ¥åœ¨ SPH è¶…è¿‡ 5000 æ—¶æ‰“å°ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ï¼Œå¦åˆ™æ‰“å°ä¸€ä¸ªä¸€åˆ‡æ­£å¸¸çš„ä¿¡æ¯ã€‚\n(defn shuffle-alert [key watched old-state new-state] (let [sph (shuffle-speed new-state)] (if (\u0026gt; sph 5000) (do (println \u0026#34;Run, you fool!\u0026#34;) (println \u0026#34;The zombie\u0026#39;s SPH is now \u0026#34; sph) (println \u0026#34;This message brought to your courtesy of \u0026#34; key)) (do (println \u0026#34;All\u0026#39;s well with \u0026#34; key) (println \u0026#34;Cuddle hunger: \u0026#34; (:cuddle-hunger-level new-state)) (println \u0026#34;Percent deteriorated: \u0026#34; (:percent-deteriorated new-state)) (println \u0026#34;SPH: \u0026#34; sph))))) è§‚å¯Ÿå‡½æ•°æœ‰å››ä¸ªå‚æ•°ï¼šä¸€ä¸ªå¯ä»¥ç”¨æ¥æŠ¥å‘Šçš„é”®ï¼Œè¢«è§‚å¯Ÿçš„åŸå­ï¼ŒåŸå­æ›´æ–°å‰çš„çŠ¶æ€ï¼Œä»¥åŠåŸå­æ›´æ–°åçš„çŠ¶æ€ã€‚è¿™ä¸ªè§‚å¯Ÿå‡½æ•°è®¡ç®—æ–°çŠ¶æ€çš„æ´—ç‰Œé€Ÿåº¦ï¼Œå¦‚æœå®ƒè¿‡é«˜ï¼Œå°±æ‰“å°ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ï¼Œå½“æ´—ç‰Œé€Ÿåº¦å®‰å…¨æ—¶ï¼Œå°±æ‰“å°ä¸€ä¸ªä¸€åˆ‡æ­£å¸¸çš„ä¿¡æ¯ï¼Œå¦‚ä¸Šæ‰€è¿°ã€‚åœ¨è¿™ä¸¤ç»„ä¿¡æ¯ä¸­ï¼Œkeyè¢«ç”¨æ¥è®©ä½ çŸ¥é“ä¿¡æ¯çš„æ¥æºã€‚\nä½ å¯ä»¥ç”¨add-watchæŠŠè¿™ä¸ªå‡½æ•°é™„åŠ åˆ°fredä¸Šã€‚add-watchçš„ä¸€èˆ¬å½¢å¼æ˜¯ï¼ˆadd-watch ref key watch-fnï¼‰ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¦é‡ç½®fredçš„çŠ¶æ€ï¼Œæ·»åŠ shuffle-alertçš„è§‚å¯Ÿå‡½æ•°ï¼Œç„¶åå¤šæ¬¡æ›´æ–°fredçš„çŠ¶æ€ä»¥è§¦å‘shuffle-alertã€‚\n(reset! fred {:cuddle-hunger-level 22 :percent-deteriorated 2}) (add-watch fred :fred-shuffle-alert shuffle-alert) (swap! fred update-in [:percent-deteriorated] + 1) ; =\u0026gt; All\u0026#39;s well with :fred-shuffle-alert ; =\u0026gt; Cuddle hunger: 22 ; =\u0026gt; Percent deteriorated: 3 ; =\u0026gt; SPH: 2134 (swap! fred update-in [:cuddle-hunger-level] + 30) ; =\u0026gt; Run, you fool! ; =\u0026gt; The zombie\u0026#39;s SPH is now 5044 ; =\u0026gt; This message brought to your courtesy of :fred-shuffle-alert è¿™ä¸ªè§‚å¯Ÿå‡½æ•°çš„ä¾‹å­æ²¡æœ‰ä½¿ç”¨watchedæˆ–old-stateï¼Œä½†å¦‚æœæœ‰éœ€è¦ï¼Œå®ƒä»¬å°±åœ¨é‚£é‡Œã€‚ç°åœ¨æˆ‘ä»¬æ¥è°ˆè°ˆéªŒè¯å™¨ã€‚\néªŒè¯å™¨ éªŒè¯å™¨å¯ä»¥è®©ä½ æŒ‡å®šä¸€ä¸ªå¼•ç”¨å¯ä»¥æœ‰å“ªäº›çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªéªŒè¯å™¨ï¼Œä½ å¯ä»¥ç”¨æ¥ç¡®ä¿ä¸€ä¸ªåƒµå°¸çš„:%-deterioratedåœ¨ 0 åˆ° 100 ä¹‹é—´ã€‚\n(defn percent-deteriorated-validator [{:keys [percent-deteriorated]}] (and (\u0026gt;= percent-deteriorated 0) (\u0026lt;= percent-deteriorated 100))) æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼ŒéªŒè¯å™¨åªéœ€è¦ä¸€ä¸ªå‚æ•°ã€‚å½“ä½ ç»™ä¸€ä¸ªå¼•ç”¨æ·»åŠ éªŒè¯å™¨æ—¶ï¼Œè¯¥å¼•ç”¨è¢«ä¿®æ”¹ï¼Œè¿™æ ·ï¼Œæ¯å½“å®ƒè¢«æ›´æ–°æ—¶ï¼Œå®ƒå°†è°ƒç”¨è¿™ä¸ªéªŒè¯å™¨ï¼Œå¹¶å°†æ›´æ–°å‡½æ•°è¿”å›çš„å€¼ä½œä¸ºå…¶å‚æ•°ã€‚å¦‚æœéªŒè¯å™¨å› è¿”å› \u0026ldquo;false \u0026ldquo;æˆ–æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸è€Œå¤±è´¥ï¼Œå¼•ç”¨å°†ä¸ä¼šæ”¹å˜ä»¥æŒ‡å‘æ–°çš„å€¼ã€‚\nä½ å¯ä»¥åœ¨åˆ›å»ºåŸå­æ—¶é™„åŠ ä¸€ä¸ªéªŒè¯å™¨ã€‚\n(def bobby (atom {:cuddle-hunger-level 0 :percent-deteriorated 0} :validator percent-deteriorated-validator)) (swap! bobby update-in [:percent-deteriorated] + 200) ; This throws \u0026#34;Invalid reference state\u0026#34; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œpercent-deteriorated-validatorè¿”å›falseï¼ŒåŸå­æ›´æ–°å¤±è´¥ã€‚\nä½ å¯ä»¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œä»¥è·å¾—ä¸€ä¸ªæ›´å…·æè¿°æ€§çš„é”™è¯¯ä¿¡æ¯ã€‚\n(defn percent-deteriorated-validator [{:keys [percent-deteriorated]}] (or (and (\u0026gt;= percent-deteriorated 0) (\u0026lt;= percent-deteriorated 100)) (throw (IllegalStateException. \u0026#34;That\u0026#39;s not mathy!\u0026#34;)))) (def bobby (atom {:cuddle-hunger-level 0 :percent-deteriorated 0} :validator percent-deteriorated-validator)) (swap! bobby update-in [:percent-deteriorated] + 200) ; This throws \u0026#34;IllegalStateException: That\u0026#39;s not mathy!\u0026#34; ç›¸å½“ä¸é”™! ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹è£åˆ¤ã€‚\nåŸå­æ˜¯ç®¡ç†ç‹¬ç«‹èº«ä»½çŠ¶æ€çš„ç†æƒ³é€‰æ‹©ã€‚ä½†æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¡¨è¾¾ä¸€ä¸ªäº‹ä»¶åº”è¯¥åŒæ—¶æ›´æ–°ä¸€ä¸ªä»¥ä¸Šçš„èº«ä»½çš„çŠ¶æ€ã€‚Â Refsæ˜¯è¿™ç§æƒ…å†µä¸‹çš„å®Œç¾å·¥å…·ã€‚\nä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯è®°å½• sock gnome äº¤æ˜“ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¢œå­ä¾å„’ä»ä¸–ç•Œå„åœ°çš„æ¯ä¸€ä¸ªå¹²è¡£æœºä¸­å–å‡ºä¸€åªè¢œå­ã€‚ä»–ä»¬ç”¨è¿™äº›è¢œå­æ¥å­µåŒ–ä»–ä»¬çš„å­©å­ã€‚ä½œä¸ºå¯¹è¿™ç§*\u0026quot;*ç¤¼ç‰© \u0026ldquo;çš„å›æŠ¥ï¼Œè¢œå­åœ°ç²¾ä¿æŠ¤ä½ çš„å®¶ä¸è¢« El Chupacabra å…¥ä¾µã€‚å¦‚æœä½ æœ€è¿‘æ²¡æœ‰è¢« El Chupacabra æ‹œè®¿ï¼Œä½ è¦æ„Ÿè°¢è¢œå­ä¾å„’ã€‚\nä¸ºäº†å»ºç«‹è¢œå­è½¬ç§»çš„æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦è¡¨è¾¾çš„æ˜¯ï¼Œä¸€ä¸ªçƒ˜å¹²æœºå¤±å»äº†ä¸€åªè¢œå­ï¼Œä¸€ä¸ªåœ°ç²¾åŒæ—¶å¾—åˆ°äº†ä¸€åªè¢œå­ã€‚è¿™ä¸€åˆ»ï¼Œè¢œå­å±äºçƒ˜å¹²æœºï¼›ä¸‹ä¸€åˆ»ï¼Œå®ƒå±äºåœ°ç²¾ã€‚è¿™åªè¢œå­ä¸åº”è¯¥åŒæ—¶å±äºçƒ˜å¹²æœºå’Œä¾å„’ï¼Œä¹Ÿä¸åº”è¯¥åŒæ—¶å±äºè¿™ä¸¤ä¸ªäººã€‚\nä¸ºè¢œå­è½¬ç§»å»ºæ¨¡ ä½ å¯ä»¥ç”¨ refs æ¥æ¨¡æ‹Ÿè¿™ä¸ª sock ä¼ è¾“ã€‚Refs å…è®¸ä½ ä½¿ç”¨äº‹åŠ¡è¯­ä¹‰æ¥æ›´æ–°å¤šä¸ªèº«ä»½çš„çŠ¶æ€ã€‚è¿™äº›äº¤æ˜“æœ‰ä¸‰ä¸ªç‰¹ç‚¹ã€‚\n å®ƒä»¬æ˜¯åŸå­æ€§çš„ï¼Œæ„å‘³ç€æ‰€æœ‰çš„å‚è€ƒæ–‡çŒ®éƒ½è¢«æ›´æ–°ï¼Œæˆ–è€…éƒ½ä¸è¢«æ›´æ–°ã€‚ å®ƒä»¬æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ„å‘³ç€å¼•ç”¨æ€»æ˜¯æ˜¾ç¤ºä¸ºæœ‰æ•ˆçš„çŠ¶æ€ã€‚ä¸€ä¸ª sock æ€»æ˜¯å±äºä¸€ä¸ª dryer æˆ–ä¸€ä¸ª gnomeï¼Œä½†ç»ä¸æ˜¯ä¸¤è€…éƒ½å±äºã€‚ å®ƒä»¬æ˜¯éš”ç¦»çš„ï¼Œè¿™æ„å‘³ç€äº‹åŠ¡çš„è¡Œä¸ºå°±åƒå®ƒä»¬æ˜¯è¿ç»­æ‰§è¡Œçš„ä¸€æ ·ï¼›å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œæ”¹å˜åŒä¸€å‚è€ƒä¿¡æ¯çš„äº‹åŠ¡ï¼Œä¸€ä¸ªäº‹åŠ¡å°†é‡è¯•ã€‚è¿™ç±»ä¼¼äºåŸå­çš„æ¯”è¾ƒå’Œè®¾ç½®è¯­ä¹‰ã€‚  ä½ å¯èƒ½è®¤è¯†åˆ°è¿™äº›æ˜¯æ•°æ®åº“äº‹åŠ¡çš„ ACID å±æ€§ä¸­çš„Aã€Cå’ŒIã€‚ä½ å¯ä»¥è®¤ä¸º Refs ç»™ä½ æä¾›äº†ä¸æ•°æ®åº“äº‹åŠ¡ç›¸åŒçš„å¹¶å‘å®‰å…¨æ€§ï¼Œåªæ˜¯åœ¨å†…å­˜ä¸­çš„æ•°æ®ã€‚\nClojure ä½¿ç”¨*è½¯ä»¶äº‹åŠ¡æ€§å†…å­˜ï¼ˆSTMï¼‰*æ¥å®ç°è¿™ç§è¡Œä¸ºã€‚STM éå¸¸é…·ï¼Œä½†å½“ä½ å¼€å§‹ä½¿ç”¨ Clojure æ—¶ï¼Œä½ ä¸éœ€è¦å¯¹å®ƒäº†è§£å¤ªå¤šï¼›ä½ åªéœ€è¦çŸ¥é“å¦‚ä½•ä½¿ç”¨å®ƒï¼Œè¿™å°±æ˜¯æœ¬èŠ‚è¦å‘Šè¯‰ä½ çš„ã€‚\nè®©æˆ‘ä»¬å¼€å§‹è½¬ç§»ä¸€äº›è¢œå­å§! é¦–å…ˆï¼Œä½ éœ€è¦ç¼–ç ä¸€äº›è¢œå­å’Œ gnome çš„åˆ›å»ºæŠ€æœ¯ã€‚ä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€äº›è¢œå­å“ç§ï¼Œç„¶åå®šä¹‰äº†å‡ ä¸ªè¾…åŠ©å‡½æ•°ã€‚Â sock-count'å°†è¢«ç”¨æ¥å¸®åŠ©è®°å½•æ¯ä¸€ç§è¢œå­æœ‰å¤šå°‘åªå±äºåœ°ç²¾æˆ–çƒ˜å¹²æœºï¼Œè€Œgenerate-sock-gnome\u0026rsquo;å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ã€æ²¡æœ‰è¢œå­çš„åœ°ç²¾ã€‚\n(def sock-varieties #{\u0026#34;darned\u0026#34; \u0026#34;argyle\u0026#34; \u0026#34;wool\u0026#34; \u0026#34;horsehair\u0026#34; \u0026#34;mulleted\u0026#34; \u0026#34;passive-aggressive\u0026#34; \u0026#34;striped\u0026#34; \u0026#34;polka-dotted\u0026#34; \u0026#34;athletic\u0026#34; \u0026#34;business\u0026#34; \u0026#34;power\u0026#34; \u0026#34;invisible\u0026#34; \u0026#34;gollumed\u0026#34;}) (defn sock-count [sock-variety count] {:variety sock-variety :count count}) (defn generate-sock-gnome \u0026#34;Create an initial sock gnome state with no socks\u0026#34; [name] {:name name :socks #{}}) ç°åœ¨ä½ å¯ä»¥åˆ›å»ºä½ çš„å®é™…å‚ç…§ç‰©äº†ã€‚ä¾å„’å°†æœ‰ 0 åªè¢œå­ã€‚å¦ä¸€æ–¹é¢ï¼Œçƒ˜å¹²æœºå°†æœ‰ä¸€ç»„ç”±è¢œå­å“ç§é›†ç”Ÿæˆçš„è¢œå­å¯¹ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„å‚è€ƒæ–‡çŒ®ã€‚\n(def sock-gnome (ref (generate-sock-gnome \u0026#34;Barumpharumph\u0026#34;))) (def dryer (ref {:name \u0026#34;LG 1337\u0026#34; :socks (set (map #(sock-count % 2) sock-varieties))})) ä½ å¯ä»¥åƒè§£é™¤å¯¹åŸå­çš„å¼•ç”¨ä¸€æ ·è§£é™¤å¯¹ ref çš„å¼•ç”¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ çš„è¢œå­çš„é¡ºåºå¯èƒ½ä¼šä¸åŒï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªæ— åºçš„é›†åˆã€‚\n(:socks @dryer) ; =\u0026gt; #{{:variety \u0026#34;passive-aggressive\u0026#34;, :count 2} {:variety \u0026#34;power\u0026#34;, :count 2} {:variety \u0026#34;athletic\u0026#34;, :count 2} {:variety \u0026#34;business\u0026#34;, :count 2} {:variety \u0026#34;argyle\u0026#34;, :count 2} {:variety \u0026#34;horsehair\u0026#34;, :count 2} {:variety \u0026#34;gollumed\u0026#34;, :count 2} {:variety \u0026#34;darned\u0026#34;, :count 2} {:variety \u0026#34;polka-dotted\u0026#34;, :count 2} {:variety \u0026#34;wool\u0026#34;, :count 2} {:variety \u0026#34;mulleted\u0026#34;, :count 2} {:variety \u0026#34;striped\u0026#34;, :count 2} {:variety \u0026#34;invisible\u0026#34;, :count 2}} ç°åœ¨ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ï¼Œå¯ä»¥è¿›è¡Œè½¬ç§»äº†ã€‚æˆ‘ä»¬è¦ä¿®æ”¹sock-gnomeå‚æ•°ï¼Œä»¥æ˜¾ç¤ºå®ƒè·å¾—äº†ä¸€åªè¢œå­ï¼Œå¹¶ä¿®æ”¹dryerå‚æ•°ï¼Œä»¥æ˜¾ç¤ºå®ƒå¤±å»äº†ä¸€åªè¢œå­ã€‚ä½ ç”¨alter'æ¥ä¿®æ”¹å¼•ç”¨ï¼Œè€Œä¸”ä½ å¿…é¡»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ä½¿ç”¨alter\u0026rsquo;ã€‚Â dosyncå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡å¹¶å®šä¹‰å…¶èŒƒå›´ï¼›ä½ æŠŠæ‰€æœ‰çš„äº‹åŠ¡æ“ä½œæ”¾åœ¨å…¶ä¸»ä½“ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›å·¥å…·æ¥å®šä¹‰ä¸€ä¸ª`steal-sock\u0026rsquo;å‡½æ•°ï¼Œç„¶ååœ¨æˆ‘ä»¬çš„ä¸¤ä¸ªå‚è€ƒæ–‡ä»¶ä¸Šè°ƒç”¨å®ƒã€‚\n(defn steal-sock [gnome dryer] (dosync (when-let [pair (some #(if (= (:count %) 2) %) (:socks @dryer))] (let [updated-count (sock-count (:variety pair) 1)] (alter gnome update-in [:socks] conj updated-count) (alter dryer update-in [:socks] disj pair) (alter dryer update-in [:socks] conj updated-count))))) (steal-sock sock-gnome dryer) (:socks @sock-gnome) ; =\u0026gt; #{{:variety \u0026#34;passive-aggressive\u0026#34;, :count 1}} ç°åœ¨å›¢å­æœ‰ä¸€åªè¢«åŠ¨æ”»å‡»å‹çš„è¢œå­ï¼Œè€Œçƒ˜å¹²æœºå°‘äº†ä¸€åªï¼ˆä½ çš„å›¢å­å¯èƒ½å·äº†ä¸€åªä¸åŒçš„è¢œå­ï¼Œå› ä¸ºè¢œå­æ˜¯ä»¥æ— åºçš„æ–¹å¼å­˜å‚¨çš„ï¼‰ã€‚è®©æˆ‘ä»¬ç¡®ä¿æ‰€æœ‰è¢«åŠ¨æ”»å‡»çš„è¢œå­éƒ½è¢«è®¡ç®—åœ¨å†…ã€‚\n(defn similar-socks [target-sock sock-set] (filter #(= (:variety %) (:variety target-sock)) sock-set)) (similar-socks (first (:socks @sock-gnome)) (:socks @dryer)) ; =\u0026gt; ({:variety \u0026#34;passive-aggressive\u0026#34;, :count 1}) è¿™é‡Œæœ‰å‡ ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ï¼šå½“ä½ æ”¹å˜ä¸€ä¸ªå¼•ç”¨æ—¶ï¼Œè¿™ä¸ªæ”¹å˜åœ¨å½“å‰äº‹åŠ¡ä¹‹å¤–å¹¶ä¸ç«‹å³å¯è§ã€‚è¿™ä½¿å¾—ä½ å¯ä»¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­å¯¹dryerè°ƒç”¨alterä¸¤æ¬¡ï¼Œè€Œä¸ç”¨æ‹…å¿ƒdryerä¼šåœ¨ä¸ä¸€è‡´çš„çŠ¶æ€ä¸‹è¢«è¯»å–ã€‚åŒæ ·çš„ï¼Œå¦‚æœä½ æ”¹å˜ä¸€ä¸ªå¼•ç”¨ï¼Œç„¶ååœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­derefå®ƒï¼Œderefå°†è¿”å›æ–°çš„çŠ¶æ€ã€‚\nè¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­æ¥è¯æ˜è¿™ä¸ªäº¤æ˜“ä¸­çŠ¶æ€çš„æƒ³æ³•ã€‚\n(def counter (ref 0)) (future (dosync (alter counter inc) (println @counter) (Thread/sleep 500) (alter counter inc) (println @counter))) (Thread/sleep 250) (println @counter) è¿™å°†ä¾æ¬¡æ‰“å°å‡º 1ã€0 å’Œ 2ã€‚é¦–å…ˆï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªå¼•ç”¨ï¼Œcounterï¼Œç”¨æ¥ä¿å­˜æ•°å­— 0ã€‚ç„¶åä½ ç”¨futureåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥è¿è¡Œä¸€ä¸ªäº‹åŠ¡ã€‚åœ¨äº‹åŠ¡çº¿ç¨‹ä¸­ï¼Œä½ å¢åŠ è®¡æ•°å™¨å¹¶æ‰“å°å®ƒï¼Œç„¶åæ•°å­— 1 è¢«æ‰“å°å‡ºæ¥ã€‚åŒæ—¶ï¼Œä¸»çº¿ç¨‹ç­‰å¾…äº† 250 æ¯«ç§’ï¼Œä¹Ÿæ‰“å°äº†è®¡æ•°å™¨çš„å€¼ã€‚ç„¶è€Œï¼Œä¸»çº¿ç¨‹ä¸Šçš„è®¡æ•°å™¨çš„å€¼ä»ç„¶æ˜¯ 0\u0026ndash;ä¸»çº¿ç¨‹æ˜¯åœ¨äº‹åŠ¡ä¹‹å¤–çš„ï¼Œä¸èƒ½è®¿é—®äº‹åŠ¡çš„çŠ¶æ€ã€‚è¿™å°±åƒäº‹åŠ¡æœ‰è‡ªå·±çš„ç§æœ‰åŒºåŸŸï¼Œç”¨äºå°è¯•å¯¹çŠ¶æ€çš„æ”¹å˜ï¼Œè€Œä¸–ç•Œä¸Šçš„å…¶ä»–äººåœ¨äº‹åŠ¡å®Œæˆä¹‹å‰ä¸èƒ½çŸ¥é“å®ƒä»¬ã€‚è¿™åœ¨äº‹åŠ¡ä»£ç ä¸­å¾—åˆ°äº†è¿›ä¸€æ­¥è¯´æ˜ï¼šåœ¨å®ƒç¬¬ä¸€æ¬¡æ‰“å°ä¹‹åï¼Œå®ƒå†æ¬¡å°†è®¡æ•°å™¨ä» 1 å¢åŠ åˆ° 2ï¼Œå¹¶æ‰“å°å‡ºç»“æœ 2ã€‚\näº‹åŠ¡åªæœ‰åœ¨ç»“æŸæ—¶æ‰ä¼šå°è¯•æäº¤å…¶å˜æ›´ã€‚æäº¤çš„å·¥ä½œåŸç†ç±»ä¼¼äºåŸå­çš„æ¯”è¾ƒå’Œè®¾ç½®è¯­ä¹‰ã€‚æ¯ä¸ªå¼•ç”¨éƒ½ä¼šè¢«æ£€æŸ¥ï¼Œçœ‹å®ƒåœ¨ä½ ç¬¬ä¸€æ¬¡è¯•å›¾æ”¹å˜å®ƒä¹‹åæ˜¯å¦æœ‰å˜åŒ–ã€‚å¦‚æœæœ‰ä»»ä½•ä¸ªå¼•ç”¨å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆä¸ªå¼•ç”¨éƒ½ä¸ä¼šè¢«æ›´æ–°ï¼Œäº‹åŠ¡ä¼šè¢«é‡è¯•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœäº‹åŠ¡ A å’Œäº‹åŠ¡ B åœ¨åŒä¸€æ—¶é—´è¢«å°è¯•ï¼Œå¹¶ä¸”äº‹ä»¶æŒ‰ä»¥ä¸‹é¡ºåºå‘ç”Ÿï¼Œäº‹åŠ¡ A å°†è¢«é‡è¯•ã€‚\n äº‹åŠ¡ Aï¼š alter gnome äº¤æ˜“ B: alter gnome äº¤æ˜“ Bï¼šæ”¹å˜çƒ˜å¹²æœº äº¤æ˜“ Bï¼šæ”¹å˜çƒ˜å¹²æœº äº‹åŠ¡ Bï¼šæäº¤-æˆåŠŸåœ°æ›´æ–° gnome å’Œ dryer äº‹åŠ¡ Aï¼šæ”¹å˜ dryer äº‹åŠ¡ Aï¼šæ”¹å˜çƒ˜å¹²æœº äº‹åŠ¡ Aï¼šæäº¤å¤±è´¥ï¼Œå› ä¸º dryer å’Œ gnome å·²ç»æ”¹å˜ï¼›é‡è¯•ã€‚  è¿™å°±æ˜¯ä½ çš„å·¥ä½œ! å®‰å…¨ã€ç®€å•ã€å¹¶å‘åœ°åè°ƒçŠ¶æ€å˜åŒ–ã€‚ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨! Refs è¿˜æœ‰ä¸€ä¸ªå¯ç–‘çš„é•¿è¢–å­çš„æŠ€å·§ï¼šcommuteã€‚\ncommute commuteå…è®¸ä½ åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ›´æ–°ä¸€ä¸ª ref çš„çŠ¶æ€ï¼Œå°±åƒ alterä¸€æ ·ã€‚ç„¶è€Œï¼Œå®ƒåœ¨æäº¤æ—¶çš„è¡Œä¸ºæ˜¯å®Œå…¨ä¸åŒçš„ã€‚ä¸‹é¢æ˜¯`alter\u0026rsquo;çš„è¡Œä¸ºæ–¹å¼ã€‚\n åœ¨äº‹åŠ¡ä¹‹å¤–ï¼Œè¯»å– Ref çš„å½“å‰çŠ¶æ€ã€‚ å°†å½“å‰çŠ¶æ€ä¸å¼•ç”¨è€…åœ¨äº‹åŠ¡ä¸­å¼€å§‹æ—¶çš„çŠ¶æ€è¿›è¡Œæ¯”è¾ƒã€‚ å¦‚æœä¸¤è€…ä¸åŒï¼Œåˆ™é‡è¯•äº¤æ˜“ã€‚ å¦åˆ™ï¼Œæäº¤æ”¹å˜åçš„å¼•ç”¨çŠ¶æ€ã€‚  å¦ä¸€æ–¹é¢ï¼Œcommuteåœ¨æäº¤æ—¶çš„è¡Œä¸ºæ˜¯è¿™æ ·çš„ã€‚\n åœ¨äº‹åŠ¡ä¹‹å¤–ï¼Œè¯»å–å¼•ç”¨çš„å½“å‰çŠ¶æ€ã€‚ ä½¿ç”¨å½“å‰çŠ¶æ€å†æ¬¡è¿è¡Œcommuteå‡½æ•°ã€‚ æäº¤ç»“æœã€‚  æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œcommuteå¹¶ä¸å¼ºè¿«äº‹åŠ¡é‡è¯•ã€‚è¿™å¯ä»¥å¸®åŠ©æé«˜æ€§èƒ½ï¼Œä½†é‡è¦çš„æ˜¯ï¼Œåªæœ‰å½“ä½ ç¡®å®šä½ çš„ refs ä¸å¯èƒ½æœ€ç»ˆå¤„äºæ— æ•ˆçŠ¶æ€æ—¶æ‰ä½¿ç”¨ commute'ã€‚è®©æˆ‘ä»¬çœ‹çœ‹commute`çš„å®‰å…¨å’Œä¸å®‰å…¨ä½¿ç”¨çš„ä¾‹å­ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªå®‰å…¨ä½¿ç”¨çš„ä¾‹å­ã€‚sleep-print-updateå‡½æ•°è¿”å›æ›´æ–°çš„çŠ¶æ€ï¼Œä½†åŒæ—¶ä¹Ÿç¡çœ äº†æŒ‡å®šçš„æ¯«ç§’æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶äº‹åŠ¡é‡å ã€‚å®ƒæ‰“å°äº†å®ƒè¯•å›¾æ›´æ–°çš„çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ·±å…¥äº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚\n(defn sleep-print-update [sleep-time thread-name update-fn] (fn [state] (Thread/sleep sleep-time) (println (str thread-name \u0026#34;: \u0026#34; state)) (update-fn state))) (def counter (ref 0)) (future (dosync (commute counter (sleep-print-update 100 \u0026#34;Thread A\u0026#34; inc)))) (future (dosync (commute counter (sleep-print-update 150 \u0026#34;Thread B\u0026#34; inc)))) ä¸‹é¢æ˜¯æ‰“å°çš„æ—¶é—´çº¿ã€‚\nThread A: 0 | 100ms Thread B: 0 | 150ms Thread A: 0 | 200ms Thread B: 1 | 300ms è¯·æ³¨æ„ï¼Œæœ€åæ‰“å°çš„ä¸€è¡Œæ˜¯ \u0026ldquo;çº¿ç¨‹ Bï¼š1\u0026rdquo;ã€‚è¿™æ„å‘³ç€sleep-print-updateåœ¨ç¬¬äºŒæ¬¡è¿è¡Œæ—¶æ”¶åˆ°1ä½œä¸ºçŠ¶æ€å‚æ•°ã€‚è¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºæ­¤æ—¶çº¿ç¨‹ A å·²ç»æäº¤äº†å®ƒçš„ç»“æœã€‚å¦‚æœä½ åœ¨äº‹åŠ¡è¿è¡Œåè§£é™¤å¯¹counterçš„å¼•ç”¨ï¼Œä½ ä¼šå‘ç°å…¶å€¼æ˜¯2ã€‚\nç°åœ¨ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªä¸å®‰å…¨äº¤æ¢çš„ä¾‹å­ã€‚\n(def receiver-a (ref #{})) (def receiver-b (ref #{})) (def giver (ref #{1})) (do (future (dosync (let [gift (first @giver)] (Thread/sleep 10) (commute receiver-a conj gift) (commute giver disj gift)))) (future (dosync (let [gift (first @giver)] (Thread/sleep 50) (commute receiver-b conj gift) (commute giver disj gift))))) @receiver-a ; =\u0026gt; #{1} @receiver-b ; =\u0026gt; #{1} @giver ; =\u0026gt; #{} 1è¢«èµ‹äºˆäº†receiver-aå’Œreceiver-bï¼Œä½ æœ€ç»ˆå¾—åˆ°äº†ä¸¤ä¸ª1çš„å®ä¾‹ï¼Œè¿™å¯¹ä½ çš„ç¨‹åºæ˜¯æ— æ•ˆçš„ã€‚è¿™ä¸ªä¾‹å­çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œåº”ç”¨çš„å‡½æ•°ï¼ŒåŸºæœ¬ä¸Šæ˜¯#(conj % gift)å’Œ#(disj % gift)ï¼Œæ˜¯ç”±giverçš„çŠ¶æ€æ´¾ç”Ÿçš„ã€‚ä¸€æ—¦giverå‘ç”Ÿå˜åŒ–ï¼Œæ´¾ç”Ÿçš„å‡½æ•°å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ— æ•ˆçš„çŠ¶æ€ï¼Œä½†æ˜¯commuteå¹¶ä¸å…³å¿ƒäº§ç”Ÿçš„çŠ¶æ€æ˜¯æ— æ•ˆçš„ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šæäº¤ç»“æœã€‚è¿™é‡Œçš„æ•™è®­æ˜¯ï¼Œå°½ç®¡commuteå¯ä»¥å¸®åŠ©ä½ åŠ å¿«ç¨‹åºçš„é€Ÿåº¦ï¼Œä½†ä½ å¿…é¡»æ˜æ™ºåœ°å†³å®šä½•æ—¶ä½¿ç”¨å®ƒã€‚\nç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½å¼€å§‹å®‰å…¨ã€ç†æ™ºåœ°ä½¿ç”¨ Refs äº†ã€‚å¼•ç”¨è¿˜æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«ï¼Œæˆ‘åœ¨æ­¤ä¸åšä»‹ç»ï¼Œä½†å¦‚æœä½ å¯¹å®ƒä»¬æ„Ÿåˆ°å¥½å¥‡ï¼Œä½ å¯ä»¥ç ”ç©¶ensureå‡½æ•°å’Œwrite skewç°è±¡ã€‚\næ¥ä¸‹æ¥æ˜¯æœ¬ä¹¦æ¶‰åŠçš„æœ€åä¸€ç§å‚è€ƒæ–‡çŒ®ç±»å‹ã€‚Â varsã€‚\nVars ä½ å·²ç»åœ¨ç¬¬ 6 ç« ä¸­äº†è§£äº†ä¸€äº›å…³äº vars çš„çŸ¥è¯†ã€‚ç®€å•çš„è¯´, varsæ˜¯ç¬¦å·å’Œå¯¹è±¡ä¹‹é—´çš„å…³è”ã€‚ä½ å¯ä»¥ç”¨defåˆ›å»ºæ–°çš„å˜é‡ã€‚\nå°½ç®¡ vars å¹¶ä¸åƒåŸå­å’Œ refs é‚£æ ·ç”¨æ¥ç®¡ç†çŠ¶æ€ï¼Œä½†å®ƒä»¬ç¡®å®æœ‰ä¸€äº›å¹¶å‘çš„æŠ€å·§ï¼šä½ å¯ä»¥åŠ¨æ€åœ°ç»‘å®šå®ƒä»¬ï¼Œå¹¶ä¸”å¯ä»¥æ”¹å˜å®ƒä»¬çš„æ ¹ã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åŠ¨æ€ç»‘å®šã€‚\nåŠ¨æ€ç»‘å®š å½“æˆ‘ç¬¬ä¸€æ¬¡ä»‹ç»defæ—¶ï¼Œæˆ‘æ³è¯·ä½ æŠŠå®ƒå½“ä½œå®šä¹‰ä¸€ä¸ªå¸¸é‡ã€‚äº‹å®è¯æ˜ï¼Œvars æ¯”è¿™æ›´çµæ´»ï¼šä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåŠ¨æ€çš„ varï¼Œå®ƒçš„ç»‘å®šå¯ä»¥è¢«æ”¹å˜ã€‚åŠ¨æ€å˜é‡å¯¹äºåˆ›å»ºä¸€ä¸ªå…¨å±€åç§°æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå®ƒåº”è¯¥åœ¨ä¸åŒçš„æƒ…å†µä¸‹æŒ‡ä»£ä¸åŒçš„å€¼ã€‚\nåˆ›å»ºå’Œç»‘å®šåŠ¨æ€å˜é‡ é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåŠ¨æ€ varã€‚\n(def:dynamic *notification-address* \u0026#34;dobby@elf.org\u0026#34;) æ³¨æ„è¿™é‡Œæœ‰ä¸¤ä¸ªé‡è¦çš„ç»†èŠ‚ã€‚é¦–å…ˆï¼Œä½ ç”¨^:dynamicå‘ Clojure å‘å‡ºä¿¡å·ï¼Œè¡¨æ˜ä¸€ä¸ª var æ˜¯åŠ¨æ€çš„ã€‚ç¬¬äºŒï¼Œvar çš„åå­—æ˜¯ç”±æ˜Ÿå·æ‹¬èµ·æ¥çš„ã€‚Lispers ç§°è¿™äº›ä¸ºearmuffsï¼Œè¿™å¾ˆå¯çˆ±ã€‚Clojure è¦æ±‚ä½ å°†åŠ¨æ€å˜é‡çš„åå­—ç”¨è€³ç½©æ‹¬èµ·æ¥ã€‚è¿™æœ‰åŠ©äºå‘å…¶ä»–ç¨‹åºå‘˜å‘å‡ºè¯¥å˜é‡çš„åŠ¨æ€æ€§çš„ä¿¡å·ã€‚\nä¸æ™®é€šå˜é‡ä¸åŒï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨bindingæ¥ä¸´æ—¶æ”¹å˜åŠ¨æ€å˜é‡çš„å€¼ã€‚\n(binding [*notification-address* \u0026#34;test@elf.org\u0026#34;) *notification-address*) ; =\u0026gt; \u0026#34;test@elf.org\u0026#34; ä½ ä¹Ÿå¯ä»¥å †å ç»‘å®šï¼ˆå°±åƒä½ å¯ä»¥ç”¨letï¼‰ã€‚\n(binding [*notification-address* \u0026#34;tester-1@elf.org\u0026#34;] (println *notification-address*) (binding [*notification-address* \u0026#34;tester-2@elf.org\u0026#34;] (println *notification-address*)) (println *notification-address*)) ; =\u0026gt; tester-1@elf.org ; =\u0026gt; tester-2@elf.org ; =\u0026gt; tester-1@elf.org ç°åœ¨ä½ çŸ¥é“äº†å¦‚ä½•åŠ¨æ€ç»‘å®šä¸€ä¸ª varï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªçœŸå®ä¸–ç•Œçš„åº”ç”¨ã€‚\nåŠ¨æ€ var çš„ç”¨é€” æ¯”æ–¹è¯´ï¼Œä½ æœ‰ä¸€ä¸ªå‘é€é€šçŸ¥é‚®ä»¶çš„å‡½æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åªæ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†å‡è£…è¿™ä¸ªå‡½æ•°çœŸçš„å‘é€äº†ç”µå­é‚®ä»¶ã€‚\n(defn notify [message] (str \u0026#34;TO: \u0026#34; *notification-address* \u0026#34;\\n\u0026#34; \u0026#34;MESSAGE: \u0026#34; message)) (notify \u0026#34;I fell.\u0026#34;) ; =\u0026gt; \u0026#34;TO: dobby@elf.org\\nMESSAGE: I fell.\u0026#34; å¦‚æœä½ æƒ³æµ‹è¯•è¿™ä¸ªå‡½æ•°ï¼Œè€Œä¸åœ¨æ¯æ¬¡ä½ çš„è§„æ ¼è¿è¡Œæ—¶å‘å¤šæ¯”å‘é€åƒåœ¾é‚®ä»¶ï¼Œæ€ä¹ˆåŠï¼Ÿè¿™æ—¶å°±éœ€è¦bindingæ¥å¸®å¿™äº†ã€‚\n(binding [*notification-address* \u0026#34;test@elf.org\u0026#34;] (notify \u0026#34;test!\u0026#34;)) ; =\u0026gt; \u0026#34;TO: test@elf.org\\nMESSAGE: test!\u0026#34; å½“ç„¶ï¼Œä½ å¯ä»¥ç›´æ¥å®šä¹‰notifyæ¥æ¥å—ä¸€ä¸ªç”µå­é‚®ä»¶åœ°å€ä½œä¸ºå‚æ•°ã€‚äº‹å®ä¸Šï¼Œè¿™é€šå¸¸æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚ä¸ºä»€ä¹ˆè¦ç”¨åŠ¨æ€å˜é‡æ¥ä»£æ›¿å‘¢ï¼Ÿ\nåŠ¨æ€å˜é‡æœ€å¸¸è¢«ç”¨æ¥å‘½åä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°çš„ç›®æ ‡èµ„æºã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å¯ä»¥æŠŠç”µå­é‚®ä»¶åœ°å€çœ‹ä½œæ˜¯ä½ å†™ç»™å®ƒçš„èµ„æºã€‚äº‹å®ä¸Šï¼ŒClojure ä¸ºè¿™ä¸ªç›®çš„æä¾›äº†å¤§é‡çš„å†…ç½®åŠ¨æ€å˜é‡ã€‚Â ä¾‹å¦‚ï¼Œ\u0026quot;out\u0026ldquo;ä»£è¡¨æ‰“å°æ“ä½œçš„æ ‡å‡†è¾“å‡ºã€‚åœ¨ä½ çš„ç¨‹åºä¸­ï¼Œä½ å¯ä»¥é‡æ–°ç»‘å®š*out*ï¼Œä½¿æ‰“å°è¯­å¥å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå°±åƒè¿™æ ·ã€‚\n(binding [*out* (clojure.java.io/writer \u0026#34;print-output\u0026#34;)] (println \u0026#34;A man who carries a cat by the tail learns something he can learn in no other way. -- Mark Twain\u0026#34;)) (slurp \u0026#34;print-output\u0026#34;) ; =\u0026gt; A man who carries a cat by the tail learns something he can learn in no other way. -- Mark Twain è¿™æ¯”æ¯æ¬¡è°ƒç”¨ \u0026ldquo;println \u0026ldquo;éƒ½ä¼ é€’ä¸€ä¸ªè¾“å‡ºç›®çš„åœ°è¦è½»æ¾å¾—å¤šã€‚åŠ¨æ€å˜é‡æ˜¯ä¸€ç§æŒ‡å®šé€šç”¨èµ„æºçš„å¥½æ–¹æ³•ï¼ŒåŒæ—¶ä¿ç•™äº†åœ¨ç‰¹æ®Šæƒ…å†µä¸‹æ”¹å˜å®ƒçš„çµæ´»æ€§ã€‚\nåŠ¨æ€å˜é‡ä¹Ÿè¢«ç”¨äºé…ç½®ã€‚ä¾‹å¦‚ï¼Œå†…ç½®çš„ var*print-length*å…è®¸ä½ æŒ‡å®š Clojure åº”è¯¥æ‰“å°ä¸€ä¸ªé›†åˆä¸­çš„å¤šå°‘ä¸ªé¡¹ç›®ã€‚\n(println [\u0026#34;Print\u0026#34; \u0026#34;all\u0026#34; \u0026#34;the\u0026#34; \u0026#34;things!\u0026#34;]) ; =\u0026gt; [Print all the things!] (binding [*print-length* 1] (println [\u0026#34;Print\u0026#34; \u0026#34;just\u0026#34; \u0026#34;one!\u0026#34;])) ; =\u0026gt; [Print ...] æœ€åï¼Œå¯ä»¥å¯¹å·²ç»ç»‘å®šçš„åŠ¨æ€å˜é‡è¿›è¡Œset!ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ æ‰€çœ‹åˆ°çš„ä¾‹å­å…è®¸ä½ å°†ä¿¡æ¯è¾“å…¥åˆ°ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸éœ€è¦å°†ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè€Œset!å…è®¸ä½ å°†ä¿¡æ¯è¾“å‡ºåˆ°ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸éœ€è¦å°†å…¶ä½œä¸ºå‚æ•°è¿”å›ã€‚\nä¾‹å¦‚ï¼Œå‡è®¾ä½ æ˜¯ä¸€ä¸ªå¿ƒçµæ„Ÿåº”è€…ï¼Œä½†ä½ çš„è¯»å¿ƒèƒ½åŠ›æœ‰ç‚¹å»¶è¿Ÿã€‚ä½ åªæœ‰åœ¨äº†è§£åˆ«äººçš„æƒ³æ³•å¯¹ä½ æœ‰ç”¨çš„æ—¶å€™ï¼Œæ‰èƒ½è¯»æ‡‚ä»–ä»¬çš„æƒ³æ³•ã€‚ä¸è¿‡ï¼Œä¸è¦è§‰å¾—å¤ªç³Ÿç³•ï¼Œä½ ä»ç„¶æ˜¯ä¸€ä¸ªå¿ƒçµæ„Ÿåº”è€…ï¼Œè¿™å¾ˆäº†ä¸èµ·ã€‚æ€»ä¹‹ï¼Œå‡è®¾ä½ æƒ³ç©¿è¿‡ä¸€åº§ç”±å·¨é­”çœ‹å®ˆçš„æ¡¥ï¼Œå¦‚æœä½ ä¸å›ç­”ä»–çš„è°œè¯­ï¼Œä»–å°±ä¼šåƒæ‰ä½ ã€‚ä»–çš„è°œè¯­æ˜¯ \u0026ldquo;æˆ‘æƒ³çš„æ˜¯ 1 å’Œ 2 ä¹‹é—´çš„å“ªä¸ªæ•°å­—ï¼Ÿ\u0026rdquo; åœ¨å·¨é­”åå™¬ä½ çš„æƒ…å†µä¸‹ï¼Œä½ è‡³å°‘å¯ä»¥çŸ¥é“å·¨é­”åˆ°åº•åœ¨æƒ³ä»€ä¹ˆè€Œæ­»ã€‚\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åˆ›å»ºäº†åŠ¨æ€ var *troll-thought*æ¥ä¼ è¾¾å·¨é­”çš„æƒ³æ³•ï¼Œä»troll-riddleå‡½æ•°ä¸­å‡ºæ¥ã€‚\n(def ^:dynamic *troll-thought* nil) (defn troll-riddle [your-answer] (let [number \u0026#34;man meat\u0026#34;] âŠ (when (thread-bound? #\u0026#39;*troll-thought*) â‹ (set! *troll-thought* number)) (if (= number your-answer) \u0026#34;TROLL: You can cross the bridge!\u0026#34; \u0026#34;TROLL: Time to eat you, succulent human!\u0026#34;))) (binding [*troll-thought* nil] (println (troll-riddle 2)) (println \u0026#34;SUCCULENT HUMAN: Oooooh! The answer was\u0026#34; *troll-thought*)) ; =\u0026gt; TROLL: Time to eat you, succulent human! ; =\u0026gt; SUCCULENT HUMAN: Oooooh! The answer was man meat ä½ åœ¨âŠå¤„ä½¿ç”¨thread-bound?å‡½æ•°æ¥æ£€æŸ¥ var æ˜¯å¦å·²ç»è¢«ç»‘å®šï¼Œå¦‚æœæ˜¯ï¼Œä½ å°±set! *troll-thought*åˆ°â‹å¤„çš„å·¨é­”çš„æ€æƒ³ã€‚\nå˜é‡åœ¨ç»‘å®šä¹‹å¤–è¿”å›åˆ°å®ƒçš„åŸå§‹å€¼ã€‚\n*troll-thought* ; =\u0026gt; nil æ³¨æ„ï¼Œä½ å¿…é¡»å°†#'*troll-thought*ï¼ˆåŒ…æ‹¬#'ï¼‰ï¼Œè€Œä¸æ˜¯troll-thoughtï¼Œä¼ é€’ç»™å‡½æ•°thread-bound?ã€‚è¿™æ˜¯å› ä¸ºthread-bound?`å°† var æœ¬èº«ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯å®ƒæ‰€æŒ‡å‘çš„å€¼ã€‚\nå•çº¿ç¨‹ç»‘å®š å…³äºç»‘å®šçš„æœ€åä¸€ç‚¹è¦æ³¨æ„ï¼šå¦‚æœä½ ä»ä¸€ä¸ªæ‰‹åŠ¨åˆ›å»ºçš„çº¿ç¨‹ä¸­è®¿é—®ä¸€ä¸ªåŠ¨æ€ç»‘å®šçš„ varï¼Œè¯¥ var å°†æ±‚å€¼ä¸ºåŸå§‹å€¼ã€‚å¦‚æœä½ æ˜¯ Clojureï¼ˆå’Œ Javaï¼‰çš„æ–°æ‰‹ï¼Œè¿™ä¸ªç‰¹æ€§ä¸ä¼šç«‹å³å‘ç”Ÿä½œç”¨ï¼›ä½ å¯ä»¥è·³è¿‡è¿™ä¸€èŠ‚ï¼Œä»¥åå†æ¥è®¨è®ºå®ƒã€‚\nå…·æœ‰è®½åˆºæ„å‘³çš„æ˜¯ï¼Œè¿™ç§ç»‘å®šè¡Œä¸ºä½¿æˆ‘ä»¬æ— æ³•åœ¨ REPL ä¸­è½»æ¾åˆ›å»ºä¸€ä¸ªæœ‰è¶£çš„æ¼”ç¤ºï¼Œå› ä¸º REPL ç»‘å®šäº†*out*ã€‚å°±å¥½åƒä½ åœ¨ REPL ä¸­è¿è¡Œçš„æ‰€æœ‰ä»£ç éƒ½è¢«éšå«åœ°åŒ…è£¹åœ¨ç±»ä¼¼(binding[out repl-printer] your-codeçš„ä¸œè¥¿ä¸­ã€‚å¦‚æœä½ åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œout`å°±ä¸ä¼šè¢«ç»‘å®šåˆ° REPL æ‰“å°æœºä¸Šã€‚\nä¸‹é¢çš„ä¾‹å­ä½¿ç”¨äº†ä¸€äº›åŸºæœ¬çš„ Java äº’æ“ä½œã€‚å³ä½¿å®ƒçœ‹èµ·æ¥å¾ˆé™Œç”Ÿï¼Œä¸‹é¢ä»£ç çš„è¦ç‚¹ä¹Ÿåº”è¯¥å¾ˆæ¸…æ¥šï¼Œä½ å°†åœ¨ç¬¬ 12 ç« ä¸­å‡†ç¡®åœ°äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€‚\nè¿™æ®µä»£ç å‘ REPL æ‰“å°è¾“å‡ºã€‚\n(.write *out* \u0026#34;prints to repl\u0026#34;) ; =\u0026gt; prints to repl ä¸‹é¢çš„ä»£ç æ²¡æœ‰æ‰“å°è¾“å‡ºåˆ° REPLï¼Œå› ä¸º*out*æ²¡æœ‰ç»‘å®šåˆ° REPL æ‰“å°æœºã€‚\n(.start (Thread. #(.write *out* \u0026#34;prints to standard out\u0026#34;))) ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨è¿™ä¸ªæ„šè ¢çš„ä»£ç æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n(let [out *out*] (.start (Thread. #(binding [*out* out] (.write *out* \u0026#34;prints to repl from thread\u0026#34;))))) æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨bound-fnï¼Œå®ƒå°†æ‰€æœ‰å½“å‰çš„ç»‘å®šå¸¦åˆ°æ–°çš„çº¿ç¨‹ä¸­ã€‚\n(.start (Thread. (bound-fn [] (.write *out* \u0026#34;prints to repl from thread\u0026#34;)))) letç»‘å®šæ•è·äº†*out*ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å­çº¿ç¨‹ä¸­é‡æ–°ç»‘å®šå®ƒï¼Œè¿™æ˜¯å¾ˆå‚»çš„ã€‚é‡ç‚¹æ˜¯ï¼Œç»‘å®šä¸ä¼šè¢«ä¼ é€’åˆ°æ‰‹åŠ¨åˆ›å»ºçš„çº¿ç¨‹ä¸­ã€‚ç„¶è€Œï¼Œå®ƒä»¬ç¡®å®è¢«ä¼ é€’ç»™äº†æœŸè´§ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ \u0026ldquo;ç»‘å®šä¼ é€’\u0026rdquo;ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ä»æœŸè´§ä¸­æ‰“å°ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¯”å¦‚è¯´ã€‚\nå…³äºåŠ¨æ€ç»‘å®šå°±åˆ°æ­¤ä¸ºæ­¢ã€‚è®©æˆ‘ä»¬æŠŠæ³¨æ„åŠ›è½¬å‘æœ€åä¸€ä¸ª var ä¸»é¢˜ï¼šæ”¹å˜ var çš„æ ¹ã€‚\næ”¹å˜å˜é‡æ ¹å€¼ å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„ var æ—¶ï¼Œä½ æä¾›çš„åˆå§‹å€¼æ˜¯å®ƒçš„æ ¹ã€‚\n(def power-source \u0026#34;hair\u0026#34;) åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ\u0026quot;å¤´å‘\u0026quot;æ˜¯power-sourceçš„æ ¹å€¼ã€‚Clojure å…è®¸ä½ ç”¨å‡½æ•°alter-var-rootæ°¸ä¹…åœ°æ”¹å˜è¿™ä¸ªæ ¹å€¼ã€‚\n(alter-var-root #\u0026#39;power-source (fn [_] \u0026#34;7-eleven parking lot\u0026#34;)) power-source ; =\u0026gt; \u0026#34;7-eleven parking lot\u0026#34; å°±åƒä½¿ç”¨swap!æ¥æ›´æ–°ä¸€ä¸ªåŸå­æˆ–alter!æ¥æ›´æ–°ä¸€ä¸ª ref ä¸€æ ·ï¼Œä½ ä½¿ç”¨alter-var-rootå’Œä¸€ä¸ªå‡½æ•°æ¥æ›´æ–°ä¸€ä¸ª var çš„çŠ¶æ€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°åªæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œä¸ä¹‹å‰çš„å€¼æ²¡æœ‰å…³ç³»ï¼Œä¸åƒalter!çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨incæ¥ä»å½“å‰çš„æ•°å­—è¡ç”Ÿå‡ºä¸€ä¸ªæ–°æ•°å­—ã€‚\nä½ å‡ ä¹ä¸ä¼šæƒ³è¿™æ ·åšã€‚ä½ å°¤å…¶ä¸æƒ³è¿™æ ·åšæ¥æ‰§è¡Œç®€å•çš„å˜é‡èµ‹å€¼ã€‚å¦‚æœä½ è¿™æ ·åšäº†ï¼Œä½ å°±ä¼šä¸é¡¾ä¸€åˆ‡åœ°æŠŠç»‘å®šçš„å˜é‡åˆ›å»ºä¸ºä¸€ä¸ªå¯å˜çš„å˜é‡ï¼Œè¿™ä¸ Clojure çš„ç†å¿µç›¸æ‚–ï¼›æœ€å¥½æ˜¯ä½¿ç”¨ä½ åœ¨ç¬¬ 5 ç« å­¦åˆ°çš„å‡½æ•°å¼ç¼–ç¨‹æŠ€æœ¯ã€‚\nä½ ä¹Ÿå¯ä»¥ç”¨with-redefsæš‚æ—¶æ”¹å˜ä¸€ä¸ª var çš„æ ¹ã€‚è¿™ä¸ç»‘å®šçš„å·¥ä½œåŸç†ç±»ä¼¼ï¼Œåªæ˜¯æ”¹å˜çš„å†…å®¹ä¼šå‡ºç°åœ¨å­çº¿ç¨‹ä¸­ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n(with-redefs [*out* *out*] (doto (Thread. #(println \u0026#34;with redefs allows me to show up in the REPL\u0026#34;)) .start .join)) with-redefså¯ä»¥ç”¨äºä»»ä½• varï¼Œè€Œä¸ä»…ä»…æ˜¯åŠ¨æ€çš„ã€‚å› ä¸ºå®ƒæœ‰å¦‚æ­¤æ·±è¿œçš„å½±å“ï¼Œä½ åº”è¯¥åªåœ¨æµ‹è¯•æ—¶ä½¿ç”¨å®ƒã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥é‡æ–°å®šä¹‰ä¸€ä¸ªä»ç½‘ç»œè°ƒç”¨ä¸­è¿”å›æ•°æ®çš„å‡½æ•°ï¼Œè¿™æ ·è¯¥å‡½æ•°å°±ä¼šè¿”å›æ¨¡æ‹Ÿæ•°æ®è€Œä¸éœ€è¦å®é™…è¿›è¡Œç½‘ç»œè¯·æ±‚ã€‚\nç°åœ¨ä½ çŸ¥é“æ‰€æœ‰å…³äº vars çš„çŸ¥è¯†äº†å§! å°½é‡ä¸è¦ç”¨å®ƒä»¬æ¥ä¼¤å®³ä½ è‡ªå·±æˆ–ä½ è®¤è¯†çš„ä»»ä½•äººã€‚\nä½¿ç”¨ pmap çš„æ— çŠ¶æ€å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæœ¬ç« çš„é‡ç‚¹æ˜¯é‚£äº›æ—¨åœ¨å‡å°‘å¹¶å‘ç¼–ç¨‹ä¸­å›ºæœ‰é£é™©çš„å·¥å…·ã€‚ä½ å·²ç»äº†è§£äº†å…±äº«è®¿é—®å¯å˜çŠ¶æ€æ‰€å¸¦æ¥çš„å±é™©ï¼Œä»¥åŠ Clojure æ˜¯å¦‚ä½•å®ç°çŠ¶æ€çš„é‡æ–°æ¦‚å¿µåŒ–ï¼Œä»è€Œå¸®åŠ©ä½ å®‰å…¨åœ°ç¼–å†™å¹¶å‘ç¨‹åºã€‚\nä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ ä¼šæƒ³æŠŠé‚£äº›å®Œå…¨ç‹¬ç«‹çš„ä»»åŠ¡å¹¶å‘åŒ–ã€‚æ²¡æœ‰å¯¹æ˜“å˜çŠ¶æ€çš„å…±äº«è®¿é—®ï¼›å› æ­¤ï¼Œå¹¶å‘è¿è¡Œè¿™äº›ä»»åŠ¡æ²¡æœ‰ä»»ä½•é£é™©ï¼Œä½ ä¹Ÿä¸å¿…è´¹å¿ƒä½¿ç”¨æˆ‘åˆšæ‰è¯´è¿‡çš„ä»»ä½•å·¥å…·ã€‚\näº‹å®è¯æ˜ï¼ŒClojure è®©ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™ä»£ç æ¥å®ç°æ— çŠ¶æ€å¹¶å‘ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†äº†è§£åˆ°pmapï¼Œå®ƒå‡ ä¹å…è´¹ä¸ºä½ æä¾›äº†å¹¶å‘æ€§èƒ½çš„å¥½å¤„ã€‚\nmapæ˜¯å¹¶è¡ŒåŒ–çš„å®Œç¾å€™é€‰è€…ï¼šå½“ä½ ä½¿ç”¨å®ƒæ—¶ï¼Œä½ æ‰€åšçš„åªæ˜¯é€šè¿‡å¯¹ç°æœ‰é›†åˆçš„æ¯ä¸ªå…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä»ç°æœ‰é›†åˆä¸­æ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°é›†åˆã€‚ä¸éœ€è¦ç»´æŠ¤çŠ¶æ€ï¼›æ¯ä¸ªå‡½æ•°çš„åº”ç”¨éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚Clojure é€šè¿‡pmapä½¿æ‰§è¡Œå¹¶è¡Œ Map å˜å¾—å®¹æ˜“ã€‚é€šè¿‡pmapï¼ŒClojure åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šå¤„ç† Map å‡½æ•°çš„æ¯ä¸ªåº”ç”¨çš„è¿è¡Œã€‚\nä¸ºäº†æ¯”è¾ƒmapå’Œpmapï¼Œæˆ‘ä»¬éœ€è¦å¤§é‡çš„ä¾‹å­æ•°æ®ï¼Œä¸ºäº†ç”Ÿæˆè¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨repeatedlyå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ‡’æƒ°åºåˆ—ã€‚æ‡’æƒ°åºåˆ—çš„å…ƒç´ æ˜¯é€šè¿‡è°ƒç”¨ä¼ é€’çš„å‡½æ•°ç”Ÿæˆçš„ï¼Œåƒè¿™æ ·ã€‚\n(defn always-1 [] 1) (take 5 (repeatedly always-1)) ; =\u0026gt; (1 1 1 1 1) ä¸‹é¢æ˜¯ä½ å¦‚ä½•åˆ›å»ºä¸€ä¸ª 0 åˆ° 9 ä¹‹é—´çš„éšæœºæ•°çš„æ‡’äººåºåˆ—ã€‚\n(take 5 (repeatedly (partial rand-int 10))) ; =\u0026gt; (1 5 0 3 4) è®©æˆ‘ä»¬ä½¿ç”¨repeatedlyæ¥åˆ›å»ºç¤ºä¾‹æ•°æ®ï¼Œè¯¥æ•°æ®ç”± 3000 ä¸ªéšæœºå­—ç¬¦ä¸²åºåˆ—ç»„æˆï¼Œæ¯ä¸ªå­—ç¬¦ä¸²é•¿ 7000 ä¸ªå­—ç¬¦ã€‚æˆ‘ä»¬å°†æ¯”è¾ƒmapå’Œpmapï¼Œç”¨å®ƒä»¬åœ¨è¿™é‡Œåˆ›å»ºçš„orc-namesåºåˆ—ä¸Šè¿è¡Œclojure.string/lowercaseã€‚\n(def alphabet-length 26) ;; Vector of chars, A-Z (def letters (mapv (comp str char (partial + 65)) (range alphabet-length))) (defn random-string \u0026#34;Returns a random string of specified length\u0026#34; [length] (apply str (take length (repeatedly #(rand-nth letters))))) (defn random-string-list [list-length string-length] (doall (take list-length (repeatedly (partial random-string string-length))))) (def orc-names (random-string-list 3000 7000)) å› ä¸ºmapå’Œpmapæ˜¯æ‡’æƒ°çš„ï¼Œæˆ‘ä»¬å¿…é¡»å¼ºè¿«å®ƒä»¬å®ç°ã€‚ä½†æˆ‘ä»¬ä¸å¸Œæœ›å°†ç»“æœæ‰“å°åˆ° REPL ä¸­ï¼Œå› ä¸ºé‚£ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚dorunå‡½æ•°åšäº†æˆ‘ä»¬éœ€è¦çš„äº‹æƒ…ï¼šå®ƒå®ç°äº†åºåˆ—ï¼Œä½†è¿”å›nilã€‚\n(time (dorun (map clojure.string/lower-case orc-names))) ; =\u0026gt; \u0026#34;Elapsed time: 270.182 msecs\u0026#34; (time (dorun (pmap clojure.string/lower-case orc-names))) ; =\u0026gt; \u0026#34;Elapsed time: 147.562 msecs\u0026#34; ç”¨mapä¸²è¡Œæ‰§è¡Œçš„æ—¶é—´æ˜¯pmapçš„ 1.8 å€ï¼Œè€Œä½ æ‰€è¦åšçš„åªæ˜¯å¢åŠ ä¸€ä¸ªé¢å¤–çš„å­—æ¯ ä½ çš„æ€§èƒ½å¯èƒ½ä¼šæ›´å¥½ï¼Œè¿™å–å†³äºä½ çš„è®¡ç®—æœºæœ‰å¤šå°‘ä¸ªå†…æ ¸ï¼›è¿™æ®µä»£ç æ˜¯åœ¨åŒæ ¸æœºå™¨ä¸Šè¿è¡Œçš„ã€‚\nä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆå¹¶è¡Œç‰ˆæœ¬æ‰€èŠ±çš„æ—¶é—´ä¸æ­£å¥½æ˜¯ä¸²è¡Œç‰ˆæœ¬çš„ä¸€åŠã€‚æ¯•ç«Ÿï¼Œä¸¤ä¸ªæ ¸å¿ƒçš„æ—¶é—´åº”è¯¥åªæœ‰å•æ ¸å¿ƒçš„ä¸€åŠï¼Œä¸æ˜¯å—ï¼ŸåŸå› æ˜¯ï¼Œåœ¨åˆ›å»ºå’Œåè°ƒçº¿ç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œæ€»æ˜¯ä¼šæœ‰ä¸€äº›å¼€é”€ã€‚æœ‰æ—¶ï¼Œäº‹å®ä¸Šï¼Œè¿™ç§å¼€é”€æ‰€èŠ±è´¹çš„æ—¶é—´ä¼šä½¿æ¯ä¸ªå‡½æ•°åº”ç”¨çš„æ—¶é—´ç›¸å½¢è§ç»Œï¼Œpmap'å®é™…ä¸Šä¼šæ¯”map\u0026rsquo;èŠ±è´¹æ›´å¤šæ—¶é—´ã€‚å›¾ 10-3 æ˜¾ç¤ºäº†ä½ å¦‚ä½•èƒ½ç›´è§‚åœ°çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚\nå›¾ 10-3ï¼šå¹¶è¡ŒåŒ–å¼€é”€ä¼šä½¿ä»»åŠ¡æ—¶é—´ç›¸å½¢è§ç»Œï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚\nå¦‚æœæˆ‘ä»¬å¯¹ 20000 ä¸ªç¼©å†™çš„å…½äººåå­—è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼Œæ¯ä¸ª 300 ä¸ªå­—ç¬¦çš„é•¿åº¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°è¿™ç§æ•ˆæœçš„ä½œç”¨ã€‚\n(def orc-name-abbrevs (random-string-list 20000 300)) (time (dorun (map clojure.string/lower-case orc-name-abbrevs))) ; =\u0026gt; \u0026#34;Elapsed time: 78.23 msecs\u0026#34; (time (dorun (pmap clojure.string/lower-case orc-name-abbrevs))) ; =\u0026gt; \u0026#34;Elapsed time: 124.727 msecs\u0026#34; ç°åœ¨pmapå®é™…ä¸Šéœ€è¦ 1.6 å€çš„*æ—¶é—´ã€‚\nè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯å¢åŠ ç²’åº¦ï¼Œæˆ–è€…è¯´æ¯ä¸ªå¹¶è¡ŒåŒ–ä»»åŠ¡æ‰€åšçš„å·¥ä½œé‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»»åŠ¡æ˜¯å¯¹é›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ åº”ç”¨ Map å‡½æ•°ã€‚ç²’åº¦ä¸æ˜¯ç”¨ä»»ä½•æ ‡å‡†å•ä½æ¥è¡¡é‡çš„ï¼Œä½†ä½ ä¼šè¯´pmapçš„ç²’åº¦é»˜è®¤æ˜¯ 1ã€‚å°†ç²’åº¦å¢åŠ åˆ° 2 æ„å‘³ç€ä½ å°† Map å‡½æ•°åº”ç”¨äºä¸¤ä¸ªå…ƒç´ ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªï¼Œæ‰€ä»¥ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹æ­£åœ¨åšæ›´å¤šçš„å·¥ä½œã€‚å›¾ 10-4 æ˜¾ç¤ºäº†å¢åŠ ç²’åº¦æ˜¯å¦‚ä½•æé«˜æ€§èƒ½çš„ã€‚\nå›¾ 10-4ï¼šå¯è§†åŒ–çš„ç²’åº¦ä¸å¹¶è¡ŒåŒ–å¼€é”€çš„å…³ç³»\nä¸ºäº†åœ¨ Clojure ä¸­å®ç°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨partition-allä½¿æ¯ä¸ªçº¿ç¨‹å¯¹å¤šä¸ªå…ƒç´ åº”ç”¨clojure.string/lower-caseï¼Œè€Œä¸æ˜¯ä»…ä»…ä¸€ä¸ªå…ƒç´ ï¼Œæ¥å¢åŠ ç²’åº¦ã€‚Â partition-allæ¥æ”¶ä¸€ä¸ª seqï¼Œå¹¶å°†å…¶åˆ†æˆæŒ‡å®šé•¿åº¦çš„ seqã€‚\n(def numbers [1 2 3 4 5 6 7 8 9 10]) (partition-all 3 numbers) ; =\u0026gt; ((1 2 3) (4 5 6) (7 8 9) (10)) ç°åœ¨å‡è®¾ä½ å¼€å§‹æ—¶çš„ä»£ç æ˜¯è¿™æ ·çš„ã€‚\n(pmap inc numbers) åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé¢—ç²’å¤§å°æ˜¯ 1ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½å¯¹ä¸€ä¸ªå…ƒç´ åº”ç”¨äº†incã€‚\nç°åœ¨å‡è®¾ä½ æŠŠä»£ç æ”¹æˆè¿™æ ·ã€‚\n(pmap (fn [number-group] (doall (map inc number-group)) (partition-all 3 numbers)) ; =\u0026gt; ((2 3 4) (5 6 7) (8 9 10) (11)) è¿™é‡Œæœ‰å‡ ä»¶äº‹è¦åšã€‚é¦–å…ˆï¼Œä½ ç°åœ¨å°†é¢—ç²’å¤§å°å¢åŠ åˆ°äº†ä¸‰ä¸ªï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹ç°åœ¨æ‰§è¡Œäº†ä¸‰ä¸ªincå‡½æ•°çš„åº”ç”¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªã€‚ç¬¬äºŒï¼Œæ³¨æ„ä½ å¿…é¡»åœ¨ Map å‡½æ•°ä¸­è°ƒç”¨doallã€‚è¿™è¿«ä½¿ç”±(map inc number-group)è¿”å›çš„æ‡’æƒ°åºåˆ—åœ¨çº¿ç¨‹å†…å®ç°ã€‚ç¬¬ä¸‰ï¼Œæˆ‘ä»¬éœ€è¦å–æ¶ˆå¯¹ç»“æœçš„åˆ†ç»„ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚\n(apply concat (pmap (fn [number-group] (doall (map inc number-group))) (partition-all 3 numbers))) ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ  orc åç§°ä½ ase åŒ–çš„ç²’åº¦ï¼Œè¿™æ ·æ¯ä¸ªçº¿ç¨‹åœ¨ 1000 ä¸ªåç§°ä¸Šè¿è¡Œclojure.string/lower-caseè€Œä¸æ˜¯åªæœ‰ä¸€ä¸ªã€‚\n(time (dorun (apply concat (pmap (fn [name] (doall (map clojure.string/lower-case name))) (partition-all 1000 orc-name-abbrevs))))) ; =\u0026gt; \u0026#34;Elapsed time: 44.677 msecs\u0026#34; å¹¶è¡Œç‰ˆæœ¬å†æ¬¡èŠ±è´¹äº†è¿‘ä¸€åŠçš„æ—¶é—´ã€‚ä¸ºäº†å¥½ç©ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæŠ€æœ¯æ¦‚æ‹¬ä¸ºä¸€ä¸ªå«åš \u0026ldquo;ppmap \u0026ldquo;çš„å‡½æ•°ï¼Œä»£è¡¨åˆ†åŒºçš„ pmapã€‚å®ƒå¯ä»¥æ¥æ”¶ä¸€ä¸ªä»¥ä¸Šçš„é›†åˆï¼Œå°±åƒmapä¸€æ ·ã€‚\n(defn ppmap \u0026#34;Partitioned pmap, for grouping map ops together to make parallel overhead worthwhile\u0026#34; [grain-size f \u0026amp; colls] (apply concat (apply pmap (fn [\u0026amp; pgroups] (doall (apply map f pgroups))) (map (partial partition-all grain-size) colls)))) (time (dorun (ppmap 1000 clojure.string/lower-case orc-name-abbrevs))) ; =\u0026gt; \u0026#34;Elapsed time: 44.902 msecs\u0026#34; æˆ‘ä¸çŸ¥é“ä½ æ€ä¹ˆæƒ³çš„ï¼Œä½†æˆ‘è§‰å¾—è¿™ä¸œè¥¿å°±æ˜¯å¥½ç©ã€‚è¦æƒ³è·å¾—æ›´å¤šçš„ä¹è¶£ï¼Œå¯ä»¥çœ‹çœ‹ clojure.core.reducers åº“ï¼ˆhttp://clojure.org/reducers/ï¼‰ã€‚Â è¿™ä¸ªåº“æä¾›äº† seq å‡½æ•°çš„æ›¿ä»£å®ç°ï¼Œå¦‚mapå’Œreduceï¼Œé€šå¸¸æ¯”å®ƒä»¬åœ¨clojure.coreä¸­çš„è¡¨äº²æ›´å¿«ã€‚å…¶ä»£ä»·æ˜¯å®ƒä»¬å¹¶ä¸æ‡’æƒ°ã€‚æ€»çš„æ¥è¯´ï¼Œclojure.core.reducers åº“ä¸ºåˆ›å»ºå’Œä½¿ç”¨ppmapè¿™æ ·çš„å‡½æ•°æä¾›äº†ä¸€ç§æ›´ç²¾ç»†å’Œå¯ç»„åˆçš„æ–¹å¼ã€‚\næ‘˜è¦ åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦åˆ°äº†æ¯”å¤§å¤šæ•°äººæ›´å¤šçš„å…³äºå®‰å…¨å¤„ç†å¹¶å‘ä»»åŠ¡çš„çŸ¥è¯†ã€‚ä½ äº†è§£äº†æ”¯æ’‘ Clojure å¼•ç”¨ç±»å‹çš„å½¢è€Œä¸Šå­¦ã€‚åœ¨ Clojure çš„å½¢è€Œä¸Šå­¦ä¸­ï¼ŒçŠ¶æ€æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„èº«ä»½å€¼ï¼Œè€Œèº«ä»½æ˜¯æŒ‡ç”±æŸä¸ªè¿‡ç¨‹äº§ç”Ÿçš„ä¸€è¿ä¸²å€¼çš„ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼ã€‚å€¼æ˜¯åŸå­æ€§çš„ï¼Œå°±åƒæ•°å­—æ˜¯åŸå­æ€§çš„ä¸€æ ·ã€‚å®ƒä»¬æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯ä»¥å®‰å…¨åœ°å¹¶å‘å·¥ä½œï¼›ä½ ä¸å¿…æ‹…å¿ƒåœ¨ä½ ä½¿ç”¨å®ƒä»¬æ—¶å…¶ä»–çº¿ç¨‹ä¼šæ”¹å˜å®ƒä»¬ã€‚\nåŸå­å¼•ç”¨ç±»å‹å…è®¸ä½ åˆ›å»ºä¸€ä¸ªèº«ä»½ï¼Œä½ å¯ä»¥ä½¿ç”¨swap!å’Œreset!å®‰å…¨åœ°æ›´æ–°å¼•ç”¨æ–°å€¼ã€‚å½“ä½ æƒ³ä½¿ç”¨äº‹åŠ¡è¯­ä¹‰æ›´æ–°å¤šä¸ªèº«ä»½æ—¶ï¼Œref å¼•ç”¨ç±»å‹å¾ˆæ–¹ä¾¿ï¼Œä½ ç”¨alter!å’Œcommute!æ›´æ–°å®ƒã€‚\næ­¤å¤–ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•é€šè¿‡ä½¿ç”¨pmapå’Œ core.reducers åº“è¿›è¡Œæ— çŠ¶æ€æ•°æ®è½¬æ¢æ¥æé«˜æ€§èƒ½ã€‚å‘œå‘¼!\nç»ƒä¹    åˆ›å»ºä¸€ä¸ªåˆå§‹å€¼ä¸º 0 çš„åŸå­ï¼Œä½¿ç”¨swap!å°†å…¶é€’å¢å‡ æ¬¡ï¼Œç„¶åå–æ¶ˆå¼•ç”¨ã€‚\n  åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨æœŸè´§æ¥å¹¶è¡Œå¤„ç†ä»*http://www.braveclojure.com/random-quote*ä¸‹è½½éšæœºæŠ¥ä»·çš„ä»»åŠ¡ï¼Œä½¿ç”¨(slurp \u0026quot;http://www.braveclojure.com/random-quote\u0026quot;)ã€‚æœŸè´§åº”è¯¥æ›´æ–°ä¸€ä¸ªåŸå­ï¼ŒæŒ‡çš„æ˜¯æ‰€æœ‰å¼•è¯­çš„æ€»å­—æ•°ã€‚è¯¥å‡½æ•°å°†æŠŠè¦ä¸‹è½½çš„å¼•è¯­æ•°é‡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›åŸå­çš„æœ€ç»ˆå€¼ã€‚è¯·è®°ä½ï¼Œåœ¨è¿”å›åŸå­çš„æœ€ç»ˆå€¼ä¹‹å‰ï¼Œä½ éœ€è¦ç¡®ä¿æ‰€æœ‰çš„æœŸè´§å·²ç»å®Œæˆã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•è°ƒç”¨å®ƒå’Œä¸€ä¸ªç¤ºä¾‹ç»“æœã€‚\n(quote-word-count 5) ; =\u0026gt; {\u0026#34;ochre\u0026#34; 8, \u0026#34;smoothie\u0026#34; 2}   åœ¨ä¸€ä¸ªæ¸¸æˆä¸­åˆ›å»ºä¸¤ä¸ªè§’è‰²çš„ä»£è¡¨ã€‚ç¬¬ä¸€ä¸ªè§’è‰²æœ‰ 15 ä¸ªå‘½ä¸­ç‡ï¼Œæ€»å…±æœ‰ 40 ä¸ªã€‚ç¬¬äºŒä¸ªè§’è‰²åœ¨ä»–çš„åº“å­˜ä¸­æœ‰ä¸€ä¸ªæ²»ç–—è¯æ°´ã€‚ä½¿ç”¨å‚ç…§ç‰©å’Œäº¤æ˜“æ¥æ¨¡æ‹Ÿæ²»ç–—è¯æ°´çš„æ¶ˆè€—å’Œç¬¬ä¸€ä¸ªè§’è‰²çš„æ²»ç–—ã€‚\n  ","permalink":"https://zhenfeng-zhu.github.io/post/chapter10/","summary":"Clojure Metaphysics: åŸå­ã€Refsã€Vars å’Œæ‹¥æŠ±åƒµå°¸ ä¸‰ä¸ªå¹¶å‘æ€§çš„å°å¦–ç²¾éƒ½æ˜¯ä»åŒä¸€ä¸ªé‚ªæ¶çš„å‘é‡Œç”Ÿå‡ºæ¥çš„ï¼šå¯¹å¯å˜çŠ¶æ€çš„å…±äº«è®¿é—®ã€‚ä½ å¯ä»¥åœ¨ç¬¬ä¹ç« çš„å¼•ç”¨å•å…ƒè®¨è®ºä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚å½“ä¸¤ä¸ªçº¿ç¨‹å¯¹å¼•ç”¨å•å…ƒè¿›è¡Œä¸åè°ƒçš„æ›´æ”¹æ—¶ï¼Œç»“æœæ˜¯ä¸å¯é¢„æµ‹çš„ã€‚\nRich Hickey è®¾è®¡ Clojure æ˜¯ä¸ºäº†ä¸“é—¨è§£å†³å…±äº«è®¿é—®æ˜“å˜çŠ¶æ€æ‰€äº§ç”Ÿçš„é—®é¢˜ã€‚äº‹å®ä¸Šï¼ŒClojure ä½“ç°äº†ä¸€ç§éå¸¸æ¸…æ™°çš„çŠ¶æ€æ¦‚å¿µï¼Œä½¿å…¶åœ¨æœ¬è´¨ä¸Šæ¯”å¤§å¤šæ•°æµè¡Œçš„ç¼–ç¨‹è¯­è¨€æ›´å®‰å…¨ã€‚å®ƒæ˜¯å®‰å…¨çš„ï¼Œä¸€ç›´åˆ°å®ƒçš„meta-freakin-physicsã€‚\nåœ¨æœ¬ç« ä¸­ï¼Œä½ å°†äº†è§£ Clojure çš„åº•å±‚å½¢è€Œä¸Šå­¦ï¼Œä¸å…¸å‹çš„é¢å‘å¯¹è±¡ï¼ˆOOï¼‰è¯­è¨€çš„å½¢è€Œä¸Šå­¦ç›¸æ¯”è¾ƒã€‚å­¦ä¹ è¿™ç§å“²å­¦å°†ä½¿ä½ å‡†å¤‡å¥½å¤„ç† Clojure å‰©ä¸‹çš„å¹¶å‘å·¥å…·ï¼Œatomã€refå’Œvarå¼•ç”¨ç±»å‹ã€‚(Clojure è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„å¼•ç”¨ç±»å‹ï¼Œagentsï¼Œæœ¬ä¹¦æ²¡æœ‰æ¶‰åŠã€‚) è¿™äº›ç±»å‹ä¸­çš„æ¯ä¸€ä¸ªéƒ½èƒ½è®©ä½ å®‰å…¨åœ°åŒæ—¶æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹æ“ä½œã€‚ä½ è¿˜ä¼šå­¦åˆ°ä¸€äº›ç®€å•çš„æ–¹æ³•ï¼Œä½¿ä½ çš„ç¨‹åºæ›´æœ‰æ•ˆç‡ï¼Œè€Œä¸éœ€è¦å¼•å…¥çŠ¶æ€ã€‚\nå½¢è€Œä¸Šå­¦è¯•å›¾ç”¨æœ€å¹¿æ³›çš„æœ¯è¯­æ¥å›ç­”ä¸¤ä¸ªåŸºæœ¬é—®é¢˜ã€‚\n é‚£é‡Œæœ‰ä»€ä¹ˆï¼Ÿ å®ƒæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ  ä¸ºäº†å¼•å‡º Clojure å’Œ OO è¯­è¨€ä¹‹é—´çš„å·®å¼‚ï¼Œæˆ‘å°†è§£é‡Šä¸¤ç§ä¸åŒçš„æ‹¥æŠ±åƒµå°¸çš„å»ºæ¨¡æ–¹å¼ã€‚ä¸æ™®é€šçš„åƒµå°¸ä¸åŒï¼Œæ‹¥æŠ±åƒµå°¸å¹¶ä¸æƒ³è¦åå™¬ä½ çš„å¤§è„‘ã€‚å®ƒåªæƒ³ç”¨å‹ºå­èˆ€ä½ ï¼Œä¹Ÿè®¸è¿˜æƒ³é—»é—»ä½ çš„è„–å­ã€‚è¿™ä½¿å¾—å®ƒçš„ä¸æ­»ã€æ‘‡æ™ƒã€è…çƒ‚çš„çŠ¶æ€æ›´åŠ æ‚²æƒ¨ã€‚ä½ æ€ä¹ˆèƒ½è¯•å›¾æ€æ­»åªæƒ³è¦çˆ±çš„ä¸œè¥¿å‘¢ï¼Ÿè°æ˜¯è¿™é‡ŒçœŸæ­£çš„æ€ªç‰©ï¼Ÿ\né¢å‘å¯¹è±¡çš„å½¢è€Œä¸Šå­¦ OO å½¢è€Œä¸Šå­¦å°†æ‹¥æŠ±åƒµå°¸è§†ä¸ºå­˜åœ¨äºä¸–ç•Œä¸Šçš„ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„å±æ€§å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ”¹å˜ï¼Œä½†å®ƒä»ç„¶è¢«å½“ä½œä¸€ä¸ªå•ä¸€çš„ã€ä¸å˜çš„å¯¹è±¡ã€‚å¦‚æœè¿™çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå®Œå…¨æ˜æ˜¾çš„ã€æ²¡æœ‰äº‰è®®çš„åƒµå°¸å½¢è€Œä¸Šå­¦çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å¯èƒ½æ²¡æœ‰åœ¨å“²å­¦å…¥é—¨è¯¾ä¸ŠèŠ±å‡ ä¸ªå°æ—¶æ¥äº‰è®ºä¸€æŠŠæ¤…å­çš„å­˜åœ¨æ„å‘³ç€ä»€ä¹ˆï¼Œä»¥åŠä»€ä¹ˆçœŸæ­£ä½¿å®ƒé¦–å…ˆæˆä¸ºä¸€æŠŠæ¤…å­ã€‚\næ£˜æ‰‹çš„éƒ¨åˆ†æ˜¯ï¼Œæ‹¥æŠ±çš„åƒµå°¸æ€»æ˜¯åœ¨å˜åŒ–ã€‚å®ƒçš„èº«ä½“æ…¢æ…¢æ¶åŒ–ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒå¯¹æ‹¥æŠ±çš„ä¸ç­æ¸´æœ›è¶Šæ¥è¶Šå¼ºçƒˆã€‚åœ¨ OO æœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬ä¼šè¯´æ‹¥æŠ±åƒµå°¸æ˜¯ä¸€ä¸ªå…·æœ‰å¯æ”¹å˜çŠ¶æ€çš„å¯¹è±¡ï¼Œå®ƒçš„çŠ¶æ€æ˜¯ä¸æ–­æ³¢åŠ¨çš„ã€‚ä½†æ˜¯ä¸ç®¡è¿™ä¸ªåƒµå°¸æœ‰å¤šå¤§çš„å˜åŒ–ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠå®ƒè®¤å®šä¸ºåŒä¸€ä¸ªåƒµå°¸ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åœ¨ Ruby ä¸­å¯¹æŠ±å›¢åƒµå°¸è¿›è¡Œå»ºæ¨¡å’Œäº¤äº’ã€‚\nclass CuddleZombie # attr_accessor is just a shorthand way for creating getters and # setters for the listed instance variables attr_accessor :cuddle_hunger_level, :percent_deteriorated def initialize(cuddle_hunger_level = 1, percent_deteriorated = 0) self.cuddle_hunger_level = cuddle_hunger_level self.percent_deteriorated = percent_deteriorated end end fred = CuddleZombie.","title":"Chapter10 å½¢è€Œä¸Šå­¦"},{"content":"å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹çš„ç¥åœ£è‰ºæœ¯ å¦‚æœæˆ‘æ˜¯ä¸€ä¸ªåº„å›­çš„ä¸»äººï¼Œè€Œä½ æ˜¯æˆ‘çš„ç»§æ‰¿äººï¼Œæˆ‘ä¼šåœ¨ä½ çš„ç¬¬ 13 ä¸ªå‘½åæ—¥è®©ä½ åä¸‹æ¥ï¼Œå‘Šè¯‰ä½ ï¼š\u0026ldquo;è®¡ç®—çš„ä¸–ç•Œæ­£åœ¨æ”¹å˜ï¼Œå°å§‘å¨˜ï¼Œä½ å¿…é¡»ä¸ºå¤šæ ¸å¤„ç†å™¨çš„æ–°ä¸–ç•Œåšå¥½å‡†å¤‡ï¼Œä»¥å…ä½ è¢«å®ƒè·µè¸ã€‚\n\u0026ldquo;å¥½å¥½å¬ç€ã€‚è¿‘å¹´æ¥ï¼ŒCPU çš„æ—¶é’Ÿé€Ÿåº¦å‡ ä¹æ²¡æœ‰å¢åŠ ï¼Œä½†åŒæ ¸å’Œå››æ ¸è®¡ç®—æœºå·²ç»å˜å¾—å¾ˆæ™®éã€‚ç‰©ç†å®šå¾‹æ˜¯æ®‹é…·è€Œç»å¯¹çš„ï¼Œå®ƒä»¬è¦æ±‚æé«˜æ—¶é’Ÿé€Ÿåº¦éœ€è¦æˆå€çš„åŠŸç‡ã€‚é¢†åŸŸå†…æœ€å¥½çš„å·¥ç¨‹å¸ˆä¸å¤ªå¯èƒ½å¾ˆå¿«å…‹æœè¿™ä¸€é™åˆ¶ï¼Œå¦‚æœæœ‰çš„è¯ã€‚å› æ­¤ï¼Œä½ å¯ä»¥é¢„æœŸå•å°æœºå™¨ä¸Šçš„å†…æ ¸ä¸æ–­å¢åŠ çš„è¶‹åŠ¿å°†ç»§ç»­ä¸‹å»\u0026ndash;ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½ å°†çŸ¥é“å¦‚ä½•å……åˆ†åˆ©ç”¨ç°ä»£ç¡¬ä»¶çš„æœŸæœ›ä¹Ÿæ˜¯å¦‚æ­¤ã€‚\n\u0026ldquo;åœ¨è¿™ç§æ–°æ¨¡å¼ä¸‹å­¦ä¹ ç¼–ç¨‹å°†æ˜¯æœ‰è¶£å’Œè¿·äººçš„ï¼ŒçœŸçš„ã€‚ä½†è¯·æ³¨æ„ï¼šå®ƒä¹Ÿå……æ»¡äº†å±é™©ã€‚ä½ å¿…é¡»å­¦ä¹ å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹*ï¼Œè¿™æ˜¯ä¸€é—¨ç¥åœ£çš„è‰ºæœ¯ï¼Œä½¿ä½ çš„åº”ç”¨ç»“æ„å®‰å…¨åœ°ç®¡ç†å¤šä¸ªåŒæ—¶æ‰§è¡Œçš„ä»»åŠ¡ã€‚\n\u0026ldquo;ä½ ä»å¯¹å¹¶å‘å’Œå¹¶è¡Œæ¦‚å¿µçš„æ¦‚è¿°å¼€å§‹å­¦ä¹ è¿™é—¨è‰ºæœ¯ã€‚ç„¶åï¼Œä½ å°†å­¦ä¹ å›°æ‰°æ¯ä¸ªä»ä¸šè€…çš„ä¸‰ä¸ªå°å¦–ç²¾ï¼šå‚è€ƒå•å…ƒã€äº’æ–¥å’ŒçŸ®äººç‹‚æˆ˜å£«ã€‚ä½ è¿˜å°†å­¦ä¹ ä¸‰ç§æœ‰åŠ©äºä½ çš„å·¥å…·ï¼šFutureã€è®¸è¯ºå’Œå»¶è¿Ÿ\u0026rdquo;ã€‚\nç„¶åæˆ‘ä¼šç”¨é”®ç›˜æ‹æ‹ä½ çš„è‚©è†€ï¼Œç¤ºæ„ä½ å¯ä»¥å¼€å§‹äº†ã€‚\nå¹¶å‘å’Œå¹¶è¡Œçš„æ¦‚å¿µ å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹åœ¨ç¨‹åºæ‰§è¡Œçš„å„ä¸ªå±‚é¢éƒ½æ¶‰åŠåˆ°å¾ˆå¤šæ··ä¹±çš„ç»†èŠ‚ï¼Œä»ç¡¬ä»¶åˆ°æ“ä½œç³»ç»Ÿï¼Œåˆ°ç¼–ç¨‹è¯­è¨€åº“ï¼Œå†åˆ°ä»ä½ çš„å†…å¿ƒæ¶Œå‡ºçš„ã€è½åœ¨ç¼–è¾‘å™¨ä¸­çš„ä»£ç ã€‚ä½†åœ¨ä½ ä¸ºè¿™äº›ç»†èŠ‚çƒ¦æ¼ä¹‹å‰ï¼Œåœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘å°†ä»‹ç»å›´ç»•å¹¶å‘å’Œå¹¶è¡Œçš„é«˜çº§æ¦‚å¿µã€‚\nç®¡ç†å¤šä¸ªä»»åŠ¡ä¸åŒæ—¶æ‰§è¡Œä»»åŠ¡ å¹¶å‘æŒ‡çš„æ˜¯åœ¨åŒä¸€æ—¶é—´ç®¡ç†ä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡ã€‚Â ä»»åŠ¡åªæ˜¯æ„å‘³ç€ \u0026ldquo;éœ€è¦å®Œæˆçš„äº‹æƒ…\u0026rdquo;ï¼Œå®ƒå¹¶ä¸æ„å‘³ç€ä»»ä½•æœ‰å…³ç¡¬ä»¶æˆ–è½¯ä»¶çš„å®ç°ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ Lady Gaga çš„æ­Œæ›²ã€Šç”µè¯ã€‹æ¥è¯´æ˜å¹¶å‘æ€§ã€‚Gaga å”±é“\n I cannot text you with a drink in my hand, eh\n è¿™é‡Œï¼Œå¥¹åœ¨è§£é‡Šå¥¹åªèƒ½ç®¡ç†ä¸€ä¸ªä»»åŠ¡ï¼ˆå–é…’ï¼‰ã€‚å¥¹æ–­ç„¶æ‹’ç»äº†å¥¹å¯ä»¥å¤„ç†ä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡çš„å»ºè®®ã€‚ç„¶è€Œï¼Œå¦‚æœå¥¹å†³å®šåŒæ—¶å¤„ç†ä»»åŠ¡ï¼Œå¥¹ä¼šå”±æ­Œã€‚\n I will put down this drink to text you, then put my phone away and continue drinking, eh\n åœ¨è¿™ä¸ªå‡è®¾çš„å®‡å®™ä¸­ï¼ŒLady Gaga æ­£åœ¨å¤„ç†ä¸¤ä¸ªä»»åŠ¡ï¼šå–é…’å’Œå‘çŸ­ä¿¡ã€‚ç„¶è€Œï¼Œå¥¹å¹¶æ²¡æœ‰åŒæ—¶æ‰§è¡Œè¿™ä¸¤é¡¹ä»»åŠ¡ã€‚ç›¸åï¼Œå¥¹åœ¨è¿™ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œæˆ–è€…è¯´æ˜¯äº¤é”™ã€‚è¯·æ³¨æ„ï¼Œåœ¨äº¤é”™è¿‡ç¨‹ä¸­ï¼Œä½ ä¸å¿…åœ¨åˆ‡æ¢ä¹‹å‰å®Œå…¨å®Œæˆä¸€é¡¹ä»»åŠ¡ï¼šGaga å¯ä»¥æ‰“ä¸€ä¸ªå­—ï¼Œæ”¾ä¸‹æ‰‹æœºï¼Œæ‹¿èµ·é¥®æ–™å–ä¸€å£ï¼Œç„¶åæ¢å›æ‰‹æœºï¼Œå†æ‰“ä¸€ä¸ªå­—ã€‚\nå¹³è¡Œæ€§æŒ‡çš„æ˜¯åŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡ã€‚å¦‚æœåŠ åŠ å¤«äººå¹³è¡Œåœ°æ‰§è¡Œå¥¹çš„ä¸¤é¡¹ä»»åŠ¡ï¼Œå¥¹ä¼šå”±æ­Œã€‚\n I can text you with one hand while I use the other to drink, eh\n å¹³è¡Œæ€§æ˜¯å¹¶å‘æ€§çš„ä¸€ä¸ªå­ç±»ï¼šåœ¨ä½ åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ä¹‹å‰ï¼Œä½ é¦–å…ˆè¦ç®¡ç†å¤šä¸ªä»»åŠ¡ã€‚\nClojure æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå¯ä»¥è®©ä½ è½»æ¾å®ç°å¹¶è¡ŒåŒ–ã€‚è™½ç„¶ Lady Gaga ç³»ç»Ÿæ˜¯é€šè¿‡åœ¨å¤šåªæ‰‹ä¸ŠåŒæ—¶æ‰§è¡Œä»»åŠ¡æ¥å®ç°å¹¶è¡Œçš„ï¼Œä½†è®¡ç®—æœºç³»ç»Ÿä¸€èˆ¬æ˜¯é€šè¿‡åœ¨å¤šä¸ªå¤„ç†å™¨ä¸ŠåŒæ—¶æ‰§è¡Œä»»åŠ¡æ¥å®ç°å¹¶è¡Œçš„ã€‚\nå°†å¹¶è¡Œæ€§ä¸åˆ†å¸ƒå¼åŒºåˆ†å¼€æ¥æ˜¯å¾ˆé‡è¦çš„ã€‚åˆ†å¸ƒå¼è®¡ç®—æ˜¯å¹¶è¡Œè®¡ç®—çš„ä¸€ä¸ªç‰¹æ®Šç‰ˆæœ¬ï¼Œå¤„ç†å™¨åœ¨ä¸åŒçš„è®¡ç®—æœºä¸­ï¼Œä»»åŠ¡é€šè¿‡ç½‘ç»œåˆ†å¸ƒåˆ°è®¡ç®—æœºä¸Šã€‚è¿™å°±åƒ Lady Gaga é—® BeyoncÃ©ï¼Œ\u0026ldquo;è¯·åœ¨æˆ‘å–é…’æ—¶ç»™è¿™å®¶ä¼™å‘çŸ­ä¿¡\u0026rdquo;ã€‚å°½ç®¡ä½ å¯ä»¥å€ŸåŠ©åº“åœ¨ Clojure ä¸­è¿›è¡Œåˆ†å¸ƒå¼ç¼–ç¨‹ï¼Œä½†æœ¬ä¹¦åªæ¶‰åŠå¹¶è¡Œç¼–ç¨‹ï¼Œåœ¨è¿™é‡Œæˆ‘ç”¨parallelåªæŒ‡åŒå±…çš„å¤„ç†å™¨ã€‚å¦‚æœä½ å¯¹åˆ†å¸ƒå¼ç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œå¯ä»¥å»çœ‹çœ‹ Kyle Kingsbury çš„Call Me Maybeç³»åˆ—ï¼Œç½‘å€æ˜¯https://aphyr.com/*ã€‚\né˜»å¡å’Œå¼‚æ­¥ä»»åŠ¡ å¹¶å‘ç¼–ç¨‹çš„ä¸»è¦ç”¨ä¾‹ä¹‹ä¸€æ˜¯ç”¨äºé˜»å¡æ“ä½œã€‚é˜»å¡å®é™…ä¸Šæ˜¯æŒ‡ç­‰å¾…ä¸€ä¸ªæ“ä½œçš„å®Œæˆã€‚ä½ æœ€å¸¸å¬åˆ°çš„æ˜¯ä¸ I/O æ“ä½œæœ‰å…³çš„ï¼Œæ¯”å¦‚è¯»å–æ–‡ä»¶æˆ–ç­‰å¾… HTTP è¯·æ±‚çš„å®Œæˆã€‚è®©æˆ‘ä»¬ç”¨ Lady Gaga å¹¶å‘çš„ä¾‹å­æ¥ç ”ç©¶è¿™ä¸ªé—®é¢˜ã€‚\nå¦‚æœ Lady Gaga ç»™å¥¹çš„å¯¹è¯è€…å‘çŸ­ä¿¡ï¼Œç„¶åæ‹¿ç€æ‰‹æœºç«™åœ¨é‚£é‡Œï¼Œç›¯ç€å±å¹•ç­‰å¾…å›åº”ï¼Œè€Œä¸å–æ°´ï¼Œé‚£ä¹ˆä½ ä¼šè¯´è¯»ä¸‹ä¸€æ¡çŸ­ä¿¡æ“ä½œæ˜¯é˜»å¡çš„ï¼Œè¿™äº›ä»»åŠ¡æ˜¯*åŒæ­¥æ‰§è¡Œçš„ã€‚\nç›¸åï¼Œå¦‚æœå¥¹æŠŠæ‰‹æœºæ”¶èµ·æ¥ï¼Œè¿™æ ·å¥¹å°±å¯ä»¥å–é…’äº†ï¼Œç›´åˆ°æ‰‹æœºå‘å‡ºå“”å“”å£°æˆ–æŒ¯åŠ¨æ¥æé†’å¥¹ï¼Œé‚£ä¹ˆé˜…è¯»ä¸‹ä¸€æ¡çŸ­ä¿¡ä»»åŠ¡å°±ä¸æ˜¯é˜»å¡çš„ï¼Œä½ ä¼šè¯´å¥¹æ˜¯åœ¨*å¼‚æ­¥åœ°å¤„ç†è¿™ä¸ªä»»åŠ¡ã€‚\nå¹¶å‘ç¼–ç¨‹å’Œå¹¶è¡Œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹å’Œå¹¶è¡Œç¼–ç¨‹æŒ‡çš„æ˜¯å°†ä¸€ä¸ªä»»åŠ¡åˆ†è§£æˆå¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„å­ä»»åŠ¡çš„æŠ€æœ¯ï¼Œä»¥åŠç®¡ç†ç¨‹åºåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡æ—¶äº§ç”Ÿçš„é£é™©ã€‚åœ¨æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘å°†äº¤æ›¿ä½¿ç”¨è¿™ä¸¤ä¸ªæœ¯è¯­ï¼Œå› ä¸ºä¸¤è€…çš„é£é™©å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚\nä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™äº›é£é™©ä»¥åŠ Clojure å¦‚ä½•å¸®åŠ©ä½ é¿å…è¿™äº›é£é™©ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ Clojure ä¸­æ˜¯å¦‚ä½•å®ç°å¹¶å‘å’Œå¹¶è¡Œçš„ã€‚\nClojure å®ç°ã€‚JVM çº¿ç¨‹ æˆ‘ä¸€ç›´åœ¨æŠ½è±¡åœ°ä½¿ç”¨*ä»»åŠ¡è¿™ä¸ªè¯ï¼ŒæŒ‡çš„æ˜¯ä¸€ç³»åˆ—ç›¸å…³çš„æ“ä½œï¼Œè€Œä¸è€ƒè™‘è®¡ç®—æœºå¯èƒ½å¦‚ä½•å®ç°ä»»åŠ¡çš„æ¦‚å¿µã€‚ä¾‹å¦‚ï¼Œå‘çŸ­ä¿¡å°±æ˜¯ä¸€ä¸ªç”±ä¸€ç³»åˆ—ç›¸å…³æ“ä½œç»„æˆçš„ä»»åŠ¡ï¼Œå®ƒä¸å¾€ä½ è„¸ä¸Šå€’é¥®æ–™çš„æ“ä½œå®Œå…¨ä¸åŒã€‚\nåœ¨ Clojure ä¸­ï¼Œä½ å¯ä»¥æŠŠä½ æ­£å¸¸çš„ã€ä¸²è¡Œçš„ä»£ç çœ‹ä½œæ˜¯ä»»åŠ¡çš„åºåˆ—ã€‚ä½ å¯ä»¥é€šè¿‡æŠŠä»»åŠ¡æ”¾åœ¨ JVM çš„çº¿ç¨‹*ä¸Šæ¥è¡¨ç¤ºä»»åŠ¡å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚\nä»€ä¹ˆæ˜¯çº¿ç¨‹ æˆ‘å¾ˆé«˜å…´ä½ é—®è¿™ä¸ªé—®é¢˜! ä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸€ä¸ªå­ç¨‹åºã€‚ä¸€ä¸ªç¨‹åºå¯ä»¥æœ‰å¾ˆå¤šçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œè‡ªå·±çš„æŒ‡ä»¤é›†ï¼ŒåŒæ—¶äº«å—å¯¹ç¨‹åºçŠ¶æ€çš„å…±äº«è®¿é—®ã€‚\nï¼\nçº¿ç¨‹ç®¡ç†åŠŸèƒ½å¯ä»¥å­˜åœ¨äºè®¡ç®—æœºçš„å¤šä¸ªå±‚é¢ã€‚ä¾‹å¦‚ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸é€šå¸¸æä¾›ç³»ç»Ÿè°ƒç”¨æ¥åˆ›å»ºå’Œç®¡ç†çº¿ç¨‹ã€‚JVM æä¾›äº†è‡ªå·±çš„ç‹¬ç«‹äºå¹³å°çš„çº¿ç¨‹ç®¡ç†åŠŸèƒ½ï¼Œç”±äº Clojure ç¨‹åºåœ¨ JVM ä¸­è¿è¡Œï¼Œæ‰€ä»¥å®ƒä»¬ä½¿ç”¨ JVM çº¿ç¨‹ã€‚ä½ å°†åœ¨ç¬¬ 12 ç« ä¸­äº†è§£æ›´å¤šå…³äº JVM çš„ä¿¡æ¯ã€‚\nä½ å¯ä»¥æŠŠçº¿ç¨‹çœ‹ä½œæ˜¯ä¸€ä¸ªå®é™…çš„ã€ç‰©ç†çš„çº¿æ®µï¼Œå®ƒæŠŠä¸€è¿ä¸²çš„æŒ‡ä»¤ä¸²èµ·æ¥ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™äº›æŒ‡ä»¤æ˜¯æ£‰èŠ±ç³–ï¼Œå› ä¸ºæ£‰èŠ±ç³–å¾ˆå¥½åƒã€‚å¤„ç†å™¨æŒ‰é¡ºåºæ‰§è¡Œè¿™äº›æŒ‡ä»¤ã€‚æˆ‘æŠŠè¿™æƒ³è±¡æˆä¸€æ¡é³„é±¼åœ¨åƒè¿™äº›æŒ‡ä»¤ï¼Œå› ä¸ºé³„é±¼å–œæ¬¢åƒæ£‰èŠ±ç³–ï¼ˆè¿™æ˜¯äº‹å®ï¼ï¼‰ã€‚å› æ­¤ï¼Œæ‰§è¡Œä¸€ä¸ªç¨‹åºçœ‹èµ·æ¥å°±åƒä¸€å †æ£‰èŠ±ç³–ä¸²åœ¨ä¸€æ¡çº¿ä¸Šï¼Œä¸€æ¡é³„é±¼æ²¿ç€è¿™æ¡çº¿é€ä¸€åƒæ‰ã€‚å›¾ 9-1 æ˜¾ç¤ºäº†å•æ ¸å¤„ç†å™¨æ‰§è¡Œå•çº¿ç¨‹ç¨‹åºçš„è¿™ä¸ªæ¨¡å‹ã€‚\nå›¾ 9-1ï¼šå•æ ¸å¤„ç†å™¨æ‰§è¡Œä¸€ä¸ªå•çº¿ç¨‹çš„ç¨‹åº\nä¸€ä¸ªçº¿ç¨‹å¯ä»¥*äº§ç”Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¹¶å‘åœ°æ‰§è¡Œä»»åŠ¡ã€‚åœ¨å•å¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œå¤„ç†å™¨åœ¨çº¿ç¨‹ä¹‹é—´æ¥å›åˆ‡æ¢ï¼ˆäº¤ç»‡ï¼‰ã€‚è¿™é‡Œå°±å¼•å…¥äº†æ½œåœ¨çš„å¹¶å‘æ€§é—®é¢˜ã€‚å°½ç®¡å¤„ç†å™¨æŒ‰é¡ºåºæ‰§è¡Œæ¯ä¸ªçº¿ç¨‹çš„æŒ‡ä»¤ï¼Œä½†å®ƒä¸ä¿è¯ä½•æ—¶åœ¨çº¿ç¨‹ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚\nå›¾ 9-2 æ˜¾ç¤ºäº†ä¸¤ä¸ªçº¿ç¨‹ï¼ŒA å’Œ Bï¼Œä»¥åŠå®ƒä»¬çš„æŒ‡ä»¤å¦‚ä½•æ‰§è¡Œçš„æ—¶é—´çº¿ã€‚æˆ‘å¯¹çº¿ç¨‹ B çš„æŒ‡ä»¤åšäº†é˜´å½±å¤„ç†ï¼Œä»¥å¸®åŠ©åŒºåˆ†å®ƒä»¬ä¸çº¿ç¨‹ A çš„æŒ‡ä»¤ã€‚\nå•æ ¸å¤„ç†å™¨æ‰§è¡Œä¸¤ä¸ªçº¿ç¨‹\nè¯·æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸€ç§å¯èƒ½çš„æŒ‡ä»¤æ‰§è¡Œé¡ºåºã€‚ä¾‹å¦‚ï¼Œå¤„ç†å™¨ä¹Ÿå¯ä»¥æŒ‰ç…§ A1ã€A2ã€A3ã€B1ã€A4ã€B2ã€B3 çš„é¡ºåºæ‰§è¡ŒæŒ‡ä»¤ã€‚è¿™ä½¿ç¨‹åºå˜å¾—ä¸ç¡®å®šã€‚ä½ ä¸èƒ½äº‹å…ˆçŸ¥é“ç»“æœæ˜¯ä»€ä¹ˆï¼Œå› ä¸ºä½ æ— æ³•çŸ¥é“æ‰§è¡Œé¡ºåºï¼Œä¸åŒçš„æ‰§è¡Œé¡ºåºä¼šäº§ç”Ÿä¸åŒçš„ç»“æœã€‚\nè¿™ä¸ªä¾‹å­æ˜¾ç¤ºäº†é€šè¿‡äº¤ç»‡åœ¨å•ä¸ªå¤„ç†å™¨ä¸Šçš„å¹¶å‘æ‰§è¡Œï¼Œè€Œå¤šæ ¸ç³»ç»Ÿä¸ºæ¯ä¸ªæ ¸åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œå…è®¸è®¡ç®—æœºåŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„çº¿ç¨‹ã€‚æ¯ä¸ªæ ¸å¿ƒæŒ‰é¡ºåºæ‰§è¡Œå…¶çº¿ç¨‹çš„æŒ‡ä»¤ï¼Œå¦‚å›¾ 9-3 æ‰€ç¤ºã€‚\nä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸¤ä¸ªå¤„ç†å™¨ã€‚\nä¸å•æ ¸ä¸Šçš„äº¤ç»‡ä¸€æ ·ï¼Œæ•´ä½“æ‰§è¡Œé¡ºåºæ²¡æœ‰ä¿è¯ï¼Œæ‰€ä»¥ç¨‹åºæ˜¯ä¸ç¡®å®šçš„ã€‚å½“ä½ åœ¨ç¨‹åºä¸­åŠ å…¥ç¬¬äºŒä¸ªçº¿ç¨‹æ—¶ï¼Œå®ƒå°±å˜å¾—ä¸ç¡®å®šäº†ï¼Œè¿™ä½¿å¾—ä½ çš„ç¨‹åºæœ‰å¯èƒ½æˆä¸ºä¸‰ç§é—®é¢˜çš„ç‰ºç‰²å“ã€‚\nä¸‰ä¸ªå°å¦–ç²¾ã€‚å‚è€ƒå•å…ƒã€äº’æ–¥å’ŒçŸ®äººç‹‚æˆ˜å£« å¹¶å‘ç¼–ç¨‹ä¸­æœ‰ä¸‰ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ï¼Œä¹Ÿè¢«ç§°ä¸º \u0026ldquo;ä¸‰ä¸ªå¹¶å‘å¦–ç²¾\u0026rdquo;ã€‚è¦çŸ¥é“ä¸ºä»€ä¹ˆè¿™äº›æ˜¯å¯æ€•çš„ï¼Œæƒ³è±¡ä¸€ä¸‹å›¾ 9-3 ä¸­çš„ç¨‹åºåŒ…æ‹¬è¡¨ 9-1 ä¸­çš„å‡æŒ‡ä»¤ã€‚\n éç¡®å®šç»“æœçš„ç¨‹åºçš„æŒ‡ä»¤     ID Instruction     A1 WRITE X = 0   A2 READ X   A3 WRITE X = X + 1   B1 READ X   B2 WRITE X = X + 1    å¦‚æœå¤„ç†å™¨éµå¾ª A1, A2, A3, B1, B2 çš„é¡ºåºï¼Œé‚£ä¹ˆXçš„å€¼å°†æ˜¯2ï¼Œæ­£å¦‚ä½ æ‰€æœŸæœ›çš„ã€‚ä½†æ˜¯å¦‚æœå®ƒéµå¾ª A1, A2, B1, A3, B2 çš„é¡ºåºï¼ŒX'çš„å€¼å°†æ˜¯1\u0026rsquo;ï¼Œæ­£å¦‚ä½ åœ¨å›¾ 9-4 ä¸­çœ‹åˆ°çš„é‚£æ ·ã€‚\nä¸¤ä¸ªçº¿ç¨‹ä¸ä¸€ä¸ªå¼•ç”¨å•å…ƒè¿›è¡Œäº¤äº’\næˆ‘ä»¬æŠŠè¿™ç§°ä¸ºå‚è€ƒå•å…ƒé—®é¢˜ï¼ˆç¬¬ä¸€ä¸ªå¹¶å‘æ€§å¦–ç²¾ï¼‰ã€‚Â å½“ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥å¯¹åŒä¸€ä¸ªä½ç½®è¿›è¡Œè¯»å†™æ—¶ï¼Œå°±ä¼šå‡ºç°å¼•ç”¨å•å…ƒé—®é¢˜ï¼Œè€Œè¯¥ä½ç½®çš„å€¼å–å†³äºè¯»å†™çš„é¡ºåºã€‚\nç¬¬äºŒä¸ªå¹¶å‘å¦–ç²¾æ˜¯äº’æ–¥ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªäººéƒ½è¯•å›¾å‘ä¸€ä¸ªæ–‡ä»¶å†™ä¸€ä¸ªå’’è¯­ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•æ–¹æ³•å¯ä»¥è¦æ±‚å¯¹æ–‡ä»¶è¿›è¡Œç‹¬å æ€§çš„å†™å…¥è®¿é—®ï¼Œé‚£ä¹ˆè¿™ä¸ªå’’è¯­æœ€ç»ˆä¼šå˜æˆä¹±ç ï¼Œå› ä¸ºå†™å…¥æŒ‡ä»¤ä¼šè¢«äº¤é”™ä½¿ç”¨ã€‚è€ƒè™‘ä¸€ä¸‹ä»¥ä¸‹ä¸¤ä¸ªå’’è¯­ã€‚\n By the power invested in me\nby the state of California,\nI now pronounce you man and wife Thunder, lightning, wind, and rain,\na delicious sandwich, I summon again\n å¦‚æœä½ æŠŠè¿™äº›å†™åˆ°ä¸€ä¸ªæ²¡æœ‰ç›¸äº’æ’æ–¥çš„æ–‡ä»¶ä¸­ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚\n By the power invested in me\nby Thunder, lightning, wind, and rain,\nthe state of California,\nI now pronounce you a delicious man sandwich, and wife\nI summon again\n ç¬¬ä¸‰ä¸ªå¹¶å‘å¦–ç²¾å°±æ˜¯æˆ‘æ‰€è¯´çš„çŸ®äººç‹‚æˆ˜å£«é—®é¢˜ï¼ˆåˆç§°æ­»é”ï¼‰ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå››ä¸ªç‹‚æš´è€…å›´ååœ¨ä¸€å¼ ç²—ç³™çš„åœ†å½¢æœ¨æ¡Œæ—ï¼Œäº’ç›¸å®‰æ…°ã€‚\u0026ldquo;æˆ‘çŸ¥é“æˆ‘å¯¹æˆ‘çš„å­©å­å¾ˆç–è¿œï¼Œä½†æˆ‘å°±æ˜¯ä¸çŸ¥é“å¦‚ä½•ä¸ä»–ä»¬æ²Ÿé€šï¼Œ\u0026ldquo;ä¸€ä¸ªäººå’†å“®é“ã€‚å…¶ä½™çš„äººå•œé¥®ç€å’–å•¡ï¼Œæœ‰æ„æ— æ„åœ°ç‚¹å¤´ï¼Œä»–ä»¬çš„çœ¼è§’å¤„éƒ½æœ‰æŠ¤ç†çº¹ã€‚\nç°åœ¨ï¼Œæ¯ä¸ªäººéƒ½çŸ¥é“ï¼ŒçŸ®äººç‹‚æˆ˜å£«ç»“æŸèˆ’é€‚çš„å’–å•¡èšä¼šçš„ä»ªå¼æ˜¯æ‹¿èµ·ä»–ä»¬çš„ \u0026ldquo;å®‰æ…°æ£’\u0026rdquo;ï¼ˆåŒåˆƒæˆ˜æ–§ï¼‰ï¼Œäº’ç›¸æŠ“æŒ å¯¹æ–¹çš„èƒŒéƒ¨ã€‚æ¯å¯¹çŸ®äººä¹‹é—´æ”¾ä¸€æŠŠæˆ˜æ–§ï¼Œå¦‚å›¾ 9-5 æ‰€ç¤ºã€‚\nä»–ä»¬çš„ä»ªå¼æ˜¯è¿™æ ·è¿›è¡Œçš„ã€‚\n æ‹¿èµ·å·¦è¾¹çš„æˆ˜æ–§ï¼Œå¦‚æœæœ‰çš„è¯ã€‚ æ‹¿èµ·å³è¾¹æˆ˜æ–§ï¼Œå¦‚æœæœ‰çš„è¯ã€‚ ç”¨ä½ çš„ \u0026ldquo;å®‰æ…°æ£’ \u0026ldquo;å¤§åŠ›æŒ¥èˆæ¥å®‰æ…°ä½ çš„é‚»å±…ã€‚ é‡Šæ”¾ä¸¤æŠŠæˆ˜æ–§ã€‚ é‡å¤ã€‚  çŸ®äººç‹‚çƒ­è€…åœ¨èˆ’é€‚çš„å’–å•¡èšä¼šä¸­\næŒ‰ç…§è¿™ä¸ªä»ªå¼ï¼Œæ‰€æœ‰çš„çŸ®äººç‹‚æˆ˜å£«å®Œå…¨æœ‰å¯èƒ½æ‹¿èµ·ä»–ä»¬å·¦è¾¹çš„å®‰æ…°æ£’ï¼Œç„¶åæ— é™æœŸåœ°é˜»æŒ¡ï¼ŒåŒæ—¶ç­‰å¾…ä»–ä»¬å³è¾¹çš„å®‰æ…°æ£’å‡ºç°ï¼Œå¯¼è‡´åƒµå±€ã€‚(é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå¦‚æœä½ æƒ³è¿›ä¸€æ­¥ç ”ç©¶è¿™ç§ç°è±¡ï¼Œå®ƒé€šå¸¸è¢«ç§°ä¸ºåƒé¥­çš„å“²å­¦å®¶é—®é¢˜ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªæ›´æ— èŠçš„åœºæ™¯ï¼‰ã€‚æœ¬ä¹¦æ²¡æœ‰è¯¦ç»†è®¨è®ºæ­»é”ï¼Œä½†äº†è§£è¿™ä¸ªæ¦‚å¿µå’Œæœ¯è¯­æ˜¯å¾ˆå¥½çš„ã€‚\nå¹¶å‘ç¼–ç¨‹æœ‰å®ƒçš„å°å¦–ç²¾ï¼Œä½†æœ‰äº†æ­£ç¡®çš„å·¥å…·ï¼Œå®ƒæ˜¯å¯æ§çš„ï¼Œç”šè‡³æ˜¯æœ‰è¶£çš„ã€‚è®©æˆ‘ä»¬å¼€å§‹çœ‹ä¸€ä¸‹æ­£ç¡®çš„å·¥å…·ã€‚\nFutures, Delays, and Promises Futureã€å»¶è¿Ÿå’Œ Promise æ˜¯ç”¨äºå¹¶å‘ç¼–ç¨‹çš„ç®€å•ã€è½»ä¾¿çš„å·¥å…·ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ æ¯ä¸ªå·¥å…·çš„å·¥ä½œåŸç†ï¼Œä»¥åŠå¦‚ä½•ä¸€èµ·ä½¿ç”¨å®ƒä»¬æ¥æŠµå¾¡å¼•ç”¨å•å…ƒçš„å¹¶å‘å¦–ç²¾å’Œäº’æ–¥çš„å¹¶å‘å¦–ç²¾ã€‚ä½ ä¼šå‘ç°ï¼Œè™½ç„¶ç®€å•ï¼Œä½†è¿™äº›å·¥å…·å¯¹æ»¡è¶³ä½ çš„å¹¶å‘éœ€æ±‚æœ‰å¾ˆå¤§å¸®åŠ©ã€‚\nå®ƒä»¬é€šè¿‡ç»™äºˆä½ æ¯”ä¸²è¡Œä»£ç æ›´å¤šçš„çµæ´»æ€§æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å½“ä½ å†™ä¸²è¡Œä»£ç æ—¶ï¼Œä½ æŠŠè¿™ä¸‰ä¸ªäº‹ä»¶ç»‘å®šåœ¨ä¸€èµ·ã€‚\n ä»»åŠ¡å®šä¹‰ ä»»åŠ¡æ‰§è¡Œ è¦æ±‚ä»»åŠ¡çš„ç»“æœ  ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªå‡è®¾çš„ä»£ç ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„ API è°ƒç”¨ä»»åŠ¡ã€‚\n(web-api/get :dwarven-beard-waxes) ä¸€æ—¦ Clojure é‡åˆ°è¿™ä¸ªä»»åŠ¡å®šä¹‰ï¼Œå®ƒå°±ä¼šæ‰§è¡Œå®ƒã€‚å®ƒä¹Ÿéœ€è¦ç°åœ¨çš„ç»“æœï¼Œé˜»å¡ç›´åˆ° API è°ƒç”¨å®Œæˆã€‚å­¦ä¹ å¹¶å‘ç¼–ç¨‹çš„ä¸€éƒ¨åˆ†æ˜¯å­¦ä¼šè¯†åˆ«ä½•æ—¶ä¸éœ€è¦è¿™äº›æ—¶é—´ä¸Šçš„è”æ¥ã€‚Futureã€å»¶è¿Ÿå’Œ Promise å…è®¸ä½ æŠŠä»»åŠ¡å®šä¹‰ã€ä»»åŠ¡æ‰§è¡Œå’Œè¦æ±‚ç»“æœåˆ†å¼€ã€‚ç»§ç»­å‰è¿›!\nFuture åœ¨ Clojure ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨futuresæ¥å®šä¹‰ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šï¼Œè€Œä¸è¦æ±‚ç«‹å³å¾—åˆ°ç»“æœã€‚ä½ å¯ä»¥ç”¨futureå®æ¥åˆ›å»ºä¸€ä¸ªæœªæ¥ã€‚åœ¨ REPL ä¸­è¯•è¯•è¿™ä¸ªã€‚\n(future (Thread/sleep 4000) (println \u0026#34;I\u0026#39;ll print after 4 seconds\u0026#34;)) (println \u0026#34;I\u0026#39;ll print immediately\u0026#34;) Thread/sleepå‘Šè¯‰å½“å‰çº¿ç¨‹åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…åç€ä»€ä¹ˆéƒ½ä¸åšã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä½ åœ¨ä½ çš„ REPL ä¸­æ±‚å€¼äº†Thread/sleepï¼Œä½ å°±ä¸èƒ½æ±‚å€¼ä»»ä½•å…¶ä»–è¯­å¥ï¼Œç›´åˆ° REPL å®Œæˆç¡çœ ï¼›æ‰§è¡Œä½ çš„ REPL çš„çº¿ç¨‹å°†è¢«é˜»å¡ã€‚ç„¶è€Œï¼Œfutureåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶å°†ä½ ä¼ é€’ç»™å®ƒçš„æ¯ä¸ªè¡¨è¾¾å¼æ”¾åœ¨æ–°çš„çº¿ç¨‹ä¸Šï¼ŒåŒ…æ‹¬Thread/sleepï¼Œå…è®¸ REPL çš„çº¿ç¨‹ç»§ç»­è¿è¡Œï¼Œä¸å—é˜»å¡ã€‚\nä½ å¯ä»¥ä½¿ç”¨ future åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šè¿è¡Œä»»åŠ¡ï¼Œç„¶åå¿˜è®°å®ƒä»¬ï¼Œä½†ä½ ç»å¸¸æƒ³ä½¿ç”¨ä»»åŠ¡çš„ç»“æœã€‚futureå‡½æ•°è¿”å›ä¸€ä¸ªå¼•ç”¨å€¼ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥è¯·æ±‚ç»“æœã€‚å‚è€ƒå€¼å°±åƒå¹²æ´—åº—ç»™ä½ çš„ç¥¨æ®ï¼šåœ¨ä»»ä½•æ—¶å€™ä½ éƒ½å¯ä»¥ç”¨å®ƒæ¥è¯·æ±‚ä½ çš„å¹²å‡€è¡£æœï¼Œä½†æ˜¯å¦‚æœä½ çš„è¡£æœè¿˜æ²¡æœ‰æ´—å¹²å‡€ï¼Œä½ å°±å¿…é¡»ç­‰å¾…ã€‚ç±»ä¼¼åœ°ï¼Œä½ å¯ä»¥ä½¿ç”¨å‚è€ƒå€¼æ¥è¯·æ±‚ä¸€ä¸ªæœªæ¥çš„ç»“æœï¼Œä½†æ˜¯å¦‚æœæœªæ¥è¿˜æ²¡æœ‰å®Œæˆè®¡ç®—ç»“æœï¼Œä½ å°±å¿…é¡»ç­‰å¾…ã€‚\nè¯·æ±‚ä¸€ä¸ªæœªæ¥çš„ç»“æœè¢«ç§°ä¸ºdereferencingæœªæ¥ï¼Œä½ å¯ä»¥ç”¨derefå‡½æ•°æˆ–@è¯»è€…å®æ¥åšã€‚ä¸€ä¸ª future çš„ç»“æœå€¼æ˜¯å…¶ä¸»ä½“ä¸­æœ€åä¸€ä¸ªè¢«æ±‚å€¼çš„è¡¨è¾¾å¼çš„å€¼ã€‚ä¸€ä¸ª future çš„ä¸»ä½“åªæ‰§è¡Œä¸€æ¬¡ï¼Œå®ƒçš„å€¼è¢«ç¼“å­˜èµ·æ¥ã€‚è¯•è¯•ä¸‹é¢çš„æ–¹æ³•ã€‚\n(let [result (future (println \u0026#34;this prints once\u0026#34;) (+ 1 1))] (println \u0026#34;deref: \u0026#34; (deref result)) (println \u0026#34;@: \u0026#34; @result)) ; =\u0026gt; \u0026#34;this prints once\u0026#34; ; =\u0026gt; deref: 2 ; =\u0026gt; @: 2 è¯·æ³¨æ„ï¼Œ\u0026ldquo;this prints once \u0026ldquo;è¿™ä¸ªå­—ç¬¦ä¸²ç¡®å®åªæ‰“å°äº†ä¸€æ¬¡ï¼Œå°½ç®¡ä½ å¯¹ future è¿›è¡Œäº†ä¸¤æ¬¡æ¨æ–­ã€‚è¿™è¡¨æ˜ future çš„ä¸»ä½“åªè¿è¡Œäº†ä¸€æ¬¡ï¼Œç»“æœ2è¢«ç¼“å­˜äº†ã€‚\nå¦‚æœæœªæ¥ç¨‹åºè¿˜æ²¡æœ‰å®Œæˆè¿è¡Œï¼Œè§£æŒ‡æœªæ¥ç¨‹åºå°±ä¼šé˜»å¡ï¼Œå°±åƒè¿™æ ·ã€‚\n(let [result (future (Thread/sleep 3000) (+ 1 1))] (println \u0026#34;The result is: \u0026#34; @result) (println \u0026#34;It will be at least 3 seconds before I print\u0026#34;)) ; =\u0026gt; The result is: 2 ; =\u0026gt; It will be at least 3 seconds before I print æœ‰æ—¶ä½ æƒ³ä¸ºä¸€ä¸ªæœªæ¥çš„ç­‰å¾…æ—¶é—´è®¾ç½®ä¸€ä¸ªæ—¶é—´é™åˆ¶ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥ç»™derefä¸€ä¸ªç­‰å¾…çš„æ¯«ç§’æ•°ï¼Œä»¥åŠå½“derefè¶…æ—¶æ—¶è¦è¿”å›çš„å€¼ã€‚\n(deref (future (Thread/sleep 1000) 0) 10 5) ; =\u0026gt; 5 è¿™æ®µä»£ç å‘Šè¯‰derefï¼Œå¦‚æœ future åœ¨ 10 æ¯«ç§’å†…æ²¡æœ‰è¿”å›ä¸€ä¸ªå€¼ï¼Œåˆ™è¿”å›å€¼5ã€‚\næœ€åï¼Œä½ å¯ä»¥ä½¿ç”¨realized?æ¥è¯¢é—®ä¸€ä¸ª futureï¼Œçœ‹çœ‹å®ƒæ˜¯å¦å·²ç»è¿è¡Œå®Œæ¯•ã€‚\n(realized? (future (Thread/sleep 1000))) ; =\u0026gt; false (let [f (future)] @f (realized? f)) ; =\u0026gt; true Future æ˜¯ä¸€ç§ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä½ çš„ç¨‹åºä¸­æ’’ä¸Šä¸€äº›å¹¶å‘æ€§ã€‚\nå°±å…¶æœ¬èº«è€Œè¨€ï¼Œå®ƒä»¬è®©ä½ æœ‰èƒ½åŠ›å°†ä»»åŠ¡è½¬ç§»åˆ°å…¶ä»–çº¿ç¨‹ä¸Šï¼Œè¿™å¯ä»¥ä½¿ä½ çš„ç¨‹åºæ›´æœ‰æ•ˆç‡ã€‚å®ƒä»¬è¿˜å¯ä»¥è®©ä½ çš„ç¨‹åºè¡¨ç°å¾—æ›´åŠ çµæ´»ï¼Œè®©ä½ æ§åˆ¶ä½•æ—¶éœ€è¦ä¸€ä¸ªä»»åŠ¡çš„ç»“æœã€‚\nå½“ä½ è§£é™¤å¯¹ä¸€ä¸ª future çš„å¼•ç”¨æ—¶ï¼Œä½ è¡¨æ˜ç°åœ¨éœ€è¦è¿™ä¸ªç»“æœï¼Œå¹¶ä¸”åœ¨è·å¾—è¿™ä¸ªç»“æœä¹‹å‰åº”è¯¥åœæ­¢è®¡ç®—ã€‚ä½ ä¼šçœ‹åˆ°è¿™å¦‚ä½•å¸®åŠ©ä½ å¤„ç†ç›¸äº’æ’æ–¥çš„é—®é¢˜ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å¿½ç•¥è¿™ä¸ªç»“æœã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ Future æ¥å¼‚æ­¥å†™å…¥ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¸éœ€è¦è§£é™¤å¯¹ Future çš„å¼•ç”¨æ¥è·å¾—ä»»ä½•è¿”å›å€¼ã€‚\nFuture ç»™ä½ å¸¦æ¥çš„çµæ´»æ€§æ˜¯éå¸¸é…·çš„ã€‚Clojure è¿˜å…è®¸ä½ ç”¨å»¶è¿Ÿå’Œ Promise æ¥ç‹¬ç«‹å¤„ç†ä»»åŠ¡å®šä¹‰å’Œè¦æ±‚ç»“æœã€‚\nå»¶è¿Ÿ å»¶è¿Ÿå…è®¸ä½ å®šä¹‰ä¸€ä¸ªä»»åŠ¡ï¼Œè€Œä¸éœ€è¦ç«‹å³æ‰§è¡Œå®ƒæˆ–è¦æ±‚å¾—åˆ°ç»“æœã€‚ä½ å¯ä»¥ä½¿ç”¨delayåˆ›å»ºä¸€ä¸ªå»¶è¿Ÿã€‚\n(def jackson-5-delay (delay (let [message \u0026#34;Just call my name and I\u0026#39;ll be there\u0026#34;] (println \u0026#34;First deref:\u0026#34; message) message))) åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ²¡æœ‰ä»»ä½•ä¸œè¥¿è¢«æ‰“å°å‡ºæ¥ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰è¦æ±‚å¯¹letå½¢å¼è¿›è¡Œæ±‚å€¼ã€‚ä½ å¯ä»¥æ±‚å€¼å»¶è¿Ÿï¼Œå¹¶é€šè¿‡è§£æ„å®ƒæˆ–ä½¿ç”¨forceæ¥è·å¾—å…¶ç»“æœã€‚Â forceçš„è¡Œä¸ºä¸derefç›¸åŒï¼Œä½†å®ƒæ›´æ¸…æ¥šåœ°è¡¨è¾¾äº†ä½ æ­£åœ¨ä½¿ä¸€ä¸ªä»»åŠ¡å¼€å§‹ï¼Œè€Œä¸æ˜¯ç­‰å¾…ä¸€ä¸ªä»»åŠ¡å®Œæˆã€‚\n(force jackson-5-delay) ; =\u0026gt; First deref: Just call my name and I\u0026#39;ll be there ; =\u0026gt; \u0026#34;Just call my name and I\u0026#39;ll be there\u0026#34; åƒ Future ä¸€æ ·ï¼Œå»¶è¿Ÿåªè¿è¡Œä¸€æ¬¡ï¼Œå…¶ç»“æœè¢«ç¼“å­˜ã€‚åç»­çš„å–æ¶ˆå¼•ç”¨å°†è¿”å› Jackson 5 çš„ä¿¡æ¯ï¼Œè€Œä¸æ‰“å°ä»»ä½•ä¸œè¥¿ã€‚\n@jackson-5-delay ; =\u0026gt; \u0026#34;Just call my name and I\u0026#39;ll be there\u0026#34; ä½ å¯ä»¥ä½¿ç”¨å»¶è¿Ÿçš„ä¸€ç§æ–¹å¼æ˜¯åœ¨ä¸€ç»„ç›¸å…³çš„ Future ä¸­çš„ä¸€ä¸ª Future ç¬¬ä¸€æ¬¡å®Œæˆæ—¶å¯åŠ¨ä¸€ä¸ªè¯­å¥ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„åº”ç”¨ç¨‹åºå°†ä¸€ç»„å¤´åƒä¸Šä¼ åˆ°ä¸€ä¸ªå¤´åƒåˆ†äº«ç½‘ç«™ï¼Œå¹¶åœ¨ç¬¬ä¸€å¼ å¤´åƒå®Œæˆåç«‹å³é€šçŸ¥æ‰€æœ‰è€…ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n(def gimli-headshots [\u0026#34;serious.jpg\u0026#34; \u0026#34;fun.jpg\u0026#34; \u0026#34;playful.jpg\u0026#34;]) (defn email-user [email-address] (println \u0026#34;Sending headshot notification to\u0026#34; email-address)) (defn upload-document \u0026#34;Needs to be implemented\u0026#34; [headshot] true) (let [notify (delay âŠ(email-user \u0026#34;and-my-axe@gmail.com\u0026#34;))] (doseq [headshot gimli-headshots] (future (upload-document headshot) â‹(force notify)))) åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å®šä¹‰äº†ä¸€ä¸ªè¦ä¸Šä¼ å¤´åƒçš„ Vectorï¼ˆgimli-headshotsï¼‰å’Œä¸¤ä¸ªå‡½æ•°ï¼ˆemail-userå’Œupload-documentï¼‰æ¥å‡è£…æ‰§è¡Œè¿™ä¸¤ä¸ªæ“ä½œã€‚ç„¶åä½ ç”¨letå°†notifyç»‘å®šåˆ°ä¸€ä¸ªå»¶è¿Ÿã€‚å»¶è¿Ÿçš„ä¸»ä½“ï¼Œ(email-user \u0026quot;and-my-axe@gmail.com\u0026quot;)âŠï¼Œåœ¨åˆ›å»ºå»¶è¿Ÿçš„æ—¶å€™å¹¶æ²¡æœ‰è¢«æ±‚å€¼ã€‚ç›¸åï¼Œå½“ç”±doseqForm åˆ›å»ºçš„ Future ä¹‹ä¸€ç¬¬ä¸€æ¬¡æ±‚å€¼(force notify)â‹æ—¶ï¼Œå®ƒå°±è¢«æ±‚å€¼äº†ã€‚å³ä½¿(force notify)å°†è¢«æ±‚å€¼ä¸‰æ¬¡ï¼Œå»¶è¿Ÿä¸»ä½“åªè¢«æ±‚å€¼ä¸€æ¬¡ã€‚Gimli ä¼šå¾ˆé«˜å…´çŸ¥é“ç¬¬ä¸€å¼ å¤´åƒä»€ä¹ˆæ—¶å€™å¯ç”¨ï¼Œè¿™æ ·ä»–å°±å¯ä»¥å¼€å§‹è°ƒæ•´å®ƒå¹¶åˆ†äº«å®ƒã€‚ä»–ä¹Ÿä¼šæ„Ÿè°¢ä¸è¢«åƒåœ¾é‚®ä»¶ï¼Œè€Œä½ ä¹Ÿä¼šæ„Ÿè°¢ä¸é¢å¯¹ä»–çš„çŸ®äººä¹‹æ€’ã€‚\nè¿™ç§æŠ€æœ¯å¯ä»¥å¸®åŠ©ä½ é¿å…ç›¸äº’æ’æ–¥çš„å¹¶å‘å¦–ç²¾\u0026ndash;ç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ç‰¹å®šèµ„æºçš„é—®é¢˜ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå»¶è¿Ÿå®ˆæŠ¤ç€ç”µå­é‚®ä»¶æœåŠ¡å™¨èµ„æºã€‚å› ä¸ºå»¶è¿Ÿçš„ä¸»ä½“è¢«ä¿è¯åªå‘å°„ä¸€æ¬¡ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç¡®å®šä½ æ°¸è¿œä¸ä¼šé‡åˆ°ä¸¤ä¸ªçº¿ç¨‹å‘é€ç›¸åŒé‚®ä»¶çš„æƒ…å†µã€‚å½“ç„¶ï¼Œæ²¡æœ‰çº¿ç¨‹èƒ½å¤Ÿå†æ¬¡ä½¿ç”¨å»¶è¿Ÿæ¥å‘é€é‚®ä»¶ã€‚å¯¹äºå¤§å¤šæ•°æƒ…å†µæ¥è¯´ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªè¿‡äºæ¿€çƒˆçš„çº¦æŸï¼Œä½†åœ¨åƒè¿™ä¸ªä¾‹å­è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯å®Œç¾çš„ã€‚\nPromise Promiseå…è®¸ä½ è¡¨è¾¾ä½ æœŸæœ›çš„ç»“æœï¼Œè€Œä¸éœ€è¦å®šä¹‰åº”è¯¥äº§ç”Ÿç»“æœçš„ä»»åŠ¡æˆ–è¯¥ä»»åŠ¡åº”è¯¥ä½•æ—¶è¿è¡Œã€‚ä½ ç”¨promise'åˆ›å»ºPromiseï¼Œç”¨deliver\u0026rsquo;å‘ä»–ä»¬ä¼ é€’ä¸€ä¸ªç»“æœã€‚ä½ é€šè¿‡å–æ¶ˆå¼•ç”¨æ¥è·å¾—ç»“æœã€‚\n(def my-promise (promise)) (deliver my-promise (+ 1 2)) @my-promise ; =\u0026gt; 3 è¿™é‡Œï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ª promiseï¼Œç„¶åå‘å®ƒä¼ é€’ä¸€ä¸ªå€¼ã€‚æœ€åï¼Œä½ é€šè¿‡è§£é™¤å¯¹ Promise çš„å¼•ç”¨æ¥è·å¾—è¯¥å€¼ã€‚è§£é™¤å¼•ç”¨æ˜¯ä½ è¡¨è¾¾ä½ æœŸæœ›ä¸€ä¸ªç»“æœçš„æ–¹å¼ï¼Œå¦‚æœä½ è¯•å›¾åœ¨æ²¡æœ‰é¦–å…ˆä¼ é€’ä¸€ä¸ªå€¼çš„æƒ…å†µä¸‹è§£é™¤å¼•ç”¨`my-promise\u0026rsquo;ï¼Œç¨‹åºå°†é˜»å¡ï¼Œç›´åˆ°ä¸€ä¸ª Promise è¢«ä¼ é€’ï¼Œå°±åƒ Future å’Œå»¶è¿Ÿä¸€æ ·ã€‚ä½ åªèƒ½å‘ä¸€ä¸ª Promise ä¼ é€’ä¸€æ¬¡ç»“æœã€‚\nPromise çš„ä¸€ä¸ªç”¨é€”æ˜¯åœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡æ„çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æ­£åœ¨æ”¶é›†æˆåˆ†ä»¥ä½¿ä½ çš„é¹¦é¹‰å¬èµ·æ¥åƒè©¹å§†æ–¯-å„å°”-ç¼æ–¯ã€‚å› ä¸ºè©¹å§†æ–¯-å„å°”-ç¼æ–¯çš„å£°éŸ³æ˜¯ä¸–ç•Œä¸Šæœ€é¡ºç•…çš„ï¼Œæ‰€ä»¥å…¶ä¸­ä¸€ç§æˆåˆ†æ˜¯é¡ºç•…åº¦è¾¾åˆ° 97 ä»¥ä¸Šçš„ä¼˜è´¨ç‰¦ç‰›æ²¹ã€‚ä½ çš„é¢„ç®—æ˜¯ 100 ç¾å…ƒä¸€ç£…ã€‚\nä½ æ˜¯ä¸€ä¸ªç°ä»£ç¥å¥‡é¸Ÿç±»å­¦è‰ºæœ¯çš„å®è·µè€…ï¼Œå› æ­¤ï¼Œä¸å…¶ç¹çåœ°æµè§ˆæ¯ä¸ªç‰¦ç‰›æ²¹é›¶å”®ç½‘ç«™ï¼Œä¸å¦‚åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œç»™ä½ æä¾›ç¬¬ä¸€ä¸ªç¬¦åˆä½ éœ€æ±‚çš„ç‰¦ç‰›æ²¹çš„ URLã€‚\nä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€äº›ç‰¦ç‰›æ²¹äº§å“ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°æ¥æ¨¡æ‹Ÿ API è°ƒç”¨ï¼Œå¹¶åˆ›å»ºäº†å¦ä¸€ä¸ªå‡½æ•°æ¥æµ‹è¯•äº§å“æ˜¯å¦æ»¡æ„ã€‚\n(def yak-butter-international {:store \u0026#34;Yak Butter International\u0026#34; :price 90 :smoothness 90}) (def butter-than-nothing {:store \u0026#34;Butter Than Nothing\u0026#34; :price 150 :smoothness 83}) ;; This is the butter that meets our requirements (def baby-got-yak {:store \u0026#34;Baby Got Yak\u0026#34; :price 94 :smoothness 99}) (defn mock-api-call [result] (Thread/sleep 1000) result) (defn satisfactory? \u0026#34;If the butter meets our criteria, return the butter, else return false\u0026#34; [butter] (and (\u0026lt;= (:price butter) 100) (\u0026gt;= (:smoothness butter) 97) butter)) è¯¥ API è°ƒç”¨åœ¨è¿”å›ç»“æœå‰ç­‰å¾…ä¸€ç§’é’Ÿï¼Œä»¥æ¨¡æ‹Ÿæ‰§è¡Œå®é™…è°ƒç”¨çš„æ—¶é—´ã€‚\nä¸ºäº†è¯´æ˜åŒæ­¥æ£€æŸ¥ç½‘ç«™éœ€è¦å¤šé•¿æ—¶é—´ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨someå¯¹é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ åº”ç”¨satisfactory?å‡½æ•°ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªçœŸå®çš„ç»“æœï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è¿”å› nilã€‚å½“ä½ åŒæ­¥æ£€æŸ¥æ¯ä¸ªç«™ç‚¹æ—¶ï¼Œæ¯ä¸ªç«™ç‚¹å¯èƒ½éœ€è¦è¶…è¿‡ä¸€ç§’é’Ÿçš„æ—¶é—´æ¥è·å¾—ç»“æœï¼Œæ­£å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºã€‚\n(time (some (comp satisfactory? mock-api-call) [yak-butter-international butter-than-nothing baby-got-yak])) ; =\u0026gt; \u0026#34;Elapsed time: 3002.132 msecs\u0026#34; ; =\u0026gt; {:store \u0026#34;Baby Got Yak\u0026#34;, :smoothness 99, :price 94} è¿™é‡Œæˆ‘ç”¨compæ¥ç»„åˆå‡½æ•°ï¼Œæˆ‘ç”¨timeæ¥æ‰“å°æ±‚å€¼ä¸€ä¸ª Form çš„æ—¶é—´ã€‚ä½ å¯ä»¥ä½¿ç”¨ promise å’Œ futures æ¥åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šæ‰§è¡Œæ¯ä¸ªæ£€æŸ¥ã€‚å¦‚æœä½ çš„è®¡ç®—æœºæœ‰å¤šä¸ªæ ¸å¿ƒï¼Œè¿™å¯ä»¥æŠŠæ—¶é—´å‡å°‘åˆ°ä¸€ç§’é’Ÿå·¦å³ã€‚\n(time (let [butter-promise (promise)] (doseq [butter [yak-butter-international butter-than-nothing baby-got-yak]] (future (if-let [satisfactory-butter (satisfactory? (mock-api-call butter))] (deliver butter-promise satisfactory-butter)))) (println \u0026#34;And the winner is:\u0026#34; @butter-promise))) ; =\u0026gt; \u0026#34;Elapsed time: 1002.652 msecs\u0026#34; ; =\u0026gt; And the winner is: {:store Baby Got Yak, :smoothness 99, :price 94} åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª Promiseï¼Œbutter-promiseï¼Œç„¶ååˆ›å»ºäº†ä¸‰ä¸ªè®¿é—®è¯¥ Promise çš„ Futureã€‚æ¯ä¸ª Future çš„ä»»åŠ¡æ˜¯æ±‚å€¼ä¸€ä¸ªç‰¦ç‰›é»„æ²¹ç½‘ç«™ï¼Œå¦‚æœè¯¥ç½‘ç«™ä»¤äººæ»¡æ„ï¼Œåˆ™å‘ Promise æä¾›è¯¥ç½‘ç«™çš„æ•°æ®ã€‚æœ€åï¼Œä½ è§£é™¤å¯¹butter-promiseçš„å¼•ç”¨ï¼Œå¯¼è‡´ç¨‹åºé˜»å¡ï¼Œç›´åˆ°ç½‘ç«™æ•°æ®è¢«äº¤ä»˜ã€‚è¿™éœ€è¦ä¸€ç§’é’Ÿè€Œä¸æ˜¯ä¸‰ç§’é’Ÿï¼Œå› ä¸ºç½‘ç«™çš„æ±‚å€¼æ˜¯å¹³è¡Œè¿›è¡Œçš„ã€‚é€šè¿‡å°†å¯¹ç»“æœçš„è¦æ±‚ä¸ç»“æœçš„å®é™…è®¡ç®—æ–¹å¼è„±é’©ï¼Œä½ å¯ä»¥å¹¶è¡Œåœ°è¿›è¡Œå¤šä¸ªè®¡ç®—ï¼Œå¹¶èŠ‚çœä¸€äº›æ—¶é—´ã€‚\nä½ å¯ä»¥æŠŠè¿™çœ‹ä½œæ˜¯ä¸€ç§ä¿æŠ¤è‡ªå·±ä¸å—å‚è€ƒå•å…ƒæ ¼å¹¶å‘æ€§å¦–ç²¾å½±å“çš„æ–¹æ³•ã€‚å› ä¸º Promise åªèƒ½è¢«å†™å…¥ä¸€æ¬¡ï¼Œä½ å¯ä»¥é˜²æ­¢éç¡®å®šæ€§è¯»å†™äº§ç”Ÿçš„é‚£ç§ä¸ä¸€è‡´çš„çŠ¶æ€ã€‚\nä½ å¯èƒ½æƒ³çŸ¥é“ï¼Œå¦‚æœç‰¦ç‰›æ²¹éƒ½ä¸æ»¡æ„ä¼šæ€ä¹ˆæ ·ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè§£é™¤å¼•ç”¨å°†æ°¸è¿œé˜»å¡ï¼Œå¹¶ç»‘ä½çº¿ç¨‹ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥åŠ å…¥ä¸€ä¸ªè¶…æ—¶ã€‚\n(è®© [p (promise)] (deref p 100 \u0026#34;timed out\u0026#34;) è¿™å°†åˆ›å»ºä¸€ä¸ª Promiseï¼Œp'ï¼Œå¹¶è¯•å›¾è§£é™¤å¯¹å®ƒçš„å¼•ç”¨ã€‚æ•°å­—100å‘Šè¯‰derefç­‰å¾…100æ¯«ç§’ï¼Œå¦‚æœå±Šæ—¶æ²¡æœ‰å¯ç”¨çš„å€¼ï¼Œå°±ä½¿ç”¨è¶…æ—¶å€¼ï¼Œ\u0026ldquo;timed out\u0026rdquo;`ã€‚\næˆ‘åº”è¯¥æåˆ°çš„æœ€åä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Promise æ¥æ³¨å†Œå›è°ƒï¼Œå®ç°ä¸ä½ åœ¨ JavaScript ä¸­å¯èƒ½ä¹ æƒ¯çš„ç›¸åŒåŠŸèƒ½ã€‚JavaScript çš„å›è°ƒæ˜¯ä¸€ç§å®šä¹‰ä»£ç çš„æ–¹å¼ï¼Œä¸€æ—¦å…¶ä»–ä»£ç å®Œæˆï¼Œå°±åº”è¯¥å¼‚æ­¥æ‰§è¡Œã€‚ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ Clojure ä¸­åšåˆ°è¿™ä¸€ç‚¹ã€‚\n(let [ferengi-wisdom-promise (promise)] (future (println \u0026#34;Here\u0026#39;s some Ferengi wisdom:\u0026#34; @ferengi-wisdom-promise)) (Thread/sleep 100) (deliver ferengi-wisdom-promise \u0026#34;Whisper your way to success.\u0026#34;)) ; =\u0026gt; Here\u0026#39;s some Ferengi wisdom: Whisper your way to success. è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªç«‹å³å¼€å§‹æ‰§è¡Œçš„æœªæ¥ã€‚ç„¶è€Œï¼Œæœªæ¥çš„çº¿ç¨‹æ˜¯é˜»å¡çš„ï¼Œå› ä¸ºå®ƒåœ¨ç­‰å¾…ä¸€ä¸ªå€¼è¢«ä¼ é€’ç»™ferengi-wisdom-promiseã€‚100 æ¯«ç§’åï¼Œä½ äº¤ä»˜äº†å€¼ï¼Œæœªæ¥ä¸­çš„`println\u0026rsquo;è¯­å¥å¼€å§‹è¿è¡Œã€‚\nFutureã€å»¶è¿Ÿå’Œ Promise æ˜¯åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ç®¡ç†å¹¶å‘æ€§çš„ä¼Ÿå¤§è€Œç®€å•çš„æ–¹æ³•ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªæ›´æœ‰è¶£çš„æ–¹æ³•æ¥æ§åˆ¶ä½ çš„å¹¶å‘åº”ç”¨ç¨‹åºã€‚\næ»šåŠ¨ä½ è‡ªå·±çš„é˜Ÿåˆ— åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»çœ‹åˆ°äº†ä¸€äº›ç®€å•çš„æ–¹æ³•æ¥ç»“åˆ Futureã€å»¶è¿Ÿå’Œ Promiseï¼Œä½¿ä½ çš„å¹¶å‘ç¨‹åºæ›´åŠ å®‰å…¨ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†ä½¿ç”¨ä¸€ä¸ªå®æ¥ä»¥ä¸€ç§ç¨å¾®å¤æ‚çš„æ–¹å¼ç»“åˆ Future å’Œ Promiseã€‚ä½ å¯èƒ½ä¸ä¸€å®šä¼šç”¨åˆ°è¿™æ®µä»£ç ï¼Œä½†å®ƒä¼šæ›´å¤šåœ°å±•ç¤ºè¿™äº›é€‚åº¦çš„å·¥å…·çš„åŠ›é‡ã€‚è¿™ä¸ªå®éœ€è¦ä½ åœ¨å¤´è„‘ä¸­åŒæ—¶æŒæœ‰è¿è¡Œæ—¶é€»è¾‘å’Œå®æ‰©å±•é€»è¾‘ï¼Œä»¥äº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ï¼›å¦‚æœä½ è¢«å¡ä½äº†ï¼Œå°±è·³è¿‡å‰é¢ã€‚\nä¸‰ä¸ªå¹¶å‘å¦–ç²¾çš„ä¸€ä¸ªå…±åŒç‰¹ç‚¹æ˜¯ï¼Œå®ƒä»¬éƒ½æ¶‰åŠåˆ°ä»»åŠ¡ä»¥ä¸åè°ƒçš„æ–¹å¼å¹¶å‘åœ°è®¿é—®ä¸€ä¸ªå…±äº«èµ„æº\u0026ndash;å˜é‡ã€æ‰“å°æœºã€çŸ®äººæˆ˜æ–§ã€‚å¦‚æœä½ æƒ³ç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ªä»»åŠ¡ä¼šè®¿é—®ä¸€ä¸ªèµ„æºï¼Œä½ å¯ä»¥æŠŠä»»åŠ¡çš„èµ„æºè®¿é—®éƒ¨åˆ†æ”¾åœ¨ä¸€ä¸ªåºåˆ—æ‰§è¡Œçš„é˜Ÿåˆ—ä¸­ã€‚è¿™æœ‰ç‚¹åƒåšè›‹ç³•ï¼šä½ å’Œä¸€ä¸ªæœ‹å‹å¯ä»¥åˆ†åˆ«å–å›åŸæ–™ï¼ˆé¸¡è›‹ã€é¢ç²‰ã€è¾èˆçš„çœ¼ç›ï¼Œç­‰ç­‰ï¼‰ï¼Œä½†æœ‰äº›æ­¥éª¤ä½ å¿…é¡»è¿ç»­æ‰§è¡Œã€‚ä½ å¿…é¡»åœ¨æŠŠé¢ç³Šæ”¾è¿›çƒ¤ç®±ä¹‹å‰å‡†å¤‡å¥½å®ƒã€‚å›¾ 9-6 è¯´æ˜äº†è¿™ä¸ªç­–ç•¥ã€‚\nå°†ä»»åŠ¡åˆ†ä¸ºä¸²è¡Œéƒ¨åˆ†å’Œå¹¶å‘éƒ¨åˆ†ï¼Œå¯ä»¥è®©ä½ å®‰å…¨åœ°ä½¿ä½ çš„ä»£ç æ›´æœ‰æ•ˆç‡ã€‚\nä¸ºäº†å®ç°æ’é˜Ÿå®ï¼Œä½ è¦å‘è‹±å›½äººè‡´æ•¬ï¼Œå› ä¸ºä»–ä»¬å‘æ˜äº†é˜Ÿåˆ—ã€‚ä½ å°†ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥ç¡®ä¿è‹±å›½äººä¹ æƒ¯çš„é—®å€™è¯­ \u0026ldquo;Ello, gov\u0026rsquo;na! Pip Pip! Cheerio!\u0026ldquo;çš„æ­£ç¡®é¡ºåºè¿›è¡Œä¼ é€’ã€‚è¿™ä¸ªæ¼”ç¤ºå°†æ¶‰åŠåˆ°å¤§é‡çš„ \u0026ldquo;ç¡çœ \u0026rdquo;ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ä¸€ä¸ªå®æ¥æ›´ç®€æ´åœ°å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚\n(defmacro wait \u0026#34;Sleep `timeout` seconds before evaluating body\u0026#34; [timeout \u0026amp; body] `(do (Thread/sleep ~timeout) ~@body)) è¿™æ®µä»£ç æ‰€åšçš„å°±æ˜¯æ¥å—ä½ ç»™å®ƒçš„ä»»ä½•å½¢å¼ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹å‰æ’å…¥å¯¹Thread/sleepçš„è°ƒç”¨ï¼Œæ‰€æœ‰è¿™äº›éƒ½è¢«doåŒ…è£¹èµ·æ¥ã€‚\næ¸…å• 9-1 ä¸­çš„ä»£ç å°†ä»»åŠ¡åˆ†æˆäº†å¹¶å‘éƒ¨åˆ†å’Œåºåˆ—åŒ–éƒ¨åˆ†ã€‚\n(let [saying3 (promise)] (future (deliver saying3 (wait 100 \u0026#34;Cheerio!\u0026#34;))) @(let [saying2 (promise)] (future (deliver saying2 (wait 400 \u0026#34;Pip pip!\u0026#34;))) âŠ @(let [saying1 (promise)] (future (deliver saying1 (wait 200 \u0026#34;\u0026#39;Ello, gov\u0026#39;na!\u0026#34;))) (println @saying1) saying1) (println @saying2) saying2) (println @saying3) saying3)  9-1. ä¸€ä¸ª enqueue å®è°ƒç”¨çš„æ‰©å±•  æ•´ä½“ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªä»»åŠ¡ï¼ˆåœ¨æœ¬ä¾‹ä¸­ï¼Œæ‰“å°é—®å€™è¯­çš„ä¸€éƒ¨åˆ†ï¼‰åˆ›å»ºä¸€ä¸ª Promiseï¼Œä»¥åˆ›å»ºä¸€ä¸ªç›¸åº”çš„æœªæ¥ï¼Œå°†å¹¶å‘è®¡ç®—çš„å€¼äº¤ä»˜ç»™è¯¥ Promiseã€‚è¿™ç¡®ä¿äº†åœ¨ä»»ä½•ä¸€ä¸ª Promise è¢«è§£é™¤å¼•ç”¨ä¹‹å‰ï¼Œæ‰€æœ‰çš„æœªæ¥éƒ½è¢«åˆ›å»ºï¼Œå¹¶ä¸”ç¡®ä¿åºåˆ—åŒ–çš„éƒ¨åˆ†ä»¥æ­£ç¡®çš„é¡ºåºæ‰§è¡Œã€‚é¦–å…ˆæ‰“å°saying1'çš„å€¼-\u0026quot;\u0026lsquo;Ello, gov\u0026rsquo;na!\u0026quot;-ç„¶åæ˜¯saying2'çš„å€¼ï¼Œæœ€åæ˜¯saying3\u0026rsquo;ã€‚åœ¨letå—ä¸­è¿”å›saying1ï¼Œå¹¶åœ¨âŠå¤„è§£é™¤å¯¹letå—çš„å¼•ç”¨ï¼Œå¯ä»¥ç¡®ä¿åœ¨ä»£ç ç»§ç»­å¯¹saying2åšä»»ä½•äº‹æƒ…ä¹‹å‰ï¼Œä½ å·²ç»å®Œå…¨å®Œæˆäº†saying1ï¼Œè€Œä¸”è¿™ç§æ¨¡å¼åœ¨saying2å’Œsaying3ä¸Šé‡å¤ã€‚\nè§£é™¤å¯¹letå—çš„å¼•ç”¨ä¼¼ä¹å¾ˆå‚»ï¼Œä½†è¿™æ ·åšå¯ä»¥è®©ä½ ç”¨ä¸€ä¸ªå®æ¥æŠ½è±¡è¿™æ®µä»£ç ã€‚ä½ è‚¯å®šæƒ³ä½¿ç”¨å®ï¼Œå› ä¸ºåƒå‰é¢çš„ä¾‹å­é‚£æ ·å†™å‡ºçš„ä»£ç ä¼šè®©ä½ å‘ç–¯ï¼ˆè‹±å›½äººä¼šè¿™ä¹ˆè¯´ï¼‰ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå®çš„å·¥ä½œæ–¹å¼å¦‚æ¸…å• 9-2 æ‰€ç¤ºã€‚\n(-\u0026gt; (enqueue âŠsaying â‹(wait 200 \u0026#34;\u0026#39;Ello, gov\u0026#39;na!\u0026#34;) âŒ(println @saying)) â(enqueue saying (wait 400 \u0026#34;Pip pip!\u0026#34;) (println @saying)) (enqueue saying (wait 100 \u0026#34;Cheerio!\u0026#34;) (println @saying)))  è¿™å°±æ˜¯ä½ ä½¿ç”¨ enqueue çš„æ–¹æ³•ã€‚  è¯¥å®è®©ä½ å‘½åè¢«åˆ›å»ºçš„ PromiseâŠï¼Œå®šä¹‰å¦‚ä½•è·å–ä»·å€¼ä»¥äº¤ä»˜è¯¥ Promiseâ‹ï¼Œå¹¶å®šä¹‰å¦‚ä½•å¤„ç†è¯¥ PromiseâŒã€‚è¿™ä¸ªå®ä¹Ÿå¯ä»¥æŠŠå¦ä¸€ä¸ªenqueueå®è°ƒç”¨ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æŠŠå®ƒå˜æˆçº¿ç¨‹âã€‚æ¸…å• 9-3 æ˜¾ç¤ºäº†ä½ å¦‚ä½•å®šä¹‰enqueueå®ã€‚å®šä¹‰å®Œenqueueåï¼Œæ¸…å• 9-2 ä¸­çš„ä»£ç å°†æ‰©å±•ä¸ºæ¸…å• 9-1 ä¸­çš„ä»£ç ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰åµŒå¥—çš„letè¡¨è¾¾å¼ã€‚\n(defmacro enqueue âŠ ([q concurrent-promise-name concurrent serialized] â‹ `(let [~concurrent-promise-name (promise)] (future (deliver ~concurrent-promise-name ~concurrent)) âŒ (deref ~q) ~serialized ~concurrent-promise-name)) â ([concurrent-promise-name concurrent serialized] `(enqueue (future) ~concurrent-promise-name ~concurrent ~serialized))) 1.enqueue çš„å®ç°\né¦–å…ˆæ³¨æ„è¿™ä¸ªå®æœ‰ä¸¤ä¸ª aritiesï¼Œä»¥ä¾¿æä¾›ä¸€ä¸ªç¼ºçœå€¼ã€‚ç¬¬ä¸€ä¸ª arity âŠæ˜¯çœŸæ­£çš„å·¥ä½œæ‰€åœ¨ã€‚å®ƒæœ‰å‚æ•°qï¼Œè€Œç¬¬äºŒä¸ª arity åˆ™æ²¡æœ‰ã€‚ç¬¬äºŒä¸ª arity âè°ƒç”¨ç¬¬ä¸€ä¸ª arityï¼Œä¸ºqæä¾›äº†(future)çš„å€¼ï¼›ä½ å°†åœ¨ä¸€åˆ†é’Ÿå†…çœ‹åˆ°åŸå› ã€‚åœ¨â‹ä¸­ï¼Œå®è¿”å›ä¸€ä¸ª Formï¼Œè¯¥ Form åˆ›å»ºäº†ä¸€ä¸ª Promiseï¼Œåœ¨ä¸€ä¸ª future ä¸­ä¼ é€’å®ƒçš„å€¼ï¼Œå–æ¶ˆå¯¹æä¾›ç»™qçš„ä»»ä½• Form çš„å¼•ç”¨ï¼Œæ±‚å€¼åºåˆ—åŒ–ä»£ç ï¼Œæœ€åè¿”å› Promiseã€‚qé€šå¸¸æ˜¯ä¸€ä¸ªåµŒå¥—çš„letè¡¨è¾¾å¼ï¼Œç”±å¦ä¸€ä¸ªå¯¹enqueueçš„è°ƒç”¨è¿”å›ï¼Œå¦‚æ¸…å• 9-2 æ‰€ç¤ºã€‚å¦‚æœæ²¡æœ‰ä¸ºqæä¾›å€¼ï¼Œå®ä¼šæä¾›ä¸€ä¸ªæœªæ¥ï¼Œè¿™æ ·åœ¨âŒçš„derefå°±ä¸ä¼šå¼•èµ·å¼‚å¸¸ã€‚\nç°åœ¨æˆ‘ä»¬å·²ç»å†™å¥½äº†enqueueå®ï¼Œè®©æˆ‘ä»¬è¯•è¯•å®ƒæ˜¯å¦èƒ½å‡å°‘æ‰§è¡Œæ—¶é—´\n(time @(-\u0026gt; (enqueue saying (wait 200 \u0026#34;\u0026#39;Ello, gov\u0026#39;na!\u0026#34;) (println @saying)) (enqueue saying (wait 400 \u0026#34;Pip pip!\u0026#34;) (println @saying)) (enqueue saying (wait 100 \u0026#34;Cheerio!\u0026#34;) (println @saying)))) ; =\u0026gt; \u0026#39;Ello, gov\u0026#39;na! ; =\u0026gt; Pip pip! ; =\u0026gt; Cheerio! ; =\u0026gt; \u0026#34;Elapsed time: 401.635 msecs\u0026#34; å¤©å“ª! é—®å€™è¯­æ˜¯æŒ‰ç…§æ­£ç¡®çš„é¡ºåºä¼ é€’çš„ï¼Œä½ å¯ä»¥é€šè¿‡è€—æ—¶çœ‹åˆ°ï¼Œç¡çœ çš„ \u0026ldquo;å·¥ä½œ \u0026ldquo;æ˜¯åŒæ—¶è¿›è¡Œçš„ã€‚\næ€»ç»“ å¯¹äºåƒä½ è¿™æ ·çš„ç¨‹åºå‘˜æ¥è¯´ï¼Œå­¦ä¹ å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹æŠ€æœ¯å¾ˆé‡è¦ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è®¾è®¡å‡ºåœ¨ç°ä»£ç¡¬ä»¶ä¸Šé«˜æ•ˆè¿è¡Œçš„ç¨‹åºã€‚å¹¶å‘æ˜¯æŒ‡ä¸€ä¸ªç¨‹åºèƒ½å¤Ÿæ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡ï¼Œåœ¨ Clojure ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å°†ä»»åŠ¡æ”¾åœ¨ä¸åŒçš„çº¿ç¨‹ä¸Šæ¥å®ç°ã€‚å½“è®¡ç®—æœºæœ‰ä¸€ä¸ªä»¥ä¸Šçš„ CPU æ—¶ï¼Œç¨‹åºå°±ä¼šå¹¶è¡Œæ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨åŒä¸€æ—¶é—´æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„çº¿ç¨‹ã€‚\nå¹¶å‘ç¼–ç¨‹æŒ‡çš„æ˜¯ç”¨äºç®¡ç†ä¸‰ç§å¹¶å‘é£é™©çš„æŠ€æœ¯ï¼šå¼•ç”¨å•å…ƒã€äº’æ–¥å’Œæ­»é”ã€‚Clojure ä¸ºä½ æä¾›äº†ä¸‰ä¸ªåŸºæœ¬å·¥å…·ï¼Œå¸®åŠ©ä½ å‡è½»è¿™äº›é£é™©ï¼šFutureã€å»¶è¿Ÿå’Œ Promiseã€‚æ¯ä¸ªå·¥å…·éƒ½å¯ä»¥è®©ä½ æŠŠå®šä¹‰ä»»åŠ¡ã€æ‰§è¡Œä»»åŠ¡å’Œè¦æ±‚ä»»åŠ¡ç»“æœè¿™ä¸‰ä¸ªäº‹ä»¶è§£è€¦ã€‚Future è®©ä½ å®šä¹‰ä¸€ä¸ªä»»åŠ¡å¹¶ç«‹å³æ‰§è¡Œå®ƒï¼Œå…è®¸ä½ ç¨åæˆ–æ°¸è¿œä¸è¦æ±‚ç»“æœã€‚Â Future ä¹Ÿä¼šç¼“å­˜å…¶ç»“æœã€‚å»¶è¿Ÿï¼ˆDelayï¼‰è®©ä½ å®šä¹‰ä¸€ä¸ªç¨åæ‰æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä¸”å»¶è¿Ÿçš„ç»“æœä¼šè¢«ç¼“å­˜èµ·æ¥ã€‚è®¸è¯ºè®©ä½ è¡¨è¾¾ä½ éœ€è¦ä¸€ä¸ªç»“æœï¼Œè€Œä¸éœ€è¦çŸ¥é“äº§ç”Ÿè¯¥ç»“æœçš„ä»»åŠ¡ã€‚ä½ åªèƒ½å‘ä¸€ä¸ª Promise ä¼ é€’ä¸€æ¬¡å€¼ã€‚\nåœ¨ä¸‹ä¸€ç« ä¸­ï¼Œä½ å°†æ¢ç´¢å¹¶å‘ç¼–ç¨‹çš„å“²å­¦å±‚é¢ï¼Œå¹¶å­¦ä¹ æ›´å¤æ‚çš„å·¥å…·æ¥ç®¡ç†é£é™©ã€‚\nç»ƒä¹   ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œä½¿ç”¨slurpå‡½æ•°åœ¨ Bing å’Œ Google ä¸Šæœç´¢å®ƒã€‚ä½ çš„å‡½æ•°åº”è¯¥è¿”å›æœç´¢åˆ°çš„ç¬¬ä¸€ä¸ªé¡µé¢çš„ HTMLã€‚ æ›´æ–°ä½ çš„å‡½æ•°ï¼Œä½¿å…¶æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬è¦ä½¿ç”¨çš„æœç´¢å¼•æ“ã€‚ åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå°†æœç´¢è¯å’Œæœç´¢å¼•æ“ä½œä¸ºå‚æ•°ï¼Œå¹¶ä»æ¯ä¸ªæœç´¢å¼•æ“çš„ç¬¬ä¸€é¡µæœç´¢ç»“æœä¸­è¿”å›ä¸€ä¸ª URL çš„ Vectorã€‚  ","permalink":"https://zhenfeng-zhu.github.io/post/chapter9/","summary":"å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹çš„ç¥åœ£è‰ºæœ¯ å¦‚æœæˆ‘æ˜¯ä¸€ä¸ªåº„å›­çš„ä¸»äººï¼Œè€Œä½ æ˜¯æˆ‘çš„ç»§æ‰¿äººï¼Œæˆ‘ä¼šåœ¨ä½ çš„ç¬¬ 13 ä¸ªå‘½åæ—¥è®©ä½ åä¸‹æ¥ï¼Œå‘Šè¯‰ä½ ï¼š\u0026ldquo;è®¡ç®—çš„ä¸–ç•Œæ­£åœ¨æ”¹å˜ï¼Œå°å§‘å¨˜ï¼Œä½ å¿…é¡»ä¸ºå¤šæ ¸å¤„ç†å™¨çš„æ–°ä¸–ç•Œåšå¥½å‡†å¤‡ï¼Œä»¥å…ä½ è¢«å®ƒè·µè¸ã€‚\n\u0026ldquo;å¥½å¥½å¬ç€ã€‚è¿‘å¹´æ¥ï¼ŒCPU çš„æ—¶é’Ÿé€Ÿåº¦å‡ ä¹æ²¡æœ‰å¢åŠ ï¼Œä½†åŒæ ¸å’Œå››æ ¸è®¡ç®—æœºå·²ç»å˜å¾—å¾ˆæ™®éã€‚ç‰©ç†å®šå¾‹æ˜¯æ®‹é…·è€Œç»å¯¹çš„ï¼Œå®ƒä»¬è¦æ±‚æé«˜æ—¶é’Ÿé€Ÿåº¦éœ€è¦æˆå€çš„åŠŸç‡ã€‚é¢†åŸŸå†…æœ€å¥½çš„å·¥ç¨‹å¸ˆä¸å¤ªå¯èƒ½å¾ˆå¿«å…‹æœè¿™ä¸€é™åˆ¶ï¼Œå¦‚æœæœ‰çš„è¯ã€‚å› æ­¤ï¼Œä½ å¯ä»¥é¢„æœŸå•å°æœºå™¨ä¸Šçš„å†…æ ¸ä¸æ–­å¢åŠ çš„è¶‹åŠ¿å°†ç»§ç»­ä¸‹å»\u0026ndash;ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½ å°†çŸ¥é“å¦‚ä½•å……åˆ†åˆ©ç”¨ç°ä»£ç¡¬ä»¶çš„æœŸæœ›ä¹Ÿæ˜¯å¦‚æ­¤ã€‚\n\u0026ldquo;åœ¨è¿™ç§æ–°æ¨¡å¼ä¸‹å­¦ä¹ ç¼–ç¨‹å°†æ˜¯æœ‰è¶£å’Œè¿·äººçš„ï¼ŒçœŸçš„ã€‚ä½†è¯·æ³¨æ„ï¼šå®ƒä¹Ÿå……æ»¡äº†å±é™©ã€‚ä½ å¿…é¡»å­¦ä¹ å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹*ï¼Œè¿™æ˜¯ä¸€é—¨ç¥åœ£çš„è‰ºæœ¯ï¼Œä½¿ä½ çš„åº”ç”¨ç»“æ„å®‰å…¨åœ°ç®¡ç†å¤šä¸ªåŒæ—¶æ‰§è¡Œçš„ä»»åŠ¡ã€‚\n\u0026ldquo;ä½ ä»å¯¹å¹¶å‘å’Œå¹¶è¡Œæ¦‚å¿µçš„æ¦‚è¿°å¼€å§‹å­¦ä¹ è¿™é—¨è‰ºæœ¯ã€‚ç„¶åï¼Œä½ å°†å­¦ä¹ å›°æ‰°æ¯ä¸ªä»ä¸šè€…çš„ä¸‰ä¸ªå°å¦–ç²¾ï¼šå‚è€ƒå•å…ƒã€äº’æ–¥å’ŒçŸ®äººç‹‚æˆ˜å£«ã€‚ä½ è¿˜å°†å­¦ä¹ ä¸‰ç§æœ‰åŠ©äºä½ çš„å·¥å…·ï¼šFutureã€è®¸è¯ºå’Œå»¶è¿Ÿ\u0026rdquo;ã€‚\nç„¶åæˆ‘ä¼šç”¨é”®ç›˜æ‹æ‹ä½ çš„è‚©è†€ï¼Œç¤ºæ„ä½ å¯ä»¥å¼€å§‹äº†ã€‚\nå¹¶å‘å’Œå¹¶è¡Œçš„æ¦‚å¿µ å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹åœ¨ç¨‹åºæ‰§è¡Œçš„å„ä¸ªå±‚é¢éƒ½æ¶‰åŠåˆ°å¾ˆå¤šæ··ä¹±çš„ç»†èŠ‚ï¼Œä»ç¡¬ä»¶åˆ°æ“ä½œç³»ç»Ÿï¼Œåˆ°ç¼–ç¨‹è¯­è¨€åº“ï¼Œå†åˆ°ä»ä½ çš„å†…å¿ƒæ¶Œå‡ºçš„ã€è½åœ¨ç¼–è¾‘å™¨ä¸­çš„ä»£ç ã€‚ä½†åœ¨ä½ ä¸ºè¿™äº›ç»†èŠ‚çƒ¦æ¼ä¹‹å‰ï¼Œåœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘å°†ä»‹ç»å›´ç»•å¹¶å‘å’Œå¹¶è¡Œçš„é«˜çº§æ¦‚å¿µã€‚\nç®¡ç†å¤šä¸ªä»»åŠ¡ä¸åŒæ—¶æ‰§è¡Œä»»åŠ¡ å¹¶å‘æŒ‡çš„æ˜¯åœ¨åŒä¸€æ—¶é—´ç®¡ç†ä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡ã€‚Â ä»»åŠ¡åªæ˜¯æ„å‘³ç€ \u0026ldquo;éœ€è¦å®Œæˆçš„äº‹æƒ…\u0026rdquo;ï¼Œå®ƒå¹¶ä¸æ„å‘³ç€ä»»ä½•æœ‰å…³ç¡¬ä»¶æˆ–è½¯ä»¶çš„å®ç°ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ Lady Gaga çš„æ­Œæ›²ã€Šç”µè¯ã€‹æ¥è¯´æ˜å¹¶å‘æ€§ã€‚Gaga å”±é“\n I cannot text you with a drink in my hand, eh\n è¿™é‡Œï¼Œå¥¹åœ¨è§£é‡Šå¥¹åªèƒ½ç®¡ç†ä¸€ä¸ªä»»åŠ¡ï¼ˆå–é…’ï¼‰ã€‚å¥¹æ–­ç„¶æ‹’ç»äº†å¥¹å¯ä»¥å¤„ç†ä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡çš„å»ºè®®ã€‚ç„¶è€Œï¼Œå¦‚æœå¥¹å†³å®šåŒæ—¶å¤„ç†ä»»åŠ¡ï¼Œå¥¹ä¼šå”±æ­Œã€‚\n I will put down this drink to text you, then put my phone away and continue drinking, eh\n åœ¨è¿™ä¸ªå‡è®¾çš„å®‡å®™ä¸­ï¼ŒLady Gaga æ­£åœ¨å¤„ç†ä¸¤ä¸ªä»»åŠ¡ï¼šå–é…’å’Œå‘çŸ­ä¿¡ã€‚ç„¶è€Œï¼Œå¥¹å¹¶æ²¡æœ‰åŒæ—¶æ‰§è¡Œè¿™ä¸¤é¡¹ä»»åŠ¡ã€‚ç›¸åï¼Œå¥¹åœ¨è¿™ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œæˆ–è€…è¯´æ˜¯äº¤é”™ã€‚è¯·æ³¨æ„ï¼Œåœ¨äº¤é”™è¿‡ç¨‹ä¸­ï¼Œä½ ä¸å¿…åœ¨åˆ‡æ¢ä¹‹å‰å®Œå…¨å®Œæˆä¸€é¡¹ä»»åŠ¡ï¼šGaga å¯ä»¥æ‰“ä¸€ä¸ªå­—ï¼Œæ”¾ä¸‹æ‰‹æœºï¼Œæ‹¿èµ·é¥®æ–™å–ä¸€å£ï¼Œç„¶åæ¢å›æ‰‹æœºï¼Œå†æ‰“ä¸€ä¸ªå­—ã€‚\nå¹³è¡Œæ€§æŒ‡çš„æ˜¯åŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡ã€‚å¦‚æœåŠ åŠ å¤«äººå¹³è¡Œåœ°æ‰§è¡Œå¥¹çš„ä¸¤é¡¹ä»»åŠ¡ï¼Œå¥¹ä¼šå”±æ­Œã€‚\n I can text you with one hand while I use the other to drink, eh","title":"Chapter9 å¹¶å‘çš„è‰ºæœ¯"},{"content":"ç¼–å†™å® å½“æˆ‘ 18 å²æ—¶ï¼Œæˆ‘åœ¨æ–°å¢¨è¥¿å“¥å·åœ£è²çš„ä¸€å®¶é…’åº—æ‰¾åˆ°äº†ä¸€ä»½å¤œç­å®¡è®¡å¸ˆçš„å·¥ä½œï¼Œæ¯å‘¨å·¥ä½œå››ä¸ªæ™šä¸Šï¼Œä»æ™šä¸Š 11 ç‚¹åˆ°æ—©ä¸Š 7 ç‚¹ã€‚ç»è¿‡å‡ ä¸ªæœˆçš„è¿™ç§ä¸çœ ä¸ä¼‘çš„å·¥ä½œï¼Œæˆ‘çš„æƒ…ç»ªæœ‰äº†è‡ªå·±çš„å˜åŒ–ã€‚ä¸€å¤©æ™šä¸Šï¼Œå¤§çº¦åœ¨\nå‡Œæ™¨ 3 ç‚¹ï¼Œæˆ‘æ­£åœ¨çœ‹ä¸€ä¸ªä¿¡æ¯å¹¿å‘Šï¼Œè¯¥äº§å“å£°ç§°å¯ä»¥æ¢å¤ç”·äººçš„å¤´å‘ã€‚å½“æˆ‘çœ‹åˆ°ä¸€ä¸ªæ›¾ç»ç§ƒå¤´çš„äººçš„æ•…äº‹æ—¶ï¼Œæˆ‘è¢«çœŸè¯šçš„å–œæ‚¦æ‰€æ·¹æ²¡ã€‚\u0026ldquo;ç»ˆäºæ¥äº†ï¼\u0026ldquo;æˆ‘çš„å¤§è„‘æ¶ŒåŠ¨ç€ã€‚\u0026ldquo;è¿™ä¸ªäººå¾—åˆ°äº†ä»–åº”å¾—çš„çˆ±å’ŒæˆåŠŸ! å¤šä¹ˆä¸å¯æ€è®®çš„äº§å“ï¼Œç»™æ— æœ›çš„äººä»¥å¸Œæœ›ï¼\u0026rdquo;\nä»é‚£æ—¶èµ·ï¼Œæˆ‘å‘ç°è‡ªå·±ä¸€ç›´åœ¨æƒ³ï¼Œæˆ‘æ˜¯å¦èƒ½ä»¥æŸç§æ–¹å¼é‡æ–°åˆ›é€ å› é•¿æœŸç¡çœ ä¸è¶³è€Œå¼•èµ·çš„æƒ…æ„Ÿæ”¾å¼ƒå’Œå¯¹ç”Ÿå‘½çš„æ¬£èµã€‚ä¹Ÿè®¸æ˜¯æŸç§è¯æ°´\u0026ndash;å–ä¸Šå‡ å£ï¼Œé‡Šæ”¾æˆ‘å†…å¿ƒçš„ç†æŸ¥å¾·-è¥¿è’™æ–¯ï¼Œä½†æ—¶é—´ä¸ä¼šå¤ªé•¿ã€‚\nå°±åƒè¯æ°´å¯ä»¥è®©æˆ‘æš‚æ—¶æ”¹å˜æˆ‘çš„åŸºæœ¬æ€§è´¨ä¸€æ ·ï¼Œå®å…è®¸ä½ ä»¥å…¶ä»–è¯­è¨€æ— æ³•å®ç°çš„æ–¹å¼ä¿®æ”¹ Clojureã€‚æœ‰äº†å®ï¼Œä½ å¯ä»¥æ‰©å±• Clojure ä»¥é€‚åº”ä½ çš„é—®é¢˜ç©ºé—´ï¼Œå»ºç«‹èµ·è¯­è¨€ã€‚\nåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†å½»åº•ç ”ç©¶å¦‚ä½•ç¼–å†™å®ï¼Œä»åŸºæœ¬çš„ä¾‹å­å¼€å§‹ï¼Œé€æ­¥æé«˜å¤æ‚æ€§ã€‚æœ€åï¼Œä½ å°†æˆ´ä¸Šä½ çš„å‡æƒ³å¸½ï¼Œç”¨å®æ¥éªŒè¯ä½ æƒ³è±¡ä¸­çš„åœ¨çº¿è¯æ°´åº—çš„å®¢æˆ·è®¢å•ã€‚\nåœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ å°†äº†è§£ä½ ç”¨æ¥ç¼–å†™å®çš„æ‰€æœ‰å·¥å…·ï¼šå¼•å·ã€è¯­æ³•å¼•å·ã€è§£å¼•å·ã€è§£å¼•å·æ‹¼æ¥ï¼ˆåˆç§°çš®çº³å¡”å·¥å…·ï¼‰å’Œ gensymã€‚ä½ è¿˜ä¼šäº†è§£åˆ°å¯¹æ¯«æ— æˆ’å¿ƒçš„å®ä½œè€…æ¥è¯´éšè—ç€çš„å±é™©ï¼šåŒé‡æ±‚å€¼ã€å˜é‡æ•è·å’Œå®æ„ŸæŸ“ã€‚\nå®æ˜¯å¿…ä¸å¯å°‘çš„ åœ¨ä½ å¼€å§‹ç¼–å†™å®ä¹‹å‰ï¼Œæˆ‘æƒ³å¸®åŠ©ä½ æŠŠå®ƒä»¬æ”¾åœ¨é€‚å½“çš„ç¯å¢ƒä¸­ã€‚æ˜¯çš„ï¼Œå®æ¯”åŒ—æç†Šçš„è„šè¶¾ç”²è¿˜è¦é…·ï¼Œä½†ä½ ä¸åº”è¯¥æŠŠå®çœ‹æˆæ˜¯ä¸€äº›æ·±å¥¥çš„å·¥å…·ï¼Œå½“ä½ æƒ³å¯¹ä½ çš„ä»£ç è¿›è¡Œé¢å¤–çš„èŠ±å“¨å¤„ç†æ—¶ï¼Œå°±æŠŠå®ƒæ‹¿å‡ºæ¥ã€‚äº‹å®ä¸Šï¼Œå®å…è®¸ Clojure ä»ä¸€ä¸ªå¾ˆå°çš„å‡½æ•°å’Œç‰¹æ®Šå½¢å¼çš„æ ¸å¿ƒä¸­è·å¾—å¤§é‡çš„å†…ç½®åŠŸèƒ½ã€‚ä»¥whenä¸ºä¾‹ã€‚Â whenæœ‰è¿™æ ·çš„ä¸€èˆ¬å½¢å¼ã€‚\n(when boolean-expression expression-1 expression-2 expression-3 ... expression-x) ä½ å¯èƒ½è®¤ä¸ºwhenæ˜¯ä¸€ä¸ªåƒifä¸€æ ·çš„ç‰¹æ®Šå½¢å¼ã€‚é‚£ä¹ˆä½ çŒœæ€ä¹ˆç€ï¼Ÿå®ƒä¸æ˜¯! åœ¨å¤§å¤šæ•°å…¶ä»–è¯­è¨€ä¸­ï¼Œä½ åªèƒ½ä½¿ç”¨ç‰¹æ®Šçš„å…³é”®å­—æ¥åˆ›å»ºæ¡ä»¶è¡¨è¾¾å¼ï¼Œè€Œæ²¡æœ‰åŠæ³•åˆ›å»ºä½ è‡ªå·±çš„æ¡ä»¶è¿ç®—ç¬¦ã€‚ç„¶è€Œï¼Œwhenå®é™…ä¸Šæ˜¯ä¸€ä¸ªå®ã€‚\nåœ¨è¿™ä¸ªå®æ‰©å±•ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°whenæ˜¯ç”¨ifå’Œdoæ¥å®ç°çš„ã€‚\n(macroexpand \u0026#39;(when boolean-expression expression-1 expression-2 expression-3)) ; =\u0026gt; (if boolean-expression (do expression-1 expression-2 expression-3)) è¿™è¡¨æ˜å®æ˜¯ Clojure å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†\u0026ndash;å®ƒä»¬ç”šè‡³è¢«ç”¨æ¥æä¾›åŸºæœ¬æ“ä½œã€‚å®å¹¶ä¸æ˜¯ä¸ºå¥‡ç‰¹çš„ç‰¹æ®Šæƒ…å†µè€Œä¿ç•™çš„ï¼›ä½ åº”è¯¥æŠŠå†™å®çœ‹ä½œæ˜¯ä½ å·¥å…·åŒ…ä¸­çš„å¦ä¸€ä¸ªå·¥å…·ã€‚å½“ä½ å­¦ä¼šç¼–å†™è‡ªå·±çš„å®æ—¶ï¼Œä½ ä¼šå‘ç°å®ƒä»¬æ˜¯å¦‚ä½•è®©ä½ è¿›ä¸€æ­¥æ‰©å±•è¯­è¨€ï¼Œä½¿å…¶é€‚åˆä½ çš„ç‰¹å®šé—®é¢˜é¢†åŸŸçš„å½¢çŠ¶ã€‚\nè§£å‰–å·¨é›† å·¨é›†å®šä¹‰çœ‹èµ·æ¥å¾ˆåƒå‡½æ•°å®šä¹‰ã€‚å®ƒä»¬æœ‰ä¸€ä¸ªåç§°ï¼Œä¸€ä¸ªå¯é€‰çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œä»¥åŠä¸€ä¸ªä¸»ä½“ã€‚ä¸»ä½“å‡ ä¹æ€»æ˜¯è¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚è¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºå®æ˜¯å°†æ•°æ®ç»“æ„è½¬åŒ–ä¸º Clojure å¯ä»¥æ±‚å€¼çš„å½¢å¼çš„ä¸€ç§æ–¹å¼ï¼Œè€Œ Clojure ä½¿ç”¨åˆ—è¡¨æ¥è¡¨ç¤ºå‡½æ•°è°ƒç”¨ã€ç‰¹æ®Šå½¢å¼è°ƒç”¨å’Œå®è°ƒç”¨ã€‚ä½ å¯ä»¥åœ¨å®ä¸»ä½“ä¸­ä½¿ç”¨ä»»ä½•å‡½æ•°ã€å®æˆ–ç‰¹æ®Šå½¢å¼ï¼Œä½ è°ƒç”¨å®å°±åƒè°ƒç”¨å‡½æ•°æˆ–ç‰¹æ®Šå½¢å¼ä¸€æ ·ã€‚\nä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè¿™é‡Œæœ‰æˆ‘ä»¬çš„è€æœ‹å‹infixå®ã€‚\n(defmacro infix \u0026#34;Use this macro when you pine for the notation of your childhood\u0026#34; [infixed] (list (second infixed) (first infixed) (last infixed))) è¿™ä¸ªå®å°†ä¸€ä¸ªåˆ—è¡¨é‡æ–°æ’åˆ—æˆæ­£ç¡®çš„ infix è®°å·é¡ºåºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n(infix (1 + 1)) ; =\u0026gt; 2 å‡½æ•°å’Œå®ä¹‹é—´çš„ä¸€ä¸ªå…³é”®åŒºåˆ«æ˜¯ï¼Œå‡½æ•°å‚æ•°åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰è¢«å®Œå…¨æ±‚å€¼ï¼Œè€Œå®æ˜¯ä»¥æœªæ±‚å€¼çš„æ•°æ®å½¢å¼æ¥æ”¶å‚æ•°ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªä¾‹å­ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚å¦‚æœä½ è¯•å›¾å•ç‹¬æ±‚å€¼(1+1)ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ã€‚ç„¶è€Œï¼Œå› ä¸ºä½ åœ¨è¿›è¡Œä¸€ä¸ªå®è°ƒç”¨ï¼Œæœªæ±‚å€¼çš„åˆ—è¡¨(1 + 1)è¢«ä¼ é€’ç»™infixã€‚ç„¶åå®å¯ä»¥ä½¿ç”¨firstã€secondå’Œlastæ¥é‡æ–°æ’åˆ—åˆ—è¡¨ï¼Œè¿™æ · Clojure å°±å¯ä»¥æ±‚å€¼å®ƒã€‚\n(macroexpand \u0026#39;(infix (1 + 1)) ; =\u0026gt; (+ 1 1) é€šè¿‡æ‰©å±•å®ï¼Œä½ å¯ä»¥çœ‹åˆ°infixå°†(1 + 1)é‡æ–°æ’åˆ—æˆ(+ 1 1)ã€‚å¾ˆæ–¹ä¾¿!\nä½ ä¹Ÿå¯ä»¥åœ¨å®å®šä¹‰ä¸­ä½¿ç”¨å‚æ•°é‡æ„ï¼Œå°±åƒä½ å¯ä»¥ä½¿ç”¨å‡½æ•°ä¸€æ ·ã€‚\n(defmacro infix-2 [[operand1 op operand2]] (list op operand1 operand2) (list op operand1 operand2)) è§£æ„å‚æ•°å¯ä»¥è®©ä½ æ ¹æ®åºåˆ—å‚æ•°ä¸­çš„ä½ç½®ç®€æ´åœ°å°†å€¼ä¸ç¬¦å·ç»‘å®šã€‚åœ¨è¿™é‡Œï¼Œinfix-2å°†ä¸€ä¸ªé¡ºåºæ•°æ®ç»“æ„ä½œä¸ºå‚æ•°ï¼Œå¹¶æŒ‰ä½ç½®è¿›è¡Œè§£æ„ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå€¼è¢«å‘½åä¸ºoperand1ï¼Œç¬¬äºŒä¸ªå€¼è¢«å‘½åä¸ºopï¼Œç¬¬ä¸‰ä¸ªå€¼åœ¨å®ä¸­è¢«å‘½åä¸ºoperand2ã€‚\nä½ ä¹Ÿå¯ä»¥åˆ›å»ºå¤šå±æ€§çš„å®ï¼Œäº‹å®ä¸Šï¼ŒåŸºæœ¬çš„å¸ƒå°”è¿ç®—andå’Œoréƒ½è¢«å®šä¹‰ä¸ºå®ã€‚ä¸‹é¢æ˜¯andçš„æºä»£ç ã€‚\n(defmacro and \u0026#34;Evaluates exprs one at a time, from left to right. If a form returns logical false (nil or false), and returns that value and doesn\u0026#39;t evaluate any of the other expressions, otherwise it returns the value of the last expr. (and) returns true.\u0026#34; {:added \u0026#34;1.0\u0026#34;} ([] true) ([x] x) ([x \u0026amp; next] `(let [and# ~x] (if and# (and ~@next) and#)))) åœ¨è¿™ä¸ªä¾‹å­ä¸­å‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ï¼ŒåŒ…æ‹¬ç¬¦å·å’Œ~@ï¼Œä½ å¾ˆå¿«å°±ä¼šäº†è§£åˆ°è¿™äº›ã€‚ç°åœ¨é‡è¦çš„æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªå®ä½“ï¼šä¸€ä¸ªæ€»æ˜¯è¿”å› \u0026ldquo;true \u0026ldquo;çš„ 0-arity å®ä½“ï¼Œä¸€ä¸ªè¿”å›æ“ä½œæ•°çš„ 1-arity å®ä½“ï¼Œä»¥åŠä¸€ä¸ªé€’å½’è°ƒç”¨è‡ªèº«çš„n-arity å®ä½“ã€‚è¿™æ˜¯æ­£ç¡®çš„ï¼šå®å¯ä»¥æ˜¯é€’å½’çš„ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä½™çš„å‚æ•°ï¼ˆn-arity å®ä¸»ä½“ä¸­çš„\u0026amp; nextï¼‰ï¼Œå°±åƒå‡½æ•°ä¸€æ ·ã€‚\nç°åœ¨ä½ å¯¹å®çš„è§£å‰–å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œç°åœ¨æ˜¯æ—¶å€™æŠŠä½ è‡ªå·±ç»‘åœ¨ä½ çš„å¥¥å¾·ä¿®æ–¯å¼æ€ç»´çš„æ¡…æ†ä¸Šï¼Œå­¦ä¹ å†™å®ä½“äº†ã€‚\nä¸ºæ±‚å€¼å»ºç«‹åˆ—è¡¨ ç¼–å†™å®å°±æ˜¯è¦ä¸º Clojure å»ºç«‹ä¸€ä¸ªåˆ—è¡¨æ¥è¿›è¡Œæ±‚å€¼ï¼Œè¿™éœ€è¦é¢ è¦†ä½ çš„æ­£å¸¸æ€ç»´æ–¹å¼ã€‚é¦–å…ˆï¼Œä½ ç»å¸¸éœ€è¦å¼•ç”¨è¡¨è¾¾å¼ï¼Œä»¥ä¾¿åœ¨ä½ çš„æœ€ç»ˆåˆ—è¡¨ä¸­è·å¾—æœªæ±‚å€¼çš„æ•°æ®ç»“æ„ï¼ˆæˆ‘ä»¬ç¨åä¼šå›åˆ°è¿™ä¸ªé—®é¢˜ï¼‰ã€‚æ›´æ™®éçš„æ˜¯ï¼Œä½ éœ€è¦ç‰¹åˆ«æ³¨æ„ç¬¦å·å’Œå€¼ä¹‹é—´çš„åŒºåˆ«ã€‚\nåŒºåˆ†ç¬¦å·å’Œå€¼ å‡è®¾ä½ æƒ³åˆ›å»ºä¸€ä¸ªå®ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶åŒæ—¶æ‰“å°å’Œè¿”å›å…¶å€¼ã€‚(è¿™ä¸println'ä¸åŒï¼Œprintln\u0026rsquo;æ€»æ˜¯è¿”å›`nil\u0026rsquo;ã€‚)ä½ å¸Œæœ›ä½ çš„å®èƒ½å¤Ÿè¿”å›ç±»ä¼¼è¿™æ ·çš„åˆ—è¡¨ã€‚\n(let [result expression] (println result) result) ä½ çš„å®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼Œä½¿ç”¨listå‡½æ•°æ¥åˆ›å»º Clojure åº”è¯¥æ±‚å€¼çš„åˆ—è¡¨ã€‚\n (defmacro my-print-whoopsie [expression] (list let [result expression] (list println result) result)) ç„¶è€Œï¼Œå¦‚æœä½ å°è¯•è¿™æ ·åšï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸`ä¸èƒ½æ¥å—ä¸€ä¸ªå®çš„å€¼ã€‚#\u0026lsquo;clojure.core/let\u0026rsquo;ã€‚è¿™åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ\nå‘ç”Ÿè¿™ç§æƒ…å†µçš„åŸå› æ˜¯ï¼Œä½ çš„å®ä¸»ä½“è¯•å›¾è·å–ç¬¦å· letæ‰€æŒ‡çš„*å€¼ï¼Œè€Œä½ å®é™…æƒ³åšçš„æ˜¯è¿”å›letç¬¦å·æœ¬èº«ã€‚è¿˜æœ‰å…¶ä»–çš„é—®é¢˜ï¼šä½ è¯•å›¾è·å¾—resultçš„å€¼ï¼Œè¿™æ˜¯ä¸ç»‘å®šçš„ï¼Œä½ è¯•å›¾è·å¾—printlnçš„å€¼ï¼Œè€Œä¸æ˜¯è¿”å›å…¶ç¬¦å·ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•å†™å®æ¥åšä½ æƒ³è¦çš„äº‹æƒ…ã€‚\n(defmacro my-print [expression] (list \u0026#39;let [\u0026#39;result expression] (list \u0026#39;println \u0026#39;result) \u0026#39;result)) åœ¨è¿™é‡Œï¼Œä½ é€šè¿‡åœ¨æ¯ä¸ªç¬¦å·å‰åŠ ä¸Šå•å¼•å·\u0026rdquo;\u0026lsquo;\u0026lsquo;æ¥å¼•å‡ºä½ æƒ³ä½œä¸ºä¸€ä¸ªç¬¦å·ä½¿ç”¨ã€‚è¿™å‘Šè¯‰ Clojureå…³é—­åé¢çš„æ±‚å€¼ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé˜²æ­¢ Clojure è¯•å›¾è§£å†³è¿™äº›ç¬¦å·ï¼Œè€Œåªæ˜¯è¿”å›è¿™äº›ç¬¦å·ã€‚ä½¿ç”¨å¼•å·æ¥å…³é—­æ±‚å€¼çš„èƒ½åŠ›æ˜¯ç¼–å†™å®çš„æ ¸å¿ƒï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç»™è¿™ä¸ªä¸»é¢˜ä¸€ä¸ªç‹¬ç«‹çš„ç« èŠ‚ã€‚\nç®€å•çš„å¼•å· ä½ å‡ ä¹æ€»æ˜¯åœ¨ä½ çš„å®ä¸­ä½¿ç”¨å¼•å·æ¥è·å¾—ä¸€ä¸ªæœªæ±‚å€¼çš„ç¬¦å·ã€‚è®©æˆ‘ä»¬ç®€å•åœ°å¤ä¹ ä¸€ä¸‹å¼•å·ï¼Œç„¶åçœ‹çœ‹ä½ å¦‚ä½•åœ¨å®ä¸­ä½¿ç”¨å®ƒã€‚\né¦–å…ˆï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªæ²¡æœ‰å¼•å·çš„ç®€å•å‡½æ•°è°ƒç”¨ã€‚\n(+ 1 2) ; =\u0026gt; 3 å¦‚æœæˆ‘ä»¬åœ¨å¼€å¤´åŠ ä¸Šquoteï¼Œå®ƒå°±ä¼šè¿”å›ä¸€ä¸ªæœªæ±‚å€¼çš„æ•°æ®ç»“æ„ã€‚\n(quote (+ 1 2)) ; =\u0026gt; (+ 1 2) è¿™é‡Œåœ¨è¿”å›çš„åˆ—è¡¨ä¸­ï¼Œ+æ˜¯ä¸€ä¸ªç¬¦å·ã€‚å¦‚æœæˆ‘ä»¬æ±‚å€¼è¿™ä¸ªåŠ å·ï¼Œå°±ä¼šäº§ç”ŸåŠ å·å‡½æ•°ã€‚\n+ ; =\u0026gt; #\u0026lt;core$_PLUS_ clojure.core$_PLUS_@47b36583\u0026gt; è€Œå¦‚æœæˆ‘ä»¬å¼•ç”¨è¿™ä¸ªåŠ å·ï¼Œå®ƒåªæ˜¯äº§ç”ŸåŠ å·ã€‚\n(quote +) ; =\u0026gt; + æ±‚å€¼ä¸€ä¸ªæœªç»‘å®šçš„ç¬¦å·ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ã€‚\nsweating-to-the-oldies ; =\u0026gt; Unable to resolve symbol: sweating-to-the-oldies in this context ä½†æ˜¯å¼•ç”¨ç¬¦å·ä¼šè¿”å›ä¸€ä¸ªç¬¦å·ï¼Œä¸ç®¡è¿™ä¸ªç¬¦å·æ˜¯å¦æœ‰ä¸€ä¸ªä¸ä¹‹ç›¸å…³çš„å€¼ã€‚\n(quote sweating-to-the-oldies) ; =\u0026gt; sweating-to-the-oldies å•å¼•å·å­—ç¬¦æ˜¯(quotex)çš„è¯»è€…å®ã€‚\n\u0026#39;(+ 1 2) ; =\u0026gt; (+ 1 2) \u0026#39;dr-jekyll-and-richard-simmons ; =\u0026gt; dr-jekyll-and-richard-simmons ä½ å¯ä»¥åœ¨whenå®ä¸­çœ‹åˆ°å¼•ç”¨çš„å·¥ä½œã€‚è¿™æ˜¯whençš„å®é™…æºä»£ç ã€‚\n(defmacro when \u0026#34;Evaluates test. If logical true, evaluates body in an implicit do.\u0026#34; {:added \u0026#34;1.0\u0026#34;} [test \u0026amp; body] (list \u0026#39;if test (cons \u0026#39;do body))) æ³¨æ„ï¼Œå®çš„å®šä¹‰åŒæ—¶å¼•ç”¨äº†ifå’Œdoã€‚è¿™æ˜¯å› ä¸ºä½ æƒ³è®©è¿™äº›ç¬¦å·å‡ºç°åœ¨`when\u0026rsquo;è¿”å›çš„æœ€ç»ˆåˆ—è¡¨ä¸­è¿›è¡Œè®¡ç®—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè¿”å›åˆ—è¡¨çš„ä¾‹å­ï¼Œå®ƒå¯èƒ½æ˜¯è¿™æ ·çš„ã€‚\n(macroexpand \u0026#39;(when (the-cows-come :home) (call me :pappy) (slap me :silly))) ; =\u0026gt; (if (the-cows-come :home) (do (call me :pappy) (slap me :silly))) ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå†…ç½®å®çš„æºä»£ç çš„ä¾‹å­ï¼Œè¿™æ¬¡æ˜¯å…³äºunlessçš„ã€‚\n(defmacro unless \u0026#34;Inverted \u0026#39;if\u0026#39;\u0026#34; [test \u0026amp; branches] (conj (reverse branches) test \u0026#39;if)) åŒæ ·ï¼Œä½ å¿…é¡»å¼•ç”¨ifï¼Œå› ä¸ºä½ æƒ³è®©æœªæ±‚å€¼çš„ç¬¦å·æ”¾åœ¨ç»“æœåˆ—è¡¨ä¸­ï¼Œå°±åƒè¿™æ ·ã€‚\n(macroexpand \u0026#39;(unless (done-been slapped? me) (slap me :silly) (say \u0026#34;I reckon that\u0026#39;ll learn me\u0026#34;))) ; =\u0026gt; (if (done-been slapped? me) (say \u0026#34;I reckon that\u0026#39;ll learn me\u0026#34;) (slap me :silly)) åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œåœ¨ç¼–å†™å®æ—¶ï¼Œä½ ä¼šä½¿ç”¨è¿™æ ·çš„ç®€å•å¼•å·ï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹ä½ ä¼šä½¿ç”¨æ›´å¼ºå¤§çš„è¯­æ³•å¼•å·ã€‚\nè¯­æ³•å¼•ç”¨ åˆ°ç›®å‰ä¸ºæ­¢, ä½ å·²ç»çœ‹åˆ°äº†é€šè¿‡ä½¿ç”¨listå‡½æ•°æ¥å»ºç«‹åˆ—è¡¨çš„å®ï¼Œä»¥åŠå¯¹åˆ—è¡¨è¿›è¡Œæ“ä½œçš„å‡½æ•°ï¼Œå¦‚first, second, lastï¼Œç­‰ç­‰ã€‚äº‹å®ä¸Šï¼Œä½ å¯ä»¥è¿™æ ·å†™å®ï¼Œç›´åˆ°å¥¶ç‰›å›å®¶ã€‚ä½†æœ‰æ—¶ï¼Œè¿™å°†å¯¼è‡´ç¹çå’Œå†—é•¿çš„ä»£ç ã€‚\nè¯­æ³•å¼•å·è¿”å›æœªæ±‚å€¼çš„æ•°æ®ç»“æ„ï¼Œä¸æ™®é€šå¼•å·ç±»ä¼¼ã€‚ç„¶è€Œï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„åŒºåˆ«ã€‚ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œè¯­æ³•å¼•ç”¨å°†è¿”å›å®Œå…¨åˆæ ¼çš„ç¬¦å·ï¼ˆå³åŒ…æ‹¬ç¬¦å·çš„å‘½åç©ºé—´ï¼‰ã€‚è®©æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹å¼•å·å’Œè¯­æ³•å¼•å·ã€‚\nå¦‚æœä½ çš„ä»£ç ä¸­ä¸åŒ…æ‹¬åå­—ç©ºé—´ï¼Œé‚£ä¹ˆå¼•ç”¨å°±ä¸åŒ…æ‹¬åå­—ç©ºé—´ã€‚\n\u0026#39;+ ; =\u0026gt; + å†™å‡ºå‘½åç©ºé—´ï¼Œå®ƒå°†è¢«æ­£å¸¸çš„å¼•ç”¨æ‰€è¿”å›ã€‚\n\u0026#39;clojure.core/+ ; =\u0026gt; clojure.core/+ è¯­æ³•å¼•å·å°†æ€»æ˜¯åŒ…æ‹¬ç¬¦å·çš„å®Œæ•´å‘½åç©ºé—´ã€‚\n`+ ; =\u0026gt; clojure.core/+ å¯¹ä¸€ä¸ªåˆ—è¡¨çš„å¼•ç”¨ä¼šé€’å½’åœ°å¼•ç”¨æ‰€æœ‰çš„å…ƒç´ ã€‚\n\u0026#39;(+ 1 2) ; =\u0026gt; (+ 1 2) è¯­æ³•å¼•ç”¨ä¸€ä¸ªåˆ—è¡¨é€’å½’åœ°å¼•ç”¨æ‰€æœ‰çš„å…ƒç´ ã€‚\n`(+ 1 2) ; =\u0026gt; (clojure.core/+ 1 2) è¯­æ³•å¼•å·åŒ…æ‹¬åå­—ç©ºé—´çš„åŸå› æ˜¯ä¸ºäº†å¸®åŠ©ä½ é¿å…åå­—çš„ç¢°æ’ï¼Œè¿™ä¸ªè¯é¢˜åœ¨ç¬¬ 6 ç« ä¸­æ¶‰åŠã€‚\nå¼•å·å’Œè¯­æ³•å¼•å·ä¹‹é—´çš„å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œåè€…å…è®¸ä½ ä½¿ç”¨ \u0026ldquo;tilde\u0026rdquo;ï¼Œå³\u0026rdquo;~\u0026quot;ï¼Œæ¥*è§£é™¤å¼•å·çš„å½¢å¼ã€‚è¿™æœ‰ç‚¹åƒæ°ªæ˜ŸçŸ³ï¼šåªè¦è¶…äººåœ¨æ°ªæ˜ŸçŸ³å‘¨å›´ï¼Œä»–çš„èƒ½åŠ›å°±ä¼šæ¶ˆå¤±ã€‚æ¯å½“åœ¨ä¸€ä¸ªè¯­æ³•å¼•å·çš„ Form ä¸­å‡ºç° tildeï¼Œè¯­æ³•å¼•å·è¿”å›æœªæ±‚å€¼çš„ã€å®Œå…¨å‘½åçš„ Form çš„èƒ½åŠ›å°±ä¼šæ¶ˆå¤±ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚\n`(+ 1 ~(inc 1)) ; =\u0026gt; (clojure.core/+ 1 2) å› ä¸ºå®ƒåœ¨ tilde ä¹‹åï¼Œ(inc 1)è¢«æ±‚å€¼è€Œä¸æ˜¯è¢«å¼•å·ã€‚å¦‚æœæ²¡æœ‰ unquoteï¼Œè¯­æ³•å¼•å·ä¼šè¿”å›æœªæ±‚å€¼çš„å½¢å¼ï¼Œå¹¶å¸¦æœ‰å®Œå…¨é™å®šçš„ç¬¦å·ã€‚\n`(+ 1 (inc 1)) ; =\u0026gt; (clojure.core/+ 1 (clojure.core/inc 1)) å¦‚æœä½ ç†Ÿæ‚‰å­—ç¬¦ä¸²æ’å€¼ï¼Œä½ å¯ä»¥ç±»ä¼¼åœ°è€ƒè™‘è¯­æ³•å¼•ç”¨/éå¼•ç”¨çš„é—®é¢˜ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ éƒ½åœ¨åˆ›å»ºä¸€ç§æ¨¡æ¿ï¼Œå°†ä¸€äº›å˜é‡æ”¾åœ¨ä¸€ä¸ªæ›´å¤§çš„é™æ€ç»“æ„ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨ Ruby ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡è¿æ¥æ¥åˆ›å»ºå­—ç¬¦ä¸²\u0026quot;Churn your butter, Jebediah!\u0026quot;ã€‚\nname = \u0026#34;Jebediah\u0026#34; \u0026#34;Churn your butter, \u0026#34; + name + \u0026#34;!\u0026#34; æˆ–é€šè¿‡å†…æ’æ³•ã€‚\n\u0026#34;Churn your butter, #{name}!\u0026#34; å°±åƒå­—ç¬¦ä¸²æ’å€¼å¯ä»¥ä½¿ä»£ç æ›´æ¸…æ™°ã€æ›´ç®€æ´ä¸€æ ·ï¼Œè¯­æ³•å¼•å·å’Œè§£å¼•å·å¯ä»¥ä½¿ä½ æ›´æ¸…æ™°ã€æ›´ç®€æ´åœ°åˆ›å»ºåˆ—è¡¨ã€‚æ¯”è¾ƒä¸€ä¸‹ä½¿ç”¨listå‡½æ•°å’Œä½¿ç”¨è¯­æ³•å¼•å·ã€‚\n(list \u0026#39;+ 1 (inc 1)) ; =\u0026gt; (+ 1 2) `(+ 1 ~(inc 1)) ; =\u0026gt; (clojure.core/+ 1 2) æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¯­æ³•å¼•å·ç‰ˆæœ¬æ›´åŠ ç®€æ´ã€‚è€Œä¸”ï¼Œå®ƒçš„è§†è§‰å½¢å¼æ›´æ¥è¿‘åˆ—è¡¨çš„æœ€ç»ˆå½¢å¼ï¼Œä½¿å…¶æ›´å®¹æ˜“ç†è§£ã€‚\nåœ¨å®ä¸­ä½¿ç”¨è¯­æ³•å¼•è¯­ ç°åœ¨ä½ å·²ç»å¾ˆå¥½åœ°æŒæ¡äº†è¯­æ³•å¼•å·çš„å·¥ä½œåŸç†ï¼Œæ¥çœ‹çœ‹code-criticå®ã€‚ä½ å°†ä½¿ç”¨è¯­æ³•å¼•å·ç¼–å†™ä¸€ä¸ªæ›´ç®€æ´çš„ç‰ˆæœ¬ã€‚\n(defmacro code-critic \u0026#34;Phrases are courtesy Hermes Conrad from Futurama\u0026#34; [bad good] (list \u0026#39;do (list \u0026#39;println \u0026#34;Great squid of Madrid, this is bad code:\u0026#34; (list \u0026#39;quote bad)) (list \u0026#39;println \u0026#34;Sweet gorilla of Manila, this is good code:\u0026#34; (list \u0026#39;quote good)))) (code-critic (1 + 1) (+ 1 1)) ; =\u0026gt; Great squid of Madrid, this is bad code: (1 + 1) ; =\u0026gt; Sweet gorilla of Manila, this is good code: (+ 1 1) ä»…ä»…æ˜¯çœ‹ç€é‚£äº›ä¹å‘³çš„é‡å¤çš„listå’Œå•å¼•å·ï¼Œå°±è®©æˆ‘æ„Ÿåˆ°å®³æ€•ã€‚ä½†æ˜¯å¦‚æœä½ ç”¨è¯­æ³•å¼•å·é‡å†™code-criticï¼Œä½ å°±å¯ä»¥ä½¿å®ƒå˜å¾—åœ†æ»‘ç®€æ´ã€‚\n(defmacro code-critic \u0026#34;Phrases are courtesy Hermes Conrad from Futurama\u0026#34; [bad good] `(do (println \u0026#34;Great squid of Madrid, this is bad code:\u0026#34; (quote ~bad)) (println \u0026#34;Sweet gorilla of Manila, this is good code:\u0026#34; (quote ~good)))) åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æƒ³å¼•ç”¨é™¤ç¬¦å·goodå’Œbadä»¥å¤–çš„æ‰€æœ‰å†…å®¹ã€‚åœ¨åŸæ¥çš„ç‰ˆæœ¬ä¸­ï¼Œä½ å¿…é¡»å•ç‹¬å¼•ç”¨æ¯ä¸€å—ï¼Œå¹¶æ˜ç¡®åœ°æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªä¸æ–¹ä¾¿çš„åˆ—è¡¨ä¸­ï¼Œåªæ˜¯ä¸ºäº†é˜²æ­¢è¿™ä¸¤ä¸ªç¬¦å·è¢«å¼•ç”¨ã€‚æœ‰äº†è¯­æ³•å¼•å·ï¼Œä½ åªéœ€å°†æ•´ä¸ªdoè¡¨è¾¾å¼åŒ…è£¹åœ¨ä¸€ä¸ªå¼•å·ä¸­ï¼Œå¹¶ç®€å•åœ°å–æ¶ˆä½ è¦æ±‚å€¼çš„ä¸¤ä¸ªç¬¦å·çš„å¼•å·ã€‚\nå®çš„ç¼–å†™æ–¹æ³•ä»‹ç»åˆ°æ­¤ç»“æŸ! äº²çˆ±çš„è¥¿è¨æ‘©äºšå’Œä¸œè¨æ‘©äºšçš„ç¥åœ£èŸ’è›‡ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„!\næ€»è€Œè¨€ä¹‹ï¼Œå®æ¥æ”¶æœªç»æ±‚å€¼çš„ã€ä»»æ„çš„æ•°æ®ç»“æ„ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å› Clojure æ±‚å€¼çš„æ•°æ®ç»“æ„ã€‚åœ¨å®šä¹‰å®çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨å‚æ•°é‡æ„ï¼Œå°±åƒä½ å¯ä»¥ä½¿ç”¨å‡½æ•°å’Œletç»‘å®šä¸€æ ·ã€‚ä½ ä¹Ÿå¯ä»¥ç¼–å†™å¤šå±æ€§å’Œé€’å½’çš„å®ã€‚\nå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ çš„å®ä¼šè¿”å›åˆ—è¡¨ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨listå‡½æ•°æˆ–ä½¿ç”¨è¯­æ³•å¼•å·æ¥å»ºç«‹è¦è¿”å›çš„åˆ—è¡¨ã€‚è¯­æ³•å¼•å·é€šå¸¸ä¼šä½¿ä»£ç æ›´æ¸…æ™°ã€æ›´ç®€æ´ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©ä½ åˆ›å»ºä¸€ä¸ªä½ æƒ³è¿”å›çš„æ•°æ®ç»“æ„çš„æ¨¡æ¿ï¼Œæ›´å®¹æ˜“è¿›è¡Œè§†è§‰ä¸Šçš„è§£æã€‚æ— è®ºä½ ä½¿ç”¨è¯­æ³•å¼•å·è¿˜æ˜¯æ™®é€šå¼•å·ï¼Œé‡è¦çš„æ˜¯åœ¨å»ºç«‹ä½ çš„åˆ—è¡¨æ—¶è¦æ¸…æ¥šåœ°äº†è§£ç¬¦å·å’Œå®ƒæ‰€æ±‚å€¼çš„å€¼ä¹‹é—´çš„åŒºåˆ«ã€‚å¦‚æœä½ æƒ³è®©ä½ çš„å®è¿”å›å¤šç§å½¢å¼ä¾› Clojure æ±‚å€¼ï¼Œä¸€å®šè¦ç”¨doæ¥åŒ…è£…å®ƒä»¬ã€‚\né‡æ„ä¸€ä¸ªå®å’Œå–æ¶ˆå¼•å·æ‹¼æ¥ ä¸Šä¸€èŠ‚ä¸­çš„ \u0026ldquo;code-critic \u0026ldquo;å®ä»ç„¶éœ€è¦ä¸€äº›æ”¹è¿›ã€‚çœ‹çœ‹è¿™ä¸ªé‡å¤çš„åœ°æ–¹! ä¸¤ä¸ª \u0026ldquo;println \u0026ldquo;çš„è°ƒç”¨å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚è®©æˆ‘ä»¬æŠŠå®ƒæ¸…ç†ä¸€ä¸‹ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆè¿™äº›`println\u0026rsquo;åˆ—è¡¨ã€‚å‡½æ•°æ¯”å®æ›´å®¹æ˜“æ€è€ƒå’Œä½¿ç”¨ï¼Œæ‰€ä»¥æŠŠå®çš„å†…å®¹ç§»åˆ°è¾…åŠ©å‡½æ•°ä¸­é€šå¸¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚\n(defn criticize-code [criticism code] `(println ~criticism (quote ~code))) (defmacro code-critic [bad good] `(do ~(criticize-code \u0026#34;Cursed bacteria of Liberia, this is bad code:\u0026#34; bad) ~(criticize-code \u0026#34;Sweet sacred boa of Western and Eastern Samoa, this is good code:\u0026#34; good))) æ³¨æ„åˆ°criticize-codeå‡½æ•°å¦‚ä½•è¿”å›ä¸€ä¸ªè¯­æ³•å¼•å·çš„åˆ—è¡¨ã€‚è¿™å°±æ˜¯ä½ å¦‚ä½•å»ºç«‹èµ·å®å°†è¿”å›çš„åˆ—è¡¨ã€‚\nä¸è¿‡ï¼Œè¿˜æœ‰æ›´å¤šçš„æ”¹è¿›ç©ºé—´ã€‚è¿™æ®µä»£ç ä»ç„¶æœ‰å¤šä¸ªå‡ ä¹ç›¸åŒçš„å‡½æ•°è°ƒç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æƒ³å¯¹ä¸€ä¸ªå€¼çš„é›†åˆåº”ç”¨åŒä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨åƒmapè¿™æ ·çš„ seq å‡½æ•°æ˜¯æœ‰æ„ä¹‰çš„ã€‚\n(defmacro code-critic [bad good] `(do ~(map #(apply criticize-code %) [[\u0026#34;Great squid of Madrid, this is bad code:\u0026#34; bad] [\u0026#34;Sweet gorilla of Manila, this is good code:\u0026#34; good]]))) è¿™çœ‹èµ·æ¥å¥½ä¸€ç‚¹äº†ã€‚ä½ æ­£åœ¨ Map æ¯ä¸ªæ‰¹è¯„/ä»£ç å¯¹ï¼Œå¹¶å°† \u0026ldquo;æ‰¹è¯„-ä»£ç  \u0026ldquo;å‡½æ•°åº”ç”¨äºè¯¥å¯¹ã€‚è®©æˆ‘ä»¬è¯•ç€è¿è¡Œè¿™æ®µä»£ç ã€‚\n(code-critic (1 + 1) (+ 1 1)) ; =\u0026gt; NullPointerException å“¦ï¼Œä¸ï¼è¿™æ ¹æœ¬å°±æ²¡æœ‰ç”¨! å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿé—®é¢˜æ˜¯ï¼Œmapè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒè¿”å›ä¸€ä¸ªprintlnè¡¨è¾¾å¼çš„åˆ—è¡¨ã€‚æˆ‘ä»¬åªæƒ³å¾—åˆ°æ¯ä¸ªprintlnè°ƒç”¨çš„ç»“æœï¼Œä½†æ˜¯ç›¸åï¼Œè¿™æ®µä»£ç æŠŠä¸¤ä¸ªç»“æœéƒ½æ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œç„¶åè¯•å›¾æ±‚å€¼è¿™ä¸ªåˆ—è¡¨ã€‚\næ¢å¥è¯è¯´ï¼Œå½“å®ƒæ±‚å€¼è¿™æ®µä»£ç æ—¶ï¼ŒClojure ä¼šå¾—åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æœã€‚\n(do ((clojure.core/println \u0026#34; criticism\u0026#34; \u0026#39; (1 + 1)) (clojure.core/println \u0026#34;critism\u0026#34; \u0026#39;(+ 1 1))))) ç„¶åæ±‚å€¼ç¬¬ä¸€ä¸ª \u0026ldquo;println \u0026ldquo;çš„è°ƒç”¨ï¼Œç»™æˆ‘ä»¬æä¾›è¿™ä¸ªã€‚\n(do (nil (clojure.core/println \u0026#34;criticism\u0026#34; \u0026#39;(+ 1 1)))) å¹¶åœ¨æ±‚å€¼äº†ç¬¬äºŒä¸ª`println\u0026rsquo;è°ƒç”¨åï¼Œè¿™æ ·åšã€‚\n(do (nil nil)) è¿™å°±æ˜¯å¯¼è‡´å¼‚å¸¸çš„åŸå› ã€‚printlnæ±‚å€¼ä¸ºnilï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€åå¾—åˆ°çš„ç»“æœæ˜¯(nil nil)ã€‚nilæ˜¯ä¸å¯è°ƒç”¨çš„ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªNullPointerExceptionã€‚\nå¤šä¹ˆä¸æ–¹ä¾¿å•Š ä½†æ°æ°ç›¸åï¼Œæ— å¼•å·æ‹¼æ¥æ­£æ˜¯ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µè€Œå‘æ˜çš„ã€‚å–æ¶ˆå¼•å·æ‹¼æ¥æ˜¯ç”¨~@æ¥å®Œæˆçš„ã€‚å¦‚æœä½ åªæ˜¯å–æ¶ˆå¼•ç”¨ä¸€ä¸ªåˆ—è¡¨ï¼Œä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚\n`(+ ~(list 1 2 3)) ; =\u0026gt; (clojure.core/+ (1 2 3)) ç„¶è€Œï¼Œå¦‚æœä½ ä½¿ç”¨ unquote æ‹¼æ¥ï¼Œä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚\n`(+ ~@(list 1 2 3)) ; =\u0026gt; (clojure.core/+ 1 2 3) Unquote æ‹¼æ¥å°†ä¸€ä¸ªå¯æ’åºçš„æ•°æ®ç»“æ„è§£å¼€ï¼Œå°†å…¶å†…å®¹ç›´æ¥æ”¾åœ¨åŒ…å›´çš„è¯­æ³•å¼•å·æ•°æ®ç»“æ„ä¸­ã€‚è¿™å°±åƒ~@æ˜¯ä¸€æŠŠå¤§é”¤å­ï¼Œåé¢çš„ä¸œè¥¿æ˜¯ä¸€ä¸ªçš®çº³å¡”ï¼Œå…¶ç»“æœæ˜¯ä½ æ›¾ç»å‚åŠ è¿‡çš„æœ€å¯æ€•å’Œæœ€æ£’çš„èšä¼šã€‚\næ€»ä¹‹ï¼Œå¦‚æœä½ åœ¨ä½ çš„ä»£ç æ‰¹è¯„ä¸­ä½¿ç”¨éå¼•å·æ‹¼æ¥ï¼Œé‚£ä¹ˆä¸€åˆ‡éƒ½ä¼šå¾ˆé¡ºåˆ©ã€‚\n(defmacro code-critic [{:keys [good bad]}] `(do ~@(map #(apply criticize-code %) [[\u0026#34;Sweet lion of Zion, this is bad code:\u0026#34; bad] [\u0026#34;Great cow of Moscow, this is good code:\u0026#34; good]]))) (code-critic (1 + 1) (+ 1 1)) ; =\u0026gt; Sweet lion of Zion, this is bad code: (1 + 1) ; =\u0026gt; Great cow of Moscow, this is good code: (+ 1 1) å‘œå‘¼! ä½ å·²ç»æˆåŠŸåœ°å°†é‡å¤çš„ä»£ç æå–åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå¹¶ä½¿ä½ çš„å®ä»£ç æ›´åŠ ç®€æ´ã€‚æ¸©å°¼ä¼¯çš„å¯çˆ±è±šé¼ ï¼Œè¿™æ˜¯å¾ˆå¥½çš„ä»£ç !\néœ€è¦æ³¨æ„çš„äº‹é¡¹ å®æœ‰ä¸€äº›å·å·æ‘¸æ‘¸çš„é—®é¢˜ï¼Œä½ åº”è¯¥æ³¨æ„åˆ°ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†äº†è§£åˆ°ä¸€äº›å®çš„é™·é˜±ä»¥åŠå¦‚ä½•é¿å…å®ƒä»¬ã€‚æˆ‘å¸Œæœ›ä½ è¿˜æ²¡æœ‰æŠŠè‡ªå·±ä»ä½ çš„æ€æƒ³æ¡…æ†ä¸Šè§£ä¸‹æ¥ã€‚\nå˜é‡æ•è· å˜é‡æ•è·å‘ç”Ÿåœ¨ä¸€ä¸ªå®å¼•å…¥äº†ä¸€ä¸ªç»‘å®šï¼Œè€Œè¿™ä¸ªç»‘å®šå¯¹å®çš„ç”¨æˆ·æ¥è¯´æ˜¯æœªçŸ¥çš„ï¼Œå®ƒä½¿ä¸€ä¸ªç°æœ‰çš„ç»‘å®šé»¯ç„¶å¤±è‰²ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä¸€ä¸ªå®é¡½çš®åœ°å¼•å…¥äº†å®ƒè‡ªå·±çš„letç»‘å®šï¼Œè¿™å°±æŠŠä»£ç æä¹±äº†ã€‚\n(def message \u0026#34;Good job!\u0026#34;) (defmacro with-mischief [\u0026amp; stuff-to-do] (concat (list \u0026#39;let [\u0026#39;message \u0026#34;Oh, big deal!\u0026#34;]) stuff-to-do)) (with-mischief (println \u0026#34;Here\u0026#39;s how I feel about that thing you did: \u0026#34; message)) ; =\u0026gt; Here\u0026#39;s how I feel about that thing you did: Oh, big deal! printlnè°ƒç”¨å¼•ç”¨äº†ç¬¦å·messageï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä¸å­—ç¬¦ä¸²\u0026quot;å¥½æ ·çš„ï¼\u0026quot;ç»‘å®šã€‚ç„¶è€Œï¼Œwith-mischiefå®ä¸ºmessageåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç»‘å®šã€‚\næ³¨æ„ï¼Œè¿™ä¸ªå®æ²¡æœ‰ä½¿ç”¨è¯­æ³•å¼•å·ã€‚è¿™æ ·åšä¼šå¯¼è‡´ä¸€ä¸ªå¼‚å¸¸ã€‚\n(def message \u0026#34;Good job!\u0026#34;) (defmacro with-mischief [\u0026amp; stuff-to-do] `(let [message \u0026#34;Oh, big deal!\u0026#34;] ~@stuff-to-do)) (with-mischief (println \u0026#34;Here\u0026#39;s how I feel about that thing you did: \u0026#34; message)) ; Exception: Can\u0026#39;t let qualified name: user/message è¿™ä¸ªå¼‚å¸¸æ˜¯ä¸ºäº†ä½ è‡ªå·±å¥½ï¼šè¯­æ³•å¼•å·çš„è®¾è®¡æ˜¯ä¸ºäº†é˜²æ­¢ä½ åœ¨å®ä¸­æ„å¤–åœ°æ•æ‰åˆ°å˜é‡ã€‚å¦‚æœä½ æƒ³åœ¨ä½ çš„å®ä¸­å¼•å…¥letç»‘å®šï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªgensymã€‚gensymå‡½æ•°åœ¨æ¯æ¬¡è¿ç»­è°ƒç”¨æ—¶äº§ç”Ÿå”¯ä¸€çš„ç¬¦å·ã€‚\n(gensym) ; =\u0026gt; G__655 (gensym) ; =\u0026gt; G__658 ä½ ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªç¬¦å·å‰ç¼€ã€‚\n(gensym \u0026#39;message) ; =\u0026gt; message4760 (gensym \u0026#39;message) ; =\u0026gt; message4763 ä¸‹é¢æ˜¯ä½ å¦‚ä½•æ”¹å†™with-mischiefï¼Œä½¿ä¹‹ä¸é‚£ä¹ˆè°ƒçš®ã€‚\n(defmacro without-mischief [\u0026amp; stuff-to-do] (let [macro-message (gensym \u0026#39;message)] `(let [~macro-message \u0026#34;Oh, big deal!\u0026#34;] ~@stuff-to-do (println \u0026#34;I still need to say: \u0026#34; ~macro-message)))) (without-mischief (println \u0026#34;Here\u0026#39;s how I feel about that thing you did: \u0026#34; message)) ; =\u0026gt; Here\u0026#39;s how I feel about that thing you did: Good job! ; =\u0026gt; I still need to say: Oh, big deal! è¿™ä¸ªä¾‹å­é€šè¿‡ä½¿ç”¨gensymæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ã€å”¯ä¸€çš„ç¬¦å·ï¼Œç„¶åä¸macro-messageç»‘å®šï¼Œé¿å…äº†å˜é‡æ•è·ã€‚åœ¨è¯­æ³•å¼•ç”¨çš„letè¡¨è¾¾å¼ä¸­ï¼Œmacro-messageæ²¡æœ‰è¢«å¼•ç”¨ï¼Œè¢«è§£æä¸º gensym çš„ç¬¦å·ã€‚è¿™ä¸ªæºç ç¬¦å·ä¸stuff-to-doä¸­çš„ä»»ä½•ç¬¦å·éƒ½ä¸åŒï¼Œæ‰€ä»¥ä½ å¯ä»¥é¿å…å˜é‡æ•è·ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨è‡ªåŠ¨æºç ã€‚è‡ªåŠ¨æºç æ˜¯ä½¿ç”¨æºç çš„æ›´ç®€æ´å’Œæ–¹ä¾¿çš„æ–¹æ³•ã€‚\n`(blarg# blarg#) (blarg__2869__auto__ blarg__2869__auto__) `(let [name# \u0026#34;Larry Potter\u0026#34;] name#) ; =\u0026gt; (clojure.core/let [name__2872__auto__ \u0026#34;Larry Potter\u0026#34;] name__2872__auto__) åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ é€šè¿‡åœ¨è¯­æ³•å¼•å·åˆ—è¡¨ä¸­çš„ä¸€ä¸ªç¬¦å·ä¸Šé™„åŠ ä¸€ä¸ªå“ˆå¸Œæ ‡è®°ï¼ˆæˆ–è€…å“ˆå¸Œæ ‡è®°ï¼Œå¦‚æœä½ ä¸€å®šè¦åšæŒçš„è¯ï¼‰æ¥åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨æºç ã€‚Clojure ä¼šè‡ªåŠ¨ç¡®ä¿ x#çš„æ¯ä¸ªå®ä¾‹åœ¨åŒä¸€ä¸ªè¯­æ³•å¼•å·åˆ—è¡¨ä¸­è§£æä¸ºç›¸åŒçš„ç¬¦å·ï¼Œy#çš„æ¯ä¸ªå®ä¾‹ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä»¥æ­¤ç±»æ¨ã€‚\ngensymå’Œ auto-gensym åœ¨ç¼–å†™å®æ—¶ç»å¸¸ä½¿ç”¨ï¼Œå®ƒä»¬å…è®¸ä½ é¿å…å˜é‡æ•è·ã€‚\nåŒé‡æ±‚å€¼ ç¼–å†™å®æ—¶è¦æ³¨æ„çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯åŒé‡æ±‚å€¼ï¼Œå½“ä¸€ä¸ªä½œä¸ºå‚æ•°ä¼ é€’ç»™å®çš„è¡¨æ ¼è¢«æ±‚å€¼äº†ä¸æ­¢ä¸€æ¬¡æ—¶ï¼Œå°±ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚\n(defmacro report [to-try] `(if ~to-try (println (quote ~to-try) \u0026#34;was successful:\u0026#34; ~to-try) (println (quote ~to-try) \u0026#34;was not successful:\u0026#34; ~to-try))) ;; Thread/sleep takes a number of milliseconds to sleep for (report (do (Thread/sleep 1000) (+ 1 1))) è¿™æ®µä»£ç æ˜¯ä¸ºäº†æµ‹è¯•å…¶å‚æ•°çš„çœŸå®æ€§ã€‚å¦‚æœå‚æ•°æ˜¯çœŸå®çš„ï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„ï¼›å¦‚æœæ˜¯è™šå‡çš„ï¼Œå®ƒæ˜¯ä¸æˆåŠŸçš„ã€‚è¯¥å®æ‰“å°å‡ºå…¶å‚æ•°æ˜¯å¦æˆåŠŸã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å®é™…ä¸Šä¼šç¡ä¸¤ç§’é’Ÿï¼Œå› ä¸º(Thread/sleep 1000)è¢«æ±‚å€¼äº†ä¸¤æ¬¡ï¼šä¸€æ¬¡åœ¨ifä¹‹åï¼Œå¦ä¸€æ¬¡åœ¨printlnè¢«è°ƒç”¨æ—¶ã€‚è¿™æ˜¯å› ä¸º(do (Thread/sleep 1000) (+ 1 1))çš„ä»£ç åœ¨æ•´ä¸ªå®æ‰©å±•ä¸­è¢«é‡å¤ã€‚è¿™å°±åƒä½ å†™çš„ä¸€æ ·ã€‚\n(if (do (Thread/sleep 1000) (+ 1 1)) (println \u0026#39;(do (Thread/sleep 1000) (+ 1 1)) \u0026#34;was successful:\u0026#34; (do (Thread/sleep 1000) (+ 1 1))) (println \u0026#39;(do (Thread/sleep 1000) (+ 1 1)) \u0026#34;was not successful:\u0026#34; (do (Thread/sleep 1000) (+ 1 1)))) \u0026ldquo;å¤§é—®é¢˜ï¼\u0026ldquo;ä½ å†…å¿ƒçš„ä¾‹å­è¯„è®ºå®¶è¯´ã€‚å¥½å§ï¼Œå¦‚æœä½ çš„ä»£ç æ˜¯åœ¨é“¶è¡Œè´¦æˆ·ä¹‹é—´è½¬è´¦ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•é¿å…è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ã€‚\n(defmacro report [to-try] `(let [result# ~to-try] (if result# (println (quote ~to-try) \u0026#34;was successful:\u0026#34; result#) (println (quote ~to-try) \u0026#34;was not successful:\u0026#34; result#)))) å°† \u0026ldquo;to-try \u0026ldquo;æ”¾åœ¨ä¸€ä¸ª \u0026ldquo;let \u0026ldquo;è¡¨è¾¾å¼ä¸­ï¼Œä½ åªéœ€æ±‚å€¼ä¸€æ¬¡è¯¥ä»£ç ï¼Œå¹¶å°†ç»“æœç»‘å®šåˆ°ä¸€ä¸ªè‡ªåŠ¨æ ‡ç¤ºçš„ç¬¦å· \u0026ldquo;result#\u0026ldquo;ä¸Šï¼Œç°åœ¨ä½ å¯ä»¥å¼•ç”¨è¯¥ç¬¦å·è€Œæ— éœ€é‡æ–°æ±‚å€¼ \u0026ldquo;to-try \u0026ldquo;ä»£ç ã€‚\nå®çš„æ‰€æœ‰æ–¹å¼ ä½¿ç”¨å®çš„ä¸€ä¸ªå¾®å¦™çš„ç¼ºé™·æ˜¯ï¼Œä½ å¯èƒ½æœ€ç»ˆä¸å¾—ä¸å†™è¶Šæ¥è¶Šå¤šçš„å®æ¥å®Œæˆä»»ä½•äº‹æƒ…ã€‚è¿™æ˜¯ç”±äºå®çš„æ‰©å±•å‘ç”Ÿåœ¨æ±‚å€¼ä¹‹å‰ã€‚\nä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³ç”¨reportå®æ¥doseqã€‚è€Œä¸æ˜¯å¤šæ¬¡è°ƒç”¨æŠ¥å‘Šã€‚\n(report (= 1 1)) ; =\u0026gt; (= 1 1) was successful: true (report (= 1 2)) ; =\u0026gt; (= 1 2) was not successful: false è®©æˆ‘ä»¬è¿›è¡Œè¿­ä»£ã€‚\n(doseq [code [\u0026#39;(= 1 1) \u0026#39;(= 1 2)]] (report code)) ; =\u0026gt; code was successful: (= 1 1) ; =\u0026gt; code was successful: (= 1 2) å½“æˆ‘ä»¬å•ç‹¬ä¼ é€’å‡½æ•°æ—¶ï¼ŒæŠ¥å‘Šå®å·¥ä½œæ­£å¸¸ï¼Œä½†å½“æˆ‘ä»¬ä½¿ç”¨doseqå¯¹å¤šä¸ªå‡½æ•°è¿›è¡Œreportè¿­ä»£æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¯«æ— ä»·å€¼çš„å¤±è´¥ã€‚ä¸‹é¢æ˜¯å…¶ä¸­ä¸€ä¸ªdoseqè¿­ä»£çš„å®æ‰©å±•çš„æ ·å­ã€‚\n(if code (clojure.core/println \u0026#39;code \u0026#34;was successful:\u0026#34; code) (clojure.core/println \u0026#39;code \u0026#34;was not successful:\u0026#34; code)) æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œreportåœ¨æ¯ä¸ªè¿­ä»£ä¸­æ¥æ”¶æœªæ±‚å€¼çš„ç¬¦å·codeï¼›ç„¶è€Œï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒåœ¨æ±‚å€¼æ—¶æ¥æ”¶ä»»ä½•codeè¢«ç»‘å®šçš„å†…å®¹ã€‚ä½†æ˜¯reportåœ¨å®æ‰©å±•æ—¶æ“ä½œï¼Œå°±æ˜¯ä¸èƒ½è®¿é—®è¿™äº›å€¼ã€‚è¿™å°±åƒå®ƒæœ‰ T.Rex çš„æ‰‹è‡‚ï¼Œè¿è¡Œæ—¶çš„å€¼æ°¸è¿œä¸åœ¨å®ƒçš„æŒæ¡ä¹‹ä¸­ã€‚\nä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å†å†™ä¸€ä¸ªå®ï¼Œåƒè¿™æ ·ã€‚\n(defmacro doseq-macro [macroname \u0026amp; args] `(do ~@(map (fn [arg] (list macroname arg)) args))) (doseq-macro report (= 1 1) (= 1 2)) ; =\u0026gt; (= 1 1) was successful: true ; =\u0026gt; (= 1 2) was not successful: false å¦‚æœä½ é‡åˆ°è¿™ç§æƒ…å†µï¼Œè¯·èŠ±äº›æ—¶é—´é‡æ–°æ€è€ƒä½ çš„æ–¹æ³•ã€‚è¿™å¾ˆå®¹æ˜“ä½¿ä½ è‡ªå·±é™·å…¥å›°å¢ƒï¼Œä½¿ä½ æ— æ³•é€šè¿‡æ™®é€šçš„å‡½æ•°è°ƒç”¨æ¥å®Œæˆä»»ä½•äº‹æƒ…ã€‚ä½ ä¼šè¢«å¡ä½ï¼Œä¸å¾—ä¸å†™æ›´å¤šçš„å®ã€‚å®æ˜¯éå¸¸å¼ºå¤§å’Œä»¤äººæ•¬ç•çš„ï¼Œä½ ä¸åº”è¯¥å®³æ€•ä½¿ç”¨å®ƒä»¬ã€‚å®ƒä»¬æŠŠ Clojure å¤„ç†æ•°æ®çš„è®¾æ–½å˜æˆäº†åˆ›é€ æ–°è¯­è¨€çš„è®¾æ–½ï¼Œè€Œè¿™äº›æ–°è¯­è¨€æ˜¯æ ¹æ®ä½ çš„ç¼–ç¨‹é—®é¢˜æ¥è®¾è®¡çš„ã€‚å¯¹äºæŸäº›ç¨‹åºæ¥è¯´ï¼Œä½ çš„ä»£ç  90%ä»¥ä¸Šéƒ½æ˜¯å®ï¼Œè¿™æ˜¯åˆé€‚çš„ã€‚å°½ç®¡å®ƒä»¬å¾ˆæ£’ï¼Œä½†å®ƒä»¬ä¹Ÿå¢åŠ äº†æ–°çš„ç»„åˆæŒ‘æˆ˜ã€‚å®ƒä»¬åªæ˜¯çœŸæ­£çš„ç›¸äº’ç»„åˆï¼Œæ‰€ä»¥é€šè¿‡ä½¿ç”¨å®ƒä»¬ï¼Œä½ å¯èƒ½ä¼šé”™è¿‡ Clojure ä¸­å…¶ä»–ç±»å‹çš„ç»„åˆï¼ˆå‡½æ•°å¼ã€é¢å‘å¯¹è±¡ï¼‰ã€‚\næˆ‘ä»¬ç°åœ¨å·²ç»æ¶µç›–äº†ç¼–å†™å®çš„æ‰€æœ‰æœºåˆ¶ã€‚æ‹æ‹ä½ çš„èƒŒå§! è¿™æ˜¯ä¸€ä¸ªç›¸å½“å¤§çš„äº¤æ˜“!\nåœ¨æœ¬ç« çš„æœ€åï¼Œç»ˆäºåˆ°äº†æˆ´ä¸Šä½ çš„ä¼ªè£…å¸½ï¼Œåœ¨æœ¬ç« æœ€å¼€å§‹è°ˆåˆ°çš„ç½‘ä¸Šè¯æ°´åº—å·¥ä½œçš„æ—¶å€™äº†ã€‚\nä¸ºå‹‡æ•¢å’ŒçœŸå®çš„äººè€Œé…¿çš„é…’ åœ¨è¿™ä¸€ç« çš„å¼€å¤´ï¼Œæˆ‘é€éœ²äº†ä¸€ä¸ªæ¢¦æƒ³ï¼šæ‰¾åˆ°æŸç§å¯é¥®ç”¨çš„ä¸œè¥¿ï¼Œä¸€æ—¦æ‘„å…¥ï¼Œå°±èƒ½æš‚æ—¶è®©æˆ‘æ‹¥æœ‰ 80 å¹´ä»£å¥èº«å¤§å¸ˆçš„åŠ›é‡å’Œæ°”è´¨ï¼ŒæŠŠæˆ‘ä»æŠ‘åˆ¶å’Œè‡ªæˆ‘æ„è¯†çš„ç‰¢ç¬¼ä¸­è§£æ”¾å‡ºæ¥ã€‚æˆ‘ç›¸ä¿¡æœ‰ä¸€å¤©æŸä¸ªåœ°æ–¹ä¼šæœ‰äººå‘æ˜è¿™æ ·çš„çµä¸¹å¦™è¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦¨ç€æ‰‹å»ºç«‹ä¸€ä¸ªç³»ç»Ÿæ¥é”€å”®è¿™ç§ç¥è¯èˆ¬çš„è¯æ°´ã€‚è®©æˆ‘ä»¬æŠŠè¿™ç§å‡æƒ³çš„æ··åˆç‰©ç§°ä¸ºå‹‡æ•¢å’ŒçœŸå®çš„å•¤é…’ã€‚è¿™ä¸ªåå­—æ˜¯æˆ‘æ— ç¼˜æ— æ•…æƒ³åˆ°çš„ã€‚\nåœ¨è®¢å•çº·è‡³æ²“æ¥ä¹‹å‰ï¼ˆåŒå…³è¯­ï¼å‡»æŒï¼ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€äº›éªŒè¯çš„åœ°æ–¹ã€‚æœ¬èŠ‚å‘ä½ å±•ç¤ºäº†ä¸€ç§åœ¨åŠŸèƒ½ä¸Šè¿›è¡ŒéªŒè¯çš„æ–¹æ³•ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ä½ å°†ç¼–å†™çš„åä¸º \u0026ldquo;if-valid \u0026ldquo;çš„å®æ›´ç®€æ´åœ°ç¼–å†™æ‰§è¡ŒéªŒè¯çš„ä»£ç ã€‚è¿™å°†å¸®åŠ©ä½ äº†è§£ç¼–å†™è‡ªå·±çš„å®çš„å…¸å‹æƒ…å†µã€‚å¦‚æœä½ åªæƒ³çŸ¥é“å®çš„å®šä¹‰ï¼Œå¯ä»¥è·³åˆ°\u0026quot;if-valid\u0026rdquo; ç¬¬ 182 é¡µã€‚\néªŒè¯å‡½æ•° ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åªæ‹…å¿ƒéªŒè¯æ¯ä¸ªè®¢å•çš„å§“åå’Œç”µå­é‚®ä»¶ã€‚å¯¹äºæˆ‘ä»¬çš„å•†åº—ï¼Œæˆ‘æƒ³æˆ‘ä»¬å¸Œæœ›è¿™äº›è®¢å•çš„ç»†èŠ‚èƒ½åƒè¿™æ ·è¡¨ç¤ºã€‚\n(def order-details {:name \u0026#34;Mitchard Blimmons\u0026#34; :email \u0026#34;mitchard.blimmonsgmail.com\u0026#34;}) è¿™ä¸ªç‰¹æ®Šçš„ Map æœ‰ä¸€ä¸ªæ— æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€ï¼ˆç¼ºå°‘@ç¬¦å·ï¼‰ï¼Œæ‰€ä»¥è¿™æ­£æ˜¯æˆ‘ä»¬çš„éªŒè¯ä»£ç åº”è¯¥æ•æ‰çš„è®¢å•ç±»å‹ ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ç¼–å†™çš„ä»£ç èƒ½äº§ç”Ÿè¿™æ ·çš„ç»“æœã€‚\n(validate order-details order-details-validations) ; =\u0026gt; {:email [\u0026#34;Your email address doesn\u0026#39;t look like an email address.\u0026#34;]} ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œ`validate\u0026rsquo;ï¼Œå…¶ä¸­åŒ…å«éœ€è¦éªŒè¯çš„æ•°æ®å’Œå¦‚ä½•éªŒè¯çš„å®šä¹‰ã€‚ç»“æœåº”è¯¥æ˜¯ä¸€ä¸ª Mapï¼Œå…¶ä¸­æ¯ä¸ªé”®å¯¹åº”ä¸€ä¸ªæ— æ•ˆçš„å­—æ®µï¼Œæ¯ä¸ªå€¼æ˜¯è¯¥å­—æ®µçš„ä¸€ä¸ªæˆ–å¤šä¸ªéªŒè¯ä¿¡æ¯çš„ Vectorã€‚ä¸‹é¢çš„ä¸¤ä¸ªå‡½æ•°å®Œæˆäº†è¿™é¡¹å·¥ä½œã€‚\nè®©æˆ‘ä»¬å…ˆçœ‹çœ‹order-details-validationsã€‚ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•è¡¨ç¤ºéªŒè¯ä¿¡æ¯ã€‚\n(def order-details-validations {:name [\u0026#34;Please enter a name\u0026#34; not-empty] :email [\u0026#34;Please enter an email address\u0026#34; not-empty \u0026#34;Your email address doesn\u0026#39;t look like an email address\u0026#34; #(or (empty? %) (re-seq #\u0026#34;@\u0026#34; %))]}) è¿™æ˜¯ä¸€ä¸ª Mapï¼Œæ¯ä¸ªé”®éƒ½ä¸é”™è¯¯ä¿¡æ¯å’ŒéªŒè¯å‡½æ•°å¯¹çš„ Vector ç›¸å…³ã€‚ä¾‹å¦‚ï¼Œ:nameæœ‰ä¸€ä¸ªéªŒè¯å‡½æ•°ï¼Œnot-emptyï¼›å¦‚æœéªŒè¯å¤±è´¥ï¼Œä½ åº”è¯¥å¾—åˆ°\u0026quot;è¯·è¾“å…¥ä¸€ä¸ªåå­—\u0026quot;çš„é”™è¯¯ä¿¡æ¯ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å†™å‡ºvalidate'å‡½æ•°ã€‚validateå‡½æ•°å¯ä»¥åˆ†è§£æˆä¸¤ä¸ªå‡½æ•°ï¼šä¸€ä¸ªæ˜¯å¯¹å•ä¸ªå­—æ®µè¿›è¡ŒéªŒè¯ï¼Œå¦ä¸€ä¸ªæ˜¯å°†è¿™äº›é”™è¯¯ä¿¡æ¯ç´¯ç§¯æˆä¸€ä¸ªæœ€ç»ˆçš„é”™è¯¯ä¿¡æ¯Mapï¼Œå¦‚{:email [\u0026ldquo;ä½ çš„é‚®ç®±åœ°å€çœ‹èµ·æ¥ä¸åƒé‚®ç®±åœ°å€ã€‚\u0026rdquo;]}ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå«åšerror-messages-for`çš„å‡½æ•°ï¼Œå¯¹ä¸€ä¸ªå•ä¸€çš„å€¼è¿›è¡ŒéªŒè¯ã€‚\n(defn error-messages-for \u0026#34;Return a seq of error messages\u0026#34; [to-validate message-validator-pairs] (map first (filter #(not ((second %) to-validate)) (partition 2 message-validator-pairs)))) ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œto-validateï¼Œæ˜¯ä½ è¦éªŒè¯çš„å­—æ®µã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼Œmessage-validator-pairsï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰å¶æ•°å…ƒç´ çš„åºåˆ—ã€‚è¿™ä¸ªåºåˆ—è¢«åˆ†ç»„ä¸º(partition 2 message-validator-pairs)'çš„å¯¹ã€‚å¯¹ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ åº”è¯¥æ˜¯ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œå¯¹ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå°±åƒåœ¨order-details-validationsä¸­å®‰æ’çš„å¯¹ï¼‰ã€‚error-messages-forå‡½æ•°çš„å·¥ä½œåŸç†æ˜¯è¿‡æ»¤å‡ºæ‰€æœ‰é”™è¯¯ä¿¡æ¯å’ŒéªŒè¯å¯¹ï¼Œå…¶ä¸­éªŒè¯å‡½æ•°åœ¨åº”ç”¨äºto-validateæ—¶è¿”å›trueã€‚ç„¶åï¼Œå®ƒä½¿ç”¨map first`æ¥è·å–æ¯å¯¹å…ƒç´ çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå³é”™è¯¯ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯å®ƒçš„æ“ä½œã€‚\n(error-messages-for \u0026#34;\u0026#34; [\u0026#34;Please enter a name\u0026#34; not-empty]) ; =\u0026gt; (\u0026#34;Please enter a name\u0026#34;) ç°åœ¨æˆ‘ä»¬éœ€è¦å°†è¿™äº›é”™è¯¯ä¿¡æ¯ç§¯ç´¯åˆ°ä¸€ä¸ª Map ä¸­ã€‚\nä¸‹é¢æ˜¯å®Œæ•´çš„validateå‡½æ•°ï¼Œä»¥åŠæˆ‘ä»¬å°†å…¶åº”ç”¨äºorder-detailså’Œorder-details-validationsæ—¶çš„è¾“å‡ºã€‚\n(defn validate \u0026#34;Returns a map with a vector of errors for each key\u0026#34; [to-validate validations] (reduce (fn [errors validation] (let [[fieldname validation-check-groups] validation value (get to-validate fieldname) error-messages (error-messages-for value validation-check-groups)] (if (empty? error-messages) errors (assoc errors fieldname error-messages)))) {} validations)) (validate order-details order-details-validations) ; =\u0026gt; {:email (\u0026#34;Your email address doesn\u0026#39;t look like an email address\u0026#34;)} æˆåŠŸäº†! è¿™ä¸ªå‡½æ•°æ˜¯é€šè¿‡å‡å°‘order-details-validations'å¹¶å°†order-details\u0026rsquo;çš„æ¯ä¸ªé”®çš„é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å…³è”åˆ°ä¸€ä¸ªæœ€ç»ˆçš„é”™è¯¯ä¿¡æ¯ Mapã€‚\nif-valid æœ‰äº†æˆ‘ä»¬çš„éªŒè¯ä»£ç ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°éªŒè¯è®°å½•äº†ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒéªŒè¯ä¼šåƒè¿™æ ·ã€‚\n(let [errors (validate order-details order-details-validations)] (if (empty? errors) (println :success) (println :failure errors))) è¯¥æ¨¡å¼æ˜¯åšä»¥ä¸‹å·¥ä½œã€‚\n éªŒè¯ä¸€æ¡è®°å½•å¹¶å°†ç»“æœç»‘å®šåˆ°errorsã€‚ æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•é”™è¯¯ 3.å¦‚æœæœ‰ï¼ŒåšæˆåŠŸçš„äº‹æƒ…ï¼Œè¿™é‡Œ(println :success)ã€‚ å¦åˆ™ï¼Œåšå¤±è´¥çš„äº‹æƒ…ï¼Œè¿™é‡Œ(println :failure errors)ã€‚  æˆ‘å·²ç»åœ¨å®é™…ç”Ÿäº§çš„ç½‘ç«™ä¸­ä½¿ç”¨äº†è¿™ä¸ªéªŒè¯ä»£ç ã€‚èµ·åˆï¼Œæˆ‘å‘ç°è‡ªå·±ä¸æ–­é‡å¤ä»£ç çš„å¾®å°å˜åŒ–ï¼Œè¿™æ— ç–‘è¡¨æ˜æˆ‘éœ€è¦å¼•å…¥ä¸€ä¸ªæŠ½è±¡ï¼Œä»¥éšè—é‡å¤çš„éƒ¨åˆ†ï¼šåº”ç”¨validateå‡½æ•°ï¼Œå°†ç»“æœç»‘å®šåˆ°ä¸€äº›ç¬¦å·ï¼Œå¹¶æ£€æŸ¥ç»“æœæ˜¯å¦ä¸ºç©ºã€‚ä¸ºäº†åˆ›å»ºè¿™ç§æŠ½è±¡ï¼Œä½ å¯èƒ½ä¼šæƒ³å†™ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ã€‚\n(defn if-valid [record validations success-code failure-code] (let [errors (validate record validations)] (if (empty? errors) success-code failure-code))) ç„¶è€Œï¼Œè¿™ä¸ä¼šèµ·ä½œç”¨ï¼Œå› ä¸ºsuccess-codeå’Œfailure-codeæ¯æ¬¡éƒ½ä¼šè¢«æ±‚å€¼ã€‚å®ä¼šèµ·ä½œç”¨ï¼Œå› ä¸ºå®å…è®¸ä½ æ§åˆ¶æ±‚å€¼ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨å®çš„æ–¹æ³•ã€‚\n(if-valid order-details order-details-validations errors (render :success) (render :failure errors)) è¿™ä¸ªå®éšè—äº†é‡å¤çš„ç»†èŠ‚ï¼Œå¸®åŠ©ä½ æ›´ç®€æ´åœ°è¡¨è¾¾ä½ çš„æ„å›¾ã€‚è¿™å°±åƒè¦æ±‚åˆ«äººç»™ä½ å¼€ç“¶å™¨ï¼Œè€Œä¸æ˜¯è¯´ï¼š\u0026ldquo;è¯·ç»™æˆ‘æ‰‹åŠ¨è£…ç½®ï¼Œç”¨äºå»é™¤ç»ç’ƒå®¹å™¨ä¸­æ¶²ä½“çš„ä¸´æ—¶å¯†å°å‰‚ã€‚\u0026rdquo; ä¸‹é¢æ˜¯å®æ–½æ–¹æ³•ã€‚\n(defmacro if-valid \u0026#34;Handle validation more concisely\u0026#34; [to-validate validations errors-name \u0026amp; then-else] `(let [~errors-name (validate ~to-validate ~validations)] (if (empty? ~errors-name) ~@then-else))) è¿™ä¸ªå®éœ€è¦å››ä¸ªå‚æ•°ã€‚Â to-validate, validations, errors-name, å’Œå…¶ä½™å‚æ•°then-else. åƒè¿™æ ·ä½¿ç”¨errors-nameæ˜¯ä¸€ä¸ªæ–°çš„ç­–ç•¥ã€‚æˆ‘ä»¬æƒ³åœ¨then-elseè¯­å¥ä¸­è®¿é—®validateå‡½æ•°è¿”å›çš„é”™è¯¯ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦å‘Šè¯‰å®å®ƒåº”è¯¥æŠŠç»“æœç»‘å®šåˆ°ä»€ä¹ˆç¬¦å·ä¸Šã€‚ä¸‹é¢çš„å®æ‰©å±•æ˜¾ç¤ºäº†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\n (macroexpand \u0026#39;(if-valid order-details order-details-validations my-error-name (println :success) (println :failure my-error-name))) (let* [my-error-name (user/validate order-details order-details-validations)] (if (clojure.core/empty? my-error-name) (println :success) (println :failure my-error-name))) è¯­æ³•å¼•å·æŠ½è±¡äº†ä½ ä¹‹å‰çœ‹åˆ°çš„let/validate/ifæ¨¡å¼çš„ä¸€èˆ¬å½¢å¼ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨ unquote æ‹¼æ¥æ¥è§£å‹ifåˆ†æ”¯ï¼Œè¿™äº›åˆ†æ”¯è¢«æ‰“åŒ…åˆ°then-elseå…¶ä½™å‚æ•°ä¸­ã€‚\nè¿™çœŸæ˜¯å¤ªç®€å•äº†! è¯´äº†è¿™ä¹ˆå¤šå…³äºå®çš„å†…å®¹ï¼Œå¹¶è¯¦ç»†ä»‹ç»äº†å®ƒä»¬çš„æœºåˆ¶ï¼Œæˆ‘æ‰“èµŒä½ ä¸€å®šä»¥ä¸ºä¼šæœ‰æ›´å¤æ‚çš„ä¸œè¥¿ã€‚å¯¹ä¸èµ·ï¼Œæœ‹å‹ã€‚å¦‚æœä½ å¯¹ä½ çš„å¤±æœ›æ„Ÿåˆ°éš¾ä»¥æ¥å—ï¼Œæˆ‘çŸ¥é“æœ‰ä¸€ç§é¥®æ–™å¯ä»¥å¸®åŠ©ä½ ã€‚\næ€»ç»“ åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•ç¼–å†™è‡ªå·±çš„å®ã€‚å®çš„å®šä¹‰ä¸å‡½æ•°éå¸¸ç›¸ä¼¼ï¼šå®ƒä»¬æœ‰å‚æ•°ã€æ–‡ä»¶ä¸²å’Œä¸»ä½“ã€‚å®ƒä»¬å¯ä»¥ä½¿ç”¨å‚æ•°é‡æ„å’Œä¼‘æ¯å‚æ•°ï¼Œè€Œä¸”å¯ä»¥æ˜¯é€’å½’çš„ã€‚ä½ çš„å®å‡ ä¹éƒ½ä¼šè¿”å›åˆ—è¡¨ã€‚ä½ æœ‰æ—¶ä¼šä½¿ç”¨listå’Œseqå‡½æ•°æ¥ç¼–å†™ç®€å•çš„å®ï¼Œä½†å¤§å¤šæ•°æ—¶å€™ä½ ä¼šä½¿ç”¨è¯­æ³•å¼•å·ï¼Œï¼Œå®ƒè®©ä½ ä½¿ç”¨å®‰å…¨æ¨¡æ¿æ¥ç¼–å†™å®ã€‚\nå½“ä½ ç¼–å†™å®æ—¶ï¼Œé‡è¦çš„æ˜¯è¦è®°ä½ç¬¦å·å’Œå€¼ä¹‹é—´çš„åŒºåˆ«ï¼šå®åœ¨ä»£ç è¢«æ±‚å€¼ä¹‹å‰è¢«å±•å¼€ï¼Œå› æ­¤ä¸èƒ½è®¿é—®æ±‚å€¼çš„ç»“æœã€‚åŒé‡æ±‚å€¼å’Œå˜é‡æ•è·æ˜¯å¦å¤–ä¸¤ä¸ªå¾®å¦™çš„é™·é˜±ï¼Œä½†ä½ å¯ä»¥é€šè¿‡æ˜æ™ºåœ°ä½¿ç”¨ \u0026ldquo;let \u0026ldquo;è¡¨è¾¾å¼å’Œä»£è¯æ¥é¿å…å®ƒä»¬ã€‚\nå®æ˜¯ä¸€ç§æœ‰è¶£çš„å·¥å…·ï¼Œå¯ä»¥è®©ä½ åœ¨ç¼–ç æ—¶å°‘ä¸€äº›æ‹˜æŸã€‚é€šè¿‡è®©ä½ æ§åˆ¶æ±‚å€¼ï¼Œå®ç»™ä½ ä¸€å®šç¨‹åº¦çš„è‡ªç”±å’Œè¡¨è¾¾ï¼Œè¿™æ˜¯å…¶ä»–è¯­è¨€æ‰€ä¸å…è®¸çš„ã€‚åœ¨ä½ çš„ Clojure æ—…ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šå¬åˆ°æœ‰äººå‘Šè¯«ä½ ä¸è¦ä½¿ç”¨å®ï¼Œè¯´ä»€ä¹ˆ \u0026ldquo;å®æ˜¯é‚ªæ¶çš„ \u0026ldquo;å’Œ \u0026ldquo;ä½ ä¸åº”è¯¥ä½¿ç”¨å®\u0026rdquo;ã€‚ä¸è¦å¬è¿™äº›å‡æ­£ç»çš„äººçš„è¯\u0026ndash;è‡³å°‘åœ¨å¼€å§‹çš„æ—¶å€™ä¸è¦å¬ä»–ä»¬çš„ã€‚èµ°å‡ºå»ï¼Œäº«å—ç¾å¥½çš„æ—¶å…‰ã€‚è¿™æ˜¯ä½ å­¦ä¹ åœ¨å“ªäº›æƒ…å†µä¸‹é€‚åˆä½¿ç”¨å®çš„å”¯ä¸€é€”å¾„ã€‚ä½ ä¼šä»å¦ä¸€ä¸ªè§’åº¦çŸ¥é“å¦‚ä½•æœ‰æŠ€å·§åœ°ã€æ½‡æ´’åœ°ä½¿ç”¨å®ã€‚\nç»ƒä¹    ç¼–å†™å®when-validï¼Œä½¿å®ƒçš„è¡Œä¸ºä¸whenç›¸ä¼¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè°ƒç”¨å®ƒçš„ä¾‹å­ã€‚\n(when-valid order-details order-details-validations (println \u0026#34;It\u0026#39;s a success!\u0026#34;) (render :success)) å½“æ•°æ®æœ‰æ•ˆæ—¶ï¼Œåº”è¯¥æ±‚å€¼printlnå’Œrenderå½¢å¼ï¼Œå¦‚æœæ•°æ®æ— æ•ˆï¼Œwhen-validåº”è¯¥è¿”å›nilã€‚\n  ä½ çœ‹åˆ°andæ˜¯ä½œä¸ºä¸€ä¸ªå®å®ç°çš„ã€‚æŠŠ`or\u0026rsquo;ä½œä¸ºä¸€ä¸ªå®æ¥å®ç°ã€‚\n  åœ¨ç¬¬ 5 ç« ä¸­ï¼Œä½ åˆ›å»ºäº†ä¸€ç³»åˆ—å‡½æ•°ï¼ˆc-int, c-str, c-dexï¼‰æ¥è¯»å–ä¸€ä¸ª RPG å­—ç¬¦çš„å±æ€§ã€‚å†™ä¸€ä¸ªå®ï¼Œç”¨ä¸€ä¸ªå®è°ƒç”¨æ¥å®šä¹‰ä»»æ„æ•°é‡çš„å±æ€§æ£€ç´¢å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•è°ƒç”¨å®ƒã€‚\n  (defattrs c-int :intelligence c-str :strength c-dex :dexterity)\n","permalink":"https://zhenfeng-zhu.github.io/post/chapter8/","summary":"ç¼–å†™å® å½“æˆ‘ 18 å²æ—¶ï¼Œæˆ‘åœ¨æ–°å¢¨è¥¿å“¥å·åœ£è²çš„ä¸€å®¶é…’åº—æ‰¾åˆ°äº†ä¸€ä»½å¤œç­å®¡è®¡å¸ˆçš„å·¥ä½œï¼Œæ¯å‘¨å·¥ä½œå››ä¸ªæ™šä¸Šï¼Œä»æ™šä¸Š 11 ç‚¹åˆ°æ—©ä¸Š 7 ç‚¹ã€‚ç»è¿‡å‡ ä¸ªæœˆçš„è¿™ç§ä¸çœ ä¸ä¼‘çš„å·¥ä½œï¼Œæˆ‘çš„æƒ…ç»ªæœ‰äº†è‡ªå·±çš„å˜åŒ–ã€‚ä¸€å¤©æ™šä¸Šï¼Œå¤§çº¦åœ¨\nå‡Œæ™¨ 3 ç‚¹ï¼Œæˆ‘æ­£åœ¨çœ‹ä¸€ä¸ªä¿¡æ¯å¹¿å‘Šï¼Œè¯¥äº§å“å£°ç§°å¯ä»¥æ¢å¤ç”·äººçš„å¤´å‘ã€‚å½“æˆ‘çœ‹åˆ°ä¸€ä¸ªæ›¾ç»ç§ƒå¤´çš„äººçš„æ•…äº‹æ—¶ï¼Œæˆ‘è¢«çœŸè¯šçš„å–œæ‚¦æ‰€æ·¹æ²¡ã€‚\u0026ldquo;ç»ˆäºæ¥äº†ï¼\u0026ldquo;æˆ‘çš„å¤§è„‘æ¶ŒåŠ¨ç€ã€‚\u0026ldquo;è¿™ä¸ªäººå¾—åˆ°äº†ä»–åº”å¾—çš„çˆ±å’ŒæˆåŠŸ! å¤šä¹ˆä¸å¯æ€è®®çš„äº§å“ï¼Œç»™æ— æœ›çš„äººä»¥å¸Œæœ›ï¼\u0026rdquo;\nä»é‚£æ—¶èµ·ï¼Œæˆ‘å‘ç°è‡ªå·±ä¸€ç›´åœ¨æƒ³ï¼Œæˆ‘æ˜¯å¦èƒ½ä»¥æŸç§æ–¹å¼é‡æ–°åˆ›é€ å› é•¿æœŸç¡çœ ä¸è¶³è€Œå¼•èµ·çš„æƒ…æ„Ÿæ”¾å¼ƒå’Œå¯¹ç”Ÿå‘½çš„æ¬£èµã€‚ä¹Ÿè®¸æ˜¯æŸç§è¯æ°´\u0026ndash;å–ä¸Šå‡ å£ï¼Œé‡Šæ”¾æˆ‘å†…å¿ƒçš„ç†æŸ¥å¾·-è¥¿è’™æ–¯ï¼Œä½†æ—¶é—´ä¸ä¼šå¤ªé•¿ã€‚\nå°±åƒè¯æ°´å¯ä»¥è®©æˆ‘æš‚æ—¶æ”¹å˜æˆ‘çš„åŸºæœ¬æ€§è´¨ä¸€æ ·ï¼Œå®å…è®¸ä½ ä»¥å…¶ä»–è¯­è¨€æ— æ³•å®ç°çš„æ–¹å¼ä¿®æ”¹ Clojureã€‚æœ‰äº†å®ï¼Œä½ å¯ä»¥æ‰©å±• Clojure ä»¥é€‚åº”ä½ çš„é—®é¢˜ç©ºé—´ï¼Œå»ºç«‹èµ·è¯­è¨€ã€‚\nåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†å½»åº•ç ”ç©¶å¦‚ä½•ç¼–å†™å®ï¼Œä»åŸºæœ¬çš„ä¾‹å­å¼€å§‹ï¼Œé€æ­¥æé«˜å¤æ‚æ€§ã€‚æœ€åï¼Œä½ å°†æˆ´ä¸Šä½ çš„å‡æƒ³å¸½ï¼Œç”¨å®æ¥éªŒè¯ä½ æƒ³è±¡ä¸­çš„åœ¨çº¿è¯æ°´åº—çš„å®¢æˆ·è®¢å•ã€‚\nåœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ å°†äº†è§£ä½ ç”¨æ¥ç¼–å†™å®çš„æ‰€æœ‰å·¥å…·ï¼šå¼•å·ã€è¯­æ³•å¼•å·ã€è§£å¼•å·ã€è§£å¼•å·æ‹¼æ¥ï¼ˆåˆç§°çš®çº³å¡”å·¥å…·ï¼‰å’Œ gensymã€‚ä½ è¿˜ä¼šäº†è§£åˆ°å¯¹æ¯«æ— æˆ’å¿ƒçš„å®ä½œè€…æ¥è¯´éšè—ç€çš„å±é™©ï¼šåŒé‡æ±‚å€¼ã€å˜é‡æ•è·å’Œå®æ„ŸæŸ“ã€‚\nå®æ˜¯å¿…ä¸å¯å°‘çš„ åœ¨ä½ å¼€å§‹ç¼–å†™å®ä¹‹å‰ï¼Œæˆ‘æƒ³å¸®åŠ©ä½ æŠŠå®ƒä»¬æ”¾åœ¨é€‚å½“çš„ç¯å¢ƒä¸­ã€‚æ˜¯çš„ï¼Œå®æ¯”åŒ—æç†Šçš„è„šè¶¾ç”²è¿˜è¦é…·ï¼Œä½†ä½ ä¸åº”è¯¥æŠŠå®çœ‹æˆæ˜¯ä¸€äº›æ·±å¥¥çš„å·¥å…·ï¼Œå½“ä½ æƒ³å¯¹ä½ çš„ä»£ç è¿›è¡Œé¢å¤–çš„èŠ±å“¨å¤„ç†æ—¶ï¼Œå°±æŠŠå®ƒæ‹¿å‡ºæ¥ã€‚äº‹å®ä¸Šï¼Œå®å…è®¸ Clojure ä»ä¸€ä¸ªå¾ˆå°çš„å‡½æ•°å’Œç‰¹æ®Šå½¢å¼çš„æ ¸å¿ƒä¸­è·å¾—å¤§é‡çš„å†…ç½®åŠŸèƒ½ã€‚ä»¥whenä¸ºä¾‹ã€‚Â whenæœ‰è¿™æ ·çš„ä¸€èˆ¬å½¢å¼ã€‚\n(when boolean-expression expression-1 expression-2 expression-3 ... expression-x) ä½ å¯èƒ½è®¤ä¸ºwhenæ˜¯ä¸€ä¸ªåƒifä¸€æ ·çš„ç‰¹æ®Šå½¢å¼ã€‚é‚£ä¹ˆä½ çŒœæ€ä¹ˆç€ï¼Ÿå®ƒä¸æ˜¯! åœ¨å¤§å¤šæ•°å…¶ä»–è¯­è¨€ä¸­ï¼Œä½ åªèƒ½ä½¿ç”¨ç‰¹æ®Šçš„å…³é”®å­—æ¥åˆ›å»ºæ¡ä»¶è¡¨è¾¾å¼ï¼Œè€Œæ²¡æœ‰åŠæ³•åˆ›å»ºä½ è‡ªå·±çš„æ¡ä»¶è¿ç®—ç¬¦ã€‚ç„¶è€Œï¼Œwhenå®é™…ä¸Šæ˜¯ä¸€ä¸ªå®ã€‚\nåœ¨è¿™ä¸ªå®æ‰©å±•ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°whenæ˜¯ç”¨ifå’Œdoæ¥å®ç°çš„ã€‚\n(macroexpand \u0026#39;(when boolean-expression expression-1 expression-2 expression-3)) ; =\u0026gt; (if boolean-expression (do expression-1 expression-2 expression-3)) è¿™è¡¨æ˜å®æ˜¯ Clojure å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†\u0026ndash;å®ƒä»¬ç”šè‡³è¢«ç”¨æ¥æä¾›åŸºæœ¬æ“ä½œã€‚å®å¹¶ä¸æ˜¯ä¸ºå¥‡ç‰¹çš„ç‰¹æ®Šæƒ…å†µè€Œä¿ç•™çš„ï¼›ä½ åº”è¯¥æŠŠå†™å®çœ‹ä½œæ˜¯ä½ å·¥å…·åŒ…ä¸­çš„å¦ä¸€ä¸ªå·¥å…·ã€‚å½“ä½ å­¦ä¼šç¼–å†™è‡ªå·±çš„å®æ—¶ï¼Œä½ ä¼šå‘ç°å®ƒä»¬æ˜¯å¦‚ä½•è®©ä½ è¿›ä¸€æ­¥æ‰©å±•è¯­è¨€ï¼Œä½¿å…¶é€‚åˆä½ çš„ç‰¹å®šé—®é¢˜é¢†åŸŸçš„å½¢çŠ¶ã€‚\nè§£å‰–å·¨é›† å·¨é›†å®šä¹‰çœ‹èµ·æ¥å¾ˆåƒå‡½æ•°å®šä¹‰ã€‚å®ƒä»¬æœ‰ä¸€ä¸ªåç§°ï¼Œä¸€ä¸ªå¯é€‰çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œä»¥åŠä¸€ä¸ªä¸»ä½“ã€‚ä¸»ä½“å‡ ä¹æ€»æ˜¯è¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚è¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºå®æ˜¯å°†æ•°æ®ç»“æ„è½¬åŒ–ä¸º Clojure å¯ä»¥æ±‚å€¼çš„å½¢å¼çš„ä¸€ç§æ–¹å¼ï¼Œè€Œ Clojure ä½¿ç”¨åˆ—è¡¨æ¥è¡¨ç¤ºå‡½æ•°è°ƒç”¨ã€ç‰¹æ®Šå½¢å¼è°ƒç”¨å’Œå®è°ƒç”¨ã€‚ä½ å¯ä»¥åœ¨å®ä¸»ä½“ä¸­ä½¿ç”¨ä»»ä½•å‡½æ•°ã€å®æˆ–ç‰¹æ®Šå½¢å¼ï¼Œä½ è°ƒç”¨å®å°±åƒè°ƒç”¨å‡½æ•°æˆ–ç‰¹æ®Šå½¢å¼ä¸€æ ·ã€‚\nä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè¿™é‡Œæœ‰æˆ‘ä»¬çš„è€æœ‹å‹infixå®ã€‚\n(defmacro infix \u0026#34;Use this macro when you pine for the notation of your childhood\u0026#34; [infixed] (list (second infixed) (first infixed) (last infixed))) è¿™ä¸ªå®å°†ä¸€ä¸ªåˆ—è¡¨é‡æ–°æ’åˆ—æˆæ­£ç¡®çš„ infix è®°å·é¡ºåºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚","title":"Chapter8 å®"},{"content":"Clojure ç‚¼é‡‘æœ¯ï¼šè¯»å–å™¨ã€æ±‚å€¼å™¨å’Œå® å“²å­¦å®¶ä¹‹çŸ³ï¼Œä¸ç”Ÿå‘½ä¹‹è¯å’Œä¼Ÿå“¥ä¸€æ ·ï¼Œæ˜¯ç‚¼é‡‘æœ¯ä¼ è¯´ä¸­æœ€è‘—åçš„æ ‡æœ¬ä¹‹ä¸€ï¼Œå› å…¶èƒ½å°†é“…è½¬åŒ–ä¸ºé‡‘è€Œå—åˆ°è¿½æ§ã€‚ç„¶è€Œï¼ŒClojure æä¾›äº†ä¸€ç§å·¥å…·ï¼Œä½¿å“²å­¦å®¶çš„çŸ³å¤´çœ‹èµ·æ¥åªæ˜¯ä¸€ä¸ªå°é¥°å“ï¼š*å®ã€‚\nå®å…è®¸ä½ å°†ä»»æ„çš„è¡¨è¾¾å¼è½¬åŒ–ä¸ºæœ‰æ•ˆçš„ Clojureï¼Œå› æ­¤ä½ å¯ä»¥æ‰©å±•è¯­è¨€æœ¬èº«ä»¥æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚è€Œä¸”ï¼Œä½ ç”šè‡³ä¸éœ€è¦æ˜¯ä¸€ä¸ªç©¿é•¿è¢çš„è€å®¶ä¼™æˆ–è€å¤ªå¤ªæ¥ä½¿ç”¨å®ƒä»¬\nä¸ºäº†è·å¾—è¿™ç§èƒ½åŠ›ï¼Œè¯·è€ƒè™‘è¿™ä¸ªå¾®ä¸è¶³é“çš„å®ã€‚\n(defmacro backwards [form] (reverse form)) (backwards (\u0026#34; backwards\u0026#34; \u0026#34; am\u0026#34; \u0026#34;I\u0026#34; str)) ; =\u0026gt; \u0026#34;I am backwards\u0026#34; backwardså®å…è®¸ Clojure æˆåŠŸåœ° Eval è¡¨è¾¾å¼(\u0026quot; backwards\u0026quot; \u0026quot; am\u0026quot; \u0026quot;I\u0026quot; str)ï¼Œå°½ç®¡å®ƒæ²¡æœ‰éµå¾ª Clojure çš„å†…ç½®è¯­æ³•è§„åˆ™ï¼Œè¿™äº›è§„åˆ™è¦æ±‚è¡¨è¾¾å¼çš„æ“ä½œæ•°é¦–å…ˆå‡ºç°ï¼ˆæ›´ä¸ç”¨è¯´è¡¨è¾¾å¼ä¸èƒ½æŒ‰ç›¸åé¡ºåºä¹¦å†™çš„è§„åˆ™ï¼‰ã€‚å¦‚æœæ²¡æœ‰ \u0026ldquo;å‘å\u0026rdquo;ï¼Œè¿™ä¸ªè¡¨è¾¾å¼ä¼šæ¯”å‡ åƒå¹´æ¥çš„ç‚¼é‡‘æœ¯å£«ç”¨ä»–ä»¬çš„ä¸€ç”Ÿæ¥è¿½æ±‚ä¸å¯èƒ½å®ç°çš„é•¿ç”Ÿä¸è€çš„æ–¹æ³•æ›´éš¾å¤±è´¥ã€‚æœ‰äº†`å‘å\u0026rsquo;ï¼Œ*ä½ å°±åˆ›é€ äº†ä½ è‡ªå·±çš„è¯­æ³•ï¼*ä½ æ‰©å±•äº† Clojureï¼Œè¿™æ ·ä½ å°±å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°å†™ä»£ç äº† æˆ‘å‘Šè¯‰ä½ ï¼Œè¿™æ¯”æŠŠé“…å˜æˆé‡‘å­è¦å¥½å¾—å¤š!\næœ¬ç« ä¸ºä½ æä¾›äº†ç¼–å†™è‡ªå·±çš„å®æ‰€éœ€çš„æ¦‚å¿µåŸºç¡€ï¼Œä½¿ä½ èƒ½å¤Ÿç–¯ç‹‚åœ°ç¼–å†™è‡ªå·±çš„å®ã€‚å®ƒè§£é‡Šäº† Clojure æ±‚å€¼æ¨¡å‹çš„å…ƒç´ ï¼šè¯»å–å™¨ï¼Œæ±‚å€¼å™¨ï¼Œå’Œå®æ‰©å±•å™¨ã€‚è¿™å°±åƒ Clojure å…ƒç´ çš„å‘¨æœŸè¡¨ã€‚æƒ³æƒ³å‘¨æœŸè¡¨æ˜¯å¦‚ä½•æ­ç¤ºåŸå­çš„ç‰¹æ€§çš„ï¼šåŒä¸€åˆ—çš„å…ƒç´ è¡Œä¸ºç›¸ä¼¼ï¼Œå› ä¸ºå®ƒä»¬æœ‰ç›¸åŒçš„æ ¸ç”µè·ã€‚å¦‚æœæ²¡æœ‰å…ƒç´ å‘¨æœŸè¡¨åŠå…¶åŸºç¡€ç†è®ºï¼Œæˆ‘ä»¬å°±ä¼šåƒè¿‡å»çš„ç‚¼é‡‘æœ¯å£«ä¸€æ ·ï¼Œéšæ„åœ°æŠŠä¸œè¥¿æ··åœ¨ä¸€èµ·ï¼Œçœ‹çœ‹ä»€ä¹ˆä¸œè¥¿ä¼šçˆ†ç‚¸ã€‚ä½†æ˜¯ï¼Œéšç€å¯¹å…ƒç´ çš„æ·±å…¥äº†è§£ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸ºä»€ä¹ˆä¸œè¥¿ä¼šçˆ†ç‚¸ï¼Œå¹¶å­¦ä¼šå¦‚ä½•æœ‰ç›®çš„åœ°ç‚¸æ¯ä¸œè¥¿ã€‚\nA Overview of Clojure\u0026rsquo;s Evaluation Model Clojureï¼ˆåƒæ‰€æœ‰çš„ Lispsï¼‰æœ‰ä¸€ä¸ªä¸åŒäºå¤§å¤šæ•°å…¶ä»–è¯­è¨€çš„æ±‚å€¼æ¨¡å‹ï¼šå®ƒæœ‰ä¸€ä¸ªä¸¤é˜¶æ®µçš„ç³»ç»Ÿï¼Œå®ƒè¯»æ–‡æœ¬æºä»£ç ï¼Œäº§ç”Ÿ Clojure æ•°æ®ç»“æ„ã€‚ç„¶åå¯¹è¿™äº›æ•°æ®ç»“æ„è¿›è¡Œ*æ±‚å€¼ã€‚Clojure éå†æ•°æ®ç»“æ„ï¼Œå¹¶æ ¹æ®æ•°æ®ç»“æ„çš„ç±»å‹æ‰§è¡Œå‡½æ•°åº”ç”¨æˆ– var æŸ¥æ‰¾ç­‰æ“ä½œã€‚ä¾‹å¦‚ï¼Œå½“ Clojure è¯»å–æ–‡æœ¬(+ 1 2)æ—¶ï¼Œç»“æœæ˜¯ä¸€ä¸ªåˆ—è¡¨æ•°æ®ç»“æ„ï¼Œå…¶ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ª+ç¬¦å·ï¼Œåé¢æ˜¯æ•°å­— 1 å’Œ 2ã€‚è¿™ä¸ªæ•°æ®ç»“æ„è¢«ä¼ é€’ç»™ Clojure çš„æ±‚å€¼å™¨ï¼Œæ±‚å€¼å™¨æŸ¥æ‰¾+å¯¹åº”çš„å‡½æ•°ï¼Œå¹¶å°†è¯¥å‡½æ•°åº”ç”¨äº 1 å’Œ 2ã€‚\nåœ¨æºä»£ç ã€æ•°æ®å’Œæ±‚å€¼ä¹‹é—´æœ‰è¿™ç§å…³ç³»çš„è¯­è¨€è¢«ç§°ä¸ºhomoiconicï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœä½ åœ¨æµ´å®¤çš„é•œå­å‰ç†„ç¯è¯´ä¸‰æ¬¡homoiconicï¼Œçº¦ç¿°-éº¦å¡é”¡çš„å¹½çµå°±ä¼šå‡ºç°å¹¶ç»™ä½ ä¸€ä¸ªå°æ‹¬å·ï¼‰ã€‚åŒæºè¯­è¨€ä½¿ä½ èƒ½å¤Ÿå°†ä½ çš„ä»£ç ä½œä¸ºä¸€ç»„æ•°æ®ç»“æ„è¿›è¡Œæ¨ç†ï¼Œä½ å¯ä»¥é€šè¿‡ç¨‹åºè¿›è¡Œæ“ä½œã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬åœ¨ç¼–è¯‘çš„åœŸåœ°ä¸Šèµ°ä¸€åœˆã€‚\nç¼–ç¨‹è¯­è¨€éœ€è¦ä¸€ä¸ªç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨æ¥å°†ä½ å†™çš„ä»£ç ï¼ˆç”± Unicode å­—ç¬¦ç»„æˆï¼‰ç¿»è¯‘æˆå…¶ä»–ä¸œè¥¿ï¼šæœºå™¨æŒ‡ä»¤ã€å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ä»£ç ï¼Œç­‰ç­‰ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæ„å»ºä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªä»£è¡¨ä½ çš„ç¨‹åºçš„æ•°æ®ç»“æ„ã€‚ä½ å¯ä»¥æŠŠ AST çœ‹ä½œæ˜¯æ±‚å€¼å™¨çš„è¾“å…¥ï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªéå†è¯¥æ ‘çš„å‡½æ•°ï¼Œä»¥äº§ç”Ÿæœºå™¨ä»£ç æˆ–å…¶ä»–ä»€ä¹ˆä½œä¸ºå…¶è¾“å‡ºã€‚\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™å¬èµ·æ¥å¾ˆåƒæˆ‘ä¸º Clojure æè¿°çš„é‚£æ ·ã€‚ç„¶è€Œï¼Œåœ¨å¤§å¤šæ•°è¯­è¨€ä¸­ï¼ŒAST çš„æ•°æ®ç»“æ„åœ¨ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯æ— æ³•è®¿é—®çš„ï¼›ç¼–ç¨‹è¯­è¨€ç©ºé—´å’Œç¼–è¯‘å™¨ç©ºé—´æ˜¯æ°¸è¿œåˆ†ç¦»çš„ï¼Œä¸¤è€…æ°¸è¿œä¸ä¼šç›¸é‡ã€‚å›¾ 7-1 æ˜¾ç¤ºäº†åœ¨é Lisp ç¼–ç¨‹è¯­è¨€ä¸­è¡¨è¾¾å¼çš„ç¼–è¯‘è¿‡ç¨‹çš„å¯è§†åŒ–æƒ…å†µã€‚\nå›¾ 7-1ï¼šé Lisp ç¼–ç¨‹è¯­è¨€çš„æ±‚å€¼\nä½† Clojure æ˜¯ä¸åŒçš„ï¼Œå› ä¸º Clojure æ˜¯ Lispï¼Œè€Œ Lisps æ¯”å·æ¥çš„ tamale æ›´çƒ­ã€‚Lisps æ±‚å€¼çš„æ˜¯æœ¬åœ°æ•°æ®ç»“æ„ï¼Œè€Œä¸æ˜¯æ±‚å€¼è¡¨ç¤ºä¸ºæŸç§æ— æ³•è®¿é—®çš„å†…éƒ¨æ•°æ®ç»“æ„çš„ ASTã€‚Clojure ä»ç„¶æ±‚å€¼æ ‘å½¢ç»“æ„ï¼Œä½†æ ‘æ˜¯ç”¨ Clojure åˆ—è¡¨ç»“æ„çš„ï¼ŒèŠ‚ç‚¹æ˜¯ Clojure å€¼ã€‚\nåˆ—è¡¨æ˜¯æ„å»ºæ ‘å½¢ç»“æ„çš„ç†æƒ³é€‰æ‹©ã€‚åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¢«è§†ä¸ºæ ¹ï¼Œæ¯ä¸ªåç»­å…ƒç´ è¢«è§†ä¸ºä¸€ä¸ªåˆ†æ”¯ã€‚è¦åˆ›å»ºä¸€ä¸ªåµŒå¥—æ ‘ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨åµŒå¥—åˆ—è¡¨ï¼Œå¦‚å›¾ 7-2 æ‰€ç¤ºã€‚\nå›¾ 7-2ï¼šåˆ—è¡¨å¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«å½“ä½œæ ‘æ¥å¤„ç†ã€‚\né¦–å…ˆï¼ŒClojure çš„è¯»å–å™¨å°†æ–‡æœ¬(+ 1 (* 6 7))è½¬æ¢ä¸ºä¸€ä¸ªåµŒå¥—åˆ—è¡¨ã€‚(ä½ å°†åœ¨ä¸‹ä¸€èŠ‚äº†è§£æ›´å¤šå…³äºè¯»å–å™¨çš„ä¿¡æ¯ã€‚)ç„¶åï¼ŒClojure çš„æ±‚å€¼å™¨å°†è¯¥æ•°æ®ä½œä¸ºè¾“å…¥å¹¶äº§ç”Ÿä¸€ä¸ªç»“æœã€‚(å®ƒè¿˜å¯ä»¥ç¼–è¯‘ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰å­—èŠ‚ç ï¼Œä½ ä¼šåœ¨ç¬¬ 12 ç« ä¸­äº†è§£åˆ°ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªå…³æ³¨æ¦‚å¿µå±‚é¢ä¸Šçš„æ±‚å€¼æ¨¡å‹ï¼‰ã€‚\nè€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œå›¾ 7-3 æ˜¾ç¤ºäº† Clojure çš„æ±‚å€¼è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ã€‚\nS-è¡¨è¾¾å¼\nåœ¨ä½ çš„ Lisp å†’é™©ä¸­ï¼Œä½ ä¼šé‡åˆ°ä¸€äº›èµ„æºï¼Œå®ƒä»¬è§£é‡Šè¯´ Lisp æ±‚å€¼ S-è¡¨è¾¾å¼ã€‚æˆ‘åœ¨è¿™é‡Œé¿å…ä½¿ç”¨è¿™ä¸ªæœ¯è¯­ï¼Œå› ä¸ºå®ƒæœ‰æ­§ä¹‰ï¼šä½ ä¼šçœ‹åˆ°å®ƒæ—¢æŒ‡è¢«æ±‚å€¼çš„å®é™…æ•°æ®å¯¹è±¡ï¼Œä¹ŸæŒ‡è¡¨ç¤ºè¯¥æ•°æ®çš„æºä»£ç ã€‚å¯¹ Lisp æ±‚å€¼çš„ä¸¤ä¸ªä¸åŒç»„æˆéƒ¨åˆ†ï¼ˆä»£ç å’Œæ•°æ®ï¼‰ä½¿ç”¨åŒä¸€ä¸ªæœ¯è¯­ï¼Œä¼šæ©ç›–é‡è¦çš„ä¸œè¥¿ï¼šä½ çš„æ–‡æœ¬ä»£è¡¨äº†æœ¬åœ°æ•°æ®ç»“æ„ï¼Œè€Œ Lisp æ±‚å€¼æœ¬åœ°æ•°æ®ç»“æ„ï¼Œè¿™æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä»¤äººæ•¬ç•çš„ã€‚å…³äº s-è¡¨è¾¾å¼çš„ç²¾å½©å¤„ç†ï¼Œè¯·æŸ¥çœ‹http://www.gigamonkeys.com/book/syntax-and-semantics.htmlã€‚\nå›¾ 7-3ï¼šClojure ä¸­çš„æ±‚å€¼\nç„¶è€Œï¼Œæ±‚å€¼å™¨å®é™…ä¸Šå¹¶ä¸å…³å¿ƒå®ƒçš„è¾“å…¥æ¥è‡ªå“ªé‡Œï¼›å®ƒä¸ä¸€å®šè¦æ¥è‡ªè¯»è€…ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ç”¨evalå°†ä½ çš„ç¨‹åºçš„æ•°æ®ç»“æ„ç›´æ¥å‘é€ç»™ Clojure æ±‚å€¼å™¨ã€‚çœ‹å“ª!\n(def addition-list (list + 1 2)) (eval addition-list) ; =\u0026gt; 3 è¿™å°±å¯¹äº†ï¼Œå®è´! ä½ çš„ç¨‹åºåˆšåˆšæ±‚å€¼äº†ä¸€ä¸ª Clojure åˆ—è¡¨ã€‚ä½ å¾ˆå¿«å°±ä¼šè¯»åˆ°å…³äº Clojure æ±‚å€¼è§„åˆ™çš„æ‰€æœ‰å†…å®¹ï¼Œä½†ç®€å•åœ°è¯´ï¼Œè¿™æ˜¯å‘ç”Ÿäº†ä»€ä¹ˆï¼šå½“ Clojure æ±‚å€¼åˆ—è¡¨æ—¶ï¼Œå®ƒæŸ¥æ‰¾äº†addition-listæ‰€æŒ‡çš„åˆ—è¡¨ï¼›ç„¶åå®ƒæŸ¥æ‰¾äº†ä¸+ç¬¦å·å¯¹åº”çš„å‡½æ•°ï¼›ç„¶åå®ƒç”¨1å’Œ2ä½œä¸ºå‚æ•°è°ƒç”¨äº†è¯¥å‡½æ•°ï¼Œè¿”å›3ã€‚ä½ çš„è¿è¡Œç¨‹åºçš„æ•°æ®ç»“æ„å’Œæ±‚å€¼å™¨çš„æ•°æ®ç»“æ„ç”Ÿæ´»åœ¨åŒä¸€ä¸ªç©ºé—´ï¼Œç»“æœæ˜¯ä½ å¯ä»¥ä½¿ç”¨ Clojure çš„å…¨éƒ¨åŠ›é‡å’Œä½ å†™çš„æ‰€æœ‰ä»£ç æ¥æ„å»ºæ•°æ®ç»“æ„è¿›è¡Œæ±‚å€¼ã€‚\n(eval (concat addition-list [10])) ; =\u0026gt; 13 (eval (list \u0026#39;def \u0026#39;lucky-number (concat addition-list [10]))) ; =\u0026gt; #\u0026#39;user/lucky-number lucky-number ; =\u0026gt; 13 å›¾ 7-4 æ˜¾ç¤ºäº†ä½ åœ¨è¿™ä¸¤ä¸ªä¾‹å­ä¸­å‘é€ç»™æ±‚å€¼å™¨çš„åˆ—è¡¨ã€‚\nå›¾ 7-4ï¼šä½ æ±‚å€¼çš„åˆ—è¡¨\nä½ çš„ç¨‹åºå¯ä»¥ç›´æ¥ä¸è‡ªå·±çš„æ±‚å€¼å™¨å¯¹è¯ï¼Œä½¿ç”¨è‡ªå·±çš„å‡½æ•°å’Œæ•°æ®åœ¨è¿è¡Œä¸­ä¿®æ”¹è‡ªå·± ä½ æ˜¯ä¸æ˜¯å·²ç»è¢«æƒåŠ›å†²æ˜äº†å¤´è„‘ï¼Ÿæˆ‘å¸Œæœ›æ˜¯è¿™æ ·ï¼æˆ‘å¸Œæœ›ä½ èƒ½åšæŒä½ çš„ç†æ™ºã€‚ä¸è¿‡ï¼Œè¯·ä¿æŒä½ çš„ç†æ™ºï¼Œå› ä¸ºè¿˜æœ‰æ›´å¤šçš„ä¸œè¥¿è¦å­¦ã€‚\næ‰€ä»¥ï¼ŒClojure æ˜¯åŒæºçš„ï¼šå®ƒç”¨åˆ—è¡¨è¡¨ç¤ºæŠ½è±¡çš„è¯­æ³•æ ‘ï¼Œå½“ä½ å†™ Clojure ä»£ç æ—¶ï¼Œä½ å†™çš„æ˜¯åˆ—è¡¨çš„æ–‡æœ¬è¡¨ç¤ºã€‚å› ä¸ºä½ å†™çš„ä»£ç ä»£è¡¨äº†ä½ ä¹ æƒ¯äºæ“ä½œçš„æ•°æ®ç»“æ„ï¼Œè€Œæ±‚å€¼å™¨åˆ™æ¶ˆè€—è¿™äº›æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“æ¨ç†å‡ºå¦‚ä½•ä»¥ç¼–ç¨‹æ–¹å¼ä¿®æ”¹ä½ çš„ç¨‹åºã€‚\nå®å°±æ˜¯è®©ä½ è½»æ¾è¿›è¡Œè¿™äº›æ“ä½œçš„ä¸œè¥¿ã€‚æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†è¯¦ç»†ä»‹ç»äº† Clojure çš„è¯»å–å™¨å’Œæ±‚å€¼è§„åˆ™ï¼Œè®©ä½ å¯¹å®çš„å·¥ä½œåŸç†æœ‰ä¸€ä¸ªå‡†ç¡®çš„ç†è§£ã€‚\nè¯»å–å™¨ è¯»å–å™¨å°†ä½ ä¿å­˜åœ¨æ–‡ä»¶ä¸­æˆ–åœ¨ REPL ä¸­è¾“å…¥çš„æ–‡æœ¬æºä»£ç è½¬æ¢ä¸º Clojure æ•°æ®ç»“æ„ã€‚å®ƒå°±åƒäººç±»çš„ Unicode å­—ç¬¦ä¸–ç•Œå’Œ Clojure çš„åˆ—è¡¨ã€Vectorã€Mapã€ç¬¦å·å’Œå…¶ä»–æ•°æ®ç»“æ„ä¸–ç•Œä¹‹é—´çš„ç¿»è¯‘ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†ç›´æ¥ä¸è¯»å–å™¨å™¨äº’åŠ¨ï¼Œå¹¶å­¦ä¹ ä¸€ä¸ªæ–¹ä¾¿çš„åŠŸèƒ½ï¼Œå³è¯»å–å™¨å®ï¼Œå¦‚ä½•è®©ä½ æ›´ç®€æ´åœ°ç¼–å†™ä»£ç ã€‚\nè¯»å–å™¨ ä¸ºäº†ç†è§£è¯»å–å™¨ï¼Œè®©æˆ‘ä»¬é¦–å…ˆä»”ç»†çœ‹çœ‹ Clojure æ˜¯å¦‚ä½•å¤„ç†ä½ åœ¨ REPL ä¸­è¾“å…¥çš„æ–‡æœ¬çš„ã€‚é¦–å…ˆï¼ŒREPL ä¼šæç¤ºä½ è¾“å…¥æ–‡æœ¬ã€‚\nuser=\u0026gt; ç„¶åä½ è¾“å…¥ä¸€ç‚¹æ–‡æœ¬ã€‚ä¹Ÿè®¸åƒè¿™æ ·ã€‚\nuser=\u0026gt; (str \u0026#34;To understand what recursion is,\u0026#34; \u0026#34; you must first understand recursion.\u0026#34;) è¿™æ®µæ–‡å­—å®é™…ä¸Šåªæ˜¯ä¸€ä¸² Unicode å­—ç¬¦ï¼Œä½†å®ƒæ˜¯ä¸ºäº†è¡¨ç¤º Clojure æ•°æ®ç»“æ„çš„ç»„åˆã€‚è¿™ç§æ•°æ®ç»“æ„çš„æ–‡æœ¬è¡¨ç¤ºæ³•è¢«ç§°ä¸ºè¯»å–å™¨çš„å½¢å¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¯¥è¡¨æ ¼ä»£è¡¨äº†ä¸€ä¸ªåˆ—è¡¨æ•°æ®ç»“æ„ï¼Œå…¶ä¸­åˆåŒ…å«äº†ä¸‰ä¸ªè¡¨æ ¼ï¼šstrç¬¦å·å’Œä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚\nä¸€æ—¦ä½ åœ¨æç¤ºç¬¦ä¸­è¾“å…¥è¿™äº›å­—ç¬¦å¹¶æŒ‰ä¸‹å›è½¦é”®ï¼Œè¿™äº›æ–‡æœ¬å°±ä¼šè¿›å…¥è¯»å–å™¨ï¼ˆè®°å¾— REPL æ˜¯ read-eval-print-loop çš„ç¼©å†™ï¼‰ã€‚Clojure è¯»å–å­—ç¬¦æµå¹¶åœ¨å†…éƒ¨äº§ç”Ÿç›¸åº”çš„æ•°æ®ç»“æ„ã€‚ç„¶åå®ƒå¯¹æ•°æ®ç»“æ„è¿›è¡Œæ±‚å€¼ï¼Œå¹¶æ‰“å°å‡ºç»“æœçš„æ–‡æœ¬è¡¨ç¤ºã€‚\n\u0026#34;To understand what recursion is, you must first understand recursion.\u0026#34; è¯»å–å’Œæ±‚å€¼æ˜¯ä¸è¿ç»­çš„è¿‡ç¨‹ï¼Œä½ å¯ä»¥ç‹¬ç«‹æ‰§è¡Œã€‚ä¸€ç§ç›´æ¥ä¸è¯»è€…äº’åŠ¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨read-stringå‡½æ•°ã€‚Â read-stringæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶ä½¿ç”¨ Clojure çš„è¯»å–å™¨è¿›è¡Œå¤„ç†ï¼Œè¿”å›ä¸€ä¸ªæ•°æ®ç»“æ„ã€‚\n(read-string \u0026#34;(+ 1 2)\u0026#34;) ; =\u0026gt; (+ 1 2) (list? (read-string \u0026#34;(+ 1 2)\u0026#34;)) ; =\u0026gt; true (conj (read-string \u0026#34;(+ 1 2)\u0026#34;) :zagglewag) ; =\u0026gt; (:zagglewag + 1 2) åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œread-stringè¯»å–äº†ä¸€ä¸ªåŒ…å«åŠ å·å’Œæ•°å­— 1 å’Œ 2 çš„åˆ—è¡¨çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚è¿”å›å€¼æ˜¯ä¸€ä¸ªå®é™…çš„åˆ—è¡¨ï¼Œæ­£å¦‚ç¬¬äºŒä¸ªä¾‹å­æ‰€è¯æ˜çš„ã€‚æœ€åä¸€ä¸ªä¾‹å­ä½¿ç”¨conjåœ¨åˆ—è¡¨ä¸­é¢„ç½®ä¸€ä¸ªå…³é”®å­—ã€‚å¯ç¤ºæ˜¯ï¼Œè¯»å–å™¨å’Œæ±‚å€¼æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚ä½ å¯ä»¥è¯»å–æ–‡æœ¬è€Œä¸å¯¹å…¶è¿›è¡Œæ±‚å€¼ï¼Œä½ å¯ä»¥å°†ç»“æœä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹ç»“æœè¿›è¡Œæ±‚å€¼ã€‚\n(eval (read-string \u0026#34;(+ 1 2)\u0026#34;)) ; =\u0026gt; 3 åœ¨åˆ°ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰ä¾‹å­ä¸­ï¼Œè¯»è€…å½¢å¼å’Œç›¸åº”çš„æ•°æ®ç»“æ„ä¹‹é—´ä¸€ç›´æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚ä¸‹é¢æ˜¯æ›´å¤šç®€å•çš„è¯»å–å™¨å½¢å¼çš„ä¾‹å­ï¼Œå®ƒä»¬ç›´æ¥ Map åˆ°å®ƒä»¬æ‰€ä»£è¡¨çš„æ•°æ®ç»“æ„ã€‚\n () ä¸€ä¸ªåˆ—è¡¨çš„è¯»å–å½¢å¼ *str ä¸€ä¸ªç¬¦å·è¯»å–å™¨å½¢å¼ [1 2] ä¸€ä¸ª Vector è¯»å–å™¨å½¢å¼ï¼ŒåŒ…å«ä¸¤ä¸ªæ•°å­—è¯»å–å™¨å½¢å¼ {:sound \u0026ldquo;hoot\u0026rdquo;} ä¸€ä¸ªåŒ…å«å…³é”®å­—è¯»å–å™¨å½¢å¼å’Œå­—ç¬¦ä¸²è¯»å–å™¨å½¢å¼çš„ Map è¯»å–å™¨å½¢å¼  ç„¶è€Œï¼Œåœ¨å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°æ®ç»“æ„æ—¶ï¼Œè¯»å–å™¨å¯ä»¥é‡‡ç”¨æ›´å¤æ‚çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œè¿˜è®°å¾—åŒ¿åå‡½æ•°å—ï¼Ÿ\n(#(+ 1 %) 3) ; =\u0026gt; 4 å¥½å§ï¼Œè¯•è¯•è¿™ä¸ªã€‚\n(read-string \u0026#34;#(+ 1 %)\u0026#34;) ; =\u0026gt; (fn* [p1__423#] (+ 1 p1__423#)) å“‡! è¿™ä¸æ˜¯æˆ‘ä»¬æ‰€ä¹ æƒ¯çš„ä¸€å¯¹ä¸€çš„ Mapã€‚è¯»å–#(+ 1 %)çš„ç»“æœæ˜¯ä¸€ä¸ªç”±fn*ç¬¦å·ç»„æˆçš„åˆ—è¡¨ï¼Œä¸€ä¸ªåŒ…å«ä¸€ä¸ªç¬¦å·çš„ Vectorï¼Œå’Œä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚åˆšåˆšå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ\nè¯»è€…å® æˆ‘æ¥å›ç­”æˆ‘è‡ªå·±çš„é—®é¢˜ï¼šè¯»è€…ä½¿ç”¨äº†ä¸€ä¸ªè¯»è€…å®æ¥è½¬æ¢#(+ 1 %)ã€‚è¯»è€…å®æ˜¯ä¸€ç»„å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°æ®ç»“æ„çš„è§„åˆ™ã€‚å®ƒä»¬é€šå¸¸å…è®¸ä½ ä»¥æ›´ç´§å‡‘çš„æ–¹å¼è¡¨ç¤ºæ•°æ®ç»“æ„ï¼Œå› ä¸ºå®ƒä»¬é‡‡ç”¨äº†ä¸€ä¸ªç®€ç•¥çš„è¯»è€…å½¢å¼ï¼Œå¹¶å°†å…¶æ‰©å±•ä¸ºå®Œæ•´çš„å½¢å¼ã€‚å®ƒä»¬ç”±å®å­—ç¬¦æŒ‡å®šï¼Œå¦‚'ï¼ˆå•å¼•å·ï¼‰ã€#å’Œ@ã€‚å®ƒä»¬ä¹Ÿå®Œå…¨ä¸åŒäºæˆ‘ä»¬åé¢è¦è®²çš„å®ã€‚ä¸ºäº†ä¸æŠŠä¸¤è€…æ··æ·†ï¼Œæˆ‘æ€»æ˜¯ç”¨è¯»è€…å®è¿™ä¸ªå…¨ç§°æ¥æŒ‡ä»£è¯»è€…å®ã€‚\nä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°å¼•ç”¨è¯»è€…å®æ˜¯å¦‚ä½•æ‰©å±•å•å¼•å·å­—ç¬¦çš„ã€‚\n(read-string \u0026#34;\u0026#39;(a b c)\u0026#34;) ; =\u0026gt; (quote (a b c)) å½“è¯»å–å™¨é‡åˆ°å•å¼•å·æ—¶ï¼Œå®ƒå°†å…¶æ‰©å±•ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯ç¬¦å·quoteï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯å•å¼•å·åé¢çš„æ•°æ®ç»“æ„ã€‚è¯»å–å™¨çš„derefå®å¯¹@å­—ç¬¦çš„ä½œç”¨ä¸æ­¤ç±»ä¼¼ã€‚\n(read-string \u0026#34;@var\u0026#34;) ; =\u0026gt; (clojure.core/deref var) è¯»å–å™¨å®ä¹Ÿå¯ä»¥åšä¸€äº›ç–¯ç‹‚çš„äº‹æƒ…ï¼Œæ¯”å¦‚å¯¼è‡´æ–‡æœ¬è¢«å¿½ç•¥ã€‚åˆ†å·æŒ‡å®šäº†å•è¡Œæ³¨é‡Šçš„è¯»å–å™¨å®ã€‚\n(read-string \u0026#34;; ignore!\\n(+ 1 2)\u0026#34;) ; =\u0026gt; (+ 1 2) è¿™å°±æ˜¯è¯»å–å™¨! ä½ å‘å¾®çš„ä¼™ä¼´ï¼Œæ­£åœ¨è¾›è‹¦åœ°å°†æ–‡æœ¬è½¬åŒ–ä¸ºæ•°æ®ç»“æ„ã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ Clojure æ˜¯å¦‚ä½•æ±‚å€¼è¿™äº›æ•°æ®ç»“æ„çš„ã€‚\næ±‚å€¼å™¨ å›¾ 7-5ï¼šï¼ˆ+ 1 2ï¼‰çš„æ•°æ®ç»“æ„\nä½ å¯ä»¥æŠŠ Clojure çš„æ±‚å€¼å™¨çœ‹ä½œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°æ®ç»“æ„ä½œä¸ºå‚æ•°ï¼Œä½¿ç”¨ä¸æ•°æ®ç»“æ„ç±»å‹ç›¸å¯¹åº”çš„è§„åˆ™å¤„ç†è¯¥æ•°æ®ç»“æ„ï¼Œå¹¶è¿”å›ä¸€ä¸ªç»“æœã€‚è¦æ±‚å€¼ä¸€ä¸ªç¬¦å·ï¼ŒClojure ä¼šæŸ¥æ‰¾è¯¥ç¬¦å·æ‰€æŒ‡çš„å†…å®¹ã€‚è¦æ±‚å€¼ä¸€ä¸ªåˆ—è¡¨ï¼ŒClojure ä¼šæŸ¥çœ‹è¯¥åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è°ƒç”¨ä¸€ä¸ªå‡½æ•°ã€å®æˆ–ç‰¹æ®Šå½¢å¼ã€‚ä»»ä½•å…¶ä»–çš„å€¼ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²ã€æ•°å­—å’Œå…³é”®å­—ï¼‰åªæ˜¯ç®€å•åœ°å¯¹å…¶è¿›è¡Œæ±‚å€¼ã€‚\nä¾‹å¦‚ï¼Œå‡è®¾ä½ åœ¨ REPL ä¸­è¾“å…¥äº†(+ 1 2)ã€‚å›¾ 7-5 æ˜¾ç¤ºäº†ä¸€ä¸ªè¢«å‘é€åˆ°æ±‚å€¼å™¨çš„æ•°æ®ç»“æ„å›¾ã€‚\nå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ±‚å€¼å™¨ä»æ±‚å€¼åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ã€‚ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åŠ å·ï¼Œæ±‚å€¼å™¨é€šè¿‡è¿”å›ç›¸åº”çš„å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æ±‚å€¼å™¨å¯¹æ¯ä¸ªæ“ä½œæ•°è¿›è¡Œæ±‚å€¼ã€‚æ“ä½œæ•° 1 å’Œ 2 æ±‚å€¼ä¸ºè‡ªå·±ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯åˆ—è¡¨æˆ–ç¬¦å·ã€‚ç„¶åæ±‚å€¼å™¨ä»¥ 1 å’Œ 2 ä¸ºæ“ä½œæ•°è°ƒç”¨åŠ æ³•å‡½æ•°ï¼Œå¹¶è¿”å›ç»“æœã€‚\næœ¬èŠ‚çš„å…¶ä½™éƒ¨åˆ†å°†æ›´å…¨é¢åœ°è§£é‡Šæ±‚å€¼å™¨å¯¹æ¯ç§æ•°æ®ç»“æ„çš„è§„åˆ™ã€‚ä¸ºäº†æ˜¾ç¤ºæ±‚å€¼å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬å°†åœ¨ REPL ä¸­è¿è¡Œæ¯ä¸ªä¾‹å­ã€‚è¯·è®°ä½ï¼ŒREPL é¦–å…ˆè¯»å–ä½ çš„æ–‡æœ¬ä»¥è·å¾—ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç„¶åå°†è¯¥æ•°æ®ç»“æ„å‘é€åˆ°æ±‚å€¼å™¨ï¼Œç„¶åå°†ç»“æœæ‰“å°ä¸ºæ–‡æœ¬ã€‚\næ•°æ®\næˆ‘åœ¨æœ¬ç« ä¸­å†™åˆ° Clojure å¦‚ä½•æ±‚å€¼æ•°æ®ç»“æ„ï¼Œä½†è¿™æ˜¯ä¸ç²¾ç¡®çš„ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œæ•°æ®ç»“æ„æŒ‡çš„æ˜¯æŸç§é›†åˆï¼Œå¦‚é“¾æ¥åˆ—è¡¨æˆ– B-æ ‘ï¼Œæˆ–å…¶ä»–ä»€ä¹ˆï¼Œä½†æˆ‘ä¹Ÿç”¨è¿™ä¸ªæœ¯è¯­æ¥æŒ‡æ ‡é‡ï¼ˆå•æ•°ï¼Œéé›†åˆï¼‰å€¼ï¼Œå¦‚ç¬¦å·å’Œæ•°å­—ã€‚æˆ‘è€ƒè™‘è¿‡ä½¿ç”¨æ•°æ®å¯¹è±¡è¿™ä¸ªæœ¯è¯­ï¼Œä½†ä¸æƒ³æš—ç¤ºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼Œæˆ–è€…åªä½¿ç”¨æ•°æ®ï¼Œä½†ä¸æƒ³å°†å…¶ä¸æ•°æ®è¿™ä¸ªæ¦‚å¿µæ··æ·†ã€‚æ‰€ä»¥ï¼Œæ•°æ®ç»“æ„å°±æ˜¯è¿™æ ·ï¼Œå¦‚æœä½ è§‰å¾—è¿™å¾ˆå†’çŠ¯ï¼Œæˆ‘ä¼šç»™ä½ ä¸€åƒæ¬¡çš„é“æ­‰ï¼Œæ·±æ€ç†Ÿè™‘åœ°ç»„ç»‡æˆä¸€æ£µ Van Emde Boas æ ‘ã€‚\nè¿™äº›ä¸œè¥¿éƒ½æ˜¯è‡ªå·±æ±‚å€¼çš„ æ¯å½“ Clojure å¯¹ä¸æ˜¯åˆ—è¡¨æˆ–ç¬¦å·çš„æ•°æ®ç»“æ„è¿›è¡Œæ±‚å€¼æ—¶ï¼Œå…¶ç»“æœå°±æ˜¯æ•°æ®ç»“æ„æœ¬èº«ã€‚\ntrue ; =\u0026gt; true false ; =\u0026gt; false {} ; =\u0026gt; {} :huzzah ; =\u0026gt; :huzzah ç©ºçš„åˆ—è¡¨ä¹Ÿä¼šå¯¹è‡ªå·±è¿›è¡Œæ±‚å€¼ã€‚\n() ; =\u0026gt; () ç¬¦å· ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½ çš„åŸºæœ¬ä»»åŠ¡ä¹‹ä¸€æ˜¯é€šè¿‡å°†åå­—å’Œå€¼è”ç³»èµ·æ¥æ¥åˆ›å»ºæŠ½è±¡ã€‚ä½ åœ¨ç¬¬ 3 ç« ä¸­é€šè¿‡ä½¿ç”¨defã€letå’Œå‡½æ•°å®šä¹‰å­¦ä¼šäº†å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚Clojure ä½¿ç”¨ç¬¦å·æ¥å‘½åå‡½æ•°ã€å®ã€æ•°æ®å’Œå…¶ä»–ä»»ä½•ä½ å¯ä»¥ä½¿ç”¨çš„ä¸œè¥¿ï¼Œå¹¶é€šè¿‡è§£ææ¥æ±‚å€¼å®ƒä»¬ã€‚ä¸ºäº†è§£æä¸€ä¸ªç¬¦å·ï¼ŒClojure ä¼šéå†ä½ æ‰€åˆ›å»ºçš„ä»»ä½•ç»‘å®šï¼Œç„¶ååœ¨å‘½åç©ºé—´ Map ä¸­æŸ¥æ‰¾è¯¥ç¬¦å·çš„æ¡ç›®ï¼Œè¿™ä¸€ç‚¹ä½ åœ¨ç¬¬ 6 ç« ä¸­äº†è§£è¿‡ã€‚æœ€ç»ˆï¼Œä¸€ä¸ªç¬¦å·è¢«è§£æä¸ºä¸€ä¸ªå€¼æˆ–ä¸€ä¸ªç‰¹æ®Šå½¢å¼\u0026ndash;ä¸€ä¸ªå†…ç½®çš„ Clojure æ“ä½œç¬¦ï¼Œæä¾›åŸºæœ¬çš„è¡Œä¸ºã€‚\nä¸€èˆ¬æ¥è¯´ï¼ŒClojure é€šè¿‡ä»¥ä¸‹æ–¹å¼è§£æä¸€ä¸ªç¬¦å·ã€‚\n æŸ¥è¯¢è¯¥ç¬¦å·æ˜¯å¦å‘½åäº†ä¸€ä¸ªç‰¹æ®Šå½¢å¼ã€‚å¦‚æœå®ƒæ²¡æœ‰â€¦â€¦ã€‚ æŸ¥è¯¢è¯¥ç¬¦å·æ˜¯å¦å¯¹åº”äºä¸€ä¸ªæœ¬åœ°ç»‘å®šã€‚å¦‚æœä¸æ˜¯çš„è¯ . è¯•å›¾æ‰¾åˆ°ç”±defå¼•å…¥çš„å‘½åç©ºé—´ Mapã€‚å¦‚æœæ²¡æœ‰çš„è¯ . . æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸  è®©æˆ‘ä»¬å…ˆçœ‹çœ‹ä¸€ä¸ªç¬¦å·è§£æåˆ°ä¸€ä¸ªç‰¹æ®Šå½¢å¼ã€‚ç‰¹æ®Šå½¢å¼ï¼Œå¦‚ifï¼Œæ€»æ˜¯åœ¨ä¸€ä¸ªæ“ä½œçš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼›å®ƒä»¬æ€»æ˜¯ä¸€ä¸ªåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\n(if true :a :b) ; =\u0026gt; :a åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œifæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å½¢å¼ï¼Œå®ƒè¢«ä½œä¸ºä¸€ä¸ªæ“ä½œç¬¦ä½¿ç”¨ã€‚å¦‚æœä½ è¯•å›¾å¼•ç”¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¹‹å¤–çš„ç‰¹æ®Šå½¢å¼ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ã€‚\nif ; =\u0026gt; CompilerException java.lang.RuntimeException: Unable to resolve symbol: if in this context, compiling:(NO_SOURCE_PATH:0:0) æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ±‚å€¼ä¸€äº›æœ¬åœ°ç»‘å®šã€‚æœ¬åœ°ç»‘å®šæ˜¯æŒ‡ä¸€ä¸ªç¬¦å·å’Œä¸€ä¸ªä¸æ˜¯ç”±defåˆ›å»ºçš„å€¼ä¹‹é—´çš„ä»»ä½•å…³è”ã€‚åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œç¬¦å·xç”¨letä¸ 5 ç»‘å®šã€‚å½“æ±‚å€¼å™¨è§£æxæ—¶ï¼Œå®ƒå°†ç¬¦å·*xè§£æä¸ºå€¼ 5ã€‚\n(let [x 5] (+ x 3)) ; =\u0026gt; 8 ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªxåˆ° 15 çš„å‘½åç©ºé—´ Mapï¼ŒClojure ä¼šç›¸åº”åœ°è§£å†³å®ƒã€‚\n(def x 15) (+ x 3) ; =\u0026gt; 18 åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œxè¢« Map åˆ° 15ï¼Œä½†æ˜¯æˆ‘ä»¬ç”¨letå¼•å…¥äº†xä¸ 5 çš„å±€éƒ¨ç»‘å®šã€‚æ‰€ä»¥xè¢«è§£æä¸º 5ã€‚\n(def x 15) (è®© [x 5] (+ x 3)) ; =\u0026gt; 8 ä½ å¯ä»¥å¯¹ç»‘å®šè¿›è¡ŒåµŒå¥—ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€è¿‘å®šä¹‰çš„ç»‘å®šå…·æœ‰ä¼˜å…ˆæƒã€‚\n(è®© [x 5] (è®© [x 6] (+ x 3))) ; =\u0026gt; 9 å‡½æ•°è¿˜åˆ›å»ºäº†å±€éƒ¨ç»‘å®šï¼Œå°†å‚æ•°ä¸å‡½æ•°ä½“ä¸­çš„å‚æ•°ç»‘å®šã€‚åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œexclaimè¢« Map åˆ°ä¸€ä¸ªå‡½æ•°ã€‚åœ¨å‡½æ•°ä¸»ä½“ä¸­ï¼Œå‚æ•°åexclamationè¢«ç»‘å®šåˆ°ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ä¸Šã€‚\n(defn exclaim [exclamation] (str exclamation \u0026#34;!\u0026#34;)) (exclaim \u0026#34;Hadoken\u0026#34;) ; =\u0026gt; \u0026#34;Hadoken!\u0026#34; æœ€åï¼Œåœ¨è¿™æœ€åä¸€ä¸ªä¾‹å­ä¸­ï¼Œmapå’Œincéƒ½æŒ‡çš„æ˜¯å‡½æ•°ã€‚\n(map inc [1 2 3]) ; =\u0026gt; (2 3 4) å½“ Clojure æ±‚å€¼è¿™æ®µä»£ç æ—¶ï¼Œå®ƒé¦–å…ˆæ±‚å€¼mapç¬¦å·ï¼ŒæŸ¥æ‰¾ç›¸åº”çš„å‡½æ•°å¹¶å°†å…¶åº”ç”¨äºå‚æ•°ã€‚ç¬¦å·mapæŒ‡çš„æ˜¯ map å‡½æ•°ï¼Œä½†å®ƒä¸åº”è¯¥ä¸å‡½æ•°æœ¬èº«ç›¸æ··æ·†ã€‚mapç¬¦å·ä»ç„¶æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå°±åƒå­—ç¬¦ä¸²\u0026quot;fried salad\u0026quot;æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ä¸€æ ·ï¼Œä½†å®ƒä¸å‡½æ•°æœ¬èº«ä¸åŒã€‚\n(read-string (\u0026#34;+\u0026#34;)) ; =\u0026gt; + (type (read-string \u0026#34;+\u0026#34;)) ; =\u0026gt; clojure.lang.Symbol (list (read-string \u0026#34;+\u0026#34;) 1 2) ; =\u0026gt; (+ 1 2) åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œä½ æ­£åœ¨ä¸åŠ å·ï¼Œ+ï¼Œä½œä¸ºä¸€ä¸ªæ•°æ®ç»“æ„è¿›è¡Œäº¤äº’ã€‚ä½ å¹¶æ²¡æœ‰ä¸å®ƒæ‰€æŒ‡çš„åŠ æ³•å‡½æ•°è¿›è¡Œäº¤äº’ã€‚å¦‚æœä½ æ±‚å€¼å®ƒï¼ŒClojure ä¼šæŸ¥æ‰¾è¯¥å‡½æ•°å¹¶åº”ç”¨å®ƒã€‚\n(eval (list (read-string \u0026#34;+\u0026#34;) 1 2)) ; =\u0026gt; 3 å°±å…¶æœ¬èº«è€Œè¨€ï¼Œç¬¦å·å’Œå®ƒä»¬çš„å‚ç…§ç‰©å®é™…ä¸Šä¸åšä»»ä½•äº‹æƒ…ï¼›Clojure é€šè¿‡æ±‚å€¼åˆ—è¡¨æ‰§è¡Œå·¥ä½œã€‚\nåˆ—è¡¨ å¦‚æœæ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œå®ƒå°±ä¼šè¢«æ±‚å€¼ä¸ºä¸€ä¸ªç©ºåˆ—è¡¨ã€‚\n(eval (read-string \u0026#34;()\u0026#34;)) ; =\u0026gt; () å¦åˆ™ï¼Œå®ƒè¢«æ±‚å€¼ä¸ºå¯¹åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„*è°ƒç”¨ã€‚æ‰§è¡Œè°ƒç”¨çš„æ–¹å¼å–å†³äºç¬¬ä¸€ä¸ªå…ƒç´ çš„æ€§è´¨ã€‚\nå‡½æ•°è°ƒç”¨ å½“æ‰§è¡Œä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¶ï¼Œæ¯ä¸ªæ“ä½œæ•°éƒ½è¢«å®Œå…¨æ±‚å€¼ï¼Œç„¶åä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ+ç¬¦å·è§£æä¸ºä¸€ä¸ªå‡½æ•°ã€‚\n(+ 1 2) ; =\u0026gt; 3 Clojure çœ‹åˆ°åˆ—è¡¨çš„å¤´éƒ¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥å®ƒç»§ç»­æ±‚å€¼åˆ—è¡¨ä¸­çš„å…¶ä»–å…ƒç´ ã€‚æ“ä½œæ•° 1 å’Œ 2 éƒ½å¯¹è‡ªå·±è¿›è¡Œæ±‚å€¼ï¼Œåœ¨æ±‚å€¼ä¹‹åï¼ŒClojure å¯¹å®ƒä»¬åº”ç”¨åŠ æ³•å‡½æ•°ã€‚\nä½ ä¹Ÿå¯ä»¥åµŒå¥—å‡½æ•°è°ƒç”¨ã€‚\n(+ 1 (+ 2 3)) ; =\u0026gt; 6 å³ä½¿ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒClojure åœ¨è¿™é‡Œä¹Ÿéµå¾ªåŒæ ·çš„è¿‡ç¨‹ï¼šæŸ¥æ‰¾+ç¬¦å·å¹¶æ±‚å€¼æ¯ä¸ªå‚æ•°ã€‚ä¸ºäº†æ±‚å€¼åˆ—è¡¨(+ 2 3)ï¼ŒClojure å°†ç¬¬ä¸€ä¸ªæˆå‘˜è§£æä¸ºåŠ æ³•å‡½æ•°å¹¶ç»§ç»­æ±‚å€¼æ¯ä¸ªå‚æ•°ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ±‚å€¼æ˜¯é€’å½’çš„ã€‚\nç‰¹æ®Šå½¢å¼ ä½ ä¹Ÿå¯ä»¥è°ƒç”¨*ç‰¹æ®Šå½¢å¼ã€‚*ä¸€èˆ¬æ¥è¯´ï¼Œç‰¹æ®Šå½¢å¼æ˜¯ç‰¹æ®Šçš„ï¼Œå› ä¸ºå®ƒä»¬å®ç°äº†ä¸èƒ½ç”¨å‡½æ•°å®ç°çš„æ ¸å¿ƒè¡Œä¸ºã€‚æ¯”å¦‚è¯´\n(if true 1 2) ; =\u0026gt; 1 è¿™é‡Œï¼Œæˆ‘ä»¬è¦æ±‚ Clojure æ±‚å€¼ä¸€ä¸ªä»¥ç¬¦å·ifå¼€å§‹çš„åˆ—è¡¨ã€‚è¿™ä¸ªifç¬¦å·è¢«è§£æä¸ºifç‰¹æ®Šå½¢å¼ï¼ŒClojure ç”¨æ“ä½œæ•°trueã€1å’Œ2è°ƒç”¨è¿™ä¸ªç‰¹æ®Šå½¢å¼ã€‚\nç‰¹æ®Šå½¢å¼ä¸éµå¾ªä¸æ™®é€šå‡½æ•°ç›¸åŒçš„æ±‚å€¼è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œå½“ä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæ¯ä¸ªæ“ä½œæ•°éƒ½è¢«æ±‚å€¼ã€‚ç„¶è€Œï¼Œå¯¹äºifï¼Œä½ ä¸å¸Œæœ›æ¯ä¸ªæ“ä½œæ•°éƒ½è¢«æ±‚å€¼ã€‚ä½ åªå¸Œæœ›æŸäº›æ“ä½œæ•°è¢«æ±‚å€¼ï¼Œè¿™å–å†³äºæ¡ä»¶æ˜¯çœŸè¿˜æ˜¯å‡ã€‚\nå¦ä¸€ä¸ªé‡è¦çš„ç‰¹æ®Šå½¢å¼æ˜¯quoteã€‚ä½ å·²ç»è§è¿‡è¿™æ ·çš„åˆ—è¡¨ã€‚\n\u0026#39;(a b c) æ­£å¦‚ä½ åœ¨\u0026ldquo;è¯»å–å™¨ \u0026ldquo;ç¬¬ 153 é¡µä¸­æ‰€çœ‹åˆ°çš„ï¼Œè¿™å°†è°ƒç”¨ä¸€ä¸ªè¯»å–å™¨å®ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚\n(quote (a b c)) é€šå¸¸ï¼ŒClojure ä¼šå°è¯•è§£æaç¬¦å·ï¼Œç„¶åè°ƒç”¨å®ƒï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚quoteçš„ç‰¹æ®Šå½¢å¼å‘Šè¯‰æ±‚å€¼å™¨ï¼Œ\u0026ldquo;ä¸å…¶åƒæ­£å¸¸ä¸€æ ·æ±‚å€¼æˆ‘çš„ä¸‹ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä¸å¦‚ç›´æ¥è¿”å›æ•°æ®ç»“æ„æœ¬èº«ã€‚\u0026rdquo; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªç”±ç¬¦å·a, b, å’Œcç»„æˆçš„åˆ—è¡¨ã€‚\ndefã€letã€loopã€fnã€doå’Œrecurä¹Ÿéƒ½æ˜¯ç‰¹æ®Šå½¢å¼ã€‚ä½ å¯ä»¥çœ‹åˆ°ä¸ºä»€ä¹ˆï¼šå®ƒä»¬çš„æ±‚å€¼æ–¹å¼ä¸å‡½æ•°ä¸ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œé€šå¸¸å½“æ±‚å€¼å™¨æ±‚å€¼ä¸€ä¸ªç¬¦å·æ—¶ï¼Œå®ƒä¼šè§£æè¯¥ç¬¦å·ï¼Œä½†æ˜¯defå’Œletæ˜¾ç„¶ä¸æ˜¯è¿™æ ·çš„è¡Œä¸ºã€‚å®ƒä»¬ä¸æ˜¯è§£æç¬¦å·ï¼Œè€Œæ˜¯åœ¨ç¬¦å·å’Œå€¼ä¹‹é—´å»ºç«‹å…³è”ã€‚å› æ­¤ï¼Œæ±‚å€¼å™¨ä»è¯»è€…é‚£é‡Œæ¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®ç»“æ„çš„ç»„åˆï¼Œç„¶åå®ƒå»è§£æç¬¦å·å¹¶è°ƒç”¨æ¯ä¸ªåˆ—è¡¨å¼€å¤´çš„å‡½æ•°æˆ–ç‰¹æ®Šå½¢å¼ã€‚ä½†è¿˜æœ‰æ›´å¤šçš„ä¸œè¥¿! ä½ ä¹Ÿå¯ä»¥åœ¨åˆ—è¡¨çš„å¼€å¤´æ”¾ç½®ä¸€ä¸ªå®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–ç‰¹æ®Šå½¢å¼ï¼Œè¿™å¯ä»¥ä¸ºä½ æä¾›å·¨å¤§çš„æƒåŠ›ï¼Œè®©ä½ çŸ¥é“å…¶ä½™çš„æ•°æ®ç»“æ„å¦‚ä½•è¢«æ±‚å€¼ã€‚\nå·¨é›† å—¯ . . Clojure æ±‚å€¼æ•°æ®ç»“æ„\u0026ndash;ä¸æˆ‘ä»¬åœ¨ Clojure ç¨‹åºä¸­ç¼–å†™å’Œæ“ä½œçš„æ•°æ®ç»“æ„ç›¸åŒã€‚å¦‚æœæˆ‘ä»¬èƒ½ç”¨ Clojure æ¥æ“ä½œ Clojure æ±‚å€¼çš„æ•°æ®ç»“æ„ï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿæ˜¯çš„ï¼Œæ˜¯çš„ï¼Œä¼šçš„ã€‚ä½ çŒœæ€ä¹ˆç€ï¼Ÿä½ å¯ä»¥ç”¨å®æ¥åšè¿™ä»¶äº‹ã€‚ä½ çš„è„‘è¢‹æ˜¯ä¸æ˜¯çˆ†ç‚¸äº†ï¼Ÿæˆ‘çš„å°±æ˜¯è¿™æ ·ã€‚\nä¸ºäº†äº†è§£å®çš„ä½œç”¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸€äº›ä»£ç ã€‚å‡è®¾æˆ‘ä»¬æƒ³å†™ä¸€ä¸ªå‡½æ•°ï¼Œè®© Clojure è¯»å‡º infix ç¬¦å·ï¼ˆå¦‚1 + 1ï¼‰ï¼Œè€Œä¸æ˜¯å…¶æ­£å¸¸ç¬¦å·ä¸­çš„è¿ç®—ç¬¦ä¼˜å…ˆï¼ˆ+ 1 1ï¼‰ã€‚è¿™ä¸ªä¾‹å­ä¸æ˜¯**ä¸€ä¸ªå®ã€‚ç›¸åï¼Œå®ƒåªæ˜¯è¡¨æ˜ä½ å¯ä»¥ç”¨ infix ç¬¦å·å†™ä»£ç ï¼Œç„¶åç”¨ Clojure æ¥è½¬æ¢å®ƒï¼Œä½¿å…¶å®é™…æ‰§è¡Œã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªä»£è¡¨ infix åŠ æ³•çš„åˆ—è¡¨ã€‚\n(read-string \u0026#34;(1 + 1)\u0026#34; ) ; =\u0026gt; (1 + 1) å¦‚æœä½ è¯•å›¾è®©å®ƒæ±‚å€¼è¿™ä¸ªåˆ—è¡¨ï¼ŒClojure å°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚\n(eval (read-string \u0026#34;(1 + 1)\u0026#34;)) ; =\u0026gt; ClassCastException java.lang.Long cannot be cast to clojure.lang.IFn ç„¶è€Œï¼Œread-stringè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œä½ å¯ä»¥ç”¨ Clojure æŠŠè¿™ä¸ªåˆ—è¡¨é‡æ–°ç»„ç»‡æˆå®ƒå¯ä»¥æˆåŠŸæ±‚å€¼çš„ä¸œè¥¿ã€‚\n(let [infix (read-string \u0026#34;(1 + 1)\u0026#34;)] (list (second infix) (first infix) (last infix))) ; =\u0026gt; (+ 1 1) å¦‚æœä½ æ±‚å€¼è¿™ä¸ªï¼Œå®ƒè¿”å›2ï¼Œå°±åƒä½ æ‰€æœŸæœ›çš„é‚£æ ·ã€‚\n(eval (let [infix (read-string \u0026#34;(1 + 1)\u0026#34;)] (list (second infix) (first infix) (last infix)))) ; =\u0026gt; 2 è¿™å¾ˆé…·ï¼Œä½†å®ƒä¹Ÿå¾ˆç¬¨é‡ã€‚è¿™å°±æ˜¯å®çš„ä½œç”¨ã€‚å®ç»™äº†ä½ ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹æ³•ï¼Œåœ¨ Clojure æ±‚å€¼åˆ—è¡¨ä¹‹å‰å¯¹å…¶è¿›è¡Œæ“ä½œã€‚å®å¾ˆåƒå‡½æ•°ï¼šå®ƒä»¬æ¥å—å‚æ•°å¹¶è¿”å›ä¸€ä¸ªå€¼ï¼Œå°±åƒä¸€ä¸ªå‡½æ•°é‚£æ ·ã€‚å®ƒä»¬åœ¨ Clojure æ•°æ®ç»“æ„ä¸Šå·¥ä½œï¼Œå°±åƒå‡½æ•°é‚£æ ·ã€‚å®ƒä»¬çš„ç‹¬ç‰¹å’Œå¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒä»¬ä¸æ±‚å€¼è¿‡ç¨‹çš„é…åˆã€‚å®ƒä»¬åœ¨è¯»å–å™¨å’Œæ±‚å€¼å™¨ä¹‹é—´æ‰§è¡Œ\u0026ndash;æ‰€ä»¥å®ƒä»¬å¯ä»¥æ“ä½œè¯»å–å™¨åå‡ºçš„æ•°æ®ç»“æ„ï¼Œå¹¶åœ¨å°†å…¶ä¼ é€’ç»™æ±‚å€¼å™¨ä¹‹å‰ä¸è¿™äº›æ•°æ®ç»“æ„è¿›è¡Œè½¬æ¢ã€‚\nè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚\n(defmacro ignore-last-operand [function-call] (butlast function-call)) âŠ (ignore-last-operand (+ 1 2 10)) ; =\u0026gt; 3 ;; This will not print anything (ignore-last-operand (+ 1 2 (println \u0026#34;look at me!!!\u0026#34;))) ; =\u0026gt; 3 åœ¨âŠï¼Œå® \u0026ldquo;ignore-last-operand \u0026ldquo;æ¥æ”¶åˆ—è¡¨\u0026rdquo;(+ 1 2 10) \u0026ldquo;ä½œä¸ºå…¶å‚æ•°ï¼Œä¸æ˜¯å€¼ \u0026ldquo;13\u0026rdquo;ã€‚è¿™ä¸å‡½æ•°è°ƒç”¨æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œå› ä¸ºå‡½æ•°è°ƒç”¨æ€»æ˜¯æ±‚å€¼æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ï¼Œæ‰€ä»¥å‡½æ•°ä¸å¯èƒ½æ¥è§¦åˆ°å®ƒçš„ä¸€ä¸ªæ“ä½œæ•°å¹¶æ”¹å˜æˆ–å¿½ç•¥å®ƒã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå½“ä½ è°ƒç”¨ä¸€ä¸ªå®æ—¶ï¼Œæ“ä½œæ•°æ˜¯ä¸è¢«æ±‚å€¼çš„ã€‚ç‰¹åˆ«æ˜¯ï¼Œç¬¦å·ä¸è¢«è§£æï¼›å®ƒä»¬è¢«å½“ä½œç¬¦å·ä¼ é€’ã€‚åˆ—è¡¨ä¹Ÿä¸è¢«æ±‚å€¼ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ä½œä¸ºä¸€ä¸ªå‡½æ•°ã€ç‰¹æ®Šå½¢å¼æˆ–å®è¢«è°ƒç”¨ã€‚ç›¸åï¼Œæœªæ±‚å€¼çš„åˆ—è¡¨æ•°æ®ç»“æ„è¢«ä¼ å…¥ã€‚\nå›¾ 7-6: (infix (1 + 2)) çš„å®Œæ•´æ±‚å€¼è¿‡ç¨‹\nå¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå‡½æ•°è¿”å›çš„æ•°æ®ç»“æ„æ˜¯ä¸æ±‚å€¼çš„ï¼Œä½†æ˜¯å®è¿”å›çš„æ•°æ®ç»“æ„æ˜¯æ±‚å€¼çš„ã€‚ç¡®å®šå®çš„è¿”å›å€¼çš„è¿‡ç¨‹è¢«ç§°ä¸ºå®æ‰©å±•*ï¼Œä½ å¯ä»¥ä½¿ç”¨å‡½æ•°macroexpandæ¥æŸ¥çœ‹å®åœ¨æ±‚å€¼æ•°æ®ç»“æ„ä¹‹å‰è¿”å›ä»€ä¹ˆæ•°æ®ç»“æ„ã€‚æ³¨æ„ï¼Œä½ å¿…é¡»å¼•ç”¨ä½ ä¼ é€’ç»™macroexpandçš„å½¢å¼ã€‚\n(macroexpand \u0026#39;(ignore-last-operand (+ 1 2 10))) ; =\u0026gt; (+ 1 2) (macroexpand \u0026#39;(ignore-last-operand (+ 1 2 (println \u0026#34;look at me!!!\u0026#34;)))) ; =\u0026gt; (+ 1 2) æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™ä¸¤ç§æ‰©å±•çš„ç»“æœéƒ½æ˜¯åˆ—è¡¨(+ 1 2)ã€‚å½“è¿™ä¸ªåˆ—è¡¨è¢«æ±‚å€¼æ—¶ï¼Œå°±åƒå‰é¢çš„ä¾‹å­ä¸€æ ·ï¼Œç»“æœæ˜¯3ã€‚\nä¸ºäº†å¥½ç©ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåšç®€å• infix ç¬¦å·çš„å®ã€‚\n(defmacro infix [infixed] (list (second infixed) (first infixed) (lastÂ infixed))) (infix (1 + 2)) ; =\u0026gt; 3 æ€è€ƒè¿™æ•´ä¸ªè¿‡ç¨‹çš„æœ€å¥½æ–¹æ³•æ˜¯æƒ³è±¡åœ¨è¯»å–å’Œæ±‚å€¼ä¹‹é—´çš„ä¸€ä¸ªé˜¶æ®µï¼šå®æ‰©å±•é˜¶æ®µã€‚å›¾ 7-6 æ˜¾ç¤ºäº†å¦‚ä½•å°†(infix (1 + 2))çš„æ•´ä¸ªæ±‚å€¼è¿‡ç¨‹å¯è§†åŒ–ã€‚\nè€Œè¿™å°±æ˜¯å®æ˜¯å¦‚ä½•èå…¥æ±‚å€¼è¿‡ç¨‹çš„ã€‚ä½†ä½ ä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢ï¼ŸåŸå› æ˜¯å®å…è®¸ä½ å°†ä»»æ„çš„æ•°æ®ç»“æ„ï¼Œå¦‚(1 + 2)è½¬åŒ–ä¸º Clojure å¯ä»¥æ±‚å€¼çš„ç»“æ„ï¼Œå³(+ 1 2)ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ Clojure æ¥æ‰©å±•è‡ªå·±ï¼Œæ‰€ä»¥ä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°ç¼–å†™ç¨‹åºã€‚æ¢å¥è¯è¯´ï¼Œå®èƒ½å¤Ÿå®ç°å¥æ³•æŠ½è±¡ã€‚å¥æ³•æŠ½è±¡å¯èƒ½å¬èµ·æ¥æœ‰ç‚¹æŠ½è±¡ï¼ˆå“ˆå“ˆï¼ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹ã€‚\nè¯­æ³•æŠ½è±¡å’Œ -\u0026gt; å® é€šå¸¸ï¼ŒClojure ä»£ç ç”±ä¸€å †åµŒå¥—çš„å‡½æ•°è°ƒç”¨ç»„æˆã€‚ä¾‹å¦‚ï¼Œæˆ‘åœ¨æˆ‘çš„ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨äº†ä¸‹é¢è¿™ä¸ªå‡½æ•°ã€‚\n(defn read-resource \u0026#34;Read a resource into a string\u0026#34; [path] (read-string (slurp (clojure.java.io/resource path)))) ä¸ºäº†ç†è§£å‡½æ•°ä½“ï¼Œä½ å¿…é¡»æ‰¾åˆ°æœ€å†…éƒ¨çš„å½¢å¼ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯(clojure.java.io/resource path)ï¼Œç„¶åä»å³åˆ°å·¦å‘å¤–èµ°ï¼Œçœ‹æ¯ä¸ªå‡½æ•°çš„ç»“æœå¦‚ä½•ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚è¿™ç§ä»å³åˆ°å·¦çš„æµç¨‹ä¸é Lisp ç¨‹åºå‘˜æ‰€ä¹ æƒ¯çš„ç›¸åã€‚å½“ä½ ä¹ æƒ¯äºç”¨ Clojure å†™ä½œæ—¶ï¼Œè¿™ç§ä»£ç ä¼šè¶Šæ¥è¶Šå®¹æ˜“ç†è§£ã€‚ä½†å¦‚æœä½ æƒ³ç¿»è¯‘ Clojure ä»£ç ï¼Œä»¥ä¾¿ä½ èƒ½ä»¥æ›´ç†Ÿæ‚‰çš„ã€ä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹çš„æ–¹å¼æ¥é˜…è¯»å®ƒï¼Œä½ å¯ä»¥ä½¿ç”¨å†…ç½®çš„-\u0026gt;å®ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºthreadingæˆ–stabbyå®ã€‚å®ƒå¯ä»¥è®©ä½ åƒè¿™æ ·é‡å†™å‰é¢çš„å‡½æ•°ã€‚\n(defn read-resource [path] (-\u0026gt; path clojure.java.io/resource slurp read-string)) ä½ å¯ä»¥æŠŠè¿™ç†è§£ä¸ºä¸€ä¸ªä»ä¸Šåˆ°ä¸‹çš„æµæ°´çº¿ï¼Œè€Œä¸æ˜¯ä»å†…æ‹¬å·åˆ°å¤–æ‹¬å·ã€‚é¦–å…ˆï¼Œpathè¢«ä¼ é€’ç»™io/resourceï¼Œç„¶åç»“æœè¢«ä¼ é€’ç»™slurpï¼Œæœ€åç»“æœè¢«ä¼ é€’ç»™read-string`ã€‚\nè¿™ä¸¤ç§å®šä¹‰ \u0026ldquo;read-resource \u0026ldquo;çš„æ–¹å¼æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚ç„¶è€Œï¼Œç¬¬äºŒç§æ–¹å¼å¯èƒ½æ›´å®¹æ˜“ç†è§£ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä»ä¸Šåˆ°ä¸‹æ¥è¿‘å®ƒï¼Œä¸€ä¸ªæˆ‘ä»¬ä¹ æƒ¯çš„æ–¹å‘ã€‚-\u0026gt;ä¹Ÿè®©æˆ‘ä»¬çœç•¥äº†æ‹¬å·ï¼Œè¿™æ„å‘³ç€æœ‰æ›´å°‘çš„è§†è§‰å™ªéŸ³éœ€è¦å¤„ç†ã€‚è¿™æ˜¯ä¸€ä¸ªå¥æ³•æŠ½è±¡ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©ä½ ç”¨ä¸€ç§ä¸åŒäº Clojure å†…ç½®è¯­æ³•çš„è¯­æ³•æ¥å†™ä»£ç ï¼Œä½†å¯¹äºäººç±»çš„æ¶ˆè´¹æ¥è¯´æ˜¯æ¯”è¾ƒå¥½çš„ã€‚èƒœè¿‡ç‚¹çŸ³æˆé‡‘!!!\næ€»ç»“ åœ¨æœ¬ç« ä¸­ï¼Œä½ äº†è§£äº† Clojure çš„æ±‚å€¼è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œè¯»å–å™¨å°†æ–‡æœ¬è½¬æ¢ä¸º Clojure æ•°æ®ç»“æ„ã€‚æ¥ä¸‹æ¥ï¼Œå®æ‰©å±•å™¨ç”¨å®æ¥è½¬æ¢è¿™äº›æ•°æ®ç»“æ„ï¼Œå°†ä½ çš„è‡ªå®šä¹‰è¯­æ³•è½¬æ¢ä¸ºè¯­æ³•ä¸Šæœ‰æ•ˆçš„æ•°æ®ç»“æ„ã€‚æœ€åï¼Œè¿™äº›æ•°æ®ç»“æ„è¢«å‘é€åˆ°æ±‚å€¼å™¨ã€‚æ±‚å€¼å™¨æ ¹æ®æ•°æ®ç»“æ„çš„ç±»å‹å¯¹å…¶è¿›è¡Œå¤„ç†ï¼šç¬¦å·è¢«è§£æä¸ºå®ƒä»¬çš„å‚ç…§ç‰©ï¼›åˆ—è¡¨å¯¼è‡´å‡½æ•°ã€å®æˆ–ç‰¹æ®Šå½¢å¼çš„è°ƒç”¨ï¼›å…¶ä»–ä¸€åˆ‡éƒ½è¢«æ±‚å€¼ä¸ºè‡ªèº«ã€‚\nè¿™ä¸ªè¿‡ç¨‹æœ€é…·çš„åœ°æ–¹æ˜¯ï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨ Clojure æ¥æ‰©å±•å®ƒè‡ªå·±çš„è¯­æ³•ã€‚è¿™ä¸ªè¿‡ç¨‹å˜å¾—æ›´åŠ å®¹æ˜“ï¼Œå› ä¸º Clojure æ˜¯åŒæºçš„ï¼šå®ƒçš„æ–‡æœ¬ä»£è¡¨æ•°æ®ç»“æ„ï¼Œè€Œè¿™äº›æ•°æ®ç»“æ„ä»£è¡¨æŠ½è±¡çš„è¯­æ³•æ ‘ï¼Œè®©ä½ æ›´å®¹æ˜“æ¨ç†å‡ºå¦‚ä½•æ„å»ºæ‰©å±•è¯­æ³•çš„å®ã€‚\næœ‰äº†æ‰€æœ‰è¿™äº›æ–°çš„æ¦‚å¿µï¼Œä½ ç°åœ¨å°±å¯ä»¥åƒæˆ‘æ‰¿è¯ºçš„é‚£æ ·ï¼Œæ•…æ„ç‚¸æ¯ä¸œè¥¿äº†ã€‚ä¸‹ä¸€ç« å°†æ•™ä½ å…³äºç¼–å†™å®çš„ä¸€åˆ‡çŸ¥è¯†ã€‚è¯·æŠ“ç´§ä½ çš„è¢œå­ï¼Œå¦åˆ™å®ƒä»¬å¾ˆå¯èƒ½ä¼šè¢«æ‰“æ‰!\nç»ƒä¹  è¿™äº›ç»ƒä¹ çš„é‡ç‚¹æ˜¯è¯»å–å™¨å’Œæ±‚å€¼ã€‚ç¬¬ 8 ç« æœ‰å…³äºç¼–å†™å®çš„ç»ƒä¹ ã€‚\n ä½¿ç”¨listå‡½æ•°, å¼•ç”¨, å’Œread-stringæ¥åˆ›å»ºä¸€ä¸ªåˆ—è¡¨, å½“æ±‚å€¼æ—¶, æ‰“å°å‡ºä½ çš„åå­—å’Œä½ æœ€å–œæ¬¢çš„ç§‘å¹»ç”µå½±. åˆ›å»ºä¸€ä¸ª infix å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªç±»ä¼¼(1 + 3 * 4 - 5)çš„åˆ—è¡¨ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Clojure éœ€è¦çš„åˆ—è¡¨ï¼Œä»¥ä¾¿ä½¿ç”¨è¿ç®—ç¬¦ä¼˜å…ˆè§„åˆ™æ­£ç¡®æ±‚å€¼è¯¥è¡¨è¾¾å¼ã€‚  ","permalink":"https://zhenfeng-zhu.github.io/post/chapter7/","summary":"Clojure ç‚¼é‡‘æœ¯ï¼šè¯»å–å™¨ã€æ±‚å€¼å™¨å’Œå® å“²å­¦å®¶ä¹‹çŸ³ï¼Œä¸ç”Ÿå‘½ä¹‹è¯å’Œä¼Ÿå“¥ä¸€æ ·ï¼Œæ˜¯ç‚¼é‡‘æœ¯ä¼ è¯´ä¸­æœ€è‘—åçš„æ ‡æœ¬ä¹‹ä¸€ï¼Œå› å…¶èƒ½å°†é“…è½¬åŒ–ä¸ºé‡‘è€Œå—åˆ°è¿½æ§ã€‚ç„¶è€Œï¼ŒClojure æä¾›äº†ä¸€ç§å·¥å…·ï¼Œä½¿å“²å­¦å®¶çš„çŸ³å¤´çœ‹èµ·æ¥åªæ˜¯ä¸€ä¸ªå°é¥°å“ï¼š*å®ã€‚\nå®å…è®¸ä½ å°†ä»»æ„çš„è¡¨è¾¾å¼è½¬åŒ–ä¸ºæœ‰æ•ˆçš„ Clojureï¼Œå› æ­¤ä½ å¯ä»¥æ‰©å±•è¯­è¨€æœ¬èº«ä»¥æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚è€Œä¸”ï¼Œä½ ç”šè‡³ä¸éœ€è¦æ˜¯ä¸€ä¸ªç©¿é•¿è¢çš„è€å®¶ä¼™æˆ–è€å¤ªå¤ªæ¥ä½¿ç”¨å®ƒä»¬\nä¸ºäº†è·å¾—è¿™ç§èƒ½åŠ›ï¼Œè¯·è€ƒè™‘è¿™ä¸ªå¾®ä¸è¶³é“çš„å®ã€‚\n(defmacro backwards [form] (reverse form)) (backwards (\u0026#34; backwards\u0026#34; \u0026#34; am\u0026#34; \u0026#34;I\u0026#34; str)) ; =\u0026gt; \u0026#34;I am backwards\u0026#34; backwardså®å…è®¸ Clojure æˆåŠŸåœ° Eval è¡¨è¾¾å¼(\u0026quot; backwards\u0026quot; \u0026quot; am\u0026quot; \u0026quot;I\u0026quot; str)ï¼Œå°½ç®¡å®ƒæ²¡æœ‰éµå¾ª Clojure çš„å†…ç½®è¯­æ³•è§„åˆ™ï¼Œè¿™äº›è§„åˆ™è¦æ±‚è¡¨è¾¾å¼çš„æ“ä½œæ•°é¦–å…ˆå‡ºç°ï¼ˆæ›´ä¸ç”¨è¯´è¡¨è¾¾å¼ä¸èƒ½æŒ‰ç›¸åé¡ºåºä¹¦å†™çš„è§„åˆ™ï¼‰ã€‚å¦‚æœæ²¡æœ‰ \u0026ldquo;å‘å\u0026rdquo;ï¼Œè¿™ä¸ªè¡¨è¾¾å¼ä¼šæ¯”å‡ åƒå¹´æ¥çš„ç‚¼é‡‘æœ¯å£«ç”¨ä»–ä»¬çš„ä¸€ç”Ÿæ¥è¿½æ±‚ä¸å¯èƒ½å®ç°çš„é•¿ç”Ÿä¸è€çš„æ–¹æ³•æ›´éš¾å¤±è´¥ã€‚æœ‰äº†`å‘å\u0026rsquo;ï¼Œ*ä½ å°±åˆ›é€ äº†ä½ è‡ªå·±çš„è¯­æ³•ï¼*ä½ æ‰©å±•äº† Clojureï¼Œè¿™æ ·ä½ å°±å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°å†™ä»£ç äº† æˆ‘å‘Šè¯‰ä½ ï¼Œè¿™æ¯”æŠŠé“…å˜æˆé‡‘å­è¦å¥½å¾—å¤š!\næœ¬ç« ä¸ºä½ æä¾›äº†ç¼–å†™è‡ªå·±çš„å®æ‰€éœ€çš„æ¦‚å¿µåŸºç¡€ï¼Œä½¿ä½ èƒ½å¤Ÿç–¯ç‹‚åœ°ç¼–å†™è‡ªå·±çš„å®ã€‚å®ƒè§£é‡Šäº† Clojure æ±‚å€¼æ¨¡å‹çš„å…ƒç´ ï¼šè¯»å–å™¨ï¼Œæ±‚å€¼å™¨ï¼Œå’Œå®æ‰©å±•å™¨ã€‚è¿™å°±åƒ Clojure å…ƒç´ çš„å‘¨æœŸè¡¨ã€‚æƒ³æƒ³å‘¨æœŸè¡¨æ˜¯å¦‚ä½•æ­ç¤ºåŸå­çš„ç‰¹æ€§çš„ï¼šåŒä¸€åˆ—çš„å…ƒç´ è¡Œä¸ºç›¸ä¼¼ï¼Œå› ä¸ºå®ƒä»¬æœ‰ç›¸åŒçš„æ ¸ç”µè·ã€‚å¦‚æœæ²¡æœ‰å…ƒç´ å‘¨æœŸè¡¨åŠå…¶åŸºç¡€ç†è®ºï¼Œæˆ‘ä»¬å°±ä¼šåƒè¿‡å»çš„ç‚¼é‡‘æœ¯å£«ä¸€æ ·ï¼Œéšæ„åœ°æŠŠä¸œè¥¿æ··åœ¨ä¸€èµ·ï¼Œçœ‹çœ‹ä»€ä¹ˆä¸œè¥¿ä¼šçˆ†ç‚¸ã€‚ä½†æ˜¯ï¼Œéšç€å¯¹å…ƒç´ çš„æ·±å…¥äº†è§£ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸ºä»€ä¹ˆä¸œè¥¿ä¼šçˆ†ç‚¸ï¼Œå¹¶å­¦ä¼šå¦‚ä½•æœ‰ç›®çš„åœ°ç‚¸æ¯ä¸œè¥¿ã€‚\nA Overview of Clojure\u0026rsquo;s Evaluation Model Clojureï¼ˆåƒæ‰€æœ‰çš„ Lispsï¼‰æœ‰ä¸€ä¸ªä¸åŒäºå¤§å¤šæ•°å…¶ä»–è¯­è¨€çš„æ±‚å€¼æ¨¡å‹ï¼šå®ƒæœ‰ä¸€ä¸ªä¸¤é˜¶æ®µçš„ç³»ç»Ÿï¼Œå®ƒè¯»æ–‡æœ¬æºä»£ç ï¼Œäº§ç”Ÿ Clojure æ•°æ®ç»“æ„ã€‚ç„¶åå¯¹è¿™äº›æ•°æ®ç»“æ„è¿›è¡Œ*æ±‚å€¼ã€‚Clojure éå†æ•°æ®ç»“æ„ï¼Œå¹¶æ ¹æ®æ•°æ®ç»“æ„çš„ç±»å‹æ‰§è¡Œå‡½æ•°åº”ç”¨æˆ– var æŸ¥æ‰¾ç­‰æ“ä½œã€‚ä¾‹å¦‚ï¼Œå½“ Clojure è¯»å–æ–‡æœ¬(+ 1 2)æ—¶ï¼Œç»“æœæ˜¯ä¸€ä¸ªåˆ—è¡¨æ•°æ®ç»“æ„ï¼Œå…¶ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ª+ç¬¦å·ï¼Œåé¢æ˜¯æ•°å­— 1 å’Œ 2ã€‚è¿™ä¸ªæ•°æ®ç»“æ„è¢«ä¼ é€’ç»™ Clojure çš„æ±‚å€¼å™¨ï¼Œæ±‚å€¼å™¨æŸ¥æ‰¾+å¯¹åº”çš„å‡½æ•°ï¼Œå¹¶å°†è¯¥å‡½æ•°åº”ç”¨äº 1 å’Œ 2ã€‚\nåœ¨æºä»£ç ã€æ•°æ®å’Œæ±‚å€¼ä¹‹é—´æœ‰è¿™ç§å…³ç³»çš„è¯­è¨€è¢«ç§°ä¸ºhomoiconicï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœä½ åœ¨æµ´å®¤çš„é•œå­å‰ç†„ç¯è¯´ä¸‰æ¬¡homoiconicï¼Œçº¦ç¿°-éº¦å¡é”¡çš„å¹½çµå°±ä¼šå‡ºç°å¹¶ç»™ä½ ä¸€ä¸ªå°æ‹¬å·ï¼‰ã€‚åŒæºè¯­è¨€ä½¿ä½ èƒ½å¤Ÿå°†ä½ çš„ä»£ç ä½œä¸ºä¸€ç»„æ•°æ®ç»“æ„è¿›è¡Œæ¨ç†ï¼Œä½ å¯ä»¥é€šè¿‡ç¨‹åºè¿›è¡Œæ“ä½œã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬åœ¨ç¼–è¯‘çš„åœŸåœ°ä¸Šèµ°ä¸€åœˆã€‚","title":"Chapter7 ç‚¼é‡‘æœ¯"},{"content":"ç»„ç»‡ä½ çš„é¡¹ç›®ï¼šä¸€ä¸ªå›¾ä¹¦ç®¡ç†å‘˜çš„æ•…äº‹ åœ¨æˆ‘ä»¬æ¯ä¸ªäººå¿ƒä¸­éƒ½ä½ç€ä¸€ä¸ªå« Melvil çš„å›¾ä¹¦ç®¡ç†å‘˜ï¼Œä¸€ä¸ªä»¥ç»„ç»‡è‰ºæœ¯ä¸ºä¹çš„å¥‡å¼‚ç”Ÿç‰©ã€‚æ—¥æ—¥å¤œå¤œï¼ŒMelvil éƒ½æ¸´æœ›ä¸ºä½ çš„ä»£ç åº“å¸¦æ¥ç§©åºã€‚å¹¸è¿çš„æ˜¯ï¼ŒClojure æä¾›äº†ä¸€å¥—å·¥å…·ï¼Œä¸“é—¨ç”¨æ¥å¸®åŠ©è¿™ä¸ªä¾å„’ä¸æ··ä¹±çš„åŠ›é‡ä¸æ–­æ–—äº‰ã€‚\nè¿™äº›å·¥å…·é€šè¿‡å°†ç›¸å…³çš„å‡½æ•°å’Œæ•°æ®åˆ†ç»„æ¥å¸®åŠ©ä½ ç»„ç»‡ä½ çš„ä»£ç ã€‚å®ƒä»¬è¿˜å¯ä»¥é˜²æ­¢åç§°å†²çªï¼Œè¿™æ ·ä½ å°±ä¸ä¼šæ„å¤–åœ°è¦†ç›–åˆ«äººçš„ä»£ç ï¼Œåä¹‹äº¦ç„¶ã€‚åœ¨è¿™ä¸ªå……æ»¡æ‚¬å¿µå’Œç¥ç§˜çš„æ•…äº‹ä¸­ï¼Œè¯·å’Œæˆ‘ä¸€èµ·å­¦ä¹ å¦‚ä½•ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œå¹¶è§£å†³ä¸€ç”Ÿä¸­çš„æŠ¢åŠ«æ¡ˆå§ åœ¨è¿™ä¸ªä¼ å¥‡æ•…äº‹çš„æœ€åï¼Œä½ å°†äº†è§£ä»¥ä¸‹å†…å®¹ã€‚\n  `def\u0026rsquo;æ˜¯åšä»€ä¹ˆçš„\n  ä»€ä¹ˆæ˜¯å‘½åç©ºé—´ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬\n  å‘½åç©ºé—´å’Œæ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„å…³ç³»\n  å¦‚ä½•ä½¿ç”¨referã€aliasã€requireã€useå’Œnsã€‚\n  å¦‚ä½•ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæ¥ç»„ç»‡ Clojure é¡¹ç›®\n  æˆ‘å…ˆæ¥ä»‹ç»ä¸€ä¸‹ Clojure çš„ç»„ç»‡ç³»ç»Ÿï¼Œå®ƒçš„å·¥ä½œåŸç†å¾ˆåƒä¸€ä¸ªåº“ã€‚Melvil å…´å¥‹åœ°é¢¤æŠ–ç€!\nä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªåº“ ç°å®ä¸–ç•Œä¸­çš„å›¾ä¹¦é¦†å­˜å‚¨å¯¹è±¡çš„é›†åˆï¼Œå¦‚ä¹¦ç±ã€æ‚å¿—å’Œ DVDã€‚ä»–ä»¬ä½¿ç”¨å¯»å€ç³»ç»Ÿï¼Œæ‰€ä»¥å½“ä½ å¾—åˆ°ä¸€ä¸ªç‰©ä½“çš„åœ°å€æ—¶ï¼Œä½ å¯ä»¥å¯¼èˆªåˆ°ç‰©ç†ç©ºé—´å¹¶æ£€ç´¢åˆ°è¯¥ç‰©ä½“ã€‚\nå½“ç„¶ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿç›´æ¥çŸ¥é“ä¸€æœ¬ä¹¦æˆ– DVD çš„åœ°å€æ˜¯ä»€ä¹ˆã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå›¾ä¹¦é¦†è¦è®°å½•ä¸€ä¸ªç‰©ä½“çš„æ ‡é¢˜å’Œå®ƒçš„åœ°å€ä¹‹é—´çš„è”ç³»ï¼Œå¹¶æä¾›å·¥å…·æ¥æœç´¢è¿™äº›è®°å½•ã€‚åœ¨è®¡ç®—æœºä¹‹å‰çš„æ—§æ—¶ä»£ï¼Œå›¾ä¹¦é¦†æä¾›å¡ç‰‡ç›®å½•ï¼Œå³è£…æ»¡çº¸è´¨å¡ç‰‡çš„æŸœå­ï¼Œå…¶ä¸­åŒ…å«æ¯æœ¬ä¹¦çš„æ ‡é¢˜ã€ä½œè€…ã€\u0026ldquo;åœ°å€\u0026rdquo;ï¼ˆæœå¨åè¿›åˆ¶æˆ–å›½ä¼šå›¾ä¹¦é¦†ç¼–å·ï¼‰å’Œå…¶ä»–ä¿¡æ¯ã€‚\nä¾‹å¦‚ï¼Œè¦æ‰¾åˆ°ã€Šè¾¾èŠ¬å¥‡å¯†ç ã€‹ï¼Œä½ å¯ä»¥ç¿»é˜…ä¹¦åç›®å½•ï¼ˆæŒ‰ä¹¦åæ’åºçš„å¡ç‰‡ï¼‰ï¼Œç›´åˆ°ä½ æ‰¾åˆ°æ­£ç¡®çš„å¡ç‰‡ã€‚åœ¨é‚£å¼ å¡ç‰‡ä¸Šï¼Œä½ ä¼šçœ‹åˆ°åœ°å€813.54ï¼ˆå¦‚æœå®ƒä½¿ç”¨æœå¨åè¿›åˆ¶ç³»ç»Ÿï¼‰ï¼Œæµè§ˆå›¾ä¹¦é¦†ï¼Œæ‰¾åˆ°è¾¾èŠ¬å¥‡å¯†ç æ‰€åœ¨çš„ä¹¦æ¶ï¼Œå¹¶å‚ä¸ä½ ä¸€ç”Ÿä¸­çš„æ–‡å­¦å’Œ/æˆ–ä»‡æ¨é˜…è¯»å†’é™©ã€‚\nåœ¨ Clojure ä¸­æƒ³è±¡ä¸€ä¸ªç±»ä¼¼çš„è®¾ç½®æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æˆ‘è®¤ä¸º Clojure æ˜¯å°†å¯¹è±¡ï¼ˆå¦‚æ•°æ®ç»“æ„å’Œå‡½æ•°ï¼‰å­˜å‚¨åœ¨ä¸€ç»„å·¨å¤§çš„ç¼–å·æ¶ä¸Šã€‚æ²¡æœ‰äººèƒ½å¤Ÿç›´æ¥çŸ¥é“ä¸€ä¸ªå¯¹è±¡è¢«å­˜å‚¨åœ¨å“ªä¸ªæ¶å­ä¸Šã€‚ç›¸åï¼Œæˆ‘ä»¬ç»™ Clojure ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå®ƒç”¨æ¥æ£€ç´¢è¯¥å¯¹è±¡ã€‚\nä¸ºäº†ä½¿ä¹‹æˆåŠŸï¼ŒClojure å¿…é¡»ç»´æŠ¤æˆ‘ä»¬çš„æ ‡è¯†ç¬¦å’Œè´§æ¶åœ°å€ä¹‹é—´çš„å…³è”ã€‚å®ƒé€šè¿‡ä½¿ç”¨namespacesæ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å‘½åç©ºé—´åŒ…å«äº†äººç±»å‹å¥½çš„ç¬¦å·å’Œä¹¦æ¶åœ°å€çš„å¼•ç”¨ä¹‹é—´çš„ Mapï¼Œè¢«ç§°ä¸ºvarsï¼Œå¾ˆåƒå¡ç‰‡ç›®å½•ã€‚\nä»æŠ€æœ¯ä¸Šè®²ï¼Œå‘½åç©ºé—´æ˜¯ \u0026ldquo;clojure.lang.Namespace \u0026ldquo;ç±»å‹çš„å¯¹è±¡ï¼Œä½ å¯ä»¥ä¸å®ƒä»¬äº’åŠ¨ï¼Œå°±åƒä½ å¯ä»¥ä¸ Clojure æ•°æ®ç»“æ„äº’åŠ¨ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨*ns*æ¥å¼•ç”¨å½“å‰çš„å‘½åç©ºé—´ï¼Œä½ å¯ä»¥ç”¨(ns-name *ns*)æ¥è·å¾—å…¶åç§°ã€‚\n(ns-name *ns*) ; =\u0026gt; user ä¾‹å¦‚ï¼Œå½“ä½ å¯åŠ¨ REPL æ—¶ï¼Œä½ åœ¨userå‘½åç©ºé—´ä¸­ï¼ˆæ­£å¦‚ä½ åœ¨è¿™é‡Œçœ‹åˆ°çš„ï¼‰ã€‚æç¤ºç¬¦æ˜¾ç¤ºå½“å‰åç§°ç©ºé—´ï¼Œä½¿ç”¨user=\u0026gt;ã€‚\nå½“å‰åå­—ç©ºé—´çš„æ¦‚å¿µæ„å‘³ç€ä½ å¯ä»¥æœ‰å¤šä¸ªåå­—ç©ºé—´ï¼Œäº‹å®ä¸Š Clojure å…è®¸ä½ åˆ›å»ºä»»æ„å¤šçš„åå­—ç©ºé—´ï¼ˆå°½ç®¡ä»æŠ€æœ¯ä¸Šè®²ï¼Œä½ å¯ä»¥åˆ›å»ºçš„åå­—æ•°é‡å¯èƒ½æœ‰ä¸€ä¸ªä¸Šé™ï¼‰ã€‚åœ¨ Clojure ç¨‹åºä¸­ï¼Œä½ æ€»æ˜¯åœ¨ä¸ªå‘½åç©ºé—´ä¸­ã€‚\nè‡³äºç¬¦å·ï¼Œä½ ä¸€ç›´åœ¨ä½¿ç”¨å®ƒä»¬ï¼Œç”šè‡³æ²¡æœ‰æ„è¯†åˆ°ã€‚ä¾‹å¦‚ï¼Œå½“ä½ å†™(map inc [1 2])æ—¶ï¼Œmapå’Œincéƒ½æ˜¯ç¬¦å·ã€‚ç¬¦å·æ˜¯ Clojure ä¸­çš„æ•°æ®ç±»å‹ï¼Œæˆ‘å°†åœ¨ä¸‹ä¸€ç« ä¸­å½»åº•è§£é‡Šå®ƒä»¬ã€‚ç°åœ¨ï¼Œä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œå½“ä½ ç»™ Clojure ä¸€ä¸ªåƒmapè¿™æ ·çš„ç¬¦å·æ—¶ï¼Œå®ƒä¼šåœ¨å½“å‰å‘½åç©ºé—´ä¸­æ‰¾åˆ°ç›¸åº”çš„ varï¼Œå¾—åˆ°ä¸€ä¸ªæ¶å­ä¸Šçš„åœ°å€ï¼Œå¹¶ä¸ºä½ ä»é‚£ä¸ªæ¶å­ä¸Šæ£€ç´¢ä¸€ä¸ªå¯¹è±¡\u0026ndash;åœ¨è¿™é‡Œï¼Œå°±æ˜¯mapæ‰€æŒ‡çš„é‚£ä¸ªå‡½æ•°ã€‚å¦‚æœä½ æƒ³åªä½¿ç”¨ç¬¦å·æœ¬èº«ï¼Œè€Œä¸æ˜¯å®ƒæ‰€æŒ‡çš„ä¸œè¥¿ï¼Œä½ å¿…é¡»å¼•ç”¨å®ƒã€‚å¼•è¿°ä»»ä½• Clojure çš„å½¢å¼å‘Šè¯‰ Clojure ä¸è¦æ±‚å€¼å®ƒï¼Œè€Œæ˜¯æŠŠå®ƒå½“ä½œæ•°æ®ã€‚æ¥ä¸‹æ¥çš„å‡ ä¸ªä¾‹å­æ˜¾ç¤ºäº†å½“ä½ å¼•ç”¨ä¸€ä¸ª Form æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚\nâŠ inc ; =\u0026gt; #\u0026lt;core$inc clojure.core$inc@30132014\u0026gt; â‹ \u0026#39;inc ; =\u0026gt; inc âŒ (map inc [1 2]) ; =\u0026gt; (2 3) â \u0026#39;(map inc [1 2]) ; =\u0026gt; (map inc [1 2]) å½“ä½ åœ¨ REPL ä¸­æ±‚å€¼ inc åœ¨ âŠ å¤„æ—¶ï¼Œå®ƒä¼šæ‰“å°å‡º inc æ‰€æŒ‡çš„å‡½æ•°çš„æ–‡æœ¬è¡¨è¿°ã€‚æ¥ä¸‹æ¥ï¼Œä½ åœ¨â‹å¼•ç”¨incï¼Œæ‰€ä»¥ç»“æœæ˜¯ç¬¦å·incã€‚ç„¶åï¼Œä½ åœ¨âŒå¤„æ±‚å€¼ä¸€ä¸ªç†Ÿæ‚‰çš„mapåº”ç”¨ç¨‹åºï¼Œå¾—åˆ°ä¸€ä¸ªç†Ÿæ‚‰çš„ç»“æœã€‚ä¹‹åï¼Œä½ åœ¨âå¤„å¼•ç”¨æ•´ä¸ªåˆ—è¡¨æ•°æ®ç»“æ„ï¼Œç»“æœæ˜¯ä¸€ä¸ªæœªæ±‚å€¼çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬mapç¬¦å·ã€incç¬¦å·å’Œä¸€ä¸ª Vectorã€‚\nç°åœ¨ä½ çŸ¥é“äº† Clojure çš„ç»„ç»‡ç³»ç»Ÿï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒã€‚\nç”¨ def å­˜å‚¨å¯¹è±¡ Clojure ä¸­ç”¨äºå­˜å‚¨å¯¹è±¡çš„ä¸»è¦å·¥å…·æ˜¯defã€‚å…¶ä»–çš„å·¥å…·ï¼Œå¦‚defnï¼Œéƒ½æ˜¯ä½¿ç”¨defã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª def çš„åº”ç”¨å®ä¾‹ã€‚\n(def great-books [\u0026#34;East of Eden\u0026#34; \u0026#34;The Glass Bead Game\u0026#34;]) ; =\u0026gt; #\u0026#39;user/great-books great-books ; =\u0026gt; [\u0026#34;East of Eden\u0026#34; \u0026#34;The Glass Bead Game\u0026#34;] è¿™æ®µä»£ç å‘Šè¯‰ Clojureã€‚\n ç”¨great-bookså’Œ var ä¹‹é—´çš„å…³è”æ›´æ–°å½“å‰å‘½åç©ºé—´çš„ Mapã€‚ æ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„å­˜å‚¨æ¶ã€‚ å°†[ã€Šä¼Šç”¸å›­ä¹‹ä¸œã€‹ã€Šç»ç’ƒç æ¸¸æˆã€‹]å­˜æ”¾åœ¨æ¶å­ä¸Šã€‚ å°†ä¹¦æ¶çš„åœ°å€å†™åœ¨ var ä¸Šã€‚ 5.è¿”å› varï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`#\u0026lsquo;user/great-books\u0026rsquo;ï¼‰ã€‚  è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºinterningä¸€ä¸ª varã€‚ ä½ å¯ä»¥ä½¿ç”¨`ns-interns\u0026rsquo;ä¸å‘½åç©ºé—´çš„ç¬¦å·åˆ°å†…å«å˜é‡çš„ Map è¿›è¡Œäº¤äº’ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•è·å¾—ä¸€ä¸ªå†…éƒ¨å˜é‡çš„ Mapã€‚\n(ns-interns *ns*) ; =\u0026gt; {great-books #\u0026#39;user/great-books}. ä½ å¯ä»¥ä½¿ç”¨`get\u0026rsquo;å‡½æ•°æ¥è·å–ä¸€ä¸ªç‰¹å®šçš„ varã€‚\n(get (ns-interns *ns*) \u0026#39; great-books) ; =\u0026gt; #\u0026#39;user/great-books é€šè¿‡æ±‚å€¼(ns-map ns),ä½ ä¹Ÿå¯ä»¥å¾—åˆ°å‘½åç©ºé—´åœ¨ç»™å®šä¸€ä¸ªç¬¦å·æ—¶ç”¨æ¥æŸ¥æ‰¾ var çš„å®Œæ•´ Mapã€‚(ns-map *ns*)ç»™ä½ ä¸€ä¸ªéå¸¸å¤§çš„ Mapï¼Œæˆ‘ä¸ä¼šåœ¨è¿™é‡Œæ‰“å°ï¼Œä½†å¯ä»¥è¯•è¯•\n#'user/great-books'æ˜¯varçš„*è¯»è€…å½¢å¼ã€‚ æˆ‘å°†åœ¨ç¬¬ä¸ƒç« è§£é‡Šæ›´å¤šå…³äºè¯»è€…å½¢å¼ã€‚ç°åœ¨ï¼Œåªéœ€çŸ¥é“ä½ å¯ä»¥ä½¿ç”¨#\u0026lsquo;\u0026lsquo;æ¥æŠ“å–ä¸åé¢çš„ç¬¦å·å¯¹åº”çš„ varï¼›#'user/great-books'è®©ä½ åœ¨user\u0026rsquo;å‘½åç©ºé—´ä¸­ä½¿ç”¨ä¸ç¬¦å·great-books'ç›¸å…³çš„varã€‚æˆ‘ä»¬å¯ä»¥deref\u0026rsquo;å˜é‡æ¥è·å¾—å®ƒä»¬æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚\n(deref #\u0026#39;user/great-books) ; =\u0026gt; [\u0026#34;East of Eden\u0026#34; \u0026#34;The Glass Bead Game\u0026#34;] è¿™å°±åƒå‘Šè¯‰ Clojureï¼Œ\u0026ldquo;ä» var ä¸­è·å–ä¹¦æ¶å·ï¼Œå»é‚£ä¸ªä¹¦æ¶å·ï¼ŒæŠ“ä½ä¸Šé¢çš„ä¸œè¥¿ï¼Œç„¶åç»™æˆ‘ï¼\u0026rdquo;\nä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ åªéœ€è¦ä½¿ç”¨ç¬¦å·ã€‚\ngreat-books ; =\u0026gt; [\u0026#34;East of Eden\u0026#34; \u0026#34;The Glass Bead Game\u0026#34;] è¿™å°±åƒå‘Šè¯‰ Clojureï¼Œ\u0026ldquo;æ£€ç´¢ä¸ great-books ç›¸å…³çš„ varï¼Œç„¶åå–æ¶ˆé‚£ä¸ªåçš„æ°å…‹é€Š\u0026rdquo;ã€‚\nåˆ°ç›®å‰ä¸ºæ­¢è¿˜ä¸é”™ï¼Œå¯¹å—ï¼Ÿå¥½å§ï¼Œè¯·åšå¥½å‡†å¤‡ï¼Œå› ä¸ºè¿™ä¸ªç”°å›­è¯—èˆ¬çš„ç»„ç»‡å¤©å ‚å³å°†è¢«é¢ è¦† ç”¨åŒæ ·çš„ç¬¦å·å†æ¬¡è°ƒç”¨defã€‚\n(def great-books [\u0026#34;The Power of Bees\u0026#34; \u0026#34;Journey to Upstairs\u0026#34;]) great-books ; =\u0026gt; [\u0026#34;The Power of Bees\u0026#34; \u0026#34;Journey to Upstairs\u0026#34;] var å·²ç»æ›´æ–°äº†æ–°çš„ Vector çš„åœ°å€ã€‚è¿™å°±åƒä½ åœ¨å¡ç‰‡ç›®å½•ä¸­çš„å¡ç‰‡ä¸Šçš„åœ°å€ç”¨äº†ç™½ç¬”ï¼Œç„¶åå†™äº†ä¸€ä¸ªæ–°åœ°å€ã€‚å…¶ç»“æœæ˜¯ï¼Œä½ ä¸èƒ½å†è¦æ±‚ Clojure æ‰¾åˆ°ç¬¬ä¸€ä¸ª Vectorã€‚è¿™è¢«ç§°ä¸ºåç§°ç¢°æ’ã€‚æ··ä¹±! æ— æ”¿åºœçŠ¶æ€!\nä½ å¯èƒ½åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ç»å†è¿‡è¿™ç§æƒ…å†µã€‚JavaScript åœ¨è¿™æ–¹é¢æ˜¯è‡­åæ˜­è‘—çš„ï¼Œå®ƒä¹Ÿå‘ç”Ÿåœ¨ Ruby ä¸­ã€‚è¿™æ˜¯ä¸ªé—®é¢˜ï¼Œå› ä¸ºä½ å¯èƒ½æ— æ„ä¸­è¦†ç›–äº†ä½ è‡ªå·±çš„ä»£ç ï¼Œè€Œä¸”ä½ ä¹Ÿä¸èƒ½ä¿è¯ç¬¬ä¸‰æ–¹åº“ä¸ä¼šè¦†ç›–ä½ çš„ä»£ç ã€‚Melvil æƒŠæåœ°é€€ç¼©äº†! å¹¸è¿çš„æ˜¯ï¼ŒClojure å…è®¸ä½ åˆ›å»ºä»»æ„å¤šçš„å‘½åç©ºé—´ï¼Œè¿™æ ·ä½ å°±å¯ä»¥é¿å…è¿™äº›ç¢°æ’ã€‚\nåˆ›å»ºå’Œåˆ‡æ¢åˆ°å‘½åç©ºé—´ Clojure æœ‰ä¸‰ç§åˆ›å»ºå‘½åç©ºé—´çš„å·¥å…·ï¼šå‡½æ•°create-nsï¼Œå‡½æ•°in-nsï¼Œä»¥åŠå®nsã€‚ä½ å°†åœ¨ä½ çš„ Clojure æ–‡ä»¶ä¸­ä¸»è¦ä½¿ç”¨nså®ï¼Œä½†æˆ‘å°†æ¨è¿Ÿå‡ é¡µæ¥è§£é‡Šå®ƒï¼Œå› ä¸ºå®ƒç»“åˆäº†è®¸å¤šå·¥å…·ï¼Œè€Œä¸”åœ¨æˆ‘è®¨è®ºå…¶ä»–å·¥å…·ä¹‹åï¼Œå®ƒæ›´å®¹æ˜“ç†è§£ã€‚\ncreate-nsæ¥æ”¶ä¸€ä¸ªç¬¦å·ï¼Œå¦‚æœå®ƒä¸å­˜åœ¨ï¼Œå°±ç”¨è¿™ä¸ªåå­—åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œå¹¶è¿”å›è¿™ä¸ªå‘½åç©ºé—´ã€‚\nuser=\u0026gt; (create-ns \u0026#39;cheese.taxonomy) ; =\u0026gt; #\u0026lt;Namespace cheese.taxonomy\u0026gt; ä½ å¯ä»¥ä½¿ç”¨è¿”å›çš„åå­—ç©ºé—´ä½œä¸ºå‡½æ•°è°ƒç”¨çš„å‚æ•°ã€‚\nuser=\u0026gt; (ns-name (create-ns \u0026#39;cheese.taxonomy)) ; =\u0026gt; cheese-taxonomy åœ¨å®è·µä¸­ï¼Œä½ å¯èƒ½æ°¸è¿œä¸ä¼šåœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨create-nsï¼Œå› ä¸ºåˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´è€Œä¸ç§»å…¥å®ƒå¹¶ä¸æ˜¯éå¸¸æœ‰ç”¨ã€‚ä½¿ç”¨in-nsæ›´å¸¸è§ï¼Œå› ä¸ºå¦‚æœå‘½åç©ºé—´ä¸å­˜åœ¨ï¼Œå®ƒä¼šåˆ›å»ºå‘½åç©ºé—´ï¼Œå¹¶**åˆ‡æ¢åˆ°å®ƒï¼Œå¦‚æ¸…å• 6-1 æ‰€ç¤ºã€‚\nuser=\u0026gt; (in-ns \u0026#39;cheese.analysis) ; =\u0026gt; #\u0026lt;Namespace cheese.analysis\u0026gt;  6-1. ä½¿ç”¨ in-ns åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´å¹¶åˆ‡æ¢åˆ°è¯¥ç©ºé—´  æ³¨æ„ä½ çš„ REPL æç¤ºç¬¦ç°åœ¨æ˜¯cheese.analysis\u0026gt;ï¼Œè¡¨æ˜ä½ ç¡®å®åœ¨ä½ åˆšåˆšåˆ›å»ºçš„æ–°å‘½åç©ºé—´ä¸­ã€‚ç°åœ¨å½“ä½ ä½¿ç”¨defæ—¶ï¼Œå®ƒå°†åœ¨cheese.analysiså‘½åç©ºé—´ä¸­å­˜å‚¨å‘½åå¯¹è±¡ã€‚\nä½†æ˜¯å¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–å‘½åç©ºé—´çš„å‡½æ•°å’Œæ•°æ®æ€ä¹ˆåŠï¼Ÿè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå®Œå…¨åˆæ ¼çš„ç¬¦å·ã€‚ä¸€èˆ¬çš„å½¢å¼æ˜¯ namespace/nameã€‚\ncheese.analysis=\u0026gt; (in-ns \u0026#39;cheese.taxonomy) cheese.taxonomy=\u0026gt; (def cheddars [\u0026#34;mild\u0026#34; \u0026#34;medium\u0026#34; \u0026#34;strong\u0026#34; \u0026#34;sharp\u0026#34; \u0026#34;extra sharp\u0026#34;]) cheese.taxonomy=\u0026gt; (in-ns \u0026#39;cheese.analysis) cheese.analysis=\u0026gt; cheddars ; =\u0026gt; Exception: Unable to resolve symbol: cheddars in this context è¿™åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ï¼Œcheese.taxonomyï¼Œåœ¨è¯¥å‘½åç©ºé—´ä¸­å®šä¹‰äº†cheddarsï¼Œç„¶ååˆ‡æ¢å›cheese.analysiså‘½åç©ºé—´ã€‚å¦‚æœä½ è¯•å›¾åœ¨cheese.analysisä¸­å¼•ç”¨cheese.taxonomyå‘½åç©ºé—´çš„cheddarsï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯ä½¿ç”¨å®Œå…¨åˆæ ¼çš„ç¬¦å·å¯ä»¥ã€‚\ncheese.analysis=\u0026gt; cheese.taxonomy/cheddars ; =\u0026gt; [\u0026#34;mild\u0026#34; \u0026#34;medium\u0026#34; \u0026#34;strong\u0026#34; \u0026#34;sharp\u0026#34; \u0026#34;extra sharp\u0026#34;] è¾“å…¥è¿™äº›å®Œå…¨åˆæ ¼çš„ç¬¦å·å¾ˆå¿«å°±ä¼šæˆä¸ºä¸€ç§å›°æ‰°ã€‚Â æ¯”å¦‚è¯´ï¼Œæˆ‘æ˜¯ä¸€ä¸ªæä¸è€çƒ¦çš„å­¦è€…ï¼Œä¸“é—¨ç ”ç©¶ç¬¦å·å­¦-au-fromageï¼Œæˆ–è€…ç ”ç©¶ä¸å¥¶é…ªæœ‰å…³çš„ç¬¦å·ã€‚\nçªç„¶é—´ï¼Œå¯èƒ½å‘ç”Ÿçš„æœ€ç³Ÿç³•çš„äº‹æƒ…å‘ç”Ÿäº†ï¼åœ¨å…¨ä¸–ç•ŒèŒƒå›´å†…ï¼Œç¥åœ£çš„å’Œæœ‰å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…éƒ½å‘ç”Ÿäº†ã€‚åœ¨ä¸–ç•Œå„åœ°ï¼Œç¥åœ£çš„ã€å…·æœ‰å†å²æ„ä¹‰çš„å¥¶é…ªéƒ½å¤±è¸ªäº†ã€‚å¨æ–¯åº·æ˜Ÿå·çš„æ ‡å‡†åˆ‡è¾¾å¹²é…ªï¼šä¸è§äº†! å›¾å¦å¡è’™çš„å¤§å¥¶é…ªç½ï¼šè¢«å·äº†! éƒ½çµå¥¶é…ªï¼šè¢«éª—å–çš„å¥¶é…ªæ‰€å–ä»£! è¿™æœ‰å¯èƒ½ä½¿ä¸–ç•Œå› æŸç§åŸå› è€Œé™·å…¥å®Œå…¨çš„æ··ä¹±! è‡ªç„¶ï¼Œä½œä¸ºä¸€ä¸ªæ°å‡ºçš„å¥¶é…ªç ”ç©¶è€…ï¼Œæˆ‘æœ‰è´£ä»»è§£å¼€è¿™ä¸ªè°œå›¢ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘æ­£è¢«å…‰æ˜ä¼šã€å…±æµä¼šå’Œè¶³éƒ¨æ—è¿½æ•ï¼å› ä¸ºæˆ‘æ˜¯ä¸€åå­¦è€…ï¼Œæ‰€ä»¥æˆ‘å¿…é¡»ä¸ºä»–ä»¬æä¾›å¸®åŠ©ã€‚\nå› ä¸ºæˆ‘æ˜¯ä¸€ä¸ªå­¦è€…ï¼Œæˆ‘è¯•å›¾ç”¨æˆ‘çŸ¥é“çš„æœ€å¥½çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªè°œå›¢\u0026ndash;å»å›¾ä¹¦é¦†ç ”ç©¶è¿™ä¸ªç‹—å±ã€‚æˆ‘å¯é çš„åŠ©æ‰‹ Clojure é™ªç€æˆ‘ã€‚å½“æˆ‘ä»¬ä»ä¸€ä¸ªåå­—ç©ºé—´åˆ°å¦ä¸€ä¸ªåå­—ç©ºé—´å¿™å¿™ç¢Œç¢Œæ—¶ï¼Œæˆ‘å–Šç€è®© Clojure æŠŠä¸€ä¸ªåˆä¸€ä¸ªä¸œè¥¿äº¤ç»™æˆ‘ã€‚\nä½† Clojure æœ‰ç‚¹ç¬¨ï¼Œå¾ˆéš¾å¼„æ¸…æ¥šæˆ‘æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚åœ¨userå‘½åç©ºé—´ä¸­ï¼Œæˆ‘å¤§å£°è¯´ï¼š\u0026quot;join! ç»™æˆ‘join'ï¼\u0026quot;--æˆ‘å˜´é‡Œçš„å”¾æ²«æ˜Ÿå­é£äº†å‡ºæ¥ã€‚\u0026quot;RuntimeException: Unable to resolve symbol: join,\u0026quot; ClojureæŠ±æ€¨ç€å›åº”ã€‚\u0026quot;çœ‹åœ¨å¸ƒé‡Œçš„ä»½ä¸Šï¼ŒæŠŠclojure.string/join`äº¤ç»™æˆ‘å§ï¼\u0026rdquo; æˆ‘åé©³é“ï¼ŒClojure å°½èŒå°½è´£åœ°æŠŠæˆ‘è¦æ‰¾çš„å‡½æ•°äº¤ç»™æˆ‘ã€‚\næˆ‘çš„å£°éŸ³å˜å¾—æ²™å“‘äº†ã€‚æˆ‘éœ€è¦ä¸€äº›æ–¹æ³•æ¥å‘Šè¯‰ Clojure è¦ç»™æˆ‘ä»€ä¹ˆå¯¹è±¡ï¼Œè€Œä¸å¿…æ¯æ¬¡éƒ½ä½¿ç”¨å®Œå…¨åˆæ ¼çš„ç¬¦å·ã€‚\nå¹¸è¿çš„æ˜¯ï¼ŒClojure æä¾›äº† \u0026ldquo;refer \u0026ldquo;å’Œ \u0026ldquo;alias \u0026ldquo;å·¥å…·ï¼Œè®©æˆ‘å¯ä»¥æ›´ç®€æ´åœ°å¯¹å®ƒå¼å«ã€‚\nå¼•ç”¨ referä½¿ä½ èƒ½å¤Ÿç²¾ç»†åœ°æ§åˆ¶ä½ å¦‚ä½•å¼•ç”¨å…¶ä»–å‘½åç©ºé—´çš„å¯¹è±¡ã€‚å¯åŠ¨ä¸€ä¸ªæ–°çš„ REPL ä¼šè¯å¹¶å°è¯•ä»¥ä¸‹æ“ä½œã€‚è¯·è®°ä½ï¼Œåœ¨ REPL ä¸­è¿™æ ·ç©å‘½åç©ºé—´æ˜¯å¯ä»¥çš„ï¼Œä½†ä½ ä¸å¸Œæœ›ä½ çš„ Clojure æ–‡ä»¶çœ‹èµ·æ¥åƒè¿™æ ·ï¼›æ­£ç¡®çš„æ–‡ä»¶ç»“æ„æ–¹å¼åœ¨\u0026ldquo;çœŸæ­£çš„é¡¹ç›®ç»„ç»‡ \u0026ldquo;ç¬¬ 133 é¡µä¸­æ¶‰åŠã€‚\nuser=\u0026gt; (in-ns \u0026#39;cheese.taxonomy) cheese.taxonomy=\u0026gt; (def cheddars [\u0026#34;mild\u0026#34; \u0026#34;medium\u0026#34; \u0026#34;strong\u0026#34; \u0026#34;sharp\u0026#34; \u0026#34;extra sharp\u0026#34;]) cheese.taxonomy=\u0026gt; (def bries [\u0026#34;Wisconsin\u0026#34; \u0026#34;Somerset\u0026#34; \u0026#34;Brie de Meaux\u0026#34; \u0026#34;Brie de Melun\u0026#34;]) cheese.taxonomy=\u0026gt; (in-ns \u0026#39;cheese.analysis) cheese.analysis=\u0026gt; (clojure.core/refer \u0026#39;cheese.taxonomy) cheese.analysis=\u0026gt; bries ; =\u0026gt; [\u0026#34;Wisconsin\u0026#34; \u0026#34;Somerset\u0026#34; \u0026#34;Brie de Meaux\u0026#34; \u0026#34;Brie de Melun\u0026#34;] cheese.analysis=\u0026gt; cheddars ; =\u0026gt; [\u0026#34;mild\u0026#34; \u0026#34;medium\u0026#34; \u0026#34;strong\u0026#34; \u0026#34;sharp\u0026#34; \u0026#34;extra sharp\u0026#34;] è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ª \u0026ldquo;cheese.taxonomy \u0026ldquo;å‘½åç©ºé—´å’Œå…¶ä¸­çš„ä¸¤ä¸ª Vectorã€‚Â cheddarså’Œbriesã€‚ç„¶åå®ƒåˆ›å»ºå¹¶ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ï¼Œç§°ä¸ºcheese.analysisã€‚ç”¨å‘½åç©ºé—´çš„ç¬¦å·è°ƒç”¨referå¯ä»¥è®©ä½ å¼•ç”¨ç›¸åº”çš„å‘½åç©ºé—´çš„å¯¹è±¡ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å®Œå…¨é™å®šçš„ç¬¦å·ã€‚å®ƒé€šè¿‡æ›´æ–°å½“å‰å‘½åç©ºé—´çš„ç¬¦å·/å¯¹è±¡ Map æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚ä½ å¯ä»¥çœ‹åˆ°åƒè¿™æ ·çš„æ–°æ¡ç›®ã€‚\ncheese.analysis=\u0026gt; (clojure.core/get (clojure.core/ns-map clojure.core/*ns*) \u0026#39;bries) ; =\u0026gt; #\u0026#39;cheese.taxonomy/bries cheese.analysis=\u0026gt; (clojure.core/get (clojure.core/ns-map clojure.core/*ns*) \u0026#39;cheddars) ; =\u0026gt; #\u0026#39;cheese.taxonomy/cheddars è¿™å°±å¥½åƒ Clojure\n åœ¨cheese.taxonomyå‘½åç©ºé—´ä¸Šè°ƒç”¨ns-internsã€‚ å°†å…¶ä¸å½“å‰å‘½åç©ºé—´çš„ns-mapåˆå¹¶ã€‚ å°†ç»“æœä½œä¸ºå½“å‰å‘½åç©ºé—´çš„æ–°çš„`ns-map\u0026rsquo;ã€‚  å½“ä½ è°ƒç”¨referæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿‡æ»¤å™¨:only, :exclude, å’Œ:renameä¼ é€’ç»™å®ƒã€‚æ­£å¦‚åå­—æ‰€æš—ç¤ºçš„ï¼Œ:onlyå’Œ:excludeé™åˆ¶äº†å“ªäº›ç¬¦å·/å˜é‡ Map è¢«åˆå¹¶åˆ°å½“å‰å‘½åç©ºé—´çš„ns-mapã€‚Â :renameå…è®¸ä½ ä½¿ç”¨ä¸åŒçš„ç¬¦å·æ¥è¡¨ç¤ºè¢«åˆå¹¶çš„å˜é‡ã€‚å¦‚æœæˆ‘ä»¬å°†å‰é¢çš„ä¾‹å­ä¿®æ”¹ä¸ºä½¿ç”¨:onlyï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µã€‚\ncheese.analysis=\u0026gt; (clojure.core/refer \u0026#39;cheese.taxonomy :only [\u0026#39;bries]) cheese.analysis=\u0026gt; bries ; =\u0026gt; [\u0026#34;Wisconsin\u0026#34; \u0026#34;Somerset\u0026#34; \u0026#34;Brie de Meaux\u0026#34; \u0026#34;Brie de Melun\u0026#34;] cheese.analysis=\u0026gt; cheddars ; =\u0026gt; RuntimeException: æ— æ³•è§£å†³ç¬¦å·ï¼šcheddars ä¸‹é¢æ˜¯:excludeçš„æ“ä½œã€‚\ncheese.analysis=\u0026gt; (clojure.core/refer \u0026#39;cheese.taxonomy :only [\u0026#39;bries]) cheese.analysis=\u0026gt; bries ; =\u0026gt; [\u0026#34;Wisconsin\u0026#34; \u0026#34;Somerset\u0026#34; \u0026#34;Brie de Meaux\u0026#34; \u0026#34;Brie de Melun\u0026#34;] cheese.analysis=\u0026gt; cheddars ; =\u0026gt; RuntimeException: Unable to resolve symbol: cheddars æœ€åï¼Œä¸€ä¸ª:renameçš„ä¾‹å­ã€‚\ncheese.analysis=\u0026gt; (clojure.core/refer \u0026#39;cheese.taxonomy :rename {\u0026#39;bries \u0026#39;yummy-bries}) cheese.analysis=\u0026gt; bries ; =\u0026gt; RuntimeException: Unable to resolve symbol: bries cheese.analysis=\u0026gt; yummy-bries ; =\u0026gt; [\u0026#34;Wisconsin\u0026#34; \u0026#34;Somerset\u0026#34; \u0026#34;Brie de Meaux\u0026#34; \u0026#34;Brie de Melun\u0026#34;] æ³¨æ„ï¼Œåœ¨è¿™äº›æœ€åçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨clojure.coreä¸­æ‰€æœ‰å¯¹è±¡çš„å®Œå…¨åˆæ ¼åç§°ï¼Œå¦‚clojure.core/ns-mapå’Œclojure.core/referã€‚æˆ‘ä»¬ä¸éœ€è¦åœ¨userå‘½åç©ºé—´ä¸­è¿™æ ·åšã€‚è¿™æ˜¯å› ä¸º REPL åœ¨userå‘½åç©ºé—´ä¸­è‡ªåŠ¨å¼•ç”¨clojure.coreã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åç©ºé—´æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡æ±‚å€¼(clojure.core/refer-clojure)æ¥ç®€åŒ–ä½ çš„ç”Ÿæ´»ï¼›è¿™å°†å¼•ç”¨ clojure.core å‘½åç©ºé—´ï¼Œä»ç°åœ¨èµ·æˆ‘å°†ä½¿ç”¨å®ƒã€‚åœ¨ä¾‹å­ä¸­ä½ ä¸ä¼šçœ‹åˆ°clojure.core/referï¼Œè€Œåªä¼šçœ‹åˆ°referã€‚\nå¦ä¸€ä»¶éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œä½ å¯ä»¥å®Œå…¨è‡ªç”±åœ°ç»„ç»‡ä½ çš„å‡½æ•°å’Œæ•°æ®ï¼Œè·¨è¶Šå‘½åç©ºé—´ã€‚è¿™è®©ä½ å¯ä»¥åˆç†åœ°å°†ç›¸å…³çš„å‡½æ•°å’Œæ•°æ®å½’å…¥åŒä¸€å‘½åç©ºé—´ã€‚\næœ‰æ—¶ä½ å¯èƒ½å¸Œæœ›ä¸€ä¸ªå‡½æ•°åªå¯¹åŒä¸€å‘½åç©ºé—´å†…çš„å…¶ä»–å‡½æ•°æœ‰æ•ˆã€‚Clojure å…è®¸ä½ ä½¿ç”¨defn-æ¥å®šä¹‰ç§æœ‰çš„å‡½æ•°ã€‚\n(in-ns \u0026#39;cheese.analysis) ;; Notice the dash after \u0026#34;defn\u0026#34; (defn- private-function \u0026#34;Just an example function that does nothing\u0026#34; []) å¦‚æœä½ è¯•å›¾ä»å…¶ä»–å‘½åç©ºé—´è°ƒç”¨è¿™ä¸ªå‡½æ•°æˆ–å¼•ç”¨å®ƒï¼ŒClojure å°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ä½ å¯ä»¥åœ¨æ±‚å€¼âŠå’Œâ‹çš„ä»£ç æ—¶çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚\ncheese.analysis=\u0026gt; (in-ns \u0026#39;cheese.taxonomy) cheese.taxonomy=\u0026gt; (clojure.core/refer-clojure) âŠ cheese.taxonomy=\u0026gt; (cheese.analysis/private-function) â‹ cheese.taxonomy=\u0026gt; (refer \u0026#39;cheese.analysis :only [\u0026#39;private-function]) æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå³ä½¿ä½ æ˜ç¡®åœ° \u0026ldquo;å¼•ç”¨ \u0026ldquo;è¿™ä¸ªå‡½æ•°ï¼Œä½ ä¹Ÿä¸èƒ½ä½¿ç”¨å…¶ä»–å‘½åç©ºé—´çš„å‡½æ•°ï¼Œå› ä¸ºä½ æŠŠå®ƒå˜æˆäº†ç§æœ‰çš„ã€‚(å¦‚æœä½ æƒ³ç‹¡çŒ¾ä¸€ç‚¹ï¼Œä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ç¥ç§˜çš„è¯­æ³•`@#\u0026lsquo;some/private-var\u0026rsquo;æ¥è®¿é—®ç§æœ‰å˜é‡ï¼Œä½†ä½ å¾ˆå°‘æƒ³è¿™æ ·åš)ã€‚\nalias ä¸referç›¸æ¯”ï¼Œaliasç›¸å¯¹ç®€å•ã€‚å®ƒæ‰€åšçš„åªæ˜¯è®©ä½ ç¼©çŸ­ä¸€ä¸ªå‘½åç©ºé—´çš„åç§°ï¼Œä»¥ä¾¿ä½¿ç”¨å®Œå…¨åˆæ ¼çš„ç¬¦å·ã€‚\ncheese.analysis=\u0026gt; (clojure.core/alias \u0026#39;taxonomy \u0026#39;cheese.taxonomy) cheese.analysis=\u0026gt; taxonomy/bries ; =\u0026gt; [\u0026#34;Wisconsin\u0026#34; \u0026#34;Somerset\u0026#34; \u0026#34;Brie de Meaux\u0026#34; \u0026#34;Brie de Melun\u0026#34;] è¿™æ®µä»£ç è®©æˆ‘ä»¬ä½¿ç”¨æ¥è‡ªcheese.taxonomyå‘½åç©ºé—´çš„è°ƒç”¨ç¬¦å·ï¼Œå¹¶ä½¿ç”¨è¾ƒçŸ­çš„åˆ«åtaxonomyã€‚\nreferå’Œaliasæ˜¯ä½ å¼•ç”¨å½“å‰å‘½åç©ºé—´ä»¥å¤–çš„å¯¹è±¡çš„ä¸¤ä¸ªåŸºæœ¬å·¥å…·! å®ƒä»¬æ˜¯ REPL å¼€å‘çš„å¥½å¸®æ‰‹ã€‚\nç„¶è€Œï¼Œä½ ä¸å¯èƒ½åœ¨ REPL ä¸­åˆ›å»ºæ•´ä¸ªç¨‹åºã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ï¼Œä»¥ç»„ç»‡ä¸€ä¸ªçœŸæ­£çš„é¡¹ç›®ï¼Œä½¿æºä»£ç åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ç”Ÿå­˜ã€‚\nçœŸæ­£çš„é¡¹ç›®ç»„ç»‡ ç°åœ¨æˆ‘å·²ç»ä»‹ç»äº† Clojure ç»„ç»‡ç³»ç»Ÿçš„æ„å»ºæ¨¡å—ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨å®ƒä»¬ã€‚æˆ‘å°†è®¨è®ºæ–‡ä»¶è·¯å¾„å’Œå‘½åç©ºé—´åç§°ä¹‹é—´çš„å…³ç³»ï¼Œè§£é‡Šå¦‚ä½•ç”¨requireå’ŒuseåŠ è½½æ–‡ä»¶ï¼Œå¹¶å±•ç¤ºå¦‚ä½•ä½¿ç”¨nsæ¥è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´ã€‚\næ–‡ä»¶è·¯å¾„å’Œå‘½åç©ºé—´åç§°ä¹‹é—´çš„å…³ç³» ä¸ºäº†ä¸€çŸ³äºŒé¸Ÿï¼ˆæˆ–è€…ç”¨ä¸€é¢—ç§å­å–‚å…»ä¸¤åªé¸Ÿï¼Œè¿™å–å†³äºä½ æ˜¯å¤šä¹ˆçš„å¬‰çš®å£«ï¼‰ï¼Œæˆ‘å°†ä»‹ç»æ›´å¤šå…³äºå‘½åç©ºé—´çš„å†…å®¹ï¼ŒåŒæ—¶æˆ‘ä»¬å°†é€šè¿‡ç»˜åˆ¶å›½é™…å¥¶é…ªå¤§ç›—çš„æŠ¢åŠ«åœ°ç‚¹æ¥æŠ“æ•è¿™ä¸ªè®¨åŒçš„å¤§ç›—ã€‚è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚\nlein new app the-divine-cheese-code è¿™åº”è¯¥åˆ›å»ºä¸€ä¸ªç›®å½•ç»“æ„ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ã€‚\n| .gitignore | doc | | intro.md | project.clj | README.md | resources | src | | the_divine_cheese_code | | | core.clj | test | | the_divine_cheese_code | | | core_test.clj ç°åœ¨ï¼Œæ‰“å¼€src/the_divine_cheese_code/core.cljã€‚ä½ åº”è¯¥åœ¨ç¬¬ä¸€è¡Œçœ‹åˆ°è¿™ä¸ªã€‚\n(ns the-divine-cheese-code.core (:gen-class)) nsæ˜¯åœ¨ Clojure ä¸­åˆ›å»ºå’Œç®¡ç†å‘½åç©ºé—´çš„ä¸»è¦æ–¹å¼ã€‚æˆ‘å¾ˆå¿«å°±ä¼šå¯¹å®ƒè¿›è¡Œå…¨é¢çš„è§£é‡Šã€‚ä¸è¿‡ç°åœ¨ï¼Œåªéœ€çŸ¥é“è¿™ä¸€è¡Œä¸æˆ‘ä»¬åœ¨æ¸…å• 6-1 ä¸­ä½¿ç”¨çš„in-nså‡½æ•°éå¸¸ç›¸ä¼¼ã€‚å¦‚æœä¸€ä¸ªå‘½åç©ºé—´ä¸å­˜åœ¨ï¼Œå®ƒå°±åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œç„¶ååˆ‡æ¢åˆ°å®ƒã€‚æˆ‘åœ¨ç¬¬ 12 ç« ä¹Ÿè¯¦ç»†ä»‹ç»äº†(:gen-class)ã€‚\nå‘½åç©ºé—´çš„åå­—æ˜¯the-divine-cheese-code.coreã€‚åœ¨ Clojure ä¸­ï¼Œå‘½åç©ºé—´çš„åç§°å’Œå£°æ˜å‘½åç©ºé—´çš„æ–‡ä»¶è·¯å¾„ä¹‹é—´æœ‰ä¸€ä¸ªä¸€å¯¹ä¸€çš„ Mapï¼Œæ ¹æ®ä»¥ä¸‹çº¦å®šã€‚\n å½“ä½ ç”¨leinåˆ›å»ºä¸€ä¸ªç›®å½•æ—¶ï¼ˆå°±åƒä½ åœ¨è¿™é‡Œåšçš„é‚£æ ·ï¼‰ï¼Œæºä»£ç çš„æ ¹é»˜è®¤ä¸ºsrcã€‚ åç§°ç©ºé—´ä¸­çš„ç ´æŠ˜å·å¯¹åº”äºæ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸‹åˆ’çº¿ã€‚æ‰€ä»¥the-divine-cheese-codeåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è¢« Map ä¸ºthe_divine_cheese_codeã€‚ å‘½åç©ºé—´åç§°ä¸­çš„å¥å·ï¼ˆ.ï¼‰å‰é¢çš„æˆåˆ†å¯¹åº”äºä¸€ä¸ªç›®å½•ã€‚ä¾‹å¦‚ï¼Œç”±äºthe-divine-cheese-code.coreæ˜¯å‘½åç©ºé—´çš„åç§°ï¼Œthe_divine_cheese_codeæ˜¯ä¸€ä¸ªç›®å½•ã€‚ å‘½åç©ºé—´çš„æœ€åä¸€ä¸ªç»„æˆéƒ¨åˆ†å¯¹åº”äºæ‰©å±•åä¸º*.cljçš„æ–‡ä»¶ï¼›coreè¢« Map åˆ°core.clj*ã€‚  ä½ çš„é¡¹ç›®å°†æœ‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œthe-divine-cheese-code.visualization.svgã€‚ç°åœ¨ç»§ç»­ä¸ºå®ƒåˆ›å»ºæ–‡ä»¶ã€‚\nmkdir src/the_divine_cheese_code/visualization touch src/the_divine_cheese_code/visualization/svg.clj æ³¨æ„ï¼Œæ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„éµå¾ªè¿™äº›æƒ¯ä¾‹ã€‚æœ‰äº†å‘½åç©ºé—´å’Œæ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹requireå’Œuseã€‚\nè¦æ±‚å’Œä½¿ç”¨å‘½åç©ºé—´ åœ¨the-divine-cheese-code.coreå‘½åç©ºé—´çš„ä»£ç å°†ä½¿ç”¨the-divine-cheese-code.visualization.svgå‘½åç©ºé—´çš„å‡½æ•°æ¥åˆ›å»º SVG æ ‡è®°ã€‚ä¸ºäº†ä½¿ç”¨svgçš„å‡½æ•°ï¼Œcoreå°†ä¸å¾—ä¸è¦æ±‚å®ƒã€‚ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨svg.clj*ä¸­æ·»åŠ ä¸€äº›ä»£ç ã€‚è®©å®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼ˆä½ ä»¥åä¼šæ·»åŠ æ›´å¤šï¼‰ã€‚\n(ns the-divine-cheese-code.visualization.svg) (defn latlng-\u0026gt;point \u0026#34;Convert lat/lng map to comma-separated string\u0026#34; [latlng] (str (:lat latlng) \u0026#34;,\u0026#34; (:lng latlng))) (defn points [locations] (clojure.string/join \u0026#34; \u0026#34; (map latlng-\u0026gt;point locations))) è¿™å®šä¹‰äº†ä¸¤ä¸ªå‡½æ•°ï¼Œlatlng-\u0026gt;pointå’Œpointsï¼Œä½ å°†ç”¨å®ƒä»¬æ¥æŠŠä¸€ä¸²ç»çº¬åº¦åæ ‡è½¬æ¢æˆä¸€ä¸²ç‚¹ã€‚Â è¦ä½¿ç”¨core.cljæ–‡ä»¶ä¸­çš„è¿™æ®µä»£ç ï¼Œä½ å¿…é¡»requireå®ƒã€‚requireæ¥æ”¶ä¸€ä¸ªæŒ‡å®šå‘½åç©ºé—´çš„ç¬¦å·ï¼Œå¹¶ç¡®ä¿è¯¥å‘½åç©ºé—´å­˜åœ¨å¹¶å‡†å¤‡ä½¿ç”¨ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“ä½ è°ƒç”¨(require 'the-divine-cheese-code.visualization.svg)ï¼ŒClojureè¯»å–å¹¶æ±‚å€¼ç›¸åº”çš„æ–‡ä»¶ã€‚é€šè¿‡æ±‚å€¼è¯¥æ–‡ä»¶ï¼Œå®ƒåˆ›å»ºäº†the-divine-cheese-code.visualization.svgå‘½åç©ºé—´ï¼Œå¹¶åœ¨è¯¥å‘½åç©ºé—´ä¸­å®šä¹‰äº†å‡½æ•°latlng-\u0026gt;pointå’Œpoints`ã€‚å³ä½¿æ–‡ä»¶svg.cljåœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸­ï¼ŒClojure åœ¨è¿è¡Œä½ çš„é¡¹ç›®æ—¶ä¹Ÿä¸ä¼šè‡ªåŠ¨æ±‚å€¼å®ƒï¼›ä½ å¿…é¡»æ˜ç¡®å‘Šè¯‰ Clojure ä½ æƒ³ä½¿ç”¨å®ƒã€‚\nåœ¨è¦æ±‚å‘½åç©ºé—´ä¹‹åï¼Œä½ å¯ä»¥å‚è€ƒå®ƒï¼Œè¿™æ ·ä½ å°±ä¸å¿…ä½¿ç”¨å®Œå…¨åˆæ ¼çš„åç§°æ¥å¼•ç”¨å‡½æ•°ã€‚ç»§ç»­è¦æ±‚the-divine-cheese-code.visualization.svgï¼Œå¹¶æ·»åŠ heistsåºåˆ—ï¼Œä½¿core.cljä¸åˆ—è¡¨ç›¸ç¬¦ã€‚\n(ns the-divine-cheese-code.core) ;; Ensure that the SVG code is evaluated (require \u0026#39;the-divine-cheese-code.visualization.svg) ;; Refer the namespace so that you don\u0026#39;t have to use the ;; fully qualified name to reference svg functions (refer \u0026#39;the-divine-cheese-code.visualization.svg) (def heists [{:location \u0026#34;Cologne, Germany\u0026#34; :cheese-name \u0026#34;Archbishop Hildebold\u0026#39;s Cheese Pretzel\u0026#34; :lat 50.95 :lng 6.97} {:location \u0026#34;Zurich, Switzerland\u0026#34; :cheese-name \u0026#34;The Standard Emmental\u0026#34; :lat 47.37 :lng 8.55} {:location \u0026#34;Marseille, France\u0026#34; :cheese-name \u0026#34;Le Fromage de Cosquer\u0026#34; :lat 43.30 :lng 5.37} {:location \u0026#34;Zurich, Switzerland\u0026#34; :cheese-name \u0026#34;The Lesser Emmental\u0026#34; :lat 47.37 :lng 8.55} {:location \u0026#34;Vatican City\u0026#34; :cheese-name \u0026#34;The Cheese of Turin\u0026#34; :lat 41.90 :lng 12.45}]) (defn -main [\u0026amp; args] (println (points heists))) ç°åœ¨ä½ æœ‰ä¸€è¿ä¸²çš„ heist ä½ç½®å¯ä»¥ä½¿ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨visualization.svgå‘½åç©ºé—´çš„å‡½æ•°ã€‚mainå‡½æ•°åªæ˜¯å°†pointså‡½æ•°åº”ç”¨äºheistsã€‚å¦‚æœä½ ç”¨lein runè¿è¡Œè¯¥é¡¹ç›®ï¼Œä½ åº”è¯¥çœ‹åˆ°è¿™ä¸ªã€‚\n50.95,6.97 47.37,8.55 43.3,5.37 47.37,8.55 41.9,12.45 ä¸‡å²! ä½ ç¦»æŠ“åˆ°é‚£ä¸ªå·çªƒå‘é…µä¹³çš„äººåˆè¿‘äº†ä¸€æ­¥! ä½¿ç”¨requireæˆåŠŸåŠ è½½äº†the-divine-cheese-code.visualization.svgä»¥ä¾›ä½¿ç”¨ã€‚\nrequireçš„ç»†èŠ‚å®é™…ä¸Šæœ‰ç‚¹å¤æ‚ï¼Œä½†ä¸ºäº†å®ç”¨ï¼Œä½ å¯ä»¥è®¤ä¸ºrequireæ˜¯å‘Šè¯‰ Clojure ä»¥ä¸‹å†…å®¹ã€‚\n å¦‚æœä½ å·²ç»ç”¨è¿™ä¸ªç¬¦å·ï¼ˆthe-divine-cheese-code.visualization.svgï¼‰è°ƒç”¨äº†requireï¼Œåˆ™ä¸åšä»»ä½•äº‹æƒ…ã€‚ å¦åˆ™ï¼Œä½¿ç”¨\u0026ldquo;æ–‡ä»¶è·¯å¾„å’Œå‘½åç©ºé—´åç§°ä¹‹é—´çš„å…³ç³» \u0026ldquo;ç¬¬ 133 é¡µä¸­æè¿°çš„è§„åˆ™æ‰¾åˆ°ä¸è¯¥ç¬¦å·å¯¹åº”çš„æ–‡ä»¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒClojure æ‰¾åˆ°src/the_divine_cheese_code/visualization/svg.cljã€‚  è¯»å–å¹¶æ±‚å€¼è¯¥æ–‡ä»¶çš„å†…å®¹ã€‚Clojure å¸Œæœ›è¯¥æ–‡ä»¶å£°æ˜ä¸€ä¸ªä¸å®ƒçš„è·¯å¾„ç›¸å¯¹åº”çš„å‘½åç©ºé—´ï¼ˆæˆ‘ä»¬çš„æ–‡ä»¶å°±æ˜¯å¦‚æ­¤ï¼‰ã€‚\nrequireä¹Ÿå¯ä»¥è®©ä½ åœ¨éœ€è¦ä¸€ä¸ªå‘½åç©ºé—´æ—¶ä½¿ç”¨:asæˆ–aliasæ¥åˆ«åå®ƒã€‚è¿™æ ·ã€‚\n(require \u0026#39;[the-divine-cheese-code.visualization.svg :as svg] ) ç›¸å½“äºè¿™æ ·ã€‚\n(require \u0026#39;the-divine-cheese-code.visualization.svg) (alias \u0026#39;svg \u0026#39;the-divine-cheese-code.visualization.svg) ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨åˆ«åçš„å‘½åç©ºé—´äº†ã€‚\n(svg/points heists) ; =\u0026gt; \u0026#34;50.95,6.97 47.37,8.55 43.3,5.37 47.37,8.55 41.9,12.45\u0026#34; Clojure æä¾›äº†å¦ä¸€ç§æ·å¾„ã€‚å‡½æ•°useä¸éœ€è¦å•ç‹¬è°ƒç”¨requireå’Œreferï¼Œè€Œæ˜¯åŒæ—¶è°ƒç”¨ã€‚åœ¨ç”Ÿäº§ä»£ç ä¸­ä½¿ç”¨useæ˜¯ä¸å¯å–çš„ï¼Œä½†å½“ä½ åœ¨ REPL ä¸­åšå®éªŒï¼Œæƒ³å¿«é€Ÿè·å¾—ä¸€äº›å‡½æ•°æ—¶ï¼Œå®ƒå°±å¾ˆæ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªã€‚\n(require \u0026#39;the-divine-cheese-code.visualization.svg) (refer \u0026#39;the-divine-cheese-code.visualization.svg) ç›¸å½“äºè¿™æ ·ã€‚\n(use \u0026#39;the-divine-cheese-code.visualization.svg) ä½ å¯ä»¥ç”¨useæ¥åˆ«åä¸€ä¸ªå‘½åç©ºé—´ï¼Œå°±åƒä½ å¯ä»¥ç”¨requireä¸€æ ·ã€‚è¿™æ ·ã€‚\n(require \u0026#39;the-divine-cheese-code.visualization.svg) (refer \u0026#39;the-divine-cheese-code.visualization.svg) (alias \u0026#39;svg \u0026#39;the-divine-cheese-code.visualization.svg) ç›¸å½“äºæ¸…å• 6-2 ä¸­çš„ä»£ç ï¼Œå…¶ä¸­ä¹Ÿæ˜¾ç¤ºäº†å‡½æ•°è°ƒç”¨ä¸­ä½¿ç”¨çš„åˆ«åç©ºé—´ã€‚\n(use \u0026#39;[the-divine-cheese-code.visualization.svg :as svg]) (= svg/points points) ; =\u0026gt; true (= svg/latlng-\u0026gt;point latlng-\u0026gt;point) ; =\u0026gt; true  6-2. æœ‰æ—¶ï¼Œæ—¢ä½¿ç”¨åˆåˆ«åä¸€ä¸ªå‘½åç©ºé—´æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚  åœ¨è¿™é‡Œç”¨useåˆ«åå‘½åç©ºé—´ä¼¼ä¹æ˜¯å¤šä½™çš„ï¼Œå› ä¸ºuseå·²ç»å¼•ç”¨äº†å‘½åç©ºé—´ï¼ˆè¿™è®©ä½ å¯ä»¥ç®€å•åœ°è°ƒç”¨pointsè€Œä¸æ˜¯svg/pointsï¼‰ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºuseå’Œreferæœ‰ç›¸åŒçš„é€‰é¡¹ï¼ˆ:only, :exclude, :as, å’Œ:renameï¼‰ã€‚å½“ä½ è·³è¿‡å¼•ç”¨ä¸€ä¸ªç¬¦å·æ—¶ï¼Œä½ å¯èƒ½æƒ³ç”¨useæ¥åˆ«åä¸€ä¸ªå‘½åç©ºé—´ã€‚ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ã€‚\n(require \u0026#39;the-divine-cheese-code.visualization.svg) (refer \u0026#39;the-divine-cheese-code.visualization.svg :as :only [\u0026#39;point]) æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨æ¸…å• 6-3 ä¸­çš„useå½¢å¼ï¼ˆå…¶ä¸­è¿˜åŒ…æ‹¬å¦‚ä½•è°ƒç”¨å‡½æ•°çš„ä¾‹å­ï¼‰ã€‚\n(use \u0026#39;[the-divine-cheese-code.visualization.svg :as svg :only [points]]) (refer \u0026#39;the-divine-cheese-code.visualization.svg :as :only [\u0026#39;points]) (= svg/points points) ; =\u0026gt; true ;; We can use the alias to reach latlng-\u0026gt;point svg/latlng-\u0026gt;point ; This doesn\u0026#39;t throw an exception ;; But we can\u0026#39;t use the bare name latlng-\u0026gt;point ; This does throw an exception!  åœ¨ä½ ä½¿ç”¨ä¸€ä¸ªå‘½åç©ºé—´åå°†å…¶åˆ«ååŒ–ï¼Œå¯ä»¥è®©ä½ å‚è€ƒä½ æ’é™¤çš„ç¬¦å·ã€‚  å¦‚æœä½ åœ¨ REPL ä¸­å°è¯•æ¸…å• 6-3ï¼Œå¹¶ä¸”latlng-\u0026gt;pointæ²¡æœ‰æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè¿™æ˜¯å› ä¸ºä½ åœ¨æ¸…å• 6-2 ä¸­å¼•ç”¨äº†latlng-\u0026gt;pointã€‚ä½ éœ€è¦é‡æ–°å¯åŠ¨ä½ çš„ REPL ä¼šè¯ï¼Œä½¿ä»£ç è¡¨ç°å¾—å¦‚æ¸…å• 6-3 æ‰€ç¤ºã€‚\nè¿™é‡Œçš„å¯ç¤ºæ˜¯ï¼Œrequireå’ŒuseåŠ è½½æ–‡ä»¶ï¼Œå¹¶å¯é€‰æ‹©aliasæˆ–referå…¶å‘½åç©ºé—´ã€‚å½“ä½ å†™ Clojure ç¨‹åºå’Œé˜…è¯»åˆ«äººå†™çš„ä»£ç æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°æ›´å¤šçš„require'å’Œuse\u0026rsquo;çš„å†™æ³•ï¼Œè¿™æ—¶ï¼Œé˜…è¯» Clojure çš„ API æ–‡æ¡£ï¼ˆhttp://clojure.org/libs/ï¼‰æ¥äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆæ˜¯æœ‰æ„ä¹‰çš„ã€‚ç„¶è€Œï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ æ‰€å­¦åˆ°çš„å…³äºrequireå’Œuseçš„å†…å®¹åº”è¯¥èƒ½æ»¡è¶³ä½  95.3%çš„éœ€æ±‚ã€‚\nï¼ƒï¼ƒï¼ƒNS å® ç°åœ¨æ˜¯æ—¶å€™çœ‹çœ‹nså®äº†ã€‚åˆ°ç›®å‰ä¸ºæ­¢æ‰€æ¶‰åŠçš„å·¥å…·\u0026ndash;in-ns, refer, alias, require, å’Œ use\u0026ndash;æœ€å¸¸åœ¨ä½ ä½¿ç”¨ REPL æ—¶ä½¿ç”¨ã€‚åœ¨ä½ çš„æºä»£ç æ–‡ä»¶ä¸­ï¼Œä½ é€šå¸¸ä¼šä½¿ç”¨nså®ï¼Œå› ä¸ºå®ƒå…è®¸ä½ ç®€æ´åœ°ä½¿ç”¨è¿„ä»Šä¸ºæ­¢æè¿°çš„å·¥å…·ï¼Œå¹¶æä¾›å…¶ä»–æœ‰ç”¨çš„åŠŸèƒ½ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†äº†è§£ä¸€ä¸ªnsè°ƒç”¨å¦‚ä½•ç»“åˆrequireã€useã€in-nsã€aliaså’Œreferã€‚\nnsåšçš„ä¸€ä¸ªæœ‰ç”¨çš„ä»»åŠ¡æ˜¯é»˜è®¤å¼•ç”¨clojure.coreå‘½åç©ºé—´ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¯ä»¥ä»the-divine-cheese-code.coreä¸­è°ƒç”¨printlnï¼Œè€Œä¸ä½¿ç”¨å®Œå…¨é™å®šçš„åç§°clojure.core/printlnã€‚\nä½ å¯ä»¥ç”¨:refer-clojureæ¥æ§åˆ¶ä»clojure-coreå¼•ç”¨çš„å†…å®¹ï¼Œå®ƒçš„é€‰é¡¹ä¸referç›¸åŒã€‚\n(ns the-divine-cheese-code.core (:refer-clojure :exclude [println]) å¦‚æœä½ åœ¨divine_cheese_code.core.cljçš„å¼€å¤´è°ƒç”¨è¿™ä¸ªï¼Œä¼šç ´åä½ çš„ä»£ç ï¼Œè¿«ä½¿ä½ åœ¨-main'å‡½æ•°ä¸­ä½¿ç”¨clojure.core/println\u0026rsquo;ã€‚\nåœ¨nsä¸­ï¼Œ(:refer-clojure)`çš„å½¢å¼è¢«ç§°ä¸ºreferenceã€‚è¿™å¯¹ä½ æ¥è¯´å¯èƒ½çœ‹èµ·æ¥å¾ˆå¥‡æ€ªã€‚è¿™ä¸ªå¼•ç”¨æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Ÿä¸€ä¸ªå®ï¼Ÿå®ƒæ˜¯ä»€ä¹ˆï¼Ÿä½ å°†åœ¨ç¬¬ 7 ç« ä¸­äº†è§£æ›´å¤šå…³äºåº•å±‚æœºå™¨çš„çŸ¥è¯†ã€‚ç°åœ¨ï¼Œä½ åªéœ€è¦äº†è§£æ¯ä¸ªå¼•ç”¨å¦‚ä½• Map åˆ°å‡½æ•°è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œå‰é¢çš„ä»£ç å°±ç›¸å½“äºè¿™æ ·ã€‚\n(in-ns \u0026#39;the-divine-cheese-code.core) (refer \u0026#39;clojure.core :exclude [\u0026#39;println]) åœ¨ \u0026ldquo;ns \u0026ldquo;ä¸­ï¼Œæœ‰å…­ç§å¯èƒ½çš„å¼•ç”¨ã€‚\n (:refer-clojure). \u0026ldquo;(:require)\u0026quot;ã€‚ (:use) (:import) (:load) (:gen-class)ã€‚  (:import)å’Œ(:gen-class)å°†åœ¨ç¬¬ 12 ç« ä»‹ç»ã€‚æˆ‘å°†ä¸ä»‹ç»(:load)ï¼Œå› ä¸ºå®ƒå¾ˆå°‘è¢«ä½¿ç”¨ã€‚\n(:require)çš„å·¥ä½œæ–¹å¼å¾ˆåƒrequireå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œè¿™æ ·ã€‚\n(ns the-divine-cheese-code.core (:require the-divine-cheese-code.visualization.svg)) ç›¸å½“äºè¿™æ ·ã€‚\n(in-ns \u0026#39;the-divine-cheese-code.core) (require \u0026#39;the-divine-cheese-code.visualization.svg) æ³¨æ„ï¼Œåœ¨ \u0026ldquo;ns \u0026ldquo;å½¢å¼ä¸­ï¼ˆä¸ \u0026ldquo;in-ns \u0026ldquo;å‡½æ•°è°ƒç”¨ä¸åŒï¼‰ï¼Œä½ ä¸éœ€è¦ç”¨\u0026rdquo;\u0026lsquo;\u0026lsquo;æ¥å¼•ç”¨ä½ çš„ç¬¦å·ã€‚åœ¨ \u0026ldquo;ns \u0026ldquo;ä¸­ï¼Œä½ ä»æ¥ä¸éœ€è¦å¼•ç”¨ç¬¦å·ã€‚\nä½ ä¹Ÿå¯ä»¥aliasä¸€ä¸ªä½ åœ¨nså†…requireçš„åº“ï¼Œå°±åƒä½ è°ƒç”¨å‡½æ•°æ—¶ä¸€æ ·ã€‚è¿™æ ·ã€‚\n(ns the-divine-cheese-code.core (:require [the-divine-cheese-code.visualization.svg :as svg]) ç›¸å½“äºè¿™æ ·ã€‚\n(in-ns \u0026#39;the-divine-cheese-code.core) (require [\u0026#39;the-divine-cheese-code.visualization.svg :as \u0026#39;svg]) ä½ å¯ä»¥åœ¨ä¸€ä¸ª(:require)å¼•ç”¨ä¸­è¦æ±‚å¤šä¸ªåº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚Â è¿™æ ·ã€‚\n(ns the-divine-cheese-code.core (:require [the-divine-cheese-code.visualization.svg :as svg]) [clojure.java.browse :as browse])) ç›¸å½“äºè¿™æ ·ã€‚\n(in-ns \u0026#39;the-divine-cheese-code.core) (require [\u0026#39;the-divine-cheese-code.visualization.svg :as \u0026#39;svg]) (require [\u0026#39;clojure.java.browse :as \u0026#39;browse]) ç„¶è€Œï¼Œ(:require)å¼•ç”¨å’Œrequireå‡½æ•°ä¹‹é—´çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå¼•ç”¨ä¹Ÿå…è®¸ä½ å¼•ç”¨åå­—ã€‚è¿™ä¸€ç‚¹ã€‚\n(ns the-divine-cheese-code.core (:require [the-divine-cheese-code.visualization.svg :refer [point])) ç›¸å½“äºè¿™æ ·ã€‚\n(in-ns \u0026#39;the-divine-cheese-code.core) (require \u0026#39;the-divine-cheese-code.visualization.svg) (refer \u0026#39;the-divine-cheese-code.visualization.svg :only [\u0026#39;point]) ä½ ä¹Ÿå¯ä»¥å¼•ç”¨æ‰€æœ‰çš„ç¬¦å·ï¼ˆæ³¨æ„:allå…³é”®å­—ï¼‰ã€‚\n(ns the-divine-cheese-code.core (:require [the-divine-cheese-code.visualization.svg :refer :all])) è¿™å°±ç›¸å½“äºè¿™æ ·åšäº†ã€‚\n(in-ns \u0026#39;the-divine-cheese-code.core) (require \u0026#39;the-divine-cheese-code.visualization.svg) (refer \u0026#39;the-divine-cheese-code.visualization.svg) è¿™æ˜¯è¦æ±‚ä»£ç ã€åˆ«åå‘½åç©ºé—´å’Œå¼•ç”¨ç¬¦å·çš„é¦–é€‰æ–¹å¼ã€‚å»ºè®®ä½ ä¸è¦ä½¿ç”¨(:use)ï¼Œä½†ç”±äºä½ å¾ˆå¯èƒ½ä¼šé‡åˆ°å®ƒï¼Œæ‰€ä»¥çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„å¾ˆå¥½ã€‚ä½ çŸ¥é“è¯¥æ€ä¹ˆåšã€‚è¿™ä¸ªã€‚\n(ns the-divine-cheese-code.core (:use clojure.java.browse)) è¿™æ ·åšã€‚\n(in-ns \u0026#39;the-divine-cheese-code.core) (use \u0026#39;clojure.java.browse) è€Œè¿™ä¸€ç‚¹ã€‚\n(ns the-divine-cheese-code.core (:use [clojure.java browse io]) è¿™æ ·åšã€‚\n(in-ns \u0026#39;the-divine-cheese-code.core) (use \u0026#39;clojure.java.browse) (use \u0026#39;clojure.java.io) æ³¨æ„ï¼Œå½“ä½ åœ¨:useåé¢åŠ ä¸Šä¸€ä¸ª Vector æ—¶ï¼Œå®ƒæŠŠç¬¬ä¸€ä¸ªç¬¦å·ä½œä¸ºbaseï¼Œç„¶åç”¨åé¢çš„æ¯ä¸ªç¬¦å·è°ƒç”¨useã€‚\nå“¦ï¼Œæˆ‘çš„å¤©å“ªï¼Œå°±æ˜¯è¿™æ ·! ç°åœ¨ä½ å¯ä»¥åƒä¸“å®¶ä¸€æ ·ä½¿ç”¨nsäº†! ä½ éœ€è¦è¿™æ ·åšï¼Œè¯¥æ­»çš„ï¼Œå› ä¸ºé‚£ä¸ªvoleur des fromagesï¼ˆä»–ä»¬å¯èƒ½åœ¨æ³•è¯­ä¸­è¿™æ ·è¯´ï¼‰ä»ç„¶åœ¨è‚†æ„å¦„ä¸ºã€‚è¿˜è®°å¾—ä»–/å¥¹å—ï¼Ÿ\nâˆ®âˆ®æŠ“å°å·\næˆ‘ä»¬ä¸èƒ½è®©è¿™ä¸ªæ å¤ºå¸•å°”é©¬å¹²é…ªçš„äººå¸¦ç€æ›´å¤šçš„å¹²é…ªç¦»å¼€ï¼æ˜¯æ—¶å€™å®Œæˆæ ¹æ®åæ ‡ç”»çº¿çš„å·¥ä½œäº†ã€‚ç°åœ¨æ˜¯æ—¶å€™æ ¹æ®ç›—çªƒæ¡ˆçš„åæ ‡æ¥å®Œæˆç”»çº¿äº†ï¼è¿™è‚¯å®šä¼šå‘ç°ä¸€äº›é—®é¢˜ã€‚è¿™è‚¯å®šä¼šå‘ç°ä¸€äº›é—®é¢˜!\nä½¿ç”¨æ¯ä¸ªæŠ¢åŠ«æ¡ˆçš„çº¬åº¦åæ ‡ï¼Œä½ å°†åœ¨ä¸€ä¸ª SVG å›¾åƒä¸­è¿æ¥è¿™äº›ç‚¹ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ç”¨ç»™å®šçš„åæ ‡ç”»çº¿ï¼Œç»“æœçœ‹èµ·æ¥å°±ä¸å¯¹äº†ï¼ŒåŸå› æœ‰äºŒã€‚é¦–å…ˆï¼Œçº¬åº¦åæ ‡æ˜¯ç”±å—å‘åŒ—ä¸Šå‡çš„ï¼Œè€Œ SVG çš„ Y åæ ‡æ˜¯ç”±ä¸Šå‘ä¸‹ä¸Šå‡çš„ã€‚æ¢å¥è¯è¯´ï¼Œä½ éœ€è¦ç¿»è½¬åæ ‡ï¼Œå¦åˆ™ç»˜å›¾å°±ä¼šé¢ å€’è¿‡æ¥ã€‚\nç¬¬äºŒï¼Œç»˜å›¾ä¼šéå¸¸å°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å°†é€šè¿‡å¹³ç§»å’Œç¼©æ”¾æ¥æ”¾å¤§å®ƒã€‚è¿™å°±åƒæŠŠä¸€å¼ çœ‹èµ·æ¥åƒå›¾ 6-1a çš„å›¾å˜æˆå›¾ 6-1bã€‚\nå›¾ 6-1ï¼šé€šè¿‡ç¿»è½¬ã€å¹³ç§»å’Œç¼©æ”¾çº¬åº¦åæ ‡æ¥åˆ¶ä½œä¸€å¼  SVG å›¾ç‰‡ã€‚\nè¯´å®è¯ï¼Œè¿™äº›éƒ½æ˜¯å®Œå…¨éšæ„çš„ï¼Œå®ƒå·²ç»ä¸ä»£ç ç»„ç»‡æ²¡æœ‰ç›´æ¥å…³ç³»äº†ï¼Œä½†æ˜¯å®ƒå¾ˆæœ‰è¶£ï¼Œæˆ‘æƒ³ä½ ä¼šæœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ—¶é—´æ¥æµè§ˆè¿™äº›ä»£ç çš„ ä½¿ä½ çš„svg.cljæ–‡ä»¶ä¸æ¸…å• 6-4 ä¸€è‡´ã€‚\n(ns the-divine-cheese-code.visualization.svg (:require [clojure.string :as s]) (:refer-clojure :exclude [min max]) âŠ ï¼ˆdefn comparator-over-maps [æ¯”è¾ƒ-fn ksï¼½ (fn [maps] â‹ (zipmap ks âŒ (map (fn [k] (apply comparison-fn (map k maps))) ks)))) â (def min (comparator-over-maps clojure.core/min [:lat :lng]) (def max (comparator-over-maps clojure.core/max [:lat :lng]))  6-3. æ„å»º Map æ¯”è¾ƒå‡½æ•°  ä½ åœ¨âŠå¤„å®šä¹‰äº†comparator-over-mapså‡½æ•°ã€‚è¿™å¯èƒ½æ˜¯æœ€æ£˜æ‰‹çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥è¯·å¿å—ä¸€ä¸‹ã€‚Â comparator-over-mapsæ˜¯ä¸€ä¸ªè¿”å›ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚è¿”å›çš„å‡½æ•°ä½¿ç”¨æ‰€æä¾›çš„æ¯”è¾ƒå‡½æ•°comparison-fnå¯¹å‚æ•°ksæä¾›çš„é”®å€¼è¿›è¡Œæ¯”è¾ƒã€‚\nä½ ä½¿ç”¨comparator-over-mapæ¥æ„é€ minå’Œmaxå‡½æ•°âï¼Œä½ å°†ç”¨å®ƒä»¬æ¥å¯»æ‰¾æˆ‘ä»¬å›¾å½¢çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’ã€‚ä¸‹é¢æ˜¯`min\u0026rsquo;çš„æ“ä½œã€‚\n(min [{:a 1 :b 3} {:a 5 :b 0}] ) ; =\u0026gt; {:a 1 :b 0} å½“ä½ è°ƒç”¨minæ—¶ï¼Œå®ƒè°ƒç”¨zipmapï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯ seqï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ mapã€‚ç¬¬ä¸€ä¸ªåºåˆ—çš„å…ƒç´ æˆä¸ºé”®ï¼Œç¬¬äºŒä¸ªåºåˆ—çš„å…ƒç´ æˆä¸ºå€¼ã€‚\n(zipmap [:a :b] [1 2]) ; =\u0026gt; {:a 1 :b 2}ã€‚ åœ¨ ï¼Œzipmapçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ksï¼Œæ‰€ä»¥ksçš„å…ƒç´ å°†æ˜¯è¿”å› Map çš„é”®ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯åœ¨âŒçš„ Map è°ƒç”¨çš„ç»“æœã€‚é‚£ä¸ª Map è°ƒç”¨å®é™…ä¸Šæ˜¯åœ¨è¿›è¡Œæ¯”è¾ƒã€‚\næœ€åï¼Œåœ¨âï¼Œä½ ä½¿ç”¨comparator-over-mapsæ¥åˆ›å»ºæ¯”è¾ƒå‡½æ•°ã€‚å¦‚æœä½ æŠŠå›¾çº¸çœ‹ä½œæ˜¯åˆ»åœ¨ä¸€ä¸ªçŸ©å½¢é‡Œï¼Œé‚£ä¹ˆminæ˜¯çŸ©å½¢ä¸­æœ€æ¥è¿‘ï¼ˆ0ï¼Œ0ï¼‰çš„è§’ï¼Œmaxæ˜¯ç¦»å®ƒæœ€è¿œçš„è§’ã€‚\nä¸‹é¢æ˜¯ä»£ç çš„ä¸‹ä¸€éƒ¨åˆ†ã€‚\n (defn translate-to-00 [locations] (let [mincoords (min locations)] (map #(merge-with - % mincoords) locations))) (defn scale [width height locations] (let [maxcoords (max locations) ratio {:lat (/ height (:lat maxcoords)) :lng (/ width (:lng maxcoords))}] (map #(merge-with * % ratio) locations))) translate-to-00ï¼Œå®šä¹‰åœ¨ ï¼Œå·¥ä½œåŸç†æ˜¯æ‰¾åˆ°æˆ‘ä»¬ä½ç½®çš„min'ï¼Œç„¶åä»æ¯ä¸ªä½ç½®å‡å»è¿™ä¸ªå€¼ã€‚å®ƒä½¿ç”¨merge-with`ï¼Œå…¶å·¥ä½œåŸç†å¦‚ä¸‹ã€‚\n(merge-with - {:lat 50 :lng 10} {:lat 5 :lng 5}) ; =\u0026gt; {:lat 45 :lng 5} ç„¶åæˆ‘ä»¬å®šä¹‰å‡½æ•°scaleï¼Œå®ƒå°†æ¯ä¸ªç‚¹ä¹˜ä»¥æœ€å¤§ç»çº¬åº¦ä¸æ‰€éœ€é«˜åº¦å’Œå®½åº¦ä¹‹é—´çš„æ¯”ç‡ã€‚\nä¸‹é¢æ˜¯svg.cljçš„å…¶ä½™ä»£ç ã€‚\n(defn latlng-\u0026gt;point \u0026#34;Convert lat/lng map to comma-separated string\u0026#34; [latlng] (str (:lat latlng) \u0026#34;,\u0026#34; (:lng latlng))) (defn points \u0026#34;Given a seq of lat/lng maps, return string of points joined by space\u0026#34; [locations] (s/join \u0026#34; \u0026#34; (map latlng-\u0026gt;point locations))) (defn line [points] (str \u0026#34;\u0026lt;polyline points=\\\u0026#34;\u0026#34; points \u0026#34;\\\u0026#34; /\u0026gt;\u0026#34;)) (defn transform \u0026#34;Just chains other functions\u0026#34; [width height locations] (-\u0026gt;\u0026gt; locations translate-to-00 (scale width height))) (defn xml \u0026#34;svg \u0026#39;template\u0026#39;, which also flips the coordinate system\u0026#34; [width height locations] (str \u0026#34;\u0026lt;svg height=\\\u0026#34;\u0026#34; height \u0026#34;\\\u0026#34; width=\\\u0026#34;\u0026#34; width \u0026#34;\\\u0026#34;\u0026gt;\u0026#34; ;; These two \u0026lt;g\u0026gt; tags change the coordinate system so that ;; 0,0 is in the lower-left corner, instead of SVG\u0026#39;s default ;; upper-left corner \u0026#34;\u0026lt;g transform=\\\u0026#34;translate(0,\u0026#34; height \u0026#34;)\\\u0026#34;\u0026gt;\u0026#34; \u0026#34;\u0026lt;g transform=\\\u0026#34;rotate(-90)\\\u0026#34;\u0026gt;\u0026#34; (-\u0026gt; (transform width height locations) points line) \u0026#34;\u0026lt;/g\u0026gt;\u0026lt;/g\u0026gt;\u0026#34; \u0026#34;\u0026lt;/svg\u0026gt;\u0026#34;)) è¿™é‡Œçš„å‡½æ•°éå¸¸ç®€å•æ˜äº†ã€‚å®ƒä»¬åªæ˜¯æ¥æ”¶{:lat x :lng y}Mapï¼Œå¹¶å¯¹å…¶è¿›è¡Œè½¬æ¢ï¼Œä»¥ä¾¿åˆ›å»ºä¸€ä¸ª SVGã€‚latlng-\u0026gt;pointè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ç”¨äºåœ¨ SVG æ ‡è®°ä¸­å®šä¹‰ä¸€ä¸ªç‚¹ã€‚pointså°†lat/lngMap çš„åºåˆ—è½¬æ¢ä¸ºä¸€ä¸ªä»¥ç©ºæ ¼åˆ†éš”çš„ç‚¹çš„å­—ç¬¦ä¸²ã€‚Â lineè¿”å›è¿æ¥æ‰€æœ‰ç»™å®šç©ºé—´åˆ†éš”çš„ç‚¹å­—ç¬¦ä¸²çš„ SVG æ ‡è®°ã€‚Â transformæ¥æ”¶ä¸€ä¸ªä½ç½®åºåˆ—ï¼Œå°†å®ƒä»¬ç¿»è¯‘æˆä»(0, 0)å¼€å§‹çš„ç‚¹ï¼Œå¹¶å°†å®ƒä»¬ç¼©æ”¾åˆ°ç»™å®šçš„å®½åº¦å’Œé«˜åº¦ã€‚æœ€åï¼Œxmläº§ç”Ÿæ ‡è®°ï¼Œç”¨ SVG æ˜¾ç¤ºç»™å®šçš„ä½ç½®ã€‚\næœ‰äº†svg.cljçš„æ‰€æœ‰ä»£ç ï¼Œç°åœ¨è®©core.cljçœ‹èµ·æ¥åƒè¿™æ ·ã€‚\n(ns the-divine-cheese-code.core (:require [clojure.java.browse :as browse] [the-divine-cheese-code.visualization.svg :refer [xml]]) (:gen-class)) (def heists [{:location \u0026#34;Cologne, Germany\u0026#34; :cheese-name \u0026#34;Archbishop Hildebold\u0026#39;s Cheese Pretzel\u0026#34; :lat 50.95 :lng 6.97} {:location \u0026#34;Zurich, Switzerland\u0026#34; :cheese-name \u0026#34;The Standard Emmental\u0026#34; :lat 47.37 :lng 8.55} {:location \u0026#34;Marseille, France\u0026#34; :cheese-name \u0026#34;Le Fromage de Cosquer\u0026#34; :lat 43.30 :lng 5.37} {:location \u0026#34;Zurich, Switzerland\u0026#34; :cheese-name \u0026#34;The Lesser Emmental\u0026#34; :lat 47.37 :lng 8.55} {:location \u0026#34;Vatican City\u0026#34; :cheese-name \u0026#34;The Cheese of Turin\u0026#34; :lat 41.90 :lng 12.45}]) (defn url [filename] (str \u0026#34;file:///\u0026#34; (System/getProperty \u0026#34;user.dir\u0026#34;) \u0026#34;/\u0026#34; filename)) (defn template [contents] (str \u0026#34;\u0026lt;style\u0026gt;polyline { fill:none; stroke:#5881d8; stroke-width:3}\u0026lt;/style\u0026gt;\u0026#34; contents)) (defn -main [\u0026amp; args] (let [filename \u0026#34;map.html\u0026#34;] (-\u0026gt;\u0026gt; heists (xml 50 100) template (spit filename)) (browse/browse-url (url filename)))) è¿™é‡Œæ²¡æœ‰å¤ªå¤æ‚çš„äº‹æƒ…å‘ç”Ÿã€‚åœ¨ \u0026ldquo;main \u0026ldquo;ä¸­ï¼Œä½ ä½¿ç”¨ \u0026ldquo;xml \u0026ldquo;å’Œ \u0026ldquo;template \u0026ldquo;å‡½æ•°å»ºç«‹ç»˜å›¾ï¼Œç”¨ \u0026ldquo;spit \u0026ldquo;å°†ç»˜å›¾å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åç”¨ \u0026ldquo;browse/browse-url \u0026ldquo;æ‰“å¼€å®ƒã€‚ä½ ç°åœ¨åº”è¯¥è¯•è¯•! è¿è¡Œlein runï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼å›¾ 6-2 çš„ä¸œè¥¿ã€‚\nå›¾ 6-2: æŠ¢åŠ«æ¨¡å¼çš„æœ€ç»ˆ SVG!\nç­‰ä¸€ä¸‹ â€¦â€¦è¿™çœ‹èµ·æ¥å¾ˆåƒ â€¦â€¦è¿™çœ‹èµ·æ¥å¾ˆåƒä¸€ä¸ª lambdaã€‚Clojure çš„æ ‡å¿—æ˜¯ä¸€ä¸ª lambda . â€¦â€¦å“¦ï¼Œæˆ‘çš„å¤©å•Š! Clojureï¼Œä¸€ç›´ä»¥æ¥éƒ½æ˜¯ä½ !\næ€»ç»“ åœ¨æœ¬ç« ä¸­ä½ å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥æ‹¥æœ‰æ‰€æœ‰ä½ éœ€è¦çš„å·¥å…·æ¥å¼€å§‹ç»„ç»‡ä½ çš„é¡¹ç›®ã€‚ä½ ç°åœ¨çŸ¥é“å‘½åç©ºé—´ç»„ç»‡äº†ç¬¦å·å’Œ vars ä¹‹é—´çš„ Mapï¼Œvars æ˜¯å¯¹ Clojure å¯¹è±¡ï¼ˆæ•°æ®ç»“æ„ã€å‡½æ•°ç­‰ï¼‰çš„å¼•ç”¨ã€‚Â defå­˜å‚¨ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ç”¨ç¬¦å·å’ŒæŒ‡å‘è¯¥å¯¹è±¡çš„ var ä¹‹é—´çš„ Map æ¥æ›´æ–°å½“å‰å‘½åç©ºé—´ã€‚ä½ å¯ä»¥ç”¨defn-åˆ›å»ºç§æœ‰å‡½æ•°ã€‚\nClojure å…è®¸ä½ ç”¨create-nsåˆ›å»ºå‘½åç©ºé—´ï¼Œä½†é€šå¸¸ä½¿ç”¨in-nsæ›´æœ‰ç”¨ï¼Œå®ƒä¹Ÿä¼šåˆ‡æ¢åˆ°å‘½åç©ºé—´ã€‚ä½ å¯èƒ½åªåœ¨ REPL ä¸­ä½¿ç”¨è¿™äº›å‡½æ•°ã€‚å½“ä½ åœ¨ REPL ä¸­æ—¶ï¼Œä½ æ€»æ˜¯åœ¨å½“å‰å‘½åç©ºé—´ä¸­ã€‚å½“ä½ åœ¨æ–‡ä»¶ä¸­è€Œä¸æ˜¯åœ¨ REPL ä¸­å®šä¹‰åå­—ç©ºé—´æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨ ns å®ï¼Œåå­—ç©ºé—´å’Œå®ƒåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„ä¹‹é—´æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚\nä½ å¯ä»¥é€šè¿‡ä½¿ç”¨å®Œå…¨é™å®šçš„åç§°æ¥å¼•ç”¨å…¶ä»–å‘½åç©ºé—´ä¸­çš„å¯¹è±¡ï¼Œå¦‚cheese.taxonomy/cheddarsã€‚Â referå¯ä»¥è®©ä½ ä½¿ç”¨å…¶ä»–å‘½åç©ºé—´çš„åå­—ï¼Œè€Œä¸éœ€è¦å®Œå…¨é™å®šå®ƒä»¬ï¼Œaliaså¯ä»¥è®©ä½ åœ¨å†™å‡ºå®Œå…¨é™å®šçš„åå­—æ—¶ï¼Œä½¿ç”¨ä¸€ä¸ªæ›´çŸ­çš„åå­—æ¥å‘½åç©ºé—´ã€‚\nrequireå’Œuseç¡®ä¿ä¸€ä¸ªåå­—ç©ºé—´çš„å­˜åœ¨å¹¶å‡†å¤‡å¥½è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©è®©ä½ referå’Œaliasç›¸åº”çš„åå­—ç©ºé—´ã€‚ä½ åº”è¯¥ä½¿ç”¨nsåœ¨ä½ çš„æºæ–‡ä»¶ä¸­è°ƒç”¨requireå’Œuseã€‚*Clojure ns syntax cheat-sheet - GitHub*æ˜¯ä½¿ç”¨nsçš„æ‰€æœ‰å˜åŒ–çš„ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒã€‚\næœ€åï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œåšä¸€ä¸ªä¿—æ°”çš„äººå¹¶ä¸å®¹æ˜“ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/chapter6/","summary":"ç»„ç»‡ä½ çš„é¡¹ç›®ï¼šä¸€ä¸ªå›¾ä¹¦ç®¡ç†å‘˜çš„æ•…äº‹ åœ¨æˆ‘ä»¬æ¯ä¸ªäººå¿ƒä¸­éƒ½ä½ç€ä¸€ä¸ªå« Melvil çš„å›¾ä¹¦ç®¡ç†å‘˜ï¼Œä¸€ä¸ªä»¥ç»„ç»‡è‰ºæœ¯ä¸ºä¹çš„å¥‡å¼‚ç”Ÿç‰©ã€‚æ—¥æ—¥å¤œå¤œï¼ŒMelvil éƒ½æ¸´æœ›ä¸ºä½ çš„ä»£ç åº“å¸¦æ¥ç§©åºã€‚å¹¸è¿çš„æ˜¯ï¼ŒClojure æä¾›äº†ä¸€å¥—å·¥å…·ï¼Œä¸“é—¨ç”¨æ¥å¸®åŠ©è¿™ä¸ªä¾å„’ä¸æ··ä¹±çš„åŠ›é‡ä¸æ–­æ–—äº‰ã€‚\nè¿™äº›å·¥å…·é€šè¿‡å°†ç›¸å…³çš„å‡½æ•°å’Œæ•°æ®åˆ†ç»„æ¥å¸®åŠ©ä½ ç»„ç»‡ä½ çš„ä»£ç ã€‚å®ƒä»¬è¿˜å¯ä»¥é˜²æ­¢åç§°å†²çªï¼Œè¿™æ ·ä½ å°±ä¸ä¼šæ„å¤–åœ°è¦†ç›–åˆ«äººçš„ä»£ç ï¼Œåä¹‹äº¦ç„¶ã€‚åœ¨è¿™ä¸ªå……æ»¡æ‚¬å¿µå’Œç¥ç§˜çš„æ•…äº‹ä¸­ï¼Œè¯·å’Œæˆ‘ä¸€èµ·å­¦ä¹ å¦‚ä½•ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œå¹¶è§£å†³ä¸€ç”Ÿä¸­çš„æŠ¢åŠ«æ¡ˆå§ åœ¨è¿™ä¸ªä¼ å¥‡æ•…äº‹çš„æœ€åï¼Œä½ å°†äº†è§£ä»¥ä¸‹å†…å®¹ã€‚\n  `def\u0026rsquo;æ˜¯åšä»€ä¹ˆçš„\n  ä»€ä¹ˆæ˜¯å‘½åç©ºé—´ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬\n  å‘½åç©ºé—´å’Œæ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„å…³ç³»\n  å¦‚ä½•ä½¿ç”¨referã€aliasã€requireã€useå’Œnsã€‚\n  å¦‚ä½•ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæ¥ç»„ç»‡ Clojure é¡¹ç›®\n  æˆ‘å…ˆæ¥ä»‹ç»ä¸€ä¸‹ Clojure çš„ç»„ç»‡ç³»ç»Ÿï¼Œå®ƒçš„å·¥ä½œåŸç†å¾ˆåƒä¸€ä¸ªåº“ã€‚Melvil å…´å¥‹åœ°é¢¤æŠ–ç€!\nä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªåº“ ç°å®ä¸–ç•Œä¸­çš„å›¾ä¹¦é¦†å­˜å‚¨å¯¹è±¡çš„é›†åˆï¼Œå¦‚ä¹¦ç±ã€æ‚å¿—å’Œ DVDã€‚ä»–ä»¬ä½¿ç”¨å¯»å€ç³»ç»Ÿï¼Œæ‰€ä»¥å½“ä½ å¾—åˆ°ä¸€ä¸ªç‰©ä½“çš„åœ°å€æ—¶ï¼Œä½ å¯ä»¥å¯¼èˆªåˆ°ç‰©ç†ç©ºé—´å¹¶æ£€ç´¢åˆ°è¯¥ç‰©ä½“ã€‚\nå½“ç„¶ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿç›´æ¥çŸ¥é“ä¸€æœ¬ä¹¦æˆ– DVD çš„åœ°å€æ˜¯ä»€ä¹ˆã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå›¾ä¹¦é¦†è¦è®°å½•ä¸€ä¸ªç‰©ä½“çš„æ ‡é¢˜å’Œå®ƒçš„åœ°å€ä¹‹é—´çš„è”ç³»ï¼Œå¹¶æä¾›å·¥å…·æ¥æœç´¢è¿™äº›è®°å½•ã€‚åœ¨è®¡ç®—æœºä¹‹å‰çš„æ—§æ—¶ä»£ï¼Œå›¾ä¹¦é¦†æä¾›å¡ç‰‡ç›®å½•ï¼Œå³è£…æ»¡çº¸è´¨å¡ç‰‡çš„æŸœå­ï¼Œå…¶ä¸­åŒ…å«æ¯æœ¬ä¹¦çš„æ ‡é¢˜ã€ä½œè€…ã€\u0026ldquo;åœ°å€\u0026rdquo;ï¼ˆæœå¨åè¿›åˆ¶æˆ–å›½ä¼šå›¾ä¹¦é¦†ç¼–å·ï¼‰å’Œå…¶ä»–ä¿¡æ¯ã€‚\nä¾‹å¦‚ï¼Œè¦æ‰¾åˆ°ã€Šè¾¾èŠ¬å¥‡å¯†ç ã€‹ï¼Œä½ å¯ä»¥ç¿»é˜…ä¹¦åç›®å½•ï¼ˆæŒ‰ä¹¦åæ’åºçš„å¡ç‰‡ï¼‰ï¼Œç›´åˆ°ä½ æ‰¾åˆ°æ­£ç¡®çš„å¡ç‰‡ã€‚åœ¨é‚£å¼ å¡ç‰‡ä¸Šï¼Œä½ ä¼šçœ‹åˆ°åœ°å€813.54ï¼ˆå¦‚æœå®ƒä½¿ç”¨æœå¨åè¿›åˆ¶ç³»ç»Ÿï¼‰ï¼Œæµè§ˆå›¾ä¹¦é¦†ï¼Œæ‰¾åˆ°è¾¾èŠ¬å¥‡å¯†ç æ‰€åœ¨çš„ä¹¦æ¶ï¼Œå¹¶å‚ä¸ä½ ä¸€ç”Ÿä¸­çš„æ–‡å­¦å’Œ/æˆ–ä»‡æ¨é˜…è¯»å†’é™©ã€‚\nåœ¨ Clojure ä¸­æƒ³è±¡ä¸€ä¸ªç±»ä¼¼çš„è®¾ç½®æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æˆ‘è®¤ä¸º Clojure æ˜¯å°†å¯¹è±¡ï¼ˆå¦‚æ•°æ®ç»“æ„å’Œå‡½æ•°ï¼‰å­˜å‚¨åœ¨ä¸€ç»„å·¨å¤§çš„ç¼–å·æ¶ä¸Šã€‚æ²¡æœ‰äººèƒ½å¤Ÿç›´æ¥çŸ¥é“ä¸€ä¸ªå¯¹è±¡è¢«å­˜å‚¨åœ¨å“ªä¸ªæ¶å­ä¸Šã€‚ç›¸åï¼Œæˆ‘ä»¬ç»™ Clojure ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå®ƒç”¨æ¥æ£€ç´¢è¯¥å¯¹è±¡ã€‚\nä¸ºäº†ä½¿ä¹‹æˆåŠŸï¼ŒClojure å¿…é¡»ç»´æŠ¤æˆ‘ä»¬çš„æ ‡è¯†ç¬¦å’Œè´§æ¶åœ°å€ä¹‹é—´çš„å…³è”ã€‚å®ƒé€šè¿‡ä½¿ç”¨namespacesæ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å‘½åç©ºé—´åŒ…å«äº†äººç±»å‹å¥½çš„ç¬¦å·å’Œä¹¦æ¶åœ°å€çš„å¼•ç”¨ä¹‹é—´çš„ Mapï¼Œè¢«ç§°ä¸ºvarsï¼Œå¾ˆåƒå¡ç‰‡ç›®å½•ã€‚\nä»æŠ€æœ¯ä¸Šè®²ï¼Œå‘½åç©ºé—´æ˜¯ \u0026ldquo;clojure.lang.Namespace \u0026ldquo;ç±»å‹çš„å¯¹è±¡ï¼Œä½ å¯ä»¥ä¸å®ƒä»¬äº’åŠ¨ï¼Œå°±åƒä½ å¯ä»¥ä¸ Clojure æ•°æ®ç»“æ„äº’åŠ¨ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨*ns*æ¥å¼•ç”¨å½“å‰çš„å‘½åç©ºé—´ï¼Œä½ å¯ä»¥ç”¨(ns-name *ns*)æ¥è·å¾—å…¶åç§°ã€‚\n(ns-name *ns*) ; =\u0026gt; user ä¾‹å¦‚ï¼Œå½“ä½ å¯åŠ¨ REPL æ—¶ï¼Œä½ åœ¨userå‘½åç©ºé—´ä¸­ï¼ˆæ­£å¦‚ä½ åœ¨è¿™é‡Œçœ‹åˆ°çš„ï¼‰ã€‚æç¤ºç¬¦æ˜¾ç¤ºå½“å‰åç§°ç©ºé—´ï¼Œä½¿ç”¨user=\u0026gt;ã€‚\nå½“å‰åå­—ç©ºé—´çš„æ¦‚å¿µæ„å‘³ç€ä½ å¯ä»¥æœ‰å¤šä¸ªåå­—ç©ºé—´ï¼Œäº‹å®ä¸Š Clojure å…è®¸ä½ åˆ›å»ºä»»æ„å¤šçš„åå­—ç©ºé—´ï¼ˆå°½ç®¡ä»æŠ€æœ¯ä¸Šè®²ï¼Œä½ å¯ä»¥åˆ›å»ºçš„åå­—æ•°é‡å¯èƒ½æœ‰ä¸€ä¸ªä¸Šé™ï¼‰ã€‚åœ¨ Clojure ç¨‹åºä¸­ï¼Œä½ æ€»æ˜¯åœ¨ä¸ªå‘½åç©ºé—´ä¸­ã€‚\nè‡³äºç¬¦å·ï¼Œä½ ä¸€ç›´åœ¨ä½¿ç”¨å®ƒä»¬ï¼Œç”šè‡³æ²¡æœ‰æ„è¯†åˆ°ã€‚ä¾‹å¦‚ï¼Œå½“ä½ å†™(map inc [1 2])æ—¶ï¼Œmapå’Œincéƒ½æ˜¯ç¬¦å·ã€‚ç¬¦å·æ˜¯ Clojure ä¸­çš„æ•°æ®ç±»å‹ï¼Œæˆ‘å°†åœ¨ä¸‹ä¸€ç« ä¸­å½»åº•è§£é‡Šå®ƒä»¬ã€‚ç°åœ¨ï¼Œä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œå½“ä½ ç»™ Clojure ä¸€ä¸ªåƒmapè¿™æ ·çš„ç¬¦å·æ—¶ï¼Œå®ƒä¼šåœ¨å½“å‰å‘½åç©ºé—´ä¸­æ‰¾åˆ°ç›¸åº”çš„ varï¼Œå¾—åˆ°ä¸€ä¸ªæ¶å­ä¸Šçš„åœ°å€ï¼Œå¹¶ä¸ºä½ ä»é‚£ä¸ªæ¶å­ä¸Šæ£€ç´¢ä¸€ä¸ªå¯¹è±¡\u0026ndash;åœ¨è¿™é‡Œï¼Œå°±æ˜¯mapæ‰€æŒ‡çš„é‚£ä¸ªå‡½æ•°ã€‚å¦‚æœä½ æƒ³åªä½¿ç”¨ç¬¦å·æœ¬èº«ï¼Œè€Œä¸æ˜¯å®ƒæ‰€æŒ‡çš„ä¸œè¥¿ï¼Œä½ å¿…é¡»å¼•ç”¨å®ƒã€‚å¼•è¿°ä»»ä½• Clojure çš„å½¢å¼å‘Šè¯‰ Clojure ä¸è¦æ±‚å€¼å®ƒï¼Œè€Œæ˜¯æŠŠå®ƒå½“ä½œæ•°æ®ã€‚æ¥ä¸‹æ¥çš„å‡ ä¸ªä¾‹å­æ˜¾ç¤ºäº†å½“ä½ å¼•ç”¨ä¸€ä¸ª Form æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚","title":"Chapter6 ç»„ç»‡ä½ çš„é¡¹ç›®"},{"content":"å‡½æ•°å¼ç¼–ç¨‹ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»ä¸“æ³¨äºç†Ÿæ‚‰ Clojure æä¾›çš„å·¥å…·ï¼šä¸å¯å˜çš„æ•°æ®ç»“æ„ã€å‡½æ•°ã€æŠ½è±¡ï¼Œç­‰ç­‰ã€‚åœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•æ€è€ƒä½ çš„ç¼–ç¨‹ä»»åŠ¡ï¼Œä»¥æœ€å¥½çš„æ–¹å¼åˆ©ç”¨è¿™äº›å·¥å…·ã€‚ä½ å°†å¼€å§‹æŠŠä½ çš„ç»éªŒæ•´åˆåˆ°ä¸€ä¸ªæ–°çš„å‡½æ•°å¼ç¼–ç¨‹æ€ç»´ä¸­ã€‚\nä½ å°†å­¦åˆ°çš„æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬ï¼šä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Œä¸ºä»€ä¹ˆå®ƒä»¬å¾ˆæœ‰ç”¨ï¼›å¦‚ä½•ä½¿ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆå®ƒä»¬æ¯”å¯å˜çš„è¡¨äº²æ›´æœ‰ä¼˜åŠ¿ï¼›å¦‚ä½•å°†æ•°æ®å’Œå‡½æ•°åˆ†å¼€ï¼Œç»™ä½ å¸¦æ¥æ›´å¤šçš„åŠ›é‡å’Œçµæ´»æ€§ï¼›ä»¥åŠä¸ºä»€ä¹ˆå¯¹ä¸€å°éƒ¨åˆ†æ•°æ®æŠ½è±¡è¿›è¡Œç¼–ç¨‹ä¼šå¾ˆå¼ºå¤§ã€‚ä¸€æ—¦ä½ æŠŠæ‰€æœ‰è¿™äº›çŸ¥è¯†å¡è¿›ä½ çš„å¤§è„‘ï¼Œä½ å°±ä¼šæœ‰ä¸€ä¸ªå…¨æ–°çš„è§£å†³é—®é¢˜çš„æ–¹æ³•\nåœ¨å­¦ä¹ äº†è¿™äº›ä¸»é¢˜ä¹‹åï¼Œä½ å°†é€šè¿‡ç¼–å†™ä¸€ä¸ªåŸºäºç»ˆç«¯çš„æ¸¸æˆæ¥è¿ç”¨ä½ æ‰€å­¦åˆ°çš„ä¸€åˆ‡ï¼Œè¿™ä¸ªæ¸¸æˆçš„çµæ„Ÿæ¥è‡ªäºç¾å›½å„åœ° Cracker Barrel é¤é¦†ä¸­çš„ä¸€ç§å¤è€è€Œç¥ç§˜çš„æ€ç»´è®­ç»ƒè£…ç½®ã€‚Peg Thing!\nçº¯å‡½æ•°ï¼šæ˜¯ä»€ä¹ˆå’Œä¸ºä»€ä¹ˆ é™¤äº† \u0026ldquo;println \u0026ldquo;å’Œ \u0026ldquo;rand\u0026rdquo;ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ æ‰€ä½¿ç”¨çš„æ‰€æœ‰å‡½æ•°éƒ½æ˜¯çº¯å‡½æ•°ã€‚æ˜¯ä»€ä¹ˆä½¿å®ƒä»¬æˆä¸ºçº¯å‡½æ•°ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Ÿå¦‚æœä¸€ä¸ªå‡½æ•°ç¬¦åˆä¸¤ä¸ªæ¡ä»¶ï¼Œå®ƒå°±æ˜¯çº¯å‡½æ•°ã€‚\n å¦‚æœç»™å‡ºç›¸åŒçš„å‚æ•°ï¼Œå®ƒæ€»æ˜¯è¿”å›ç›¸åŒçš„ç»“æœã€‚è¿™è¢«ç§°ä¸ºå¼•ç”¨é€æ˜åº¦ï¼Œä½ å¯ä»¥æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„ 5 ç¾å…ƒç¼–ç¨‹æœ¯è¯­åˆ—è¡¨ä¸­ã€‚ å®ƒä¸èƒ½å¼•èµ·ä»»ä½•å‰¯ä½œç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥å‡½æ•°ä¸èƒ½åšå‡ºä»»ä½•åœ¨å‡½æ•°æœ¬èº«ä¹‹å¤–å¯ä»¥è§‚å¯Ÿåˆ°çš„æ”¹å˜\u0026ndash;ä¾‹å¦‚ï¼Œé€šè¿‡æ”¹å˜ä¸€ä¸ªå¤–éƒ¨å¯è®¿é—®çš„å¯æ”¹å˜å¯¹è±¡æˆ–å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚  è¿™äº›ç‰¹æ€§ä½¿ä½ æ›´å®¹æ˜“æ¨ç†ä½ çš„ç¨‹åºï¼Œå› ä¸ºè¿™äº›å‡½æ•°æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œæ— æ³•å½±å“ä½ ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ã€‚å½“ä½ ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œä½ ä¸å¿…é—®è‡ªå·±ï¼Œ\u0026ldquo;æˆ‘è°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼šç ´åä»€ä¹ˆï¼Ÿ\u0026rdquo; å®ƒä»¬ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼šä½ æ°¸è¿œä¸éœ€è¦ææ¸…æ¥šä¸ºä»€ä¹ˆç»™ä¸€ä¸ªå‡½æ•°ä¼ é€’ç›¸åŒçš„å‚æ•°ä¼šå¯¼è‡´ä¸åŒçš„è¿”å›å€¼ï¼Œå› ä¸ºè¿™æ°¸è¿œä¸ä¼šå‘ç”Ÿã€‚\nçº¯å‡½æ•°å’Œç®—æœ¯ä¸€æ ·ç¨³å®šï¼Œæ²¡æœ‰é—®é¢˜ï¼ˆä½ æœ€åä¸€æ¬¡ä¸ºä¸¤ä¸ªæ•°å­—ç›¸åŠ è€Œçƒ¦æ¼æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿï¼‰ å®ƒä»¬æ˜¯å·¨å¤§çš„å‡½æ•°å°ç –å—ï¼Œä½ å¯ä»¥è‡ªä¿¡åœ°å°†å…¶ä½œä¸ºä½ ç¨‹åºçš„åŸºç¡€ã€‚è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°çœ‹çœ‹å¼•ç”¨é€æ˜æ€§å’Œæ— å‰¯ä½œç”¨ï¼Œçœ‹çœ‹å®ƒä»¬åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å‘æŒ¥ä½œç”¨çš„ã€‚\nçº¯å‡½æ•°æ˜¯å¼•ç”¨é€æ˜çš„ ä¸ºäº†åœ¨è°ƒç”¨ç›¸åŒå‚æ•°æ—¶è¿”å›ç›¸åŒçš„ç»“æœï¼Œçº¯å‡½æ•°åªä¾é  1ï¼‰è‡ªå·±çš„å‚æ•°å’Œ 2ï¼‰ä¸å¯å˜çš„å€¼æ¥å†³å®šå…¶è¿”å›å€¼ã€‚ä¾‹å¦‚ï¼Œæ•°å­¦å‡½æ•°æ˜¯å¼•ç”¨é€æ˜çš„ã€‚\n(+ 1 2) ; =\u0026gt; 3 å¦‚æœä¸€ä¸ªå‡½æ•°ä¾èµ–äºä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å¼•ç”¨é€æ˜çš„ã€‚å­—ç¬¦ä¸²`\u0026rdquo;, Daniel-san \u0026ldquo;æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥ä¸‹é¢çš„å‡½æ•°ä¹Ÿæ˜¯å¼•ç”¨é€æ˜çš„ã€‚\n(defn wisdom  [words]  (str words \u0026#34;, Daniel-san\u0026#34;))  (wisdom \u0026#34;Always bathe on Fridays\u0026#34;) ; =\u0026gt; \u0026#34;Always bathe on Fridays, Daniel-san\u0026#34; ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸‹é¢çš„å‡½æ•°åœ¨ç›¸åŒçš„å‚æ•°ä¸‹ä¸ä¼šäº§ç”Ÿç›¸åŒçš„ç»“æœï¼›å› æ­¤ï¼Œå®ƒä»¬åœ¨æŒ‡ç§°ä¸Šæ˜¯ä¸é€æ˜çš„ã€‚ä»»ä½•ä¾èµ–éšæœºæ•°ç”Ÿæˆå™¨çš„å‡½æ•°éƒ½ä¸å¯èƒ½æ˜¯æŒ‡ç§°é€æ˜çš„ã€‚\n(defn year-end-evaluation  []  (if (\u0026gt; (rand) 0.5)  \u0026#34;You get a raise!\u0026#34;  \u0026#34;Better luck next year!\u0026#34;)) å¦‚æœä½ çš„å‡½æ•°ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å‡ºï¼Œå®ƒå°±ä¸æ˜¯å¼•ç”¨é€æ˜çš„ï¼Œå› ä¸ºæ–‡ä»¶çš„å†…å®¹å¯ä»¥æ”¹å˜ã€‚ä¸‹é¢çš„å‡½æ•°analyze-fileä¸æ˜¯å¼•ç”¨é€æ˜çš„ï¼Œä½†å‡½æ•°analysisæ˜¯é€æ˜çš„ã€‚\n(defn analyze-file  [filename]  (analysis (slurp filename)))  (defn analysis  [text]  (str \u0026#34;Character count: \u0026#34; (count text))) å½“ä½¿ç”¨ä¸€ä¸ªå¼•ç”¨é€æ˜çš„å‡½æ•°æ—¶ï¼Œä½ æ°¸è¿œä¸å¿…è€ƒè™‘å“ªäº›å¯èƒ½çš„å¤–éƒ¨æ¡ä»¶ä¼šå½±å“å‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚æœä½ çš„å‡½æ•°åœ¨å¤šä¸ªåœ°æ–¹è¢«ä½¿ç”¨ï¼Œæˆ–è€…å®ƒè¢«æ·±æ·±åœ°åµŒå¥—åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨é“¾ä¸­ï¼Œè¿™ä¸€ç‚¹å°±ç‰¹åˆ«é‡è¦ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é«˜æ•æ— å¿§åœ°çŸ¥é“ï¼Œå¤–éƒ¨æ¡ä»¶çš„å˜åŒ–ä¸ä¼šå¯¼è‡´ä½ çš„ä»£ç ä¸­æ–­ã€‚\nå¦ä¸€ç§æ€è€ƒæ–¹å¼æ˜¯ï¼Œç°å®åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å¼•ç”¨é€æ˜çš„ã€‚å¦‚æœä½ æŠŠé‡åŠ›çœ‹ä½œä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¼•åŠ›å°±æ˜¯åœ¨ä¸¤ä¸ªç‰©ä½“ä¸Šè°ƒç”¨è¯¥å‡½æ•°çš„è¿”å›å€¼ã€‚å› æ­¤ï¼Œå½“ä½ ä¸‹æ¬¡å‚åŠ ç¼–ç¨‹é¢è¯•æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡æŠŠé¢è¯•å®˜æ¡Œä¸Šçš„ä¸œè¥¿æ‰“æ‰æ¥è¯æ˜ä½ çš„å‡½æ•°å¼ç¼–ç¨‹çŸ¥è¯†ï¼ˆè¿™ä¹Ÿè¯æ˜ä½ çŸ¥é“å¦‚ä½•åœ¨ä¸€ä¸ªé›†åˆä¸Šåº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼‰ã€‚\nçº¯å‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨ æ‰§è¡Œå‰¯ä½œç”¨å°±æ˜¯åœ¨ä¸€ä¸ªç»™å®šçš„èŒƒå›´å†…æ”¹å˜ä¸€ä¸ªåå­—å’Œå®ƒçš„å€¼ä¹‹é—´çš„å…³è”ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª JavaScript çš„ä¾‹å­ã€‚\nvar haplessObject = {  emotion: \u0026#34;Carefree!\u0026#34; };  var evilMutator = function(object){  object.emotion = \u0026#34;So emo :\u0026#39;(\u0026#34;; }  evilMutator(haplessObject); haplessObject.emotion; // =\u0026gt; \u0026#34;So emo :\u0026#39;(\u0026#34; å½“ç„¶ï¼Œä½ çš„ç¨‹åºå¿…é¡»è¦æœ‰ä¸€äº›å‰¯ä½œç”¨ã€‚å®ƒå†™å…¥ç£ç›˜ï¼Œæ”¹å˜äº†æ–‡ä»¶åå’Œç£ç›˜æ‰‡åŒºé›†åˆä¹‹é—´çš„å…³è”ï¼›å®ƒæ”¹å˜äº†æ˜¾ç¤ºå™¨åƒç´ çš„ RGB å€¼ï¼›ç­‰ç­‰ã€‚å¦åˆ™ï¼Œè¿è¡Œå®ƒå°±æ²¡æœ‰æ„ä¹‰äº†ã€‚\nç„¶è€Œï¼Œå‰¯ä½œç”¨æ˜¯æ½œåœ¨çš„æœ‰å®³çš„ï¼Œå› ä¸ºå®ƒä»¬å¸¦æ¥äº†å…³äºä½ çš„ä»£ç ä¸­çš„åç§°æ‰€æŒ‡çš„ä¸ç¡®å®šæ€§ã€‚è¿™å°±å¯¼è‡´äº†å¾ˆéš¾è¿½è¸ªä¸ºä»€ä¹ˆä»¥åŠå¦‚ä½•å°†ä¸€ä¸ªåå­—ä¸ä¸€ä¸ªå€¼è”ç³»èµ·æ¥çš„æƒ…å†µï¼Œè¿™å°±ä½¿ç¨‹åºçš„è°ƒè¯•å˜å¾—éå¸¸å›°éš¾ã€‚å½“ä½ è°ƒç”¨ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°æ—¶ï¼Œä½ åªéœ€è¦è€ƒè™‘è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å…³ç³»ã€‚ä½ ä¸å¿…æ‹…å¿ƒå…¶ä»–å¯èƒ½åœ¨ä½ çš„ç³»ç»Ÿä¸­å‡ºç°çš„å˜åŒ–ã€‚\nå¦ä¸€æ–¹é¢ï¼Œæœ‰å‰¯ä½œç”¨çš„å‡½æ•°ç»™ä½ çš„æ€æƒ³è‘¡è„å¸¦æ¥äº†æ›´å¤šçš„è´Ÿæ‹…ï¼šç°åœ¨ä½ å¿…é¡»æ‹…å¿ƒå½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œä¸–ç•Œæ˜¯å¦‚ä½•å—åˆ°å½±å“çš„ã€‚ä¸ä»…å¦‚æ­¤ï¼Œæ¯ä¸€ä¸ªä¾èµ–äºå‰¯ä½œç”¨å‡½æ•°çš„å‡½æ•°éƒ½ä¼šè¢«è¿™ç§æ‹…å¿§æ‰€æ„ŸæŸ“ï¼›å®ƒä¹Ÿä¼šæˆä¸ºä½ åœ¨æ„å»ºç¨‹åºæ—¶éœ€è¦æ ¼å¤–å°å¿ƒå’Œæ€è€ƒçš„å¦ä¸€ä¸ªç»„ä»¶ã€‚\nå¦‚æœä½ æœ‰ä½¿ç”¨ Ruby æˆ– JavaScript ç­‰è¯­è¨€çš„é‡è¦ç»éªŒï¼Œä½ å¯èƒ½å·²ç»é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«ä¼ æ¥ä¼ å»çš„æ—¶å€™ï¼Œå®ƒçš„å±æ€§ä¸çŸ¥ä¸è§‰åœ°å‘ç”Ÿäº†å˜åŒ–ï¼Œè€Œä½ å´ä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚ç„¶åä½ ä¸å¾—ä¸ä¹°ä¸€å°æ–°çš„ç”µè„‘ï¼Œå› ä¸ºä½ æŠŠä½ çš„ç”µè„‘æ‰”åˆ°äº†çª—å¤–ã€‚å¦‚æœä½ è¯»è¿‡ä»»ä½•å…³äºé¢å‘å¯¹è±¡è®¾è®¡çš„æ–‡ç« ï¼Œä½ å°±ä¼šçŸ¥é“ï¼Œå¾ˆå¤šæ–‡ç« éƒ½æ˜¯å…³äºç®¡ç†çŠ¶æ€å’Œå‡å°‘å‰¯ä½œç”¨çš„ç­–ç•¥ï¼Œæ­£æ˜¯å› ä¸ºè¿™ä¸ªåŸå› ã€‚\nç”±äºæ‰€æœ‰è¿™äº›åŸå› ï¼Œåœ¨ä½ çš„ä»£ç ä¸­å¯»æ‰¾é™åˆ¶ä½¿ç”¨å‰¯ä½œç”¨çš„æ–¹æ³•æ˜¯ä¸ªå¥½ä¸»æ„ã€‚å¹¸è¿çš„æ˜¯ï¼ŒClojure é€šè¿‡ä¸é—ä½™åŠ›åœ°é™åˆ¶å‰¯ä½œç”¨æ¥ä½¿ä½ çš„å·¥ä½œå˜å¾—æ›´å®¹æ˜“\u0026ndash;å®ƒçš„æ‰€æœ‰æ ¸å¿ƒæ•°æ®ç»“æ„éƒ½æ˜¯ä¸å¯æ”¹å˜çš„ã€‚æ— è®ºä½ å¦‚ä½•åŠªåŠ›ï¼Œä½ éƒ½æ— æ³•åœ¨åŸåœ°æ”¹å˜å®ƒä»¬ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—ä½ æœ€å–œæ¬¢çš„å·¥å…·è¢«å‰¥å¤ºäº†ã€‚ä½ æ€ä¹ˆèƒ½*åšæ²¡æœ‰å‰¯ä½œç”¨çš„äº‹æƒ…å‘¢ï¼Ÿå¥½å§ï¼Œè¿™å°±æ˜¯ä¸‹ä¸€èŠ‚è¦è®²çš„å†…å®¹! è¿™æ®µè¯æ€ä¹ˆæ ·ï¼Œå—¯ï¼Ÿè¯¶ï¼Ÿ\nä¸ä¸å¯å˜çš„æ•°æ®ç»“æ„å…±å¤„ ä¸å¯å˜çš„æ•°æ®ç»“æ„ç¡®ä¿ä½ çš„ä»£ç ä¸ä¼šæœ‰å‰¯ä½œç”¨ã€‚æ­£å¦‚ä½ ç°åœ¨è¡·å¿ƒçŸ¥é“çš„ï¼Œè¿™æ˜¯ä¸€ä»¶å¥½äº‹ã€‚ä½†ä½ å¦‚ä½•åœ¨æ²¡æœ‰å‰¯ä½œç”¨çš„æƒ…å†µä¸‹å®Œæˆä»»ä½•äº‹æƒ…å‘¢ï¼Ÿ\né€’å½’è€Œä¸æ˜¯ for/while å¦‚æœä½ æ›¾ç»åœ¨ JavaScript ä¸­å†™è¿‡è¿™æ ·çš„ä¸œè¥¿ï¼Œè¯·ä¸¾æ‰‹ã€‚\nvar wrestlers = getAlligatorWrestlers(); var totalBites = 0; var l = wrestlers.length;  for(var i=0; i \u0026lt; l; i++){  totalBites += wrestlers[i].timesBitten; } æˆ–è€…è¿™æ ·ã€‚\nvar allPatients = getArkhamPatients(); var analyzedPatients = []; var l = allPatients.length;  for(var i=0; i \u0026lt; l; i++){  if(allPatients[i].analyzed){  analyzedPatients.push(allPatients[i]);  } } æ³¨æ„è¿™ä¸¤ä¸ªä¾‹å­éƒ½å¯¹å¾ªç¯å˜é‡iä»¥åŠå¾ªç¯å¤–çš„ä¸€ä¸ªå˜é‡ï¼ˆç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„totalBiteså’Œç¬¬äºŒä¸ªä¾‹å­ä¸­çš„analyzedPatientsï¼‰äº§ç”Ÿäº†å‰¯ä½œç”¨ã€‚ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨å‰¯ä½œç”¨\u0026ndash;æ”¹å˜***å†…éƒ¨çš„å˜é‡\u0026ndash;æ˜¯ç›¸å½“æ— å®³çš„ã€‚ä½ åœ¨åˆ›é€ æ–°çš„å€¼ï¼Œè€Œä¸æ˜¯æ”¹å˜ä½ ä»ç¨‹åºä¸­å…¶ä»–åœ°æ–¹å¾—åˆ°çš„å¯¹è±¡ã€‚\nä½†æ˜¯ Clojure çš„æ ¸å¿ƒæ•°æ®ç»“æ„ç”šè‡³ä¸å…è®¸è¿™äº›æ— å®³çš„å˜å¼‚ã€‚é‚£ä¹ˆï¼Œä½ èƒ½åšä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆï¼Œå¿½ç•¥ä¸€ä¸ªäº‹å®ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨mapå’Œreduceæ¥å®Œæˆå‰é¢çš„å·¥ä½œã€‚åœ¨è¿™äº›æƒ…å†µä¸‹\u0026ndash;å¯¹ä¸€äº›é›†åˆè¿›è¡Œè¿­ä»£ä»¥å»ºç«‹ä¸€ä¸ªç»“æœ\u0026ndash;æ›¿ä»£çªå˜çš„å‡½æ•°æ˜¯é€’å½’ã€‚\nè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œå»ºç«‹ä¸€ä¸ªæ€»å’Œã€‚Clojure æ²¡æœ‰èµ‹å€¼è¿ç®—ç¬¦ã€‚å¦‚æœä¸åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œä½ å°±æ— æ³•å°†ä¸€ä¸ªæ–°çš„å€¼ä¸ä¸€ä¸ªåå­—è”ç³»èµ·æ¥ã€‚\n(def great-baby-name \u0026#34;Rosanthony\u0026#34;) great-baby-name ; =\u0026gt; \u0026#34;Rosanthony\u0026#34;  (let [great-baby-name \u0026#34;Bloodthunder\u0026#34;]  great-baby-name) ; =\u0026gt; \u0026#34;Bloodthunder\u0026#34;  great-baby-name ; =\u0026gt; \u0026#34;Rosanthony\u0026#34; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ é¦–å…ˆåœ¨å…¨å±€ä½œç”¨åŸŸä¸­å°† \u0026ldquo;great-baby-name \u0026ldquo;ä¸ \u0026ldquo;Rosanthony \u0026ldquo;ç»‘å®šã€‚æ¥ä¸‹æ¥ï¼Œä½ ç”¨letå¼•å…¥ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚åœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­ï¼Œä½ å°†great-baby-nameç»‘å®šåˆ°\u0026quot;Bloodthunder\u0026quot;ã€‚ä¸€æ—¦ Clojure å®Œæˆäº†å¯¹letè¡¨è¾¾å¼çš„æ±‚å€¼ï¼Œä½ å°±å›åˆ°äº†å…¨å±€èŒƒå›´ï¼Œgreat-baby-nameå†æ¬¡è¢«æ±‚å€¼ä¸º\u0026quot;Rosanthony\u0026quot;ã€‚\nClojure è®©ä½ ç”¨é€’å½’æ¥è§£å†³è¿™ä¸ªæ˜æ˜¾çš„é™åˆ¶ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†è§£å†³é€’å½’é—®é¢˜çš„ä¸€èˆ¬æ–¹æ³•ã€‚\n(defn sum âŠ ([vals] (sum vals 0))  ([vals accumulating-total] â‹ (if (empty? vals)  accumulating-total  (sum (rest vals) (+ (first vals) accumulating-total))))) è¿™ä¸ªå‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªè¦å¤„ç†çš„é›†åˆï¼ˆvalsï¼‰å’Œä¸€ä¸ªç´¯åŠ å™¨ï¼ˆaccumulating-totalï¼‰ï¼Œå®ƒä½¿ç”¨äº† arity é‡è½½ï¼ˆåœ¨ç¬¬ä¸‰ç« æœ‰ä»‹ç»ï¼‰ï¼Œåœ¨âŠä¸ºaccumulating-totalæä¾›ä¸€ä¸ªé»˜è®¤å€¼0ã€‚\nåƒæ‰€æœ‰çš„é€’å½’è§£å†³æ–¹æ¡ˆä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°æ ¹æ®ä¸€ä¸ªåŸºæœ¬æ¡ä»¶æ£€æŸ¥å®ƒæ‰€å¤„ç†çš„å‚æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ£€æŸ¥valsåœ¨â‹æ˜¯å¦ä¸ºç©ºã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å·²ç»å¤„ç†äº†é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å›`ç´¯è®¡-æ€»æ•°\u0026rsquo;ã€‚\nå¦‚æœvalsä¸æ˜¯ç©ºçš„ï¼Œæ„å‘³ç€æˆ‘ä»¬è¿˜åœ¨å¤„ç†è¿™ä¸ªåºåˆ—ï¼Œæ‰€ä»¥æˆ‘ä»¬é€’å½’è°ƒç”¨sumï¼Œç»™å®ƒä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šç”¨(å…¶ä½™çš„vals)è¡¨ç¤º vals çš„*å°¾éƒ¨ï¼Œç”¨(+(ç¬¬ä¸€ä¸ªvals)ç´¯åŠ æ€»æ•°)è¡¨ç¤ºvalsçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ç´¯åŠ æ€»æ•°ä¹‹å’Œã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å»ºç«‹äº†ç´¯ç§¯æ€»æ•°ï¼ŒåŒæ—¶å‡å°‘valsï¼Œç›´åˆ°å®ƒè¾¾åˆ°ç©ºé›†åˆçš„åŸºæœ¬æƒ…å†µã€‚\nä¸‹é¢æ˜¯é€’å½’å‡½æ•°è°ƒç”¨çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒæ¯æ¬¡é€’å½’çš„æƒ…å†µåˆ†å¼€ï¼Œå°±ä¼šæ˜¯è¿™æ ·çš„ã€‚\n(sum [39 5 1]) ; single-arity body calls two-arity body (sum [39 5 1] 0) (sum [5 1] 39) (sum [1] 44) (sum [] 45) ; base case is reached, so return accumulating-total ; =\u0026gt; 45 å¯¹sumçš„æ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œå…¶ä¸­valså’Œaccumulating-totalè¢«ç»‘å®šåˆ°ä¸åŒçš„å€¼ä¸Šï¼Œæ‰€æœ‰è¿™äº›éƒ½ä¸éœ€è¦æ”¹å˜æœ€åˆä¼ é€’ç»™å‡½æ•°çš„å€¼æˆ–æ‰§è¡Œä»»ä½•å†…éƒ¨å˜å¼‚ã€‚æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä½ å¯ä»¥åœ¨æ²¡æœ‰çªå˜çš„æƒ…å†µä¸‹é¡ºåˆ©å®Œæˆã€‚\nè¯·æ³¨æ„ï¼Œå‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œåœ¨è¿›è¡Œé€’å½’æ—¶ï¼Œä½ ä¸€èˆ¬åº”è¯¥ä½¿ç”¨recurã€‚åŸå› æ˜¯ Clojure ä¸æä¾›å°¾éƒ¨è°ƒç”¨çš„ä¼˜åŒ–ï¼Œè¿™ä¸ªè¯é¢˜æˆ‘ä¸ä¼šå†æäº†ï¼ï¼ˆè¯·æŸ¥çœ‹è¿™ä¸ªç½‘å€ï¼‰ã€‚(æŸ¥çœ‹è¿™ä¸ªç½‘å€ä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚http://en.wikipedia.org/wiki/Tail_callï¼‰ã€‚æ‰€ä»¥ä½ å¯ä»¥ç”¨recuræ¥åšè¿™ä¸ªã€‚\n(defn sum  ([vals]  (sum vals 0))  ([vals accumulating-total]  (if (empty? vals)  accumulating-total  (recur (rest vals) (+ (first vals) accumulating-total))))) å¦‚æœä½ åœ¨ä¸€ä¸ªå°çš„é›†åˆä¸Šè¿›è¡Œé€’å½’æ“ä½œï¼Œä½¿ç”¨recurå¹¶ä¸é‡è¦ï¼Œä½†å¦‚æœä½ çš„é›†åˆåŒ…å«æ•°åƒæˆ–æ•°ç™¾ä¸‡ä¸ªå€¼ï¼Œä½ è‚¯å®šéœ€è¦ä½¿ç”¨recurï¼Œè¿™æ ·ä½ å°±ä¸ä¼šå› ä¸ºå †æ ˆæº¢å‡ºè€Œä½¿ç¨‹åºçˆ†ç‚¸ã€‚\næœ€åä¸€ä»¶äº‹! ä½ å¯èƒ½ä¼šè¯´ï¼Œ\u0026ldquo;ç­‰ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘æœ€ç»ˆåˆ›é€ äº†æˆåƒä¸Šä¸‡çš„ä¸­é—´å€¼æ€ä¹ˆåŠï¼Ÿè¿™ä¸ä¼šå› ä¸ºåƒåœ¾æ”¶é›†æˆ–å…¶ä»–åŸå› å¯¼è‡´ç¨‹åºå´©æºƒå—ï¼Ÿ\u0026rdquo;\néå¸¸å¥½çš„é—®é¢˜ï¼Œé¹°çœ¼çš„è¯»è€…! ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚åŸå› æ˜¯ï¼Œåœ¨å¹•åï¼ŒClojure çš„ä¸å¯å˜æ•°æ®ç»“æ„æ˜¯ä½¿ç”¨ç»“æ„å…±äº«å®ç°çš„ï¼Œè¿™å®Œå…¨è¶…å‡ºäº†æœ¬ä¹¦çš„èŒƒå›´ã€‚è¿™æœ‰ç‚¹åƒ Git! å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œè¯·é˜…è¯»è¿™ç¯‡ä¼Ÿå¤§çš„æ–‡ç« ã€‚http://hypirion.com/musings/understanding-persistent-vector-pt-1ã€‚\nå‡½æ•°ç»„åˆè€Œä¸æ˜¯å±æ€§çªå˜ ä½ å¯èƒ½ä¹ æƒ¯äºä½¿ç”¨çªå˜çš„å¦ä¸€ç§æ–¹å¼æ˜¯å»ºç«‹èµ·ä¸€ä¸ªå¯¹è±¡çš„æœ€ç»ˆçŠ¶æ€ã€‚åœ¨ä¸‹é¢çš„ Ruby ä¾‹å­ä¸­ï¼ŒGlamourShotCaptionå¯¹è±¡ä½¿ç”¨çªå˜æ¥æ¸…ç†è¾“å…¥ï¼Œåˆ é™¤å°¾éƒ¨çš„ç©ºæ ¼å¹¶å°†`\u0026ldquo;lol \u0026ldquo;å¤§å†™ã€‚\nclass GlamourShotCaption  attr_reader :text  def initialize(text)  @text = text  clean!  end   private  def clean!  text.trim!  text.gsub!(/lol/, \u0026#34;LOL\u0026#34;)  end end  best = GlamourShotCaption.new(\u0026#34;My boa constrictor is so sassy lol! \u0026#34;) best.text ; =\u0026gt; \u0026#34;My boa constrictor is so sassy LOL!\u0026#34; åœ¨è¿™æ®µä»£ç ä¸­ï¼ŒGlamourShotCaptionç±»å°è£…äº†å¦‚ä½•æ¸…ç†é­…åŠ›é•œå¤´æ ‡é¢˜çš„çŸ¥è¯†ã€‚åœ¨åˆ›å»ºGlamourShotCaptionå¯¹è±¡æ—¶ï¼Œä½ å°†æ–‡æœ¬åˆ†é…ç»™ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå¹¶é€æ­¥æ”¹å˜å®ƒã€‚\næ¸…å• 5-1 æ˜¾ç¤ºäº†ä½ å¦‚ä½•åœ¨ Clojure ä¸­åšåˆ°è¿™ä¸€ç‚¹ã€‚\n(require \u0026#39;[clojure.string :as s]) (defn clean  [text]  (s/replace (s/trim text) #\u0026#34;lol\u0026#34; \u0026#34;LOL\u0026#34;))  (clean \u0026#34;My boa constrictor is so sassy lol! \u0026#34;) ; =\u0026gt; \u0026#34;My boa constrictor is so sassy LOL!\u0026#34;  5-1. ä½¿ç”¨å‡½æ•°ç»„åˆæ¥ä¿®æ”¹ä¸€ä¸ªè¿·äººçš„é•œå¤´æ ‡é¢˜  åœ¨ç¬¬ä¸€è¡Œï¼Œæˆ‘ä»¬ä½¿ç”¨requireæ¥è®¿é—®å­—ç¬¦ä¸²å‡½æ•°åº“ï¼ˆæˆ‘å°†åœ¨ç¬¬å…­ç« è®¨è®ºè¿™ä¸ªå‡½æ•°å’Œç›¸å…³æ¦‚å¿µï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™æ®µä»£ç å¾ˆç®€å•ã€‚ä¸éœ€è¦å˜å¼‚ã€‚cleanå‡½æ•°çš„å·¥ä½œæ–¹å¼æ˜¯å°†ä¸€ä¸ªä¸å¯å˜çš„å€¼textä¼ é€’ç»™ä¸€ä¸ªçº¯å‡½æ•°s/trimï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼ˆ\u0026quot;æˆ‘çš„èŸ’è›‡çœŸæ—¶é«¦ lol!\u0026quot;ï¼›å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼å·²ç»è¢«ä¿®å‰ªï¼‰ã€‚ç„¶åï¼Œè¯¥å€¼è¢«ä¼ é€’ç»™çº¯å‡½æ•°s/replaceï¼Œè¯¥å‡½æ•°è¿”å›å¦ä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼ˆ\u0026ldquo;æˆ‘çš„èŸ’è›‡æ˜¯å¦‚æ­¤çš„æ—¶é«¦ LOLï¼\u0026quot;ï¼‰ã€‚\nåƒè¿™æ ·ç»„åˆå‡½æ•°\u0026ndash;ä½¿ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°\u0026ndash;è¢«ç§°ä¸ºå‡½æ•°ç»„åˆã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ä¹‹å‰ä½¿ç”¨é€’å½’çš„ä¾‹å­å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œå› ä¸ºé€’å½’ä¸æ–­åœ°å°†ä¸€ä¸ªå‡½æ•°çš„ç»“æœä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼›å®ƒåªæ˜¯ç¢°å·§æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå‡½æ•°å¼ç¼–ç¨‹é¼“åŠ±ä½ é€šè¿‡ç»„åˆæ›´ç®€å•çš„å‡½æ•°æ¥å»ºç«‹æ›´å¤æ‚çš„å‡½æ•°ã€‚\nè¿™ç§æ¯”è¾ƒä¹Ÿå¼€å§‹æ­ç¤ºäº†é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„ä¸€äº›é™åˆ¶ã€‚åœ¨ OOP ä¸­ï¼Œç±»çš„ä¸»è¦ç›®çš„ä¹‹ä¸€æ˜¯é˜²æ­¢å¯¹ç§æœ‰æ•°æ®è¿›è¡Œä¸å¿…è¦çš„ä¿®æ”¹\u0026ndash;è¿™åœ¨ä¸å¯å˜çš„æ•°æ®ç»“æ„ä¸­æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚ä½ è¿˜å¿…é¡»å°†æ–¹æ³•ä¸ç±»ç´§å¯†ç»“åˆï¼Œä»è€Œé™åˆ¶äº†æ–¹æ³•çš„å¯é‡ç”¨æ€§ã€‚åœ¨ Ruby çš„ä¾‹å­ä¸­ï¼Œä½ å¿…é¡»åšé¢å¤–çš„å·¥ä½œæ¥é‡å¤ä½¿ç”¨clean!æ–¹æ³•ã€‚åœ¨ Clojure ä¸­ï¼Œ`clean\u0026rsquo;å¯ä»¥å¯¹ä»»ä½•å­—ç¬¦ä¸²èµ·ä½œç”¨ã€‚é€šè¿‡ aï¼‰å°†å‡½æ•°å’Œæ•°æ®è§£è€¦ï¼Œä»¥åŠ bï¼‰æ ¹æ®ä¸€ç»„å°çš„æŠ½è±¡è¿›è¡Œç¼–ç¨‹ï¼Œä½ æœ€ç»ˆä¼šå¾—åˆ°æ›´å¤šå¯é‡ç”¨çš„ã€å¯ç»„åˆçš„ä»£ç ã€‚ä½ è·å¾—äº†åŠ›é‡ï¼Œå´æ²¡æœ‰æŸå¤±ã€‚\né™¤äº†ç›´æ¥çš„å®é™…é—®é¢˜ä¹‹å¤–ï¼Œä½ å†™é¢å‘å¯¹è±¡çš„ä»£ç å’Œå‡½æ•°å¼ä»£ç çš„æ–¹å¼ä¹‹é—´çš„å·®å¼‚æŒ‡å‘äº†ä¸¤ç§æ€ç»´æ–¹å¼ä¹‹é—´æ›´æ·±å±‚æ¬¡çš„å·®å¼‚ã€‚ç¼–ç¨‹æ˜¯ä¸ºäº†ä½ è‡ªå·±é‚ªæ¶çš„ç›®çš„è€Œæ“çºµæ•°æ®ï¼ˆå°±åƒä½ å¯ä»¥è¯´å®ƒæ˜¯å…³äºä»»ä½•ä¸œè¥¿ï¼‰ã€‚åœ¨ OOP ä¸­ï¼Œä½ æŠŠæ•°æ®çœ‹æˆæ˜¯å¯ä»¥ä½“ç°åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­çš„ä¸œè¥¿ï¼Œä½ æˆ³æˆ³ç‚¹ç‚¹ï¼Œç›´åˆ°å®ƒçœ‹èµ·æ¥åˆé€‚ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ çš„åŸå§‹æ•°æ®ä¼šæ°¸è¿œä¸¢å¤±ï¼Œé™¤éä½ éå¸¸å°å¿ƒåœ°ä¿å­˜å®ƒã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä½ è®¤ä¸ºæ•°æ®æ˜¯ä¸å˜çš„ï¼Œä½ ä»ç°æœ‰çš„æ•°æ®ä¸­å¯¼å‡ºæ–°çš„æ•°æ®ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒåŸå§‹æ•°æ®ä»ç„¶å®‰å…¨æ— æ™ã€‚åœ¨å‰é¢çš„ Clojure ä¾‹å­ä¸­ï¼ŒåŸå§‹æ ‡é¢˜ä¸ä¼šè¢«ä¿®æ”¹ã€‚å®ƒæ˜¯å®‰å…¨çš„ï¼Œå°±åƒå½“ä½ æŠŠæ•°å­—åŠ åœ¨ä¸€èµ·æ—¶æ˜¯å®‰å…¨çš„ä¸€æ ·ï¼›å½“ä½ æŠŠ 3 åŠ è¿›å»æ—¶ï¼Œä½ ä¸ä¼šä»¥æŸç§æ–¹å¼æŠŠ 4 å˜æˆ 7ã€‚\nä¸€æ—¦ä½ æœ‰ä¿¡å¿ƒä½¿ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„æ¥å®Œæˆå·¥ä½œï¼Œä½ ä¼šæ„Ÿåˆ°æ›´åŠ è‡ªä¿¡ï¼Œå› ä¸ºä½ ä¸å¿…æ‹…å¿ƒæœ‰ä»€ä¹ˆè‚®è„çš„ä»£ç ä¼šåœ¨ä½ å®è´µçš„ã€å¯å˜çš„å˜é‡ä¸Šæ²¾ä¸Šæ²¹è…»çš„çˆªå­ã€‚è¿™å°†æ˜¯å¾ˆå¥½çš„!\nç”¨çº¯å‡½æ•°åšçš„é…·äº‹ ä½ å¯ä»¥ä»ç°æœ‰çš„å‡½æ•°ä¸­æ´¾ç”Ÿå‡ºæ–°çš„å‡½æ•°ï¼Œå°±åƒä½ ä»ç°æœ‰çš„æ•°æ®ä¸­æ´¾ç”Ÿå‡ºæ–°çš„æ•°æ®ä¸€æ ·ã€‚ä½ å·²ç»çœ‹åˆ°äº†ä¸€ä¸ªå‡½æ•°ï¼Œpartialï¼Œå®ƒå¯ä»¥åˆ›å»ºæ–°çš„å‡½æ•°ã€‚æœ¬èŠ‚å°†å‘ä½ ä»‹ç»å¦å¤–ä¸¤ä¸ªå‡½æ•°, compå’Œmemoize, å®ƒä»¬ä¾èµ–äºå¼•ç”¨é€æ˜æ€§, ä¸å˜æ€§, æˆ–ä¸¤è€…å…¼æœ‰.\ncomp åƒæˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­æ‰€åšçš„é‚£æ ·ï¼Œå¯¹çº¯å‡½æ•°è¿›è¡Œç»„åˆæ€»æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºä½ åªéœ€è¦æ‹…å¿ƒå®ƒä»¬çš„è¾“å…¥/è¾“å‡ºå…³ç³»ã€‚ç»„åˆå‡½æ•°æ˜¯å¦‚æ­¤çš„æ™®éï¼Œä»¥è‡³äº Clojure æä¾›äº†ä¸€ä¸ªå‡½æ•°compï¼Œç”¨äºä»ä»»æ„æ•°é‡çš„å‡½æ•°ç»„åˆä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n((comp inc *) 2 3) ; =\u0026gt; 7 åœ¨è¿™é‡Œï¼Œä½ é€šè¿‡ç»„åˆincå’Œ*å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ç„¶åï¼Œä½ ç«‹å³å°†è¿™ä¸ªå‡½æ•°åº”ç”¨äºå‚æ•°2å’Œ3ã€‚è¯¥å‡½æ•°å°†æ•°å­— 2 å’Œ 3 ç›¸ä¹˜ï¼Œç„¶åå°†ç»“æœé€’å¢ã€‚ä½¿ç”¨æ•°å­¦ç¬¦å·ï¼Œä½ ä¼šè¯´ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¯¹å‡½æ•°f1, f2, \u0026hellip; fnï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°gï¼Œä½¿å¾—g(x1, x2, \u0026hellip; xn)ç­‰äºf1( f2( fn(x1, x2, \u0026hellip; xn))ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œç¬¬ä¸€ä¸ªåº”ç”¨çš„å‡½æ•°\u0026ndash;è¿™é‡Œæ˜¾ç¤ºçš„ä»£ç ä¸­çš„*\u0026ndash;å¯ä»¥æ¥å—ä»»ä½•æ•°é‡çš„å‚æ•°ï¼Œè€Œå…¶ä½™çš„å‡½æ•°å¿…é¡»åªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œè¯´æ˜å¦‚ä½•ä½¿ç”¨compæ¥æ£€ç´¢è§’è‰²æ‰®æ¼”æ¸¸æˆä¸­çš„è§’è‰²å±æ€§ã€‚\n(def character  {:name \u0026#34;Smooches McCutes\u0026#34;  :attributes {:intelligence 10  :strength 4  :dexterity 5}}) (def c-int (comp :intelligence :attributes)) (def c-str (comp :strength :attributes)) (def c-dex (comp :dexterity :attributes))  (c-int character) ; =\u0026gt; 10  (c-str character) ; =\u0026gt; 4  (c-dex character) ; =\u0026gt; 5 åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åˆ›å»ºäº†ä¸‰ä¸ªå‡½æ•°æ¥å¸®åŠ©ä½ æŸ¥è¯¢ä¸€ä¸ªè§’è‰²çš„å±æ€§ã€‚ä½ å¯ä»¥ä¸ä½¿ç”¨compï¼Œè€Œæ˜¯ä¸ºæ¯ä¸ªå±æ€§å†™æˆè¿™æ ·çš„ä¸œè¥¿ã€‚\n(fn [c] (:strength (:attributes c))) ä½†compæ›´ä¼˜é›…ï¼Œå› ä¸ºå®ƒç”¨æ›´å°‘çš„ä»£ç æ¥è¡¨è¾¾æ›´å¤šçš„æ„æ€ã€‚å½“ä½ çœ‹åˆ° compæ—¶ï¼Œä½ ç«‹å³çŸ¥é“æ‰€äº§ç”Ÿçš„å‡½æ•°çš„ç›®çš„æ˜¯ä»¥ä¸€ç§ä¼—æ‰€å‘¨çŸ¥çš„æ–¹å¼ç»„åˆç°æœ‰çš„å‡½æ•°ã€‚\nå¦‚æœä½ æƒ³ç»„åˆçš„ä¸€ä¸ªå‡½æ•°éœ€è¦æ¥å—ä¸€ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿä½ æŠŠå®ƒåŒ…åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­ã€‚è¯·çœ‹ä¸‹é¢è¿™ä¸ªç‰‡æ®µï¼Œå®ƒæ ¹æ®ä½ çš„è§’è‰²çš„æ™ºåŠ›å±æ€§æ¥è®¡ç®—å¥¹çš„æ³•æœ¯æ§½çš„æ•°é‡ã€‚\n(defn spell-slots  [charï¼½  (int (inc (/ (c-int char) 2))))  (spell-slots character) ; =\u0026gt; 6 é¦–å…ˆï¼Œä½ ç”¨æ™ºåŠ›é™¤ä»¥ 2ï¼Œç„¶ååŠ  1ï¼Œç„¶åç”¨intå‡½æ•°æ¥å–æ•´ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ç”¨compåšåŒæ ·çš„äº‹æƒ…ã€‚\n(def spell-slots-comp (comp int inc #(/ % 2) c-int)) è¦é™¤ä»¥ 2ï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯æŠŠé™¤æ³•åŒ…åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­ã€‚\nClojure çš„compå‡½æ•°å¯ä»¥ç»„æˆä»»ä½•æ•°é‡çš„å‡½æ•°ã€‚ä¸ºäº†äº†è§£å®ƒæ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå®ç°ï¼Œå®ƒåªç»„åˆäº†ä¸¤ä¸ªå‡½æ•°ã€‚\n(defn two-comp  [f g].  (fn [\u0026amp; args]  (f (apply g args)))) æˆ‘é¼“åŠ±ä½ æ±‚å€¼è¿™æ®µä»£ç ï¼Œå¹¶ä½¿ç”¨two-compæ¥ç»„åˆä¸¤ä¸ªå‡½æ•°! å¦å¤–ï¼Œå°è¯•é‡æ–°å®ç° Clojure çš„compå‡½æ•°ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç»„æˆä»»ä½•æ•°é‡çš„å‡½æ•°ã€‚\nè®°å¿†åŒ– ä½ å¯ä»¥ç”¨çº¯å‡½æ•°åšçš„å¦ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…æ˜¯å¯¹å®ƒä»¬è¿›è¡Œå¤‡å¿˜ï¼Œè¿™æ · Clojure å°±ä¼šè®°ä½æŸä¸ªç‰¹å®šå‡½æ•°è°ƒç”¨çš„ç»“æœã€‚ä½ å¯ä»¥è¿™æ ·åšï¼Œå› ä¸ºæ­£å¦‚ä½ å‰é¢æ‰€å­¦åˆ°çš„ï¼Œçº¯å‡½æ•°åœ¨æŒ‡ä»£ä¸Šæ˜¯é€æ˜çš„ã€‚ä¾‹å¦‚ï¼Œ+æ˜¯æŒ‡ä»£é€æ˜çš„ã€‚ä½ å¯ä»¥æŠŠ\n(+ 3 (+ 5 8)) æ›¿æ¢ä¸º\n(+ 3 13) æˆ–\n16 è€Œç¨‹åºä¼šæœ‰ç›¸åŒçš„è¡Œä¸ºã€‚\nMemoization è®©ä½ é€šè¿‡å­˜å‚¨ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°å’Œå‡½æ•°çš„è¿”å›å€¼æ¥åˆ©ç”¨å¼•ç”¨çš„é€æ˜åº¦ã€‚è¿™æ ·ä¸€æ¥ï¼Œä»¥åç”¨ç›¸åŒçš„å‚æ•°è°ƒç”¨è¯¥å‡½æ•°å°±å¯ä»¥ç«‹å³è¿”å›ç»“æœã€‚è¿™å¯¹äºéœ€è¦å¤§é‡æ—¶é—´è¿è¡Œçš„å‡½æ•°ç‰¹åˆ«æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™ä¸ªæ²¡æœ‰å¤‡å¿˜å½•çš„å‡½æ•°ä¸­ï¼Œç»“æœåœ¨ä¸€ç§’é’Ÿåè¢«è¿”å›ã€‚\n(defn sleepy-identity  \u0026#34;Returns the given value after 1 second\u0026#34;  [x]  (Thread/sleep 1000)  x) (sleepy-identity \u0026#34;Mr. Fantastico\u0026#34;) ; =\u0026gt; \u0026#34;Mr. Fantastico\u0026#34; after 1 second  (sleepy-identity \u0026#34;Mr. Fantastico\u0026#34;) ; =\u0026gt; \u0026#34;Mr. Fantastico\u0026#34; after 1 second ç„¶è€Œï¼Œå¦‚æœä½ ç”¨memoizeåˆ›å»ºä¸€ä¸ªæ–°çš„ã€è®°å¿†åŒ–çš„sleepy-identityç‰ˆæœ¬ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šç­‰å¾…ä¸€ç§’é’Ÿï¼›éšåçš„æ¯ä¸ªå‡½æ•°è°ƒç”¨ä¼šç«‹å³è¿”å›ã€‚\n(def memo-sleepy-identity (memoize sleepy-identity)) (memo-sleepy-identity \u0026#34;Mr. Fantastico\u0026#34;) ; =\u0026gt; \u0026#34;Mr. Fantastico\u0026#34; after 1 second  (memo-sleepy-identity \u0026#34;Mr. Fantastico\u0026#34;) ; =\u0026gt; \u0026#34;Mr. Fantastico\u0026#34; immediately å¾ˆé…·å•Š! ä»è¿™é‡Œå¼€å§‹ï¼Œmemo-sleepy-identityåœ¨è°ƒç”¨`\u0026ldquo;Mr.Fantastico \u0026ldquo;æ—¶å°†ä¸ä¼šäº§ç”Ÿæœ€åˆçš„ä¸€ç§’é’Ÿçš„è´¹ç”¨ã€‚è¿™ä¸ªå®ç°å¯¹äºé‚£äº›è®¡ç®—å¯†é›†å‹çš„å‡½æ•°æˆ–è€…æå‡ºç½‘ç»œè¯·æ±‚çš„å‡½æ•°å¾ˆæœ‰ç”¨ã€‚\nPeg Thing æ˜¯æ—¶å€™äº†! æ˜¯æ—¶å€™ç”¨ä½ åˆ°ç›®å‰ä¸ºæ­¢æ‰€å­¦åˆ°çš„ä¸€åˆ‡æ¥æ„å»º Peg Thing çš„ç»ˆç«¯å®ç°äº†ï¼šä¸å¯å˜çš„æ•°æ®ç»“æ„ã€æ‡’æƒ°åºåˆ—ã€çº¯å‡½æ•°ã€é€’å½’\u0026ndash;ä¸€åˆ‡ï¼è¿™å°†æœ‰åŠ©äºä½ ç†è§£å¦‚ä½•å°†è¿™äº›æ¦‚å¿µå’ŒæŠ€æœ¯ç»“åˆèµ·æ¥è§£å†³æ›´å¤§çš„é—®é¢˜ã€‚è¿™æ ·åšå°†å¸®åŠ©ä½ ç†è§£å¦‚ä½•ç»“åˆè¿™äº›æ¦‚å¿µå’ŒæŠ€æœ¯æ¥è§£å†³æ›´å¤§çš„é—®é¢˜ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•å¯¹ç©å®¶çš„æ¯ä¸€æ¬¡ç§»åŠ¨æ‰€äº§ç”Ÿçš„å˜åŒ–è¿›è¡Œå»ºæ¨¡ï¼Œè€Œä¸å¿…åƒåœ¨ OOP ä¸­é‚£æ ·å¯¹å¯¹è±¡è¿›è¡Œå˜å¼‚ã€‚\nä¸ºäº†æ„å»ºæ¸¸æˆï¼Œä½ å°†é¦–å…ˆå­¦ä¹ æ¸¸æˆçš„æœºåˆ¶ä»¥åŠå¦‚ä½•å¯åŠ¨å’Œæ’­æ”¾ç¨‹åºã€‚ç„¶åï¼Œæˆ‘å°†è§£é‡Šä»£ç çš„ç»„ç»‡ã€‚æœ€åï¼Œæˆ‘å°†å¯¹æ¯ä¸ªå‡½æ•°è¿›è¡Œè®²è§£ã€‚\nä½ å¯ä»¥åœ¨*https://www.nostarch.com/clojure/*æ‰¾åˆ° Peg Thing çš„å®Œæ•´ä»£ç åº“ã€‚\næ’­æ”¾ å¦‚å‰æ‰€è¿°ï¼ŒPeg Thing æ˜¯åŸºäºä»å¤è‡³ä»Šæµä¼ ä¸‹æ¥çš„ç§˜å¯†æ€ç»´ç£¨ç»ƒå·¥å…·ï¼Œç°åœ¨ç”± Cracker Barrel å‘è¡Œã€‚\nå¦‚æœä½ ä¸ç†Ÿæ‚‰è¿™ä¸ªæ¸¸æˆï¼Œä»¥ä¸‹æ˜¯æ¸¸æˆçš„æœºåˆ¶ã€‚ä½ å¼€å§‹æ—¶æœ‰ä¸€ä¸ªä¸‰è§’å½¢çš„æ£‹ç›˜ï¼Œä¸Šé¢å¸ƒæ»¡äº†é’‰å­çš„å­”ï¼Œå…¶ä¸­ä¸€ä¸ªå­”ç¼ºå°‘ä¸€ä¸ªé’‰å­ï¼Œå¦‚å›¾ 5-1 æ‰€ç¤ºã€‚\nå›¾ 5-1ï¼šPeg Thing çš„åˆå§‹è®¾ç½®\næ¸¸æˆçš„ç›®çš„æ˜¯å°½å¯èƒ½å¤šåœ°ç§»é™¤é’‰å­ã€‚ä½ é€šè¿‡*è·³è¿‡é’‰å­æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚åœ¨å›¾ 5-2 ä¸­ï¼Œå›¾é’‰ A è·³è¿‡å›¾é’‰ B è¿›å…¥ç©ºæ´ï¼Œä½ å°±æŠŠå›¾é’‰ B ä»æ£‹ç›˜ä¸Šç§»èµ°ã€‚\nimg\nå›¾ 5-2ï¼šè·³è¿‡ä¸€ä¸ªé’‰å­ï¼ŒæŠŠå®ƒä»æ£‹ç›˜ä¸Šç§»èµ°ã€‚\nè¦å¯åŠ¨ Peg Thingï¼Œè¯·ä¸‹è½½ä»£ç ï¼Œç„¶ååœ¨pegthingç›®å½•ä¸‹çš„ç»ˆç«¯è¿è¡Œlein runã€‚å‡ºç°ä¸€ä¸ªæç¤ºï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ã€‚\nGet ready to play Peg Thing! How many rows? [5] ç°åœ¨ä½ å¯ä»¥è¾“å…¥æ£‹ç›˜çš„è¡Œæ•°ï¼Œä½¿ç”¨5ä½œä¸ºé»˜è®¤å€¼ã€‚å¦‚æœä½ æƒ³è¦äº”è¡Œï¼Œå°±æŒ‰å›è½¦é”®ï¼ˆå¦åˆ™ï¼Œè¾“å…¥ä¸€ä¸ªæ•°å­—å¹¶æŒ‰å›è½¦é”®ï¼‰ã€‚ç„¶åä½ ä¼šçœ‹åˆ°è¿™ä¸ªã€‚\nHere\u0026#39;s your board:  a0  b0 c0  d0 e0 f0  g0 h0 i0 j0  k0 l0 m0 n0 o0 Remove which peg? [e] æ¯ä¸ªå­—æ¯ä»£è¡¨æ£‹ç›˜ä¸Šçš„ä¸€ä¸ªä½ç½®ã€‚æ•°å­—0ï¼ˆåº”è¯¥æ˜¯è“è‰²çš„ï¼Œä½†å¦‚æœä¸æ˜¯ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼‰è¡¨ç¤ºä¸€ä¸ªä½ç½®è¢«å¡«æ»¡ã€‚åœ¨æ¸¸æˆå¼€å§‹ä¹‹å‰ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªé’‰å­æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥æç¤ºè¦æ±‚ä½ è¾“å…¥ç¬¬ä¸€ä¸ªè¦ç§»é™¤çš„é’‰å­çš„ä½ç½®ã€‚é»˜è®¤æ˜¯ä¸­é—´çš„é’‰å­ï¼Œ`e\u0026rsquo;ï¼Œä½†ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªä¸åŒçš„ä½ç½®ã€‚ç§»èµ°æ£‹å­åï¼Œä½ ä¼šçœ‹åˆ°è¿™ä¸ªã€‚\nHere\u0026#39;s your board:  a0  b0 c0  d0 e- f0  g0 h0 i0 j0  k0 l0 m0 n0 o0 Move from where to where? Enter two letters: æ³¨æ„ï¼Œeä½ç½®ç°åœ¨æœ‰ä¸€ä¸ªç ´æŠ˜å·ï¼Œ-ï¼ˆåº”è¯¥æ˜¯çº¢è‰²çš„ï¼Œä½†å¦‚æœä¸æ˜¯ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼‰ã€‚è¿™ä¸ªç ´æŠ˜å·è¡¨ç¤ºè¿™ä¸ªä½ç½®æ˜¯ç©ºçš„ã€‚è¦ç§»åŠ¨ï¼Œä½ è¦è¾“å…¥ä½ æƒ³*æ‹¿èµ·çš„æ£‹å­çš„ä½ç½®ï¼Œç„¶åæ˜¯ä½ æƒ³æŠŠå®ƒæ”¾åœ¨çš„ç©ºä½ç½®çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¾“å…¥`le\u0026rsquo;ï¼Œä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚\nHere\u0026#39;s your board:  a0  b0 c0  d0 e0 f0  g0 h- i0 j0  k0 l- m0 n0 o0 Move from where to where? Enter two letters: ä½ æŠŠæ£‹å­ä»lç§»åˆ°eï¼Œè·³è¿‡hï¼Œæ ¹æ®å›¾ 5-2 æ‰€ç¤ºçš„è§„åˆ™ç§»èµ°å®ƒçš„æ£‹å­ã€‚æ¸¸æˆç»§ç»­æç¤ºä½ èµ°æ£‹ï¼Œç›´åˆ°æ²¡æœ‰æ£‹å­å¯ç”¨ä¸ºæ­¢ï¼Œè¿™æ—¶å®ƒå°±ä¼šæç¤ºä½ å†æ¬¡ä¸‹æ£‹ã€‚\nä»£ç ç»„ç»‡ è¯¥ç¨‹åºå¿…é¡»å¤„ç†å››ä¸ªä¸»è¦ä»»åŠ¡ï¼Œæºä»£ç ä¹Ÿç›¸åº”åœ°ç»„ç»‡èµ·æ¥ï¼Œæ¯ä¸ªä»»åŠ¡çš„å‡½æ•°éƒ½å½’ä¸ºä¸€ç»„ã€‚\n åˆ›å»ºä¸€ä¸ªæ–°çš„æ£‹ç›˜ è¿”å›ä¸€ä¸ªå¸¦æœ‰æ£‹æ‰‹è¡ŒåŠ¨ç»“æœçš„æ£‹ç›˜ ç”¨æ–‡å­—è¡¨ç¤ºæ£‹ç›˜ å¤„ç†ç”¨æˆ·äº’åŠ¨  å…³äºç»„ç»‡ç»“æ„è¿˜æœ‰ä¸¤ç‚¹ã€‚é¦–å…ˆï¼Œä»£ç æœ‰ä¸€ä¸ªåŸºæœ¬çš„æ¶æ„ï¼Œæˆ–æ¦‚å¿µæ€§çš„ç»„ç»‡ï¼Œç”±ä¸¤å±‚ç»„æˆã€‚é¡¶å±‚ç”±å¤„ç†ç”¨æˆ·äº¤äº’çš„å‡½æ•°ç»„æˆã€‚è¿™äº›å‡½æ•°äº§ç”Ÿäº†ç¨‹åºçš„æ‰€æœ‰å‰¯ä½œç”¨ï¼Œæ‰“å°å‡ºæ£‹ç›˜å¹¶ä¸ºç©å®¶çš„äº’åŠ¨æä¾›æç¤ºã€‚è¿™ä¸€å±‚çš„å‡½æ•°ä½¿ç”¨åº•å±‚çš„å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ£‹ç›˜ï¼Œè¿›è¡Œç§»åŠ¨ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–‡æœ¬è¡¨è¿°ï¼Œä½†åº•å±‚çš„å‡½æ•°å®Œå…¨ä¸ä½¿ç”¨é¡¶å±‚çš„å‡½æ•°ã€‚å³ä½¿æ˜¯è¿™ä¹ˆå°çš„ç¨‹åºï¼Œä¸€ä¸ªå°å°çš„æ¶æ„ä¹Ÿæœ‰åŠ©äºä½¿ä»£ç æ›´å®¹æ˜“ç®¡ç†ã€‚\nç¬¬äºŒï¼Œæˆ‘å°½å¯èƒ½åœ°å°†ä»»åŠ¡åˆ†è§£æˆå°çš„å‡½æ•°ï¼Œä»¥ä¾¿æ¯ä¸ªå‡½æ•°éƒ½åšä¸€ä¸ªå¾®å°çš„ã€å¯ç†è§£çš„ä»»åŠ¡ã€‚å…¶ä¸­ä¸€äº›å‡½æ•°åªè¢«å¦å¤–ä¸€ä¸ªå‡½æ•°ä½¿ç”¨ã€‚æˆ‘å‘ç°è¿™å¾ˆæœ‰å¸®åŠ©ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©æˆ‘ä¸ºæ¯ä¸ªå¾®å°çš„å­ä»»åŠ¡å‘½åï¼Œä½¿æˆ‘èƒ½å¤Ÿæ›´å¥½åœ°è¡¨è¾¾ä»£ç çš„æ„å›¾ã€‚\nä½†åœ¨æ‰€æœ‰çš„æ¶æ„ä¹‹å‰ï¼Œè¿˜æœ‰è¿™ä¸ªã€‚\n(ns pegthing.core  (require [clojure.set :as set])  (:gen-class))  (declare successful-move prompt-move game-over query-rows) æˆ‘å°†åœ¨ç¬¬å…­ç« è¯¦ç»†è§£é‡Šè¿™é‡Œçš„å‡½æ•°ã€‚å¦‚æœä½ å¥½å¥‡è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Œç®€çŸ­çš„è§£é‡Šæ˜¯ï¼š(require [clojure.set :as set])å…è®¸ä½ è½»æ¾ä½¿ç”¨clojure.setå‘½åç©ºé—´çš„å‡½æ•°ï¼Œ(:gen-class)å…è®¸ä½ ä»å‘½ä»¤è¡Œè¿è¡Œç¨‹åºï¼Œ(declaration successful-move prompt-move game-over query-rows)å…è®¸å‡½æ•°åœ¨è¢«å®šä¹‰ä¹‹å‰å¼•ç”¨è¿™äº›åç§°ã€‚å¦‚æœè¿™è¿˜ä¸å¤ªæ˜ç™½ï¼Œç›¸ä¿¡æˆ‘å¾ˆå¿«å°±ä¼šè§£é‡Šã€‚\nåˆ›å»ºæ£‹ç›˜ ä½ ç”¨æ¥è¡¨ç¤ºæ£‹ç›˜çš„æ•°æ®ç»“æ„åº”è¯¥ä½¿ä½ èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°æ‰“å°æ£‹ç›˜ï¼Œæ£€æŸ¥æ£‹æ‰‹æ˜¯å¦ä¸‹äº†ä¸€æ­¥æœ‰æ•ˆçš„æ£‹ï¼Œå®é™…æ‰§è¡Œä¸€æ­¥æ£‹ï¼Œä»¥åŠæ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸã€‚ä½ å¯ä»¥ç”¨å¾ˆå¤šæ–¹å¼æ¥æ„é€ æ£‹ç›˜ï¼Œä»¥å®ç°è¿™äº›ä»»åŠ¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å°†ç”¨ä¸€ä¸ª Map æ¥è¡¨ç¤ºæ£‹ç›˜ï¼ŒMap ä¸Šæœ‰å¯¹åº”äºæ¯ä¸ªæ£‹ç›˜ä½ç½®çš„æ•°å­—é”®å’ŒåŒ…å«è¯¥ä½ç½®è¿æ¥ä¿¡æ¯çš„å€¼ã€‚è¯¥ Map è¿˜å°†åŒ…å«ä¸€ä¸ª:rowsé”®ï¼Œå­˜å‚¨è¡Œçš„æ€»æ•°ã€‚å›¾ 5-3 æ˜¾ç¤ºäº†ä¸€ä¸ªæœ‰æ¯ä¸ªä½ç½®ç¼–å·çš„æ£‹ç›˜ã€‚\nå›¾ 5-3ï¼šæœ‰ç¼–å·çš„é’‰å­æ¿\nä¸‹é¢æ˜¯ä¸ºè¡¨ç¤ºå®ƒè€Œå»ºç«‹çš„æ•°æ®ç»“æ„ã€‚\n{1 {:pegged true, :connections {6 3, 4 2}},  2 {:pegged true, :connections {9 5, 7 4}},  3 {:pegged true, :connections {10 6, 8 5}},  4 {:pegged true, :connections {13 8, 11 7, 6 5, 1 2}},  5 {:pegged true, :connections {14 9, 12 8}},  6 {:pegged true, :connections {15 10, 13 9, 4 5, 1 3}},  7 {:pegged true, :connections {9 8, 2 4}},  8 {:pegged true, :connections {10 9, 3 5}},  9 {:pegged true, :connections {7 8, 2 5}},  10 {:pegged true, :connections {8 9, 3 6}},  11 {:pegged true, :connections {13 12, 4 7}},  12 {:pegged true, :connections {14 13, 5 8}},  13 {:pegged true, :connections {15 14, 11 12, 6 9, 4 8}},  14 {:pegged true, :connections {12 13, 5 9}},  15 {:pegged true, :connections {13 14, 6 10}},  :rows 5} ä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆåœ¨ä½ ç©æ¸¸æˆçš„æ—¶å€™ï¼Œæ¯ä¸ªä½ç½®éƒ½ç”¨å­—æ¯è¡¨ç¤ºï¼Œè€Œåœ¨è¿™é‡Œï¼Œä½ç½®å´ç”¨æ•°å­—è¡¨ç¤ºã€‚ä½¿ç”¨æ•°å­—ä½œä¸ºå†…éƒ¨è¡¨ç¤ºï¼Œå¯ä»¥è®©ä½ åœ¨éªŒè¯å’Œä¸‹æ£‹æ—¶åˆ©ç”¨æ£‹ç›˜å¸ƒå±€çš„ä¸€äº›æ•°å­¦ç‰¹æ€§ã€‚å¦ä¸€æ–¹é¢ï¼Œå­—æ¯åˆ™æ›´é€‚åˆäºæ˜¾ç¤ºï¼Œå› ä¸ºå®ƒä»¬åªå ç”¨ä¸€ä¸ªå­—ç¬¦ç©ºé—´ã€‚ä¸€äº›è½¬æ¢å‡½æ•°åœ¨ç¬¬ 120 é¡µçš„ \u0026ldquo;æ¸²æŸ“å’Œæ‰“å°æ£‹ç›˜\u0026rdquo;ä¸­æœ‰æ‰€ä»‹ç»ã€‚\nåœ¨æ•°æ®ç»“æ„ä¸­ï¼Œæ¯ä¸ªä½ç½®éƒ½ä¸ä¸€ä¸ª Map ç›¸å…³è”ï¼Œå…¶å†…å®¹æ˜¯è¿™æ ·çš„ã€‚\n{:pegged true, :connection {6 3, 4 2}}. pegged \u0026ldquo;çš„å«ä¹‰å¾ˆæ¸…æ¥šï¼›å®ƒè¡¨ç¤ºè¯¥ä½ç½®æ˜¯å¦æœ‰ä¸€ä¸ªé’‰å­ã€‚`:connections\u0026rsquo;å°±æ¯”è¾ƒéšè”½äº†ã€‚å®ƒæ˜¯ä¸€ä¸ª Mapï¼Œæ¯ä¸ªé”®æ ‡è¯†ä¸€ä¸ªåˆæ³•çš„ç›®çš„åœ°ï¼Œæ¯ä¸ªå€¼ä»£è¡¨å°†è¢«è·³è¿‡çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œä½ç½® 1 çš„æ£‹å­å¯ä»¥è·³åˆ°*ä½ç½® 6ï¼Œè¶Šè¿‡ä½ç½® 3ã€‚è¿™å¯èƒ½çœ‹èµ·æ¥å¾ˆè½åï¼Œä½†å½“ä½ çœ‹åˆ°æ£‹æ­¥éªŒè¯æ˜¯å¦‚ä½•å®ç°çš„æ—¶å€™ï¼Œä½ å°±ä¼šæ˜ç™½å…¶ä¸­çš„é“ç†ã€‚\nç°åœ¨ä½ å·²ç»çœ‹åˆ°äº†ä»£è¡¨æ£‹ç›˜çš„æœ€ç»ˆ Map åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æ¢ç´¢åœ¨ç¨‹åºä¸­å®é™…å»ºç«‹è¿™ä¸ª Map çš„å‡½æ•°äº†ã€‚ä½ ä¸ä¼šç®€å•åœ°å¼€å§‹éšæ„åœ°åˆ†é…å¯å˜çŠ¶æ€æ¥è¡¨ç¤ºæ¯ä¸ªä½ç½®ä»¥åŠå®ƒæ˜¯å¦è¢«é’‰ä½ã€‚ç›¸åï¼Œä½ å°†ä½¿ç”¨åµŒå¥—çš„é€’å½’å‡½æ•°è°ƒç”¨æ¥é€ä¸ªå»ºç«‹æœ€ç»ˆçš„æ£‹ç›˜ä½ç½®ã€‚è¿™ç±»ä¼¼äºä½ ä¹‹å‰åˆ›å»ºé­…åŠ›é•œå¤´æ ‡é¢˜çš„æ–¹å¼ï¼Œé€šè¿‡å°†å‚æ•°ä¼ é€’ç»™ä¸€è¿ä¸²çš„å‡½æ•°ï¼Œä»è¾“å…¥ä¸­è·å¾—æ–°çš„æ•°æ®ï¼Œä»è€Œå¾—åˆ°æœ€ç»ˆç»“æœã€‚\næœ¬èŠ‚ä»£ç ä¸­çš„å‰å‡ ä¸ªè¡¨è¾¾å¼æ˜¯å…³äºä¸‰è§’å½¢æ•°çš„ã€‚ä¸‰è§’å½¢æ•°æ˜¯ç”±å‰nä¸ªè‡ªç„¶æ•°ç›¸åŠ äº§ç”Ÿçš„ã€‚ç¬¬ä¸€ä¸ªä¸‰è§’æ•°æ˜¯ 1ï¼Œç¬¬äºŒä¸ªæ˜¯ 3ï¼ˆ1+2ï¼‰ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ 6ï¼ˆ1+2+3ï¼‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™äº›æ•°å­—å¾ˆå¥½åœ°ä¸æ£‹ç›˜ä¸Šæ¯ä¸€è¡Œæœ«å°¾çš„ä½ç½®æ•°å­—ç›¸ä¸€è‡´ï¼Œè¿™å°†æˆä¸ºä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å±æ€§ã€‚é¦–å…ˆï¼Œä½ å®šä¹‰äº†å‡½æ•°tri*ï¼Œå®ƒå¯ä»¥åˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢æ•°å­—çš„æ‡’æ•£åºåˆ—ã€‚\n(defn tri*  \u0026#34;Generates æƒ°æ€§åºåˆ—uence of triangular numbers\u0026#34;  ([] (tri* 0 1))  ([sum n]  (let [new-sum (+ sum n)]  (cons new-sum (lazy-seq (tri* new-sum (inc n))))))) å¿«é€Ÿå›é¡¾ä¸€ä¸‹å·¥ä½œåŸç†ï¼Œè°ƒç”¨æ²¡æœ‰å‚æ•°çš„tri*ä¼šé€’å½’è°ƒç”¨(tri* 0 1)ã€‚è¿™å°†è¿”å›ä¸€ä¸ªæ‡’æƒ°åˆ—è¡¨ï¼Œå…¶å…ƒç´ æ˜¯ \u0026ldquo;new-sum\u0026rdquo;ï¼Œåœ¨æœ¬ä¾‹ä¸­å®ƒçš„å€¼ä¸º \u0026ldquo;1\u0026rdquo;ã€‚æ‡’æƒ°åˆ—è¡¨åŒ…æ‹¬ä¸€ä¸ªé…æ–¹ï¼Œç”¨äºåœ¨è¯·æ±‚æ—¶ç”Ÿæˆåˆ—è¡¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚ç¬¬å››ç« æ‰€è¿°ã€‚\nä¸‹ä¸€ä¸ªè¡¨è¾¾å¼è°ƒç”¨tri*ï¼Œå®é™…ä¸Šæ˜¯åˆ›å»ºæ‡’æƒ°åºåˆ—å¹¶å°†å…¶ç»‘å®šåˆ°triã€‚\n(def tri (tri*)) ä½ å¯ä»¥éªŒè¯å®ƒæ˜¯å¦çœŸçš„æœ‰æ•ˆã€‚\n(take 5 tri) ; =\u0026gt; (1 3 6 10 15) æ¥ä¸‹æ¥çš„å‡ ä¸ªå‡½æ•°å¯¹ä¸‰è§’å½¢æ•°çš„åºåˆ—è¿›è¡Œæ“ä½œã€‚triangular?æ‰¾å‡ºå®ƒçš„å‚æ•°æ˜¯å¦åœ¨triæ‡’æƒ°åºåˆ—ä¸­ã€‚å®ƒé€šè¿‡ä½¿ç”¨take-whileåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢æ•°åˆ—ï¼Œå…¶æœ€åä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå°äºæˆ–ç­‰äºå‚æ•°çš„ä¸‰è§’å½¢æ•°ã€‚ç„¶åå®ƒå°†æœ€åä¸€ä¸ªå…ƒç´ ä¸å‚æ•°è¿›è¡Œæ¯”è¾ƒã€‚\n(defn triangular?  \u0026#34;Is the number triangular? e.g. 1, 3, 6, 10, 15, etc\u0026#34;  [n]  (= n (last (take-while #(\u0026gt;= n %) tri)))) (triangular? 5) ; =\u0026gt; false  (triangular? 6) ; =\u0026gt; true æ¥ä¸‹æ¥æ˜¯row-triï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªè¡Œå·ï¼Œå¹¶ç»™å‡ºè¯¥è¡Œæœ«å°¾çš„ä¸‰è§’å½¢æ•°å­—ã€‚\n(defn row-tri  \u0026#34;The triangular number at the end of row n\u0026#34;  [n]  (last (take n tri))) (row-tri 1) ; =\u0026gt; 1  (row-tri 2) ; =\u0026gt; 3  (row-tri 3) ; =\u0026gt; 6 æœ€åï¼Œè¿˜æœ‰row-numï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ£‹ç›˜ä½ç½®ï¼Œå¹¶è¿”å›å®ƒæ‰€å±çš„è¡Œã€‚\n(defn row-num  \u0026#34;Returns row number the position belongs to: pos 1 in row 1, positions 2 and 3 in row 2, etc\u0026#34;  [pos]  (inc (count (take-while #(\u0026gt; pos %) tri)))) (row-num 1) ; =\u0026gt; 1 (row-num 5) ; =\u0026gt; 3 ä¹‹åæ˜¯connectï¼Œå®ƒè¢«ç”¨æ¥åœ¨ä¸¤ä¸ªä½ç½®ä¹‹é—´å®é™…å½¢æˆç›¸äº’è¿æ¥ã€‚\n(defn connect  \u0026#34;Form a mutual connection between two positions\u0026#34;  [board max-pos pos neighbor destination]  (if (\u0026lt;= destination max-pos)  (reduce (fn [new-board [p1 p2]]  (assoc-in new-board [p1 :connections p2] neighbor))  board  [[pos destination] [destination pos]])  board))  (connect {} 15 1 2 4) ; =\u0026gt; {1 {:connections {4 2}}  4 {:connections {1 2}}} connectåšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯æ£€æŸ¥ç›®çš„åœ°æ˜¯å¦çœŸçš„æ˜¯æ£‹ç›˜ä¸Šçš„ä¸€ä¸ªä½ç½®ï¼Œç¡®è®¤å®ƒæ˜¯å¦å°äºæ£‹ç›˜çš„æœ€å¤§ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰äº”è¡Œï¼Œæœ€å¤§ä½ç½®æ˜¯ 15ã€‚ç„¶è€Œï¼Œå½“æ¸¸æˆæ£‹ç›˜è¢«åˆ›å»ºæ—¶ï¼Œconnectå‡½æ•°å°†è¢«è°ƒç”¨ï¼Œå‚æ•°ä¸º(connect {} 15 7 16 22)ã€‚connectå¼€å¤´çš„ifè¯­å¥ç¡®ä¿ä½ çš„ç¨‹åºä¸å…è®¸è¿™ç§ç¦»è°±çš„è¿æ¥ï¼Œå½“ä½ è¦æ±‚å®ƒåšä¸€äº›æ„šè ¢çš„äº‹æƒ…æ—¶ï¼Œå®ƒåªæ˜¯è¿”å›æœªä¿®æ”¹çš„æ£‹ç›˜ã€‚\næ¥ä¸‹æ¥ï¼Œconnecté€šè¿‡reduceä½¿ç”¨é€’å½’ï¼Œé€æ­¥å»ºç«‹èµ·æ£‹ç›˜çš„æœ€ç»ˆçŠ¶æ€ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ æ­£åœ¨å‡å°‘åµŒå¥— Vector[[1 4] [4 1]]ã€‚è¿™å°±æ˜¯å…è®¸ä½ è¿”å›ä¸€ä¸ªæ›´æ–°çš„æ£‹ç›˜ï¼Œpos\u0026rsquo;å’Œ`destination\u0026rsquo;ï¼ˆ1 å’Œ 4ï¼‰åœ¨å®ƒä»¬çš„è¿æ¥ä¸­éƒ½æŒ‡å‘å¯¹æ–¹ã€‚\nä¼ ç»™reduceçš„åŒ¿åå‡½æ•°ä½¿ç”¨äº†ä¸€ä¸ªä½ ä»¥å‰æ²¡æœ‰è§è¿‡çš„å‡½æ•°assoc-inã€‚å‡½æ•°get-inå¯ä»¥è®©ä½ åœ¨åµŒå¥—çš„ Map ä¸­æŸ¥æ‰¾å€¼ï¼Œè€Œassoc-inå¯ä»¥è®©ä½ åœ¨æŒ‡å®šçš„åµŒå¥—ä¸­è¿”å›ä¸€ä¸ªå¸¦æœ‰ç»™å®šå€¼çš„æ–° Mapã€‚ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ã€‚\n(assoc-in {} [:cookie :monster :vocals] \u0026#34;Finntroll\u0026#34;) ; =\u0026gt; {:cookie {:monster {:vocals \u0026#34;Finntroll\u0026#34;}}}  (get-in {:cookie {:monster {:vocals \u0026#34;Finntroll\u0026#34;}}} [:cookie :monster]) ; =\u0026gt; {:vocals \u0026#34;Finntroll\u0026#34;}  (assoc-in {} [1 :connections 4] 2) ; =\u0026gt; {1 {:connections {4 2}}} åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œæ–°çš„ã€åµŒå¥—çš„ Map è¢«åˆ›å»ºï¼Œä»¥é€‚åº”æ‰€æœ‰æä¾›çš„é”®ã€‚\nç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªè¿æ¥ä¸¤ä¸ªä½ç½®çš„æ–¹æ³•ï¼Œä½†ç¨‹åºé¦–å…ˆåº”è¯¥å¦‚ä½•é€‰æ‹©ä¸¤ä¸ªä½ç½®æ¥è¿æ¥å‘¢ï¼Ÿè¿™ç”±connect-rightã€connect-down-leftå’Œconnect-down-rightæ¥å¤„ç†ã€‚\n(defn connect-right  [board max-pos pos]  (let [neighbor (inc pos)  destination (inc neighbor)]  (if-not (or (triangular? neighbor) (triangular? pos))  (connect board max-pos pos neighbor destination)  board)))  (defn connect-down-left  [board max-pos pos]  (let [row (row-num pos)  neighbor (+ row pos)  destination (+ 1 row neighbor)]  (connect board max-pos pos neighbor destination)))  (defn connect-down-right  [board max-pos pos]  (let [row (row-num pos)  neighbor (+ 1 row pos)  destination (+ 2 row neighbor)]  (connect board max-pos pos neighbor destination))) è¿™äº›å‡½æ•°åˆ†åˆ«å–äº†æ£‹ç›˜çš„æœ€å¤§ä½ç½®å’Œä¸€ä¸ªæ£‹ç›˜çš„ä½ç½®ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªå°çš„ä¸‰è§’å½¢æ•°å­¦æ¥è®¡ç®—å‡ºå“ªäº›æ•°å­—è¦é€å…¥connectã€‚ä¾‹å¦‚ï¼Œconnect-down-leftå°†è¯•å›¾è¿æ¥ä½ç½® 1 å’Œä½ç½® 4ã€‚å¦‚æœä½ æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰å®šä¹‰connect-leftã€connect-up-leftå’Œconnect-up-rightå‡½æ•°ï¼ŒåŸå› æ˜¯ç°æœ‰çš„å‡½æ•°å®é™…ä¸Šæ¶µç›–äº†è¿™äº›æƒ…å†µã€‚connectè¿”å›ä¸€ä¸ªå»ºç«‹äº†ç›¸äº’è¿æ¥çš„æ£‹ç›˜ï¼›å½“ 4å‘å³è¿æ¥åˆ° 6 æ—¶ï¼Œ6å‘å·¦è¿æ¥åˆ° 4ã€‚ ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ã€‚\n(connect-down-left {} 15 1) ; =\u0026gt; {1 {:connections {4 2}  4 {:connections {1 2}}}}  (connect-down-right {} 15 3) ; =\u0026gt; {3 {:connections {10 6}}  10 {:connections {3 6}}} åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œconnect-down-leftæ¥æ”¶ä¸€ä¸ªæœ€å¤§ä½ç½®ä¸º15çš„ç©ºæ£‹ç›˜ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ£‹ç›˜ï¼Œè¯¥æ£‹ç›˜ä¸Šæœ‰1å’Œå®ƒä¸‹é¢åŠå·¦è¾¹çš„ä½ç½®ä¹‹é—´çš„ç›¸äº’è¿æ¥ã€‚connect-down-rightåšäº†ç±»ä¼¼çš„äº‹æƒ…ï¼Œè¿”å›ä¸€ä¸ªç”± 3 å’Œå®ƒä¸‹é¢åŠå³è¾¹çš„ä½ç½®ä¹‹é—´çš„ç›¸äº’è¿æ¥ç»„æˆçš„æ£‹ç›˜ã€‚\nä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œ`add-pos\u0026rsquo;ï¼Œå¾ˆæœ‰è¶£ï¼Œå› ä¸ºå®ƒå®é™…ä¸Šæ˜¯åœ¨ä¸€ä¸ªå‡½æ•°çš„ Vector ä¸Šè¿›è¡Œè¿˜åŸï¼Œä¾æ¬¡åº”ç”¨æ¯ä¸ªå‡½æ•°æ¥å»ºç«‹ç»“æœçš„æ£‹ç›˜ã€‚ä½†å®ƒé¦–å…ˆæ›´æ–°æ£‹ç›˜ï¼Œä»¥è¡¨ç¤ºä¸€ä¸ªæ£‹å­åœ¨ç»™å®šçš„ä½ç½®ä¸Šã€‚\n(defn add-pos  \u0026#34;Pegs the position and performs connections\u0026#34;  [board max-pos pos]  (let [pegged-board (assoc-in board [pos :pegged] true)]  (reduce (fn [new-board connection-creation-fn]  (connection-creation-fn new-board max-pos pos))  pegged-board  [connect-right connect-down-left connect-down-right])))  (add-pos {} 15 1) {1 {:connections {6 3, 4 2}, :pegged true}  4 {:connections {1 2}}  6 {:connections {1 3}}} å°±åƒè¿™ä¸ªå‡½æ•°é¦–å…ˆåœ¨pegged-boardç»‘å®šä¸­è¯´ï¼š\u0026ldquo;åœ¨æ£‹ç›˜çš„ X ä½ç½®æ·»åŠ ä¸€ä¸ªé’‰å­ã€‚\u0026rdquo; ç„¶åï¼Œåœ¨ \u0026ldquo;reduce \u0026ldquo;ä¸­ï¼Œå®ƒè¯´ï¼š\u0026ldquo;åœ¨ X çš„ä½ç½®ä¸Šé‡‡å–æ–°é’‰å­çš„æ£‹ç›˜ï¼Œå¹¶å°è¯•å°† X çš„ä½ç½®è¿æ¥åˆ°ä¸€ä¸ªåˆæ³•çš„ã€å‘å³çš„ä½ç½®ã€‚å–è¯¥æ“ä½œäº§ç”Ÿçš„æ£‹ç›˜ï¼Œå¹¶å°è¯•å°†ä½ç½® X è¿æ¥åˆ°ä¸€ä¸ªåˆæ³•çš„ã€å‘å·¦ä¸‹æ–¹çš„ä½ç½®ã€‚æœ€åï¼Œå–è¯¥*æ“ä½œäº§ç”Ÿçš„æ£‹ç›˜ï¼Œå¹¶å°è¯•å°†ä½ç½® X è¿æ¥åˆ°åˆæ³•çš„å³ä¸‹ä½ç½®ã€‚è¿”å›æ‰€å¾—åˆ°çš„æ£‹ç›˜\u0026rdquo;ã€‚\nåƒè¿™æ ·å¯¹å‡½æ•°è¿›è¡Œè¿˜åŸæ˜¯ç»„æˆå‡½æ•°çš„å¦ä¸€ç§æ–¹å¼ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œä¸‹é¢æ˜¯æ¸…å• 5-1ï¼ˆç¬¬ 103 é¡µï¼‰ä¸­å®šä¹‰cleanå‡½æ•°çš„å¦ä¸€ç§æ–¹å¼ã€‚\n(defn clean  [text]  (reduce (fn [string string-fn] (string-fn string))  text  [s/trim #(s/replace % #\u0026#34;lol\u0026#34; \u0026#34;LOL\u0026#34;)])) è¿™ä¸ªå¯¹cleançš„é‡æ–°å®šä¹‰å‡å°‘äº†ä¸€ä¸ªå‡½æ•° Vectorï¼Œå°†ç¬¬ä¸€ä¸ªå‡½æ•°s/trimåº”ç”¨äºåˆå§‹å­—ç¬¦ä¸²ï¼Œç„¶åå°†ä¸‹ä¸€ä¸ªå‡½æ•°ï¼ŒåŒ¿åå‡½æ•°#(s/replace % #\u0026quot;lol\u0026quot; \u0026quot;LOL\u0026quot;)ï¼Œåº”ç”¨äºç»“æœã€‚\nå¯¹ä¸€ä¸ªå‡½æ•°é›†åˆè¿›è¡Œç¼©å‡å¹¶ä¸æ˜¯ä¸€ä¸ªä½ ç»å¸¸ä½¿ç”¨çš„æŠ€æœ¯ï¼Œä½†å®ƒå¶å°”ä¼šå¾ˆæœ‰ç”¨ï¼Œè€Œä¸”å®ƒæ˜¾ç¤ºäº†å‡½æ•°å¼ç¼–ç¨‹çš„å¤šå‡½æ•°æ€§ã€‚\næœ€åä¸€ä¸ªåˆ›å»ºæ£‹ç›˜çš„å‡½æ•°æ˜¯new-boardã€‚\n(defn new-board  \u0026#34;Creates a new board with the given number of rows\u0026#34;  [rows]  (let [initial-board {:rows rows}  max-pos (row-tri rows)]  (reduce (fn [board pos] (add-pos board max-pos pos))  initial-board  (range 1 (inc max-pos))))) è¿™æ®µä»£ç é¦–å…ˆåˆ›å»ºäº†åˆå§‹çš„ã€ç©ºçš„æ£‹ç›˜ï¼Œå¹¶å¾—åˆ°äº†æœ€å¤§çš„ä½ç½®ã€‚å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯ 5 è¡Œï¼Œæœ€å¤§ä½ç½®å°†æ˜¯ 15ã€‚æ¥ä¸‹æ¥ï¼Œè¯¥å‡½æ•°ä½¿ç”¨(range 1 (inc max-pos))å¾—åˆ°ä¸€ä¸ªä» 1 åˆ° 15 çš„æ•°å­—åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯æ£‹ç›˜çš„ä½ç½®ã€‚æœ€åï¼Œå®ƒå¯¹ä½ç½®åˆ—è¡¨è¿›è¡Œè¿˜åŸã€‚ç¼©å‡çš„æ¯ä¸€æ¬¡è¿­ä»£éƒ½ä¼šè°ƒç”¨(add-pos board max-pos pos)ï¼Œæ­£å¦‚ä½ å‰é¢æ‰€çœ‹åˆ°çš„ï¼Œå®ƒè·å–ä¸€ä¸ªç°æœ‰çš„æ£‹ç›˜ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ£‹ç›˜ï¼Œå¹¶æ·»åŠ ä½ç½®ã€‚\nç§»åŠ¨å›¾é’‰ ä¸‹ä¸€èŠ‚ä»£ç å°†éªŒè¯å¹¶æ‰§è¡Œé’‰å­çš„ç§»åŠ¨ã€‚è®¸å¤šå‡½æ•°ï¼ˆpegged?, remove-peg, place-peg, move-pegï¼‰éƒ½æ˜¯ç®€å•çš„ã€ä¸è¨€è‡ªæ˜çš„å•è¡Œä»£ç ã€‚\n(defn pegged?  \u0026#34;Does the position have a peg in it?\u0026#34;  [board pos]  (get-in board [pos :pegged]))  (defn remove-peg  \u0026#34;Take the peg at given position out of the board\u0026#34;  [board pos]  (assoc-in board [pos :pegged] false))  (defn place-peg  \u0026#34;Put a peg in the board at given position\u0026#34;  [board pos]  (assoc-in board [pos :pegged] true))  (defn move-peg  \u0026#34;Take peg out of p1 and place it in p2\u0026#34;  [board p1 p2]  (place-peg (remove-peg board p1) p2)) è®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ¥æ¬£èµä¸€ä¸‹è¿™æ®µä»£ç æ˜¯å¤šä¹ˆçš„æ•´æ´ã€‚åœ¨é¢å‘å¯¹è±¡çš„ç¨‹åºä¸­ï¼Œä½ é€šå¸¸ä¼šåœ¨è¿™é‡Œè¿›è¡Œçªå˜ï¼›æ¯•ç«Ÿï¼Œä½ è¿˜èƒ½å¦‚ä½•æ”¹å˜æ£‹ç›˜ï¼Ÿç„¶è€Œï¼Œè¿™äº›éƒ½æ˜¯çº¯å‡½æ•°ï¼Œè€Œä¸”å®ƒä»¬å¾ˆå¥½åœ°å®Œæˆäº†å·¥ä½œã€‚æˆ‘è¿˜å–œæ¬¢ä½ ä¸éœ€è¦ç±»çš„å¼€é”€æ¥ä½¿ç”¨è¿™äº›å°å®¶ä¼™ã€‚è¿™æ ·çš„ç¼–ç¨‹æ„Ÿè§‰æ›´è½»æ¾ã€‚\næ¥ä¸‹æ¥æ˜¯valid-movesã€‚\n(defn valid-moves  \u0026#34;Return a map of all valid moves for pos, where the key is the destination and the value is the jumped position\u0026#34;  [board pos]  (into {}  (filter (fn [[destination jumped]]  (and (not (pegged? board destination))  (pegged? board jumped)))  (get-in board [pos :connections])))) è¿™æ®µä»£ç æµè§ˆäº†ç»™å®šä½ç½®çš„æ¯ä¸ªè¿æ¥ï¼Œå¹¶æµ‹è¯•ç›®çš„åœ°ä½ç½®æ˜¯å¦ä¸ºç©ºï¼Œè·³è½¬çš„ä½ç½®æ˜¯å¦æœ‰é’‰å­ã€‚ä¸ºäº†çœ‹åˆ°è¿™ä¸ªåŠ¨ä½œï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª 4 å·ä½ç½®ä¸ºç©ºçš„æ£‹ç›˜ã€‚\n(def my-board (assoc-in (new-board 5) [4 :pegged] false)) å›¾ 5-4 æ˜¾ç¤ºäº†è¿™ä¸ªæ£‹ç›˜çš„æ ·å­ã€‚\nå›¾ 5-4ï¼š4 å·ä½ç½®ä¸ºç©ºçš„é’‰å­æ¿\nè€ƒè™‘åˆ°è¿™ä¸ªæ£‹ç›˜ï¼Œ1ã€6ã€11 å’Œ 13 ä½æœ‰æœ‰æ•ˆçš„æ£‹æ­¥ï¼Œä½†å…¶ä»–ä½ç½®éƒ½æ²¡æœ‰ã€‚\n(valid-moves my-board 1) ; =\u0026gt; {4 2} (valid-moves my-board 6) ; =\u0026gt; {4 5} (valid-moves my-board 11) ; =\u0026gt; {4 7} (valid-moves my-board 5) ; =\u0026gt; {} (valid-moves my-board 8) ; =\u0026gt; {} ä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆvalid-movesä¼šè¿”å›ä¸€ä¸ª Map è€Œä¸æ˜¯ä¸€ä¸ªé›†åˆæˆ– Vectorã€‚åŸå› æ˜¯ï¼Œè¿”å› Map å…è®¸ä½ è½»æ¾åœ°æŸ¥æ‰¾ç›®æ ‡ä½ç½®ï¼Œä»¥æ£€æŸ¥ç‰¹å®šçš„æ£‹æ­¥æ˜¯å¦æœ‰æ•ˆï¼Œè¿™å°±æ˜¯valid-move?ï¼ˆä¸‹ä¸€ä¸ªå‡½æ•°ï¼‰çš„ä½œç”¨ã€‚\n(defn valid-move?  \u0026#34;Return jumped position if the move from p1 to p2 is valid, nil otherwise\u0026#34;  [board p1 p2]  (get (valid-moves board p1) p2))  (valid-move? my-board 8 4) ; =\u0026gt; nil (valid-move? my-board 1 4) ; =\u0026gt; 2 æ³¨æ„ï¼Œvalid-move?ä» Map ä¸ŠæŸ¥æ‰¾ç›®æ ‡ä½ç½®ï¼Œç„¶åè¿”å›å°†è¢«è·³è¿‡çš„é’‰å­çš„ä½ç½®ã€‚è¿™æ˜¯è®©valid-movesè¿”å› Map çš„å¦ä¸€ä¸ªå¾ˆå¥½çš„å¥½å¤„ï¼Œå› ä¸ºä» Map ä¸­è·å–çš„è·³è·ƒä½ç½®æ­£æ˜¯æˆ‘ä»¬æƒ³è¦ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå‡½æ•°make-moveçš„ä¸œè¥¿ã€‚å½“ä½ èŠ±æ—¶é—´æ„å»ºä¸€ä¸ªä¸°å¯Œçš„æ•°æ®ç»“æ„æ—¶ï¼Œæ‰§è¡Œæœ‰ç”¨çš„æ“ä½œä¼šæ›´å®¹æ˜“ã€‚\n(defn make-move  \u0026#34;Move peg from p1 to p2, removing jumped peg\u0026#34;  [board p1 p2]  (if-let [jumped (valid-move? board p1 p2)]  (move-peg (remove-peg board jumped) p1 p2))) if-letæ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹å¼ï¼Œè¡¨ç¤º \u0026ldquo;å¦‚æœä¸€ä¸ªè¡¨è¾¾å¼æ±‚å€¼ä¸ºä¸€ä¸ªçœŸå®çš„å€¼ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸ªå€¼ç»‘å®šåˆ°ä¸€ä¸ªåå­—ä¸Šï¼Œå°±åƒæˆ‘åœ¨letè¡¨è¾¾å¼ä¸­ä¸€æ ·ã€‚å¦åˆ™ï¼Œå¦‚æœæˆ‘æä¾›äº†ä¸€ä¸ª \u0026ldquo;else \u0026ldquo;å­å¥ï¼Œå°±æ‰§è¡Œè¯¥ \u0026ldquo;else \u0026ldquo;å­å¥ï¼›å¦‚æœæˆ‘æ²¡æœ‰æä¾› \u0026ldquo;else \u0026ldquo;å­å¥ï¼Œå°±è¿”å› \u0026ldquo;nil\u0026rdquo;ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµ‹è¯•è¡¨è¾¾å¼æ˜¯(valid-move? board p1 p2)ï¼Œå¦‚æœç»“æœæ˜¯çœŸå®çš„ï¼Œä½ è¦æŠŠç»“æœåˆ†é…ç»™jumpedè¿™ä¸ªåå­—ã€‚è¿™å°†ç”¨äºè°ƒç”¨move-pegï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªæ–°æ£‹ç›˜ã€‚ä½ æ²¡æœ‰æä¾› \u0026ldquo;else \u0026ldquo;å­å¥ï¼Œæ‰€ä»¥å¦‚æœç§»åŠ¨æ— æ•ˆï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼ä¸º \u0026ldquo;nil\u0026rdquo;ã€‚\næœ€åï¼Œå‡½æ•°`can-move? æ˜¯ç”¨æ¥ç¡®å®šæ¸¸æˆæ˜¯å¦ç»“æŸçš„ï¼Œæ–¹æ³•æ˜¯æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ‰æ£‹æ­¥çš„é’‰å­ä½ç½®ã€‚\n(defn can-move?  \u0026#34;Do any of the pegged positions have valid moves?\u0026#34;  [board]  (some (comp not-empty (partial valid-moves board))  (map first (filter #(get (second %) :pegged) board)))) è¿™ä¸ªå‡½æ•°åç§°æœ«å°¾çš„é—®å·è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ªè°“è¯å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸ºäº†åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚è°“è¯å–è‡ªè°“è¯é€»è¾‘ï¼Œå®ƒå…³æ³¨çš„æ˜¯ç¡®å®šä¸€ä¸ªè¯­å¥æ˜¯çœŸè¿˜æ˜¯å‡ã€‚(ä½ å·²ç»çœ‹åˆ°äº†ä¸€äº›å†…ç½®çš„è°“è¯å‡½æ•°ï¼Œå¦‚empty?å’Œevery?ã€‚)\ncan-move?çš„å·¥ä½œåŸç†æ˜¯é€šè¿‡(map first (filter #(get (second %) :pegged) board))è·å¾—ä¸€ä¸ªæ‰€æœ‰æŒ‚ç‚¹çš„åºåˆ—ã€‚ä½ å¯ä»¥å°†å…¶è¿›ä¸€æ­¥åˆ†è§£ä¸ºfilter'å’Œmap\u0026rsquo;çš„å‡½æ•°è°ƒç”¨ï¼šå› ä¸ºfilter'æ˜¯ä¸€ä¸ªseqå‡½æ•°ï¼Œå®ƒå°†board\u0026rsquo;ï¼Œä¸€ä¸ª Mapï¼Œè½¬æ¢æˆä¸€ä¸ªä¸¤å…ƒç´  Vector çš„ seqï¼ˆä¹Ÿç§°ä¸ºtuplesï¼‰ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ã€‚\n([1 {:connection {6 3, 4 2}, :pegged true})  [2 {:connections {9 5, 7 4}, :pegged true}]) å…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªä½ç½®å·ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯è¯¥ä½ç½®çš„ä¿¡æ¯ã€‚filterç„¶åå°†åŒ¿åå‡½æ•°#(get (second %) :pegged)åº”ç”¨äºè¿™äº›å…ƒç»„ä¸­çš„æ¯ä¸€ä¸ªï¼Œè¿‡æ»¤æ‰é‚£äº›ä½ç½®ä¿¡æ¯è¡¨æ˜è¯¥ä½ç½®ç›®å‰æ²¡æœ‰æŒ‚ç‚¹çš„å…ƒç»„ã€‚æœ€åï¼Œç»“æœè¢«ä¼ é€’ç»™mapï¼Œå®ƒåœ¨æ¯ä¸ªå…ƒç»„ä¸Šè°ƒç”¨firstï¼Œåªä»å…ƒç»„ä¸­æŠ“å–ä½ç½®å·ã€‚\nå½“ä½ å¾—åˆ°ä¸€è¿ä¸²çš„é’‰å­ä½ç½®å·ç åï¼Œä½ å¯¹æ¯ä¸ªä½ç½®è°ƒç”¨ä¸€ä¸ªè°“è¯å‡½æ•°ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªè¿”å›çœŸå€¼çš„ä½ç½®ã€‚è¿™ä¸ªè°“è¯å‡½æ•°æ˜¯ç”¨(comp not-empty (partial valid-moves board))åˆ›å»ºçš„ã€‚æˆ‘ä»¬çš„æƒ³æ³•æ˜¯é¦–å…ˆè¿”å›ä¸€ä¸ªä½ç½®çš„æ‰€æœ‰æœ‰æ•ˆæ£‹æ­¥çš„ Mapï¼Œç„¶åæµ‹è¯•è¯¥ Map æ˜¯å¦ä¸ºç©ºã€‚\né¦–å…ˆï¼Œè¡¨è¾¾å¼(partial valid-moves board)ä»valid-movesæ´¾ç”Ÿå‡ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°boardç”¨partialå¡«å…¥ï¼ˆå› ä¸ºä½ æ¯æ¬¡è°ƒç”¨valid-movesæ—¶ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªæ£‹ç›˜ï¼‰ã€‚è¿™ä¸ªæ–°å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªä½ç½®ï¼Œå¹¶è¿”å›å®ƒåœ¨å½“å‰æ£‹ç›˜ä¸Šçš„æ‰€æœ‰æœ‰æ•ˆæ£‹æ­¥çš„ Mapã€‚\nç¬¬äºŒï¼Œä½ ç”¨compå°†è¿™ä¸ªå‡½æ•°ä¸not-emptyç»„æˆã€‚è¿™ä¸ªå‡½æ•°æ˜¯è‡ªè¿°çš„ï¼›å¦‚æœç»™å®šçš„é›†åˆæ˜¯ç©ºçš„ï¼Œå®ƒè¿”å› \u0026ldquo;true\u0026rdquo;ï¼Œå¦åˆ™è¿”å› \u0026ldquo;false\u0026rdquo;ã€‚\nè¿™æ®µä»£ç æœ€æœ‰è¶£çš„åœ°æ–¹åœ¨äºï¼Œä½ åœ¨ä½¿ç”¨ä¸€ä¸ªå‡½æ•°é“¾æ¥æ¨å¯¼ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç±»ä¼¼äºä½ ä½¿ç”¨å‡½æ•°é“¾æ¥æ¨å¯¼æ–°çš„æ•°æ®ã€‚åœ¨ç¬¬ä¸‰ç« ä¸­ï¼Œä½ äº†è§£åˆ° Clojure å°†å‡½æ•°è§†ä¸ºæ•°æ®ï¼Œå› ä¸ºå‡½æ•°å¯ä»¥æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°å¹¶è¿”å›ã€‚å¸Œæœ›è¿™èƒ½è¯´æ˜ä¸ºä»€ä¹ˆè¿™ä¸ªå‡½æ•°æ˜¯æœ‰è¶£å’Œæœ‰ç”¨çš„ã€‚\næ¸²æŸ“å’Œæ‰“å°æ£‹ç›˜ åœ¨æ£‹ç›˜è¡¨ç¤ºå’Œæ‰“å°éƒ¨åˆ†çš„å‰å‡ ä¸ªè¡¨è¾¾å¼åªæ˜¯å®šä¹‰å¸¸æ•°ã€‚\n(def alpha-start 97) (def alpha-end 123) (def letters (map (comp str char) (range alpha-start alpha-end) )) (def pos-chars 3) ç»‘å®š \u0026ldquo;alpha-start \u0026ldquo;å’Œ \u0026ldquo;alpha-end \u0026ldquo;ä¸ºå­—æ¯aåˆ°zè®¾å®šäº†æ•°å€¼çš„å¼€å§‹å’Œç»“æŸã€‚æˆ‘ä»¬ç”¨è¿™äº›æ¥å»ºç«‹ä¸€ä¸ª \u0026ldquo;å­—æ¯ \u0026ldquo;çš„åºåˆ—ã€‚charï¼Œå½“åº”ç”¨äºä¸€ä¸ªæ•´æ•°æ—¶ï¼Œè¿”å›è¯¥æ•´æ•°å¯¹åº”çš„å­—ç¬¦ï¼Œstrå°†charå˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚pos-charsè¢«å‡½æ•°row-paddingä½¿ç”¨ï¼Œä»¥ç¡®å®šåœ¨æ¯ä¸€è¡Œçš„å¼€å¤´å¢åŠ å¤šå°‘é—´è·ã€‚æ¥ä¸‹æ¥çš„å‡ ä¸ªå®šä¹‰ï¼Œansi-stylesï¼Œansiï¼Œå’Œcolorizeå‘ç»ˆç«¯è¾“å‡ºå½©è‰²æ–‡æœ¬ã€‚\nå‡½æ•°render-pos, row-positions, row-padding, å’Œrender-rowåˆ›å»ºå­—ç¬¦ä¸²æ¥è¡¨ç¤ºæ£‹ç›˜ã€‚\n(defn render-pos  [board pos]  (str (nth letters (dec pos))  (if (get-in board [pos :pegged])  (colorize \u0026#34;0\u0026#34; :blue)  (colorize \u0026#34;-\u0026#34; :red))))  (defn row-positions  \u0026#34;Return all positions in the given row\u0026#34;  [row-num]  (range (inc (or (row-tri (dec row-num)) 0))  (inc (row-tri row-num))))  (defn row-padding  \u0026#34;String of spaces to add to the beginning of a row to center it\u0026#34;  [row-num rows]  (let [pad-length (/ (* (- rows row-num) pos-chars) 2)]  (apply str (take pad-length (repeat \u0026#34; \u0026#34;)))))  (defn render-row  [board row-num]  (str (row-padding row-num (:rows board))  (clojure.string/join \u0026#34; \u0026#34; (map (partial render-pos board)  (row-positions row-num))))) å¦‚æœä½ ä»ä¸‹å¾€ä¸Šçœ‹ï¼Œä½ å¯ä»¥çœ‹åˆ°render-rowè°ƒç”¨å®ƒä¸Šé¢çš„æ¯ä¸ªå‡½æ•°æ¥è¿”å›ç»™å®šè¡Œçš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚æ³¨æ„è¡¨è¾¾å¼(map (partial render-pos board) (row-positions row-num))ã€‚è¿™å±•ç¤ºäº†éƒ¨åˆ†å‡½æ•°çš„ä¸€ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹ï¼Œå³å¤šæ¬¡åº”ç”¨åŒä¸€å‡½æ•°ï¼Œå¹¶å¡«å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œå°±åƒå‰é¢å±•ç¤ºçš„can-move?å‡½æ•°ä¸€æ ·ã€‚\nè¿˜è¯·æ³¨æ„ï¼Œ`render-pos\u0026rsquo;ä½¿ç”¨å­—æ¯è€Œä¸æ˜¯æ•°å­—æ¥æ ‡è¯†æ¯ä¸ªä½ç½®ã€‚è¿™åœ¨æ£‹ç›˜æ˜¾ç¤ºæ—¶èŠ‚çœäº†ä¸€ç‚¹ç©ºé—´ï¼Œå› ä¸ºå®ƒå…è®¸æ¯ä¸ªä½ç½®åªæœ‰ä¸€ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºä¸€ä¸ªäº”è¡Œæ£‹ç›˜ã€‚\næœ€åï¼Œprint-boardåªæ˜¯ç”¨doseqéå†æ¯ä¸€è¡Œçš„ç¼–å·ï¼Œæ‰“å°è¯¥è¡Œçš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚\n(defn print-board  [board]  (doseq [row-num (range 1 (inc (:rows board)))]  (println (render-row board row-num)))) å½“ä½ æƒ³å¯¹ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ è¿›è¡Œå‰¯ä½œç”¨çš„æ“ä½œï¼ˆæ¯”å¦‚æ‰“å°åˆ°ç»ˆç«¯ï¼‰æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨doseqã€‚ç´§è·Ÿåœ¨åå­—doseqåé¢çš„ Vector æè¿°äº†å¦‚ä½•å°†ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ é€ä¸€ç»‘å®šåˆ°ä¸€ä¸ªåå­—ä¸Šï¼Œä»¥ä¾¿ä½ å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œæ“ä½œã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ è¦æŠŠæ•°å­— 1 åˆ° 5ï¼ˆå‡è®¾æœ‰äº”è¡Œï¼‰åˆ†é…ç»™row-numè¿™ä¸ªåå­—ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æ‰“å°æ¯ä¸€è¡Œã€‚\nè™½ç„¶æ‰“å°æ£‹ç›˜åœ¨æŠ€æœ¯ä¸Šå±äºäº¤äº’ï¼Œä½†æˆ‘æƒ³åœ¨è¿™é‡Œç”¨æ¸²æŸ“å‡½æ•°æ¥å±•ç¤ºå®ƒã€‚å½“æˆ‘ç¬¬ä¸€æ¬¡å¼€å§‹å†™è¿™ä¸ªæ¸¸æˆæ—¶ï¼Œprint-boardå‡½æ•°ä¹Ÿç”Ÿæˆäº†æ£‹ç›˜çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ç„¶è€Œï¼Œç°åœ¨print-boardå°†æ‰€æœ‰çš„æ¸²æŸ“å·¥ä½œæ¨è¿Ÿåˆ°çº¯å‡½æ•°ï¼Œè¿™ä½¿å¾—ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œå¹¶å‡å°‘äº†æˆ‘ä»¬ä¸çº¯å‡½æ•°çš„è¡¨é¢ç§¯ã€‚\nç©å®¶äº’åŠ¨ ä¸‹ä¸€ä¸ªå‡½æ•°é›†åˆå¤„ç†ç©å®¶äº’åŠ¨ã€‚é¦–å…ˆï¼Œæœ‰letter-\u0026gt;posï¼Œå®ƒå°†å­—æ¯ï¼ˆè¿™æ˜¯ç©å®¶æ˜¾ç¤ºå’Œè¯†åˆ«ä½ç½®çš„æ–¹å¼ï¼‰è½¬æ¢ä¸ºç›¸åº”çš„ä½ç½®ç¼–å·ã€‚\n(defn letter-\u0026gt;pos  \u0026#34;Converts a letter string to the corresponding position number\u0026#34;  [letter]  (inc (- (int (first letter)) alpha-start))) æ¥ä¸‹æ¥ï¼Œè¾…åŠ©å‡½æ•°get-inputå…è®¸ä½ è¯»å–å’Œæ¸…ç†ç©å®¶çš„è¾“å…¥ã€‚ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœç©å®¶æ²¡æœ‰è¾“å…¥ä»»ä½•ä¸œè¥¿å°±æŒ‰ä¸‹å›è½¦é”®ï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ªå€¼ã€‚\n(defn get-input  \u0026#34;Waits for user to enter text and hit enter, then cleans the input\u0026#34;  ([] (get-input nil))  ([default]  (let [input (clojure.string/trim (read-line))]  (if (empty? input)  default  (clojure.string/lower-case input))))) ä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œcharacters-as-stringsï¼Œæ˜¯ä¸€ä¸ªå¾ˆå°çš„è¾…åŠ©å‡½æ•°ï¼Œè¢«prompt-moveç”¨æ¥æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›ä¸€ä¸ªå­—æ¯é›†åˆï¼Œæ‰€æœ‰éå­—æ¯çš„è¾“å…¥éƒ½è¢«ä¸¢å¼ƒã€‚\n(characters-as-strings \u0026#34;a b\u0026#34;) ; =\u0026gt; (\u0026#34;a\u0026#34; \u0026#34;b\u0026#34;)  (characters-as-strings \u0026#34;a cb\u0026#34;) ; =\u0026gt; (\u0026#34;a\u0026#34; \u0026#34;c\u0026#34; \u0026#34;b\u0026#34;) æ¥ä¸‹æ¥ï¼Œprompt-moveè¯»å–ç©å®¶çš„è¾“å…¥ï¼Œå¹¶å¯¹å…¶é‡‡å–è¡ŒåŠ¨ã€‚\n(defn prompt-move  [board]  (println \u0026#34;\\nHere\u0026#39;s your board:\u0026#34;)  (print-board board)  (println \u0026#34;Move from where to where? Enter two letters:\u0026#34;)  (let [input (map letter-\u0026gt;pos (characters-as-strings (get-input)))]  (if-let [new-board (make-moveâŠ board (first input) (second input))]  (user-entered-valid-move new-board)  (user-entered-invalid-move board)))) åœ¨âŠï¼Œå¦‚æœæ£‹æ‰‹çš„æ£‹æ­¥æ— æ•ˆï¼Œmake-moveè¿”å›nilï¼Œä½ ç”¨user-entered-invalid-moveå‡½æ•°æ¥é€šçŸ¥å¥¹çš„é”™è¯¯ã€‚ä½ å°†æœªç»ä¿®æ”¹çš„æ£‹ç›˜ä¼ é€’ç»™user-entered-invalid-moveï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ç”¨æ£‹ç›˜å†æ¬¡æç¤ºæ£‹æ‰‹ã€‚ä¸‹é¢æ˜¯å‡½æ•°çš„å®šä¹‰ã€‚\n(defn user-entered-invalid-move  \u0026#34;Handles the next step after a user has entered an invalid move\u0026#34;  [board]  (println \u0026#34;\\n!!! That was an invalid move :(\\n\u0026#34;)  (prompt-move board)) ç„¶è€Œï¼Œå¦‚æœè¿™æ­¥æ£‹æ˜¯æœ‰æ•ˆçš„ï¼Œ\u0026ldquo;new-board \u0026ldquo;å°†è¢«ä¼ é€’ç»™ \u0026ldquo;user-entered-valid-move\u0026rdquo;ï¼Œå¦‚æœè¿˜æœ‰æ£‹æ­¥è¦èµ°ï¼Œå®ƒå°†æ§åˆ¶æƒäº¤è¿˜ç»™ \u0026ldquo;prompt-move\u0026rdquo;ã€‚\n(defn user-entered-valid-move  \u0026#34;Handles the next step after a user has entered a valid move\u0026#34;  [board]  (if (can-move? board)  (prompt-move board)  (game-over board))) åœ¨æˆ‘ä»¬çš„æ£‹ç›˜åˆ›å»ºå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°é€’å½’æ˜¯å¦‚ä½•ä½¿ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„æ¥å»ºç«‹ä¸€ä¸ªå€¼çš„ã€‚åŒæ ·çš„äº‹æƒ…ä¹Ÿå‘ç”Ÿåœ¨è¿™é‡Œï¼Œåªæ˜¯å®ƒæ¶‰åŠä¸¤ä¸ªç›¸äº’é€’å½’çš„å‡½æ•°å’Œä¸€äº›ç”¨æˆ·è¾“å…¥ã€‚æ²¡æœ‰çœ‹åˆ°å¯å˜çš„å±æ€§!\næ¸¸æˆç»“æŸåä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè¿™å°±æ˜¯æ‰€å‘ç”Ÿçš„äº‹æƒ…ã€‚\n(defn game-over  \u0026#34;Announce the game is over and prompt to play again\u0026#34;  [board]  (let [remaining-pegs (count (filter :pegged (vals board)))]  (println \u0026#34;Game over! You had\u0026#34; remaining-pegs \u0026#34;pegs left:\u0026#34;)  (print-board board)  (println \u0026#34;Play again? y/n [y]\u0026#34;)  (let [input (get-input \u0026#34;y\u0026#34;)]  (if (= \u0026#34;y\u0026#34; input)  (prompt-rows)  (do  (println \u0026#34;Bye!\u0026#34;)  (System/exit 0)))))) è¿™é‡Œå‘ç”Ÿçš„æ‰€æœ‰äº‹æƒ…æ˜¯ï¼Œæ¸¸æˆå‘Šè¯‰ä½ ä½ çš„è¡¨ç°ï¼Œæ‰“å°å‡ºæœ€åçš„æ£‹ç›˜ï¼Œå¹¶æç¤ºä½ å†ç©ä¸€æ¬¡ã€‚å¦‚æœä½ é€‰æ‹©yï¼Œæ¸¸æˆå°±ä¼šè°ƒç”¨prompt-rowsï¼Œè¿™å°±ç»™æˆ‘ä»¬å¸¦æ¥äº†æœ€åä¸€ç»„å‡½æ•°ï¼Œç”¨æ¥å¼€å§‹æ–°çš„æ¸¸æˆã€‚\n(defn prompt-empty-peg  [board]  (println \u0026#34;Here\u0026#39;s your board:\u0026#34;)  (print-board board)  (println \u0026#34;Remove which peg? [e]\u0026#34;)  (prompt-move (remove-peg board (letter-\u0026gt;pos (get-input \u0026#34;e\u0026#34;)))))  (defn prompt-rows  []  (println \u0026#34;How many rows? [5]\u0026#34;)  (let [rows (Integer. (get-input 5))  board (new-board rows)]  (prompt-empty-peg board))) ä½ ä½¿ç”¨prompt-rowså¼€å§‹æ¸¸æˆï¼Œè®©ç©å®¶è¾“å…¥è¦åŒ…æ‹¬å¤šå°‘è¡Œã€‚ç„¶åä½ æŠŠæ§åˆ¶æƒäº¤ç»™prompt-empty-pegï¼Œè¿™æ ·ç©å®¶å°±å¯ä»¥å‘Šè¯‰æ¸¸æˆè¦å…ˆç§»é™¤å“ªä¸ªé’‰å­ã€‚ä»è¿™é‡Œå¼€å§‹ï¼Œç¨‹åºæç¤ºä½ èµ°æ£‹ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•æ£‹æ­¥ã€‚\nå°½ç®¡è¿™ä¸ªç¨‹åºçš„æ‰€æœ‰å‰¯ä½œç”¨éƒ½æ˜¯ç›¸å¯¹æ— å®³çš„ï¼ˆä½ æ‰€åšçš„åªæ˜¯æç¤ºå’Œæ‰“å°ï¼‰ï¼Œä½†åƒè¿™æ ·å°†å®ƒä»¬å°å­˜åœ¨è‡ªå·±çš„å‡½æ•°ä¸­æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æœ€ä½³å®è·µã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ èƒ½ç¡®å®šå“ªäº›å‡½æ•°æ˜¯é€æ˜çš„ã€æ— å‰¯ä½œç”¨çš„ï¼Œå¹¶å°†è¿™äº›å‡½æ•°æ”¾åœ¨è‡ªå·±çš„å‡½æ•°ä¸­ï¼Œä½ å°†ä»å‡½æ•°å¼ç¼–ç¨‹ä¸­è·å¾—æ›´å¤šçš„å¥½å¤„ã€‚è¿™äº›å‡½æ•°ä¸å¯èƒ½åœ¨ä½ çš„ç¨‹åºçš„ä¸ç›¸å…³éƒ¨åˆ†å¼•èµ·å¥‡æ€ªçš„é”™è¯¯ã€‚å®ƒä»¬æ›´å®¹æ˜“åœ¨ REPL ä¸­æµ‹è¯•å’Œå¼€å‘ï¼Œå› ä¸ºå®ƒä»¬åªä¾èµ–äºä½ ä¼ é€’ç»™å®ƒä»¬çš„å‚æ•°ï¼Œè€Œä¸æ˜¯ä¸€äº›å¤æ‚çš„éšè—çŠ¶æ€å¯¹è±¡ã€‚\næ€»ç»“ çº¯å‡½æ•°åœ¨æœ¬è´¨ä¸Šæ˜¯é€æ˜çš„ï¼Œå¹¶ä¸”æ²¡æœ‰å‰¯ä½œç”¨ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¾ˆå®¹æ˜“è¢«æ¨ç†ã€‚ä¸ºäº†ä» Clojure ä¸­è·å¾—æœ€å¤§çš„æ”¶ç›Šï¼Œè¯·å°½é‡å‡å°‘ä¸çº¯å‡½æ•°çš„ä½¿ç”¨ã€‚åœ¨ä¸€ä¸ªä¸å¯å˜çš„ä¸–ç•Œé‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨é€’å½’è€Œä¸æ˜¯for/whileå¾ªç¯ï¼Œä½¿ç”¨å‡½æ•°ç»„åˆè€Œä¸æ˜¯è¿ç»­çš„çªå˜ã€‚çº¯å‡½æ•°å…è®¸å¼ºå¤§çš„æŠ€æœ¯ï¼Œå¦‚å‡½æ•°ç»„åˆå‡½æ•°å’Œå¤‡å¿˜åŒ–ã€‚å®ƒä»¬ä¹Ÿæ˜¯è¶…çº§æœ‰è¶£çš„!\nç»ƒä¹  å‘å±•å‡½æ•°å¼ç¼–ç¨‹æŠ€èƒ½çš„æœ€å¥½æ–¹æ³•ä¹‹ä¸€æ˜¯å°è¯•å®ç°ç°æœ‰çš„å‡½æ•°ã€‚ä¸ºæ­¤ï¼Œä¸‹é¢çš„å¤§å¤šæ•°ç»ƒä¹ éƒ½å»ºè®®ä½ å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œä½†ä¸è¦æ­¢æ­¥äºæ­¤ï¼›é€šè¿‡ Clojure å°æŠ„ï¼ˆhttp://clojure.org/cheatsheet/ï¼‰ï¼Œå¯ä»¥æŒ‘é€‰æ›´å¤šçš„å‡½æ•°\n ä½ ç”¨(comp :intelligence :attribute)åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°æ¥è¿”å›ä¸€ä¸ªè§’è‰²çš„æ™ºåŠ›ã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œattrï¼Œä½ å¯ä»¥åƒ(attr :intelligence)é‚£æ ·è°ƒç”¨å®ƒï¼ŒåšåŒæ ·çš„äº‹æƒ…ã€‚ å®ç°compå‡½æ•°ã€‚ å®ç°assoc-inå‡½æ•°ã€‚æç¤ºï¼šä½¿ç”¨assocå‡½æ•°å¹¶å°†å…¶å‚æ•°å®šä¹‰ä¸º[m [k \u0026amp; ks] v]ã€‚ æŸ¥é˜…å¹¶ä½¿ç”¨update-inå‡½æ•°ã€‚ å®ç° \u0026ldquo;update-in\u0026rdquo;ã€‚  ","permalink":"https://zhenfeng-zhu.github.io/post/chapter5/","summary":"å‡½æ•°å¼ç¼–ç¨‹ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»ä¸“æ³¨äºç†Ÿæ‚‰ Clojure æä¾›çš„å·¥å…·ï¼šä¸å¯å˜çš„æ•°æ®ç»“æ„ã€å‡½æ•°ã€æŠ½è±¡ï¼Œç­‰ç­‰ã€‚åœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•æ€è€ƒä½ çš„ç¼–ç¨‹ä»»åŠ¡ï¼Œä»¥æœ€å¥½çš„æ–¹å¼åˆ©ç”¨è¿™äº›å·¥å…·ã€‚ä½ å°†å¼€å§‹æŠŠä½ çš„ç»éªŒæ•´åˆåˆ°ä¸€ä¸ªæ–°çš„å‡½æ•°å¼ç¼–ç¨‹æ€ç»´ä¸­ã€‚\nä½ å°†å­¦åˆ°çš„æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬ï¼šä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Œä¸ºä»€ä¹ˆå®ƒä»¬å¾ˆæœ‰ç”¨ï¼›å¦‚ä½•ä½¿ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆå®ƒä»¬æ¯”å¯å˜çš„è¡¨äº²æ›´æœ‰ä¼˜åŠ¿ï¼›å¦‚ä½•å°†æ•°æ®å’Œå‡½æ•°åˆ†å¼€ï¼Œç»™ä½ å¸¦æ¥æ›´å¤šçš„åŠ›é‡å’Œçµæ´»æ€§ï¼›ä»¥åŠä¸ºä»€ä¹ˆå¯¹ä¸€å°éƒ¨åˆ†æ•°æ®æŠ½è±¡è¿›è¡Œç¼–ç¨‹ä¼šå¾ˆå¼ºå¤§ã€‚ä¸€æ—¦ä½ æŠŠæ‰€æœ‰è¿™äº›çŸ¥è¯†å¡è¿›ä½ çš„å¤§è„‘ï¼Œä½ å°±ä¼šæœ‰ä¸€ä¸ªå…¨æ–°çš„è§£å†³é—®é¢˜çš„æ–¹æ³•\nåœ¨å­¦ä¹ äº†è¿™äº›ä¸»é¢˜ä¹‹åï¼Œä½ å°†é€šè¿‡ç¼–å†™ä¸€ä¸ªåŸºäºç»ˆç«¯çš„æ¸¸æˆæ¥è¿ç”¨ä½ æ‰€å­¦åˆ°çš„ä¸€åˆ‡ï¼Œè¿™ä¸ªæ¸¸æˆçš„çµæ„Ÿæ¥è‡ªäºç¾å›½å„åœ° Cracker Barrel é¤é¦†ä¸­çš„ä¸€ç§å¤è€è€Œç¥ç§˜çš„æ€ç»´è®­ç»ƒè£…ç½®ã€‚Peg Thing!\nçº¯å‡½æ•°ï¼šæ˜¯ä»€ä¹ˆå’Œä¸ºä»€ä¹ˆ é™¤äº† \u0026ldquo;println \u0026ldquo;å’Œ \u0026ldquo;rand\u0026rdquo;ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ æ‰€ä½¿ç”¨çš„æ‰€æœ‰å‡½æ•°éƒ½æ˜¯çº¯å‡½æ•°ã€‚æ˜¯ä»€ä¹ˆä½¿å®ƒä»¬æˆä¸ºçº¯å‡½æ•°ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Ÿå¦‚æœä¸€ä¸ªå‡½æ•°ç¬¦åˆä¸¤ä¸ªæ¡ä»¶ï¼Œå®ƒå°±æ˜¯çº¯å‡½æ•°ã€‚\n å¦‚æœç»™å‡ºç›¸åŒçš„å‚æ•°ï¼Œå®ƒæ€»æ˜¯è¿”å›ç›¸åŒçš„ç»“æœã€‚è¿™è¢«ç§°ä¸ºå¼•ç”¨é€æ˜åº¦ï¼Œä½ å¯ä»¥æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„ 5 ç¾å…ƒç¼–ç¨‹æœ¯è¯­åˆ—è¡¨ä¸­ã€‚ å®ƒä¸èƒ½å¼•èµ·ä»»ä½•å‰¯ä½œç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥å‡½æ•°ä¸èƒ½åšå‡ºä»»ä½•åœ¨å‡½æ•°æœ¬èº«ä¹‹å¤–å¯ä»¥è§‚å¯Ÿåˆ°çš„æ”¹å˜\u0026ndash;ä¾‹å¦‚ï¼Œé€šè¿‡æ”¹å˜ä¸€ä¸ªå¤–éƒ¨å¯è®¿é—®çš„å¯æ”¹å˜å¯¹è±¡æˆ–å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚  è¿™äº›ç‰¹æ€§ä½¿ä½ æ›´å®¹æ˜“æ¨ç†ä½ çš„ç¨‹åºï¼Œå› ä¸ºè¿™äº›å‡½æ•°æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œæ— æ³•å½±å“ä½ ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ã€‚å½“ä½ ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œä½ ä¸å¿…é—®è‡ªå·±ï¼Œ\u0026ldquo;æˆ‘è°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼šç ´åä»€ä¹ˆï¼Ÿ\u0026rdquo; å®ƒä»¬ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼šä½ æ°¸è¿œä¸éœ€è¦ææ¸…æ¥šä¸ºä»€ä¹ˆç»™ä¸€ä¸ªå‡½æ•°ä¼ é€’ç›¸åŒçš„å‚æ•°ä¼šå¯¼è‡´ä¸åŒçš„è¿”å›å€¼ï¼Œå› ä¸ºè¿™æ°¸è¿œä¸ä¼šå‘ç”Ÿã€‚\nçº¯å‡½æ•°å’Œç®—æœ¯ä¸€æ ·ç¨³å®šï¼Œæ²¡æœ‰é—®é¢˜ï¼ˆä½ æœ€åä¸€æ¬¡ä¸ºä¸¤ä¸ªæ•°å­—ç›¸åŠ è€Œçƒ¦æ¼æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿï¼‰ å®ƒä»¬æ˜¯å·¨å¤§çš„å‡½æ•°å°ç –å—ï¼Œä½ å¯ä»¥è‡ªä¿¡åœ°å°†å…¶ä½œä¸ºä½ ç¨‹åºçš„åŸºç¡€ã€‚è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°çœ‹çœ‹å¼•ç”¨é€æ˜æ€§å’Œæ— å‰¯ä½œç”¨ï¼Œçœ‹çœ‹å®ƒä»¬åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å‘æŒ¥ä½œç”¨çš„ã€‚\nçº¯å‡½æ•°æ˜¯å¼•ç”¨é€æ˜çš„ ä¸ºäº†åœ¨è°ƒç”¨ç›¸åŒå‚æ•°æ—¶è¿”å›ç›¸åŒçš„ç»“æœï¼Œçº¯å‡½æ•°åªä¾é  1ï¼‰è‡ªå·±çš„å‚æ•°å’Œ 2ï¼‰ä¸å¯å˜çš„å€¼æ¥å†³å®šå…¶è¿”å›å€¼ã€‚ä¾‹å¦‚ï¼Œæ•°å­¦å‡½æ•°æ˜¯å¼•ç”¨é€æ˜çš„ã€‚\n(+ 1 2) ; =\u0026gt; 3 å¦‚æœä¸€ä¸ªå‡½æ•°ä¾èµ–äºä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å¼•ç”¨é€æ˜çš„ã€‚å­—ç¬¦ä¸²`\u0026rdquo;, Daniel-san \u0026ldquo;æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥ä¸‹é¢çš„å‡½æ•°ä¹Ÿæ˜¯å¼•ç”¨é€æ˜çš„ã€‚\n(defn wisdom  [words]  (str words \u0026#34;, Daniel-san\u0026#34;))  (wisdom \u0026#34;Always bathe on Fridays\u0026#34;) ; =\u0026gt; \u0026#34;Always bathe on Fridays, Daniel-san\u0026#34; ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸‹é¢çš„å‡½æ•°åœ¨ç›¸åŒçš„å‚æ•°ä¸‹ä¸ä¼šäº§ç”Ÿç›¸åŒçš„ç»“æœï¼›å› æ­¤ï¼Œå®ƒä»¬åœ¨æŒ‡ç§°ä¸Šæ˜¯ä¸é€æ˜çš„ã€‚ä»»ä½•ä¾èµ–éšæœºæ•°ç”Ÿæˆå™¨çš„å‡½æ•°éƒ½ä¸å¯èƒ½æ˜¯æŒ‡ç§°é€æ˜çš„ã€‚\n(defn year-end-evaluation  []  (if (\u0026gt; (rand) 0.5)  \u0026#34;You get a raise!","title":"Chapter5 å‡½æ•°å¼ç¼–ç¨‹"},{"content":"æ ¸å¿ƒå‡½æ•°çš„æ·±å…¥ç ”ç©¶ å¦‚æœä½ åƒæˆ‘ä¸€æ ·æ˜¯ç„¦è™‘çš„ã€ä»¥é’å°‘å¹´ä¸ºä¸­å¿ƒçš„å‡†è‚¥çš‚å‰§*ã€Šå¸è¡€é¬¼æ—¥è®°ã€‹*çš„è¶…çº§ç²‰ä¸ï¼Œä½ ä¸€å®šè®°å¾—ä¸»è§’åŸƒç³å¨œå¼€å§‹è´¨ç–‘å¥¹è‹ç™½çš„ã€ç¥ç§˜çš„æš—æ‹è€…çš„è¡Œä¸ºçš„é‚£ä¸€é›†ã€‚\u0026ldquo;ä¸ºä»€ä¹ˆå½“æˆ‘çš„è†ç›–è¢«åˆ®ä¼¤æ—¶ï¼Œä»–ç«‹åˆ»æ¶ˆå¤±å¾—æ— å½±æ— è¸ªï¼Ÿ\u0026ldquo;å’Œ \u0026ldquo;ä¸ºä»€ä¹ˆå½“æˆ‘çš„æ‰‹æŒ‡è¢«åˆ’ç ´æ—¶ï¼Œä»–çš„è„¸å˜æˆäº†ä¸€ä¸ªæ€ªå¼‚çš„æ­»äº¡é¢å…·ï¼Ÿ\u0026ldquo;ç­‰ç­‰ã€‚\nå¦‚æœä½ å·²ç»å¼€å§‹æŠŠç© Clojure çš„æ ¸å¿ƒå‡½æ•°ï¼Œä½ å¯èƒ½ä¹Ÿä¼šé—®è‡ªå·±ç±»ä¼¼çš„é—®é¢˜ã€‚\u0026ldquo;ä¸ºä»€ä¹ˆmapä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œè€Œæˆ‘ç»™å®ƒçš„æ˜¯ä¸€ä¸ª Vectorï¼Ÿ\u0026ldquo;å’Œ \u0026ldquo;ä¸ºä»€ä¹ˆreduceä¼šæŠŠæˆ‘çš„ map å½“æˆä¸€ä¸ª Vectorï¼Ÿ\u0026ldquo;ç­‰ç­‰ã€‚(ä¸è¿‡ï¼Œæœ‰äº† Clojureï¼Œä½ è‡³å°‘å¯ä»¥å…äºæ€è€ƒä½œä¸ºä¸€ä¸ª 17 å²å­©å­çš„æ·±åˆ»çš„å­˜åœ¨ææƒ§ï¼Œç›´åˆ°æ°¸è¿œï¼‰ã€‚\nåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£åˆ° Clojure çš„æ·±é‚ƒã€é»‘æš—ã€å—œè¡€ã€è¶…è‡ªç„¶çš„coughï¼Œæˆ‘çš„æ„æ€æ˜¯ï¼Œåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£åˆ° Clojure çš„æŠ½è±¡çš„åŸºæœ¬æ¦‚å¿µä»¥åŠåºåˆ—å’Œé›†åˆçš„æŠ½è±¡ã€‚ä½ è¿˜ä¼šäº†è§£åˆ°ç–¯ç‹‚çš„åºåˆ—ã€‚è¿™å°†ä¸ºä½ æä¾›æ‰€éœ€çš„åŸºç¡€ï¼Œä½¿ä½ èƒ½å¤Ÿé˜…è¯»ä½ ä»¥å‰æ²¡æœ‰ä½¿ç”¨è¿‡çš„å‡½æ•°çš„æ–‡æ¡£ï¼Œå¹¶ç†è§£å½“ä½ è¯•ç€ä½¿ç”¨å®ƒä»¬æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚\næ¥ä¸‹æ¥ï¼Œä½ å°†è·å¾—æ›´å¤šå…³äºä½ æœ€éœ€è¦ä½¿ç”¨çš„å‡½æ•°çš„ç»éªŒã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ç”¨å‡½æ•°mapã€reduceã€intoã€conjã€concatã€someã€filterã€takeã€dropã€sortã€sort-byå’Œidentityæ¥å¤„ç†åˆ—è¡¨ã€Vectorã€Map å’Œ Setã€‚ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ç”¨applyã€partialå’Œcomplementåˆ›å»ºæ–°çš„å‡½æ•°ã€‚æ‰€æœ‰è¿™äº›ä¿¡æ¯å°†å¸®åŠ©ä½ äº†è§£å¦‚ä½•ä»¥ Clojure çš„æ–¹å¼åšäº‹ï¼Œå®ƒå°†ä¸ºä½ ç¼–å†™è‡ªå·±çš„ä»£ç ä»¥åŠé˜…è¯»å’Œå­¦ä¹ ä»–äººçš„é¡¹ç›®æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚\næœ€åï¼Œä½ å°†å­¦ä¼šå¦‚ä½•è§£æå’ŒæŸ¥è¯¢ CSV ä¸­çš„å¸è¡€é¬¼æ•°æ®ï¼Œä»¥ç¡®å®šåœ¨ä½ çš„å®¶ä¹¡æ½œä¼ç€å“ªäº›è¯ºæ–¯è´¹æ‹‰å›¾ã€‚\nä»ç¼–ç¨‹åˆ°æŠ½è±¡ ä¸ºäº†ç†è§£ä»ç¼–ç¨‹åˆ°æŠ½è±¡ï¼Œè®©æˆ‘ä»¬æŠŠ Clojure ä¸ä¸€ç§æ²¡æœ‰è€ƒè™‘åˆ°è¿™ä¸ªåŸåˆ™çš„è¯­è¨€è¿›è¡Œæ¯”è¾ƒã€‚Emacs Lispï¼ˆelispï¼‰ã€‚åœ¨ elisp ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨mapcarå‡½æ•°æ¥å¯¼å‡ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œè¿™ä¸ä½ åœ¨ Clojure ä¸­ä½¿ç”¨mapçš„æ–¹å¼ç›¸ä¼¼ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³åœ¨ elisp ä¸­ Map ä¸€ä¸ªå“ˆå¸Œ Mapï¼ˆç±»ä¼¼äº Clojure çš„ map æ•°æ®ç»“æ„ï¼‰ï¼Œä½ éœ€è¦ä½¿ç”¨maphashå‡½æ•°ï¼Œè€Œåœ¨ Clojure ä¸­ä½ ä»ç„¶å¯ä»¥åªä½¿ç”¨mapã€‚æ¢å¥è¯è¯´ï¼Œelisp ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„ã€é’ˆå¯¹æ•°æ®ç»“æ„çš„å‡½æ•°æ¥å®ç°mapæ“ä½œï¼Œè€Œ Clojure åªä½¿ç”¨ä¸€ä¸ªã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ Clojure ä¸­å¯¹ map è°ƒç”¨reduceï¼Œè€Œ elisp å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå‡½æ•°æ¥å‡å°‘æ•£åˆ— mapã€‚\nåŸå› æ˜¯ Clojure åœ¨åºåˆ—æŠ½è±¡æ–¹é¢å®šä¹‰äº†mapå’Œreduceå‡½æ•°ï¼Œè€Œä¸æ˜¯åœ¨å…·ä½“çš„æ•°æ®ç»“æ„æ–¹é¢ã€‚åªè¦æ•°æ®ç»“æ„å“åº”æ ¸å¿ƒåºåˆ—æ“ä½œï¼ˆå‡½æ•°firstã€restå’Œconsï¼Œæˆ‘ä»¬ç¨åä¼šä»”ç»†ç ”ç©¶ï¼‰ï¼Œå®ƒå°±èƒ½ä¸mapã€reduceä»¥åŠå…¶ä»–å¤§é‡çš„åºåˆ—å‡½æ•°å…è´¹å·¥ä½œã€‚è¿™å°±æ˜¯ Clojurists æ‰€è¯´çš„æŠ½è±¡ç¼–ç¨‹ï¼Œä¹Ÿæ˜¯ Clojure å“²å­¦çš„ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ã€‚\næˆ‘è®¤ä¸ºæŠ½è±¡æ˜¯æ“ä½œçš„å‘½åé›†åˆã€‚å¦‚æœä½ èƒ½åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œä¸€ä¸ªæŠ½è±¡çš„æ‰€æœ‰æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯è¯¥æŠ½è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚æˆ‘ç”šè‡³åœ¨ç¼–ç¨‹ä¹‹å¤–ä¹Ÿæ˜¯è¿™æ ·æƒ³çš„ã€‚ä¾‹å¦‚ï¼Œç”µæ± æŠ½è±¡åŒ…æ‹¬ \u0026ldquo;å°†å¯¼ç”µä»‹è´¨è¿æ¥åˆ°å…¶é˜³æå’Œé˜´æ \u0026ldquo;çš„æ“ä½œï¼Œè€Œè¯¥æ“ä½œçš„è¾“å‡ºæ˜¯ç”µæµã€‚ç”µæ± æ˜¯ç”¨é”‚è¿˜æ˜¯ç”¨åœŸè±†åšçš„å¹¶ä¸é‡è¦ã€‚åªè¦å®ƒå¯¹å®šä¹‰ç”µæ± çš„ä¸€ç³»åˆ—æ“ä½œåšå‡ºååº”ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç”µæ± ã€‚\nåŒæ ·åœ°ï¼Œmapå¹¶ä¸å…³å¿ƒåˆ—è¡¨ã€Vectorã€Set å’Œ Map æ˜¯å¦‚ä½•å®ç°çš„ã€‚å®ƒåªå…³å¿ƒå®ƒæ˜¯å¦èƒ½å¯¹å®ƒä»¬è¿›è¡Œåºåˆ—æ“ä½œã€‚è®©æˆ‘ä»¬çœ‹çœ‹mapæ˜¯å¦‚ä½•åœ¨åºåˆ—æŠ½è±¡ä¸­å®šä¹‰çš„ï¼Œè¿™æ ·ä½ å°±èƒ½ç†è§£ä¸€èˆ¬çš„æŠ½è±¡ç¼–ç¨‹ã€‚\næŠŠåˆ—è¡¨ã€Vectorã€Set å’Œ Map å½“ä½œåºåˆ—å¯¹å¾… å¦‚æœä½ æŠŠmapæ“ä½œç‹¬ç«‹äºä»»ä½•ç¼–ç¨‹è¯­è¨€ï¼Œç”šè‡³æ˜¯ç¼–ç¨‹ï¼Œå®ƒçš„åŸºæœ¬è¡Œä¸ºæ˜¯ç”¨ä¸€ä¸ªå‡½æ•°Æ’ä»ç°æœ‰çš„åºåˆ—xå¯¼å‡ºä¸€ä¸ªæ–°çš„åºåˆ—yï¼Œè¿™æ · y1 = Æ’(x1), y2 = Æ’(x2), . . . yn = Æ’(xn)ã€‚å›¾ 4-1 è¯´æ˜äº†ä½ å¦‚ä½•å°†åº”ç”¨äºåºåˆ—çš„ Map å¯è§†åŒ–ã€‚\n! img\nå›¾ 4-1ï¼šMap çš„å¯è§†åŒ–\næœ¯è¯­åºåˆ—åœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ä»¥çº¿æ€§é¡ºåºç»„ç»‡çš„å…ƒç´ é›†åˆï¼Œè€Œä¸æ˜¯æ— åºé›†åˆæˆ–èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰å‰åå…³ç³»çš„å›¾ã€‚å›¾ 4-2 æ˜¾ç¤ºäº†ä½ å¦‚ä½•å°†ä¸€ä¸ªåºåˆ—å¯è§†åŒ–ï¼Œä¸ä¸Šè¿°å…¶ä»–ä¸¤ä¸ªé›†åˆå½¢æˆå¯¹æ¯”ã€‚\nå›¾ 4-2ï¼šåºåˆ—å’Œéåºåˆ—é›†åˆ\nåœ¨è¿™ä¸ªå…³äº Map å’Œåºåˆ—çš„æè¿°ä¸­ï¼Œæ²¡æœ‰æåˆ°åˆ—è¡¨ã€Vector æˆ–å…¶ä»–å…·ä½“çš„æ•°æ®ç»“æ„ã€‚Clojure çš„è®¾è®¡æ˜¯è®©æˆ‘ä»¬å°½å¯èƒ½åœ°ç”¨è¿™ç§æŠ½è±¡çš„æœ¯è¯­æ¥æ€è€ƒå’Œç¼–ç¨‹ï¼Œå®ƒé€šè¿‡ç”¨æ•°æ®ç»“æ„çš„æŠ½è±¡æ¥å®ç°å‡½æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œmapæ˜¯æ ¹æ®åºåˆ—æŠ½è±¡æ¥å®šä¹‰çš„ã€‚åœ¨å¯¹è¯ä¸­ï¼Œä½ ä¼šè¯´mapã€reduceå’Œå…¶ä»–åºåˆ—å‡½æ•°å–ä¸€ä¸ªåºåˆ—æˆ–ç”šè‡³å–ä¸€ä¸ª seqã€‚äº‹å®ä¸Šï¼ŒClojurists é€šå¸¸ä½¿ç”¨seqè€Œä¸æ˜¯sequenceï¼Œä½¿ç”¨seq å‡½æ•°å’Œseq åº“ç­‰æœ¯è¯­æ¥æŒ‡ä»£æ‰§è¡Œé¡ºåºæ“ä½œçš„å‡½æ•°ã€‚æ— è®ºä½ ä½¿ç”¨sequenceè¿˜æ˜¯seqï¼Œä½ éƒ½è¡¨æ˜æœ‰å…³çš„æ•°æ®ç»“æ„å°†è¢«è§†ä¸ºä¸€ä¸ªåºåˆ—ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä»€ä¹ˆæœ€çœŸå®çš„å¿ƒæ€å¹¶ä¸é‡è¦ã€‚\nå¦‚æœæ ¸å¿ƒåºåˆ—å‡½æ•° \u0026ldquo;first\u0026rdquo;ã€\u0026ldquo;rest \u0026ldquo;å’Œ \u0026ldquo;cons \u0026ldquo;åœ¨ä¸€ä¸ªæ•°æ®ç»“æ„ä¸Šå·¥ä½œï¼Œä½ å¯ä»¥è¯´è¿™ä¸ªæ•°æ®ç»“æ„å®ç°äº†åºåˆ—çš„æŠ½è±¡ã€‚åˆ—è¡¨ã€Vectorã€Set å’Œ Map éƒ½å®ç°äº†åºåˆ—æŠ½è±¡ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½å¯ä»¥ç”¨mapï¼Œå¦‚å›¾æ‰€ç¤ºã€‚\n(defn titleize [topic] (str topic \u0026#34; for the Brave and True\u0026#34;)) (map titleize [\u0026#34;Hamsters\u0026#34; \u0026#34;Ragnarok\u0026#34;]) ; =\u0026gt; (\u0026#34;Hamsters for the Brave and True\u0026#34; \u0026#34;Ragnarok for the Brave and True\u0026#34;) (map titleize \u0026#39;(\u0026#34;Empathy\u0026#34; \u0026#34;Decorating\u0026#34;)) ; =\u0026gt; (\u0026#34;Empathy for the Brave and True\u0026#34; \u0026#34;Decorating for the Brave and True\u0026#34;) (map titleize #{\u0026#34;Elbows\u0026#34; \u0026#34;Soap Carving\u0026#34;}) ; =\u0026gt; (\u0026#34;Elbows for the Brave and True\u0026#34; \u0026#34;Soap Carving for the Brave and True\u0026#34;) (map #(titleize (second %)) {:uncomfortable-thing \u0026#34;Winking\u0026#34;}) ; =\u0026gt; (\u0026#34;Winking for the Brave and True\u0026#34;) å‰ä¸¤ä¸ªä¾‹å­è¡¨æ˜mapå¯¹ Vector å’Œåˆ—è¡¨çš„å·¥ä½œæ–¹å¼æ˜¯ç›¸åŒçš„ã€‚ç¬¬ä¸‰ä¸ªä¾‹å­æ˜¾ç¤ºmapå¯ä»¥ä¸æœªæ’åºçš„é›†åˆä¸€èµ·å·¥ä½œã€‚åœ¨ç¬¬å››ä¸ªä¾‹å­ä¸­ï¼Œä½ å¿…é¡»åœ¨åŒ¿åå‡½æ•°çš„å‚æ•°ä¸Šè°ƒç”¨secondï¼Œç„¶åå†å°†å…¶æ ‡é¢˜åŒ–ï¼Œå› ä¸ºå‚æ•°æ˜¯ä¸€ä¸ª mapã€‚æˆ‘å°†å¾ˆå¿«è§£é‡ŠåŸå› ï¼Œä½†é¦–å…ˆè®©æˆ‘ä»¬çœ‹çœ‹å®šä¹‰åºåˆ—æŠ½è±¡çš„ä¸‰ä¸ªå‡½æ•°ã€‚\nfirst, rest, and cons åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å¿«é€Ÿè¿‚å›åˆ° JavaScript ä¸­ï¼Œå®ç°ä¸€ä¸ªé“¾è¡¨å’Œä¸‰ä¸ªæ ¸å¿ƒå‡½æ•°ã€‚first,rest, å’Œconsã€‚åœ¨è¿™ä¸‰ä¸ªæ ¸å¿ƒå‡½æ•°å®ç°ä¹‹åï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•ç”¨å®ƒä»¬æ¥æ„å»ºmapã€‚\né‡ç‚¹æ˜¯è¦ç†è§£ Clojure ä¸­çš„ seq æŠ½è±¡å’Œé“¾æ¥åˆ—è¡¨çš„å…·ä½“å®ç°ä¹‹é—´çš„åŒºåˆ«ã€‚å¦‚ä½•å®ç°ä¸€ä¸ªç‰¹å®šçš„æ•°æ®ç»“æ„å¹¶ä¸é‡è¦ï¼šå½“æ¶‰åŠåˆ°åœ¨ä¸€ä¸ªæ•°æ®ç»“æ„ä¸Šä½¿ç”¨ seq å‡½æ•°æ—¶ï¼ŒClojure æ‰€é—®çš„æ˜¯ \u0026ldquo;æˆ‘å¯ä»¥firstã€restå’Œconså—ï¼Ÿ\u0026rdquo; å¦‚æœç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä½ å°±å¯ä»¥åœ¨è¯¥æ•°æ®ç»“æ„ä¸Šä½¿ç”¨ seq åº“ã€‚\nåœ¨ä¸€ä¸ªé“¾æ¥åˆ—è¡¨ä¸­ï¼ŒèŠ‚ç‚¹æ˜¯ä»¥çº¿æ€§é¡ºåºé“¾æ¥çš„ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åœ¨ JavaScript ä¸­åˆ›å»ºä¸€ä¸ªã€‚åœ¨è¿™ä¸ªç‰‡æ®µä¸­ï¼Œnextæ˜¯ç©ºçš„ï¼Œå› ä¸ºå®ƒæ˜¯åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚\nvar node3 = { value: \u0026#34;last\u0026#34;, next: null }; åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œnode2çš„nextæŒ‡å‘node3ï¼Œè€Œnode1çš„nextæŒ‡å‘node2ï¼›è¿™å°±æ˜¯ \u0026ldquo;é“¾è¡¨ \u0026ldquo;ä¸­çš„ \u0026ldquo;é“¾æ¥\u0026rdquo;ã€‚\nvar node2 = { value: \u0026#34;middle\u0026#34;, next: node3 }; var node1 = { value: \u0026#34;first\u0026#34;, next: node2 }; ä»å›¾å½¢ä¸Šçœ‹ï¼Œä½ å¯ä»¥å¦‚å›¾ 4-3 æ‰€ç¤ºè¡¨ç¤ºè¿™ä¸ªåˆ—è¡¨ã€‚\nå›¾ 4-3: ä¸€ä¸ªé“¾æ¥åˆ—è¡¨\nä½ å¯ä»¥åœ¨ä¸€ä¸ªé“¾è¡¨ä¸Šæ‰§è¡Œä¸‰ä¸ªæ ¸å¿ƒå‡½æ•°ã€‚first, rest, å’Œcons. firstè¿”å›è¯·æ±‚çš„èŠ‚ç‚¹çš„å€¼ï¼Œrestè¿”å›è¯·æ±‚çš„èŠ‚ç‚¹ä¹‹åçš„å‰©ä½™å€¼ï¼Œconsåœ¨åˆ—è¡¨çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªå…·æœ‰ç»™å®šå€¼çš„æ–°èŠ‚ç‚¹ã€‚åœ¨è¿™äº›å®ç°ä¹‹åï¼Œä½ å¯ä»¥åœ¨å®ƒä»¬ä¹‹ä¸Šå®ç°mapã€reduceã€filterå’Œå…¶ä»– seq å‡½æ•°ã€‚\nä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†æˆ‘ä»¬å¦‚ä½•ç”¨æˆ‘ä»¬çš„ JavaScript ä¾‹å­å®ç°å’Œä½¿ç”¨firstã€restå’Œconsï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥è¿”å›ç‰¹å®šçš„èŠ‚ç‚¹å¹¶å¯¼å‡ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ã€‚è¯·æ³¨æ„ï¼Œfirstå’Œrestçš„å‚æ•°è¢«å‘½åä¸ºnodeã€‚è¿™å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°å›°æƒ‘ï¼Œå› ä¸ºä½ å¯èƒ½ä¼šè¯´ï¼š\u0026ldquo;æˆ‘ä¸æ˜¯åœ¨è·å–ä¸€ä¸ªåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å—ï¼Ÿ\u0026rdquo; å¥½å§ï¼Œä½ ä¸€æ¬¡å¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œæ˜¯ä¸€ä¸ªèŠ‚ç‚¹ä¸€ä¸ªèŠ‚ç‚¹åœ°æ“ä½œ\nvar first = function(node) { return node.value; }; var rest = function(node) { return node.next; }; var cons = function(newValue, node) { return { value: newValue, next: node }; }; first(node1); // =\u0026gt; \u0026#34;first\u0026#34; first(rest(node1)); // =\u0026gt; \u0026#34;middle\u0026#34; first(rest(rest(node1))); // =\u0026gt; \u0026#34;last\u0026#34; var node0 = cons(\u0026#34;new first\u0026#34;, node1); first(node0); // =\u0026gt; \u0026#34;new first\u0026#34; first(rest(node0)); // =\u0026gt; \u0026#34;first\u0026#34; å¦‚å‰æ‰€è¿°ï¼Œä½ å¯ä»¥ç”¨firstã€restå’Œconsæ¥å®ç°mapã€‚\nvar map = function (list, transform) { if (list === null) { return null; } else { return cons(transform(first(list)), map(rest(list), transform)); } } è¿™ä¸ªå‡½æ•°è½¬æ¢äº† list çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶ååœ¨ list çš„å…¶ä½™éƒ¨åˆ†å†æ¬¡è°ƒç”¨è‡ªå·±ï¼Œç›´åˆ°åˆ°è¾¾ç»“å°¾ï¼ˆä¸€ä¸ªç©ºå€¼ï¼‰ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„è¿è¡Œæƒ…å†µ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å¯¹ä»¥ node1 å¼€å§‹çš„åˆ—è¡¨è¿›è¡Œ Mapï¼Œè¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œå­—ç¬¦ä¸² \u0026quot; mapped!\u0026quot; è¢«é™„åŠ åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ä¸Šã€‚ç„¶åä½ ç”¨firstæ¥è¿”å›ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚\nfirst( map(node1, function (val) { return val + \u0026#34; mapped!\u0026#34;}) ); // =\u0026gt; \u0026#34;first mapped!\u0026#34; è¿™é‡Œæœ‰ä»¶å¾ˆé…·çš„äº‹ï¼šå› ä¸ºmapæ˜¯å®Œå…¨ç”¨consã€firstå’Œrestå®ç°çš„ï¼Œä½ å®é™…ä¸Šå¯ä»¥æŠŠä»»ä½•æ•°æ®ç»“æ„ä¼ ç»™å®ƒï¼Œåªè¦consã€firstå’Œrestå¯¹è¯¥æ•°æ®ç»“æ„èµ·ä½œç”¨ï¼Œå®ƒå°±èƒ½å·¥ä½œã€‚\nä¸‹é¢æ˜¯å®ƒä»¬å¯¹ä¸€ä¸ªæ•°ç»„çš„ä½œç”¨ã€‚\nvar first = function (array) { return array[0]; } var rest = function (array) { var sliced = array.slice(1, array.length); if (sliced.length == 0) { return null; } else { return sliced; } } var cons = function (newValue, array) { return [newValue].concat(array); } var list = [\u0026#34;Transylvania\u0026#34;, \u0026#34;Forks, WA\u0026#34;]; map(list, function (val) { return val + \u0026#34; mapped!\u0026#34;}) // =\u0026gt; [\u0026#34;Transylvania mapped!\u0026#34;, \u0026#34;Forks, WA mapped!\u0026#34;] è¿™ä¸ªä»£ç ç‰‡æ®µç”¨ JavaScript çš„æ•°ç»„å‡½æ•°å®šä¹‰äº†firstã€restå’Œconsã€‚åŒæ—¶ï¼Œmapç»§ç»­å¼•ç”¨åä¸ºfirstã€restå’Œconsçš„å‡½æ•°ï¼Œæ‰€ä»¥ç°åœ¨å®ƒåœ¨arrayä¸Šå·¥ä½œã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ èƒ½å®ç°firstã€restå’Œconsï¼Œä½ å°±èƒ½å…è´¹å¾—åˆ°mapå’Œå‰é¢æåˆ°çš„å¤§é‡å…¶ä»–å‡½æ•°ã€‚\né€šè¿‡ä¸­é—´å±‚æŠ½è±¡ åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ å¯èƒ½ä¼šåå¯¹æˆ‘åªæ˜¯åœ¨è¸¢çš®çƒï¼Œå› ä¸ºæˆ‘ä»¬ä»ç„¶é¢ä¸´ç€åƒfirstè¿™æ ·çš„å‡½æ•°å¦‚ä½•èƒ½å¤Ÿä¸ä¸åŒçš„æ•°æ®ç»“æ„ä¸€èµ·å·¥ä½œçš„é—®é¢˜ã€‚Clojure ä½¿ç”¨ä¸¤ç§å½¢å¼çš„æŒ‡ç¤ºæ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œä¸­é—´å±‚æ˜¯ä¸€ä¸ªé€šç”¨æœ¯è¯­ï¼ŒæŒ‡çš„æ˜¯ä¸€ç§è¯­è¨€æ‰€é‡‡ç”¨çš„æœºåˆ¶ï¼Œè¿™æ ·ä¸€ä¸ªåå­—å¯ä»¥æœ‰å¤šç§ç›¸å…³çš„å«ä¹‰ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ\u0026ldquo;first \u0026ldquo;è¿™ä¸ªåå­—æœ‰å¤šç§æ•°æ®ç»“æ„çš„å«ä¹‰ã€‚æ–¹å‘æ€§æ˜¯ä½¿æŠ½è±¡åŒ–æˆä¸ºå¯èƒ½çš„åŸå› ã€‚\nå¤šæ€æ˜¯ Clojure æä¾›ä¸­é—´å±‚çš„ä¸€ç§æ–¹å¼ã€‚æˆ‘ä¸æƒ³åœ¨ç»†èŠ‚ä¸Šè¿·å¤±æ–¹å‘ï¼Œä½†åŸºæœ¬ä¸Šï¼Œå¤šæ€å‡½æ•°æ ¹æ®æä¾›çš„å‚æ•°ç±»å‹åˆ†é…ç»™ä¸åŒçš„å‡½æ•°ä½“ã€‚(è¿™ä¸å¤šæ€å‡½æ•°æ ¹æ®ä½ æä¾›çš„å‚æ•°æ•°é‡æ´¾å‘åˆ°ä¸åŒçš„å‡½æ•°ä½“å¹¶æ— å¤ªå¤§åŒºåˆ«ï¼‰ã€‚\næ³¨æ„ Clojure æœ‰ä¸¤ç§ç»“æ„æ¥å®šä¹‰å¤šæ€åˆ†å‘ï¼šä¸»æœºå¹³å°çš„æ¥å£ç»“æ„å’Œå¹³å°ç‹¬ç«‹çš„åè®®ã€‚ä½†åœ¨ä½ åˆšå¼€å§‹çš„æ—¶å€™ï¼Œæ²¡æœ‰å¿…è¦äº†è§£è¿™äº›ä¸œè¥¿æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆ‘å°†åœ¨ç¬¬ 13 ç« ä»‹ç»åè®®ã€‚\nå½“æ¶‰åŠåˆ°åºåˆ—æ—¶ï¼ŒClojure ä¹Ÿé€šè¿‡åšä¸€ç§è½»é‡çº§çš„ç±»å‹è½¬æ¢æ¥åˆ›é€ ä¸­é—´å±‚ï¼Œäº§ç”Ÿä¸€ç§æ•°æ®ç»“æ„ï¼Œä¸æŠ½è±¡çš„å‡½æ•°ä¸€èµ·å·¥ä½œã€‚æ¯å½“ Clojure æœŸæœ›ä¸€ä¸ªåºåˆ—\u0026ndash;ä¾‹å¦‚ï¼Œå½“ä½ è°ƒç”¨mapã€firstã€restæˆ–consæ—¶ï¼Œå®ƒå°±ä¼šè°ƒç”¨ç›¸å…³æ•°æ®ç»“æ„ä¸Šçš„seqå‡½æ•°ï¼Œä»¥è·å¾—ä¸€ä¸ªå…è®¸firstã€restå’Œconsçš„æ•°æ®ç»“æ„ã€‚\n(seq \u0026#39;(1 2 3)) ; =\u0026gt; (1 2 3) (seq [1 2 3]) ; =\u0026gt; (1 2 3) (seq #{1 2 3}) ; =\u0026gt; (1 2 3) (seq {:name \u0026#34;Bill Compton\u0026#34; :occupation \u0026#34;Dead mopey guy\u0026#34;}) ; =\u0026gt; ([:name \u0026#34;Bill Compton\u0026#34;] [:occupation \u0026#34;Dead mopey guy\u0026#34;]) è¿™é‡Œæœ‰ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„ç»†èŠ‚ã€‚é¦–å…ˆï¼Œseqæ€»æ˜¯è¿”å›ä¸€ä¸ªçœ‹èµ·æ¥åƒåˆ—è¡¨çš„å€¼ï¼›ä½ ä¼šæŠŠè¿™ä¸ªå€¼ç§°ä¸ºsequenceæˆ–seqã€‚ç¬¬äºŒï¼ŒMap çš„ seq ç”±ä¸¤ä¸ªå…ƒç´ çš„é”®å€¼ Vector ç»„æˆã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆmapæŠŠä½ çš„ Map å½“ä½œ Vector åˆ—è¡¨çš„åŸå› ! ä½ å¯ä»¥åœ¨ \u0026ldquo;Bill Compton \u0026ldquo;çš„ä¾‹å­ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘æƒ³ç‰¹åˆ«æŒ‡å‡ºè¿™ä¸ªä¾‹å­ï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯ä»¤äººæƒŠè®¶å’Œå›°æƒ‘çš„ã€‚åœ¨æˆ‘åˆšå¼€å§‹ä½¿ç”¨ Clojure çš„æ—¶å€™å°±æ˜¯è¿™æ ·ã€‚äº†è§£è¿™äº›åº•å±‚æœºåˆ¶å°†ä½¿ä½ ä¸è‡³äºåƒè¯•å›¾ä¿ç•™äººæ€§çš„ç”·æ€§å¸è¡€é¬¼é‚£æ ·ï¼Œç»å¸¸è¡¨ç°å‡ºæŒ«æŠ˜æ„Ÿå’Œæ™®éçš„æ‹–æ²“æ„Ÿã€‚\nä½ å¯ä»¥é€šè¿‡ä½¿ç”¨intoå°† seq è½¬æ¢å› Mapï¼Œå°†ç»“æœç²˜åˆ°ä¸€ä¸ªç©ºçš„ Map ä¸­ï¼ˆåé¢ä½ ä¼šä»”ç»†çœ‹intoï¼‰ã€‚\n(into {} (seq {:a 1 :b 2 :c 3}) ; =\u0026gt; {:a 1, :c 3, :b 2} æ‰€ä»¥ï¼ŒClojure çš„åºåˆ—å‡½æ•°åœ¨å…¶å‚æ•°ä¸Šä½¿ç”¨seqã€‚åºåˆ—å‡½æ•°æ˜¯æ ¹æ®åºåˆ—æŠ½è±¡å®šä¹‰çš„ï¼Œä½¿ç”¨firstã€restå’Œconsã€‚åªè¦ä¸€ä¸ªæ•°æ®ç»“æ„å®ç°äº†åºåˆ—æŠ½è±¡ï¼Œå®ƒå°±å¯ä»¥ä½¿ç”¨å¹¿æ³›çš„ seq åº“ï¼Œå…¶ä¸­åŒ…æ‹¬è¯¸å¦‚reduceã€filterã€distinctã€group-byç­‰è¶…çº§æ˜æ˜Ÿå‡½æ•°ã€‚\nè¿™é‡Œçš„å¯ç¤ºæ˜¯ï¼ŒæŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨æˆ‘ä»¬èƒ½å¯¹ä¸€ä¸ªæ•°æ®ç»“æ„åšä»€ä¹ˆï¼Œå¹¶å°½å¯èƒ½åœ°å¿½ç•¥å®ƒçš„å®ç°ï¼Œæ˜¯éå¸¸æœ‰åŠ›çš„ã€‚å®ç°æœ¬èº«å¹¶ä¸é‡è¦ã€‚å®ƒä»¬åªæ˜¯è¾¾åˆ°ç›®çš„çš„ä¸€ç§æ‰‹æ®µã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒæŠ½è±¡ç¼–ç¨‹å¯ä»¥è®©ä½ åœ¨ä¸åŒçš„æ•°æ®ç»“æ„ä¸Šä½¿ç”¨å‡½æ•°åº“ï¼Œä¸ç®¡è¿™äº›æ•°æ®ç»“æ„æ˜¯å¦‚ä½•å®ç°çš„ã€‚\nSeq å‡½æ•°çš„ä¾‹å­ Clojure çš„ seq åº“ä¸­æœ‰å¾ˆå¤šæœ‰ç”¨çš„å‡½æ•°ï¼Œä½ ä¼šç»å¸¸ç”¨åˆ°ã€‚ç°åœ¨ä½ å·²ç»å¯¹ Clojure çš„åºåˆ—æŠ½è±¡æœ‰äº†æ›´æ·±çš„äº†è§£ï¼Œè®©æˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹è¿™äº›å‡½æ•°ã€‚å¦‚æœä½ æ˜¯ Lisp å’Œå‡½æ•°å¼ç¼–ç¨‹çš„æ–°æ‰‹ï¼Œè¿™äº›ä¾‹å­å°†æ˜¯ä»¤äººæƒŠè®¶å’Œæ„‰å¿«çš„ã€‚\nMap ä½ ç°åœ¨å·²ç»çœ‹è¿‡å¾ˆå¤šmapçš„ä¾‹å­äº†ï¼Œä½†æ˜¯è¿™ä¸€èŠ‚å±•ç¤ºäº†mapåšäº†ä¸¤ä¸ªæ–°çš„ä»»åŠ¡ï¼šæŠŠå¤šä¸ªé›†åˆä½œä¸ºå‚æ•°ï¼Œä»¥åŠæŠŠä¸€ä¸ªå‡½æ•°é›†åˆä½œä¸ºå‚æ•°ã€‚å®ƒè¿˜å¼ºè°ƒäº†ä¸€ä¸ªå¸¸è§çš„mapæ¨¡å¼ï¼šä½¿ç”¨å…³é”®å­—ä½œä¸º Map å‡½æ•°ã€‚\nåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åªçœ‹åˆ°äº†mapåœ¨ä¸€ä¸ªé›†åˆä¸Šæ“ä½œçš„ä¾‹å­ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œè¿™ä¸ªé›†åˆæ˜¯ Vector[1 2 3]ã€‚\n(map inc [1 2 3]) ; =\u0026gt; (2 3 4) ç„¶è€Œï¼Œä½ ä¹Ÿå¯ä»¥ç»™mapå¤šä¸ªé›†åˆã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨ã€‚\n(map str [\u0026#34;a\u0026#34; \u0026#34;b\u0026#34; \u0026#34;c\u0026#34;] [\u0026#34;A\u0026#34; \u0026#34;B\u0026#34; \u0026#34;C\u0026#34;] ) ; =\u0026gt; (\u0026#34;aA\u0026#34; \u0026#34;bB\u0026#34; \u0026#34;cC\u0026#34;) è¿™å°±å¥½åƒmapåšäº†ä»¥ä¸‹çš„äº‹æƒ…ã€‚\n(list (str \u0026#34;a\u0026#34; \u0026#34;A\u0026#34;) (str \u0026#34;b\u0026#34; \u0026#34;B\u0026#34;) (str \u0026#34;c\u0026#34; \u0026#34;C\u0026#34;)) å½“ä½ ä¼ é€’ç»™mapå¤šä¸ªé›†åˆæ—¶ï¼Œç¬¬ä¸€ä¸ªé›†åˆçš„å…ƒç´ ï¼ˆ[\u0026quot;a\u0026quot; \u0026quot;b\u0026quot; \u0026quot;c\u0026quot;]ï¼‰å°†ä½œä¸º Map å‡½æ•°ï¼ˆstrï¼‰çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ï¼Œç¬¬äºŒä¸ªé›†åˆçš„å…ƒç´ ï¼ˆ[\u0026quot;A\u0026quot; \u0026quot;B\u0026quot; \u0026quot;C\u0026quot;ï¼‰å°†ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ï¼Œä»¥æ­¤ç±»æ¨ã€‚åªè¦ç¡®ä¿ä½ çš„ Map å‡½æ•°å¯ä»¥æ¥å—çš„å‚æ•°æ•°é‡ä¸ä½ ä¼ é€’ç»™mapçš„é›†åˆæ•°é‡ç›¸ç­‰ã€‚\nä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚æœä½ æ˜¯ä¸€ä¸ªè¯•å›¾æŠ‘åˆ¶äººç±»æ¶ˆè´¹çš„å¸è¡€é¬¼ï¼Œä½ å¯ä»¥å¦‚ä½•ä½¿ç”¨è¿™ç§èƒ½åŠ›ã€‚ä½ æœ‰ä¸¤ä¸ª Vectorï¼Œä¸€ä¸ªä»£è¡¨äººç±»æ‘„å…¥çš„å‡æ•°ï¼Œå¦ä¸€ä¸ªä»£è¡¨è¿‡å»å››å¤©çš„å°åŠ¨ç‰©æ‘„å…¥é‡ã€‚unify-diet-data å‡½æ•°è·å–äººç±»å’ŒåŠ¨ç‰©çš„å•æ—¥æ•°æ®ï¼Œå¹¶å°†ä¸¤è€…ç»Ÿä¸€ä¸ºä¸€å¼  Mapã€‚\n(def human-consumption [8.1 7.3 6.6 5.0]) (def critter-consumption [0.0 0.2 0.3 1.1]) (defn unify-diet-data [human critter] {:human human :critter critter}) (map unify-diet-data human-consumption critter-consumption) ; =\u0026gt; ({:human 8.1, :critter 0.0} {:human 7.3, :critter 0.2} {:human 6.6, :critter 0.3} {:human 5.0, :critter 1.1}) å¥½æ ·çš„ï¼ŒæŠŠäººè£æ‰äº†!\nä½ å¯ä»¥ç”¨mapåšçš„å¦ä¸€ä»¶æœ‰è¶£çš„äº‹æ˜¯æŠŠä¸€ä¸ªå‡½æ•°é›†åˆä¼ ç»™å®ƒã€‚å¦‚æœä½ æƒ³å¯¹ä¸åŒçš„æ•°å­—é›†åˆè¿›è¡Œä¸€ç³»åˆ—çš„è®¡ç®—ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°±åƒè¿™æ ·ã€‚\n(def sum #(reduce + %)) (def avg #(/ (sum %) (count %))) (defn stats [numbers] (map #(% numbers) [sum count avg])) (stats [3 4 10]) ; =\u0026gt; (17 3 17/3) (stats [80 1 44 13 6]) ; =\u0026gt; (144 5 144/5) åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œstatså‡½æ•°éå†äº†ä¸€ä¸ªå‡½æ•°çš„ Vectorï¼Œå°†æ¯ä¸ªå‡½æ•°åº”ç”¨äºnumbersã€‚\næ­¤å¤–ï¼ŒClojurists ç»å¸¸ä½¿ç”¨mapä» map æ•°æ®ç»“æ„çš„é›†åˆä¸­æ£€ç´¢ä¸ä¸€ä¸ªå…³é”®è¯ç›¸å…³çš„å€¼ã€‚å› ä¸ºå…³é”®å­—å¯ä»¥ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œä½ å¯ä»¥ç®€æ´åœ°åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n(def identities [{:alias \u0026#34;Batman\u0026#34; :real \u0026#34;Bruce Wayne\u0026#34;} {:alias \u0026#34;Spider-Man\u0026#34; :real \u0026#34;Peter Parker\u0026#34;} {:alias \u0026#34;Santa\u0026#34; :real \u0026#34;Your mom\u0026#34;} {:alias \u0026#34;Easter Bunny\u0026#34; :real \u0026#34;Your dad\u0026#34;}]) (map :real identities) ; =\u0026gt; (\u0026#34;Bruce Wayne\u0026#34; \u0026#34;Peter Parker\u0026#34; \u0026#34;Your mom\u0026#34; \u0026#34;Your dad\u0026#34;) (å¦‚æœä½ æ˜¯äº”å²ï¼Œé‚£ä¹ˆæˆ‘æ·±è¡¨æ­‰æ„ï¼‰ã€‚\nreduce ç¬¬ 3 ç« å±•ç¤ºäº†reduceå¦‚ä½•å¤„ç†åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ æ¥ç”Ÿæˆä¸€ä¸ªç»“æœã€‚æœ¬èŠ‚å±•ç¤ºäº†å…¶ä»–ä¸€äº›å¯èƒ½ä¸ç»å¸¸ä½¿ç”¨çš„ä½¿ç”¨æ–¹æ³•ã€‚\nç¬¬ä¸€ç§ç”¨æ³•æ˜¯è½¬æ¢ä¸€ä¸ª Map çš„å€¼ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ Mapï¼Œå…¶é”®å€¼ç›¸åŒï¼Œä½†æ•°å€¼æ›´æ–°ã€‚\n(reduce (fn [new-map [key val]] (assoc new-map key (inc val))) {} {:max 30 :min 10}) ; =\u0026gt; {:max 31, :min 11} åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œreduceå°†å‚æ•°{:max 30 :min 10}è§†ä¸ºä¸€ä¸ª Vector åºåˆ—ï¼Œå¦‚([:max 30] [:min 10])ã€‚ç„¶åï¼Œå®ƒä»ä¸€ä¸ªç©º Mapï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰å¼€å§‹ï¼Œç”¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ªåŒ¿åå‡½æ•°æ¥å»ºç«‹å®ƒã€‚å°±åƒreduceè¿™æ ·åšï¼š\n(assoc (assoc {} :max (inc 30)) :min (inc 10)) å‡½æ•°assocéœ€è¦ä¸‰ä¸ªå‚æ•°ï¼šä¸€ä¸ª Mapï¼Œä¸€ä¸ªé”®ï¼Œå’Œä¸€ä¸ªå€¼ã€‚å®ƒé€šè¿‡å…³è”ç»™å®šçš„é”®å’Œç»™å®šçš„å€¼ï¼Œä»ä½ ç»™å®ƒçš„ Map ä¸­æ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°çš„ Mapã€‚ä¾‹å¦‚ï¼Œ(assoc {:a 1} :b 2)å°†è¿”å›{:a 1 :b 2}ã€‚\nreduce çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯æ ¹æ®é”®å€¼ä» Map ä¸­è¿‡æ»¤å‡ºæ¥ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒåŒ¿åå‡½æ•°æ£€æŸ¥ä¸€ä¸ªé”®å€¼å¯¹çš„å€¼æ˜¯å¦å¤§äº 4ï¼Œå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆè¿™ä¸ªé”®å€¼å¯¹å°±è¢«è¿‡æ»¤æ‰äº†ã€‚åœ¨ Map{:human 4.1 :critter 3.9}ä¸­ï¼Œ3.9 å°äº 4ï¼Œæ‰€ä»¥:critteré”®å’Œå®ƒçš„ 3.9 å€¼è¢«è¿‡æ»¤æ‰äº†ã€‚\n(reduce (fn [new-map [key val]] (if (\u0026gt; val 4) (assoc new-map key val) new-map)) {} {:human 4.1 :critter 3.9}) ; =\u0026gt; {:human 4.1} è¿™é‡Œçš„å¯ç¤ºæ˜¯ï¼Œreduceæ˜¯ä¸€ä¸ªæ¯”æœ€åˆçœ‹èµ·æ¥æ›´çµæ´»çš„å‡½æ•°ã€‚æ¯å½“ä½ æƒ³ä»ä¸€ä¸ªåºåˆ—ä¸­å¾—åˆ°ä¸€ä¸ªæ–°çš„å€¼æ—¶ï¼Œreduceé€šå¸¸èƒ½å¤Ÿæ»¡è¶³ä½ çš„éœ€è¦ã€‚å¦‚æœä½ æƒ³åšä¸€ä¸ªçœŸæ­£èƒ½è®©ä½ çš„å¤´å‘å€’ç«–çš„ç»ƒä¹ ï¼Œè¯•ç€ç”¨reduceå®ç°mapï¼Œç„¶ååœ¨æœ¬ç« åé¢çš„å†…å®¹ä¸­å¯¹filterå’ŒsomeåšåŒæ ·çš„ç»ƒä¹ ã€‚\ntake, drop, take-while, and drop-while takeå’Œdropéƒ½æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªåºåˆ—ã€‚takeè¿”å›åºåˆ—çš„å‰ n ä¸ªå…ƒç´ ï¼Œè€Œdropè¿”å›é™¤å»å‰ n ä¸ªå…ƒç´ çš„åºåˆ—ã€‚\n(take 3 [1 2 3 4 5 6 7 8 9 10]) ; =\u0026gt; (1 2 3) (drop 3 [1 2 3 4 5 6 7 8 9 10]) ; =\u0026gt; (4 5 6 7 8 9 10) å®ƒä»¬çš„è¡¨äº²take-whileå’Œdrop-whileæ›´æœ‰è¶£ä¸€äº›ã€‚æ¯ä¸€ä¸ªéƒ½éœ€è¦ä¸€ä¸ªè°“è¯å‡½æ•°ï¼ˆä¸€ä¸ªå…¶è¿”å›å€¼ä¸ºçœŸæˆ–å‡çš„å‡½æ•°ï¼‰æ¥å†³å®šå®ƒä½•æ—¶åº”è¯¥åœæ­¢å–èˆã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ª Vectorï¼Œä»£è¡¨ä½  \u0026ldquo;é£Ÿç‰© \u0026ldquo;æ—¥è®°ä¸­çš„æ¡ç›®ã€‚æ¯ä¸ªæ¡ç›®éƒ½æœ‰æœˆä»½å’Œæ—¥æœŸï¼Œä»¥åŠä½ åƒäº†ä»€ä¹ˆã€‚ä¸ºäº†ä¿ç•™ç©ºé—´ï¼Œæˆ‘ä»¬å°†åªåŒ…æ‹¬å‡ ä¸ªæ¡ç›®ã€‚\n(def food-journal [{:month 1 :day 1 :human 5.3 :critter 2.3} {:month 1 :day 2 :human 5.1 :critter 2.0} {:month 2 :day 1 :human 4.9 :critter 2.1} {:month 2 :day 2 :human 5.0 :critter 2.5} {:month 3 :day 1 :human 4.2 :critter 3.3} {:month 3 :day 2 :human 4.0 :critter 3.8} {:month 4 :day 1 :human 3.7 :critter 3.9} {:month 4 :day 2 :human 3.7 :critter 3.6}]) ä½¿ç”¨take-whileï¼Œä½ å¯ä»¥åªæ£€ç´¢ä¸€æœˆå’ŒäºŒæœˆçš„æ•°æ®ã€‚take-whileéå†ç»™å®šçš„åºåˆ—ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯food-journalï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ åº”ç”¨è°“è¯å‡½æ•°ã€‚\nè¿™ä¸ªä¾‹å­ä½¿ç”¨åŒ¿åå‡½æ•°#(\u0026lt; (:month %) 3)æ¥æµ‹è¯•æ—¥è®°æ¡ç›®çš„æœˆä»½æ˜¯å¦è¶…å‡ºèŒƒå›´ã€‚\n(take-while #(\u0026lt; (:month %) 3) food-journal) ; =\u0026gt; ({:month 1 :day 1 :human 5.3 :critter 2.3} {:month 1 :day 2 :human 5.1 :critter 2.0} {:month 2 :day 1 :human 4.9 :critter 2.1} {:month 2 :day 2 :human 5.0 :critter 2.5}) å½“take-whileåˆ°è¾¾ç¬¬ä¸€ä¸ª March æ¡ç›®æ—¶ï¼ŒåŒ¿åå‡½æ•°è¿”å›falseï¼Œè€Œtake-whileè¿”å›å®ƒåœ¨è¿™ä¹‹å‰æµ‹è¯•çš„æ¯ä¸ªå…ƒç´ çš„åºåˆ—ã€‚\nåŒæ ·çš„æƒ³æ³•ä¹Ÿé€‚ç”¨äºdrop-whileï¼Œåªæ˜¯å®ƒä¸€ç›´åœ¨ä¸¢å¼ƒå…ƒç´ ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªæµ‹è¯•ä¸ºçœŸã€‚\n(drop-while #(\u0026lt; (:month %) 3) food-journal) ; =\u0026gt; ({:month 3 :day 1 :human 4.2 :critter 3.3} {:month 3 :day 2 :human 4.0 :critter 3.8} {:month 4 :day 1 :human 3.7 :critter 3.9} {:month 4 :day 2 :human 3.7 :critter 3.6}) é€šè¿‡åŒæ—¶ä½¿ç”¨take-whileå’Œdrop-whileï¼Œä½ å¯ä»¥åªè·å¾— 2 æœˆå’Œ 3 æœˆçš„æ•°æ®ã€‚\n(take-while #(\u0026lt; (:month %) 4) (drop-while #(\u0026lt; (:month %) 2) food-journal)) ; =\u0026gt; ({:month 2 :day 1 :human 4.9 :critter 2.1} {:month 2 :day 2 :human 5.0 :critter 2.5} {:month 3 :day 1 :human 4.2 :critter 3.3} {:month 3 :day 2 :human 4.0 :critter 3.8}) è¿™ä¸ªä¾‹å­ä½¿ç”¨ \u0026ldquo;drop-while \u0026ldquo;å»æ‰ 1 æœˆä»½çš„æ¡ç›®ï¼Œç„¶åå¯¹ç»“æœä½¿ç”¨ \u0026ldquo;take-while \u0026ldquo;ç»§ç»­å–æ¡ç›®ï¼Œç›´åˆ°åˆ°è¾¾ 4 æœˆä»½çš„ç¬¬ä¸€ä¸ªæ¡ç›®ã€‚\nFilter å’Œ Some ä½¿ç”¨filteræ¥è¿”å›ä¸€ä¸ªåºåˆ—ä¸­å¯¹ä¸€ä¸ªè°“è¯å‡½æ•°ä¸ºçœŸçš„æ‰€æœ‰å…ƒç´ ã€‚è¿™é‡Œæ˜¯äººç±»æ¶ˆè´¹å°‘äº 5 å‡çš„æ—¥è®°æ¡ç›®ï¼š\n(filter #(\u0026lt; (:human %) 5) food-journal) ; =\u0026gt; ({:month 2 :day 1 :human 4.9 :critter 2.1} {:month 3 :day 1 :human 4.2 :critter 3.3} {:month 3 :day 2 :human 4.0 :critter 3.8} {:month 4 :day 1 :human 3.7 :critter 3.9} {:month 4 :day 2 :human 3.7 :critter 3.6}) ä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸åœ¨å‰é¢çš„ \u0026ldquo;take-while \u0026ldquo;å’Œ \u0026ldquo;drop-while \u0026ldquo;ä¾‹å­ä¸­ä½¿ç”¨filterã€‚äº‹å®ä¸Šï¼Œfilterä¹Ÿå¯ä»¥ç”¨äºæ­¤ã€‚è¿™é‡Œæˆ‘ä»¬è¦æŠ“å– 1 æœˆå’Œ 2 æœˆçš„æ•°æ®ï¼Œå°±åƒåœ¨take-whileä¾‹å­ä¸­ä¸€æ ·ã€‚\n(filter #(\u0026lt; (:month %) 3) food-journal) ; =\u0026gt; ({:month 1 :day 1 :human 5.3 :critter 2.3} {:month 1 :day 2 :human 5.1 :critter 2.0} {:month 2 :day 1 :human 4.9 :critter 2.1} {:month 2 :day 2 :human 5.0 :critter 2.5}) è¿™ç§ç”¨æ³•å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯filteræœ€ç»ˆä¼šå¤„ç†ä½ çš„æ‰€æœ‰æ•°æ®ï¼Œè¿™å¹¶ä¸æ€»æ˜¯å¿…è¦çš„ã€‚å› ä¸ºé£Ÿç‰©æ—¥è®°å·²ç»æŒ‰æ—¥æœŸæ’åºï¼Œæˆ‘ä»¬çŸ¥é“take-whileä¼šè¿”å›æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œè€Œä¸éœ€è¦æ£€æŸ¥ä»»ä½•æˆ‘ä»¬ä¸éœ€è¦çš„æ•°æ®ã€‚å› æ­¤ï¼Œtake-whileå¯ä»¥æ›´æœ‰æ•ˆç‡ã€‚\né€šå¸¸æƒ…å†µä¸‹ï¼Œä½ æƒ³çŸ¥é“ä¸€ä¸ªé›†åˆæ˜¯å¦åŒ…å«å¯¹ä¸€ä¸ªè°“è¯å‡½æ•°æµ‹è¯•ä¸ºçœŸçš„ä»»ä½•å€¼ã€‚someå‡½æ•°å°±æ˜¯è¿™æ ·åšçš„ï¼Œå®ƒè¿”å›ç”±ä¸€ä¸ªè°“è¯å‡½æ•°è¿”å›çš„ç¬¬ä¸€ä¸ªçœŸå€¼ï¼ˆä»»ä½•ä¸æ˜¯falseæˆ–nilçš„å€¼ï¼‰ã€‚\n(some #(\u0026gt; (:critter %) 5) food-journal) ; =\u0026gt; nil (some #(\u0026gt; (:critter %) 3) food-journal) ; =\u0026gt; true ä½ æ²¡æœ‰ä»»ä½•é£Ÿç‰©æ—¥è®°æ¡ç›®æ˜¾ç¤ºä½ ä»å°åŠ¨ç‰©æ¥æºä¸­æ¶ˆè€—äº†è¶…è¿‡ 5 å‡çš„é£Ÿç‰©ï¼Œä½†æ˜¯ä½ è‡³å°‘æœ‰ä¸€æ¡æ˜¾ç¤ºä½ æ¶ˆè€—äº†è¶…è¿‡ 3 å‡çš„é£Ÿç‰©ã€‚è¯·æ³¨æ„ï¼Œç¬¬äºŒä¸ªä¾‹å­ä¸­çš„è¿”å›å€¼æ˜¯trueï¼Œè€Œä¸æ˜¯äº§ç”ŸçœŸå€¼çš„å®é™…æ¡ç›®ã€‚åŸå› æ˜¯åŒ¿åå‡½æ•°#(\u0026gt; (:critter %) 3)è¿”å›trueæˆ–falseã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•è¿”å›è¯¥æ¡ç›®ã€‚\n(some #(and (\u0026gt; (:critter %) 3) %) food-journal) ; =\u0026gt; {:month 3 :day 1 :human 4.2 :critter 3.3}ã€‚ è¿™é‡Œï¼Œä¸€ä¸ªç¨æœ‰ä¸åŒçš„åŒ¿åå‡½æ•°ä½¿ç”¨andé¦–å…ˆæ£€æŸ¥æ¡ä»¶(\u0026gt; (:critter %) 3)æ˜¯å¦ä¸ºçœŸï¼Œç„¶ååœ¨æ¡ä»¶ç¡®å®ä¸ºçœŸæ—¶è¿”å›æ¡ç›®ã€‚\nsort and sort-by ä½ å¯ä»¥ç”¨sortå°†å…ƒç´ æŒ‰å‡åºæ’åºã€‚\n(sort [3 1 2]) ; =\u0026gt; (1 2 3) å¦‚æœä½ çš„æ’åºéœ€æ±‚æ›´å¤æ‚ï¼Œä½ å¯ä»¥ä½¿ç”¨sort-byï¼Œå®ƒå…è®¸ä½ å°†ä¸€ä¸ªå‡½æ•°ï¼ˆæœ‰æ—¶ç§°ä¸ºé”®å‡½æ•°ï¼‰åº”ç”¨äºä¸€ä¸ªåºåˆ—çš„å…ƒç´ ï¼Œå¹¶ä½¿ç”¨å®ƒè¿”å›çš„å€¼æ¥å†³å®šæ’åºé¡ºåºã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå–è‡ª*http://clojuredocs.org/*ï¼Œcountæ˜¯å…³é”®å‡½æ•°ã€‚\n(sort-by count [\u0026#34;aaa\u0026#34; \u0026#34;c\u0026#34; \u0026#34;bb\u0026#34;] ) ; =\u0026gt; (\u0026#34;c\u0026#34; \u0026#34;bb\u0026#34; \u0026#34;aaa\u0026#34;) å¦‚æœä½ ä½¿ç”¨sortè¿›è¡Œæ’åºï¼Œå…ƒç´ å°†æŒ‰å­—æ¯é¡ºåºè¿›è¡Œæ’åºï¼Œè¿”å›(\u0026quot;aaa\u0026quot; \u0026quot;bb\u0026quot; \u0026quot;c\u0026quot;)ã€‚ç›¸åï¼Œç»“æœæ˜¯(\u0026quot;c\u0026quot; \u0026quot;bb\u0026quot; \u0026quot;aaa\u0026quot;)ï¼Œå› ä¸ºä½ æ˜¯æŒ‰countæ’åºï¼Œè€Œ\u0026quot;c \u0026quot;çš„è®¡æ•°æ˜¯1ï¼Œ\u0026ldquo;bb \u0026ldquo;æ˜¯ 2ï¼Œ`\u0026ldquo;aaa \u0026ldquo;æ˜¯ 3ã€‚\nConcat æœ€å, concatç®€å•åœ°å°†ä¸€ä¸ªåºåˆ—çš„æˆå‘˜é™„åŠ åˆ°å¦ä¸€ä¸ªåºåˆ—çš„æœ«å°¾:\n(concat [1 2] [3 4]) ; =\u0026gt; (1 2 3 4) æƒ°æ€§åºåˆ— æ­£å¦‚ä½ ä¹‹å‰çœ‹åˆ°çš„ï¼Œmapé¦–å…ˆåœ¨ä½ ä¼ é€’ç»™å®ƒçš„é›†åˆä¸Šè°ƒç”¨seqã€‚ä½†è¿™å¹¶ä¸æ˜¯æ•…äº‹çš„å…¨éƒ¨ã€‚è®¸å¤šå‡½æ•°ï¼ŒåŒ…æ‹¬mapå’Œfilterï¼Œéƒ½è¿”å›ä¸€ä¸ªæƒ°æ€§åºåˆ—ã€‚æƒ°æ€§åºåˆ— æ˜¯ä¸€ä¸ª seqï¼Œå®ƒçš„æˆå‘˜åœ¨ä½ è¯•å›¾è®¿é—®å®ƒä»¬æ—¶æ‰è¢«è®¡ç®—ã€‚è®¡ç®—ä¸€ä¸ª seq çš„æˆå‘˜è¢«ç§°ä¸ºå®ç°seqã€‚å°†è®¡ç®—æ¨è¿Ÿåˆ°éœ€è¦çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ä½ çš„ç¨‹åºæ›´æœ‰æ•ˆç‡ï¼Œè€Œä¸”å®ƒè¿˜æœ‰ä¸€ä¸ªä»¤äººæƒŠè®¶çš„å¥½å¤„ï¼Œå°±æ˜¯å…è®¸ä½ æ„å»ºæ— ç©·çš„åºåˆ—ã€‚\næ¼”ç¤ºæƒ°æ€§åºåˆ—çš„æ•ˆç‡ ä¸ºäº†çœ‹åˆ°æƒ°æ€§åºåˆ—çš„ä½œç”¨ï¼Œå‡è£…ä½ æ˜¯ä¸€ä¸ªç°ä»£ä»»åŠ¡ç»„çš„æˆå‘˜ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†è¯†åˆ«å¸è¡€é¬¼ã€‚ä½ çš„æƒ…æŠ¥äººå‘˜å‘Šè¯‰ä½ ï¼Œåœ¨ä½ çš„åŸå¸‚é‡Œåªæœ‰ä¸€ä¸ªæ´»è·ƒçš„å¸è¡€é¬¼ï¼Œè€Œä¸”ä»–ä»¬å·²ç»å¸®åŠ©ä½ æŠŠå«Œç–‘äººçš„åå•ç¼©å°åˆ°ä¸€ç™¾ä¸‡äººã€‚ä½ çš„è€æ¿ç»™äº†ä½ ä¸€ä»½ä¸€ç™¾ä¸‡ä¸ªç¤¾ä¼šå®‰å…¨å·ç çš„åå•ï¼Œå¹¶å–Šé“ï¼š\u0026ldquo;æå®šå®ƒï¼Œéº¦å…‹è²æ–¯ç»´å¥‡ï¼\u0026rdquo;\nå€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œä½ æ‹¥æœ‰ä¸€å° Vampmatic 3000 è®¡ç®—æœºï¼Œè¿™æ˜¯ç”¨äºè¯†åˆ«å¸è¡€é¬¼çš„æœ€å…ˆè¿›çš„è®¾å¤‡ã€‚ç”±äºè¿™ç§çŒæ€å¸è¡€é¬¼çš„æŠ€æœ¯çš„æºä»£ç æ˜¯ä¸“æœ‰çš„ï¼Œæˆ‘æŠŠå®ƒå­˜æ ¹å‡ºæ¥ï¼Œæ¨¡æ‹Ÿæ‰§è¡Œè¿™é¡¹ä»»åŠ¡æ‰€éœ€çš„æ—¶é—´ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªå¸è¡€é¬¼æ•°æ®åº“çš„å­é›†ã€‚\n(def vampire-database {0 {:makes-blood-puns? false, :has-pulse? true :name \u0026#34;McFishwich\u0026#34;} 1 {:makes-blood-puns? false, :has-pulse? true :name \u0026#34;McMackson\u0026#34;} 2 {:makes-blood-puns? true, :has-pulse? false :name \u0026#34;Damon Salvatore\u0026#34;} 3 {:makes-blood-puns? true, :has-pulse? true :name \u0026#34;Mickey Mouse\u0026#34;}}) (defn vampire-related-details [social-security-number] (Thread/sleep 1000) (get vampire-database social-security-number)) (defn vampire? [record] (and (:makes-blood-puns? record) (not (:has-pulse? record)) record)) (defn identify-vampire [social-security-numbers] (first (filter vampire? (map vampire-related-details social-security-numbers)))) ä½ æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œvampire-related-detailsï¼Œå®ƒéœ€è¦ä¸€ç§’é’Ÿä»æ•°æ®åº“ä¸­æŸ¥æ‰¾ä¸€ä¸ªæ¡ç›®ã€‚æ¥ä¸‹æ¥ï¼Œä½ æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œvampire?ï¼Œå¦‚æœå®ƒé€šè¿‡äº†å¸è¡€é¬¼æµ‹è¯•ï¼Œå°±è¿”å›ä¸€æ¡è®°å½•ï¼›å¦åˆ™ï¼Œå°±è¿”å›falseã€‚æœ€åï¼Œidentify-vampireå°†ç¤¾ä¼šå®‰å…¨å·ç  Map åˆ°æ•°æ®åº“è®°å½•ï¼Œç„¶åè¿”å›ç¬¬ä¸€æ¡è¡¨æ˜æœ‰å¸è¡€é¬¼çš„è®°å½•ã€‚\nä¸ºäº†æ˜¾ç¤ºè¿è¡Œè¿™äº›å‡½æ•°éœ€è¦å¤šå°‘æ—¶é—´ï¼Œä½ å¯ä»¥ä½¿ç”¨timeæ“ä½œã€‚å½“ä½ ä½¿ç”¨timeæ—¶ï¼Œä½ çš„ä»£ç çš„è¡Œä¸ºä¸ä½ ä¸ä½¿ç”¨timeæ—¶å®Œå…¨ä¸€æ ·ï¼Œä½†æœ‰ä¸€ä¸ªä¾‹å¤–ï¼šä¼šæ‰“å°å‡ºä¸€ä»½ç»è¿‡æ—¶é—´çš„æŠ¥å‘Šã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n(time (vampire-related-details 0)) ; =\u0026gt; \u0026#34;Elapsed time: 1001.042 msecs\u0026#34; ; =\u0026gt; {:name \u0026#34;McFishwich\u0026#34;, :makes-blood-puns? false, :has-pulse? true} ç¬¬ä¸€ä¸ªæ‰“å°è¡ŒæŠ¥å‘Šäº†ç»™å®šæ“ä½œæ‰€èŠ±è´¹çš„æ—¶é—´\u0026ndash;æœ¬ä¾‹æ˜¯ 1,001.042 æ¯«ç§’ã€‚ç¬¬äºŒè¡Œæ˜¯è¿”å›å€¼ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯ä½ çš„æ•°æ®åº“è®°å½•ã€‚è¿”å›å€¼ä¸æ²¡æœ‰ä½¿ç”¨timeçš„æƒ…å†µä¸‹å®Œå…¨ç›¸åŒã€‚\nä¸€ä¸ªä¸ç¬¨çš„mapçš„å®ç°é¦–å…ˆè¦å¯¹social-security-numbersçš„æ¯ä¸ªæˆå‘˜åº”ç”¨vampire-related-detailsï¼Œç„¶åå†æŠŠç»“æœä¼ ç»™filter`ã€‚å› ä¸ºä½ æœ‰ä¸€ç™¾ä¸‡ä¸ªå«Œç–‘äººï¼Œè¿™å°†éœ€è¦ä¸€ç™¾ä¸‡ç§’ï¼Œä¹Ÿå°±æ˜¯ 12 å¤©ï¼Œåˆ°é‚£æ—¶ä½ çš„ä¸€åŠåŸå¸‚éƒ½ä¼šæ­»æ‰ï¼\u0026quot;ã€‚å½“ç„¶ï¼Œå¦‚æœç»“æœæ˜¯å”¯ä¸€çš„å¸è¡€é¬¼æ˜¯è®°å½•ä¸­çš„æœ€åä¸€ä¸ªå«Œç–‘äººï¼Œç”¨æ‡’äººç‰ˆæœ¬è¿˜æ˜¯ä¼šèŠ±é‚£ä¹ˆå¤šæ—¶é—´ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æœºä¼šï¼Œå®ƒä¸ä¼šã€‚\nå› ä¸ºmapæ˜¯æƒ°æ€§çš„ï¼Œåœ¨ä½ è¯•å›¾è®¿é—® Map çš„å…ƒç´ ä¹‹å‰ï¼Œå®ƒå®é™…ä¸Šå¹¶æ²¡æœ‰å°†å¸è¡€é¬¼ç›¸å…³çš„ç»†èŠ‚åº”ç”¨äºç¤¾ä¼šå®‰å…¨å·ç ã€‚äº‹å®ä¸Šï¼Œmapå‡ ä¹ç«‹åˆ»å°±ä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚\nç¬¬ä¸€ä¸ªæ‰“å°è¡ŒæŠ¥å‘Šäº†ç»™å®šæ“ä½œæ‰€èŠ±è´¹çš„æ—¶é—´\u0026ndash;æœ¬ä¾‹ä¸­æ˜¯ 1,001.042 æ¯«ç§’ã€‚ç¬¬äºŒè¡Œæ˜¯è¿”å›å€¼ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ä½ çš„æ•°æ®åº“è®°å½•ã€‚è¿”å›å€¼ä¸æ²¡æœ‰ä½¿ç”¨timeçš„æƒ…å†µä¸‹å®Œå…¨ç›¸åŒã€‚\nä¸€ä¸ªä¸ç¬¨çš„mapçš„å®ç°é¦–å…ˆè¦å¯¹social-security-numbersçš„æ¯ä¸ªæˆå‘˜åº”ç”¨vampire-related-detailsï¼Œç„¶åå†æŠŠç»“æœä¼ ç»™filter`ã€‚å› ä¸ºä½ æœ‰ä¸€ç™¾ä¸‡ä¸ªå«Œç–‘äººï¼Œè¿™å°†éœ€è¦ä¸€ç™¾ä¸‡ç§’ï¼Œä¹Ÿå°±æ˜¯ 12 å¤©ï¼Œåˆ°é‚£æ—¶ä½ çš„ä¸€åŠåŸå¸‚éƒ½ä¼šæ­»æ‰ï¼\u0026quot;ã€‚å½“ç„¶ï¼Œå¦‚æœç»“æœæ˜¯å”¯ä¸€çš„å¸è¡€é¬¼æ˜¯è®°å½•ä¸­çš„æœ€åä¸€ä¸ªå«Œç–‘äººï¼Œç”¨æ‡’äººç‰ˆæœ¬è¿˜æ˜¯ä¼šèŠ±é‚£ä¹ˆå¤šæ—¶é—´ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æœºä¼šï¼Œå®ƒä¸ä¼šã€‚\nå› ä¸ºmapæ˜¯æƒ°æ€§çš„ï¼Œåœ¨ä½ è¯•å›¾è®¿é—® Map çš„å…ƒç´ ä¹‹å‰ï¼Œå®ƒå®é™…ä¸Šå¹¶æ²¡æœ‰å°†å¸è¡€é¬¼ç›¸å…³çš„ç»†èŠ‚åº”ç”¨äºç¤¾ä¼šå®‰å…¨å·ç ã€‚äº‹å®ä¸Šï¼Œmapå‡ ä¹é©¬ä¸Šå°±ä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚\n(time (def mapped-details (map vampire-related-details (range 0 1000000)))) ; =\u0026gt; \u0026#34;Elapsed time: 0.049 msecs\u0026#34; ; =\u0026gt; #\u0026#39;user/mapped-details åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œrangeè¿”å›ä¸€ä¸ªç”± 0 åˆ° 999,999 çš„æ•´æ•°ç»„æˆçš„æƒ°æ€§åºåˆ—ã€‚ç„¶åï¼Œmapè¿”å›ä¸€ä¸ªä¸åç§°mapped-detailsç›¸å…³çš„æƒ°æ€§åºåˆ—ã€‚å› ä¸ºmapå®é™…ä¸Šæ²¡æœ‰å¯¹rangeè¿”å›çš„ä»»ä½•å…ƒç´ åº”ç”¨vampire-related-detailsï¼Œæ•´ä¸ªæ“ä½œå‡ ä¹æ²¡æœ‰èŠ±è´¹ä»»ä½•æ—¶é—´ï¼Œå½“ç„¶ï¼Œå°‘äº 12 å¤©ã€‚\nä½ å¯ä»¥è®¤ä¸ºæ‡’äººåºåˆ—æ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆçš„ï¼šä¸€ä¸ªå…³äºå¦‚ä½•å®ç°åºåˆ—å…ƒç´ çš„é…æ–¹å’Œåˆ°ç›®å‰ä¸ºæ­¢å·²ç»å®ç°çš„å…ƒç´ ã€‚å½“ä½ ä½¿ç”¨mapæ—¶ï¼Œå®ƒè¿”å›çš„æ‡’äººåºåˆ—ä¸åŒ…æ‹¬ä»»ä½•å·²å®ç°çš„å…ƒç´ ï¼Œä½†å®ƒç¡®å®æœ‰ç”Ÿæˆå…¶å…ƒç´ çš„é…æ–¹ã€‚æ¯å½“ä½ è¯•å›¾è®¿é—®ä¸€ä¸ªæœªå®ç°çš„å…ƒç´ æ—¶ï¼Œæ‡’äººåºåˆ—å°†ä½¿ç”¨å®ƒçš„é…æ–¹æ¥ç”Ÿæˆæ‰€è¯·æ±‚çš„å…ƒç´ ã€‚\nåœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œmapped-detailsæ˜¯æœªå®ç°çš„ã€‚ä¸€æ—¦ä½ è¯•å›¾è®¿é—®mapped-detailsçš„ä¸€ä¸ªæˆå‘˜ï¼Œå®ƒå°†ä½¿ç”¨å®ƒçš„é…æ–¹æ¥ç”Ÿæˆä½ æ‰€è¯·æ±‚çš„å…ƒç´ ï¼Œä½ å°†äº§ç”Ÿæ¯ç§’é’Ÿçš„æ•°æ®åº“æŸ¥è¯¢è´¹ç”¨ã€‚\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œrangeè¿”å›ä¸€ä¸ªç”± 0 åˆ° 999,999 çš„æ•´æ•°ç»„æˆçš„æƒ°æ€§åºåˆ—ã€‚ç„¶åï¼Œmapè¿”å›ä¸€ä¸ªä¸mapped-detailsåç§°ç›¸å…³çš„æƒ°æ€§åºåˆ—ã€‚å› ä¸ºmapå®é™…ä¸Šæ²¡æœ‰å¯¹rangeè¿”å›çš„ä»»ä½•å…ƒç´ åº”ç”¨vampire-related-detailsï¼Œæ•´ä¸ªæ“ä½œå‡ ä¹æ²¡æœ‰èŠ±è´¹ä»»ä½•æ—¶é—´ï¼Œå½“ç„¶ï¼Œå°‘äº 12 å¤©ã€‚\nä½ å¯ä»¥è®¤ä¸ºæ‡’äººåºåˆ—ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ªå…³äºå¦‚ä½•å®ç°åºåˆ—å…ƒç´ çš„é…æ–¹å’Œåˆ°ç›®å‰ä¸ºæ­¢å·²ç»å®ç°çš„å…ƒç´ ã€‚å½“ä½ ä½¿ç”¨mapæ—¶ï¼Œå®ƒè¿”å›çš„æƒ°æ€§åºåˆ—ä¸åŒ…æ‹¬ä»»ä½•å·²å®ç°çš„å…ƒç´ ï¼Œä½†å®ƒç¡®å®æœ‰ç”Ÿæˆå…¶å…ƒç´ çš„é…æ–¹ã€‚æ¯å½“ä½ è¯•å›¾è®¿é—®ä¸€ä¸ªæœªå®ç°çš„å…ƒç´ æ—¶ï¼Œæ‡’äººåºåˆ—å°†ä½¿ç”¨å®ƒçš„é…æ–¹æ¥ç”Ÿæˆæ‰€è¯·æ±‚çš„å…ƒç´ ã€‚\nåœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œmapped-detailsæ˜¯æœªå®ç°çš„ã€‚ä¸€æ—¦ä½ è¯•å›¾è®¿é—®mapped-detailsçš„ä¸€ä¸ªæˆå‘˜ï¼Œå®ƒå°†ä½¿ç”¨å®ƒçš„é…æ–¹æ¥ç”Ÿæˆä½ æ‰€è¯·æ±‚çš„å…ƒç´ ï¼Œä½ å°†äº§ç”Ÿæ¯ç§’é’Ÿçš„æ•°æ®åº“æŸ¥è¯¢è´¹ç”¨ã€‚\n(time (first mapped-details)) ; =\u0026gt; \u0026#34;Elapsed time: 32030.767 msecs\u0026#34; ; =\u0026gt; {:name \u0026#34;McFishwich\u0026#34;, :makes-blood-puns? false, :has-pulse? true} è¿™ä¸ªæ“ä½œèŠ±äº†å¤§çº¦ 32 ç§’ã€‚è¿™æ¯”ä¸€ç™¾ä¸‡ç§’å¥½å¾—å¤šï¼Œä½†è¿˜æ˜¯æ¯”æˆ‘ä»¬é¢„æœŸçš„å¤šäº† 31 ç§’ã€‚æ¯•ç«Ÿï¼Œä½ åªæ˜¯è¯•å›¾è®¿é—®ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å®ƒåº”è¯¥åªèŠ±ä¸€ç§’é’Ÿã€‚\nèŠ±äº† 32 ç§’çš„åŸå› æ˜¯ Clojurechunkså®ƒçš„æƒ°æ€§åºåˆ—ï¼Œè¿™åªæ˜¯æ„å‘³ç€æ¯å½“ Clojure è¦å®ç°ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå®ƒä¹Ÿä¼šé¢„å…ˆå®ç°ä¸€äº›ä¸‹ä¸€ä¸ªå…ƒç´ çš„å®ç°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åªæƒ³è¦mapped-detailsçš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä½† Clojure ç»§ç»­å‰è¿›ï¼Œä¹Ÿå‡†å¤‡äº†åé¢çš„ 31 ä¸ªå…ƒç´ ã€‚Clojure è¿™æ ·åšæ˜¯å› ä¸ºå®ƒå‡ ä¹æ€»æ˜¯èƒ½å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚\nå€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œæƒ°æ€§çš„ seq å…ƒç´ åªéœ€è¦å®ç°ä¸€æ¬¡ã€‚å†æ¬¡è®¿é—®mapped-detailsçš„ç¬¬ä¸€ä¸ªå…ƒç´ å‡ ä¹ä¸éœ€è¦æ—¶é—´ã€‚\n(time (first mapped-details)) ; =\u0026gt; \u0026#34;Elapsed time: 0.022 msecs\u0026#34; ; =\u0026gt; {:name \u0026#34;McFishwich\u0026#34;, :makes-blood-puns? false, :has-pulse? true} æœ‰äº†è¿™äº›æ–°å‘ç°çš„çŸ¥è¯†ï¼Œä½ å°±å¯ä»¥æœ‰æ•ˆåœ°æŒ–æ˜å¸è¡€é¬¼æ•°æ®åº“ï¼Œæ‰¾åˆ°å¸¦ç ç‰™çš„ç½ªé­ç¥¸é¦–ã€‚\n(time (identify-vampire (range 0 1000000))) \u0026#34;Elapsed time: 32019.912 msecs\u0026#34; ; =\u0026gt; {:name \u0026#34;Damon Salvatore\u0026#34;, :makes-blood-puns? true, :has-pulse? false} å“¦ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¾¾è’™ä¼šåšå‡ºé‚£äº›ä»¤äººæ¯›éª¨æ‚šç„¶çš„åŒå…³è¯­çš„åŸå› ã€‚\næ— ç©·åºåˆ— æƒ°æ€§åºåˆ— ç»™ä½ çš„ä¸€ä¸ªå¾ˆé…·ã€å¾ˆæœ‰ç”¨çš„èƒ½åŠ›æ˜¯æ„å»ºæ— ç©·åºåˆ—çš„èƒ½åŠ›ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åªå¤„ç†è¿‡ä» Vector æˆ–åˆ—è¡¨ä¸­ç”Ÿæˆçš„æƒ°æ€§åºåˆ—ï¼Œè¿™äº›åºåˆ—æ˜¯ç»ˆæ­¢çš„ã€‚ç„¶è€Œï¼ŒClojure è‡ªå¸¦äº†ä¸€äº›å‡½æ•°æ¥åˆ›å»ºæ— ç©·åºåˆ—ã€‚åˆ›å»ºæ— ç©·åºåˆ—çš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨repeatï¼Œå®ƒåˆ›å»ºä¸€ä¸ªåºåˆ—ï¼Œå…¶æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä½ ä¼ é€’çš„å‚æ•°ã€‚\n(concat (take 8 (repeat \u0026#34;na\u0026#34;)) [\u0026#34;Batman!\u0026#34;]) ; =\u0026gt; (\u0026#34;na\u0026#34; \u0026#34;na\u0026#34; \u0026#34;na\u0026#34; \u0026#34;na\u0026#34; \u0026#34;na\u0026#34; \u0026#34;na\u0026#34; \u0026#34;na\u0026#34; \u0026#34;na\u0026#34; \u0026#34;Batman!\u0026#34;) åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªæ— ç©·çš„åºåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å­—ç¬¦ä¸² \u0026ldquo;na\u0026rdquo;ï¼Œç„¶åç”¨å®ƒæ¥æ„å»ºä¸€ä¸ªå¯èƒ½å¼•èµ·æˆ–ä¸å¼•èµ·æ€€æ—§æƒ…ç»ªçš„åºåˆ—ã€‚\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨repeatedlyï¼Œå®ƒå°†è°ƒç”¨æä¾›çš„å‡½æ•°æ¥ç”Ÿæˆåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚\n(take 3 (repeatedly (fn [] (rand-int 10)))) ; =\u0026gt; (1 4 0) è¿™é‡Œï¼Œç”±repeatedlyè¿”å›çš„æƒ°æ€§åºåˆ—é€šè¿‡è°ƒç”¨åŒ¿åå‡½æ•°(fn [] (rand-int 10))ç”Ÿæˆæ¯ä¸ªæ–°å…ƒç´ ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ª 0 åˆ° 9 ä¹‹é—´çš„éšæœºæ•´æ•°ã€‚å¦‚æœä½ åœ¨ä½ çš„ REPL ä¸­è¿è¡Œè¿™ä¸ªï¼Œä½ çš„ç»“æœå¾ˆå¯èƒ½ä¸æ­¤ä¸åŒã€‚\næƒ°æ€§åºåˆ— çš„é…æ–¹ä¸éœ€è¦æŒ‡å®šä¸€ä¸ªç«¯ç‚¹ã€‚åƒfirstå’Œtakeè¿™æ ·çš„å‡½æ•°å®ç°äº†æƒ°æ€§åºåˆ—ï¼Œå®ƒä»¬æ²¡æœ‰åŠæ³•çŸ¥é“åºåˆ—çš„ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Œå¦‚æœåºåˆ—ä¸€ç›´æä¾›å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä¼šä¸€ç›´å–èµ°å®ƒä»¬ã€‚å¦‚æœä½ æ„å»ºä½ è‡ªå·±çš„æ— ç©·åºåˆ—ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚\n(defn even-numbers ([] (even-numbers 0)) ([n] (cons n (lazy-seq (even-numbers (+ n 2)))))) (take 10 (even-numbers)) ; =\u0026gt; (0 2 4 6 8 10 12 14 16 18) è¿™ä¸ªä¾‹å­æœ‰ç‚¹ä»¤äººè´¹è§£ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†é€’å½’ã€‚è®°ä½consè¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œå¹¶å°†ä¸€ä¸ªå…ƒç´ è¿½åŠ åˆ°ç»™å®šçš„åˆ—è¡¨ä¸­ï¼Œä¼šæœ‰æ‰€å¸®åŠ©ã€‚\n(cons 0 \u0026#39;(2 4 6)) ; =\u0026gt; (0 2 4 6) (é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒLisp ç¨‹åºå‘˜åœ¨ä½¿ç”¨conså‡½æ•°æ—¶ç§°å®ƒä¸ºconsing)ã€‚\nåœ¨ \u0026ldquo;å¶æ•° \u0026ldquo;ä¸­ï¼Œä½ æ˜¯åœ¨å¯¹ä¸€ä¸ªæƒ°æ€§åˆ—è¡¨è¿›è¡Œ consingï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªå…³äºä¸‹ä¸€ä¸ªå…ƒç´ çš„é…æ–¹ï¼ˆä¸€ä¸ªå‡½æ•°ï¼‰ï¼ˆè€Œä¸æ˜¯å¯¹ä¸€ä¸ªå®Œå…¨å®ç°çš„åˆ—è¡¨è¿›è¡Œ consingï¼‰ã€‚\nè¿™å°±æ¶µç›–äº†æƒ°æ€§åºåˆ—! ç°åœ¨ä½ çŸ¥é“äº†å…³äºåºåˆ—æŠ½è±¡çš„æ‰€æœ‰çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥è½¬å‘é›†åˆæŠ½è±¡äº†ã€‚\né›†åˆæŠ½è±¡ é›†åˆçš„æŠ½è±¡ä¸åºåˆ—çš„æŠ½è±¡å¯†åˆ‡ç›¸å…³ã€‚æ‰€æœ‰ Clojure çš„æ ¸å¿ƒæ•°æ®ç»“æ„\u0026ndash;Vectorã€Mapã€åˆ—è¡¨å’Œé›†åˆ\u0026ndash;éƒ½å‚ä¸äº†è¿™ä¸¤ä¸ªæŠ½è±¡ã€‚\nåºåˆ—æŠ½è±¡æ˜¯å…³äºå¯¹æˆå‘˜çš„å•ç‹¬æ“ä½œï¼Œè€Œé›†åˆæŠ½è±¡æ˜¯å…³äºæ•°æ®ç»“æ„çš„æ•´ä½“ã€‚ä¾‹å¦‚ï¼Œé›†åˆå‡½æ•° count, empty?, å’Œ every? ä¸æ˜¯å…³äºä»»ä½•å•ç‹¬çš„å…ƒç´ ï¼›å®ƒä»¬æ˜¯å…³äºæ•´ä½“çš„ã€‚\n(empty?[]) ; =\u0026gt; true (empty? [\u0026#34;no!\u0026#34;]) ; =\u0026gt; false å®é™…ä¸Šï¼Œä½ å¾ˆå°‘ä¼šæœ‰æ„è¯†çš„è¯´ï¼š\u0026ldquo;å¥½çš„ï¼Œè‡ªå·±ï¼\u0026quot;ã€‚ä½ ç°åœ¨æ˜¯åœ¨å’Œæ•´ä¸ªé›†åˆä¸€èµ·å·¥ä½œã€‚ä»é›†åˆæŠ½è±¡çš„è§’åº¦æ¥è€ƒè™‘ï¼\u0026rdquo; å°½ç®¡å¦‚æ­¤ï¼Œäº†è§£è¿™äº›ä½œä¸ºä½ æ‰€ä½¿ç”¨çš„å‡½æ•°å’Œæ•°æ®ç»“æ„åŸºç¡€çš„æ¦‚å¿µè¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚\nç°åœ¨æˆ‘ä»¬æ¥ç ”ç©¶ä¸¤ä¸ªå¸¸è§çš„é›†åˆå‡½æ•°\u0026ndash;intoå’Œconjï¼Œå®ƒä»¬çš„ç›¸ä¼¼æ€§å¯èƒ½ä¼šè®©äººæœ‰ç‚¹å›°æƒ‘ã€‚\ninto æœ€é‡è¦çš„é›†åˆå‡½æ•°ä¹‹ä¸€æ˜¯intoã€‚æ­£å¦‚ä½ ç°åœ¨æ‰€çŸ¥ï¼Œè®¸å¤š seq å‡½æ•°è¿”å›ä¸€ä¸ª seqï¼Œè€Œä¸æ˜¯åŸå§‹æ•°æ®ç»“æ„ã€‚ä½ å¯èƒ½æƒ³æŠŠè¿”å›å€¼è½¬æ¢æˆåŸå§‹å€¼, intoè®©ä½ åšåˆ°è¿™ä¸€ç‚¹:\n(map identity {:sunlight-reaction \u0026#34;Glitter!\u0026#34;}) ; =\u0026gt; ([:sunlight-reaction \u0026#34;Glitter!\u0026#34;]) (into {} (map identity {:sunlight-reaction \u0026#34;Glitter!\u0026#34;})) ; =\u0026gt; {:sunlight-reaction \u0026#34;Glitter!\u0026#34;}. åœ¨è¿™é‡Œï¼Œmapå‡½æ•°åœ¨å¾—åˆ°ä¸€ä¸ª map æ•°æ®ç»“æ„åè¿”å›ä¸€ä¸ªé¡ºåºæ•°æ®ç»“æ„ï¼Œå¹¶å°† seq è½¬æ¢å› mapã€‚\nè¿™ä¹Ÿé€‚ç”¨äºå…¶ä»–æ•°æ®ç»“æ„ã€‚\n(map identity [:garlic :sesame-oil :fried-eggs]) ; =\u0026gt; (:garlic :sesame-oil :fried-eggs) (into [] (map identity [:garlic :sesame-oil :fried-eggs])) ; =\u0026gt; [:garlic :sesame-oil :fried-eggs] è¿™é‡Œï¼Œåœ¨ç¬¬ä¸€è¡Œï¼Œmapè¿”å›ä¸€ä¸ªåºåˆ—ï¼Œæˆ‘ä»¬åœ¨ç¬¬äºŒè¡Œä½¿ç”¨intoå°†ç»“æœè½¬æ¢ä¸ºä¸€ä¸ª Vectorã€‚\nåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªæœ‰ä¸¤ä¸ªç›¸åŒæ¡ç›®çš„ Vector å¼€å§‹ï¼ŒmapæŠŠå®ƒè½¬æ¢ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œç„¶åæˆ‘ä»¬ç”¨intoæŠŠå€¼ç²˜åˆ°ä¸€ä¸ªé›†åˆä¸­ã€‚\n(map identity [:garlic-clove :garlic-clove]) ; =\u0026gt; (:garlic-clove :garlic-clove) (into #{} (map identity [:garlic-clove :garlic-clove])) ; =\u0026gt; #{:garlic-clove} å› ä¸ºé›†åˆåªåŒ…å«å”¯ä¸€çš„å€¼ï¼Œæ‰€ä»¥é›†åˆä¸­æœ€ç»ˆåªæœ‰ä¸€ä¸ªå€¼ã€‚\nintoçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ä¸€å®šæ˜¯ç©ºçš„ã€‚è¿™é‡Œï¼Œç¬¬ä¸€ä¸ªä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨intoå‘ Map æ·»åŠ å…ƒç´ ï¼Œç¬¬äºŒä¸ªä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•å‘ Vector æ·»åŠ å…ƒç´ ã€‚\n(into {:favorite-emotion \u0026#34;gloomy\u0026#34;} [[:sunlight-reaction \u0026#34;Glitter!\u0026#34;]]) ; =\u0026gt; {:favorite-emotion \u0026#34;gloomy\u0026#34; :sunlight-reaction \u0026#34;Glitter!\u0026#34;} (into [\u0026#34;cherry\u0026#34;] \u0026#39;(\u0026#34;pine\u0026#34; \u0026#34;spruce\u0026#34;)) ; =\u0026gt; [\u0026#34;cherry\u0026#34; \u0026#34;pine\u0026#34; \u0026#34;spruce\u0026#34;] å½“ç„¶ï¼Œä¸¤ä¸ªå‚æ•°ä¹Ÿå¯ä»¥æ˜¯åŒä¸€ç±»å‹ã€‚åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä¸¤ä¸ªå‚æ•°éƒ½æ˜¯ Mapï¼Œè€Œä¹‹å‰æ‰€æœ‰çš„ä¾‹å­éƒ½æœ‰ä¸åŒç±»å‹çš„å‚æ•°ã€‚å®ƒçš„å·¥ä½œåŸç†å’Œä½ æ‰€æœŸæœ›çš„ä¸€æ ·ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Mapï¼Œå°†ç¬¬äºŒä¸ª Map çš„å…ƒç´ æ·»åŠ åˆ°ç¬¬ä¸€ä¸ª Map ä¸­ã€‚\n(into {:favorite-animal \u0026#34;kitty\u0026#34;} {:least-favorite-smell \u0026#34;dog\u0026#34; :relationship-with-teenager \u0026#34;creepy\u0026#34;}) ; =\u0026gt; {:favorite-animal \u0026#34;kitty\u0026#34; :relationship-with-teenager \u0026#34;creepy\u0026#34; :least-favorite-smell \u0026#34;dog\u0026#34;} å¦‚æœintoåœ¨æ±‚èŒé¢è¯•ä¸­è¢«è¦æ±‚æè¿°å®ƒçš„ä¼˜åŠ¿ï¼Œå®ƒä¼šè¯´ï¼š\u0026ldquo;æˆ‘å¾ˆæ“…é•¿å¤„ç†ä¸¤ä¸ªé›†åˆï¼Œå¹¶å°†ç¬¬äºŒä¸ªé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªé›†åˆä¸­ã€‚\u0026rdquo;\nconj conjä¹Ÿæ˜¯å‘ä¸€ä¸ªé›†åˆæ·»åŠ å…ƒç´ ï¼Œä½†å®ƒçš„æ–¹å¼ç•¥æœ‰ä¸åŒã€‚\n(conj [0] [1]) ; =\u0026gt; [0 [1]] å‘œå‘œå‘œ! çœ‹èµ·æ¥å®ƒæŠŠæ•´ä¸ª Vector[1]æ·»åŠ åˆ°[0]ã€‚ä¸intoæ¯”è¾ƒã€‚\n(into [0] [1]) ; =\u0026gt; [0 1] ä¸‹é¢æ˜¯æˆ‘ä»¬å¦‚ä½•ç”¨conjåšåŒæ ·çš„äº‹æƒ…ã€‚\n(conj [0] 1) ; =\u0026gt; [0 1] æ³¨æ„ï¼Œæ•°å­— 1 æ˜¯ä½œä¸ºæ ‡é‡ï¼ˆå•æ•°ï¼Œéé›†åˆï¼‰å€¼ä¼ é€’çš„ï¼Œè€Œintoçš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªé›†åˆã€‚\nä½ å¯ä»¥æä¾›å°½å¯èƒ½å¤šçš„å…ƒç´ ä¸conjä¸€èµ·æ·»åŠ ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ åˆ°å…¶ä»–é›†åˆä¸­ï¼Œå¦‚ mapã€‚\n(conj [0] 1 2 3 4) ; =\u0026gt; [0 1 2 3 4] (conj {:time \u0026#34;midnight\u0026#34;} [:place \u0026#34;ye olde cemetarium\u0026#34;]) ; =\u0026gt; {:place \u0026#34;ye olde cemetarium\u0026#34; :time \u0026#34;midnight\u0026#34;} conjå’Œintoå¦‚æ­¤ç›¸ä¼¼ï¼Œä½ ç”šè‡³å¯ä»¥ç”¨intoæ¥å®šä¹‰conjã€‚\n(defn my-conj [target \u0026amp; additions] (into target additions)) (my-conj [0] 1 2 3) ; =\u0026gt; [0 1 2 3] åŠŸèƒ½å‡½æ•° å­¦ä¹ åˆ©ç”¨ Clojure çš„æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°å’Œè¿”å›å‡½æ•°ä½œä¸ºå€¼çš„èƒ½åŠ›æ˜¯éå¸¸æœ‰è¶£çš„ï¼Œå³ä½¿å®ƒéœ€è¦ä¸€äº›é€‚åº”ã€‚\nClojure çš„ä¸¤ä¸ªå‡½æ•°ï¼Œapplyå’Œpartialï¼Œå¯èƒ½çœ‹èµ·æ¥ç‰¹åˆ«å¥‡æ€ªï¼Œå› ä¸ºå®ƒä»¬éƒ½æ¥å—å’Œè¿”å›å‡½æ•°ã€‚è®©æˆ‘ä»¬æ¥è§£å¼€å®ƒä»¬çš„ç–‘æƒ‘ã€‚\nApply apply ä¼šå±•å¼€ä¸€ä¸ªåºåˆ—ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è¢«ä¼ é€’ç»™ä¸€ä¸ªæœŸæœ›æœ‰å…¶ä½™å‚æ•°çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œmaxæ¥å—ä»»ä½•æ•°é‡çš„å‚æ•°ï¼Œå¹¶è¿”å›æ‰€æœ‰å‚æ•°ä¸­æœ€å¤§çš„ä¸€ä¸ªã€‚è¿™é‡Œæ˜¯ä½ å¦‚ä½•æ‰¾åˆ°æœ€å¤§çš„æ•°å­—ã€‚\n(max 0 1 2) ; =\u0026gt; 2 ä½†å¦‚æœä½ æƒ³æ‰¾åˆ°ä¸€ä¸ª Vector çš„æœ€å¤§å…ƒç´ ï¼Œæ€ä¹ˆåŠï¼Ÿä½ ä¸èƒ½åªæŠŠ Vector ä¼ ç»™maxã€‚\n(max [0 1 2]) ; =\u0026gt; [0 1 2] è¿™ä¸ä¼šè¿”å› Vector ä¸­æœ€å¤§çš„å…ƒç´ ï¼Œå› ä¸ºmaxè¿”å›æ‰€æœ‰ä¼ é€’ç»™å®ƒçš„å‚æ•°ä¸­æœ€å¤§çš„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åªæ˜¯ä¼ é€’ç»™å®ƒä¸€ä¸ªåŒ…å«æ‰€æœ‰ä½ æƒ³æ¯”è¾ƒçš„æ•°å­—çš„ Vectorï¼Œè€Œä¸æ˜¯æŠŠæ•°å­—ä½œä¸ºå•ç‹¬çš„å‚æ•°ä¼ é€’è¿›å»ã€‚applyæ˜¯è¿™ç§æƒ…å†µçš„å®Œç¾é€‰æ‹©ã€‚\n(apply max [0 1 2]) ; =\u0026gt; 2 é€šè¿‡ä½¿ç”¨applyï¼Œå°±åƒä½ è°ƒç”¨(max 0 1 2)ä¸€æ ·ã€‚ä½ ç»å¸¸ä¼šåƒè¿™æ ·ä½¿ç”¨applyï¼Œå¯¹ä¸€ä¸ªé›†åˆçš„å…ƒç´ è¿›è¡Œåˆ†è§£ï¼Œä½¿å®ƒä»¬ä½œä¸ºå•ç‹¬çš„å‚æ•°è¢«ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ã€‚\nè¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰æ˜¯å¦‚ä½•ç”¨ \u0026ldquo;into \u0026ldquo;æ¥å®šä¹‰ \u0026ldquo;conj \u0026ldquo;çš„å—ï¼Ÿé‚£ä¹ˆï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨applyåœ¨conjçš„åŸºç¡€ä¸Šå®šä¹‰intoã€‚\n(defn my-into [target additions] (apply conj target additions)) (my-into [0] [1 2 3]) ; =\u0026gt; [0 1 2 3] å¯¹my-intoçš„è°ƒç”¨ç›¸å½“äºè°ƒç”¨(conj [0] 1 2 3)ã€‚\nPartial partialæ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä»»æ„æ•°é‡çš„å‚æ•°ã€‚ç„¶åå®ƒè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚å½“ä½ è°ƒç”¨è¿”å›çš„å‡½æ•°æ—¶ï¼Œå®ƒç”¨ä½ æä¾›çš„åŸå‚æ•°å’Œæ–°å‚æ•°ä¸€èµ·è°ƒç”¨åŸå‡½æ•°ã€‚\nè¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚\n(def add10 (partial + 10)) (add10 3) ; =\u0026gt; 13 (add10 5) ; =\u0026gt; 15 (def add-missing-elements (partial conj [\u0026#34;water\u0026#34; \u0026#34;earth\u0026#34; \u0026#34;air\u0026#34;])) (add-missing-elements \u0026#34;unobtainium\u0026#34; \u0026#34;adamantium\u0026#34;) ; =\u0026gt; [\u0026#34;water\u0026#34; \u0026#34;earth\u0026#34; \u0026#34;air\u0026#34; \u0026#34;unobtainium\u0026#34; \u0026#34;adamantium\u0026#34;] æ‰€ä»¥å½“ä½ è°ƒç”¨add10æ—¶ï¼Œå®ƒä¼šè°ƒç”¨åŸå§‹å‡½æ•°å’Œå‚æ•°ï¼ˆ+ 10ï¼‰ï¼Œå¹¶é™„åŠ ä½ è°ƒç”¨add10çš„ä»»ä½•å‚æ•°ã€‚ä¸ºäº†å¸®åŠ©æ¾„æ¸…partialçš„å·¥ä½œåŸç†ï¼Œä¸‹é¢æ¼”ç¤ºäº†å¦‚ä½•å®šä¹‰ï¼š\n(defn my-partial [partialized-fn \u0026amp; args] (fn [\u0026amp; more-args] (apply partialized-fn (into args more-args)))) (def add20 (my-partial + 20)) (add20 3) ; =\u0026gt; 23 åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œadd20çš„å€¼æ˜¯ç”±my-partialè¿”å›çš„åŒ¿åå‡½æ•°ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°æ˜¯è¿™æ ·å®šä¹‰çš„ã€‚\n(fn [\u0026amp; more-args] (apply + (into [20] more-args))) ä¸€èˆ¬æ¥è¯´ï¼Œå½“ä½ å‘ç°ä½ åœ¨è®¸å¤šä¸åŒçš„æƒ…å†µä¸‹é‡å¤ç›¸åŒçš„å‡½æ•°å’Œå‚æ•°ç»„åˆæ—¶ï¼Œä½ ä¼šæƒ³ä½¿ç”¨ partialã€‚è¿™ä¸ªç©å…·ä¾‹å­æ˜¾ç¤ºäº†ä½ å¦‚ä½•ä½¿ç”¨partialæ¥ä¸“é—¨åŒ–ä¸€ä¸ªè®°å½•å™¨ï¼Œåˆ›å»ºä¸€ä¸ªwarnå‡½æ•°ã€‚\n(defn lousy-logger [log-level message] (condp = log-level :warn (clojure.string/lower-case message) :emergency (clojure.string/upper-case message))) (def warn (partial lousy-logger :warn)) (warn \u0026#34;Red light ahead\u0026#34;) ; =\u0026gt; \u0026#34;red light ahead\u0026#34; åœ¨è¿™é‡Œè°ƒç”¨(warning \u0026quot;Red light ahead\u0026quot;)ä¸è°ƒç”¨(lousy-logger :warning \u0026quot;Red light ahead\u0026quot;)æ˜¯ç›¸åŒçš„ã€‚\nComplement æ—©äº›æ—¶å€™ï¼Œä½ åˆ›å»ºäº†è¯†åˆ«å¸è¡€é¬¼å‡½æ•°ï¼Œä»¥ä¾¿åœ¨ä¸€ç™¾ä¸‡äººä¸­æ‰¾åˆ°ä¸€ä¸ªå¸è¡€é¬¼ã€‚å¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥å¯»æ‰¾æ‰€æœ‰çš„äººç±»å‘¢ï¼Ÿä¹Ÿè®¸ä½ æƒ³ç»™ä»–ä»¬å‘é€æ„Ÿè°¢å¡ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰æˆä¸ºä¸æ­»çš„æ å¤ºè€…ã€‚è¿™é‡Œæ˜¯ä½ å¯ä»¥åšçš„ã€‚\n(defn identify-humans [social-security-numbers] (filter #(not (vampire? %)) (map vampire-related-details social-security-numbers))) çœ‹çœ‹filterçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ#(not (vampire? %))ã€‚æƒ³è¦å¾—åˆ°ä¸€ä¸ªå¸ƒå°”å‡½æ•°çš„complementï¼ˆå¦å®šï¼‰æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œcomplementï¼Œç”¨äºæ­¤ã€‚\n(def not-vampire? (complement vampire?)) (defn identify-humans [social-security-numbers] (filter not-vampire? (map vampire-related-details social-security-numbers))) ä¸‹é¢æ˜¯ä½ å¦‚ä½•å®ç° \u0026ldquo;complement\u0026quot;çš„æ–¹æ³•ã€‚\n(defn my-complement [fun] (fn [\u0026amp; args] (not (apply fun args)))) (def my-pos? (complement neg?)) (my-pos? 1) ; =\u0026gt; true (my-pos? -1) ; =\u0026gt; false æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œcomplementæ˜¯ä¸€ä¸ªä¸èµ·çœ¼çš„å‡½æ•°ã€‚å®ƒåªåšä¸€ä»¶å°äº‹ï¼Œè€Œä¸”åšå¾—å¾ˆå¥½ã€‚complementä½¿åˆ›å»ºä¸€ä¸ªä¸å¸è¡€çš„å‡½æ•°å˜å¾—å¾®ä¸è¶³é“ï¼Œè€Œä¸”ä»»ä½•é˜…è¯»ä»£ç çš„äººéƒ½èƒ½ç†è§£ä»£ç çš„æ„å›¾ã€‚\nè¿™ä¸ä¼šä¸ºä½ æä¾›æ•°å…†å­—èŠ‚çš„æ•°æ®çš„ MapReduce æˆ–ç±»ä¼¼çš„ä¸œè¥¿ï¼Œä½†å®ƒç¡®å®è¯æ˜äº†é«˜é˜¶å‡½æ•°çš„åŠ›é‡ã€‚å®ƒä»¬å…è®¸ä½ ä»¥ä¸€ç§åœ¨æŸäº›è¯­è¨€ä¸­ä¸å¯èƒ½å®ç°çš„æ–¹å¼å»ºç«‹èµ·å®ç”¨å‡½æ•°åº“ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™äº›å®ç”¨å‡½æ•°ä½¿ä½ çš„ç”Ÿæ´»å˜å¾—æ›´åŠ è½»æ¾ã€‚\nä¸ºåç››é¡¿å·ç¦å…‹æ–¯è­¦å¯Ÿå±€ï¼ˆFWPDï¼‰ç¼–å†™ä¸€ä¸ªå¤æ‚çš„å¸è¡€é¬¼æ•°æ®åˆ†æç¨‹åº ä¸ºäº†æŠŠæ‰€æœ‰çš„äº‹æƒ…è”ç³»èµ·æ¥ï¼Œè®©æˆ‘ä»¬ä¸ºåç››é¡¿å·ç¦å…‹æ–¯è­¦å¯Ÿå±€ï¼ˆFWPDï¼‰ç¼–å†™ä¸€ä¸ªå¤æ‚çš„å¸è¡€é¬¼æ•°æ®åˆ†æç¨‹åºçš„é›å½¢ã€‚\nFWPD æœ‰ä¸€ä¸ªèŠ±å“¨çš„æ–°æ•°æ®åº“æŠ€æœ¯ï¼Œå«åšCSV ï¼ˆé€—å·-**åˆ†éš”çš„å€¼ï¼‰ã€‚ä½ çš„å·¥ä½œæ˜¯è§£æè¿™ä¸ªæœ€å…ˆè¿›çš„ CSVï¼Œå¹¶åˆ†æå®ƒæ˜¯å¦æœ‰æ½œåœ¨çš„å¸è¡€é¬¼ã€‚æˆ‘ä»¬å°†é€šè¿‡è¿‡æ»¤æ¯ä¸ªå«Œç–‘äººçš„é—ªå…‰æŒ‡æ•°*æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¿™æ˜¯ä¸€ä¸ªç”±æŸä¸ªå°‘å¥³å¼€å‘çš„å¯¹å«Œç–‘äººçš„å¸è¡€é¬¼æ€§çš„ 0-10 é¢„æµ‹ã€‚ç»§ç»­å¹¶ä¸ºä½ çš„å·¥å…·åˆ›å»ºä¸€ä¸ªæ–°çš„ Leiningen é¡¹ç›®ã€‚\nlein new app fwpd åœ¨æ–°çš„fwpdç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºsuspects.csvçš„æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ã€‚\nEdward Cullen,10 Bella Swan,0 Charlie Swan,0 Jacob Black,3 Carlisle Cullen,6 ç°åœ¨æ˜¯æ—¶å€™é€šè¿‡å»ºç«‹fwpd/src/fwpd/core.cljæ–‡ä»¶æ¥å¼„è„ä½ çš„æ‰‹äº†ã€‚æˆ‘å»ºè®®ä½ å¯åŠ¨ä¸€ä¸ªæ–°çš„ REPL ä¼šè¯ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è¾¹èµ°è¾¹è¯•ã€‚åœ¨ Emacs ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ‰“å¼€fwpd/**src/fwpd/core.cljå¹¶è¿è¡ŒM-x cider-restart æ¥å®ç°ã€‚ä¸€æ—¦ REPL å¯åŠ¨ï¼Œåˆ é™¤core.cljçš„å†…å®¹ï¼Œç„¶ååŠ å…¥ä»¥ä¸‹å†…å®¹ã€‚\n(ns fwpd.core) (def filename \u0026#34;suspects.csv\u0026#34;) ç¬¬ä¸€è¡Œå»ºç«‹äº†å‘½åç©ºé—´ï¼Œç¬¬äºŒè¡Œåªæ˜¯ä½¿ä½ åˆ›å»ºçš„ CSV æ›´å®¹æ˜“è¢«å¼•ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡ç¼–è¯‘ä½ çš„æ–‡ä»¶ï¼ˆEmacs ä¸­çš„C-c C-kï¼‰å¹¶è¿è¡Œä»¥ä¸‹ç¨‹åºï¼Œåœ¨ä½ çš„ REPL ä¸­åšä¸€ä¸ªå¿«é€Ÿçš„ç†æ™ºæ£€æŸ¥ã€‚\n(slurp filename) ; =\u0026gt; \u0026#34;Edward Cullen,10\\nBella Swan,0\\nCharlie Swan,0\\nJacob Black, 3\\nCarlisle Cullen, 6\u0026#34; å¦‚æœslurpå‡½æ•°æ²¡æœ‰è¿”å›å‰é¢çš„å­—ç¬¦ä¸²ï¼Œè¯•ç€åœ¨core.cljæ‰“å¼€çš„æƒ…å†µä¸‹é‡æ–°å¯åŠ¨ä½ çš„ REPL ä¼šè¯ã€‚\næ¥ä¸‹æ¥ï¼Œåœ¨core.cljä¸­æ·»åŠ è¿™ä¸ªå†…å®¹ã€‚\nâŠ (def vamp-keys [:name :glitter-index]) â‹ (defn str-\u0026gt;int [str] (Integer. str)) âŒ (def conversions {:name identity :glitter-index str-\u0026gt;int}) â (defn convert [vamp-key value] ((get conversions vamp-key) value)) æœ€ç»ˆï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸²çœ‹èµ·æ¥åƒ{:name \u0026quot;Edward Cullen\u0026quot; :glitter-index 10}çš„ Mapï¼Œå‰é¢çš„å®šä¹‰å¯ä»¥å¸®åŠ©ä½ è¾¾åˆ°ç›®çš„ã€‚é¦–å…ˆï¼Œvamp-keysâŠæ˜¯ä¸€ä¸ªé”®çš„ Vectorï¼Œä½ å¾ˆå¿«ä¼šç”¨å®ƒæ¥åˆ›å»ºå¸è¡€é¬¼ Mapã€‚æ¥ä¸‹æ¥ï¼Œå‡½æ•°str-\u0026gt;intâ‹å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°ã€‚MapconversionsâŒå°†ä¸€ä¸ªè½¬æ¢å‡½æ•°ä¸æ¯ä¸ªå¸è¡€é¬¼é”®ç›¸å…³è”ã€‚ä½ æ ¹æœ¬ä¸éœ€è¦è½¬æ¢åå­—ï¼Œæ‰€ä»¥å®ƒçš„è½¬æ¢å‡½æ•°æ˜¯identityï¼Œå®ƒåªæ˜¯è¿”å›ä¼ é€’ç»™å®ƒçš„å‚æ•°ã€‚ç† ç† ç”Ÿè¾‰çš„ç´¢å¼•è¢«è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œæ‰€ä»¥å®ƒçš„è½¬æ¢å‡½æ•°æ˜¯str-\u0026gt;intã€‚æœ€åï¼Œconvertå‡½æ•°âæ¥æ”¶ä¸€ä¸ª vamp é”®å’Œä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›è½¬æ¢åçš„å€¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n(convert :glitter-index \u0026#34;3\u0026#34;) ; =\u0026gt; 3 ç°åœ¨æŠŠè¿™ä¸ªæ·»åŠ åˆ°ä½ çš„æ–‡ä»¶ä¸­ã€‚\n(defn parse \u0026#34;Convert a CSV into rows of columns\u0026#34; [string] (map #(clojure.string/split % #\u0026#34;,\u0026#34;) (clojure.string/split string #\u0026#34;\\n\u0026#34;))) parseå‡½æ•°æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé¦–å…ˆåœ¨æ¢è¡Œç¬¦ä¸Šè¿›è¡Œåˆ†å‰²ï¼Œåˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²çš„åºåˆ—ã€‚æ¥ä¸‹æ¥ï¼Œå®ƒå¯¹å­—ç¬¦ä¸²åºåˆ—è¿›è¡Œ Mapï¼Œåœ¨é€—å·å­—ç¬¦ä¸Šåˆ†å‰²æ¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¯•ç€åœ¨ä½ çš„ CSV ä¸Šè¿è¡Œparseã€‚\n(parse (slurp filename)) ; =\u0026gt; ([\u0026#34;Edward Cullen\u0026#34; \u0026#34;10\u0026#34;] [\u0026#34;Bella Swan\u0026#34; \u0026#34;0\u0026#34;] [\u0026#34;Charlie Swan\u0026#34; \u0026#34;0\u0026#34;] [\u0026#34;Jacob Black\u0026#34; \u0026#34;3\u0026#34;] [\u0026#34;Carlisle Cullen\u0026#34; \u0026#34;6\u0026#34;]) æ¥ä¸‹æ¥çš„ä»£ç å°† Vector åºåˆ—ä¸ä½ çš„å¸è¡€é¬¼é’¥åŒ™ç»“åˆèµ·æ¥ï¼Œåˆ›å»º Mapã€‚\n(defn mapify \u0026#34;Return a seq of maps like {:name \\\u0026#34;Edward Cullen\\\u0026#34; :glitter-index 10}\u0026#34; [rows] (map (fn [unmapped-row] (reduce (fn [row-map [vamp-key value]] (assoc row-map vamp-key (convert vamp-key value))) {} (map vector vamp-keys unmapped-row))) rows)) åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œmapé€šè¿‡ä½¿ç”¨reduceå°†æ¯ä¸€è¡Œ Vector å¦‚[\u0026quot;Bella Swan\u0026quot; 0]è½¬åŒ–ä¸ºä¸€ä¸ª Mapï¼Œå…¶æ–¹å¼ä¸ä¸Šé¢\u0026rdquo;reduce\u0026ldquo;ä¸­çš„ç¬¬ä¸€ä¸ªä¾‹å­ç›¸ä¼¼ã€‚é¦–å…ˆï¼Œmapåˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹åºåˆ—ï¼Œå¦‚([:name \u0026quot;Bella Swan\u0026quot;] [:glitter-index 0])ã€‚ç„¶åï¼Œ\u0026ldquo;reduce \u0026ldquo;é€šè¿‡å°†ä¸€ä¸ª vamp é”®å’Œä¸€ä¸ªè½¬æ¢åçš„ vamp å€¼å…³è”åˆ° \u0026ldquo;row-map \u0026ldquo;æ¥å»ºç«‹ä¸€ä¸ª Mapã€‚ä¸‹é¢æ˜¯ç¬¬ä¸€è¡Œçš„ Mapã€‚\n(first (mapify (parse (slurp filename)))) ; =\u0026gt; {:glitter-index 10, :name \u0026#34;Edward Cullen\u0026#34; } æœ€åï¼Œæ·»åŠ è¿™ä¸ªglitter-filterå‡½æ•°ã€‚\n(defn glitter-filter [minimum-glitter records] (filter #(\u0026gt;= (:glitter-index %) minimum-glitter) records)) è¿™éœ€è¦å®Œå…¨ Map çš„å¸è¡€é¬¼è®°å½•ï¼Œå¹¶è¿‡æ»¤æ‰é‚£äº›:glitter-indexå°äºæ‰€æä¾›çš„minimum-glitterçš„è®°å½•ã€‚\n(glitter-filter 3 (mapify (parse (slurp filename)))) ({:name \u0026#34;Edward Cullen\u0026#34;, :glitter-index 10} {:name \u0026#34;Jacob Black\u0026#34;, :glitter-index 3} {:name \u0026#34;Carlisle Cullen\u0026#34;, :glitter-index 6}) Et voilÃ ! ä½ ç°åœ¨ç¦»å®ç°ä½ çš„æ¢¦æƒ³åˆè¿‘äº†ä¸€æ­¥ï¼Œå³æˆä¸ºä¸€åçŒæ€è¶…è‡ªç„¶ç”Ÿç‰©çš„ä¹‰åŠ¡è­¦å‘˜ã€‚ä½ æœ€å¥½å»å›´æ•é‚£äº›ç²—ç•¥çš„äººç‰©!\næ€»ç»“ åœ¨æœ¬ç« ä¸­ï¼Œä½ äº†è§£åˆ° Clojure å¼ºè°ƒå¯¹æŠ½è±¡çš„ç¼–ç¨‹ã€‚åºåˆ—æŠ½è±¡å¤„ç†çš„æ˜¯å¯¹åºåˆ—ä¸­å„ä¸ªå…ƒç´ çš„æ“ä½œï¼Œè€Œ seq å‡½æ•°é€šå¸¸å°†å…¶å‚æ•°è½¬æ¢ä¸º seqï¼Œå¹¶è¿”å›ä¸€ä¸ªæƒ°æ€§çš„ seqã€‚æƒ°æ€§æ±‚å€¼é€šè¿‡å°†è®¡ç®—æ¨è¿Ÿåˆ°éœ€è¦æ—¶å†è¿›è¡Œï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ä½ æ‰€å­¦åˆ°çš„å¦ä¸€ä¸ªæŠ½è±¡ï¼Œå³é›†åˆæŠ½è±¡ï¼Œå¤„ç†çš„æ˜¯æ•´ä¸ªæ•°æ®ç»“æ„ã€‚æœ€åï¼Œä½ å­¦åˆ°çš„æœ€é‡è¦çš„ä¸œè¥¿æ˜¯ï¼Œä½ ä¸åº”è¯¥ç›¸ä¿¡é‚£äº›åœ¨é˜³å…‰ä¸‹é—ªå…‰çš„äººã€‚\nç»ƒä¹  ä½ ç°åœ¨æ‹¥æœ‰çš„å¸è¡€é¬¼åˆ†æç¨‹åºå·²ç»é¢†å…ˆäºå¸‚åœºä¸Šçš„ä»»ä½•å…¶ä»–ç¨‹åºå‡ åå¹´äº†ã€‚ä½†ä½ æ€æ ·æ‰èƒ½ä½¿å®ƒå˜å¾—æ›´å¥½å‘¢ï¼Ÿæˆ‘å»ºè®®å°è¯•ä»¥ä¸‹å‡ ç‚¹ã€‚\n æŠŠä½ çš„é—ªå…‰è¿‡æ»¤å™¨çš„ç»“æœå˜æˆä¸€ä¸ªåå­—çš„åˆ—è¡¨ã€‚ å†™ä¸€ä¸ªå‡½æ•°ï¼Œappendï¼Œå®ƒå°†æŠŠä¸€ä¸ªæ–°çš„å«Œç–‘äººè¿½åŠ åˆ°ä½ çš„å«Œç–‘äººåˆ—è¡¨ä¸­ã€‚ å†™ä¸€ä¸ªå‡½æ•°ï¼Œvalidateï¼Œå®ƒå°†åœ¨ä½ appendæ—¶æ£€æŸ¥:nameå’Œ:glitter-indexæ˜¯å¦å­˜åœ¨ã€‚validateå‡½æ•°åº”è¯¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªç±»ä¼¼äºconversionsçš„éªŒè¯å‡½æ•°çš„å…³é”®è¯ Mapï¼Œä»¥åŠè¦éªŒè¯çš„è®°å½•ã€‚ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä½ çš„ Map åˆ—è¡¨è½¬æ¢ä¸º CSV å­—ç¬¦ä¸²ã€‚ä½ éœ€è¦ä½¿ç”¨clojure.string/joinå‡½æ•°ã€‚  ç¥ä½ å¥½è¿ï¼ŒMcFishwich!\n","permalink":"https://zhenfeng-zhu.github.io/post/chapter4/","summary":"æ ¸å¿ƒå‡½æ•°çš„æ·±å…¥ç ”ç©¶ å¦‚æœä½ åƒæˆ‘ä¸€æ ·æ˜¯ç„¦è™‘çš„ã€ä»¥é’å°‘å¹´ä¸ºä¸­å¿ƒçš„å‡†è‚¥çš‚å‰§*ã€Šå¸è¡€é¬¼æ—¥è®°ã€‹*çš„è¶…çº§ç²‰ä¸ï¼Œä½ ä¸€å®šè®°å¾—ä¸»è§’åŸƒç³å¨œå¼€å§‹è´¨ç–‘å¥¹è‹ç™½çš„ã€ç¥ç§˜çš„æš—æ‹è€…çš„è¡Œä¸ºçš„é‚£ä¸€é›†ã€‚\u0026ldquo;ä¸ºä»€ä¹ˆå½“æˆ‘çš„è†ç›–è¢«åˆ®ä¼¤æ—¶ï¼Œä»–ç«‹åˆ»æ¶ˆå¤±å¾—æ— å½±æ— è¸ªï¼Ÿ\u0026ldquo;å’Œ \u0026ldquo;ä¸ºä»€ä¹ˆå½“æˆ‘çš„æ‰‹æŒ‡è¢«åˆ’ç ´æ—¶ï¼Œä»–çš„è„¸å˜æˆäº†ä¸€ä¸ªæ€ªå¼‚çš„æ­»äº¡é¢å…·ï¼Ÿ\u0026ldquo;ç­‰ç­‰ã€‚\nå¦‚æœä½ å·²ç»å¼€å§‹æŠŠç© Clojure çš„æ ¸å¿ƒå‡½æ•°ï¼Œä½ å¯èƒ½ä¹Ÿä¼šé—®è‡ªå·±ç±»ä¼¼çš„é—®é¢˜ã€‚\u0026ldquo;ä¸ºä»€ä¹ˆmapä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œè€Œæˆ‘ç»™å®ƒçš„æ˜¯ä¸€ä¸ª Vectorï¼Ÿ\u0026ldquo;å’Œ \u0026ldquo;ä¸ºä»€ä¹ˆreduceä¼šæŠŠæˆ‘çš„ map å½“æˆä¸€ä¸ª Vectorï¼Ÿ\u0026ldquo;ç­‰ç­‰ã€‚(ä¸è¿‡ï¼Œæœ‰äº† Clojureï¼Œä½ è‡³å°‘å¯ä»¥å…äºæ€è€ƒä½œä¸ºä¸€ä¸ª 17 å²å­©å­çš„æ·±åˆ»çš„å­˜åœ¨ææƒ§ï¼Œç›´åˆ°æ°¸è¿œï¼‰ã€‚\nåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£åˆ° Clojure çš„æ·±é‚ƒã€é»‘æš—ã€å—œè¡€ã€è¶…è‡ªç„¶çš„coughï¼Œæˆ‘çš„æ„æ€æ˜¯ï¼Œåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£åˆ° Clojure çš„æŠ½è±¡çš„åŸºæœ¬æ¦‚å¿µä»¥åŠåºåˆ—å’Œé›†åˆçš„æŠ½è±¡ã€‚ä½ è¿˜ä¼šäº†è§£åˆ°ç–¯ç‹‚çš„åºåˆ—ã€‚è¿™å°†ä¸ºä½ æä¾›æ‰€éœ€çš„åŸºç¡€ï¼Œä½¿ä½ èƒ½å¤Ÿé˜…è¯»ä½ ä»¥å‰æ²¡æœ‰ä½¿ç”¨è¿‡çš„å‡½æ•°çš„æ–‡æ¡£ï¼Œå¹¶ç†è§£å½“ä½ è¯•ç€ä½¿ç”¨å®ƒä»¬æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚\næ¥ä¸‹æ¥ï¼Œä½ å°†è·å¾—æ›´å¤šå…³äºä½ æœ€éœ€è¦ä½¿ç”¨çš„å‡½æ•°çš„ç»éªŒã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ç”¨å‡½æ•°mapã€reduceã€intoã€conjã€concatã€someã€filterã€takeã€dropã€sortã€sort-byå’Œidentityæ¥å¤„ç†åˆ—è¡¨ã€Vectorã€Map å’Œ Setã€‚ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ç”¨applyã€partialå’Œcomplementåˆ›å»ºæ–°çš„å‡½æ•°ã€‚æ‰€æœ‰è¿™äº›ä¿¡æ¯å°†å¸®åŠ©ä½ äº†è§£å¦‚ä½•ä»¥ Clojure çš„æ–¹å¼åšäº‹ï¼Œå®ƒå°†ä¸ºä½ ç¼–å†™è‡ªå·±çš„ä»£ç ä»¥åŠé˜…è¯»å’Œå­¦ä¹ ä»–äººçš„é¡¹ç›®æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚\næœ€åï¼Œä½ å°†å­¦ä¼šå¦‚ä½•è§£æå’ŒæŸ¥è¯¢ CSV ä¸­çš„å¸è¡€é¬¼æ•°æ®ï¼Œä»¥ç¡®å®šåœ¨ä½ çš„å®¶ä¹¡æ½œä¼ç€å“ªäº›è¯ºæ–¯è´¹æ‹‰å›¾ã€‚\nä»ç¼–ç¨‹åˆ°æŠ½è±¡ ä¸ºäº†ç†è§£ä»ç¼–ç¨‹åˆ°æŠ½è±¡ï¼Œè®©æˆ‘ä»¬æŠŠ Clojure ä¸ä¸€ç§æ²¡æœ‰è€ƒè™‘åˆ°è¿™ä¸ªåŸåˆ™çš„è¯­è¨€è¿›è¡Œæ¯”è¾ƒã€‚Emacs Lispï¼ˆelispï¼‰ã€‚åœ¨ elisp ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨mapcarå‡½æ•°æ¥å¯¼å‡ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œè¿™ä¸ä½ åœ¨ Clojure ä¸­ä½¿ç”¨mapçš„æ–¹å¼ç›¸ä¼¼ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³åœ¨ elisp ä¸­ Map ä¸€ä¸ªå“ˆå¸Œ Mapï¼ˆç±»ä¼¼äº Clojure çš„ map æ•°æ®ç»“æ„ï¼‰ï¼Œä½ éœ€è¦ä½¿ç”¨maphashå‡½æ•°ï¼Œè€Œåœ¨ Clojure ä¸­ä½ ä»ç„¶å¯ä»¥åªä½¿ç”¨mapã€‚æ¢å¥è¯è¯´ï¼Œelisp ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„ã€é’ˆå¯¹æ•°æ®ç»“æ„çš„å‡½æ•°æ¥å®ç°mapæ“ä½œï¼Œè€Œ Clojure åªä½¿ç”¨ä¸€ä¸ªã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ Clojure ä¸­å¯¹ map è°ƒç”¨reduceï¼Œè€Œ elisp å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå‡½æ•°æ¥å‡å°‘æ•£åˆ— mapã€‚\nåŸå› æ˜¯ Clojure åœ¨åºåˆ—æŠ½è±¡æ–¹é¢å®šä¹‰äº†mapå’Œreduceå‡½æ•°ï¼Œè€Œä¸æ˜¯åœ¨å…·ä½“çš„æ•°æ®ç»“æ„æ–¹é¢ã€‚åªè¦æ•°æ®ç»“æ„å“åº”æ ¸å¿ƒåºåˆ—æ“ä½œï¼ˆå‡½æ•°firstã€restå’Œconsï¼Œæˆ‘ä»¬ç¨åä¼šä»”ç»†ç ”ç©¶ï¼‰ï¼Œå®ƒå°±èƒ½ä¸mapã€reduceä»¥åŠå…¶ä»–å¤§é‡çš„åºåˆ—å‡½æ•°å…è´¹å·¥ä½œã€‚è¿™å°±æ˜¯ Clojurists æ‰€è¯´çš„æŠ½è±¡ç¼–ç¨‹ï¼Œä¹Ÿæ˜¯ Clojure å“²å­¦çš„ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ã€‚\næˆ‘è®¤ä¸ºæŠ½è±¡æ˜¯æ“ä½œçš„å‘½åé›†åˆã€‚å¦‚æœä½ èƒ½åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œä¸€ä¸ªæŠ½è±¡çš„æ‰€æœ‰æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯è¯¥æŠ½è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚æˆ‘ç”šè‡³åœ¨ç¼–ç¨‹ä¹‹å¤–ä¹Ÿæ˜¯è¿™æ ·æƒ³çš„ã€‚ä¾‹å¦‚ï¼Œç”µæ± æŠ½è±¡åŒ…æ‹¬ \u0026ldquo;å°†å¯¼ç”µä»‹è´¨è¿æ¥åˆ°å…¶é˜³æå’Œé˜´æ \u0026ldquo;çš„æ“ä½œï¼Œè€Œè¯¥æ“ä½œçš„è¾“å‡ºæ˜¯ç”µæµã€‚ç”µæ± æ˜¯ç”¨é”‚è¿˜æ˜¯ç”¨åœŸè±†åšçš„å¹¶ä¸é‡è¦ã€‚åªè¦å®ƒå¯¹å®šä¹‰ç”µæ± çš„ä¸€ç³»åˆ—æ“ä½œåšå‡ºååº”ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç”µæ± ã€‚\nåŒæ ·åœ°ï¼Œmapå¹¶ä¸å…³å¿ƒåˆ—è¡¨ã€Vectorã€Set å’Œ Map æ˜¯å¦‚ä½•å®ç°çš„ã€‚å®ƒåªå…³å¿ƒå®ƒæ˜¯å¦èƒ½å¯¹å®ƒä»¬è¿›è¡Œåºåˆ—æ“ä½œã€‚è®©æˆ‘ä»¬çœ‹çœ‹mapæ˜¯å¦‚ä½•åœ¨åºåˆ—æŠ½è±¡ä¸­å®šä¹‰çš„ï¼Œè¿™æ ·ä½ å°±èƒ½ç†è§£ä¸€èˆ¬çš„æŠ½è±¡ç¼–ç¨‹ã€‚","title":"Chapter4 æ·±å…¥ç ”ç©¶æ ¸å¿ƒå‡½æ•°"},{"content":"åšäº‹æƒ…ï¼šClojure é€Ÿæˆç­ æ˜¯æ—¶å€™å­¦ä¹ å¦‚ä½•ç”¨ Clojure çœŸæ­£åœ°åšäº‹äº†! è¯¥æ­»çš„! å°½ç®¡ä½ æ— ç–‘å·²ç»å¬è¯´è¿‡ Clojure ä»¤äººæ•¬ç•çš„å¹¶å‘æ”¯æŒå’Œå…¶ä»–äº†ä¸èµ·çš„åŠŸèƒ½ï¼Œä½† Clojure æœ€çªå‡ºçš„ç‰¹ç‚¹æ˜¯å®ƒæ˜¯ä¸€ç§ Lisp è¯­è¨€ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†æ¢ç´¢æ„æˆè¿™ä¸ª Lisp æ ¸å¿ƒçš„å…ƒç´ ï¼šè¯­æ³•ã€å‡½æ•°å’Œæ•°æ®ã€‚å®ƒä»¬å°†å…±åŒä¸ºä½ åœ¨ Clojure ä¸­è¡¨ç¤ºå’Œè§£å†³é—®é¢˜æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚\nåœ¨æ‰“ä¸‹è¿™ä¸ªåŸºç¡€ä¹‹åï¼Œä½ å°†èƒ½å¤Ÿç¼–å†™ä¸€äº›è¶…çº§é‡è¦çš„ä»£ç ã€‚åœ¨æœ€åä¸€èŠ‚ä¸­ï¼Œä½ å°†é€šè¿‡åˆ›å»ºä¸€ä¸ªéœæ¯”ç‰¹äººçš„æ¨¡å‹ï¼Œå¹¶ç¼–å†™ä¸€ä¸ªå‡½æ•°å°†å…¶æ‰“åœ¨ä¸€ä¸ªéšæœºçš„ä½ç½®ä¸Šï¼Œä»è€Œå°†ä¸€åˆ‡è”ç³»èµ·æ¥ã€‚è¶…çº§! é‡è¦çš„!\nå½“ä½ é˜…è¯»æœ¬ç« æ—¶ï¼Œæˆ‘å»ºè®®ä½ åœ¨ REPL ä¸­è¾“å…¥ä¾‹å­å¹¶è¿è¡Œå®ƒä»¬ã€‚ç”¨ä¸€ç§æ–°çš„è¯­è¨€ç¼–ç¨‹æ˜¯ä¸€ç§æŠ€èƒ½ï¼Œå°±åƒçº¦å¾·å°”èˆæˆ–èŠ±æ ·æ¸¸æ³³ä¸€æ ·ï¼Œä½ å¿…é¡»é€šè¿‡ç»ƒä¹ æ¥å­¦ä¹ å®ƒã€‚ è¯·ç•™æ„å®ƒ!\nè¯­æ³• Clojure çš„è¯­æ³•å¾ˆç®€å•ã€‚åƒæ‰€æœ‰çš„ Lisp ä¸€æ ·ï¼Œå®ƒé‡‡ç”¨äº†ç»Ÿä¸€çš„ç»“æ„ã€å°‘é‡çš„ç‰¹æ®Šè¿ç®—ç¬¦ï¼Œä»¥åŠä»è—åœ¨éº»çœç†å·¥å­¦é™¢ä¸‹é¢çš„å°æ‹¬å·çŸ¿äº•ä¸­ä¸æ–­æä¾›çš„å°æ‹¬å·ï¼ŒLisp å°±æ˜¯åœ¨é‚£é‡Œè¯ç”Ÿçš„ã€‚\nForm æ‰€æœ‰çš„ Clojure ä»£ç éƒ½æ˜¯ä»¥ç»Ÿä¸€ç»“æ„ç¼–å†™çš„ã€‚Clojure å¯ä»¥è¯†åˆ«ä¸¤ç§ç»“æ„ã€‚\n æ•°æ®ç»“æ„çš„å­—é¢è¡¨ç¤ºï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€Map å’Œ Vectorï¼‰ æ“ä½œ  æˆ‘ä»¬ä½¿ç”¨æœ¯è¯­formæ¥æŒ‡ä»£æœ‰æ•ˆçš„ä»£ç ã€‚æˆ‘æœ‰æ—¶ä¹Ÿä¼šç”¨è¡¨è¾¾å¼æ¥æŒ‡ä»£ Clojure Formã€‚ä½†ä¸è¦å¤ªçº ç»“äºæœ¯è¯­ã€‚Clojure æ±‚å€¼æ¯ä¸€ä¸ª Formï¼Œä»¥äº§ç”Ÿä¸€ä¸ªå€¼ã€‚è¿™äº›å­—é¢æ„ä¹‰çš„è¡¨è¾¾éƒ½æ˜¯æœ‰æ•ˆçš„ Formã€‚\n1 \u0026#34;a string\u0026#34; [\u0026#34;a\u0026#34; \u0026#34;vector\u0026#34; \u0026#34;of\u0026#34; \u0026#34;strings\u0026#34;] å½“ç„¶ï¼Œä½ çš„ä»£ç å¾ˆå°‘åŒ…å«è‡ªç”±æµ®åŠ¨çš„å­—ç¬¦ï¼Œå› ä¸ºå®ƒä»¬æœ¬èº«å®é™…ä¸Šå¹¶ä¸åšä»€ä¹ˆã€‚ç›¸åï¼Œä½ ä¼šåœ¨æ“ä½œä¸­ä½¿ç”¨å­—é¢ç¬¦å·ã€‚æ“ä½œæ˜¯ä½ åšäº‹æƒ…çš„æ–¹å¼ã€‚æ‰€æœ‰æ“ä½œçš„ Form éƒ½æ˜¯ï¼šå¼€æ‹¬å·ï¼Œæ“ä½œç¬¦ï¼Œæ“ä½œæ•°ï¼Œé—­æ‹¬å·ã€‚\n(operator operand1 operand2 ... operandn) è¯·æ³¨æ„ï¼Œè¿™é‡Œæ²¡æœ‰é€—å·ã€‚Clojure ä½¿ç”¨ç©ºæ ¼æ¥åˆ†éš”æ“ä½œæ•°ï¼Œå®ƒå°†é€—å·è§†ä¸ºç©ºæ ¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›æ“ä½œçš„ä¾‹å­ã€‚\n(+ 1 2 3) ; =\u0026gt; 6 (str \u0026#34;It was the panda \u0026#34; \u0026#34;in the library \u0026#34; \u0026#34;with a dust buster\u0026#34;) ; =\u0026gt; \u0026#34;It was the panda in the library with a dust buster\u0026#34; åœ¨ç¬¬ä¸€ä¸ªæ“ä½œä¸­ï¼Œè¿ç®—ç¬¦+å°†æ“ä½œæ•°1ã€2å’Œ3ç›¸åŠ ã€‚åœ¨ç¬¬äºŒä¸ªæ“ä½œä¸­ï¼Œè¿ç®—ç¬¦strå°†ä¸‰ä¸ªå­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸¤ç§ Form éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¸æ˜¯ Form çš„ä¸œè¥¿ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä¸€ä¸ªç»“æŸçš„å°æ‹¬å·ã€‚\n(+ Clojure çš„ç»“æ„ç»Ÿä¸€æ€§å¯èƒ½ä¸ä½ æ‰€ä¹ æƒ¯çš„ä¸åŒã€‚åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œä¸åŒçš„æ“ä½œå¯èƒ½æœ‰ä¸åŒçš„ç»“æ„ï¼Œè¿™å–å†³äºæ“ä½œç¬¦å’Œæ“ä½œæ•°ã€‚ä¾‹å¦‚ï¼ŒJavaScript é‡‡ç”¨çš„æ˜¯ ä¸­ç¼€ç¬¦å·ã€ç‚¹è¿ç®—ç¬¦å’Œå°æ‹¬å·çš„å¤§æ‚çƒ©ã€‚\n1 + 2 + 3 \u0026#34;It was the panda \u0026#34;.concat(\u0026#34;in the library \u0026#34;, \u0026#34;with a dust buster\u0026#34;) ç›¸æ¯”ä¹‹ä¸‹ï¼ŒClojure çš„ç»“æ„æ˜¯éå¸¸ç®€å•å’Œä¸€è‡´çš„ã€‚æ— è®ºä½ ä½¿ç”¨å“ªç§è¿ç®—ç¬¦ï¼Œæˆ–å¯¹å“ªç§æ•°æ®è¿›è¡Œæ“ä½œï¼Œå…¶ç»“æ„éƒ½æ˜¯ä¸€æ ·çš„ã€‚\næ§åˆ¶æµ è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‰ä¸ªåŸºæœ¬çš„æ§åˆ¶æµæ“ä½œç¬¦ã€‚if, do, å’Œwhenã€‚åœ¨æœ¬ä¹¦ä¸­ï¼Œä½ ä¼šé‡åˆ°æ›´å¤šçš„æ“ä½œï¼Œä½†è¿™äº›æ“ä½œå¯ä»¥è®©ä½ å¼€å§‹ã€‚\nif è¿™æ˜¯ä¸€ä¸ª if è¡¨è¾¾å¼çš„ä¸€èˆ¬ç»“æ„ã€‚\n(if boolean-form then-form optional-else-form) å¸ƒå°” Form åªæ˜¯ä¸€ä¸ªæ±‚å€¼ä¸ºçœŸæˆ–å‡çš„ Formã€‚ä½ ä¼šåœ¨ä¸‹ä¸€èŠ‚ä¸­äº†è§£åˆ°é€»è¾‘çœŸå’Œé€»è¾‘å‡ã€‚ä¸‹é¢æ˜¯å‡ ä¸ªifçš„ä¾‹å­ã€‚\n(if true \u0026#34;By Zeus\u0026#39;s hammer!\u0026#34; \u0026#34;By Aquaman\u0026#39;s trident!\u0026#34;) ; =\u0026gt; \u0026#34;By Zeus\u0026#39;s hammer!\u0026#34; (if false \u0026#34;By Zeus\u0026#39;s hammer!\u0026#34; \u0026#34;By Aquaman\u0026#39;s trident!\u0026#34;) ; =\u0026gt; \u0026#34;By Aquaman\u0026#39;s trident!\u0026#34; ç¬¬ä¸€ä¸ªä¾‹å­è¿”å› \u0026ldquo;By Zeus\u0026rsquo;s hammer!\u0026quot;ï¼Œå› ä¸ºå…¶å¸ƒå°” Form æ±‚å€¼ä¸º trueï¼Œæ˜¯ä¸€ä¸ªçœŸå€¼ï¼›ç¬¬äºŒä¸ªä¾‹å­è¿”å› \u0026ldquo;By Aquaman\u0026rsquo;s trident!\u0026quot;ï¼Œå› ä¸ºå…¶å¸ƒå°” Form \u0026ldquo;false\u0026rdquo;ï¼Œæ±‚å€¼ä¸ºä¸€ä¸ªå‡å€¼ã€‚\nä½ ä¹Ÿå¯ä»¥çœç•¥elseåˆ†æ”¯ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œå¹¶ä¸”å¸ƒå°”è¡¨è¾¾å¼æ˜¯å‡çš„ï¼ŒClojure ä¼šè¿”å›nilï¼Œå°±åƒè¿™æ ·ã€‚\n(if false \u0026#34;By Odin\u0026#39;s Elbow!\u0026#34;) ; =\u0026gt; nil æ³¨æ„ifä½¿ç”¨æ“ä½œæ•°ä½ç½®å°†æ“ä½œæ•°ä¸thenå’Œelseåˆ†æ”¯è”ç³»èµ·æ¥ï¼šç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯thenåˆ†æ”¯ï¼Œç¬¬äºŒä¸ªæ“ä½œæ•°æ˜¯ï¼ˆå¯é€‰ï¼‰elseåˆ†æ”¯ã€‚å› æ­¤ï¼Œæ¯ä¸ªåˆ†æ”¯åªèƒ½æœ‰ä¸€ç§ Formã€‚è¿™ä¸å¤§å¤šæ•°è¯­è¨€ä¸åŒã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ Ruby ä¸­è¿™æ ·å†™ã€‚\nif true doer.do_thing(1) doer.do_thing(2) else other_doer.do_thing(1) other_doer.do_thing(2) end ä¸ºäº†ç»•è¿‡è¿™ä¸ªæ˜æ˜¾çš„é™åˆ¶ï¼Œä½ å¯ä»¥ä½¿ç”¨doæ“ä½œç¬¦ã€‚\ndo doæ“ä½œç¬¦å¯ä»¥è®©ä½ åœ¨æ‹¬å·ä¸­åŒ…è£¹èµ·å¤šä¸ª Formï¼Œå¹¶è¿è¡Œå…¶ä¸­çš„æ¯ä¸€ä¸ªã€‚åœ¨ä½ çš„ REPL ä¸­å°è¯•ä»¥ä¸‹æ“ä½œã€‚\n(if true (do (println \u0026#34;Success!\u0026#34;) \u0026#34;By Zeus\u0026#39;s hammer!\u0026#34;) (do (println \u0026#34;Failure!\u0026#34;) \u0026#34;By Aquaman\u0026#39;s trident!\u0026#34;)) ; =\u0026gt; Success! ; =\u0026gt; \u0026#34;By Zeus\u0026#39;s hammer!\u0026#34; è¿™ä¸ªæ“ä½œç¬¦è®©ä½ åœ¨ifè¡¨è¾¾å¼çš„æ¯ä¸ªåˆ†æ”¯ä¸­åšå¤šä»¶äº‹æƒ…ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šå‘ç”Ÿä¸¤ä»¶äº‹ã€‚Success!è¢«æ‰“å°åœ¨ REPL ä¸­ï¼ŒBy Zeus's hammer!è¢«ä½œä¸ºæ•´ä¸ªifè¡¨è¾¾å¼çš„å€¼è¿”å›ã€‚\nwhen whenæ“ä½œç¬¦å°±åƒifå’Œdoçš„ç»„åˆï¼Œä½†æ²¡æœ‰elseåˆ†æ”¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n(when true (println \u0026#34;Success!\u0026#34;) \u0026#34;abra cadabra\u0026#34;) ; =\u0026gt; Success! ; =\u0026gt; \u0026#34;abra cadabra\u0026#34; å¦‚æœä½ æƒ³åœ¨æŸä¸ªæ¡ä»¶ä¸ºçœŸæ—¶åšå¤šä»¶äº‹ï¼Œè€Œä½ æ€»æ˜¯æƒ³åœ¨æ¡ä»¶ä¸ºå‡æ—¶è¿”å›nilï¼Œè¯·ä½¿ç”¨whenã€‚\nnil, true, false, Truthiness, Equality, and Boolean Expressions Clojure æœ‰trueå’Œfalseã€‚nilåœ¨ Clojure ä¸­ç”¨æ¥è¡¨ç¤ºæ²¡æœ‰å€¼ã€‚ä½ å¯ä»¥ç”¨nil?å‡½æ•°æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºnilã€‚\n(nil? 1) ; =\u0026gt; false (nil? nil) ; =\u0026gt; true nilå’Œfalseéƒ½æ˜¯ç”¨æ¥è¡¨ç¤ºé€»è¾‘ä¸Šçš„è™šå‡æ€§ï¼Œè€Œæ‰€æœ‰å…¶ä»–çš„å€¼éƒ½æ˜¯é€»è¾‘ä¸Šçš„çœŸå®æ€§ã€‚Truthyå’ŒfalseyæŒ‡çš„æ˜¯åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸­å¦‚ä½•å¤„ç†ä¸€ä¸ªå€¼ï¼Œæ¯”å¦‚ä¼ é€’ç»™ifçš„ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼ã€‚\n(if \u0026#34;bears eat beets\u0026#34; \u0026#34;bears beets Battlestar Galactica\u0026#34;) ; =\u0026gt; \u0026#34;bears beets Battlestar Galactica\u0026#34; (if nil \u0026#34;This won\u0026#39;t be the result because nil is falsey\u0026#34; \u0026#34;nil is falsey\u0026#34;) ; =\u0026gt; \u0026#34;nil is falsey\u0026#34; åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œå­—ç¬¦ä¸²bears eat beetsè¢«è®¤ä¸ºæ˜¯trueï¼Œæ‰€ä»¥ifè¡¨è¾¾å¼æ±‚å€¼ä¸º bears beets Battlestar Galactica`ã€‚ç¬¬äºŒä¸ªä¾‹å­æ˜¾ç¤ºä¸€ä¸ª nil æ˜¯å‡çš„ã€‚\nClojure çš„ç­‰äºè¿ç®—ç¬¦æ˜¯=ã€‚\n(= 1 1) ; =\u0026gt; true (= nil nil) ; =\u0026gt; true (= 1 2) ; =\u0026gt; false å…¶ä»–ä¸€äº›è¯­è¨€è¦æ±‚ä½ åœ¨æ¯”è¾ƒä¸åŒç±»å‹çš„å€¼æ—¶ä½¿ç”¨ä¸åŒçš„è¿ç®—ç¬¦ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¸å¾—ä¸ä½¿ç”¨æŸç§ä¸“é—¨ä¸ºå­—ç¬¦ä¸²åˆ¶ä½œçš„ç‰¹æ®Šå­—ç¬¦ä¸²ç­‰äºè¿ç®—ç¬¦ã€‚ä½†åœ¨ä½¿ç”¨ Clojure çš„å†…ç½®æ•°æ®ç»“æ„æ—¶ï¼Œä½ ä¸éœ€è¦åƒè¿™æ ·å¥‡æ€ªæˆ–ç¹ççš„ä¸œè¥¿æ¥æµ‹è¯•ç­‰äºã€‚\nClojure ä½¿ç”¨å¸ƒå°”è¿ç®—ç¬¦orå’Œandã€‚orè¿”å›ç¬¬ä¸€ä¸ªçœŸå€¼æˆ–æœ€åä¸€ä¸ªå€¼ã€‚andè¿”å›ç¬¬ä¸€ä¸ª false çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰ false çš„å€¼ï¼Œåˆ™è¿”å›æœ€åä¸€ä¸ª true çš„å€¼ã€‚è®©æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹orã€‚\n(or false nil :large_I_mean_venti :why_cant_I_just_say_large) ; =\u0026gt; :large_I_mean_venti (or (= 0 1) (= \u0026#34;yes\u0026#34; \u0026#34;no\u0026#34;)) ; =\u0026gt; false (or nil) ; =\u0026gt; nil åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œè¿”å›å€¼æ˜¯:large_I_mean_ventiï¼Œå› ä¸ºå®ƒæ˜¯ç¬¬ä¸€ä¸ªçœŸå€¼ã€‚ç¬¬äºŒä¸ªä¾‹å­æ²¡æœ‰çœŸå€¼ï¼Œæ‰€ä»¥orè¿”å›æœ€åä¸€ä¸ªå€¼ï¼Œå³falseã€‚åœ¨æœ€åä¸€ä¸ªä¾‹å­ä¸­ï¼ŒåŒæ ·æ²¡æœ‰çœŸå€¼å­˜åœ¨ï¼Œorè¿”å›æœ€åä¸€ä¸ªå€¼ï¼Œå³nilã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹andã€‚\n(and :free_wifi :hot_coffee) ; =\u0026gt; :hot_coffee (and :feelin_super_cool nil false) ; =\u0026gt; nil åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œandè¿”å›æœ€åä¸€ä¸ªçœŸå€¼ï¼Œ:hot_coffeeã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­, andè¿”å›nil, è¿™æ˜¯ç¬¬ä¸€ä¸ª false çš„å€¼.\nç”¨ def å‘½å åœ¨ Clojure ä¸­, ä½ å¯ä»¥ä½¿ç”¨defå°†ä¸€ä¸ªåå­—ä¸ä¸€ä¸ªå€¼ç»‘å®šèµ·æ¥:\n(def failed-protagonist-names [\u0026#34;Larry Potter\u0026#34; \u0026#34;Doreen the Explorer\u0026#34; \u0026#34;The Incredible Bulk\u0026#34;]) failed-protagonist-names ; =\u0026gt; [\u0026#34;Larry Potter\u0026#34; \u0026#34;Doreen the Explorer\u0026#34; \u0026#34;The Incredible Bulk\u0026#34;] åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ æŠŠåå­—failed-protagonist-namesç»‘å®šåˆ°ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå­—ç¬¦ä¸²çš„ Vectorï¼ˆä½ å°†åœ¨\u0026ldquo;Vector \u0026ldquo;ç¬¬ 45 é¡µä¸­äº†è§£ Vectorï¼‰ã€‚\nè¯·æ³¨æ„ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ \u0026ldquo;ç»‘å®š\u0026quot;ä¸€è¯ï¼Œè€Œåœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œä½ ä¼šè¯´ä½ æ˜¯åœ¨ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ã€‚é‚£äº›å…¶ä»–è¯­è¨€é€šå¸¸é¼“åŠ±ä½ å¯¹åŒä¸€ä¸ªå˜é‡è¿›è¡Œå¤šæ¬¡èµ‹å€¼ã€‚\nä¾‹å¦‚ï¼Œåœ¨ Ruby ä¸­ï¼Œä½ å¯ä»¥å¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œå¤šæ¬¡èµ‹å€¼ã€‚\nseverity = :mild error_message = \u0026#34;OH GOD! IT\u0026#39;S A DISASTER! WE\u0026#39;RE \u0026#34; if severity == :mild error_message = error_message + \u0026#34;MILDLY INCONVENIENCED!\u0026#34; else error_message = error_message + \u0026#34;DOOOOOOOMED!\u0026#34; end ä½ å¯èƒ½æƒ³åœ¨ Clojure ä¸­åšç±»ä¼¼çš„äº‹æƒ…ã€‚\n(def severity :mild) (def error-message \u0026#34;OH GOD! IT\u0026#39;S A DISASTER! WE\u0026#39;RE \u0026#34;) (if (= severity :mild) (def error-message (str error-message \u0026#34;MILDLY INCONVENIENCED!\u0026#34;)) (def error-message (str error-message \u0026#34;DOOOOOOOMED!\u0026#34;))) ç„¶è€Œï¼Œåƒè¿™æ ·æ”¹å˜ä¸åå­—ç›¸å…³çš„å€¼ä¼šä½¿ä½ æ›´éš¾ç†è§£ä½ çš„ç¨‹åºçš„è¡Œä¸ºï¼Œå› ä¸ºæ›´éš¾çŸ¥é“å“ªä¸ªå€¼æ˜¯ä¸åå­—ç›¸å…³çš„ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆè¿™ä¸ªå€¼å¯èƒ½å·²ç»æ”¹å˜äº†ã€‚Clojure æœ‰ä¸€å¥—å¤„ç†å˜åŒ–çš„å·¥å…·ï¼Œä½ ä¼šåœ¨ç¬¬ 10 ç« ä¸­äº†è§£åˆ°ã€‚éšç€ä½ å¯¹ Clojure çš„å­¦ä¹ ï¼Œä½ ä¼šå‘ç°ä½ å¾ˆå°‘éœ€è¦æ”¹å˜ä¸€ä¸ªåå­—/å€¼çš„å…³è”ã€‚ä¸‹é¢æ˜¯ä½ å†™å‰é¢ä»£ç çš„ä¸€ç§æ–¹å¼ã€‚\n(defn error-message [severity] (str \u0026#34;OH GOD! IT\u0026#39;S A DISASTER! WE\u0026#39;RE \u0026#34; (if (= severity :mild) \u0026#34;MILDLY INCONVENIENCED!\u0026#34; \u0026#34;DOOOOOOOMED!\u0026#34;))) (error-message :mild) ; =\u0026gt; \u0026#34;OH GOD! IT\u0026#39;S A DISASTER! WE\u0026#39;RE MILDLY INCONVENIENCED!\u0026#34; è¿™é‡Œï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ï¼Œerror-messageï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œseverityï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å†³å®šè¿”å›å“ªä¸ªå­—ç¬¦ä¸²ã€‚ç„¶åä½ ç”¨:mildä½œä¸ºä¸¥é‡ç¨‹åº¦æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ä½ å°†åœ¨\u0026ldquo;å‡½æ•° \u0026ldquo;ç¬¬ 48 é¡µä¸­å­¦ä¹ æ‰€æœ‰å…³äºåˆ›å»ºå‡½æ•°çš„çŸ¥è¯†ï¼›ä¸æ­¤åŒæ—¶ï¼Œä½ åº”è¯¥æŠŠdefå½“ä½œå®šä¹‰å¸¸é‡ã€‚åœ¨æ¥ä¸‹æ¥çš„å‡ ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•é€šè¿‡æ¥å—å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼æ¥å¤„ç†è¿™ä¸ªæ˜æ˜¾çš„é™åˆ¶ã€‚\næ•°æ®ç»“æ„ Clojure å¸¦æœ‰å°‘é‡çš„æ•°æ®ç»“æ„ï¼Œä½ åœ¨å¤§å¤šæ•°æ—¶å€™éƒ½ä¼šç”¨åˆ°ã€‚å¦‚æœä½ æ¥è‡ªé¢å‘å¯¹è±¡çš„èƒŒæ™¯ï¼Œä½ ä¼šæƒŠè®¶äºä½ å¯ä»¥ç”¨è¿™é‡Œä»‹ç»çš„çœ‹ä¼¼åŸºæœ¬çš„ç±»å‹åšå¾ˆå¤šäº‹æƒ…ã€‚\nClojure çš„æ‰€æœ‰æ•°æ®ç»“æ„éƒ½æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œè¿™æ„å‘³ç€ä½ ä¸èƒ½åœ¨åŸåœ°æ”¹å˜å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œåœ¨ Ruby ä¸­ï¼Œä½ å¯ä»¥åšä»¥ä¸‹äº‹æƒ…æ¥é‡æ–°åˆ†é…ç´¢å¼•ä¸º 0 çš„å¤±è´¥ä¸»è§’çš„åå­—ã€‚\nfailed_protagonist_names = [ \u0026#34;Larry Potter\u0026#34;, \u0026#34;Doreen the Explorer\u0026#34;, \u0026#34;The Incredible Bulk\u0026#34; ] failed_protagonist_names[0] = \u0026#34;Gary Potter\u0026#34; failed_protagonist_names # =\u0026gt; [ # \u0026#34;Gary Potter\u0026#34;, # \u0026#34;Doreen the Explorer\u0026#34;, # \u0026#34;The Incredible Bulk\u0026#34; # ] Clojure æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„ä¸œè¥¿ã€‚ä½ ä¼šåœ¨ç¬¬ 10 ç« ä¸­äº†è§£åˆ°æ›´å¤šå…³äº Clojure è¿™æ ·å®ç°çš„åŸå› ï¼Œä½†ç°åœ¨åªå­¦ä¹ å¦‚ä½•åšäº‹æƒ…ï¼Œè€Œä¸è€ƒè™‘æ‰€æœ‰çš„å“²å­¦é—®é¢˜ï¼Œè¿™å¾ˆæœ‰è¶£ã€‚ä¸å¤šè¯´äº†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ Clojure ä¸­çš„æ•°å­—ã€‚\nNumber Clojure æœ‰ç›¸å½“å¤æ‚çš„ Number æ”¯æŒã€‚æˆ‘ä¸ä¼šèŠ±å¤ªå¤šæ—¶é—´çº ç¼ äºæ— èŠçš„æŠ€æœ¯ç»†èŠ‚ï¼ˆæ¯”å¦‚å¼ºåˆ¶å’Œä¼ æŸ“ï¼‰ï¼Œå› ä¸ºé‚£ä¼šå¦¨ç¢åšäº‹æƒ…ã€‚å¦‚æœä½ å¯¹è¿™äº›æ¯ç‡¥çš„ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œè¯·æŸ¥çœ‹*http://clojure.org/data_structures#Data%20Structures-Numbers*çš„æ–‡æ¡£ã€‚å¯ä»¥è¯´ï¼ŒClojure ä¼šå¾ˆé«˜å…´åœ°å¤„ç†ä½ æ‰”ç»™å®ƒçš„æ‰€æœ‰ä¸œè¥¿ã€‚\nåœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ•´æ•°å’Œæµ®ç‚¹æ•°ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨åˆ†æ•°ï¼ŒClojure å¯ä»¥ç›´æ¥è¡¨ç¤ºè¿™äº›åˆ†æ•°ã€‚ä¸‹é¢åˆ†åˆ«æ˜¯ä¸€ä¸ªæ•´æ•°ã€ä¸€ä¸ªæµ®ç‚¹æ•°å’Œä¸€ä¸ªåˆ†æ•°ã€‚\n93 1.2 1/5 å­—ç¬¦ä¸² å­—ç¬¦ä¸²ä»£è¡¨æ–‡æœ¬ã€‚è¿™ä¸ªåå­—æ¥è‡ªäºå¤ä»£è…“å°¼åŸºäººï¼Œä»–ä»¬åœ¨ä¸€æ¬¡æ¶‰åŠçº±çº¿çš„äº‹æ•…åï¼Œæœ‰ä¸€å¤©å‘æ˜äº†å­—æ¯è¡¨ã€‚ä¸‹é¢æ˜¯ä¸€äº›å­—ç¬¦ä¸²å­—é¢çš„ä¾‹å­ã€‚\n\u0026#34;Lord Voldemort\u0026#34; \u0026#34;\\\u0026#34;He who must not be named\\\u0026#34;\u0026#34; \u0026#34;\\\u0026#34;Great cow of Moscow!\\\u0026#34; - Hermes Conrad\u0026#34; æ³¨æ„ï¼ŒClojure åªå…è®¸ç”¨åŒå¼•å·æ¥åˆ’åˆ†å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œ\u0026lsquo;Lord Voldemort\u0026rsquo; å°±ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å­—ç¬¦ä¸²ã€‚è¿˜è¦æ³¨æ„ï¼ŒClojure æ²¡æœ‰å­—ç¬¦ä¸²æ’å€¼ã€‚å®ƒåªå…è®¸é€šè¿‡strå‡½æ•°è¿›è¡Œæ‹¼æ¥ã€‚\n(def name \u0026#34;Chewbacca\u0026#34;) (str \u0026#34;\\\u0026#34;Uggllglglglglglll\\\u0026#34; - \u0026#34; name) ; =\u0026gt; \u0026#34;Uggllglglglglglll\u0026#34; - Chewbacca Map Map ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„å­—å…¸æˆ–å“ˆå¸Œå€¼ã€‚å®ƒä»¬æ˜¯ä¸€ç§å°†ä¸€äº›å€¼ä¸å¦ä¸€äº›å€¼è”ç³»èµ·æ¥çš„æ–¹å¼ã€‚Clojure ä¸­çš„ä¸¤ç§ Map æ˜¯å“ˆå¸Œ Map å’Œæ’åº Mapã€‚æˆ‘å°†åªä»‹ç»æ›´åŸºæœ¬çš„å“ˆå¸Œ Mapã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ Map å­—é¢çš„ä¸€äº›ä¾‹å­ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç©º Mapã€‚\n{} åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ:first-nameå’Œ:last-nameæ˜¯å…³é”®å­—ï¼ˆæˆ‘å°†åœ¨ä¸‹ä¸€èŠ‚ä»‹ç»è¿™äº›ï¼‰ã€‚\n{:first-name \u0026#34;Charlie\u0026#34; :last-name \u0026#34;McFishwich\u0026#34;} è¿™é‡Œæˆ‘ä»¬æŠŠ\u0026quot;string-key\u0026quot;å’Œ+å‡½æ•°è”ç³»èµ·æ¥ã€‚\n{\u0026#34;string-key\u0026#34; +} Map å¯ä»¥è¢«åµŒå¥—ã€‚\n{:name {:first \u0026#34;John\u0026#34; :middle \u0026#34;Jacob\u0026#34; :last \u0026#34;Jingleheimerschmidt\u0026#34;}}. æ³¨æ„ï¼ŒMap çš„å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹\u0026ndash;å­—ç¬¦ä¸²ã€æ•°å­—ã€Mapã€Vectorï¼Œç”šè‡³å‡½æ•°ã€‚Clojure å¹¶ä¸å…³å¿ƒè¿™ä¸ªé—®é¢˜ã€‚\né™¤äº†ä½¿ç”¨ map å­—é¢ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨hash-mapå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ª mapã€‚\n(hash-map :a 1 :b 2) ; =\u0026gt; {:a 1 :b 2}. ä½ å¯ä»¥ç”¨getå‡½æ•°åœ¨ Map ä¸­æŸ¥è¯¢æ•°å€¼ã€‚\n(get {:a 0 :b 1} :b) ; =\u0026gt; 1 (get {:a 0 :b {:c \u0026#34;ho hum\u0026#34;}} :b) ; =\u0026gt; {:c \u0026#34;ho hum\u0026#34;} åœ¨è¿™ä¸¤ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‘getè¯¢é—®ç»™å®š Map ä¸­:bé”®çš„å€¼\u0026ndash;åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œå®ƒè¿”å›1ï¼Œè€Œåœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œå®ƒè¿”å›åµŒå¥— Map{:c \u0026quot;ho hum\u0026quot;}ã€‚\nå¦‚æœæ²¡æœ‰æ‰¾åˆ°ä½ çš„é”®ï¼Œgetå°†è¿”å›nilï¼Œæˆ–è€…ä½ å¯ä»¥ç»™å®ƒä¸€ä¸ªé»˜è®¤å€¼ï¼Œä¾‹å¦‚\u0026quot;unicornsï¼Ÿ\u0026quot;ã€‚\n(get {:a 0 :b 1} :c) ; =\u0026gt; nil (get {:a 0 :b 1} :c \u0026#34;unicorns?\u0026#34;) ; =\u0026gt; \u0026#34;unicorns?\u0026#34; get-inå‡½æ•°å¯ä»¥è®©ä½ åœ¨åµŒå¥— Map ä¸­æŸ¥è¯¢æ•°å€¼ã€‚\n(get-in {:a 0 :b {:c \u0026#34;ho hum\u0026#34;}} [:b :c]) ; =\u0026gt; \u0026#34;ho hum\u0026#34; å¦ä¸€ç§åœ¨ Map ä¸­æŸ¥è¯¢æ•°å€¼çš„æ–¹æ³•æ˜¯æŠŠ Map å½“ä½œä¸€ä¸ªä»¥é”®ä¸ºå‚æ•°çš„å‡½æ•°ã€‚\n({:name \u0026#34;The Human Coffeepot\u0026#34;} :name) ; =\u0026gt; \u0026#34;The Human Coffeepot\u0026#34; ä½ å¯ä»¥ç”¨ Map åšçš„å¦ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…æ˜¯æŠŠ Keywords ä½œä¸ºå‡½æ•°æ¥æŸ¥è¯¢å®ƒä»¬çš„å€¼ï¼Œè¿™å°±å¼•å‡ºäº†ä¸‹ä¸€ä¸ªä¸»é¢˜ï¼ŒKeywordsã€‚\nKeywords äº†è§£ Clojure å…³é”®å­—çš„æœ€å¥½æ–¹æ³•æ˜¯çœ‹å®ƒä»¬æ˜¯å¦‚ä½•è¢«ä½¿ç”¨çš„ã€‚æ­£å¦‚ä½ åœ¨ä¸Šä¸€èŠ‚ä¸­æ‰€çœ‹åˆ°çš„ï¼Œå®ƒä»¬ä¸»è¦æ˜¯ä½œä¸º Map ä¸­çš„é”®æ¥ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€äº› Keywords çš„ä¾‹å­ã€‚\n:a :rumplestiltsken :34 :_? Keywords å¯ä»¥ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œåœ¨æ•°æ®ç»“æ„ä¸­æŸ¥æ‰¾ç›¸åº”çš„å€¼ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ª Map ä¸­æŸ¥æ‰¾:aã€‚\n(:a {:a 1 :b 2 :c 3}) ; =\u0026gt; 1 è¿™ç›¸å½“äºã€‚\n(get {:a 1 :b 2 :c 3} :a) ; =\u0026gt; 1 ä½ å¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå’Œgetä¸€æ ·ã€‚\n(:d {:a 1 :b 2 :c 3} \u0026#34;No gnome knows homes like Noah knows\u0026#34;) ; =\u0026gt; \u0026#34;No gnome knows homes like Noah knows\u0026#34; ä½¿ç”¨å…³é”®å­—ä½œä¸ºä¸€ä¸ªå‡½æ•°æ˜¯ä»¤äººæ„‰å¿«çš„ç®€æ´ï¼ŒReal Clojurists ä¸€ç›´åœ¨è¿™æ ·åšã€‚ä½ ä¹Ÿåº”è¯¥è¿™æ ·åš!\nVector Vector ç±»ä¼¼äºæ•°ç»„, å®ƒæ˜¯ä¸€ä¸ªä»¥ 0 ä¸ºç´¢å¼•çš„ Setã€‚ä¾‹å¦‚, ä¸‹é¢æ˜¯ä¸€ä¸ª Vector çš„å­—é¢æ„æ€:\n[3 2 1] è¿™é‡Œæˆ‘ä»¬è¦è¿”å›ä¸€ä¸ª Vector çš„ç¬¬ 0 ä¸ªå…ƒç´ ã€‚\n(get [3 2 1] 0) ; =\u0026gt; 3 ä¸‹é¢æ˜¯å¦ä¸€ä¸ªæŒ‰ç´¢å¼•è·å–çš„ä¾‹å­ã€‚\n(get [\u0026#34;a\u0026#34; {:name \u0026#34;Pugsley Winterbottom\u0026#34;} \u0026#34;c\u0026#34;] 1) ; =\u0026gt; {:name \u0026#34;Pugsley Winterbottom\u0026#34;} ä½ å¯ä»¥çœ‹åˆ°ï¼ŒVector å…ƒç´ å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œè€Œä¸”ä½ å¯ä»¥æ··åˆç±»å‹ã€‚è¿˜æ³¨æ„åˆ°æˆ‘ä»¬ä½¿ç”¨çš„getå‡½æ•°ä¸æˆ‘ä»¬åœ¨ Map ä¸­æŸ¥æ‰¾æ•°å€¼æ—¶ä½¿ç”¨çš„ç›¸åŒã€‚\nä½ å¯ä»¥ç”¨vectorå‡½æ•°æ¥åˆ›å»º Vectorã€‚\n(vector \u0026#34;creepy\u0026#34; \u0026#34;full\u0026#34; \u0026#34;moon\u0026#34;) ; =\u0026gt; [\u0026#34;creepy\u0026#34; \u0026#34;full\u0026#34; \u0026#34;moon\u0026#34;] ä½ å¯ä»¥ä½¿ç”¨conjå‡½æ•°æ¥æ·»åŠ é¢å¤–çš„å…ƒç´ åˆ° Vector ä¸­ã€‚å…ƒç´ è¢«æ·»åŠ åˆ° Vector çš„å°¾éƒ¨ã€‚\n(conj [1 2 3] 4) ; =\u0026gt; [1 2 3 4] Vector ä¸æ˜¯å­˜å‚¨åºåˆ—çš„å”¯ä¸€æ–¹æ³•ï¼›Clojure è¿˜æœ‰åˆ—è¡¨ã€‚\nåˆ—è¡¨ åˆ—è¡¨ ä¸ Vector ç±»ä¼¼ï¼Œå®ƒä»¬éƒ½æ˜¯æ•°å€¼çš„çº¿æ€§ Setã€‚ä½†ä¹Ÿæœ‰ä¸€äº›åŒºåˆ«ã€‚ä¾‹å¦‚ï¼Œä½ ä¸èƒ½ç”¨getæ£€ç´¢åˆ—è¡¨å…ƒç´ ã€‚è¦å†™ä¸€ä¸ªåˆ—è¡¨çš„å­—é¢æ„æ€, åªéœ€å°†å…ƒç´ æ’å…¥æ‹¬å·å†…, å¹¶åœ¨å¼€å¤´ä½¿ç”¨å•å¼•å·:\n\u0026#39;(1 2 3 4) ; =\u0026gt; (1 2 3 4) æ³¨æ„ï¼Œå½“ REPL æ‰“å°å‡ºåˆ—è¡¨æ—¶ï¼Œå®ƒä¸åŒ…æ‹¬å•å¼•å·ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ç¬¬ 7 ç« ä¸­å†æ¥è®¨è®ºä¸ºä»€ä¹ˆä¼šè¿™æ ·ã€‚å¦‚æœä½ æƒ³ä»ä¸€ä¸ªåˆ—è¡¨ä¸­æ£€ç´¢ä¸€ä¸ªå…ƒç´ ï¼Œä½ å¯ä»¥ä½¿ç”¨ nth å‡½æ•°ã€‚\n(nth \u0026#39;(:a :b :c) 0) ; =\u0026gt; :a (nth \u0026#39;(:a :b :c) 2) ; =\u0026gt; :c æˆ‘åœ¨æœ¬ä¹¦ä¸­æ²¡æœ‰è¯¦ç»†ä»‹ç»æ€§èƒ½ï¼Œå› ä¸ºæˆ‘è®¤ä¸ºåªæœ‰ä½ ç†Ÿæ‚‰ä¸€ç§è¯­è¨€ä¹‹åå†å…³æ³¨å®ƒæ‰æ˜¯æœ‰ç”¨çš„ã€‚ç„¶è€Œï¼ŒçŸ¥é“ä½¿ç”¨nthä»åˆ—è¡¨ä¸­æ£€ç´¢ä¸€ä¸ªå…ƒç´ æ¯”ä½¿ç”¨getä» Vector ä¸­æ£€ç´¢ä¸€ä¸ªå…ƒç´ è¦æ…¢ä¸€äº›æ˜¯å¾ˆå¥½çš„ã€‚è¿™æ˜¯å› ä¸º Clojure å¿…é¡»éå†ä¸€ä¸ªåˆ—è¡¨ä¸­çš„æ‰€æœ‰nä¸ªå…ƒç´ æ‰èƒ½åˆ°è¾¾nä¸ªï¼Œè€Œé€šè¿‡ç´¢å¼•è®¿é—®ä¸€ä¸ª Vector å…ƒç´ æœ€å¤šåªéœ€è¦å‡ è·³ã€‚\nåˆ—è¡¨å€¼å¯ä»¥æœ‰ä»»ä½•ç±»å‹ï¼Œä½ å¯ä»¥ç”¨listå‡½æ•°åˆ›å»ºåˆ—è¡¨ã€‚\n(list 1 \u0026#34;two\u0026#34; {3 4}) ; =\u0026gt; (1 \u0026#34;äºŒ\u0026#34; {3 4}) å…ƒç´ è¢«æ·»åŠ åˆ°ä¸€ä¸ªåˆ—è¡¨çš„å¼€å¤´ã€‚\n(conj \u0026#39;(1 2 3) 4) ; =\u0026gt; (4 1 2 3) ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨åˆ—è¡¨ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ Vectorï¼Ÿä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œå¦‚æœä½ éœ€è¦å¾ˆå®¹æ˜“åœ°æŠŠé¡¹ç›®æ·»åŠ åˆ°ä¸€ä¸ªåºåˆ—çš„å¼€å¤´ï¼Œæˆ–è€…ä½ æ­£åœ¨å†™ä¸€ä¸ªå®ï¼Œä½ åº”è¯¥ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨ã€‚å¦åˆ™ï¼Œä½ åº”è¯¥ä½¿ç”¨ Vectorã€‚éšç€ä½ å­¦ä¹ çš„æ·±å…¥ï¼Œä½ ä¼šå¯¹ä½•æ—¶ä½¿ç”¨å“ªç§æ–¹æ³•æœ‰å¾ˆå¥½çš„æ„Ÿè§‰ã€‚\nSet Set æ˜¯å”¯ä¸€å€¼çš„é›†åˆã€‚Clojure æœ‰ä¸¤ç§ç±»å‹çš„ Setï¼šå“ˆå¸Œ Set å’Œæ’åº Setã€‚æˆ‘å°†ä¸“æ³¨äºå“ˆå¸Œ Setï¼Œå› ä¸ºå®ƒä»¬æ›´ç»å¸¸è¢«ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå“ˆå¸Œ Set çš„æ–‡å­—ç¬¦å·ã€‚\n#{\u0026#34;kurt vonnegut\u0026#34; 20 :icicle}. ä½ ä¹Ÿå¯ä»¥ç”¨hash-setæ¥åˆ›å»ºä¸€ä¸ª Set:\n(hash-set 1 1 2 2) ; =\u0026gt; #{1 2} æ³¨æ„ï¼Œä¸€ä¸ªå€¼çš„å¤šä¸ªå®ä¾‹åœ¨ Set ä¸­æˆä¸ºä¸€ä¸ªå”¯ä¸€çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åªå‰©ä¸‹ä¸€ä¸ª1å’Œä¸€ä¸ª2ã€‚å¦‚æœä½ è¯•å›¾å°†ä¸€ä¸ªå€¼æ·»åŠ åˆ°ä¸€ä¸ªå·²ç»åŒ…å«è¯¥å€¼çš„ Set ä¸­ï¼ˆæ¯”å¦‚ä¸‹é¢ä»£ç ä¸­çš„:bï¼‰ï¼Œå®ƒä»ç„¶åªæœ‰ä¸€ä¸ªè¯¥å€¼ã€‚\n( conj #{:a :b} :b) ; =\u0026gt; #{:a :b} ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨setå‡½æ•°ä»ç°æœ‰çš„ Vector å’Œåˆ—è¡¨ä¸­åˆ›å»º Setã€‚\n(set [3 3 3 4 4]) ; =\u0026gt; #{3 4} ä½ å¯ä»¥ä½¿ç”¨contains?å‡½æ•°æ¥æ£€æŸ¥ Set çš„æˆå‘˜èµ„æ ¼ï¼Œé€šè¿‡ä½¿ç”¨getï¼Œæˆ–é€šè¿‡ä½¿ç”¨å…³é”®å­—ä½œä¸ºå‡½æ•°ï¼Œä»¥ Set ä¸ºå‚æ•°ã€‚contains?è¿”å›trueæˆ–falseï¼Œè€Œgetå’Œå…³é”®å­—æŸ¥æ‰¾å°†è¿”å›å­˜åœ¨çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›nilã€‚\nä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨contains?ã€‚\n(contains? #{:a :b} :a) ; =\u0026gt; true (contains? #{:a :b} 3) ; =\u0026gt; false (contains? #{nil} nil) ; =\u0026gt; true ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨å…³é”®å­—ã€‚\n(:a #{:a :b}) ; =\u0026gt; :a è¿™é‡Œæ˜¯ä½ å¦‚ä½•ä½¿ç”¨getçš„æ–¹æ³•ã€‚\n(get #{:a :b} :a) ; =\u0026gt; :a (get #{:a nil} nil) ; =\u0026gt; nil (get #{:a :b} \u0026#34;kurt vonnegut\u0026#34;) ; =\u0026gt; nil æ³¨æ„ï¼Œä½¿ç”¨getæ¥æµ‹è¯•ä¸€ä¸ª Set æ˜¯å¦åŒ…å«nilï¼Œå°†æ€»æ˜¯è¿”å›nilï¼Œè¿™ä»¤äººå›°æƒ‘ã€‚å½“ä½ ä¸“é—¨æµ‹è¯• Set æˆå‘˜æ—¶ï¼Œcontains?å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚\nç®€å•æ€§ ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¯¹æ•°æ®ç»“æ„çš„å¤„ç†å¹¶ä¸åŒ…æ‹¬å¯¹å¦‚ä½•åˆ›å»ºæ–°ç±»å‹æˆ–ç±»çš„æè¿°ã€‚åŸå› æ˜¯ Clojure å¯¹ç®€å•æ€§çš„å¼ºè°ƒé¼“åŠ±ä½ é¦–å…ˆå»æ¥è§¦å†…ç½®çš„æ•°æ®ç»“æ„ã€‚\nå¦‚æœä½ æ¥è‡ªé¢å‘å¯¹è±¡çš„èƒŒæ™¯ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºè¿™ç§æ–¹æ³•å¾ˆå¥‡æ€ªè€Œä¸”è½åã€‚ç„¶è€Œï¼Œä½ ä¼šå‘ç°ï¼Œä½ çš„æ•°æ®ä¸ä¸€å®šéè¦å’Œä¸€ä¸ªç±»ç´§å¯†åœ°æ†ç»‘åœ¨ä¸€èµ·ï¼Œæ‰æ˜¯æœ‰ç”¨å’Œå¯ç†è§£çš„ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªè¢« Clojurists å–œçˆ±çš„å¯“è¨€æ•…äº‹ï¼Œæš—ç¤ºäº† Clojure çš„å“²å­¦ã€‚\n è®© 100 ä¸ªå‡½æ•°æ“ä½œä¸€ä¸ªæ•°æ®ç»“æ„æ¯”è®© 10 ä¸ªå‡½æ•°æ“ä½œ 10 ä¸ªæ•°æ®ç»“æ„è¦å¥½ã€‚ -Alan Perlis\n åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œä½ ä¼šäº†è§£åˆ°æ›´å¤šå…³äº Clojure å“²å­¦çš„è¿™ä¸ªæ–¹é¢ã€‚ç°åœ¨ï¼Œè¯·ç•™æ„ä½ é€šè¿‡åšæŒä½¿ç”¨åŸºæœ¬æ•°æ®ç»“æ„æ¥è·å¾—ä»£ç é‡ç”¨æ€§çš„æ–¹æ³•ã€‚\næˆ‘ä»¬çš„ Clojure æ•°æ®ç»“æ„å…¥é—¨è¯¾ç¨‹åˆ°æ­¤ç»“æŸã€‚ç°åœ¨ï¼Œæ˜¯æ—¶å€™æ·±å…¥åˆ°å‡½æ•°ä¸­å»ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨è¿™äº›æ•°æ®ç»“æ„äº†\nå‡½æ•° äººä»¬ä¸º Lisp ç–¯ç‹‚çš„åŸå› ä¹‹ä¸€æ˜¯ï¼Œè¿™äº›è¯­è¨€å¯ä»¥è®©ä½ å»ºç«‹èµ·è¡Œä¸ºå¤æ‚çš„ç¨‹åºï¼Œä½†ä¸»è¦çš„æ„ä»¶\u0026ndash;å‡½æ•°\u0026ndash;å´æ˜¯å¦‚æ­¤ç®€å•ã€‚æœ¬èŠ‚é€šè¿‡è§£é‡Šä»¥ä¸‹å†…å®¹ï¼Œè®©ä½ å¼€å§‹äº†è§£ Lisp å‡½æ•°çš„ç¾ä¸½å’Œä¼˜é›…ã€‚\n è°ƒç”¨å‡½æ•° å‡½æ•°ä¸å®å’Œç‰¹æ®Š Form æœ‰ä»€ä¹ˆä¸åŒ å®šä¹‰å‡½æ•° åŒ¿åå‡½æ•° è¿”å›å‡½æ•°  è°ƒç”¨å‡½æ•° ç°åœ¨ä½ å·²ç»çœ‹åˆ°äº†è®¸å¤šå‡½æ•°è°ƒç”¨çš„ä¾‹å­ã€‚\n(+ 1 2 3 4) (* 1 2 3 4) (first [1 2 3 4]) è¯·è®°ä½ï¼Œæ‰€æœ‰çš„ Clojure æ“ä½œéƒ½æœ‰ç›¸åŒçš„è¯­æ³•ï¼šå¼€æ‹¬å·ã€æ“ä½œç¬¦ã€æ“ä½œæ•°ã€é—­æ‹¬å·ã€‚å‡½æ•°**è°ƒç”¨åªæ˜¯æ“ä½œçš„å¦ä¸€ä¸ªæœ¯è¯­ï¼Œå…¶ä¸­è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–ä¸€ä¸ªå‡½æ•°**è¡¨è¾¾å¼ï¼ˆä¸€ä¸ªè¿”å›å‡½æ•°çš„è¡¨è¾¾å¼ï¼‰ã€‚\nè¿™å¯ä»¥è®©ä½ å†™å‡ºä¸€äº›ç›¸å½“æœ‰è¶£çš„ä»£ç ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œå®ƒè¿”å›+ï¼ˆåŠ æ³•ï¼‰å‡½æ•°ã€‚\n(or + -) ; =\u0026gt; #\u0026lt;core$_PLUS_ clojure.core$_PLUS_@76dace31\u0026gt; è¯¥è¿”å›å€¼æ˜¯åŠ æ³•å‡½æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚å› ä¸ºorçš„è¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªçœŸå€¼ï¼Œè€Œè¿™é‡Œçš„åŠ æ³•å‡½æ•°æ˜¯çœŸå€¼ï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯åŠ æ³•å‡½æ•°ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ä½¿ç”¨è¿™ä¸ªè¡¨è¾¾å¼ä½œä¸ºè¿ç®—ç¬¦ã€‚\n((or + -) 1 2 3) ; =\u0026gt; 6 å› ä¸º(or + -)è¿”å›+ï¼Œè¿™ä¸ªè¡¨è¾¾å¼è¢«æ±‚å€¼ä¸º1ã€2å’Œ3ä¹‹å’Œï¼Œè¿”å›6ã€‚\nä¸‹é¢æ˜¯å‡ ä¸ªæœ‰æ•ˆçš„å‡½æ•°è°ƒç”¨ï¼Œå®ƒä»¬éƒ½è¿”å›6ã€‚\n((and (= 1 1) +) 1 2 3) ; =\u0026gt; 6 ((first [+ 0]) 1 2 3) ; =\u0026gt; 6 åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œandçš„è¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªå‡å€¼æˆ–æœ€åä¸€ä¸ªçœŸå€¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ+è¢«è¿”å›ï¼Œå› ä¸ºå®ƒæ˜¯æœ€åä¸€ä¸ªçœŸå€¼ï¼Œç„¶åè¢«åº”ç”¨äºå‚æ•°1 2 3ï¼Œè¿”å›6ã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œfirstçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåºåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯+ã€‚\nç„¶è€Œï¼Œè¿™äº›éƒ½ä¸æ˜¯æœ‰æ•ˆçš„å‡½æ•°è°ƒç”¨ï¼Œå› ä¸ºæ•°å­—å’Œå­—ç¬¦ä¸²éƒ½ä¸æ˜¯å‡½æ•°ã€‚\n(1 2 3 4) (\u0026#34;test\u0026#34; 1 2 3) å¦‚æœä½ åœ¨ REPL ä¸­è¿è¡Œè¿™äº›ï¼Œä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚\nClassCastException java.lang.String cannot be cast to clojure.lang.IFn user/eval728 (NO_SOURCE_FILE:1) å½“ä½ ç»§ç»­ä½¿ç”¨ Clojure æ—¶ï¼Œä½ å¯èƒ½ä¼šå¤šæ¬¡çœ‹åˆ°è¿™ä¸ªé”™è¯¯ï¼šcannot be cast to clojure.lang.IFn ã€‚åªæ˜¯æ„å‘³ç€ä½ è¯•å›¾å°†æŸä¸ªä¸œè¥¿ä½œä¸ºä¸€ä¸ªå‡½æ•°ä½¿ç”¨ï¼Œè€Œå®ƒå¹¶ä¸æ˜¯ã€‚\nå‡½æ•°çš„çµæ´»æ€§å¹¶æ²¡æœ‰éšç€å‡½æ•°è¡¨è¾¾å¼çš„å‡ºç°è€Œç»“æŸ! åœ¨è¯­æ³•ä¸Šï¼Œå‡½æ•°å¯ä»¥æ¥å—ä»»ä½•è¡¨è¾¾å¼ä½œä¸ºå‚æ•°\u0026ndash;åŒ…æ‹¬å…¶ä»–å‡½æ•°ã€‚å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°è¢«ç§°ä¸ºé«˜é˜¶å‡½æ•°ã€‚å…·æœ‰é«˜é˜¶å‡½æ•°çš„ç¼–ç¨‹è¯­è¨€è¢«ç§°ä¸ºæ”¯æŒå‡½æ•°ä¸€ç­‰å…¬æ°‘ï¼Œå› ä¸ºä½ å¯ä»¥åƒå¯¹å¾…æ•°å­—å’Œ Vector ç­‰æ›´ç†Ÿæ‚‰çš„æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå°†å‡½æ•°ä½œä¸ºå€¼æ¥å¤„ç†ã€‚\nä»¥mapå‡½æ•°ï¼ˆä¸è¦ä¸ map æ•°æ®ç»“æ„æ··æ·†ï¼‰ä¸ºä¾‹ã€‚mapé€šè¿‡å¯¹ä¸€ä¸ªé›†åˆçš„æ¯ä¸ªæˆå‘˜åº”ç”¨ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ã€‚è¿™é‡Œï¼Œincå‡½æ•°å°†ä¸€ä¸ªæ•°å­—å¢åŠ  1ã€‚\n(inc 1.1) ; =\u0026gt; 2.1 (map inc [0 1 2 3]) ; =\u0026gt; (1 2 3 4) (æ³¨æ„mapå¹¶ä¸è¿”å›ä¸€ä¸ª Vectorï¼Œå°½ç®¡æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª Vector ä½œä¸ºå‚æ•°ã€‚ä½ å°†åœ¨ç¬¬å››ç« ä¸­äº†è§£åŸå› ã€‚ç°åœ¨ï¼Œè¯·ç›¸ä¿¡è¿™æ˜¯å¥½çš„ï¼Œä¹Ÿæ˜¯é¢„æœŸçš„ï¼‰ã€‚\nClojure å¯¹ä¸€ç­‰å…¬æ°‘å‡½æ•°çš„æ”¯æŒä½¿ä½ èƒ½å¤Ÿå»ºç«‹æ¯”æ²¡æœ‰ä¸€ç­‰å…¬æ°‘å‡½æ•°çš„è¯­è¨€æ›´å¼ºå¤§çš„æŠ½è±¡æ¦‚å¿µã€‚é‚£äº›ä¸ç†Ÿæ‚‰è¿™ç§ç¼–ç¨‹æ–¹å¼çš„äººè®¤ä¸ºå‡½æ•°å…è®¸ä½ å¯¹æ•°æ®å®ä¾‹è¿›è¡Œæ³›åŒ–æ“ä½œã€‚ä¾‹å¦‚ï¼Œ+å‡½æ•°å¯¹ä»»ä½•ç‰¹å®šæ•°å­—çš„åŠ æ³•è¿›è¡Œäº†æŠ½è±¡ã€‚\nç›¸æ¯”ä¹‹ä¸‹ï¼ŒClojureï¼ˆä»¥åŠæ‰€æœ‰ Lispï¼‰å…è®¸ä½ åˆ›å»ºæ³›åŒ–è¿›ç¨‹çš„å‡½æ•°ã€‚mapå…è®¸ä½ é€šè¿‡åœ¨ä»»ä½•é›†åˆä¸Šåº”ç”¨ä¸€ä¸ªå‡½æ•°\u0026ndash;ä»»ä½•å‡½æ•°\u0026ndash;æ¥æ¦‚æ‹¬è½¬æ¢ä¸€ä¸ªé›†åˆçš„è¿‡ç¨‹ã€‚\nä½ éœ€è¦çŸ¥é“çš„å…³äºå‡½æ•°è°ƒç”¨çš„æœ€åä¸€ä¸ªç»†èŠ‚æ˜¯ï¼ŒClojure åœ¨å°†æ‰€æœ‰å‡½æ•°å‚æ•°ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œä¼šé€’å½’åœ°æ±‚å€¼è¿™äº›å‚æ•°ã€‚ä¸‹é¢æ˜¯ Clojure å¦‚ä½•æ±‚å€¼ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯å‡½æ•°è°ƒç”¨çš„å‡½æ•°è°ƒç”¨ã€‚\n(+ (inc 199) (/ 100 (- 7 2))) (+ 200 (/ 100 (- 7 2))) ; evaluated \u0026#34;(inc 199)\u0026#34; (+ 200 (/ 100 5)) ; evaluated (- 7 2) (+ 200 20) ; evaluated (/ 100 5) 220 ; final evaluation å‡½æ•°è°ƒç”¨å¯åŠ¨äº†æ±‚å€¼è¿‡ç¨‹ï¼Œåœ¨åº”ç”¨+å‡½æ•°ä¹‹å‰ï¼Œæ‰€æœ‰çš„å­ Form éƒ½è¢«æ±‚å€¼äº†ã€‚\nå‡½æ•°è°ƒç”¨ã€å®è°ƒç”¨å’Œç‰¹æ®Š Form åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œä½ äº†è§£åˆ°å‡½æ•°è°ƒç”¨æ˜¯ä»¥å‡½æ•°è¡¨è¾¾å¼ä¸ºæ“ä½œç¬¦çš„è¡¨è¾¾å¼ã€‚å¦å¤–ä¸¤ç§è¡¨è¾¾å¼æ˜¯å®è°ƒç”¨å’Œç‰¹æ®Š Formã€‚ä½ å·²ç»çœ‹åˆ°äº†å‡ ç§ç‰¹æ®Š Formï¼šdef å’Œifè¡¨è¾¾å¼ã€‚\nä½ å°†åœ¨ç¬¬ 7 ç« ä¸­å­¦ä¹ å…³äºå®è°ƒç”¨å’Œç‰¹æ®Š Form çš„æ‰€æœ‰çŸ¥è¯†ã€‚ç°åœ¨ï¼Œä½¿ç‰¹æ®Š Form \u0026ldquo;ç‰¹æ®Š\u0026quot;çš„ä¸»è¦ç‰¹å¾æ˜¯ï¼Œä¸å‡½æ•°è°ƒç”¨ä¸åŒï¼Œå®ƒä»¬ä¸æ±‚å€¼æ‰€æœ‰çš„æ“ä½œæ•°ã€‚\nä»¥ \u0026ldquo;if \u0026ldquo;ä¸ºä¾‹ã€‚è¿™æ˜¯å®ƒçš„ä¸€èˆ¬ç»“æ„ã€‚\n(if boolean-form then-form optional-else-form) ç°åœ¨æƒ³è±¡ä¸€ä¸‹ä½ æœ‰ä¸€ä¸ªè¿™æ ·çš„ifè¯­å¥ã€‚\n(if good-mood (tweet walking-on-sunshine-lyrics) (tweet mopey-country-song-lyrics)) æ˜¾ç„¶ï¼Œåœ¨è¿™æ ·çš„ifè¡¨è¾¾ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ› Clojure åªæ±‚å€¼ä¸¤ä¸ªåˆ†æ”¯ä¸­çš„ä¸€ä¸ªã€‚å¦‚æœ Clojure åŒæ—¶æ±‚å€¼ä¸¤ä¸ªtweetå‡½æ•°è°ƒç”¨ï¼Œä½ çš„ Twitter ç²‰ä¸ä»¬æœ€ç»ˆä¼šéå¸¸å›°æƒ‘ã€‚\nå¦ä¸€ä¸ªåŒºåˆ«äºç‰¹æ®Š Form çš„ç‰¹å¾æ˜¯ï¼Œä½ ä¸èƒ½æŠŠå®ƒä»¬ä½œä¸ºå‡½æ•°çš„å‚æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç‰¹æ®Š Form å®ç°äº† Clojure çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œåªæ˜¯ä¸èƒ½ç”¨å‡½æ•°å®ç°ã€‚Clojure åªæœ‰å°‘é‡çš„ç‰¹æ®Š Formï¼Œè€Œå¦‚æ­¤ä¸°å¯Œçš„è¯­è¨€æ˜¯ç”¨å¦‚æ­¤å°çš„ä¸€ç»„æ„å»ºå—æ¥å®ç°çš„ï¼Œè¿™æ˜¯å¾ˆä»¤äººæƒŠè®¶çš„ã€‚\nå®ä¸ç‰¹æ®Š Form ç±»ä¼¼ï¼Œå®ƒä»¬å¯¹æ“ä½œæ•°çš„æ±‚å€¼ä¸å‡½æ•°è°ƒç”¨ä¸åŒï¼Œè€Œä¸”å®ƒä»¬ä¹Ÿä¸èƒ½ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚ä½†è¿™æ®µå¼¯è·¯å·²ç»èµ°å¾—å¤Ÿé•¿äº†ï¼›ç°åœ¨æ˜¯å­¦ä¹ å¦‚ä½•å®šä¹‰å‡½æ•°çš„æ—¶å€™äº†!\nå®šä¹‰å‡½æ•° å‡½æ•°çš„å®šä¹‰ç”±äº”ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆã€‚\n defn å‡½æ•°å æè¿°è¯¥å‡½æ•°çš„ docstring(å¯é€‰) æ‹¬å·ä¸­åˆ—å‡ºçš„å‚æ•° å‡½æ•°ä½“  ä¸‹é¢æ˜¯ä¸€ä¸ªå‡½æ•°å®šä¹‰çš„ä¾‹å­å’Œå‡½æ•°çš„è°ƒç”¨ç¤ºä¾‹ã€‚\nâŠ (defn too-enthusiastic â‹ \u0026#34;Return a cheer that might be a bit too enthusiastic\u0026#34; âŒ [name] â (str \u0026#34;OH. MY. GOD! \u0026#34; name \u0026#34; YOU ARE MOST DEFINITELY LIKE THE BEST \u0026#34; \u0026#34;MAN SLASH WOMAN EVER I LOVE YOU AND WE SHOULD RUN AWAY SOMEWHERE\u0026#34;)) (too-enthusiastic \u0026#34;Zelda\u0026#34;) ; =\u0026gt; \u0026#34;OH. MY. GOD! Zelda YOU ARE MOST DEFINITELY LIKE THE BEST MAN SLASH WOMAN EVER I LOVE YOU AND WE SHOULD RUN AWAY SOMEWHERE\u0026#34; åœ¨âŠå¤„ï¼Œtoo-enthusiasticæ˜¯å‡½æ•°çš„åç§°ï¼Œåœ¨â‹å¤„æœ‰ä¸€ä¸ªæè¿°æ€§çš„ docstringã€‚å‚æ•° \u0026ldquo;name \u0026ldquo;åœ¨âŒå¤„ç»™å‡ºï¼Œå‡½æ•°ä½“åœ¨âå¤„æ¥å—å‚æ•°ï¼Œå¹¶åšäº†å®ƒæ‰€æè¿°çš„äº‹æƒ…\u0026ndash;è¿”å›ä¸€ä¸ªå¯èƒ½æœ‰ç‚¹è¿‡äºçƒ­æƒ…çš„æ¬¢å‘¼ã€‚\nè®©æˆ‘ä»¬æ›´æ·±å…¥åœ°äº†è§£ docstringã€å‚æ•°å’Œå‡½æ•°ä½“ã€‚\ndocstring docstring*æ˜¯ä¸€ç§æè¿°å’Œè®°å½•ä½ çš„ä»£ç çš„æœ‰ç”¨æ–¹æ³•ã€‚ä½ å¯ä»¥åœ¨ REPL ä¸­ç”¨ (docfn-name)æŸ¥çœ‹ä¸€ä¸ªå‡½æ•°çš„ docstringï¼Œä¾‹å¦‚ (doc map)ã€‚å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªå·¥å…·ä¸ºä½ çš„ä»£ç ç”Ÿæˆæ–‡æ¡£ï¼Œé‚£ä¹ˆ docstring ä¹Ÿä¼šå‘æŒ¥ä½œç”¨ã€‚\nå‚æ•°å’Œ Arity Clojure å‡½æ•°å¯ä»¥ç”¨é›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°æ¥å®šä¹‰ã€‚ä½ ä¼ é€’ç»™å‡½æ•°çš„å€¼è¢«ç§°ä¸ºargumentsï¼Œå‚æ•°å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚å‚æ•°çš„æ•°é‡å°±æ˜¯å‡½æ•°çš„ç‰¹æ€§ã€‚ä¸‹é¢æ˜¯ä¸€äº›å…·æœ‰ä¸åŒæ€§è´¨çš„å‡½æ•°å®šä¹‰ã€‚\n(defn no-params [] \u0026#34;I take no parameters!\u0026#34;) (defn one-param [x] (str \u0026#34;I take one parameter: \u0026#34; x)) (defn two-params [x y] (str \u0026#34;Two parameters! That\u0026#39;s nothing! Pah! I will smoosh them \u0026#34; \u0026#34;together to spite you! \u0026#34; x y)) åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œno-paramsæ˜¯ä¸€ä¸ª 0-arity å‡½æ•°ï¼Œone-paramæ˜¯ 1-arityï¼Œtwo-paramsæ˜¯ 2-arityã€‚\nå‡½æ•°ä¹Ÿæ”¯æŒ å‚æ•°é‡è½½ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ä¸åŒçš„å‡½æ•°ä½“æ ¹æ®ä¸åŒçš„å‚æ•°æ¥è¿è¡Œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¤šä¹‰æ€§å‡½æ•°å®šä¹‰çš„ä¸€èˆ¬æ–¹å¼ã€‚è¯·æ³¨æ„ï¼Œæ¯ä¸ªæ•°ä½å®šä¹‰éƒ½è¢«æ‹¬åœ¨æ‹¬å·é‡Œï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå‚æ•°åˆ—è¡¨ã€‚\n(defn multi-arity ;; 3-arity arguments and body ([first-arg second-arg third-arg] (do-things first-arg second-arg third-arg)) ;; 2-arity arguments and body ([first-arg second-arg] (do-things first-arg second-arg)) ;; 1-arity arguments and body ([first-arg] (do-things first-arg))) å‡½æ•°å‚æ•°é‡è½½æ˜¯ä¸ºå‚æ•°æä¾›é»˜è®¤å€¼çš„ä¸€ç§æ–¹æ³•ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ\u0026quot;karate\u0026quot;æ˜¯chop-typeå‚æ•°çš„é»˜è®¤å‚æ•°ã€‚\n(defn x-chop \u0026#34;Describe the kind of chop you\u0026#39;re inflicting on someone\u0026#34; ([name chop-type] (str \u0026#34;I \u0026#34; chop-type \u0026#34; chop \u0026#34; name \u0026#34;! Take that!\u0026#34;)) ([name] (x-chop name \u0026#34;karate\u0026#34;))) å¦‚æœä½ ç”¨ä¸¤ä¸ªå‚æ•°è°ƒç”¨x-chopï¼Œè¯¥å‡½æ•°çš„å·¥ä½œåŸç†å’Œå®ƒä¸æ˜¯ä¸€ä¸ªå¤šä¹‰æ€§å‡½æ•°æ—¶ä¸€æ ·ã€‚\n(x-chop \u0026#34;Kanye West\u0026#34; \u0026#34;slap\u0026#34;) ; =\u0026gt; \u0026#34;I slap chop Kanye West! Take that!\u0026#34; å¦‚æœä½ è°ƒç”¨x-chopæ—¶åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œx-chopå®é™…ä¸Šä¼šåœ¨æä¾›ç¬¬äºŒä¸ªå‚æ•°karateæ—¶è°ƒç”¨è‡ªå·±ã€‚\n(x-chop \u0026#34;Kanye East\u0026#34;) ; =\u0026gt; \u0026#34;I karate chop Kanye East! Take that!\u0026#34; åƒè¿™æ ·ç”¨å‡½æ•°æœ¬èº«æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¯èƒ½æ˜¾å¾—ä¸å¯»å¸¸ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£å°±å¥½äº†! ä½ æ­£åœ¨å­¦ä¹ ä¸€ç§æ–°çš„æ–¹æ³•æ¥åšäº‹!\nä½ ä¹Ÿå¯ä»¥è®©æ¯ç§å‡½æ•°åšä¸€äº›å®Œå…¨ä¸ç›¸å…³çš„äº‹æƒ…ã€‚\n(defn weird-arity ([] \u0026#34;Destiny dressed you this morning, my friend, and now Fear is trying to pull off your pants. If you give up, if you give in, you\u0026#39;re gonna end up naked with Fear just standing there laughing at your dangling unmentionables! - the Tick\u0026#34;) ([number] (inc number))) 0-arity ä¸»ä½“è¿”å›ä¸€ä¸ªæ˜æ™ºçš„å¼•å·ï¼Œ1-arity ä¸»ä½“å¢åŠ ä¸€ä¸ªæ•°å­—ã€‚æœ€æœ‰å¯èƒ½çš„æ˜¯ï¼Œä½ ä¸ä¼šæƒ³å†™ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªå®Œå…¨ä¸ç›¸å…³çš„å‡½æ•°ä½“ä¼šè®©äººå›°æƒ‘ã€‚\nClojure è¿˜å…è®¸ä½ é€šè¿‡åŒ…æ‹¬ä¸€ä¸ªå¯å˜å‚æ•°æ¥å®šä¹‰å‡½æ•°ï¼Œå°±åƒ \u0026ldquo;æŠŠè¿™äº›å‚æ•°çš„å…¶ä½™éƒ¨åˆ†æ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œåç§°å¦‚ä¸‹\u0026rdquo;ã€‚å¯å˜å‚æ•°ç”¨å®‰åŸ¹å·ï¼ˆ\u0026amp;ï¼‰è¡¨ç¤ºï¼Œå¦‚âŠæ‰€ç¤ºã€‚\n(defn codger-communication [whippersnapper] (str \u0026#34;Get off my lawn, \u0026#34; whippersnapper \u0026#34;!!!\u0026#34;)) (defn codger âŠ [\u0026amp; whippersnappers] (map codger-communication whippersnappers)) (codger \u0026#34;Billy\u0026#34; \u0026#34;Anne-Marie\u0026#34; \u0026#34;The Incredible Bulk\u0026#34;) ; =\u0026gt; (\u0026#34;Get off my lawn, Billy!!!\u0026#34; \u0026#34;Get off my lawn, Anne-Marie!!!\u0026#34; \u0026#34;Get off my lawn, The Incredible Bulk!!!\u0026#34;) æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå½“ä½ ä¸ºå˜é‡æ€§è´¨çš„å‡½æ•°æä¾›å‚æ•°æ—¶ï¼Œå‚æ•°è¢«å½“ä½œä¸€ä¸ªåˆ—è¡¨æ¥å¤„ç†ã€‚ä½ å¯ä»¥æŠŠå¯å˜å‚æ•°å’Œæ™®é€šå‚æ•°æ··åœ¨ä¸€èµ·ï¼Œä½†å¯å˜å‚æ•°å¿…é¡»æ”¾åœ¨æœ€åã€‚\n(defn favorite-things [name \u0026amp; things] (str \u0026#34;Hi, \u0026#34; name \u0026#34;, here are my favorite things: \u0026#34; (clojure.string/join \u0026#34;, \u0026#34; things))) (favorite-things \u0026#34;Doreen\u0026#34; \u0026#34;gum\u0026#34; \u0026#34;shoes\u0026#34; \u0026#34;kara-te\u0026#34;) ; =\u0026gt; \u0026#34;Hi, Doreen, here are my favorite things: gum, shoes, kara-te\u0026#34; æœ€åï¼ŒClojure æœ‰ä¸€ç§æ›´å¤æ‚çš„å®šä¹‰å‚æ•°çš„æ–¹æ³•ï¼Œå«åšè§£æ„ï¼Œè¿™å€¼å¾—æœ‰è‡ªå·±çš„å°èŠ‚ã€‚\nè§£æ„ è§£æ„çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨ä¸€ä¸ªé›†åˆä¸­ç®€æ´åœ°å°†åå­—ä¸å€¼ç»‘å®šã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªåŸºæœ¬çš„ä¾‹å­ã€‚\n;; Return the first element of a collection (defn my-first [[first-thing]] ; Notice that first-thing is within a vector first-thing) (my-first [\u0026#34;oven\u0026#34; \u0026#34;bike\u0026#34; \u0026#34;war-axe\u0026#34;]) ; =\u0026gt; \u0026#34;oven\u0026#34; è¿™é‡Œï¼Œmy-firstå‡½æ•°å°†ç¬¦å·first-thingä¸ä½œä¸ºå‚æ•°ä¼ å…¥çš„ Vector ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ è”ç³»èµ·æ¥ã€‚ä½ å‘Šè¯‰my-firstè¿™æ ·åšï¼Œå°±æ˜¯æŠŠç¬¦å·first-thingæ”¾åœ¨ä¸€ä¸ª Vector ä¸­ã€‚\nVector å°±åƒä¸€ä¸ªå·¨å¤§çš„ç‰Œå­ï¼Œå¯¹ Clojure è¯´ï¼š\u0026ldquo;å˜¿ï¼è¿™ä¸ªå‡½æ•°å°†æ”¶åˆ°ä¸€ä¸ªåˆ—è¡¨æˆ– Vector ä½œä¸ºå‚æ•°ã€‚è®©æˆ‘çš„ç”Ÿæ´»æ›´è½»æ¾ï¼Œä¸ºæˆ‘æ‹†å¼€å‚æ•°çš„ç»“æ„ï¼Œå¹¶å°†æœ‰æ„ä¹‰çš„åå­—ä¸å‚æ•°çš„ä¸åŒéƒ¨åˆ†è”ç³»èµ·æ¥ï¼\u0026rdquo; å½“å¯¹ä¸€ä¸ª Vector æˆ–åˆ—è¡¨è¿›è¡Œè§£æ„æ—¶ï¼Œä½ å¯ä»¥éšæ„å‘½åä½ æƒ³è¦çš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å‚æ•°ã€‚\n(defn chooser [[first-choice second-choice \u0026amp; unimportant-choices]] (println (str \u0026#34;Your first choice is: \u0026#34; first-choice)) (println (str \u0026#34;Your second choice is: \u0026#34; second-choice)) (println (str \u0026#34;We\u0026#39;re ignoring the rest of your choices. \u0026#34; \u0026#34;Here they are in case you need to cry over them: \u0026#34; (clojure.string/join \u0026#34;, \u0026#34; unimportant-choices)))) (chooser [\u0026#34;Marmalade\u0026#34;, \u0026#34;Handsome Jack\u0026#34;, \u0026#34;Pigpen\u0026#34;, \u0026#34;Aquaman\u0026#34;]) ; =\u0026gt; Your first choice is: Marmalade ; =\u0026gt; Your second choice is: Handsome Jack ; =\u0026gt; We\u0026#39;re ignoring the rest of your choices. Here they are in case \\ you need to cry over them: Pigpen, Aquaman è¿™é‡Œï¼Œå…¶ä½™çš„å‚æ•°unimportant``-choiceså¤„ç†ç”¨æˆ·åœ¨ç¬¬ä¸€å’Œç¬¬äºŒé€‰æ‹©ä¹‹åçš„ä»»ä½•æ•°é‡çš„é¢å¤–é€‰æ‹©ã€‚\nä½ ä¹Ÿå¯ä»¥å¯¹ Map è¿›è¡Œå»ç»“æ„åŒ–ã€‚å°±åƒä½ å‘Šè¯‰ Clojure é€šè¿‡æä¾›ä¸€ä¸ª Vector ä½œä¸ºå‚æ•°æ¥è§£é™¤ Vector æˆ–åˆ—è¡¨çš„ç»“æ„ä¸€æ ·ï¼Œä½ å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ª Map ä½œä¸ºå‚æ•°æ¥è§£é™¤ Map çš„ç»“æ„ã€‚\n(defn announce-treasure-location âŠ [{lat :lat lng :lng}] (println (str \u0026#34;Treasure lat: \u0026#34; lat)) (println (str \u0026#34;Treasure lng: \u0026#34; lng))) (announce-treasure-location {:lat 28.22 :lng 81.33}) ; =\u0026gt; Treasure lat: 28.22 ; =\u0026gt; Treasure lng: 81.33 è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°çœ‹çœ‹âŠçš„é‚£ä¸€è¡Œã€‚è¿™å°±åƒå‘Šè¯‰ Clojureï¼Œ\u0026ldquo;å“Ÿï¼Clojure! ä¸ºæˆ‘åšä¸€ä»¶äº‹ï¼ŒæŠŠlatè¿™ä¸ªåå­—ä¸é”®:latå¯¹åº”çš„å€¼è”ç³»èµ·æ¥ã€‚å¯¹lngå’Œ:lngåšåŒæ ·çš„äº‹æƒ…ï¼Œå¥½å—ï¼Ÿ\u0026rdquo;\næˆ‘ä»¬ç»å¸¸æƒ³ç›´æ¥æŠŠå…³é”®è¯ä» Map ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªæ›´çŸ­çš„è¯­æ³•ã€‚è¿™å’Œå‰é¢çš„ä¾‹å­æœ‰ç›¸åŒçš„ç»“æœã€‚\n(defn announce-treasure-location [{:keys [lat lng]}] ã€‚ (println (str \u0026#34;Treasure lat: \u0026#34; lat)) (println (str \u0026#34;Treasure lng: \u0026#34; lng))) ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨:aså…³é”®å­—ä¿ç•™å¯¹åŸå§‹ Map å‚æ•°çš„è®¿é—®ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒåŸå§‹ Map æ˜¯ç”¨treasure-locationæ¥è®¿é—®çš„ã€‚\n(defn receive-treasure-location [{:keys [lat lng] :as treasure-location}] (println (str \u0026#34;Treasure lat: \u0026#34; lat)) (println (str \u0026#34;Treasure lng: \u0026#34; lng)) ;; One would assume that this would put in new coordinates for your ship (steer-ship! treasure-location)) ä¸€èˆ¬æ¥è¯´ï¼Œä½ å¯ä»¥æŠŠè§£æ„çœ‹ä½œæ˜¯æŒ‡ç¤º Clojure å¦‚ä½•å°†åå­—ä¸åˆ—è¡¨ã€Mapã€é›†åˆæˆ– Vector ä¸­çš„å€¼è”ç³»èµ·æ¥ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å‡½æ•°ä¸­çœŸæ­£èµ·ä½œç”¨çš„éƒ¨åˆ†ï¼šå‡½æ•°ä½“!\nå‡½æ•°ä½“ å‡½æ•°ä¸»ä½“å¯ä»¥åŒ…å«ä»»ä½• Form çš„ Formã€‚Clojure ä¼šè‡ªåŠ¨è¿”å›æœ€åæ±‚å€¼çš„ Formã€‚è¿™ä¸ªå‡½æ•°ä½“åªåŒ…å«ä¸‰ç§ Formï¼Œå½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒä¼šåå‡ºæœ€åä¸€ç§ Formï¼Œ\u0026quot;joe\u0026quot;ã€‚\n(defn illustrative-function [] (+ 1 304) 30 \u0026#34;joe\u0026#34;) (exstrative-function) ; =\u0026gt; \u0026#34;joe\u0026#34; ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå‡½æ•°ä½“ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªifè¡¨è¾¾å¼ã€‚\n(defn number-comment [x] (if (\u0026gt; x 6) \u0026#34;Oh my gosh! What a big number!\u0026#34; \u0026#34;That number\u0026#39;s OK, I guess\u0026#34;)) (number-comment 5) ; =\u0026gt; \u0026#34;That number\u0026#39;s OK, I guess\u0026#34; (number-comment 7) ; =\u0026gt; \u0026#34;Oh my gosh! What a big number!\u0026#34; æ‰€æœ‰å‡½æ•°éƒ½æ˜¯å¹³ç­‰çš„ æœ€åè¯´æ˜ä¸€ä¸‹ï¼šClojure æ²¡æœ‰ç‰¹æƒå‡½æ•°ã€‚+åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ-åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œincå’Œmapä¹Ÿåªæ˜¯å‡½æ•°ã€‚å®ƒä»¬å¹¶ä¸æ¯”ä½ è‡ªå·±å®šä¹‰çš„å‡½æ•°å¥½ã€‚æ‰€ä»¥ï¼Œä¸è¦è®©ä»–ä»¬ç»™ä½ ä»»ä½•å£å®!\næ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªäº‹å®æœ‰åŠ©äºè¯æ˜ Clojure çš„åº•å±‚ç®€å•æ€§ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼ŒClojure æ˜¯éå¸¸æ„šè ¢çš„ã€‚å½“ä½ è¿›è¡Œå‡½æ•°è°ƒç”¨æ—¶ï¼ŒClojure åªæ˜¯è¯´ï¼Œ\u0026quot;mapï¼Ÿå½“ç„¶ï¼Œä¸ç®¡æ€æ ·! æˆ‘åªæ˜¯åº”ç”¨è¿™ä¸ªå¹¶ç»§ç»­å‰è¿›\u0026rdquo;ã€‚å®ƒå¹¶ä¸å…³å¿ƒè¿™ä¸ªå‡½æ•°æ˜¯ä»€ä¹ˆï¼Œæˆ–è€…å®ƒæ¥è‡ªå“ªé‡Œï¼›å®ƒå¯¹æ‰€æœ‰çš„å‡½æ•°éƒ½ä¸€è§†åŒä»ã€‚åœ¨å®ƒçš„æ ¸å¿ƒï¼ŒClojure å¹¶ä¸å…³å¿ƒåŠ æ³•ã€ä¹˜æ³•æˆ– Map çš„é—®é¢˜ã€‚å®ƒåªå…³å¿ƒå‡½æ•°çš„åº”ç”¨ã€‚\nå½“ä½ ç»§ç»­ç”¨ Clojure ç¼–ç¨‹æ—¶ï¼Œä½ ä¼šå‘ç°è¿™ç§ç®€å•æ€§æ˜¯å¾ˆç†æƒ³çš„ã€‚ä½ ä¸å¿…ä¸ºå¤„ç†ä¸åŒçš„å‡½æ•°è€Œæ‹…å¿ƒç‰¹æ®Šçš„è§„åˆ™æˆ–è¯­æ³•ã€‚å®ƒä»¬çš„å·¥ä½œåŸç†éƒ½æ˜¯ä¸€æ ·çš„!\nåŒ¿åå‡½æ•° åœ¨ Clojure ä¸­ï¼Œå‡½æ•°ä¸éœ€è¦æœ‰åå­—ã€‚äº‹å®ä¸Šï¼Œä½ ä¼šä¸€ç›´ä½¿ç”¨åŒ¿åå‡½æ•°ã€‚å¤šä¹ˆç¥ç§˜å•Š! ä½ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼åˆ›å»ºåŒ¿åå‡½æ•°ã€‚ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨fnFormã€‚\n(fn [param-list] function body) çœ‹èµ·æ¥å¾ˆåƒdefnï¼Œä¸æ˜¯å—ï¼Ÿè®©æˆ‘ä»¬è¯•ä¸€è¯•å‡ ä¸ªä¾‹å­ã€‚\n(map (fn [name] (str \u0026#34;Hi, \u0026#34; name)) [\u0026#34;Darth Vader\u0026#34; \u0026#34;Mr. Magoo\u0026#34;]) ; =\u0026gt; (\u0026#34;Hi, Darth Vader\u0026#34; \u0026#34;Hi, Mr. Magoo\u0026#34;) ((fn [x] (* x 3)) 8) ; =\u0026gt; 24 ä½ å¯ä»¥ç”¨å¤„ç†fnçš„æ–¹å¼æ¥å¤„ç†defnï¼Œè¿™å‡ ä¹æ˜¯ç›¸åŒçš„ã€‚å‚æ•°åˆ—è¡¨å’Œå‡½æ•°ä½“çš„å·¥ä½œåŸç†å®Œå…¨ç›¸åŒã€‚ä½ å¯ä»¥ä½¿ç”¨å‚æ•°è§£æ„ï¼Œå¯å˜å‚æ•°ï¼Œç­‰ç­‰ã€‚ä½ ç”šè‡³å¯ä»¥å°†ä½ çš„åŒ¿åå‡½æ•°ä¸ä¸€ä¸ªåå­—è”ç³»èµ·æ¥ï¼Œè¿™ä¸åº”è¯¥æ˜¯ä¸€ä¸ªæƒŠå–œï¼ˆå¦‚æœè¿™ç¡®å®æ˜¯ä¸€ä¸ªæƒŠå–œï¼Œé‚£ä¹ˆ \u0026hellip; \u0026hellip; æƒŠå–œï¼ï¼‰ã€‚\n(def my-special-multiplier (fn [x] (* x 3)) (my-special-multiplier 12) ; =\u0026gt; 36 Clojure è¿˜æä¾›äº†å¦ä¸€ç§æ›´ç´§å‡‘çš„æ–¹å¼æ¥åˆ›å»ºåŒ¿åå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°çš„æ ·å­ã€‚\n#(* % 3) å“‡ï¼Œè¿™çœ‹èµ·æ¥å¾ˆå¥‡æ€ªã€‚æ¥å§ï¼Œåº”ç”¨è¿™ä¸ªçœ‹èµ·æ¥å¾ˆå¥‡æ€ªçš„å‡½æ•°ã€‚\n(#(* % 3) 8) ; =\u0026gt; 24 ä¸‹é¢æ˜¯ä¸€ä¸ªå°†åŒ¿åå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ map çš„ä¾‹å­ã€‚\n(map #(str \u0026#34;Hi, \u0026#34; %) [\u0026#34;Darth Vader\u0026#34; \u0026#34;Mr. Magoo\u0026#34;]) ; =\u0026gt; (\u0026#34;Hi, Darth Vader\u0026#34; \u0026#34;Hi, Mr. Magoo\u0026#34;) è¿™ç§çœ‹èµ·æ¥å¾ˆå¥‡æ€ªçš„åŒ¿åå‡½æ•°çš„ç¼–å†™æ–¹å¼æ˜¯ç”±ä¸€ä¸ªå«åšreader**macrosçš„å‡½æ•°å®ç°çš„ã€‚ä½ ä¼šåœ¨ç¬¬ 7 ç« ä¸­äº†è§£åˆ°è¿™äº›ã€‚ç°åœ¨ï¼Œåªå­¦ä¹ å¦‚ä½•ä½¿ç”¨è¿™äº›åŒ¿åå‡½æ•°å°±å¯ä»¥äº†ã€‚\nä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§è¯­æ³•è‚¯å®šæ›´ç´§å‡‘ï¼Œä½†ä¹Ÿæœ‰ç‚¹å¥‡æ€ªã€‚è®©æˆ‘ä»¬æŠŠå®ƒåˆ†è§£ä¸€ä¸‹ã€‚è¿™ç§åŒ¿åå‡½æ•°çœ‹èµ·æ¥å¾ˆåƒå‡½æ•°è°ƒç”¨ï¼Œåªæ˜¯å®ƒå‰é¢æœ‰ä¸€ä¸ªå“ˆå¸Œæ ‡è®°ï¼Œ#ã€‚\n;; Function call (* 8 3) ;; Anonymous function #(* % 3) è¿™ç§ç›¸ä¼¼æ€§ä½¿ä½ èƒ½æ›´å¿«åœ°çœ‹åˆ°åº”ç”¨è¿™ä¸ªåŒ¿åå‡½æ•°æ—¶å°†å‘ç”Ÿä»€ä¹ˆã€‚\u0026ldquo;å“¦ï¼Œ\u0026ldquo;ä½ å¯ä»¥å¯¹è‡ªå·±è¯´ï¼Œ\u0026ldquo;è¿™æ˜¯è¦æŠŠå®ƒçš„å‚æ•°ä¹˜ä»¥ 3\u0026rdquo;ã€‚\nç°åœ¨ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†ï¼Œç™¾åˆ†å·%ï¼Œè¡¨ç¤ºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚å¦‚æœä½ çš„åŒ¿åå‡½æ•°éœ€è¦å¤šä¸ªå‚æ•°ï¼Œä½ å¯ä»¥åƒè¿™æ ·åŒºåˆ†å®ƒä»¬ã€‚%1, %2, %3, ä»¥æ­¤ç±»æ¨ã€‚%ç›¸å½“äº%1ã€‚\n(#(str %1 \u0026#34; and \u0026#34; %2) \u0026#34;cornbread\u0026#34; \u0026#34;butter beans\u0026#34;) ; =\u0026gt; \u0026#34;cornbread and butter beans\u0026#34; ä½ ä¹Ÿå¯ä»¥ç”¨%\u0026amp;ä¼ é€’å…¶ä½™å‚æ•°ã€‚\n(#(identity %\u0026amp;) 1 \u0026#34;blarg\u0026#34; :yip) ; =\u0026gt; (1 \u0026#34;blarg\u0026#34; :yip) åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å°†èº«ä»½å‡½æ•°åº”ç”¨äºå…¶ä½™å‚æ•°ã€‚Identity è¿”å›å®ƒæ‰€ç»™çš„å‚æ•°è€Œä¸æ”¹å˜å®ƒã€‚å¯å˜å‚æ•°æ˜¯ä»¥åˆ—è¡¨ Form å­˜å‚¨çš„ï¼Œæ‰€ä»¥å‡½æ•°åº”ç”¨è¿”å›æ‰€æœ‰å‚æ•°çš„åˆ—è¡¨ã€‚\nå¦‚æœä½ éœ€è¦å†™ä¸€ä¸ªç®€å•çš„åŒ¿åå‡½æ•°ï¼Œä½¿ç”¨è¿™ç§é£æ ¼æ˜¯æœ€å¥½çš„ï¼Œå› ä¸ºå®ƒåœ¨è§†è§‰ä¸Šå¾ˆç´§å‡‘ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ è¦å†™ä¸€ä¸ªæ›´é•¿ã€æ›´å¤æ‚çš„å‡½æ•°ï¼Œå®ƒå¾ˆå®¹æ˜“å˜å¾—ä¸å¯è¯»ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œè¯·ä½¿ç”¨fnã€‚\nè¿”å›å‡½æ•° ç°åœ¨ä½ å·²ç»çœ‹åˆ°ï¼Œå‡½æ•°å¯ä»¥è¿”å›å…¶ä»–å‡½æ•°ã€‚è¿”å›çš„å‡½æ•°æ˜¯closuresï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥è®¿é—®å‡½æ•°åˆ›å»ºæ—¶çš„ä½œç”¨åŸŸå†…çš„æ‰€æœ‰å˜é‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ä¾‹å­ã€‚\n(defn inc-maker \u0026#34;Create a custom incrementor\u0026#34; [inc-by] #(+ % inc-by)) (def inc3 (inc-maker 3)) (inc3 7) ; =\u0026gt; 10 è¿™é‡Œï¼Œinc-byåœ¨ä½œç”¨åŸŸå†…ï¼Œæ‰€ä»¥å³ä½¿è¿”å›çš„å‡½æ•°åœ¨inc-makerä¹‹å¤–ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è®¿é—®å®ƒã€‚\næŠŠè¿™ä¸€åˆ‡æ”¾åˆ°ä¸€èµ· å¥½äº†! æ˜¯æ—¶å€™æŠŠä½ æ–°å‘ç°çš„çŸ¥è¯†ç”¨äºä¸€ä¸ªå´‡é«˜çš„ç›®çš„äº†ï¼šæ‰“å€’éœæ¯”ç‰¹äºº! è¦æ‰“ä¸€ä¸ªéœæ¯”ç‰¹äººï¼Œä½ é¦–å…ˆè¦å»ºç«‹å®ƒçš„èº«ä½“éƒ¨ä½æ¨¡å‹ã€‚æ¯ä¸ªèº«ä½“éƒ¨ä½éƒ½å°†åŒ…æ‹¬å…¶ç›¸å¯¹å¤§å°ï¼Œä»¥è¡¨æ˜è¯¥éƒ¨ä½è¢«å‡»ä¸­çš„å¯èƒ½æ€§æœ‰å¤šå¤§ã€‚ä¸ºäº†é¿å…é‡å¤ï¼Œéœæ¯”ç‰¹äººçš„æ¨¡å‹å°†åªåŒ…æ‹¬å·¦è„šï¼Œå·¦è€³çš„æ¡ç›®ï¼Œä»¥æ­¤ç±»æ¨ã€‚å› æ­¤ï¼Œä½ éœ€è¦ä¸€ä¸ªå‡½æ•°æ¥å®Œå…¨å¯¹ç§°è¯¥æ¨¡å‹ï¼Œåˆ›å»ºå³è„šï¼Œå³è€³ï¼Œç­‰ç­‰ã€‚æœ€åï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¿­ä»£èº«ä½“å„éƒ¨åˆ†ï¼Œå¹¶éšæœºé€‰æ‹©å‡»ä¸­çš„éƒ¨åˆ†ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œä½ å°†äº†è§£åˆ°ä¸€äº›æ–°çš„ Clojure å·¥å…·ã€‚letè¡¨è¾¾å¼ï¼Œå¾ªç¯ï¼Œå’Œæ­£åˆ™è¡¨è¾¾å¼ã€‚æœ‰è¶£!\nå¤å°”çš„ä¸‹ä¸€ä¸ªé¡¶çº§æ¨¡å‹ å¯¹äºæˆ‘ä»¬çš„éœæ¯”ç‰¹äººæ¨¡å‹ï¼Œæˆ‘ä»¬å°†é¿å¼€éœæ¯”ç‰¹äººçš„ç‰¹å¾ï¼Œå¦‚æ´»æ³¼å’Œè°ƒçš®ï¼Œåªå…³æ³¨éœæ¯”ç‰¹äººçš„å°èº«æ¿ã€‚ä¸‹é¢æ˜¯éœæ¯”ç‰¹äººçš„æ¨¡å‹ã€‚\n(def asym-hobbit-body-parts [{:name \u0026#34;head\u0026#34; :size 3} {:name \u0026#34;left-eye\u0026#34; :size 1} {:name \u0026#34;left-ear\u0026#34; :size 1} {:name \u0026#34;mouth\u0026#34; :size 1} {:name \u0026#34;nose\u0026#34; :size 1} {:name \u0026#34;neck\u0026#34; :size 2} {:name \u0026#34;left-shoulder\u0026#34; :size 3} {:name \u0026#34;left-upper-arm\u0026#34; :size 3} {:name \u0026#34;chest\u0026#34; :size 10} {:name \u0026#34;back\u0026#34; :size 10} {:name \u0026#34;left-forearm\u0026#34; :size 3} {:name \u0026#34;abdomen\u0026#34; :size 6} {:name \u0026#34;left-kidney\u0026#34; :size 1} {:name \u0026#34;left-hand\u0026#34; :size 2} {:name \u0026#34;left-knee\u0026#34; :size 2} {:name \u0026#34;left-thigh\u0026#34; :size 4} {:name \u0026#34;left-lower-leg\u0026#34; :size 3} {:name \u0026#34;left-achilles\u0026#34; :size 1} {:name \u0026#34;left-foot\u0026#34; :size 2}]) è¿™æ˜¯ä¸€ä¸ª Map çš„ Vectorã€‚æ¯ä¸ª Map éƒ½æœ‰èº«ä½“éƒ¨ä½çš„åç§°å’Œèº«ä½“éƒ¨ä½çš„ç›¸å¯¹å¤§å°ã€‚(æˆ‘çŸ¥é“åªæœ‰åŠ¨æ¼«äººç‰©çš„çœ¼ç›æ˜¯å¤´éƒ¨çš„ä¸‰åˆ†ä¹‹ä¸€å¤§å°ï¼Œä½†å°±è¿™æ ·å§ï¼Œå¥½å—ï¼Ÿ)\næ˜æ˜¾ç¼ºå°‘çš„æ˜¯éœæ¯”ç‰¹äººçš„å³ä¾§ã€‚è®©æˆ‘ä»¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¸…å• 3-1 æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ä½ çœ‹åˆ°çš„æœ€å¤æ‚çš„ä»£ç ï¼Œå®ƒå¼•å…¥äº†ä¸€äº›æ–°çš„æƒ³æ³•ã€‚ä½†æ˜¯ä¸è¦æ‹…å¿ƒï¼Œå› ä¸ºæˆ‘ä»¬å°†è¯¦ç»†åœ°ç ”ç©¶å®ƒã€‚\n(defn matching-part [part] {:name (clojure.string/replace (:name part) #\u0026#34;^left-\u0026#34; \u0026#34;right-\u0026#34;) :size (:size part)}) (defn symmetrize-body-parts \u0026#34;Expects a seq of maps that have a :name and :size\u0026#34; [asym-body-parts] (loop [remaining-asym-parts asym-body-parts final-body-parts []] (if (empty? remaining-asym-parts) final-body-parts (let [[part \u0026amp; remaining] remaining-asym-parts] (recur remaining (into final-body-parts (set [part (matching-part part)])))))))  3-1. åŒ¹é…-éƒ¨åˆ†å’Œå¯¹ç§°-èº«ä½“-éƒ¨åˆ†çš„å‡½æ•°  å½“æˆ‘ä»¬å¯¹asym-hobbit-body-partsè°ƒç”¨å‡½æ•°symmetriz-body-partsæ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªå®Œå…¨å¯¹ç§°çš„éœæ¯”ç‰¹äººã€‚\n(symmetrize-body-parts asym-hobbit-body-parts) ; =\u0026gt; [{:name \u0026#34;head\u0026#34;, :size 3} {:name \u0026#34;left-eye\u0026#34;, :size 1} {:name \u0026#34;right-eye\u0026#34;, :size 1} {:name \u0026#34;left-ear\u0026#34;, :size 1} {:name \u0026#34;right-ear\u0026#34;, :size 1} {:name \u0026#34;mouth\u0026#34;, :size 1} {:name \u0026#34;nose\u0026#34;, :size 1} {:name \u0026#34;neck\u0026#34;, :size 2} {:name \u0026#34;left-shoulder\u0026#34;, :size 3} {:name \u0026#34;right-shoulder\u0026#34;, :size 3} {:name \u0026#34;left-upper-arm\u0026#34;, :size 3} {:name \u0026#34;right-upper-arm\u0026#34;, :size 3} {:name \u0026#34;chest\u0026#34;, :size 10} {:name \u0026#34;back\u0026#34;, :size 10} {:name \u0026#34;left-forearm\u0026#34;, :size 3} {:name \u0026#34;right-forearm\u0026#34;, :size 3} {:name \u0026#34;abdomen\u0026#34;, :size 6} {:name \u0026#34;left-kidney\u0026#34;, :size 1} {:name \u0026#34;right-kidney\u0026#34;, :size 1} {:name \u0026#34;left-hand\u0026#34;, :size 2} {:name \u0026#34;right-hand\u0026#34;, :size 2} {:name \u0026#34;left-knee\u0026#34;, :size 2} {:name \u0026#34;right-knee\u0026#34;, :size 2} {:name \u0026#34;left-thigh\u0026#34;, :size 4} {:name \u0026#34;right-thigh\u0026#34;, :size 4} {:name \u0026#34;left-lower-leg\u0026#34;, :size 3} {:name \u0026#34;right-lower-leg\u0026#34;, :size 3} {:name \u0026#34;left-achilles\u0026#34;, :size 1} {:name \u0026#34;right-achilles\u0026#34;, :size 1} {:name \u0026#34;left-foot\u0026#34;, :size 2} {:name \u0026#34;right-foot\u0026#34;, :size 2}] è®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™æ®µä»£ç !\nlet åœ¨æ¸…å• 3-1 çš„å¤§é‡ç–¯ç‹‚ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ç»“æ„(let ...)çš„ Formã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥å»ºç«‹å¯¹letçš„ç†è§£ï¼Œå½“æˆ‘ä»¬ç†Ÿæ‚‰äº†æ‰€æœ‰çš„éƒ¨åˆ†åï¼Œå†æ¥æ£€æŸ¥ç¨‹åºä¸­çš„å®Œæ•´ä¾‹å­ã€‚\nletå°†åå­—ä¸å€¼ç»‘å®šã€‚ä½ å¯ä»¥è®¤ä¸ºletæ˜¯let it beçš„ç¼©å†™ï¼Œè¿™ä¹Ÿæ˜¯æŠ«å¤´å£«ä¹é˜Ÿå…³äºç¼–ç¨‹çš„ä¸€é¦–ä¼˜ç¾çš„æ­Œæ›²ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚\n(let [x 3] x) ; =\u0026gt; 3 (def dalmatian-list [\u0026#34;Pongo\u0026#34; \u0026#34;Perdita\u0026#34; \u0026#34;Puppy 1\u0026#34; \u0026#34;Puppy 2\u0026#34;]) (let [dalmatians (take 2 dalmatian-list)] dalmatians) ; =\u0026gt; (\u0026#34;Pongo\u0026#34; \u0026#34;Perdita\u0026#34;) åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä½ å°†åå­—xä¸å€¼3ç»‘å®šã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œä½ æŠŠåå­—dalmatiansç»‘å®šåˆ°è¡¨è¾¾å¼(å–2dalmatian-list)çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯åˆ—è¡¨(\u0026quot;Pongo\u0026quot; \u0026quot;Perdita\u0026quot;)ã€‚letè¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚\n(def x 0) (let [x 1] x) ; =\u0026gt; 1 è¿™é‡Œï¼Œä½ é¦–å…ˆä½¿ç”¨defå°†åå­—xç»‘å®šåˆ°å€¼0ä¸Šã€‚ç„¶åï¼Œletåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­ï¼Œåå­—xè¢«ç»‘å®šåˆ°å€¼1ä¸Šã€‚æˆ‘è®¤ä¸ºä½œç”¨åŸŸå–å†³äºä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ \u0026ldquo;è¯·æ¸…ç†è¿™äº›çƒŸå¤´ \u0026ldquo;è¿™å¥è¯ä¸­ï¼ŒçƒŸå¤´çš„å«ä¹‰æ˜¯ä¸åŒçš„ï¼Œè¿™å–å†³äºä½ æ˜¯åœ¨äº§ç§‘ç—…æˆ¿å·¥ä½œè¿˜æ˜¯åœ¨é¦™çƒŸåˆ¶é€ å•†å¤§ä¼šçš„ç›‘ç®¡äººå‘˜å·¥ä½œã€‚åœ¨è¿™ä¸ªä»£ç ç‰‡æ®µä¸­ï¼Œä½ åœ¨è¯´ï¼š\u0026ldquo;æˆ‘å¸Œæœ›xåœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­æ˜¯0ï¼Œä½†åœ¨è¿™ä¸ªletè¡¨è¾¾å¼çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå®ƒåº”è¯¥æ˜¯1ã€‚\u0026rdquo;\nä½ å¯ä»¥åœ¨ä½ çš„letç»‘å®šä¸­å¼•ç”¨ç°æœ‰çš„ç»‘å®šã€‚\n(def x 0) (let [x (inc x)] x) ; =\u0026gt; 1 åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ(inc x)ä¸­çš„xæ˜¯æŒ‡ç”±(def x 0)åˆ›å»ºçš„ç»‘å®šã€‚ç»“æœæ˜¯1ï¼Œç„¶ååœ¨letåˆ›å»ºçš„æ–°ä½œç”¨åŸŸä¸­ä¸åç§°xç»‘å®šã€‚åœ¨letForm çš„ä½œç”¨åŸŸå†…ï¼ŒxæŒ‡çš„æ˜¯1ï¼Œè€Œä¸æ˜¯0ã€‚\nä½ ä¹Ÿå¯ä»¥åœ¨letä¸­ä½¿ç”¨å¯å˜å‚æ•°ï¼Œå°±åƒä½ åœ¨å‡½æ•°ä¸­ä¸€æ ·ã€‚\n(let [[Pongo \u0026amp; dalmatians] dalmatian-list] [Pongo dalmatians]) [Pongo dalmatians]) ; =\u0026gt; [\u0026#34;Pongo\u0026#34; (\u0026#34;Perdita\u0026#34; \u0026#34;Puppy 1\u0026#34; \u0026#34;Puppy 2\u0026#34;) ] æ³¨æ„ï¼ŒletForm çš„å€¼æ˜¯å…¶ä¸»ä½“ä¸­æœ€åè¢«æ±‚å€¼çš„ Formã€‚letForm éµå¾ªæ‰€æœ‰åœ¨\u0026ldquo;è°ƒç”¨å‡½æ•°\u0026quot;ç¬¬ 48 é¡µä¸­ä»‹ç»çš„ææ„è§„åˆ™ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ[pongo \u0026amp; dalmatians]è§£æ„äº†dalmatian-listï¼Œå°†å­—ç¬¦ä¸²\u0026quot;Pongo \u0026quot;ç»‘å®šåˆ°åç§°pongoä¸Šï¼Œå°†å…¶ä½™çš„dalmatiansåˆ—è¡¨ç»‘å®šåˆ°dalmatiansä¸Šã€‚Vector[pongo dalmatians]æ˜¯letçš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒæ˜¯let`Form çš„å€¼ã€‚\nletForm æœ‰ä¸¤ä¸ªä¸»è¦ç”¨é€”ã€‚é¦–å…ˆï¼Œå®ƒä»¬é€šè¿‡å…è®¸ä½ å¯¹äº‹ç‰©è¿›è¡Œå‘½åã€‚å…¶æ¬¡ï¼Œå®ƒä»¬å…è®¸ä½ åªæ±‚å€¼ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶é‡å¤ä½¿ç”¨å…¶ç»“æœã€‚å½“ä½ éœ€è¦é‡å¤ä½¿ç”¨ä¸€ä¸ªæ˜‚è´µçš„å‡½æ•°è°ƒç”¨çš„ç»“æœæ—¶ï¼Œè¿™ä¸€ç‚¹ç‰¹åˆ«é‡è¦ï¼Œæ¯”å¦‚ç½‘ç»œ API è°ƒç”¨ã€‚å½“è¡¨è¾¾å¼æœ‰å‰¯ä½œç”¨æ—¶ï¼Œè¿™ä¹Ÿå¾ˆé‡è¦ã€‚\nè®©æˆ‘ä»¬å†çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„å¯¹ç§°å‡½æ•°ä¸­çš„letFormï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½æ˜ç™½åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚\n(let [[part \u0026amp; remaining] remaining-asym-parts]) (recur remaining (in into final-body-parts (set [part (matching-part part part)])))) è¿™æ®µä»£ç å‘Šè¯‰ Clojureï¼Œ\u0026ldquo;åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚åœ¨å®ƒé‡Œé¢ï¼Œå°†partä¸remaining-asym-partsçš„ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸å…³è”ã€‚å°†remainingä¸remaining-asym-partsä¸­çš„å…¶ä»–å…ƒç´ è”ç³»èµ·æ¥\u0026rdquo;ã€‚\nè‡³äºletè¡¨è¾¾å¼çš„ä¸»ä½“ï¼Œä½ å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­äº†è§£åˆ°recurçš„å«ä¹‰ã€‚å‡½æ•°è°ƒç”¨\n(in into final-body-parts (set [part (matching-part part part)] )) é¦–å…ˆå‘Šè¯‰ Clojure, \u0026ldquo;ä½¿ç”¨setå‡½æ•°åˆ›å»ºä¸€ä¸ªç”±partå’Œå®ƒçš„åŒ¹é…éƒ¨åˆ†ç»„æˆçš„é›†åˆã€‚ç„¶åä½¿ç”¨å‡½æ•°intoå°†è¯¥é›†åˆçš„å…ƒç´ æ·»åŠ åˆ° Vectorfinal-body-partsä¸­\u0026rdquo;ã€‚ä½ åœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ªé›†åˆï¼Œä»¥ç¡®ä¿ä½ å‘final-body-partsæ·»åŠ å”¯ä¸€çš„å…ƒç´ ï¼Œå› ä¸ºpartå’Œ(matching-part part)æœ‰æ—¶æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œæ­£å¦‚ä½ å°†åœ¨æ¥ä¸‹æ¥çš„æ­£åˆ™è¡¨è¾¾å¼éƒ¨åˆ†çœ‹åˆ°çš„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–çš„ä¾‹å­ã€‚\n(into [] (set [:a :a])) ; =\u0026gt; [:a] é¦–å…ˆï¼Œ(set [:a :a])è¿”å›é›†åˆ#{:a}ï¼Œå› ä¸ºé›†åˆä¸åŒ…å«é‡å¤çš„å…ƒç´ ã€‚ç„¶å(into [] #{:a})è¿”å› Vector[:a]ã€‚\nå›åˆ°letï¼šæ³¨æ„partåœ¨letçš„ä¸»ä½“ä¸­è¢«å¤šæ¬¡ä½¿ç”¨ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨åŸæ¥çš„è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨partå’Œremainingçš„åå­—ï¼Œé‚£å°†æ˜¯ä¸€ä¸ªæ··ä¹±çš„å±€é¢! ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n(recur (rest remaining-asym-parts) (in into final-body-parts (set [(first remaining-asym-parts) (matching-part (first remaining-asym-parts)) ])) æ‰€ä»¥ï¼Œletæ˜¯ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥ä¸ºå€¼å¼•å…¥æœ¬åœ°åç§°ï¼Œè¿™æœ‰åŠ©äºç®€åŒ–ä»£ç ã€‚\nå¾ªç¯ åœ¨æˆ‘ä»¬çš„symmetrize-body-partså‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†loopï¼Œå®ƒæä¾›äº†å¦ä¸€ç§åœ¨ Clojure ä¸­è¿›è¡Œé€’å½’çš„æ–¹æ³•ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n(loop [iteration 0]  (println (str \u0026#34;Iteration \u0026#34; iteration))  (if (\u0026gt; iteration 3)  (println \u0026#34;Goodbye!\u0026#34;)  (recur (inc iteration)))) ; =\u0026gt; Iteration 0 ; =\u0026gt; Iteration 1 ; =\u0026gt; Iteration 2 ; =\u0026gt; Iteration 3 ; =\u0026gt; Iteration 4 ; =\u0026gt; Goodbye! ç¬¬ä¸€è¡Œï¼Œloop [iteration 0]ï¼Œå¼€å§‹äº†å¾ªç¯å¹¶å¼•å…¥äº†ä¸€ä¸ªåˆå§‹å€¼çš„ç»‘å®šã€‚åœ¨å¾ªç¯çš„ç¬¬ä¸€æ¬¡ä¼ é€’ä¸­ï¼Œiterationçš„å€¼ä¸º 0.æ¥ä¸‹æ¥ï¼Œå®ƒæ‰“å°ä¸€ä¸ªçŸ­æ¶ˆæ¯ã€‚ç„¶åï¼Œå®ƒæ£€æŸ¥iterationçš„å€¼ã€‚å¦‚æœè¯¥å€¼å¤§äº 3ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™è¯´å†è§äº†ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°± \u0026ldquo;é‡æ¥\u0026rdquo;ã€‚è¿™å°±å¥½æ¯”loopåˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå…¶å‚æ•°åä¸ºiterationï¼Œè€Œrecurå…è®¸ä½ ä»å…¶å†…éƒ¨è°ƒç”¨è¯¥å‡½æ•°ï¼Œä¼ é€’å‚æ•°(inc iteration)ã€‚\näº‹å®ä¸Šï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å®šä¹‰æ¥å®ŒæˆåŒæ ·çš„äº‹æƒ…ã€‚\n(defn recursive-printer  ([]  (recursive-printer 0))  ([iteration]  (println iteration)  (if (\u0026gt; iteration 3)  (println \u0026#34;Goodbye!\u0026#34;)  (recursive-printer (inc iteration))))) (recursive-printer) ; =\u0026gt; Iteration 0 ; =\u0026gt; Iteration 1 ; =\u0026gt; Iteration 2 ; =\u0026gt; Iteration 3 ; =\u0026gt; Iteration 4 ; =\u0026gt; Goodbye! ä½†æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™æ˜¯ä¸ªæ¯”è¾ƒå•°å—¦çš„æ–¹æ³•ã€‚è€Œä¸”ï¼Œloopæœ‰æ›´å¥½çš„æ€§èƒ½ã€‚åœ¨æˆ‘ä»¬çš„å¯¹ç§°åŒ–å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨loopéå†ä¸å¯¹ç§°çš„èº«ä½“éƒ¨ä½åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚\næ­£åˆ™è¡¨è¾¾å¼ æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¯¹æ–‡æœ¬è¿›è¡Œæ¨¡å¼åŒ¹é…çš„å·¥å…·ã€‚æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡å­—ç¬¦å·æ˜¯å°†è¡¨è¾¾å¼æ”¾åœ¨å“ˆå¸Œæ ‡è®°åçš„å¼•å·ä¸­ã€‚\n#\u0026#34;regular-expression\u0026#34; åœ¨æ¸…å• 3-1 ä¸­çš„å‡½æ•°matching-partä¸­ï¼Œclojure.string/replaceä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼#\u0026quot;^left-\u0026quot;æ¥åŒ¹é…ä»¥\u0026quot;left-\u0026quot;å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œä»¥ä¾¿ç”¨\u0026quot;right-\u0026quot;æ›¿æ¢\u0026quot;left-\u0026quot;ã€‚å¡ç‰¹ï¼Œ^ï¼Œæ˜¯æ­£åˆ™è¡¨è¾¾å¼å‘å‡ºçš„ä¿¡å·ï¼Œå³åªæœ‰å½“æ–‡æœ¬\u0026quot;left-\u0026quot;ä½äºå­—ç¬¦ä¸²çš„å¼€å¤´æ—¶ï¼Œå®ƒæ‰ä¼šåŒ¹é…ï¼Œè¿™å°±ç¡®ä¿äº†åƒ\u0026quot;cleft-chin\u0026quot;è¿™æ ·çš„å­—ç¬¦ä¸²ä¸ä¼šåŒ¹é…ã€‚ä½ å¯ä»¥ç”¨re-findæ¥æµ‹è¯•ï¼Œå®ƒæ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸æ­£åˆ™è¡¨è¾¾å¼æè¿°çš„æ¨¡å¼ç›¸åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œåˆ™è¿”å›åŒ¹é…çš„æ–‡æœ¬æˆ–nilã€‚\n(re-find #\u0026#34;^left-\u0026#34; \u0026#34;left-eye\u0026#34;) ; =\u0026gt; \u0026#34;left-\u0026#34;  (re-find #\u0026#34;^left-\u0026#34; \u0026#34;cleft-chin\u0026#34;) ; =\u0026gt; nil  (re-find #\u0026#34;^left-\u0026#34; \u0026#34;wongleblart\u0026#34;) ; =\u0026gt; nil ä¸‹é¢æ˜¯å‡ ä¸ªmatching-partçš„ä¾‹å­ï¼Œä½¿ç”¨ä¸€ä¸ªé‡è¯å°†\u0026quot;left-\u0026quot;æ›¿æ¢ä¸º\u0026quot;right-\u0026quot;ã€‚\n(defn matching-part  [part]  {:name (clojure.string/replace (:name part) #\u0026#34;^left-\u0026#34; \u0026#34;right-\u0026#34;)  :size (:size part)}) (matching-part {:name \u0026#34;left-eye\u0026#34; :size 1}) ; =\u0026gt; {:name \u0026#34;right-eye\u0026#34; :size 1}]  (matching-part {:name \u0026#34;head\u0026#34; :size 3}) ; =\u0026gt; {:name \u0026#34;head\u0026#34; :size 3}] è¯·æ³¨æ„ï¼Œåç§° \u0026ldquo;head\u0026rdquo; æ˜¯åŸæ ·è¿”å›çš„ã€‚\nå¯¹ç§°å™¨ ç°åœ¨è®©æˆ‘ä»¬å›åˆ°å®Œæ•´çš„å¯¹ç§°å™¨ï¼Œå¯¹å…¶è¿›è¡Œæ›´è¯¦ç»†çš„åˆ†æã€‚\n(def asym-hobbit-body-parts [{:name \u0026#34;head\u0026#34; :size 3}  {:name \u0026#34;left-eye\u0026#34; :size 1}  {:name \u0026#34;left-ear\u0026#34; :size 1}  {:name \u0026#34;mouth\u0026#34; :size 1}  {:name \u0026#34;nose\u0026#34; :size 1}  {:name \u0026#34;neck\u0026#34; :size 2}  {:name \u0026#34;left-shoulder\u0026#34; :size 3}  {:name \u0026#34;left-upper-arm\u0026#34; :size 3}  {:name \u0026#34;chest\u0026#34; :size 10}  {:name \u0026#34;back\u0026#34; :size 10}  {:name \u0026#34;left-forearm\u0026#34; :size 3}  {:name \u0026#34;abdomen\u0026#34; :size 6}  {:name \u0026#34;left-kidney\u0026#34; :size 1}  {:name \u0026#34;left-hand\u0026#34; :size 2}  {:name \u0026#34;left-knee\u0026#34; :size 2}  {:name \u0026#34;left-thigh\u0026#34; :size 4}  {:name \u0026#34;left-lower-leg\u0026#34; :size 3}  {:name \u0026#34;left-achilles\u0026#34; :size 1}  {:name \u0026#34;left-foot\u0026#34; :size 2}])   (defn matching-part  [part]  {:name (clojure.string/replace (:name part) #\u0026#34;^left-\u0026#34; \u0026#34;right-\u0026#34;)  :size (:size part)})  âŠ (defn symmetrize-body-parts  \u0026#34;Expects a seq of maps that have a :name and :size\u0026#34;  [asym-body-parts] â‹ (loop [remaining-asym-parts asym-body-parts  final-body-parts []] âŒ (if (empty? remaining-asym-parts)  final-body-parts â (let [[part \u0026amp; remaining] remaining-asym-parts] â (recur remaining  (into final-body-parts  (set [part (matching-part part)]))))))) symmetriz-body-partså‡½æ•°ï¼ˆä»âŠå¼€å§‹ï¼‰é‡‡ç”¨äº†å‡½æ•°å¼ç¼–ç¨‹ä¸­å¸¸è§çš„ä¸€èˆ¬ç­–ç•¥ã€‚ç»™å®šä¸€ä¸ªåºåˆ—ï¼ˆåœ¨æœ¬ä¾‹ä¸­ï¼Œæ˜¯ä¸€ä¸ªèº«ä½“éƒ¨ä½åŠå…¶å°ºå¯¸çš„ Vectorï¼‰ï¼Œè¯¥å‡½æ•°è¿ç»­åœ°å°†è¯¥åºåˆ—åˆ†å‰²æˆheadå’Œtailã€‚ç„¶åï¼Œå®ƒå¤„ç†å¤´éƒ¨ï¼Œå°†å…¶æ·»åŠ åˆ°æŸä¸ªç»“æœä¸­ï¼Œå¹¶ä½¿ç”¨é€’å½’æ¥ç»§ç»­å¤„ç†å°¾éƒ¨çš„è¿‡ç¨‹ã€‚\næˆ‘ä»¬åœ¨â‹å¤„å¼€å§‹å¾ªç¯å¤„ç†ä¸»ä½“éƒ¨åˆ†ã€‚åºåˆ—çš„å°¾éƒ¨å°†è¢«ç»‘å®šåˆ°remaining-asym-partsã€‚æœ€åˆï¼Œå®ƒè¢«ç»‘å®šåˆ°ä¼ é€’ç»™å‡½æ•°çš„å®Œæ•´åºåˆ—ï¼šasym-body-partsã€‚æˆ‘ä»¬è¿˜åˆ›å»ºäº†ä¸€ä¸ªç»“æœåºåˆ—ï¼Œfinal-body-partsï¼›å®ƒçš„åˆå§‹å€¼æ˜¯ä¸€ä¸ªç©º Vectorã€‚\nå¦‚æœremaining-asym-partsåœ¨âŒå¤„æ˜¯ç©ºçš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å·²ç»å¤„ç†äº†æ•´ä¸ªåºåˆ—ï¼Œå¯ä»¥è¿”å›ç»“æœï¼Œfinal-body-partsã€‚å¦åˆ™ï¼Œåœ¨âï¼Œæˆ‘ä»¬å°†åˆ—è¡¨åˆ†æˆheadï¼Œpartï¼Œå’Œtailï¼Œremainingã€‚\nåœ¨âå¤„ï¼Œæˆ‘ä»¬ç”¨remainingè¿›è¡Œå¾ªç¯ï¼Œè¿™ä¸ªåˆ—è¡¨åœ¨å¾ªç¯çš„æ¯ä¸€æ¬¡è¿­ä»£ä¸­éƒ½ä¼šç¼©çŸ­ä¸€ä¸ªå…ƒç´ ï¼Œè¿˜æœ‰(in)è¡¨è¾¾å¼ï¼Œå®ƒå»ºç«‹äº†å¯¹ç§°çš„èº«ä½“éƒ¨åˆ†çš„ Vectorã€‚\nå¦‚æœä½ æ˜¯è¿™ç§ç¼–ç¨‹çš„æ–°æ‰‹ï¼Œè¿™æ®µä»£ç å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ¥è§£å†³ã€‚è¯·åšæŒä¸‹å»! ä¸€æ—¦ä½ ç†è§£äº†æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ï¼Œä½ ä¼šè§‰å¾—è‡ªå·±åƒä¸ªç™¾ä¸‡å¯Œç¿!\nç”¨ reduce æ¥ç¼–å†™æ›´å¥½çš„å¯¹ç§°å™¨ å¤„ç†åºåˆ—çš„æ¯ä¸ªå…ƒç´ å¹¶è¿”å›ä¸€ä¸ªç»“æœçš„æ¨¡å¼éå¸¸æ™®éï¼Œä»¥è‡³äºæœ‰ä¸€ä¸ªå†…ç½®çš„å‡½æ•°å«åšreduceã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n ;; sum with reduce (reduce + [1 2 3 4]) ; =\u0026gt; 10 è¿™å°±åƒå‘Šè¯‰ Clojure è¿™æ ·åšã€‚\n (+ (+ (+ 1 2) 3) 4) reduceå‡½æ•°æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å·¥ä½œã€‚\n å°†ç»™å®šçš„å‡½æ•°åº”ç”¨äºä¸€ä¸ªåºåˆ—çš„å‰ä¸¤ä¸ªå…ƒç´ ã€‚è¿™å°±æ˜¯(+ 1 2)çš„ç”±æ¥ã€‚ å°†ç»™å®šçš„å‡½æ•°åº”ç”¨äºç»“æœå’Œåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ­¥éª¤ 1 çš„ç»“æœæ˜¯3ï¼Œåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ ä¹Ÿæ˜¯3ã€‚æ‰€ä»¥æœ€åçš„ç»“æœæ˜¯(+3 3)ã€‚ å¯¹åºåˆ—ä¸­å‰©ä¸‹çš„æ¯ä¸ªå…ƒç´ é‡å¤ç¬¬ 2 æ­¥ã€‚  reduceä¹Ÿéœ€è¦ä¸€ä¸ªå¯é€‰çš„åˆå§‹å€¼ã€‚è¿™é‡Œçš„åˆå§‹å€¼æ˜¯15ã€‚\n(reduce + 15 [1 2 3 4]) å¦‚æœä½ æä¾›äº†ä¸€ä¸ªåˆå§‹å€¼ï¼Œreduceå°±ä¼šå¼€å§‹å¯¹åˆå§‹å€¼å’Œåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ åº”ç”¨ç»™å®šçš„å‡½æ•°ï¼Œè€Œä¸æ˜¯åºåˆ—çš„å‰ä¸¤ä¸ªå…ƒç´ ã€‚\néœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œåœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œreduceæ¥æ”¶ä¸€ä¸ªå…ƒç´ çš„é›†åˆï¼Œ[1 2 3 4]ï¼Œå¹¶è¿”å›ä¸€ä¸ªå•ä¸€çš„æ•°å­—ã€‚è™½ç„¶ç¨‹åºå‘˜ç»å¸¸è¿™æ ·ä½¿ç”¨reduceï¼Œä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨reduceæ¥è¿”å›ä¸€ä¸ªæ¯”ä½ å¼€å§‹æ—¶æ›´å¤§çš„é›†åˆï¼Œå°±åƒæˆ‘ä»¬åœ¨symmetrize-body-partsä¸­å°è¯•åšçš„é‚£æ ·ã€‚reduceæŠ½è±¡äº† \u0026quot;å¤„ç†ä¸€ä¸ªé›†åˆå¹¶å»ºç«‹ä¸€ä¸ªç»“æœ \u0026quot;çš„ä»»åŠ¡ï¼Œå®ƒå¯¹è¿”å›çš„ç»“æœç±»å‹æ˜¯ä¸ç¡®å®šçš„ã€‚ä¸ºäº†è¿›ä¸€æ­¥äº†è§£reduce`çš„å·¥ä½œåŸç†ï¼Œè¿™é‡Œæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å®ç°å®ƒã€‚\n(defn my-reduce  ([f initial coll]  (loop [result initial  remaining coll]  (if (empty? remaining)  result  (recur (f result (first remaining)) (rest remaining)))))  ([f [head \u0026amp; tail]]  (my-reduce f head tail))) æˆ‘ä»¬å¯ä»¥é‡æ–°å®ç°æˆ‘ä»¬çš„å¯¹ç§°å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n(defn better-symmetrize-body-parts  \u0026#34;Expects a seq of maps that have a :name and :size\u0026#34;  [asym-body-parts]  (reduce (fn [final-body-parts part]  (into final-body-parts (set [part (matching-part part)])))  []  asym-body-parts)) çœŸæ£’! ä½¿ç”¨reduceçš„ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„å¥½å¤„æ˜¯ï¼Œä½ å†™çš„ä»£ç æ€»ä½“ä¸Šæ›´å°‘ã€‚ä½ ä¼ é€’ç»™reduceçš„åŒ¿åå‡½æ•°åªä¸“æ³¨äºå¤„ç†ä¸€ä¸ªå…ƒç´ å’Œå»ºç«‹ä¸€ä¸ªç»“æœã€‚åŸå› æ˜¯reduceå¤„ç†äº†åº•å±‚çš„æœºåˆ¶ï¼Œå³è·Ÿè¸ªå“ªäº›å…ƒç´ å·²ç»è¢«å¤„ç†ï¼Œå¹¶å†³å®šæ˜¯å¦è¿”å›ä¸€ä¸ªæœ€ç»ˆç»“æœæˆ–é€’å½’ã€‚\nä½¿ç”¨reduceä¹Ÿæ›´æœ‰è¡¨ç°åŠ›ã€‚å¦‚æœä½ çš„ä»£ç çš„è¯»è€…é‡åˆ° \u0026ldquo;loop\u0026rdquo;ï¼Œå¦‚æœä¸é˜…è¯»æ‰€æœ‰çš„ä»£ç ï¼Œä»–ä»¬å°†ä¸èƒ½ç¡®å®šè¿™ä¸ªå¾ªç¯åˆ°åº•åœ¨åšä»€ä¹ˆã€‚ä½†æ˜¯å¦‚æœä»–ä»¬çœ‹åˆ°reduceï¼Œä»–ä»¬ä¼šç«‹å³çŸ¥é“ä»£ç çš„ç›®çš„æ˜¯å¤„ç†ä¸€ä¸ªé›†åˆçš„å…ƒç´ ä»¥å»ºç«‹ä¸€ä¸ªç»“æœã€‚\næœ€åï¼Œé€šè¿‡å°† \u0026ldquo;reduce \u0026ldquo;è¿‡ç¨‹æŠ½è±¡ä¸ºä¸€ä¸ªä»¥å¦ä¸€ä¸ªå‡½æ•°ä¸ºå‚æ•°çš„å‡½æ•°ï¼Œä½ çš„ç¨‹åºå˜å¾—æ›´æœ‰å¯å¡‘æ€§ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°†reduceå‡½æ•°ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚ä½ è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªæ›´é€šç”¨çš„ \u0026ldquo;å¯¹ç§°ä½“-éƒ¨ä»¶ \u0026ldquo;ç‰ˆæœ¬ï¼Œä¾‹å¦‚ \u0026ldquo;æ‰©å±•ä½“-éƒ¨ä»¶\u0026rdquo;ã€‚é™¤äº†èº«ä½“éƒ¨ä½çš„åˆ—è¡¨å¤–ï¼Œå®ƒè¿˜å¯ä»¥æ¥å—ä¸€ä¸ªæ‰©å±•å™¨å‡½æ•°ï¼Œå¹¶è®©ä½ çš„æ¨¡å‹ä¸ä»…ä»…æ˜¯éœæ¯”ç‰¹äººã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æœ‰ä¸€ä¸ªèœ˜è››æ‰©å±•å™¨ï¼Œå¯ä»¥å¢åŠ çœ¼ç›å’Œè…¿çš„æ•°é‡ã€‚æˆ‘ä¼šè®©ä½ è‡ªå·±æ¥å†™ï¼Œå› ä¸ºæˆ‘æ˜¯é‚ªæ¶çš„ã€‚\néœæ¯”ç‰¹äººçš„æš´åŠ› æˆ‘çš„è¯ï¼Œè¿™çœŸæ˜¯ä¸ºå‹‡æ•¢å’ŒçœŸå®çš„äººå‡†å¤‡çš„ Clojure! ä¸ºäº†ç»™ä½ çš„å·¥ä½œç”»ä¸Šå¥å·ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå‡½æ•°å¯ä»¥ç¡®å®šéœæ¯”ç‰¹äººçš„å“ªä¸ªéƒ¨åˆ†è¢«å‡»ä¸­ã€‚\n(defn hit  [asym-body-parts]  (let [sym-parts (âŠbetter-symmetrize-body-parts asym-body-parts)  â‹body-part-size-sum (reduce + (map :size sym-parts))  target (rand body-part-size-sum)]  âŒ(loop [[part \u0026amp; remaining] sym-parts  accumulated-size (:size part)]  (if (\u0026gt; accumulated-size target)  part  (recur remaining (+ accumulated-size (:size (first remaining)))))))) hitçš„å·¥ä½œåŸç†æ˜¯å–ä¸€ä¸ªä¸å¯¹ç§°çš„èº«ä½“éƒ¨ä½çš„ Vectorï¼Œåœ¨âŠå¤„å¯¹ç§°ï¼Œç„¶ååœ¨â‹å¤„å°†å„éƒ¨ä½çš„å¤§å°ç›¸åŠ ã€‚ä¸€æ—¦æˆ‘ä»¬å°†è¿™äº›å°ºå¯¸ç›¸åŠ ï¼Œå°±å¥½åƒä» 1 åˆ°èº«ä½“éƒ¨ä½å°ºå¯¸ä¹‹å’Œçš„æ¯ä¸ªæ•°å­—éƒ½å¯¹åº”äºä¸€ä¸ªèº«ä½“éƒ¨ä½ï¼›1 å¯èƒ½å¯¹åº”äºå·¦çœ¼ï¼Œè€Œ 2ã€3ã€4 å¯èƒ½å¯¹åº”äºå¤´éƒ¨ã€‚è¿™ä½¿å¾—å½“ä½ å‡»ä¸­ä¸€ä¸ªèº«ä½“éƒ¨ä½æ—¶ï¼ˆé€šè¿‡åœ¨è¿™ä¸ªèŒƒå›´å†…é€‰æ‹©ä¸€ä¸ªéšæœºæ•°å­—ï¼‰ï¼Œç‰¹å®šèº«ä½“éƒ¨ä½è¢«å‡»ä¸­çš„å¯èƒ½æ€§å°†å–å†³äºèº«ä½“éƒ¨ä½çš„å¤§å°ã€‚\nå›¾ 3-1ï¼šèº«ä½“éƒ¨ä½ä¸æ•°å­—çš„èŒƒå›´ç›¸å¯¹åº”ï¼Œå¦‚æœç›®æ ‡åœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œå°±ä¼šè¢«å‡»ä¸­ã€‚\næœ€åï¼Œè¿™äº›æ•°å­—ä¸­çš„ä¸€ä¸ªè¢«éšæœºé€‰æ‹©ï¼Œç„¶åæˆ‘ä»¬åœ¨âŒå¤„ä½¿ç”¨loopæ¥å¯»æ‰¾å¹¶è¿”å›ä¸è¯¥æ•°å­—å¯¹åº”çš„èº«ä½“éƒ¨ä½ã€‚å¾ªç¯æ˜¯é€šè¿‡è·Ÿè¸ªæˆ‘ä»¬å·²ç»æ£€æŸ¥è¿‡çš„éƒ¨åˆ†çš„ç´¯è®¡å¤§å°ï¼Œå¹¶æ£€æŸ¥ç´¯è®¡å¤§å°æ˜¯å¦å¤§äºç›®æ ‡å€¼æ¥å®ç°çš„ã€‚æˆ‘æŠŠè¿™ä¸ªè¿‡ç¨‹æƒ³è±¡æˆç”¨ä¸€æ’ç¼–å·çš„æ§½æ¥æ’åˆ—èº«ä½“éƒ¨ä½ã€‚åœ¨æˆ‘æ’å®Œä¸€ä¸ªèº«ä½“éƒ¨ä½åï¼Œæˆ‘é—®è‡ªå·±ï¼š\u0026ldquo;æˆ‘å·²ç»è¾¾åˆ°ç›®æ ‡äº†å—ï¼Ÿ\u0026rdquo; å¦‚æœæˆ‘è¾¾åˆ°äº†ï¼Œè¿™æ„å‘³ç€æˆ‘åˆšåˆšæ’å¥½çš„èº«ä½“éƒ¨ä½å°±æ˜¯è¢«å‡»ä¸­çš„é‚£ä¸ªéƒ¨ä½ã€‚å¦åˆ™ï¼Œæˆ‘å°±ç»§ç»­æ’æŸ¥è¿™äº›éƒ¨ä½ã€‚\nä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„é›¶ä»¶æ¸…å•æ˜¯å¤´ã€å·¦çœ¼å’Œå·¦æ‰‹ï¼Œå¦‚å›¾ 3-1ã€‚åœ¨å–å®Œç¬¬ä¸€ä¸ªéƒ¨åˆ†ï¼Œå³å¤´éƒ¨åï¼Œç´¯è®¡å¤§å°ä¸º 3ã€‚å½“ç´¯è®¡å¤§å°è¶…è¿‡ç›®æ ‡æ—¶ï¼Œèº«ä½“éƒ¨åˆ†å°±è¢«å‡»ä¸­ï¼Œæ‰€ä»¥å¦‚æœç›®æ ‡å°äº 3ï¼Œé‚£ä¹ˆå¤´éƒ¨å°±è¢«å‡»ä¸­äº†ã€‚å¦åˆ™ï¼Œä½ å–ä¸‹ä¸‹ä¸€ä¸ªéƒ¨åˆ†ï¼Œå³å·¦çœ¼ï¼Œå¹¶å°†ç´¯ç§¯å¤§å°å¢åŠ åˆ° 4ï¼Œå¦‚æœç›®æ ‡å¤§äºæˆ–ç­‰äº 3 ä¸”å°äº 4ï¼Œåˆ™äº§ç”Ÿä¸€ä¸ªå‘½ä¸­ã€‚\nä¸‹é¢æ˜¯ä¸€äº›hitå‡½æ•°çš„è¿è¡Œæ ·æœ¬ã€‚\n(hit asym-hobbit-body-parts) ; =\u0026gt; {:name \u0026#34;right-upper-arm\u0026#34;, :size 3}  (hit asym-hobbit-body-parts) ; =\u0026gt; {:name \u0026#34;chest\u0026#34;, :size 10}  (hit asym-hobbit-body-parts) ; =\u0026gt; {:name \u0026#34;left-eye\u0026#34;, :size 1} å“¦ï¼Œæˆ‘çš„ä¸Šå¸ï¼Œé‚£ä¸ªå¯æ€œçš„éœæ¯”ç‰¹äººï¼ä½ è¿™ä¸ªæ€ªç‰©ï¼\u0026quot;ã€‚ä½ è¿™ä¸ªæ€ªç‰©!\næ€»ç»“ æœ¬ç« è®©ä½ å¯¹å¦‚ä½•åœ¨ Clojure ä¸­åšäº‹æœ‰äº†ä¸€ä¸ªæ—‹é£å¼çš„äº†è§£ã€‚ä½ ç°åœ¨çŸ¥é“äº†å¦‚ä½•ç”¨å­—ç¬¦ä¸²ã€æ•°å­—ã€Mapã€å…³é”®å­—ã€Vectorã€åˆ—è¡¨å’Œ Set æ¥è¡¨ç¤ºä¿¡æ¯ï¼Œä»¥åŠå¦‚ä½•ç”¨defå’Œletæ¥å‘½åè¿™äº›è¡¨è¾¾å¼ã€‚ä½ å·²ç»äº†è§£äº†å‡½æ•°çš„çµæ´»æ€§ä»¥åŠå¦‚ä½•åˆ›å»ºä½ è‡ªå·±çš„å‡½æ•°ã€‚æ­¤å¤–ï¼Œä½ è¿˜äº†è§£äº† Clojure çš„ç®€å•å“²å­¦ï¼ŒåŒ…æ‹¬å…¶ç»Ÿä¸€çš„è¯­æ³•å’Œå¼ºè°ƒåœ¨åŸå§‹æ•°æ®ç±»å‹ä¸Šä½¿ç”¨å¤§å‹å‡½æ•°åº“ã€‚\nç¬¬ 4 ç« å°†å¸¦ä½ è¯¦ç»†æ¢ç©¶ Clojure çš„æ ¸å¿ƒå‡½æ•°ï¼Œç¬¬ 5 ç« è§£é‡Šäº†å‡½æ•°å¼ç¼–ç¨‹çš„æ€ç»´æ¨¡å¼ã€‚æœ¬ç« å‘ä½ å±•ç¤ºäº†å¦‚ä½•ç¼–å†™ Clojure ä»£ç \u0026ndash;æ¥ä¸‹æ¥çš„ä¸¤ç« å°†å‘ä½ å±•ç¤ºå¦‚ä½•æ›´å¥½çš„ç¼–å†™ Clojureã€‚\nåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘å»ºè®®ä½ å¼€å§‹å†™ä»£ç ï¼Œæˆ‘çš„æ¯ä¸€æ ¹çº¤ç»´éƒ½æ˜¯è¿™æ ·ã€‚æ²¡æœ‰æ¯”è¿™æ›´å¥½çš„æ–¹æ³•æ¥å·©å›ºä½ çš„ Clojure çŸ¥è¯†äº†ã€‚Clojure Cheat Sheetï¼ˆhttp://clojure.org/api/cheatsheetï¼‰æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒèµ„æ–™ï¼Œå®ƒåˆ—å‡ºäº†æ‰€æœ‰åœ¨æœ¬ç« ä¸­æ¶‰åŠçš„æ•°æ®ç»“æ„ä¸Šæ“ä½œçš„å†…ç½®å‡½æ•°ã€‚\nä¸‹é¢çš„ç»ƒä¹ ä¼šè®©ä½ çš„å¤§è„‘éå¸¸å…´å¥‹ã€‚å¦‚æœä½ æƒ³æ›´å¤šåœ°æµ‹è¯•ä½ çš„æ–°æŠ€èƒ½ï¼Œå¯ä»¥åœ¨*http://www.projecteuler.net/å°è¯•ä¸€äº› Project Euler æŒ‘æˆ˜ã€‚ä½ è¿˜å¯ä»¥çœ‹çœ‹ 4Clojureï¼ˆhttp://www.4clojure.com/problems/*ï¼‰ï¼Œè¿™æ˜¯ä¸€å¥—åœ¨çº¿çš„ Clojure é—®é¢˜ï¼Œæ—¨åœ¨æµ‹è¯•ä½ çš„çŸ¥è¯†ã€‚å†™ç‚¹ä»€ä¹ˆå§!\nç»ƒä¹  è¿™äº›ç»ƒä¹ æ˜¯ä¸ºäº†æµ‹è¯•ä½ çš„ Clojure çŸ¥è¯†å’Œå­¦ä¹ æ›´å¤šçš„ Clojure å‡½æ•°ï¼Œæ˜¯ä¸€ç§æœ‰è¶£çš„æ–¹å¼ã€‚å‰ä¸‰ä¸ªå¯ä»¥åªç”¨æœ¬ç« ä»‹ç»çš„ä¿¡æ¯æ¥å®Œæˆï¼Œä½†åä¸‰ä¸ªéœ€è¦ä½ ä½¿ç”¨åˆ°ç›®å‰ä¸ºæ­¢è¿˜æ²¡æœ‰æ¶‰åŠçš„å‡½æ•°ã€‚å¦‚æœä½ çœŸçš„å¾ˆæƒ³å†™æ›´å¤šçš„ä»£ç å¹¶æ¢ç´¢ Clojure çš„æ ‡å‡†åº“ï¼Œé‚£ä¹ˆå°±å»è§£å†³åä¸‰ä¸ªé—®é¢˜ã€‚å¦‚æœä½ è§‰å¾—è¿™äº›ç»ƒä¹ å¤ªéš¾äº†ï¼Œå¯ä»¥åœ¨è¯»å®Œç¬¬ 4 ç« å’Œç¬¬ 5 ç« åå†æ¥çœ‹çœ‹ï¼Œä½ ä¼šå‘ç°å®ƒä»¬è¦å®¹æ˜“å¾—å¤šã€‚\n  ä½¿ç”¨str, vector, list, hash-map, å’Œhash-setå‡½æ•°ã€‚\n  ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªæ•°å­—ï¼Œå¹¶å‘å…¶æ·»åŠ  100ã€‚\n  å†™ä¸€ä¸ªå‡½æ•°ã€‚\ndec-maker ï¼Œå…¶å·¥ä½œåŸç†ä¸å‡½æ•°\ninc-maker é™¤äº†ç”¨å‡æ³•ã€‚\n(def dec9 (dec-maker 9)) (dec9 10) ; =\u0026gt; 1   å†™ä¸€ä¸ªå‡½æ•°ã€‚\nmapset ï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯\nmap é™¤äº†è¿”å›å€¼æ˜¯ä¸€ä¸ªé›†åˆã€‚\n(mapset inc [1 1 2 2]) ; =\u0026gt; #{2 3}   åˆ›å»ºä¸€ä¸ªç±»ä¼¼äºsymmetriz-body-partsçš„å‡½æ•°ï¼Œåªæ˜¯å®ƒå¿…é¡»ä¸å…·æœ‰å¾„å‘å¯¹ç§°æ€§çš„å¥‡æ€ªçš„å¤ªç©ºå¤–æ˜Ÿäººä¸€èµ·å·¥ä½œã€‚ä»–ä»¬æ²¡æœ‰ä¸¤åªçœ¼ç›ã€èƒ³è†Šã€è…¿ç­‰ç­‰ï¼Œè€Œæ˜¯æœ‰äº”åªã€‚\n  åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå°†symmetriz-body-partså’Œä½ åœ¨ç»ƒä¹  5 ä¸­åˆ›å»ºçš„å‡½æ•°é€šç”¨åŒ–ã€‚è¿™ä¸ªæ–°çš„å‡½æ•°åº”è¯¥æ¥å—ä¸€ä¸ªèº«ä½“éƒ¨ä½çš„é›†åˆï¼Œä»¥åŠè¦å¢åŠ çš„åŒ¹é…èº«ä½“éƒ¨ä½çš„æ•°é‡ã€‚å¦‚æœä½ å¯¹ Lisp è¯­è¨€å’Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯å®Œå…¨é™Œç”Ÿçš„ï¼Œé‚£ä¹ˆå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å¯èƒ½å¹¶ä¸æ˜æ˜¾ã€‚å¦‚æœä½ è¢«å¡ä½äº†ï¼Œåªéœ€è½¬åˆ°ä¸‹ä¸€ç« ï¼Œä»¥åå†é‡æ¸©è¿™ä¸ªé—®é¢˜ã€‚\n  ","permalink":"https://zhenfeng-zhu.github.io/post/chapter3/","summary":"åšäº‹æƒ…ï¼šClojure é€Ÿæˆç­ æ˜¯æ—¶å€™å­¦ä¹ å¦‚ä½•ç”¨ Clojure çœŸæ­£åœ°åšäº‹äº†! è¯¥æ­»çš„! å°½ç®¡ä½ æ— ç–‘å·²ç»å¬è¯´è¿‡ Clojure ä»¤äººæ•¬ç•çš„å¹¶å‘æ”¯æŒå’Œå…¶ä»–äº†ä¸èµ·çš„åŠŸèƒ½ï¼Œä½† Clojure æœ€çªå‡ºçš„ç‰¹ç‚¹æ˜¯å®ƒæ˜¯ä¸€ç§ Lisp è¯­è¨€ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†æ¢ç´¢æ„æˆè¿™ä¸ª Lisp æ ¸å¿ƒçš„å…ƒç´ ï¼šè¯­æ³•ã€å‡½æ•°å’Œæ•°æ®ã€‚å®ƒä»¬å°†å…±åŒä¸ºä½ åœ¨ Clojure ä¸­è¡¨ç¤ºå’Œè§£å†³é—®é¢˜æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚\nåœ¨æ‰“ä¸‹è¿™ä¸ªåŸºç¡€ä¹‹åï¼Œä½ å°†èƒ½å¤Ÿç¼–å†™ä¸€äº›è¶…çº§é‡è¦çš„ä»£ç ã€‚åœ¨æœ€åä¸€èŠ‚ä¸­ï¼Œä½ å°†é€šè¿‡åˆ›å»ºä¸€ä¸ªéœæ¯”ç‰¹äººçš„æ¨¡å‹ï¼Œå¹¶ç¼–å†™ä¸€ä¸ªå‡½æ•°å°†å…¶æ‰“åœ¨ä¸€ä¸ªéšæœºçš„ä½ç½®ä¸Šï¼Œä»è€Œå°†ä¸€åˆ‡è”ç³»èµ·æ¥ã€‚è¶…çº§! é‡è¦çš„!\nå½“ä½ é˜…è¯»æœ¬ç« æ—¶ï¼Œæˆ‘å»ºè®®ä½ åœ¨ REPL ä¸­è¾“å…¥ä¾‹å­å¹¶è¿è¡Œå®ƒä»¬ã€‚ç”¨ä¸€ç§æ–°çš„è¯­è¨€ç¼–ç¨‹æ˜¯ä¸€ç§æŠ€èƒ½ï¼Œå°±åƒçº¦å¾·å°”èˆæˆ–èŠ±æ ·æ¸¸æ³³ä¸€æ ·ï¼Œä½ å¿…é¡»é€šè¿‡ç»ƒä¹ æ¥å­¦ä¹ å®ƒã€‚ è¯·ç•™æ„å®ƒ!\nè¯­æ³• Clojure çš„è¯­æ³•å¾ˆç®€å•ã€‚åƒæ‰€æœ‰çš„ Lisp ä¸€æ ·ï¼Œå®ƒé‡‡ç”¨äº†ç»Ÿä¸€çš„ç»“æ„ã€å°‘é‡çš„ç‰¹æ®Šè¿ç®—ç¬¦ï¼Œä»¥åŠä»è—åœ¨éº»çœç†å·¥å­¦é™¢ä¸‹é¢çš„å°æ‹¬å·çŸ¿äº•ä¸­ä¸æ–­æä¾›çš„å°æ‹¬å·ï¼ŒLisp å°±æ˜¯åœ¨é‚£é‡Œè¯ç”Ÿçš„ã€‚\nForm æ‰€æœ‰çš„ Clojure ä»£ç éƒ½æ˜¯ä»¥ç»Ÿä¸€ç»“æ„ç¼–å†™çš„ã€‚Clojure å¯ä»¥è¯†åˆ«ä¸¤ç§ç»“æ„ã€‚\n æ•°æ®ç»“æ„çš„å­—é¢è¡¨ç¤ºï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€Map å’Œ Vectorï¼‰ æ“ä½œ  æˆ‘ä»¬ä½¿ç”¨æœ¯è¯­formæ¥æŒ‡ä»£æœ‰æ•ˆçš„ä»£ç ã€‚æˆ‘æœ‰æ—¶ä¹Ÿä¼šç”¨è¡¨è¾¾å¼æ¥æŒ‡ä»£ Clojure Formã€‚ä½†ä¸è¦å¤ªçº ç»“äºæœ¯è¯­ã€‚Clojure æ±‚å€¼æ¯ä¸€ä¸ª Formï¼Œä»¥äº§ç”Ÿä¸€ä¸ªå€¼ã€‚è¿™äº›å­—é¢æ„ä¹‰çš„è¡¨è¾¾éƒ½æ˜¯æœ‰æ•ˆçš„ Formã€‚\n1 \u0026#34;a string\u0026#34; [\u0026#34;a\u0026#34; \u0026#34;vector\u0026#34; \u0026#34;of\u0026#34; \u0026#34;strings\u0026#34;] å½“ç„¶ï¼Œä½ çš„ä»£ç å¾ˆå°‘åŒ…å«è‡ªç”±æµ®åŠ¨çš„å­—ç¬¦ï¼Œå› ä¸ºå®ƒä»¬æœ¬èº«å®é™…ä¸Šå¹¶ä¸åšä»€ä¹ˆã€‚ç›¸åï¼Œä½ ä¼šåœ¨æ“ä½œä¸­ä½¿ç”¨å­—é¢ç¬¦å·ã€‚æ“ä½œæ˜¯ä½ åšäº‹æƒ…çš„æ–¹å¼ã€‚æ‰€æœ‰æ“ä½œçš„ Form éƒ½æ˜¯ï¼šå¼€æ‹¬å·ï¼Œæ“ä½œç¬¦ï¼Œæ“ä½œæ•°ï¼Œé—­æ‹¬å·ã€‚\n(operator operand1 operand2 ... operandn) è¯·æ³¨æ„ï¼Œè¿™é‡Œæ²¡æœ‰é€—å·ã€‚Clojure ä½¿ç”¨ç©ºæ ¼æ¥åˆ†éš”æ“ä½œæ•°ï¼Œå®ƒå°†é€—å·è§†ä¸ºç©ºæ ¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›æ“ä½œçš„ä¾‹å­ã€‚\n(+ 1 2 3) ; =\u0026gt; 6 (str \u0026#34;It was the panda \u0026#34; \u0026#34;in the library \u0026#34; \u0026#34;with a dust buster\u0026#34;) ; =\u0026gt; \u0026#34;It was the panda in the library with a dust buster\u0026#34; åœ¨ç¬¬ä¸€ä¸ªæ“ä½œä¸­ï¼Œè¿ç®—ç¬¦+å°†æ“ä½œæ•°1ã€2å’Œ3ç›¸åŠ ã€‚åœ¨ç¬¬äºŒä¸ªæ“ä½œä¸­ï¼Œè¿ç®—ç¬¦strå°†ä¸‰ä¸ªå­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸¤ç§ Form éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¸æ˜¯ Form çš„ä¸œè¥¿ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä¸€ä¸ªç»“æŸçš„å°æ‹¬å·ã€‚","title":"Chapter3 é€Ÿæˆç­"},{"content":"å¦‚ä½•ä½¿ç”¨ Emacsï¼Œä¸€ä¸ªä¼˜ç§€çš„ Clojure ç¼–è¾‘å™¨ åœ¨ä½ æŒæ¡ Clojure çš„è¿‡ç¨‹ä¸­ï¼Œä½ çš„ç¼–è¾‘å™¨å°†æ˜¯ä½ æœ€äº²å¯†çš„ç›Ÿå‹ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½¿ç”¨ Emacsï¼Œä½†ä½ å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•ä½ æƒ³è¦çš„ç¼–è¾‘å™¨ã€‚å¦‚æœä½ ä¸éµå¾ªæœ¬ç« ä¸­å…³äº Emacs çš„è¯¦å°½è¯´æ˜ï¼Œæˆ–è€…ä½ é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„ç¼–è¾‘å™¨ï¼Œé‚£ä¹ˆè‡³å°‘å€¼å¾—æŠ•å…¥ä¸€äº›æ—¶é—´æ¥è®¾ç½®ä½ çš„ç¼–è¾‘å™¨ï¼Œä»¥ä¾¿ä¸ REPL ä¸€èµ·å·¥ä½œã€‚æˆ‘æ¨èçš„ä¸¤ä¸ªåœ¨ç¤¾åŒºä¸­å—åˆ°å¥½è¯„çš„æ›¿ä»£å“æ˜¯Cursiveå’ŒNightcodeã€‚\næˆ‘æ¨è Emacs çš„åŸå› æ˜¯ï¼Œå®ƒæä¾›äº†ä¸ Clojure REPL çš„ç´§å¯†é›†æˆï¼Œè¿™ä½¿ä½ å¯ä»¥åœ¨å†™ä½œæ—¶ç«‹å³å°è¯•ä½ çš„ä»£ç ã€‚è¿™ç§ç´§å¯†çš„åé¦ˆå›è·¯åœ¨å­¦ä¹  Clojure å’Œä»¥åç¼–å†™çœŸæ­£çš„ Clojure ç¨‹åºæ—¶éƒ½å¾ˆæœ‰ç”¨ã€‚Emacs ä¹Ÿå¾ˆé€‚åˆä¸ä»»ä½• Lisp æ–¹è¨€ä¸€èµ·å·¥ä½œï¼›äº‹å®ä¸Šï¼ŒEmacs æ˜¯ç”¨ä¸€ç§å«åš Emacs Lispï¼ˆelispï¼‰çš„ Lisp æ–¹è¨€ç¼–å†™çš„ã€‚\nåœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ çš„ Emacs è®¾ç½®å°†çœ‹èµ·æ¥åƒå›¾ 2-1ã€‚\nå›¾ 2-1: ä½¿ç”¨ Clojure çš„å…¸å‹ Emacs è®¾ç½®ï¼šä¸€è¾¹æ˜¯ä»£ç ï¼Œå¦ä¸€è¾¹æ˜¯ REPLã€‚\nä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½ å°†ä»å®‰è£… Emacs å¼€å§‹ï¼Œè®¾ç½®ä¸€ä¸ªé€‚åˆæ–°äººçš„ Emacs é…ç½®ã€‚ç„¶åä½ å°†å­¦ä¹ åŸºç¡€çŸ¥è¯†ï¼šå¦‚ä½•æ‰“å¼€ã€ç¼–è¾‘å’Œä¿å­˜æ–‡ä»¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨åŸºæœ¬çš„é”®ç»‘å®šä¸ Emacs è¿›è¡Œäº¤äº’ã€‚æœ€åï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å®é™…ç¼–è¾‘ Clojure ä»£ç å¹¶ä¸ REPL è¿›è¡Œäº¤äº’ã€‚\nå®‰è£… ä½ åº”è¯¥ä½¿ç”¨ Emacs çš„æœ€æ–°ä¸»è¦ç‰ˆæœ¬ï¼Œå³ Emacs 24ï¼Œç”¨äºä½ å·¥ä½œçš„å¹³å°ã€‚\n OS Xä»*http://emacsformacosx.com*å®‰è£… vanilla Emacs ä½œä¸ºä¸€ä¸ª Mac åº”ç”¨ç¨‹åºã€‚å…¶ä»–é€‰é¡¹ï¼Œå¦‚ Aquamacsï¼Œåº”è¯¥æ˜¯ä¸ºäº†ä½¿ Emacs æ›´ \u0026ldquo;åƒ Mac\u0026rdquo;ï¼Œä½†ä»é•¿è¿œæ¥çœ‹æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå®ƒä»¬çš„è®¾ç½®ä¸æ ‡å‡† Emacs æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œä»¥è‡³äºå¾ˆéš¾ä½¿ç”¨ Emacs æ‰‹å†Œæˆ–è·Ÿéšæ•™ç¨‹ã€‚ UbuntuæŒ‰ç…§*https://launchpad.net/~cassou/+archive/emacs*ä¸Šçš„è¯´æ˜ã€‚ Windowsä½ å¯ä»¥åœ¨*Index of /gnu/emacs/windowsæ‰¾åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚åœ¨ä½ ä¸‹è½½å¹¶è§£å‹æœ€æ–°ç‰ˆæœ¬åï¼Œä½ å¯ä»¥åœ¨bin\\runemacs.exe*ä¸‹è¿è¡Œ Emacs å¯æ‰§è¡Œæ–‡ä»¶ã€‚  å®‰è£…å®Œ Emacs åï¼Œæ‰“å¼€å®ƒã€‚ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼å›¾ 2-2 çš„ä¸œè¥¿ã€‚\nå›¾ 2-2ï¼šå½“ä½ ç¬¬ä¸€æ¬¡æ‰“å¼€ Emacs æ—¶æ˜¾ç¤ºçš„å±å¹•\næ¬¢è¿æ¥åˆ° Emacs çš„å´‡æ‹œï¼ä½ å·²ç»ä½¿ Richard Stallman æˆä¸ºäº† Emacs çš„ä¸€å‘˜ã€‚ä½ è®© Richard Stallman æ„Ÿåˆ°éª„å‚²!\né…ç½® æˆ‘åˆ›å»ºäº†ä¸€ä¸ªåº“ï¼Œé‡Œé¢æœ‰ä¸º Clojure é…ç½® Emacs æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¯åœ¨https://github.com/flyingmachine/emacs-for-clojure/archive/book1.zipã€‚\næ³¨æ„ï¼šè¿™äº›å·¥å…·ä¸€ç›´åœ¨æ›´æ–°ï¼Œæ‰€ä»¥å¦‚æœä¸‹é¢çš„è¯´æ˜å¯¹ä½ ä¸èµ·ä½œç”¨ï¼Œæˆ–è€…ä½ æƒ³ä½¿ç”¨æœ€æ–°çš„é…ç½®ï¼Œè¯·é˜…è¯»GitHub - flyingmachine/emacs-for-clojureä¸Šçš„è¯´æ˜ã€‚\næŒ‰ä»¥ä¸‹æ­¥éª¤åˆ é™¤ä½ ç°æœ‰çš„ Emacs é…ç½®å¹¶å®‰è£…å¯¹ Clojure å‹å¥½çš„é…ç½®ã€‚\n  å…³é—­ Emacsã€‚\n  åˆ é™¤*~/.emacsæˆ–~/.emacs.d*ï¼Œå¦‚æœå®ƒä»¬å­˜åœ¨çš„è¯ã€‚(Windows ç”¨æˆ·ï¼Œä½ çš„ Emacs æ–‡ä»¶å¯èƒ½åœ¨C:\\Users\\your_user_name\\AppData\\Roaming*ã€‚å› æ­¤ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥åˆ é™¤C:\\Users\\jason\\AppData\\Roaming.emacs.d*ï¼‰ã€‚è¿™æ˜¯ Emacs å¯»æ‰¾é…ç½®æ–‡ä»¶çš„åœ°æ–¹ï¼Œåˆ é™¤è¿™äº›æ–‡ä»¶å’Œç›®å½•å°†ç¡®ä¿ä½ ä»ä¸€ä¸ªå¹²å‡€çš„åœ°æ–¹å¼€å§‹ã€‚\n  ä¸‹è½½ä¸Šé¢åˆ—å‡ºçš„ Emacs é…ç½®å‹ç¼©æ–‡ä»¶å¹¶è§£å‹ã€‚å…¶å†…å®¹åº”è¯¥æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œemacs-for-clojure-book1ã€‚è¿è¡Œ mv path/to/emacs-for-clojure-book1 ~/.emacs.dã€‚    æ‰“å¼€ Emacsã€‚\n  å½“ä½ æ‰“å¼€ Emacs æ—¶ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°å¤§é‡çš„æ´»åŠ¨ï¼Œå› ä¸º Emacs æ­£åœ¨ä¸‹è½½ä¸€å †æœ‰ç”¨çš„è½¯ä»¶åŒ…ã€‚ä¸€æ—¦è¿™äº›æ´»åŠ¨åœæ­¢ï¼Œç»§ç»­å‰è¿›ï¼Œé€€å‡º Emacsï¼Œç„¶åå†æ‰“å¼€å®ƒã€‚(å¦‚æœä½ æ²¡æœ‰çœ‹åˆ°ä»»ä½•æ´»åŠ¨ï¼Œé‚£ä¹Ÿæ²¡å…³ç³»ï¼é€€å‡ºå¹¶é‡æ–°å¯åŠ¨ Emacsã€‚é€€å‡ºå¹¶é‡æ–°å¯åŠ¨ Emacs åªæ˜¯ä¸ºäº†å¥½ç©ï¼‰ã€‚åœ¨ä½ è¿™æ ·åšä¹‹åï¼Œä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªåƒå›¾ 2-3 é‚£æ ·çš„çª—å£ã€‚\nå›¾ 2-3ï¼šEmacs åœ¨å®‰è£…äº†ä½ å¯çˆ±çš„æ–°é…ç½®åçš„æ ·å­\nç°åœ¨æˆ‘ä»¬å·²ç»è®¾ç½®å¥½äº†ä¸€åˆ‡ï¼Œè®©æˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Emacs!\nEmacs é€ƒé€¸èˆ±å£ åœ¨æˆ‘ä»¬è¿›å…¥æœ‰è¶£çš„ä¸œè¥¿ä¹‹å‰ï¼Œä½ éœ€è¦çŸ¥é“ä¸€ä¸ªé‡è¦çš„ Emacs é”®ç»‘å®šï¼šctrl-Gã€‚è¿™ä¸ªé”®ç»‘å®šå¯ä»¥é€€å‡ºä½ è¯•å›¾è¿è¡Œçš„ä»»ä½• Emacs å‘½ä»¤ã€‚æ‰€ä»¥ï¼Œå¦‚æœäº‹æƒ…è¿›å±•ä¸é¡ºåˆ©ï¼ŒæŒ‰ä½ ctrlï¼ŒæŒ‰ Gï¼Œç„¶åå†è¯•ä¸€æ¬¡ã€‚å®ƒä¸ä¼šå…³é—­ Emacsï¼Œä¹Ÿä¸ä¼šä½¿ä½ å¤±å»ä»»ä½•å·¥ä½œï¼›å®ƒåªæ˜¯å–æ¶ˆä½ å½“å‰çš„è¡ŒåŠ¨ã€‚\nEmacs ç¼“å†²åŒº æ‰€æœ‰çš„ç¼–è¾‘éƒ½å‘ç”Ÿåœ¨ Emacs çš„*ç¼“å†²åŒºä¸­ã€‚å½“ä½ ç¬¬ä¸€æ¬¡å¯åŠ¨ Emacs æ—¶ï¼Œä¸€ä¸ªåä¸º \u0026ldquo;scratch\u0026ldquo;çš„ç¼“å†²åŒºè¢«æ‰“å¼€ã€‚Emacs æ€»æ˜¯åœ¨çª—å£çš„åº•éƒ¨æ˜¾ç¤ºå½“å‰ç¼“å†²åŒºçš„åç§°ï¼Œå¦‚å›¾ 2-4 æ‰€ç¤ºã€‚\nå›¾ 2-4ï¼šEmacs ä¼šä¸€ç›´æ˜¾ç¤ºå½“å‰ç¼“å†²åŒºçš„åç§°ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œ*scratch*ç¼“å†²åŒºå¤„ç†æ‹¬å·å’Œç¼©è¿›çš„æ–¹å¼å¯¹ Lisp å¼€å‘æ¥è¯´æ˜¯æœ€ç†æƒ³çš„ï¼Œä½†å¯¹ç¼–å†™çº¯æ–‡æœ¬å´å¾ˆä¸æ–¹ä¾¿ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸å‘ç”Ÿæ„å¤–çš„æƒ…å†µä¸‹è¿›è¡Œæ¸¸æˆã€‚è¦åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºï¼Œè¯·è¿™æ ·åšã€‚\n æŒ‰ä½ ctrl é”®å¹¶æŒ‰ä¸‹ X é”®ã€‚ 2.æ¾å¼€ ctrl é”®ã€‚ æŒ‰ B é”®ã€‚  æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ›´ç´§å‡‘çš„æ ¼å¼æ¥è¡¨è¾¾åŒæ ·çš„åºåˆ—ã€‚Â C-x bã€‚\næ‰§è¡Œè¿™ä¸ªæŒ‰é”®åºåˆ—åï¼Œä½ ä¼šåœ¨åº”ç”¨ç¨‹åºçš„åº•éƒ¨çœ‹åˆ°ä¸€ä¸ªæç¤ºï¼Œå¦‚å›¾ 2-5 æ‰€ç¤ºã€‚\nå›¾ 2-5: è¿·ä½ ç¼“å†²åŒºæ˜¯ Emacs æç¤ºä½ è¾“å…¥çš„åœ°æ–¹ã€‚\nè¿™ä¸ªåŒºåŸŸè¢«ç§°ä¸ºminibufferï¼Œå®ƒæ˜¯ Emacs æç¤ºä½ è¾“å…¥çš„åœ°æ–¹ã€‚ç°åœ¨å®ƒæ­£åœ¨æç¤ºæˆ‘ä»¬è¾“å…¥ä¸€ä¸ªç¼“å†²åŒºçš„åç§°ã€‚ä½ å¯ä»¥è¾“å…¥ä¸€ä¸ªå·²ç»æ‰“å¼€çš„ç¼“å†²åŒºçš„åç§°ï¼Œä¹Ÿå¯ä»¥è¾“å…¥ä¸€ä¸ªæ–°çš„ç¼“å†²åŒºåç§°ã€‚è¾“å…¥ emacs-fun-timesï¼Œç„¶åæŒ‰å›è½¦é”®ã€‚ç°åœ¨ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªå®Œå…¨ç©ºç™½çš„ç¼“å†²åŒºï¼Œå¯ä»¥ç›´æ¥å¼€å§‹è¾“å…¥ã€‚ä½ ä¼šå‘ç°ï¼ŒæŒ‰é”®çš„å·¥ä½œæ–¹å¼ä¸ä½ æ‰€æœŸæœ›çš„å·®ä¸å¤šã€‚å­—ç¬¦åœ¨ä½ è¾“å…¥æ—¶å‡ºç°ã€‚ä¸Šã€ä¸‹ã€å·¦ã€å³æ–¹å‘é”®ä¼šåƒä½ æ‰€æœŸæœ›çš„é‚£æ ·ç§»åŠ¨ä½ ï¼Œè€Œå›è½¦é”®ä¼šåˆ›å»ºä¸€ä¸ªæ–°è¡Œã€‚\nä½ è¿˜ä¼šæ³¨æ„åˆ°ï¼Œä½ ä¸ä¼šçªç„¶é•¿å‡ºæµ“å¯†çš„ Unix èƒ¡é¡»æˆ–ç©¿ä¸Š Birkenstocksï¼ˆé™¤éä½ ä¸€å¼€å§‹å°±æœ‰ï¼‰ã€‚è¿™åº”è¯¥æœ‰åŠ©äºç¼“è§£ä½ å¯¹ä½¿ç”¨ Emacs çš„ä»»ä½•ææƒ§æ„Ÿã€‚å½“ä½ ç©å¤Ÿäº†ä¹‹åï¼Œç»§ç»­å‰è¿›ï¼Œé€šè¿‡è¾“å…¥C-x k enteræ¥æ€æ­»**çš„ç¼“å†²åŒºã€‚(è¿™å¯èƒ½ä¼šè®©äººåƒæƒŠï¼Œä½† Emacs å®é™…ä¸Šæ˜¯å¾ˆæš´åŠ›çš„ï¼Œå®ƒå……åˆ†ä½¿ç”¨äº†æ€è¿™ä¸ªè¯ï¼‰ã€‚\nç°åœ¨ä½ å·²ç»æ€æ­»äº†emacs-fun-timesç¼“å†²åŒºï¼Œä½ åº”è¯¥å›åˆ°*scratch*ç¼“å†²åŒºã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½ å¯ä»¥ç”¨C-x båˆ›å»ºä»»æ„å¤šçš„æ–°ç¼“å†²åŒºã€‚ä½ ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„å‘½ä»¤åœ¨ç¼“å†²åŒºä¹‹é—´å¿«é€Ÿåˆ‡æ¢ã€‚å½“ä½ ä»¥è¿™ç§æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºæ—¶ï¼Œå®ƒåªå­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´åˆ°ä½ æŠŠå®ƒä¿å­˜ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼›ç¼“å†²åŒºä¸ä¸€å®šæœ‰æ–‡ä»¶æ”¯æŒï¼Œåˆ›å»ºä¸€ä¸ªç¼“å†²åŒºä¹Ÿä¸ä¸€å®šä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚è®©æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹å…³äºæ–‡ä»¶çš„å·¥ä½œã€‚\nä¸æ–‡ä»¶ä¸€èµ·å·¥ä½œ åœ¨ Emacs ä¸­æ‰“å¼€æ–‡ä»¶çš„é”®ä½æ˜¯C-x C-fã€‚æ³¨æ„ï¼Œå½“ä½ æŒ‰ä¸‹ X å’Œ F æ—¶ï¼Œä½ éœ€è¦æŒ‰ä½ ctrlã€‚å¯¼èˆªåˆ°*~/.emacs.d/customizations/ui.el*ï¼Œå®ƒå¯ä»¥è‡ªå®šä¹‰ Emacs çš„å¤–è§‚å’Œä½ ä¸å®ƒçš„äº’åŠ¨æ–¹å¼ã€‚Emacs åœ¨ä¸€ä¸ªä¸æ–‡ä»¶åç›¸åŒçš„æ–°ç¼“å†²åŒºä¸­æ‰“å¼€æ–‡ä»¶ã€‚è®©æˆ‘ä»¬è½¬åˆ°ç¬¬ 37 è¡Œï¼Œå»æ‰å‰é¢çš„åˆ†å·ï¼Œå–æ¶ˆæ³¨é‡Šã€‚å®ƒå°†çœ‹èµ·æ¥åƒè¿™æ ·ã€‚\n(setq initial-frame-alist \u0026#39;((top . 0) (left . 0) (width . 120) (height . 80)) ç„¶åæ”¹å˜ \u0026ldquo;width \u0026ldquo;å’Œ \u0026ldquo;height \u0026ldquo;çš„å€¼ï¼Œå®ƒä»¬ä¸ºæ´»åŠ¨çª—å£è®¾ç½®å­—ç¬¦çš„å°ºå¯¸ã€‚é€šè¿‡æ”¹å˜è¿™äº›å€¼ï¼Œä½ å¯ä»¥è®¾ç½® Emacs çª—å£åœ¨æ¯æ¬¡å¯åŠ¨æ—¶ä»¥æŸç§å°ºå¯¸æ‰“å¼€ã€‚ä¸€å¼€å§‹å¯ä»¥è¯•è¯•å°ä¸€ç‚¹çš„ï¼Œæ¯”å¦‚ 80 å’Œ 20ã€‚\n(setq initial-frame-alist \u0026#39;((top . 0) (left . 0) (width . 80) (height . 20)) ç°åœ¨ç”¨ä¸‹é¢çš„é”®ç»‘å®šæ¥ä¿å­˜ä½ çš„æ–‡ä»¶ã€‚Â C-x C-sã€‚ä½ åº”è¯¥åœ¨ Emacs çš„åº•éƒ¨å¾—åˆ°ä¸€ä¸ªä¿¡æ¯ï¼Œå¦‚å†™äº†/Users/snuffleupagus/.emacs.d/customizations/ui.el`ã€‚ä½ ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ä½ åœ¨å…¶ä»–åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„é”®ç»‘å®šæ¥ä¿å­˜ä½ çš„ç¼“å†²åŒºï¼ˆä¾‹å¦‚ï¼Œctrl-S æˆ– cmd-Sï¼‰ã€‚ä½ ä¸‹è½½çš„ Emacs é…ç½®åº”è¯¥å…è®¸è¿™æ ·åšï¼Œä½†å¦‚æœä¸å…è®¸ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚\nä¿å­˜æ–‡ä»¶åï¼Œé€€å‡º Emacs å¹¶å†æ¬¡å¯åŠ¨å®ƒã€‚æˆ‘æ•¢æ‰“èµŒï¼Œå®ƒéå¸¸å°! è¯·çœ‹æˆ‘åœ¨å›¾ 2-6 ä¸­çš„ä¾‹å­ã€‚\nå›¾ 2-6ï¼šä½ å¯ä»¥é…ç½® Emacsï¼Œä½¿å…¶åœ¨æ¯æ¬¡æ‰“å¼€æ—¶éƒ½è®¾ç½®é«˜åº¦å’Œå®½åº¦ã€‚\nåŒæ ·çš„è¿‡ç¨‹è¦è¿›è¡Œå‡ æ¬¡ï¼Œç›´åˆ° Emacs ä»¥ä½ å–œæ¬¢çš„å°ºå¯¸å¼€å§‹ã€‚æˆ–è€…å†æŠŠè¿™å‡ è¡Œæ³¨é‡Šæ‰å°±å¯ä»¥äº†ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒEmacs å°†ä»¥å…¶é»˜è®¤çš„å®½åº¦å’Œé«˜åº¦æ‰“å¼€ï¼‰ã€‚å¦‚æœä½ å®Œæˆäº†å¯¹ui.elçš„ç¼–è¾‘ï¼Œä½ å¯ä»¥ç”¨C-x kå…³é—­å…¶ç¼“å†²åŒºã€‚æ— è®ºå¦‚ä½•ï¼Œä½ å·²ç»å®Œæˆäº†åœ¨ Emacs ä¸­ä¿å­˜ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„å·¥ä½œ å¦‚æœå‘ç”Ÿäº†ä¸€äº›ç–¯ç‹‚çš„äº‹æƒ…ï¼Œä½ å¯ä»¥æŒ‰ç…§ç¬¬ 13 é¡µçš„ \u0026ldquo;é…ç½®\u0026rdquo;ä¸­çš„æŒ‡ç¤ºæ¥ä½¿ Emacs é‡æ–°å·¥ä½œã€‚\nå¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œåªéœ€ä½¿ç”¨C-x C-få¹¶åœ¨è¿·ä½ ç¼“å†²åŒºä¸­è¾“å…¥æ–°æ–‡ä»¶çš„è·¯å¾„ã€‚ä¸€æ—¦ä½ ä¿å­˜äº†ç¼“å†²åŒºï¼ŒEmacs å°±ä¼šæŒ‰ç…§ä½ è¾“å…¥çš„è·¯å¾„ç”¨ç¼“å†²åŒºçš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚\nè®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ã€‚\n åœ¨ Emacs ä¸­ï¼Œç¼–è¾‘æ˜¯åœ¨ç¼“å†²åŒº*.*ä¸­è¿›è¡Œçš„ã€‚ è¦åˆ‡æ¢åˆ°ä¸€ä¸ªç¼“å†²åŒºï¼Œä½¿ç”¨C-x bå¹¶åœ¨ minibuffer*.*ä¸­è¾“å…¥ç¼“å†²åŒºçš„åç§°ã€‚ è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œä½¿ç”¨C-x bå¹¶è¾“å…¥ä¸€ä¸ªæ–°çš„ç¼“å†²åŒºåç§°ã€‚ è¦æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨C-x C-få¹¶å¯¼èˆªåˆ°è¯¥æ–‡ä»¶ã€‚  è¦å°†ç¼“å†²åŒºä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨C-x C-sã€‚   è¦åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œä½¿ç”¨C-x C-få¹¶è¾“å…¥æ–°æ–‡ä»¶çš„è·¯å¾„ã€‚å½“ä½ ä¿å­˜ç¼“å†²åŒºæ—¶ï¼ŒEmacs å°†åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºæ–‡ä»¶ã€‚  é”®ç»‘å®šå’Œæ¨¡å¼ ä½ å·²ç»èµ°äº†å¾ˆé•¿ä¸€æ®µè·¯äº†! ä½ ç°åœ¨å¯ä»¥åƒä¸€ä¸ªéå¸¸åŸºæœ¬çš„ç¼–è¾‘å™¨ä¸€æ ·ä½¿ç”¨ Emacsã€‚å¦‚æœä½ éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ Emacsï¼Œæˆ–è€…è¢«è¿«ä¸ Emacs ä¹¦å‘†å­é…å¯¹ï¼Œè¿™åº”è¯¥èƒ½å¸®åŠ©ä½ åº¦è¿‡éš¾å…³ã€‚\nç„¶è€Œï¼Œè¦æƒ³çœŸæ­£æœ‰æˆæ•ˆï¼Œäº†è§£ä¸€äº›å…³äºé”®ç»‘å®šçš„*å…³é”®ç»†èŠ‚å¯¹ä½ æ¥è¯´æ˜¯å¾ˆæœ‰ç”¨çš„ï¼ˆå“ˆå“ˆï¼ï¼‰ã€‚ç„¶åæˆ‘å°†ä»‹ç» Emacs æ¨¡å¼ã€‚ä¹‹åï¼Œæˆ‘å°†ä»‹ç»ä¸€äº›æ ¸å¿ƒæœ¯è¯­ï¼Œå¹¶ä»‹ç»ä¸€äº›è¶…çº§æœ‰ç”¨çš„é”®ç»‘å®šã€‚\nEmacs æ˜¯ä¸€ä¸ª Lisp è§£é‡Šå™¨ æœ¯è¯­é”®ç»‘å®šæºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼šEmacs å°†é”®å‡»æ‰“ç»‘å®šåˆ°å‘½ä»¤ä¸Šï¼Œè€Œè¿™äº›å‘½ä»¤åªæ˜¯ elisp å‡½æ•°ï¼ˆæˆ‘å°†äº¤æ›¿ä½¿ç”¨å‘½ä»¤å’Œå‡½æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼ŒC-x bè¢«ç»‘å®šåˆ°å‡½æ•°switch-to-bufferã€‚åŒæ ·åœ°ï¼ŒC-x C-sä¸save-fileç»‘å®šã€‚\nä½† Emacs ç”šè‡³æ¯”è¿™æ›´è¿›ä¸€æ­¥ã€‚ç”šè‡³åƒfå’Œaè¿™æ ·ç®€å•çš„æŒ‰é”®ä¹Ÿè¢«ç»‘å®šåˆ°ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ \u0026ldquo;self-insert-command\u0026rdquo;ï¼Œæ˜¯å‘ä½ æ­£åœ¨ç¼–è¾‘çš„ç¼“å†²åŒºæ·»åŠ å­—ç¬¦çš„å‘½ä»¤ã€‚\nä» Emacs çš„è§’åº¦æ¥çœ‹ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯å¹³ç­‰çš„ï¼Œä½ å¯ä»¥é‡æ–°å®šä¹‰æ‰€æœ‰çš„å‡½æ•°ï¼Œç”šè‡³åƒsave-fileè¿™æ ·çš„æ ¸å¿ƒå‡½æ•°ã€‚ä½ å¯èƒ½ä¸ä¼šæƒ³è¦é‡æ–°å®šä¹‰æ ¸å¿ƒå‡½æ•°ï¼Œä½†ä½ å¯ä»¥ã€‚\nä½ å¯ä»¥é‡æ–°å®šä¹‰å‡½æ•°ï¼Œå› ä¸ºå°±å…¶æ ¸å¿ƒè€Œè¨€ï¼ŒEmacs åªæ˜¯ä¸€ä¸ª Lisp è§£é‡Šå™¨ï¼Œæ°å¥½åŠ è½½äº†ä»£ç ç¼–è¾‘åŠŸèƒ½ã€‚Emacs çš„å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯ç”¨ elisp ç¼–å†™çš„ï¼Œæ‰€ä»¥ä» Emacs çš„è§’åº¦æ¥çœ‹ï¼Œsave-fileåªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±åƒswitch-to-bufferå’Œä½ èƒ½è¿è¡Œçš„å‡ ä¹æ‰€æœ‰å…¶ä»–å‘½ä»¤ä¸€æ ·ã€‚ä¸ä»…å¦‚æ­¤ï¼Œä½ åˆ›å»ºçš„ä»»ä½•å‡½æ•°éƒ½è¢«å½“ä½œå†…ç½®å‡½æ•°æ¥å¯¹å¾…ã€‚ä½ ç”šè‡³å¯ä»¥ç”¨ Emacs æ¥æ‰§è¡Œ elispï¼Œåœ¨å®ƒè¿è¡Œæ—¶ä¿®æ”¹ Emacsã€‚\nä½¿ç”¨å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ä¿®æ”¹ Emacs çš„è‡ªç”±æ˜¯ Emacs å¦‚æ­¤çµæ´»çš„åŸå› ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåƒæˆ‘è¿™æ ·çš„äººå¯¹å®ƒå¦‚æ­¤ç–¯ç‹‚ã€‚æ˜¯çš„ï¼Œå®ƒæœ‰å¾ˆå¤šè¡¨é¢ä¸Šçš„å¤æ‚æ€§ï¼Œå¯èƒ½éœ€è¦èŠ±æ—¶é—´å»å­¦ä¹ ã€‚ä½† Emacs çš„åº•å±‚æ˜¯ Lisp çš„ä¼˜é›…ç®€æ´ï¼Œä»¥åŠéšä¹‹è€Œæ¥çš„æ— é™çš„å¯ä¿®è¡¥æ€§ã€‚è¿™ç§å¯ä¿®è¡¥æ€§å¹¶ä¸å±€é™äºåˆ›å»ºå’Œé‡æ–°å®šä¹‰å‡½æ•°ã€‚ä½ è¿˜å¯ä»¥åˆ›å»ºã€é‡æ–°å®šä¹‰å’Œåˆ é™¤é”®ç»‘å®šã€‚ä»æ¦‚å¿µä¸Šè®²ï¼ŒæŒ‰é”®ç»‘å®šåªæ˜¯ä¸€ä¸ªæŸ¥è¯¢è¡¨ä¸­çš„æ¡ç›®ï¼Œå®ƒå°†æŒ‰é”®ä¸å‡½æ•°è”ç³»èµ·æ¥ï¼Œè€Œè¿™ä¸ªæŸ¥è¯¢è¡¨æ˜¯å®Œå…¨å¯ä¿®æ”¹çš„ã€‚\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨M-xå‡½æ•°åç§°æ¥è¿è¡Œå‘½ä»¤ï¼Œè€Œä¸éœ€è¦ç‰¹å®šçš„é”®ç»‘å®šï¼ˆä¾‹å¦‚ï¼ŒM-x save-bufferï¼‰ã€‚Â Mä»£è¡¨metaï¼Œè¿™æ˜¯ä¸€ä¸ªç°ä»£é”®ç›˜ä¸å…·å¤‡çš„é”®ï¼Œä½†åœ¨ Windows å’Œ Linux ä¸Šè¢« Map åˆ° altï¼Œåœ¨ Mac ä¸Šåˆ™æ˜¯ optionã€‚Â M-xè¿è¡Œsmexå‘½ä»¤ï¼Œå®ƒæç¤ºä½ è¦è¿è¡Œçš„å¦ä¸€ä¸ªå‘½ä»¤çš„åç§°ã€‚\nç°åœ¨ä½ å·²ç»äº†è§£äº†é”®çš„ç»‘å®šå’ŒåŠŸèƒ½ï¼Œä½ å°†èƒ½å¤Ÿç†è§£ä»€ä¹ˆæ˜¯æ¨¡å¼ä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\næ¨¡å¼ Emacs çš„æ¨¡å¼æ˜¯ä¸€ä¸ªé”®ç»‘å®šå’ŒåŠŸèƒ½çš„é›†åˆï¼Œå®ƒè¢«æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œå¸®åŠ©ä½ åœ¨ç¼–è¾‘ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶æé«˜å·¥ä½œæ•ˆç‡ã€‚(æ¨¡å¼ä¹Ÿå¯ä»¥åšä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚å‘Šè¯‰ Emacs å¦‚ä½•åšè¯­æ³•é«˜äº®ï¼Œä½†è¿™æ˜¯æ¬¡è¦çš„ï¼Œæˆ‘ä¸ä¼šåœ¨è¿™é‡Œä»‹ç»ã€‚)\nä¾‹å¦‚ï¼Œå½“ä½ åœ¨ç¼–è¾‘ä¸€ä¸ª Clojure æ–‡ä»¶æ—¶ï¼Œä½ ä¼šæƒ³åŠ è½½ Clojure æ¨¡å¼ã€‚ç°åœ¨æˆ‘æ­£åœ¨å†™ä¸€ä¸ª Markdown æ–‡ä»¶å¹¶ä½¿ç”¨ Markdown æ¨¡å¼ï¼Œå®ƒæœ‰å¾ˆå¤šä¸“é—¨ç”¨äº Markdown å·¥ä½œçš„æœ‰ç”¨çš„é”®ç»‘å®šã€‚åœ¨ç¼–è¾‘ Clojure æ—¶ï¼Œæœ€å¥½æœ‰ä¸€å¥— Clojure ä¸“ç”¨çš„é”®ç»‘å®šï¼Œæ¯”å¦‚C-c C-kå°†å½“å‰çš„ç¼“å†²åŒºåŠ è½½åˆ° REPL ä¸­å¹¶è¿›è¡Œç¼–è¯‘ã€‚\næ¨¡å¼æœ‰ä¸¤ç§ç±»å‹ã€‚Â ä¸»è¦æ¨¡å¼å’Œæ¬¡è¦æ¨¡å¼ã€‚Markdown æ¨¡å¼å’Œ Clojure æ¨¡å¼æ˜¯ä¸»è¦æ¨¡å¼ã€‚ä¸»è¦æ¨¡å¼é€šå¸¸åœ¨ä½ æ‰“å¼€æ–‡ä»¶æ—¶ç”± Emacs è®¾ç½®ï¼Œä½†ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿è¡Œç›¸å…³çš„ Emacs å‘½ä»¤æ˜ç¡®åœ°è®¾ç½®æ¨¡å¼ï¼Œä¾‹å¦‚ç”¨M-x clojure-mode æˆ–M-x major-modeã€‚æ¯æ¬¡åªæœ‰ä¸€ç§ä¸»è¦æ¨¡å¼æ˜¯æ¿€æ´»çš„ã€‚\nä¸»è¦æ¨¡å¼æ˜¯é’ˆå¯¹æŸç§æ–‡ä»¶ç±»å‹æˆ–è¯­è¨€çš„ Emacsï¼Œè€Œæ¬¡è¦æ¨¡å¼é€šå¸¸æä¾›å¯¹å„ç§æ–‡ä»¶ç±»å‹éƒ½æœ‰ç”¨çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œabbrev æ¨¡å¼ \u0026ldquo;æ ¹æ®é¢„å…ˆå®šä¹‰çš„ç¼©å†™å®šä¹‰è‡ªåŠ¨å±•å¼€æ–‡æœ¬\u0026rdquo;ï¼ˆæ ¹æ® Emacs æ‰‹å†Œ1.ï¼‰ã€‚ä½ å¯ä»¥åŒæ—¶æ¿€æ´»å¤šä¸ªæ¬¡è¦æ¨¡å¼ã€‚\nä½ å¯ä»¥åœ¨*æ¨¡å¼è¡Œä¸­çœ‹åˆ°å“ªäº›æ¨¡å¼å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œå¦‚å›¾ 2-7 æ‰€ç¤ºã€‚\nå›¾ 2-7ï¼šæ¨¡å¼è¡Œæ˜¾ç¤ºå“ªäº›æ¨¡å¼æ˜¯æ´»åŠ¨çš„ã€‚\nå¦‚æœä½ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œ Emacs æ²¡æœ‰ä¸ºå®ƒåŠ è½½ä¸€ä¸ªä¸»è¦æ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¨¡å¼å¾ˆæœ‰å¯èƒ½å­˜åœ¨ã€‚ä½ åªéœ€è¦ä¸‹è½½å®ƒçš„è½¯ä»¶åŒ…ã€‚è¯´åˆ°è¿™ä¸ª \u0026hellip; .\nå®‰è£…è½¯ä»¶åŒ… è®¸å¤šæ¨¡å¼éƒ½æ˜¯ä»¥åŒ…çš„å½¢å¼å‘å¸ƒçš„ï¼Œè¿™åªæ˜¯å­˜å‚¨åœ¨åŒ…ä»“åº“ä¸­çš„ elisp æ–‡ä»¶çš„æ†ç»‘ã€‚ä½ åœ¨æœ¬ç« å¼€å§‹æ—¶å®‰è£…çš„ Emacs 24ï¼Œä½¿æµè§ˆå’Œå®‰è£…è½¯ä»¶åŒ…å˜å¾—éå¸¸å®¹æ˜“ã€‚Â M-x package-list-packages ä¼šæ˜¾ç¤ºå‡ ä¹æ‰€æœ‰å¯ç”¨çš„è½¯ä»¶åŒ…ï¼›åªè¦ç¡®ä¿ä½ å…ˆè¿è¡ŒM-x package-refresh-contents å°±èƒ½å¾—åˆ°æœ€æ–°çš„åˆ—è¡¨ã€‚ä½ å¯ä»¥ç”¨M-x package-install æ¥å®‰è£…è½¯ä»¶åŒ…ã€‚\nä½ ä¹Ÿå¯ä»¥é€šè¿‡åŠ è½½ä½ è‡ªå·±çš„ elisp æ–‡ä»¶æˆ–ä½ åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„æ–‡ä»¶æ¥å®šåˆ¶ Emacsã€‚Emacs åˆå­¦è€…æŒ‡å—ã€‹ï¼ˆè§*http://www.masteringemacs.org/articles/2010/10/04/beginners-guide-to-emacs/*ï¼‰åœ¨æ–‡ç« åº•éƒ¨çš„ \u0026ldquo;åŠ è½½æ–°åŒ… \u0026ldquo;ä¸€èŠ‚ä¸­å¯¹å¦‚ä½•åŠ è½½è‡ªå®šä¹‰æ–‡ä»¶æœ‰å¾ˆå¥½çš„æè¿°ã€‚\næ ¸å¿ƒç¼–è¾‘æœ¯è¯­å’Œé”®ç»‘å®š å¦‚æœä½ åªæƒ³æŠŠ Emacs å½“åšä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨æ¥ä½¿ç”¨ï¼Œä½ å¯ä»¥å®Œå…¨è·³è¿‡è¿™ä¸€èŠ‚ï¼ä½†ä½ å°†ä¼šé”™è¿‡å¾ˆå¤šä¸œè¥¿ã€‚ä½†ä½ å°†ä¼šé”™è¿‡ä¸€äº›å¥½ä¸œè¥¿ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç» Emacs çš„å…³é”®æœ¯è¯­ï¼›å¦‚ä½•é€‰æ‹©ã€å‰ªåˆ‡ã€å¤åˆ¶å’Œç²˜è´´æ–‡æœ¬ï¼›å¦‚ä½•é€‰æ‹©ã€å‰ªåˆ‡ã€å¤åˆ¶å’Œç²˜è´´æ–‡æœ¬ï¼ˆçœ‹åˆ°æˆ‘åšäº†ä»€ä¹ˆå—ï¼Ÿ å“ˆå“ˆå“ˆï¼ï¼‰ï¼›ä»¥åŠå¦‚ä½•æœ‰æ•ˆåœ°åœ¨ç¼“å†²åŒºå†…ç§»åŠ¨ã€‚\nè¦æƒ³å¼€å§‹ï¼Œè¯·åœ¨ Emacs ä¸­æ‰“å¼€ä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œå¹¶å°†å…¶å‘½åä¸ºjack-handyã€‚ç„¶åè¾“å…¥ä»¥ä¸‹æ°å…‹-æ±‰è¿ªçš„è¯­å½•ã€‚\nIf you were a pirate, you know what would be the one thing that would really make you mad? Treasure chests with no handles. How the hell are you supposed to carry it?!  The face of a child can say it all, especially the mouth part of the face.  To me, boxing is like a ballet, except there\u0026#39;s no music, no choreography, and the dancers hit each other. ç”¨è¿™ä¸ªä¾‹å­æ¥è¯•éªŒæœ¬èŠ‚ä¸­çš„å¯¼èˆªå’Œç¼–è¾‘ã€‚\nç‚¹ å¦‚æœä½ ä¸€ç›´åœ¨å…³æ³¨ï¼Œä½ åº”è¯¥åœ¨ä½ çš„ Emacs ç¼“å†²åŒºçœ‹åˆ°ä¸€ä¸ªæ©˜çº¢è‰²çš„çŸ©å½¢ã€‚è¿™å°±æ˜¯æ¸¸æ ‡ï¼Œå®ƒæ˜¯ç‚¹çš„å›¾å½¢è¡¨ç¤ºã€‚ç‚¹æ˜¯æ‰€æœ‰é­”æ³•å‘ç”Ÿçš„åœ°æ–¹ï¼šä½ åœ¨ç‚¹ä¸Šæ’å…¥æ–‡æœ¬ï¼Œå¤§å¤šæ•°ç¼–è¾‘å‘½ä»¤éƒ½æ˜¯ä¸ç‚¹æœ‰å…³çš„ã€‚å³ä½¿ä½ çš„å…‰æ ‡çœ‹èµ·æ¥æ˜¯åœ¨ä¸€ä¸ªå­—ç¬¦çš„ä¸Šé¢ï¼Œä½†ç‚¹å®é™…ä¸Šæ˜¯ä½äºè¯¥å­—ç¬¦å’Œå‰ä¸€ä¸ªå­—ç¬¦ä¹‹é—´ã€‚\nä¾‹å¦‚ï¼ŒæŠŠä½ çš„å…‰æ ‡æ”¾åœ¨If you were a pirateä¸­çš„fä¸Šã€‚ç‚¹å°±ä½äºIå’Œfä¹‹é—´ã€‚ç°åœ¨ï¼Œå¦‚æœä½ ä½¿ç”¨C-kï¼Œä»å­—æ¯få¼€å§‹çš„æ‰€æœ‰æ–‡å­—å°†æ¶ˆå¤±ã€‚Â C-kè¿è¡Œå‘½ä»¤kill-lineï¼Œå®ƒ*æ€äº†å½“å‰è¡Œä¸­ä»ç‚¹å¼€å§‹çš„æ‰€æœ‰æ–‡å­—ï¼ˆæˆ‘å°†åœ¨åé¢è®²åˆ°æ›´å¤šçš„æ€æˆ®ï¼‰ã€‚ç”¨**C-/**æ’¤é”€è¿™ä¸€æ”¹å˜ã€‚å¦å¤–ï¼Œå°è¯•ç”¨æ­£å¸¸çš„æ“ä½œç³»ç»Ÿçš„é”®ç»‘å®šæ¥æ’¤æ¶ˆï¼›è¿™ä¹Ÿåº”è¯¥æ˜¯æœ‰æ•ˆçš„ã€‚\nç§»åŠ¨ ä½ å¯ä»¥åƒå…¶ä»–ç¼–è¾‘å™¨ä¸€æ ·ç”¨æ–¹å‘é”®æ¥ç§»åŠ¨ç‚¹ï¼Œä½†è®¸å¤šé”®çš„ç»‘å®šå¯ä»¥è®©ä½ æ›´æœ‰æ•ˆåœ°è¿›è¡Œå¯¼èˆªï¼Œå¦‚è¡¨ 2-1 æ‰€ç¤ºã€‚\n è¡¨ 2-1: æ–‡æœ¬å¯¼èˆªçš„é”®ä½ç»‘å®š     å…³é”®å­— æè¿°     C-a ç§»åŠ¨åˆ°è¡Œé¦–ã€‚   M-m ç§»åŠ¨åˆ°è¯¥è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ã€‚   C-e ç§»åŠ¨åˆ°è¡Œå°¾ã€‚   C-f å‘å‰ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚   *C-b *å‘åç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚    M-f å‘å‰ç§»åŠ¨ä¸€ä¸ªå­—ï¼ˆæˆ‘ç»å¸¸ç”¨è¿™ä¸ªï¼‰ã€‚   M-b å‘åç§»åŠ¨ä¸€ä¸ªå­—ï¼ˆæˆ‘ä¹Ÿç»å¸¸ç”¨è¿™ä¸ªï¼‰ã€‚   C-s Regex æœç´¢å½“å‰ç¼“å†²åŒºå†…çš„æ–‡æœ¬ï¼Œå¹¶ç§»åŠ¨åˆ°å®ƒã€‚å†æŒ‰ä¸€æ¬¡C-sï¼Œç§»åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…ã€‚   C-r ä¸C-sç›¸åŒï¼Œä½†ä»¥åå‘æ–¹å¼æœç´¢ã€‚   M-\u0026lt; ç§»åˆ°ç¼“å†²åŒºçš„å¼€å¤´ã€‚   M-\u0026gt; ç§»åŠ¨åˆ°ç¼“å†²åŒºçš„æœ«ç«¯ã€‚   M-g g è½¬åˆ°è¯¥è¡Œã€‚    æ¥å§ï¼Œåœ¨ä½ çš„***ç¼“å†²åŒºé‡Œè¯•è¯•è¿™äº›é”®çš„ç»‘å®š!\nå¸¦åŒºåŸŸçš„é€‰æ‹© åœ¨ Emacs ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸é€‰æ‹©æ–‡æœ¬ã€‚æˆ‘ä»¬åˆ›å»ºåŒºåŸŸï¼Œå¹¶é€šè¿‡ç”¨C-spcï¼ˆctrl-spacebarï¼‰è®¾ç½®*æ ‡è®°æ¥å®ç°ã€‚ç„¶åï¼Œå½“ä½ ç§»åŠ¨ç‚¹æ—¶ï¼Œæ ‡è®°å’Œç‚¹ä¹‹é—´çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯åŒºåŸŸã€‚è¿™ä¸ shift é€‰æ‹©æ–‡æœ¬çš„åŸºæœ¬ç›®çš„éå¸¸ç›¸ä¼¼ã€‚\nä¾‹å¦‚ï¼Œåœ¨ä½ çš„****ç¼“å†²åŒºé‡Œåšä»¥ä¸‹äº‹æƒ…ã€‚\n è½¬åˆ°æ–‡ä»¶çš„å¼€å¤´ã€‚ ä½¿ç”¨C-spcã€‚ ä½¿ç”¨M-fä¸¤æ¬¡ã€‚ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªé«˜äº®çš„åŒºåŸŸï¼ŒåŒ…æ‹¬If youã€‚  æŒ‰é€€æ ¼é”®ã€‚è¿™å°†ä¼šåˆ é™¤å¦‚æœä½ ã€‚    ä½¿ç”¨æ ‡è®°è€Œä¸æ˜¯ Shift é€‰æ‹©æ–‡æœ¬çš„ä¸€ä¸ªå¾ˆé…·çš„äº‹æƒ…æ˜¯ï¼Œä½ å¯ä»¥åœ¨è®¾ç½®æ ‡è®°åè‡ªç”±ä½¿ç”¨ Emacs çš„æ‰€æœ‰ç§»åŠ¨å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªæ ‡è®°ï¼Œç„¶åç”¨C-sæ¥æœç´¢ç¼“å†²åŒºå†…å‡ ç™¾è¡Œçš„ä¸€äº›æ–‡æœ¬ã€‚è¿™æ ·åšå°†åˆ›å»ºä¸€ä¸ªéå¸¸å¤§çš„åŒºåŸŸï¼Œè€Œä½ å°±ä¸å¿…ç´§å¼ åœ°æŒ‰ä½ Shift é”®äº†ã€‚\nåŒºåŸŸè¿˜å¯ä»¥è®©ä½ æŠŠä¸€ä¸ªæ“ä½œé™åˆ¶åœ¨ç¼“å†²åŒºçš„æœ‰é™åŒºåŸŸå†…ã€‚è¯•è¯•è¿™ä¸ªã€‚\n åˆ›å»ºä¸€ä¸ªåŒºåŸŸï¼ŒåŒ…æ‹¬å­©å­çš„è„¸å¯ä»¥è¯´æ˜ä¸€åˆ‡ã€‚  ä½¿ç”¨M-xæ›¿æ¢å­—ç¬¦ä¸²ï¼Œç”¨headæ›¿æ¢faceã€‚    è¿™å°†åœ¨å½“å‰åŒºåŸŸå†…è¿›è¡Œæ›¿æ¢ï¼Œè€Œä¸æ˜¯åœ¨ç‚¹ä¹‹åçš„æ•´ä¸ªç¼“å†²åŒºå†…è¿›è¡Œæ›¿æ¢ï¼Œè¿™æ˜¯é»˜è®¤è¡Œä¸ºã€‚\næ€æˆ®å’Œæ€æˆ®ç¯ åœ¨å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡å‰²æ–‡æœ¬ï¼Œè¿™åªæ˜¯è½»å¾®çš„æš´åŠ›ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å¤åˆ¶å’Œç²˜è´´ã€‚å‰ªåˆ‡å’Œå¤åˆ¶å°†é€‰æ‹©çš„å†…å®¹æ·»åŠ åˆ°å‰ªè´´æ¿ä¸Šï¼Œè€Œç²˜è´´åˆ™å°†å‰ªè´´æ¿ä¸Šçš„å†…å®¹å¤åˆ¶åˆ°å½“å‰çš„åº”ç”¨ç¨‹åºä¸­ã€‚åœ¨ Emacs ä¸­ï¼Œæˆ‘ä»¬é‡‡å–æ€äººçš„æ–¹æ³•ï¼Œæ€åŒºåŸŸï¼ŒæŠŠå®ƒä»¬åŠ å…¥åˆ°æ€åœˆã€‚å½“ä½ çŸ¥é“ä½ æ­£åœ¨æµªè´¹æ•°åƒå­—èŠ‚çš„æ–‡æœ¬æ—¶ï¼Œä½ ä¸è§‰å¾—å‹‡æ•¢å’Œåšå¼ºå—ï¼Ÿç„¶åæˆ‘ä»¬å¯ä»¥yankï¼Œåœ¨ç‚¹ä¸Šæ’å…¥æœ€è¿‘æ€æ­»çš„æ–‡æœ¬ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å¤åˆ¶æ–‡æœ¬åˆ°æ€æˆ®ç¯ï¼Œè€Œä¸éœ€è¦çœŸæ­£æ€æ­»å®ƒã€‚\nä¸ºä»€ä¹ˆè¦ç”¨è¿™äº›ç—…æ€çš„æœ¯è¯­å‘¢ï¼Ÿå—¯ï¼Œé¦–å…ˆï¼Œå½“ä½ å¬åˆ°æœ‰äººåœ¨ Emacs ä¸­è°ˆè®ºæ€æ­»ä¸œè¥¿æ—¶ï¼Œä½ ä¸ä¼šæ„Ÿåˆ°å®³æ€•ã€‚ä½†æ›´é‡è¦çš„æ˜¯ï¼ŒEmacs å…è®¸ä½ åšä¸€äº›å…¸å‹çš„å‰ªåˆ‡/å¤åˆ¶/ç²˜è´´å‰ªè´´æ¿åŠŸèƒ½é›†æ‰€ä¸èƒ½åšçš„å·¥ä½œã€‚\nEmacs åœ¨æ€æˆ®ç¯ä¸Šå­˜å‚¨äº†å¤šä¸ªæ–‡æœ¬å—ï¼Œä½ å¯ä»¥å¾ªç¯ä½¿ç”¨å®ƒä»¬ã€‚è¿™å¾ˆé…·ï¼Œå› ä¸ºä½ å¯ä»¥é€šè¿‡å¾ªç¯æ¥æ‰¾å›ä½ å¾ˆä¹…ä¹‹å‰æ€æ­»çš„æ–‡æœ¬ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªåŠŸèƒ½çš„å®é™…åº”ç”¨ã€‚\n åœ¨ç¬¬ä¸€è¡Œçš„Treasureè¿™ä¸ªè¯ä¸Šåˆ›å»ºä¸€ä¸ªåŒºåŸŸã€‚ 2.ä½¿ç”¨M-wï¼Œå®ƒä¸ \u0026ldquo;æ€æ­»-å¾ªç¯-ä¿å­˜ \u0026ldquo;å‘½ä»¤ç»‘å®šã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒM-wå°±åƒå¤åˆ¶ä¸€æ ·ã€‚å®ƒå°†è¯¥åŒºåŸŸæ·»åŠ åˆ°æ€æˆ®ç¯ä¸­ï¼Œè€Œä¸ä»ä½ çš„ç¼“å†²åŒºä¸­åˆ é™¤å®ƒã€‚ å°†æŒ‡é’ˆç§»åˆ°æœ€åä¸€è¡Œçš„choreographyå­—æ ·ä¸Šã€‚ ä½¿ç”¨M-dï¼Œå®ƒä¸kill-wordå‘½ä»¤ç»‘å®šã€‚è¿™å°†æŠŠchoreogra**phyæ·»åŠ åˆ°æ€æˆ®ç¯ä¸­ï¼Œå¹¶å°†å…¶ä»ä½ çš„ç¼“å†²åŒºä¸­åˆ é™¤ã€‚ ä½¿ç”¨C-yã€‚è¿™å°†æŠŠä½ åˆšåˆšæ€æ­»çš„æ–‡å­—choreography*ï¼Œæ’å…¥åˆ°ç‚¹çš„ä½ç½®ã€‚ ä½¿ç”¨M-yã€‚è¿™å°†åˆ é™¤choreographyï¼Œå¹¶æ‹‰å‡ºæ€æˆ®ç¯ä¸Šçš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼ŒTreasureã€‚  ä½ å¯ä»¥åœ¨è¡¨ 2-2 ä¸­çœ‹åˆ°ä¸€äº›æœ‰ç”¨çš„æ€æˆ®/æ‹‰æ‰¯é”®çš„ç»‘å®šã€‚\n è¡¨ 2-2ï¼šæ€æˆ®å’Œæ‹‰æ‰¯çš„é”®ä½ç»‘å®š æ–‡æœ¬     å…³é”®å­— æè¿°     C-w æ€æˆ®åŒºåŸŸã€‚   M-w å¤åˆ¶åŒºåŸŸåˆ°æ€æˆ®ç¯ã€‚   C-y ç»åˆ‘ã€‚   M-y åœ¨æ‹‰åŠ¨åå¾ªç¯ä½¿ç”¨æ€ä¼¤ç¯ã€‚   M-d æ€å­—ã€‚   C-k æ€è¡Œã€‚    ç¼–è¾‘å’Œå¸®åŠ© è¡¨ 2-3 æ˜¾ç¤ºäº†ä¸€äº›é¢å¤–çš„ã€æœ‰ç”¨çš„ç¼–è¾‘é”®ç»‘å®šï¼Œä½ åº”è¯¥çŸ¥é“å¦‚ä½•å¤„ç†é—´è·å’Œæ‰©å±•æ–‡æœ¬ã€‚\n è¡¨ 2-3ï¼šå…¶ä»–æœ‰ç”¨çš„ç¼–è¾‘é”®ç»‘å®šæ–¹å¼     å…³é”®å­— æè¿°     *Tab ç¼©è¿›è¡Œã€‚   C-j æ–°è¡Œå’Œç¼©è¿›ï¼Œç›¸å½“äºå›è½¦åçš„ tabã€‚   M-/ å¬‰çš®å£«æ‰©å±•ï¼›å¾ªç¯æµè§ˆç‚¹ä¹‹å‰çš„æ–‡æœ¬å¯èƒ½çš„æ‰©å±•æ–¹å¼ã€‚   *M-* åˆ é™¤ç‚¹å‘¨å›´çš„æ‰€æœ‰ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ã€‚(æˆ‘ç»å¸¸ä½¿ç”¨è¿™ä¸ªã€‚)    Emacs ä¹Ÿæœ‰å¾ˆå¥½çš„å†…ç½®å¸®åŠ©ã€‚è¡¨ 2-4 ä¸­æ˜¾ç¤ºçš„ä¸¤ä¸ªé”®ç»‘å®šå°†ä¸ºä½ æä¾›è‰¯å¥½çš„æœåŠ¡ã€‚\n è¡¨ 2-4ï¼šå†…ç½®å¸®åŠ©çš„é”®ä½ç»‘å®š     å…³é”®å­— æè¿°     C-h k é”®ç»‘å®š è¯´æ˜ä¸è¯¥é”®ç»‘å®šçš„åŠŸèƒ½ã€‚ä¸ºäº†ä½¿å…¶å‘æŒ¥ä½œç”¨ï¼Œä½ åœ¨è¾“å…¥C-h kåå®é™…æ‰§è¡ŒæŒ‰é”®åºåˆ—ã€‚    C-h f *æè¿°åŠŸèƒ½ã€‚     å¸®åŠ©æ–‡æœ¬å‡ºç°åœ¨ä¸€ä¸ªæ–°çš„*çª—å£ä¸­ï¼Œè¿™ä¸ªæ¦‚å¿µæˆ‘å°†åœ¨æœ¬ç« åé¢ä»‹ç»ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‰C-x o qå…³é—­å¸®åŠ©çª—å£ã€‚\nä½¿ç”¨ Emacs ä¸ Clojure æ¥ä¸‹æ¥ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•ä½¿ç”¨ Emacs æ¥æœ‰æ•ˆåœ°å¼€å‘ä¸€ä¸ª Clojure åº”ç”¨ç¨‹åºã€‚ä½ å°†å­¦ä¹ å¦‚ä½•å¯åŠ¨ä¸€ä¸ªä¸ Emacs ç›¸è¿çš„ REPL è¿›ç¨‹ï¼Œä»¥åŠå¦‚ä½•ä¸ Emacs çª—å£ä¸€èµ·å·¥ä½œã€‚ç„¶åï¼Œæˆ‘å°†ä»‹ç»å¤§é‡æœ‰ç”¨çš„é”®ç»‘å®šï¼Œç”¨äºæ±‚å€¼è¡¨è¾¾å¼ã€ç¼–è¯‘æ–‡ä»¶å’Œæ‰§è¡Œå…¶ä»–æ–¹ä¾¿çš„ä»»åŠ¡ã€‚æœ€åï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•å¤„ç† Clojure çš„é”™è¯¯ï¼Œå¹¶ä»‹ç» Paredit çš„ä¸€äº›åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ç§å¯é€‰çš„æ¬¡è¦æ¨¡å¼ï¼Œå¯¹ç¼–å†™å’Œç¼–è¾‘ Lisp é£æ ¼è¯­è¨€çš„ä»£ç å¾ˆæœ‰ç”¨ã€‚\nå¦‚æœä½ æƒ³å¼€å§‹é’»ç ” Clojure ä»£ç ï¼Œè¯·åŠ¡å¿…è·³è¿‡å‰é¢çš„å†…å®¹ï¼ä½ å¯ä»¥åœ¨ä»¥åå†å›æ¥ã€‚ä½ å¯ä»¥ç¨åå†å›æ¥ã€‚\nå¼€å¯ä½ çš„ REPL æ­£å¦‚ä½ åœ¨ç¬¬ 1 ç« ä¸­æ‰€å­¦åˆ°çš„ï¼ŒREPL å…è®¸ä½ äº¤äº’åœ°ç¼–å†™å’Œè¿è¡Œ Clojure ä»£ç ã€‚REPL æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Clojure ç¨‹åºï¼Œå®ƒç»™ä½ ä¸€ä¸ªæç¤ºï¼Œç„¶åè¯»å–ä½ çš„è¾“å…¥ï¼Œæ±‚å€¼å®ƒï¼Œæ‰“å°ç»“æœï¼Œå¹¶å¾ªç¯è¿”å›åˆ°æç¤ºã€‚åœ¨ç¬¬ 1 ç« ä¸­ï¼Œä½ åœ¨ç»ˆç«¯çª—å£ç”¨lein replå¯åŠ¨äº† REPLã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†ç›´æ¥åœ¨ Clojure ä¸­å¯åŠ¨ä¸€ä¸ª REPLã€‚\nä¸ºäº†å°† Emacs è¿æ¥åˆ° REPLï¼Œä½ å°†ä½¿ç”¨ Emacs è½¯ä»¶åŒ… CIDERï¼Œå¯åœ¨*[GitHub - clojure-emacs/cider: The Clojure Interactive Development Environment that Rocks for Emacs]ï¼ˆhttps://github.com/clojure-emacs/cider/ï¼‰*ã€‚å¦‚æœä½ æŒ‰ç…§æœ¬ç« å‰é¢çš„é…ç½®è¯´æ˜ï¼Œä½ åº”è¯¥å·²ç»å®‰è£…äº†å®ƒï¼Œä½†ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿è¡ŒM-xåŒ…-å®‰è£…ï¼Œè¾“å…¥ ciderï¼Œç„¶åæŒ‰å›è½¦é”®æ¥å®‰è£…å®ƒã€‚\nCIDER å…è®¸ä½ åœ¨ Emacs ä¸­å¯åŠ¨ä¸€ä¸ª REPLï¼Œå¹¶ä¸ºä½ æä¾›é”®ç»‘å®šï¼Œä½¿ä½ èƒ½æ›´æœ‰æ•ˆåœ°ä¸ REPL è¿›è¡Œäº¤äº’ã€‚ç°åœ¨å°±å»å¯åŠ¨ä¸€ä¸ª REPL ä¼šè¯å§ã€‚ä½¿ç”¨ Emacsï¼Œæ‰“å¼€clojure-noob/**src/clojure_noob/core.cljæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ä½ åœ¨ç¬¬ä¸€ç« ä¸­åˆ›å»ºçš„ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨M-x cider-jack-inã€‚è¿™å°†å¯åŠ¨ REPL å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥ä¸å®ƒè¿›è¡Œäº¤äº’ã€‚ç»è¿‡çŸ­æš‚çš„ç­‰å¾…ï¼ˆåº”è¯¥ä¸åˆ°ä¸€åˆ†é’Ÿï¼‰ï¼Œä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼å›¾ 2-8 çš„ä¸œè¥¿ã€‚\nå›¾ 2-8ï¼šè¿è¡Œ M-x cider-jack-in åä½ çš„ Emacs åº”è¯¥æ˜¯è¿™æ ·çš„\nç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªçª—å£ï¼šæˆ‘ä»¬çš„core.cljæ–‡ä»¶åœ¨å·¦è¾¹æ‰“å¼€ï¼ŒREPL åœ¨å³è¾¹è¿è¡Œã€‚å¦‚æœä½ ä»æ¥æ²¡æœ‰è§è¿‡ Emacs åƒè¿™æ ·åˆ†æˆä¸¤åŠï¼Œä¸è¦æ‹…å¿ƒï¼æˆ‘å°†è®²è¿° Emacs æ˜¯å¦‚ä½•åšåˆ°çš„ã€‚æˆ‘ä¸€ä¼šå„¿ä¼šè®²åˆ° Emacs æ˜¯å¦‚ä½•åˆ†å‰²çª—å£çš„ã€‚åŒæ—¶ï¼Œåœ¨ REPL ä¸­å°è¯•æ±‚å€¼ä¸€äº›ä»£ç ã€‚é”®å…¥ä»¥ä¸‹åŠ ç²—çš„è¡Œã€‚å½“ä½ æŒ‰ä¸‹å›è½¦é”®æ—¶ï¼Œä½ åº”è¯¥çœ‹åˆ°æ‰“å°åœ¨ REPL ä¸­çš„ç»“æœï¼Œæ˜¾ç¤ºåœ¨æ¯ä¸€è¡Œä»£ç çš„åé¢ã€‚è¿™æ—¶ä¸è¦æ‹…å¿ƒä»£ç ï¼Œæˆ‘å°†åœ¨ä¸‹ä¸€ç« ä¸­ä»‹ç»æ‰€æœ‰è¿™äº›åŠŸèƒ½ã€‚\n(+ 1 2 3 4) ; =\u0026gt; 10 (map inc [1 2 3 4]) ; =\u0026gt; (2 3 4 5) (reduce + [5 6 100]) ; =\u0026gt; 111 ç›¸å½“æ¼‚äº®! ä½ å¯ä»¥åƒåœ¨ç¬¬ä¸€ç« ä¸­ä½¿ç”¨lein replé‚£æ ·ä½¿ç”¨è¿™ä¸ª REPLã€‚ä½ è¿˜å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ï¼Œä½†åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•åœ¨åˆ†å± Emacs ä¸­å·¥ä½œã€‚\n###æ’æ›²ã€‚Emacs çš„çª—å£å’Œæ¡†æ¶\nè®©æˆ‘ä»¬ç»•é“æ¥è°ˆè°ˆ Emacs æ˜¯å¦‚ä½•å¤„ç†æ¡†æ¶å’Œçª—å£çš„ï¼Œå¹¶è®¨è®ºä¸€äº›ä¸çª—å£æœ‰å…³çš„æœ‰ç”¨çš„é”®ç»‘å®šæ–¹æ³•ã€‚å¦‚æœä½ å·²ç»ç†Ÿæ‚‰äº† Emacs çš„çª—å£ï¼Œè¯·éšæ„è·³è¿‡è¿™ä¸€éƒ¨åˆ†ã€‚\nEmacs æ˜¯åœ¨ 1802 å¹´å·¦å³å‘æ˜çš„ï¼Œæ‰€ä»¥å®ƒä½¿ç”¨çš„æœ¯è¯­ä¸ä½ ä¹ æƒ¯çš„ç•¥æœ‰ä¸åŒã€‚ä½ é€šå¸¸æ‰€è¯´çš„çª—å£ï¼ŒEmacs ç§°ä¹‹ä¸ºæ¡†æ¶ï¼Œè€Œæ¡†æ¶å¯ä»¥åˆ†å‰²æˆå¤šä¸ªçª—å£ã€‚åˆ†å‰²æˆå¤šä¸ªçª—å£å…è®¸ä½ ä¸€æ¬¡æŸ¥çœ‹å¤šä¸ªç¼“å†²åŒºã€‚ä½ åœ¨è¿è¡Œcider-jack-inæ—¶å·²ç»çœ‹åˆ°äº†è¿™ç§æƒ…å†µï¼ˆè§å›¾ 2-9ï¼‰ã€‚\nå›¾ 2-9ï¼šåœ¨ Emacs ä¸­ï¼Œä¸€ä¸ªæ¡†æ¶åŒ…å«æœ‰çª—å£ã€‚\nè¡¨ 2-5 æ˜¾ç¤ºäº†ç”¨äºå¤„ç†æ¡†æ¶å’Œçª—å£çš„å‡ ä¸ªé”®çš„ç»‘å®šæƒ…å†µã€‚\n è¡¨ 2-5: Emacs çª—å£çš„é”®ä½ç»‘å®š     å…³é”®å­— æè¿°     C-x o å°†å…‰æ ‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçª—å£ã€‚ç°åœ¨è¯•è¯•è¿™ä¸ªï¼Œåœ¨ä½ çš„ Clojure æ–‡ä»¶å’Œ REPL ä¹‹é—´åˆ‡æ¢ã€‚   C-x 1 åˆ é™¤æ‰€æœ‰å…¶ä»–çª—å£ï¼Œæ¡†æ¶ä¸­åªç•™ä¸‹å½“å‰çª—å£ã€‚è¿™ä¸ä¼šå…³é—­ä½ çš„ç¼“å†²åŒºï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ä½ å¤±å»ä»»ä½•å·¥ä½œã€‚   C-x 2 åˆ†å‰²æ¡†æ¶çš„ä¸Šæ–¹å’Œä¸‹æ–¹ã€‚   C-x 3 å¹¶æ’åˆ†å‰²æ¡†æ¶ã€‚   C-x 0 åˆ é™¤å½“å‰çª—å£ã€‚    æˆ‘é¼“åŠ±ä½ è¯•è¯• Emacs çš„çª—å£é”®ç»‘å®šã€‚ä¾‹å¦‚ï¼ŒæŠŠä½ çš„å…‰æ ‡æ”¾åœ¨å·¦è¾¹çš„çª—å£ï¼Œä¹Ÿå°±æ˜¯æœ‰ Clojure æ–‡ä»¶çš„é‚£ä¸ªï¼Œç„¶åä½¿ç”¨C-x 1ã€‚å¦ä¸€ä¸ªçª—å£åº”è¯¥æ¶ˆå¤±ï¼Œè€Œä½ åº”è¯¥åªçœ‹åˆ° Clojure ä»£ç ã€‚ç„¶ååšä»¥ä¸‹å·¥ä½œã€‚\n ä½¿ç”¨C-x 3å°†çª—å£å†æ¬¡å¹¶æ’åˆ†å¼€ã€‚ ä½¿ç”¨C-x oæ¥åˆ‡æ¢åˆ°å³è¾¹çš„çª—å£ã€‚ ä½¿ç”¨C-x b cider-replæ¥åˆ‡æ¢åˆ°å³è¾¹çª—å£çš„ CIDER ç¼“å†²åŒºã€‚  ä¸€æ—¦ä½ åšäº†ä¸€äº›å®éªŒï¼Œè®¾ç½® Emacsï¼Œä½¿å®ƒåŒ…å«ä¸¤ä¸ªå¹¶æ’çš„çª—å£ï¼Œå·¦è¾¹æ˜¯ Clojure ä»£ç ï¼Œå³è¾¹æ˜¯ CIDER ç¼“å†²åŒºï¼Œå°±åƒå‰é¢çš„å›¾ç‰‡ä¸€æ ·ã€‚å¦‚æœä½ æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äºçª—å£å’Œæ¡†æ¶çš„çŸ¥è¯†ï¼ŒEmacs æ‰‹å†Œä¸­æœ‰å¤§é‡çš„ä¿¡æ¯ï¼šè§*http://www.gnu.org/software/emacs/manual/html_node/elisp/Windows.html#Windows*ã€‚\nç°åœ¨ä½ å¯ä»¥æµè§ˆ Emacs çª—å£äº†ï¼Œæ˜¯æ—¶å€™å­¦ä¹ ä¸€äº› Clojure å¼€å‘çš„é”®ç»‘å®šäº†\n###æœ‰ç”¨çš„é”®ç»‘å®šçš„ä¸°å¯Œå†…å®¹\nç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½å­¦ä¹ ä¸€äº›æŒ‰é”®ç»‘å®šï¼Œå®ƒä»¬å°†æ­ç¤ºåœ¨ Clojure é¡¹ç›®ä¸­ä½¿ç”¨ Emacs çš„çœŸæ­£åŠ›é‡ã€‚è¿™äº›å‘½ä»¤å°†ä½¿ä½ åªéœ€æŒ‰ä¸‹å‡ ä¸ªç®€å•çš„é”®å°±èƒ½æ±‚å€¼ã€è°ƒæ•´ã€ç¼–è¯‘å’Œè¿è¡Œä»£ç ã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚ä½•å¿«é€Ÿæ±‚å€¼ä¸€ä¸ªè¡¨è¾¾å¼ã€‚\nåœ¨core.cljçš„åº•éƒ¨ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚\n(println \u0026#34;Cleanliness is next to godliness\u0026#34;) ç°åœ¨ä½¿ç”¨C-eå¯¼èˆªåˆ°è¡Œå°¾ï¼Œç„¶åä½¿ç”¨C-x C-e.æ–‡æœ¬Cleanliness is next to godlinessåº”è¯¥å‡ºç°åœ¨ CIDER ç¼“å†²åŒºï¼Œå¦‚å›¾ 2-10 æ‰€ç¤ºã€‚\nå›¾ 2-10ï¼šåœ¨ REPL ä¸­ä»å¦ä¸€ä¸ªç¼“å†²åŒºå³æ—¶æ±‚å€¼ä»£ç \nç»‘å®šé”®C-x C-eè¿è¡Œcider-eval-last-expressionå‘½ä»¤ã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥å‘½ä»¤å°†ç´§æ¥åœ¨ç‚¹ä¹‹å‰çš„è¡¨è¾¾å¼å‘é€åˆ° REPLï¼Œç„¶åç”± REPL æ±‚å€¼è¯¥è¡¨è¾¾å¼ã€‚ä½ ä¹Ÿå¯ä»¥è¯•è¯•C-u C-x C-eï¼Œå®ƒæ‰“å°å‡ºç‚¹ä¹‹åçš„æ±‚å€¼ç»“æœã€‚\nç°åœ¨è®©æˆ‘ä»¬è¯•ç€è¿è¡Œæˆ‘ä»¬åœ¨ç¬¬ä¸€ç« ä¸­å†™çš„-mainå‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®©å…¨ä¸–ç•Œéƒ½çŸ¥é“æˆ‘ä»¬æ˜¯å°èŒ¶å£¶ã€‚\nåœ¨core.cljçš„ç¼“å†²åŒºä¸­ï¼Œä½¿ç”¨C-c M-n M-nã€‚è¿™ä¸ªé”®ç»‘å®šå°†å‘½åç©ºé—´è®¾ç½®ä¸ºä½ å½“å‰æ–‡ä»¶é¡¶éƒ¨åˆ—å‡ºçš„å‘½åç©ºé—´ï¼Œæ‰€ä»¥å³è¾¹çª—å£çš„æç¤ºç°åœ¨åº”è¯¥æ˜¯clojure-noob.core\u0026gt;ã€‚æˆ‘è¿˜æ²¡æœ‰è¯¦ç»†ä»‹ç»å‘½åç©ºé—´ï¼Œä½†ç°åœ¨åªè¦çŸ¥é“å‘½åç©ºé—´æ˜¯ä¸€ç§ç»„ç»‡æœºåˆ¶ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿé¿å…å‘½åå†²çªå°±è¶³å¤Ÿäº†ã€‚æ¥ä¸‹æ¥ï¼Œåœ¨æç¤ºç¬¦ä¸‹è¾“å…¥ï¼ˆ-mainï¼‰ã€‚REPL åº”è¯¥æ‰“å°å‡º \u0026ldquo;I\u0026rsquo;m a little teapot!\u0026ldquo;å¤šä¹ˆä»¤äººæ¿€åŠ¨å•Š\nç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°å¹¶è¿è¡Œå®ƒã€‚åœ¨core.cljçš„åº•éƒ¨ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚\n(defn train  []  (println \u0026#34;Choo choo!\u0026#34;) å®Œæˆåï¼Œä¿å­˜ä½ çš„æ–‡ä»¶å¹¶ä½¿ç”¨C-c C-kåœ¨ REPL ä¼šè¯ä¸­ç¼–è¯‘ä½ çš„å½“å‰æ–‡ä»¶ã€‚(ç°åœ¨ï¼Œå¦‚æœä½ åœ¨ REPL ä¸­è¿è¡Œ (train)ï¼Œå®ƒå°†å›æ˜¾ Choo choo!ã€‚\nå½“ä½ è¿˜åœ¨ REPL ä¸­æ—¶ï¼Œè¯•è¯•C-â†‘ï¼ˆctrl åŠ å‘ä¸Šç®­å¤´é”®ï¼‰ã€‚Â C-â†‘å’ŒC-â†“å¾ªç¯æµè§ˆä½ çš„ REPL å†å²ï¼Œå…¶ä¸­åŒ…æ‹¬ä½ è¦æ±‚ REPL æ±‚å€¼çš„æ‰€æœ‰ Clojure è¡¨è¾¾å¼ã€‚\nMac ç”¨æˆ·æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒOS X å°†C-â†‘ã€C-â†“ã€C-â†å’ŒC-â†’Map ä¸ºä»»åŠ¡æ§åˆ¶å‘½ä»¤ã€‚ä½ å¯ä»¥é€šè¿‡æ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œç„¶åè¿›å…¥ Keyboard4Shortcuts4Mission Control æ¥æ”¹å˜ä½ çš„ Mac é”®ç»‘å®šã€‚\næœ€åï¼Œè¯•è¯•è¿™ä¸ªã€‚\n åœ¨ REPL æç¤ºç¬¦ä¸‹è¾“å…¥ï¼ˆ-mainï¼‰ã€‚æ³¨æ„æ²¡æœ‰ç»“å°¾çš„æ‹¬å·ã€‚ æŒ‰C-enterã€‚  CIDER åº”è¯¥å…³é—­å°æ‹¬å·å¹¶æ±‚å€¼è¡¨è¾¾å¼ã€‚è¿™åªæ˜¯ CIDER ä¸ºå¤„ç†è¿™ä¹ˆå¤šå°æ‹¬å·è€Œæä¾›çš„ä¸€ä¸ªå¾ˆå¥½çš„å°ä¾¿åˆ©ã€‚\nCIDER è¿˜æœ‰ä¸€äº›é”®çš„ç»‘å®šï¼Œåœ¨ä½ å­¦ä¹  Clojure çš„æ—¶å€™éå¸¸å¥½ã€‚æŒ‰C-c C-d C-då°†æ˜¾ç¤ºè¯¥ç¬¦å·ä¸‹çš„æ–‡æ¡£ï¼Œè¿™å¯ä»¥å¤§å¤§èŠ‚çœæ—¶é—´ã€‚å½“ä½ çœ‹å®Œæ–‡æ¡£åï¼ŒæŒ‰qæ¥å…³é—­æ–‡æ¡£ç¼“å†²åŒºã€‚ç»‘å®šçš„é”®**M-.å°†å¯¼èˆªåˆ°ç‚¹ä¸‹ç¬¦å·çš„æºä»£ç ï¼Œè€ŒM-,**å°†ä½¿ä½ å›åˆ°åŸæ¥çš„ç¼“å†²åŒºå’Œä½ç½®ã€‚æœ€åï¼ŒC-c C-d C-aå¯ä»¥è®©ä½ åœ¨å‡½æ•°åå’Œæ–‡æ¡£ä¸­æœç´¢ä»»æ„çš„æ–‡æœ¬ã€‚å½“ä½ ä¸èƒ½å®Œå…¨è®°ä½ä¸€ä¸ªå‡½æ•°çš„åå­—æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•æ¥å¯»æ‰¾å®ƒã€‚\nCIDER READMEï¼ˆGitHub - clojure-emacs/cider: The Clojure Interactive Development Environment that Rocks for Emacs)æœ‰ä¸€ä¸ªå…¨é¢çš„é”®ç»‘å®šåˆ—è¡¨ï¼Œä½ å¯ä»¥æ…¢æ…¢å­¦ä¹ ï¼Œä½†ç°åœ¨ï¼Œè¡¨ 2-6 å’Œ 2-7 åŒ…å«äº†æˆ‘ä»¬åˆšåˆšç»å†çš„é”®ç»‘å®šçš„æ€»ç»“ã€‚\n è¡¨ 2-6ï¼šClojure ç¼“å†²åŒºçš„é”®ç»‘å®šæƒ…å†µ     é”®å€¼ æè¿°     C-c M-n M-n åˆ‡æ¢åˆ°å½“å‰ç¼“å†²åŒºçš„å‘½åç©ºé—´ã€‚   C-x C-e æ±‚å€¼ç´§é‚»ç‚¹çš„è¡¨è¾¾å¼ã€‚   C-c C-k ç¼–è¯‘å½“å‰ç¼“å†²åŒºã€‚   C-c C-d C-d æ˜¾ç¤ºç‚¹ä¸‹ç¬¦å·çš„æ–‡æ¡£ã€‚   M-. å’Œ M-, æµè§ˆåˆ°è¯¥ç‚¹ä¸‹çš„ç¬¦å·çš„æºä»£ç ï¼Œå¹¶è¿”å›åˆ°åŸæ¥çš„ç¼“å†²åŒºã€‚   C-c C-d C-a Apropros æœç´¢ï¼›åœ¨å‡½æ•°åå’Œæ–‡æ¡£ä¸­æŸ¥æ‰¾ä»»æ„æ–‡æœ¬ã€‚     è¡¨ 2-7: CIDER ç¼“å†²åŒºçš„é”®ç»‘å®šæ–¹å¼     å…³é”®å­— æè¿°     **C-â†‘, C-**â†“ å¾ªç¯æµè§ˆ REPL å†å²ã€‚   C-enter å…³é—­åœ†æ‹¬å·å¹¶æ±‚å€¼ã€‚    å¦‚ä½•å¤„ç†é”™è¯¯ åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†å†™ä¸€äº›æœ‰é”™è¯¯çš„ä»£ç ï¼Œè¿™æ ·ä½ å°±å¯ä»¥çœ‹åˆ° Emacs æ˜¯å¦‚ä½•ååº”çš„ï¼Œä»¥åŠä½ å¦‚ä½•ä»é”™è¯¯ä¸­æ¢å¤å¹¶ç»§ç»­ä½ çš„å¿«ä¹ä¹‹è·¯ã€‚ä½ å°†åœ¨ REPL ç¼“å†²åŒºå’Œ core.clj ç¼“å†²åŒºä¸­è¿›è¡Œè¿™é¡¹å·¥ä½œã€‚è®©æˆ‘ä»¬ä» REPL å¼€å§‹ã€‚åœ¨æç¤ºç¬¦ä¸‹ï¼Œè¾“å…¥(map)å¹¶æŒ‰å›è½¦ã€‚ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼å›¾ 2-11 çš„ä¸œè¥¿ã€‚\nå›¾ 2-11ï¼šè¿™å°±æ˜¯åœ¨ REPL ä¸­è¿è¡Œåä»£ç æ—¶å‘ç”Ÿçš„æƒ…å†µã€‚\næ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œåœ¨æ²¡æœ‰å‚æ•°çš„æƒ…å†µä¸‹è°ƒç”¨mapä¼šä½¿ Clojure å¤±å»ç†æ™º\u0026ndash;å®ƒåœ¨ä½ çš„ REPL ç¼“å†²åŒºä¸­æ˜¾ç¤ºä¸€ä¸ª`ArityException\u0026rsquo;é”™è¯¯ä¿¡æ¯ï¼Œå¹¶åœ¨ä½ çš„å·¦è¾¹çª—å£ä¸­å¡«æ»¡æ–‡æœ¬ï¼Œçœ‹èµ·æ¥åƒä¸€ä¸ªç–¯å­çš„å‘“è¯­ã€‚è¿™äº›å‘“è¯­å°±æ˜¯å †æ ˆè·Ÿè¸ªï¼Œå®ƒæ˜¾ç¤ºäº†å®é™…æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ï¼Œä»¥åŠå“ªä¸ªå‡½æ•°è°ƒç”¨äº†é‚£ä¸ªå‡½æ•°ï¼Œæ²¿ç€å‡½æ•°è°ƒç”¨çš„å †æ ˆã€‚\nClojure çš„å †æ ˆè·Ÿè¸ªåœ¨ä½ åˆšå¼€å§‹çš„æ—¶å€™å¯èƒ½å¾ˆéš¾è§£è¯»ï¼Œä½†ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œä½ ä¼šå­¦ä¼šä»å…¶ä¸­è·å¾—æœ‰ç”¨çš„ä¿¡æ¯ã€‚CIDER é€šè¿‡å…è®¸ä½ è¿‡æ»¤å †æ ˆç—•è¿¹æ¥å¸®ä½ ä¸€æŠŠï¼Œè¿™å¯ä»¥å‡å°‘å™ªéŸ³ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å°†å¼‚å¸¸çš„åŸå› é”å®šã€‚*cider-error*ç¼“å†²åŒºçš„ç¬¬ 2 è¡Œæœ‰ Clojureã€Javaã€REPLã€Toolingã€Duplicates å’Œ All ç­‰è¿‡æ»¤å™¨ã€‚ä½ å¯ä»¥ç‚¹å‡»æ¯ä¸ªé€‰é¡¹æ¥æ¿€æ´»è¯¥è¿‡æ»¤å™¨ã€‚ä½ ä¹Ÿå¯ä»¥ç‚¹å‡»æ¯ä¸ªå †æ ˆè·Ÿè¸ªè¡Œæ¥è·³åˆ°ç›¸åº”çš„æºä»£ç ã€‚\nä¸‹é¢æ˜¯å¦‚ä½•å…³é—­å·¦è¾¹çª—å£ä¸­çš„å †æ ˆè·Ÿè¸ªã€‚\n ä½¿ç”¨C-x oæ¥åˆ‡æ¢åˆ°çª—å£ã€‚ æŒ‰qå…³é—­å †æ ˆè·Ÿè¸ªï¼Œå›åˆ° CIDERã€‚  å¦‚æœä½ æƒ³å†æ¬¡æŸ¥çœ‹é”™è¯¯ï¼Œä½ å¯ä»¥åˆ‡æ¢åˆ°*cider-error*ç¼“å†²åŒºã€‚ä½ ä¹Ÿå¯ä»¥åœ¨å°è¯•ç¼–è¯‘æ–‡ä»¶æ—¶å¾—åˆ°é”™è¯¯ä¿¡æ¯ã€‚è¦çœ‹è¿™ä¸ªï¼Œè¯·åˆ°core.cljç¼“å†²åŒºï¼Œå†™ä¸€äº›æœ‰é”™è¯¯çš„ä»£ç ï¼Œç„¶åè¿›è¡Œç¼–è¯‘ã€‚\n åœ¨ç»“å°¾å¤„æ·»åŠ (map)ã€‚ ä½¿ç”¨C-c C-kè¿›è¡Œç¼–è¯‘ã€‚  ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ª*cider-error*ç¼“å†²åŒºï¼Œç±»ä¼¼äºä½ ä¹‹å‰çœ‹åˆ°çš„é‚£ä¸ªã€‚åŒæ ·ï¼ŒæŒ‰qå…³é—­å †æ ˆè·Ÿè¸ªã€‚\nParedit åœ¨ Clojure ç¼“å†²åŒºä¸­å†™ä»£ç æ—¶ï¼Œä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ä¸€äº›æ„å¤–çš„äº‹æƒ…å‘ç”Ÿã€‚ä¾‹å¦‚ï¼Œæ¯å½“ä½ è¾“å…¥ä¸€ä¸ªå·¦æ‹¬å·ï¼Œä¸€ä¸ªå³æ‹¬å·å°±ä¼šç«‹å³è¢«æ’å…¥ã€‚\nè¿™è¦å½’åŠŸäºparedit-modeï¼Œè¿™æ˜¯ä¸€ç§æ¬¡è¦çš„æ¨¡å¼ï¼Œå®ƒå°† Lisp çš„å¤§é‡å°æ‹¬å·ä»ä¸€ç§è´£ä»»å˜æˆäº†ä¸€ç§èµ„äº§ã€‚Paredit ç¡®ä¿æ‰€æœ‰çš„å°æ‹¬å·ã€åŒå¼•å·å’Œå¤§æ‹¬å·éƒ½æ˜¯å°é—­çš„ï¼Œä»è€Œå‡è½»äº†ä½ é‚£å¯æ¶çš„è´Ÿæ‹…ã€‚\nParedit è¿˜æä¾›äº†é”®ç»‘å®šåŠŸèƒ½ï¼Œä»¥è½»æ¾æµè§ˆå’Œæ”¹å˜æ‰€æœ‰è¿™äº›æ‹¬å·æ‰€åˆ›å»ºçš„ç»“æ„ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘å°†ä»‹ç»æœ€æœ‰ç”¨çš„é”®ç»‘å®šï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨*https://github.com/georgek/paredit-cheatsheet/blob/master/paredit-cheatsheet.pdf*ï¼ˆåœ¨éª—å±€ä¸­ï¼Œçº¢è‰²ç®¡å­ä»£è¡¨ç‚¹ï¼‰æŸ¥çœ‹å…¨é¢çš„éª—å±€è¡¨ã€‚\nç„¶è€Œï¼Œå¦‚æœä½ ä¸ä¹ æƒ¯ï¼Œparedit æœ‰æ—¶ä¼šå¾ˆçƒ¦äººã€‚æˆ‘è®¤ä¸ºèŠ±ç‚¹æ—¶é—´æ¥å­¦ä¹ å®ƒæ˜¯éå¸¸å€¼å¾—çš„ï¼Œä½†ä½ å¯ä»¥éšæ—¶ç”¨M-x paredit-mode æ¥ç¦ç”¨å®ƒï¼Œå®ƒå¯ä»¥åˆ‡æ¢è¯¥æ¨¡å¼çš„å¼€å¯å’Œå…³é—­ã€‚\nä¸‹é¢çš„éƒ¨åˆ†å‘ä½ å±•ç¤ºäº†æœ€æœ‰ç”¨çš„é”®ç»‘å®šã€‚\nWrapping å’Œ Slurping Wrappingç”¨å°æ‹¬å·åŒ…å›´ç‚¹ä¹‹åçš„è¡¨è¾¾å¼ã€‚Â Slurpingå°†ç»“æŸçš„å°æ‹¬å·ç§»åˆ°å³è¾¹åŒ…æ‹¬ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ç”¨è¿™ä¸ªå¼€å§‹ã€‚\n(+ 1 2 3 4) è€Œæˆ‘ä»¬æƒ³å¾—åˆ°è¿™ä¸ªç»“æœã€‚\n(+ 1 (* 2 3) 4) æˆ‘ä»¬å¯ä»¥æŠŠ2åŒ…èµ·æ¥ï¼ŒåŠ ä¸€ä¸ªæ˜Ÿå·ï¼Œç„¶åå†æŠŠ3æºœèµ°ã€‚é¦–å…ˆï¼Œæ”¾ç½®ç‚¹ï¼Œè¿™é‡Œè¡¨ç¤ºä¸ºä¸€ä¸ªå‚ç›´çš„ç®¡é“ï¼Œ|ã€‚\n(+ 1 |2 3 4) ç„¶åè¾“å…¥M-(ï¼Œä¸paredit-wrap-roundç»‘å®šï¼Œå¾—åˆ°è¿™ä¸ªç»“æœã€‚\n(+ 1 (|2) 3 4) åŠ ä¸Šæ˜Ÿå·å’Œç©ºæ ¼ã€‚\n (+ 1 (* |2) 3 4) è¦åœ¨ \u0026ldquo;3 \u0026ldquo;ä¸Šå•§å•§ç§°å¥‡ï¼Œè¯·æŒ‰C-â†’ã€‚\n (+ 1 (* |2 3) 4) è¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°å¢åŠ å’Œæ‰©å±•æ‹¬å·ï¼Œè€Œä¸å¿…æµªè´¹å®è´µçš„æ—¶é—´æŒ‰ä½æ–¹å‘é”®æ¥ç§»åŠ¨ç‚¹ã€‚\nBarfing å‡è®¾åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œä½ ä¸å°å¿ƒåäº†å››æ¡ã€‚è¦è§£å¼€å®ƒï¼ˆä¹Ÿè¢«ç§°ä¸ºbarfingï¼‰ï¼Œå°†ä½ çš„å…‰æ ‡ï¼ˆ|ï¼‰æ”¾åœ¨æ‹¬å·å†…çš„ä»»ä½•åœ°æ–¹ã€‚\n (+ 1 (|* 2 3 4)) ç„¶åä½¿ç”¨C-â†ã€‚\n (+ 1 (|* 2 3) 4) Ta-da! ç°åœ¨ä½ çŸ¥é“å¦‚ä½•éšæ„æ‰©å±•å’Œæ”¶ç¼©æ‹¬å·äº†ã€‚\nå¯¼èˆª åœ¨ç”¨ Lisp æ–¹è¨€å†™ä½œæ—¶ï¼Œä½ ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„è¡¨è¾¾å¼ã€‚\n (map (comp record first)  (d/q \u0026#39;[:find ?post  :in $ ?search  :where  [(fulltext $ :post/content ?search)  [[?post ?content]]]]  (db/db)  (:q params)) å¯¹äºè¿™ç§è¡¨è¾¾å¼ï¼Œå¿«é€Ÿä»ä¸€ä¸ªå­è¡¨è¾¾å¼è·³åˆ°ä¸‹ä¸€ä¸ªå­è¡¨è¾¾å¼æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å¦‚æœä½ æŠŠ point æ”¾åœ¨å¼€å¤´çš„å°æ‹¬å·ä¹‹å‰ï¼ŒC-M-fä¼šæŠŠä½ å¸¦åˆ°ç»“æŸçš„å°æ‹¬å·ã€‚åŒæ ·ï¼Œå¦‚æœ point ç´§è·Ÿåœ¨é—­åˆå°æ‹¬å·ä¹‹åï¼ŒC-M-bå°†å¸¦ä½ åˆ°å¼€å¤´å°æ‹¬å·ã€‚\nè¡¨ 2-8 æ€»ç»“äº†ä½ åˆšåˆšå­¦åˆ°çš„ Paredit é”®çš„ç»‘å®šã€‚\n è¡¨ 2-8ï¼šParedit é”®çš„ç»‘å®šæ–¹å¼     å…³é”®å­— æè¿°     M-x paredit-mode åˆ‡æ¢ paredit æ¨¡å¼ã€‚   M-( æ‹¬å·å†…ç‚¹åçš„è¡¨è¾¾å¼(paredit-wrap-round)ã€‚   **C-**â†’ Slurp;å°†ç»“æŸçš„å°æ‹¬å·å‘å³ç§»åŠ¨ï¼Œä»¥åŒ…æ‹¬ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼ã€‚   **C-**â† Barfï¼›å°†æ‹¬å·å‘å·¦ç§»åŠ¨ï¼Œæ’é™¤æœ€åä¸€ä¸ªè¡¨è¾¾å¼ã€‚   *C-M-f,*C-M-b ç§»åŠ¨åˆ°å¼€å¤´/ç»“å°¾å°æ‹¬å·ã€‚    ç»§ç»­å­¦ä¹  Emacs æ˜¯å†å²æœ€æ‚ ä¹…çš„ç¼–è¾‘å™¨ä¹‹ä¸€ï¼Œå®ƒçš„è¿½éšè€…å¯¹å®ƒçš„çƒ­æƒ…å¾€å¾€æ¥è¿‘ç‹‚çƒ­ã€‚ä¸€å¼€å§‹ä½¿ç”¨å®ƒå¯èƒ½ä¼šå¾ˆåˆ«æ‰­ï¼Œä½†åšæŒä¸‹å»ï¼Œä½ ä¼šåœ¨ä¸€ç”Ÿä¸­å¾—åˆ°å……åˆ†çš„å›æŠ¥ã€‚\næ¯å½“æˆ‘æ‰“å¼€ Emacs æ—¶ï¼Œæˆ‘éƒ½ä¼šæ„Ÿåˆ°å—åˆ°é¼“èˆã€‚å°±åƒä¸€ä¸ªå·¥åŒ è¿›å…¥ä»–çš„å·¥ä½œå®¤ä¸€æ ·ï¼Œæˆ‘æ„Ÿåˆ°ä¸€ä¸ªå¯èƒ½æ€§çš„é¢†åŸŸåœ¨æˆ‘é¢å‰æ‰“å¼€ã€‚æˆ‘æ„Ÿåˆ°è¿™ä¸ªç¯å¢ƒçš„èˆ’é€‚ï¼Œå®ƒéšç€æ—¶é—´çš„æ¨ç§»å·²ç»å‘å±•åˆ°å®Œå…¨é€‚åˆæˆ‘\u0026ndash;å„ç§å„æ ·çš„åŒ…å’Œé”®ç»‘å®šï¼Œå¸®åŠ©æˆ‘æ—¥å¤ä¸€æ—¥åœ°æŠŠæƒ³æ³•å˜æˆç°å®ã€‚\nåœ¨ä½ ç»§ç»­ä½ çš„ Emacs ä¹‹æ—…æ—¶ï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ã€‚\n Emacs æ‰‹å†Œæä¾›äº†ä¼˜ç§€ã€å…¨é¢çš„æŒ‡å¯¼ã€‚æ¯å¤©æ—©ä¸ŠèŠ±ç‚¹æ—¶é—´çœ‹çœ‹å®ƒå§! ä¸‹è½½ PDFï¼Œåœ¨æ—…é€”ä¸­é˜…è¯»ã€‚http://www.gnu.org/software/emacs/manual/html_node/emacs/index.html#Top*ã€‚ *ã€ŠEmacs å‚è€ƒå¡ã€‹*æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å°æŠ„ã€‚Â http://www.ic.unicamp.br/~helio/disciplinas/MC102/Emacs_Reference_Card.pdfã€‚ Mickey Petersen çš„Mastering Emacsæ˜¯æœ€å¥½çš„ Emacs èµ„æºä¹‹ä¸€ã€‚ä»é˜…è¯»æŒ‡å—å¼€å§‹ã€‚Â é˜…è¯»æŒ‡å—-æŒæ¡ Emacs ã€‚ å¯¹äºæ›´æ³¨é‡è§†è§‰æ•ˆæœçš„äººï¼Œæˆ‘æ¨èæ‰‹ç»˜çš„ã€Šå¦‚ä½•å­¦ä¹  Emacsã€‹ã€‚Emacs 24 æˆ–æ›´é«˜ç‰ˆæœ¬çš„åˆå­¦è€…æŒ‡å—\u0026rdquo;ï¼Œä½œè€… Sacha Chuaã€‚Â http://sachachua.com/blog/wp-content/uploads/2013/05/How-to-Learn-Emacs8.pngã€‚ åªè¦æŒ‰C-h tå°±å¯ä»¥çœ‹åˆ°å†…ç½®çš„æ•™ç¨‹ã€‚  æ‘˜è¦ å‘œå‘¼! ä½ å·²ç»è¦†ç›–äº†å¾ˆå¤šåœ°æ–¹ã€‚ä½ ç°åœ¨çŸ¥é“äº† Emacs ä½œä¸ºä¸€ä¸ª Lisp è§£é‡Šå™¨çš„çœŸæ­£æ€§è´¨ã€‚ç»‘å®šé”®æ˜¯æ‰§è¡Œ elisp å‡½æ•°çš„å¿«æ·æ–¹å¼ï¼Œè€Œæ¨¡å¼æ˜¯ç»‘å®šé”®å’Œå‡½æ•°çš„é›†åˆã€‚ä½ å­¦ä¼šäº†å¦‚ä½•ä»¥è‡ªå·±çš„æ–¹å¼ä¸ Emacs äº’åŠ¨ï¼Œå¹¶æŒæ¡äº†ç¼“å†²åŒºã€çª—å£ã€åŒºåŸŸã€æ€æˆ®å’Œæ‹‰åŠ¨ã€‚æœ€åï¼Œä½ å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨ CIDER å’Œ paredit è½»æ¾åœ°ä¸ Clojure å·¥ä½œã€‚\næœ‰äº†è¿™äº›æ¥ä¹‹ä¸æ˜“çš„ Emacs çŸ¥è¯†ï¼Œç°åœ¨æ˜¯æ—¶å€™å¼€å§‹è®¤çœŸå­¦ä¹  Clojure äº†\n1 http://www.gnu.org/software/emacs/manual/html_node/emacs/Minor-Modes.htmlã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/chapter2/","summary":"å¦‚ä½•ä½¿ç”¨ Emacsï¼Œä¸€ä¸ªä¼˜ç§€çš„ Clojure ç¼–è¾‘å™¨ åœ¨ä½ æŒæ¡ Clojure çš„è¿‡ç¨‹ä¸­ï¼Œä½ çš„ç¼–è¾‘å™¨å°†æ˜¯ä½ æœ€äº²å¯†çš„ç›Ÿå‹ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½¿ç”¨ Emacsï¼Œä½†ä½ å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•ä½ æƒ³è¦çš„ç¼–è¾‘å™¨ã€‚å¦‚æœä½ ä¸éµå¾ªæœ¬ç« ä¸­å…³äº Emacs çš„è¯¦å°½è¯´æ˜ï¼Œæˆ–è€…ä½ é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„ç¼–è¾‘å™¨ï¼Œé‚£ä¹ˆè‡³å°‘å€¼å¾—æŠ•å…¥ä¸€äº›æ—¶é—´æ¥è®¾ç½®ä½ çš„ç¼–è¾‘å™¨ï¼Œä»¥ä¾¿ä¸ REPL ä¸€èµ·å·¥ä½œã€‚æˆ‘æ¨èçš„ä¸¤ä¸ªåœ¨ç¤¾åŒºä¸­å—åˆ°å¥½è¯„çš„æ›¿ä»£å“æ˜¯Cursiveå’ŒNightcodeã€‚\næˆ‘æ¨è Emacs çš„åŸå› æ˜¯ï¼Œå®ƒæä¾›äº†ä¸ Clojure REPL çš„ç´§å¯†é›†æˆï¼Œè¿™ä½¿ä½ å¯ä»¥åœ¨å†™ä½œæ—¶ç«‹å³å°è¯•ä½ çš„ä»£ç ã€‚è¿™ç§ç´§å¯†çš„åé¦ˆå›è·¯åœ¨å­¦ä¹  Clojure å’Œä»¥åç¼–å†™çœŸæ­£çš„ Clojure ç¨‹åºæ—¶éƒ½å¾ˆæœ‰ç”¨ã€‚Emacs ä¹Ÿå¾ˆé€‚åˆä¸ä»»ä½• Lisp æ–¹è¨€ä¸€èµ·å·¥ä½œï¼›äº‹å®ä¸Šï¼ŒEmacs æ˜¯ç”¨ä¸€ç§å«åš Emacs Lispï¼ˆelispï¼‰çš„ Lisp æ–¹è¨€ç¼–å†™çš„ã€‚\nåœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ çš„ Emacs è®¾ç½®å°†çœ‹èµ·æ¥åƒå›¾ 2-1ã€‚\nå›¾ 2-1: ä½¿ç”¨ Clojure çš„å…¸å‹ Emacs è®¾ç½®ï¼šä¸€è¾¹æ˜¯ä»£ç ï¼Œå¦ä¸€è¾¹æ˜¯ REPLã€‚\nä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½ å°†ä»å®‰è£… Emacs å¼€å§‹ï¼Œè®¾ç½®ä¸€ä¸ªé€‚åˆæ–°äººçš„ Emacs é…ç½®ã€‚ç„¶åä½ å°†å­¦ä¹ åŸºç¡€çŸ¥è¯†ï¼šå¦‚ä½•æ‰“å¼€ã€ç¼–è¾‘å’Œä¿å­˜æ–‡ä»¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨åŸºæœ¬çš„é”®ç»‘å®šä¸ Emacs è¿›è¡Œäº¤äº’ã€‚æœ€åï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å®é™…ç¼–è¾‘ Clojure ä»£ç å¹¶ä¸ REPL è¿›è¡Œäº¤äº’ã€‚\nå®‰è£… ä½ åº”è¯¥ä½¿ç”¨ Emacs çš„æœ€æ–°ä¸»è¦ç‰ˆæœ¬ï¼Œå³ Emacs 24ï¼Œç”¨äºä½ å·¥ä½œçš„å¹³å°ã€‚\n OS Xä»*http://emacsformacosx.com*å®‰è£… vanilla Emacs ä½œä¸ºä¸€ä¸ª Mac åº”ç”¨ç¨‹åºã€‚å…¶ä»–é€‰é¡¹ï¼Œå¦‚ Aquamacsï¼Œåº”è¯¥æ˜¯ä¸ºäº†ä½¿ Emacs æ›´ \u0026ldquo;åƒ Mac\u0026rdquo;ï¼Œä½†ä»é•¿è¿œæ¥çœ‹æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå®ƒä»¬çš„è®¾ç½®ä¸æ ‡å‡† Emacs æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œä»¥è‡³äºå¾ˆéš¾ä½¿ç”¨ Emacs æ‰‹å†Œæˆ–è·Ÿéšæ•™ç¨‹ã€‚ UbuntuæŒ‰ç…§*https://launchpad.","title":"Chapter2 å¦‚ä½•ä½¿ç”¨ Emacs"},{"content":"æ„å»ºã€è¿è¡Œå’Œ REPL åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†é¢„å…ˆæŠ•å…¥å°‘é‡æ—¶é—´æ¥ç†Ÿæ‚‰å»ºç«‹å’Œè¿è¡Œ Clojure ç¨‹åºçš„å¿«é€Ÿã€å‚»ç“œå¼æ–¹æ³•ã€‚è®©ä¸€ä¸ªçœŸæ­£çš„ç¨‹åºè¿è¡Œèµ·æ¥æ„Ÿè§‰å¾ˆå¥½ã€‚è¾¾åˆ°äº†è¿™ä¸ªé‡Œç¨‹ç¢‘ï¼Œä½ å°±å¯ä»¥è‡ªç”±åœ°è¿›è¡Œå®éªŒï¼Œåˆ†äº«ä½ çš„å·¥ä½œï¼Œå¹¶å‘é‚£äº›ä»åœ¨ä½¿ç”¨ä¸Šä¸ªä¸–çºªçš„è¯­è¨€çš„åŒäº‹å¹¸ç¾ä¹ç¥¸ã€‚è¿™å°†æœ‰åŠ©äºä¿æŒä½ çš„ç§¯ææ€§!\nä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨*Read-Eval-Print Loopï¼ˆREPLï¼‰*åœ¨ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Clojure è¿›ç¨‹ä¸­å³æ—¶è¿è¡Œä»£ç ï¼Œè¿™ä½¿ä½ èƒ½å¤Ÿå¿«é€Ÿæµ‹è¯•ä½ å¯¹è¯­è¨€çš„ç†è§£å¹¶æ›´æœ‰æ•ˆåœ°å­¦ä¹ ã€‚\nä½†é¦–å…ˆï¼Œæˆ‘å°†ç®€è¦åœ°ä»‹ç» Clojureã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä»‹ç» Leiningenï¼Œè¿™æ˜¯ Clojure äº‹å®ä¸Šçš„æ ‡å‡†æ„å»ºå·¥å…·ã€‚åœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ å°†çŸ¥é“å¦‚ä½•åšä»¥ä¸‹äº‹æƒ…ã€‚\n ç”¨ Leiningen åˆ›å»ºä¸€ä¸ªæ–°çš„ Clojure é¡¹ç›® æ„å»ºè¯¥é¡¹ç›®ä»¥åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œçš„ JAR æ–‡ä»¶ æ‰§è¡Œ JAR æ–‡ä»¶ åœ¨ Clojure REPL ä¸­æ‰§è¡Œä»£ç   ç¬¬ä¸€é‡è¦çš„äº‹: ä»€ä¹ˆæ˜¯ Clojure Clojure æ˜¯ç”± Rich Hickey åœ¨ä¸€åº§ç¥è¯èˆ¬çš„ç«å±±ä¸­é“¸é€ çš„ã€‚ä»–ä½¿ç”¨ Lispã€å‡½æ•°å¼ç¼–ç¨‹å’Œä»–è‡ªå·±çš„ä¸€ç»ºå²è¯—èˆ¬çš„å¤´å‘çš„åˆé‡‘ï¼Œåˆ›é€ äº†ä¸€ç§ä»¤äººæ„‰å¿«è€Œå¼ºå¤§çš„è¯­è¨€ã€‚å®ƒçš„ Lisp é—äº§ä½¿ä½ æœ‰èƒ½åŠ›å†™å‡ºæ¯”å¤§å¤šæ•°é Lisp è¯­è¨€æ›´æœ‰è¡¨ç°åŠ›çš„ä»£ç ï¼Œè€Œå®ƒå¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç‹¬ç‰¹ç†è§£å°†ä½¿ä½ ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜çš„æ€ç»´æ›´æ•é”ã€‚æ­¤å¤–ï¼ŒClojure ä¸ºä½ æä¾›äº†æ›´å¥½çš„å·¥å…·æ¥å¤„ç†å¤æ‚çš„é¢†åŸŸï¼ˆå¦‚å¹¶å‘ç¼–ç¨‹ï¼‰ï¼Œè¿™äº›é¢†åŸŸåœ¨ä¼ ç»Ÿä¸Šè¢«è®¤ä¸ºä¼šä½¿å¼€å‘äººå‘˜é™·å…¥å¤šå¹´çš„æ²»ç–—ä¸­ã€‚\nä¸è¿‡ï¼Œåœ¨è°ˆè®º Clojure æ—¶ï¼Œé‡è¦çš„æ˜¯è¦ç‰¢è®° Clojure è¯­è¨€å’Œ Clojure ç¼–è¯‘å™¨ä¹‹é—´çš„åŒºåˆ«ã€‚Clojure è¯­è¨€æ˜¯ä¸€ç§å¼ºè°ƒå‡½æ•°çš„ Lisp æ–¹è¨€ï¼Œå…¶è¯­æ³•å’Œè¯­ä¹‰ä¸ä»»ä½•å®ç°éƒ½æ— å…³ã€‚ç¼–è¯‘å™¨æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„ JAR æ–‡ä»¶ï¼Œclojure.jarï¼Œå®ƒæ¥æ”¶ç”¨ Clojure è¯­è¨€ç¼–å†™çš„ä»£ç å¹¶å°†å…¶ç¼–è¯‘ä¸º Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰å­—èŠ‚ç ã€‚ä½ ä¼šçœ‹åˆ°Clojureè¢«ç”¨æ¥æŒ‡ä»£è¯­è¨€å’Œç¼–è¯‘å™¨ï¼Œå¦‚æœä½ ä¸çŸ¥é“å®ƒä»¬æ˜¯ç‹¬ç«‹çš„ä¸œè¥¿ï¼Œå°±ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚ä½†ç°åœ¨ä½ æ„è¯†åˆ°äº†ï¼Œä½ å°±ä¼šå¥½èµ·æ¥ã€‚\nè¿™ç§åŒºåˆ†æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºä¸å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€å¦‚ Rubyã€Pythonã€C å’Œå…¶ä»–è®¸å¤šè¯­è¨€ä¸åŒï¼ŒClojure æ˜¯ä¸€ç§æ‰˜ç®¡è¯­è¨€ã€‚Clojure ç¨‹åºåœ¨ JVM ä¸­æ‰§è¡Œï¼Œå¹¶ä¾èµ– JVM çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¦‚çº¿ç¨‹å’Œåƒåœ¾æ”¶é›†ã€‚Clojure è¿˜é’ˆå¯¹ JavaScript å’Œå¾®è½¯çš„é€šç”¨è¯­è¨€è¿è¡Œæ—¶ï¼ˆCLRï¼‰ï¼Œä½†æœ¬ä¹¦åªå…³æ³¨ JVM çš„å®ç°ã€‚\nç¨åæˆ‘ä»¬å°†æ›´å¤šåœ°æ¢è®¨ Clojure å’Œ JVM ä¹‹é—´çš„å…³ç³»ï¼Œä½†ç°åœ¨ä½ éœ€è¦äº†è§£çš„ä¸»è¦æ¦‚å¿µæ˜¯è¿™äº›ã€‚\n JVM è¿›ç¨‹æ‰§è¡Œ Java å­—èŠ‚ç ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼ŒJava ç¼–è¯‘å™¨ä» Java æºä»£ç ä¸­äº§ç”Ÿ Java å­—èŠ‚ç ã€‚ JAR æ–‡ä»¶æ˜¯ Java å­—èŠ‚ç çš„é›†åˆã€‚ Java ç¨‹åºé€šå¸¸ä»¥ JAR æ–‡ä»¶åˆ†å‘ã€‚ Java ç¨‹åºclojure.jar è¯»å– Clojure æºä»£ç å¹¶äº§ç”Ÿ Java å­—èŠ‚ç ã€‚ ç„¶åï¼Œè¯¥ Java å­—èŠ‚ç ç”±å·²ç»è¿è¡Œclojure.jarçš„ JVM è¿›ç¨‹æ‰§è¡Œã€‚  Clojure æŒç»­åœ¨å‘å±•ã€‚æˆªè‡³ç›®å‰ï¼ŒClojure çš„ç‰ˆæœ¬ä¸º 1.9.0ï¼Œå¼€å‘å·¥ä½œä»åœ¨è¿›è¡Œä¸­ã€‚å¦‚æœä½ åœ¨é¥è¿œçš„æœªæ¥è¯»åˆ°è¿™æœ¬ä¹¦ï¼Œå¹¶ä¸” Clojure æœ‰æ›´é«˜çš„ç‰ˆæœ¬å·ï¼Œä¸è¦æ‹…å¿ƒï¼è¿™æœ¬ä¹¦æ¶µç›–äº† Clojure çš„æ‰€æœ‰å†…å®¹ã€‚æœ¬ä¹¦æ¶µç›–äº† Clojure çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™äº›çŸ¥è¯†åœ¨ä¸åŒçš„ç‰ˆæœ¬ä¸­åº”è¯¥ä¸ä¼šæ”¹å˜ã€‚æ²¡æœ‰å¿…è¦è®©ä½ çš„æœºå™¨äººç®¡å®¶æŠŠè¿™æœ¬ä¹¦é€€å›ç»™ä¹¦åº—ã€‚\nç°åœ¨ä½ çŸ¥é“ä»€ä¹ˆæ˜¯ Clojure äº†ï¼Œè®©æˆ‘ä»¬æ¥å®é™…æ„å»ºä¸€ä¸ªè¯¥æ­»çš„ Clojure ç¨‹åºå§!\nlein new app clojure-noob è¿™ä¸ªå‘½ä»¤åº”è¯¥åˆ›å»ºä¸€ä¸ªä¸æ­¤ç›¸ä¼¼çš„ç›®å½•ç»“æ„ï¼ˆå¦‚æœæœ‰ä¸€äº›å·®å¼‚ä¹Ÿæ²¡å…³ç³»ï¼‰ã€‚\n| .gitignore | doc | | intro.md âŠ | project.clj | README.md â‹ | resources | src | | clojure_noob âŒ | | | core.clj â | test | | clojure_noob | | | core_test.clj è¿™ä¸ªé¡¹ç›®éª¨æ¶æœ¬èº«å¹¶ä¸ç‰¹åˆ«ï¼Œä¹Ÿä¸åƒ Clojure é‚£æ ·ã€‚å®ƒåªæ˜¯ Leiningen ä½¿ç”¨çš„ä¸€ç§æƒ¯ä¾‹ã€‚ä½ å°†ä½¿ç”¨ Leiningen æ¥æ„å»ºå’Œè¿è¡Œ Clojure åº”ç”¨ç¨‹åºï¼ŒLeiningen å¸Œæœ›ä½ çš„åº”ç”¨ç¨‹åºæœ‰è¿™ç§ç»“æ„ã€‚ç¬¬ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ–‡ä»¶æ˜¯ä½äºâŠçš„project.cljï¼Œå®ƒæ˜¯ Leiningen çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚å®ƒå¯ä»¥å¸®åŠ© Leiningen å›ç­”è¿™æ ·çš„é—®é¢˜ï¼š\u0026ldquo;è¿™ä¸ªé¡¹ç›®æœ‰ä»€ä¹ˆä¾èµ–ï¼Ÿ\u0026ldquo;å’Œ \u0026ldquo;å½“è¿™ä¸ª Clojure ç¨‹åºè¿è¡Œæ—¶ï¼Œä»€ä¹ˆå‡½æ•°åº”è¯¥å…ˆè¿è¡Œï¼Ÿ\u0026rdquo; ä¸€èˆ¬æ¥è¯´ï¼Œä½ ä¼šæŠŠä½ çš„æºä»£ç ä¿å­˜åœ¨src/\u0026lt;project_name\u0026gt;ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½äºâŒçš„src/clojure_noob/core.cljæ–‡ä»¶å°±æ˜¯ä½ è¦å†™ä¸€æ®µæ—¶é—´çš„ Clojure ä»£ç çš„åœ°æ–¹ã€‚ä½äºâçš„testç›®å½•æ˜¾ç„¶åŒ…å«äº†æµ‹è¯•ï¼Œè€Œä½äºâ‹çš„resourcesæ˜¯ä½ å­˜å‚¨å›¾ç‰‡ç­‰èµ„äº§çš„åœ°æ–¹ã€‚\nè¿è¡Œ Clojure é¡¹ç›® ç°åœ¨è®©æˆ‘ä»¬æ¥å®é™…è¿è¡Œè¿™ä¸ªé¡¹ç›®ã€‚åœ¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€src/clojure_noob/core.cljã€‚ä½ åº”è¯¥çœ‹åˆ°è¿™ä¸ªã€‚\nâŠ (ns clojure-noob.core  (:gen-class))  â‹ (defn -main  \u0026#34;I don\u0026#39;t do a whole lot...yet.\u0026#34;  [\u0026amp; args] âŒ (println \u0026#34;Hello, World!\u0026#34;)) âŠå¤„çš„è¡Œå£°æ˜äº†ä¸€ä¸ªå‘½åç©ºé—´ï¼Œä½ ç°åœ¨ä¸éœ€è¦æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ã€‚â‹å¤„çš„-main'å‡½æ•°æ˜¯ä½ çš„ç¨‹åºçš„*å…¥å£ï¼Œè¿™ä¸ªè¯é¢˜å°†åœ¨é™„å½•Aä¸­ä»‹ç»ã€‚ç°åœ¨ï¼Œå°†âŒå¤„çš„\u0026ldquo;Hello, World!\u0026quot;æ”¹ä¸º\u0026ldquo;I\u0026rsquo;m a little teapot!\u0026quot;ã€‚å…¨è¡Œåº”è¯¥æ˜¯(println \u0026ldquo;I\u0026rsquo;m a little teapot!\u0026rdquo;))`ã€‚\næ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„ç»ˆç«¯å¯¼èˆªåˆ°clojure_noobç›®å½•ï¼Œç„¶åè¾“å…¥ã€‚\nlein run ä½ åº”è¯¥çœ‹åˆ°è¾“å‡º\u0026quot;I'm a little teapot!\u0026quot;æ­å–œä½ ï¼Œå°èŒ¶å£¶ï¼Œä½ ç¼–å†™å¹¶æ‰§è¡Œäº†ä¸€ä¸ªç¨‹åºï¼\u0026quot;ã€‚\nå½“ä½ é˜…è¯»æœ¬ä¹¦æ—¶ï¼Œä½ ä¼šäº†è§£åˆ°æ›´å¤šå…³äºç¨‹åºä¸­å®é™…å‘ç”Ÿçš„äº‹æƒ…ï¼Œä½†ç°åœ¨ä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ï¼Œ-mainï¼Œå½“ä½ åœ¨å‘½ä»¤è¡Œæ‰§è¡Œlein runæ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¿è¡Œã€‚\næ„å»º Clojure é¡¹ç›® ä½¿ç”¨lein runå¯¹äºå°è¯•ä½ çš„ä»£ç æ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³ä¸æ²¡æœ‰å®‰è£… Leiningen çš„äººåˆ†äº«ä½ çš„å·¥ä½œï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œä»»ä½•å®‰è£…äº† Java çš„äººï¼ˆåŸºæœ¬ä¸Šå°±æ˜¯æ‰€æœ‰äººï¼‰éƒ½å¯ä»¥æ‰§è¡Œã€‚è¦åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ï¼Œè¯·è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚\nlein uberjar è¿™ä¸ªå‘½ä»¤åˆ›å»ºäº†target/uberjar/clojure-noob-0.1.0**-SNAPSHOT-standalone.jaræ–‡ä»¶ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œè¿™ä¸ªå‘½ä»¤ä½¿ Java æ‰§è¡Œå®ƒã€‚\njava -jar target/uberjar/clojure-noob-0.1.0-SNAPSHOT-standalone.jar çœ‹çœ‹è¿™ä¸ª! æ–‡ä»¶target/uberjar/clojure-noob-0.1.0-SNAPSHOT**-standalone.jaræ˜¯ä½ çš„ Clojure ç¨‹åºï¼Œä½ å¯ä»¥åœ¨å‡ ä¹ä»»ä½•å¹³å°ä¸Šå‘å¸ƒå’Œè¿è¡Œã€‚\nç°åœ¨ä½ å·²ç»æŒæ¡äº†æ„å»ºã€è¿è¡Œå’Œåˆ†å‘ï¼ˆéå¸¸ï¼‰åŸºæœ¬çš„ Clojure ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰åŸºæœ¬ç»†èŠ‚ã€‚åœ¨åé¢çš„ç« èŠ‚ä¸­ï¼Œä½ ä¼šäº†è§£åˆ°æ›´å¤šçš„ç»†èŠ‚ï¼Œå½“ä½ è¿è¡Œå‰é¢çš„å‘½ä»¤æ—¶ï¼ŒLeiningen åœ¨åšä»€ä¹ˆï¼Œå¯¹ Clojure ä¸ JVM çš„å…³ç³»ä»¥åŠä½ å¦‚ä½•è¿è¡Œç”Ÿäº§ä»£ç æœ‰äº†å®Œæ•´çš„äº†è§£ã€‚\nåœ¨æˆ‘ä»¬è¿›å…¥ç¬¬äºŒç« ï¼Œè®¨è®º Emacs çš„ç¥å¥‡å’Œè£è€€ä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦ä¸€ä¸ªé‡è¦çš„å·¥å…·ï¼šREPLã€‚\nä½¿ç”¨ REPL REPL æ˜¯ä¸€ä¸ªç”¨äºè¯•éªŒä»£ç çš„å·¥å…·ã€‚å®ƒå…è®¸ä½ ä¸æ­£åœ¨è¿è¡Œçš„ç¨‹åºè¿›è¡Œäº¤äº’ï¼Œå¹¶å¿«é€Ÿå°è¯•å„ç§æƒ³æ³•ã€‚å®ƒé€šè¿‡å‘ä½ æä¾›ä¸€ä¸ªæç¤ºï¼Œè®©ä½ è¾“å…¥ä»£ç æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚ç„¶åï¼Œå®ƒè¯»å–ä½ çš„è¾“å…¥ï¼Œæ±‚å€¼å®ƒï¼Œæ‰“å°ç»“æœï¼Œå¹¶å¾ªç¯ï¼Œå†æ¬¡å‘ä½ æä¾›æç¤ºã€‚\nè¿™ä¸ªè¿‡ç¨‹å®ç°äº†ä¸€ä¸ªå¿«é€Ÿçš„åé¦ˆå¾ªç¯ï¼Œè¿™åœ¨å¤§å¤šæ•°å…¶ä»–è¯­è¨€ä¸­æ˜¯ä¸å¯èƒ½çš„ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½ ç»å¸¸ä½¿ç”¨å®ƒï¼Œå› ä¸ºä½ èƒ½å¤Ÿåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å¿«é€Ÿæ£€æŸ¥ä½ å¯¹ Clojure çš„ç†è§£ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒREPL å¼€å‘æ˜¯ Lisp ä½“éªŒçš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨å®ƒï¼Œä½ å°±çœŸçš„é”™è¿‡äº†ã€‚\nè¦å¯åŠ¨ä¸€ä¸ª REPLï¼Œè¯·è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚\nlein repl è¾“å‡ºåº”è¯¥æ˜¯è¿™æ ·çš„ã€‚\nnREPL server started on port 28925 REPL-y 0.1.10 Clojure 1.9.0  Exit: Control+D or (exit) or (quit) Commands: (user/help)  Docs: (doc function-name-here)  (find-doc \u0026#34;part-of-name-here\u0026#34;)  Source: (source function-name-here)  (user/sourcery function-name-here)  Javadoc: (javadoc java-object-or-class-here) Examples from clojuredocs.org: [clojuredocs or cdoc]  (user/clojuredocs name-here)  (user/clojuredocs \u0026#34;ns-here\u0026#34; \u0026#34;name-here\u0026#34;) clojure-noob.core=\u0026gt; æœ€åä¸€è¡Œï¼Œclojure-noob.core=\u0026gt;ï¼Œå‘Šè¯‰ä½ ï¼Œä½ åœ¨clojure -noob.coreå‘½åç©ºé—´ä¸­ã€‚ä½ å°†åœ¨åé¢å­¦ä¹ å‘½åç©ºé—´ï¼Œä½†ç°åœ¨æ³¨æ„åˆ°å‘½åç©ºé—´åŸºæœ¬ä¸Šä¸ä½ çš„src/clojure_noob/core.cljæ–‡ä»¶çš„åç§°ä¸€è‡´ã€‚å¦å¤–ï¼Œæ³¨æ„åˆ° REPL æ˜¾ç¤ºçš„ç‰ˆæœ¬æ˜¯Clojure 1.9.0ï¼Œä½†å¦‚å‰æ‰€è¿°ï¼Œæ— è®ºä½ ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬ï¼Œä¸€åˆ‡éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚\nè¯¥æç¤ºè¿˜è¡¨æ˜ä½ çš„ä»£ç åœ¨ REPL ä¸­è¢«åŠ è½½ï¼Œä½ å¯ä»¥æ‰§è¡Œè¢«å®šä¹‰çš„å‡½æ•°ã€‚ç°åœ¨åªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œ-mainï¼Œè¢«å®šä¹‰äº†ã€‚ç°åœ¨å°±å»æ‰§è¡Œå®ƒå§ã€‚\nclojure-noob.core=\u0026gt; (-main) I\u0026#39;m a little teapot! nil å¹²å¾—å¥½! ä½ åˆšåˆšä½¿ç”¨ REPL æ±‚å€¼äº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚è¯•è¯•å‡ ä¸ªæ›´åŸºæœ¬çš„ Clojure å‡½æ•°ã€‚\nclojure-noob.core=\u0026gt; (+ 1 2 3 4) 10 clojure-noob.core=\u0026gt; (* 1 2 3 4) 24 clojure-noob.core=\u0026gt; (first [1 2 3 4]) 1 çœŸæ£’! ä½ åŠ äº†ä¸€äº›æ•°å­—ï¼Œä¹˜äº†ä¸€äº›æ•°å­—ï¼Œå¹¶ä»ä¸€ä¸ª Vector ä¸­å–å‡ºäº†ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ä½ è¿˜ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°äº†å¥‡æ€ªçš„ Lisp è¯­æ³•! æ‰€æœ‰çš„ Lispï¼ŒåŒ…æ‹¬ Clojureï¼Œéƒ½é‡‡ç”¨å‰ç¼€ç¬¦å·ï¼Œè¿™æ„å‘³ç€è¿ç®—ç¬¦åœ¨è¡¨è¾¾å¼ä¸­æ€»æ˜¯æ’åœ¨ç¬¬ä¸€ä½ã€‚å¦‚æœä½ ä¸ç¡®å®šè¿™æ„å‘³ç€ä»€ä¹ˆï¼Œä¸è¦æ‹…å¿ƒã€‚ä½ å¾ˆå¿«å°±ä¼šäº†è§£åˆ° Clojure çš„æ‰€æœ‰è¯­æ³•ã€‚\nä»æ¦‚å¿µä¸Šè®²ï¼ŒREPL ç±»ä¼¼äº SSHã€‚å°±åƒä½ å¯ä»¥ä½¿ç”¨ SSH ä¸è¿œç¨‹æœåŠ¡å™¨äº¤äº’ä¸€æ ·ï¼ŒClojure REPL å…è®¸ä½ ä¸æ­£åœ¨è¿è¡Œçš„ Clojure è¿›ç¨‹äº¤äº’ã€‚è¿™é¡¹åŠŸèƒ½å¯ä»¥éå¸¸å¼ºå¤§ï¼Œå› ä¸ºä½ ç”šè‡³å¯ä»¥å°† REPL é™„åŠ åˆ°ä¸€ä¸ªå®æ—¶ç”Ÿäº§çš„åº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨å®ƒè¿è¡Œæ—¶ä¿®æ”¹ä½ çš„ç¨‹åºã€‚ä¸è¿‡ç°åœ¨ï¼Œä½ å°†ä½¿ç”¨ REPL æ¥å»ºç«‹ä½ å¯¹ Clojure è¯­æ³•å’Œè¯­ä¹‰çš„äº†è§£ã€‚\nè¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼šä»Šåï¼Œæœ¬ä¹¦å°†ä»‹ç»æ²¡æœ‰ REPL æç¤ºçš„ä»£ç ï¼Œä½†è¯·å°è¯•ä¸€ä¸‹è¿™äº›ä»£ç ! ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n(do (println \u0026#34;no prompt here!\u0026#34;)  (+ 1 3)) ; =\u0026gt; no prompt here! ; =\u0026gt; 4 å½“ä½ çœ‹åˆ°è¿™æ ·çš„ä»£ç ç‰‡æ®µæ—¶ï¼Œä»¥ï¼›=\u0026gt;å¼€å¤´çš„è¡Œè¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„ä»£ç çš„è¾“å‡ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”è¯¥æ‰“å°å‡ºè¿™é‡Œæ²¡æœ‰æç¤º'çš„æ–‡å­—ï¼Œä»£ç çš„è¿”å›å€¼æ˜¯4\u0026rsquo;ã€‚\nClojure ç¼–è¾‘å™¨ åˆ°æ­¤ä¸ºæ­¢ï¼Œä½ åº”è¯¥å·²ç»å…·å¤‡äº†å¼€å§‹å­¦ä¹  Clojure è¯­è¨€æ‰€éœ€çš„åŸºæœ¬çŸ¥è¯†ï¼Œè€Œä¸éœ€è¦å¯¹ç¼–è¾‘å™¨æˆ–é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰å¤§è´¹å‘¨ç« ã€‚ä½†å¦‚æœä½ ç¡®å®æƒ³è¦ä¸€ä¸ªå…³äºå¼ºå¤§ç¼–è¾‘å™¨çš„å¥½æ•™ç¨‹ï¼Œç¬¬ 2 ç« æ¶‰åŠ Emacsï¼Œè¿™æ˜¯ Clojurists ä¸­æœ€å—æ¬¢è¿çš„ç¼–è¾‘å™¨ã€‚ä½ ç»å¯¹ä¸éœ€è¦åœ¨ Clojure å¼€å‘ä¸­ä½¿ç”¨ Emacsï¼Œä½† Emacs æä¾›äº†ä¸ Clojure REPL çš„ç´§å¯†é›†æˆï¼Œéå¸¸é€‚åˆç¼–å†™ Lisp ä»£ç ã€‚ç„¶è€Œï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œä½ è¦ä½¿ç”¨é€‚åˆä½ çš„ä¸œè¥¿ã€‚\nå¦‚æœ Emacs ä¸æ˜¯ä½ çš„é‚£æ¯èŒ¶ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä¸º Clojure å¼€å‘è®¾ç½®å…¶ä»–æ–‡æœ¬ç¼–è¾‘å™¨å’Œ IDE çš„èµ„æºã€‚\n è¿™ä¸ª YouTube è§†é¢‘å°†å‘Šè¯‰ä½ å¦‚ä½•ä¸º Clojure å¼€å‘è®¾ç½® Sublime Text 2ã€‚Â - YouTubeã€‚ Vim æœ‰å¾ˆå¥½çš„å·¥å…·ç”¨äº Clojure å¼€å‘ã€‚è¿™ç¯‡æ–‡ç« æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚Â Writing Clojure With Vim In 2013 - mybuddymichael.comã€‚ Counterclockwise æ˜¯ä¸€ä¸ªå¼ºçƒˆæ¨èçš„ Eclipse æ’ä»¶ã€‚GoogleCodeHome - ccw-ide/ccw Wiki - GitHubã€‚ Cursive Clojure æ˜¯æ¨èç»™é‚£äº›ä½¿ç”¨ IntelliJ çš„ IDEï¼š https://cursiveclojure.com/ã€‚ Nightcode æ˜¯ä¸€ä¸ªç”¨ Clojure ç¼–å†™çš„ç®€å•ã€å…è´¹çš„ IDEã€‚Â GitHub - oakes/Nightcode: An IDE for Clojureã€‚  æ€»ç»“ æˆ‘çœŸä¸ºä½ æ„Ÿåˆ°éª„å‚²ï¼Œå°èŒ¶å£¶ã€‚ä½ å·²ç»è¿è¡Œäº†ä½ çš„ç¬¬ä¸€ä¸ª Clojure ç¨‹åº! ä¸ä»…å¦‚æ­¤ï¼Œä½ è¿˜ç†Ÿæ‚‰äº† REPLï¼Œè¿™æ˜¯å¼€å‘ Clojure è½¯ä»¶çš„æœ€é‡è¦å·¥å…·ä¹‹ä¸€ã€‚å¤ªç¥å¥‡äº†! è¿™è®©æˆ‘æƒ³èµ·äº†æˆ‘ä¸ªäººè‹±é›„ä¹‹ä¸€çš„ã€ŠLong Liveã€‹ä¸­çš„ä¸æœ½åå¥ã€‚\n You held your head like a hero\nOn a history book page\nIt was the end of a decade\nBut the start of an age\nâ€”Taylor Swift\n å¥½æ ·çš„!\n","permalink":"https://zhenfeng-zhu.github.io/post/chapter1/","summary":"æ„å»ºã€è¿è¡Œå’Œ REPL åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†é¢„å…ˆæŠ•å…¥å°‘é‡æ—¶é—´æ¥ç†Ÿæ‚‰å»ºç«‹å’Œè¿è¡Œ Clojure ç¨‹åºçš„å¿«é€Ÿã€å‚»ç“œå¼æ–¹æ³•ã€‚è®©ä¸€ä¸ªçœŸæ­£çš„ç¨‹åºè¿è¡Œèµ·æ¥æ„Ÿè§‰å¾ˆå¥½ã€‚è¾¾åˆ°äº†è¿™ä¸ªé‡Œç¨‹ç¢‘ï¼Œä½ å°±å¯ä»¥è‡ªç”±åœ°è¿›è¡Œå®éªŒï¼Œåˆ†äº«ä½ çš„å·¥ä½œï¼Œå¹¶å‘é‚£äº›ä»åœ¨ä½¿ç”¨ä¸Šä¸ªä¸–çºªçš„è¯­è¨€çš„åŒäº‹å¹¸ç¾ä¹ç¥¸ã€‚è¿™å°†æœ‰åŠ©äºä¿æŒä½ çš„ç§¯ææ€§!\nä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨*Read-Eval-Print Loopï¼ˆREPLï¼‰*åœ¨ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Clojure è¿›ç¨‹ä¸­å³æ—¶è¿è¡Œä»£ç ï¼Œè¿™ä½¿ä½ èƒ½å¤Ÿå¿«é€Ÿæµ‹è¯•ä½ å¯¹è¯­è¨€çš„ç†è§£å¹¶æ›´æœ‰æ•ˆåœ°å­¦ä¹ ã€‚\nä½†é¦–å…ˆï¼Œæˆ‘å°†ç®€è¦åœ°ä»‹ç» Clojureã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä»‹ç» Leiningenï¼Œè¿™æ˜¯ Clojure äº‹å®ä¸Šçš„æ ‡å‡†æ„å»ºå·¥å…·ã€‚åœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ å°†çŸ¥é“å¦‚ä½•åšä»¥ä¸‹äº‹æƒ…ã€‚\n ç”¨ Leiningen åˆ›å»ºä¸€ä¸ªæ–°çš„ Clojure é¡¹ç›® æ„å»ºè¯¥é¡¹ç›®ä»¥åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œçš„ JAR æ–‡ä»¶ æ‰§è¡Œ JAR æ–‡ä»¶ åœ¨ Clojure REPL ä¸­æ‰§è¡Œä»£ç   ç¬¬ä¸€é‡è¦çš„äº‹: ä»€ä¹ˆæ˜¯ Clojure Clojure æ˜¯ç”± Rich Hickey åœ¨ä¸€åº§ç¥è¯èˆ¬çš„ç«å±±ä¸­é“¸é€ çš„ã€‚ä»–ä½¿ç”¨ Lispã€å‡½æ•°å¼ç¼–ç¨‹å’Œä»–è‡ªå·±çš„ä¸€ç»ºå²è¯—èˆ¬çš„å¤´å‘çš„åˆé‡‘ï¼Œåˆ›é€ äº†ä¸€ç§ä»¤äººæ„‰å¿«è€Œå¼ºå¤§çš„è¯­è¨€ã€‚å®ƒçš„ Lisp é—äº§ä½¿ä½ æœ‰èƒ½åŠ›å†™å‡ºæ¯”å¤§å¤šæ•°é Lisp è¯­è¨€æ›´æœ‰è¡¨ç°åŠ›çš„ä»£ç ï¼Œè€Œå®ƒå¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç‹¬ç‰¹ç†è§£å°†ä½¿ä½ ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜çš„æ€ç»´æ›´æ•é”ã€‚æ­¤å¤–ï¼ŒClojure ä¸ºä½ æä¾›äº†æ›´å¥½çš„å·¥å…·æ¥å¤„ç†å¤æ‚çš„é¢†åŸŸï¼ˆå¦‚å¹¶å‘ç¼–ç¨‹ï¼‰ï¼Œè¿™äº›é¢†åŸŸåœ¨ä¼ ç»Ÿä¸Šè¢«è®¤ä¸ºä¼šä½¿å¼€å‘äººå‘˜é™·å…¥å¤šå¹´çš„æ²»ç–—ä¸­ã€‚\nä¸è¿‡ï¼Œåœ¨è°ˆè®º Clojure æ—¶ï¼Œé‡è¦çš„æ˜¯è¦ç‰¢è®° Clojure è¯­è¨€å’Œ Clojure ç¼–è¯‘å™¨ä¹‹é—´çš„åŒºåˆ«ã€‚Clojure è¯­è¨€æ˜¯ä¸€ç§å¼ºè°ƒå‡½æ•°çš„ Lisp æ–¹è¨€ï¼Œå…¶è¯­æ³•å’Œè¯­ä¹‰ä¸ä»»ä½•å®ç°éƒ½æ— å…³ã€‚ç¼–è¯‘å™¨æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„ JAR æ–‡ä»¶ï¼Œclojure.jarï¼Œå®ƒæ¥æ”¶ç”¨ Clojure è¯­è¨€ç¼–å†™çš„ä»£ç å¹¶å°†å…¶ç¼–è¯‘ä¸º Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰å­—èŠ‚ç ã€‚ä½ ä¼šçœ‹åˆ°Clojureè¢«ç”¨æ¥æŒ‡ä»£è¯­è¨€å’Œç¼–è¯‘å™¨ï¼Œå¦‚æœä½ ä¸çŸ¥é“å®ƒä»¬æ˜¯ç‹¬ç«‹çš„ä¸œè¥¿ï¼Œå°±ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚ä½†ç°åœ¨ä½ æ„è¯†åˆ°äº†ï¼Œä½ å°±ä¼šå¥½èµ·æ¥ã€‚\nè¿™ç§åŒºåˆ†æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºä¸å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€å¦‚ Rubyã€Pythonã€C å’Œå…¶ä»–è®¸å¤šè¯­è¨€ä¸åŒï¼ŒClojure æ˜¯ä¸€ç§æ‰˜ç®¡è¯­è¨€ã€‚Clojure ç¨‹åºåœ¨ JVM ä¸­æ‰§è¡Œï¼Œå¹¶ä¾èµ– JVM çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¦‚çº¿ç¨‹å’Œåƒåœ¾æ”¶é›†ã€‚Clojure è¿˜é’ˆå¯¹ JavaScript å’Œå¾®è½¯çš„é€šç”¨è¯­è¨€è¿è¡Œæ—¶ï¼ˆCLRï¼‰ï¼Œä½†æœ¬ä¹¦åªå…³æ³¨ JVM çš„å®ç°ã€‚","title":"Chapter1 æ„å»ºã€è¿è¡Œå’Œ REPL"},{"content":"ç®€ä»‹ åœ¨ä½ çš„å†…å¿ƒæ·±å¤„ï¼Œä½ ä¸€ç›´éƒ½çŸ¥é“ä½ æ³¨å®šè¦å­¦ä¹  Clojureã€‚Â æ¯å½“ä½ é«˜ä¸¾ç€é”®ç›˜ï¼Œä¸ºä¸€ä¸ªéš¾ä»¥ç†è§£çš„ç±»å±‚æ¬¡ç»“æ„è€Œç—›è‹¦åœ°å“­æ³£æ—¶ï¼›æ¯å½“ä½ æ™šä¸Šèººåœ¨åºŠä¸Šï¼Œä¸ºä¸€ä¸ªçªå˜å¼•èµ·çš„æµ·æ£®å ¡è™«è€Œå“­æ³£æ‰°ä¹±ä½ çš„äº²äººæ—¶ï¼›æ¯å½“ä¸€ä¸ªç«èµ›æ¡ä»¶ä½¿ä½ æ‹”æ‰æ›´å¤šä½ ä¸æ–­å‡å°‘çš„å¤´å‘æ—¶ï¼Œä½ çš„æŸä¸ªç§˜å¯†éƒ¨åˆ†å·²ç»çŸ¥é“ä¸€å®šæœ‰ä¸€ä¸ªæ›´å¥½çš„åŠæ³•ã€‚\nç°åœ¨ï¼Œç»ˆäºï¼Œä½ é¢å‰çš„æ•™å­¦ææ–™å°†ä½¿ä½ ä¸ä½ æ¸´æœ›å·²ä¹…çš„ç¼–ç¨‹è¯­è¨€ç»“åˆèµ·æ¥ã€‚\nå­¦ä¹ ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼šç©¿è¶Šå››ä¸ªè¿·å®«çš„æ—…ç¨‹ ä¸ºäº†æœ€å¤§é™åº¦åœ°å‘æŒ¥ Clojure çš„ä½œç”¨ï¼Œä½ éœ€è¦åœ¨æ¯ä¸ªå­¦ä¹ æ–°è¯­è¨€çš„ç¨‹åºå‘˜é¢ä¸´çš„å››ä¸ªè¿·å®«ä¸­æ‰¾åˆ°è‡ªå·±çš„è·¯ã€‚\n å·¥å…·ä¹‹æ— å‹å¥½è€Œé«˜æ•ˆçš„ç¼–ç¨‹ç¯å¢ƒä½¿ä½ èƒ½å¤Ÿè½»æ¾åœ°å°è¯•ä½ çš„æƒ³æ³•ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•è®¾ç½®ä½ çš„ç¯å¢ƒã€‚ è¯­è¨€ä¹‹å±± éšç€ä½ çš„æ”€ç™»ï¼Œä½ å°†è·å¾— Clojure çš„è¯­æ³•ã€è¯­ä¹‰å’Œæ•°æ®ç»“æ„æ–¹é¢çš„çŸ¥è¯†ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨æœ€å¼ºå¤§çš„ç¼–ç¨‹å·¥å…·ä¹‹ä¸€\u0026ndash;å®ï¼Œå¹¶å­¦ä¹ å¦‚ä½•åˆ©ç”¨ Clojure çš„å¹¶å‘ç»“æ„æ¥ç®€åŒ–ä½ çš„ç”Ÿæ´»ã€‚ ç¥å™¨ä¹‹æ´ åœ¨å®ƒçš„æ·±å¤„ï¼Œä½ å°†å­¦ä¼šæ„å»ºã€è¿è¡Œå’Œå‘å¸ƒä½ è‡ªå·±çš„ç¨‹åºï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ä»£ç åº“ã€‚ä½ è¿˜å°†å­¦ä¹  Clojure ä¸ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰çš„å…³ç³»ã€‚ å¿ƒæ€äº‘å ¡ åœ¨å…¶ç¨€è–„çš„ç©ºæ°”ä¸­ï¼Œä½ å°†äº†è§£ Lisp å’Œå‡½æ•°å¼ç¼–ç¨‹çš„åŸå› å’Œæ–¹æ³•ã€‚ä½ å°†äº†è§£æ¸—é€åœ¨ Clojure ä¸­çš„ç®€å•å“²å­¦ï¼Œä»¥åŠå¦‚ä½•åƒ Clojurist ä¸€æ ·è§£å†³é—®é¢˜ã€‚  åˆ«æé”™äº†ï¼Œä½ è¦å·¥ä½œã€‚ä½†è¿™æœ¬ä¹¦ä¼šè®©ä½ æ„Ÿè§‰åˆ°å·¥ä½œæ˜¯ä»¤äººæŒ¯å¥‹çš„ï¼Œè€Œä¸æ˜¯ç–²æƒ«çš„ã€‚è¿™æ˜¯å› ä¸ºæœ¬ä¹¦éµå¾ªä¸‰ä¸ªå‡†åˆ™ã€‚\n å®ƒé‡‡å–äº†ç”œç‚¹ä¼˜å…ˆçš„æ–¹æ³•ï¼Œç»™ä½ æä¾›äº†ä½ éœ€è¦çš„å¼€å‘å·¥å…·å’Œè¯­è¨€ç»†èŠ‚ï¼Œä»¥ä¾¿ç«‹å³å¼€å§‹ç©çœŸæ­£çš„ç¨‹åºã€‚ å®ƒå‡å®šä½ å¯¹ JVMã€å‡½æ•°å¼ç¼–ç¨‹æˆ– Lisp æ²¡æœ‰ç»éªŒã€‚å®ƒè¯¦ç»†åœ°æ¶µç›–äº†è¿™äº›ä¸»é¢˜ï¼Œæ‰€ä»¥å½“ä½ æ„å»ºå’Œè¿è¡Œ Clojure ç¨‹åºæ—¶ï¼Œä½ ä¼šå¯¹ä½ æ­£åœ¨åšçš„äº‹æƒ…æ„Ÿåˆ°è‡ªä¿¡ã€‚ å®ƒé¿å¼€äº† çœŸå®ä¸–ç•Œ çš„ä¾‹å­ï¼Œè€Œé€‰æ‹©äº†æ›´æœ‰è¶£çš„ç»ƒä¹ ï¼Œå¦‚ æ”»å‡»éœæ¯”ç‰¹äºº å’Œ è¿½è¸ªé—ªäº®çš„å¸è¡€é¬¼ ã€‚  åˆ°æœ€åï¼Œä½ å°†èƒ½å¤Ÿä½¿ç”¨ Clojure\u0026ndash;ç°å­˜çš„æœ€ä»¤äººå…´å¥‹å’Œæœ€æœ‰è¶£çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€!\næœ¬ä¹¦æ˜¯å¦‚ä½•ç»„ç»‡çš„ æœ¬ä¹¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œä»¥ä¾¿æ›´å¥½åœ°æŒ‡å¯¼ä½ å®Œæˆä½ çš„å‹‡æ•¢æ¢ç´¢ï¼Œå‹‡æ•¢çš„åˆå‡ºèŒ…åºçš„ Clojuristã€‚\nç¬¬ä¸€éƒ¨åˆ†ï¼šç¯å¢ƒè®¾ç½® ä¸ºäº†ä¿æŒåŠ¨åŠ›å’Œé«˜æ•ˆå­¦ä¹ ï¼Œä½ éœ€è¦å®é™…å†™ä»£ç å’Œæ„å»ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™äº›ç« èŠ‚å°†å¸¦é¢†ä½ å¿«é€Ÿæµè§ˆä½ æ‰€éœ€è¦çš„å·¥å…·ï¼Œä»¥ä¾¿è½»æ¾åœ°ç¼–å†™ç¨‹åºã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥ä¸“æ³¨äºå­¦ä¹  Clojureï¼Œè€Œä¸æ˜¯æ‘†å¼„ä½ çš„ç¯å¢ƒã€‚\nç¬¬ 1 ç« ï¼šæ„å»ºã€è¿è¡Œå’Œ REPL\nè®©ä¸€ä¸ªçœŸæ­£çš„ç¨‹åºè¿è¡Œèµ·æ¥ï¼Œæœ‰ä¸€ç§å¼ºå¤§çš„æ¿€åŠ±ä½œç”¨ã€‚ä¸€æ—¦ä½ èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å°±å¯ä»¥è‡ªç”±åœ°è¿›è¡Œå®éªŒï¼Œè€Œä¸”ä½ å¯ä»¥çœŸæ­£åœ°åˆ†äº«ä½ çš„å·¥ä½œ\nåœ¨è¿™çŸ­çŸ­çš„ä¸€ç« ä¸­ï¼Œä½ å°†æŠ•å…¥å°‘é‡æ—¶é—´æ¥ç†Ÿæ‚‰å»ºç«‹å’Œè¿è¡Œ Clojure ç¨‹åºçš„å¿«é€Ÿæ–¹æ³•ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•åœ¨ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Clojure è¿›ç¨‹ä¸­ä½¿ç”¨ read-eval-print å¾ªç¯ï¼ˆREPLï¼‰æ¥å®éªŒä»£ç ã€‚è¿™å°†æ”¶ç´§ä½ çš„åé¦ˆå›è·¯ï¼Œå¸®åŠ©ä½ æ›´æœ‰æ•ˆåœ°å­¦ä¹ ã€‚\nç¬¬äºŒç« ï¼šå¦‚ä½•ä½¿ç”¨ Emacsï¼Œä¸€ä¸ªä¼˜ç§€çš„ Clojure ç¼–è¾‘å™¨\nå¿«é€Ÿçš„åé¦ˆå›è·¯å¯¹å­¦ä¹ è‡³å…³é‡è¦ã€‚åœ¨è¿™ä¸€ç« ä¸­ï¼Œæˆ‘ä»å¤´å¼€å§‹ä»‹ç» Emacsï¼Œä»¥ä¿è¯ä½ æœ‰ä¸€ä¸ªé«˜æ•ˆçš„ Emacs/Clojure å·¥ä½œæµç¨‹ã€‚\nç¬¬äºŒéƒ¨åˆ†ï¼šè¯­è¨€åŸºç¡€ è¿™äº›ç« èŠ‚ä¸ºä½ ç»§ç»­å­¦ä¹  Clojure å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚ä½ å°†ä»å­¦ä¹  Clojure çš„åŸºç¡€çŸ¥è¯†ï¼ˆè¯­æ³•ã€è¯­ä¹‰å’Œæ•°æ®ç»“æ„ï¼‰å¼€å§‹ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åšäº‹æƒ…ã€‚ç„¶åï¼Œä½ å°†é€€ä¸€æ­¥è¯¦ç»†ç ”ç©¶ Clojure æœ€å¸¸ç”¨çš„å‡½æ•°ï¼Œå¹¶å­¦ä¹ å¦‚ä½•ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹*çš„æ€ç»´æ–¹å¼æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚\nç¬¬ä¸‰ç« ï¼šåšäº‹æƒ…ï¼šClojure é€Ÿæˆç­\nåœ¨è¿™é‡Œï¼Œä½ å°†å¼€å§‹çœŸæ­£æ·±å…¥äº†è§£ Clojureã€‚è¿™ä¹Ÿæ˜¯ä½ éœ€è¦å…³é—­çª—æˆ·çš„åœ°æ–¹ï¼Œå› ä¸ºä½ ä¼šå¼€å§‹å¤§å–Šï¼š\u0026quot;HOLY MOLEY THAT\u0026rsquo;S SPIFFY!\u0026quot;ï¼Œè€Œä¸”ç›´åˆ°ä½ è¯»å®Œæœ¬ä¹¦çš„ç´¢å¼•æ‰ä¼šåœæ­¢ã€‚\næ¯«æ— ç–‘é—®ï¼Œä½ å·²ç»å¬è¯´è¿‡ Clojure ä»¤äººæ•¬ç•çš„å¹¶å‘æ”¯æŒå’Œå…¶ä»–äº†ä¸èµ·çš„åŠŸèƒ½ï¼Œä½† Clojure æœ€çªå‡ºçš„ç‰¹ç‚¹æ˜¯å®ƒæ˜¯ä¸€ç§ Lispã€‚ä½ å°†æ¢ç´¢è¿™ä¸ª Lisp æ ¸å¿ƒï¼Œå®ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå‡½æ•°å’Œæ•°æ®ã€‚\nç¬¬ 4 ç« ï¼šæ·±å…¥æ¢è®¨æ ¸å¿ƒå‡½æ•°\nåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£ Clojure çš„å‡ ä¸ªåŸºæœ¬æ¦‚å¿µã€‚è¿™å°†ä¸ºä½ æä¾›æ‰€éœ€çš„åŸºç¡€ï¼Œä½¿ä½ èƒ½å¤Ÿé˜…è¯»ä½ ä»¥å‰æ²¡æœ‰ä½¿ç”¨è¿‡çš„å‡½æ•°çš„æ–‡æ¡£ï¼Œå¹¶ç†è§£å½“ä½ å°è¯•å®ƒä»¬æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚\nä½ è¿˜ä¼šçœ‹åˆ°ä½ æœ€éœ€è¦çš„å‡½æ•°çš„ä½¿ç”¨ä¾‹å­ã€‚è¿™å°†ä¸ºä½ ç¼–å†™è‡ªå·±çš„ä»£ç ä»¥åŠé˜…è¯»å’Œå­¦ä¹ å…¶ä»–äººçš„é¡¹ç›®æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚è¿˜è®°å¾—æˆ‘æ˜¯å¦‚ä½•æåˆ°è¿½è¸ªé—ªé—ªå‘å…‰çš„å¸è¡€é¬¼çš„å—ï¼Ÿä½ ä¼šåœ¨è¿™ä¸€ç« ä¸­åšåˆ°è¿™ä¸€ç‚¹ï¼ˆé™¤éä½ å·²ç»åœ¨ä¸šä½™æ—¶é—´åšåˆ°äº†ï¼‰ã€‚\nç¬¬äº”ç« ï¼šå‡½æ•°å¼ç¼–ç¨‹\nåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†æŠŠä½ åœ¨å‡½æ•°å’Œæ•°æ®ç»“æ„æ–¹é¢çš„å…·ä½“ç»éªŒä¸ä¸€ç§æ–°çš„æ€ç»´æ–¹å¼ç»“åˆèµ·æ¥ï¼šå‡½æ•°å¼ç¼–ç¨‹æ€ç»´æ–¹å¼ã€‚ä½ å°†é€šè¿‡æ„å»ºå¸­å·å…¨å›½çš„æœ€çƒ­é—¨çš„æ–°æ¸¸æˆæ¥ç‚«è€€ä½ çš„çŸ¥è¯†ã€‚Peg Thing!\nç¬¬ 6 ç« ï¼šç»„ç»‡ä½ çš„é¡¹ç›®ï¼šä¸€ä¸ªå›¾ä¹¦ç®¡ç†å‘˜çš„æ•…äº‹\næœ¬ç« è§£é‡Šäº†ä»€ä¹ˆæ˜¯å‘½åç©ºé—´ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥ç»„ç»‡ä½ çš„ä»£ç ã€‚æˆ‘ä¸æƒ³é€éœ²å¤ªå¤šï¼Œä½†å®ƒä¹Ÿæ¶‰åŠåˆ°ä¸€ä¸ªå›½é™…å¥¶é…ªå¤§ç›—ã€‚\nç¬¬ 7 ç« ï¼šClojure ç‚¼é‡‘æœ¯ï¼šè¯»å–ã€æ±‚å€¼å’Œå®\nåœ¨è¿™ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†é€€ä¸€æ­¥æè¿° Clojure å¦‚ä½•è¿è¡Œä½ çš„ä»£ç ã€‚è¿™å°†ç»™ä½ ä¸€ä¸ªæ¦‚å¿µæ€§çš„ç»“æ„ï¼Œä½ éœ€è¦çœŸæ­£ç†è§£ Clojure æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠå®ƒä¸å…¶ä»–é Lisp è¯­è¨€æœ‰ä»€ä¹ˆä¸åŒã€‚æœ‰äº†è¿™ä¸ªç»“æ„ï¼Œæˆ‘å°†ä»‹ç»å®ï¼Œè¿™æ˜¯ç°æœ‰çš„æœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ã€‚\nç¬¬ 8 ç« ï¼šç¼–å†™å®\nè¿™ä¸€ç« å½»åº•ç ”ç©¶äº†å¦‚ä½•ç¼–å†™å®ï¼Œä»åŸºæœ¬çš„ä¾‹å­å¼€å§‹ï¼Œå¹¶åœ¨å¤æ‚ç¨‹åº¦ä¸Šæœ‰æ‰€æé«˜ã€‚æœ€åï¼Œä½ å°†æˆ´ä¸Šä½ çš„å‡æƒ³å¸½ï¼Œå‡è£…ä½ ç»è¥ä¸€å®¶ç½‘ä¸Šè¯æ°´åº—ï¼Œå¹¶ä½¿ç”¨å®æ¥éªŒè¯å®¢æˆ·çš„è®¢å•ã€‚\nç¬¬ä¸‰éƒ¨åˆ†ï¼šé«˜çº§ä¸»é¢˜ è¿™äº›ç« èŠ‚æ¶µç›–äº† Clojure çš„é¢å¤–æœ‰è¶£çš„ä¸»é¢˜ï¼šå¹¶å‘ã€Java äº’æ“ä½œå’ŒæŠ½è±¡ã€‚å°½ç®¡ä½ å¯ä»¥åœ¨ä¸äº†è§£è¿™äº›å·¥å…·å’Œæ¦‚å¿µçš„æƒ…å†µä¸‹ç¼–å†™ç¨‹åºï¼Œä½†å®ƒä»¬åœ¨æ™ºåŠ›ä¸Šæ˜¯æœ‰ä»·å€¼çš„ï¼Œå¹¶èƒ½ç»™ä½ ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜å¸¦æ¥å·¨å¤§çš„åŠ›é‡ã€‚äººä»¬è¯´å­¦ä¹  Clojure ä¼šè®©ä½ æˆä¸ºä¸€ä¸ªæ›´å¥½çš„ç¨‹åºå‘˜ï¼ŒåŸå› ä¹‹ä¸€å°±æ˜¯å®ƒè®©è¿™äº›ç« èŠ‚ä¸­æ¶‰åŠçš„æ¦‚å¿µå˜å¾—æ˜“äºç†è§£å’Œå®é™…ä½¿ç”¨ã€‚\nç¬¬ 9 ç« ï¼šå¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹çš„ç¥åœ£è‰ºæœ¯\nåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£ä»€ä¹ˆæ˜¯å¹¶å‘å’Œå¹¶è¡Œï¼Œä»¥åŠå®ƒä»¬ä¸ºä»€ä¹ˆé‡è¦ã€‚ä½ å°†äº†è§£åœ¨ç¼–å†™å¹¶è¡Œç¨‹åºæ—¶é¢ä¸´çš„æŒ‘æˆ˜ï¼Œä»¥åŠ Clojure çš„è®¾è®¡å¦‚ä½•å¸®åŠ©ç¼“è§£è¿™äº›æŒ‘æˆ˜ã€‚ä½ å°†ä½¿ç”¨æœŸè´§ã€å»¶è¿Ÿå’Œæ‰¿è¯ºæ¥å®‰å…¨åœ°ç¼–å†™å¹¶è¡Œç¨‹åºã€‚\nç¬¬ 10 ç« ï¼šClojure å½¢è€Œä¸Šå­¦ï¼šåŸå­ã€Refsã€Vars å’Œæ‹¥æŠ±åƒµå°¸\næœ¬ç« è¯¦ç»†ä»‹ç»äº† Clojure ç®¡ç†çŠ¶æ€çš„æ–¹æ³•ä»¥åŠå¦‚ä½•ç®€åŒ–å¹¶å‘ç¼–ç¨‹ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨åŸå­ã€å‚è€ƒæ•°å’Œå˜é‡è¿™ä¸‰ç§ç®¡ç†çŠ¶æ€çš„ç»“æ„ï¼Œå¹¶å­¦ä¹ å¦‚ä½•ç”¨pmapè¿›è¡Œæ— çŠ¶æ€çš„å¹¶è¡Œè®¡ç®—ã€‚è¿˜ä¼šæœ‰æŠ±æŠ±çš„åƒµå°¸ã€‚\nç¬¬ 11 ç« ï¼šç”¨ core.async æŒæ¡å¹¶å‘\nåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†æ€è€ƒå®‡å®™ä¸­çš„ä¸€åˆ‡æ˜¯ä¸€å°çƒ­ç‹—å”®å–æœºçš„æƒ³æ³•ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä¸ºç‹¬ç«‹è¿è¡Œçš„è¿›ç¨‹ç³»ç»Ÿå»ºæ¨¡ï¼Œè¿™äº›è¿›ç¨‹é€šè¿‡ä½¿ç”¨ core.async åº“çš„é€šé“ç›¸äº’é€šä¿¡ã€‚\nç¬¬ 12 ç« ï¼šä¸ JVM ä¸€èµ·å·¥ä½œ\nè¿™ä¸€ç« å°±åƒä¸€æœ¬çŸ­è¯­ä¹¦å’Œ Java å¤§é™†çš„æ–‡åŒ–ä»‹ç»ä¹‹é—´çš„äº¤å‰ã€‚å®ƒå‘ä½ æ¦‚è¿°äº†ä»€ä¹ˆæ˜¯ JVMï¼Œå®ƒå¦‚ä½•è¿è¡Œç¨‹åºï¼Œä»¥åŠå¦‚ä½•ä¸ºå®ƒç¼–è¯‘ç¨‹åºã€‚å®ƒè¿˜å‘ä½ ç®€è¦ä»‹ç»äº†å¸¸ç”¨çš„ Java ç±»å’Œæ–¹æ³•ï¼Œå¹¶è§£é‡Šäº†å¦‚ä½•åœ¨ Clojure ä¸­ä¸å®ƒä»¬è¿›è¡Œäº¤äº’ã€‚ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜å‘ä½ å±•ç¤ºäº†å¦‚ä½•æ€è€ƒå’Œç†è§£ Javaï¼Œä»¥ä¾¿ä½ èƒ½å°†ä»»ä½• Java åº“çº³å…¥ä½ çš„ Clojure ç¨‹åºä¸­ã€‚\nç¬¬ 13 ç« ï¼šç”¨å¤šé‡æ–¹æ³•ã€åè®®å’Œè®°å½•åˆ›å»ºå’Œæ‰©å±•æŠ½è±¡æ¦‚å¿µ\nåœ¨ç¬¬ 4 ç« ä¸­ï¼Œä½ äº†è§£åˆ° Clojure æ˜¯ä»¥æŠ½è±¡çš„æ–¹å¼ç¼–å†™çš„ã€‚æœ¬ç« æ˜¯å¯¹åˆ›å»ºå’Œå®ç°ä½ è‡ªå·±çš„æŠ½è±¡çš„ä¸–ç•Œçš„ä»‹ç»ã€‚ä½ å°†å­¦ä¹ å¤šé‡æ–¹æ³•ã€åè®®å’Œè®°å½•çš„åŸºç¡€çŸ¥è¯†ã€‚\né™„å½• Aï¼šç”¨ Leiningen æ„å»ºå’Œå¼€å‘\næœ¬é™„å½•é˜æ˜äº†ä½¿ç”¨ Leiningen çš„ä¸€äº›ç»†å¾®ä¹‹å¤„ï¼Œæ¯”å¦‚ä»€ä¹ˆæ˜¯ Mavenï¼Œå¦‚ä½•è®¡ç®—å‡º Java åº“çš„ç‰ˆæœ¬å·ï¼Œä»¥ä¾¿ä½ èƒ½ä½¿ç”¨å®ƒä»¬ã€‚\né™„å½• Bï¼šBootï¼ŒèŠ±å“¨çš„ Clojure æ„å»ºæ¡†æ¶\nBoot æ˜¯ Leiningen çš„ä¸€ä¸ªæ›¿ä»£å“ï¼Œå®ƒæä¾›äº†ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æœ‰ä¸€ä¸ªé¢å¤–çš„å¥½å¤„ï¼Œå³å®ƒæ›´å®¹æ˜“æ‰©å±•å’Œç¼–å†™å¯ç»„åˆçš„ä»»åŠ¡ã€‚æœ¬é™„å½•è§£é‡Šäº† Boot çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶æŒ‡å¯¼ä½ ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ã€‚\nä»£ç  ä½ å¯ä»¥åœ¨*http://www.nostarch.com/clojure/*ä¸‹è½½è¯¥ä¹¦çš„æ‰€æœ‰æºä»£ç ã€‚è¿™äº›ä»£ç æ˜¯æŒ‰ç« èŠ‚ç»„ç»‡çš„ã€‚\nç¬¬ 1 ç« æè¿°äº†è¿è¡Œ Clojure ä»£ç çš„ä¸åŒæ–¹å¼ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ REPLã€‚æˆ‘å»ºè®®å½“ä½ é‡åˆ°å¤§å¤šæ•°ä¾‹å­æ—¶ï¼Œåœ¨ REPL ä¸­è¿è¡Œå®ƒä»¬ï¼Œç‰¹åˆ«æ˜¯ç¬¬ 3 ç« åˆ°ç¬¬ 8 ç« ã€‚è¿™å°†æœ‰åŠ©äºä½ ä¹ æƒ¯äºç¼–å†™å’Œç†è§£ Lisp ä»£ç ï¼Œå¹¶èƒ½å¸®åŠ©ä½ ä¿ç•™ä½ æ‰€å­¦çš„ä¸€åˆ‡ã€‚ä½†æ˜¯å¯¹äºé‚£äº›å¾ˆé•¿çš„ä¾‹å­ï¼Œæœ€å¥½æŠŠä½ çš„ä»£ç å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨ REPL ä¸­è¿è¡Œä½ å†™çš„ä»£ç ã€‚\næ—…ç¨‹å¼€å§‹äº† ä½ å‡†å¤‡å¥½äº†å—ï¼Œå‹‡æ•¢çš„è¯»è€…ï¼Ÿä½ å‡†å¤‡å¥½è¿æ¥ä½ çœŸæ­£çš„å‘½è¿äº†å—ï¼Ÿå¸¦ä¸Šä½ æœ€å¥½çš„ä¸€å¯¹å°æ‹¬å·ï¼šä½ å³å°†è¸ä¸Šä¸€ç”Ÿçš„æ—…ç¨‹!\n","permalink":"https://zhenfeng-zhu.github.io/post/introduction/","summary":"ç®€ä»‹ åœ¨ä½ çš„å†…å¿ƒæ·±å¤„ï¼Œä½ ä¸€ç›´éƒ½çŸ¥é“ä½ æ³¨å®šè¦å­¦ä¹  Clojureã€‚Â æ¯å½“ä½ é«˜ä¸¾ç€é”®ç›˜ï¼Œä¸ºä¸€ä¸ªéš¾ä»¥ç†è§£çš„ç±»å±‚æ¬¡ç»“æ„è€Œç—›è‹¦åœ°å“­æ³£æ—¶ï¼›æ¯å½“ä½ æ™šä¸Šèººåœ¨åºŠä¸Šï¼Œä¸ºä¸€ä¸ªçªå˜å¼•èµ·çš„æµ·æ£®å ¡è™«è€Œå“­æ³£æ‰°ä¹±ä½ çš„äº²äººæ—¶ï¼›æ¯å½“ä¸€ä¸ªç«èµ›æ¡ä»¶ä½¿ä½ æ‹”æ‰æ›´å¤šä½ ä¸æ–­å‡å°‘çš„å¤´å‘æ—¶ï¼Œä½ çš„æŸä¸ªç§˜å¯†éƒ¨åˆ†å·²ç»çŸ¥é“ä¸€å®šæœ‰ä¸€ä¸ªæ›´å¥½çš„åŠæ³•ã€‚\nç°åœ¨ï¼Œç»ˆäºï¼Œä½ é¢å‰çš„æ•™å­¦ææ–™å°†ä½¿ä½ ä¸ä½ æ¸´æœ›å·²ä¹…çš„ç¼–ç¨‹è¯­è¨€ç»“åˆèµ·æ¥ã€‚\nå­¦ä¹ ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼šç©¿è¶Šå››ä¸ªè¿·å®«çš„æ—…ç¨‹ ä¸ºäº†æœ€å¤§é™åº¦åœ°å‘æŒ¥ Clojure çš„ä½œç”¨ï¼Œä½ éœ€è¦åœ¨æ¯ä¸ªå­¦ä¹ æ–°è¯­è¨€çš„ç¨‹åºå‘˜é¢ä¸´çš„å››ä¸ªè¿·å®«ä¸­æ‰¾åˆ°è‡ªå·±çš„è·¯ã€‚\n å·¥å…·ä¹‹æ— å‹å¥½è€Œé«˜æ•ˆçš„ç¼–ç¨‹ç¯å¢ƒä½¿ä½ èƒ½å¤Ÿè½»æ¾åœ°å°è¯•ä½ çš„æƒ³æ³•ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•è®¾ç½®ä½ çš„ç¯å¢ƒã€‚ è¯­è¨€ä¹‹å±± éšç€ä½ çš„æ”€ç™»ï¼Œä½ å°†è·å¾— Clojure çš„è¯­æ³•ã€è¯­ä¹‰å’Œæ•°æ®ç»“æ„æ–¹é¢çš„çŸ¥è¯†ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨æœ€å¼ºå¤§çš„ç¼–ç¨‹å·¥å…·ä¹‹ä¸€\u0026ndash;å®ï¼Œå¹¶å­¦ä¹ å¦‚ä½•åˆ©ç”¨ Clojure çš„å¹¶å‘ç»“æ„æ¥ç®€åŒ–ä½ çš„ç”Ÿæ´»ã€‚ ç¥å™¨ä¹‹æ´ åœ¨å®ƒçš„æ·±å¤„ï¼Œä½ å°†å­¦ä¼šæ„å»ºã€è¿è¡Œå’Œå‘å¸ƒä½ è‡ªå·±çš„ç¨‹åºï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ä»£ç åº“ã€‚ä½ è¿˜å°†å­¦ä¹  Clojure ä¸ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰çš„å…³ç³»ã€‚ å¿ƒæ€äº‘å ¡ åœ¨å…¶ç¨€è–„çš„ç©ºæ°”ä¸­ï¼Œä½ å°†äº†è§£ Lisp å’Œå‡½æ•°å¼ç¼–ç¨‹çš„åŸå› å’Œæ–¹æ³•ã€‚ä½ å°†äº†è§£æ¸—é€åœ¨ Clojure ä¸­çš„ç®€å•å“²å­¦ï¼Œä»¥åŠå¦‚ä½•åƒ Clojurist ä¸€æ ·è§£å†³é—®é¢˜ã€‚  åˆ«æé”™äº†ï¼Œä½ è¦å·¥ä½œã€‚ä½†è¿™æœ¬ä¹¦ä¼šè®©ä½ æ„Ÿè§‰åˆ°å·¥ä½œæ˜¯ä»¤äººæŒ¯å¥‹çš„ï¼Œè€Œä¸æ˜¯ç–²æƒ«çš„ã€‚è¿™æ˜¯å› ä¸ºæœ¬ä¹¦éµå¾ªä¸‰ä¸ªå‡†åˆ™ã€‚\n å®ƒé‡‡å–äº†ç”œç‚¹ä¼˜å…ˆçš„æ–¹æ³•ï¼Œç»™ä½ æä¾›äº†ä½ éœ€è¦çš„å¼€å‘å·¥å…·å’Œè¯­è¨€ç»†èŠ‚ï¼Œä»¥ä¾¿ç«‹å³å¼€å§‹ç©çœŸæ­£çš„ç¨‹åºã€‚ å®ƒå‡å®šä½ å¯¹ JVMã€å‡½æ•°å¼ç¼–ç¨‹æˆ– Lisp æ²¡æœ‰ç»éªŒã€‚å®ƒè¯¦ç»†åœ°æ¶µç›–äº†è¿™äº›ä¸»é¢˜ï¼Œæ‰€ä»¥å½“ä½ æ„å»ºå’Œè¿è¡Œ Clojure ç¨‹åºæ—¶ï¼Œä½ ä¼šå¯¹ä½ æ­£åœ¨åšçš„äº‹æƒ…æ„Ÿåˆ°è‡ªä¿¡ã€‚ å®ƒé¿å¼€äº† çœŸå®ä¸–ç•Œ çš„ä¾‹å­ï¼Œè€Œé€‰æ‹©äº†æ›´æœ‰è¶£çš„ç»ƒä¹ ï¼Œå¦‚ æ”»å‡»éœæ¯”ç‰¹äºº å’Œ è¿½è¸ªé—ªäº®çš„å¸è¡€é¬¼ ã€‚  åˆ°æœ€åï¼Œä½ å°†èƒ½å¤Ÿä½¿ç”¨ Clojure\u0026ndash;ç°å­˜çš„æœ€ä»¤äººå…´å¥‹å’Œæœ€æœ‰è¶£çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€!\næœ¬ä¹¦æ˜¯å¦‚ä½•ç»„ç»‡çš„ æœ¬ä¹¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œä»¥ä¾¿æ›´å¥½åœ°æŒ‡å¯¼ä½ å®Œæˆä½ çš„å‹‡æ•¢æ¢ç´¢ï¼Œå‹‡æ•¢çš„åˆå‡ºèŒ…åºçš„ Clojuristã€‚\nç¬¬ä¸€éƒ¨åˆ†ï¼šç¯å¢ƒè®¾ç½® ä¸ºäº†ä¿æŒåŠ¨åŠ›å’Œé«˜æ•ˆå­¦ä¹ ï¼Œä½ éœ€è¦å®é™…å†™ä»£ç å’Œæ„å»ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™äº›ç« èŠ‚å°†å¸¦é¢†ä½ å¿«é€Ÿæµè§ˆä½ æ‰€éœ€è¦çš„å·¥å…·ï¼Œä»¥ä¾¿è½»æ¾åœ°ç¼–å†™ç¨‹åºã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥ä¸“æ³¨äºå­¦ä¹  Clojureï¼Œè€Œä¸æ˜¯æ‘†å¼„ä½ çš„ç¯å¢ƒã€‚\nç¬¬ 1 ç« ï¼šæ„å»ºã€è¿è¡Œå’Œ REPL\nè®©ä¸€ä¸ªçœŸæ­£çš„ç¨‹åºè¿è¡Œèµ·æ¥ï¼Œæœ‰ä¸€ç§å¼ºå¤§çš„æ¿€åŠ±ä½œç”¨ã€‚ä¸€æ—¦ä½ èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å°±å¯ä»¥è‡ªç”±åœ°è¿›è¡Œå®éªŒï¼Œè€Œä¸”ä½ å¯ä»¥çœŸæ­£åœ°åˆ†äº«ä½ çš„å·¥ä½œ\nåœ¨è¿™çŸ­çŸ­çš„ä¸€ç« ä¸­ï¼Œä½ å°†æŠ•å…¥å°‘é‡æ—¶é—´æ¥ç†Ÿæ‚‰å»ºç«‹å’Œè¿è¡Œ Clojure ç¨‹åºçš„å¿«é€Ÿæ–¹æ³•ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•åœ¨ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Clojure è¿›ç¨‹ä¸­ä½¿ç”¨ read-eval-print å¾ªç¯ï¼ˆREPLï¼‰æ¥å®éªŒä»£ç ã€‚è¿™å°†æ”¶ç´§ä½ çš„åé¦ˆå›è·¯ï¼Œå¸®åŠ©ä½ æ›´æœ‰æ•ˆåœ°å­¦ä¹ ã€‚","title":"Introduction ç®€ä»‹"},{"content":"è‡´è°¢ æœ‰å¾ˆå¤šäººå¸®åŠ©æˆ‘è¯ç”Ÿäº†è¿™ä¸ªå¥‡æ€ªçš„å©´å„¿ï¼Œæˆ‘å¯¹ä»–ä»¬çš„æ”¯æŒæ„Ÿåˆ°æ„Ÿæ¿€ã€‚\né¦–å…ˆï¼Œæ„Ÿè°¢æˆ‘çš„å¦»å­æ°è¥¿ï¼Œå¥¹ä¸ºè¿™æœ¬ä¹¦ç»˜åˆ¶äº†æ’å›¾ï¼Œä½¿å®ƒå…·æœ‰æˆ‘æ‰€å¸Œæœ›çš„è§†è§‰ç‰¹æ€§ã€‚ä¹Ÿæ„Ÿè°¢ä½ çš„æ”¯æŒï¼Œæ„Ÿè°¢ä½ åœ¨æˆ‘å¤„äºç–¯ç‹‚çš„ä½œå®¶æ¨¡å¼æ—¶å®¹å¿æˆ‘ã€‚(é™„æ³¨ï¼šé€šè¿‡ä¸€æœ¬ç¼–ç¨‹ä¹¦çš„å°é¢æ„Ÿè°¢æˆ‘çš„å¦»å­ï¼Œæ„Ÿè§‰å¾ˆå¥‡æ€ªã€‚ï¼‰\næ„Ÿè°¢æˆ‘åœ¨éº¦è‚¯é”¡çš„æœ‹å‹å’ŒåŒäº‹ï¼Œä»–ä»¬é˜…è¯»äº†æ—©æœŸçš„ä¿®è®¢ç¨¿å¹¶é¼“åŠ±æˆ‘ç»§ç»­å†™ä½œã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯ Pat Shaughnessyã€Alex Rothenbergã€Thomas Newtonã€Jalil Fanaianã€Chris Parkerã€Mark Daggettã€Christian Lilleyï¼Œä»¥åŠ Mike Morrealeã€‚ä½ ä»¬éƒ½å¤ªä¼Ÿå¤§äº†ï¼›è¯·æ¬åˆ° Durhamã€‚\næ„Ÿè°¢æˆ‘çš„æœ‹å‹å¸ƒé‡Œå¥‡ç‰¹-å¸Œå‹’ï¼ˆBridget Hillyerï¼‰ä¸€ç›´ä»¥æ¥çš„æ”¯æŒã€‚æˆ‘æ€»æ˜¯è§‰å¾—ä½ æ˜¯æˆ‘çš„åç›¾ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ„ä¹‰é‡å¤§ã€‚ä¹Ÿæ„Ÿè°¢æˆ‘çš„æœ‹å‹ä¹”-æ°å…‹é€Šï¼Œæ„Ÿè°¢ä»–é˜…è¯»ã€å¬æˆ‘å–‹å–‹ä¸ä¼‘ã€å¹¶ä¸ºæˆ‘æä¾›åé¦ˆï¼Œå¹¶æ„Ÿè°¢ä»–åœ¨æˆ‘é¢å‰å¯¹å…¶ä»–äººå¤§è°ˆè¿™æœ¬ä¹¦ï¼Œè®©æˆ‘æ„Ÿè§‰å¾ˆé…·ã€‚Alan Dipertï¼Œæœ‹å‹ï¼ŒæŠ€æœ¯è¯„è®ºå‘˜ï¼Œç°åœ¨çš„åŒäº‹ï¼Œæˆ‘å‘ä½ è¡¨ç¤ºä¸‡åˆ†æ„Ÿè°¢ï¼Œæ„Ÿè°¢ä½ å‡ºè‰²çš„æŠ€æœ¯ç¼–è¾‘ï¼Œæ„Ÿè°¢ä½ é¦–å…ˆå°†æˆ‘å¼•å…¥ Clojureã€‚\næˆ‘ä¸çŸ¥é“æ˜¯å¦æ¯ä¸ªä½œå®¶éƒ½ä¼šä¸æ–­åœ°é—®è‡ªå·±ï¼š\u0026ldquo;æˆ‘åˆ°åº•ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿæ˜¯å¦æœ‰äººä¼šè¯»å®ƒï¼Ÿ\u0026ldquo;ä½†æˆ‘è‚¯å®šä¼šè¿™æ ·åšã€‚å› æ­¤ï¼Œæˆ‘æƒ³æ„Ÿè°¢æ‰€æœ‰åœ¨è¿™æœ¬ä¹¦çš„æœ€åˆç½‘ç»œç‰ˆæœ¬ç¼–å†™è¿‡ç¨‹ä¸­å†™ä¿¡ç»™æˆ‘å¹¶å»ºè®®è¿›è¡Œç¼–è¾‘çš„å‹å¥½äººå£«ã€‚è¿™äº›ç§¯æçš„åé¦ˆä½¿æˆ‘æ„Ÿåˆ°æœ‰ä¿¡å¿ƒï¼Œæˆ‘æ­£åœ¨åšä¸€ä»¶æœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚åŒæ ·åœ°ï¼Œæ„Ÿè°¢æ‰€æœ‰è´­ä¹° Leanpub ç‰ˆæœ¬çš„äºº\néå¸¸æ„Ÿè°¢ Clojure ç¤¾åŒºé¢†å¯¼äºº Eric Normandã€David Nolen å’Œ Alex Miller å¯¹æœ¬ä¹¦çš„ç§¯æå®£ä¼ ã€‚åœ¨ä¸‹ä¸€å±Š Conj å¤§ä¼šä¸Šè§!\næœ€åï¼Œè¦æ„Ÿè°¢ No Starch å‡ºç‰ˆç¤¾çš„å„ä½åŒä»ï¼Œæ„Ÿè°¢ä½ ä»¬å¯¹æœ¬ä¹¦çš„å¸®åŠ©ï¼Œä½¿ä¹‹æˆä¸ºæˆ‘æ— æ¯”è‡ªè±ªçš„ä½œå“ã€‚æ„Ÿè°¢ä½ ä»¬çš„é«˜æ ‡å‡†ã€‚æ„Ÿè°¢ä½ ä»¬ä¸æ–­åœ°ä¿ƒä½¿æœ¬ä¹¦æ›´åŠ æ¸…æ™°ï¼Œç”šè‡³æå‡ºç¬‘è¯ã€‚(Seph çš„ \u0026ldquo;èœ¡çƒ \u0026ldquo;ç¼–è¾‘ä»ç„¶è®©æˆ‘å¼€æ€€å¤§ç¬‘ã€‚) Seph Kramer, Riley Hoffman, Hayley Baker, Alison Law, Tyler Ortman, Anne Marie Walker: è°¢è°¢ä½ ä»¬!\n","permalink":"https://zhenfeng-zhu.github.io/post/acknowledgments/","summary":"è‡´è°¢ æœ‰å¾ˆå¤šäººå¸®åŠ©æˆ‘è¯ç”Ÿäº†è¿™ä¸ªå¥‡æ€ªçš„å©´å„¿ï¼Œæˆ‘å¯¹ä»–ä»¬çš„æ”¯æŒæ„Ÿåˆ°æ„Ÿæ¿€ã€‚\né¦–å…ˆï¼Œæ„Ÿè°¢æˆ‘çš„å¦»å­æ°è¥¿ï¼Œå¥¹ä¸ºè¿™æœ¬ä¹¦ç»˜åˆ¶äº†æ’å›¾ï¼Œä½¿å®ƒå…·æœ‰æˆ‘æ‰€å¸Œæœ›çš„è§†è§‰ç‰¹æ€§ã€‚ä¹Ÿæ„Ÿè°¢ä½ çš„æ”¯æŒï¼Œæ„Ÿè°¢ä½ åœ¨æˆ‘å¤„äºç–¯ç‹‚çš„ä½œå®¶æ¨¡å¼æ—¶å®¹å¿æˆ‘ã€‚(é™„æ³¨ï¼šé€šè¿‡ä¸€æœ¬ç¼–ç¨‹ä¹¦çš„å°é¢æ„Ÿè°¢æˆ‘çš„å¦»å­ï¼Œæ„Ÿè§‰å¾ˆå¥‡æ€ªã€‚ï¼‰\næ„Ÿè°¢æˆ‘åœ¨éº¦è‚¯é”¡çš„æœ‹å‹å’ŒåŒäº‹ï¼Œä»–ä»¬é˜…è¯»äº†æ—©æœŸçš„ä¿®è®¢ç¨¿å¹¶é¼“åŠ±æˆ‘ç»§ç»­å†™ä½œã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯ Pat Shaughnessyã€Alex Rothenbergã€Thomas Newtonã€Jalil Fanaianã€Chris Parkerã€Mark Daggettã€Christian Lilleyï¼Œä»¥åŠ Mike Morrealeã€‚ä½ ä»¬éƒ½å¤ªä¼Ÿå¤§äº†ï¼›è¯·æ¬åˆ° Durhamã€‚\næ„Ÿè°¢æˆ‘çš„æœ‹å‹å¸ƒé‡Œå¥‡ç‰¹-å¸Œå‹’ï¼ˆBridget Hillyerï¼‰ä¸€ç›´ä»¥æ¥çš„æ”¯æŒã€‚æˆ‘æ€»æ˜¯è§‰å¾—ä½ æ˜¯æˆ‘çš„åç›¾ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ„ä¹‰é‡å¤§ã€‚ä¹Ÿæ„Ÿè°¢æˆ‘çš„æœ‹å‹ä¹”-æ°å…‹é€Šï¼Œæ„Ÿè°¢ä»–é˜…è¯»ã€å¬æˆ‘å–‹å–‹ä¸ä¼‘ã€å¹¶ä¸ºæˆ‘æä¾›åé¦ˆï¼Œå¹¶æ„Ÿè°¢ä»–åœ¨æˆ‘é¢å‰å¯¹å…¶ä»–äººå¤§è°ˆè¿™æœ¬ä¹¦ï¼Œè®©æˆ‘æ„Ÿè§‰å¾ˆé…·ã€‚Alan Dipertï¼Œæœ‹å‹ï¼ŒæŠ€æœ¯è¯„è®ºå‘˜ï¼Œç°åœ¨çš„åŒäº‹ï¼Œæˆ‘å‘ä½ è¡¨ç¤ºä¸‡åˆ†æ„Ÿè°¢ï¼Œæ„Ÿè°¢ä½ å‡ºè‰²çš„æŠ€æœ¯ç¼–è¾‘ï¼Œæ„Ÿè°¢ä½ é¦–å…ˆå°†æˆ‘å¼•å…¥ Clojureã€‚\næˆ‘ä¸çŸ¥é“æ˜¯å¦æ¯ä¸ªä½œå®¶éƒ½ä¼šä¸æ–­åœ°é—®è‡ªå·±ï¼š\u0026ldquo;æˆ‘åˆ°åº•ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿæ˜¯å¦æœ‰äººä¼šè¯»å®ƒï¼Ÿ\u0026ldquo;ä½†æˆ‘è‚¯å®šä¼šè¿™æ ·åšã€‚å› æ­¤ï¼Œæˆ‘æƒ³æ„Ÿè°¢æ‰€æœ‰åœ¨è¿™æœ¬ä¹¦çš„æœ€åˆç½‘ç»œç‰ˆæœ¬ç¼–å†™è¿‡ç¨‹ä¸­å†™ä¿¡ç»™æˆ‘å¹¶å»ºè®®è¿›è¡Œç¼–è¾‘çš„å‹å¥½äººå£«ã€‚è¿™äº›ç§¯æçš„åé¦ˆä½¿æˆ‘æ„Ÿåˆ°æœ‰ä¿¡å¿ƒï¼Œæˆ‘æ­£åœ¨åšä¸€ä»¶æœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚åŒæ ·åœ°ï¼Œæ„Ÿè°¢æ‰€æœ‰è´­ä¹° Leanpub ç‰ˆæœ¬çš„äºº\néå¸¸æ„Ÿè°¢ Clojure ç¤¾åŒºé¢†å¯¼äºº Eric Normandã€David Nolen å’Œ Alex Miller å¯¹æœ¬ä¹¦çš„ç§¯æå®£ä¼ ã€‚åœ¨ä¸‹ä¸€å±Š Conj å¤§ä¼šä¸Šè§!\næœ€åï¼Œè¦æ„Ÿè°¢ No Starch å‡ºç‰ˆç¤¾çš„å„ä½åŒä»ï¼Œæ„Ÿè°¢ä½ ä»¬å¯¹æœ¬ä¹¦çš„å¸®åŠ©ï¼Œä½¿ä¹‹æˆä¸ºæˆ‘æ— æ¯”è‡ªè±ªçš„ä½œå“ã€‚æ„Ÿè°¢ä½ ä»¬çš„é«˜æ ‡å‡†ã€‚æ„Ÿè°¢ä½ ä»¬ä¸æ–­åœ°ä¿ƒä½¿æœ¬ä¹¦æ›´åŠ æ¸…æ™°ï¼Œç”šè‡³æå‡ºç¬‘è¯ã€‚(Seph çš„ \u0026ldquo;èœ¡çƒ \u0026ldquo;ç¼–è¾‘ä»ç„¶è®©æˆ‘å¼€æ€€å¤§ç¬‘ã€‚) Seph Kramer, Riley Hoffman, Hayley Baker, Alison Law, Tyler Ortman, Anne Marie Walker: è°¢è°¢ä½ ä»¬!","title":"Acknowledgments è‡´è°¢"},{"content":"å‰è¨€ å½“ä½ é˜…è¯»è¿™æœ¬æç¬‘çš„ä¹¦æ—¶ï¼Œä½ ä¼šåœ¨æŸä¸ªæ—¶åˆ»ç»å†ä¸€ä¸ªéå¸¸ä¸¥è‚ƒçš„æ—¶åˆ»ã€‚åœ¨äº†è§£äº†ä¸€äº› Clojure ä¹‹åï¼Œç¼–ç¨‹å˜å¾—æ›´åŠ æœ‰è¶£ã€‚è¿™ä¹Ÿæ˜¯ä½ åœ¨è¿™æœ¬ä¹¦ä¸Šçš„æŠ•èµ„ï¼ŒåŒ…æ‹¬é‡‘é’±å’Œæ—¶é—´ï¼Œå¾—åˆ°å›æŠ¥çš„æ—¶åˆ»\u0026ndash;æœ‰è¶£ã€‚\nå¹½é»˜ä¸ä¸¥è‚ƒæ€§æœ‰ä¸€å®šçš„å…³ç³»ã€‚å¯¹ä¸¥è‚ƒçš„äº‹æƒ…å¼€ç©ç¬‘æ˜¯åˆé€‚çš„ï¼Œä½†åªæœ‰åœ¨é€‚å½“çš„æ—¶é—´è¿‡å»ä¹‹åã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘æƒ³èµ·æˆ‘æœ€å–œæ¬¢çš„å”å”çš„æœ€åä¸€å¥è¯æ—¶ï¼Œæˆ‘èŠ±äº†å¾ˆå¤šå¹´æ‰èƒ½å¤Ÿç ´æ¶•ä¸ºç¬‘ã€‚\u0026ldquo;æ‹¿ç€æˆ‘çš„å•¤é…’\u0026rdquo;ã€‚\nè¿™æœ¬ä¹¦çš„å·¥ä½œæ–¹å¼æ­£å¥½ç›¸åã€‚å®ƒåœ¨ä¸¥è‚ƒäº‹ä»¶å‘ç”Ÿä¹‹å‰ï¼Œç”šè‡³åœ¨ä¸¥è‚ƒäº‹ä»¶å‘ç”ŸæœŸé—´ï¼Œé€‚æ—¶åœ°æŒ‡å‡ºäº†çœŸæ­£æœ‰è¶£çš„äº‹æƒ…\u0026ndash;é‚£ä¸€åˆ»ä½ æ„è¯†åˆ°ä½ å› ä¸º Clojure è€Œæ›´å–œæ¬¢ç¼–ç¨‹ã€‚å®ƒåœ¨åšåˆ°è¿™ä¸€ç‚¹çš„åŒæ—¶ï¼Œå¹¶æ²¡æœ‰æ©ç›–ä½ å°†è¦å­¦ä¹ çš„ Clojure ç¼–ç¨‹çš„æ·±å±‚æŠ€æœ¯å±‚é¢ã€‚\nè¿™ç§æ–¹æ³•ä»¤äººè€³ç›®ä¸€æ–°ï¼Œå› ä¸ºæˆ‘è¯»è¿‡çš„å¤§å¤šæ•°ç¼–ç¨‹ä¹¦ç±éƒ½æ¯”éª†é©¼çš„å±è¿˜å¹²ã€‚æˆ‘ä»¬å¾ˆå¹¸è¿ï¼Œä¸¹å°¼å°”æ˜¯ä¸€ä½å‡ºè‰²çš„ç¨‹åºå‘˜å’Œä½œå®¶ï¼Œä»–çš„å¦»å­æ°æ–¯æ˜¯ä¸€ä½åŒæ ·å‡ºè‰²çš„æ’å›¾ç”»å®¶ã€‚æˆ‘ä»¬ç‰¹åˆ«å¹¸è¿çš„æ˜¯ï¼Œä»–ä»¬ä¸¤ä¸ªéƒ½ç–¯äº†ï¼Œå†³å®šåœ¨å®Œå…¨ç›¸åŒçš„æ—¶é—´å†™ä¸€æœ¬ä¹¦ã€‚\nClojure æ˜¯æœ¬ä¹¦çš„ä¸»é¢˜ï¼Œä½†åœ¨æŸç§ç¨‹åº¦ä¸Šå®ƒ\u0026ndash;æˆ–è€…è¯´å®ƒçš„åˆ›é€ è€… Rich Hickey\u0026ndash;ä¹Ÿæ˜¯ä½œè€…ä¹‹ä¸€ï¼Œå› ä¸º Clojure æ˜¯æœ‰å²ä»¥æ¥æœ€ä¼˜é›…çš„ç¼–ç¨‹è¯­è¨€ã€‚å°±åƒæ—©åˆé¤çš„æ¦‚å¿µä¸€æ ·ï¼ŒClojure æ˜¯å¦‚æ­¤çš„ä¼˜é›…ï¼Œä»¥è‡³äºå¦‚æœä¸ä»¥æŸç§æ–¹å¼æé«˜ä»–ä»¬çš„æ°´å¹³ï¼Œå°±å¾ˆéš¾å‘Šè¯‰åˆ«äººå…³äºå®ƒçš„ä»»ä½•äº‹æƒ…ã€‚\nä¼˜é›…æ˜¯ç¼–ç¨‹è¯­è¨€å®¶æ—ä¸­è®¸å¤š Lisp æ–¹è¨€ç»å¸¸è¢«èµ‹äºˆçš„å“è´¨ï¼ŒClojure å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚æ‰€æœ‰çš„ Lisp éƒ½æ˜¯ç”±æ•°å­¦å®¶ John McCarthy åœ¨ 1958 å¹´åšå‡ºçš„ä¸€ç³»åˆ—ç®€å•è€Œç¾ä¸½çš„å‘ç°æ¼”å˜è€Œæ¥ã€‚\nè‡ª 1958 å¹´ä»¥æ¥ï¼Œå‡ºç°äº†è®¸å¤š Lisp æ–¹è¨€ å’Œ Lisp ä¹¦ç±ã€‚è¿˜æœ‰æ›´å¤šçš„ Lisp æ–¹è¨€ å’Œä¹¦ç±å³å°†é—®ä¸–ã€‚ä½œä¸ºè¿‡å»å’Œæœªæ¥çš„ç¥å™¨ï¼Œæ¯ä¸€ç§éƒ½é€‚åˆå®ƒä»¬çš„ä½œè€…åœ¨å„è‡ªçš„æ—¶ä»£æ‰€é¢ä¸´çš„ç‹¬ç‰¹çš„çº¦æŸå’Œæ¬²æœ›çš„ç»„åˆã€‚\næˆ‘å‘ç° Clojureï¼Œä»¥åŠè¿™æœ¬å…³äºå®ƒçš„ç‰¹æ®Šä¹¦ç±ï¼Œç‰¹åˆ«é€‚åˆç°åœ¨ã€‚æˆ‘å¸Œæœ›ä½ ä¹Ÿä¼šè¿™æ ·ã€‚\nAlan Dipert\n","permalink":"https://zhenfeng-zhu.github.io/post/foreword/","summary":"å‰è¨€ å½“ä½ é˜…è¯»è¿™æœ¬æç¬‘çš„ä¹¦æ—¶ï¼Œä½ ä¼šåœ¨æŸä¸ªæ—¶åˆ»ç»å†ä¸€ä¸ªéå¸¸ä¸¥è‚ƒçš„æ—¶åˆ»ã€‚åœ¨äº†è§£äº†ä¸€äº› Clojure ä¹‹åï¼Œç¼–ç¨‹å˜å¾—æ›´åŠ æœ‰è¶£ã€‚è¿™ä¹Ÿæ˜¯ä½ åœ¨è¿™æœ¬ä¹¦ä¸Šçš„æŠ•èµ„ï¼ŒåŒ…æ‹¬é‡‘é’±å’Œæ—¶é—´ï¼Œå¾—åˆ°å›æŠ¥çš„æ—¶åˆ»\u0026ndash;æœ‰è¶£ã€‚\nå¹½é»˜ä¸ä¸¥è‚ƒæ€§æœ‰ä¸€å®šçš„å…³ç³»ã€‚å¯¹ä¸¥è‚ƒçš„äº‹æƒ…å¼€ç©ç¬‘æ˜¯åˆé€‚çš„ï¼Œä½†åªæœ‰åœ¨é€‚å½“çš„æ—¶é—´è¿‡å»ä¹‹åã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘æƒ³èµ·æˆ‘æœ€å–œæ¬¢çš„å”å”çš„æœ€åä¸€å¥è¯æ—¶ï¼Œæˆ‘èŠ±äº†å¾ˆå¤šå¹´æ‰èƒ½å¤Ÿç ´æ¶•ä¸ºç¬‘ã€‚\u0026ldquo;æ‹¿ç€æˆ‘çš„å•¤é…’\u0026rdquo;ã€‚\nè¿™æœ¬ä¹¦çš„å·¥ä½œæ–¹å¼æ­£å¥½ç›¸åã€‚å®ƒåœ¨ä¸¥è‚ƒäº‹ä»¶å‘ç”Ÿä¹‹å‰ï¼Œç”šè‡³åœ¨ä¸¥è‚ƒäº‹ä»¶å‘ç”ŸæœŸé—´ï¼Œé€‚æ—¶åœ°æŒ‡å‡ºäº†çœŸæ­£æœ‰è¶£çš„äº‹æƒ…\u0026ndash;é‚£ä¸€åˆ»ä½ æ„è¯†åˆ°ä½ å› ä¸º Clojure è€Œæ›´å–œæ¬¢ç¼–ç¨‹ã€‚å®ƒåœ¨åšåˆ°è¿™ä¸€ç‚¹çš„åŒæ—¶ï¼Œå¹¶æ²¡æœ‰æ©ç›–ä½ å°†è¦å­¦ä¹ çš„ Clojure ç¼–ç¨‹çš„æ·±å±‚æŠ€æœ¯å±‚é¢ã€‚\nè¿™ç§æ–¹æ³•ä»¤äººè€³ç›®ä¸€æ–°ï¼Œå› ä¸ºæˆ‘è¯»è¿‡çš„å¤§å¤šæ•°ç¼–ç¨‹ä¹¦ç±éƒ½æ¯”éª†é©¼çš„å±è¿˜å¹²ã€‚æˆ‘ä»¬å¾ˆå¹¸è¿ï¼Œä¸¹å°¼å°”æ˜¯ä¸€ä½å‡ºè‰²çš„ç¨‹åºå‘˜å’Œä½œå®¶ï¼Œä»–çš„å¦»å­æ°æ–¯æ˜¯ä¸€ä½åŒæ ·å‡ºè‰²çš„æ’å›¾ç”»å®¶ã€‚æˆ‘ä»¬ç‰¹åˆ«å¹¸è¿çš„æ˜¯ï¼Œä»–ä»¬ä¸¤ä¸ªéƒ½ç–¯äº†ï¼Œå†³å®šåœ¨å®Œå…¨ç›¸åŒçš„æ—¶é—´å†™ä¸€æœ¬ä¹¦ã€‚\nClojure æ˜¯æœ¬ä¹¦çš„ä¸»é¢˜ï¼Œä½†åœ¨æŸç§ç¨‹åº¦ä¸Šå®ƒ\u0026ndash;æˆ–è€…è¯´å®ƒçš„åˆ›é€ è€… Rich Hickey\u0026ndash;ä¹Ÿæ˜¯ä½œè€…ä¹‹ä¸€ï¼Œå› ä¸º Clojure æ˜¯æœ‰å²ä»¥æ¥æœ€ä¼˜é›…çš„ç¼–ç¨‹è¯­è¨€ã€‚å°±åƒæ—©åˆé¤çš„æ¦‚å¿µä¸€æ ·ï¼ŒClojure æ˜¯å¦‚æ­¤çš„ä¼˜é›…ï¼Œä»¥è‡³äºå¦‚æœä¸ä»¥æŸç§æ–¹å¼æé«˜ä»–ä»¬çš„æ°´å¹³ï¼Œå°±å¾ˆéš¾å‘Šè¯‰åˆ«äººå…³äºå®ƒçš„ä»»ä½•äº‹æƒ…ã€‚\nä¼˜é›…æ˜¯ç¼–ç¨‹è¯­è¨€å®¶æ—ä¸­è®¸å¤š Lisp æ–¹è¨€ç»å¸¸è¢«èµ‹äºˆçš„å“è´¨ï¼ŒClojure å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚æ‰€æœ‰çš„ Lisp éƒ½æ˜¯ç”±æ•°å­¦å®¶ John McCarthy åœ¨ 1958 å¹´åšå‡ºçš„ä¸€ç³»åˆ—ç®€å•è€Œç¾ä¸½çš„å‘ç°æ¼”å˜è€Œæ¥ã€‚\nè‡ª 1958 å¹´ä»¥æ¥ï¼Œå‡ºç°äº†è®¸å¤š Lisp æ–¹è¨€ å’Œ Lisp ä¹¦ç±ã€‚è¿˜æœ‰æ›´å¤šçš„ Lisp æ–¹è¨€ å’Œä¹¦ç±å³å°†é—®ä¸–ã€‚ä½œä¸ºè¿‡å»å’Œæœªæ¥çš„ç¥å™¨ï¼Œæ¯ä¸€ç§éƒ½é€‚åˆå®ƒä»¬çš„ä½œè€…åœ¨å„è‡ªçš„æ—¶ä»£æ‰€é¢ä¸´çš„ç‹¬ç‰¹çš„çº¦æŸå’Œæ¬²æœ›çš„ç»„åˆã€‚\næˆ‘å‘ç° Clojureï¼Œä»¥åŠè¿™æœ¬å…³äºå®ƒçš„ç‰¹æ®Šä¹¦ç±ï¼Œç‰¹åˆ«é€‚åˆç°åœ¨ã€‚æˆ‘å¸Œæœ›ä½ ä¹Ÿä¼šè¿™æ ·ã€‚\nAlan Dipert","title":"Foreword å‰è¨€"},{"content":" æœ¬æ–‡ä¸»è¦ä»‹ç» Thrift çš„ IDL åŸºæœ¬è¯­æ³•ã€‚\n IDL Thrift é‡‡ç”¨ IDLï¼ˆInterface Definition Languageï¼‰æ¥å®šä¹‰é€šç”¨çš„æœåŠ¡æ¥å£ï¼Œç„¶åé€šè¿‡ Thrift æä¾›çš„ç¼–è¯‘å™¨ï¼Œå¯ä»¥å°†æœåŠ¡æ¥å£ç¼–è¯‘æˆä¸åŒè¯­è¨€ç¼–å†™çš„ä»£ç ï¼Œé€šè¿‡è¿™ä¸ªæ–¹å¼æ¥å®ç°è·¨è¯­è¨€çš„åŠŸèƒ½ã€‚\nåŸºæœ¬ç±»å‹ thriftåŸºæœ¬æ”¯æŒæ‰€æœ‰çš„ Java åŸºæœ¬ç±»å‹ä»¥åŠå¼•ç”¨ç±»å‹ã€‚\n bool  å¸ƒå°”å€¼ï¼Œå¯¹åº” java ä¸­çš„ boolean   byte  æœ‰ç¬¦å·å­—èŠ‚ï¼Œå¯¹åº” java ä¸­çš„ byte   i16  16 ä½æœ‰ç¬¦å·æ•´å‹ï¼Œå¯¹åº” java ä¸­çš„ short   i32  32 ä½æœ‰ç¬¦å·æ•´å‹ï¼Œå¯¹åº” java ä¸­çš„ int   i64  64 ä½æœ‰ç¬¦å·æ•´å‹ï¼Œå¯¹åº” java ä¸­çš„ long   double  64 ä½æµ®ç‚¹å‹ï¼Œå¯¹åº” java ä¸­çš„ double   string  å­—ç¬¦ä¸²ï¼Œå¯¹åº” java ä¸­çš„ String   binary  å¯¹åº” java ä¸­çš„ byte[]    struct ç»“æ„ä½“ struct æœ‰ä»¥ä¸‹çš„ä¸€äº›çº¦æŸï¼š\n struct ä¸èƒ½ç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥åµŒå¥—ï¼Œä¸èƒ½åµŒå¥—è‡ªå·±ã€‚ å…¶æˆå‘˜éƒ½æ˜¯æœ‰æ˜ç¡®çš„ç±»å‹ æˆå‘˜éƒ½æ˜¯è¢«æ­£æ•´æ•°ç¼–å·è¿‡çš„ï¼Œå…¶ä¸­çš„ç¼–å·ä¸èƒ½é‡å¤ï¼Œä¸ºäº†åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ç¼–ç ä½¿ç”¨ã€‚ æˆå‘˜åˆ†éš”ç¬¦å¯ä»¥æ˜¯é€—å·ï¼ˆ,ï¼‰æˆ–è€…åˆ†å·ï¼ˆ;ï¼‰ï¼Œè€Œä¸”å¯ä»¥æ··ç”¨ã€‚ å­—æ®µä¼šæœ‰æœ‰ optional å’Œ required ä¹‹åˆ†ã€‚ä½†æ˜¯å¦‚æœä¸æŒ‡å®šåˆ™ä¸ºæ— ç±»å‹â€“å¯ä»¥ä¸å¡«å……è¯¥å€¼ï¼Œä½†æ˜¯åœ¨åºåˆ—åŒ–ä¼ è¾“çš„æ—¶å€™ä¹Ÿä¼šåºåˆ—åŒ–è¿›å»ï¼Œoptional æ˜¯ä¸å¡«å……åˆ™ä¸åºåˆ—åŒ–ï¼Œrequired æ˜¯å¿…é¡»å¡«å……ä¹Ÿå¿…é¡»åºåˆ—åŒ–ã€‚ æ¯ä¸ªå­—æ®µå¯ä»¥è®¾ç½®é»˜è®¤å€¼ã€‚ åŒä¸€ä¸ªæ–‡ä»¶å¯ä»¥å®šä¹‰å¤šä¸ª structï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨ä¸åŒçš„æ–‡ä»¶ï¼Œè¿›è¡Œ include å¼•å…¥ã€‚  ä¾‹å­ï¼š\nstruct User {  1: required string name, // è¯¥å­—æ®µå€¼å¿…é¡»å¡«å†™  2: optional i32 age = 0; // é»˜è®¤å€¼  3: bool gender // é»˜è®¤ä¸ºoptional } å¦‚æœ required æ ‡è¯†çš„åŸŸæ²¡æœ‰èµ‹å€¼ï¼ŒThrift å°†ç»™äºˆæç¤ºï¼›\n  å¦‚æœ optional æ ‡è¯†çš„åŸŸæ²¡æœ‰èµ‹å€¼ï¼Œè¯¥åŸŸå°†ä¸ä¼šè¢«åºåˆ—åŒ–ä¼ è¾“ï¼›\n  å¦‚æœæŸä¸ª optional æ ‡è¯†åŸŸæœ‰ç¼ºçœå€¼è€Œç”¨æˆ·æ²¡æœ‰é‡æ–°èµ‹å€¼ï¼Œåˆ™è¯¥åŸŸçš„å€¼ä¸€ç›´ä¸ºç¼ºçœå€¼ï¼›\n  å¦‚æœæŸä¸ª optional æ ‡è¯†åŸŸæœ‰ç¼ºçœå€¼æˆ–è€…ç”¨æˆ·å·²ç»é‡æ–°èµ‹å€¼ï¼Œè€Œä¸è®¾ç½®å®ƒçš„__isset ä¸º trueï¼Œä¹Ÿä¸ä¼šè¢«åºåˆ—åŒ–ä¼ è¾“ã€‚\n  container å®¹å™¨ æœ‰ä¸‰ç§å¯ç”¨çš„å®¹å™¨ç±»å‹ï¼š\n list\u0026lt;t\u0026gt;  å…ƒç´ ç±»å‹ä¸º t çš„æœ‰åºåˆ—è¡¨ï¼Œå…è®¸é‡å¤ã€‚ç±»ä¼¼äº java ä¸­çš„ ArrayListã€‚   set\u0026lt;t\u0026gt;  å…ƒç´ ç±»å‹ä¸º t çš„æ— åºè¡¨ï¼Œä¸å…è®¸é‡å¤ã€‚ç±»ä¼¼äº java ä¸­çš„ HashSetã€‚   map\u0026lt;t, t\u0026gt;  é”®ç±»å‹ä¸º tï¼Œå€¼ç±»å‹ä¸º t çš„é”®å€¼å¯¹ï¼Œé”®ä¸å…è®¸é‡å¤ã€‚ç±»ä¼¼äº java ä¸­çš„ HashMapã€‚    ä¾‹å­ï¼š\nstruct Test {  1: map\u0026lt;string, User\u0026gt; usermap,  2: set\u0026lt;i32\u0026gt; intset,  3: list\u0026lt;double\u0026gt; doublelist } enum æšä¸¾ enum ç±»å‹æœ‰å¦‚ä¸‹çº¦æŸï¼š\n ç¼–è¯‘å™¨é»˜è®¤ä» 0 å¼€å§‹èµ‹å€¼ã€‚ å¯ä»¥èµ‹äºˆæŸä¸ªå¸¸é‡ä¸ºæŸä¸ªæ•´æ•°ã€‚ å…è®¸å¸¸é‡æ˜¯ 16 è¿›åˆ¶æ•´æ•°ã€‚ æœ«å°¾æ²¡æœ‰åˆ†å·ã€‚ ç»™å¸¸é‡èµ‹ç¼ºçœå€¼çš„æ—¶å€™ï¼Œä½¿ç”¨å¸¸é‡å…¨ç¨‹ã€‚  Thrift ä¸æ”¯æŒæšä¸¾ç±»åµŒå¥—ï¼Œæšä¸¾å¸¸é‡å¿…é¡»æ˜¯ 32 ä½æ­£æ•´æ•°ã€‚\nä¾‹å­ï¼š\nenum HTTPStatus {  OK = 200,  NOT_FOUND = 404 } const å¸¸é‡ åœ¨å˜é‡å‰åŠ  constã€‚\nä¾‹å­ï¼š\nconst i32 age = 28; typedef ç±»å‹å®šä¹‰ Thrift æ”¯æŒç±»ä¼¼ C/C++çš„ç±»å‹å®šä¹‰ã€‚\nä¾‹å­ï¼š\ntypedef i32 myInt typedef i64 myNumber ç±»å‹å®šä¹‰çš„æœ«å°¾æ²¡æœ‰é€—å·ã€‚\nexception å¼‚å¸¸ å¼‚å¸¸åœ¨è¯­æ³•å’ŒåŠŸèƒ½ä¸Šç±»ä¼¼äºç»“æ„ä½“ï¼Œå·®åˆ«æ˜¯å¼‚å¸¸ä½¿ç”¨å…³é”®å­— exceptionï¼Œè€Œä¸”å¼‚å¸¸æ˜¯ç»§æ‰¿æ¯ç§è¯­è¨€çš„åŸºç¡€å¼‚å¸¸ç±»ã€‚\nä¾‹å­ï¼š\nexception MyException {  1: i32 errCode,  2: string errMsg } service æœåŠ¡ æœåŠ¡çš„å®šä¹‰æ–¹æ³•åœ¨è¯­ä¹‰ä¸Šç­‰åŒäºé¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„æ¥å£ã€‚\nä¾‹å­ï¼š\nservice HelloService {  i32 sayInt(1:i32 param)  string sayString(1:string param)  bool sayBoolean(1:bool param)  void sayVoid() } namespace å‘½åç©ºé—´ Thrift ä¸­çš„å‘½åç©ºé—´ç±»ä¼¼äº C++ä¸­çš„ namespace å’Œ java ä¸­çš„ packageï¼Œå®ƒä»¬æä¾›äº†ä¸€ç§ç»„ç»‡ï¼ˆéš”ç¦»ï¼‰ä»£ç çš„ç®€ä¾¿æ–¹å¼ã€‚\nåå­—ç©ºé—´ä¹Ÿå¯ä»¥ç”¨äºè§£å†³ç±»å‹å®šä¹‰ä¸­çš„åå­—å†²çªã€‚\nä¾‹å­ï¼š\nnamespace java com.example.test namespace py example namespace go example include å¼•ç”¨ ä¸ºäº†ä¾¿äºç®¡ç†ã€é‡ç”¨å’Œæé«˜æ¨¡å—æ€§/ç»„ç»‡æ€§ï¼Œæˆ‘ä»¬å¸¸å¸¸åˆ†å‰² Thrift å®šä¹‰åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚\nThrift å…è®¸æ–‡ä»¶åŒ…å«å…¶å®ƒ thrift æ–‡ä»¶ï¼Œç”¨æˆ·éœ€è¦ä½¿ç”¨ thrift æ–‡ä»¶åä½œä¸ºå‰ç¼€è®¿é—®è¢«åŒ…å«çš„å¯¹è±¡ã€‚\nThrift æ–‡ä»¶åè¦ç”¨åŒå¼•å·åŒ…å«ï¼Œæœ«å°¾æ²¡æœ‰é€—å·æˆ–è€…åˆ†å·ã€‚\nä¾‹å­ï¼š\ninclude \u0026#34;test.thrift\u0026#34; include \u0026#34;../test.thrift\u0026#34; æ³¨é‡Š æ”¯æŒå¤šè¡Œå’Œå•è¡Œé£æ ¼ã€‚\nä¾‹å­ï¼š\n/**  * This is a multi-line comment.  * Just like in C.  */  // C++/Java style single-line comments work just as well. å‚è€ƒèµ„æ–™\n Thrift Types [Thrift IDL åŸºæœ¬è¯­æ³•](http://1csh1.github.io/2017/02/21/Thrift IDL åŸºæœ¬è¯­æ³•/) Thrift IDL å¿«é€Ÿå…¥é—¨  ","permalink":"https://zhenfeng-zhu.github.io/post/thrfit-get-started/","summary":"æœ¬æ–‡ä¸»è¦ä»‹ç» Thrift çš„ IDL åŸºæœ¬è¯­æ³•ã€‚\n IDL Thrift é‡‡ç”¨ IDLï¼ˆInterface Definition Languageï¼‰æ¥å®šä¹‰é€šç”¨çš„æœåŠ¡æ¥å£ï¼Œç„¶åé€šè¿‡ Thrift æä¾›çš„ç¼–è¯‘å™¨ï¼Œå¯ä»¥å°†æœåŠ¡æ¥å£ç¼–è¯‘æˆä¸åŒè¯­è¨€ç¼–å†™çš„ä»£ç ï¼Œé€šè¿‡è¿™ä¸ªæ–¹å¼æ¥å®ç°è·¨è¯­è¨€çš„åŠŸèƒ½ã€‚\nåŸºæœ¬ç±»å‹ thriftåŸºæœ¬æ”¯æŒæ‰€æœ‰çš„ Java åŸºæœ¬ç±»å‹ä»¥åŠå¼•ç”¨ç±»å‹ã€‚\n bool  å¸ƒå°”å€¼ï¼Œå¯¹åº” java ä¸­çš„ boolean   byte  æœ‰ç¬¦å·å­—èŠ‚ï¼Œå¯¹åº” java ä¸­çš„ byte   i16  16 ä½æœ‰ç¬¦å·æ•´å‹ï¼Œå¯¹åº” java ä¸­çš„ short   i32  32 ä½æœ‰ç¬¦å·æ•´å‹ï¼Œå¯¹åº” java ä¸­çš„ int   i64  64 ä½æœ‰ç¬¦å·æ•´å‹ï¼Œå¯¹åº” java ä¸­çš„ long   double  64 ä½æµ®ç‚¹å‹ï¼Œå¯¹åº” java ä¸­çš„ double   string  å­—ç¬¦ä¸²ï¼Œå¯¹åº” java ä¸­çš„ String   binary  å¯¹åº” java ä¸­çš„ byte[]    struct ç»“æ„ä½“ struct æœ‰ä»¥ä¸‹çš„ä¸€äº›çº¦æŸï¼š","title":"Thrfit å…¥é—¨"},{"content":"é—®é¢˜è¡¨ç° æŸå¤©ï¼Œæˆ‘çš„ vscode çš„ git ç®¡ç†å‡ºç°äº†é—®é¢˜ã€‚\nç±»ä¼¼è¿™ä¸ªæ ·å­ã€‚\nè§£å†³æ–¹å¼ @builtin @id:vscode.git ç›´æ¥å¸è½½äº†ã€‚\nå‡ºç°åŸå›  åº”è¯¥æ˜¯æŸä¸ªå…¬å¸çš„æ’ä»¶ç»™æˆ‘è‡ªåŠ¨è£…ä¸Šå¯¼è‡´çš„\n","permalink":"https://zhenfeng-zhu.github.io/post/fix-vscode-git-cannot-use-api-proposal-scmvalidation/","summary":"é—®é¢˜è¡¨ç° æŸå¤©ï¼Œæˆ‘çš„ vscode çš„ git ç®¡ç†å‡ºç°äº†é—®é¢˜ã€‚\nç±»ä¼¼è¿™ä¸ªæ ·å­ã€‚\nè§£å†³æ–¹å¼ @builtin @id:vscode.git ç›´æ¥å¸è½½äº†ã€‚\nå‡ºç°åŸå›  åº”è¯¥æ˜¯æŸä¸ªå…¬å¸çš„æ’ä»¶ç»™æˆ‘è‡ªåŠ¨è£…ä¸Šå¯¼è‡´çš„","title":"ä¿®å¤ Vscode Git Cannot Use Api Proposal ScmValidation"},{"content":" Gavin Wood åœ¨ 2014 å¹´åˆ›é€ äº† Web3ï¼ˆæœ€åˆæ˜¯ Web 3.0ï¼‰è¿™ä¸ªè¯ã€‚å½“æ—¶ï¼Œä»–åˆšå¼€å§‹å¸®åŠ©å¼€å‘ä»¥å¤ªåŠï¼Œè¿™æ˜¯ä¸€ç§åœ¨çŸ¥ååº¦å’Œå¸‚åœºè§„æ¨¡ä¸Šä»…æ¬¡äºæ¯”ç‰¹å¸çš„åŠ å¯†è´§å¸ã€‚å¦‚ä»Šï¼Œä»–ç»è¥ç€æ”¯æŒå»ä¸­å¿ƒåŒ–æŠ€æœ¯é¡¹ç›®çš„ Web3 åŸºé‡‘ä¼šï¼Œä»¥åŠä¸“æ³¨äºä¸º Web3 æ„å»ºåŒºå—é“¾åŸºç¡€è®¾æ–½çš„å…¬å¸ Parity Technologiesã€‚å±…ä½åœ¨ç‘å£«çš„ Gavin ä¸Šå‘¨é€šè¿‡è§†é¢‘ä¸æˆ‘è®¨è®ºäº† Web 2.0 å‡ºé”™çš„åœ°æ–¹ã€ä»–å¯¹æœªæ¥çš„å±•æœ›ï¼Œä»¥åŠä¸ºä»€ä¹ˆæˆ‘ä»¬éƒ½éœ€è¦æ›´å°‘çš„ä¿¡ä»»ã€‚ä»¥ä¸‹é‡‡è®¿æ˜¯æˆ‘ä»¬è°ˆè¯çš„è®°å½•çš„æ•´ç†ç‰ˆã€‚\n  WIREDï¼šæ®æˆ‘æ‰€çŸ¥ï¼ŒWeb3 æœ€åŸºæœ¬çš„æƒ³æ³•æ˜¯å½“å‰çš„ Web2.0 ä¸å¥½ã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬è®¨è®º Web3 ä¼šå¸¦æ¥ä»€ä¹ˆä¹‹å‰ï¼Œä½ ä¼šæ€ä¹ˆæè¿°ç°åœ¨çš„é—®é¢˜ï¼Ÿ\nGavin Woodï¼šæˆ‘è®¤ä¸º Web 2.0 çš„æ¨¡å‹ä¸äº’è”ç½‘å‡ºç°ä¹‹å‰çš„ç¤¾ä¼šæ¨¡å‹éå¸¸ç›¸ä¼¼ã€‚å¦‚æœä½ å›åˆ° 500 å¹´å‰ï¼Œäººä»¬åŸºæœ¬ä¸Šåªåœ¨ä»–ä»¬çš„å°æ‘åº„å’Œä¹¡é•‡ï¼Œå¹¶ä¸ä»–ä»¬è®¤è¯†çš„äººè¿›è¡Œäº¤æ˜“ã€‚ä»å¹¿ä¹‰ä¸Šè®²ï¼Œä»–ä»¬ä¾é ç¤¾ä¼šç»“æ„æ¥ç¡®ä¿ä»–ä»¬çš„æœŸæœ›æ˜¯å¯ä¿¡çš„ï¼Œå¹¶ä¸”å¾ˆå¯èƒ½ä¼šçœŸæ­£å‘ç”Ÿï¼Œæ¯”å¦‚ï¼Œè¿™äº›è‹¹æœæ²¡æœ‰è…çƒ‚ï¼Œæˆ–è€…è¿™ä¸ªé©¬è¹„é“åœ¨ä¸‰å‘¨åä¸ä¼šç ´è£‚ã€‚\nè¿™ç§æœºåˆ¶è¿è¡Œå¾ˆå¥½ï¼Œå› ä¸ºåœ¨åŸé•‡ä¹‹é—´ç§»åŠ¨æ—¢å›°éš¾åˆè€—æ—¶ä¸”æˆæœ¬é«˜æ˜‚ã€‚æ‰€ä»¥ä½ æœ‰ç›¸å½“é«˜çš„å¯ä¿¡åº¦ï¼Œå°±ä¼šæœ‰äººç•™ä¸‹æ¥ï¼Œä»–ä»¬å¹¶ä¸æƒ³è¢«æµæ”¾ã€‚\nä½†æ˜¯éšç€ç¤¾ä¼šå˜å¾—æ›´å¤§è§„æ¨¡ï¼Œæˆ‘ä»¬æœ‰äº†åŸå¸‚ã€å›½å®¶å’Œå›½é™…ç»„ç»‡ï¼Œæˆ‘ä»¬å¼€å§‹å…³æ³¨è¿™ç§å¥‡æ€ªçš„å“ç‰Œå£°èª‰é—®é¢˜ã€‚æˆ‘ä»¬åˆ›å»ºäº†è¿™äº›å¼ºå¤§ä½†å—ç›‘ç®¡çš„æœºæ„ï¼Œç›‘ç®¡æœºæ„åŸåˆ™ä¸Šç¡®ä¿æ»¡è¶³æˆ‘ä»¬çš„æœŸæœ›ã€‚æƒ³è¦åœ¨ç‰¹å®šè¡Œä¸šå¼€å±•ä¸šåŠ¡ï¼Œä½ å¿…é¡»æ»¡è¶³æŸäº›æ³•å®šè¦æ±‚ã€‚\nè¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼ŒåŸå› æœ‰å‡ ä¸ªã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯ï¼Œå»ç›‘ç®¡æ–°å…´äº§ä¸šéå¸¸å›°éš¾ã€‚æ”¿åºœçš„è¡ŒåŠ¨æ˜¯æ¯”è¾ƒç¼“æ…¢çš„ï¼Œéœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½èµ¶ä¸Šã€‚å¦ä¸€ä¸ªæ˜¯ç›‘ç®¡æœºæ„ä¸å®Œå–„ã€‚å°¤å…¶æ˜¯å½“ä»–ä»¬ä¸è¡Œä¸šå¯†åˆ‡åˆä½œæ—¶ï¼Œè¡Œä¸šå’Œç›‘ç®¡æœºæ„ä¹‹é—´é€šå¸¸ä¼šå­˜åœ¨ä¸€äº›æ—‹è½¬é—¨å…³ç³»ã€‚\nå¦ä¸€ä¸ªæ˜¯ç›‘ç®¡æœºæ„çš„æ”¯æŒåŠ›åº¦éå¸¸æœ‰é™ï¼Œä¹Ÿå°±æ˜¯æ”¿åºœæŠ•å…¥å¤šå°‘èµ„é‡‘ã€‚å› æ­¤ï¼Œç›‘ç®¡å°†æ˜¯ä¸å®Œæ•´çš„ã€‚ä»–ä»¬èƒ½å¤Ÿç›‘ç®¡æœ€å¤§çš„ç½ªçŠ¯ï¼Œä½†ä»–ä»¬æ— æ³•åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¿æŒçœŸæ­£å¼ºå¤§çš„å½±å“åŠ›ã€‚å½“ç„¶ï¼Œç›‘ç®¡æœºæ„å’Œæ³•å¾‹å› å¸æ³•ç®¡è¾–åŒºè€Œå¼‚ã€‚å¦‚æœä½ å»æ¬§ç›Ÿçš„æŸä¸ªåœ°æ–¹ï¼Œé‚£ä¹ˆ xx æ´»åŠ¨å°±å¯ä»¥äº†ï¼›å¦‚æœä½ å»åˆ«çš„åœ°æ–¹ï¼Œé‚£å°±ä¸è¡Œäº†ã€‚éšç€æˆ‘ä»¬æˆä¸ºä¸€ä¸ªéå¸¸å›½é™…åŒ–çš„ç¤¾ä¼šï¼Œè¿™å®é™…ä¸Šæ„å‘³ç€ä½ çš„æœŸæœ›ä»æœªå¾—åˆ°æ»¡è¶³ã€‚\næ‰€ä»¥æˆ‘ä»¬éœ€è¦è¶…è¶Šè¿™ä¸€ç‚¹ã€‚ä½†ä¸å¹¸çš„æ˜¯ï¼ŒWeb 2.0 ä»ç„¶å­˜åœ¨äºè¿™ç§éå¸¸ä¸­å¿ƒåŒ–çš„æ¨¡å‹ä¸­ã€‚\nWIREDï¼šæˆ‘ä»¬çœŸçš„åœ¨è°ˆè®ºæŠ€æœ¯çš„å¤±è´¥å—ï¼Ÿè¿˜æ˜¯æˆ‘ä»¬åœ¨è°ˆè®ºæ²»ç†ã€ç›‘ç®¡å’Œç«äº‰æ”¿ç­–çš„å¤±è´¥ï¼Ÿå› ä¸ºå¬èµ·æ¥ä½ æ˜¯åœ¨è¯´ï¼šè¿™æ˜¯ç›‘ç®¡çš„å¤±è´¥ï¼Œä½†ç­”æ¡ˆå´ä¸æ˜¯æ›´å¥½çš„ç›‘ç®¡ï¼Œè€Œæ˜¯éœ€è¦æœ‰ä¸€ä¸ªæ–°çš„æŠ€æœ¯å±‚ï¼Œå› ä¸ºç›‘ç®¡å¤±è´¥æ˜¯ä¸å¯é¿å…çš„ã€‚æˆ‘æ˜¯å¦æ­£ç¡®æè¿°äº†æ‚¨çš„è§‚ç‚¹ï¼Ÿ\nGavin Woodï¼šæ˜¯çš„ï¼Œè¿™ä¸ªæ¨¡å‹åäº†ã€‚\nWIREDï¼šé‚£ä¹ˆè®©æˆ‘ä»¬æ¥è°ˆè°ˆåº”è¯¥ç”¨ä»€ä¹ˆæ¥ä»£æ›¿å®ƒã€‚æˆ‘ä»¬ä¸€ç›´åœ¨è®¨è®ºä¸ºä»€ä¹ˆ Web 2.0 ä¸èµ·ä½œç”¨ã€‚ä½ å¯¹ Web3 çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ\nGavin Woodï¼šLess trust, more truthã€‚æ›´å°‘çš„ä¿¡ä»»ï¼Œæ›´å¤šçš„äº‹å®ã€‚\nWIREDï¼šâ€œless trustâ€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\nGavin Woodï¼šæˆ‘å¯¹ä¿¡ä»»æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å«ä¹‰ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¿¡ä»°ã€‚è¿™æ˜¯ä¸€ç§ä¿¡å¿µï¼ˆfaithï¼‰ï¼Œå³æŸäº›äº‹æƒ…ä¼šå‘ç”Ÿçš„ä¿¡ä»°ï¼Œä¸–ç•Œä¼šä»¥æŸç§æ–¹å¼è¿è½¬ï¼Œè€Œæ²¡æœ‰ä»»ä½•çœŸå®çš„è¯æ®æˆ–ç†æ€§çš„è®ºæ®æ¥è¯´æ˜ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³è¦çš„æ›´å°‘çš„ä¿¡ä»»ï¼Œæˆ‘ä»¬æƒ³è¦æ›´å¤šçš„äº‹å®çœŸç›¸ã€‚æˆ‘çœŸæ­£æƒ³è¡¨è¾¾çš„æ„æ€æ˜¯åœ¨ Web3 ä¸‹æ›´åŠ å¯ä»¥ç›¸ä¿¡æˆ‘ä»¬çš„æœŸæœ›ä¼šå¾—åˆ°æ»¡è¶³ã€‚\nWIREDï¼šè¿™å¬èµ·æ¥åƒæ˜¯åœ¨è¯´â€œå‡å°‘ç›²ç›®ä¿¡ä»°ï¼Œå¢åŠ ä¿¡èª‰çš„å¯ä¿¡åº¦â€ã€‚\nGavin Woodï¼šå¯ä»¥è¯´æ˜¯ï¼Œä¹Ÿå¯ä»¥è¯´ä¸æ˜¯ã€‚æˆ‘è®¤ä¸ºä¿¡ä»»æœ¬èº«å®é™…ä¸Šå›´ç»•ç€åäº‹ã€‚ä¿¡ä»»æ„å‘³ç€ä½ å°†æŸç§æƒåŠ›æˆäºˆå…¶ä»–äººæˆ–æŸä¸ªç»„ç»‡ï¼Œä»–ä»¬å°†èƒ½å¤Ÿä»¥æŸç§ä»»æ„æ–¹å¼ä½¿ç”¨è¯¥æƒåŠ›ã€‚ä¸€æ—¦å®ƒæˆä¸ºå¯ä¿¡çš„ä¿¡ä»»ï¼Œå®ƒå°±ä¸å†æ˜¯çœŸæ­£çš„ä¿¡ä»»ã€‚å®ƒä¼šæœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œä¸€ä¸ªåŸºæœ¬åŸç†ï¼Œä¸€ä¸ªè®ºç‚¹ï¼Œä¸€ä¸ªé€»è¾‘æœºåˆ¶ã€‚æ— è®ºå¦‚ä½•ï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™ä¸æ˜¯ä¿¡ä»»ã€‚\nWIREDï¼šå·²ç»å†™åˆ° Web3 å°†æ‰“ç ´åƒ Google å’Œ Facebook è¿™æ ·çš„å„æ–­ä¼ä¸šå¹³å°ã€‚ä½ èƒ½è§£é‡Šä¸€ä¸‹å®ƒå°†å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å—ï¼Ÿ\nGavin Woodï¼šæ˜¯çš„ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªåˆä¹é€»è¾‘çš„æ”¹è¿›ã€‚è€Œä¸”æˆ‘è®¤ä¸ºåœ¨æ›´å¤§çš„è®¡åˆ’ä¸­ï¼Œè¿™æ˜¯ä¸å¯é¿å…çš„ã€‚è¦ä¹ˆè¿™æ˜¯ä¸å¯é¿å…çš„ï¼Œè¦ä¹ˆç¤¾ä¼šæ­£åœ¨èµ°å‘è¡°è½ã€‚ä½†å°±å…·ä½“è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆéš¾å›ç­”çš„é—®é¢˜ã€‚\nåœ¨æŠ€æœ¯æ–¹é¢ï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆï¼Ÿæˆ‘ä»¬æœ‰å¯†ç å­¦ã€‚åœ¨åŸºæœ¬å±‚é¢ä¸Šï¼Œå¯†ç å­¦å…è®¸æˆ‘ä¸æˆ‘çš„æœ‹å‹éšç§çš„äº¤è°ˆï¼Œå³ä½¿åœ¨å…¬å¼€çš„æ²Ÿé€šæ¸ é“æˆ–é€šè¿‡ç¬¬ä¸‰æ–¹ï¼Œæˆ‘ä»ç„¶æœ‰è‰¯å¥½çš„æœŸæœ›ï¼Œå¯ä¿¡çš„æœŸæœ›ã€‚è¿™å°†æ˜¯ç§å¯†çš„ï¼Œå°±å¥½åƒæˆ‘ä»¬åœ¨ç”°é‡é‡Œäº’ç›¸èŠå¤©ï¼Œå¯ä»¥çœ‹åˆ°å‘¨å›´æ²¡æœ‰äººã€‚\nWIREDï¼šä»…ä»¥åŠ å¯†é€šä¿¡ä¸ºä¾‹ï¼Œç›®å‰çœ‹æ¥ä¸ä¼ä¸šå„æ–­éå¸¸ç›¸ä¼¼ã€‚å°±åƒï¼ŒWhatsApp æä¾›åŠ å¯†é€šä¿¡ã€‚å…³äºè¿™åœ¨å¤šå¤§ç¨‹åº¦ä¸ŠçœŸæ­£æ»¡è¶³äº†ä½ å¯¹éšç§çš„æ¸´æœ›å­˜åœ¨ä¸€äº›äº‰è®®ï¼Œä½†æˆ‘ä»ç„¶è®¤ä¸ºè¿™æ˜¯åŠ å¯†é€šä¿¡çš„ä¸€ä¸ªä¾‹å­ï¼Œå®ƒç”±ä¸–ç•Œä¸Šæœ€å¼ºå¤§çš„å…¬å¸ä¹‹ä¸€æ§åˆ¶ï¼Œæ‹¥æœ‰æ•°åäº¿ç”¨æˆ·ã€‚\nGavin Woodï¼šè¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…ï¼Œä»è¡¨é¢ä¸Šçœ‹ï¼Œæ˜¯è¿™æ ·çš„ã€‚ä½†æ˜¯æœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯ï¼Œå¦‚æœ WhatsApp åœ¨ä»–ä»¬çš„æœåŠ¡ä¸­å¼•å…¥äº†ä¸€ä¸ªå…è®¸ä»–ä»¬è§£å¯†æ‰€æœ‰å¯¹è¯çš„å¯†é’¥æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬æ€ä¹ˆçŸ¥é“å®ƒä¸å­˜åœ¨ï¼Ÿä½ å¿…é¡»ä¿¡ä»»ã€‚æˆ‘ä»¬çœ‹ä¸åˆ°ä»£ç ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°ä»–ä»¬çš„æœåŠ¡æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°ä»–ä»¬çš„å¯†é’¥ç»“æ„ã€‚æ‰€ä»¥æˆ‘ä»¬èƒ½åšçš„åªæœ‰ç›²ç›®ç›¸ä¿¡ä»–ä»¬è¯´çš„æ˜¯çœŸçš„ã€‚ç°åœ¨ä»–ä»¬è¯´å®è¯ä¹Ÿè®¸æ˜¯å› ä¸ºä»–ä»¬å®³æ€•å¦‚æœä¸è¿™æ ·åšï¼Œä»–ä»¬çš„å£°èª‰ä¼šå—åˆ°å¾ˆå¤§çš„æ‰“å‡»ã€‚ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘ä»¬ä»æ–¯è¯ºç™»çš„ä¸€äº›å¯ç¤ºä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæœ‰æ—¶å…¬å¸æ²¡æœ‰æœºä¼šè¯´å®è¯ã€‚æœ‰æ—¶ï¼Œå®‰å…¨æœåŠ¡å¯ä»¥åœ¨ä»–ä»¬çš„åå°å®‰è£…ä¸€ä¸ªç›’å­ï¼Œç„¶åä»–ä»¬è¢«å‘ŠçŸ¥ï¼Œâ€œä½ ä¸éœ€è¦çœ‹è¿™ä¸ªç›’å­ï¼Œä½ ä¸èƒ½å¯¹è¿™ä¸ªç›’å­è¯´æˆ–åšä»»ä½•äº‹æƒ…ï¼Œä½ åªèƒ½å®‰é™çš„åç€ã€‚â€\nWIREDï¼šå¬èµ·æ¥å¼€æºè½¯ä»¶å¯ä»¥å®ç°ä½ æ‰€è¯´çš„ï¼Œä½†ä½ å¹¶ä¸æ˜¯åœ¨æè¿°å¼€æºè½¯ä»¶ã€‚å½“æˆ‘ä»¬è°ˆè®º Web3 æ—¶ï¼Œæˆ‘ä»¬è°ˆè®ºçš„æ˜¯åŒºå—é“¾ï¼Œè¿™æ˜¯ä¸€ç§å®Œå…¨ä¸åŒçš„äº’è”ç½‘æ¶æ„æ–¹å¼ã€‚é‚£ä¹ˆï¼Œä»æŠ€æœ¯ä¸Šè®²ï¼Œä½ å¦‚ä½•å®ç°è¿™ç§å¯¹ä¿¡ä»»çš„ä¾èµ–å‘¢ï¼Ÿ\nGavin Woodï¼šæˆ‘è®¤ä¸ºä¸€å®šç¨‹åº¦çš„ truth æ˜¯å¿…è¦çš„ã€‚æˆ‘çš„æ„æ€æ˜¯å¼€æ”¾ã€é€æ˜ã€‚åŒºå—é“¾æŠ€æœ¯åŒæ—¶ä½¿ç”¨å¯†ç å­¦å’ŒæŸäº›åšå¼ˆè®ºç»æµå­¦æ¥æä¾›æœåŠ¡ã€‚æˆ‘ä»¬éœ€è¦äº†è§£ç½‘ç»œçš„èŠ‚ç‚¹åŸºç¡€è®¾æ–½ï¼Œå®ƒçœŸçš„æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼Ÿè¿˜æ˜¯å®é™…ä¸Šç”±åˆ¶é€ å’Œé”€å”®ç¡¬ä»¶çš„å…¬å¸ä»ä¸€ä¸ªæ•°æ®ä¸­å¿ƒè¿è¡Œï¼Ÿæ–°èŠ‚ç‚¹ä¸Šçº¿ä¹‹å‰éœ€è¦è¿›è¡Œå’¨è¯¢å—ï¼Ÿç»†èŠ‚å†³å®šäº†å®ƒæ˜¯å¦æ˜¯ä¼ªè£…çš„ Web 2.0ï¼Œè¿˜æ˜¯å¦çœŸæ­£åˆæ³•åœ°å¼€æ”¾ã€é€æ˜ã€å»ä¸­å¿ƒåŒ–ã€ç‚¹å¯¹ç‚¹ã€‚\nWIREDï¼šè®©æˆ‘ä»¬æ·±å…¥æ¢è®¨ä¸‹â€œå»ä¸­å¿ƒåŒ–â€çš„æ¦‚å¿µã€‚äº’è”ç½‘å·²ç»å»ä¸­å¿ƒåŒ–äº†ï¼Œå¯¹å§ï¼ŸInternet åè®®ä¸å½’å…¬å¸æ‰€æœ‰ã€‚è™½ç„¶åœ¨å®é™…å±‚é¢ä¸Šï¼Œäººä»¬å€¾å‘äºé€šè¿‡ä¸­å¿ƒåŒ–çš„å¹³å°æ¥å¼•å¯¼ä»–ä»¬çš„è¡Œä¸ºï¼Œä½†ä»–ä»¬ä¸ä¸€å®šå¿…é¡»è¿™æ ·åšã€‚ä½ ä¸å¿…åœ¨ Facebook ä¸Šå‘æ¶ˆæ¯ï¼Œå®ƒåªæ˜¯å¾ˆæ–¹ä¾¿ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬è°ˆè®ºä¸­å¿ƒåŒ–å’Œå»ä¸­å¿ƒåŒ–æ—¶ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ\nGavin Woodï¼šä»æœ¬è´¨ä¸Šè®²ï¼Œè¿™æ„å‘³ç€æˆ‘ä¸ªäººå¯ä»¥åƒä¸–ç•Œä¸Šä»»ä½•å…¶ä»–äººä¸€æ ·è½»æ¾åœ°æˆä¸ºè¿™é¡¹æ•´ä½“æœåŠ¡çš„æä¾›è€…æˆ–å…±åŒæä¾›è€…ã€‚\nWIREDï¼šè¿™æœ‰å¤šç°å®ï¼Ÿåœ¨æˆ‘çœ‹æ¥ï¼Œåªæœ‰ä¸€å°éƒ¨åˆ†å…·æœ‰é«˜æŠ€æœ¯ç´ å…»çš„äººå¯ä»¥åšåˆ°ã€‚åœ¨è¿™ç§è¯­å¢ƒä¸‹ï¼Œè¿™å¬èµ·æ¥ä¼šå‡ºç°ä¸€ç§ä¸åŒçš„ä¸­å¿ƒåŒ–ã€‚\nGavin Woodï¼šå¦‚æœä½ ä¸åŒå…¶çƒ¦åœ°æ•™è‚²è‡ªå·±ï¼Œé‚£ä¹ˆæ‹¥æœ‰å¯ä»¥æ‰§è¡Œçš„æƒåˆ©æˆ–è‡ªç”±ä¸ç”±äºç¼ºä¹æ’ä»–æ€§å›¢ä½“çš„åŒ…å®¹æ€§è€Œæ— æ³•åœ¨éå¸¸åŸºæœ¬å’ŒåŸºç¡€çš„å±‚é¢ä¸ŠåšæŸäº‹ä¹‹é—´å­˜åœ¨å¾ˆå¤§å·®å¼‚ã€‚å¦‚æœæˆ‘å¯¹å…è´¹æä¾›çš„ææ–™è¿›è¡Œäº†å……åˆ†çš„æ•™è‚²ï¼Œå¹¶ä¸”è¿™å°±æ˜¯æˆä¸ºè¯¥æœåŠ¡çš„å…±åŒæä¾›è€…æ‰€éœ€çš„å…¨éƒ¨å†…å®¹ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯å…è´¹æœåŠ¡ã€‚\nWIREDï¼šæˆ‘ä¸Šè¿‡æ³•å­¦é™¢ï¼Œæˆ‘å¯ä»¥è¯´ï¼Œçœ‹ï¼Œä»»ä½•äººéƒ½å¯ä»¥å­¦ä¹ æ³•å¾‹ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¿›å…¥æ³•å­¦é™¢ï¼Œç„¶åä¸ºå¾‹å¸ˆå­¦ä¹ ã€‚ä½†å®é™…ä¸Šï¼Œè‡³å°‘åœ¨ç¾å›½ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿›å…¥é—¨æ§›éå¸¸é«˜çš„å…¬ä¼šï¼Œæœ€æ˜¾ç€çš„æ˜¯æˆæœ¬ã€‚å³ä½¿è¿›å…¥æ³•å¾‹è¡Œä¸šçš„é—¨æ§›é«˜äºç¼–ç¨‹ï¼Œè¿™å¹¶ä¸ä¸€å®šæ„å‘³ç€ä½ çš„è¡Œä¸šçš„è¿›å…¥é—¨æ§›ä¸é«˜ã€‚æˆ‘ç†è§£ä½ æ‰€æç»˜çš„åŒºåˆ«ï¼Œä½†æˆ‘æƒ³çŸ¥é“è¿™æ˜¯å¦æœ‰ç‚¹å¤©çœŸï¼Œè®¤ä¸ºæ¯ä¸ªäººéƒ½å¯ä»¥é€‰æ‹©æˆä¸ºä¸€åä¸“ä¸šçš„ Web3 ç¨‹åºå‘˜ï¼Ÿ\nGavin Woodï¼šåŸåˆ™ä¸Šï¼Œè¿™ä¸æˆä¸ºä¸€å Web3 ç¨‹åºå‘˜æ— å…³ã€‚æ‚¨åº”è¯¥èƒ½å¤Ÿäº«å—è¯„ä¼°æŸäº›äº‹ç‰©çš„å¤§éƒ¨åˆ†èƒ½åŠ›ï¼Œè€Œæ— éœ€æˆä¸ºæ·±å…¥çš„æ ¸å¿ƒå¼€å‘äººå‘˜ã€‚ä½†æ˜¯ä¸–ç•Œä¸Šçš„ç¨‹åºå‘˜æ¯”å¾‹å¸ˆå¤šå¾—å¤šã€‚è¿™æ˜¯æœ‰å……åˆ†ç†ç”±çš„ã€‚ä¸ºæœºå™¨ç¼–ç¨‹å®é™…ä¸Šåªéœ€è¦äº†è§£ä¸€ç§ç›¸å½“å®¹æ˜“å­¦ä¹ çš„è¯­è¨€ã€‚ä½ å¯ä»¥åœ¨å°åº¦çš„ä¸€ä¸ªå°æ‘åº„é‡Œï¼Œç¢°å·§æœ‰äº’è”ç½‘ï¼Œä½ å¯ä»¥åœ¨ä¸€å‘¨å†…å­¦ä¹  JavaScriptã€‚ä½†ä½ ä¸èƒ½ç”¨ç¾å›½æ³•å¾‹åšåˆ°è¿™ä¸€ç‚¹ã€‚\næˆ‘ä¸ä¼šè¯•å›¾è¯´æœä½ ç›¸ä¿¡ä¸–ç•Œä¸Šæ¯ä¸ªäººéƒ½å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä½†å…³é”®æ˜¯ï¼Œèƒ½åšåˆ°è¿™ä¸€ç‚¹çš„äººè¶Šå¤šï¼Œé—¨æ§›å°±è¶Šä½ã€‚\nWIREDï¼šè¿™æ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ã€‚é˜…è¯»æœ¬æ–‡çš„äººå¯èƒ½ä¼šæƒ³ï¼Œâ€œæˆ‘ä¼šåœ¨ Web3 ä¸–ç•Œä¸­åšä»€ä¹ˆï¼Ÿâ€ ä½ èƒ½å‹¾å‹’å‡ºå®ƒçš„æ ·å­å—ï¼ŸæŸä¸€ç§æ´»åŠ¨æˆ–åº”ç”¨ç¨‹åºç•Œé¢æˆ–äº¤æ˜“ï¼Ÿ\nGavin Woodï¼šæˆ‘è®¤ä¸ºæœ€åˆçš„ Web3 åº”ç”¨ç¨‹åºå¯èƒ½æ˜¯å¯¹ Web 2.0 åº”ç”¨ç¨‹åºçš„å°è¿­ä»£ã€‚ä½†æ˜¯ Web3 å¸¦æ¥çš„ Web 2.0 æ— æ³•è½»æ¾æœåŠ¡çš„ä¸€ä»¶äº‹æ˜¯è´¢åŠ¡ä¹‰åŠ¡æˆ–ç»æµä¸Šå¼ºå¤§çš„åº”ç”¨ç¨‹åºã€‚è¿™æ˜¯ç‚¹å¯¹ç‚¹æ–¹å¼çš„ä¸ªäººå¯ä»¥åœ¨ä»–ä»¬ä¹‹é—´è·å¾—ç»æµæœåŠ¡çš„åœ°æ–¹ã€‚\nè¿™ä¸æ˜¯å…³äºæ±‡æ¬¾æœ¬èº«ï¼Œè€Œæ˜¯å…³äºå‘é€éå¸¸ç¨€æœ‰ã€éå¸¸å›°éš¾æˆ–åœ¨æŸäº›æ–¹é¢éå¸¸æ˜‚è´µçš„ä¸œè¥¿ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œä¾‹å¦‚ï¼Œçº¦ä¼šåº”ç”¨ç¨‹åºå¯ä»¥å‘é€è™šæ‹Ÿé²œèŠ±ï¼Œä½†æ— è®ºä½ æ”¯ä»˜å¤šå°‘é’±ï¼Œæˆ‘ä»¬æ¯å¤©åªèƒ½å‘é€ä¸€æŸè™šæ‹Ÿé²œèŠ±ã€‚å› æ­¤ï¼Œå¦‚æœä½ æ¯å¤©å‘åŒä¸€ä¸ªäººé€ä¸€æŸé²œèŠ±æ˜¯ä¸€ä¸ªéå¸¸å¼ºçƒˆçš„ä¿¡å·ï¼Œè¡¨æ˜ä»–ä»¬å–œæ¬¢ä½ ã€‚è¿™å°±æ˜¯é‡ç‚¹ï¼Œä½ ä¸èƒ½ä»˜é’±é€æ›´å¤šçš„èŠ±ã€‚\nWIREDï¼šæˆ‘è§‰å¾— Tinder å¯ä»¥æ·»åŠ è¯¥åŠŸèƒ½ã€‚\nGavin Woodï¼šå¯¹ï¼Œä»–ä»¬å¯ä»¥ï¼Œä½ æ¯å¤©åªèƒ½åšä¸€æ¬¡ã€‚ä½†ä»–ä»¬æ˜¯ä¸€å®¶ä»¥åˆ©æ¶¦ä¸ºåŠ¨æœºçš„å…¬å¸ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦æ”¯ä»˜è¶³å¤Ÿçš„ Tinder è´¹ç”¨ï¼Œä½ å°±å¯ä»¥å‘é€ä»»æ„æ•°é‡çš„æ˜Ÿæ˜Ÿã€‚\nWIREDï¼šä½†æ˜¯ï¼Œå»ºç«‹åœ¨ Web3 ä¸Šçš„å…¬å¸æ˜¯å¦ä»ç„¶æ‹¥æœ‰ä¸ Web 2.0 å…¬å¸ç›¸åŒçš„å¸‚åœºæ¿€åŠ±ï¼Ÿæˆ‘å¾ˆéš¾æƒ³è±¡å†å²ä¸Šçš„æŠ€æœ¯å‘å±•ä¸å…è®¸æ”¿æ²»æˆ–ç»æµæƒåŠ›æ›´åŠ ä¸­å¿ƒã€‚é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦æœŸæœ›è¿™ä¸ªåŸºäºåŒºå—é“¾çš„å»ä¸­å¿ƒåŒ– Web3 æ‰“ç ´å¸¸è§„å‘¢ï¼Ÿ\nGavin Woodï¼šæˆ‘ä»å°å°±å–œæ¬¢æŠ€æœ¯ã€‚æˆ‘åœ¨å…«å²çš„æ—¶å€™å­¦ä¼šäº†ç¼–ç ã€‚æˆ‘ä»æ¥æ²¡æœ‰è§è¿‡ä¸€ç§æŠ€æœ¯å¯ä»¥é™åˆ¶ä¸€ä¸ªäººçš„æƒåŠ›ã€‚æ­£å¦‚ä½ æ‰€è¯´ï¼Œæˆ‘èƒ½æƒ³åˆ°çš„æ¯ä¸€é¡¹æŠ€æœ¯éƒ½æœ‰åŠ©äºè®©ç”¨æˆ·å˜å¾—æ›´å¼ºå¤§ã€‚ä»–ä»¬å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ã€‚ä»–ä»¬å¯ä»¥æ›´å¯Œæœ‰ï¼Œä»–ä»¬å¯ä»¥æ›´å¿«ã€æ›´å¥½åœ°æˆ–å‘æ›´å¤šäººæä¾›ä»–ä»¬æä¾›çš„æœåŠ¡ã€‚åŒºå—é“¾ä¸ä¼šé‚£æ ·åšï¼Œè¿™æ˜¯æ ¹æœ¬çš„ä¸åŒã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ç§ç¤¾ä¼šç»“æ„ï¼Œè¿™æ˜¯ä¸€å¥—è§„åˆ™ã€‚è€Œè¿™äº›è§„åˆ™å”¯ä¸€çš„ä½œç”¨å°±æ˜¯åœ¨ç³»ç»Ÿå†…æ²¡æœ‰äººæ‹¥æœ‰ä»»æ„æƒåŠ›ã€‚ä½ å¯ä»¥ç›¸å½“ç¡®å®šï¼Œç‰¹åˆ«æ˜¯å¦‚æœä½ æ˜¯ä¸€åç¨‹åºå‘˜ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŸ¥çœ‹ä»£ç å¹¶çŸ¥é“å®ƒåœ¨åšæ­£ç¡®çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥åˆç†åœ°ç¡®å®šï¼Œå› ä¸ºæœ‰è¿™ä¹ˆå¤šäººåœ¨è¿™ç§æœŸæœ›çš„æ”¯æŒä¸‹åŠ å…¥äº†ç½‘ç»œã€‚å¦‚æœè¿™ä¸ªæœŸæœ›æ²¡æœ‰å¾—åˆ°æ»¡è¶³ï¼Œä»–ä»¬å°±ä¼šç¦»å¼€ç½‘ç»œã€‚\nWIREDï¼šå¾ˆå¤šäººéƒ½è¢«åŠ å¯†è¡Œä¸šæ‰€å¸å¼•ï¼Œå› ä¸ºä»–ä»¬å°†å…¶è§†ä¸ºæ¨ç¿»ç°æœ‰æ”¿æ²»ç§©åºæˆ–ä¸­å¤®é“¶è¡ŒæƒåŠ›çš„ä¸€ç§æ–¹å¼ã€‚ä½†æ˜¯ä½ å·²ç»å»ºè®® Web3 æ”¯æŒè‡ªç”±çš„æˆ˜åç§©åºã€‚ä½ æ€ä¹ˆçœ‹å®ƒè¿™æ ·åšï¼Ÿ\nGavin Woodï¼šæˆ‘è®¤ä¸ºç”±äºæŠ€æœ¯å…è®¸çš„æƒåŠ›é›†ä¸­ï¼Œæˆ‘ä»¬æ‰€æ‹¥æœ‰çš„æœåŠ¡å’ŒæœŸæœ›æ­£å—åˆ°å¨èƒã€‚è¿™åªæ˜¯ä¸€ä¸ªäº‹å®ã€‚åœ¨ Facebook å’Œè°·æ­Œä¹‹å‰ï¼Œå‡ ä¹æ²¡æœ‰ä»€ä¹ˆä¸œè¥¿èƒ½è®©è¿™ä¹ˆå°‘çš„äººæ‹¥æœ‰è¿™ç§çº§åˆ«çš„æƒåŠ›ã€‚å¹¶ä¸æ˜¯è¯´æˆ‘ä¸è®¤ä¸º Facebook å’Œ Google ä»¥åŠæ‰€æœ‰å…¶ä»–å…¬å¸éƒ½åº”è¯¥è¢«å–ä»£ï¼Œè¿™å¹¶ä¸æ˜¯ Web3 çš„ç—‡ç»“æ‰€åœ¨ã€‚å¯¹æˆ‘æ¥è¯´ï¼ŒWeb3 å®é™…ä¸Šæ›´åƒæ˜¯ä¸€åœºæ›´å¤§çš„ç¤¾ä¼šæ”¿æ²»è¿åŠ¨ï¼Œå®ƒæ­£åœ¨ä»ä»»æ„æƒå¨è½¬å‘ä¸€ä¸ªæ›´åŠ ç†æ€§çš„è‡ªç”±æ¨¡å‹ã€‚è¿™æ˜¯æˆ‘èƒ½çœ‹åˆ°çš„ä¿æŠ¤è‡ªç”±ä¸–ç•Œçš„å”¯ä¸€æ–¹å¼ï¼Œè¿™æ˜¯æˆ‘ä»¬è¿‡å» 70 å¹´æ¥äº«å—çš„ç”Ÿæ´»ã€‚è¿™æ˜¯æˆ‘ä»¬èƒ½å¤Ÿè®©å®ƒåœ¨æœªæ¥ 70 å¹´ç»§ç»­è¿è¡Œçš„å”¯ä¸€æ–¹æ³•ã€‚ä½†ç›®å‰ï¼Œæˆ‘è®¤ä¸ºæˆ‘ä»¬æ­£åœ¨æœç€ä¸€ä¸ªå®Œå…¨ä¸åŒçš„æ–¹å‘ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/what-is-web3/","summary":"Gavin Wood åœ¨ 2014 å¹´åˆ›é€ äº† Web3ï¼ˆæœ€åˆæ˜¯ Web 3.0ï¼‰è¿™ä¸ªè¯ã€‚å½“æ—¶ï¼Œä»–åˆšå¼€å§‹å¸®åŠ©å¼€å‘ä»¥å¤ªåŠï¼Œè¿™æ˜¯ä¸€ç§åœ¨çŸ¥ååº¦å’Œå¸‚åœºè§„æ¨¡ä¸Šä»…æ¬¡äºæ¯”ç‰¹å¸çš„åŠ å¯†è´§å¸ã€‚å¦‚ä»Šï¼Œä»–ç»è¥ç€æ”¯æŒå»ä¸­å¿ƒåŒ–æŠ€æœ¯é¡¹ç›®çš„ Web3 åŸºé‡‘ä¼šï¼Œä»¥åŠä¸“æ³¨äºä¸º Web3 æ„å»ºåŒºå—é“¾åŸºç¡€è®¾æ–½çš„å…¬å¸ Parity Technologiesã€‚å±…ä½åœ¨ç‘å£«çš„ Gavin ä¸Šå‘¨é€šè¿‡è§†é¢‘ä¸æˆ‘è®¨è®ºäº† Web 2.0 å‡ºé”™çš„åœ°æ–¹ã€ä»–å¯¹æœªæ¥çš„å±•æœ›ï¼Œä»¥åŠä¸ºä»€ä¹ˆæˆ‘ä»¬éƒ½éœ€è¦æ›´å°‘çš„ä¿¡ä»»ã€‚ä»¥ä¸‹é‡‡è®¿æ˜¯æˆ‘ä»¬è°ˆè¯çš„è®°å½•çš„æ•´ç†ç‰ˆã€‚\n  WIREDï¼šæ®æˆ‘æ‰€çŸ¥ï¼ŒWeb3 æœ€åŸºæœ¬çš„æƒ³æ³•æ˜¯å½“å‰çš„ Web2.0 ä¸å¥½ã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬è®¨è®º Web3 ä¼šå¸¦æ¥ä»€ä¹ˆä¹‹å‰ï¼Œä½ ä¼šæ€ä¹ˆæè¿°ç°åœ¨çš„é—®é¢˜ï¼Ÿ\nGavin Woodï¼šæˆ‘è®¤ä¸º Web 2.0 çš„æ¨¡å‹ä¸äº’è”ç½‘å‡ºç°ä¹‹å‰çš„ç¤¾ä¼šæ¨¡å‹éå¸¸ç›¸ä¼¼ã€‚å¦‚æœä½ å›åˆ° 500 å¹´å‰ï¼Œäººä»¬åŸºæœ¬ä¸Šåªåœ¨ä»–ä»¬çš„å°æ‘åº„å’Œä¹¡é•‡ï¼Œå¹¶ä¸ä»–ä»¬è®¤è¯†çš„äººè¿›è¡Œäº¤æ˜“ã€‚ä»å¹¿ä¹‰ä¸Šè®²ï¼Œä»–ä»¬ä¾é ç¤¾ä¼šç»“æ„æ¥ç¡®ä¿ä»–ä»¬çš„æœŸæœ›æ˜¯å¯ä¿¡çš„ï¼Œå¹¶ä¸”å¾ˆå¯èƒ½ä¼šçœŸæ­£å‘ç”Ÿï¼Œæ¯”å¦‚ï¼Œè¿™äº›è‹¹æœæ²¡æœ‰è…çƒ‚ï¼Œæˆ–è€…è¿™ä¸ªé©¬è¹„é“åœ¨ä¸‰å‘¨åä¸ä¼šç ´è£‚ã€‚\nè¿™ç§æœºåˆ¶è¿è¡Œå¾ˆå¥½ï¼Œå› ä¸ºåœ¨åŸé•‡ä¹‹é—´ç§»åŠ¨æ—¢å›°éš¾åˆè€—æ—¶ä¸”æˆæœ¬é«˜æ˜‚ã€‚æ‰€ä»¥ä½ æœ‰ç›¸å½“é«˜çš„å¯ä¿¡åº¦ï¼Œå°±ä¼šæœ‰äººç•™ä¸‹æ¥ï¼Œä»–ä»¬å¹¶ä¸æƒ³è¢«æµæ”¾ã€‚\nä½†æ˜¯éšç€ç¤¾ä¼šå˜å¾—æ›´å¤§è§„æ¨¡ï¼Œæˆ‘ä»¬æœ‰äº†åŸå¸‚ã€å›½å®¶å’Œå›½é™…ç»„ç»‡ï¼Œæˆ‘ä»¬å¼€å§‹å…³æ³¨è¿™ç§å¥‡æ€ªçš„å“ç‰Œå£°èª‰é—®é¢˜ã€‚æˆ‘ä»¬åˆ›å»ºäº†è¿™äº›å¼ºå¤§ä½†å—ç›‘ç®¡çš„æœºæ„ï¼Œç›‘ç®¡æœºæ„åŸåˆ™ä¸Šç¡®ä¿æ»¡è¶³æˆ‘ä»¬çš„æœŸæœ›ã€‚æƒ³è¦åœ¨ç‰¹å®šè¡Œä¸šå¼€å±•ä¸šåŠ¡ï¼Œä½ å¿…é¡»æ»¡è¶³æŸäº›æ³•å®šè¦æ±‚ã€‚\nè¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼ŒåŸå› æœ‰å‡ ä¸ªã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯ï¼Œå»ç›‘ç®¡æ–°å…´äº§ä¸šéå¸¸å›°éš¾ã€‚æ”¿åºœçš„è¡ŒåŠ¨æ˜¯æ¯”è¾ƒç¼“æ…¢çš„ï¼Œéœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½èµ¶ä¸Šã€‚å¦ä¸€ä¸ªæ˜¯ç›‘ç®¡æœºæ„ä¸å®Œå–„ã€‚å°¤å…¶æ˜¯å½“ä»–ä»¬ä¸è¡Œä¸šå¯†åˆ‡åˆä½œæ—¶ï¼Œè¡Œä¸šå’Œç›‘ç®¡æœºæ„ä¹‹é—´é€šå¸¸ä¼šå­˜åœ¨ä¸€äº›æ—‹è½¬é—¨å…³ç³»ã€‚\nå¦ä¸€ä¸ªæ˜¯ç›‘ç®¡æœºæ„çš„æ”¯æŒåŠ›åº¦éå¸¸æœ‰é™ï¼Œä¹Ÿå°±æ˜¯æ”¿åºœæŠ•å…¥å¤šå°‘èµ„é‡‘ã€‚å› æ­¤ï¼Œç›‘ç®¡å°†æ˜¯ä¸å®Œæ•´çš„ã€‚ä»–ä»¬èƒ½å¤Ÿç›‘ç®¡æœ€å¤§çš„ç½ªçŠ¯ï¼Œä½†ä»–ä»¬æ— æ³•åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¿æŒçœŸæ­£å¼ºå¤§çš„å½±å“åŠ›ã€‚å½“ç„¶ï¼Œç›‘ç®¡æœºæ„å’Œæ³•å¾‹å› å¸æ³•ç®¡è¾–åŒºè€Œå¼‚ã€‚å¦‚æœä½ å»æ¬§ç›Ÿçš„æŸä¸ªåœ°æ–¹ï¼Œé‚£ä¹ˆ xx æ´»åŠ¨å°±å¯ä»¥äº†ï¼›å¦‚æœä½ å»åˆ«çš„åœ°æ–¹ï¼Œé‚£å°±ä¸è¡Œäº†ã€‚éšç€æˆ‘ä»¬æˆä¸ºä¸€ä¸ªéå¸¸å›½é™…åŒ–çš„ç¤¾ä¼šï¼Œè¿™å®é™…ä¸Šæ„å‘³ç€ä½ çš„æœŸæœ›ä»æœªå¾—åˆ°æ»¡è¶³ã€‚\næ‰€ä»¥æˆ‘ä»¬éœ€è¦è¶…è¶Šè¿™ä¸€ç‚¹ã€‚ä½†ä¸å¹¸çš„æ˜¯ï¼ŒWeb 2.0 ä»ç„¶å­˜åœ¨äºè¿™ç§éå¸¸ä¸­å¿ƒåŒ–çš„æ¨¡å‹ä¸­ã€‚\nWIREDï¼šæˆ‘ä»¬çœŸçš„åœ¨è°ˆè®ºæŠ€æœ¯çš„å¤±è´¥å—ï¼Ÿè¿˜æ˜¯æˆ‘ä»¬åœ¨è°ˆè®ºæ²»ç†ã€ç›‘ç®¡å’Œç«äº‰æ”¿ç­–çš„å¤±è´¥ï¼Ÿå› ä¸ºå¬èµ·æ¥ä½ æ˜¯åœ¨è¯´ï¼šè¿™æ˜¯ç›‘ç®¡çš„å¤±è´¥ï¼Œä½†ç­”æ¡ˆå´ä¸æ˜¯æ›´å¥½çš„ç›‘ç®¡ï¼Œè€Œæ˜¯éœ€è¦æœ‰ä¸€ä¸ªæ–°çš„æŠ€æœ¯å±‚ï¼Œå› ä¸ºç›‘ç®¡å¤±è´¥æ˜¯ä¸å¯é¿å…çš„ã€‚æˆ‘æ˜¯å¦æ­£ç¡®æè¿°äº†æ‚¨çš„è§‚ç‚¹ï¼Ÿ\nGavin Woodï¼šæ˜¯çš„ï¼Œè¿™ä¸ªæ¨¡å‹åäº†ã€‚\nWIREDï¼šé‚£ä¹ˆè®©æˆ‘ä»¬æ¥è°ˆè°ˆåº”è¯¥ç”¨ä»€ä¹ˆæ¥ä»£æ›¿å®ƒã€‚æˆ‘ä»¬ä¸€ç›´åœ¨è®¨è®ºä¸ºä»€ä¹ˆ Web 2.0 ä¸èµ·ä½œç”¨ã€‚ä½ å¯¹ Web3 çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ\nGavin Woodï¼šLess trust, more truthã€‚æ›´å°‘çš„ä¿¡ä»»ï¼Œæ›´å¤šçš„äº‹å®ã€‚\nWIREDï¼šâ€œless trustâ€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\nGavin Woodï¼šæˆ‘å¯¹ä¿¡ä»»æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å«ä¹‰ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¿¡ä»°ã€‚è¿™æ˜¯ä¸€ç§ä¿¡å¿µï¼ˆfaithï¼‰ï¼Œå³æŸäº›äº‹æƒ…ä¼šå‘ç”Ÿçš„ä¿¡ä»°ï¼Œä¸–ç•Œä¼šä»¥æŸç§æ–¹å¼è¿è½¬ï¼Œè€Œæ²¡æœ‰ä»»ä½•çœŸå®çš„è¯æ®æˆ–ç†æ€§çš„è®ºæ®æ¥è¯´æ˜ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³è¦çš„æ›´å°‘çš„ä¿¡ä»»ï¼Œæˆ‘ä»¬æƒ³è¦æ›´å¤šçš„äº‹å®çœŸç›¸ã€‚æˆ‘çœŸæ­£æƒ³è¡¨è¾¾çš„æ„æ€æ˜¯åœ¨ Web3 ä¸‹æ›´åŠ å¯ä»¥ç›¸ä¿¡æˆ‘ä»¬çš„æœŸæœ›ä¼šå¾—åˆ°æ»¡è¶³ã€‚\nWIREDï¼šè¿™å¬èµ·æ¥åƒæ˜¯åœ¨è¯´â€œå‡å°‘ç›²ç›®ä¿¡ä»°ï¼Œå¢åŠ ä¿¡èª‰çš„å¯ä¿¡åº¦â€ã€‚\nGavin Woodï¼šå¯ä»¥è¯´æ˜¯ï¼Œä¹Ÿå¯ä»¥è¯´ä¸æ˜¯ã€‚æˆ‘è®¤ä¸ºä¿¡ä»»æœ¬èº«å®é™…ä¸Šå›´ç»•ç€åäº‹ã€‚ä¿¡ä»»æ„å‘³ç€ä½ å°†æŸç§æƒåŠ›æˆäºˆå…¶ä»–äººæˆ–æŸä¸ªç»„ç»‡ï¼Œä»–ä»¬å°†èƒ½å¤Ÿä»¥æŸç§ä»»æ„æ–¹å¼ä½¿ç”¨è¯¥æƒåŠ›ã€‚ä¸€æ—¦å®ƒæˆä¸ºå¯ä¿¡çš„ä¿¡ä»»ï¼Œå®ƒå°±ä¸å†æ˜¯çœŸæ­£çš„ä¿¡ä»»ã€‚å®ƒä¼šæœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œä¸€ä¸ªåŸºæœ¬åŸç†ï¼Œä¸€ä¸ªè®ºç‚¹ï¼Œä¸€ä¸ªé€»è¾‘æœºåˆ¶ã€‚æ— è®ºå¦‚ä½•ï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™ä¸æ˜¯ä¿¡ä»»ã€‚\nWIREDï¼šå·²ç»å†™åˆ° Web3 å°†æ‰“ç ´åƒ Google å’Œ Facebook è¿™æ ·çš„å„æ–­ä¼ä¸šå¹³å°ã€‚ä½ èƒ½è§£é‡Šä¸€ä¸‹å®ƒå°†å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å—ï¼Ÿ","title":"Gavin Wood: Web3 å»ä¸­å¿ƒåŒ–æŠ€æœ¯æ˜¯ç»´æŠ¤è‡ªç”±æ°‘ä¸»çš„å”¯ä¸€å¸Œæœ›"},{"content":"Lab 11 - é«˜çº§å‡½æ•° - ä½¿ç”¨ HMAC çš„ä¿¡ä»» å‰è¨€ ç”¨äºå¾®æœåŠ¡çš„ä¼ ç»Ÿè®¤è¯ç­–ç•¥ä¸å‡½æ•°çš„å·¥ä½œåŸç†å®Œå…¨ç›¸åŒã€‚åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä½¿ç”¨å…±äº«ç§˜å¯†å’ŒåŸºäºå“ˆå¸Œçš„æ¶ˆæ¯éªŒè¯ç ï¼ˆHMACï¼‰çš„å‡ ç§å¯ç”¨æ–¹æ³•ä¹‹ä¸€ã€‚æœ‰å…³å…¶ä»–è®¤è¯ç­–ç•¥å’Œæƒ³æ³•ï¼Œè¯·å‚è§ã€‚openfaas-function-auth\nè¿™ç»ä¸æ˜¯ä¸€ä¸ªå¹¿æ³›çš„æ¸…å•ï¼Œå®‰å…¨å’Œè®¤è¯æ˜¯ä¸€ä¸ªå¤æ‚çš„é¢†åŸŸï¼Œæœ€å¥½ç•™ç»™ä¸“å®¶ä½¿ç”¨ç»è¿‡è¯•éªŒçš„æ–¹æ³•ã€‚\nå‡†å¤‡å¥½ä½ çš„ç¯å¢ƒ åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹\nmkdir -p lab11\\`bash  \u0026amp;\u0026amp; cd lab11 ä¹Ÿè¦ç¡®ä¿ä½ çš„faas-cli'ç‰ˆæœ¬æ˜¯0.7.4\u0026rsquo;æˆ–ä»¥ä¸Šï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ã€‚\nfaas-cli version ä»€ä¹ˆæ˜¯ HMAC å¦‚æœæ²¡æœ‰ä»»ä½•å½¢å¼çš„è®¤è¯æˆ–ä¿¡ä»»ï¼Œæˆ‘ä»¬çš„å‡½æ•°å¯èƒ½ä¼šæš´éœ²ç»™ä»»ä½•èƒ½çŒœåˆ°å…¶ URL çš„äººã€‚å¦‚æœæˆ‘ä»¬çš„å‡½æ•°å¯ä»¥åœ¨äº’è”ç½‘æˆ–æœ¬åœ°ç½‘ç»œä¸Šè®¿é—®ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯èƒ½è¢«åçš„è¡Œä¸ºè€…è°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°ä¼šå¯¹ä»»ä½•è¯·æ±‚åšå‡ºå“åº”ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶å¯¹å‡½æ•°çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸºäºå“ˆå¸Œçš„æ¶ˆæ¯éªŒè¯ç ï¼ˆHMACï¼‰æ¥éªŒè¯ä¿¡æ¯çš„æ¥æºã€‚\næ¥è‡ª[alexellis/hmac]ï¼ˆhttps://github.com/alexellis/hmacï¼‰ã€‚\n HMAC ä½¿ç”¨å‘é€æ–¹/æ¥æ”¶æ–¹æå‰å…±äº«çš„å¯¹ç§°å¯†é’¥ã€‚å‘é€æ–¹åœ¨æƒ³è¦ä¼ è¾“ä¿¡æ¯æ—¶å°†äº§ç”Ÿä¸€ä¸ªå“ˆå¸Œå€¼\u0026ndash;è¯¥æ•°æ®ä¸æœ‰æ•ˆè½½è·ä¸€èµ·å‘é€ã€‚ç„¶åï¼Œæ”¶ä»¶äººå°†ç”¨å…±äº«å¯†é’¥ç­¾ç½²æœ‰æ•ˆè½½è·ï¼Œå¦‚æœå“ˆå¸Œå€¼åŒ¹é…ï¼Œåˆ™å‡å®šæœ‰æ•ˆè½½è·æ¥è‡ªå‘ä»¶äººã€‚\n è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é¿å…æˆ‘ä»¬çš„å‡½æ•°è¢«æ— æ•ˆçš„ç”šè‡³æ˜¯å±é™©çš„ä¿¡æ¯æ‰€è°ƒç”¨ã€‚\nä½¿ç”¨ HMAC æˆ‘ä»¬å°†ä½¿ç”¨ faas-cli æä¾›çš„--signæ ‡å¿—æ¥åŒ…å«ä¸€ä¸ªå¤´ï¼Œå…¶ä¸­åŒ…å«ä½¿ç”¨æˆ‘ä»¬ç”¨--keyæ ‡å¿—æä¾›çš„å…±äº«å¯†é’¥åˆ›å»ºçš„æ•£åˆ—ä¿¡æ¯ã€‚\n æ³¨æ„: --signå’Œ--keyå¿…é¡»åŒæ—¶å­˜åœ¨ã€‚\n è®©æˆ‘ä»¬é¦–å…ˆé€šè¿‡éƒ¨ç½²-envå‡½æ•°æ¥æ£€æŸ¥è¯¥æ ‡å¿—çš„ä½œç”¨ï¼Œè¯¥å‡½æ•°å°†æ‰“å°å‡½æ•°ä¸­å¯è®¿é—®çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚\nfaas-cli deploy --name env --fprocess=\u0026#34;env\u0026#34; --image=\u0026#34;function/alpine:new\u0026#34;  è°ƒç”¨ä¸å¸¦--signæ ‡å¿—çš„å‡½æ•°ã€‚  $ echo \u0026#34;The message\u0026#34; | faas-cli invoke env PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin HOSTNAME=d2c1a2cb20c2 fprocess=env HOME=/root Http_X_Call_Id=b84947c6-2970-4fcf-ba3b-66dde6943999 Http_X_Forwarded_For=10.255.0.2:34974 Http_X_Forwarded_Host=127.0.0.1:8080 Http_Content_Length=0 Http_Accept_Encoding=gzip Http_Content_Type=text/plain Http_User_Agent=Go-http-client/1.1 Http_X_Start_Time=1538725657952768349 ...  å†æ¬¡è°ƒç”¨è¯¥å‡½æ•°ï¼Œä½†è¿™æ¬¡æœ‰--signæ ‡å¿—ã€‚  $ echo -n \u0026#34;The message\u0026#34; | faas-cli invoke env --sign=HMAC --key=cookie PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin HOSTNAME=d2c1a2cb20c2 fprocess=env HOME=/root Http_User_Agent=Go-http-client/1.1 Http_Content_Length=0 Http_Accept_Encoding=gzip ... Http_Hmac=sha1=9239edfe20185eafd7a5513c303b03d207d22f64 ... æˆ‘ä»¬çœ‹åˆ°HMACè¢«ä½œä¸ºç¯å¢ƒå˜é‡Http_Hmacæä¾›ã€‚ç”Ÿæˆçš„å€¼æ˜¯ç”¨é’¥åŒ™cookieç­¾ååçš„æ¶ˆæ¯çš„å“ˆå¸Œå€¼ï¼Œç„¶åç”¨æ•£åˆ—æ–¹æ³•sha1è¿›è¡Œé¢„å¤„ç†ã€‚\nHMAC åœ¨è¡ŒåŠ¨ ä¸ºäº†æˆ‘ä»¬çš„ç›®çš„ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ Python 3 å‡½æ•°ã€‚è®©æˆ‘ä»¬æŠŠå®ƒå«åšhmac-protectedã€‚\nfaas-cli new --lang python3 hmac-protected --prefix=\u0026#34;\u0026lt;your-docker-username\u0026gt;\u0026#34; æ·»åŠ payload-secretï¼Œå®ƒå°†ä½œä¸ºå“ˆå¸Œæœ‰æ•ˆè½½è·çš„å¯†é’¥ã€‚\nåƒæˆ‘ä»¬åœ¨lab10ä¸­é‚£æ ·åˆ›å»ºpayload-secretã€‚\necho -n \u0026#34;\u0026lt;your-secret\u0026gt;\u0026#34; ! | faas-cli secret create payload-secret  æ³¨æ„ï¼šè®°ä½ä½ æ”¾åœ¨\u0026quot;\u0026ldquo;ä½ç½®çš„å­—ç¬¦ä¸²ã€‚\n æˆ‘ä»¬çš„ hmac-protected.ymlåº”è¯¥çœ‹èµ·æ¥åƒã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  hmac-protected:  lang: python3  handler: ./hmac-protected  image: \u0026lt;your-docker-username\u0026gt;/hmac-protected:latest  secrets:  - payload-secret ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢handler.pyçš„å†…å®¹ã€‚\nimport os, hmac, hashlib  def validateHMAC(message, secret, hash):   # GitHub and the sign flag prefix the hash with \u0026#34;sha1=\u0026#34;  receivedHash = getHash(hash)   # Hash message with secret  expectedMAC = hmac.new(secret.encode(), message.encode(), hashlib.sha1)  createdHash = expectedMAC.hexdigest()   return receivedHash == createdHash  def getHash(hash):  if \u0026#34;sha1=\u0026#34; in hash:  hash=hash[5:]  return hash  def handle(req):  # We receive the hashed message in form of a header  messageMAC = os.getenv(\u0026#34;Http_Hmac\u0026#34;)   # Read secret from inside the container  with open(\u0026#34;/var/openfaas/secrets/payload-secret\u0026#34;,\u0026#34;r\u0026#34;) as secretContent:  payloadSecret = secretContent.read()   # Function to validate the HMAC  if validateHMAC(req, payloadSecret, messageMAC):  return \u0026#34;Successfully validated: \u0026#34; + req  return \u0026#34;HMAC validation failed.\u0026#34;  æºä»£ç ä¹Ÿå¯åœ¨hmac-protected/hmac-protected/handler.py\n  é€šè¿‡ä½¿ç”¨faas-cli upåœ¨ä¸€ä¸ªå‘½ä»¤ä¸­æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚  faas-cli up -f ./hmac-protected.yml è°ƒç”¨å‡½æ•° æˆ‘ä»¬å°†é€šè¿‡å‘é€ä¸¤ä¸ªå€¼æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚\n  æ­£å¸¸çš„è¯·æ±‚ä¿¡æ¯\n  ä¸€ä¸ªåŒ…å«åŒä¸€æ¶ˆæ¯çš„å“ˆå¸Œå€¼çš„å¤´ï¼Œå½“ç”¨--keyæ ‡å¿—çš„å€¼ç­¾åæ—¶\n  åœ¨æ”¶åˆ°è¯·æ±‚åï¼Œè¯¥å‡½æ•°å°†ä½¿ç”¨payload-secretä»¥ä¸å‘é€è€…ç›¸åŒçš„æ–¹å¼ç­¾ç½²è¯·æ±‚ä¿¡æ¯ã€‚è¿™å°†åˆ›å»ºç¬¬äºŒä¸ª HMACï¼Œå¹¶ä¸ä¼ è¾“çš„å¤´ä¿¡æ¯ Http-Hmacè¿›è¡Œæ¯”è¾ƒã€‚\nè¿™é‡Œæˆ‘ä»¬æ¯”è¾ƒç”Ÿæˆå’Œæ¥æ”¶çš„å“ˆå¸Œå€¼ã€‚\n...  # Function to validate the HMAC  if validateHMAC(req, payloadKey, receivedHMAC):  return \u0026#34;Successfully validated: \u0026#34; + req  return \u0026#34;HMAC validation failed.\u0026#34; ...  ç”¨æ ‡å¿—æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚  echo -n \u0026#34;This is a message\u0026#34; | faas-cli invoke hmac-protected --sign hmac --key=\u0026lt;your-secret\u0026gt; æ£€æŸ¥å“åº”å¹¶ç¡®è®¤å®ƒä¸æ‰€ä¼ è¾¾çš„ä¿¡æ¯ç›¸ç¬¦ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å¾—åˆ°ã€‚\nSuccessfully validated: This is a message  ç”¨é”™è¯¯çš„--keyè°ƒç”¨å‡½æ•°ï¼Œæ£€æŸ¥å¤±è´¥ä¿¡æ¯ã€‚  $ echo -n \u0026#34;This is a message\u0026#34; | faas-cli invoke hmac-protected --sign hmac --key=wrongkey HMAC validation failed. ä½œä¸ºåç»­ä»»åŠ¡ï¼Œä½ å¯ä»¥åº”ç”¨ HMAC æ¥ä¿æŠ¤ä½ åœ¨å®éªŒå®¤ 5çš„issue-botä¸Šçš„ç«¯ç‚¹ã€‚\nä½ å·²ç»å®Œæˆäº†å®éªŒï¼Œå¯ä»¥è¿”å›åˆ°ä¸»é¡µã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab11/","summary":"Lab 11 - é«˜çº§å‡½æ•° - ä½¿ç”¨ HMAC çš„ä¿¡ä»» å‰è¨€ ç”¨äºå¾®æœåŠ¡çš„ä¼ ç»Ÿè®¤è¯ç­–ç•¥ä¸å‡½æ•°çš„å·¥ä½œåŸç†å®Œå…¨ç›¸åŒã€‚åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä½¿ç”¨å…±äº«ç§˜å¯†å’ŒåŸºäºå“ˆå¸Œçš„æ¶ˆæ¯éªŒè¯ç ï¼ˆHMACï¼‰çš„å‡ ç§å¯ç”¨æ–¹æ³•ä¹‹ä¸€ã€‚æœ‰å…³å…¶ä»–è®¤è¯ç­–ç•¥å’Œæƒ³æ³•ï¼Œè¯·å‚è§ã€‚openfaas-function-auth\nè¿™ç»ä¸æ˜¯ä¸€ä¸ªå¹¿æ³›çš„æ¸…å•ï¼Œå®‰å…¨å’Œè®¤è¯æ˜¯ä¸€ä¸ªå¤æ‚çš„é¢†åŸŸï¼Œæœ€å¥½ç•™ç»™ä¸“å®¶ä½¿ç”¨ç»è¿‡è¯•éªŒçš„æ–¹æ³•ã€‚\nå‡†å¤‡å¥½ä½ çš„ç¯å¢ƒ åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹\nmkdir -p lab11\\`bash  \u0026amp;\u0026amp; cd lab11 ä¹Ÿè¦ç¡®ä¿ä½ çš„faas-cli'ç‰ˆæœ¬æ˜¯0.7.4\u0026rsquo;æˆ–ä»¥ä¸Šï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ã€‚\nfaas-cli version ä»€ä¹ˆæ˜¯ HMAC å¦‚æœæ²¡æœ‰ä»»ä½•å½¢å¼çš„è®¤è¯æˆ–ä¿¡ä»»ï¼Œæˆ‘ä»¬çš„å‡½æ•°å¯èƒ½ä¼šæš´éœ²ç»™ä»»ä½•èƒ½çŒœåˆ°å…¶ URL çš„äººã€‚å¦‚æœæˆ‘ä»¬çš„å‡½æ•°å¯ä»¥åœ¨äº’è”ç½‘æˆ–æœ¬åœ°ç½‘ç»œä¸Šè®¿é—®ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯èƒ½è¢«åçš„è¡Œä¸ºè€…è°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°ä¼šå¯¹ä»»ä½•è¯·æ±‚åšå‡ºå“åº”ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶å¯¹å‡½æ•°çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸºäºå“ˆå¸Œçš„æ¶ˆæ¯éªŒè¯ç ï¼ˆHMACï¼‰æ¥éªŒè¯ä¿¡æ¯çš„æ¥æºã€‚\næ¥è‡ª[alexellis/hmac]ï¼ˆhttps://github.com/alexellis/hmacï¼‰ã€‚\n HMAC ä½¿ç”¨å‘é€æ–¹/æ¥æ”¶æ–¹æå‰å…±äº«çš„å¯¹ç§°å¯†é’¥ã€‚å‘é€æ–¹åœ¨æƒ³è¦ä¼ è¾“ä¿¡æ¯æ—¶å°†äº§ç”Ÿä¸€ä¸ªå“ˆå¸Œå€¼\u0026ndash;è¯¥æ•°æ®ä¸æœ‰æ•ˆè½½è·ä¸€èµ·å‘é€ã€‚ç„¶åï¼Œæ”¶ä»¶äººå°†ç”¨å…±äº«å¯†é’¥ç­¾ç½²æœ‰æ•ˆè½½è·ï¼Œå¦‚æœå“ˆå¸Œå€¼åŒ¹é…ï¼Œåˆ™å‡å®šæœ‰æ•ˆè½½è·æ¥è‡ªå‘ä»¶äººã€‚\n è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é¿å…æˆ‘ä»¬çš„å‡½æ•°è¢«æ— æ•ˆçš„ç”šè‡³æ˜¯å±é™©çš„ä¿¡æ¯æ‰€è°ƒç”¨ã€‚\nä½¿ç”¨ HMAC æˆ‘ä»¬å°†ä½¿ç”¨ faas-cli æä¾›çš„--signæ ‡å¿—æ¥åŒ…å«ä¸€ä¸ªå¤´ï¼Œå…¶ä¸­åŒ…å«ä½¿ç”¨æˆ‘ä»¬ç”¨--keyæ ‡å¿—æä¾›çš„å…±äº«å¯†é’¥åˆ›å»ºçš„æ•£åˆ—ä¿¡æ¯ã€‚\n æ³¨æ„: --signå’Œ--keyå¿…é¡»åŒæ—¶å­˜åœ¨ã€‚\n è®©æˆ‘ä»¬é¦–å…ˆé€šè¿‡éƒ¨ç½²-envå‡½æ•°æ¥æ£€æŸ¥è¯¥æ ‡å¿—çš„ä½œç”¨ï¼Œè¯¥å‡½æ•°å°†æ‰“å°å‡½æ•°ä¸­å¯è®¿é—®çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚\nfaas-cli deploy --name env --fprocess=\u0026#34;env\u0026#34; --image=\u0026#34;function/alpine:new\u0026#34;  è°ƒç”¨ä¸å¸¦--signæ ‡å¿—çš„å‡½æ•°ã€‚  $ echo \u0026#34;The message\u0026#34; | faas-cli invoke env PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin HOSTNAME=d2c1a2cb20c2 fprocess=env HOME=/root Http_X_Call_Id=b84947c6-2970-4fcf-ba3b-66dde6943999 Http_X_Forwarded_For=10.255.0.2:34974 Http_X_Forwarded_Host=127.0.0.1:8080 Http_Content_Length=0 Http_Accept_Encoding=gzip Http_Content_Type=text/plain Http_User_Agent=Go-http-client/1.","title":"Openfaas Workshop Lab11"},{"content":"Lab 10 - é«˜çº§å‡½æ•° - ç§˜å¯† åœ¨å¼€å§‹æœ¬å®éªŒå®¤ä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚ç”±äºæœ¬å®éªŒå®¤æ˜¯å»ºç«‹åœ¨å…ˆå‰çš„å®éªŒå®¤åŸºç¡€ä¸Šçš„ï¼Œå› æ­¤è¯·å¤åˆ¶ lab5ã€‚\n$ cp -r lab5 lab10\\  \u0026amp;\u0026amp; cd lab10 ä½¿ç”¨ç§˜å¯† å®éªŒå®¤ 5ç ”ç©¶äº†issue-botå¦‚ä½•ä»ç¯å¢ƒå˜é‡ï¼ˆauth_tokenï¼‰è·å¾— GitHub çš„*ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æœºå¯†æ¥å­˜å‚¨æ•æ„Ÿä¿¡æ¯ã€‚\næ¥è‡ª Docker æ–‡æ¡£ã€‚\n \u0026hellip; ç§˜å¯†æ˜¯ä¸€å›¢æ•°æ®ï¼Œå¦‚å¯†ç ã€SSH ç§é’¥ã€SSL è¯ä¹¦æˆ–å…¶ä»–æ•°æ®ï¼Œä¸åº”é€šè¿‡ç½‘ç»œä¼ è¾“æˆ–æœªç»åŠ å¯†å­˜å‚¨åœ¨ Docker æ–‡ä»¶æˆ–åº”ç”¨ç¨‹åºçš„æºä»£ç ä¸­ã€‚\n è¿™æ˜¯ä¸€ä¸ªæ¯”ç¯å¢ƒå˜é‡æ›´å®‰å…¨çš„é€‰æ‹©ã€‚ç¯å¢ƒå˜é‡æ›´å®¹æ˜“ä½¿ç”¨ï¼Œä½†æœ€é€‚åˆäºéä¿å¯†çš„é…ç½®é¡¹ç›®ã€‚ ä¼¼ä¹å¾ˆé€‚åˆç”¨äºå­˜å‚¨auth_tokenå€¼ã€‚\nè¯·å‚é˜…docsä¸­å…³äºç§˜å¯†çš„æ›´å¤šä¿¡æ¯å’Œå®ƒçš„è®¾è®¡ã€‚\nåˆ›å»ºä¸€ä¸ªç§˜å¯†  ç§˜å¯†åç§°å¿…é¡»éµå¾ª DNS-1123 æƒ¯ä¾‹ï¼Œç”±å°å†™å­—æ¯æ•°å­—å­—ç¬¦æˆ–\u0026rsquo;-\u0026lsquo;ç»„æˆï¼Œå¹¶ä¸”å¿…é¡»ä»¥ä¸€ä¸ªå­—æ¯æ•°å­—å­—ç¬¦å¼€å§‹å’Œç»“æŸ\n ä»ä¸€ä¸ªç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚\necho -n \u0026lt;auth_token\u0026gt; | faas-cli secret create auth-token æµ‹è¯•ç§˜å¯†æ˜¯å¦è¢«åˆ›å»ºã€‚\nfaas-cli secret ls  æ³¨æ„ï¼šè¯·è®°ä½ï¼Œ-gæ ‡å¿—å¯ä»¥åœ¨ç½‘å…³ä¹‹é—´è½»æ¾åˆ‡æ¢ã€‚ è¿™ä¹Ÿé€‚ç”¨äºç§˜å¯†ã€‚\n kubectl get secret auth-token -n openfaas-fn -o json  æ³¨æ„ï¼šå¦‚æœä½ åœ¨è¿œç¨‹ç½‘å…³ä¸Šéƒ¨ç½²ä½ çš„å‡½æ•°ï¼Œç¡®ä¿ä½ åœ¨ä½ ç”¨äºç½‘å…³çš„è™šæ‹Ÿæœºä¸Šåˆ›å»ºä½ çš„ç§˜å¯†ã€‚\n å½“ç§˜å¯†è¢«å‡½æ•°æŒ‚è½½æ—¶ï¼Œå®ƒå°†ä»¥æ–‡ä»¶å½¢å¼å‡ºç°åœ¨/var/openfaas/secrets/auth-tokenä¸‹ã€‚è¿™å¯ä»¥ç”±handler.pyè¯»å–ï¼Œä»¥è·å¾— GitHub çš„ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚\næ›´æ–° issue-bot.yml ç”¨ä¸€ä¸ªæŒ‡ä»¤å–ä»£å¯¹env.ymlçš„å¼•ç”¨ï¼Œä½¿auth-tokençš„ç§˜å¯†å¯¹å‡½æ•°å¯ç”¨ã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  issue-bot:  lang: python3  handler: ./issue-bot  image: \u0026lt;your-username\u0026gt;/issue-bot  environment:  write_debug: true  gateway_hostname: \u0026#34;gateway.openfaas\u0026#34;  positive_threshold: 0.25  secrets:  - auth-token æ›´æ–°issue-botå‡½æ•° å‡½æ•°å¤„ç†ç¨‹åºéœ€è¦æ”¹å˜ï¼Œä»¥ä½¿å…¶è¯»å–auth-tokenç§˜å¯†ï¼Œè€Œä¸æ˜¯ç¯å¢ƒå˜é‡ã€‚ è¿™åªæ˜¯ä¸€ä¸ªå•è¡Œçš„æ”¹åŠ¨ï¼Œåœ¨è¿™é‡Œã€‚\npython g = Github(os.getenv(\u0026ldquo;auth_token\u0026rdquo;))\nè¢«æ›¿æ¢ä¸º ```python with open(\u0026#34;/var/openfaas/secrets/auth-token\u0026#34;, \u0026#34;r\u0026#34;) as authToken:  g = Github(authToken.read())  å®Œæ•´çš„æºä»£ç å¯åœ¨issue-bot-secrets/bot-handler/handler.py\n  æ„å»ºå’Œéƒ¨ç½²  ä½¿ç”¨ CLI æ¥æ„å»ºå’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚\nfaas-cli up -f issue-bot.yml ç°åœ¨è½¬åˆ°Lab 11ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab10/","summary":"Lab 10 - é«˜çº§å‡½æ•° - ç§˜å¯† åœ¨å¼€å§‹æœ¬å®éªŒå®¤ä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚ç”±äºæœ¬å®éªŒå®¤æ˜¯å»ºç«‹åœ¨å…ˆå‰çš„å®éªŒå®¤åŸºç¡€ä¸Šçš„ï¼Œå› æ­¤è¯·å¤åˆ¶ lab5ã€‚\n$ cp -r lab5 lab10\\  \u0026amp;\u0026amp; cd lab10 ä½¿ç”¨ç§˜å¯† å®éªŒå®¤ 5ç ”ç©¶äº†issue-botå¦‚ä½•ä»ç¯å¢ƒå˜é‡ï¼ˆauth_tokenï¼‰è·å¾— GitHub çš„*ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æœºå¯†æ¥å­˜å‚¨æ•æ„Ÿä¿¡æ¯ã€‚\næ¥è‡ª Docker æ–‡æ¡£ã€‚\n \u0026hellip; ç§˜å¯†æ˜¯ä¸€å›¢æ•°æ®ï¼Œå¦‚å¯†ç ã€SSH ç§é’¥ã€SSL è¯ä¹¦æˆ–å…¶ä»–æ•°æ®ï¼Œä¸åº”é€šè¿‡ç½‘ç»œä¼ è¾“æˆ–æœªç»åŠ å¯†å­˜å‚¨åœ¨ Docker æ–‡ä»¶æˆ–åº”ç”¨ç¨‹åºçš„æºä»£ç ä¸­ã€‚\n è¿™æ˜¯ä¸€ä¸ªæ¯”ç¯å¢ƒå˜é‡æ›´å®‰å…¨çš„é€‰æ‹©ã€‚ç¯å¢ƒå˜é‡æ›´å®¹æ˜“ä½¿ç”¨ï¼Œä½†æœ€é€‚åˆäºéä¿å¯†çš„é…ç½®é¡¹ç›®ã€‚ ä¼¼ä¹å¾ˆé€‚åˆç”¨äºå­˜å‚¨auth_tokenå€¼ã€‚\nè¯·å‚é˜…docsä¸­å…³äºç§˜å¯†çš„æ›´å¤šä¿¡æ¯å’Œå®ƒçš„è®¾è®¡ã€‚\nåˆ›å»ºä¸€ä¸ªç§˜å¯†  ç§˜å¯†åç§°å¿…é¡»éµå¾ª DNS-1123 æƒ¯ä¾‹ï¼Œç”±å°å†™å­—æ¯æ•°å­—å­—ç¬¦æˆ–\u0026rsquo;-\u0026lsquo;ç»„æˆï¼Œå¹¶ä¸”å¿…é¡»ä»¥ä¸€ä¸ªå­—æ¯æ•°å­—å­—ç¬¦å¼€å§‹å’Œç»“æŸ\n ä»ä¸€ä¸ªç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚\necho -n \u0026lt;auth_token\u0026gt; | faas-cli secret create auth-token æµ‹è¯•ç§˜å¯†æ˜¯å¦è¢«åˆ›å»ºã€‚\nfaas-cli secret ls  æ³¨æ„ï¼šè¯·è®°ä½ï¼Œ-gæ ‡å¿—å¯ä»¥åœ¨ç½‘å…³ä¹‹é—´è½»æ¾åˆ‡æ¢ã€‚ è¿™ä¹Ÿé€‚ç”¨äºç§˜å¯†ã€‚\n kubectl get secret auth-token -n openfaas-fn -o json  æ³¨æ„ï¼šå¦‚æœä½ åœ¨è¿œç¨‹ç½‘å…³ä¸Šéƒ¨ç½²ä½ çš„å‡½æ•°ï¼Œç¡®ä¿ä½ åœ¨ä½ ç”¨äºç½‘å…³çš„è™šæ‹Ÿæœºä¸Šåˆ›å»ºä½ çš„ç§˜å¯†ã€‚","title":"Openfaas Workshop Lab10"},{"content":"Lab 9 - é«˜çº§å‡½æ•° - è‡ªåŠ¨ç¼©æ”¾ è‡ªåŠ¨ç¼©æ”¾å‡½æ•°çš„åº”ç”¨ æ­£å¦‚æ–‡æ¡£ä¸­æè¿°çš„é‚£æ ·ï¼ŒOpenFaaS å¸¦æœ‰è‡ªåŠ¨æ‰©å±•å‡½æ•°ã€‚åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹è‡ªåŠ¨æ‰©å±•æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚\nå‰ææ¡ä»¶   åœ¨å®Œæˆäº†Lab 1ä¸­å¯¹ OpenFaaS çš„è®¾ç½®åï¼Œä½ å°†æ‹¥æœ‰è§¦å‘è‡ªåŠ¨æ‰©å±•æ‰€éœ€çš„ä¸€åˆ‡ã€‚\n  å¤šä¸ªå·¥å…·å¯ä»¥ç”¨æ¥åˆ›å»ºè¶³å¤Ÿçš„æµé‡æ¥è§¦å‘è‡ªåŠ¨æ‰©å±• - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`curl\u0026rsquo;å°†è¢«ä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“åœ¨ Mac å’Œ Linux ä¸Šä½¿ç”¨ï¼Œå¹¶åœ¨ Windows ä¸Šä¸ Git Bash æ‰“åŒ…ã€‚\n  è‡ªåŠ¨æ‰©å±•çš„èƒŒæ™¯ å¼€ç®±å³ç”¨çš„ OpenFaaS æ˜¯è¿™æ ·é…ç½®çš„ï¼Œå®ƒå°†æ ¹æ® Prometheus æµ‹é‡çš„ æ¯ç§’è¯·æ±‚æŒ‡æ ‡è¿›è¡Œè‡ªåŠ¨æ‰©å±•ã€‚ è¿™ä¸ªæŒ‡æ ‡æ˜¯åœ¨æµé‡é€šè¿‡ API ç½‘å…³çš„æ—¶å€™æ•è·çš„ã€‚å¦‚æœè¶…è¿‡äº†å®šä¹‰çš„ æ¯ç§’è¯·æ±‚çš„é˜ˆå€¼ï¼ŒAlertManager å°±ä¼šå¯åŠ¨ã€‚è¿™ä¸ªé˜ˆå€¼åº”è¯¥è¢«é‡æ–°é…ç½®ä¸ºé€‚åˆç”Ÿäº§ä½¿ç”¨çš„æ°´å¹³ï¼Œå› ä¸ºåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸ºäº†æ¼”ç¤ºï¼Œå®ƒè¢«è®¾ç½®ä¸ºä¸€ä¸ªä½å€¼ã€‚\n åœ¨æ–‡æ¡£ç½‘ç«™ä¸­æ‰¾åˆ°æ›´å¤šå…³äºè‡ªåŠ¨ç¼©æ”¾çš„ä¿¡æ¯ã€‚\n æ¯æ¬¡è­¦æŠ¥è¢« AlertManager è§¦å‘æ—¶ï¼ŒAPI ç½‘å…³å°†æŠŠä½ çš„å‡½æ•°çš„ä¸€å®šæ•°é‡çš„å‰¯æœ¬æ·»åŠ åˆ°é›†ç¾¤ä¸­ã€‚OpenFaaS æœ‰ä¸¤ä¸ªé…ç½®é€‰é¡¹ï¼Œå…è®¸æŒ‡å®šå¤åˆ¶çš„èµ·å§‹/æœ€ä½æ•°é‡ï¼Œä¹Ÿå…è®¸åœæ­¢å¤åˆ¶çš„æœ€å¤§æ•°é‡ã€‚\nä½ å¯ä»¥é€šè¿‡è®¾ç½®com.openfaas.scale.minæ¥æ§åˆ¶å‡½æ•°çš„æœ€å°å¤åˆ¶é‡ï¼Œç›®å‰é»˜è®¤å€¼ä¸º1ã€‚\nä½ å¯ä»¥é€šè¿‡è®¾ç½®com.openfaas.scale.maxæ¥æ§åˆ¶ä¸€ä¸ªå‡½æ•°å¯ä»¥äº§ç”Ÿçš„æœ€å¤§å¤åˆ¶é‡ï¼Œç›®å‰é»˜è®¤å€¼æ˜¯20ã€‚\n æ³¨æ„: å¦‚æœä½ æŠŠcom.openfaas.scale.minå’Œcom.openfaas.scale.maxè®¾ç½®æˆç›¸åŒçš„å€¼ï¼Œä½ å°±ä¼šç¦ç”¨è‡ªåŠ¨ç¼©æ”¾å‡½æ•°ã€‚\n æŸ¥çœ‹ Prometheus ä½ éœ€è¦è¿è¡Œè¿™ä¸ªç«¯å£è½¬å‘å‘½ä»¤ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨http://127.0.0.1:9090è®¿é—® Prometheusã€‚\nkubectl port-forward deployment/prometheus 9090:9090 -n openfaas ç°åœ¨æ·»åŠ ä¸€ä¸ªæ‰€æœ‰æˆåŠŸè°ƒç”¨éƒ¨ç½²çš„å‡½æ•°çš„å›¾ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œrate( gateway_function_invocation_total{code=\u0026quot;200\u0026quot;} [20s])ä½œä¸ºæŸ¥è¯¢æ¥å®ç°ã€‚å¯¼è‡´ä¸€ä¸ªçœ‹èµ·æ¥åƒè¿™æ ·çš„é¡µé¢ã€‚\nç»§ç»­æ‰“å¼€ä¸€ä¸ªæ–°çš„æ ‡ç­¾ï¼Œåœ¨å…¶ä¸­ä½¿ç”¨http://127.0.0.1:9090/alertså¯¼èˆªåˆ°è­¦æŠ¥éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªé¡µé¢ä¸Šï¼Œä½ ä»¥åå¯ä»¥çœ‹åˆ°ä»€ä¹ˆæ—¶å€™è¶…è¿‡äº† æ¯ç§’è¯·æ±‚ çš„é˜ˆå€¼ã€‚\nè§¦å‘ç¼©æ”¾çš„ Go å‡½æ•° é¦–å…ˆæ˜¯ Alex Ellis çš„ echo-fnå‡½æ•°ã€‚\n$ git clone https://github.com/alexellis/echo-fn \\  \u0026amp;\u0026amp; cd echo-fn \\  \u0026amp;\u0026amp; faas-cli template store pull golang-http \\  \u0026amp;\u0026amp; faas-cli deploy \\  --label com.openfaas.scale.max=10 \\  --label com.openfaas.scale.min=1 ç°åœ¨æ£€æŸ¥ç”¨æˆ·ç•Œé¢ï¼Œçœ‹ä»€ä¹ˆæ—¶å€™ go-echoå‡½æ•°ä» ä¸å‡†å¤‡å˜æˆ å‡†å¤‡ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨faas-cli describe go-echoæ¥æ£€æŸ¥ã€‚\nä½¿ç”¨è¿™ä¸ªè„šæœ¬åå¤è°ƒç”¨ go-echo å‡½æ•°ï¼Œç›´åˆ°ä½ çœ‹åˆ°å¤åˆ¶æ•°ä» 1 å˜æˆ 5ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä½ å¯ä»¥åœ¨ Prometheus ä¸­é€šè¿‡æ·»åŠ `gateway_service_count\u0026rsquo;çš„å›¾è¡¨æˆ–åœ¨é€‰æ‹©è¯¥å‡½æ•°çš„æƒ…å†µä¸‹æŸ¥çœ‹ API ç½‘å…³æ¥ç›‘æ§è¿™ä¸ªå€¼ã€‚\n$ for i in {0..10000}; do  echo -n \u0026#34;Post $i\u0026#34; | faas-cli invoke go-echo \u0026amp;\u0026amp; echo; done;  æ³¨æ„ï¼šå¦‚æœä½ åœ¨ Kubernetes ä¸Šè¿è¡Œï¼Œä½¿ç”¨$OPENFAAS_URLè€Œä¸æ˜¯http://127.0.0.1:8080ã€‚\n ç›‘æ§è­¦æŠ¥ ç°åœ¨ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¹‹å‰åˆ›å»ºçš„å›¾è¡¨ä¸­ï¼Œgo-echoå‡½æ•°çš„è°ƒç”¨é‡æœ‰æ‰€å¢åŠ ã€‚ç§»åŠ¨åˆ°ä½ æ‰“å¼€è­¦æŠ¥é¡µé¢çš„æ ‡ç­¾ã€‚ä¸€æ®µæ—¶é—´åï¼Œä½ åº”è¯¥å¼€å§‹çœ‹åˆ° APIHighInvocationRateçš„çŠ¶æ€ï¼ˆå’Œé¢œè‰²ï¼‰å˜ä¸º \u0026ldquo;å¾…å®š\u0026rdquo;ï¼Œç„¶åå†æ¬¡å˜ä¸º \u0026ldquo;å‘å°„\u0026rdquo;ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨$ faas-cli listæˆ–é€šè¿‡uiçœ‹åˆ°è‡ªåŠ¨ç¼©æ”¾çš„æƒ…å†µã€‚\nç°åœ¨ä½ å¯ä»¥ä½¿ç”¨$ docker service ps go-echoæ¥éªŒè¯go-echoçš„æ–°å‰¯æœ¬æ˜¯å¦å·²ç»å¯åŠ¨ã€‚\nç°åœ¨åœæ­¢ bash è„šæœ¬ï¼Œä½ ä¼šçœ‹åˆ°å¤åˆ¶çš„æ•°é‡åœ¨å‡ ç§’é’Ÿåå›åˆ° 1 ä¸ªå¤åˆ¶ã€‚\nç–‘éš¾è§£ç­” å¦‚æœä½ è®¤ä¸ºä½ çš„è‡ªåŠ¨æ‰©å±•æ²¡æœ‰è¢«è§¦å‘ï¼Œé‚£ä¹ˆè¯·æ£€æŸ¥ä»¥ä¸‹å†…å®¹ã€‚\n æ™®ç½—ç±³ä¿®æ–¯ä¸­çš„è­¦æŠ¥é¡µé¢ - è¿™åº”è¯¥æ˜¯çº¢è‰²/ç²‰è‰²çš„ï¼Œå¹¶æ˜¾ç¤º FIRING - å³åœ¨http://127.0.0.1:9090/alertsã€‚ æ£€æŸ¥æ ¸å¿ƒæœåŠ¡çš„æ—¥å¿—ï¼Œå³ç½‘å…³ã€Prometheus / AlertManagerã€‚  ä¸ºäº†è·å¾—æ ¸å¿ƒæœåŠ¡çš„æ—¥å¿—ï¼Œè¿è¡Œdocker service lsï¼Œç„¶ådocker service logs \u0026lt;service-name\u0026gt;ã€‚\nè´Ÿè½½æµ‹è¯•(å¯é€‰) éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å—æ§ç¯å¢ƒä¸­åº”ç”¨ç§‘å­¦æ–¹æ³•å’Œå·¥å…·ä¸åœ¨ä½ è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿è¡Œæ‹’ç»æœåŠ¡æ”»å‡»æ˜¯æœ‰åŒºåˆ«çš„ã€‚ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸é€‚åˆåšè´Ÿè½½æµ‹è¯•ï¼Œå› ä¸ºä¸€èˆ¬æ¥è¯´ï¼Œä½ æ˜¯åœ¨ Windows æˆ– Mac ä¸»æœºä¸Šçš„ Linux è™šæ‹Ÿæœºä¸­è¿è¡Œ OpenFaaSï¼Œè€Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå•èŠ‚ç‚¹ã€‚è¿™å¹¶ä¸ä»£è¡¨ç”Ÿäº§éƒ¨ç½²ã€‚\nè¯·çœ‹æ„å»ºä¸€ä¸ªåˆé€‚çš„æ€§èƒ½æµ‹è¯•çš„æ–‡æ¡£ã€‚\nå¦‚æœcurlæ²¡æœ‰ä¸ºä½ çš„æµ‹è¯•äº§ç”Ÿè¶³å¤Ÿçš„æµé‡ï¼Œæˆ–è€…ä½ æƒ³è·å¾—ä¸€äº›å…³äºäº‹æƒ…å¦‚ä½•åˆ†è§£çš„ç»Ÿè®¡æ•°æ®ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¯•è¯•heyå·¥å…·ã€‚heyå¯ä»¥é€šè¿‡æ¯ç§’çš„è¯·æ±‚æˆ–ç»™å®šçš„æŒç»­æ—¶é—´äº§ç”Ÿç»“æ„åŒ–çš„è´Ÿè½½ã€‚\nè¿™é‡Œæœ‰ä¸€ä¸ªåœ¨ 1GHz çš„ 2016 å¹´ 12 è‹±å¯¸ MacBook ä¸Šè¿è¡Œçš„ä¾‹å­ï¼Œå¸¦æœ‰ Docker Desktopã€‚è¿™æ˜¯ä¸€å°éå¸¸ä½åŠŸç‡çš„è®¡ç®—æœºï¼Œæ­£å¦‚æ‰€æè¿°çš„ï¼Œä¸ä»£è¡¨ç”Ÿäº§æ€§èƒ½ã€‚\n$ hey -z=30s -q 5 -c 2 -m POST -d=Test http://127.0.0.1:8080/function/go-echo Summary:  Total: 30.0203 secs  Slowest: 0.0967 secs  Fastest: 0.0057 secs  Average: 0.0135 secs  Requests/sec: 9.9932   Total data: 1200 bytes  Size/request: 4 bytes  Response time histogram:  0.006 [1] |  0.015 [244] |â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–   0.024 [38] |â– â– â– â– â– â–   0.033 [10] |â– â–   0.042 [4] |â–   0.051 [1] |  0.060 [0] |  0.069 [0] |  0.078 [0] |  0.088 [0] |  0.097 [2] |   Latency distribution:  10% in 0.0089 secs  25% in 0.0101 secs  50% in 0.0118 secs  75% in 0.0139 secs  90% in 0.0173 secs  95% in 0.0265 secs  99% in 0.0428 secs  Details (average, fastest, slowest):  DNS+dialup: 0.0000 secs, 0.0057 secs, 0.0967 secs  DNS-lookup: 0.0000 secs, 0.0000 secs, 0.0000 secs  req write: 0.0001 secs, 0.0000 secs, 0.0016 secs  resp wait: 0.0131 secs, 0.0056 secs, 0.0936 secs  resp read: 0.0001 secs, 0.0000 secs, 0.0013 secs  Status code distribution:  [200] 300 responses ä»¥ä¸Šæ¨¡æ‹Ÿäº†ä¸¤ä¸ªæ´»è·ƒçš„ç”¨æˆ·-cï¼Œæ¯ç§’ 5 ä¸ªè¯·æ±‚-qï¼ŒæŒç»­æ—¶é—´-zä¸º 30 ç§’ã€‚\nè¦ä½¿ç”¨heyï¼Œä½ å¿…é¡»åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå®‰è£… Golangã€‚\nä¹Ÿè¯·å‚è§ã€‚hey on GitHub\nå°è¯•ä»é›¶å¼€å§‹æ‰©å±• å¦‚æœä½ æŠŠä½ çš„å‡½æ•°è§„æ¨¡ç¼©å°åˆ° 0 ä¸ªå‰¯æœ¬ï¼Œä½ ä»ç„¶å¯ä»¥è°ƒç”¨å®ƒã€‚è¯¥è°ƒç”¨å°†è§¦å‘ç½‘å…³å°†å‡½æ•°ç¼©æ”¾åˆ°ä¸€ä¸ªéé›¶å€¼ã€‚\nç”¨ä¸‹é¢çš„å‘½ä»¤è¯•è¯•å§ã€‚\nkubectl scale deployment --replicas=0 nodeinfo -n openfaas-fn æ‰“å¼€ OpenFaaS ç”¨æˆ·ç•Œé¢ï¼Œæ£€æŸ¥ nodeinfo æ˜¯å¦æœ‰ 0 ä¸ªå‰¯æœ¬ï¼Œæˆ–è€…é€šè¿‡`kubectl get deployment nodeinfo -n openfaas-fn\u0026rsquo;ã€‚\nç°åœ¨è°ƒç”¨è¯¥å‡½æ•°å¹¶æ£€æŸ¥å®ƒæ˜¯å¦æ‰©å±•åˆ° 1 ä¸ªå‰¯æœ¬ã€‚\nç°åœ¨è½¬åˆ°Lab 10ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab9/","summary":"Lab 9 - é«˜çº§å‡½æ•° - è‡ªåŠ¨ç¼©æ”¾ è‡ªåŠ¨ç¼©æ”¾å‡½æ•°çš„åº”ç”¨ æ­£å¦‚æ–‡æ¡£ä¸­æè¿°çš„é‚£æ ·ï¼ŒOpenFaaS å¸¦æœ‰è‡ªåŠ¨æ‰©å±•å‡½æ•°ã€‚åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹è‡ªåŠ¨æ‰©å±•æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚\nå‰ææ¡ä»¶   åœ¨å®Œæˆäº†Lab 1ä¸­å¯¹ OpenFaaS çš„è®¾ç½®åï¼Œä½ å°†æ‹¥æœ‰è§¦å‘è‡ªåŠ¨æ‰©å±•æ‰€éœ€çš„ä¸€åˆ‡ã€‚\n  å¤šä¸ªå·¥å…·å¯ä»¥ç”¨æ¥åˆ›å»ºè¶³å¤Ÿçš„æµé‡æ¥è§¦å‘è‡ªåŠ¨æ‰©å±• - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`curl\u0026rsquo;å°†è¢«ä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“åœ¨ Mac å’Œ Linux ä¸Šä½¿ç”¨ï¼Œå¹¶åœ¨ Windows ä¸Šä¸ Git Bash æ‰“åŒ…ã€‚\n  è‡ªåŠ¨æ‰©å±•çš„èƒŒæ™¯ å¼€ç®±å³ç”¨çš„ OpenFaaS æ˜¯è¿™æ ·é…ç½®çš„ï¼Œå®ƒå°†æ ¹æ® Prometheus æµ‹é‡çš„ æ¯ç§’è¯·æ±‚æŒ‡æ ‡è¿›è¡Œè‡ªåŠ¨æ‰©å±•ã€‚ è¿™ä¸ªæŒ‡æ ‡æ˜¯åœ¨æµé‡é€šè¿‡ API ç½‘å…³çš„æ—¶å€™æ•è·çš„ã€‚å¦‚æœè¶…è¿‡äº†å®šä¹‰çš„ æ¯ç§’è¯·æ±‚çš„é˜ˆå€¼ï¼ŒAlertManager å°±ä¼šå¯åŠ¨ã€‚è¿™ä¸ªé˜ˆå€¼åº”è¯¥è¢«é‡æ–°é…ç½®ä¸ºé€‚åˆç”Ÿäº§ä½¿ç”¨çš„æ°´å¹³ï¼Œå› ä¸ºåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸ºäº†æ¼”ç¤ºï¼Œå®ƒè¢«è®¾ç½®ä¸ºä¸€ä¸ªä½å€¼ã€‚\n åœ¨æ–‡æ¡£ç½‘ç«™ä¸­æ‰¾åˆ°æ›´å¤šå…³äºè‡ªåŠ¨ç¼©æ”¾çš„ä¿¡æ¯ã€‚\n æ¯æ¬¡è­¦æŠ¥è¢« AlertManager è§¦å‘æ—¶ï¼ŒAPI ç½‘å…³å°†æŠŠä½ çš„å‡½æ•°çš„ä¸€å®šæ•°é‡çš„å‰¯æœ¬æ·»åŠ åˆ°é›†ç¾¤ä¸­ã€‚OpenFaaS æœ‰ä¸¤ä¸ªé…ç½®é€‰é¡¹ï¼Œå…è®¸æŒ‡å®šå¤åˆ¶çš„èµ·å§‹/æœ€ä½æ•°é‡ï¼Œä¹Ÿå…è®¸åœæ­¢å¤åˆ¶çš„æœ€å¤§æ•°é‡ã€‚\nä½ å¯ä»¥é€šè¿‡è®¾ç½®com.openfaas.scale.minæ¥æ§åˆ¶å‡½æ•°çš„æœ€å°å¤åˆ¶é‡ï¼Œç›®å‰é»˜è®¤å€¼ä¸º1ã€‚\nä½ å¯ä»¥é€šè¿‡è®¾ç½®com.openfaas.scale.maxæ¥æ§åˆ¶ä¸€ä¸ªå‡½æ•°å¯ä»¥äº§ç”Ÿçš„æœ€å¤§å¤åˆ¶é‡ï¼Œç›®å‰é»˜è®¤å€¼æ˜¯20ã€‚\n æ³¨æ„: å¦‚æœä½ æŠŠcom.openfaas.scale.minå’Œcom.openfaas.scale.maxè®¾ç½®æˆç›¸åŒçš„å€¼ï¼Œä½ å°±ä¼šç¦ç”¨è‡ªåŠ¨ç¼©æ”¾å‡½æ•°ã€‚\n æŸ¥çœ‹ Prometheus ä½ éœ€è¦è¿è¡Œè¿™ä¸ªç«¯å£è½¬å‘å‘½ä»¤ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨http://127.0.0.1:9090è®¿é—® Prometheusã€‚\nkubectl port-forward deployment/prometheus 9090:9090 -n openfaas ç°åœ¨æ·»åŠ ä¸€ä¸ªæ‰€æœ‰æˆåŠŸè°ƒç”¨éƒ¨ç½²çš„å‡½æ•°çš„å›¾ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œrate( gateway_function_invocation_total{code=\u0026quot;200\u0026quot;} [20s])ä½œä¸ºæŸ¥è¯¢æ¥å®ç°ã€‚å¯¼è‡´ä¸€ä¸ªçœ‹èµ·æ¥åƒè¿™æ ·çš„é¡µé¢ã€‚","title":"Openfaas Workshop Lab9"},{"content":"Lab 8 - é«˜çº§å‡½æ•° - è¶…æ—¶ åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab8 \\  \u0026amp;\u0026amp; cd lab8 ç”¨read_timeoutæ‰©å±•è¶…æ—¶æ—¶é—´ timeoutå¯¹åº”äºä¸€ä¸ªå‡½æ•°å¯ä»¥è¿è¡Œå¤šé•¿æ—¶é—´ï¼Œç›´åˆ°è¢«æ‰§è¡Œã€‚å®ƒå¯¹é˜²æ­¢åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è¯¯æ“ä½œå¾ˆé‡è¦ã€‚\næœ‰å‡ ä¸ªåœ°æ–¹å¯ä»¥ä¸ºä½ çš„å‡½æ•°é…ç½®è¶…æ—¶ï¼Œåœ¨æ¯ä¸ªåœ°æ–¹éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥å®Œæˆã€‚\n  å‡½æ•°è¶…æ—¶\n  read_timeout - å…è®¸å‡½æ•°é€šè¿‡ HTTP è¯»å–ä¸€ä¸ªè¯·æ±‚çš„æ—¶é—´\n  write_timeout - å…è®¸å‡½æ•°åœ¨ HTTP ä¸Šå†™ä¸€ä¸ªå“åº”çš„æ—¶é—´\n  exec_timeout - ä¸€ä¸ªå‡½æ•°åœ¨è¢«ç»ˆæ­¢å‰å¯ä»¥è¿è¡Œçš„æœ€å¤§æ—¶é—´ã€‚\n  API ç½‘å…³çš„é»˜è®¤æ—¶é—´æ˜¯ 20 ç§’ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹åœ¨ä¸€ä¸ªå‡½æ•°ä¸Šè®¾ç½®ä¸€ä¸ªæ›´çŸ­çš„è¶…æ—¶æ—¶é—´ã€‚\nfaas-cli new --lang python3 sleep-for --prefix=\u0026#34;\u0026lt;your-docker-username-here\u0026gt;\u0026#34; ç¼–è¾‘handler.pyã€‚\nimport time import os  def handle(req):  \u0026#34;\u0026#34;\u0026#34;handle a request to the function Args: req (str): request body \u0026#34;\u0026#34;\u0026#34;   sleep_duration = int(os.getenv(\u0026#34;sleep_duration\u0026#34;, \u0026#34;10\u0026#34;))  preSleep = \u0026#34;Starting to sleep for %d\u0026#34; % sleep_duration  time.sleep(sleep_duration) # Sleep for a number of seconds  postSleep = \u0026#34;Finished the sleep\u0026#34;  return preSleep + \u0026#34;\\n\u0026#34; + postSleep ç°åœ¨ç¼–è¾‘sleep-for.ymlæ–‡ä»¶ï¼Œæ·»åŠ è¿™äº›ç¯å¢ƒå˜é‡ã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  sleep-for:  lang: python3  handler: ./sleep-for  image: \u0026lt;your-docker-username-here\u0026gt;/sleep-for:0.1  environment:  sleep_duration: 10  read_timeout: \u0026#34;5s\u0026#34;  write_timeout: \u0026#34;5s\u0026#34;  exec_timeout: \u0026#34;5s\u0026#34; ä½¿ç”¨ CLI æ¥æ„å»ºã€æ¨é€ã€éƒ¨ç½²å’Œè°ƒç”¨è¯¥å‡½æ•°ã€‚\n$ echo | faas-cli invoke sleep-for Server returned unexpected status code: 502 - ä½ åº”è¯¥çœ‹åˆ°å®ƒæ²¡æœ‰æ‰“å°æ¶ˆæ¯å°±ç»ˆæ­¢äº†ï¼Œå› ä¸ºsleep_durationæ¯”è¶…æ—¶å€¼é«˜ã€‚\nç°åœ¨æŠŠsleep_durationè®¾ç½®ä¸ºä¸€ä¸ªè¾ƒä½çš„æ•°å­—ï¼Œå¦‚2ï¼Œç„¶åå†æ¬¡è¿è¡Œfaas-cli deployã€‚åœ¨ç¼–è¾‘å‡½æ•°çš„ YAML æ–‡ä»¶æ—¶ï¼Œä½ ä¸éœ€è¦é‡å»ºè¿™ä¸ªå‡½æ•°ã€‚\n$ echo | faas-cli invoke sleep-for Starting to sleep for 2 Finished the sleep  API ç½‘å…³  è¦ä¸ºä½ çš„å‡½æ•°è®¾ç½®è¶…å‡ºé»˜è®¤é™åˆ¶çš„æ‰©å±•è¶…æ—¶ï¼Œè¯·éµå¾ªä»¥ä¸‹æ•™ç¨‹ã€‚æ‰©å±•çš„è¶…æ—¶\nç°åœ¨è½¬åˆ°å®éªŒå®¤ 9\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab8/","summary":"Lab 8 - é«˜çº§å‡½æ•° - è¶…æ—¶ åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab8 \\  \u0026amp;\u0026amp; cd lab8 ç”¨read_timeoutæ‰©å±•è¶…æ—¶æ—¶é—´ timeoutå¯¹åº”äºä¸€ä¸ªå‡½æ•°å¯ä»¥è¿è¡Œå¤šé•¿æ—¶é—´ï¼Œç›´åˆ°è¢«æ‰§è¡Œã€‚å®ƒå¯¹é˜²æ­¢åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è¯¯æ“ä½œå¾ˆé‡è¦ã€‚\næœ‰å‡ ä¸ªåœ°æ–¹å¯ä»¥ä¸ºä½ çš„å‡½æ•°é…ç½®è¶…æ—¶ï¼Œåœ¨æ¯ä¸ªåœ°æ–¹éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥å®Œæˆã€‚\n  å‡½æ•°è¶…æ—¶\n  read_timeout - å…è®¸å‡½æ•°é€šè¿‡ HTTP è¯»å–ä¸€ä¸ªè¯·æ±‚çš„æ—¶é—´\n  write_timeout - å…è®¸å‡½æ•°åœ¨ HTTP ä¸Šå†™ä¸€ä¸ªå“åº”çš„æ—¶é—´\n  exec_timeout - ä¸€ä¸ªå‡½æ•°åœ¨è¢«ç»ˆæ­¢å‰å¯ä»¥è¿è¡Œçš„æœ€å¤§æ—¶é—´ã€‚\n  API ç½‘å…³çš„é»˜è®¤æ—¶é—´æ˜¯ 20 ç§’ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹åœ¨ä¸€ä¸ªå‡½æ•°ä¸Šè®¾ç½®ä¸€ä¸ªæ›´çŸ­çš„è¶…æ—¶æ—¶é—´ã€‚\nfaas-cli new --lang python3 sleep-for --prefix=\u0026#34;\u0026lt;your-docker-username-here\u0026gt;\u0026#34; ç¼–è¾‘handler.pyã€‚\nimport time import os  def handle(req):  \u0026#34;\u0026#34;\u0026#34;handle a request to the function Args: req (str): request body \u0026#34;\u0026#34;\u0026#34;   sleep_duration = int(os.","title":"Openfaas Workshop Lab8"},{"content":"å®éªŒ 7\u0026ndash;å¼‚æ­¥å‡½æ•° åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab7 \\  \u0026amp;\u0026amp; cd lab7 åŒæ­¥ä¸å¼‚æ­¥åœ°è°ƒç”¨ä¸€ä¸ªå‡½æ•° å½“ä½ åŒæ­¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¸€ä¸ªè¿æ¥ä¼šé€šè¿‡ç½‘å…³è¿æ¥åˆ°ä½ çš„å‡½æ•°ï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­ä¿æŒå¼€æ”¾ã€‚åŒæ­¥è°ƒç”¨æ˜¯*é˜»å¡çš„ï¼Œæ‰€ä»¥ä½ åº”è¯¥çœ‹åˆ°ä½ çš„å®¢æˆ·ç«¯æš‚åœï¼Œå˜å¾—ä¸æ´»è·ƒï¼Œç›´åˆ°è¯¥å‡½æ•°å®Œæˆå…¶ä»»åŠ¡ã€‚\n ç½‘å…³ä½¿ç”¨çš„è·¯ç”±æ˜¯ã€‚/function/\u0026lt;function_name\u0026gt;ã€‚ ä½ å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å®ƒå®Œæˆ ä½ åœ¨è°ƒç”¨åå¾—åˆ°ç»“æœ ä½ çŸ¥é“å®ƒæ˜¯é€šè¿‡è¿˜æ˜¯å¤±è´¥  å¼‚æ­¥ä»»åŠ¡ä»¥ç±»ä¼¼çš„æ–¹å¼è¿è¡Œï¼Œä½†æœ‰ä¸€äº›åŒºåˆ«ã€‚\n ç½‘å…³ä½¿ç”¨ä¸åŒçš„è·¯ç”±ï¼š/async-function/\u0026lt;function_name\u0026gt;ã€‚ å®¢æˆ·ç«¯ä»ç½‘å…³å¾—åˆ°ä¸€ä¸ªç«‹å³çš„202 æ¥å—çš„å“åº”ã€‚ è¯¥å‡½æ•°ç¨åä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—å·¥ä½œå™¨æ¥è°ƒç”¨ é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æœè¢«ä¸¢å¼ƒ  è®©æˆ‘ä»¬è¯•ä¸€è¯•å¿«é€Ÿæ¼”ç¤ºã€‚\nfaas-cli new --lang dockerfile long-task --prefix=\u0026#34;\u0026lt;your-docker-username-here\u0026gt;\u0026#34; ç¼–è¾‘long-task/Dockerfileå¹¶å°† fprocess æ”¹ä¸ºsleep 1ã€‚\nç°åœ¨æ„å»ºã€éƒ¨ç½²å¹¶åŒæ­¥è°ƒç”¨ä½ çš„å‡½æ•° 10 æ¬¡ï¼Œåƒè¿™æ ·ã€‚\necho -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task ç°åœ¨å¼‚æ­¥è°ƒç”¨è¯¥å‡½æ•° 10 æ¬¡ã€‚\necho -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task --async ä½ è§‚å¯Ÿåˆ°äº†ä»€ä¹ˆï¼Ÿç¬¬ä¸€ä¸ªä¾‹å­åº”è¯¥èŠ±äº† 10 ç§’ï¼Œè€Œç¬¬äºŒä¸ªä¾‹å­ä¼šåœ¨ä¸€ç§’æˆ–æ›´çŸ­çš„æ—¶é—´å†…è¿”å›åˆ°ä½ çš„æç¤ºã€‚è¿™é¡¹å·¥ä½œä»ç„¶éœ€è¦ 10x1 ç§’æ¥å®Œæˆï¼Œä½†ç°åœ¨è¦æ”¾åœ¨é˜Ÿåˆ—ä¸­å»¶è¿Ÿæ‰§è¡Œã€‚\nå¼‚æ­¥å‡½æ•°è°ƒç”¨éå¸¸é€‚ç”¨äºé‚£äº›å¯ä»¥æ¨è¿Ÿåˆ°ä»¥åæ‰§è¡Œçš„ä»»åŠ¡ï¼Œæˆ–è€…ä½ ä¸éœ€è¦å®¢æˆ·ç«¯ä¸Šçš„ç»“æœã€‚\n ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯åœ¨æ¥æ”¶ GitHub çš„ webhooks æ—¶\u0026ndash;å¯èƒ½æœ‰ä¸€ä¸ªæœ€å¤§çš„å¤„ç†æ—¶é—´ï¼ŒGitHub ä¼šå…è®¸ä½ çš„è¿æ¥ä¿æŒå¼€æ”¾ï¼Œä¸€ä¸ªå¼‚æ­¥è°ƒç”¨æ¥å—å·¥ä½œå¹¶ç«‹å³è¿”å›ã€‚\n æŸ¥çœ‹é˜Ÿåˆ—å·¥ä½œè€…çš„æ—¥å¿— OpenFaaS çš„é»˜è®¤æ ˆä½¿ç”¨ NATS æµæ¥æ’é˜Ÿå’Œå»¶è¿Ÿæ‰§è¡Œã€‚ä½ å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ—¥å¿—ã€‚\nkubectl logs deployment/queue-worker -n openfaas ä½¿ç”¨ä¸€ä¸ª`X-Callback-Url\u0026rsquo;ä¸ requirebin å¦‚æœä½ éœ€è¦ä¸€ä¸ªå¼‚æ­¥è°ƒç”¨çš„å‡½æ•°çš„ç»“æœï¼Œä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ã€‚\n æ”¹å˜å®ƒçš„ä»£ç ï¼Œç”¨å®ƒçš„ç»“æœé€šçŸ¥ä¸€ä¸ªç«¯ç‚¹æˆ–æ¶ˆæ¯ç³»ç»Ÿ  è¿™ä¸ªé€‰é¡¹å¯èƒ½ä¸æ˜¯åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½é€‚ç”¨ï¼Œå¹¶ä¸”éœ€è¦ç¼–å†™é¢å¤–çš„ä»£ç ã€‚\n åˆ©ç”¨å›è°ƒçš„å†…ç½®è¡Œä¸º  å†…ç½®çš„å›è°ƒå…è®¸å¯¹ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨æä¾›ä¸€ä¸ª URLï¼Œé˜Ÿåˆ—å·¥ä½œå™¨å°†è‡ªåŠ¨æŠ¥å‘Šå‡½æ•°çš„æˆåŠŸæˆ–å¤±è´¥ï¼Œä»¥åŠç»“æœã€‚ ä¸€äº›é¢å¤–çš„è¯·æ±‚å¤´è¢«å‘é€åˆ°å›è°ƒï¼Œå®Œæ•´çš„åˆ—è¡¨è§å›è°ƒè¯·æ±‚å¤´\nå‰å¾€ requestbin å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ bin \u0026ndash;è¿™å°†æ˜¯å…¬å…±äº’è”ç½‘ä¸Šçš„ä¸€ä¸ª URLï¼Œå¯ä»¥æ¥æ”¶ä½ çš„å‡½æ•°çš„ç»“æœã€‚\n ä¸ºäº†è¿™ä¸ªå®éªŒå®¤çš„ç›®çš„ï¼Œä¸€å®šè¦å–æ¶ˆå‹¾é€‰ ç§æœ‰ å¤é€‰æ¡†ï¼Œè¿™å°†ä½¿ä½ ä¸éœ€è¦ç™»å½•ã€‚\n https://requestbin.com/\nç°åœ¨å¤åˆ¶ \u0026ldquo;Bin URL \u0026ldquo;å¹¶å°†å…¶ç²˜è´´åœ¨ä¸‹é¢ã€‚\nä¾‹å¦‚(http://requestbin.com/r/1i7i1we1)\necho -n \u0026#34;LaterIsBetter\u0026#34; | faas-cli invoke figlet --async --header \u0026#34;X-Callback-Url http://requestbin.com/r/1i7i1we1\u0026#34; ç°åœ¨åˆ·æ–° requestbin ç«™ç‚¹ä¸Šçš„é¡µé¢ï¼Œä½ å°†çœ‹åˆ°æ¥è‡ª figlet çš„ç»“æœã€‚\n _ _ ___ ____ _ _ | | __ _| |_ ___ _ _|_ _|___| __ ) ___| |_| |_ ___ _ __ | | / _` | __/ _ \\ \u0026#39;__| |/ __| _ \\ / _ \\ __| __/ _ \\ \u0026#39;__| | |__| (_| | || __/ | | |\\__ \\ |_) | __/ |_| || __/ | |_____\\__,_|\\__\\___|_| |___|___/____/ \\___|\\__|\\__\\___|_|   å»ºè®®ï¼šä¹Ÿå¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªå‡½æ•°ä½œä¸º X-Callback-Url \u0026ndash;è¿™å¯¹äºåœ¨å¼‚æ­¥å·¥ä½œè´Ÿè½½è¢«å¤„ç†æ—¶é€šè¿‡ Slack æˆ– Email é€šçŸ¥è‡ªå·±æ˜¯éå¸¸å¥½çš„ã€‚è¦ç”¨ç»“æœè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œå°†X-Callback-Urlè®¾ç½®ä¸ºhttp://gateway:8080/function/\u0026lt;function_name\u0026gt;ã€‚\n ç°åœ¨è¿›å…¥å®éªŒå®¤ 8\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab7/","summary":"å®éªŒ 7\u0026ndash;å¼‚æ­¥å‡½æ•° åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab7 \\  \u0026amp;\u0026amp; cd lab7 åŒæ­¥ä¸å¼‚æ­¥åœ°è°ƒç”¨ä¸€ä¸ªå‡½æ•° å½“ä½ åŒæ­¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¸€ä¸ªè¿æ¥ä¼šé€šè¿‡ç½‘å…³è¿æ¥åˆ°ä½ çš„å‡½æ•°ï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­ä¿æŒå¼€æ”¾ã€‚åŒæ­¥è°ƒç”¨æ˜¯*é˜»å¡çš„ï¼Œæ‰€ä»¥ä½ åº”è¯¥çœ‹åˆ°ä½ çš„å®¢æˆ·ç«¯æš‚åœï¼Œå˜å¾—ä¸æ´»è·ƒï¼Œç›´åˆ°è¯¥å‡½æ•°å®Œæˆå…¶ä»»åŠ¡ã€‚\n ç½‘å…³ä½¿ç”¨çš„è·¯ç”±æ˜¯ã€‚/function/\u0026lt;function_name\u0026gt;ã€‚ ä½ å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å®ƒå®Œæˆ ä½ åœ¨è°ƒç”¨åå¾—åˆ°ç»“æœ ä½ çŸ¥é“å®ƒæ˜¯é€šè¿‡è¿˜æ˜¯å¤±è´¥  å¼‚æ­¥ä»»åŠ¡ä»¥ç±»ä¼¼çš„æ–¹å¼è¿è¡Œï¼Œä½†æœ‰ä¸€äº›åŒºåˆ«ã€‚\n ç½‘å…³ä½¿ç”¨ä¸åŒçš„è·¯ç”±ï¼š/async-function/\u0026lt;function_name\u0026gt;ã€‚ å®¢æˆ·ç«¯ä»ç½‘å…³å¾—åˆ°ä¸€ä¸ªç«‹å³çš„202 æ¥å—çš„å“åº”ã€‚ è¯¥å‡½æ•°ç¨åä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—å·¥ä½œå™¨æ¥è°ƒç”¨ é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æœè¢«ä¸¢å¼ƒ  è®©æˆ‘ä»¬è¯•ä¸€è¯•å¿«é€Ÿæ¼”ç¤ºã€‚\nfaas-cli new --lang dockerfile long-task --prefix=\u0026#34;\u0026lt;your-docker-username-here\u0026gt;\u0026#34; ç¼–è¾‘long-task/Dockerfileå¹¶å°† fprocess æ”¹ä¸ºsleep 1ã€‚\nç°åœ¨æ„å»ºã€éƒ¨ç½²å¹¶åŒæ­¥è°ƒç”¨ä½ çš„å‡½æ•° 10 æ¬¡ï¼Œåƒè¿™æ ·ã€‚\necho -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task echo -n \u0026#34;\u0026#34; | faas-cli invoke long-task ç°åœ¨å¼‚æ­¥è°ƒç”¨è¯¥å‡½æ•° 10 æ¬¡ã€‚","title":"Openfaas Workshop Lab7"},{"content":"å®éªŒ 6\u0026ndash;ä½ çš„å‡½æ•°çš„ HTML åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab6\\  \u0026amp;\u0026amp; cd lab6 ä»ä¸€ä¸ªå‡½æ•°ä¸­ç”Ÿæˆå¹¶è¿”å›åŸºæœ¬çš„ HTML å‡½æ•°å¯ä»¥è¿”å› HTMLï¼Œå¹¶å°†Content-Typeè®¾ç½®ä¸ºtext/htmlã€‚å› æ­¤ï¼Œå‡½æ•°è¿”å›çš„ HTML å¯ä»¥é€šè¿‡æµè§ˆå™¨è¿›è¡Œæ¸²æŸ“ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œç”Ÿæˆå¹¶è¿”å›ä¸€ä¸ªåŸºæœ¬çš„ HTMLã€‚\nfaas-cli new --lang python3 show-html --prefix=\u0026#34;\u0026lt;your-docker-username-here\u0026gt;\u0026#34; ç¼–è¾‘handler.pyã€‚\ndef handle(req):  \u0026#34;\u0026#34;\u0026#34;handle a request to the function Args: req (str): request body \u0026#34;\u0026#34;\u0026#34;   html = \u0026#39;\u0026lt;html\u0026gt;\u0026lt;h2\u0026gt;Hi, from your function!\u0026lt;/h2\u0026gt;\u0026lt;/html\u0026gt;\u0026#39;   return html è¿™å°†è¿”å› HTML ç»™è°ƒç”¨è€…ã€‚ è¿˜æœ‰ä¸€ä»¶äº‹æˆ‘ä»¬åº”è¯¥åšçš„æ˜¯è®¾ç½®å“åº”çš„Content-Type'ã€‚æˆ‘ä»¬100%ç¡®å®šè¿™ä¸ªå‡½æ•°å°†è¿”å›ä¸€ä¸ªHTMLï¼Œæ‰€ä»¥Content-Typeåº”è¯¥æ€»æ˜¯text/htmlã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨show-html.ymlæ–‡ä»¶ä¸­çš„environment`éƒ¨åˆ†æ¥è®¾ç½®ã€‚\nç¼–è¾‘show-html.ymlã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  show-html:  lang: python3  handler: ./show-html  image: \u0026lt;your-docker-username-here\u0026gt;/show-html  environment:  content_type: text/html environmentä¸­çš„content_typeé”®å°†è®¾ç½®å“åº”çš„Content-Typeã€‚\nç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚\nfaas-cli up -f show-html.yml è¿è¡Œä»¥ä¸‹ç¨‹åºä»¥è·å¾—å‡½æ•°çš„ URLã€‚\nfaas-cli describe -f show-html.yml show-html  URL: http://127.0.0.1:8080/function/show-html HTML åº”è¯¥è¢«æ­£ç¡®æ¸²æŸ“ã€‚\nä»ç£ç›˜ä¸Šè¯»å–å¹¶è¿”å›ä¸€ä¸ªé™æ€çš„ HTML æ–‡ä»¶ ä¸€èˆ¬æ¥è¯´ï¼Œå½“ä½ æä¾› HTML æœåŠ¡æ—¶ï¼Œä½ æœ‰ä¸€ä¸ªé™æ€çš„ HTML æ–‡ä»¶åœ¨å‰é¢ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬å¦‚ä½•åœ¨å‡½æ•°ä¸­æ‰“åŒ… HTML æ–‡ä»¶ï¼Œå¹¶ä» HTML æ–‡ä»¶ä¸­æä¾›å†…å®¹ã€‚\né¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ã€‚\nåˆ›å»ºä¸€ä¸ªåä¸ºhtmlçš„ç›®å½•ï¼Œå¹¶æ”¾ç½®ä¸€ä¸ªåä¸ºnew.htmlçš„æ–‡ä»¶ï¼Œä½¿å…¶ç»“æ„çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ã€‚\nâ”œâ”€â”€ show-html â”‚ â”œâ”€â”€ __init__.py â”‚ â”œâ”€â”€ handler.py â”‚ â”œâ”€â”€ html â”‚ â”‚ â””â”€â”€ new.html â”‚ â””â”€â”€ requirements.txt â””â”€â”€ show-html.yml Edit new.html :\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#39;en\u0026#39;\u0026gt; \u0026lt;head\u0026gt;  \u0026lt;meta charset=\u0026#39;UTF-8\u0026#39;\u0026gt;  \u0026lt;title\u0026gt;OpenFaaS\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt;  \u0026lt;h2\u0026gt;Here\u0026#39;s a new page!\u0026lt;/h2\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ç°åœ¨æŠŠä½ çš„handler.pyæ”¹ä¸ºä»¥ä¸‹å†…å®¹ã€‚\nimport os  def handle(req):  \u0026#34;\u0026#34;\u0026#34;handle a request to the function Args: req (str): request body \u0026#34;\u0026#34;\u0026#34;   dirname = os.path.dirname(__file__)  path = os.path.join(dirname, \u0026#39;html\u0026#39;, \u0026#39;new.html\u0026#39;)   with(open(path, \u0026#39;r\u0026#39;)) as file:  html = file.read()   return html ç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚\nfaas-cli up -f show-html.yml æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè®¿é—®http://127.0.0.1:8080/function/show-htmlã€‚ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ª è¿™é‡Œæœ‰ä¸€ä¸ªæ–°çš„é¡µé¢ï¼ åœ¨æµè§ˆå™¨ä¸­å‘ˆç°çš„ HTML é¡µé¢ã€‚\nç°åœ¨æˆ‘ä»¬è¦ä¸ºè¿™ä¸ªå‡½æ•°çš„ URL æ·»åŠ ä¸€ä¸ªè·¯å¾„ã€‚\nåœ¨htmlæ–‡ä»¶å¤¹ä¸­æ·»åŠ æ–°çš„list.htmlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#39;en\u0026#39;\u0026gt; \u0026lt;head\u0026gt;  \u0026lt;meta charset=\u0026#39;UTF-8\u0026#39;\u0026gt;  \u0026lt;title\u0026gt;OpenFaaS\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt;  \u0026lt;h2\u0026gt;This is a list!\u0026lt;/h2\u0026gt;  \u0026lt;ul\u0026gt;  \u0026lt;li\u0026gt;One\u0026lt;/li\u0026gt;  \u0026lt;li\u0026gt;Two\u0026lt;/li\u0026gt;  \u0026lt;li\u0026gt;Three\u0026lt;/li\u0026gt;  \u0026lt;/ul\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; å°†ä½ çš„handler.pyç¼–è¾‘æˆä»¥ä¸‹å†…å®¹ã€‚\nimport os  def handle(req):   path = os.environ[\u0026#39;Http_Path\u0026#39;]  pathArr = path.split(\u0026#34;/\u0026#34;)  pageName = pathArr[1]   dirname = os.path.dirname(__file__)  page = os.path.join(dirname, \u0026#39;html\u0026#39;, pageName + \u0026#39;.html\u0026#39;)   with(open(page, \u0026#39;r\u0026#39;)) as file:  html = file.read()   return html æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚\nfaas-cli up -f show-html.yml ç°åœ¨åœ¨http://127.0.0.1:8080/function/show-html/new æˆ– http://127.0.0.1:8080/function/show-html/list ä¸Šæ‰“å¼€ä½ çš„ç½‘é¡µã€‚ è¿™å°†è¾“å‡ºã€‚\n\u0026lt;h2\u0026gt;Here\u0026#39;s a new page!\u0026lt;/h2\u0026gt; and\n\u0026lt;h2\u0026gt;This is a list!\u0026lt;/h2\u0026gt;  \u0026lt;ul\u0026gt;  \u0026lt;li\u0026gt;One\u0026lt;/li\u0026gt;  \u0026lt;li\u0026gt;Two\u0026lt;/li\u0026gt;  \u0026lt;li\u0026gt;Three\u0026lt;/li\u0026gt;  \u0026lt;/ul\u0026gt; è¯»å–æŸ¥è¯¢å­—ç¬¦ä¸²å¹¶è¿”å›ä¸åŒçš„ HTML ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•é€šè¿‡å‡½æ•°æ¥æä¾› HTMLï¼Œè®©æˆ‘ä»¬åŠ¨æ€åœ°æ”¹å˜é€šè¿‡æŸ¥è¯¢å­—ç¬¦ä¸²æä¾›çš„ HTMLã€‚æ­£å¦‚æˆ‘ä»¬åœ¨å®éªŒå®¤ 4ä¸­å­¦åˆ°çš„ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡ä¸€ä¸ªå«åšHttp_Queryçš„ç¯å¢ƒå˜é‡æ¥æ£€ç´¢ã€‚å‡è®¾æˆ‘ä»¬åšäº†ä¸€ä¸ªçœ‹èµ·æ¥åƒè¿™æ ·çš„æŸ¥è¯¢ã€‚\nhttp://127.0.0.1:8080/function/show-html?action=new\næŸ¥è¯¢å­—ç¬¦ä¸²æ˜¯action=newï¼Œå› æ­¤Http_Queryçš„å€¼å°†æ˜¯action=newã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨urllib.parseåŒ…ä¸­çš„parse_qså‡½æ•°ï¼Œè½»æ¾è§£æè¿™ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²ã€‚\næˆ‘ä»¬çš„å‡½æ•°çš„ç›®å½•ç»“æ„çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ã€‚\nâ”œâ”€â”€ show-html â”‚ â”œâ”€â”€ __init__.py â”‚ â”œâ”€â”€ handler.py â”‚ â”œâ”€â”€ html â”‚ â”‚ â”œâ”€â”€ list.html â”‚ â”‚ â””â”€â”€ new.html â”‚ â””â”€â”€ requirements.txt â””â”€â”€ show-html.yml æ”¹å˜ä½ çš„handler.pyã€‚\nimport os from urllib.parse import parse_qs  def handle(req):  \u0026#34;\u0026#34;\u0026#34;handle a request to the function Args: req (str): request body \u0026#34;\u0026#34;\u0026#34;   query = os.environ[\u0026#39;Http_Query\u0026#39;]  params = parse_qs(query)  action = params[\u0026#39;action\u0026#39;][0]   dirname = os.path.dirname(__file__)  path = os.path.join(dirname, \u0026#39;html\u0026#39;, action + \u0026#39;.html\u0026#39;)   with(open(path, \u0026#39;r\u0026#39;)) as file:  html = file.read()   return html ç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚\nfaas-cli up -f show-html.yml æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œé¦–å…ˆè®¿é—®ã€‚\nhttp://127.0.0.1:8080/function/show-html?action=new\nä½ åº”è¯¥çœ‹åˆ° è¿™é‡Œæœ‰ä¸€ä¸ªæ–°çš„é¡µé¢ï¼å°±åƒä½ åœ¨ä¸Šä¸€èŠ‚çœ‹åˆ°çš„é‚£æ ·ã€‚ç°åœ¨è®¿é—®ã€‚\nhttp://127.0.0.1:8080/function/show-html?action=list\nä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªæ˜¾ç¤ºåˆ—è¡¨çš„ HTMLã€‚\nä¸å…¶ä»–å‡½æ•°åä½œ æœ€åï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åˆ©ç”¨ JavaScript å’Œ Ajax çš„ä¼˜åŠ¿ï¼Œä» HTML å‡½æ•°ä¸­ä¸å¦ä¸€ä¸ªå‡½æ•°ï¼ˆä¾‹å¦‚figletå‡½æ•°ï¼‰åä½œã€‚\né¦–å…ˆï¼Œè®©æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªåä¸ºfiglet.htmlçš„ HTML æ–‡ä»¶ã€‚æ‰€ä»¥ç°åœ¨çš„ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„ã€‚\nâ”œâ”€â”€ show-html â”‚ â”œâ”€â”€ __init__.py â”‚ â”œâ”€â”€ handler.py â”‚ â”œâ”€â”€ html â”‚ â”‚ â”œâ”€â”€ figlet.html â”‚ â”‚ â”œâ”€â”€ list.html â”‚ â”‚ â””â”€â”€ new.html â”‚ â””â”€â”€ requirements.txt â””â”€â”€ show-html.yml ç¼–è¾‘figlet.htmlã€‚\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#39;en\u0026#39;\u0026gt; \u0026lt;head\u0026gt;  \u0026lt;meta charset=\u0026#39;UTF-8\u0026#39;\u0026gt;  \u0026lt;title\u0026gt;OpenFaaS\u0026lt;/title\u0026gt;  \u0026lt;script  src=\u0026#34;https://code.jquery.com/jquery-3.3.1.min.js\u0026#34;  integrity=\u0026#34;sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=\u0026#34;  crossorigin=\u0026#34;anonymous\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;  \u0026lt;style\u0026gt;  .result {  font-family: \u0026#39;Roboto Mono\u0026#39;, monospace;  }  \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt;  \u0026lt;h2\u0026gt;Figlet\u0026lt;/h2\u0026gt;  \u0026lt;p\u0026gt;  Text: \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;text\u0026#34; id=\u0026#34;text\u0026#34;\u0026gt;  \u0026lt;button id=\u0026#34;generate\u0026#34;\u0026gt;Generate\u0026lt;/button\u0026gt;  \u0026lt;/p\u0026gt;   \u0026lt;textarea class=\u0026#34;result\u0026#34; cols=\u0026#34;80\u0026#34; rows=\u0026#34;10\u0026#34;\u0026gt;\u0026lt;/textarea\u0026gt;   \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt;  $(function(){  // Generate button click  $(\u0026#39;#generate\u0026#39;).on(\u0026#39;click\u0026#39;, function() {  // Execute ajax request  $.ajax({  url:\u0026#39;./figlet\u0026#39;,  type:\u0026#39;POST\u0026#39;,  data:$(\u0026#39;#text\u0026#39;).val()  })  .done(function(data) {  // ajax success  $(\u0026#39;.result\u0026#39;).val(data);  console.log(data);  })  .fail(function(data) {  // ajax failure  $(\u0026#39;.result\u0026#39;).val(data);  console.log(data);  });  });  });  \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; å¦‚æœä½ ä¸å¤ªäº†è§£ JavaScriptï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚è¿™ä¸ªé¡µé¢æ‰€åšçš„å°±æ˜¯ã€‚\n åœ¨ inputä¸­è¾“å…¥æ–‡å­— *æŒ‰ä¸‹ ç”ŸæˆæŒ‰é’® åˆ›å»ºä¸€ä¸ª Ajax è¯·æ±‚åˆ°figletå‡½æ•°ç«¯ç‚¹ï¼ˆ/function/figletï¼‰ã€‚ å°†ç»“æœåº”ç”¨åˆ° textarea ä¸­ã€‚  æ²¡æœ‰å¿…è¦æ”¹å˜handler.pyï¼Œå› ä¸ºå®ƒå¯ä»¥åŠ¨æ€åœ°æä¾›ä¸Šä¸€èŠ‚ä¸­çš„ HTMLã€‚å°½ç®¡æ²¡æœ‰æ”¹å˜handler.pyï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦æ„å»ºå’Œæ¨é€å‡½æ•°é•œåƒï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°å®¹å™¨ä¸­æ‰“åŒ…æ–°çš„figlet.htmlã€‚\nç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¿™ä¸ªå‡½æ•°ã€‚\nfaas-cli up -f show-html.yml æœ¬èŠ‚å‡è®¾ä½ å·²ç»éƒ¨ç½²äº†å®éªŒå®¤ 2ä¸­çš„figletå‡½æ•°ã€‚\næ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œé¦–å…ˆè®¿é—®ã€‚\nhttp://127.0.0.1:8080/function/show-html?action=figlet\nä½ åº”è¯¥çœ‹åˆ° Figlet é¡µé¢ï¼Œå¹¶ä¸”åº”è¯¥çœ‹åˆ°ä¸€ä¸ªè¾“å…¥ã€‚è¾“å…¥ä»»ä½•ä½ æƒ³è¾“å…¥çš„æ–‡æœ¬ï¼Œç„¶åç‚¹å‡» ç”Ÿæˆ æŒ‰é’®ã€‚å¦‚æœè¯·æ±‚æˆåŠŸï¼Œtextarea åº”è¯¥åŒ…å«ä½ åœ¨ input ä¸­è¾“å…¥çš„ figletã€‚è¿™æ˜¯ä¸€ä¸ªå¾®ä¸è¶³é“çš„ä¾‹å­ï¼Œä½†é€šè¿‡ä½¿ç”¨è¿™ç§æŠ€æœ¯ï¼Œä½ ç”šè‡³å¯ä»¥ç”¨å‡½æ•°åˆ›å»ºå¼ºå¤§çš„ SPAï¼ˆå•é¡µåº”ç”¨ç¨‹åºï¼‰ã€‚\nåœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œä½ å­¦åˆ°äº†å¦‚ä½•ä»ä½ çš„å‡½æ•°ä¸­æä¾› HTMLï¼Œå¹¶è®¾ç½®å“åº”çš„Content-Typeã€‚æ­¤å¤–ï¼Œä½ è¿˜å­¦ä¼šäº†å¦‚ä½•ç”¨ HTML+JavaScript è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œä»¥åŠç”¨å‡½æ•°åˆ›å»ºåŠ¨æ€é¡µé¢ã€‚\nç°åœ¨è¿›å…¥å®éªŒå®¤ 7\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab6/","summary":"å®éªŒ 6\u0026ndash;ä½ çš„å‡½æ•°çš„ HTML åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab6\\  \u0026amp;\u0026amp; cd lab6 ä»ä¸€ä¸ªå‡½æ•°ä¸­ç”Ÿæˆå¹¶è¿”å›åŸºæœ¬çš„ HTML å‡½æ•°å¯ä»¥è¿”å› HTMLï¼Œå¹¶å°†Content-Typeè®¾ç½®ä¸ºtext/htmlã€‚å› æ­¤ï¼Œå‡½æ•°è¿”å›çš„ HTML å¯ä»¥é€šè¿‡æµè§ˆå™¨è¿›è¡Œæ¸²æŸ“ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œç”Ÿæˆå¹¶è¿”å›ä¸€ä¸ªåŸºæœ¬çš„ HTMLã€‚\nfaas-cli new --lang python3 show-html --prefix=\u0026#34;\u0026lt;your-docker-username-here\u0026gt;\u0026#34; ç¼–è¾‘handler.pyã€‚\ndef handle(req):  \u0026#34;\u0026#34;\u0026#34;handle a request to the function Args: req (str): request body \u0026#34;\u0026#34;\u0026#34;   html = \u0026#39;\u0026lt;html\u0026gt;\u0026lt;h2\u0026gt;Hi, from your function!\u0026lt;/h2\u0026gt;\u0026lt;/html\u0026gt;\u0026#39;   return html è¿™å°†è¿”å› HTML ç»™è°ƒç”¨è€…ã€‚ è¿˜æœ‰ä¸€ä»¶äº‹æˆ‘ä»¬åº”è¯¥åšçš„æ˜¯è®¾ç½®å“åº”çš„Content-Type'ã€‚æˆ‘ä»¬100%ç¡®å®šè¿™ä¸ªå‡½æ•°å°†è¿”å›ä¸€ä¸ªHTMLï¼Œæ‰€ä»¥Content-Typeåº”è¯¥æ€»æ˜¯text/htmlã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨show-html.ymlæ–‡ä»¶ä¸­çš„environment`éƒ¨åˆ†æ¥è®¾ç½®ã€‚\nç¼–è¾‘show-html.ymlã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  show-html:  lang: python3  handler: .","title":"Openfaas Workshop Lab6"},{"content":"Lab 5 - åˆ›å»ºä¸€ä¸ª GitHub æœºå™¨äºº åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab5\\  \u0026amp;\u0026amp; cd lab5 æˆ‘ä»¬å°†ä½¿ç”¨ OpenFaaS çš„å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåä¸º issue-botçš„ GitHub æœºå™¨äººã€‚\né—®é¢˜æœºå™¨äººçš„å·¥ä½œæ˜¯é€šè¿‡åˆ†æ æè¿° å­—æ®µçš„æƒ…ç»ªæ¥åˆ†æµæ–°çš„é—®é¢˜ï¼Œç„¶åå®ƒå°†åº”ç”¨ä¸€ä¸ªç§¯ææˆ–å®¡æŸ¥çš„æ ‡ç­¾ã€‚è¿™å°†æœ‰åŠ©äºç»´æŠ¤è€…åœ¨ç¹å¿™çš„å·¥ä½œä¸­ï¼Œå¯ä»¥ä¼˜å…ˆè€ƒè™‘å“ªäº›é—®é¢˜éœ€è¦é¦–å…ˆå¤„ç†ã€‚\né—®é¢˜æœºå™¨äººçš„å›¾ç¤º](./diagram/issue-bot.png)\nè·å–ä¸€ä¸ª GitHub è´¦æˆ·   æ³¨å†Œä¸€ä¸ªGitHub è´¦æˆ·ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰ä¸€ä¸ªè´¦æˆ·ã€‚\n  åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œå¹¶å°†å…¶ç§°ä¸ºbot-testã€‚\n  æ³¨æ„ï¼šæˆ‘ä»¬å°†åªä½¿ç”¨è¿™ä¸ªä»“åº“ä½œä¸ºåˆ›å»ºé—®é¢˜çš„æµ‹è¯•åœºæ‰€ã€‚ä½ ä¸éœ€è¦åœ¨é‚£é‡Œæäº¤ä»»ä½•ä»£ç ã€‚\nå»ºç«‹ä¸€ä¸ªå¸¦æœ‰å…¥å£çš„éš§é“ ä½ éœ€è¦æ¥æ”¶æ¥è‡ª GitHub çš„ webhooksã€‚å¹¸è¿çš„æ˜¯ï¼Œinlets è®©è¿™ä¸€åˆ‡å˜å¾—éå¸¸å¿«é€Ÿå’Œç®€å•ã€‚å®ƒå¯ä»¥æŒ‰æœˆæˆ–æŒ‰å¹´è®¢é˜…ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸ç¡®å®šæ˜¯å¦å…¨å¹´éƒ½éœ€è¦å®ƒï¼Œä½ å¯ä»¥åªä»˜ä¸€ä¸ªæœˆçš„é’±ã€‚\ninlets æœ‰ä¸€ä¸ªå«åš inlets-operator çš„ Kubernetes é›†æˆã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®¾ç½® LoadBalancers æˆ–å¸¦æœ‰ TLS çš„ Ingressã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯ä¸ºä½ åˆ›å»ºä¸€ä¸ªäº‘è™šæ‹Ÿæœºï¼Œå¹¶åœ¨é‚£é‡Œè¿è¡Œä¸€ä¸ªéš§é“æœåŠ¡å™¨ï¼Œç„¶åä¸ºä½ è¿è¡Œä¸€ä¸ªéš§é“å®¢æˆ·ç«¯ä½œä¸ºä¸€ä¸ª Podï¼Œä½ å°±å¯ä»¥è·å¾—ä¼ å…¥æµé‡ã€‚\nåœ¨ä½ å–œæ¬¢çš„äº‘æä¾›å•†ï¼ˆå¦‚ DigitalOceanï¼‰çš„ API é¡µé¢ä¸‹åˆ›å»ºä¸€ä¸ªå†™å…¥è®¿é—®ä»¤ç‰Œï¼Œç„¶åå°†å†…å®¹ä¿å­˜åˆ°digital-ocean-api-token.txtã€‚\nè®¾ç½®å®Œè®¢é˜…åï¼Œå°†ä½ çš„å¯†é’¥ä¿å­˜åˆ°$HOME/.inlets/LICENSEï¼Œç„¶åè¿è¡Œä»¥ä¸‹ç¨‹åºã€‚\narkade install inlets-operator \\  --provider digitalocean \\  --region lon1 \\  --token-file $HOME/digital-ocean-api-token.txt è¿™å°†éƒ¨ç½² inlets-operatorï¼Œå¹¶æŒ‡ç¤ºå®ƒåœ¨ DigitalOcean ä¸Šä¸ºä½ çš„éš§é“æœåŠ¡å™¨é…ç½®æ–°çš„ä¸»æœºåˆ°ä¼¦æ•¦åœ°åŒºã€‚å…¶ä»–ä¾›åº”å•†å’Œåœ°åŒºä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œæ›´å¤šä¿¡æ¯è¯·è§æ–‡æ¡£ã€‚\nç”¨ç½‘å…³çš„å…¬å…± IP ç™»å½•ä½ çš„ç½‘å…³ ç”¨ä¿¡æ¯æ£€ç´¢ä½ çš„ç½‘å…³å¯†ç ï¼Œä»ã€‚\narkade info openfaas LoadBalancer çš„å…¬å…± IP å¤§çº¦éœ€è¦ 10-30 ç§’æ‰èƒ½å‡ºç°ã€‚\nkubectl get svc -n openfaas gateway-external NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE gateway-external LoadBalancer 10.96.29.46 \u0026lt;pending\u0026gt; 8080:32278/TCP 5h56m gateway-external LoadBalancer 10.96.29.46 165.227.233.227 8080:32278/TCP 5h56m ç„¶åæŠŠå®ƒä¿å­˜åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚\nexport OPENFAAS_URL=http://165.227.233.227:8080 ç”¨ç»™ä½ çš„å¯†ç ç™»å½•åˆ°å…¬å…± IPã€‚\necho $PASSWORD | faas-cli login --password-stdin æœ€åæµ‹è¯•è¿œç¨‹ URLï¼Œå¦‚http://165.227.233.227:8080\nä½ å¯ä»¥é€šè¿‡è®¾ç½®OPENFAAS_URLç¯å¢ƒå˜é‡æˆ–ä½¿ç”¨--gatewayæ ‡å¿—æ¥å¯¹è¿œç¨‹ç½‘å…³è¿è¡Œå‘½ä»¤ã€‚\nå¦‚æœä½ æƒ³ç”¨ TLS è¯ä¹¦å’Œè‡ªå®šä¹‰åŸŸåæ¥æš´éœ² OpenFaaSï¼Œä½ å¯ä»¥æŒ‰ç…§è¿™äº›è¯´æ˜æ¥ä»£æ›¿ã€‚\narkade install ingress-nginx arkade install cert-manager arkade install openfaas arkade install openfaas-ingress \\  --email web@example.com \\  --domain openfaas.example.com ç„¶ååˆ›å»ºä¸€ä¸ª DNS A è®°å½•ï¼ŒæŒ‡å‘ ingress-nginx çš„ IP åœ°å€ã€‚\nkubectl get svc ingress-nginx-controller NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE ingress-nginx-controller LoadBalancer 10.96.179.20 \u0026lt;pending\u0026gt; 80:30319/TCP,443:31591/TCP 20s ingress-nginx-controller LoadBalancer 10.96.179.20 209.97.135.63 80:30319/TCP,443:31591/TCP 52s ç°åœ¨ä½ å¯ä»¥ä¸ºhttps://openfaas.example.comæä¾›ä¸€ä¸ªè‡ªå®šä¹‰çš„ TLS è®°å½•ã€‚\nåˆ›å»ºä¸€ä¸ª webhook æ¥æ”¶å™¨issue-bot export OPENFAAS_PREFIX=\u0026#34;docker.io/your-username\u0026#34; $ faas-cli new --lang python3 \\  issue-bot ç°åœ¨ç¼–è¾‘è¯¥å‡½æ•°çš„ YAML æ–‡ä»¶issue-bot.ymlå¹¶æ·»åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡write_debug: trueã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  issue-bot:  lang: python3  handler: ./issue-bot  image: docker.io/your-username/issue-bot  environment:  write_debug: true  æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ï¼Œä½¿ç”¨  faas-cli up -f ./issue-bot.yml ä» GitHub æ¥æ”¶ webhooks é‡æ–°ç™»å½• GitHub å¹¶å¯¼èˆªåˆ°ä½ çš„ä»“åº“bot-testerã€‚\nç‚¹å‡» è®¾ç½® -\u0026gt; Webhooks -\u0026gt; æ·»åŠ  Webhook\nç°åœ¨è¾“å…¥ä½ ä» inlets æˆ–ä½ çš„è‡ªå®šä¹‰åŸŸä¸­å¾—åˆ°çš„ URLï¼Œåœ¨æœ€ååŠ ä¸Š/function/issue-botï¼Œä¾‹å¦‚ã€‚\nhttps://openfaas.example.com å¯¹äºContent-typeé€‰æ‹©ã€‚application/json\næš‚æ—¶å°†Secretç•™ç©ºã€‚\nå¹¶é€‰æ‹© è®©æˆ‘é€‰æ‹©ä¸ªåˆ«äº‹ä»¶\nå¯¹äºäº‹ä»¶é€‰æ‹©äº‹ä»¶å’Œäº‹ä»¶è¯„è®ºã€‚\nï¼è®¾ç½®äº‹ä»¶\næ£€æŸ¥å®ƒæ˜¯å¦æœ‰æ•ˆ ç°åœ¨å» GitHubï¼Œåˆ›å»ºä¸€ä¸ªæ–°é—®é¢˜ã€‚åœ¨æ ‡é¢˜å’Œæè¿°ä¸­è¾“å…¥ testã€‚\næ£€æŸ¥è¯¥å‡½æ•°è¢«è°ƒç”¨äº†å¤šå°‘æ¬¡\u0026ndash;è¿™ä¸ªæ•°å­—è‡³å°‘åº”è¯¥æ˜¯1ã€‚\n$ faas-cli list Function Invocations issue-bot 2 æ¯æ¬¡ä½ åˆ›å»ºä¸€ä¸ªé—®é¢˜ï¼Œç”±äº GitHub çš„ API è°ƒç”¨äº†è¯¥å‡½æ•°ï¼Œè®¡æ•°ä¼šå¢åŠ ã€‚\nä½ å¯ä»¥é€šè¿‡è¾“å…¥docker service logs -f issue-botï¼ˆæˆ–kubectl logs deployment/issue-bot -n openfaas-fnï¼‰çœ‹åˆ°é€šè¿‡ GitHub å‘é€çš„æœ‰æ•ˆè½½è·ã€‚\nGitHub çš„ Webhooks é¡µé¢ä¹Ÿä¼šåœ¨ Recent Deliveriesä¸‹æ˜¾ç¤ºæ¯æ¡å‘é€çš„æ¶ˆæ¯ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œé‡æ”¾ä¸€æ¡æ¶ˆæ¯ï¼Œçœ‹çœ‹ä½ çš„å‡½æ•°è¿”å›çš„å“åº”ã€‚\néƒ¨ç½² SentimentAnalysis å‡½æ•° ä¸ºäº†ä½¿ç”¨è¿™ä¸ª issue-bot å‡½æ•°ï¼Œä½ å°†éœ€è¦é¦–å…ˆéƒ¨ç½² SentimentAnalysis å‡½æ•°ã€‚ è¿™æ˜¯ä¸€ä¸ª python å‡½æ•°ï¼Œä¸ºé€šè¿‡ TextBlob é¡¹ç›®è¾“å…¥çš„æ¯ä¸ªå¥å­æä¾›æ­£/è´Ÿï¼ˆææ€§-1.0-1.0ï¼‰å’Œä¸»è§‚æ€§çš„è¯„çº§ã€‚\nå¦‚æœä½ åœ¨Lab 4ä¸­æ²¡æœ‰è¿™æ ·åšï¼Œä½ å¯ä»¥ä»å‡½æ•°å•†åº—éƒ¨ç½² SentimentAnalysisã€‚\n$ echo -n \u0026#34;I am really excited to participate in the OpenFaaS workshop.\u0026#34; | faas-cli invoke sentimentanalysis Polarity: 0.375 Subjectivity: 0.75  $ echo -n \u0026#34;The hotel was clean, but the area was terrible\u0026#34; | faas-cli invoke sentimentanalysis Polarity: -0.316666666667 Subjectivity: 0.85 æ›´æ–°issue-botå‡½æ•° æ‰“å¼€issue-bot/handler.pyï¼Œç”¨è¿™æ®µä»£ç æ›¿æ¢æ¨¡æ¿ã€‚\nimport requests, json, os, sys  def handle(req):   event_header = os.getenv(\u0026#34;Http_X_Github_Event\u0026#34;)   if not event_header == \u0026#34;issues\u0026#34;:  sys.exit(\u0026#34;Unable to handle X-GitHub-Event: \u0026#34; + event_header)  return   gateway_hostname = os.getenv(\u0026#34;gateway_hostname\u0026#34;, \u0026#34;gateway.openfaas\u0026#34;)   payload = json.loads(req)   if not payload[\u0026#34;action\u0026#34;] == \u0026#34;opened\u0026#34;:  return   #sentimentanalysis  res = requests.post(\u0026#39;http://\u0026#39; + gateway_hostname + \u0026#39;:8080/function/sentimentanalysis\u0026#39;, data=payload[\u0026#34;issue\u0026#34;][\u0026#34;title\u0026#34;]+\u0026#34; \u0026#34;+payload[\u0026#34;issue\u0026#34;][\u0026#34;body\u0026#34;])   if res.status_code != 200:  sys.exit(\u0026#34;Error with sentimentanalysis, expected: %d, got: %d\\n\u0026#34; % (200, res.status_code))   return res.json() ç”¨ HTTP/HTTPs çš„è¯·æ±‚æ¨¡å—æ›´æ–°ä½ çš„requirements.txtæ–‡ä»¶ã€‚\nrequests åœ¨issue-bot.ymlæ–‡ä»¶ä¸­æ·»åŠ gateway_hostnameç¯å¢ƒå˜é‡ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸ºgateway.openfaasã€‚\n ...  environment:  gateway_hostname: \u0026#34;gateway.openfaas\u0026#34;  ... ä¸Šé¢ä»£ç ä¸­çš„ä¸‹é¢ä¸€è¡Œå°† GitHub é—®é¢˜çš„æ ‡é¢˜å’Œæ­£æ–‡ä½œä¸ºæ–‡æœ¬å‘å¸ƒç»™sentimentanalysiså‡½æ•°ã€‚å“åº”å°†æ˜¯ JSON æ ¼å¼ã€‚\nres = requests.post(\u0026#39;http://\u0026#39; + gateway_hostname + \u0026#39;:8080/function/sentimentanalysis\u0026#39;, data=payload[\u0026#34;issue\u0026#34;][\u0026#34;title\u0026#34;]+\u0026#34; \u0026#34;+payload[\u0026#34;issue\u0026#34;][\u0026#34;body\u0026#34;])  æ„å»ºå’Œéƒ¨ç½²  ä½¿ç”¨ CLI æ¥æ„å»ºå’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚\nfaas-cli up -f issue-bot.yml ç°åœ¨åœ¨bot-testä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªæ–°é—®é¢˜ã€‚GitHub å°†é€šè¿‡æˆ‘ä»¬ä¹‹å‰é…ç½®çš„ Inlets éš§é“å‘ä½ çš„å‡½æ•°å‘é€ä¸€ä¸ª JSON æœ‰æ•ˆè½½è·ã€‚\nä½ å¯ä»¥åœ¨ GitHub ä¸Šç›´æ¥æŸ¥çœ‹è¯·æ±‚/å“åº”\u0026ndash;å¯¼èˆªåˆ°Settings -\u0026gt; Webhookï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\nå›å¤åˆ° GitHub ä¸‹ä¸€æ­¥æ˜¯è®©æˆ‘ä»¬è´´ä¸Š æ­£é¢ æˆ– è¯„è®º çš„æ ‡ç­¾ï¼Œä½†ç”±äºè¿™ä¸ªåŠ¨ä½œæ¶‰åŠåˆ°å‘ä»“åº“å†™å…¥å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦ä» GitHub è·å¾—ä¸€ä¸ªä¸ªäººè®¿é—®ä»¤ç‰Œã€‚\nä¸º GitHub åˆ›å»ºä¸€ä¸ªä¸ªäººè®¿é—®ä»¤ç‰Œ è¿›å…¥ä½ çš„GitHub é…ç½®æ–‡ä»¶ -\u0026gt; è®¾ç½®/å¼€å‘è€…è®¾ç½® -\u0026gt; ä¸ªäººè®¿é—®ä»¤ç‰Œï¼Œç„¶åç‚¹å‡»ç”Ÿæˆæ–°ä»¤ç‰Œã€‚\nå‹¾é€‰ repoçš„æ–¹æ¡†ï¼Œå…è®¸è®¿é—®ä½ çš„å­˜å‚¨åº“\nç‚¹å‡»é¡µé¢åº•éƒ¨çš„ Generate TokenæŒ‰é’®\nåœ¨ä½ çš„issue-bot.ymlæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºenv.ymlçš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚\nenvironment:  auth_token: \u0026lt;auth_token_value\u0026gt; ç”¨ GitHub ä¸Šçš„ä»¤ç‰Œæ›´æ–°auth_tokenå˜é‡ã€‚\nç°åœ¨æ›´æ–°ä½ çš„ issue-bot.yml æ–‡ä»¶ï¼Œå‘Šè¯‰å®ƒä½¿ç”¨env.ymlæ–‡ä»¶ã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  issue-bot:  lang: python3  handler: ./issue-bot  image: \u0026lt;your-username\u0026gt;/issue-bot  environment:  write_debug: true  gateway_hostname: \u0026#34;gateway.openfaas\u0026#34;  positive_threshold: 0.25  environment_file:  - env.yml  positive_thresholdç¯å¢ƒå˜é‡ç”¨äºå¾®è°ƒä¸€ä¸ªé—®é¢˜æ˜¯å¦è·å¾—positiveæˆ–reviewæ ‡ç­¾ã€‚\n ä»»ä½•æ•æ„Ÿä¿¡æ¯éƒ½ä¼šè¢«æ”¾åœ¨ä¸€ä¸ªå¤–éƒ¨æ–‡ä»¶ä¸­ï¼ˆå³env.ymlï¼‰ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥è¢«åŒ…å«åœ¨.gitignoreæ–‡ä»¶ä¸­ï¼Œè¿™å°†æœ‰åŠ©äºé˜²æ­¢è¿™äº›ä¿¡æ¯è¢«å­˜å‚¨åœ¨å…¬å…±çš„ Git ä»“åº“ä¸­ã€‚\nOpenFaaS ä¹Ÿæ”¯æŒä½¿ç”¨åŸç”Ÿçš„ Docker å’Œ Kubernetes çš„ç§˜å¯†ï¼Œè¯¦æƒ…è¯·è§Lab 10\né€šè¿‡ GitHub çš„ API åº”ç”¨æ ‡ç­¾ ä½ å¯ä»¥ä½¿ç”¨ API æ¥æ‰§è¡Œè®¸å¤šä¸åŒçš„ä»»åŠ¡ï¼Œæ–‡æ¡£åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ª Python ä»£ç çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥åº”ç”¨æ ‡ç­¾ï¼Œä½†ä½ å…ˆä¸è¦æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„å‡½æ•°ä¸­ã€‚\nissue_number = 1 repo_name = \u0026#34;alexellis/issue_bot\u0026#34; auth_token = \u0026#34;xyz\u0026#34;  g = Github(auth_token) repo = g.get_repo(repo_name) issue = repo.get_issue(issue_number) è¿™ä¸ªç”¨äº GitHub çš„åº“æ˜¯ç”±ç¤¾åŒºæä¾›çš„ï¼Œä¸æ˜¯å®˜æ–¹çš„ï¼Œä½†ä¼¼ä¹å¾ˆå—æ¬¢è¿ã€‚å®ƒå¯ä»¥é€šè¿‡æˆ‘ä»¬çš„requirements.txtæ–‡ä»¶ä»pipè°ƒå…¥ã€‚\nå®Œæˆå‡½æ•°  æ›´æ–°ä½ çš„issue-bot/requirements.txtæ–‡ä»¶ï¼Œä¸ºPyGithubæ·»åŠ ä¸€è¡Œå†…å®¹  requests PyGithub  æ‰“å¼€issue-bot/handler.pyï¼Œå°†ä»£ç æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ã€‚  import requests, json, os, sys from github import Github  def handle(req):  event_header = os.getenv(\u0026#34;Http_X_Github_Event\u0026#34;)   if not event_header == \u0026#34;issues\u0026#34;:  sys.exit(\u0026#34;Unable to handle X-GitHub-Event: \u0026#34; + event_header)  return   gateway_hostname = os.getenv(\u0026#34;gateway_hostname\u0026#34;, \u0026#34;gateway.openfaas\u0026#34;)   payload = json.loads(req)   if not payload[\u0026#34;action\u0026#34;] == \u0026#34;opened\u0026#34;:  sys.exit(\u0026#34;Action not supported: \u0026#34; + payload[\u0026#34;action\u0026#34;])  return   # Call sentimentanalysis  res = requests.post(\u0026#39;http://\u0026#39; + gateway_hostname + \u0026#39;:8080/function/sentimentanalysis\u0026#39;,  data= payload[\u0026#34;issue\u0026#34;][\u0026#34;title\u0026#34;]+\u0026#34; \u0026#34;+payload[\u0026#34;issue\u0026#34;][\u0026#34;body\u0026#34;])   if res.status_code != 200:  sys.exit(\u0026#34;Error with sentimentanalysis, expected: %d, got: %d\\n\u0026#34; % (200, res.status_code))   # Read the positive_threshold from configuration  positive_threshold = float(os.getenv(\u0026#34;positive_threshold\u0026#34;, \u0026#34;0.2\u0026#34;))   polarity = res.json()[\u0026#39;polarity\u0026#39;]   # Call back to GitHub to apply a label  apply_label(polarity,  payload[\u0026#34;issue\u0026#34;][\u0026#34;number\u0026#34;],  payload[\u0026#34;repository\u0026#34;][\u0026#34;full_name\u0026#34;],  positive_threshold)   return \u0026#34;Repo: %s, issue: %s, polarity: %f\u0026#34; % (payload[\u0026#34;repository\u0026#34;][\u0026#34;full_name\u0026#34;], payload[\u0026#34;issue\u0026#34;][\u0026#34;number\u0026#34;], polarity)  def apply_label(polarity, issue_number, repo, positive_threshold):  g = Github(os.getenv(\u0026#34;auth_token\u0026#34;))  repo = g.get_repo(repo)  issue = repo.get_issue(issue_number)   has_label_positive = False  has_label_review = False  for label in issue.labels:  if label == \u0026#34;positive\u0026#34;:  has_label_positive = True  if label == \u0026#34;review\u0026#34;:  has_label_review = True   if polarity \u0026gt; positive_threshold and not has_label_positive:  issue.set_labels(\u0026#34;positive\u0026#34;)  elif not has_label_review:  issue.set_labels(\u0026#34;review\u0026#34;)  æºä»£ç ä¹Ÿå¯åœ¨issue-bot/bot-handler/handler.py\n  æ„å»ºå’Œéƒ¨ç½²  ä½¿ç”¨ CLI æ¥æ„å»ºå’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚\nfaas-cli up -f issue-bot.yml ç°åœ¨é€šè¿‡åœ¨bot-testä»“åº“ä¸­åˆ›å»ºä¸€äº›æ–°çš„é—®é¢˜æ¥è¯•è¯•ã€‚æ£€æŸ¥ æ­£é¢å’Œ è¯„è®ºæ ‡ç­¾æ˜¯å¦è¢«æ­£ç¡®åº”ç”¨ï¼Œå¦‚æœä½ ä¸ç¡®å®šä¿¡æ¯æ˜¯å¦è¢«ä¼ é€’æˆ–æ€€ç–‘æœ‰é”™è¯¯è¢«æŠ›å‡ºï¼Œè¯·æŸ¥é˜… GitHub Webhooks é¡µé¢ã€‚\n æ³¨æ„ï¼šå¦‚æœæ ‡ç­¾æ²¡æœ‰ç«‹å³å‡ºç°ï¼Œè¯·å…ˆå°è¯•åˆ·æ–°é¡µé¢ã€‚\n ç”¨ HMAC éªŒè¯æœ‰æ•ˆè½½è· åœ¨Lab 11ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•é€šè¿‡ä½¿ç”¨ HMAC ä¿æŠ¤æ— æœåŠ¡å™¨å‡½æ•°ä¸è¢«ç¯¡æ”¹ã€‚\nç°åœ¨è½¬åˆ°Lab 6ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab5/","summary":"Lab 5 - åˆ›å»ºä¸€ä¸ª GitHub æœºå™¨äºº åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab5\\  \u0026amp;\u0026amp; cd lab5 æˆ‘ä»¬å°†ä½¿ç”¨ OpenFaaS çš„å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåä¸º issue-botçš„ GitHub æœºå™¨äººã€‚\né—®é¢˜æœºå™¨äººçš„å·¥ä½œæ˜¯é€šè¿‡åˆ†æ æè¿° å­—æ®µçš„æƒ…ç»ªæ¥åˆ†æµæ–°çš„é—®é¢˜ï¼Œç„¶åå®ƒå°†åº”ç”¨ä¸€ä¸ªç§¯ææˆ–å®¡æŸ¥çš„æ ‡ç­¾ã€‚è¿™å°†æœ‰åŠ©äºç»´æŠ¤è€…åœ¨ç¹å¿™çš„å·¥ä½œä¸­ï¼Œå¯ä»¥ä¼˜å…ˆè€ƒè™‘å“ªäº›é—®é¢˜éœ€è¦é¦–å…ˆå¤„ç†ã€‚\né—®é¢˜æœºå™¨äººçš„å›¾ç¤º](./diagram/issue-bot.png)\nè·å–ä¸€ä¸ª GitHub è´¦æˆ·   æ³¨å†Œä¸€ä¸ªGitHub è´¦æˆ·ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰ä¸€ä¸ªè´¦æˆ·ã€‚\n  åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œå¹¶å°†å…¶ç§°ä¸ºbot-testã€‚\n  æ³¨æ„ï¼šæˆ‘ä»¬å°†åªä½¿ç”¨è¿™ä¸ªä»“åº“ä½œä¸ºåˆ›å»ºé—®é¢˜çš„æµ‹è¯•åœºæ‰€ã€‚ä½ ä¸éœ€è¦åœ¨é‚£é‡Œæäº¤ä»»ä½•ä»£ç ã€‚\nå»ºç«‹ä¸€ä¸ªå¸¦æœ‰å…¥å£çš„éš§é“ ä½ éœ€è¦æ¥æ”¶æ¥è‡ª GitHub çš„ webhooksã€‚å¹¸è¿çš„æ˜¯ï¼Œinlets è®©è¿™ä¸€åˆ‡å˜å¾—éå¸¸å¿«é€Ÿå’Œç®€å•ã€‚å®ƒå¯ä»¥æŒ‰æœˆæˆ–æŒ‰å¹´è®¢é˜…ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸ç¡®å®šæ˜¯å¦å…¨å¹´éƒ½éœ€è¦å®ƒï¼Œä½ å¯ä»¥åªä»˜ä¸€ä¸ªæœˆçš„é’±ã€‚\ninlets æœ‰ä¸€ä¸ªå«åš inlets-operator çš„ Kubernetes é›†æˆã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®¾ç½® LoadBalancers æˆ–å¸¦æœ‰ TLS çš„ Ingressã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯ä¸ºä½ åˆ›å»ºä¸€ä¸ªäº‘è™šæ‹Ÿæœºï¼Œå¹¶åœ¨é‚£é‡Œè¿è¡Œä¸€ä¸ªéš§é“æœåŠ¡å™¨ï¼Œç„¶åä¸ºä½ è¿è¡Œä¸€ä¸ªéš§é“å®¢æˆ·ç«¯ä½œä¸ºä¸€ä¸ª Podï¼Œä½ å°±å¯ä»¥è·å¾—ä¼ å…¥æµé‡ã€‚\nåœ¨ä½ å–œæ¬¢çš„äº‘æä¾›å•†ï¼ˆå¦‚ DigitalOceanï¼‰çš„ API é¡µé¢ä¸‹åˆ›å»ºä¸€ä¸ªå†™å…¥è®¿é—®ä»¤ç‰Œï¼Œç„¶åå°†å†…å®¹ä¿å­˜åˆ°digital-ocean-api-token.txtã€‚\nè®¾ç½®å®Œè®¢é˜…åï¼Œå°†ä½ çš„å¯†é’¥ä¿å­˜åˆ°$HOME/.inlets/LICENSEï¼Œç„¶åè¿è¡Œä»¥ä¸‹ç¨‹åºã€‚\narkade install inlets-operator \\  --provider digitalocean \\  --region lon1 \\  --token-file $HOME/digital-ocean-api-token.","title":"Openfaas Workshop Lab5"},{"content":"åŒºå— æƒ³è¦äº†è§£åŒºå—åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæœ€ç®€å•å¿«æ·çš„æ–¹æ³•å°±æ˜¯åˆ†æå®ƒçš„æ•°æ®ç»“æ„ï¼Œä»¥ bitcoin ç§çš„åŒºå—ä¸ºä¾‹ï¼š\n{ ã€€\u0026#34;hash\u0026#34;:\u0026#34;00000000000000000018b0a6ae560fa33c469b6528bc9e0fb0c669319a186c33\u0026#34;, ã€€\u0026#34;confirmations\u0026#34;:1009, ã€€\u0026#34;strippedsize\u0026#34;:956228, ã€€\u0026#34;size\u0026#34;:1112639, ã€€\u0026#34;weight\u0026#34;:3981323, ã€€\u0026#34;height\u0026#34;:514095, ã€€\u0026#34;version\u0026#34;:536870912, ã€€\u0026#34;versionHex\u0026#34;:\u0026#34;20000000\u0026#34;, ã€€\u0026#34;merkleroot\u0026#34;:\u0026#34;5f8f8e053fd4c0c3175c10ac5189c15e6ba218909319850936fe54934dcbfeac\u0026#34;, ã€€\u0026#34;tx\u0026#34;:[ ã€€// ... ã€€], ã€€\u0026#34;time\u0026#34;:1521380124, ã€€\u0026#34;mediantime\u0026#34;:1521377506, ã€€\u0026#34;nonce\u0026#34;:3001236454, ã€€\u0026#34;bits\u0026#34;:\u0026#34;17514a49\u0026#34;, ã€€\u0026#34;difficulty\u0026#34;:3462542391191.563, ã€€\u0026#34;chainwork\u0026#34;:\u0026#34;0000000000000000000000000000000000000000014d2b41a340e60b72292430\u0026#34;, ã€€\u0026#34;previousblockhash\u0026#34;:\u0026#34;000000000000000000481ab128418847dc25db4dafec464baa5a33e66490990b\u0026#34;, ã€€\u0026#34;nextblockhash\u0026#34;:\u0026#34;0000000000000000000c74966205813839ad1c6d55d75f95c9c5f821db9c3510\u0026#34; } åœ¨è¿™ä¸ª Block çš„ç»“æ„ä½“ä¸­ï¼Œpreviousblockhash å’Œ merkleroot æ˜¯ä¸¤ä¸ªæœ€é‡è¦çš„å­—æ®µï¼›å‰è€…æ˜¯ä¸€ä¸ªå“ˆå¸ŒæŒ‡é’ˆï¼Œå®ƒå…¶å®æ˜¯å‰ä¸€ä¸ª Block çš„å“ˆå¸Œï¼Œé€šè¿‡ previousblockhash æˆ‘ä»¬èƒ½é€’å½’åœ°æ‰¾åˆ°å…¨éƒ¨çš„ Blockï¼Œä¹Ÿå°±æ˜¯æ•´æ¡ä¸»é“¾ï¼Œåè€…æ˜¯ä¸€ä¸ª Merkle æ ‘çš„æ ¹ï¼ŒMerkle æ ‘ä¸­åŒ…å«æ•´ä¸ª Block ä¸­çš„å…¨éƒ¨äº¤æ˜“ï¼Œé€šè¿‡ä¿å­˜ merklerootï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯å½“å‰ Block ä¸­ä»»æ„äº¤æ˜“éƒ½ä¸ä¼šè¢«ä¿®æ”¹ã€‚ Ethereum çš„åŒºå—é“¾æ¨¡å‹è™½ç„¶ä¸ Bitcoin æœ‰éå¸¸å¤§çš„ä¸åŒï¼Œä½†æ˜¯å®ƒçš„ Block ç»“æ„ä¸­ä¹Ÿæœ‰ç€ç±»ä¼¼çš„ä¿¡æ¯ï¼š\n{  \u0026#34;jsonrpc\u0026#34;:\u0026#34;2.0\u0026#34;,  \u0026#34;result\u0026#34;:{  \u0026#34;author\u0026#34;:\u0026#34;0x00d8ae40d9a06d0e7a2877b62e32eb959afbe16d\u0026#34;,  \u0026#34;difficulty\u0026#34;:\u0026#34;0x785042b0\u0026#34;,  \u0026#34;extraData\u0026#34;:\u0026#34;0x414952412f7630\u0026#34;,  \u0026#34;gasLimit\u0026#34;:\u0026#34;0x47b784\u0026#34;,  \u0026#34;gasUsed\u0026#34;:\u0026#34;0x44218a\u0026#34;,  \u0026#34;hash\u0026#34;:\u0026#34;0x4de91e4af8d135e061d50ddd6d0d6f4119cd0f7062ebe8ff2d79c5af0e8344b9\u0026#34;,  \u0026#34;logsBloom\u0026#34;:\u0026#34;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\u0026#34;,  \u0026#34;miner\u0026#34;:\u0026#34;0x00d8ae40d9a06d0e7a2877b62e32eb959afbe16d\u0026#34;,  \u0026#34;mixHash\u0026#34;:\u0026#34;0xb8155224974967443d8b83e484402fb6e1e18ff69a8fc5acdda32f2bcc6dd443\u0026#34;,  \u0026#34;nonce\u0026#34;:\u0026#34;0xad14fb6803147c7c\u0026#34;,  \u0026#34;number\u0026#34;:\u0026#34;0x2000f1\u0026#34;,  \u0026#34;parentHash\u0026#34;:\u0026#34;0x31919e2bf29306778f50bbc376bd490a7d056ddfd5b1f615752e79f32c7f1a38\u0026#34;,  \u0026#34;receiptsRoot\u0026#34;:\u0026#34;0xa2a7af5e3b9e1bbb6252ba82a09302321b8f0eea7ec8e3bb977401e4f473e672\u0026#34;,  \u0026#34;sealFields\u0026#34;:[  \u0026#34;0xa0b8155224974967443d8b83e484402fb6e1e18ff69a8fc5acdda32f2bcc6dd443\u0026#34;,  \u0026#34;0x88ad14fb6803147c7c\u0026#34;  ],  \u0026#34;sha3Uncles\u0026#34;:\u0026#34;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\u0026#34;,  \u0026#34;size\u0026#34;:\u0026#34;0x276\u0026#34;,  \u0026#34;stateRoot\u0026#34;:\u0026#34;0x87e7e54cf229003014f453d64f0344e2ba4fc7ee3b95c7dd2642cca389fa1efe\u0026#34;,  \u0026#34;timestamp\u0026#34;:\u0026#34;0x5a10968a\u0026#34;,  \u0026#34;totalDifficulty\u0026#34;:\u0026#34;0x1804de0c47ffe1\u0026#34;,  \u0026#34;transactions\u0026#34;:[...],  \u0026#34;transactionsRoot\u0026#34;:\u0026#34;0xc2091b032961ca23cf8323ea827e8956fe6dda9e68d75bcfaa8b910035397e35\u0026#34;,  \u0026#34;uncles\u0026#34;:[]  },  \u0026#34;id\u0026#34;:1 } parentHash å’Œ transactionsRoot åˆ†åˆ«å¯¹åº”ç€ Bitcoin ä¸­ previousblockhash å’Œ merklerootï¼Œè¿™ä¸¤è€…åœ¨æ•´ä¸ªåŒºå—é“¾ç½‘ç»œä¸­æ˜¯éå¸¸é‡è¦çš„ã€‚\nå“ˆå¸ŒæŒ‡é’ˆ Block ç»“æ„ä½“ä¸­çš„å“ˆå¸ŒæŒ‡é’ˆåœ¨åŒºå—é“¾ä¸­æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œå®ƒä¸ä»…èƒ½å¤Ÿè¿æ¥ä¸åŒçš„åŒºå—ï¼Œè¿˜èƒ½å¤Ÿå¯¹ Block è¿›è¡ŒéªŒè¯ï¼Œä¿è¯ Block ä¸­çš„æ•°æ®ä¸ä¼šè¢«å…¶ä»–æ¶æ„èŠ‚ç‚¹ç¯¡æ”¹ã€‚\né™¤äº†ç¬¬ä¸€ä¸ª Blockï¼Œæ¯ä¸€ä¸ª Block ä¸­çš„ prev_hash éƒ½æ˜¯å‰ä¸€ä¸ª Block çš„å“ˆå¸Œï¼Œå¦‚æœæŸä¸€ä¸ªèŠ‚ç‚¹æƒ³è¦ä¿®æ”¹ä¸»é“¾ä¸Š Block çš„äº¤æ˜“ï¼Œå°±ä¼šæ”¹å˜å½“å‰ Block çš„å“ˆå¸Œï¼Œåé¢çš„ Block å°±æ²¡æœ‰åŠæ³•é€šè¿‡ prev_hash æ‰¾åˆ°å‰é¢çš„é“¾ï¼Œæ‰€ä»¥å½“å‰èŠ‚ç‚¹ç¯¡æ”¹äº¤æ˜“çš„è¡Œä¸ºå°±ä¼šè¢«å…¶ä»–èŠ‚ç‚¹å‘ç°ã€‚\nMerkle Tree å¦ä¸€ä¸ªå­—æ®µ merkleroot å…¶å®å°±æ˜¯ä¸€ä¸ª Merkle æ ‘ çš„æ ¹èŠ‚ç‚¹ï¼Œå®ƒå…¶å®æ˜¯ä¸€ç§ä½¿ç”¨å“ˆå¸ŒæŒ‡é’ˆè¿æ¥çš„æ•°æ®ç»“æ„ï¼›è™½ç„¶ Merkle æ ‘æœ‰å¶èŠ‚ç‚¹å’Œéå¶èŠ‚ç‚¹ï¼Œä½†æ˜¯å®ƒåªæœ‰å¶èŠ‚ç‚¹ä¼šå­˜å‚¨æ•°æ®ï¼Œæ‰€æœ‰çš„éå¶ç»“ç‚¹éƒ½æ˜¯ç”¨äºéªŒè¯æ•°æ®å®Œæ•´æ€§çš„å“ˆå¸Œã€‚\næ¯ä¸€ä¸ª Block ä¸­çš„å…¨éƒ¨äº¤æ˜“éƒ½æ˜¯å­˜å‚¨åœ¨è¿™ä¸ª Merkle æ ‘ä¸­å¹¶å°† merkleroot ä¿å­˜åœ¨ Block çš„ç»“æ„ä½“ä¸­ï¼Œä¿è¯å½“å‰ Block ä¸­ä»»æ„äº¤æ˜“çš„ç¯¡æ”¹éƒ½èƒ½è¢«ç«‹åˆ»å‘ç°ã€‚\næ€»ç»“ prev_hash å’Œ merkleroot åˆ†åˆ«é€šè¿‡ã€æŒ‡é’ˆã€çš„æ–¹å¼ä¿è¯æ‰€æœ‰çš„ Block å’Œäº¤æ˜“éƒ½æ˜¯è¿æ¥èµ·æ¥çš„ï¼Œæœ€ç»ˆä¿è¯ Block å’Œäº¤æ˜“ä¸ä¼šè¢«æ¶æ„èŠ‚ç‚¹æˆ–æ”»å‡»è€…ç¯¡æ”¹ï¼Œå‡ ä¹å…¨éƒ¨çš„åŒºå—é“¾é¡¹ç›®éƒ½ä¼šä½¿ç”¨ç±»ä¼¼æ–¹å¼è¿æ¥ä¸åŒçš„ Block å’Œäº¤æ˜“ï¼Œè¿™å¯ä»¥è¯´æ˜¯åŒºå—é“¾é¡¹ç›®çš„åŸºç¡€è®¾æ–½å’Œæ ‡é…äº†ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/blockchain-schema/","summary":"åŒºå— æƒ³è¦äº†è§£åŒºå—åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæœ€ç®€å•å¿«æ·çš„æ–¹æ³•å°±æ˜¯åˆ†æå®ƒçš„æ•°æ®ç»“æ„ï¼Œä»¥ bitcoin ç§çš„åŒºå—ä¸ºä¾‹ï¼š\n{ ã€€\u0026#34;hash\u0026#34;:\u0026#34;00000000000000000018b0a6ae560fa33c469b6528bc9e0fb0c669319a186c33\u0026#34;, ã€€\u0026#34;confirmations\u0026#34;:1009, ã€€\u0026#34;strippedsize\u0026#34;:956228, ã€€\u0026#34;size\u0026#34;:1112639, ã€€\u0026#34;weight\u0026#34;:3981323, ã€€\u0026#34;height\u0026#34;:514095, ã€€\u0026#34;version\u0026#34;:536870912, ã€€\u0026#34;versionHex\u0026#34;:\u0026#34;20000000\u0026#34;, ã€€\u0026#34;merkleroot\u0026#34;:\u0026#34;5f8f8e053fd4c0c3175c10ac5189c15e6ba218909319850936fe54934dcbfeac\u0026#34;, ã€€\u0026#34;tx\u0026#34;:[ ã€€// ... ã€€], ã€€\u0026#34;time\u0026#34;:1521380124, ã€€\u0026#34;mediantime\u0026#34;:1521377506, ã€€\u0026#34;nonce\u0026#34;:3001236454, ã€€\u0026#34;bits\u0026#34;:\u0026#34;17514a49\u0026#34;, ã€€\u0026#34;difficulty\u0026#34;:3462542391191.563, ã€€\u0026#34;chainwork\u0026#34;:\u0026#34;0000000000000000000000000000000000000000014d2b41a340e60b72292430\u0026#34;, ã€€\u0026#34;previousblockhash\u0026#34;:\u0026#34;000000000000000000481ab128418847dc25db4dafec464baa5a33e66490990b\u0026#34;, ã€€\u0026#34;nextblockhash\u0026#34;:\u0026#34;0000000000000000000c74966205813839ad1c6d55d75f95c9c5f821db9c3510\u0026#34; } åœ¨è¿™ä¸ª Block çš„ç»“æ„ä½“ä¸­ï¼Œpreviousblockhash å’Œ merkleroot æ˜¯ä¸¤ä¸ªæœ€é‡è¦çš„å­—æ®µï¼›å‰è€…æ˜¯ä¸€ä¸ªå“ˆå¸ŒæŒ‡é’ˆï¼Œå®ƒå…¶å®æ˜¯å‰ä¸€ä¸ª Block çš„å“ˆå¸Œï¼Œé€šè¿‡ previousblockhash æˆ‘ä»¬èƒ½é€’å½’åœ°æ‰¾åˆ°å…¨éƒ¨çš„ Blockï¼Œä¹Ÿå°±æ˜¯æ•´æ¡ä¸»é“¾ï¼Œåè€…æ˜¯ä¸€ä¸ª Merkle æ ‘çš„æ ¹ï¼ŒMerkle æ ‘ä¸­åŒ…å«æ•´ä¸ª Block ä¸­çš„å…¨éƒ¨äº¤æ˜“ï¼Œé€šè¿‡ä¿å­˜ merklerootï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯å½“å‰ Block ä¸­ä»»æ„äº¤æ˜“éƒ½ä¸ä¼šè¢«ä¿®æ”¹ã€‚ Ethereum çš„åŒºå—é“¾æ¨¡å‹è™½ç„¶ä¸ Bitcoin æœ‰éå¸¸å¤§çš„ä¸åŒï¼Œä½†æ˜¯å®ƒçš„ Block ç»“æ„ä¸­ä¹Ÿæœ‰ç€ç±»ä¼¼çš„ä¿¡æ¯ï¼š","title":"Blockchain æ•°æ®ç»“æ„åˆ†æ"},{"content":"å‘¨æœ«çš„æ—¶å€™ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„å°é¡¹ç›®ï¼Œç”¨æ¥æŠ“å– web3 çš„æ–‡ç« ï¼Œç„¶åå­˜åˆ°æœ¬åœ°ã€‚æœ€åé€‰å–äº†å…¬å¸å¯¹å¤–çš„è½»æœåŠ¡ï¼šhttps://qingfuwu.cn/docs/nodejs/\næ•´é¡¹ç›®ç”¨åˆ°äº†ä¸¤ä¸ªåº“\n axiosï¼šç”¨æ¥åš http è¯·æ±‚ cheerioï¼šç”¨æ¥è§£æ html  è§‚å¯Ÿç›®æ ‡ç½‘é¡µçš„æ ¼å¼ æˆ‘ä»¬ä»¥å·´æ¯”ç‰¹ä¸ºä¾‹ï¼šhttps://www.8btc.com/web3.0ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œå®šä½åˆ°æ­£æ–‡çš„ divï¼Œå¯ä»¥å‘ç°æ˜¯ article-listã€‚\nå³é”®å¤åˆ¶ä¸€ä¸‹ selectorï¼Œç„¶ååœ¨ä»£ç ä¸­è¿™æ ·å®ç°å°±å¯ä»¥äº†ã€‚\næŠ“å–ç½‘é¡µä¿¡æ¯ const cheerio = require(\u0026#39;cheerio\u0026#39;).default const axios = require(\u0026#39;axios\u0026#39;).default  async function getData() {  const data = await (await axios.get(\u0026#39;https://www.8btc.com/web3.0\u0026#39;,  {  headers:  { \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\u0026#39; }  })).data  const $ = cheerio.load(data)   let list = []   $(\u0026#39;#news \u0026gt; div.articles-list\u0026#39;).find(\u0026#39;.article-info\u0026#39;).each(  (item, elem) =\u0026gt; {  const href = $(elem).find(\u0026#39;\u0026gt; a\u0026#39;).attr(\u0026#39;href\u0026#39;)  const title = $(elem).find(\u0026#39;\u0026gt; a \u0026gt; h3\u0026#39;).text()  const desc = $(elem).find(\u0026#39;\u0026gt; div \u0026gt; p\u0026#39;).text()   list.push({  title,  href: `https://www.8btc.com${href}`,  desc  })   }  )   console.log(list)  return list } ä¿å­˜æ•°æ®åˆ°è½»æœåŠ¡çš„æ•°æ®ç®¡ç†ä¸­ åœ¨è½»æœåŠ¡ä¸­åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œç„¶åæ–°å¢å‡ åˆ—ã€‚\nç„¶åè°ƒç”¨å†…ç½®çš„ inspirecloud.db è¿›è¡Œæ“ä½œæ•°æ®åº“ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯ï¼š\nasync function save(list) {  const table = inspirecloud.db.table(\u0026#39;web3\u0026#39;)    for (let item of list) {  const one = await table.where({ title: item.title }).findOne()  console.log(one)  if (one != null) {  console.log(`${item}å·²ç»å­˜åœ¨`)  continue  }   await table.save(item)  } } è®¾ç½®å®šæ—¶ä»»åŠ¡ æœ€åæˆ‘ä»¬æŠŠä»£ç è¡¥å……å®Œæ•´ï¼š\n/** * @param params è°ƒç”¨å‚æ•°ï¼ŒHTTP è¯·æ±‚ä¸‹ä¸ºè¯·æ±‚ä½“ * @param context è°ƒç”¨ä¸Šä¸‹æ–‡ * * @return å‡½æ•°çš„è¿”å›æ•°æ®ï¼ŒHTTP åœºæ™¯ä¸‹ä¼šä½œä¸º Response Body * * å®Œæ•´ä¿¡æ¯å¯å‚è€ƒï¼š * https://qingfuwu.cn/docs/cloud-function/basic.html */  const cheerio = require(\u0026#39;cheerio\u0026#39;).default const axios = require(\u0026#39;axios\u0026#39;).default  async function getData() {  const data = await (await axios.get(\u0026#39;https://www.8btc.com/web3.0\u0026#39;,  {  headers:  { \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\u0026#39; }  })).data  const $ = cheerio.load(data)   let list = []   $(\u0026#39;#news \u0026gt; div.articles-list\u0026#39;).find(\u0026#39;.article-info\u0026#39;).each(  (item, elem) =\u0026gt; {  const href = $(elem).find(\u0026#39;\u0026gt; a\u0026#39;).attr(\u0026#39;href\u0026#39;)  const title = $(elem).find(\u0026#39;\u0026gt; a \u0026gt; h3\u0026#39;).text()  const desc = $(elem).find(\u0026#39;\u0026gt; div \u0026gt; p\u0026#39;).text()   list.push({  title,  href: `https://www.8btc.com${href}`,  desc  })   }  )   console.log(list)  return list }    async function save(list) {  const table = inspirecloud.db.table(\u0026#39;web3\u0026#39;)    for (let item of list) {  const one = await table.where({ title: item.title }).findOne()  console.log(one)  if (one != null) {  console.log(`${item}å·²ç»å­˜åœ¨`)  continue  }   await table.save(item)  } }   module.exports = async function (params, context) {  console.log(params);  const data = await getData()   await save(data)   return {  test: \u0026#34;Hello World!\u0026#34;,  }; } åœ¨å·¦ä¾§çš„å®šæ—¶ä»»åŠ¡ä¸­å»åˆ›å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©æ‰§è¡Œä¸€æ¬¡å³å¯ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/how-to-crawl-a-web-in-nodejs/","summary":"å‘¨æœ«çš„æ—¶å€™ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„å°é¡¹ç›®ï¼Œç”¨æ¥æŠ“å– web3 çš„æ–‡ç« ï¼Œç„¶åå­˜åˆ°æœ¬åœ°ã€‚æœ€åé€‰å–äº†å…¬å¸å¯¹å¤–çš„è½»æœåŠ¡ï¼šhttps://qingfuwu.cn/docs/nodejs/\næ•´é¡¹ç›®ç”¨åˆ°äº†ä¸¤ä¸ªåº“\n axiosï¼šç”¨æ¥åš http è¯·æ±‚ cheerioï¼šç”¨æ¥è§£æ html  è§‚å¯Ÿç›®æ ‡ç½‘é¡µçš„æ ¼å¼ æˆ‘ä»¬ä»¥å·´æ¯”ç‰¹ä¸ºä¾‹ï¼šhttps://www.8btc.com/web3.0ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œå®šä½åˆ°æ­£æ–‡çš„ divï¼Œå¯ä»¥å‘ç°æ˜¯ article-listã€‚\nå³é”®å¤åˆ¶ä¸€ä¸‹ selectorï¼Œç„¶ååœ¨ä»£ç ä¸­è¿™æ ·å®ç°å°±å¯ä»¥äº†ã€‚\næŠ“å–ç½‘é¡µä¿¡æ¯ const cheerio = require(\u0026#39;cheerio\u0026#39;).default const axios = require(\u0026#39;axios\u0026#39;).default  async function getData() {  const data = await (await axios.get(\u0026#39;https://www.8btc.com/web3.0\u0026#39;,  {  headers:  { \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\u0026#39; }  })).data  const $ = cheerio.load(data)   let list = []   $(\u0026#39;#news \u0026gt; div.","title":"è½»æœåŠ¡ nodejs åŠ©åŠ›çˆ¬è™« web3"},{"content":"This roadmap defines the things that we want to have in the language and plan to do.\nLanguage Stuff that has to do with the language syntax, semantic and runtime.\nConcurrency Finalize multithreading support, so fibers can run on multiple threads.\nWindows support Finalize support for Windows platform. The compiler already works, but some stdlib features like concurrency support are still missing. Ongoing efforts on #5430.\nType system review Make a review and possible formalisation of Crystal\u0026rsquo;s type system, with a strong emphasis on generics, type restrictions and the meta-model in general.\nMacros review Review the macros intermediate language, to allow for more expressiveness and to provide the compilers with hints with regards to reusing previous runs for incremental compilation.\nExceptions review Review the exception layout and hierarchy to allow developers to catch more specific errors, and get more information on what exactly went wrong via variables inside the exception.\nIncremental compilation Allow the compiler to re-use information from previous compilations, by defining dependencies between files/modules and only reprocessing changed ones. This feature also opens the door for better IDE integration and tooling.\nStandard library Implement the missing or review the existing following modules from the standard library:\n TLS library File, FileUtils HTTP/2 #2125 XML Test mocks  Tools Improvements or developments on either built-in or external tools for the language.\nDocumentation Improve not only the documentation itself, but the docs generator as well. Add support for links between documents from different packages, alternate READMEs for the docs, better searching options, and easier docs hosting options.\nShards Improve Crystal\u0026rsquo;s dependency manager for better dependencies version resolution, provide further metadata on the project, support registering executable tasks, better handling of transitive dependencies, and more. Implement centralised discovery of Crystal shards, sorted by category, and including support for the latest versions of the language, as reported by a CI.\nPlayground Improve Crystal\u0026rsquo;s playground by adding shards\u0026rsquo; workbooks to explore the usage of the project\u0026rsquo;s registered dependencies, and other features to discuss.\nIDE support Make use of Crystal\u0026rsquo;s compile-time type information to develop better IDE tools, such as in-place documentation, autocomplete or refactoring tools.\n","permalink":"https://zhenfeng-zhu.github.io/post/crystal_roadmap/","summary":"This roadmap defines the things that we want to have in the language and plan to do.\nLanguage Stuff that has to do with the language syntax, semantic and runtime.\nConcurrency Finalize multithreading support, so fibers can run on multiple threads.\nWindows support Finalize support for Windows platform. The compiler already works, but some stdlib features like concurrency support are still missing. Ongoing efforts on #5430.\nType system review Make a review and possible formalisation of Crystal\u0026rsquo;s type system, with a strong emphasis on generics, type restrictions and the meta-model in general.","title":"Crystal Roadmap"},{"content":"Crystal 1.2.0 å‘å¸ƒ æˆ‘ä»¬æ­£åœ¨å‘å¸ƒä¸€ä¸ªåŒ…å«å¤šä¸ªé”™è¯¯ä¿®å¤å’Œæ”¹è¿›çš„æ–°ç‰ˆæœ¬ã€‚ä¸‹é¢æˆ‘ä»¬åˆ—å‡ºäº†æœ€é‡è¦æˆ–æœ€æœ‰è¶£çš„å˜åŒ–ï¼Œä½†æ²¡æœ‰æåˆ°å‡ ä¸ªé”™è¯¯ä¿®æ­£ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·è®¿é—®å‘è¡Œè¯´æ˜ã€‚é‡å¤§æ›´æ”¹æ ‡æœ‰ âš ï¸ã€‚\nç»Ÿè®¡æ•°æ® åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬åŒ…å«äº†è‡ª 1.1.1 ç‰ˆæœ¬ä»¥æ¥ 32 ä½è´¡çŒ®è€…çš„ 181 ä¸ª PRã€‚æˆ‘ä»¬æ„Ÿè°¢ä¸ºæ”¹è¿›è¯­è¨€åŠå…¶æ ‡å‡†åº“æ‰€åšçš„æ‰€æœ‰åŠªåŠ›ï¼â¤ï¸\nå¹³å°æ”¯æŒ æ­£å¦‚åœ¨ 1.2 çš„ä¸Šä¸€ç¯‡åšå®¢æ–‡ç« ä¸­æåˆ°çš„ï¼Œæˆ‘ä»¬å†³å®šé™ä½å¯¹ 32 ä½ x86 æ¶æ„çš„æ”¯æŒã€‚ä½†æ˜¯æˆ‘ä»¬ç¡®å®æœ‰ä¸€äº›å¥½æ¶ˆæ¯è¦åˆ†äº«ï¼\næˆ‘ä»¬åœ¨åŸç”Ÿ Windows æ”¯æŒæ–¹é¢å–å¾—äº†è¿›å±•ï¼Œåœ¨æ­¤ç‰ˆæœ¬ä¸­åŒ…æ‹¬å¥—æ¥å­—å®ç°ï¼ˆ#11205ã€#11137ã€#10605ã€#10605ï¼‰ã€‚\nä¸ Windows ç›¸å…³ï¼Œä¹Ÿä¸ ARM64 æ¶æ„ç›¸å…³ï¼Œæˆ‘ä»¬ä¿®å¤äº†ä¸€ä¸ªé‡è¦çš„ä»£ç ç”Ÿæˆé”™è¯¯ã€‚æˆ‘ä»¬ç°åœ¨å¤„äºå°† aarch64 å¹³å°æå‡åˆ° Tier 1 çš„æ¡ä»¶ï¼Œé¢„è®¡å¾ˆå¿«å°±ä¼šæ”¯æŒã€‚è¿™ä¹Ÿä¸å¸¦æœ‰ M1 èŠ¯ç‰‡ç»„çš„ macOS ç›¸å…³ï¼šä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œæˆ‘ä»¬åŒ…å«ä¸€ä¸ªé€‚ç”¨äº x86 å’Œ M1 mac çš„é€šç”¨ macOS åŒ…ã€‚\næˆ‘ä»¬å‘ç° Windows å’Œ M1 çš„ mac ä¸Šå‡ºç°çš„ä¸¤ä¸ªé”™è¯¯æ¥è‡ª LLVM 11 å’Œ 12ã€‚æˆ‘ä»¬é¢„è®¡è¯¥ä¿®å¤å°†éšæœ€è¿‘å‘å¸ƒçš„ LLVM 13 ä¸€èµ·æä¾›ã€‚Crystal 1.2.0 ä¸ LLVM 12 å…¼å®¹ï¼Œå°½ç®¡æˆ‘ä»¬å»ºè®®ä¸è¦ä½¿ç”¨ LLVM 11 å’Œ 12.\nè¯­è¨€å˜åŒ– ç°åœ¨å¯ä»¥å°†æ³›å‹ç±»çš„å­ç±»åˆ†é…ç»™çˆ¶ç±»çš„å®ä¾‹ï¼š\nclass Foo(T); end  class Bar(T) \u0026lt; Foo(T); end  x = Foo x = Bar ä¹Ÿä¸æ³›å‹ç±»æœ‰å…³ï¼Œæœ‰äº›æƒ…å†µä¸‹ç¼–è¯‘å™¨æ²¡æœ‰æ­£ç¡®æ›¿æ¢æ³›å‹å‚æ•°ï¼ˆ#11166ã€#11067ã€‚\nä¸ºæ”¯æŒ ThinLTO æ±‡ç¼–è¢«ä¸¢å¼ƒï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰åœ¨ crystal 0.25 ä¸‹å¯ç”¨ã€‚\nå® å¯ä»¥åœ¨ for å¾ªç¯ä¸­æ·»åŠ ä¸‹åˆ’çº¿æ¥å¿½ç•¥å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œmap çš„ key è¢«å¿½ç•¥ï¼š\n{% for _, v, i in {1 =\u0026gt; 2, 3 =\u0026gt; 4, 5 =\u0026gt; 6} %}  p {{v + i}} {% end %} æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–°çš„ file_exists?å®æ–¹æ³•æ¥æ£€æŸ¥æ–‡ä»¶çš„å­˜åœ¨ï¼ˆ#10540ï¼‰ï¼Œ#is_a?ç°åœ¨å¯ä»¥è¯†åˆ« AST èŠ‚ç‚¹å±‚æ¬¡ç»“æ„ï¼ˆ#11062ï¼‰ã€‚\næ ‡å‡†åº“ âš ï¸ æˆ‘ä»¬æ­£åœ¨å»¶ç»­ 1.1.0 ç‰ˆæœ¬å¼€å§‹çš„è¶‹åŠ¿ï¼Œå¸®åŠ©è·å¾—æ›´å¥½çš„é”™è¯¯ä¿¡æ¯å’Œæ–‡æ¡£ï¼šå¯¹ä¸€äº›æ–¹æ³•ä½¿ç”¨é¢„æœŸç±»å‹è¿›è¡Œäº†æ³¨é‡Šã€‚æ·»åŠ æ³¨é‡Šå¯èƒ½ä¼šåœ¨ç‰¹å®šæƒ…å†µä¸‹ç ´åç°æœ‰ä»£ç ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨é‡åˆ°è¿™ç§æƒ…å†µï¼Œè¯·ç«‹å³å‘Šè¯‰æˆ‘ä»¬ã€‚\næ•°å€¼ç±»å‹ æ•°å€¼ç±»å‹çš„ä¸»è¦æ”¹è¿›æ˜¯æ”¯æŒ 128 ä½æ•´æ•°ï¼ˆ#11206 å’Œ#11245ï¼‰æ‰€é‡‡å–çš„æ­¥éª¤ã€‚\nä½œä¸ºå¾®å°çš„æ”¹è¿›ï¼Œç°åœ¨å¯ä»¥è°ƒæ•´ Int#to_s è¾“å‡ºçš„ç²¾åº¦ï¼›é€šè¿‡æ–°æ–¹æ³•#next_float å’Œ#prev_float è¿­ä»£å¯è¡¨ç¤ºçš„æµ®ç‚¹æ•°é›†ï¼›å¯¹ BigDecimal ä½¿ç”¨è´ŸæŒ‡æ•°ï¼›å¹¶è®¡ç®—ä¸€ä¸ªæ•°çš„æ•´æ•°å¹³æ–¹æ ¹ã€‚\né›†åˆ å¯å˜é›†åˆç°åœ¨åŒ…å«ä¸€ä¸ª Indexable::Mutable(T)æ¨¡å—ï¼Œå®ƒæå¤§åœ°æ‰©å±•äº†å¯¹æŸäº›é›†åˆï¼ˆä¾‹å¦‚ BitArray å’Œ ï¼‰çš„æ“ä½œé›† Dequeã€‚ä»¥ä¸‹ç°åœ¨æœ‰æ•ˆï¼š\nba = BitArray.new(10) # ba is BitArray[0000000000] ba[0] = true # ba is BitArray[1000000000] ba.rotate!(-1) # ba is BitArray[0100000000] æ­¤å¤–ï¼ŒIndexable::Mutable(T)æ‰©å±•ä¸ºåŒ…æ‹¬ç¨³å®šå’Œä¸ç¨³å®šçš„æ’åºæ–¹æ³•ï¼ˆ#11254ã€#11029ã€#10163ï¼‰ã€‚é»˜è®¤ sort æ“ä½œç°åœ¨è°ƒç”¨ç¨³å®šç®—æ³•ã€‚\nâš ï¸ ä½œä¸ºä¸€é¡¹é‡å¤§æ›´æ”¹ï¼ŒArray#product å·²å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ–°çš„æ³›å‹å’Œæ›´å¥½å‘½åçš„ Indexable#cartesian_product.\nå¦å¤–ä¸¤ä¸ªå€¼å¾—ä¸€æçš„è´¡çŒ®ï¼šå¯æšä¸¾å¯¹è±¡é…å¤‡äº†å°†å®ƒä»¬ä¸ç»™å®šè°“è¯ï¼ˆEnumerable#tally_byï¼‰ç›¸åŒ¹é…çš„æ–¹æ³•ï¼›å’Œæ–¹æ³• Array#transpose, Enumerable#reject, å’Œ Enumerable#to_h ç°åœ¨ä½¿ç”¨å…ƒç»„ã€‚\næ–‡ä»¶ âš ï¸ è¯¥æ–¹æ³• IO#write_utf8 å·²è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ›´å…·æè¿°æ€§çš„ name IO#write_stringï¼Œå› ä¸ºæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥ç¼–å†™å„ç§ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå…·ä½“å–å†³äº IO çš„é…ç½®ã€‚æˆ‘ä»¬è¿˜ä¿®å¤äº†ä¸€äº›ä¸ä½¿ç”¨ IO#write è€Œä¸æ˜¯ IO#write_string å°†æ–‡æœ¬é™„åŠ åˆ° IO ç›¸å…³çš„é”™è¯¯ã€‚\nç½‘ç»œ âš ï¸ ä¸ºäº†æé«˜ STDLIB çš„å®‰å…¨æ€§ï¼ŒURI.encode è¢«å¼ƒç”¨ URI.encode_path å’Œ URI.encode_path_segment ã€‚\nç°åœ¨æ”¯æŒä» websockets ( #10854 ) ä¸­çš„ URI è·å–åŸºæœ¬èº«ä»½éªŒè¯ï¼Œå¹¶æ­£ç¡®å¤„ç† cookie ( #10564 )çš„ max-age å’Œ expires ã€‚\næ–‡æœ¬ âš ï¸String#unsafe_byte_at å·²è¢«å¼ƒç”¨ï¼Œå› ä¸º String å·²ç»æœ‰ä¸€ä¸ª#to_unsafe æ–¹æ³•ã€‚\nCrystal ç°åœ¨æ”¯æŒ Unicode 14.0.0ã€‚\nåºåˆ—åŒ– æœ‰ä¸€ç§æ–°æ–¹æ³• XML::Node#namespace_definition å¯ä»¥è·å–èŠ‚ç‚¹çš„æ˜ç¡®å®šä¹‰çš„ XML å‘½åç©ºé—´ï¼ŒURI ç°åœ¨å¯ä»¥å°† URI åºåˆ—åŒ–ä¸º JSON å’Œ YAMLã€‚\nå·¥å…·ï¼šæ–°çš„æ–‡æ¡£ç”Ÿæˆå™¨ API æ–‡æ¡£ç°åœ¨ä½¿ç”¨ markd æ¥å‘ˆç° Markdown ( #11040 )ã€‚è¿™å°±è§£å†³äº†å†…éƒ¨æ¸²æŸ“å™¨å®ç°å¸¦æ¥çš„ç¼ºç‚¹ã€‚\nåŸºç¡€è®¾æ–½ ç°åœ¨å¯ä»¥ make install äº†ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/crystal1.2/","summary":"Crystal 1.2.0 å‘å¸ƒ æˆ‘ä»¬æ­£åœ¨å‘å¸ƒä¸€ä¸ªåŒ…å«å¤šä¸ªé”™è¯¯ä¿®å¤å’Œæ”¹è¿›çš„æ–°ç‰ˆæœ¬ã€‚ä¸‹é¢æˆ‘ä»¬åˆ—å‡ºäº†æœ€é‡è¦æˆ–æœ€æœ‰è¶£çš„å˜åŒ–ï¼Œä½†æ²¡æœ‰æåˆ°å‡ ä¸ªé”™è¯¯ä¿®æ­£ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·è®¿é—®å‘è¡Œè¯´æ˜ã€‚é‡å¤§æ›´æ”¹æ ‡æœ‰ âš ï¸ã€‚\nç»Ÿè®¡æ•°æ® åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬åŒ…å«äº†è‡ª 1.1.1 ç‰ˆæœ¬ä»¥æ¥ 32 ä½è´¡çŒ®è€…çš„ 181 ä¸ª PRã€‚æˆ‘ä»¬æ„Ÿè°¢ä¸ºæ”¹è¿›è¯­è¨€åŠå…¶æ ‡å‡†åº“æ‰€åšçš„æ‰€æœ‰åŠªåŠ›ï¼â¤ï¸\nå¹³å°æ”¯æŒ æ­£å¦‚åœ¨ 1.2 çš„ä¸Šä¸€ç¯‡åšå®¢æ–‡ç« ä¸­æåˆ°çš„ï¼Œæˆ‘ä»¬å†³å®šé™ä½å¯¹ 32 ä½ x86 æ¶æ„çš„æ”¯æŒã€‚ä½†æ˜¯æˆ‘ä»¬ç¡®å®æœ‰ä¸€äº›å¥½æ¶ˆæ¯è¦åˆ†äº«ï¼\næˆ‘ä»¬åœ¨åŸç”Ÿ Windows æ”¯æŒæ–¹é¢å–å¾—äº†è¿›å±•ï¼Œåœ¨æ­¤ç‰ˆæœ¬ä¸­åŒ…æ‹¬å¥—æ¥å­—å®ç°ï¼ˆ#11205ã€#11137ã€#10605ã€#10605ï¼‰ã€‚\nä¸ Windows ç›¸å…³ï¼Œä¹Ÿä¸ ARM64 æ¶æ„ç›¸å…³ï¼Œæˆ‘ä»¬ä¿®å¤äº†ä¸€ä¸ªé‡è¦çš„ä»£ç ç”Ÿæˆé”™è¯¯ã€‚æˆ‘ä»¬ç°åœ¨å¤„äºå°† aarch64 å¹³å°æå‡åˆ° Tier 1 çš„æ¡ä»¶ï¼Œé¢„è®¡å¾ˆå¿«å°±ä¼šæ”¯æŒã€‚è¿™ä¹Ÿä¸å¸¦æœ‰ M1 èŠ¯ç‰‡ç»„çš„ macOS ç›¸å…³ï¼šä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œæˆ‘ä»¬åŒ…å«ä¸€ä¸ªé€‚ç”¨äº x86 å’Œ M1 mac çš„é€šç”¨ macOS åŒ…ã€‚\næˆ‘ä»¬å‘ç° Windows å’Œ M1 çš„ mac ä¸Šå‡ºç°çš„ä¸¤ä¸ªé”™è¯¯æ¥è‡ª LLVM 11 å’Œ 12ã€‚æˆ‘ä»¬é¢„è®¡è¯¥ä¿®å¤å°†éšæœ€è¿‘å‘å¸ƒçš„ LLVM 13 ä¸€èµ·æä¾›ã€‚Crystal 1.2.0 ä¸ LLVM 12 å…¼å®¹ï¼Œå°½ç®¡æˆ‘ä»¬å»ºè®®ä¸è¦ä½¿ç”¨ LLVM 11 å’Œ 12.\nè¯­è¨€å˜åŒ– ç°åœ¨å¯ä»¥å°†æ³›å‹ç±»çš„å­ç±»åˆ†é…ç»™çˆ¶ç±»çš„å®ä¾‹ï¼š","title":"Crystal 1.2 ç‰ˆæœ¬æ›´æ–°è¯´æ˜"},{"content":"å¯è§‚æµ‹æ€§ å¯è§‚æµ‹æ€§ â‰  ç›‘æ§   æ ¸å¿ƒä¸åŒ\n ç›‘æ§ä»¥è¿ç»´ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡å„é¡¹æŒ‡æ ‡æ¥å®šä¹‰æ•´ä½“çš„è¿è¡ŒçŠ¶æ€ã€å¤±è´¥æƒ…å†µã€‚ è§‚æµ‹åˆ™ä»¥å¼€å‘ä¸ºæ ¸å¿ƒï¼Œé™¤äº†ç›‘æ§ï¼Œå®ƒè¿˜ä¼šå¯¹ç³»ç»Ÿè¿›è¡Œåˆ†æã€‚    ç»´åº¦ä¸åŒ\n ç›‘æ§æ˜¯ä»å¤–å›´çš„è§’åº¦ï¼Œé€šè¿‡å„ç§æŒ‡æ ‡ï¼ˆæœºå™¨ CPUã€è´Ÿè½½ã€ç½‘ç»œç­‰ç»´åº¦ï¼‰æ¥åˆ¤æ–­æ•´ä¸ªç³»ç»Ÿçš„æ‰§è¡Œæƒ…å†µã€‚ å¯è§‚æµ‹æ€§åˆ™åœ¨ä¸Šè¿°å¤–éƒ¨æŒ‡æ ‡åŸºç¡€ä¸Šï¼Œä»¥åº”ç”¨å†…çš„å„ä¸ªç»´åº¦æ¥å±•å¼€æ¨æµ‹ï¼Œé€šè¿‡äºŒè€…çš„æ•°æ®ç»“åˆæ¥çœŸå®çš„ååº”åº”ç”¨çš„è¿è¡Œæƒ…å†µã€‚    å±•ç°çš„ä¿¡æ¯ä¸åŒ\n æœ‰äº›ç³»ç»Ÿåœ¨æ­£å¸¸è¿è¡Œæ—¶ååˆ†ç¨³å®šï¼Œä½†æ˜¯ä¸€åˆ°é«˜å¹¶å‘å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæ­¤æ—¶ç›‘æ§åªèƒ½æ±‡æŠ¥é—®é¢˜å‡ºç°çš„çŠ¶å†µï¼Œè€Œå¯è§‚æµ‹æ€§å¯ä»¥å¾ˆå¥½çš„é€šè¿‡å›¾å½¢åŒ–çš„æ–¹å¼å‘ŠçŸ¥æˆ‘ä»¬é—®é¢˜çš„åŸå› ï¼Œä¸ç”¨æˆ‘ä»¬é€šè¿‡ç»éªŒæ¥çŒœæµ‹ã€‚    å¯è§‚æµ‹æ€§æ‰“ç ´äº†å¼€å‘å’Œè¿ç»´çš„åŸæœ‰é—®é¢˜è§£å†³æ–¹å¼ï¼Œä¸å†æ˜¯è¿ç»´å‘ç°é—®é¢˜å¼€å‘è§£å†³ï¼Œè€Œæ˜¯ä»¥å¼€å‘ä¸ºä¸­å¿ƒã€‚\nç›‘æ§æ•°æ®æ¥æº   ç«¯ä¸Šè®¿é—®\n ç”¨æˆ·ä½“éªŒç›‘æ§  web é¡µé¢çš„ç™½å±æ—¶é—´ dom å…ƒç´ /èµ„æºåŠ è½½è€—æ—¶ æ–‡æ¡£ç½‘ç»œè€—æ—¶ app å¡é¡¿ç‡ å´©æºƒç‡ çƒ­å¯åŠ¨åŠ è½½æ—¶é•¿   æ—¥å¿— ç«¯åˆ°ç«¯  ç”¨æˆ·ç«¯åˆ°åç«¯çš„è¯·æ±‚çŠ¶å†µï¼Œè®¿é—®é‡ã€æˆåŠŸç‡ã€å“åº”æ—¶é—´ç­‰ã€‚ è¿˜éœ€è¦ç«¯ä¸Šæ‰€å¤„çš„åœ°åŒºã€ç½‘ç»œç¯å¢ƒã€å“åº”çŠ¶æ€ç    å¯ç”¨ç‡  è®¿é—®æ˜¯å¦å¯ç”¨ã€å“åº”è€—æ—¶é•¿çŸ­çš„ä¸€äº›æŒ‡æ ‡å’Œ cdnã€dns ç­‰å…¬å…±èµ„æºæœ‰å…³ç³»ã€‚      åº”ç”¨ç¨‹åº\n æ‰§è¡Œæƒ…å†µ èµ„æºæ¶ˆè€— vm æŒ‡æ ‡ç›‘æ§ å®¹é‡ æœåŠ¡å…³ç³» åº”ç”¨æ—¥å¿— å¥åº·æƒ…å†µ    ä¸šåŠ¡ç›‘æ§\n ä¸šåŠ¡æŒ‡æ ‡èƒ½å¾ˆå¥½çš„ä½“ç°å‡ºç³»ç»Ÿæ˜¯å¦ç¨³å®šï¼Œä»»ä½•ç³»ç»Ÿå¦‚æœå‡ºç°äº†é—®é¢˜ï¼Œæœ€å…ˆå—å½±å“çš„è‚¯å®šæ˜¯ä¸šåŠ¡æŒ‡æ ‡ã€‚    åŸºç¡€è®¾æ–½\n èµ„æºåˆ©ç”¨  è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œåƒ IO ä½¿ç”¨ç‡ã€cpu åˆ©ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€ç£ç›˜ä½¿ç”¨ç‡ã€ç½‘ç»œä½¿ç”¨ç‡ç­‰ã€‚   é€šä¿¡æƒ…å†µ  ä¸»æœºä¹‹é—´çš„ç½‘ç»œæƒ…å†µã€‚      å¯è§‚æµ‹æ€§çš„æ ¸å¿ƒæ¦‚å¿µ - æ—¥å¿—ï¼ˆLoggingï¼‰ æ—¥å¿—çš„ä¸€èˆ¬æè¿°æ˜¯ï¼šåœ¨ç‰¹å®šæ—¶é—´å‘ç”Ÿçš„äº‹ä»¶ï¼Œè¢«ä»¥ç»“æ„åŒ–çš„å½¢å¼è®°å½•å¹¶äº§ç”Ÿçš„æ–‡æœ¬æ•°æ®ã€‚\n æ—¥å¿—çš„åŠŸèƒ½   ä¾¿äºè°ƒè¯• å¿«é€Ÿå®šä½é—®é¢˜ é«˜åº¦å®šåˆ¶åŒ– ä¿¡æ¯åŸ‹ç‚¹ è¿½è¸ªæ•°æ®å˜åŒ– æ•°æ®åˆ†æ  æ—¥å¿—çº§åˆ«   debug info warning error  æ—¥å¿—å¸¸è§æ¥æº   ç»ˆç«¯ ç½‘å…³  è®¿é—®æ—¥å¿—ï¼šå½“æœåŠ¡åˆ°è¾¾ç½‘å…³ä¹‹åï¼Œå°±ä¼šå½¢æˆä¸€æ¡æ—¥å¿—ã€‚ é”™è¯¯æ—¥å¿—ï¼šç½‘å…³æ‰§è¡Œæ—¶å‡ºäº†é—®é¢˜   åº”ç”¨å±‚  å®¹å™¨å¯åŠ¨æ—¥å¿— è¯·æ±‚è®¿é—®æ—¥å¿— æ™®é€šæ—¥å¿—   ç»„ä»¶å±‚  mysql å’Œ redis ç­‰ åº”ç”¨è¿è¡Œæ—¶çš„æ—¥å¿— æ…¢æŸ¥è¯¢ å®¡è®¡   åŸºç¡€å±‚  åå‘è¿ç»´çš„æ—¥å¿— ç³»ç»Ÿæ—¥å¿—å’Œ linux æ“ä½œæ—¥å¿—ç­‰    å¦‚ä½•å†™å¥½æ—¥å¿—  å¯»æ‰¾ç¼–å†™ä½ç½® =\u0026gt; ç¼–å†™æ—¥å¿— =\u0026gt; ä¸Šçº¿ =\u0026gt; æ—¥å¿— review =\u0026gt; å®šæœŸä¿®æ”¹\n  é€‰æ‹©ä¸€ä¸ªå¸¸ç”¨çš„æ—¥å¿—æ¡†æ¶\n  ç¼–å†™æ–¹å¼ä»å¦‚ä¸‹å‡ ä¸ªæ–¹é¢è€ƒè™‘\n æ—¥å¿—å¼€å‘æ—¶  æ—¥å¿—ç¼–å†™ä½ç½® å†™å…¥æ€§èƒ½ å ä½ç¬¦ å¯è¯»æ€§ å…³é”®ä¿¡æ¯éšè”½   å¼€å‘å®Œæˆå  å‡å°‘ä»£ç ä½ç½®ä¿¡æ¯çš„è¾“å‡º æ–‡ä»¶åˆ†ç±» æ—¥å¿— review      ç¼–å†™ä½ç½®\n  å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„ç¼–å†™æ—¥å¿—çš„ä½ç½®ï¼š\n ç³»ç»Ÿ/åº”ç”¨å¯åŠ¨å’Œå‚æ•°å˜æ›´ï¼šå½“ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œå°†ç›¸å…³çš„å‚æ•°ä¿¡æ¯è¿›è¡Œæ‰“å° å…³é”®æ“ä½œèŠ‚ç‚¹ å¤§å‹ä»»åŠ¡è¿›åº¦ä¸ŠæŠ¥ï¼šé˜²æ­¢å› ä¸ºé•¿æ—¶é—´æ²¡æœ‰å¤„ç†è€Œæ— æ³•å¾—çŸ¥ç¨‹åºçš„æ‰§è¡ŒçŠ¶æ€ å¼‚å¸¸   å†™å…¥æ€§èƒ½  æ—¥å¿—çš„å†™å…¥æ€§èƒ½å—å¦‚ä¸‹å‡ ä¸ªå› ç´ å½±å“ï¼š\n æ—¥å¿—ç¼–å†™ä½ç½®ï¼Œå¦‚æœæ˜¯åœ¨ for å¾ªç¯ä¸­æ‰“å°ï¼Œéœ€è¦è€ƒè™‘ä¸€ä¸‹æ˜¯å¦æœ‰å¿…è¦ æ—¥å¿—æ•°é‡ï¼šå¤§é‡çš„å†™æ—¥å¿—è´¨é‡ä¼šé™ä½ï¼Œè€Œä¸”è¿‡å¤šæ—¥å¿—ä¹Ÿä¼šå½±å“ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ æ—¥å¿—ç¼–å†™ç­‰çº§ï¼šä¸æ­£ç¡®çš„ç­‰çº§ï¼Œä¼šè®©æˆ‘ä»¬æŸ¥é—®é¢˜æ—¶é—´å¢åŠ  æ—¥å¿—çš„è¾“å‡ºçº§åˆ«ï¼šçº¿ä¸Šä¸å»ºè®® debug æ¨¡å¼ã€‚ æ— ç”¨è¾“å‡ºå‚æ•°ï¼šå¤§å­—æ®µã€æ— ç”¨å­—æ®µå¯ä»¥ä¸ç”¨è¾“å‡º  å¥½çš„æ—¥å¿—ä¸€å®šæ˜¯ä¾¿äºä½ å»æ’æŸ¥é—®é¢˜çš„ï¼Œåœ¨ç¼–å†™æ—¥å¿—çš„æ—¶å€™ä¸€å®šè¦æ€è€ƒè¿™ä¸ªæ—¥å¿—å¯ä»¥å¸®ä½ åšä»€ä¹ˆã€‚\n å ä½ç¬¦  æ—¥å¿—çš„ç¼–å†™å°½å¯èƒ½çš„é€‰æ‹©åŸºäºå ä½ç¬¦çš„ç¼–å†™æ–¹å¼ï¼š\n èŠ‚çº¦æ€§èƒ½ï¼Œåœ¨ç”Ÿæˆé«˜çº§åˆ«çš„æ—¥å¿—æ—¶ï¼Œä½çº§åˆ«çš„æ—¥å¿—ä¼šä¸åœçš„å åŠ å­—ç¬¦ä¸²è€Œå ç”¨è¿‡å¤šçš„å†…å­˜å’Œ CPUã€‚ ä¾¿äºç¼–å†™ã€‚å…ˆç¡®å®šæ—¥å¿—æ‰€è¦è¡¨è¾¾çš„å†…å®¹ï¼Œå†ç¡®è®¤æ‰€éœ€è¦ç¼–å†™çš„å‚æ•°ï¼Œè¿™æ ·å†™æ—¥å¿—çš„æ—¶å€™ç›®çš„ä¼šæ›´åŠ æ˜ç¡®ã€‚ ä¾¿äºæŸ¥çœ‹ã€‚æ›´æ–¹ä¾¿çš„æŸ¥çœ‹æ—¥å¿—æƒ³è¡¨è¾¾çš„æ„æ€ï¼Œè€Œä¸è¢«å‚æ•°æ‰“ä¹±ã€‚   å¯è¯»æ€§  ä¸€äº›å®¹æ˜“é—æ¼çš„ä¿¡æ¯ï¼Œä¹‹åè¦åŠ ä¸Šï¼š\n ä¼šè¯æ ‡è¯†ï¼šå½“å‰æ“ä½œçš„ç”¨æˆ·å’Œå½“å‰è¯·æ±‚ç›¸å…³çš„ä¿¡æ¯ è¯·æ±‚æ ‡è¯†ï¼šæ¯ä¸ªè¯·æ±‚éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œä¸€èˆ¬ä¼šé…åˆé“¾è·¯è¿½è¸ªç³»ç»Ÿä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥è·¨æœåŠ¡è¿½è¸ª å‚æ•°ä¿¡æ¯ å‘ç”Ÿæ•°æ®çš„ç»“æœ   å…³é”®ä¿¡æ¯éšè”½  æŠŠä¸€äº›å…³é”®çš„ä¿¡æ¯æ¨¡ç³Šæ‰\n å‡å°‘ä»£ç ä½ç½®ä¿¡æ¯çš„è¾“å‡º  æå‡æ•ˆç‡\n æ–‡ä»¶åˆ†ç±»  æŠŠä¸åŒä¸šåŠ¡é€»è¾‘æŒ‰ä¸åŒçš„æ–‡ä»¶æ¥åˆ†ç±»ï¼Œä¸ä¼šè¢«å¹²æ‰°\n æ—¥å¿— review  æ¯ä¸€æ¬¡åŠŸèƒ½ä¸Šçº¿æ—¶ï¼Œå‡ºäº†å¯¹åŠŸèƒ½è¿›è¡Œå›æ‰«ï¼Œä¹Ÿè¦ç¡®è®¤æ—¥å¿—çš„å†…å®¹è¾“å‡ºæƒ…å†µæ˜¯ä¸æ˜¯ç¬¦åˆé¢„æœŸ\n  æ—¥å¿—ç®¡ç†\n  æ—¥å¿—æ ¼å¼\n   ç³»ç»Ÿä¹‹é—´çš„æ ¼å¼åº”è¯¥ä¿æŒä¸€è‡´ ä¸ç¼–å†™å¤šè¡Œæ—¥å¿—å†…å®¹ ä¸é€‚ç”¨æ—¥å¿—ä¸­çš„å¸¸è§å†…å®¹æ¥åˆ†å‰²ï¼Œæ¯”å¦‚ç©ºæ ¼ç­‰ã€‚   æ—¥å¿—å½’æ¡£  ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯æŒ‰å°æ—¶æˆ–è€…æ—¥æœŸæ¥å½’æ¡£ï¼Œæ¯å¤©ç”Ÿæˆä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œæ–¹ä¾¿ç®¡ç†å’ŒæŸ¥çœ‹\n- åº¦é‡ï¼ˆMetricsï¼‰ ç»Ÿè®¡æŒ‡æ ‡ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ã€‚å®ƒæ˜¯ä¸€ç§å¯ç´¯åŠ çš„èšåˆçš„æ•°å€¼ç»“æœï¼Œå…·æœ‰åŸå­æ€§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å„ç§æ•°å­¦è®¡ç®—æ–¹å¼æ¥è·å–ä¸€æ®µæ—¶é—´å†…çš„æ•°å€¼ã€‚\n- è¿½è¸ªï¼ˆTracingï¼‰ é“¾è·¯è¿½è¸ªæ˜¯å°†é“¾è·¯çš„å®Œæ•´è¡Œä¸ºä¿¡æ¯è¿›è¡Œè®°å½•ï¼Œç„¶åé€šè¿‡å¯è§†åŒ–çš„å½¢å¼å±•ç°å‡ºæ¥\næˆ‘ä»¬ä¸€èˆ¬å°†æ•°æ®çš„æ¥æºåˆ†ä¸º 2 ä¸ªçº§åˆ«ï¼š\n è¯·æ±‚çº§åˆ«ï¼šæ•°æ®æ¥æºäºçœŸå®çš„è¯·æ±‚ï¼Œæ¯”å¦‚ä¸€æ¬¡ http è°ƒç”¨ã€rpc è°ƒç”¨ç­‰ èšåˆçº§åˆ«ï¼šçœŸå®çš„è¯·æ±‚æŒ‡æ ‡ï¼Œæˆ–æ˜¯ç³»ç»Ÿçš„ä¸€äº›å‚æ•°æ•°æ®èšåˆï¼Œæ¯”å¦‚ qpsã€cpu ä½¿ç”¨ç‡  ","permalink":"https://zhenfeng-zhu.github.io/post/%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/","summary":"å¯è§‚æµ‹æ€§ å¯è§‚æµ‹æ€§ â‰  ç›‘æ§   æ ¸å¿ƒä¸åŒ\n ç›‘æ§ä»¥è¿ç»´ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡å„é¡¹æŒ‡æ ‡æ¥å®šä¹‰æ•´ä½“çš„è¿è¡ŒçŠ¶æ€ã€å¤±è´¥æƒ…å†µã€‚ è§‚æµ‹åˆ™ä»¥å¼€å‘ä¸ºæ ¸å¿ƒï¼Œé™¤äº†ç›‘æ§ï¼Œå®ƒè¿˜ä¼šå¯¹ç³»ç»Ÿè¿›è¡Œåˆ†æã€‚    ç»´åº¦ä¸åŒ\n ç›‘æ§æ˜¯ä»å¤–å›´çš„è§’åº¦ï¼Œé€šè¿‡å„ç§æŒ‡æ ‡ï¼ˆæœºå™¨ CPUã€è´Ÿè½½ã€ç½‘ç»œç­‰ç»´åº¦ï¼‰æ¥åˆ¤æ–­æ•´ä¸ªç³»ç»Ÿçš„æ‰§è¡Œæƒ…å†µã€‚ å¯è§‚æµ‹æ€§åˆ™åœ¨ä¸Šè¿°å¤–éƒ¨æŒ‡æ ‡åŸºç¡€ä¸Šï¼Œä»¥åº”ç”¨å†…çš„å„ä¸ªç»´åº¦æ¥å±•å¼€æ¨æµ‹ï¼Œé€šè¿‡äºŒè€…çš„æ•°æ®ç»“åˆæ¥çœŸå®çš„ååº”åº”ç”¨çš„è¿è¡Œæƒ…å†µã€‚    å±•ç°çš„ä¿¡æ¯ä¸åŒ\n æœ‰äº›ç³»ç»Ÿåœ¨æ­£å¸¸è¿è¡Œæ—¶ååˆ†ç¨³å®šï¼Œä½†æ˜¯ä¸€åˆ°é«˜å¹¶å‘å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæ­¤æ—¶ç›‘æ§åªèƒ½æ±‡æŠ¥é—®é¢˜å‡ºç°çš„çŠ¶å†µï¼Œè€Œå¯è§‚æµ‹æ€§å¯ä»¥å¾ˆå¥½çš„é€šè¿‡å›¾å½¢åŒ–çš„æ–¹å¼å‘ŠçŸ¥æˆ‘ä»¬é—®é¢˜çš„åŸå› ï¼Œä¸ç”¨æˆ‘ä»¬é€šè¿‡ç»éªŒæ¥çŒœæµ‹ã€‚    å¯è§‚æµ‹æ€§æ‰“ç ´äº†å¼€å‘å’Œè¿ç»´çš„åŸæœ‰é—®é¢˜è§£å†³æ–¹å¼ï¼Œä¸å†æ˜¯è¿ç»´å‘ç°é—®é¢˜å¼€å‘è§£å†³ï¼Œè€Œæ˜¯ä»¥å¼€å‘ä¸ºä¸­å¿ƒã€‚\nç›‘æ§æ•°æ®æ¥æº   ç«¯ä¸Šè®¿é—®\n ç”¨æˆ·ä½“éªŒç›‘æ§  web é¡µé¢çš„ç™½å±æ—¶é—´ dom å…ƒç´ /èµ„æºåŠ è½½è€—æ—¶ æ–‡æ¡£ç½‘ç»œè€—æ—¶ app å¡é¡¿ç‡ å´©æºƒç‡ çƒ­å¯åŠ¨åŠ è½½æ—¶é•¿   æ—¥å¿— ç«¯åˆ°ç«¯  ç”¨æˆ·ç«¯åˆ°åç«¯çš„è¯·æ±‚çŠ¶å†µï¼Œè®¿é—®é‡ã€æˆåŠŸç‡ã€å“åº”æ—¶é—´ç­‰ã€‚ è¿˜éœ€è¦ç«¯ä¸Šæ‰€å¤„çš„åœ°åŒºã€ç½‘ç»œç¯å¢ƒã€å“åº”çŠ¶æ€ç    å¯ç”¨ç‡  è®¿é—®æ˜¯å¦å¯ç”¨ã€å“åº”è€—æ—¶é•¿çŸ­çš„ä¸€äº›æŒ‡æ ‡å’Œ cdnã€dns ç­‰å…¬å…±èµ„æºæœ‰å…³ç³»ã€‚      åº”ç”¨ç¨‹åº\n æ‰§è¡Œæƒ…å†µ èµ„æºæ¶ˆè€— vm æŒ‡æ ‡ç›‘æ§ å®¹é‡ æœåŠ¡å…³ç³» åº”ç”¨æ—¥å¿— å¥åº·æƒ…å†µ    ä¸šåŠ¡ç›‘æ§","title":"å¦‚ä½•ç†è§£å¯è§‚æµ‹æ€§"},{"content":"æˆ‘ä»¬å¸¸è§çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨æœ‰ Hugoã€Hexo ç­‰ï¼Œç¨‹åºå‘˜ä»¬ç»å¸¸ä¼šä½¿ç”¨ç±»ä¼¼çš„å·¥å…·å»å°†è‡ªå·±çš„æ’­å®¢æ‰˜ç®¡åˆ° github pagesã€‚å‰æ®µæ—¶é—´ç ”ç©¶äº†ä¸€ä¸‹å®ç°çš„æ–¹å¼ï¼Œç”¨ Elixir ç®€å•å®ç°äº†ä¸€ä¸ªç‰ˆæœ¬ã€‚\nä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨çš„å·¥ä½œæµç¨‹é€šå¸¸æœ‰å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\n è¯»å–æºæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯ markdown æ ¼å¼çš„ã€‚ æ¨¡æ¿å¼•æ“çš„æ¸²æŸ“ ç”Ÿæˆç›®æ ‡æ–‡ä»¶  æ¥ä¸‹æ¥ä¼šä»æ¯ä¸ªæ­¥éª¤æ¥è¿›è¡Œç®€å•ä»‹ç»ã€‚\næœ€ç»ˆç‰ˆæœ¬çš„è¯·å‚è€ƒï¼šhttps://github.com/zhenfeng-zhu/egoï¼Œ æ¬¢è¿ pr å’Œ issueã€‚\næç®€ MVP ç‰ˆæœ¬ä»‹ç» åˆå§‹åŒ– mix new ego åœ¨ mix.exs ä¸­æ·»åŠ ä¾èµ–\n earmark æ˜¯å°† markdown è½¬æ¢ä¸º htmlã€‚ plug_cowboy æ˜¯æä¾›æœ¬åœ°é¢„è§ˆ html æ–‡ä»¶çš„ serverã€‚ json æ˜¯ä¸€ä¸ª json è§£æåº“ æŒ‡å®šä»¥ escript çš„æ–¹å¼å¯åŠ¨  è§£æ markdown æ–‡ä»¶ å°†ä¸€ä¸ª markdown æ–‡ä»¶è½¬ä¸º html ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œé¦–å…ˆè¯»å–ï¼Œç„¶åè°ƒç”¨ Earmark.as_html!å‡½æ•°ï¼Œå°±èƒ½å°† markdown è½¬æ¢ä¸º html äº†ã€‚\neg.\ndef gen_blogs(m) do  m  |\u0026gt; File.read!()  |\u0026gt; Earmark.as_html!() end æ›´è¿›ä¸€æ­¥çš„æˆ‘ä»¬è®¤ä¸º markdown çš„åšå®¢æºæ–‡ä»¶éƒ½åœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹é¢ï¼Œå³{current_dir()}/contents/ã€‚å¦‚æœè¦è·å–åˆ°æ‰€æœ‰çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ wildcard å‡½æ•°ã€‚\ndef blog_files do  Path.wildcard(\u0026#34;#{current_dir()}/contents/*.md\u0026#34;) end å› æ­¤å°±å¯ä»¥æ‰¹é‡å¯¹ç›®å½•ä¸‹çš„æ‰€æœ‰ markdown æ–‡ä»¶è¿›è¡Œè½¬æ¢ã€‚\neg.\nblog_files() |\u0026gt; Enum.each(fn m -\u0026gt; gen_blogs(m) end) æ¨¡æ¿å¼•æ“æ¸²æŸ“ æ—¢ç„¶ç”¨äº† elixirï¼Œé‚£å°±å¾—ä½¿ç”¨ eex æ¥è¿›è¡Œæ¸²æŸ“äº†ã€‚\næˆ‘ä»¬å†™ä¸€ä¸ªæœ€ç®€å•çš„ eex æ¨¡æ¿æ–‡ä»¶ï¼Œeg\n\u0026lt;html\u0026gt;  \u0026lt;head\u0026gt; \u0026lt;/head\u0026gt;   \u0026lt;body\u0026gt;  \u0026lt;div\u0026gt;  \u0026lt;article class=\u0026#34;markdown-body\u0026#34;\u0026gt;\u0026lt;%= @content %\u0026gt;\u0026lt;/article\u0026gt;  \u0026lt;/div\u0026gt;  \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ä¸Šè¿°çš„æ¨¡æ¿æ–‡ä»¶ä¸­ï¼Œcontent æ˜¯ markdown ç”Ÿæˆçš„ htmlã€‚\næ¸²æŸ“ eex ä¹Ÿæ˜¯å¾ˆç®€å•ï¼Œeg\ndef blog_layout do  \u0026#34;#{current_dir()}/layouts/blog.eex\u0026#34; end  def eval_blog(m) do  title = get_title(m)   EEx.eval_file(blog_layout(),  assigns: [content: m]  ) end ç”Ÿæˆç›®æ ‡æ–‡ä»¶ éœ€è¦å°†ä¸Šè¿°çš„æ–‡ä»¶ç”Ÿæˆåˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å…ˆç”Ÿæˆåˆ° public ç›®å½•ä¸‹é¢ã€‚\nElixir çš„å†™å…¥å‡½æ•°ä¹Ÿæ˜¯ç‰¹åˆ«å¥½ç”¨ï¼Œåªéœ€è¦æŠŠ string å†™å…¥åˆ°ç›®æ ‡æ–‡ä»¶å³å¯ï¼Œeg\ndef write_to(d, m) do  title = get_title(m)   File.write!(\u0026#34;#{static_dir()}/#{title}.html\u0026#34;, d) end ä¸€äº›ä¼˜åŒ– ç”Ÿæˆç›®å½•æ–‡ä»¶ ç”Ÿæˆ index ç›®å½•æ–‡ä»¶å’Œç”Ÿæˆ blog çš„æµç¨‹ç±»ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦è§£ææ¯ä¸ª markdown çš„æ–‡ä»¶åï¼Œç„¶åå¡«å……åˆ° index çš„ layout ä¸­å³å¯ã€‚\n\u0026lt;html\u0026gt;  \u0026lt;head\u0026gt; \u0026lt;/head\u0026gt;   \u0026lt;body\u0026gt;  \u0026lt;div\u0026gt;  \u0026lt;article class=\u0026#34;markdown-body\u0026#34;\u0026gt;  \u0026lt;%= for item \u0026lt;- @list do %\u0026gt;  \u0026lt;p\u0026gt;  \u0026lt;a href=\u0026#34;\u0026lt;%= item[:href] %\u0026gt;\u0026#34;\u0026gt; \u0026lt;%= item[:title] %\u0026gt; \u0026lt;/a\u0026gt;  \u0026lt;/p\u0026gt;  \u0026lt;% end %\u0026gt;  \u0026lt;/article\u0026gt;  \u0026lt;/div\u0026gt;  \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; s æ³¨æ„åœ¨ç”Ÿæˆç›®å½•çš„æ—¶å€™ï¼Œä¸€å®šè¦æŒ‡å®šç›®æ ‡åšå®¢çš„åœ°å€ï¼Œå› æ­¤è¦å¯¹ç›®å½•åŠ ä¸€ä¸ª\u0026lt;a href\u0026gt; \u0026lt;/a\u0026gt;çš„æ ‡ç­¾ã€‚\n def gen_index(blogs) do  blogs  |\u0026gt; Enum.map(fn m -\u0026gt; m |\u0026gt; get_title() |\u0026gt; build_title_with_href() end)  |\u0026gt; eval_index()  |\u0026gt; write_to(\u0026#34;index\u0026#34;)  end   def build_title_with_href(title) do  %{:title =\u0026gt; title, :href =\u0026gt; get_href(title)}  end   def get_href(title) do  \u0026#34;#{EgoConfig.domain()}/#{title}.html\u0026#34;  end   def eval_index(titles) do  EEx.eval_file(index_layout(),  assigns: [t: \u0026#34;zzf-blog\u0026#34;, list: titles]  )  end åŠ é€Ÿæ„å»º ä¸Šé¢çš„æ„å»ºæµç¨‹æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜ï¼Œå°±æ˜¯æ¯ä¸ªæ–‡ä»¶çš„ç”Ÿæˆéƒ½æ˜¯ä¸²è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥åŠ é€Ÿä¸€ä¸‹ã€‚\n Task.start_link(fn -\u0026gt; blog_files() |\u0026gt; gen_index() end)   blog_files()  |\u0026gt; Enum.map(fn m -\u0026gt; Task.async(fn -\u0026gt; gen_blogs(m) end) end)  |\u0026gt; Task.await_many()  |\u0026gt; IO.inspect() è®©ç”Ÿæˆ index çš„æ—¶å€™åœ¨åå°æ‰§è¡Œï¼ŒåŒæ—¶ç”Ÿæˆ blog çš„æ—¶å€™ï¼Œå¼€å¯ async æ¨¡å¼ï¼Œå¹¶ await ä¸€ä¸‹ã€‚\næœ¬åœ°é¢„è§ˆ ç®€å•ä½¿ç”¨ plug æ¥åšæœ¬åœ°é¢„è§ˆ\ndefmodule MyPlug do  use Plug.Router  import Plug.Conn   plug(:match)  plug(:dispatch)   get \u0026#34;/\u0026#34; do  conn  |\u0026gt; put_resp_content_type(\u0026#34;text/html\u0026#34;)  |\u0026gt; send_file(200, \u0026#34;public/index.html\u0026#34;)  end   get \u0026#34;/:file\u0026#34; do  conn  |\u0026gt; put_resp_content_type(\u0026#34;text/html\u0026#34;)  |\u0026gt; send_file(200, \u0026#34;public/#{file}\u0026#34;)  end   get \u0026#34;favicon.ico\u0026#34; do  send_resp(conn, 404, \u0026#34;not found\u0026#34;)  end   match _ do  send_resp(conn, 404, \u0026#34;not found\u0026#34;)  end end é€šè¿‡è®¿é—®åŸŸåï¼Œå¯ä»¥è¿›åˆ° index æ–‡ä»¶ï¼Œå½“ç‚¹å‡»ç›®å½•çš„æ—¶å€™ï¼Œå°±è®¿é—®ç›®æ ‡åšå®¢æ–‡ä»¶ã€‚\nç¾åŒ–  æ·»åŠ ä»£ç é«˜äº®ï¼Œ  åœ¨ head ä¸­å¼•å…¥ highlight.js å³å¯ã€‚\neg.\n\u0026lt;link  rel=\u0026#34;stylesheet\u0026#34;  href=\u0026#34;https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/styles/default.min.css\u0026#34; /\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/highlight.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;  \u0026lt;script\u0026gt;  hljs.highlightAll(); \u0026lt;/script\u0026gt; å±…ä¸­å±•ç¤º  åœ¨ layout æ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹ css æ ·å¼å³å¯ã€‚\n\u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1\u0026#34; /\u0026gt; \u0026lt;style\u0026gt;  .markdown-body {  box-sizing: border-box;  min-width: 200px;  max-width: 980px;  margin: 0 auto;  padding: 45px;  }   @media (max-width: 767px) {  .markdown-body {  padding: 15px;  }  } \u0026lt;/style\u0026gt; æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶ é€šè¿‡ escript æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶\nå‚è€ƒ https://elixirschool.com/zh-hans/lessons/advanced/escripts/\nä¸°å¯Œå‘½ä»¤è¡Œ  defp parse_args(args) do  case hd(args) do  \u0026#34;server\u0026#34; -\u0026gt;  start_server()   \u0026#34;build\u0026#34; -\u0026gt;  Mark.convert()   \u0026#34;new\u0026#34; -\u0026gt;  gen_template(args)  end  end ego server å¯åŠ¨æœ¬åœ°é¢„è§ˆæ¨¡å¼\nego build å°±å°†æœ¬åœ°çš„åšå®¢ç”Ÿæˆ html æ–‡ä»¶\nego new site xxx ç”Ÿæˆé™æ€ç«™ç‚¹\næ›´å¤š elixir å†™èµ·æ¥å¾ˆä¸æ»‘ï¼Œä¸€ä¸ªæœ€ç»ˆç‰ˆæœ¬çš„è¯·å‚è€ƒï¼šhttps://github.com/zhenfeng-zhu/egoï¼Œæ¬¢è¿ pr å’Œ issueã€‚\nå¦å¤–ä¹Ÿç»™ elixir-ls æäº†ä¸€ä¸ª prï¼Œå¤§å®¶å¿«å» conversation å‘€ï¼Œå°½å¿«è®© merge äº†ï¼šhttps://github.com/elixir-lsp/elixir-ls/pull/574\n","permalink":"https://zhenfeng-zhu.github.io/post/how-to-write-a-static-site-generator/","summary":"æˆ‘ä»¬å¸¸è§çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨æœ‰ Hugoã€Hexo ç­‰ï¼Œç¨‹åºå‘˜ä»¬ç»å¸¸ä¼šä½¿ç”¨ç±»ä¼¼çš„å·¥å…·å»å°†è‡ªå·±çš„æ’­å®¢æ‰˜ç®¡åˆ° github pagesã€‚å‰æ®µæ—¶é—´ç ”ç©¶äº†ä¸€ä¸‹å®ç°çš„æ–¹å¼ï¼Œç”¨ Elixir ç®€å•å®ç°äº†ä¸€ä¸ªç‰ˆæœ¬ã€‚\nä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨çš„å·¥ä½œæµç¨‹é€šå¸¸æœ‰å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\n è¯»å–æºæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯ markdown æ ¼å¼çš„ã€‚ æ¨¡æ¿å¼•æ“çš„æ¸²æŸ“ ç”Ÿæˆç›®æ ‡æ–‡ä»¶  æ¥ä¸‹æ¥ä¼šä»æ¯ä¸ªæ­¥éª¤æ¥è¿›è¡Œç®€å•ä»‹ç»ã€‚\næœ€ç»ˆç‰ˆæœ¬çš„è¯·å‚è€ƒï¼šhttps://github.com/zhenfeng-zhu/egoï¼Œ æ¬¢è¿ pr å’Œ issueã€‚\næç®€ MVP ç‰ˆæœ¬ä»‹ç» åˆå§‹åŒ– mix new ego åœ¨ mix.exs ä¸­æ·»åŠ ä¾èµ–\n earmark æ˜¯å°† markdown è½¬æ¢ä¸º htmlã€‚ plug_cowboy æ˜¯æä¾›æœ¬åœ°é¢„è§ˆ html æ–‡ä»¶çš„ serverã€‚ json æ˜¯ä¸€ä¸ª json è§£æåº“ æŒ‡å®šä»¥ escript çš„æ–¹å¼å¯åŠ¨  è§£æ markdown æ–‡ä»¶ å°†ä¸€ä¸ª markdown æ–‡ä»¶è½¬ä¸º html ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œé¦–å…ˆè¯»å–ï¼Œç„¶åè°ƒç”¨ Earmark.as_html!å‡½æ•°ï¼Œå°±èƒ½å°† markdown è½¬æ¢ä¸º html äº†ã€‚\neg.\ndef gen_blogs(m) do  m  |\u0026gt; File.","title":"å¦‚ä½•ä»é›¶å¼€å§‹å†™ä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨"},{"content":"å®éªŒå®¤ 2\u0026ndash;æµ‹è¯•ä¸œè¥¿ åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab2 \\  \u0026amp;\u0026amp; cd lab2 ä½¿ç”¨ UI é—¨æˆ· ç°åœ¨ä½ å¯ä»¥æµ‹è¯•ä¸€ä¸‹ OpenFaaS çš„ç”¨æˆ·ç•Œé¢äº†ã€‚\nå¦‚æœä½ å·²ç»è®¾ç½®äº†ä¸€ä¸ª$OPENFAAS_URLï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°è¿™ä¸ª URLï¼Œç„¶åç‚¹å‡»å®ƒã€‚\necho $OPENFAAS_URL http://127.0.0.1:31112 å¦‚æœä½ æ²¡æœ‰è®¾ç½®\u0026quot;$OPENFAAS_URL\u0026quot;ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹æ˜¯è¿™æ ·çš„ã€‚http://127.0.0.1:8080.\næˆ‘ä»¬å¯ä»¥éƒ¨ç½²ä¸€äº›æ ·æœ¬å‡½æ•°ï¼Œç„¶åç”¨å®ƒä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚\nfaas-cli deploy -f https://raw.githubusercontent.com/openfaas/faas/master/stack.yml ä½ å¯ä»¥åœ¨ç”¨æˆ·ç•Œé¢ä¸­è¯•ç”¨å®ƒä»¬ï¼Œæ¯”å¦‚å°† Markdown ä»£ç è½¬æ¢ä¸º HTML çš„ Markdown å‡½æ•°ã€‚\nåœ¨Requestå­—æ®µä¸­é”®å…¥ä»¥ä¸‹å†…å®¹ã€‚\n## The **OpenFaaS** _workshop_ ç°åœ¨ç‚¹å‡»Invokeï¼Œçœ‹åˆ°å“åº”å‡ºç°åœ¨å±å¹•çš„ä¸‹åŠéƒ¨åˆ†ã€‚\nå³ã€‚\n\u0026lt;h2\u0026gt;The \u0026lt;strong\u0026gt;OpenFaaS\u0026lt;/strong\u0026gt; \u0026lt;em\u0026gt;workshop\u0026lt;/em\u0026gt;\u0026lt;/h2\u0026gt; ä½ å°†çœ‹åˆ°ä»¥ä¸‹å­—æ®µæ˜¾ç¤ºã€‚\n çŠ¶æ€ - è¯¥å‡½æ•°æ˜¯å¦å‡†å¤‡å¥½è¿è¡Œã€‚åœ¨çŠ¶æ€æ˜¾ç¤ºå‡†å¤‡å¥½ä¹‹å‰ï¼Œä½ å°†ä¸èƒ½ä»ç”¨æˆ·ç•Œé¢è°ƒç”¨è¯¥å‡½æ•°ã€‚ Replicas - åœ¨é›†ç¾¤ä¸­è¿è¡Œçš„å‡½æ•°çš„å‰¯æœ¬æ•°é‡ é•œåƒ - å‘å¸ƒåœ¨ Docker Hub æˆ– Docker èµ„æºåº“ä¸­çš„ Docker å›¾åƒåç§°å’Œç‰ˆæœ¬ è°ƒç”¨æ¬¡æ•° - è¿™æ˜¾ç¤ºäº†è¯¥å‡½æ•°è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œæ¯ 5 ç§’æ›´æ–°ä¸€æ¬¡  ç‚¹å‡»Invokeè‹¥å¹²æ¬¡ï¼Œçœ‹åˆ°Invocation countçš„å¢åŠ ã€‚\né€šè¿‡å‡½æ•°åº“è¿›è¡Œéƒ¨ç½² ä½ å¯ä»¥ä» OpenFaaS å•†åº—ä¸­éƒ¨ç½²ä¸€ä¸ªå‡½æ•°ã€‚è¯¥å•†åº—æ˜¯ä¸€ä¸ªç”±ç¤¾åŒºç»´æŠ¤çš„å…è´¹å‡½æ•°é›†åˆã€‚\nç‚¹å‡» éƒ¨ç½²æ–°çš„å‡½æ•° ç‚¹å‡» from store\n ç‚¹å‡» Figlet æˆ–åœ¨æœç´¢æ ä¸­è¾“å…¥ figlet ï¼Œç„¶åç‚¹å‡» Deploy ã€‚  Figlet å‡½æ•°ç°åœ¨å°†å‡ºç°åœ¨ä½ å·¦è¾¹çš„å‡½æ•°åˆ—è¡¨ä¸­ã€‚ç»™å®ƒä¸€ç‚¹æ—¶é—´ä» Docker Hub ä¸‹è½½ï¼Œç„¶åè¾“å…¥ä¸€äº›æ–‡æœ¬ï¼Œåƒæˆ‘ä»¬å¯¹ Markdown å‡½æ•°æ‰€åšçš„é‚£æ ·ï¼Œç‚¹å‡» Invokeã€‚\nä½ ä¼šçœ‹åˆ°ä¸€ä¸ª ASCII ç çš„æ ‡å¿—ï¼Œåƒè¿™æ ·ç”Ÿæˆã€‚\n _ ___ ___ _ __ / |/ _ \\ / _ (_)/ / | | | | | | | |/ / | | |_| | |_| / /_ |_|\\___/ \\___/_/(_) äº†è§£ CLI çš„æƒ…å†µ ä½ ç°åœ¨å¯ä»¥æµ‹è¯•ä¸€ä¸‹ CLI äº†ï¼Œä½†é¦–å…ˆè¦æ³¨æ„ä¸€ä¸‹å¤‡ç”¨ç½‘å…³çš„ URLã€‚\nå¦‚æœä½ çš„ç½‘å…³æ²¡æœ‰éƒ¨ç½²åœ¨http://127.0.0.1:8080ï¼Œé‚£ä¹ˆä½ å°†éœ€è¦æŒ‡å®šæ›¿ä»£ä½ç½®ã€‚æœ‰å‡ ç§æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹ã€‚\n è®¾ç½®ç¯å¢ƒå˜é‡OPENFAAS_URLï¼Œfaas-cliå°†æŒ‡å‘å½“å‰ shell ä¼šè¯ä¸­çš„é‚£ä¸ªç«¯ç‚¹ã€‚ä¾‹å¦‚ï¼šexport OPENFAAS_URL http://openfaas.endpoint.com:8080ã€‚å¦‚æœä½ æ˜¯æŒ‰ç…§ Kubernetes çš„æŒ‡ç¤ºï¼Œè¿™å·²ç»åœ¨Lab 1ä¸­è®¾ç½®å¥½äº†ã€‚ ç”¨ gæˆ–--gatewayæ ‡å¿—åœ¨çº¿æŒ‡å®šæ­£ç¡®çš„ç«¯ç‚¹ï¼š faas deploy --gateway http://openfaas.endpoint.com:8080ã€‚ åœ¨ä½ çš„éƒ¨ç½² YAML æ–‡ä»¶ä¸­ï¼Œæ”¹å˜gateway:å¯¹è±¡åœ¨provider:ä¸‹æŒ‡å®šçš„å€¼ã€‚  åˆ—å‡ºå·²éƒ¨ç½²çš„å‡½æ•° è¿™å°†æ˜¾ç¤ºè¿™äº›å‡½æ•°ï¼Œä½ æœ‰å¤šå°‘ä¸ªå‰¯æœ¬å’Œè°ƒç”¨æ¬¡æ•°ã€‚\nfaas-cli list ä½ åº”è¯¥çœ‹åˆ°markdownå‡½æ•°æ˜¯ markdownï¼Œfigletå‡½æ•°ä¹Ÿè¢«åˆ—å‡ºæ¥äº†ï¼Œè¿˜æœ‰ä½ è°ƒç”¨äº†å¤šå°‘æ¬¡ã€‚\nç°åœ¨è¯•è¯•ä½¿ç”¨ verbose æ ‡å¿—\nfaas-cli list --verbose æˆ–\nfaas-cli list -v ç°åœ¨ä½ å¯ä»¥çœ‹åˆ° Docker é•œåƒä»¥åŠå‡½æ•°çš„åç§°ã€‚\nè°ƒç”¨ä¸€ä¸ªå‡½æ•° ä»ä½ åœ¨faas-cli listä¸Šçœ‹åˆ°çš„å‡½æ•°ä¸­æŒ‘é€‰ä¸€ä¸ªï¼Œæ¯”å¦‚markdownã€‚\nfaas-cli invoke markdown ç°åœ¨ä½ ä¼šè¢«è¦æ±‚è¾“å…¥ä¸€äº›æ–‡æœ¬ã€‚å®Œæˆåç‚¹å‡» Control + Dã€‚\næˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå¦‚echoæˆ–curlä½œä¸ºinvokeå‘½ä»¤çš„è¾“å…¥ï¼Œè¯¥å‘½ä»¤é€šè¿‡ä½¿ç”¨ç®¡é“å·¥ä½œã€‚\n$ echo \u0026#34;# Hi\u0026#34; | faas-cli invoke markdown  $ curl -sLS https://raw.githubusercontent.com/openfaas/faas/master/README.md\\ã€‚  | faas-cli invoke markdown ç›‘æµ‹ä»ªè¡¨æ¿ OpenFaaS ä½¿ç”¨ Prometheus è‡ªåŠ¨è·Ÿè¸ªä½ çš„å‡½æ•°çš„æŒ‡æ ‡ã€‚è¿™äº›æŒ‡æ ‡å¯ä»¥é€šè¿‡å…è´¹çš„å¼€æºå·¥å…·å˜æˆä¸€ä¸ªæœ‰ç”¨çš„ä»ªè¡¨ç›˜ï¼Œæ¯”å¦‚Grafanaã€‚\nåœ¨ OpenFaaS Kubernetes å‘½åç©ºé—´è¿è¡Œ Grafanaã€‚\nkubectl -n openfaas run \\ --image=stefanprodan/faas-grafana:4.6.3 \\ --port=3000 \\ grafana ç”¨ NodePort æš´éœ² Grafanaã€‚\nkubectl -n openfaas expose pod grafana \\ --type=NodePort \\ --name=grafana æ‰¾åˆ° Grafana èŠ‚ç‚¹çš„ç«¯å£åœ°å€ã€‚\nGRAFANA_PORT=$(kubectl -n openfaas get svc grafana -o jsonpath=\u0026#34;{.spec.ports[0].nodePort}\u0026#34;) GRAFANA_URL=http://IP_ADDRESS:$GRAFANA_PORT/dashboard/db/openfaas å…¶ä¸­IP_ADDRESSæ˜¯ä½ åœ¨ Kubernetes çš„å¯¹åº” IPã€‚\næˆ–è€…ä½ å¯ä»¥è¿è¡Œè¿™ä¸ªç«¯å£è½¬å‘å‘½ä»¤ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨http://127.0.0.1:3000ä¸Šè®¿é—® Grafanaã€‚\nkubectl port-forward pod/grafana 3000:3000 -n openfaas å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Kubernetes 1.17 æˆ–æ›´æ—©çš„ç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨deploy/grafanaè€Œä¸æ˜¯ä¸Šé¢å‘½ä»¤ä¸­çš„pod/ã€‚\næœåŠ¡åˆ›å»ºåï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Grafanaï¼Œç”¨ç”¨æˆ·åadminå¯†ç adminç™»å½•ï¼Œå¹¶å¯¼èˆªåˆ°é¢„å…ˆåˆ¶ä½œçš„ OpenFaaS ä»ªè¡¨æ¿$GRAFANA_URLã€‚\nå›¾ï¼šä½¿ç”¨ Grafana çš„ OpenFaaS ä»ªè¡¨æ¿çš„ä¾‹å­ã€‚\nç°åœ¨è½¬åˆ°å®éªŒå®¤ 3\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab2/","summary":"å®éªŒå®¤ 2\u0026ndash;æµ‹è¯•ä¸œè¥¿ åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab2 \\  \u0026amp;\u0026amp; cd lab2 ä½¿ç”¨ UI é—¨æˆ· ç°åœ¨ä½ å¯ä»¥æµ‹è¯•ä¸€ä¸‹ OpenFaaS çš„ç”¨æˆ·ç•Œé¢äº†ã€‚\nå¦‚æœä½ å·²ç»è®¾ç½®äº†ä¸€ä¸ª$OPENFAAS_URLï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°è¿™ä¸ª URLï¼Œç„¶åç‚¹å‡»å®ƒã€‚\necho $OPENFAAS_URL http://127.0.0.1:31112 å¦‚æœä½ æ²¡æœ‰è®¾ç½®\u0026quot;$OPENFAAS_URL\u0026quot;ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹æ˜¯è¿™æ ·çš„ã€‚http://127.0.0.1:8080.\næˆ‘ä»¬å¯ä»¥éƒ¨ç½²ä¸€äº›æ ·æœ¬å‡½æ•°ï¼Œç„¶åç”¨å®ƒä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚\nfaas-cli deploy -f https://raw.githubusercontent.com/openfaas/faas/master/stack.yml ä½ å¯ä»¥åœ¨ç”¨æˆ·ç•Œé¢ä¸­è¯•ç”¨å®ƒä»¬ï¼Œæ¯”å¦‚å°† Markdown ä»£ç è½¬æ¢ä¸º HTML çš„ Markdown å‡½æ•°ã€‚\nåœ¨Requestå­—æ®µä¸­é”®å…¥ä»¥ä¸‹å†…å®¹ã€‚\n## The **OpenFaaS** _workshop_ ç°åœ¨ç‚¹å‡»Invokeï¼Œçœ‹åˆ°å“åº”å‡ºç°åœ¨å±å¹•çš„ä¸‹åŠéƒ¨åˆ†ã€‚\nå³ã€‚\n\u0026lt;h2\u0026gt;The \u0026lt;strong\u0026gt;OpenFaaS\u0026lt;/strong\u0026gt; \u0026lt;em\u0026gt;workshop\u0026lt;/em\u0026gt;\u0026lt;/h2\u0026gt; ä½ å°†çœ‹åˆ°ä»¥ä¸‹å­—æ®µæ˜¾ç¤ºã€‚\n çŠ¶æ€ - è¯¥å‡½æ•°æ˜¯å¦å‡†å¤‡å¥½è¿è¡Œã€‚åœ¨çŠ¶æ€æ˜¾ç¤ºå‡†å¤‡å¥½ä¹‹å‰ï¼Œä½ å°†ä¸èƒ½ä»ç”¨æˆ·ç•Œé¢è°ƒç”¨è¯¥å‡½æ•°ã€‚ Replicas - åœ¨é›†ç¾¤ä¸­è¿è¡Œçš„å‡½æ•°çš„å‰¯æœ¬æ•°é‡ é•œåƒ - å‘å¸ƒåœ¨ Docker Hub æˆ– Docker èµ„æºåº“ä¸­çš„ Docker å›¾åƒåç§°å’Œç‰ˆæœ¬ è°ƒç”¨æ¬¡æ•° - è¿™æ˜¾ç¤ºäº†è¯¥å‡½æ•°è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œæ¯ 5 ç§’æ›´æ–°ä¸€æ¬¡  ç‚¹å‡»Invokeè‹¥å¹²æ¬¡ï¼Œçœ‹åˆ°Invocation countçš„å¢åŠ ã€‚","title":"Openfaas Workshop Lab2"},{"content":"Lab 1 - ç”¨ Kubernetes è®¾ç½® OpenFaaS å®‰è£…æœ€æ–°çš„ kubectl ä½¿ç”¨ä¸‹é¢çš„è¯´æ˜æˆ–å®˜æ–¹æ–‡æ¡£ä¸ºä½ çš„æ“ä½œç³»ç»Ÿå®‰è£…kubectlã€‚\n Linux  export VER=$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt) curl -LO https://storage.googleapis.com/kubernetes-release/release/$VER/bin/linux/amd64/kubectl chmod +x kubectl mv kubectl /usr/local/bin/  MacOS  export VER=$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt) curl -LO https://storage.googleapis.com/kubernetes-release/release/$VER/bin/darwin/amd64/kubectl chmod +x kubectl mv kubectl /usr/local/bin/  Windows  export VER=$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt) curl -LO https://storage.googleapis.com/kubernetes-release/release/$VER/bin/windows/amd64/kubectl.exe chmod +x kubectl.exe mkdir -p $HOME/bin/ mv kubectl $HOME/bin/ è®¾ç½®ä¸€ä¸ª Kubernetes é›†ç¾¤ ä½ å¯ä»¥åœ¨ä½¿ç”¨ Kubernetes çš„åŒæ—¶æŒ‰ç…§å®éªŒè¿›è¡Œæ“ä½œï¼Œä½†ä½ å¯èƒ½éœ€è¦æ²¿é€”åšä¸€äº›å°æ”¹åŠ¨ã€‚ç½‘å…³çš„æœåŠ¡åœ°å€ä»http://gateway:8080æ”¹ä¸ºhttp://gateway.openfaas:8080ã€‚è¿™äº›å·®å¼‚å·²ç»å°½å¯èƒ½åœ°è¢«è®°å½•ä¸‹æ¥ï¼Œæ¯ä¸ªå®éªŒå®¤éƒ½æä¾›äº†æ›¿ä»£æ–¹æ¡ˆã€‚\nåœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šåˆ›å»ºä¸€ä¸ªæœ¬åœ°é›†ç¾¤ k3s ä½¿ç”¨ k3d å¦‚æœä½ çš„ç”µè„‘ä¸Šæœ‰ Dockerï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ Rancher å®éªŒå®¤æ‰˜ç®¡çš„k3då·¥å…·ã€‚å®ƒå®‰è£…äº†ä¸€ä¸ªè½»é‡çº§çš„ Kubernetes ç‰ˆæœ¬ï¼Œå«åšk3sï¼Œå¹¶åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨ä»»ä½•æœ‰ Docker çš„ç”µè„‘ä¸Šè¿è¡Œã€‚\n  å®‰è£… k3d\n  å¯åŠ¨ä¸€ä¸ªé›†ç¾¤\n   k3d cluster create CLUSTER_NAMEåˆ›å»ºä¸€ä¸ªæ–°çš„å•èŠ‚ç‚¹é›†ç¾¤ï¼ˆ=1 ä¸ªè¿è¡Œ k3s çš„å®¹å™¨+1 ä¸ªè´Ÿè½½å‡è¡¡å™¨å®¹å™¨ï¼‰ 2.kubectl çš„ä¸Šä¸‹æ–‡ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä½ å¯ä»¥ç”¨kubectl config get-contextsæ¥æ£€æŸ¥ã€‚ æ‰§è¡Œä¸€äº›å‘½ä»¤ï¼Œå¦‚kubectl get pods --all-namespacesã€‚ å¦‚æœä½ æƒ³åˆ é™¤é»˜è®¤é›†ç¾¤k3d cluster delete CLUSTER_NAMEã€‚  Docker for Mac  å®‰è£… Docker for Mac   è¯·æ³¨æ„ï¼ŒKubernetes ä»…åœ¨ Docker for Mac 17.12 CE åŠä»¥ä¸Šç‰ˆæœ¬ä¸­å¯ç”¨ã€‚\n ä½¿ç”¨ Minikube   è¦å®‰è£… Minikubeï¼Œè¯·æ ¹æ®ä½ çš„å¹³å°ä»æœ€æ–°ç‰ˆæœ¬ä¸‹è½½é€‚å½“çš„å®‰è£…ç¨‹åºã€‚\n  ç°åœ¨è¿è¡Œ Minikube\n  minikube start minikube è™šæ‹Ÿæœºé€šè¿‡ä¸€ä¸ªä»…é™ä¸»æœºçš„ IP åœ°å€æš´éœ²ç»™ä¸»æœºç³»ç»Ÿã€‚ç”¨minikube ipæ£€æŸ¥è¿™ä¸ª IPã€‚ è¿™æ˜¯ä½ ä»¥åå°†ç”¨äºç½‘å…³ URL çš„ IPã€‚\n æ³¨æ„ï¼šMinikube è¿˜éœ€è¦ä¸€ä¸ª Hypervisorï¼Œå¦‚ VirtualBox æˆ– Hyperkitï¼ˆåœ¨ MacOS ä¸Šï¼‰ã€‚æŒ‰ç…§ minikube çš„è¯´æ˜å’Œæ–‡ä»¶\n åœ¨äº‘ä¸Šåˆ›å»ºä¸€ä¸ªè¿œç¨‹é›†ç¾¤ ä½ å¯ä»¥åœ¨äº‘ç«¯åˆ›å»ºä¸€ä¸ªè¿œç¨‹é›†ç¾¤ï¼Œäº«å—ä¸æœ¬åœ°å¼€å‘ä¸€æ ·çš„ä½“éªŒï¼ŒåŒæ—¶èŠ‚çœ RAM/CPU å’Œç”µæ± ã€‚è¿è¡Œä¸€ä¸ªé›†ç¾¤ 1-2 å¤©çš„è´¹ç”¨æ˜¯æœ€ä½çš„ã€‚\nåœ¨ DigitalOcean çš„ Kubernetes æœåŠ¡ä¸Šè¿è¡Œ ä½ å¯ä»¥ä½¿ç”¨å…è´¹ç‚¹æ•°é€šè¿‡ DigitalOcean çš„ç”¨æˆ·ç•Œé¢åˆ›å»ºä¸€ä¸ªé›†ç¾¤ã€‚\nç„¶å DigitalOcean çš„ä»ªè¡¨æ¿å°†æŒ‡å¯¼ä½ å¦‚ä½•é…ç½®ä½ çš„kubectlå’ŒKUBECONFIGæ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨å®éªŒå®¤ä¸­ä½¿ç”¨ã€‚\n ç”³è¯·ä½ çš„å…è´¹ç‚¹æ•°\u0026ndash;30 å¤©å†…æœ‰ 50 ç¾å…ƒçš„ç‚¹æ•°ã€‚  å³ä½¿ä½ å·²ç»ç”³è¯·äº†å…è´¹å­¦åˆ†ï¼Œä¸€ä¸ª 2-3 ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ 24-48 å°æ—¶çš„è¿è¡Œè´¹ç”¨ä¹Ÿæ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ã€‚\nç‚¹å‡»ä»ªè¡¨æ¿å·¦ä¾§é¢æ¿ä¸Šçš„ Kubernetesï¼Œç„¶åç‚¹å‡» å¯ç”¨æœ‰é™è®¿é—®\n_ä¸€æ—¦ç™»å½•ï¼Œç‚¹å‡» Kubernetes_èœå•é¡¹å¹¶åˆ›å»ºä¸€ä¸ªé›†ç¾¤ã€‚\nå»ºè®®ä½¿ç”¨æœ€æ–°çš„ Kubernetes ç‰ˆæœ¬ï¼Œå¹¶é€‰æ‹©ç¦»ä½ æœ€è¿‘çš„æ•°æ®ä¸­å¿ƒåŒºåŸŸï¼Œä»¥å°½é‡å‡å°‘å»¶æ—¶ã€‚\n åœ¨ æ·»åŠ èŠ‚ç‚¹æ± ä¸‹  ä½¿ç”¨ 2 ä¸ª 4GB / 2vCPU\n æ³¨æ„ï¼šå¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥åœ¨ä»¥åæ·»åŠ æ›´å¤šçš„å®¹é‡\n   ä¸‹è½½doctlCLI å¹¶æŠŠå®ƒæ”¾åœ¨ä½ çš„è·¯å¾„ä¸­ã€‚\n  åœ¨æ‚¨çš„ DigitalOcean ä»ªè¡¨æ¿ä¸Šåˆ›å»ºä¸€ä¸ªAPI å¯†é’¥\n  è¿½è¸ªæ‚¨çš„ API å¯†é’¥ï¼ˆå°†å…¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼‰ã€‚\n è®¤è¯ CLI  doctl auth init ç²˜è´´ä½ çš„ API å¯†é’¥\n ç°åœ¨è·å¾—é›†ç¾¤çš„åç§°ã€‚  $ doctl k8s cluster list GUID workshop-lon1 nyc1 1.13.5-do.1 provisioning workshop-lon1-1  ä¿å­˜ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä½¿kubectlæŒ‡å‘æ–°é›†ç¾¤ã€‚  doctl k8s cluster kubeconfig save workshop-lon1 ç°åœ¨ä½ éœ€è¦åˆ‡æ¢ä½ çš„ Kubernetes ä¸Šä¸‹æ–‡ä»¥æŒ‡å‘æ–°çš„é›†ç¾¤ã€‚\nç”¨kubectl config get-contextsæ‰¾åˆ°é›†ç¾¤åç§°ï¼Œå¦‚æœå®ƒæ²¡æœ‰çªå‡ºæ˜¾ç¤ºï¼Œåˆ™è¾“å…¥kubectl config set-context \u0026lt;context-name\u0026gt;ã€‚\nåœ¨ GKEï¼ˆè°·æ­Œ Kubernetes å¼•æ“ï¼‰ä¸Šè¿è¡Œ ç™»å½•åˆ°è°·æ­Œäº‘ï¼Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸ºå…¶å¯ç”¨è®¡è´¹ã€‚å¦‚æœä½ æ²¡æœ‰è´¦æˆ·ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ³¨å†Œï¼Œè·å¾—å…è´¹ç‚¹æ•°ã€‚\nå®‰è£…Google Cloud SDK - è¿™å°†ä½¿gcloudå’Œkubectlå‘½ä»¤å¯ç”¨ã€‚ å¯¹äº Windowsï¼Œè¯·æŒ‰ç…§æ–‡æ¡£ä¸­çš„è¯´æ˜ã€‚\nå®‰è£… gcloud å‘½ä»¤è¡Œå·¥å…·åï¼Œç”¨gcloud inité…ç½®ä½ çš„é¡¹ç›®ï¼Œå¹¶è®¾ç½®é»˜è®¤é¡¹ç›®ã€è®¡ç®—åŒºåŸŸå’ŒåŒºåŸŸï¼ˆç”¨ä½ è‡ªå·±çš„é¡¹ç›®æ›¿æ¢PROJECT_IDï¼‰ã€‚\ngcloud config set project PROJECT_ID gcloud config set compute/region us-central1 gcloud config set compute/zone us-central1-a å¯ç”¨ Kubernetes æœåŠ¡ã€‚\ngcloud services enable container.googleapis.com å®‰è£… kubectlã€‚\ngcloud components install kubectl åˆ›å»ºä¸€ä¸ª Kubernetes é›†ç¾¤ã€‚\n$ gcloud container clusters create openfaas \\ --zone=us-central1-a \\ --num-nodes=1 \\ --machine-type=n1-standard-2 \\ --disk-size=30 \\ --no-enable-cloud-logging ä¸º kubectlè®¾ç½®å‡­è¯ã€‚\ngcloud container clusters get-credentials openfaas åˆ›å»ºä¸€ä¸ªé›†ç¾¤ç®¡ç†å‘˜è§’è‰²ç»‘å®š:\n$ kubectl create clusterrolebinding \u0026#34;cluster-admin-$(whoami)\u0026#34; \\ --clusterrole=cluster-admin \\ --user=\u0026#34;$(gcloud config get-value core/account)\u0026#34; ç°åœ¨éªŒè¯kubectlå·²ç»é…ç½®åˆ° GKE é›†ç¾¤ã€‚\n$ kubectl get nodes NAME STATUS ROLES AGE VERSION gke-name-default-pool-eceef152-qjmt Ready \u0026lt;none\u0026gt; 1h v1.10.7-gke.2 éƒ¨ç½² OpenFaaS éƒ¨ç½² OpenFaaS çš„è¯´æ˜ä¼šæ—¶å¸¸æ”¹å˜ï¼Œå› ä¸ºæˆ‘ä»¬åŠªåŠ›ä½¿å…¶æ›´åŠ ç®€å•ã€‚\nå®‰è£… OpenFaaS æœ‰ä¸‰ç§æ–¹å¼æ¥å®‰è£… OpenFaaSï¼Œä½ å¯ä»¥é€‰æ‹©å¯¹ä½ å’Œä½ çš„å›¢é˜Ÿæœ‰æ„ä¹‰çš„æ–¹å¼ã€‚åœ¨è¿™ä¸ªç ”è®¨ä¼šä¸Šï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®˜æ–¹çš„å®‰è£…ç¨‹åºarkadeã€‚\n  arkadeåº”ç”¨å®‰è£… - arkade ä½¿ç”¨å…¶å®˜æ–¹èˆµæ‰‹å›¾å®‰è£… OpenFaaSã€‚å®ƒè¿˜å¯ä»¥é€šè¿‡ç”¨æˆ·å‹å¥½çš„ CLI æä¾›å…¶ä»–è½¯ä»¶ï¼Œå¦‚cert-managerå’Œnginx-ingressã€‚è¿™æ˜¯æœ€ç®€å•å’Œæœ€å¿«é€Ÿçš„æ–¹å¼æ¥å¯åŠ¨å’Œè¿è¡Œã€‚\n  èˆµæ‰‹å›¾ - ç†æ™ºçš„é»˜è®¤å€¼ï¼Œæ˜“äºé€šè¿‡ YAML æˆ– CLI æ ‡å¿—è¿›è¡Œé…ç½®ã€‚å®‰å…¨é€‰é¡¹ï¼Œå¦‚ Helm æ¨¡æ¿æˆ– Helm 3ï¼Œä¹Ÿé€‚ç”¨äºé‚£äº›åœ¨é™åˆ¶æ€§ç¯å¢ƒä¸­å·¥ä½œçš„äººã€‚\n  æ™®é€š YAML æ–‡ä»¶ - ç¡¬ç¼–ç çš„è®¾ç½®/å€¼ã€‚åƒ Kustomize è¿™æ ·çš„å·¥å…·å¯ä»¥æä¾›è‡ªå®šä¹‰è®¾ç½®\n  ç”¨arkadeå®‰è£…  è·å– arkade  å¯¹äº MacOS / Linux:\n# MacOS users may need to run \u0026#34;bash\u0026#34; first if this command fails curl -SLsf https://dl.get-arkade.dev/ | sudo sh å¯¹äº Windowsã€‚\ncurl -SLsf https://dl.get-arkade.dev/ | sh  å®‰è£… OpenFaaS åº”ç”¨ç¨‹åº  å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æä¾› LoadBalancers çš„ç®¡ç†äº‘ Kubernetes æœåŠ¡ï¼Œé‚£ä¹ˆè¿è¡Œä»¥ä¸‹å†…å®¹ã€‚\narkade install openfaas --load-balancer  æ³¨æ„ï¼š--load-balanceræ ‡å¿—çš„é»˜è®¤å€¼æ˜¯falseï¼Œæ‰€ä»¥é€šè¿‡è¯¥æ ‡å¿—ï¼Œå®‰è£…å°†å‘ä½ çš„äº‘æä¾›å•†è¯·æ±‚ä¸€ä¸ªã€‚\n å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æœ¬åœ° Kubernetes é›†ç¾¤æˆ–è™šæ‹Ÿæœºï¼Œé‚£ä¹ˆè¯·è¿è¡Œã€‚\narkade install openfaas åœ¨åé¢çš„å®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Kubernetes Ingress è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ TLS çš„è‡ªå®šä¹‰åŸŸã€‚\næˆ–è€…ç”¨ helm å®‰è£…ï¼ˆé«˜çº§ï¼‰ å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥ä½¿ç”¨helm chartçš„è¯´æ˜æ¥å®‰è£… OpenFaaSã€‚\nç™»å½•ä½ çš„ OpenFaaS ç½‘å…³  æ£€æŸ¥ç½‘å…³æ˜¯å¦å‡†å¤‡å¥½äº†  kubectl rollout status -n openfaas deploy/gateway å¦‚æœä½ ä½¿ç”¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œè™šæ‹Ÿæœºï¼Œæˆ–ä»»ä½•å…¶ä»–ç±»å‹çš„ Kubernetes åˆ†å¸ƒï¼Œè¯·è¿è¡Œä»¥ä¸‹å†…å®¹ã€‚\nkubectl port-forward svc/gateway -n openfaas 8080:8080 è¿™ä¸ªå‘½ä»¤å°†æ‰“å¼€ä¸€ä¸ªä» Kubernetes é›†ç¾¤åˆ°æœ¬åœ°è®¡ç®—æœºçš„éš§é“ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è®¿é—® OpenFaaS ç½‘å…³ã€‚è¿˜æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥è®¿é—® OpenFaaSï¼Œä½†è¿™å·²ç»è¶…å‡ºäº†æœ¬æ¬¡ç ”è®¨ä¼šçš„èŒƒå›´ã€‚\nä½ çš„ç½‘å…³ URL æ˜¯ã€‚http://127.0.0.1:8080\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç®¡ç†äº‘ Kubernetes æœåŠ¡ï¼Œé‚£ä¹ˆä»ä¸‹é¢çš„å‘½ä»¤ä¸­çš„EXTERNAL-IPå­—æ®µä¸­è·å– LoadBalancer çš„ IP åœ°å€æˆ– DNS æ¡ç›®ã€‚\nkubectl get svc -o wide gateway-external -n openfaas ä½ çš„ URL å°†æ˜¯ä¸Šé¢çš„ IP æˆ– DNS æ¡ç›®ï¼Œç«¯å£ä¸º8080ã€‚\n ç™»å½•ã€‚  export OPENFAAS_URL=\u0026#34;\u0026#34; # Populate as above  # This command retrieves your password PASSWORD=$(kubectl get secret -n openfaas basic-auth -o jsonpath=\u0026#34;{.data.basic-auth-password}\u0026#34; | base64 --decode; echo)  # This command logs in and saves a file to ~/.openfaas/config.yml echo -n $PASSWORD | faas-cli login --username admin --password-stdin  æ£€æŸ¥faas-cli listæ˜¯å¦å·¥ä½œã€‚  faas-cli list æ°¸ä¹…ä¿å­˜ä½ çš„ OpenFaaS URL ç¼–è¾‘~/.bashrcæˆ–~/.bash_profile\u0026ndash;å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒã€‚\nç°åœ¨æ·»åŠ ä»¥ä¸‹å†…å®¹\u0026ndash;æŒ‰ç…§ä½ ä¸Šé¢çœ‹åˆ°çš„ URL è¿›è¡Œä¿®æ”¹ã€‚\nexport OPENFAAS_URL=\u0026#34;\u0026#34; # populate as above ç°åœ¨è½¬åˆ°å®éªŒå®¤ 2\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab1b/","summary":"Lab 1 - ç”¨ Kubernetes è®¾ç½® OpenFaaS å®‰è£…æœ€æ–°çš„ kubectl ä½¿ç”¨ä¸‹é¢çš„è¯´æ˜æˆ–å®˜æ–¹æ–‡æ¡£ä¸ºä½ çš„æ“ä½œç³»ç»Ÿå®‰è£…kubectlã€‚\n Linux  export VER=$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt) curl -LO https://storage.googleapis.com/kubernetes-release/release/$VER/bin/linux/amd64/kubectl chmod +x kubectl mv kubectl /usr/local/bin/  MacOS  export VER=$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt) curl -LO https://storage.googleapis.com/kubernetes-release/release/$VER/bin/darwin/amd64/kubectl chmod +x kubectl mv kubectl /usr/local/bin/  Windows  export VER=$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt) curl -LO https://storage.googleapis.com/kubernetes-release/release/$VER/bin/windows/amd64/kubectl.exe chmod +x kubectl.exe mkdir -p $HOME/bin/ mv kubectl $HOME/bin/ è®¾ç½®ä¸€ä¸ª Kubernetes é›†ç¾¤ ä½ å¯ä»¥åœ¨ä½¿ç”¨ Kubernetes çš„åŒæ—¶æŒ‰ç…§å®éªŒè¿›è¡Œæ“ä½œï¼Œä½†ä½ å¯èƒ½éœ€è¦æ²¿é€”åšä¸€äº›å°æ”¹åŠ¨ã€‚ç½‘å…³çš„æœåŠ¡åœ°å€ä»http://gateway:8080æ”¹ä¸ºhttp://gateway.openfaas:8080ã€‚è¿™äº›å·®å¼‚å·²ç»å°½å¯èƒ½åœ°è¢«è®°å½•ä¸‹æ¥ï¼Œæ¯ä¸ªå®éªŒå®¤éƒ½æä¾›äº†æ›¿ä»£æ–¹æ¡ˆã€‚\nåœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šåˆ›å»ºä¸€ä¸ªæœ¬åœ°é›†ç¾¤ k3s ä½¿ç”¨ k3d å¦‚æœä½ çš„ç”µè„‘ä¸Šæœ‰ Dockerï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ Rancher å®éªŒå®¤æ‰˜ç®¡çš„k3då·¥å…·ã€‚å®ƒå®‰è£…äº†ä¸€ä¸ªè½»é‡çº§çš„ Kubernetes ç‰ˆæœ¬ï¼Œå«åšk3sï¼Œå¹¶åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨ä»»ä½•æœ‰ Docker çš„ç”µè„‘ä¸Šè¿è¡Œã€‚","title":"Openfaas Workshop Lab1b"},{"content":"Lab 1 - ä¸º OpenFaaS åšå‡†å¤‡ OpenFaaS éœ€è¦ä¸€ä¸ªKubernetesé›†ç¾¤æ¥è¿è¡Œã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤æˆ–å¤šèŠ‚ç‚¹é›†ç¾¤ï¼Œä¸ç®¡æ˜¯åœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿˜æ˜¯åœ¨äº‘ç«¯ã€‚\nä»»ä½• OpenFaaS å‡½æ•°çš„åŸºæœ¬åŸä»¶éƒ½æ˜¯ä¸€ä¸ª Docker é•œåƒï¼Œå®ƒæ˜¯ä½¿ç”¨faas-cliå·¥å…·é“¾æ„å»ºçš„ã€‚\nå‰ææ¡ä»¶ è®©æˆ‘ä»¬æ¥å®‰è£… Dockerã€OpenFaaS CLI ä»¥åŠè®¾ç½® Kubernetesã€‚\nDocker é€‚ç”¨äº Mac\n Docker CE for Mac Edge Edition  é€‚ç”¨äº Windows\n ä»…ä½¿ç”¨ Windows 10 Pro æˆ–ä¼ä¸šç‰ˆ å®‰è£…Docker CE for Windows   è¯·ç¡®ä¿é€šè¿‡ä½¿ç”¨ Windows ä»»åŠ¡æ é€šçŸ¥åŒºçš„ Docker èœå•æ¥ä½¿ç”¨Linuxå®¹å™¨çš„ Docker å®ˆæŠ¤ç¨‹åºã€‚\n  å®‰è£…Git Bash  å½“ä½ å®‰è£… git bash æ—¶ï¼Œé€‰æ‹©ä»¥ä¸‹é€‰é¡¹ã€‚install UNIX commandså’Œuse true-type fontã€‚\n æ³¨æ„ï¼šè¯·åœ¨æ‰€æœ‰æ­¥éª¤ä¸­ä½¿ç”¨Git Bashï¼šä¸è¦è¯•å›¾ä½¿ç”¨PowerShellã€WSLæˆ–Bash for Windowsã€‚\n Linux - Ubuntu æˆ– Debian\n Docker CE for Linux   ä½ å¯ä»¥ä»[Docker Store]ï¼ˆhttps://store.docker.comï¼‰å®‰è£… Docker CEã€‚\n æ³¨æ„ï¼šä½œä¸ºæœ€åçš„æ‰‹æ®µï¼Œå¦‚æœä½ æœ‰ä¸€å°ä¸å…¼å®¹çš„ PCï¼Œä½ å¯ä»¥åœ¨https://labs.play-with-docker.com/ä¸Šé¢ä½“éªŒã€‚\nOpenFaaS CLI ä½ å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„ bash è„šæœ¬æ¥å®‰è£… OpenFaaS CLIï¼Œbrewä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œä½†å¯èƒ½ä¼šè½åä¸€åˆ°ä¸¤ä¸ªç‰ˆæœ¬ã€‚\nåœ¨ MacOS æˆ– Linux ä¸‹ï¼Œåœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚\n# MacOS users may need to run \u0026#34;bash\u0026#34; first if this command fails $ curl -sLSf https://cli.openfaas.com | sudo sh å¯¹äº Windowsï¼Œåœ¨Git Bashä¸­è¿è¡Œè¿™ä¸ªã€‚\ncurl -sLSf https://cli.openfaas.com | sh  å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œä½ å¯ä»¥ä»releases pageæ‰‹åŠ¨ä¸‹è½½æœ€æ–°çš„faas-cli.exeã€‚ä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨æœ¬åœ°ç›®å½•æˆ–C:\\Windows\\è·¯å¾„ä¸­ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ä»å‘½ä»¤æç¤ºç¬¦ä¸­è·å¾—ã€‚\n æˆ‘ä»¬å°†ä½¿ç”¨faas-cliæ¥æ­å»ºæ–°çš„å‡½æ•°ï¼Œæ„å»ºã€éƒ¨ç½²å’Œè°ƒç”¨å‡½æ•°ã€‚ä½ å¯ä»¥é€šè¿‡faas-cli --helpæ‰¾åˆ° cli çš„å¯ç”¨å‘½ä»¤ã€‚\næµ‹è¯• faas-cliã€‚æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ– Git Bash çª—å£ï¼Œé”®å…¥\nfaas-cli help faas-cli version é…ç½® Docker Hub æ³¨å†Œä¸€ä¸ª Docker Hub è´¦æˆ·ã€‚Docker Hubå…è®¸ä½ åœ¨äº’è”ç½‘ä¸Šå‘å¸ƒä½ çš„ Docker é•œåƒï¼Œä»¥ä¾¿åœ¨å¤šèŠ‚ç‚¹é›†ç¾¤ä¸Šä½¿ç”¨æˆ–ä¸æ›´å¹¿æ³›çš„ç¤¾åŒºåˆ†äº«ã€‚æˆ‘ä»¬å°†åœ¨ç ”è®¨ä¼šæœŸé—´ä½¿ç”¨ Docker Hub æ¥å‘å¸ƒæˆ‘ä»¬çš„å‡½æ•°ã€‚\nä½ å¯ä»¥åœ¨è¿™é‡Œæ³¨å†Œã€‚Docker Hub\næ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ– Git Bash çª—å£ï¼Œç”¨ä½ ä¸Šé¢æ³¨å†Œçš„ç”¨æˆ·åç™»å½• Docker Hubã€‚\ndocker login  æ³¨æ„ï¼šæ¥è‡ªç¤¾åŒºçš„æç¤º\u0026ndash;å¦‚æœä½ åœ¨ Windows æœºå™¨ä¸Šè¯•å›¾è¿è¡Œè¿™ä¸ªå‘½ä»¤æ—¶é‡åˆ°é”™è¯¯ï¼Œé‚£ä¹ˆç‚¹å‡»ä»»åŠ¡æ ä¸­çš„ Docker for Windows å›¾æ ‡ï¼Œåœ¨é‚£é‡Œç™»å½• Dockerï¼Œè€Œä¸æ˜¯ ç™»å½•/åˆ›å»º Docker IDã€‚\n  ä¸ºæ–°é•œåƒè®¾ç½®ä½ çš„ OpenFaaS å‰ç¼€  OpenFaaS é•œåƒå­˜å‚¨åœ¨ Docker æ³¨å†Œè¡¨æˆ– Docker Hub ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œä½¿ä½ çš„ç”¨æˆ·åè‡ªåŠ¨æ·»åŠ åˆ°ä½ åˆ›å»ºçš„æ–°å‡½æ•°ä¸­ã€‚è¿™å°†åœ¨ç ”è®¨ä¼šè¿‡ç¨‹ä¸­ä¸ºä½ èŠ‚çœä¸€äº›æ—¶é—´ã€‚\nç¼–è¾‘~/.bashrcæˆ–~/.bash_profile\u0026ndash;å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒã€‚\nç°åœ¨æ·»åŠ ä»¥ä¸‹å†…å®¹\u0026ndash;æŒ‰ç…§ä½ ä¸Šé¢çœ‹åˆ°çš„ URL è¿›è¡Œä¿®æ”¹ã€‚\nexport OPENFAAS_PREFIX=\u0026#34;\u0026#34; # Populate with your Docker Hub username è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤ å®éªŒå®¤ä½¿ç”¨ Kubernetesï¼ŒSwarm å·²ç»ä¸å†è¢« OpenFaaS ç¤¾åŒºæ”¯æŒã€‚æœ‰äº›å®éªŒå®¤å¯ä»¥ç”¨äº faasdï¼Œä½†ä½ å¯èƒ½éœ€è¦æ”¹å˜å‘½ä»¤ï¼Œè€Œä¸”å½“ä½¿ç”¨ faasd çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æä¾›å¯¹è¯¥å®éªŒå®¤çš„æ”¯æŒã€‚\n Kubernetesã€‚Lab 1b  ","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab1/","summary":"Lab 1 - ä¸º OpenFaaS åšå‡†å¤‡ OpenFaaS éœ€è¦ä¸€ä¸ªKubernetesé›†ç¾¤æ¥è¿è¡Œã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤æˆ–å¤šèŠ‚ç‚¹é›†ç¾¤ï¼Œä¸ç®¡æ˜¯åœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿˜æ˜¯åœ¨äº‘ç«¯ã€‚\nä»»ä½• OpenFaaS å‡½æ•°çš„åŸºæœ¬åŸä»¶éƒ½æ˜¯ä¸€ä¸ª Docker é•œåƒï¼Œå®ƒæ˜¯ä½¿ç”¨faas-cliå·¥å…·é“¾æ„å»ºçš„ã€‚\nå‰ææ¡ä»¶ è®©æˆ‘ä»¬æ¥å®‰è£… Dockerã€OpenFaaS CLI ä»¥åŠè®¾ç½® Kubernetesã€‚\nDocker é€‚ç”¨äº Mac\n Docker CE for Mac Edge Edition  é€‚ç”¨äº Windows\n ä»…ä½¿ç”¨ Windows 10 Pro æˆ–ä¼ä¸šç‰ˆ å®‰è£…Docker CE for Windows   è¯·ç¡®ä¿é€šè¿‡ä½¿ç”¨ Windows ä»»åŠ¡æ é€šçŸ¥åŒºçš„ Docker èœå•æ¥ä½¿ç”¨Linuxå®¹å™¨çš„ Docker å®ˆæŠ¤ç¨‹åºã€‚\n  å®‰è£…Git Bash  å½“ä½ å®‰è£… git bash æ—¶ï¼Œé€‰æ‹©ä»¥ä¸‹é€‰é¡¹ã€‚install UNIX commandså’Œuse true-type fontã€‚\n æ³¨æ„ï¼šè¯·åœ¨æ‰€æœ‰æ­¥éª¤ä¸­ä½¿ç”¨Git Bashï¼šä¸è¦è¯•å›¾ä½¿ç”¨PowerShellã€WSLæˆ–Bash for Windowsã€‚\n Linux - Ubuntu æˆ– Debian","title":"Openfaas Workshop Lab1"},{"content":"openfaas-workshop è¿™æ˜¯ä¸€ä¸ªè‡ªå®šè¿›åº¦çš„ç ”è®¨ä¼šï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨ OpenFaaS æ„å»ºã€éƒ¨ç½²å’Œè¿è¡Œæ— æœåŠ¡å™¨å‡½æ•°ã€‚\nåœ¨è¿™ä¸ªå·¥ä½œåŠä¸­ï¼Œä½ å°†é¦–å…ˆæŠŠ OpenFaaS éƒ¨ç½²åˆ°ä½ çš„ç¬”è®°æœ¬ç”µè„‘æˆ–ä½¿ç”¨ Docker for Mac æˆ– Windows çš„è¿œç¨‹é›†ç¾¤ã€‚ç„¶åä½ å°†å¯¹ OpenFaaS çš„ç”¨æˆ·ç•Œé¢ã€CLI å’Œå‡½æ•°å•†åº—è¿›è¡Œæµ‹è¯•ã€‚åœ¨ç”¨ Python æ„å»ºã€éƒ¨ç½²å’Œè°ƒç”¨ä½ è‡ªå·±çš„æ— æœåŠ¡å™¨å‡½æ•°ä¹‹åï¼Œä½ å°†ç»§ç»­å­¦ä¹ ä»¥ä¸‹å†…å®¹ï¼šç”¨ pip ç®¡ç†ä¾èµ–å…³ç³»ï¼Œé€šè¿‡å®‰å…¨ç§˜å¯†å¤„ç† API ä»¤ç‰Œï¼Œç”¨ Prometheus ç›‘æ§å‡½æ•°ï¼Œå¼‚æ­¥è°ƒç”¨å‡½æ•°ä»¥åŠå°†å‡½æ•°è¿æ¥èµ·æ¥åˆ›å»ºåº”ç”¨ç¨‹åºã€‚å®éªŒçš„é«˜æ½®æ˜¯è®©ä½ åˆ›å»ºè‡ªå·±çš„ GitHub æœºå™¨äººï¼Œå¯ä»¥è‡ªåŠ¨å“åº”é—®é¢˜ã€‚åŒæ ·çš„æ–¹æ³•å¯ä»¥é€šè¿‡ IFTTT.com è¿æ¥åˆ°åœ¨çº¿äº‹ä»¶æµ\u0026ndash;è¿™å°†ä½¿ä½ èƒ½å¤Ÿå»ºç«‹æœºå™¨äººã€è‡ªåŠ¨å›å¤å™¨ä»¥åŠä¸ç¤¾äº¤åª’ä½“å’Œç‰©è”ç½‘è®¾å¤‡çš„é›†æˆã€‚\næœ€åï¼Œå®éªŒå®¤æ¶µç›–äº†æ›´å¤šçš„é«˜çº§ä¸»é¢˜ï¼Œå¹¶ç»™å‡ºäº†è¿›ä¸€æ­¥å­¦ä¹ çš„å»ºè®®ã€‚\nè¯‘æ–‡\n æ—¥æœ¬èª ç®€ä½“ä¸­æ–‡  å…è´¹å­¦ä¹ ï¼Œä½œä¸º GitHub èµåŠ©å•†è¡¨ç¤ºæ„Ÿè°¢ OpenFaaS è¿åŒè¿™äº›ææ–™éƒ½æ˜¯å…è´¹æä¾›çš„ï¼Œéœ€è¦æ—¶é—´å’Œç²¾åŠ›æ¥ç»´æŠ¤ã€‚\n æˆä¸ºOpenFaaS on GitHubçš„èµåŠ©å•†ã€‚  è¦æ±‚ æˆ‘ä»¬åœ¨Lab 1ä¸­è®²è§£äº†å¦‚ä½•å®‰è£…è¿™äº›éœ€æ±‚ã€‚è¯·åœ¨å‚åŠ è®²å¸ˆæŒ‡å¯¼çš„ç ”è®¨ä¼šä¹‹å‰åšLab 1ã€‚\n å‡½æ•°å°†ç”¨ Python è¯­è¨€ç¼–å†™ï¼Œæ‰€ä»¥æœ‰ç¼–ç¨‹æˆ–è„šæœ¬ç»éªŒè€…ä¼˜å…ˆã€‚ å®‰è£…æ¨èçš„ä»£ç ç¼–è¾‘å™¨/IDE VSCode å¯¹äº Windowsï¼Œå®‰è£…Git Bash é¦–é€‰çš„æ“ä½œç³»ç»Ÿã€‚MacOS, Windows 10 Pro/Enterprise, Ubuntu Linux  Dockerã€‚\n Docker CE for Mac/Windows è¾¹ç¼˜ç‰ˆã€‚ Docker CE for Linux   æ³¨æ„ï¼šä½œä¸ºæœ€åçš„æ‰‹æ®µï¼Œå¦‚æœä½ æœ‰ä¸€å°ä¸å…¼å®¹çš„ PCï¼Œä½ å¯ä»¥åœ¨https://labs.play-with-docker.com/ ä¸Šè¿è¡Œè¯¥ç ”è®¨ä¼šã€‚\n æ•™å‘˜æŒ‡å¯¼çš„ç ”è®¨ä¼š å¦‚æœä½ æ­£åœ¨å‚åŠ ä¸€ä¸ªç”±æ•™å¸ˆæŒ‡å¯¼çš„ç ”è®¨ä¼šï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åˆ†äº«ä¸€ä¸ªé“¾æ¥ï¼Œä»¥åŠ å…¥ OpenFaaS Slack ç¤¾åŒºã€‚ä½¿ç”¨ç ”è®¨ä¼šçš„æŒ‡å®šé¢‘é“æ¥è®¨è®ºè¯„è®ºã€é—®é¢˜å’Œå»ºè®®ã€‚\næŒ‘é€‰ä½ çš„è½¨é“ åœ¨å®éªŒå®¤ 1 ä¸­ï¼Œä½ å°†é€‰æ‹©ä½ çš„è½¨é“ï¼Œç„¶ååœ¨æ•´ä¸ªå®éªŒå®¤ä¸­æ³¨æ„ä½ çš„è½¨é“çš„å®¹å™¨åè°ƒå™¨æ‰€éœ€çš„ä»»ä½•ç‰¹æ®Šå‘½ä»¤ã€‚\nKubernetes ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ OpenFaaS å­¦ä¹  Kubernetes ä¸Šçš„ Serverlessã€‚\nOpenFaaS ç¤¾åŒºçš„å»ºè®®æ˜¯ï¼Œä½ åœ¨ç”Ÿäº§ä¸­è¿è¡Œ Kubernetesï¼Œä½†ä½ èƒ½çš„æ‰€æœ‰çŸ¥è¯†éƒ½æ˜¯å¯ä»¥è½¬ç§»çš„ï¼Œå‡½æ•°ä¹Ÿä¸å¿…é‡æ–°æ„å»ºã€‚\nLab 1 - Prepare for OpenFaaS  å®‰è£…å‰ææ¡ä»¶ ç”¨ Kubernetes å»ºç«‹ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤ Docker Hub è´¦æˆ· OpenFaaS CLI éƒ¨ç½² OpenFaaS  Lab 2 - Test things out  ä½¿ç”¨ UI é—¨æˆ· é€šè¿‡å‡½æ•°å•†åº—è¿›è¡Œéƒ¨ç½² äº†è§£ CLI çš„æƒ…å†µ ç”¨ Prometheus æŸ¥æ‰¾æŒ‡æ ‡  Lab 3 - Introduction to Functions  æ¶æ„æˆ–ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•° å»ºç«‹ astronaut-finder å‡½æ•° ç”¨pipæ·»åŠ ä¾èµ– æ•…éšœæ’é™¤ï¼šæ‰¾åˆ°å®¹å™¨çš„æ—¥å¿— æ•…éšœæ’é™¤ï¼šç”¨write_debugè¿›è¡Œç²—ç•¥è¾“å‡º ä½¿ç”¨è‡ªå®šä¹‰å’Œç¬¬ä¸‰æ–¹è¯­è¨€æ¨¡æ¿ ä½¿ç”¨æ¨¡æ¿å•†åº—å‘ç°ç¤¾åŒºæ¨¡æ¿  Lab 4 - Go deeper with functions  é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥é…ç½® *åœ¨éƒ¨ç½²æ—¶ä½¿ç”¨ yaml  åŠ¨æ€åœ°ä½¿ç”¨ HTTP ä¸Šä¸‹æ–‡\u0026ndash;æŸ¥è¯¢å­—ç¬¦ä¸²/å¤´ä¿¡æ¯ç­‰   å®‰å…¨æ€§ï¼šåªè¯»çš„æ–‡ä»¶ç³»ç»Ÿ åˆ©ç”¨æ—¥å¿— åˆ›å»ºå·¥ä½œæµ  åœ¨å®¢æˆ·ç«¯ä¸²è”å‡½æ•° *ä»å¦ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•°    Lab 5 - Create a GitHub bot  å»ºç«‹ issue-bot\u0026ndash;GitHub é—®é¢˜çš„è‡ªåŠ¨å›å¤è€…\n  è·å¾—ä¸€ä¸ª GitHub è´¦æˆ· ç”¨ ngrok å»ºç«‹ä¸€ä¸ªéš§é“ åˆ›å»ºä¸€ä¸ª webhook æ¥æ”¶å™¨issue-botã€‚ æ¥æ”¶æ¥è‡ª GitHub çš„ webhooks éƒ¨ç½² SentimentAnalysis å‡½æ•° é€šè¿‡ GitHub çš„ API åº”ç”¨æ ‡ç­¾ å®Œæˆå‡½æ•°  Lab 6 - HTML for your functions  ä»ä¸€ä¸ªå‡½æ•°ç”Ÿæˆå¹¶è¿”å›åŸºæœ¬çš„ HTML ä»ç£ç›˜è¯»å–å¹¶è¿”å›ä¸€ä¸ªé™æ€ HTML æ–‡ä»¶ ä¸å…¶ä»–å‡½æ•°åä½œ  Lab 7 - Asynchronous Functions   åŒæ­¥åœ°ä¸å¼‚æ­¥åœ°è°ƒç”¨ä¸€ä¸ªå‡½æ•°\n  æŸ¥çœ‹é˜Ÿåˆ—å·¥ä½œè€…çš„æ—¥å¿—\n  åœ¨ requestbin å’Œ ngrok ä¸­ä½¿ç”¨X-Callback-Urlã€‚\n  Lab 8 - Advanced Feature - Timeouts  ç”¨read_timeoutè°ƒæ•´è¶…æ—¶æ—¶é—´ é€‚åº”æ›´é•¿çš„è¿è¡Œå‡½æ•°  Lab 9 - Advanced Feature - Auto-scaling  æŸ¥çœ‹è‡ªåŠ¨ç¼©æ”¾çš„æ“ä½œ  å…³äºæœ€å°å’Œæœ€å¤§å¤åˆ¶çš„ä¸€äº›è§è§£ å‘ç°å¹¶è®¿é—®æœ¬åœ° Prometheus æ‰§è¡Œå’Œæ™®ç½—ç±³ä¿®æ–¯æŸ¥è¯¢ ä½¿ç”¨ curl è°ƒç”¨ä¸€ä¸ªå‡½æ•° è§‚å¯Ÿè‡ªåŠ¨ç¼©æ”¾çš„å¯åŠ¨    Lab 10 - Advanced Feature - Secrets  è°ƒæ•´ issue-bot ä»¥ä½¿ç”¨ä¸€ä¸ªç§˜å¯†  ç”¨ faas-cli åˆ›å»ºä¸€ä¸ª Kubernetes ç§˜å¯† åœ¨å‡½æ•°ä¸­è®¿é—®ç§˜å¯†    Lab 11 - Advanced feature - Trust with HMAC  ä½¿ç”¨ HMAC å¯¹å‡½æ•°åº”ç”¨ä¿¡ä»»  ä½ å¯ä»¥ä»ç¬¬ä¸€ä¸ªå®éªŒå®¤Lab 1å¼€å§‹ã€‚\næ‹†è§£/æ¸…ç† ä½ å¯ä»¥æ‰¾åˆ°å¦‚ä½•åœæ­¢å’Œåˆ é™¤ OpenFaaSè¿™é‡Œ\næ¥ä¸‹æ¥çš„æ­¥éª¤ å¦‚æœä½ åœ¨ä¸€ä¸ªæ•™å¸ˆæŒ‡å¯¼çš„ç ”è®¨ä¼šä¸Šï¼Œå¹¶ä¸”å·²ç»å®Œæˆäº†å®éªŒï¼Œä½ å¯èƒ½æƒ³å›åˆ°å®éªŒå®¤ï¼Œç¼–è¾‘/ä¿®æ”¹ä»£ç å’Œå€¼ï¼Œæˆ–è€…è¿›è¡Œä¸€äº›ä½ è‡ªå·±çš„å®éªŒã€‚\nä»¥ä¸‹æ˜¯ä¸€äº›åç»­ä»»åŠ¡/ä¸»é¢˜çš„æƒ³æ³•ã€‚\nOpenFaaS äº‘ è¯•è¯• OpenFaaS çš„å¤šç”¨æˆ·ç®¡ç†ä½“éªŒ\u0026ndash;åœ¨ç¤¾åŒºé›†ç¾¤ä¸Šï¼Œæˆ–è€…é€šè¿‡æ‰˜ç®¡ä½ è‡ªå·±çš„ OpenFaaS äº‘ã€‚\n Docs: OpenFaaS Cloud  TLS  ç”¨ Kubernetes Ingress åœ¨ä½ çš„ç½‘å…³ä¸Šå¯ç”¨ HTTPS  CI/CD è®¾ç½® Jenkinsã€Google Cloud Build æˆ– GitLabï¼Œä½¿ç”¨ OpenFaaS CLI æ„å»ºå’Œéƒ¨ç½²ä½ è‡ªå·±çš„å‡½æ•°ã€‚\n CI/CD ä»‹ç»  å­˜å‚¨/æ•°æ®åº“   ç”¨ Minio å°è¯•å¼€æºå¯¹è±¡å­˜å‚¨\n  å°è¯•ç”¨ Mongo å­˜å‚¨æ•°æ®çš„ OpenFaaS\n  ä»ªå™¨ä»ªè¡¨/ç›‘æ§  æ¢ç´¢ Prometheus ä¸­å¯ç”¨çš„æŒ‡æ ‡  å…¶ä»–åšæ–‡å’Œæ•™ç¨‹   OpenFaaS åšå®¢ä¸Šçš„æ•™ç¨‹\n  ç¤¾åŒºåšå®¢æ–‡ç« \n  é™„å½• é™„å½•åŒ…å«ä¸€äº›é¢å¤–çš„å†…å®¹ã€‚\nAcknowledgements æ„Ÿè°¢@iyovcheva, @BurtonR, @johnmccabe, @laurentgrangeau, @stefanprodan, @kenfdev, @templum \u0026amp; @rgee0 å¯¹å®éªŒå®¤çš„è´¡çŒ®ã€æµ‹è¯•å’Œç¿»è¯‘ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop/","summary":"openfaas-workshop è¿™æ˜¯ä¸€ä¸ªè‡ªå®šè¿›åº¦çš„ç ”è®¨ä¼šï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨ OpenFaaS æ„å»ºã€éƒ¨ç½²å’Œè¿è¡Œæ— æœåŠ¡å™¨å‡½æ•°ã€‚\nåœ¨è¿™ä¸ªå·¥ä½œåŠä¸­ï¼Œä½ å°†é¦–å…ˆæŠŠ OpenFaaS éƒ¨ç½²åˆ°ä½ çš„ç¬”è®°æœ¬ç”µè„‘æˆ–ä½¿ç”¨ Docker for Mac æˆ– Windows çš„è¿œç¨‹é›†ç¾¤ã€‚ç„¶åä½ å°†å¯¹ OpenFaaS çš„ç”¨æˆ·ç•Œé¢ã€CLI å’Œå‡½æ•°å•†åº—è¿›è¡Œæµ‹è¯•ã€‚åœ¨ç”¨ Python æ„å»ºã€éƒ¨ç½²å’Œè°ƒç”¨ä½ è‡ªå·±çš„æ— æœåŠ¡å™¨å‡½æ•°ä¹‹åï¼Œä½ å°†ç»§ç»­å­¦ä¹ ä»¥ä¸‹å†…å®¹ï¼šç”¨ pip ç®¡ç†ä¾èµ–å…³ç³»ï¼Œé€šè¿‡å®‰å…¨ç§˜å¯†å¤„ç† API ä»¤ç‰Œï¼Œç”¨ Prometheus ç›‘æ§å‡½æ•°ï¼Œå¼‚æ­¥è°ƒç”¨å‡½æ•°ä»¥åŠå°†å‡½æ•°è¿æ¥èµ·æ¥åˆ›å»ºåº”ç”¨ç¨‹åºã€‚å®éªŒçš„é«˜æ½®æ˜¯è®©ä½ åˆ›å»ºè‡ªå·±çš„ GitHub æœºå™¨äººï¼Œå¯ä»¥è‡ªåŠ¨å“åº”é—®é¢˜ã€‚åŒæ ·çš„æ–¹æ³•å¯ä»¥é€šè¿‡ IFTTT.com è¿æ¥åˆ°åœ¨çº¿äº‹ä»¶æµ\u0026ndash;è¿™å°†ä½¿ä½ èƒ½å¤Ÿå»ºç«‹æœºå™¨äººã€è‡ªåŠ¨å›å¤å™¨ä»¥åŠä¸ç¤¾äº¤åª’ä½“å’Œç‰©è”ç½‘è®¾å¤‡çš„é›†æˆã€‚\næœ€åï¼Œå®éªŒå®¤æ¶µç›–äº†æ›´å¤šçš„é«˜çº§ä¸»é¢˜ï¼Œå¹¶ç»™å‡ºäº†è¿›ä¸€æ­¥å­¦ä¹ çš„å»ºè®®ã€‚\nè¯‘æ–‡\n æ—¥æœ¬èª ç®€ä½“ä¸­æ–‡  å…è´¹å­¦ä¹ ï¼Œä½œä¸º GitHub èµåŠ©å•†è¡¨ç¤ºæ„Ÿè°¢ OpenFaaS è¿åŒè¿™äº›ææ–™éƒ½æ˜¯å…è´¹æä¾›çš„ï¼Œéœ€è¦æ—¶é—´å’Œç²¾åŠ›æ¥ç»´æŠ¤ã€‚\n æˆä¸ºOpenFaaS on GitHubçš„èµåŠ©å•†ã€‚  è¦æ±‚ æˆ‘ä»¬åœ¨Lab 1ä¸­è®²è§£äº†å¦‚ä½•å®‰è£…è¿™äº›éœ€æ±‚ã€‚è¯·åœ¨å‚åŠ è®²å¸ˆæŒ‡å¯¼çš„ç ”è®¨ä¼šä¹‹å‰åšLab 1ã€‚\n å‡½æ•°å°†ç”¨ Python è¯­è¨€ç¼–å†™ï¼Œæ‰€ä»¥æœ‰ç¼–ç¨‹æˆ–è„šæœ¬ç»éªŒè€…ä¼˜å…ˆã€‚ å®‰è£…æ¨èçš„ä»£ç ç¼–è¾‘å™¨/IDE VSCode å¯¹äº Windowsï¼Œå®‰è£…Git Bash é¦–é€‰çš„æ“ä½œç³»ç»Ÿã€‚MacOS, Windows 10 Pro/Enterprise, Ubuntu Linux  Dockerã€‚\n Docker CE for Mac/Windows è¾¹ç¼˜ç‰ˆã€‚ Docker CE for Linux   æ³¨æ„ï¼šä½œä¸ºæœ€åçš„æ‰‹æ®µï¼Œå¦‚æœä½ æœ‰ä¸€å°ä¸å…¼å®¹çš„ PCï¼Œä½ å¯ä»¥åœ¨https://labs.","title":"Openfaas Workshop"},{"content":" æœ‰æ•ˆçš„å¤æ‚ç³»ç»Ÿæ€»æ˜¯ä»ç®€å•\n ","permalink":"https://zhenfeng-zhu.github.io/post/streaming-101/","summary":" æœ‰æ•ˆçš„å¤æ‚ç³»ç»Ÿæ€»æ˜¯ä»ç®€å•\n ","title":"Streaming 101"},{"content":"openfaas https://github.com/openfaas/workshop/blob/master/lab1b.md\nå®‰è£… docker brew install homebrew/cask/docker å®‰è£…å•èŠ‚ç‚¹ K8S brew install k3d é…ç½®å•èŠ‚ç‚¹ K8S é›†ç¾¤\nk3d cluster create CLUSTER_NAME  k3d kubeconfig merge CLUSTER_NAME --kubeconfig-switch-context  kubectl get pods --all-namespaces å®‰è£… arkade curl -SLsf https://dl.get-arkade.dev/ | sudo sh å®‰è£… openfaas å®¢æˆ·ç«¯ faas-cli brew install faas-cli å®‰è£… openfaas server ç«¯ arkade install openfaas é…ç½® openfaas çš„ ui ç•Œé¢\nkubectl rollout status -n openfaas deploy/gateway  kubectl port-forward svc/gateway -n openfaas 8080:8080 è¿™æ ·å°±å¯ä»¥åœ¨æµè§ˆå™¨é‡Œè¾“å…¥ 127.0.0.1:8080 è¿›å…¥åˆ° openfaas çš„ ui ç•Œé¢äº†ã€‚\nä½†æ˜¯å½“ä½ æ‰“å¼€é¡µé¢çš„æ—¶å€™ï¼Œè¦è¾“å…¥å¯†ç ï¼Œé‚£å°±éœ€è¦ä¸‹é¢çš„æ“ä½œï¼š\n# This command retrieves your password PASSWORD=$(kubectl get secret -n openfaas basic-auth -o jsonpath=\u0026#34;{.data.basic-auth-password}\u0026#34; | base64 --decode; echo)  # This command logs in and saves a file to ~/.openfaas/config.yml echo -n $PASSWORD | faas-cli login --username admin --password-stdin æˆ–è€…ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼Œæ‹¿åˆ°å¯†ç ï¼š\necho $(kubectl get secret -n openfaas basic-auth -o jsonpath=\u0026#34;{.data.basic-auth-password}\u0026#34; | base64 --decode; echo) ç”¨æˆ·åæ˜¯ adminï¼Œå¯†ç è¾“å…¥åˆ°æµè§ˆå™¨é‡Œå³å¯ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/k3d-with-openfaas/","summary":"openfaas https://github.com/openfaas/workshop/blob/master/lab1b.md\nå®‰è£… docker brew install homebrew/cask/docker å®‰è£…å•èŠ‚ç‚¹ K8S brew install k3d é…ç½®å•èŠ‚ç‚¹ K8S é›†ç¾¤\nk3d cluster create CLUSTER_NAME  k3d kubeconfig merge CLUSTER_NAME --kubeconfig-switch-context  kubectl get pods --all-namespaces å®‰è£… arkade curl -SLsf https://dl.get-arkade.dev/ | sudo sh å®‰è£… openfaas å®¢æˆ·ç«¯ faas-cli brew install faas-cli å®‰è£… openfaas server ç«¯ arkade install openfaas é…ç½® openfaas çš„ ui ç•Œé¢\nkubectl rollout status -n openfaas deploy/gateway  kubectl port-forward svc/gateway -n openfaas 8080:8080 è¿™æ ·å°±å¯ä»¥åœ¨æµè§ˆå™¨é‡Œè¾“å…¥ 127.","title":"K3d With Openfaas"},{"content":" é¢å‘å¯¹è±¡ä¸æ˜¯è®¾è®¡ä»£ç çš„å”¯ä¸€æ–¹æ³• å‡½æ•°å¼ç¼–ç¨‹ä¸ä¸€å®šæ˜¯å¤æ‚å’Œçº¯æ•°å­¦çš„ ç¼–ç¨‹çš„åŸºç¡€ä¸æ˜¯èµ‹å€¼ã€if è¯­å¥å’Œå¾ªç¯ å¹¶å‘ä¸ä¸€å®šéœ€è¦é”ã€ä¿¡å·é‡ã€ç›‘è§†å™¨ç­‰ç±»ä¼¼çš„ä¸œè¥¿ è¿›ç¨‹ä¸å¿…æ¶ˆè€—å¤§é‡çš„èµ„æº å…ƒç¼–ç¨‹ä¸åªæ˜¯è¯­è¨€çš„é™„å±å“ å³ä½¿ç¼–ç¨‹æ˜¯ä½ çš„å·¥ä½œï¼Œä¹Ÿåº”è¯¥æ˜¯å……æ»¡ä¹è¶£çš„  ","permalink":"https://zhenfeng-zhu.github.io/post/%E6%8D%A2%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%80%9D%E8%80%83/","summary":" é¢å‘å¯¹è±¡ä¸æ˜¯è®¾è®¡ä»£ç çš„å”¯ä¸€æ–¹æ³• å‡½æ•°å¼ç¼–ç¨‹ä¸ä¸€å®šæ˜¯å¤æ‚å’Œçº¯æ•°å­¦çš„ ç¼–ç¨‹çš„åŸºç¡€ä¸æ˜¯èµ‹å€¼ã€if è¯­å¥å’Œå¾ªç¯ å¹¶å‘ä¸ä¸€å®šéœ€è¦é”ã€ä¿¡å·é‡ã€ç›‘è§†å™¨ç­‰ç±»ä¼¼çš„ä¸œè¥¿ è¿›ç¨‹ä¸å¿…æ¶ˆè€—å¤§é‡çš„èµ„æº å…ƒç¼–ç¨‹ä¸åªæ˜¯è¯­è¨€çš„é™„å±å“ å³ä½¿ç¼–ç¨‹æ˜¯ä½ çš„å·¥ä½œï¼Œä¹Ÿåº”è¯¥æ˜¯å……æ»¡ä¹è¶£çš„  ","title":"æ¢ä¸€ç§æ–¹å¼æ€è€ƒ"},{"content":"é¦–å…ˆæŠŠæ‰€æœ‰çš„ vim ç›¸å…³çš„éƒ½åˆ é™¤ cd  rm -rf .vim* åˆ›å»ºè‡ªå·±çš„.vimrc vim .vimrc ä¸€äº›åŸºæœ¬çš„è®¾ç½® åœ¨.vimrc ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç \n\u0026#34; basic set set number set noswapfile set encoding=utf-8 set fileencodings=utf-8,gb18030 set backspace=eol,start,indent set laststatus=2 set colorcolumn=80 set cursorline set linebreak set autoindent set ignorecase set smartcase set ruler set diffopt+=internal,indent-heuristic,algorithm:patience set showcmd set clipboard^=unnamed,unnamedplus set showmode set mouse=a set tabstop=2 set shiftwidth=4 set expandtab set softtabstop=2 set showmatch set incsearch set nobackup set autoread set wildmenu set wildmode=longest:list,full set nofoldenable  filetype plugin indent on syntax on æœ‰äº†ä¸Šé¢çš„è®¾ç½®ï¼Œä¼šè®©ä½ çš„ vim æ›´å¥½ç”¨ä¸€äº›ã€‚\næ¯ä¸ªå‚æ•°çš„å«ä¹‰ï¼Œå¯ä»¥çœ‹ä¸‹é˜®ä¸€å³°å†™çš„vim é…ç½®å…¥é—¨\nå®‰è£… vim-plug curl -fLo ~/.vim/autoload/plug.vim --create-dirs \\  https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim æˆ‘æ˜¯ç”¨ vim-plug æ¥ç®¡ç† vim çš„æ’ä»¶é…ç½®çš„ï¼Œç”¨èµ·æ¥æ¯”è¾ƒç®€å•ã€‚\nå®ƒçš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼ŒæŠŠ github çš„ vim é…ç½® clone ä¸‹æ¥ï¼Œç„¶ååŠ è½½ã€‚\nå®‰è£…ä¸€äº›æ’ä»¶ åœ¨.vimrc ä¸­ç»§ç»­æ·»åŠ ä¸‹é¢çš„ä»£ç \n\u0026#34; Plugs call plug#begin() Plug \u0026#39;luochen1990/rainbow\u0026#39; Plug \u0026#39;jiangmiao/auto-pairs\u0026#39; Plug \u0026#39;mechatroner/rainbow_csv\u0026#39; Plug \u0026#39;liuchengxu/space-vim-theme\u0026#39; Plug \u0026#39;lvht/mru\u0026#39; Plug \u0026#39;preservim/tagbar\u0026#39; Plug \u0026#39;preservim/nerdtree\u0026#39; Plug \u0026#39;Xuyuanp/nerdtree-git-plugin\u0026#39; Plug \u0026#39;ryanoasis/vim-devicons\u0026#39; Plug \u0026#39;liuchengxu/nerdtree-dash\u0026#39; Plug \u0026#39;fatih/vim-go\u0026#39;, { \u0026#39;do\u0026#39;: \u0026#39;:GoUpdateBinaries\u0026#39; } Plug \u0026#39;godlygeek/tabular\u0026#39; Plug \u0026#39;plasticboy/vim-markdown\u0026#39; Plug \u0026#39;liuchengxu/eleline.vim\u0026#39; Plug \u0026#39;tpope/vim-fugitive\u0026#39; call plug#end() è¿™äº›æ˜¯æˆ‘æ¯”è¾ƒå¸¸ç”¨çš„æ’ä»¶\n rainbow æ˜¯ä¸€ä¸ªæ¯ä¸ªæ‹¬å·éƒ½ç”¨ä¸åŒé¢œè‰²åŒºåˆ†ï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§ auto-pairs æ˜¯è‡ªåŠ¨è¡¥å…¨æ‹¬å· rainbow_csv æ˜¯æ‰“å¼€ csv æ–‡ä»¶æ›´å¥½çœ‹ä¸€äº›çš„æ’ä»¶ space-vim-theme æ˜¯ vim çš„ä¸€ä¸ªä¸»é¢˜ mru æ˜¯æœ€è¿‘æœ€å¸¸ä½¿ç”¨çš„æ–‡ä»¶ tagbar æ˜¾ç¤ºä»£ç ç»“æ„çš„ nerdtree + nerdtree-git-plugin + vim-devicons + nerdtree-dash è¿™å‡ ä¸ªæ­é…èµ·æ¥ï¼Œå±•ç¤ºä¸€ä¸ªæ›´å¥½çœ‹çš„æ–‡ä»¶ç›®å½• vim-go å†™ go å¿…å¤‡ tabular + vim-markdown å†™ markdown å¿…å¤‡çš„ eleline çŠ¶æ€æ æ›´å¥½çœ‹ä¸€äº› vim-fugitive vim çš„ git æ’ä»¶  æ’ä»¶çš„è‡ªå®šä¹‰è®¾ç½® å®‰è£…äº†è¿™ä¹ˆå¤šæ’ä»¶ï¼Œä¸€èˆ¬å¯èƒ½ä¼šè‡ªå®šä¹‰ä¸€ä¸‹ï¼Œæœ‰äº›æ’ä»¶éƒ½æä¾›äº†ä¸€äº›å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ let g:xxx çš„æ–¹å¼å»è‡ªå®šä¹‰\nè¿™äº›è®¾ç½®ä¹Ÿæ˜¯åœ¨ vimrc ä¸­ï¼Œè¦åœ¨æ’ä»¶å®‰è£…çš„ä¸‹é¢\n\u0026#34; plug settings let g:rainbow_active=1 keymap çš„è®¾ç½® æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€äº›å¿«æ·é”®åŠ å¿«æ“ä½œã€‚\nvim æœ‰ä¸€ä¸ª leader é”®ï¼Œè¿™ä¸ªé”®çš„ä½œç”¨æ˜¯æŒ‰ä¸‹ä¹‹åï¼Œå†æŒ‰åˆ«çš„é”®ï¼Œè§¦å‘ä¸€äº›å‘½ä»¤ã€‚ ä¹‹æ‰€ä»¥æœ‰è¿™ä¸ª leader é”®ï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢ç”¨æˆ·è‡ªå·±çš„å¿«æ·é”®ï¼Œè¦†ç›–äº†é»˜è®¤çš„ã€‚ vim é»˜è®¤çš„ leader é”®æ˜¯|,ä¹Ÿå°±æ˜¯ enter ä¸Šé¢é‚£ä¸ªä¸­ç«–çº¿ã€‚\n\u0026#34; key map nnoremap \u0026lt;silent\u0026gt; \u0026lt;c-m\u0026gt; :Mru\u0026lt;cr\u0026gt; nnoremap \u0026lt;silent\u0026gt; \u0026lt;c-p\u0026gt; :call fzf#Open()\u0026lt;cr\u0026gt; nnoremap \u0026lt;silent\u0026gt; \u0026lt;leader\u0026gt;t :TagbarToggle\u0026lt;cr\u0026gt; nnoremap \u0026lt;silent\u0026gt; \u0026lt;leader\u0026gt;e :NERDTreeToggle\u0026lt;cr\u0026gt; nnoremap \u0026lt;silent\u0026gt; \u0026lt;leader\u0026gt;f :NERDTreeFind\u0026lt;cr\u0026gt; nnoremap \u0026lt;silent\u0026gt; \u0026lt;leader\u0026gt;c :call lv#Term()\u0026lt;cr\u0026gt; å¦‚æœä½ æƒ³å’Œæˆ‘çš„ä¸€æ · å‚è€ƒè¿™ä¸ª github é¡¹ç›®ï¼šhttps://github.com/zhenfeng-zhu/vim\ngit clone --recursive https://github.com/zhenfeng-zhu/vim.git ~/.vim  ln -s ~/.vim/init.vim ~/.vimrc ç„¶åå°±å¯ä»¥æ„‰å¿«çš„è‡ªå·±å®šåˆ¶äº†ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/vim/","summary":"é¦–å…ˆæŠŠæ‰€æœ‰çš„ vim ç›¸å…³çš„éƒ½åˆ é™¤ cd  rm -rf .vim* åˆ›å»ºè‡ªå·±çš„.vimrc vim .vimrc ä¸€äº›åŸºæœ¬çš„è®¾ç½® åœ¨.vimrc ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç \n\u0026#34; basic set set number set noswapfile set encoding=utf-8 set fileencodings=utf-8,gb18030 set backspace=eol,start,indent set laststatus=2 set colorcolumn=80 set cursorline set linebreak set autoindent set ignorecase set smartcase set ruler set diffopt+=internal,indent-heuristic,algorithm:patience set showcmd set clipboard^=unnamed,unnamedplus set showmode set mouse=a set tabstop=2 set shiftwidth=4 set expandtab set softtabstop=2 set showmatch set incsearch set nobackup set autoread set wildmenu set wildmode=longest:list,full set nofoldenable  filetype plugin indent on syntax on æœ‰äº†ä¸Šé¢çš„è®¾ç½®ï¼Œä¼šè®©ä½ çš„ vim æ›´å¥½ç”¨ä¸€äº›ã€‚","title":"å°ç™½éƒ½èƒ½å¿«é€Ÿä¸Šæ‰‹çš„ Vim é…ç½®"},{"content":"ä¹‹å‰æˆ‘é‡‡ç”¨çš„æ–¹å¼æ˜¯ä¸¤ä¸ª github repo çš„æ–¹å¼ï¼š\nä¸€ä¸ªå« hugo-blogï¼Œç”¨äºå­˜æ”¾ blog çš„æºæ–‡ä»¶\nä¸€ä¸ªå« zhenfeng-zhu.github.ioï¼Œç”¨äºå­˜æ”¾ç”Ÿæˆä¹‹åçš„æ–‡ä»¶\nç„¶åé€šè¿‡å†™ä¸€ä¸ª shell è„šæœ¬ï¼Œå°†ç”Ÿæˆä¹‹åçš„æ–‡ä»¶æ¨å‘ zhenfeng-zhu.github.io ä»“åº“ä¸­ï¼ŒåŒæ—¶å°† blog çš„æºæ–‡ä»¶ä¹Ÿåšäº†ä¸€ä¸ª backupã€‚åæ¥ä½¿ç”¨äº†ä¸€ä¸ª github action çš„æ–¹å¼ï¼Œ å°±ä¸ç”¨åœ¨ä¸¤ä¸ªä»“åº“ä¸­è¿›è¡ŒæŠ˜è…¾ï¼Œä¸€åˆ‡éƒ½ç”± github action æ¥åšäº†ã€‚\næ–¹æ¡ˆ è®¾ç½® workflow é¦–å…ˆåˆ›å»ºä¸€ä¸ª.github/workflows/gh-pages.yml\nname: github pages  on:  push:  branches:  - main  # Set a branch to deploy  jobs:  deploy:  runs-on: ubuntu-18.04  steps:  - uses: actions/checkout@v2  with:  submodules: true # Fetch Hugo themes (true OR recursive)  fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod   - name: Setup Hugo  uses: peaceiris/actions-hugo@v2  with:  hugo-version: \u0026#39;latest\u0026#39;  # extended: true   - name: Build  run: hugo --minify   - name: Deploy  uses: peaceiris/actions-gh-pages@v3  with:  github_token: ${{ secrets.GITHUB_TOKEN }}  publish_dir: ./public æˆ‘ä»¬çœ‹ä¸‹è¿™ä¸ª workflow çš„æ­¥éª¤ï¼š\n  name å°±æ˜¯ github pages\n  on çš„æ„æ€ä»£è¡¨ï¼Œæ˜¯ä»€ä¹ˆè¡Œä¸ºä¼šè§¦å‘è¿™ä¸ª action çš„æ„å»ºã€‚ è¿™é‡Œæˆ‘ä»¬è®¾ç½®çš„æ˜¯å½“ push åˆ° main åˆ†æ”¯çš„æ—¶å€™è¿›è¡Œæ„å»ºã€‚\n  jobs å°±æ˜¯å…·ä½“çš„å·¥ä½œï¼Œè¿™é‡ŒæŒ‡å®šäº†å‡ ä¸ªæ­¥éª¤ï¼š\n   é¦–å…ˆæ˜¯åœ¨ Ubuntu 18.04 ä¸‹è¿›è¡Œæ„å»º è¿™äº›æ­¥éª¤éƒ½æ˜¯ç”¨çš„ actions/checkout@v2 æ¨¡æ¿è¿›è¡Œï¼Œæ‹‰å– submodulesã€‚ setup hugoï¼šé‡‡ç”¨çš„æ˜¯ peaceiris/actions-hugo@v2 æ¨¡æ¿ buildï¼šç®€å•çš„ hugo å‘½ä»¤ deployï¼šé‡‡ç”¨ peaceiris/actions-gh-pages@v3 æ–¹å¼ï¼ŒæŠŠè‡ªå·±çš„ github token ä¹Ÿé…ç½®ä¸Šã€‚å…·ä½“å¯ä»¥ç‚¹è¿›å»çœ‹ä¸‹è¿™ä¸ªæ­¥éª¤åšäº†ä»€ä¹ˆæ“ä½œã€‚  ç„¶åæŠŠåšå®¢çš„æºæ–‡ä»¶ï¼Œæ”¾åœ¨ main åˆ†æ”¯é‡Œï¼Œå½“æˆ‘ä»¬ push ä¹‹åï¼Œå°±ä¼šå‘ç°å‡ºç°äº†ä¸€ä¸ª gh-pages åˆ†æ”¯ã€‚\nè®¾ç½® github pages æ‰“å¼€è¯¥ repo çš„ settingsï¼Œé€‰åˆ° GitHub Pagesã€‚\næˆ‘ä»¬é€‰æ‹©åˆ†æ”¯æ˜¯ gh-pages å³å¯ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/hugo-github-action/","summary":"ä¹‹å‰æˆ‘é‡‡ç”¨çš„æ–¹å¼æ˜¯ä¸¤ä¸ª github repo çš„æ–¹å¼ï¼š\nä¸€ä¸ªå« hugo-blogï¼Œç”¨äºå­˜æ”¾ blog çš„æºæ–‡ä»¶\nä¸€ä¸ªå« zhenfeng-zhu.github.ioï¼Œç”¨äºå­˜æ”¾ç”Ÿæˆä¹‹åçš„æ–‡ä»¶\nç„¶åé€šè¿‡å†™ä¸€ä¸ª shell è„šæœ¬ï¼Œå°†ç”Ÿæˆä¹‹åçš„æ–‡ä»¶æ¨å‘ zhenfeng-zhu.github.io ä»“åº“ä¸­ï¼ŒåŒæ—¶å°† blog çš„æºæ–‡ä»¶ä¹Ÿåšäº†ä¸€ä¸ª backupã€‚åæ¥ä½¿ç”¨äº†ä¸€ä¸ª github action çš„æ–¹å¼ï¼Œ å°±ä¸ç”¨åœ¨ä¸¤ä¸ªä»“åº“ä¸­è¿›è¡ŒæŠ˜è…¾ï¼Œä¸€åˆ‡éƒ½ç”± github action æ¥åšäº†ã€‚\næ–¹æ¡ˆ è®¾ç½® workflow é¦–å…ˆåˆ›å»ºä¸€ä¸ª.github/workflows/gh-pages.yml\nname: github pages  on:  push:  branches:  - main  # Set a branch to deploy  jobs:  deploy:  runs-on: ubuntu-18.04  steps:  - uses: actions/checkout@v2  with:  submodules: true # Fetch Hugo themes (true OR recursive)  fetch-depth: 0 # Fetch all history for .","title":"Github Action è‡ªåŠ¨éƒ¨ç½² blog"},{"content":"Elixir  everything is a process. process are strongly isolated. process creation and destruction is a lightweight operation. message passing is the only way for processes to interact. processes have unique names. if you know the name of a process you can send it a message. processes share no resources. error handling is non-local. processes do what they are supposed to do or fail.  Go  simple, poetic, pithy don\u0026rsquo;t communicate by sharing memory, share memory by communicating concurrency is not parallelism channels orchestrate; mutexes serialize the bigger the interface, the weaker the abstraction make the zero value useful interface{} says nothing gofmt\u0026rsquo;s style is no one\u0026rsquo;s favorite, yet gofmt is everyone\u0026rsquo;s favorite A little copying is better than a little dependency  ","permalink":"https://zhenfeng-zhu.github.io/post/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%9A%84%E4%B8%96%E7%95%8C%E8%A7%82/","summary":"Elixir  everything is a process. process are strongly isolated. process creation and destruction is a lightweight operation. message passing is the only way for processes to interact. processes have unique names. if you know the name of a process you can send it a message. processes share no resources. error handling is non-local. processes do what they are supposed to do or fail.  Go  simple, poetic, pithy don\u0026rsquo;t communicate by sharing memory, share memory by communicating concurrency is not parallelism channels orchestrate; mutexes serialize the bigger the interface, the weaker the abstraction make the zero value useful interface{} says nothing gofmt\u0026rsquo;s style is no one\u0026rsquo;s favorite, yet gofmt is everyone\u0026rsquo;s favorite A little copying is better than a little dependency  ","title":"ç¼–ç¨‹è¯­è¨€çš„ä¸–ç•Œè§‚"},{"content":"ä»€ä¹ˆæ˜¯æŒ‡æ ‡ä½“ç³» æŒ‡æ ‡ä½“ç³»æ˜¯åœ¨ä¸šåŠ¡çš„ä¸åŒé˜¶æ®µï¼Œåˆ†æå¸ˆç‰µå¤´ä¸ä¸šåŠ¡æ–¹ååŠ©ï¼Œåˆ¶å®šä¸€å¥—èƒ½ä»å„ä¸ªç»´åº¦åæ˜ ä¸šåŠ¡çŠ¶å†µçš„å¾…å®æ–½æ¡†æ¶ã€‚\nå…³é”®ç‚¹  åœ¨ä¸šåŠ¡çš„å‰æœŸã€ä¸­æœŸå’ŒåæœŸï¼ŒæŒ‡æ ‡ä½“ç³»æ˜¯ä¸ä¸€æ ·çš„ ä¸€å®šæ˜¯ç”±åˆ†æå¸ˆç‰µå¤´ä¸ä¸šåŠ¡æ–¹ååŠ©ï¼Œè€Œä¸æ˜¯é—­é—¨é€ è½¦ ä»å„ä¸ªç»´åº¦å»ååº”ä¸šåŠ¡çš„æ ¸å¿ƒçŠ¶å†µï¼ŒæŒ‡æ ‡æœ‰å¾ˆå¤šç»´åº¦ æœ€åå°±æ˜¯ä¸€ä¸ªå¤§çš„å®æ–½æ¡†æ¶ï¼Œä¸€å®šè¦å®æ–½ï¼Œå¦åˆ™å°±æ˜¯æµªè´¹å¤§å®¶çš„æ—¶é—´  æŒ‡æ ‡é€‰å–çš„å‡ ä¸ªåŸåˆ™  æ ¹æœ¬æ€§ï¼šå¯¹äºæ ¸å¿ƒæ•°æ®ä¸€å®šè¦ç†è§£åˆ°ä½å’Œå‡†ç¡®ï¼Œå¦‚æœè¿™é‡Œé”™äº†ï¼Œåé¢åŸºæœ¬å°±ä¸ç”¨çœ‹ã€‚ å¯ç†è§£æ€§ï¼šæ‰€æœ‰æŒ‡æ ‡è¦é…ä¸Šä¸šåŠ¡è§£é‡Š ç»“æ„æ€§ï¼šèƒ½å¤Ÿå……åˆ†ä»å„ç»´åº¦å¯¹ä¸šåŠ¡è¿›è¡Œè§£è¯»ï¼Œæ–¹ä¾¿å½’å› ã€‚  å»ºç«‹æ­¥éª¤   ç†æ¸…ä¸šåŠ¡é˜¶æ®µå’Œæ–¹å‘ æˆ‘ä»¬éœ€è¦çŸ¥é“å½“å‰äº§å“æˆ–è€…ä¸šåŠ¡å¤„äºä»€ä¹ˆé˜¶æ®µï¼Œå…·ä½“çš„ä¸šåŠ¡æ–¹å‘æ˜¯ä»€ä¹ˆã€‚ä¸€èˆ¬éƒ½æ˜¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š ç¬¬ä¸€é˜¶æ®µï¼šä¸šåŠ¡å‰æœŸã€‚åœ¨ä¸šåŠ¡çš„å‰æœŸæ›´å¤šçš„æ˜¯æƒ³è¦å¿«é€Ÿæ¨å‡ºæ¥ï¼Œæœ‰æ›´å¤šäººå»ä½¿ç”¨æˆ‘ä»¬çš„äº§å“ã€‚æ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬çš„æŒ‡æ ‡ä½“ç³»åº”è¯¥æ›´å¤šçš„å›´ç»•ç”¨æˆ·é‡æå‡åšå„ç§ç»´åº¦çš„æ‹†è§£ ç¬¬äºŒé˜¶æ®µï¼šä¸šåŠ¡ä¸­æœŸï¼ˆå¿«é€Ÿå‘å±•æœŸï¼‰ã€‚åœ¨ä¸šåŠ¡ä¸­æœŸï¼Œé™¤äº†å…³æ³¨ç›˜å­çš„å¤§å°ï¼Œè¿˜è¦çœ‹äº§å“çš„å¥åº·åº¦ã€‚ ç¬¬ä¸‰é˜¶æ®µï¼šä¸šåŠ¡åæœŸï¼ˆæˆç†ŸæœŸï¼‰ã€‚ä¸»è¦çœ‹å˜ç°èƒ½åŠ›ä»¥åŠå¸‚åœºä»½é¢ã€‚\n  ç¡®å®šæ ¸å¿ƒæŒ‡æ ‡ æ‰¾æ ¸å¿ƒæŒ‡æ ‡ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹å„¿ã€‚ åªèƒ½å¤šèŠ±æ—¶é—´å»è€ƒè™‘è¿™ä¸ªäº‹å„¿ã€‚\n  æŒ‡æ ‡æ ¸å¿ƒç»´åº¦æ‹†è§£ æ ¸å¿ƒæŒ‡æ ‡çš„æ³¢åŠ¨å¿…ç„¶æ˜¯ç”±æŸç§ç»´åº¦çš„æ³¢åŠ¨å¼•èµ·ï¼Œæ‰€ä»¥ç›‘æ§æ ¸å¿ƒæŒ‡æ ‡æŒ‡æ ‡ï¼Œæœ¬è´¨æ˜¯ç›‘æ§æ ¸å¿ƒç»´åº¦ã€‚ é€šç”¨çš„æ‹†è§£æ–¹æ³•æ˜¯å…ˆå¯¹æ ¸å¿ƒæŒ‡æ ‡è¿›è¡Œå…¬å¼è®¡ç®—ï¼Œå†æŒ‰ç…§ä¸šåŠ¡è·¯å¾„æˆ–è€…ä¸šåŠ¡æ¨¡å—å»æ‹†è§£ã€‚ æ ¸å¿ƒæŒ‡æ ‡çš„æ‹†è§£ï¼Œéœ€è¦å¤šå’Œä¸šåŠ¡æ–¹è¿›è¡Œæ²Ÿé€šï¼ŒæŠŠèƒ½å¤Ÿè€ƒè™‘çš„æ¨¡å—éƒ½è€ƒè™‘è¿›å»ï¼ŒåŸºæœ¬ä¸Šå°±èƒ½æ¯”è¾ƒå…¨é¢ã€‚\n  æŒ‡æ ‡å®£è´¯ã€å­˜æ¡£å’Œè½åœ° å®£è´¯ï¼šå®é™…ä¸Šæ­å»ºå·æŒ‡æ ‡ä½“ç³»ä¹‹åï¼Œè¦å½“é¢è§¦è¾¾æ‰€æœ‰ç›¸å…³çš„ä¸šåŠ¡æ¥å£äººã€‚ å­˜æ¡£ï¼šåŒæ—¶å¯¹æŒ‡æ ‡çš„å£å¾„å’Œä¸šåŠ¡é€»è¾‘è¿›è¡Œè¯¦ç»†çš„æè¿°å­˜æ¡£ï¼Œä¹Ÿå°±æ˜¯æŒ‡æ ‡å£å¾„å½’æ¡£ è½åœ°ï¼šè½åœ°å°±æ˜¯å»ºç«‹æ ¸å¿ƒæŒ‡æ ‡çš„ç›¸å…³æŠ¥è¡¨ï¼Œå®é™…å·¥ä½œä¸­ï¼ŒæŠ¥è¡¨ä¼šåœ¨åŸ‹ç‚¹å‰å»ºå¥½ï¼Œè¿™æ ·ä¸€æ—¦ç‰ˆæœ¬ä¸Šçº¿å°±èƒ½ç«‹åˆ»çœ‹åˆ°æ•°æ®ï¼Œè¿™æ ·å„æ–¹çš„é…åˆåº¦å°±ä¼šå¾ˆé«˜ã€‚\n  ","permalink":"https://zhenfeng-zhu.github.io/post/%E5%A6%82%E4%BD%95%E5%BB%BA%E7%AB%8B%E6%8C%87%E6%A0%87%E4%BD%93%E7%B3%BB/","summary":"ä»€ä¹ˆæ˜¯æŒ‡æ ‡ä½“ç³» æŒ‡æ ‡ä½“ç³»æ˜¯åœ¨ä¸šåŠ¡çš„ä¸åŒé˜¶æ®µï¼Œåˆ†æå¸ˆç‰µå¤´ä¸ä¸šåŠ¡æ–¹ååŠ©ï¼Œåˆ¶å®šä¸€å¥—èƒ½ä»å„ä¸ªç»´åº¦åæ˜ ä¸šåŠ¡çŠ¶å†µçš„å¾…å®æ–½æ¡†æ¶ã€‚\nå…³é”®ç‚¹  åœ¨ä¸šåŠ¡çš„å‰æœŸã€ä¸­æœŸå’ŒåæœŸï¼ŒæŒ‡æ ‡ä½“ç³»æ˜¯ä¸ä¸€æ ·çš„ ä¸€å®šæ˜¯ç”±åˆ†æå¸ˆç‰µå¤´ä¸ä¸šåŠ¡æ–¹ååŠ©ï¼Œè€Œä¸æ˜¯é—­é—¨é€ è½¦ ä»å„ä¸ªç»´åº¦å»ååº”ä¸šåŠ¡çš„æ ¸å¿ƒçŠ¶å†µï¼ŒæŒ‡æ ‡æœ‰å¾ˆå¤šç»´åº¦ æœ€åå°±æ˜¯ä¸€ä¸ªå¤§çš„å®æ–½æ¡†æ¶ï¼Œä¸€å®šè¦å®æ–½ï¼Œå¦åˆ™å°±æ˜¯æµªè´¹å¤§å®¶çš„æ—¶é—´  æŒ‡æ ‡é€‰å–çš„å‡ ä¸ªåŸåˆ™  æ ¹æœ¬æ€§ï¼šå¯¹äºæ ¸å¿ƒæ•°æ®ä¸€å®šè¦ç†è§£åˆ°ä½å’Œå‡†ç¡®ï¼Œå¦‚æœè¿™é‡Œé”™äº†ï¼Œåé¢åŸºæœ¬å°±ä¸ç”¨çœ‹ã€‚ å¯ç†è§£æ€§ï¼šæ‰€æœ‰æŒ‡æ ‡è¦é…ä¸Šä¸šåŠ¡è§£é‡Š ç»“æ„æ€§ï¼šèƒ½å¤Ÿå……åˆ†ä»å„ç»´åº¦å¯¹ä¸šåŠ¡è¿›è¡Œè§£è¯»ï¼Œæ–¹ä¾¿å½’å› ã€‚  å»ºç«‹æ­¥éª¤   ç†æ¸…ä¸šåŠ¡é˜¶æ®µå’Œæ–¹å‘ æˆ‘ä»¬éœ€è¦çŸ¥é“å½“å‰äº§å“æˆ–è€…ä¸šåŠ¡å¤„äºä»€ä¹ˆé˜¶æ®µï¼Œå…·ä½“çš„ä¸šåŠ¡æ–¹å‘æ˜¯ä»€ä¹ˆã€‚ä¸€èˆ¬éƒ½æ˜¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š ç¬¬ä¸€é˜¶æ®µï¼šä¸šåŠ¡å‰æœŸã€‚åœ¨ä¸šåŠ¡çš„å‰æœŸæ›´å¤šçš„æ˜¯æƒ³è¦å¿«é€Ÿæ¨å‡ºæ¥ï¼Œæœ‰æ›´å¤šäººå»ä½¿ç”¨æˆ‘ä»¬çš„äº§å“ã€‚æ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬çš„æŒ‡æ ‡ä½“ç³»åº”è¯¥æ›´å¤šçš„å›´ç»•ç”¨æˆ·é‡æå‡åšå„ç§ç»´åº¦çš„æ‹†è§£ ç¬¬äºŒé˜¶æ®µï¼šä¸šåŠ¡ä¸­æœŸï¼ˆå¿«é€Ÿå‘å±•æœŸï¼‰ã€‚åœ¨ä¸šåŠ¡ä¸­æœŸï¼Œé™¤äº†å…³æ³¨ç›˜å­çš„å¤§å°ï¼Œè¿˜è¦çœ‹äº§å“çš„å¥åº·åº¦ã€‚ ç¬¬ä¸‰é˜¶æ®µï¼šä¸šåŠ¡åæœŸï¼ˆæˆç†ŸæœŸï¼‰ã€‚ä¸»è¦çœ‹å˜ç°èƒ½åŠ›ä»¥åŠå¸‚åœºä»½é¢ã€‚\n  ç¡®å®šæ ¸å¿ƒæŒ‡æ ‡ æ‰¾æ ¸å¿ƒæŒ‡æ ‡ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹å„¿ã€‚ åªèƒ½å¤šèŠ±æ—¶é—´å»è€ƒè™‘è¿™ä¸ªäº‹å„¿ã€‚\n  æŒ‡æ ‡æ ¸å¿ƒç»´åº¦æ‹†è§£ æ ¸å¿ƒæŒ‡æ ‡çš„æ³¢åŠ¨å¿…ç„¶æ˜¯ç”±æŸç§ç»´åº¦çš„æ³¢åŠ¨å¼•èµ·ï¼Œæ‰€ä»¥ç›‘æ§æ ¸å¿ƒæŒ‡æ ‡æŒ‡æ ‡ï¼Œæœ¬è´¨æ˜¯ç›‘æ§æ ¸å¿ƒç»´åº¦ã€‚ é€šç”¨çš„æ‹†è§£æ–¹æ³•æ˜¯å…ˆå¯¹æ ¸å¿ƒæŒ‡æ ‡è¿›è¡Œå…¬å¼è®¡ç®—ï¼Œå†æŒ‰ç…§ä¸šåŠ¡è·¯å¾„æˆ–è€…ä¸šåŠ¡æ¨¡å—å»æ‹†è§£ã€‚ æ ¸å¿ƒæŒ‡æ ‡çš„æ‹†è§£ï¼Œéœ€è¦å¤šå’Œä¸šåŠ¡æ–¹è¿›è¡Œæ²Ÿé€šï¼ŒæŠŠèƒ½å¤Ÿè€ƒè™‘çš„æ¨¡å—éƒ½è€ƒè™‘è¿›å»ï¼ŒåŸºæœ¬ä¸Šå°±èƒ½æ¯”è¾ƒå…¨é¢ã€‚\n  æŒ‡æ ‡å®£è´¯ã€å­˜æ¡£å’Œè½åœ° å®£è´¯ï¼šå®é™…ä¸Šæ­å»ºå·æŒ‡æ ‡ä½“ç³»ä¹‹åï¼Œè¦å½“é¢è§¦è¾¾æ‰€æœ‰ç›¸å…³çš„ä¸šåŠ¡æ¥å£äººã€‚ å­˜æ¡£ï¼šåŒæ—¶å¯¹æŒ‡æ ‡çš„å£å¾„å’Œä¸šåŠ¡é€»è¾‘è¿›è¡Œè¯¦ç»†çš„æè¿°å­˜æ¡£ï¼Œä¹Ÿå°±æ˜¯æŒ‡æ ‡å£å¾„å½’æ¡£ è½åœ°ï¼šè½åœ°å°±æ˜¯å»ºç«‹æ ¸å¿ƒæŒ‡æ ‡çš„ç›¸å…³æŠ¥è¡¨ï¼Œå®é™…å·¥ä½œä¸­ï¼ŒæŠ¥è¡¨ä¼šåœ¨åŸ‹ç‚¹å‰å»ºå¥½ï¼Œè¿™æ ·ä¸€æ—¦ç‰ˆæœ¬ä¸Šçº¿å°±èƒ½ç«‹åˆ»çœ‹åˆ°æ•°æ®ï¼Œè¿™æ ·å„æ–¹çš„é…åˆåº¦å°±ä¼šå¾ˆé«˜ã€‚\n  ","title":"å¦‚ä½•å»ºç«‹æŒ‡æ ‡ä½“ç³»"},{"content":"å¯¹äºå¤§éƒ¨åˆ†å…¬å¸è€Œè¨€ï¼Œèƒ½å¤Ÿå†™åº•å±‚ä»£ç æˆ–è€…ä¸­é—´ä»¶ä»£ç çš„äººæ€»æ˜¯æœ‰é™çš„ï¼Œå†™ä¸šåŠ¡ä»£ç ä¼šé¢ä¸´æ›´é«˜çš„å¤æ‚åº¦ã€‚è¿™é‡Œåˆ†ä¸‰ä¸ªå±‚æ¬¡æ¥çœ‹å…¶ä¸­çš„æœºä¼šï¼š\n ç¬¬ä¸€ä¸ªå±‚æ¬¡ï¼Œè®©ä»£ç å†™çš„ä¸ä¸€æ ·ã€‚å¯ä»ä»£ç è§„èŒƒã€å¯è¯»æ€§ã€å¯æ‰©å±•æ€§ç­‰è§’åº¦ç€æ‰‹ï¼Œè¿™ä¹Ÿæ˜¯ç¨‹åºå‘˜çš„åŸºæœ¬åŠŸã€‚ ç¬¬äºŒä¸ªå±‚æ¬¡ï¼Œè€ƒè™‘ä¸šåŠ¡é—®é¢˜å’ŒæŠ€æœ¯é—®é¢˜çš„åŒ¹é…ã€‚å¯ä»å†™ä¸šåŠ¡ä»£ç ä¸­ç†è§£éœ€æ±‚ï¼Œå¹¶åšå¥½åˆ†æè®¾è®¡ã€‚è¢«åŠ¨æ¥æ”¶éœ€æ±‚å’Œå®ç°æ¥å£ï¼Œç¡®å®æˆé•¿ç©ºé—´ä¸å¤§ã€‚ ç¬¬ä¸‰ä¸ªå±‚æ¬¡ï¼Œæ€»ç»“ç›¸å…³æ–¹æ³•ä½“ç³»ï¼Œæˆä¸ºä¸šåŠ¡åŠæŠ€æœ¯åŒæ–™ä¸“å®¶ã€‚  ","permalink":"https://zhenfeng-zhu.github.io/post/%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E7%9A%84%E6%88%90%E9%95%BF%E6%9C%BA%E4%BC%9A/","summary":"å¯¹äºå¤§éƒ¨åˆ†å…¬å¸è€Œè¨€ï¼Œèƒ½å¤Ÿå†™åº•å±‚ä»£ç æˆ–è€…ä¸­é—´ä»¶ä»£ç çš„äººæ€»æ˜¯æœ‰é™çš„ï¼Œå†™ä¸šåŠ¡ä»£ç ä¼šé¢ä¸´æ›´é«˜çš„å¤æ‚åº¦ã€‚è¿™é‡Œåˆ†ä¸‰ä¸ªå±‚æ¬¡æ¥çœ‹å…¶ä¸­çš„æœºä¼šï¼š\n ç¬¬ä¸€ä¸ªå±‚æ¬¡ï¼Œè®©ä»£ç å†™çš„ä¸ä¸€æ ·ã€‚å¯ä»ä»£ç è§„èŒƒã€å¯è¯»æ€§ã€å¯æ‰©å±•æ€§ç­‰è§’åº¦ç€æ‰‹ï¼Œè¿™ä¹Ÿæ˜¯ç¨‹åºå‘˜çš„åŸºæœ¬åŠŸã€‚ ç¬¬äºŒä¸ªå±‚æ¬¡ï¼Œè€ƒè™‘ä¸šåŠ¡é—®é¢˜å’ŒæŠ€æœ¯é—®é¢˜çš„åŒ¹é…ã€‚å¯ä»å†™ä¸šåŠ¡ä»£ç ä¸­ç†è§£éœ€æ±‚ï¼Œå¹¶åšå¥½åˆ†æè®¾è®¡ã€‚è¢«åŠ¨æ¥æ”¶éœ€æ±‚å’Œå®ç°æ¥å£ï¼Œç¡®å®æˆé•¿ç©ºé—´ä¸å¤§ã€‚ ç¬¬ä¸‰ä¸ªå±‚æ¬¡ï¼Œæ€»ç»“ç›¸å…³æ–¹æ³•ä½“ç³»ï¼Œæˆä¸ºä¸šåŠ¡åŠæŠ€æœ¯åŒæ–™ä¸“å®¶ã€‚  ","title":"ä¸šåŠ¡ä»£ç çš„æˆé•¿æœºä¼š"},{"content":" è®©æ¯ä¸ªç¨‹åºéƒ½åšå¥½ä¸€ä»¶äº‹ã€‚è¦åšä¸€ä»¶æ–°çš„å·¥ä½œï¼Œå†™ä¸€ä¸ªæ–°ç¨‹åºï¼Œè€Œä¸æ˜¯é€šè¿‡æ·»åŠ â€œåŠŸèƒ½â€è®©è€ç¨‹åºå¤æ‚åŒ–ã€‚ æœŸå¾…æ¯ä¸ªç¨‹åºçš„è¾“å‡ºæˆä¸ºå¦ä¸€ä¸ªç¨‹åºçš„è¾“å…¥ã€‚ä¸è¦å°†æ— å…³ä¿¡æ¯æ··å…¥è¾“å‡ºã€‚é¿å…ä½¿ç”¨ä¸¥æ ¼çš„åˆ—æ•°æ®æˆ–äºŒè¿›åˆ¶è¾“å…¥æ ¼å¼ã€‚ä¸è¦åšæŒäº¤äº’å¼è¾“å…¥ã€‚ è®¾è®¡å’Œæ„å»ºè½¯ä»¶ï¼Œç”šè‡³æ˜¯æ“ä½œç³»ç»Ÿï¼Œè¦å°½æ—©å°è¯•ï¼Œæœ€å¥½åœ¨å‡ å‘¨å†…å®Œæˆã€‚ä¸è¦çŠ¹è±«ï¼Œæ‰”æ‰ç¬¨æ‹™çš„éƒ¨åˆ†ï¼Œé‡å»ºå®ƒä»¬ã€‚ ä¼˜å…ˆä½¿ç”¨å·¥å…·æ¥å‡è½»ç¼–ç¨‹ä»»åŠ¡ï¼Œå³ä½¿å¿…é¡»æ›²çº¿æ•‘å›½ç¼–å†™å·¥å…·ï¼Œä¸”åœ¨ç”¨å®Œåå¾ˆå¯èƒ½è¦æ‰”æ‰å¤§éƒ¨åˆ†ã€‚  ","permalink":"https://zhenfeng-zhu.github.io/post/unix-philosophy/","summary":" è®©æ¯ä¸ªç¨‹åºéƒ½åšå¥½ä¸€ä»¶äº‹ã€‚è¦åšä¸€ä»¶æ–°çš„å·¥ä½œï¼Œå†™ä¸€ä¸ªæ–°ç¨‹åºï¼Œè€Œä¸æ˜¯é€šè¿‡æ·»åŠ â€œåŠŸèƒ½â€è®©è€ç¨‹åºå¤æ‚åŒ–ã€‚ æœŸå¾…æ¯ä¸ªç¨‹åºçš„è¾“å‡ºæˆä¸ºå¦ä¸€ä¸ªç¨‹åºçš„è¾“å…¥ã€‚ä¸è¦å°†æ— å…³ä¿¡æ¯æ··å…¥è¾“å‡ºã€‚é¿å…ä½¿ç”¨ä¸¥æ ¼çš„åˆ—æ•°æ®æˆ–äºŒè¿›åˆ¶è¾“å…¥æ ¼å¼ã€‚ä¸è¦åšæŒäº¤äº’å¼è¾“å…¥ã€‚ è®¾è®¡å’Œæ„å»ºè½¯ä»¶ï¼Œç”šè‡³æ˜¯æ“ä½œç³»ç»Ÿï¼Œè¦å°½æ—©å°è¯•ï¼Œæœ€å¥½åœ¨å‡ å‘¨å†…å®Œæˆã€‚ä¸è¦çŠ¹è±«ï¼Œæ‰”æ‰ç¬¨æ‹™çš„éƒ¨åˆ†ï¼Œé‡å»ºå®ƒä»¬ã€‚ ä¼˜å…ˆä½¿ç”¨å·¥å…·æ¥å‡è½»ç¼–ç¨‹ä»»åŠ¡ï¼Œå³ä½¿å¿…é¡»æ›²çº¿æ•‘å›½ç¼–å†™å·¥å…·ï¼Œä¸”åœ¨ç”¨å®Œåå¾ˆå¯èƒ½è¦æ‰”æ‰å¤§éƒ¨åˆ†ã€‚  ","title":"unix å“²å­¦"},{"content":"ä¸€èˆ¬æ¥è¯´ web å‰ç«¯æ˜¯æŒ‡ç½‘ç«™ä¸šåŠ¡é€»è¾‘ä¹‹å‰çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼šæµè§ˆå™¨åŠ è½½ã€ç½‘ç«™è§†å›¾æ¨¡å‹ã€å›¾ç‰‡æœåŠ¡ã€CDN æœåŠ¡ç­‰ç­‰ã€‚web å‰ç«¯ä¼˜åŒ–ä¸»è¦ä»å¦‚ä¸‹ä¸‰ä¸ªæ–¹é¢å…¥æ‰‹ï¼š\næµè§ˆå™¨è®¿é—®ä¼˜åŒ–   å‡å°‘ http è¯·æ±‚\nhttp åè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹é€šä¿¡é“¾è·¯è¿›è¡Œä¼ è¾“ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œä¸€èˆ¬æ¯ä¸ªè¯·æ±‚éƒ½ä¼šåˆ†é…ä¸€ä¸ªçº¿ç¨‹å»å¤„ç†ã€‚\nå‡å°‘ http è¯·æ±‚çš„ä¸»è¦æ‰‹æ®µæ˜¯åˆå¹¶ CSSã€åˆå¹¶ jsã€åˆå¹¶å›¾ç‰‡ã€‚\n  ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜\ncssã€jsã€Logoã€å›¾æ ‡ç­‰é™æ€èµ„æºæ–‡ä»¶æ›´æ–°é¢‘ç‡è¾ƒä½ï¼Œå¯ä»¥å°†è¿™äº›æ–‡ä»¶ç¼“å­˜åœ¨æµè§ˆå™¨ä¸­ã€‚\nåœ¨æ›´æ–° js ç­‰æ–‡ä»¶çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¸æ˜¯å°†æ–‡ä»¶å†…å®¹æ›´æ–°ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œç„¶åæ›´æ–° html çš„å¼•ç”¨ã€‚\næ›´æ–°é™æ€èµ„æºçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è¦é€é‡æ›´æ–°ï¼Œä»¥é¿å…ç”¨æˆ·æµè§ˆå™¨çš„å¤§é‡ç¼“å­˜å¤±æ•ˆï¼Œé€ æˆæœåŠ¡å™¨è´Ÿè½½å¢åŠ ã€ç½‘ç»œå µå¡ã€‚\n  å¯ç”¨å‹ç¼©\nåœ¨æœåŠ¡å™¨å¯¹æ–‡ä»¶å‹ç¼©ï¼Œç„¶ååœ¨æµè§ˆå™¨ç«¯è§£å‹ç¼©ï¼Œå¯ä»¥å‡å°‘é€šä¿¡ä¼ è¾“çš„æ•°æ®é‡ã€‚\n  CSS æ”¾åœ¨é¡µé¢æœ€ä¸Šé¢ï¼Œjs æ”¾åœ¨é¡µé¢æœ€ä¸‹é¢\næµè§ˆå™¨ä¼šåœ¨ä¸‹è½½å®Œå…¨éƒ¨ CSS ä¹‹åæ‰å¯¹æ•´ä¸ªé¡µé¢è¿›è¡Œæ¸²æŸ“ï¼Œè€Œæµè§ˆå™¨æ˜¯åœ¨åŠ è½½ js ä¹‹åå°±ç«‹å³æ‰§è¡Œï¼Œæœ‰å¯èƒ½ä¼šé˜»å¡æ•´ä¸ªé¡µé¢ã€‚å› æ­¤æœ€å¥½çš„åšæ³•å°±æ˜¯æŠŠ CSS æ”¾åœ¨æœ€ä¸Šé¢ï¼Œjs æ”¾åœ¨æœ€ä¸‹é¢ã€‚ä½†æ˜¯å¦‚æœæ˜¯é¡µé¢è§£æçš„æ—¶å€™å°±ç”¨åˆ° jsï¼Œä¹Ÿæ˜¯è¦ç›¸åº”çš„ js æ”¾åœ¨ä¸Šé¢ã€‚\n  å‡å°‘ cookie ä¼ è¾“\ncookie ä¼šåŒ…å«åœ¨æ¯æ¬¡è¯·æ±‚å’Œå“åº”ä¸­ï¼Œå¤ªå¤§çš„ cookie ä¼šå½±å“æ•°æ®ä¼ è¾“ï¼Œéœ€è¦æ…é‡è€ƒè™‘å“ªäº›æ•°æ®å†™å…¥ cookie ä¸­ã€‚\nå¯¹äºæŸäº›é™æ€èµ„æºçš„è®¿é—®ï¼Œå¦‚ css å’Œ js ç­‰ï¼Œå‘é€ cookie æ²¡æ„ä¹‰ï¼Œå¯ä»¥è€ƒè™‘é™æ€èµ„æºä½¿ç”¨ç‹¬ç«‹åŸŸåè®¿é—®ï¼Œé¿å…è¯·æ±‚é™æ€èµ„æºæ—¶å‘é€ cookieã€‚\n  CDN åŠ é€Ÿ CDNï¼ˆcontent distribute networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œï¼‰çš„æœ¬è´¨ä»ç„¶æ˜¯ä¸€ä¸ªç¼“å­˜ã€‚å°†ç¼“å­˜æ”¾åœ¨ç¦»ç”¨æˆ·æœ€è¿‘çš„åœ°æ–¹ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ä»¥æœ€å¿«çš„é€Ÿåº¦è·å–æ•°æ®ã€‚\nCDN ç¼“å­˜çš„ä¸€èˆ¬æ˜¯é™æ€èµ„æºï¼Œå¦‚å›¾ç‰‡ã€æ–‡ä»¶ã€CSSã€jsã€é™æ€ç½‘é¡µç­‰ã€‚\nåå‘ä»£ç† åå‘ä»£ç†æœåŠ¡å™¨ä½äºç½‘ç«™ä¸­å¿ƒæœºæˆ¿çš„ä¸€ä¾§ï¼Œä»£ç†ç½‘ç«™ web æœåŠ¡å™¨æ¥æ”¶ http è¯·æ±‚ã€‚\nåå‘ä»£ç†å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿æŠ¤ç½‘ç«™å®‰å…¨ï¼Œæ¥è‡ªäº’è”ç½‘çš„è®¿é—®è¯·æ±‚å¿…é¡»ç»è¿‡ä»£ç†æœåŠ¡å™¨ï¼Œç›¸å½“äºåœ¨ web æœåŠ¡å™¨å’Œæ”»å‡»ä¹‹é—´åŠ äº†ä¸€ä¸ªå±éšœã€‚\nåå‘ä»£ç†ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ç¼“å­˜ï¼Œé™æ€èµ„æºè¢«ç¼“å­˜åœ¨åå‘ä»£ç†æœåŠ¡å™¨ï¼Œå½“ç”¨æˆ·è®¿é—®æ—¶ï¼Œå¯ä»¥ä»åå‘ä»£ç†æœåŠ¡å™¨ä¸Šè¿”å›ã€‚æœ‰äº›ç½‘ç«™ä¹Ÿä¼šå°†éƒ¨åˆ†åŠ¨æ€å†…å®¹ç¼“å­˜åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡å†…éƒ¨é€šçŸ¥æœºåˆ¶ï¼Œæ›´æ–°ç¼“å­˜ã€‚\nåå‘ä»£ç†ä¹Ÿå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ã€‚\nå†™åœ¨æœ€å å¯ä»¥å‘ç°ï¼Œåœ¨ web å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ï¼Œæåˆ°æœ€å¤šçš„å°±æ˜¯ç¼“å­˜ã€‚\n ç½‘ç«™æ€§èƒ½ä¼˜åŒ–ç¬¬ä¸€å®šå¾‹ï¼šä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ç¼“å­˜ï¼\n ","permalink":"https://zhenfeng-zhu.github.io/post/web%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","summary":"ä¸€èˆ¬æ¥è¯´ web å‰ç«¯æ˜¯æŒ‡ç½‘ç«™ä¸šåŠ¡é€»è¾‘ä¹‹å‰çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼šæµè§ˆå™¨åŠ è½½ã€ç½‘ç«™è§†å›¾æ¨¡å‹ã€å›¾ç‰‡æœåŠ¡ã€CDN æœåŠ¡ç­‰ç­‰ã€‚web å‰ç«¯ä¼˜åŒ–ä¸»è¦ä»å¦‚ä¸‹ä¸‰ä¸ªæ–¹é¢å…¥æ‰‹ï¼š\næµè§ˆå™¨è®¿é—®ä¼˜åŒ–   å‡å°‘ http è¯·æ±‚\nhttp åè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹é€šä¿¡é“¾è·¯è¿›è¡Œä¼ è¾“ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œä¸€èˆ¬æ¯ä¸ªè¯·æ±‚éƒ½ä¼šåˆ†é…ä¸€ä¸ªçº¿ç¨‹å»å¤„ç†ã€‚\nå‡å°‘ http è¯·æ±‚çš„ä¸»è¦æ‰‹æ®µæ˜¯åˆå¹¶ CSSã€åˆå¹¶ jsã€åˆå¹¶å›¾ç‰‡ã€‚\n  ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜\ncssã€jsã€Logoã€å›¾æ ‡ç­‰é™æ€èµ„æºæ–‡ä»¶æ›´æ–°é¢‘ç‡è¾ƒä½ï¼Œå¯ä»¥å°†è¿™äº›æ–‡ä»¶ç¼“å­˜åœ¨æµè§ˆå™¨ä¸­ã€‚\nåœ¨æ›´æ–° js ç­‰æ–‡ä»¶çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¸æ˜¯å°†æ–‡ä»¶å†…å®¹æ›´æ–°ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œç„¶åæ›´æ–° html çš„å¼•ç”¨ã€‚\næ›´æ–°é™æ€èµ„æºçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è¦é€é‡æ›´æ–°ï¼Œä»¥é¿å…ç”¨æˆ·æµè§ˆå™¨çš„å¤§é‡ç¼“å­˜å¤±æ•ˆï¼Œé€ æˆæœåŠ¡å™¨è´Ÿè½½å¢åŠ ã€ç½‘ç»œå µå¡ã€‚\n  å¯ç”¨å‹ç¼©\nåœ¨æœåŠ¡å™¨å¯¹æ–‡ä»¶å‹ç¼©ï¼Œç„¶ååœ¨æµè§ˆå™¨ç«¯è§£å‹ç¼©ï¼Œå¯ä»¥å‡å°‘é€šä¿¡ä¼ è¾“çš„æ•°æ®é‡ã€‚\n  CSS æ”¾åœ¨é¡µé¢æœ€ä¸Šé¢ï¼Œjs æ”¾åœ¨é¡µé¢æœ€ä¸‹é¢\næµè§ˆå™¨ä¼šåœ¨ä¸‹è½½å®Œå…¨éƒ¨ CSS ä¹‹åæ‰å¯¹æ•´ä¸ªé¡µé¢è¿›è¡Œæ¸²æŸ“ï¼Œè€Œæµè§ˆå™¨æ˜¯åœ¨åŠ è½½ js ä¹‹åå°±ç«‹å³æ‰§è¡Œï¼Œæœ‰å¯èƒ½ä¼šé˜»å¡æ•´ä¸ªé¡µé¢ã€‚å› æ­¤æœ€å¥½çš„åšæ³•å°±æ˜¯æŠŠ CSS æ”¾åœ¨æœ€ä¸Šé¢ï¼Œjs æ”¾åœ¨æœ€ä¸‹é¢ã€‚ä½†æ˜¯å¦‚æœæ˜¯é¡µé¢è§£æçš„æ—¶å€™å°±ç”¨åˆ° jsï¼Œä¹Ÿæ˜¯è¦ç›¸åº”çš„ js æ”¾åœ¨ä¸Šé¢ã€‚\n  å‡å°‘ cookie ä¼ è¾“\ncookie ä¼šåŒ…å«åœ¨æ¯æ¬¡è¯·æ±‚å’Œå“åº”ä¸­ï¼Œå¤ªå¤§çš„ cookie ä¼šå½±å“æ•°æ®ä¼ è¾“ï¼Œéœ€è¦æ…é‡è€ƒè™‘å“ªäº›æ•°æ®å†™å…¥ cookie ä¸­ã€‚\nå¯¹äºæŸäº›é™æ€èµ„æºçš„è®¿é—®ï¼Œå¦‚ css å’Œ js ç­‰ï¼Œå‘é€ cookie æ²¡æ„ä¹‰ï¼Œå¯ä»¥è€ƒè™‘é™æ€èµ„æºä½¿ç”¨ç‹¬ç«‹åŸŸåè®¿é—®ï¼Œé¿å…è¯·æ±‚é™æ€èµ„æºæ—¶å‘é€ cookieã€‚\n  CDN åŠ é€Ÿ CDNï¼ˆcontent distribute networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œï¼‰çš„æœ¬è´¨ä»ç„¶æ˜¯ä¸€ä¸ªç¼“å­˜ã€‚å°†ç¼“å­˜æ”¾åœ¨ç¦»ç”¨æˆ·æœ€è¿‘çš„åœ°æ–¹ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ä»¥æœ€å¿«çš„é€Ÿåº¦è·å–æ•°æ®ã€‚","title":"Web å‰ç«¯æ€§èƒ½ä¼˜åŒ–"},{"content":"å‰å‡ å¤©è·Ÿä¸€ä¸ªæœ‹å‹èŠäº†ä¸€äº›å…³äºç½‘ç«™ç¼“å­˜åˆ†å¸ƒå¼çš„ä¸€äº›ä¸œè¥¿ï¼Œå‘ç°è‡ªå·±çš„çŸ¥è¯†è¿˜æ˜¯å¤ªè¿‡è´«ç˜ ã€‚ç†è®º+åè®®ï¼Œè¿™æ˜¯ç°åœ¨æˆ‘äºŸå¾…åŠ å¼ºçš„ã€‚è¿™ä¸ªå‘¨æœ«ä¹°äº†ä¸¤æœ¬å…³äºåˆ†å¸ƒå¼ç½‘ç«™çš„ä¹¦ï¼Œæœ¬ç€å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œä¾¿æœ‰äº†è¿™æ ·ä¸€ç³»åˆ—çš„æ–‡ç« ã€‚å¸Œæœ›ä¸€åŒåˆ†äº«ï¼Œä¹Ÿè¯·å¤šæŒ‡æ•™ã€‚\n code less, play more!\n å‰è¨€ è¿™ä¸ªä¸–ç•Œä¸Šæ²¡æœ‰å“ªä¸ªç½‘ç«™ä»è¯ç”Ÿèµ·å°±æ˜¯å¤§å‹ç½‘ç«™ï¼›ä¹Ÿæ²¡æœ‰å“ªä¸ªç½‘ç«™ç¬¬ä¸€æ¬¡å‘å¸ƒçš„æ—¶å€™å°±æ‹¥æœ‰åºå¤§çš„ç”¨æˆ·ï¼Œé«˜å¹¶å‘çš„è®¿é—®ï¼Œæµ·é‡çš„æ•°æ®ï¼›å¤§å‹ç½‘ç«™éƒ½æ˜¯ä»å°å‹ç½‘ç«™å‘å±•è€Œæ¥ã€‚ç½‘ç«™çš„ä»·å€¼åœ¨äºå®ƒèƒ½ç»™ç”¨æˆ·æä¾›ä»€ä¹ˆå®¶å®…ï¼Œåœ¨äºç½‘ç«™èƒ½åšä»€ä¹ˆï¼Œè€Œä¸åœ¨äºå®ƒæ˜¯æ€ä¹ˆåšçš„ï¼Œæ‰€ä»¥ç½‘ç«™åœ¨å°çš„æ—¶å€™å°±å»è¿½æ±‚ç½‘ç«™çš„æ¶æ„æ˜¯èˆæœ¬é€æœ«ï¼Œå¾—ä¸å¿å¤±çš„ã€‚å°å‹ç½‘ç«™æœ€éœ€è¦åšçš„å°±æ˜¯ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„æœåŠ¡æ¥åˆ›é€ ä»·å€¼ï¼Œå¾—åˆ°ç”¨æˆ·è®¤å¯ï¼Œæ´»ä¸‹å»ï¼Œé‡è›®ç”Ÿé•¿ã€‚\nå¤§å‹ç½‘ç«™è½¯ä»¶ç³»ç»Ÿçš„ç‰¹ç‚¹  é«˜å¹¶å‘ï¼Œå¤§æµé‡ é«˜å¯ç”¨ æµ·é‡æ•°æ® ç”¨æˆ·åˆ†å¸ƒå¹¿æ³›ï¼Œç½‘ç»œæƒ…å†µå¤æ‚ å®‰å…¨ç¯å¢ƒæ¶åŠ£ éœ€æ±‚å¿«é€Ÿå˜æ›´ï¼Œå‘å¸ƒå¹³é¢‘ç¹ æ¸è¿›å¼å‘å±•  å¤§å‹ç½‘ç«™çš„å‘å±•å†ç¨‹   åˆå§‹é˜¶æ®µçš„ç½‘ç«™æ¶æ„\næœ€å¼€å§‹æ²¡æœ‰å¤šå°‘äººè®¿é—®ï¼Œæ‰€ä»¥åº”ç”¨ç¨‹åºï¼Œæ•°æ®åº“ï¼Œæ–‡ä»¶éƒ½åœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚\n  åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®æœåŠ¡åˆ†ç¦»\nåº”ç”¨å’Œæ•°æ®åˆ†ç¦»ä¹‹åï¼Œä¸€èˆ¬éœ€è¦ä¸‰å°æœåŠ¡å™¨ã€‚åº”ç”¨æœåŠ¡å™¨ï¼Œæ–‡ä»¶æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨ï¼Œè¿™ä¸‰ç§æœåŠ¡å™¨å¯¹äºç¡¬ä»¶è¦æ±‚å„ä¸ç›¸åŒã€‚\n åº”ç”¨æœåŠ¡å™¨ï¼šæ›´å¼ºå¤§çš„ CPU æ•°æ®åº“æœåŠ¡å™¨ï¼šæ›´å¿«é€Ÿçš„ç£ç›˜å’Œæ›´å¤§çš„å†…å­˜ æ–‡ä»¶æœåŠ¡å™¨ï¼šå®¹é‡æ›´å¤§çš„ç¡¬ç›˜    ä½¿ç”¨ç¼“å­˜æ”¹å–„æ€§èƒ½\nç½‘ç«™çš„è®¿é—®ä¹Ÿéµå¾ªäºŒå…«å®šå¾‹ï¼š80%çš„ä¸šåŠ¡é›†ä¸­åœ¨ 20%çš„æ•°æ®ä¸Šã€‚å› æ­¤å¯ä»¥æŠŠè¿™ä¸€å°éƒ¨åˆ†æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå‡å°‘æ•°æ®åº“çš„è®¿é—®å‹åŠ›ã€‚\nç½‘ç«™çš„ç¼“å­˜å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š\n æœ¬åœ°ç¼“å­˜ï¼šç¼“å­˜åœ¨åº”ç”¨æœåŠ¡å™¨ä¸Šã€‚æœ¬åœ°ç¼“å­˜è®¿é—®é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å—åˆ¶äºå†…å­˜é™åˆ¶ï¼Œç¼“å­˜æ•°é‡æœ‰é™ï¼Œè€Œä¸”ä¹Ÿä¼šå‡ºç°å’Œåº”ç”¨ç¨‹åºäº‰æŠ¢å†…å­˜çš„æƒ…å†µã€‚ è¿œç¨‹åˆ†å¸ƒå¼ç¼“å­˜ï¼šä»¥é›†ç¾¤çš„æ–¹å¼ï¼Œç¼“å­˜åœ¨å¤§å†…å­˜çš„ä¸“ç”¨ç¼“å­˜æœåŠ¡å™¨ã€‚å¯ä»¥åœ¨ç†è®ºä¸Šåšåˆ°ä¸å—å†…å­˜å®¹é‡é™åˆ¶ã€‚    ä½¿ç”¨åº”ç”¨æœåŠ¡å™¨é›†ç¾¤æé«˜å¹¶å‘èƒ½åŠ›\nå½“ä¸€å°æœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›å’Œå­˜å‚¨ç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼Œä¸è¦ä¼å›¾æ›´æ¢æ›´å¼ºå¤§çš„æœåŠ¡å™¨ã€‚å¯¹äºå¤§å‹ç½‘ç«™æ¥è¯´ï¼Œä¸ç®¡å¤šä¹ˆå¼ºå¤§çš„æœåŠ¡å™¨ï¼Œéƒ½æ»¡è¶³ä¸äº†ç½‘ç«™æŒç»­å¢é•¿çš„ä¸šåŠ¡éœ€æ±‚ã€‚æ­¤æ—¶å°±å¯ä»¥è€ƒè™‘é›†ç¾¤çš„æ–¹å¼ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡è°ƒåº¦æœåŠ¡å™¨ï¼Œå¯ä»¥å°†æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚åˆ†å‘åˆ°åº”ç”¨æœåŠ¡å™¨é›†ç¾¤ä¸­çš„ä»»ä½•ä¸€å°æœåŠ¡å™¨ä¸Šã€‚\n  æ•°æ®åº“è¯»å†™åˆ†ç¦»\nä½¿ç”¨ç¼“å­˜åï¼Œå¤§éƒ¨åˆ†çš„æ•°æ®è¯»æ“ä½œè®¿é—®éƒ½å¯ä»¥ä¸é€šè¿‡æ•°æ®åº“å®Œæˆï¼Œä½†æ˜¯ä»æœ‰éƒ¨åˆ†è¯»æ“ä½œï¼ˆå¦‚ç¼“å­˜è¿‡æœŸï¼Œç¼“å­˜ä¸å‘½ä¸­ï¼‰å’Œå…¨éƒ¨çš„å†™æ“ä½œéœ€è¦è®¿é—®æ•°æ®åº“ã€‚\nç›®å‰å¤§éƒ¨åˆ†æ•°æ®åº“éƒ½æä¾›ä¸»ä»çƒ­å¤‡çš„åŠŸèƒ½ï¼Œåœ¨å†™æ•°æ®çš„æ—¶å€™ï¼Œè®¿é—®ä¸»åº“ï¼Œä¸»åº“é€šè¿‡ä¸»ä»å¤åˆ¶æœºåˆ¶å°†æ•°æ®æ›´æ–°åŒæ­¥è‡³ä»æ•°æ®åº“ï¼Œåœ¨è¯»çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡ä»æ•°æ®åº“è·å–æ•°æ®ã€‚\n  ä½¿ç”¨åå‘ä»£ç†å’Œ CDN åŠ é€Ÿç½‘ç«™å“åº”\nåœ¨ã€Šweb æ€§èƒ½æƒå¨æŒ‡å—ã€‹ä¸­æœ‰è®²åˆ°ï¼Œç½‘ç«™æ€§èƒ½çš„ç“¶é¢ˆï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æµªè´¹åœ¨ TCP çš„æ¡æ‰‹å’Œä¼ è¾“ä¸Šã€‚å› æ­¤å¯ä»¥é€šè¿‡ CDN å’Œåå‘ä»£ç†çš„æ–¹å¼æ¥åŠ å¿«å“åº”ã€‚\nCDN å’Œåå‘ä»£ç†çš„æœ¬è´¨éƒ½æ˜¯é€šè¿‡ç¼“å­˜ï¼Œä¸åŒçš„ä¸»è¦æ˜¯ï¼š\n CDN éƒ¨ç½²åœ¨æœåŠ¡å™¨å™¨ä¸Šçš„æœºæˆ¿ï¼Œç”¨æˆ·åœ¨è¯·æ±‚æ—¶ï¼Œä»è·ç¦»è‡ªå·±æœ€è¿‘çš„æœºæˆ¿è·å–æ•°æ®ã€‚ åå‘ä»£ç†æ˜¯éƒ¨ç½²åœ¨ä¸­å¿ƒæœºæˆ¿ï¼Œç”¨æˆ·è¯·æ±‚åˆ°è¾¾ä¸­å¿ƒæœºæˆ¿ä¹‹åï¼Œé¦–å…ˆè®¿é—®çš„æœåŠ¡å™¨æ˜¯åå‘ä»£ç†çš„æ‹‚å»å…¶ï¼Œå¦‚æœåå‘ä»£ç†æœåŠ¡å™¨ä¸­ç¼“å­˜ç€ç”¨æˆ·è¯·æ±‚çš„é¢èµ„æºï¼Œå°±å°†å…¶è¿”å›ç»™ç”¨æˆ·ã€‚    ä½¿ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå’Œåˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿ\néšç€ä¸šåŠ¡çš„å‘å±•ï¼Œä¾æ—§ä¸èƒ½æ»¡è¶³çš„æ—¶å€™ï¼Œå°±é‡‡ç”¨åˆ†å¸ƒå¼çš„æ–‡ä»¶å’Œåˆ†å¸ƒå¼çš„æ•°æ®åº“ç³»ç»Ÿã€‚\nåˆ†å¸ƒå¼æ•°æ®åº“æ˜¯æ•°æ®åº“æ‹†åˆ†çš„æœ€åæ‰‹æ®µï¼Œåªç”¨åœ¨å•è¡¨æ•°æ®è§„æ¨¡ç‰¹åˆ«åºå¤§çš„æ—¶å€™æ‰ä½¿ç”¨ã€‚æ›´å¸¸ç”¨çš„æ‹†åˆ†æ‰‹æ®µæ˜¯ä¸šåŠ¡åˆ†åº“ï¼Œå°†ä¸åŒçš„ä¸šåŠ¡æ•°æ®å­˜å‚¨åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­ã€‚\n  ä½¿ç”¨ NoSQL å’Œæœç´¢å¼•æ“\nå¯¹æ•°æ®æ£€ç´¢å’Œå­˜å‚¨è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œå°±å¯ä»¥é‡‡ç”¨ä¸€äº›éå…³ç³»å‹æ•°æ®åº“å¦‚ HBase å’Œéæ•°æ®åº“æŸ¥è¯¢æŠ€æœ¯å¦‚ ElasticSearch ç­‰ç­‰\n  ä¸šåŠ¡æ‹†åˆ†\nä¸šåŠ¡åœºæ™¯å¤æ‚çš„æ—¶å€™ï¼Œä¸€èˆ¬è®²æ•´ä¸ªç½‘ç«™ä¸šåŠ¡åˆ†ä¸ºä¸åŒçš„äº§å“çº¿ï¼Œå¦‚é¦–é¡µï¼Œè®¢å•ï¼Œä¹°å®¶ï¼Œå–å®¶ç­‰ç­‰ã€‚\næŠ€æœ¯ä¸Šä¹Ÿä¼šæ ¹æ®äº§å“çº¿åˆ’åˆ†ï¼Œå°†ä¸€ä¸ªç½‘ç«™åˆ†ä¸ºè®¸å¤šä¸åŒçš„åº”ç”¨ï¼Œæ¯ä¸ªåº”ç”¨ç‹¬ç«‹éƒ¨ç½²ç»´æŠ¤ï¼Œåº”ç”¨ä¹‹é—´å¯ä»¥é€šè¿‡ä¸€ä¸ªè¶…é“¾æ¥å»ºç«‹è”ç³»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œæ•°æ®åˆ†å‘ï¼Œå½“ç„¶æœ€å¤šçš„è¿˜æ˜¯é€šè¿‡è®¿é—®åŒä¸€ä¸ªæ•°æ®å­˜å‚¨ç³»ç»Ÿæ¥æ„æˆä¸€ä¸ªå…³è”çš„å®Œæ•´ç³»ç»Ÿã€‚\n  åˆ†å¸ƒå¼æœåŠ¡\néšç€ä¸šåŠ¡è¶Šæ‹†è¶Šå°ï¼Œå­˜å‚¨è¶Šæ¥è¶Šå¤§ï¼Œç»´æŠ¤è¶Šæ¥è¶Šå›°éš¾ã€‚æ­¤æ—¶å°±å¯ä»¥å°†ç›¸åŒä¸šåŠ¡æ“ä½œçš„æå–å‡ºæ¥ï¼Œç‹¬ç«‹éƒ¨ç½²ã€‚åº”ç”¨ç³»ç»Ÿåªéœ€è¦ç®¡ç†ç”¨æˆ·ç•Œé¢ï¼Œé€šè¿‡åˆ†å¸ƒå¼æœåŠ¡è°ƒç”¨å…±åŒçš„ä¸šåŠ¡æœåŠ¡å®Œæˆå…·ä½“çš„ä¸šåŠ¡æ“ä½œã€‚ä¹Ÿå°±æ˜¯æœ€è¿‘æ¦‚å¿µè¶Šæ¥è¶Šç«çš„â€”â€”å¾®æœåŠ¡ã€‚\n  äº‘è®¡ç®—\nå¤§å‹ç½‘ç«™æ¶æ„è§£å†³äº†æµ·é‡æ•°æ®åº“ç®¡ç†å’Œé«˜å¹¶å‘äº‹åŠ¡å¤„ç†ï¼Œå¯ä»¥å°†è¿™äº›è§£å†³æ–¹æ¡ˆåº”ç”¨åˆ°ç½‘ç«™è‡ªèº«ä»¥å¤–çš„ä¸šåŠ¡ä¸Šã€‚ç°åœ¨åƒé˜¿é‡Œäº‘ï¼Œäºšé©¬é€Šç­‰äº‘è®¡ç®—å¹³å°ï¼Œå°†è®¡ç®—ä½œä¸ºä¸€ç§åŸºç¡€èµ„æºå‡ºå”®ï¼Œä¸­å°ç½‘ç«™ä¸éœ€è¦å…³ç³»æŠ€æœ¯æ¶æ„ç­‰é—®é¢˜ï¼Œåªéœ€è¦æŒ‰éœ€ä»˜è´¹ï¼Œå°±å¯ä»¥ä½¿ç½‘ç«™éšç€ä¸šåŠ¡çš„å¢é•¿è·å¾—æ›´å¤§çš„å­˜å‚¨å’Œè®¡ç®—èµ„æºã€‚\n  æœªæ¥\næœªæ¥è¿˜èƒ½å˜æˆä»€ä¹ˆæ ·å­ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šï¼Œä¹Ÿè®¸ä»¥åéƒ½ä¸æ˜¯å¼€å‘äººå‘˜æ¥ç»´æŠ¤äº†ï¼Œæ‰€æœ‰çš„è¿™äº›éƒ½æ˜¯ AI æ¥å®Œæˆï¼Œç¨‹åºå‘˜è¦åšçš„å°±æ˜¯å¦‚ä½•å®Œå–„ AIã€‚ä¹Ÿè®¸ AI å‘å±•åˆ°æœ€åï¼Œäººç±»éƒ½ä¸éœ€è¦å­˜åœ¨äº†å§ã€‚\n  ç»“è¯­ ç½‘ç«™çš„æŠ€æœ¯æ˜¯ä¸ºä¸šåŠ¡è€Œå­˜åœ¨çš„ï¼Œé™¤æ­¤ä»¥å¤–æ¯«æ— æ„ä¹‰ã€‚åœ¨æŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡ä¸­ï¼Œè„±ç¦»ä¸šåŠ¡å‘å±•å®é™…ï¼Œä¸€å‘³çš„è¿½æ±‚æ–°æŠ€æœ¯ï¼Œå¯èƒ½ä¼šæŠŠæŠ€æœ¯å‘å±•å¼•å…¥ä¸€ä¸ªæ­ªè·¯ã€‚\næŠ€æœ¯æ˜¯ç”¨æ¥è§£å†³ä¸šåŠ¡çš„é—®é¢˜ï¼Œè€ŒæŠ€æœ¯ä¸å¯èƒ½å°†æ‰€æœ‰é—®é¢˜éƒ½è§£å†³æ‰ï¼Œæ¶‰åŠä¸šåŠ¡è‡ªèº«çš„é—®é¢˜ï¼Œè¿˜æ˜¯è¦é€šè¿‡ä¸šåŠ¡æ‰‹æ®µå»è§£å†³ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B/","summary":"å‰å‡ å¤©è·Ÿä¸€ä¸ªæœ‹å‹èŠäº†ä¸€äº›å…³äºç½‘ç«™ç¼“å­˜åˆ†å¸ƒå¼çš„ä¸€äº›ä¸œè¥¿ï¼Œå‘ç°è‡ªå·±çš„çŸ¥è¯†è¿˜æ˜¯å¤ªè¿‡è´«ç˜ ã€‚ç†è®º+åè®®ï¼Œè¿™æ˜¯ç°åœ¨æˆ‘äºŸå¾…åŠ å¼ºçš„ã€‚è¿™ä¸ªå‘¨æœ«ä¹°äº†ä¸¤æœ¬å…³äºåˆ†å¸ƒå¼ç½‘ç«™çš„ä¹¦ï¼Œæœ¬ç€å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œä¾¿æœ‰äº†è¿™æ ·ä¸€ç³»åˆ—çš„æ–‡ç« ã€‚å¸Œæœ›ä¸€åŒåˆ†äº«ï¼Œä¹Ÿè¯·å¤šæŒ‡æ•™ã€‚\n code less, play more!\n å‰è¨€ è¿™ä¸ªä¸–ç•Œä¸Šæ²¡æœ‰å“ªä¸ªç½‘ç«™ä»è¯ç”Ÿèµ·å°±æ˜¯å¤§å‹ç½‘ç«™ï¼›ä¹Ÿæ²¡æœ‰å“ªä¸ªç½‘ç«™ç¬¬ä¸€æ¬¡å‘å¸ƒçš„æ—¶å€™å°±æ‹¥æœ‰åºå¤§çš„ç”¨æˆ·ï¼Œé«˜å¹¶å‘çš„è®¿é—®ï¼Œæµ·é‡çš„æ•°æ®ï¼›å¤§å‹ç½‘ç«™éƒ½æ˜¯ä»å°å‹ç½‘ç«™å‘å±•è€Œæ¥ã€‚ç½‘ç«™çš„ä»·å€¼åœ¨äºå®ƒèƒ½ç»™ç”¨æˆ·æä¾›ä»€ä¹ˆå®¶å®…ï¼Œåœ¨äºç½‘ç«™èƒ½åšä»€ä¹ˆï¼Œè€Œä¸åœ¨äºå®ƒæ˜¯æ€ä¹ˆåšçš„ï¼Œæ‰€ä»¥ç½‘ç«™åœ¨å°çš„æ—¶å€™å°±å»è¿½æ±‚ç½‘ç«™çš„æ¶æ„æ˜¯èˆæœ¬é€æœ«ï¼Œå¾—ä¸å¿å¤±çš„ã€‚å°å‹ç½‘ç«™æœ€éœ€è¦åšçš„å°±æ˜¯ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„æœåŠ¡æ¥åˆ›é€ ä»·å€¼ï¼Œå¾—åˆ°ç”¨æˆ·è®¤å¯ï¼Œæ´»ä¸‹å»ï¼Œé‡è›®ç”Ÿé•¿ã€‚\nå¤§å‹ç½‘ç«™è½¯ä»¶ç³»ç»Ÿçš„ç‰¹ç‚¹  é«˜å¹¶å‘ï¼Œå¤§æµé‡ é«˜å¯ç”¨ æµ·é‡æ•°æ® ç”¨æˆ·åˆ†å¸ƒå¹¿æ³›ï¼Œç½‘ç»œæƒ…å†µå¤æ‚ å®‰å…¨ç¯å¢ƒæ¶åŠ£ éœ€æ±‚å¿«é€Ÿå˜æ›´ï¼Œå‘å¸ƒå¹³é¢‘ç¹ æ¸è¿›å¼å‘å±•  å¤§å‹ç½‘ç«™çš„å‘å±•å†ç¨‹   åˆå§‹é˜¶æ®µçš„ç½‘ç«™æ¶æ„\næœ€å¼€å§‹æ²¡æœ‰å¤šå°‘äººè®¿é—®ï¼Œæ‰€ä»¥åº”ç”¨ç¨‹åºï¼Œæ•°æ®åº“ï¼Œæ–‡ä»¶éƒ½åœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚\n  åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®æœåŠ¡åˆ†ç¦»\nåº”ç”¨å’Œæ•°æ®åˆ†ç¦»ä¹‹åï¼Œä¸€èˆ¬éœ€è¦ä¸‰å°æœåŠ¡å™¨ã€‚åº”ç”¨æœåŠ¡å™¨ï¼Œæ–‡ä»¶æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨ï¼Œè¿™ä¸‰ç§æœåŠ¡å™¨å¯¹äºç¡¬ä»¶è¦æ±‚å„ä¸ç›¸åŒã€‚\n åº”ç”¨æœåŠ¡å™¨ï¼šæ›´å¼ºå¤§çš„ CPU æ•°æ®åº“æœåŠ¡å™¨ï¼šæ›´å¿«é€Ÿçš„ç£ç›˜å’Œæ›´å¤§çš„å†…å­˜ æ–‡ä»¶æœåŠ¡å™¨ï¼šå®¹é‡æ›´å¤§çš„ç¡¬ç›˜    ä½¿ç”¨ç¼“å­˜æ”¹å–„æ€§èƒ½\nç½‘ç«™çš„è®¿é—®ä¹Ÿéµå¾ªäºŒå…«å®šå¾‹ï¼š80%çš„ä¸šåŠ¡é›†ä¸­åœ¨ 20%çš„æ•°æ®ä¸Šã€‚å› æ­¤å¯ä»¥æŠŠè¿™ä¸€å°éƒ¨åˆ†æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå‡å°‘æ•°æ®åº“çš„è®¿é—®å‹åŠ›ã€‚\nç½‘ç«™çš„ç¼“å­˜å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š\n æœ¬åœ°ç¼“å­˜ï¼šç¼“å­˜åœ¨åº”ç”¨æœåŠ¡å™¨ä¸Šã€‚æœ¬åœ°ç¼“å­˜è®¿é—®é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å—åˆ¶äºå†…å­˜é™åˆ¶ï¼Œç¼“å­˜æ•°é‡æœ‰é™ï¼Œè€Œä¸”ä¹Ÿä¼šå‡ºç°å’Œåº”ç”¨ç¨‹åºäº‰æŠ¢å†…å­˜çš„æƒ…å†µã€‚ è¿œç¨‹åˆ†å¸ƒå¼ç¼“å­˜ï¼šä»¥é›†ç¾¤çš„æ–¹å¼ï¼Œç¼“å­˜åœ¨å¤§å†…å­˜çš„ä¸“ç”¨ç¼“å­˜æœåŠ¡å™¨ã€‚å¯ä»¥åœ¨ç†è®ºä¸Šåšåˆ°ä¸å—å†…å­˜å®¹é‡é™åˆ¶ã€‚    ä½¿ç”¨åº”ç”¨æœåŠ¡å™¨é›†ç¾¤æé«˜å¹¶å‘èƒ½åŠ›\nå½“ä¸€å°æœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›å’Œå­˜å‚¨ç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼Œä¸è¦ä¼å›¾æ›´æ¢æ›´å¼ºå¤§çš„æœåŠ¡å™¨ã€‚å¯¹äºå¤§å‹ç½‘ç«™æ¥è¯´ï¼Œä¸ç®¡å¤šä¹ˆå¼ºå¤§çš„æœåŠ¡å™¨ï¼Œéƒ½æ»¡è¶³ä¸äº†ç½‘ç«™æŒç»­å¢é•¿çš„ä¸šåŠ¡éœ€æ±‚ã€‚æ­¤æ—¶å°±å¯ä»¥è€ƒè™‘é›†ç¾¤çš„æ–¹å¼ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡è°ƒåº¦æœåŠ¡å™¨ï¼Œå¯ä»¥å°†æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚åˆ†å‘åˆ°åº”ç”¨æœåŠ¡å™¨é›†ç¾¤ä¸­çš„ä»»ä½•ä¸€å°æœåŠ¡å™¨ä¸Šã€‚\n  æ•°æ®åº“è¯»å†™åˆ†ç¦»\nä½¿ç”¨ç¼“å­˜åï¼Œå¤§éƒ¨åˆ†çš„æ•°æ®è¯»æ“ä½œè®¿é—®éƒ½å¯ä»¥ä¸é€šè¿‡æ•°æ®åº“å®Œæˆï¼Œä½†æ˜¯ä»æœ‰éƒ¨åˆ†è¯»æ“ä½œï¼ˆå¦‚ç¼“å­˜è¿‡æœŸï¼Œç¼“å­˜ä¸å‘½ä¸­ï¼‰å’Œå…¨éƒ¨çš„å†™æ“ä½œéœ€è¦è®¿é—®æ•°æ®åº“ã€‚\nç›®å‰å¤§éƒ¨åˆ†æ•°æ®åº“éƒ½æä¾›ä¸»ä»çƒ­å¤‡çš„åŠŸèƒ½ï¼Œåœ¨å†™æ•°æ®çš„æ—¶å€™ï¼Œè®¿é—®ä¸»åº“ï¼Œä¸»åº“é€šè¿‡ä¸»ä»å¤åˆ¶æœºåˆ¶å°†æ•°æ®æ›´æ–°åŒæ­¥è‡³ä»æ•°æ®åº“ï¼Œåœ¨è¯»çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡ä»æ•°æ®åº“è·å–æ•°æ®ã€‚\n  ä½¿ç”¨åå‘ä»£ç†å’Œ CDN åŠ é€Ÿç½‘ç«™å“åº”\nåœ¨ã€Šweb æ€§èƒ½æƒå¨æŒ‡å—ã€‹ä¸­æœ‰è®²åˆ°ï¼Œç½‘ç«™æ€§èƒ½çš„ç“¶é¢ˆï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æµªè´¹åœ¨ TCP çš„æ¡æ‰‹å’Œä¼ è¾“ä¸Šã€‚å› æ­¤å¯ä»¥é€šè¿‡ CDN å’Œåå‘ä»£ç†çš„æ–¹å¼æ¥åŠ å¿«å“åº”ã€‚\nCDN å’Œåå‘ä»£ç†çš„æœ¬è´¨éƒ½æ˜¯é€šè¿‡ç¼“å­˜ï¼Œä¸åŒçš„ä¸»è¦æ˜¯ï¼š\n CDN éƒ¨ç½²åœ¨æœåŠ¡å™¨å™¨ä¸Šçš„æœºæˆ¿ï¼Œç”¨æˆ·åœ¨è¯·æ±‚æ—¶ï¼Œä»è·ç¦»è‡ªå·±æœ€è¿‘çš„æœºæˆ¿è·å–æ•°æ®ã€‚ åå‘ä»£ç†æ˜¯éƒ¨ç½²åœ¨ä¸­å¿ƒæœºæˆ¿ï¼Œç”¨æˆ·è¯·æ±‚åˆ°è¾¾ä¸­å¿ƒæœºæˆ¿ä¹‹åï¼Œé¦–å…ˆè®¿é—®çš„æœåŠ¡å™¨æ˜¯åå‘ä»£ç†çš„æ‹‚å»å…¶ï¼Œå¦‚æœåå‘ä»£ç†æœåŠ¡å™¨ä¸­ç¼“å­˜ç€ç”¨æˆ·è¯·æ±‚çš„é¢èµ„æºï¼Œå°±å°†å…¶è¿”å›ç»™ç”¨æˆ·ã€‚    ä½¿ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå’Œåˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿ","title":"å¤§å‹ç½‘ç«™å‘å±•å†ç¨‹"},{"content":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€ŠGeth å…¥é—¨ã€‹ä¸­ï¼Œä¸»è¦è®²äº†å¼€å‘ç¯å¢ƒä¸‹ä»¥å¤ªåŠ geth å®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚ä»Šå¤©ç®€å•è¯´ä¸‹ç§é“¾çš„é…ç½®ã€‚\ngenesis.json {  \u0026#34;config\u0026#34;: {  \u0026#34;chainId\u0026#34;: 10,  \u0026#34;homesteadBlock\u0026#34;: 0,  \u0026#34;eip155Block\u0026#34;: 0,  \u0026#34;eip158Block\u0026#34;: 0  },  \u0026#34;coinbase\u0026#34; : \u0026#34;0x0000000000000000000000000000000000000000\u0026#34;,  \u0026#34;difficulty\u0026#34; : \u0026#34;0x40000\u0026#34;,  \u0026#34;extraData\u0026#34; : \u0026#34;\u0026#34;,  \u0026#34;gasLimit\u0026#34; : \u0026#34;0xffffffff\u0026#34;,  \u0026#34;nonce\u0026#34; : \u0026#34;0x0000000000000042\u0026#34;,  \u0026#34;mixhash\u0026#34; : \u0026#34;0x0000000000000000000000000000000000000000000000000000000000000000\u0026#34;,  \u0026#34;parentHash\u0026#34; : \u0026#34;0x0000000000000000000000000000000000000000000000000000000000000000\u0026#34;,  \u0026#34;timestamp\u0026#34; : \u0026#34;0x00\u0026#34;,  \u0026#34;alloc\u0026#34;: { } }    å‚æ•° æè¿°     nonce nonce å°±æ˜¯ä¸€ä¸ª 64 ä½éšæœºæ•°ï¼Œç”¨äºæŒ–çŸ¿   mixhash ä¸ nonce é…åˆç”¨äºæŒ–çŸ¿ï¼Œç”±ä¸Šä¸€ä¸ªåŒºå—çš„ä¸€éƒ¨åˆ†ç”Ÿæˆçš„ hash   difficulty è®¾ç½®å½“å‰åŒºå—çš„éš¾åº¦ï¼Œå¦‚æœéš¾åº¦è¿‡å¤§ï¼Œcpu æŒ–çŸ¿å°±å¾ˆéš¾ï¼Œè¿™é‡Œè®¾ç½®è¾ƒå°éš¾åº¦   alloc ç”¨æ¥é¢„ç½®è´¦å·ä»¥åŠè´¦å·çš„ä»¥å¤ªå¸æ•°é‡ï¼Œå› ä¸ºç§æœ‰é“¾æŒ–çŸ¿æ¯”è¾ƒå®¹æ˜“ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦é¢„ç½®æœ‰å¸çš„è´¦å·ï¼Œéœ€è¦çš„æ—¶å€™è‡ªå·±åˆ›å»ºå³å¯ä»¥   coinbase çŸ¿å·¥çš„è´¦å·ï¼Œéšä¾¿å¡«   timestamp è®¾ç½®åˆ›ä¸–å—çš„æ—¶é—´æˆ³   parentHash ä¸Šä¸€ä¸ªåŒºå—çš„ hash å€¼ï¼Œå› ä¸ºæ˜¯åˆ›ä¸–å—ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼æ˜¯ 0   extraData é™„åŠ ä¿¡æ¯ï¼Œéšä¾¿å¡«ï¼Œå¯ä»¥å¡«ä½ çš„ä¸ªæ€§ä¿¡æ¯   gasLimit è¯¥å€¼è®¾ç½®å¯¹ GAS çš„æ¶ˆè€—æ€»é‡é™åˆ¶ï¼Œç”¨æ¥é™åˆ¶åŒºå—èƒ½åŒ…å«çš„äº¤æ˜“ä¿¡æ¯æ€»å’Œï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ç§æœ‰é“¾ï¼Œæ‰€ä»¥å¡«æœ€å¤§ã€‚   config Fatal: failed to write genesis block: genesis has no chain configuration ï¼šè¿™ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œå°±æ˜¯è¯´ï¼Œä½ çš„ json æ–‡ä»¶ä¸­ï¼Œç¼ºå°‘ config éƒ¨åˆ†ã€‚çœ‹åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦æŠŠ geth é€€å›åˆ° v1.5 ç‰ˆæœ¬ï¼Œè€Œæ˜¯éœ€è¦åŠ ä¸Š config éƒ¨åˆ†ã€‚    åˆ›å»ºåˆ›ä¸–åŒºå— æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºåˆ›ä¸–åŒºå—ã€‚\ngeth --datadir \u0026#34;./\u0026#34; init genesis.json å¯ä»¥å‘ç°åœ¨å½“å‰ç›®å½•æ–°å¢äº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼š\n geth ä¸­ä¿å­˜çš„æ˜¯åŒºå—é“¾çš„ç›¸å…³æ•°æ® keystore ä¸­ä¿å­˜çš„æ˜¯è¯¥é“¾æ¡ä¸­çš„ç”¨æˆ·ä¿¡æ¯  å¯åŠ¨ç§é“¾ geth --datadir \u0026#34;./\u0026#34; --nodiscover console 2\u0026gt;\u0026gt;geth.log  --datadirï¼šä»£è¡¨ä»¥å¤ªåŠç§é“¾çš„åˆ›ä¸–åŒºå—çš„åœ°å€ --nodiscoverï¼šç§é“¾ä¸è¦è®©å…¬é“¾ä¸Šçš„èŠ‚ç‚¹å‘ç°  ä¹Ÿå¯å°†æ­¤å‘½ä»¤å†™å…¥ä¸€ä¸ª shell æ–‡ä»¶ä¸­ï¼Œæ¯æ¬¡å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œè„šæœ¬å°±å¯ä»¥äº†ã€‚\nè¾“å…¥æ­¤å‘½ä»¤åï¼Œå°±å¯ä»¥è¿›å…¥åˆ° geth çš„æ§åˆ¶å°ä¸­äº†ï¼Œåœ¨è¿™é‡Œå¯ä»¥è¿›è¡ŒæŒ–çŸ¿ï¼Œæ™ºèƒ½åˆçº¦çš„ç¼–å†™ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/geth-%E7%A7%81%E9%93%BE/","summary":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€ŠGeth å…¥é—¨ã€‹ä¸­ï¼Œä¸»è¦è®²äº†å¼€å‘ç¯å¢ƒä¸‹ä»¥å¤ªåŠ geth å®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚ä»Šå¤©ç®€å•è¯´ä¸‹ç§é“¾çš„é…ç½®ã€‚\ngenesis.json {  \u0026#34;config\u0026#34;: {  \u0026#34;chainId\u0026#34;: 10,  \u0026#34;homesteadBlock\u0026#34;: 0,  \u0026#34;eip155Block\u0026#34;: 0,  \u0026#34;eip158Block\u0026#34;: 0  },  \u0026#34;coinbase\u0026#34; : \u0026#34;0x0000000000000000000000000000000000000000\u0026#34;,  \u0026#34;difficulty\u0026#34; : \u0026#34;0x40000\u0026#34;,  \u0026#34;extraData\u0026#34; : \u0026#34;\u0026#34;,  \u0026#34;gasLimit\u0026#34; : \u0026#34;0xffffffff\u0026#34;,  \u0026#34;nonce\u0026#34; : \u0026#34;0x0000000000000042\u0026#34;,  \u0026#34;mixhash\u0026#34; : \u0026#34;0x0000000000000000000000000000000000000000000000000000000000000000\u0026#34;,  \u0026#34;parentHash\u0026#34; : \u0026#34;0x0000000000000000000000000000000000000000000000000000000000000000\u0026#34;,  \u0026#34;timestamp\u0026#34; : \u0026#34;0x00\u0026#34;,  \u0026#34;alloc\u0026#34;: { } }    å‚æ•° æè¿°     nonce nonce å°±æ˜¯ä¸€ä¸ª 64 ä½éšæœºæ•°ï¼Œç”¨äºæŒ–çŸ¿   mixhash ä¸ nonce é…åˆç”¨äºæŒ–çŸ¿ï¼Œç”±ä¸Šä¸€ä¸ªåŒºå—çš„ä¸€éƒ¨åˆ†ç”Ÿæˆçš„ hash   difficulty è®¾ç½®å½“å‰åŒºå—çš„éš¾åº¦ï¼Œå¦‚æœéš¾åº¦è¿‡å¤§ï¼Œcpu æŒ–çŸ¿å°±å¾ˆéš¾ï¼Œè¿™é‡Œè®¾ç½®è¾ƒå°éš¾åº¦   alloc ç”¨æ¥é¢„ç½®è´¦å·ä»¥åŠè´¦å·çš„ä»¥å¤ªå¸æ•°é‡ï¼Œå› ä¸ºç§æœ‰é“¾æŒ–çŸ¿æ¯”è¾ƒå®¹æ˜“ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦é¢„ç½®æœ‰å¸çš„è´¦å·ï¼Œéœ€è¦çš„æ—¶å€™è‡ªå·±åˆ›å»ºå³å¯ä»¥   coinbase çŸ¿å·¥çš„è´¦å·ï¼Œéšä¾¿å¡«   timestamp è®¾ç½®åˆ›ä¸–å—çš„æ—¶é—´æˆ³   parentHash ä¸Šä¸€ä¸ªåŒºå—çš„ hash å€¼ï¼Œå› ä¸ºæ˜¯åˆ›ä¸–å—ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼æ˜¯ 0   extraData é™„åŠ ä¿¡æ¯ï¼Œéšä¾¿å¡«ï¼Œå¯ä»¥å¡«ä½ çš„ä¸ªæ€§ä¿¡æ¯   gasLimit è¯¥å€¼è®¾ç½®å¯¹ GAS çš„æ¶ˆè€—æ€»é‡é™åˆ¶ï¼Œç”¨æ¥é™åˆ¶åŒºå—èƒ½åŒ…å«çš„äº¤æ˜“ä¿¡æ¯æ€»å’Œï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ç§æœ‰é“¾ï¼Œæ‰€ä»¥å¡«æœ€å¤§ã€‚   config Fatal: failed to write genesis block: genesis has no chain configuration ï¼šè¿™ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œå°±æ˜¯è¯´ï¼Œä½ çš„ json æ–‡ä»¶ä¸­ï¼Œç¼ºå°‘ config éƒ¨åˆ†ã€‚çœ‹åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦æŠŠ geth é€€å›åˆ° v1.","title":"Geth ç§é“¾"},{"content":"Geth ç®€ä»‹ go-ethereum\ngo-ethereum å®¢æˆ·ç«¯é€šå¸¸è¢«ç§°ä¸º gethï¼Œå®ƒæ˜¯ä¸ªå‘½ä»¤è¡Œç•Œé¢ï¼Œæ‰§è¡Œåœ¨ Go ä¸Šå®ç°çš„å®Œæ•´ä»¥å¤ªåŠèŠ‚ç‚¹ã€‚é€šè¿‡å®‰è£…å’Œè¿è¡Œ gethï¼Œå¯ä»¥å‚ä¸åˆ°ä»¥å¤ªåŠå‰å°å®æ—¶ç½‘ç»œå¹¶è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š\n æŒ–æ˜çœŸçš„ä»¥å¤ªå¸ åœ¨ä¸åŒåœ°å€é—´è½¬ç§»èµ„é‡‘ åˆ›å»ºåˆçº¦ï¼Œå‘é€äº¤æ˜“ æ¢ç´¢åŒºå—å†å² åŠå¾ˆå¤šå…¶ä»–   ç½‘ç«™: http://ethereum.github.io/go-ethereum/ Github: https://github.com/ethereum/go-ethereum ç»´åŸºç™¾ç§‘: https://github.com/ethereum/go-ethereum/wiki/geth Gitter: https://gitter.im/ethereum/go-ethereum\n mac ä¸‹å®‰è£… geth  é¦–å…ˆå®‰è£… homebrewï¼Œ ä½¿ç”¨ brew å®‰è£…å³å¯ã€‚åœ¨å®‰è£… geth çš„æ—¶å€™ï¼Œä¼šå°† go ä¹Ÿå®‰è£…ä¸Šã€‚  brew tap ethereum/ethereum brew install ethereum  åœ¨å‘½ä»¤è¡Œè¾“å…¥ geth â€”helpï¼Œå¦‚æœå‡ºç°\nzhuzhenengdeMBP:blog zhuzhenfeng$ geth --help NAME:  geth - the go-ethereum command line interface   Copyright 2013-2017 The go-ethereum Authors  USAGE:  geth [options] command [command options] [arguments...]  VERSION:  1.7.3-unstable-eea996e4 è¯æ˜å®‰è£…æˆåŠŸã€‚\n  ä½¿ç”¨ Geth   æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œä»¥å¼€å‘çš„æ–¹å¼å¯åŠ¨ geth\ngeth --datadir â€œ~/Documents/github/ethfans/ethdevâ€ --dev \u0026ndash;datadir æ˜¯æŒ‡å®š geth çš„å¼€å‘ç›®å½•ï¼Œå¼•å·çš„è·¯å¾„å¯ä»¥éšä¾¿è®¾ç½®\n  æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿›å…¥ geth çš„æ§åˆ¶å°\ngeth --dev console 2\u0026gt;\u0026gt;file_to_log_output è¯¥å‘½ä»¤ä¼šå°†åœ¨ console ä¸­æ‰§è¡Œçš„å‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ªæ–‡æœ¬ä¿å­˜åœ¨ file_to_log_output æ–‡ä»¶ä¸­ã€‚\n  å†æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼ŒæŸ¥çœ‹æ‰“å°å‡ºæ¥çš„æ—¥å¿—\ntail -f file_to_log_output   åˆ‡æ¢åˆ° geth æ§åˆ¶å°ç»ˆç«¯ï¼Œgeth æœ‰å¦‚ä¸‹å¸¸ç”¨çš„å‘½ä»¤\n  eth.accounts\næŸ¥çœ‹æœ‰ä»€ä¹ˆè´¦æˆ·\n  personal.newAccount('å¯†ç ')\nåˆ›å»ºä¸€ä¸ªè´¦æˆ·\n  user1=eth.accounts[0]\nå¯ä»¥æŠŠè´¦æˆ·èµ‹å€¼ç»™æŸä¸€ä¸ªå˜é‡\n  eth.getBalance(user1)\nè·å–æŸä¸€è´¦æˆ·çš„ä½™é¢\n  miner.start()\nå¯åŠ¨æŒ–çŸ¿ç¨‹åº\n  miner.stop()\nåœæ­¢æŒ–çŸ¿ç¨‹åº\n  eth.sendTransaction({from: user1,to: user2,value: web3.toWei(3,\u0026quot;ether\u0026quot;)})\nä» user1 å‘ user2 è½¬ä»¥å¤ªå¸\n  personal.unlockAccount(user1, 'å¯†ç ')\nè§£é”è´¦æˆ·\n  ä»¥å¤ªåŠå¯åŠ¨æŒ–çŸ¿ç¨‹åºçš„æ—¶å€™ï¼Œå¤´ç»“ç‚¹ä¼šäº§ç”Ÿä»¥å¤ªå¸ï¼Œåœ¨è¿›è¡Œè½¬è´¦æ“ä½œä¹‹åï¼Œå¿…é¡»è¿›è¡ŒæŒ–çŸ¿æ‰ä¼šä½¿äº¤æ˜“æˆåŠŸã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/geth/","summary":"Geth ç®€ä»‹ go-ethereum\ngo-ethereum å®¢æˆ·ç«¯é€šå¸¸è¢«ç§°ä¸º gethï¼Œå®ƒæ˜¯ä¸ªå‘½ä»¤è¡Œç•Œé¢ï¼Œæ‰§è¡Œåœ¨ Go ä¸Šå®ç°çš„å®Œæ•´ä»¥å¤ªåŠèŠ‚ç‚¹ã€‚é€šè¿‡å®‰è£…å’Œè¿è¡Œ gethï¼Œå¯ä»¥å‚ä¸åˆ°ä»¥å¤ªåŠå‰å°å®æ—¶ç½‘ç»œå¹¶è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š\n æŒ–æ˜çœŸçš„ä»¥å¤ªå¸ åœ¨ä¸åŒåœ°å€é—´è½¬ç§»èµ„é‡‘ åˆ›å»ºåˆçº¦ï¼Œå‘é€äº¤æ˜“ æ¢ç´¢åŒºå—å†å² åŠå¾ˆå¤šå…¶ä»–   ç½‘ç«™: http://ethereum.github.io/go-ethereum/ Github: https://github.com/ethereum/go-ethereum ç»´åŸºç™¾ç§‘: https://github.com/ethereum/go-ethereum/wiki/geth Gitter: https://gitter.im/ethereum/go-ethereum\n mac ä¸‹å®‰è£… geth  é¦–å…ˆå®‰è£… homebrewï¼Œ ä½¿ç”¨ brew å®‰è£…å³å¯ã€‚åœ¨å®‰è£… geth çš„æ—¶å€™ï¼Œä¼šå°† go ä¹Ÿå®‰è£…ä¸Šã€‚  brew tap ethereum/ethereum brew install ethereum  åœ¨å‘½ä»¤è¡Œè¾“å…¥ geth â€”helpï¼Œå¦‚æœå‡ºç°\nzhuzhenengdeMBP:blog zhuzhenfeng$ geth --help NAME:  geth - the go-ethereum command line interface   Copyright 2013-2017 The go-ethereum Authors  USAGE:  geth [options] command [command options] [arguments.","title":"Geth"},{"content":"json å­—ç¬¦ä¸²å¤„ç†  get_json_object lateral_view explode substr json_tuple  get_json_object get_json_object(string json_string, string path)\nè§£æ json å­—ç¬¦ä¸² json_stringï¼Œè¿”å› path æŒ‡å®šçš„å†…å®¹ã€‚å¦‚æœè¾“å…¥çš„ json å­—ç¬¦ä¸²æ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¹ˆè¿”å› nullã€‚\npath å°±æ˜¯ \u0026lsquo;$.å­—æ®µå\u0026rsquo;ã€‚\nå¦‚æœè¯¥å­—æ®µçš„ value ä¹Ÿæ˜¯ jsonï¼Œå°±å¯ä»¥ä¸€ç›´ç‚¹ä¸‹å»ã€‚\nå¦‚æœè¯¥å­—æ®µçš„ value æ˜¯æ•°ç»„ï¼Œå°±å¯ä»¥ç”¨ \u0026lsquo;$.å­—æ®µå[0]\u0026rsquo;ï¼Œç±»ä¼¼è¿™æ ·ä¸‹æ ‡çš„å½¢å¼å»è®¿é—®ã€‚\nexplode explode(array)\nç»å¸¸å’Œ lateral view ä¸€èµ·ä½¿ç”¨ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ æ‹†åˆ†æˆå¤šè¡Œæ˜¾ç¤ºã€‚\nsubstr substr(string A, int start, int len)\nè¿”å›å­—ç¬¦ä¸² A ä» start ä½ç½®å¼€å§‹ï¼Œé•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²\njson_tuple json_tuple(string json_string, col1, col2, \u0026hellip;)\nç»å¸¸å’Œ lateral view ä¸€èµ·ä½¿ç”¨ï¼ŒåŒæ—¶è§£æå¤šä¸ª json å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªå­—æ®µã€‚\nparse_url, regexp_replace, regexp_extract parse_url parse_url(string urlString, string partToExtract, string keyToExtract)\nè¿”å› url ä¸­çš„æŒ‡å®šéƒ¨åˆ†ï¼Œå¦‚ hostï¼Œpathï¼Œquery ç­‰ç­‰ã€‚\npartToExtract æ˜¯ä¸ªæšä¸¾å€¼ï¼šHOST, PATH, QUERY, REF, PROTOCOL, AUTHORITY, FILE, and USERINFOã€‚\nregex_replace regex_extract(string a, string b, string c)\nå°†å­—ç¬¦ä¸² a ä¸­ç¬¦åˆæ­£åœ¨è¡¨è¾¾å¼ b çš„éƒ¨åˆ†æ›¿æ¢ä¸º c\njson_to_struct json_to_struct(json, \u0026lsquo;array æˆ–è€… map ç­‰\u0026rsquo;)\nunion_map union_map(map(k, v))\nlateral view from_unix_time from_unix_time(unix æ—¶é—´æˆ³, \u0026lsquo;yyyyMMddHH\u0026rsquo;)\nrow_number row_number() over (partition by å­—æ®µ a order by è®¡ç®—é¡¹ b desc ) rank\nhive ä¸­çš„åˆ†ç»„å’Œç»„å†…æ’åº\n rank æ˜¯æ’åºçš„åˆ«å partition byï¼š ç±»ä¼¼äº hive çš„å»ºè¡¨ï¼Œåˆ†åŒºçš„æ„æ€ order byï¼š æ’åºï¼Œé»˜è®¤æ˜¯å‡åºï¼ŒåŠ  desc é™åº  è¿™ä¸ªæ„æ€å°±æ˜¯æŒ‰å­—æ®µ a åˆ†åŒºï¼Œå¯¹è®¡ç®—é¡¹ b è¿›è¡Œé™åºæ’åˆ—\nè¿™ä¸ªæ˜¯ç»å¸¸ç”¨åˆ°è®¡ç®—åˆ†åŒºä¸­çš„æ’åºé—®é¢˜ã€‚\ncoalesce éç©ºæŸ¥æ‰¾å‡½æ•°\ncoalesce(v1, v2, v3, \u0026hellip;)\nè¿”å›å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºå€¼ï¼Œå¦‚æœæ‰€æœ‰å€¼éƒ½æ˜¯ NULLï¼Œè¿”å› NULL\n","permalink":"https://zhenfeng-zhu.github.io/post/hive%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/","summary":"json å­—ç¬¦ä¸²å¤„ç†  get_json_object lateral_view explode substr json_tuple  get_json_object get_json_object(string json_string, string path)\nè§£æ json å­—ç¬¦ä¸² json_stringï¼Œè¿”å› path æŒ‡å®šçš„å†…å®¹ã€‚å¦‚æœè¾“å…¥çš„ json å­—ç¬¦ä¸²æ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¹ˆè¿”å› nullã€‚\npath å°±æ˜¯ \u0026lsquo;$.å­—æ®µå\u0026rsquo;ã€‚\nå¦‚æœè¯¥å­—æ®µçš„ value ä¹Ÿæ˜¯ jsonï¼Œå°±å¯ä»¥ä¸€ç›´ç‚¹ä¸‹å»ã€‚\nå¦‚æœè¯¥å­—æ®µçš„ value æ˜¯æ•°ç»„ï¼Œå°±å¯ä»¥ç”¨ \u0026lsquo;$.å­—æ®µå[0]\u0026rsquo;ï¼Œç±»ä¼¼è¿™æ ·ä¸‹æ ‡çš„å½¢å¼å»è®¿é—®ã€‚\nexplode explode(array)\nç»å¸¸å’Œ lateral view ä¸€èµ·ä½¿ç”¨ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ æ‹†åˆ†æˆå¤šè¡Œæ˜¾ç¤ºã€‚\nsubstr substr(string A, int start, int len)\nè¿”å›å­—ç¬¦ä¸² A ä» start ä½ç½®å¼€å§‹ï¼Œé•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²\njson_tuple json_tuple(string json_string, col1, col2, \u0026hellip;)\nç»å¸¸å’Œ lateral view ä¸€èµ·ä½¿ç”¨ï¼ŒåŒæ—¶è§£æå¤šä¸ª json å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªå­—æ®µã€‚\nparse_url, regexp_replace, regexp_extract parse_url parse_url(string urlString, string partToExtract, string keyToExtract)","title":"hive å¸¸ç”¨å‡½æ•°"},{"content":"SQL æ¡ä»¶è¯­å¥ IF if(exp1, exp2, exp3)\nexp1 æ˜¯æ¡ä»¶ï¼Œæ¡ä»¶ä¸º true çš„è¯ï¼Œæ˜¯ exp2ï¼Œå¦åˆ™æ˜¯ exp3\ncase when  case åˆ—å  when æ¡ä»¶ then ç»“æœ  else å…¶ä»–ç»“æœ  end åˆ«å IFNULL IFNULL(exp1, exp2)\nåœ¨ exp1 çš„å€¼ä¸ä¸º null çš„æƒ…å†µä¸‹ï¼Œè¿”å› exp1ï¼Œå¦‚æœ exp1 ä½ nullï¼Œè¿”å› exp2 çš„å€¼ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/mysql%E7%9A%84%E5%AD%A6%E4%B9%A0/","summary":"SQL æ¡ä»¶è¯­å¥ IF if(exp1, exp2, exp3)\nexp1 æ˜¯æ¡ä»¶ï¼Œæ¡ä»¶ä¸º true çš„è¯ï¼Œæ˜¯ exp2ï¼Œå¦åˆ™æ˜¯ exp3\ncase when  case åˆ—å  when æ¡ä»¶ then ç»“æœ  else å…¶ä»–ç»“æœ  end åˆ«å IFNULL IFNULL(exp1, exp2)\nåœ¨ exp1 çš„å€¼ä¸ä¸º null çš„æƒ…å†µä¸‹ï¼Œè¿”å› exp1ï¼Œå¦‚æœ exp1 ä½ nullï¼Œè¿”å› exp2 çš„å€¼ã€‚","title":"mysql çš„å­¦ä¹ "},{"content":"ClickHouse ClickHouse æ˜¯ä¸€ä¸ªç”¨äºè”æœºåˆ†æï¼ˆOnline Analytical Processingï¼šOLAPï¼‰çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS)ã€‚é€šè¿‡ä½¿ç”¨ OLAP å·¥å…·ï¼Œç”¨æˆ·èƒ½å¤Ÿä»å¤šä¸ªè§’åº¦äº¤äº’åœ°åˆ†æå¤šç»´æ•°æ®ã€‚\nOLAP ç”±ä¸‰ä¸ªåŸºæœ¬çš„åˆ†ææ“ä½œç»„æˆï¼šä¸Šå·ï¼ˆroll-upï¼‰ã€é’»å–ï¼ˆdrill-downï¼‰ã€åˆ‡ç‰‡ï¼ˆslicingï¼‰å’Œåˆ‡å—ï¼ˆdicingï¼‰ã€‚\n  ä¸Šå·ï¼ˆroll-upï¼‰ï¼šæ¶‰åŠå¯ä»¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç»´åº¦ä¸­ç´¯ç§¯å’Œè®¡ç®—çš„æ•°æ®çš„èšåˆã€‚ä¾‹å¦‚ï¼Œæ‰€æœ‰çš„é”€å”®åŠäº‹å¤„æ±‡æ€»åˆ°é”€å”®éƒ¨é—¨ï¼Œä»¥é¢„æµ‹é”€å”®è¶‹åŠ¿ã€‚\n  é’»å–ï¼ˆdrill-downï¼‰ï¼šæ˜¯ä¸€ç§å…è®¸ç”¨æˆ·æµè§ˆè¯¦ç»†ä¿¡æ¯çš„æŠ€æœ¯ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥æŸ¥çœ‹ç»„æˆä¸€ä¸ªåœ°åŒºé”€å”®é¢çš„å•ä¸ªäº§å“çš„é”€å”®é¢ã€‚\n  åˆ‡ç‰‡ï¼ˆslicingï¼‰å’Œåˆ‡å—ï¼ˆdicingï¼‰ï¼šç”¨æˆ·å¯ä»¥ä» OLAP å¤šç»´æ•°æ®é›†ä¸­å–å‡ºï¼ˆåˆ‡ç‰‡ï¼‰ä¸€ç»„ç‰¹å®šçš„æ•°æ®ï¼Œå¹¶ä»ä¸åŒçš„è§’åº¦æŸ¥çœ‹ï¼ˆåˆ‡å—ï¼‰åˆ‡ç‰‡ã€‚è¿™äº›è§’åº¦æœ‰æ—¶è¢«ç§°ä¸ºç»´åº¦ï¼ˆä¾‹å¦‚æŒ‰é”€å”®äººå‘˜ã€æŒ‰æ—¥æœŸã€æŒ‰å®¢æˆ·ã€æŒ‰äº§å“æˆ–æŒ‰åœ°åŒºæŸ¥çœ‹ç›¸åŒçš„é”€å”®æƒ…å†µç­‰ï¼‰ã€‚\n  ä¼ ç»Ÿè¡Œå¼æ•°æ®åº“ä¸­ï¼Œå¤„äºåŒä¸€è¡Œä¸­çš„æ•°æ®æ€»æ˜¯è¢«ç‰©ç†çš„å­˜åœ¨ä¸€èµ·ã€‚åˆ—å¼æ•°æ®åº“æ€»æ˜¯å°†åŒä¸€åˆ—çš„æ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ï¼Œä¸åŒåˆ—çš„æ•°æ®åˆ†å¼€å­˜å‚¨ã€‚\nè¡Œå¼æ•°æ®åº“ï¼šmysqlï¼Œpg\nåˆ—å¼æ•°æ®åº“ï¼šverticaï¼Œdruid\nOLAP çš„å…³é”®ç‰¹å¾  å¤§å¤šæ˜¯è¯»è¯·æ±‚ æ•°æ®æ€»æ˜¯ä»¥ç›¸å½“å¤§çš„æ‰¹ï¼ˆ\u0026gt;1000wï¼‰è¿›è¡Œå†™å…¥ ä¸ä¿®æ”¹å·²ç»æ·»åŠ çš„æ•°æ® æ¯æ¬¡æŸ¥è¯¢éƒ½ä»æ•°æ®åº“ä¸­è¯»å–å¤§é‡çš„è¡Œï¼Œä½†æ˜¯åŒæ—¶åˆä»…éœ€è¦å°‘é‡çš„åˆ— å®½è¡¨ï¼Œå³æ¯ä¸ªè¡¨åŒ…å«å¤§é‡çš„åˆ— è¾ƒå°‘çš„æŸ¥è¯¢ï¼ˆé€šå¸¸æ¯å°æœåŠ¡å™¨æ¯ç§’æ•°ç™¾ä¸ªæŸ¥è¯¢æˆ–æ›´å°‘ï¼‰ å¯¹äºç®€å•çš„æŸ¥è¯¢ï¼Œå…è®¸å»¶è¿Ÿå¤§çº¦ 50ms åˆ—ä¸­çš„æ•°æ®ç›¸å¯¹è¾ƒå°ï¼šæ•°å­—å’ŒçŸ­å­—ç¬¦ä¸² å¤„ç†å•ä¸ªæŸ¥è¯¢æ—¶éœ€è¦é«˜ååé‡ï¼ˆæ¯ä¸ªæœåŠ¡å™¨æ¯ç§’é«˜è¾¾æ•°åäº¿è¡Œï¼‰ äº‹åŠ¡ä¸æ˜¯å¿…é¡»çš„ å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä½ æ¯ä¸€ä¸ªæŸ¥è¯¢é™¤äº†ä¸€ä¸ªå¤§è¡¨å¤–éƒ½å¾ˆå° æŸ¥è¯¢ç»“æœæ˜æ˜¾å°äºæ•°æ®æºï¼Œæ¢å¥è¯è¯´ï¼Œæ•°æ®è¢«è¿‡æ»¤æˆ–è€…èšåˆä¹‹åèƒ½å¤Ÿè¢«æ”¾åœ¨å•å°æœåŠ¡å™¨çš„å†…å­˜ä¸­  åˆ—å¼æ•°æ®åº“æ›´é€‚åˆ OLAP åœºæ™¯ Input/Output  åˆ†æç±»çš„æŸ¥è¯¢ï¼Œé€šå¸¸åªéœ€è¦è¯»å–è¡¨çš„ä¸€å°éƒ¨åˆ†åˆ—ã€‚ æ•°æ®æ€»æ˜¯æ‰“åŒ…æˆæ‰¹é‡è¯»å–ï¼Œåˆ—å‹ç¼©æ›´å®¹æ˜“ IO é™ä½äº†  CPU ç”±äºæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢éœ€è¦å¤„ç†å¤§é‡çš„è¡Œï¼Œå› æ­¤åœ¨æ•´ä¸ª Vector ä¸Šæ‰§è¡Œæ‰€æœ‰æ“ä½œå°†æ¯”åœ¨æ¯ä¸€è¡Œä¸Šæ‰§è¡Œæ‰€æœ‰æ“ä½œæ›´åŠ é«˜æ•ˆã€‚åŒæ—¶è¿™å°†æœ‰åŠ©äºå®ç°ä¸€ä¸ªå‡ ä¹æ²¡æœ‰è°ƒç”¨æˆæœ¬çš„æŸ¥è¯¢å¼•æ“ã€‚\n Vector å¼•æ“ ä»£ç ç”Ÿæˆ  ä¸ºäº†æé«˜ CPU æ•ˆç‡ï¼ŒæŸ¥è¯¢è¯­è¨€å¿…é¡»æ˜¯å£°æ˜å‹çš„(SQL æˆ– MDX)ï¼Œ æˆ–è€…è‡³å°‘ä¸€ä¸ª Vector(Jï¼ŒK)ã€‚ æŸ¥è¯¢åº”è¯¥åªåŒ…å«éšå¼å¾ªç¯ï¼Œå…è®¸è¿›è¡Œä¼˜åŒ–ã€‚\nclickhouse çš„ç‹¬ç‰¹åŠŸèƒ½ çœŸæ­£çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ ","permalink":"https://zhenfeng-zhu.github.io/post/clickhouse/","summary":"ClickHouse ClickHouse æ˜¯ä¸€ä¸ªç”¨äºè”æœºåˆ†æï¼ˆOnline Analytical Processingï¼šOLAPï¼‰çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS)ã€‚é€šè¿‡ä½¿ç”¨ OLAP å·¥å…·ï¼Œç”¨æˆ·èƒ½å¤Ÿä»å¤šä¸ªè§’åº¦äº¤äº’åœ°åˆ†æå¤šç»´æ•°æ®ã€‚\nOLAP ç”±ä¸‰ä¸ªåŸºæœ¬çš„åˆ†ææ“ä½œç»„æˆï¼šä¸Šå·ï¼ˆroll-upï¼‰ã€é’»å–ï¼ˆdrill-downï¼‰ã€åˆ‡ç‰‡ï¼ˆslicingï¼‰å’Œåˆ‡å—ï¼ˆdicingï¼‰ã€‚\n  ä¸Šå·ï¼ˆroll-upï¼‰ï¼šæ¶‰åŠå¯ä»¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç»´åº¦ä¸­ç´¯ç§¯å’Œè®¡ç®—çš„æ•°æ®çš„èšåˆã€‚ä¾‹å¦‚ï¼Œæ‰€æœ‰çš„é”€å”®åŠäº‹å¤„æ±‡æ€»åˆ°é”€å”®éƒ¨é—¨ï¼Œä»¥é¢„æµ‹é”€å”®è¶‹åŠ¿ã€‚\n  é’»å–ï¼ˆdrill-downï¼‰ï¼šæ˜¯ä¸€ç§å…è®¸ç”¨æˆ·æµè§ˆè¯¦ç»†ä¿¡æ¯çš„æŠ€æœ¯ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥æŸ¥çœ‹ç»„æˆä¸€ä¸ªåœ°åŒºé”€å”®é¢çš„å•ä¸ªäº§å“çš„é”€å”®é¢ã€‚\n  åˆ‡ç‰‡ï¼ˆslicingï¼‰å’Œåˆ‡å—ï¼ˆdicingï¼‰ï¼šç”¨æˆ·å¯ä»¥ä» OLAP å¤šç»´æ•°æ®é›†ä¸­å–å‡ºï¼ˆåˆ‡ç‰‡ï¼‰ä¸€ç»„ç‰¹å®šçš„æ•°æ®ï¼Œå¹¶ä»ä¸åŒçš„è§’åº¦æŸ¥çœ‹ï¼ˆåˆ‡å—ï¼‰åˆ‡ç‰‡ã€‚è¿™äº›è§’åº¦æœ‰æ—¶è¢«ç§°ä¸ºç»´åº¦ï¼ˆä¾‹å¦‚æŒ‰é”€å”®äººå‘˜ã€æŒ‰æ—¥æœŸã€æŒ‰å®¢æˆ·ã€æŒ‰äº§å“æˆ–æŒ‰åœ°åŒºæŸ¥çœ‹ç›¸åŒçš„é”€å”®æƒ…å†µç­‰ï¼‰ã€‚\n  ä¼ ç»Ÿè¡Œå¼æ•°æ®åº“ä¸­ï¼Œå¤„äºåŒä¸€è¡Œä¸­çš„æ•°æ®æ€»æ˜¯è¢«ç‰©ç†çš„å­˜åœ¨ä¸€èµ·ã€‚åˆ—å¼æ•°æ®åº“æ€»æ˜¯å°†åŒä¸€åˆ—çš„æ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ï¼Œä¸åŒåˆ—çš„æ•°æ®åˆ†å¼€å­˜å‚¨ã€‚\nè¡Œå¼æ•°æ®åº“ï¼šmysqlï¼Œpg\nåˆ—å¼æ•°æ®åº“ï¼šverticaï¼Œdruid\nOLAP çš„å…³é”®ç‰¹å¾  å¤§å¤šæ˜¯è¯»è¯·æ±‚ æ•°æ®æ€»æ˜¯ä»¥ç›¸å½“å¤§çš„æ‰¹ï¼ˆ\u0026gt;1000wï¼‰è¿›è¡Œå†™å…¥ ä¸ä¿®æ”¹å·²ç»æ·»åŠ çš„æ•°æ® æ¯æ¬¡æŸ¥è¯¢éƒ½ä»æ•°æ®åº“ä¸­è¯»å–å¤§é‡çš„è¡Œï¼Œä½†æ˜¯åŒæ—¶åˆä»…éœ€è¦å°‘é‡çš„åˆ— å®½è¡¨ï¼Œå³æ¯ä¸ªè¡¨åŒ…å«å¤§é‡çš„åˆ— è¾ƒå°‘çš„æŸ¥è¯¢ï¼ˆé€šå¸¸æ¯å°æœåŠ¡å™¨æ¯ç§’æ•°ç™¾ä¸ªæŸ¥è¯¢æˆ–æ›´å°‘ï¼‰ å¯¹äºç®€å•çš„æŸ¥è¯¢ï¼Œå…è®¸å»¶è¿Ÿå¤§çº¦ 50ms åˆ—ä¸­çš„æ•°æ®ç›¸å¯¹è¾ƒå°ï¼šæ•°å­—å’ŒçŸ­å­—ç¬¦ä¸² å¤„ç†å•ä¸ªæŸ¥è¯¢æ—¶éœ€è¦é«˜ååé‡ï¼ˆæ¯ä¸ªæœåŠ¡å™¨æ¯ç§’é«˜è¾¾æ•°åäº¿è¡Œï¼‰ äº‹åŠ¡ä¸æ˜¯å¿…é¡»çš„ å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä½ æ¯ä¸€ä¸ªæŸ¥è¯¢é™¤äº†ä¸€ä¸ªå¤§è¡¨å¤–éƒ½å¾ˆå° æŸ¥è¯¢ç»“æœæ˜æ˜¾å°äºæ•°æ®æºï¼Œæ¢å¥è¯è¯´ï¼Œæ•°æ®è¢«è¿‡æ»¤æˆ–è€…èšåˆä¹‹åèƒ½å¤Ÿè¢«æ”¾åœ¨å•å°æœåŠ¡å™¨çš„å†…å­˜ä¸­  åˆ—å¼æ•°æ®åº“æ›´é€‚åˆ OLAP åœºæ™¯ Input/Output  åˆ†æç±»çš„æŸ¥è¯¢ï¼Œé€šå¸¸åªéœ€è¦è¯»å–è¡¨çš„ä¸€å°éƒ¨åˆ†åˆ—ã€‚ æ•°æ®æ€»æ˜¯æ‰“åŒ…æˆæ‰¹é‡è¯»å–ï¼Œåˆ—å‹ç¼©æ›´å®¹æ˜“ IO é™ä½äº†  CPU ç”±äºæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢éœ€è¦å¤„ç†å¤§é‡çš„è¡Œï¼Œå› æ­¤åœ¨æ•´ä¸ª Vector ä¸Šæ‰§è¡Œæ‰€æœ‰æ“ä½œå°†æ¯”åœ¨æ¯ä¸€è¡Œä¸Šæ‰§è¡Œæ‰€æœ‰æ“ä½œæ›´åŠ é«˜æ•ˆã€‚åŒæ—¶è¿™å°†æœ‰åŠ©äºå®ç°ä¸€ä¸ªå‡ ä¹æ²¡æœ‰è°ƒç”¨æˆæœ¬çš„æŸ¥è¯¢å¼•æ“ã€‚\n Vector å¼•æ“ ä»£ç ç”Ÿæˆ  ä¸ºäº†æé«˜ CPU æ•ˆç‡ï¼ŒæŸ¥è¯¢è¯­è¨€å¿…é¡»æ˜¯å£°æ˜å‹çš„(SQL æˆ– MDX)ï¼Œ æˆ–è€…è‡³å°‘ä¸€ä¸ª Vector(Jï¼ŒK)ã€‚ æŸ¥è¯¢åº”è¯¥åªåŒ…å«éšå¼å¾ªç¯ï¼Œå…è®¸è¿›è¡Œä¼˜åŒ–ã€‚","title":"clickhouse"},{"content":"https://mubu.com/doc/oHlgG0FSu0\n","permalink":"https://zhenfeng-zhu.github.io/post/%E6%AF%8F%E6%97%A5%E5%AD%A6%E4%B9%A0-2019-09-29/","summary":"https://mubu.com/doc/oHlgG0FSu0","title":"æ¯æ—¥å­¦ä¹  2"},{"content":"å¼€è¨€è‹±è¯­ æå®¢æ—¶é—´ ç¼–è¯‘åŸç†ä¹‹ç¾ è¯­ä¹‰åˆ†æï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•åšä¸Šä¸‹æ–‡ç›¸å…³æƒ…å†µçš„å¤„ç†  è¯­ä¹‰åˆ†æçš„æœ¬è´¨ï¼Œå°±æ˜¯é’ˆå¯¹ä¸Šä¸‹æ–‡ç›¸å…³çš„æƒ…å†µåšå¤„ç†ã€‚  å¼•ç”¨æ¶ˆè§£ï¼šä¸åŒä½œç”¨åŸŸé‡Œå¯èƒ½æœ‰ç›¸åŒåç§°çš„å˜é‡ï¼Œå¿…é¡»æ‰¾åˆ°æ­£ç¡®çš„é‚£ä¸ªï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å¼•ç”¨æ¶ˆè§£ã€‚  å‡½æ•°å¼•ç”¨æ¶ˆè§£ å‘½åç©ºé—´å¼•ç”¨æ¶ˆè§£   å·¦å€¼å’Œå³å€¼  å·¦å€¼å–çš„æ˜¯å˜é‡çš„åœ°å€æˆ–è€…è¯´æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè·å¾—åœ°å€ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ–°å€¼å†™è¿›å»ã€‚ å³å€¼å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å€¼ã€‚ ä¸æ˜¯æ‰€æœ‰çš„è¡¨è¾¾å¼éƒ½èƒ½ç”Ÿæˆä¸€ä¸ªåˆæ ¼çš„å·¦å€¼ã€‚   å±æ€§è®¡ç®—  ä¸Šä¸‹æ–‡åˆ†ææˆ–è€…è¯´è¯­ä¹‰åˆ†æçš„ä¸€ç§ç®—æ³•ã€‚ å±æ€§æ–‡æ³•çš„ä¸»è¦æ€è·¯æ˜¯è®¡ç®—æœºç§‘å­¦çš„é‡è¦å¼€æ‹“è€…ï¼Œæ˜¯åœ¨ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•çš„åŸºç¡€ä¸Šåšäº†ä¸€äº›å¢å¼ºï¼Œä½¿ä¹‹å¯ä»¥è®¡ç®—å±æ€§å€¼ã€‚   è¿‡ç¨‹  ç±»å‹å’Œä½œç”¨åŸŸè§£æ ç±»å‹çš„æ¶ˆè§£ å¼•ç”¨çš„æ¶ˆè§£å’Œ S å±æ€§çš„ç±»å‹æ¨å¯¼ åšç±»å‹æ£€æŸ¥ åšä¸€äº›è¯­ä¹‰åˆæ³•æ€§æ£€æŸ¥      è¶£è°ˆ Linux æ“ä½œç³»ç»Ÿ Namespace æŠ€æœ¯ï¼šå†…éƒ¨åˆ›ä¸šå…¬å¸åº”è¯¥ç‹¬ç«‹è¿è¥ ä¸ºäº†éš”ç¦»ä¸åŒç±»å‹çš„èµ„æºï¼ŒLinux å†…æ ¸é‡Œé¢æœ‰å¦‚ä¸‹å‡ ç§ä¸åŒç±»å‹çš„ namespaceï¼š\n UTSï¼Œè¡¨ç¤ºä¸åŒçš„ namespace å¯ä»¥é…ç½®ä¸åŒçš„ hostname Userï¼Œå¯ä»¥é…ç½®ä¸åŒçš„ç”¨æˆ·å’Œç»„ Mountï¼Œæ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹æ˜¯éš”ç¦»çš„ PIDï¼Œæœ‰å®Œå…¨ç‹¬ç«‹çš„ pid Networkï¼Œæœ‰ç‹¬ç«‹çš„ç½‘ç»œåè®®æ ˆ  ","permalink":"https://zhenfeng-zhu.github.io/post/%E6%AF%8F%E6%97%A5%E5%AD%A6%E4%B9%A0-2019-09-24/","summary":"å¼€è¨€è‹±è¯­ æå®¢æ—¶é—´ ç¼–è¯‘åŸç†ä¹‹ç¾ è¯­ä¹‰åˆ†æï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•åšä¸Šä¸‹æ–‡ç›¸å…³æƒ…å†µçš„å¤„ç†  è¯­ä¹‰åˆ†æçš„æœ¬è´¨ï¼Œå°±æ˜¯é’ˆå¯¹ä¸Šä¸‹æ–‡ç›¸å…³çš„æƒ…å†µåšå¤„ç†ã€‚  å¼•ç”¨æ¶ˆè§£ï¼šä¸åŒä½œç”¨åŸŸé‡Œå¯èƒ½æœ‰ç›¸åŒåç§°çš„å˜é‡ï¼Œå¿…é¡»æ‰¾åˆ°æ­£ç¡®çš„é‚£ä¸ªï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å¼•ç”¨æ¶ˆè§£ã€‚  å‡½æ•°å¼•ç”¨æ¶ˆè§£ å‘½åç©ºé—´å¼•ç”¨æ¶ˆè§£   å·¦å€¼å’Œå³å€¼  å·¦å€¼å–çš„æ˜¯å˜é‡çš„åœ°å€æˆ–è€…è¯´æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè·å¾—åœ°å€ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ–°å€¼å†™è¿›å»ã€‚ å³å€¼å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å€¼ã€‚ ä¸æ˜¯æ‰€æœ‰çš„è¡¨è¾¾å¼éƒ½èƒ½ç”Ÿæˆä¸€ä¸ªåˆæ ¼çš„å·¦å€¼ã€‚   å±æ€§è®¡ç®—  ä¸Šä¸‹æ–‡åˆ†ææˆ–è€…è¯´è¯­ä¹‰åˆ†æçš„ä¸€ç§ç®—æ³•ã€‚ å±æ€§æ–‡æ³•çš„ä¸»è¦æ€è·¯æ˜¯è®¡ç®—æœºç§‘å­¦çš„é‡è¦å¼€æ‹“è€…ï¼Œæ˜¯åœ¨ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•çš„åŸºç¡€ä¸Šåšäº†ä¸€äº›å¢å¼ºï¼Œä½¿ä¹‹å¯ä»¥è®¡ç®—å±æ€§å€¼ã€‚   è¿‡ç¨‹  ç±»å‹å’Œä½œç”¨åŸŸè§£æ ç±»å‹çš„æ¶ˆè§£ å¼•ç”¨çš„æ¶ˆè§£å’Œ S å±æ€§çš„ç±»å‹æ¨å¯¼ åšç±»å‹æ£€æŸ¥ åšä¸€äº›è¯­ä¹‰åˆæ³•æ€§æ£€æŸ¥      è¶£è°ˆ Linux æ“ä½œç³»ç»Ÿ Namespace æŠ€æœ¯ï¼šå†…éƒ¨åˆ›ä¸šå…¬å¸åº”è¯¥ç‹¬ç«‹è¿è¥ ä¸ºäº†éš”ç¦»ä¸åŒç±»å‹çš„èµ„æºï¼ŒLinux å†…æ ¸é‡Œé¢æœ‰å¦‚ä¸‹å‡ ç§ä¸åŒç±»å‹çš„ namespaceï¼š\n UTSï¼Œè¡¨ç¤ºä¸åŒçš„ namespace å¯ä»¥é…ç½®ä¸åŒçš„ hostname Userï¼Œå¯ä»¥é…ç½®ä¸åŒçš„ç”¨æˆ·å’Œç»„ Mountï¼Œæ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹æ˜¯éš”ç¦»çš„ PIDï¼Œæœ‰å®Œå…¨ç‹¬ç«‹çš„ pid Networkï¼Œæœ‰ç‹¬ç«‹çš„ç½‘ç»œåè®®æ ˆ  ","title":"æ¯æ—¥å­¦ä¹ -2019-09-24"},{"content":"æŠ˜è…¾ä¸€ä¸‹ tmux\nå®‰è£… brew install tmux æ¦‚å¿µ  sessionï¼šç†è§£ä¸ºä¸€ä¸ªä¼šè¯ï¼ŒæŒä¹…ä¿å­˜å·¥ä½œçŠ¶æ€ã€‚ windowï¼šå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å¸¸è¯´çš„ tab é¡µã€‚ paneï¼šä¸€ä¸ª window è¢«åˆ†æˆè‹¥å¹²ä¸ª paneï¼Œç†è§£ä¸º iterm çš„åˆ†å±ã€‚  session æ–°å»º\ntmux new -s your-session-name æ–­å¼€\ntmux detach æ¢å¤\ntmux attach-session -t your-session-name æˆ–è€… tmux a -t your-session-name å…³é—­\n kill-server kill-session kill-window kill-pane  tmux kill-session -t your-session-name  tmux kill-server æŸ¥çœ‹\ntmux list-session tmux ls tmux çš„åŸºç¡€é…ç½® prefix æ˜¯ tmux çš„å‰ç¼€é”®ï¼Œé»˜è®¤æ˜¯ ctrl+b ã€‚åªæœ‰æŒ‰ä¸‹å‰ç¼€é”®ï¼Œæ‰ä¼šæ¿€æ´» tmuxï¼Œç„¶åå†æŒ‰å…¶ä»–çš„é”®è¿›è¡Œ tmux æ“ä½œã€‚è¿™æ ·å¯ä»¥é¿å…ä¸å…¶ä»–åº”ç”¨çš„å¿«æ·é”®è¿›è¡Œå†²çªã€‚\né…ç½®å‰ç¼€ éœ€è¦å» tmux.conf ä¸­å»é…ç½®\nåˆ†å± æ°´å¹³åˆ†å±ï¼šprefix+\u0026quot;ï¼Œå‰ç¼€é”®åŠ å¼•å· å‚ç›´åˆ†å±ï¼šprefix+%ï¼Œå‰ç¼€é”®åŠ ç™¾åˆ†å·\n","permalink":"https://zhenfeng-zhu.github.io/post/tmux/","summary":"æŠ˜è…¾ä¸€ä¸‹ tmux\nå®‰è£… brew install tmux æ¦‚å¿µ  sessionï¼šç†è§£ä¸ºä¸€ä¸ªä¼šè¯ï¼ŒæŒä¹…ä¿å­˜å·¥ä½œçŠ¶æ€ã€‚ windowï¼šå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å¸¸è¯´çš„ tab é¡µã€‚ paneï¼šä¸€ä¸ª window è¢«åˆ†æˆè‹¥å¹²ä¸ª paneï¼Œç†è§£ä¸º iterm çš„åˆ†å±ã€‚  session æ–°å»º\ntmux new -s your-session-name æ–­å¼€\ntmux detach æ¢å¤\ntmux attach-session -t your-session-name æˆ–è€… tmux a -t your-session-name å…³é—­\n kill-server kill-session kill-window kill-pane  tmux kill-session -t your-session-name  tmux kill-server æŸ¥çœ‹\ntmux list-session tmux ls tmux çš„åŸºç¡€é…ç½® prefix æ˜¯ tmux çš„å‰ç¼€é”®ï¼Œé»˜è®¤æ˜¯ ctrl+b ã€‚åªæœ‰æŒ‰ä¸‹å‰ç¼€é”®ï¼Œæ‰ä¼šæ¿€æ´» tmuxï¼Œç„¶åå†æŒ‰å…¶ä»–çš„é”®è¿›è¡Œ tmux æ“ä½œã€‚è¿™æ ·å¯ä»¥é¿å…ä¸å…¶ä»–åº”ç”¨çš„å¿«æ·é”®è¿›è¡Œå†²çªã€‚\né…ç½®å‰ç¼€ éœ€è¦å» tmux.","title":"tmux"},{"content":"çªç„¶ææ˜ç™½äº† crystal çš„ vscode æ’ä»¶çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ï¼Œè®°å½•ä¸€ä¸‹ã€‚\nå®‰è£… crystal brew install crystal å®‰è£… vscode æ’ä»¶ https://marketplace.visualstudio.com/items?itemName=faustinoaq.crystal-lang\nå®‰è£… scry scry æ˜¯ crystal çš„ language server çš„ client å·¥å…·ï¼Œåœ¨æœ¬åœ°å®‰è£… scry å°±å¯ä»¥åšåˆ°ä»£ç è·³è½¬äº†ã€‚\n$ git clone https://github.com/crystal-lang-tools/scry.git  $ cd scry  $ shards build -v Dependencies are satisfied Building: scry crystal build -o /Users/lucas/Documents/demos/crystal/scry/bin/scry src/scry.cr /Users/lucas/Documents/demos/crystal/scry/bin/scry å°±æ˜¯ç¼–è¯‘å‡ºæ¥çš„äºŒè¿›åˆ¶çš„è·¯å¾„\né…ç½®æ’ä»¶  \u0026#34;crystal-lang.compiler\u0026#34;: \u0026#34;crystal\u0026#34;,  \u0026#34;crystal-lang.server\u0026#34;: \u0026#34;/Users/lucas/Documents/demos/crystal/scry/bin/scry\u0026#34;,  \u0026#34;crystal-lang.maxNumberOfProblems\u0026#34;: 20,  \u0026#34;crystal-lang.mainFile\u0026#34;: \u0026#34;${workspaceRoot}/src/main.cr\u0026#34;,  \u0026#34;crystal-lang.processesLimit\u0026#34;: 5,  \u0026#34;crystal-lang.hover\u0026#34;: true,  \u0026#34;crystal-lang.problems\u0026#34;: \u0026#34;build\u0026#34;,  \u0026#34;crystal-lang.implementations\u0026#34;: true,  \u0026#34;crystal-lang.completion\u0026#34;: true,  \u0026#34;crystal-lang.logLevel\u0026#34;: \u0026#34;info\u0026#34;, æŠŠä¸Šé¢çš„é…ç½®åŠ åˆ° vscode çš„ settings æ–‡ä»¶ä¸­ï¼Œå°±å¯ä»¥æ„‰å¿«çš„å¼€å‘å•¦ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/crystal%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/","summary":"çªç„¶ææ˜ç™½äº† crystal çš„ vscode æ’ä»¶çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ï¼Œè®°å½•ä¸€ä¸‹ã€‚\nå®‰è£… crystal brew install crystal å®‰è£… vscode æ’ä»¶ https://marketplace.visualstudio.com/items?itemName=faustinoaq.crystal-lang\nå®‰è£… scry scry æ˜¯ crystal çš„ language server çš„ client å·¥å…·ï¼Œåœ¨æœ¬åœ°å®‰è£… scry å°±å¯ä»¥åšåˆ°ä»£ç è·³è½¬äº†ã€‚\n$ git clone https://github.com/crystal-lang-tools/scry.git  $ cd scry  $ shards build -v Dependencies are satisfied Building: scry crystal build -o /Users/lucas/Documents/demos/crystal/scry/bin/scry src/scry.cr /Users/lucas/Documents/demos/crystal/scry/bin/scry å°±æ˜¯ç¼–è¯‘å‡ºæ¥çš„äºŒè¿›åˆ¶çš„è·¯å¾„\né…ç½®æ’ä»¶  \u0026#34;crystal-lang.compiler\u0026#34;: \u0026#34;crystal\u0026#34;,  \u0026#34;crystal-lang.server\u0026#34;: \u0026#34;/Users/lucas/Documents/demos/crystal/scry/bin/scry\u0026#34;,  \u0026#34;crystal-lang.maxNumberOfProblems\u0026#34;: 20,  \u0026#34;crystal-lang.mainFile\u0026#34;: \u0026#34;${workspaceRoot}/src/main.cr\u0026#34;,  \u0026#34;crystal-lang.processesLimit\u0026#34;: 5,  \u0026#34;crystal-lang.hover\u0026#34;: true,  \u0026#34;crystal-lang.","title":"crystal å¼€å‘ç¯å¢ƒ"},{"content":"å…³æ³¨ crystal ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œçœ‹åˆ°å¤šçº¿ç¨‹çš„ pr å·²ç»æäº†ï¼Œä»Šå¤©ç®€å•å†™ä¸€ä¸‹ã€‚\n Fast as C, Slick as Ruby\n è¯­æ³• crystal çš„è¯­æ³•å’Œ Ruby æ¯”è¾ƒç±»ä¼¼ã€‚\n# A very basic HTTP server require \u0026#34;http/server\u0026#34;  server = HTTP::Server.new do |context|  context.response.content_type = \u0026#34;text/plain\u0026#34;  context.response.print \u0026#34;Hello world, got #{context.request.path}!\u0026#34; end  puts \u0026#34;Listening on http://127.0.0.1:8080\u0026#34; server.listen(8080) ç±»å‹ç³»ç»Ÿ crystal çš„ä¸€å¤§å–ç‚¹å°±æ˜¯é™æ€ç±»å‹ç³»ç»Ÿï¼Œä½†æ˜¯å†™èµ·æ¥åˆå’Œè„šæœ¬è¯­è¨€ç±»ä¼¼ã€‚\ndef shout(x)  # Notice that both Int32 and String respond_to `to_s`  x.to_s.upcase end  foo = ENV[\u0026#34;FOO\u0026#34;]? || 10  typeof(foo) # =\u0026gt; (Int32 | String) typeof(shout(foo)) # =\u0026gt; String ç©ºå¼•ç”¨æ£€æŸ¥ crystal å¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™æ£€æŸ¥ç©ºå¼•ç”¨ï¼Œé¿å…å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚\nif rand(2) \u0026gt; 0  my_string = \u0026#34;hello world\u0026#34; end  puts my_string.upcase å¦‚æœè¿è¡Œä¸Šè¿°çš„ä»£ç ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n$ crystal hello_world.cr Error in hello_world.cr:5: undefined method \u0026#39;upcase\u0026#39; for Nil (compile-time type is (String | Nil))  puts my_string.upcase å® å¦ä¸€ä¸ªé‡è¦çš„ç‰¹æ€§æ˜¯å®ã€‚é€šè¿‡å®ï¼Œå¯ä»¥å®ç°å‘ ruby é‚£ä¹ˆå¼ºå¤§çš„å…ƒç¼–ç¨‹ã€‚\nclass Object  def has_instance_var?(name) : Bool  {{ @type.instance_vars.map \u0026amp;.name.stringify }}.includes? name  end end  person = Person.new \u0026#34;John\u0026#34;, 30 person.has_instance_var?(\u0026#34;name\u0026#34;) #=\u0026gt; true person.has_instance_var?(\u0026#34;birthday\u0026#34;) #=\u0026gt; false å¹¶å‘ crystal çš„å¹¶å‘æ˜¯é€šè¿‡ç»¿è‰²çº¿ç¨‹å®ç°çš„ï¼Œå³ fibersã€‚å’Œ Go çš„å¹¶å‘æ¨¡å¼å¾ˆåƒï¼Œä¹Ÿæ˜¯åŸºäº channel çš„ CSP æ¨¡å‹ã€‚\nchannel = Channel(Int32).new total_lines = 0 files = Dir.glob(\u0026#34;*.txt\u0026#34;)  files.each do |f|  spawn do  lines = File.read(f).lines.size  channel.send lines  end end  files.size.times do  total_lines += channel.receive end  puts total_lines C ç»‘å®š C è¯­è¨€ä¸€èˆ¬ç”¨æ¥å®ç°æ¯”è¾ƒåº•å±‚çš„ç³»ç»Ÿï¼Œè€Œä¸” C çš„ç”Ÿæ€ä¸°å¯Œï¼Œä¸€èˆ¬ç°ä»£è¯­è¨€éƒ½ä¼šæä¾› C ç»‘å®šï¼Œæ¥å¤ç”¨ C çš„ç”Ÿæ€ã€‚\n# Fragment of the BigInt implementation that uses GMP @[Link(\u0026#34;gmp\u0026#34;)] lib LibGMP  alias Int = LibC::Int  alias ULong = LibC::ULong   struct MPZ  _mp_alloc : Int32  _mp_size : Int32  _mp_d : ULong*  end   fun init_set_str = __gmpz_init_set_str(rop : MPZ*, str : UInt8*, base : Int) : Int  fun cmp = __gmpz_cmp(op1 : MPZ*, op2 : MPZ*) : Int end  struct BigInt \u0026lt; Int  def initialize(str : String, base = 10)  err = LibGMP.init_set_str(out @mpz, str, base)  raise ArgumentError.new(\u0026#34;invalid BigInt: #{str}\u0026#34;) if err == -1  end   def \u0026lt;=\u0026gt;(other : BigInt)  LibGMP.cmp(mpz, other)  end end ä¾èµ–ç®¡ç† ä»»ä½•ä¸€ä¸ªåå·¥ç¨‹æ€§çš„è¯­è¨€ï¼Œéƒ½ä¼šæä¾›ä¸€ä¸ªåŒ…ç®¡ç†ç³»ç»Ÿã€‚crystal çš„åŒ…ç®¡ç†æ˜¯ shardsï¼Œå…¶å®å’Œ go module ç±»ä¼¼ã€‚è¿™ç§é¡¹ç›®çº§åˆ«çš„åŒ…ç®¡ç†å…¶å®æ›´ä¸ºå®ç”¨ä¸€äº›ã€‚\nä½†æ˜¯ go çš„ä»»ä½•ä¸€ä¸ªé¡¹ç›®ï¼Œå…¶å®éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªåŒ…ï¼Œcrystal è¿˜æ˜¯ä¼šæœ‰ä¸€äº›é™åˆ¶çš„ã€‚\nname: my-project version: 0.1 license: MIT  crystal: 0.21.0  dependencies:  mysql:  github: crystal-lang/crystal-mysql  version: ~\u0026gt; 0.3.1 ","permalink":"https://zhenfeng-zhu.github.io/post/crystal%E7%AE%80%E4%BB%8B/","summary":"å…³æ³¨ crystal ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œçœ‹åˆ°å¤šçº¿ç¨‹çš„ pr å·²ç»æäº†ï¼Œä»Šå¤©ç®€å•å†™ä¸€ä¸‹ã€‚\n Fast as C, Slick as Ruby\n è¯­æ³• crystal çš„è¯­æ³•å’Œ Ruby æ¯”è¾ƒç±»ä¼¼ã€‚\n# A very basic HTTP server require \u0026#34;http/server\u0026#34;  server = HTTP::Server.new do |context|  context.response.content_type = \u0026#34;text/plain\u0026#34;  context.response.print \u0026#34;Hello world, got #{context.request.path}!\u0026#34; end  puts \u0026#34;Listening on http://127.0.0.1:8080\u0026#34; server.listen(8080) ç±»å‹ç³»ç»Ÿ crystal çš„ä¸€å¤§å–ç‚¹å°±æ˜¯é™æ€ç±»å‹ç³»ç»Ÿï¼Œä½†æ˜¯å†™èµ·æ¥åˆå’Œè„šæœ¬è¯­è¨€ç±»ä¼¼ã€‚\ndef shout(x)  # Notice that both Int32 and String respond_to `to_s`  x.to_s.upcase end  foo = ENV[\u0026#34;FOO\u0026#34;]?","title":"crystal ç®€ä»‹"},{"content":"Socket ç½‘ç»œæ¨¡å‹ osi ä¸ƒå±‚æ¨¡å‹  åº”ç”¨å±‚ è¡¨ç¤ºå±‚ ä¼šè¯å±‚ ä¼ è¾“å±‚ ç½‘ç»œå±‚ æ•°æ®é“¾è·¯å±‚ ç‰©ç†å±‚  å¯¹åº”çš„ tcpip å°±æ˜¯  åº”ç”¨å±‚  dns http   ä¼ è¾“å±‚  icmp tcp udp   ip å±‚  ipv4 ipv6   mac å±‚  arp vlan   ç‰©ç†å±‚  Ethernet    ä¸ºä»€ä¹ˆè¦åˆ†å±‚ å› ä¸ºç½‘ç»œç¯å¢ƒè¿‡äºå¤æ‚ï¼Œä¸æ˜¯ä¸€ä¸ªèƒ½å¤Ÿé›†ä¸­æ§åˆ¶çš„ä½“ç³»ã€‚å…¨çƒçš„æœåŠ¡å™¨å’Œè®¾å¤‡å„æœ‰å„çš„ä½“ç³»ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åŒä¸€å¥—ç½‘ç»œåè®®æ ˆåˆ‡åˆ†æˆå¤šä¸ªå±‚æ¬¡å’Œç»„åˆï¼Œæ¥æ»¡è¶³ä¸åŒè®¾å¤‡ä¹‹é—´çš„é€šä¿¡éœ€æ±‚ã€‚\näºŒå±‚åˆ°å››å±‚ï¼Œå³ macã€ip å’Œä¼ è¾“ç­‰å±‚éƒ½æ˜¯ Linux å†…æ ¸ä¸­å¤„ç†ã€‚åº”ç”¨å±‚çš„å¦‚æµè§ˆå™¨ã€Nginx å’Œ Tomcat ç­‰éƒ½æ˜¯ç”¨æˆ·æ€çš„ã€‚\nä¼ è¾“å±‚çš„ tcp å’Œ udp é‡Œéƒ½æœ‰ç«¯å£çš„æ¦‚å¿µï¼Œä¸åŒåº”ç”¨ç›‘å¬ä¸åŒçš„æ®µå³å¯ã€‚\nåº”ç”¨å±‚å’Œå†…æ ¸çš„äº’é€šæœºåˆ¶ï¼Œå°±æ˜¯é€šè¿‡ socket ç³»ç»Ÿè°ƒç”¨ã€‚å…¶å® socket å“ªä¸€å±‚éƒ½ä¸å±äºï¼Œå®ƒæ˜¯å±äºæ“ä½œç³»ç»Ÿçš„æ¦‚å¿µï¼Œè€Œä¸æ˜¯ç½‘ç»œåˆ†å±‚çš„æ¦‚å¿µã€‚å› ä¸ºæ“ä½œç³»ç»ŸæŠŠäºŒå±‚åˆ°å››å±‚çš„å¤„ç†ä»£ç åœ¨å†…æ ¸é‡Œï¼Œåº”ç”¨å±‚çš„å¤„ç†ä»£ç è®©åº”ç”¨è‡ªå·±åšï¼Œä¸¤è€…éœ€è¦è·¨å†…æ ¸æ€å’Œç”¨æˆ·æ€è¿›è¡Œé€šä¿¡ï¼Œè¿™ä¸ªå°±æ˜¯ socketã€‚\nTCP å’Œ UDP çš„åŒºåˆ«  tcp æ˜¯é¢å‘è¿æ¥çš„ï¼Œudp æ˜¯é¢å‘æ— è¿æ¥çš„ tcp æä¾›å¯é äº¤ä»˜ï¼Œæ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€å¹¶ä¸”æŒ‰åºåˆ°è¾¾ã€‚udp ä¸æä¾›å¯é äº¤ä»˜ï¼Œå¯èƒ½ä¸¢å¤±ï¼Œä¸æŒ‰é¡ºåºã€‚ tcp æ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œå‘é€çš„æ˜¯ä¸€ä¸ªæµï¼Œæ— å¤´æ— å°¾ã€‚udp æ˜¯æ•°æ®æŠ¥æ–‡çš„ï¼Œä¸€ä¸ªä¸€ä¸ªå‘é€ã€‚ tcp å¯ä»¥æä¾›æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œå¯ä»¥é˜²æ­¢å¯¹ç«¯è¢«å‹å®ï¼Œä¹Ÿé˜²æ­¢ç½‘ç»œè¢«å‹å®ã€‚  æ‰€è°“çš„è¿æ¥ï¼ŒæŒ‡ä¸¤ç«¯çš„æ•°æ®ç»“æ„çŠ¶æ€çš„ååŒï¼Œä¸¤è¾¹çŠ¶æ€å¯¹çš„ä¸Šï¼Œç¬¦åˆ tcp åè®®çš„è§„åˆ™ï¼Œå°±è®¤ä¸ºè¿æ¥æ˜¯å­˜åœ¨çš„ï¼Œå¦åˆ™å°±æ˜¯æ–­æ‰çš„ã€‚\næ‰€è°“çš„å»ºç«‹è¿æ¥ï¼Œå…¶å®æ˜¯ä¸ºäº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç»´æŠ¤è¿æ¥ï¼Œè€Œå»ºç«‹ä¸€å®šçš„æ•°æ®ç»“æ„æ¥ç»´æŠ¤åŒæ–¹äº¤äº’çš„çŠ¶æ€ã€‚å¹¶ç”¨è¿™æ ·çš„æ•°æ®ç»“æ„æ¥ä¿è¯é¢å‘è¿æ¥çš„ç‰¹æ€§ã€‚tcp æ— æ³•å·¦å³ä¸­é—´çš„ä»»ä½•é€šè·¯ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆè™šæ‹Ÿçš„è¿æ¥ã€‚\næ‰€è°“çš„å¯é ï¼Œä¹Ÿæ˜¯ä¸¤ç«¯çš„æ•°æ®ç»“æ„åšçš„äº‹æƒ…ã€‚ä¸ä¸¢å¤±å…¶å®æ˜¯æ•°æ®ç»“æ„åœ¨â€œç‚¹åâ€ï¼Œé¡ºåºåˆ°è¾¾æ˜¯æ•°æ®ç»“æ„åœ¨â€œæ’åºâ€ï¼Œé¢å‘æ•°æ®æµå…¶å®æ˜¯æ•°æ®ç»“æ„å°†é›¶æ•£çš„åŒ…ï¼ŒæŒ‰ç…§é¡ºåºææˆä¸€ä¸ªæµå‘ç»™åº”ç”¨å±‚ã€‚\næ‰€è°“çš„æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œå…¶å®å°±æ˜¯æ ¹æ®æ”¶åˆ°çš„å¯¹ç«¯çš„ç½‘ç»œåŒ…ï¼Œè°ƒæ•´ä¸¤ç«¯çš„æ•°æ®ç»“æ„çŠ¶æ€ã€‚\nsocket å‡½æ•° int socket(int domain, int type, int protocol) socket å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ª socket æ–‡ä»¶æè¿°ç¬¦ã€‚\n domain  ä½¿ç”¨ä»€ä¹ˆ ip å±‚çš„åè®®ã€‚AF_INET æ ‡è¯† ipv4ï¼ŒAF_INET6 æ ‡è¯† ipv6ã€‚   type  socket çš„ç±»å‹ã€‚ SOCK_STREAMï¼Œtcp æµçš„ SOCK_DGRAMï¼Œudp æŠ¥æ–‡çš„ SOCK_RAWï¼Œå¯ä»¥ç›´æ¥æ“ä½œ ip å±‚ï¼Œæˆ–é tcp å’Œ udp ç±»å‹çš„   protocol  åè®® IPPROTO_TCP, IPPROTO_UDP    ","permalink":"https://zhenfeng-zhu.github.io/post/socket/","summary":"Socket ç½‘ç»œæ¨¡å‹ osi ä¸ƒå±‚æ¨¡å‹  åº”ç”¨å±‚ è¡¨ç¤ºå±‚ ä¼šè¯å±‚ ä¼ è¾“å±‚ ç½‘ç»œå±‚ æ•°æ®é“¾è·¯å±‚ ç‰©ç†å±‚  å¯¹åº”çš„ tcpip å°±æ˜¯  åº”ç”¨å±‚  dns http   ä¼ è¾“å±‚  icmp tcp udp   ip å±‚  ipv4 ipv6   mac å±‚  arp vlan   ç‰©ç†å±‚  Ethernet    ä¸ºä»€ä¹ˆè¦åˆ†å±‚ å› ä¸ºç½‘ç»œç¯å¢ƒè¿‡äºå¤æ‚ï¼Œä¸æ˜¯ä¸€ä¸ªèƒ½å¤Ÿé›†ä¸­æ§åˆ¶çš„ä½“ç³»ã€‚å…¨çƒçš„æœåŠ¡å™¨å’Œè®¾å¤‡å„æœ‰å„çš„ä½“ç³»ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åŒä¸€å¥—ç½‘ç»œåè®®æ ˆåˆ‡åˆ†æˆå¤šä¸ªå±‚æ¬¡å’Œç»„åˆï¼Œæ¥æ»¡è¶³ä¸åŒè®¾å¤‡ä¹‹é—´çš„é€šä¿¡éœ€æ±‚ã€‚\näºŒå±‚åˆ°å››å±‚ï¼Œå³ macã€ip å’Œä¼ è¾“ç­‰å±‚éƒ½æ˜¯ Linux å†…æ ¸ä¸­å¤„ç†ã€‚åº”ç”¨å±‚çš„å¦‚æµè§ˆå™¨ã€Nginx å’Œ Tomcat ç­‰éƒ½æ˜¯ç”¨æˆ·æ€çš„ã€‚\nä¼ è¾“å±‚çš„ tcp å’Œ udp é‡Œéƒ½æœ‰ç«¯å£çš„æ¦‚å¿µï¼Œä¸åŒåº”ç”¨ç›‘å¬ä¸åŒçš„æ®µå³å¯ã€‚\nåº”ç”¨å±‚å’Œå†…æ ¸çš„äº’é€šæœºåˆ¶ï¼Œå°±æ˜¯é€šè¿‡ socket ç³»ç»Ÿè°ƒç”¨ã€‚å…¶å® socket å“ªä¸€å±‚éƒ½ä¸å±äºï¼Œå®ƒæ˜¯å±äºæ“ä½œç³»ç»Ÿçš„æ¦‚å¿µï¼Œè€Œä¸æ˜¯ç½‘ç»œåˆ†å±‚çš„æ¦‚å¿µã€‚å› ä¸ºæ“ä½œç³»ç»ŸæŠŠäºŒå±‚åˆ°å››å±‚çš„å¤„ç†ä»£ç åœ¨å†…æ ¸é‡Œï¼Œåº”ç”¨å±‚çš„å¤„ç†ä»£ç è®©åº”ç”¨è‡ªå·±åšï¼Œä¸¤è€…éœ€è¦è·¨å†…æ ¸æ€å’Œç”¨æˆ·æ€è¿›è¡Œé€šä¿¡ï¼Œè¿™ä¸ªå°±æ˜¯ socketã€‚","title":"socket"},{"content":"Diagnostics go æä¾›äº†ä¸€ç³»åˆ—è¯Šæ–­é€»è¾‘å’Œæ€§èƒ½é—®é¢˜çš„å·¥å…·ã€‚\n profiling åˆ†æ tracing è·Ÿè¸ª debuging è°ƒè¯• è¿è¡Œæ—¶ç»Ÿè®¡ä¿¡æ¯å’Œäº‹ä»¶  Profiling profiling ä¿¡æ¯å¯ä»¥åœ¨ go test æˆ–è€… net/http/pprof åŒ…çš„æ—¶å€™ä½¿ç”¨ã€‚\nruntime/pprof åŒ…æœ‰ï¼š\n cpu  ä¸»åŠ¨æ¶ˆè´¹ cpu å‘¨æœŸæ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œä¸åŒ…æ‹¬ç¡çœ æˆ–è€… io ç­‰å¾…   heap  æŠ¥å‘Šå†…å­˜åˆ†é…é‡‡æ ·ï¼› å½“å‰æˆ–å†å²å†…å­˜ä½¿ç”¨çŠ¶å†µ æ£€æµ‹å†…å­˜æ³„éœ²   threadcreate  æŠ¥å‘Šåˆ›å»ºæ–°çš„ç³»ç»Ÿçº¿ç¨‹   goroutine  å½“å‰æ‰€æœ‰åç¨‹çš„å †æ ˆè·Ÿè¸ª   block  æ˜¾ç¤º goroutine é˜»å¡ç­‰å¾…åŒæ­¥åŸè¯­çš„ä½ç½®ã€‚ é»˜è®¤ä¸å¼€å¯ï¼Œä½¿ç”¨ runtime.SetBlockProfileRate å¯ç”¨   mutex  æŠ¥å‘Šé”ç«äº‰ã€‚ å¦‚æœè®¤ä¸ºè‡ªå·±çš„ç¨‹åºå› ä¸ºäº’æ–¥é”å¯¼è‡´ cpu ä¸èƒ½å……åˆ†åˆ©ç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨è¿™ä¸ªã€‚ é»˜è®¤ä¹Ÿæ˜¯ä¸å¼€å¯ï¼Œä½¿ç”¨ runtime.SetMutexProfileFraction å¯ç”¨ã€‚    å…¶ä»–å¯ç”¨çš„çš„æ€§èƒ½åˆ†æå·¥å…·\nLinux ä½¿ç”¨https://perf.wiki.kernel.org/index.php/Tutorialï¼Œperf å¯ä»¥åˆ†æ cgo/SWIG ä»£ç å’Œç³»ç»Ÿå†…æ ¸ã€‚\nmac ä¸Šä½¿ç”¨ https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/ å°±è¶³å¤Ÿäº†ã€‚\nåˆ†æçº¿ä¸Šå¤„äºç”Ÿäº§çŠ¶æ€æœåŠ¡\nåœ¨ç”Ÿäº§ä¸Šåˆ†æç¨‹åºä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å¼€å¯æŸäº›æŒ‡æ ‡ä¼šå¢åŠ æˆæœ¬ã€‚\nå¯è§†åŒ–åˆ†ææ•°æ®\ngo æä¾›äº†å¾ˆå¤šå¯è§†åŒ–çš„å·¥å…·ï¼Œå‚è€ƒhttps://blog.golang.org/profiling-go-programs\nä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„ profil æ–‡ä»¶ï¼šå‚è€ƒhttps://golang.org/pkg/runtime/pprof/#Profile\nä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ pprof ç¨‹åºç›‘å¬çš„ç«¯å£å’Œè·¯å¾„ï¼Œå‚è€ƒï¼š\npackage main  import (  \u0026#34;log\u0026#34;  \u0026#34;net/http\u0026#34;  \u0026#34;net/http/pprof\u0026#34; )  func main() {  mux := http.NewServeMux()  mux.HandleFunc(\u0026#34;/custom_debug_path/profile\u0026#34;, pprof.Profile)  log.Fatal(http.ListenAndServe(\u0026#34;:7777\u0026#34;, mux)) } ","permalink":"https://zhenfeng-zhu.github.io/post/go%E8%BF%9B%E9%98%B6/","summary":"Diagnostics go æä¾›äº†ä¸€ç³»åˆ—è¯Šæ–­é€»è¾‘å’Œæ€§èƒ½é—®é¢˜çš„å·¥å…·ã€‚\n profiling åˆ†æ tracing è·Ÿè¸ª debuging è°ƒè¯• è¿è¡Œæ—¶ç»Ÿè®¡ä¿¡æ¯å’Œäº‹ä»¶  Profiling profiling ä¿¡æ¯å¯ä»¥åœ¨ go test æˆ–è€… net/http/pprof åŒ…çš„æ—¶å€™ä½¿ç”¨ã€‚\nruntime/pprof åŒ…æœ‰ï¼š\n cpu  ä¸»åŠ¨æ¶ˆè´¹ cpu å‘¨æœŸæ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œä¸åŒ…æ‹¬ç¡çœ æˆ–è€… io ç­‰å¾…   heap  æŠ¥å‘Šå†…å­˜åˆ†é…é‡‡æ ·ï¼› å½“å‰æˆ–å†å²å†…å­˜ä½¿ç”¨çŠ¶å†µ æ£€æµ‹å†…å­˜æ³„éœ²   threadcreate  æŠ¥å‘Šåˆ›å»ºæ–°çš„ç³»ç»Ÿçº¿ç¨‹   goroutine  å½“å‰æ‰€æœ‰åç¨‹çš„å †æ ˆè·Ÿè¸ª   block  æ˜¾ç¤º goroutine é˜»å¡ç­‰å¾…åŒæ­¥åŸè¯­çš„ä½ç½®ã€‚ é»˜è®¤ä¸å¼€å¯ï¼Œä½¿ç”¨ runtime.SetBlockProfileRate å¯ç”¨   mutex  æŠ¥å‘Šé”ç«äº‰ã€‚ å¦‚æœè®¤ä¸ºè‡ªå·±çš„ç¨‹åºå› ä¸ºäº’æ–¥é”å¯¼è‡´ cpu ä¸èƒ½å……åˆ†åˆ©ç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨è¿™ä¸ªã€‚ é»˜è®¤ä¹Ÿæ˜¯ä¸å¼€å¯ï¼Œä½¿ç”¨ runtime.SetMutexProfileFraction å¯ç”¨ã€‚    å…¶ä»–å¯ç”¨çš„çš„æ€§èƒ½åˆ†æå·¥å…·","title":"go è¿›é˜¶"},{"content":"MySQL åŸºæœ¬æ¶æ„ å®¢æˆ·ç«¯\nserver å±‚\n  è¿æ¥å™¨ï¼šç®¡ç†è¿æ¥ï¼Œæƒé™éªŒè¯\n  æŸ¥è¯¢ç¼“å­˜ï¼šå‘½ä¸­è§„åˆ™ï¼Œç›´æ¥è¿”å›ç»“æœ 8.0 ä¹‹åå…¨éƒ¨åˆ é™¤äº†è¿™ä¸ªæ¨¡å—\n  åˆ†æå™¨ï¼šè¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æ\n  ä¼˜åŒ–å™¨ï¼šæ‰§è¡Œè®¡åˆ’ç”Ÿæˆï¼Œç´¢å¼•é€‰æ‹©\n  æ‰§è¡Œå™¨ï¼šæ“ä½œå¼•æ“ï¼Œè¿”å›ç»“æœ\n  å­˜å‚¨å¼•æ“ï¼šå­˜å‚¨æ•°æ®ï¼Œæä¾›è¯»å†™æ¥å£\næ•°æ®åº“ä¸­çš„é•¿è¿æ¥æŒ‡è¿æ¥æˆåŠŸä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯æŒç»­æœ‰è¯·æ±‚ï¼Œåˆ™ä¸€ç›´ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ã€‚çŸ­è¿æ¥æ˜¯æŒ‡æ¯æ¬¡æ‰§è¡Œå®Œå¾ˆå°‘çš„å‡ æ¬¡æŸ¥è¯¢ä¹‹åå°±æ–­å¼€è¿æ¥ï¼Œä¸‹æ¬¡å†é‡æ–°å»ºç«‹ã€‚\nå¦‚æœå…¨éƒ¨ä½¿ç”¨é•¿è¿æ¥ï¼Œä¼šå¯¼è‡´ mysql å†…å­˜æ¶¨çš„å¾ˆå¿«ï¼Œå¯èƒ½å‡ºç° OOMï¼Œå› æ­¤è¦å®šæœŸæ–­å¼€é•¿è¿æ¥ï¼Œæˆ–è€…åœ¨æ‰§è¡Œä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ“ä½œä¹‹åï¼Œæ‰§è¡Œ mysql_reset_connection é‡ç½®ä¸€ä¸‹ã€‚\næ—¥å¿—ç³»ç»Ÿ redo log é‡åšæ—¥å¿— redo log æ˜¯ innodb å¼•æ“ç‰¹æœ‰çš„ã€‚ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹ã€‚å¾ªç¯å†™å…¥ã€‚\nWAL æŠ€æœ¯ï¼šWrite-Ahead Loggingï¼šå…³é”®ç‚¹å°±æ˜¯å…ˆå†™æ—¥å¿—ï¼Œå†å†™ç£ç›˜ã€‚å½“ä¸€æ¡è®°å½•æ›´æ–°æ—¶ï¼Œå…ˆæŠŠè®°å½•å†™åˆ° redolog ä¸­ï¼Œæ›´æ–°åˆ°å†…å­˜ï¼Œè¿™æ—¶è¿™ä¸ªæ›´æ–°æ“ä½œå°±æˆåŠŸäº†ã€‚ç„¶å innodb å¼•æ“å°±ä¼šåœ¨é€‚å½“çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªæ“ä½œè®°å½•æ›´æ–°åˆ°ç£ç›˜ä¸­ã€‚å› æ­¤åœ¨æ•°æ®åº“å¼‚å¸¸é‡å¯çš„æ—¶å€™ï¼Œä¹‹å‰çš„æäº¤çš„è®°å½•ä¸ä¼šä¸¢å¤±ã€‚\nbinlog å½’æ¡£æ—¥å¿— binlog æ˜¯ server å±‚å®ç°çš„ï¼Œæ‰€æœ‰çš„å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ã€‚binlog æ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯è¿™ä¸ªè¯­å¥çš„åŸå§‹é€»è¾‘ã€‚binlog æ˜¯å†™åˆ°ä¸€å®šå¤§å°åï¼Œåˆ‡æ¢ä¸‹ä¸€ä¸ªï¼Œä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—ã€‚\nå› æ­¤ä¸€ä¸ª update æ“ä½œå°±æ˜¯ï¼š\næ‰¾åˆ°è¯¥è¡Œ\nåˆ¤æ–­æ•°æ®é¡µæ˜¯å¦åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœæ˜¯è¿”å›è¡Œæ•°æ®ï¼Œå¦åˆ™ä»ç£ç›˜è¯»å…¥åˆ°å†…å­˜ä¸­ã€‚\nå°†å€¼è¿›è¡Œæ›´æ–°ï¼Œå†™å…¥æ–°è¡Œ\næ–°è¡Œæ›´æ–°åˆ°å†…å­˜\nå†™å…¥ redologï¼Œå¤„äº prepare é˜¶æ®µ\nå†™å…¥ binlog\næäº¤äº‹åŠ¡ï¼Œå¤„äº commit é˜¶æ®µã€‚\nè¿™ä¸ªå°±æ˜¯ä¸¤é˜¶æ®µæäº¤ã€‚\näº‹åŠ¡éš”ç¦» Isolationï¼šéš”ç¦»æ€§\nè„è¯»ï¼Œå¹»è¯»ï¼Œä¸å¯é‡å¤è¯»\néš”ç¦»çš„è¶Šä¸¥å®ï¼Œæ•ˆç‡è¶Šä½ã€‚\nSQL çš„æ ‡å‡†éš”ç¦»çº§åˆ«ï¼š\nè¯»æœªæäº¤ï¼šä¸€ä¸ªäº‹åŠ¡æ²¡æäº¤çš„æ—¶å€™ï¼Œå®ƒåšçš„å˜æ›´å°±èƒ½è¢«åˆ«çš„äº‹åŠ¡çœ‹åˆ°\nè¯»æäº¤ï¼šä¸€ä¸ªäº‹åŠ¡æäº¤ä¹‹åï¼Œåšçš„å˜æ›´æ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°\nå¯é‡å¤è¯»ï¼šä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œæ—¶çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ—¶ä¸€è‡´çš„ã€‚\nä¸²è¡ŒåŒ–ï¼šé¡¾åæ€ä¹‰ï¼Œå¯¹äºåŒä¸€è¡Œè®°å½•ï¼Œå†™ä¼šåŠ å†™é”ï¼Œè¯»ä¹Ÿä¼šåŠ è¯»é”ã€‚å½“è¯»å†™é”å†²çªæ—¶ï¼Œåè®¿é—®çš„äº‹åŠ¡ï¼Œå¿…é¡»ç­‰å‰ä¸€ä¸ªäº‹åŠ¡å®Œæˆã€‚\nåœ¨å®ç°çš„æ—¶å€™ï¼Œæ•°æ®åº“ä¼šåˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œè®¿é—®çš„æ—¶å€™ä»¥è§†å›¾çš„é€»è¾‘ç»“æœä¸ºå‡†ã€‚\n å¯é‡å¤è¯»ï¼Œè¿™ä¸ªè§†å›¾æ˜¯åœ¨äº‹åŠ¡å¯åŠ¨æ—¶åˆ›å»ºï¼Œæ•´ä¸ªäº‹åŠ¡å­˜åœ¨æœŸé—´éƒ½ç”¨è¿™ä¸ªè§†å›¾ã€‚ è¯»æäº¤ï¼Œè¿™ä¸ªè§†å›¾åœ¨æ¯ä¸ª sql è¯­å¥å¼€å§‹æ‰§è¡Œçš„æ—¶å€™åˆ›å»º è¯»æœªæäº¤ç›´æ¥è¿”å›è®°å½•çš„æœ€æ–°å€¼ï¼Œæ²¡æœ‰è§†å›¾çš„æ¦‚å¿µã€‚ ä¸²è¡ŒåŒ–æ˜¯ç”¨åŠ é”çš„æ–¹å¼ã€‚  mysql åœ¨æ¯æ¡è®°å½•æ›´æ–°çš„æ—¶å€™ï¼Œéƒ½ä¼šè®°å½•ä¸€æ¡å›æ»šæ“ä½œï¼Œè®°å½•ä¸Šçš„æœ€æ–°å€¼éƒ½å¯ä»¥é€šè¿‡å›æ»šæ“ä½œï¼Œå¾—åˆ°å‰ä¸€ä¸ªçŠ¶æ€çš„å€¼ã€‚å½“æ²¡æœ‰äº‹åŠ¡éœ€è¦ç”¨åˆ°å›æ»šæ—¥å¿—æ—¶ï¼Œå°±ä¼šè¢«åˆ é™¤ã€‚æ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨é•¿äº‹åŠ¡ï¼Œè¿™æ ·ä¼šå ç”¨å­˜å‚¨ç©ºé—´å’Œé”ã€‚\nmysql å¯åŠ¨äº‹åŠ¡çš„æ–¹å¼\n æ˜¾å¼å¯åŠ¨ï¼šbegin æˆ–è€… start transactionã€‚é…å¥—çš„æäº¤è¯­å¥æ˜¯ commitï¼Œå›æ»šè¯­å¥æ˜¯ rollbackã€‚ set autocommit=0 è¿™ä¸ªå‘½ä»¤ä¼šå°†è¿™ä¸ªçº¿ç¨‹çš„è‡ªåŠ¨æäº¤å…³é—­ã€‚æ„å‘³ç€å¦‚æœåªæ‰§è¡Œä¸€ä¸ª select è¯­å¥ï¼Œäº‹åŠ¡å°±å¯åŠ¨äº†ï¼Œè€Œä¸”ä¸ä¼šè‡ªåŠ¨å…³é—­ï¼Œé™¤éä¸»åŠ¨æ‰§è¡Œ commit æˆ–è€… rollbackï¼Œæˆ–è€…æ–­å¼€è¿æ¥ã€‚  å› æ­¤ä¸€èˆ¬ set autocommit=1ï¼Œæ‰“å¼€æ˜¾ç¤ºå¯åŠ¨çš„æ¨¡å¼ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/mysql/","summary":"MySQL åŸºæœ¬æ¶æ„ å®¢æˆ·ç«¯\nserver å±‚\n  è¿æ¥å™¨ï¼šç®¡ç†è¿æ¥ï¼Œæƒé™éªŒè¯\n  æŸ¥è¯¢ç¼“å­˜ï¼šå‘½ä¸­è§„åˆ™ï¼Œç›´æ¥è¿”å›ç»“æœ 8.0 ä¹‹åå…¨éƒ¨åˆ é™¤äº†è¿™ä¸ªæ¨¡å—\n  åˆ†æå™¨ï¼šè¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æ\n  ä¼˜åŒ–å™¨ï¼šæ‰§è¡Œè®¡åˆ’ç”Ÿæˆï¼Œç´¢å¼•é€‰æ‹©\n  æ‰§è¡Œå™¨ï¼šæ“ä½œå¼•æ“ï¼Œè¿”å›ç»“æœ\n  å­˜å‚¨å¼•æ“ï¼šå­˜å‚¨æ•°æ®ï¼Œæä¾›è¯»å†™æ¥å£\næ•°æ®åº“ä¸­çš„é•¿è¿æ¥æŒ‡è¿æ¥æˆåŠŸä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯æŒç»­æœ‰è¯·æ±‚ï¼Œåˆ™ä¸€ç›´ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ã€‚çŸ­è¿æ¥æ˜¯æŒ‡æ¯æ¬¡æ‰§è¡Œå®Œå¾ˆå°‘çš„å‡ æ¬¡æŸ¥è¯¢ä¹‹åå°±æ–­å¼€è¿æ¥ï¼Œä¸‹æ¬¡å†é‡æ–°å»ºç«‹ã€‚\nå¦‚æœå…¨éƒ¨ä½¿ç”¨é•¿è¿æ¥ï¼Œä¼šå¯¼è‡´ mysql å†…å­˜æ¶¨çš„å¾ˆå¿«ï¼Œå¯èƒ½å‡ºç° OOMï¼Œå› æ­¤è¦å®šæœŸæ–­å¼€é•¿è¿æ¥ï¼Œæˆ–è€…åœ¨æ‰§è¡Œä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ“ä½œä¹‹åï¼Œæ‰§è¡Œ mysql_reset_connection é‡ç½®ä¸€ä¸‹ã€‚\næ—¥å¿—ç³»ç»Ÿ redo log é‡åšæ—¥å¿— redo log æ˜¯ innodb å¼•æ“ç‰¹æœ‰çš„ã€‚ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹ã€‚å¾ªç¯å†™å…¥ã€‚\nWAL æŠ€æœ¯ï¼šWrite-Ahead Loggingï¼šå…³é”®ç‚¹å°±æ˜¯å…ˆå†™æ—¥å¿—ï¼Œå†å†™ç£ç›˜ã€‚å½“ä¸€æ¡è®°å½•æ›´æ–°æ—¶ï¼Œå…ˆæŠŠè®°å½•å†™åˆ° redolog ä¸­ï¼Œæ›´æ–°åˆ°å†…å­˜ï¼Œè¿™æ—¶è¿™ä¸ªæ›´æ–°æ“ä½œå°±æˆåŠŸäº†ã€‚ç„¶å innodb å¼•æ“å°±ä¼šåœ¨é€‚å½“çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªæ“ä½œè®°å½•æ›´æ–°åˆ°ç£ç›˜ä¸­ã€‚å› æ­¤åœ¨æ•°æ®åº“å¼‚å¸¸é‡å¯çš„æ—¶å€™ï¼Œä¹‹å‰çš„æäº¤çš„è®°å½•ä¸ä¼šä¸¢å¤±ã€‚\nbinlog å½’æ¡£æ—¥å¿— binlog æ˜¯ server å±‚å®ç°çš„ï¼Œæ‰€æœ‰çš„å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ã€‚binlog æ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯è¿™ä¸ªè¯­å¥çš„åŸå§‹é€»è¾‘ã€‚binlog æ˜¯å†™åˆ°ä¸€å®šå¤§å°åï¼Œåˆ‡æ¢ä¸‹ä¸€ä¸ªï¼Œä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—ã€‚\nå› æ­¤ä¸€ä¸ª update æ“ä½œå°±æ˜¯ï¼š\næ‰¾åˆ°è¯¥è¡Œ\nåˆ¤æ–­æ•°æ®é¡µæ˜¯å¦åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœæ˜¯è¿”å›è¡Œæ•°æ®ï¼Œå¦åˆ™ä»ç£ç›˜è¯»å…¥åˆ°å†…å­˜ä¸­ã€‚\nå°†å€¼è¿›è¡Œæ›´æ–°ï¼Œå†™å…¥æ–°è¡Œ\næ–°è¡Œæ›´æ–°åˆ°å†…å­˜\nå†™å…¥ redologï¼Œå¤„äº prepare é˜¶æ®µ\nå†™å…¥ binlog\næäº¤äº‹åŠ¡ï¼Œå¤„äº commit é˜¶æ®µã€‚","title":"mysql"},{"content":"graphql ç»å¸¸è¢«è®¤ä¸ºæ˜¯èšç„¦äºå‰ç«¯çš„æŠ€æœ¯ã€‚\næ ¸å¿ƒæ¦‚å¿µ SDLï¼šschema definition languageï¼ˆæ¨¡å¼å®šä¹‰è¯­è¨€ï¼‰ å¦‚ï¼š\ntype Person{  name: String!  age: Int! } è¿™ä¸ªç±»å‹æœ‰ä¸¤ä¸ªå­—æ®µï¼Œname å’Œ ageï¼Œä»–ä»¬çš„ç±»å‹æ˜¯ String å’Œ Intã€‚ï¼çš„æ„æ€ä»£è¡¨ä»–ä»¬æ˜¯å¿…éœ€çš„ã€‚\ntype Post{  title: String!  author: Person! } æ¥ä¸‹æ¥çš„ Post ä¹Ÿæœ‰ä¸¤ä¸ªå­—æ®µï¼Œå…¶ä¸­ Person ä¹Ÿæ˜¯å¯ä»¥ä½œä¸ºä¸€ä¸ªç±»å‹ã€‚\nä¹Ÿå¯ä»¥è¿™æ ·ï¼Œåœ¨ Person ä¸­æ·»åŠ ä¸€ä¸ª postï¼š\ntype Person{  name: String!  age: Int!  posts: [Post!]! } é€šè¿‡ Query è·å–æ•°æ® åŸºæœ¬æŸ¥è¯¢ å®¢æˆ·ç«¯å‘é€ä¸‹é¢çš„æ•°æ®ç»™æœåŠ¡å™¨\n{  allPersons {  name  } } allPersons æ˜¯æ ¹å­—æ®µï¼ˆroot fieldï¼‰ï¼Œå®ƒä¸‹é¢çš„æˆä¸ºæŸ¥è¯¢çš„ payloadï¼Œè¿™é‡Œä»…åŒ…å«äº†ä¸€ä¸ª nameã€‚\næœåŠ¡å™¨è¿”å›çš„ç»“æœä¼šæ˜¯è¿™æ ·çš„ï¼š\n{  \u0026#34;allPersons\u0026#34;: [  { \u0026#34;name\u0026#34;: \u0026#34;Johnny\u0026#34; },  { \u0026#34;name\u0026#34;: \u0026#34;Sarah\u0026#34; },  { \u0026#34;name\u0026#34;: \u0026#34;Alice\u0026#34; }  ] } å¯ä»¥çœ‹åˆ°åªè¿”å›äº† name å­—æ®µï¼Œage å­—æ®µæ˜¯ä¸ä¼šè¿”å›çš„ã€‚\nå¦‚æœä½¿ç”¨å¦‚ä¸‹çš„ payload å°±ä¼šè¿”å›ï¼š\n{  allPersons {  name  age  } } è¿˜å¯ä»¥æŸ¥è¯¢ posts ä¸­çš„ titleï¼š\n{  allPersons {  name  age  posts {  title  }  } } å¸¦å‚æ•°æŸ¥è¯¢ åœ¨ graphql ä¸­æ¯ä¸ªå­—æ®µéƒ½æœ‰ 0 æˆ–è€…æ›´å¤šä¸ªå‚æ•°ã€‚æ¯”å¦‚ allPerson æœ‰ä¸€ä¸ª last å‚æ•°ï¼Œåªè¿”å›æœ€åä¸¤ä¸ªäººçš„ä¿¡æ¯ï¼Œè¿™é‡Œå°±æ˜¯æŸ¥è¯¢çš„è¯­å¥ï¼š\n{  allPersons(last: 2) {  name  } } é€šè¿‡ Mutation å†™æ•°æ®  åˆ›å»º æ›´æ–° åˆ é™¤  mutation å’Œ query ç±»ä¼¼ï¼Œåªæ˜¯éœ€è¦åŠ ä¸Š mutation å…³é”®å­—ã€‚å¦‚ï¼š\nmutation {  createPerson(name: \u0026#34;Bob\u0026#34;, age: 36) {  name  age  } } mutation ä¹Ÿæœ‰ä¸€ä¸ªæ ¹å­—æ®µï¼Œå« createPersonã€‚æˆ‘ä»¬çŸ¥é“è¿™ä¸ªå­—æ®µæœ‰ä¸¤ä¸ªå‚æ•° name å’Œ ageã€‚è¿”å›å€¼ä¼šåƒè¿™æ ·ï¼š\n{  \u0026#34;data\u0026#34;: {  \u0026#34;createPerson\u0026#34;: {  \u0026#34;name\u0026#34;: \u0026#34;Bob\u0026#34;,  \u0026#34;age\u0026#34;: 36  }  } } graphql ä¼šç»™æ¯ä¸ªè®°å½•æ–°å¢ä¸€ä¸ªå”¯ä¸€çš„ ID å­—æ®µï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·è®¾ç½® Person ç±»å‹ï¼š\ntype Person {  id: ID!  name: String!  age: Int! } ç„¶åå½“ä¸€ä¸ªæ–°çš„ Person å¯¹è±¡åˆ›å»ºæ—¶ï¼Œå°±å¯ä»¥è®¿é—®åˆ° idã€‚\né€šè¿‡è®¢é˜…å®æ—¶æ›´æ–° graphql æä¾›äº†å®æ—¶è®¢é˜…æ›´æ–°ã€‚\nå½“å®¢æˆ·ç«¯è®¢é˜…ä¸€ä¸ªäº‹ä»¶çš„æ—¶å€™ï¼Œå°†ä¼šä¿æŒä¸€ä¸ªå’ŒæœåŠ¡å™¨çš„ç¨³å®šè¿æ¥ï¼Œå½“æœ‰å˜åŒ–æ—¶ä¼šå‘Šè¯‰å®¢æˆ·ç«¯ã€‚\nsubscription {  newPerson {  name  age  } } å› æ­¤å½“æœ‰ä¸ªç”¨æˆ·åˆ›å»ºæˆ–è€…ä¿®æ”¹æ—¶éƒ½ä¼šå‘Šè¯‰å®¢æˆ·ç«¯ï¼š\n{  \u0026#34;newPerson\u0026#34;: {  \u0026#34;name\u0026#34;: \u0026#34;Jane\u0026#34;,  \u0026#34;age\u0026#34;: 23  } } å®šä¹‰ä¸€ä¸ªæ¨¡å¼ æœ‰å‡ ä¸ªç‰¹æ®Šçš„æ ¹ç±»å‹ï¼š\ntype Query { ... } type Mutation { ... } type Subscription { ... } API çš„æ ¹å­—æ®µéƒ½æ˜¯åœ¨ä¸Šé¢è¿™ä¸‰ä¸ªä¹‹ä¸‹ï¼Œå¦‚ï¼š\ntype Query {  allPersons: [Person!]! } allPersons ä¹Ÿå¯ä»¥æœ‰å‚æ•°ï¼š\ntype Query {  allPersons(last: Int): [Person!]! } ç±»ä¼¼çš„ mutation ä¹Ÿæ˜¯ï¼š\ntype Mutation {  createPerson(name: String!, age: Int!): Person! } è®¢é˜…ä¹Ÿæ˜¯ï¼š\ntype Subscription {  newPerson: Person! } æŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·å°±æ˜¯ï¼š\ntype Query {  allPersons(last: Int): [Person!]! }  type Mutation {  createPerson(name: String!, age: Int!): Person! }  type Subscription {  newPerson: Person! }  type Person {  name: String!  age: Int!  posts: [Post!]! }  type Post {  title: String!  author: Person! } æ¶æ„å›¾ graphql ç›´è¿æ•°æ®åº“\ngraphql è¿æ¥å±‚è¿æ¥å¤šä¸ªæœåŠ¡\ngraphql æ··è¿æ•°æ®åº“å’ŒæœåŠ¡\nè§£æå‡½æ•° æ¯ä¸ªå­—æ®µå…¶å®éƒ½æœ‰ä¸€ä¸ªè§£æå™¨ï¼Œå« resolverã€‚\nå½“æœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œä¼šè°ƒç”¨å­—æ®µçš„ resolver å‡½æ•°ï¼Œä¸€æ—¦ resolver å‡½æ•°æœ‰è¿”å›ï¼ŒæœåŠ¡å™¨å°±ä¼šæŠŠæ•°æ®åŒ…è£…æˆè¦è¿”å›çš„å­—æ®µã€‚\næœ‰è¿™æ ·ä¸€ä¸ªç±»å‹ï¼š\ntype Query {  author(id: ID!): Author }  type Author {  posts: [Post] }  type Post {  title: String  content: String } å½“æ‰§è¡Œä¸€ä¸ª query çš„æ—¶å€™ï¼š\nquery {  author(id: \u0026#34;abc\u0026#34;) {  posts {  title  content  }  } } ä¼šä»¥å¦‚ä¸‹çš„æ–¹å¼æ‰§è¡Œï¼š\nQuery.author(root, { id: \u0026#39;abc\u0026#39; }, context) -\u0026gt; author Author.posts(author, null, context) -\u0026gt; posts for each post in posts  Post.title(post, null, context) -\u0026gt; title  Post.content(post, null, context) -\u0026gt; content å®æˆ˜ ","permalink":"https://zhenfeng-zhu.github.io/post/graphql/","summary":"graphql ç»å¸¸è¢«è®¤ä¸ºæ˜¯èšç„¦äºå‰ç«¯çš„æŠ€æœ¯ã€‚\næ ¸å¿ƒæ¦‚å¿µ SDLï¼šschema definition languageï¼ˆæ¨¡å¼å®šä¹‰è¯­è¨€ï¼‰ å¦‚ï¼š\ntype Person{  name: String!  age: Int! } è¿™ä¸ªç±»å‹æœ‰ä¸¤ä¸ªå­—æ®µï¼Œname å’Œ ageï¼Œä»–ä»¬çš„ç±»å‹æ˜¯ String å’Œ Intã€‚ï¼çš„æ„æ€ä»£è¡¨ä»–ä»¬æ˜¯å¿…éœ€çš„ã€‚\ntype Post{  title: String!  author: Person! } æ¥ä¸‹æ¥çš„ Post ä¹Ÿæœ‰ä¸¤ä¸ªå­—æ®µï¼Œå…¶ä¸­ Person ä¹Ÿæ˜¯å¯ä»¥ä½œä¸ºä¸€ä¸ªç±»å‹ã€‚\nä¹Ÿå¯ä»¥è¿™æ ·ï¼Œåœ¨ Person ä¸­æ·»åŠ ä¸€ä¸ª postï¼š\ntype Person{  name: String!  age: Int!  posts: [Post!]! } é€šè¿‡ Query è·å–æ•°æ® åŸºæœ¬æŸ¥è¯¢ å®¢æˆ·ç«¯å‘é€ä¸‹é¢çš„æ•°æ®ç»™æœåŠ¡å™¨\n{  allPersons {  name  } } allPersons æ˜¯æ ¹å­—æ®µï¼ˆroot fieldï¼‰ï¼Œå®ƒä¸‹é¢çš„æˆä¸ºæŸ¥è¯¢çš„ payloadï¼Œè¿™é‡Œä»…åŒ…å«äº†ä¸€ä¸ª nameã€‚","title":"graphql"},{"content":" çŸ­å˜é‡åç§°åœ¨å£°æ˜å’Œä¸Šæ¬¡ä½¿ç”¨ä¹‹é—´çš„è·ç¦»å¾ˆçŸ­æ—¶æ•ˆæœå¾ˆå¥½ã€‚ é•¿å˜é‡åç§°éœ€è¦è¯æ˜è‡ªå·±çš„åˆç†æ€§; åç§°è¶Šé•¿ï¼Œéœ€è¦æä¾›çš„ä»·å€¼è¶Šé«˜ã€‚å†—é•¿çš„åç§°ä¸é¡µé¢ä¸Šçš„é‡é‡ç›¸æ¯”ï¼Œä¿¡å·é‡è¾ƒå°ã€‚ è¯·å‹¿åœ¨å˜é‡åç§°ä¸­åŒ…å«ç±»å‹åç§°ã€‚ å¸¸é‡åº”è¯¥æè¿°å®ƒä»¬æŒæœ‰çš„å€¼ï¼Œè€Œä¸æ˜¯è¯¥å¦‚ä½•ä½¿ç”¨ã€‚ å¯¹äºå¾ªç¯å’Œåˆ†æ”¯ä½¿ç”¨å•å­—æ¯å˜é‡ï¼Œå‚æ•°å’Œè¿”å›å€¼ä½¿ç”¨å•ä¸ªå­—ï¼Œå‡½æ•°å’ŒåŒ…çº§åˆ«å£°æ˜ä½¿ç”¨å¤šä¸ªå•è¯ æ–¹æ³•ã€æ¥å£å’ŒåŒ…ä½¿ç”¨å•ä¸ªè¯ã€‚ è¯·è®°ä½ï¼ŒåŒ…çš„åç§°æ˜¯è°ƒç”¨è€…ç”¨æ¥å¼•ç”¨åç§°çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¦å¥½å¥½åˆ©ç”¨è¿™ä¸€ç‚¹ã€‚  å˜é‡çš„åç§°åº”æè¿°å…¶å†…å®¹ï¼Œè€Œä¸æ˜¯å†…å®¹çš„ç±»å‹ã€‚\nå…¸å‹é”™è¯¯ï¼š\nvar usersMap map[string]*User å¦‚æœusersçš„æè¿°æ€§éƒ½ä¸å¤Ÿç”¨ï¼Œé‚£ä¹ˆusersMapä¹Ÿä¸ä¼šã€‚\nå£°æ˜å˜é‡ä½†æ²¡æœ‰åˆå§‹åŒ–æ—¶ï¼Œè¯·ä½¿ç”¨ varã€‚\nåœ¨å£°æ˜å’Œåˆå§‹åŒ–æ—¶ï¼Œä½¿ç”¨:=ã€‚\nå…³äºå˜é‡å’Œå¸¸é‡çš„æ³¨é‡Šåº”æè¿°å…¶å†…å®¹è€Œéå…¶ç›®çš„  ä»»ä½•æ—¢ä¸æ˜æ˜¾ä¹Ÿä¸ç®€çŸ­çš„å…¬å…±åŠŸèƒ½å¿…é¡»äºˆä»¥æ³¨é‡Šã€‚ æ— è®ºé•¿åº¦æˆ–å¤æ‚ç¨‹åº¦å¦‚ä½•ï¼Œå¯¹åº“ä¸­çš„ä»»ä½•å‡½æ•°éƒ½å¿…é¡»è¿›è¡Œæ³¨é‡Š  åœ¨ç¼–å†™å‡½æ•°ä¹‹å‰ï¼Œè¯·ç¼–å†™æè¿°å‡½æ•°çš„æ³¨é‡Šã€‚ å¦‚æœä½ å‘ç°å¾ˆéš¾å†™å‡ºæ³¨é‡Šï¼Œé‚£ä¹ˆè¿™å°±è¡¨æ˜ä½ å°†è¦ç¼–å†™çš„ä»£ç å¾ˆéš¾ç†è§£ã€‚\nä»¥åŒ…æ‰€æä¾›çš„å†…å®¹æ¥å‘½åï¼Œè€Œä¸æ˜¯å®ƒåŒ…å«çš„å†…å®¹ã€‚\né¿å…ä½¿ç”¨ç±»ä¼¼baseï¼Œcommonæˆ–utilçš„åŒ…åç§° å°½æ—©returnè€Œä¸æ˜¯æ·±åº¦åµŒå¥— ä½¿ç”¨internalåŒ…æ¥å‡å°‘å…¬å…± API ä¸é¼“åŠ±ä½¿ç”¨nilä½œä¸ºå‚æ•° é¦–é€‰å¯å˜å‚æ•°å‡½æ•°è€Œé[]Tå‚æ•° é€šè¿‡æ¶ˆé™¤é”™è¯¯æ¥æ¶ˆé™¤é”™è¯¯å¤„ç† ä½¿ç”¨github.com/pkg/errorsåŒ…è£…errors æ°¸è¿œä¸è¦å¯åŠ¨ä¸€ä¸ªåœæ­¢ä¸äº†çš„ goroutine ","permalink":"https://zhenfeng-zhu.github.io/post/go-best-practice/","summary":" çŸ­å˜é‡åç§°åœ¨å£°æ˜å’Œä¸Šæ¬¡ä½¿ç”¨ä¹‹é—´çš„è·ç¦»å¾ˆçŸ­æ—¶æ•ˆæœå¾ˆå¥½ã€‚ é•¿å˜é‡åç§°éœ€è¦è¯æ˜è‡ªå·±çš„åˆç†æ€§; åç§°è¶Šé•¿ï¼Œéœ€è¦æä¾›çš„ä»·å€¼è¶Šé«˜ã€‚å†—é•¿çš„åç§°ä¸é¡µé¢ä¸Šçš„é‡é‡ç›¸æ¯”ï¼Œä¿¡å·é‡è¾ƒå°ã€‚ è¯·å‹¿åœ¨å˜é‡åç§°ä¸­åŒ…å«ç±»å‹åç§°ã€‚ å¸¸é‡åº”è¯¥æè¿°å®ƒä»¬æŒæœ‰çš„å€¼ï¼Œè€Œä¸æ˜¯è¯¥å¦‚ä½•ä½¿ç”¨ã€‚ å¯¹äºå¾ªç¯å’Œåˆ†æ”¯ä½¿ç”¨å•å­—æ¯å˜é‡ï¼Œå‚æ•°å’Œè¿”å›å€¼ä½¿ç”¨å•ä¸ªå­—ï¼Œå‡½æ•°å’ŒåŒ…çº§åˆ«å£°æ˜ä½¿ç”¨å¤šä¸ªå•è¯ æ–¹æ³•ã€æ¥å£å’ŒåŒ…ä½¿ç”¨å•ä¸ªè¯ã€‚ è¯·è®°ä½ï¼ŒåŒ…çš„åç§°æ˜¯è°ƒç”¨è€…ç”¨æ¥å¼•ç”¨åç§°çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¦å¥½å¥½åˆ©ç”¨è¿™ä¸€ç‚¹ã€‚  å˜é‡çš„åç§°åº”æè¿°å…¶å†…å®¹ï¼Œè€Œä¸æ˜¯å†…å®¹çš„ç±»å‹ã€‚\nå…¸å‹é”™è¯¯ï¼š\nvar usersMap map[string]*User å¦‚æœusersçš„æè¿°æ€§éƒ½ä¸å¤Ÿç”¨ï¼Œé‚£ä¹ˆusersMapä¹Ÿä¸ä¼šã€‚\nå£°æ˜å˜é‡ä½†æ²¡æœ‰åˆå§‹åŒ–æ—¶ï¼Œè¯·ä½¿ç”¨ varã€‚\nåœ¨å£°æ˜å’Œåˆå§‹åŒ–æ—¶ï¼Œä½¿ç”¨:=ã€‚\nå…³äºå˜é‡å’Œå¸¸é‡çš„æ³¨é‡Šåº”æè¿°å…¶å†…å®¹è€Œéå…¶ç›®çš„  ä»»ä½•æ—¢ä¸æ˜æ˜¾ä¹Ÿä¸ç®€çŸ­çš„å…¬å…±åŠŸèƒ½å¿…é¡»äºˆä»¥æ³¨é‡Šã€‚ æ— è®ºé•¿åº¦æˆ–å¤æ‚ç¨‹åº¦å¦‚ä½•ï¼Œå¯¹åº“ä¸­çš„ä»»ä½•å‡½æ•°éƒ½å¿…é¡»è¿›è¡Œæ³¨é‡Š  åœ¨ç¼–å†™å‡½æ•°ä¹‹å‰ï¼Œè¯·ç¼–å†™æè¿°å‡½æ•°çš„æ³¨é‡Šã€‚ å¦‚æœä½ å‘ç°å¾ˆéš¾å†™å‡ºæ³¨é‡Šï¼Œé‚£ä¹ˆè¿™å°±è¡¨æ˜ä½ å°†è¦ç¼–å†™çš„ä»£ç å¾ˆéš¾ç†è§£ã€‚\nä»¥åŒ…æ‰€æä¾›çš„å†…å®¹æ¥å‘½åï¼Œè€Œä¸æ˜¯å®ƒåŒ…å«çš„å†…å®¹ã€‚\né¿å…ä½¿ç”¨ç±»ä¼¼baseï¼Œcommonæˆ–utilçš„åŒ…åç§° å°½æ—©returnè€Œä¸æ˜¯æ·±åº¦åµŒå¥— ä½¿ç”¨internalåŒ…æ¥å‡å°‘å…¬å…± API ä¸é¼“åŠ±ä½¿ç”¨nilä½œä¸ºå‚æ•° é¦–é€‰å¯å˜å‚æ•°å‡½æ•°è€Œé[]Tå‚æ•° é€šè¿‡æ¶ˆé™¤é”™è¯¯æ¥æ¶ˆé™¤é”™è¯¯å¤„ç† ä½¿ç”¨github.com/pkg/errorsåŒ…è£…errors æ°¸è¿œä¸è¦å¯åŠ¨ä¸€ä¸ªåœæ­¢ä¸äº†çš„ goroutine ","title":"go-best-practice"},{"content":"docker åˆ©ç”¨ Linux çš„ cgroups å’Œ namespaceï¼Œæ„å»ºä¸€ä¸ªæ²™ç®±è¿è¡Œç¯å¢ƒã€‚\ndocker é•œåƒ å…¶å®å°±æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè¿™ä¸ªå‹ç¼©åŒ…æ˜¯ç”±ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æ–‡ä»¶ç›®å½•æ„æˆï¼ŒåŒ…å«äº†è¿™ä¸ªåº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„æ‰€æœ‰ä¾èµ–ï¼Œæ‰€ä»¥æœ¬åœ°å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒæ˜¯ä¸€æ ·çš„ã€‚\nè§£å†³äº†åº”ç”¨æ‰“åŒ…çš„æ ¹æœ¬æ€§é—®é¢˜ã€‚\nå®¹å™¨ç¼–æ’ å¯¹ Docker å®¹å™¨çš„ä¸€ç³»åˆ—å®šä¹‰ã€é…ç½®å’Œåˆ›å»ºåŠ¨ä½œçš„ç®¡ç†\n å®¹å™¨æœ¬èº«æ²¡æœ‰ä»·å€¼ï¼Œæœ‰ä»·å€¼çš„æ˜¯â€œå®¹å™¨ç¼–æ’â€ã€‚\n åŸç† å®¹å™¨æŠ€æœ¯çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå°±æ˜¯é€šè¿‡çº¦æŸå’Œä¿®æ”¹è¿›ç¨‹çš„åŠ¨æ€è¡¨ç°ï¼Œä»è€Œä¸ºå…¶åˆ›é€ ä¸€ä¸ªâ€œè¾¹ç•Œâ€ã€‚\nåœ¨åˆ›å»ºä¸€ä¸ªå®¹å™¨è¿›ç¨‹çš„æ—¶å€™ï¼ŒæŒ‡å®šäº†è¿™ä¸ªè¿›ç¨‹æ‰€éœ€è¦å¯åŠ¨çš„ä¸€ç»„ Namespace å‚æ•°ï¼Œè¿™æ ·å®¹å™¨å°±åªèƒ½çœ‹åˆ°å½“å‰ Namespace æ‰€é™å®šçš„èµ„æºã€æ–‡ä»¶ã€è®¾å¤‡ã€çŠ¶æ€æˆ–é…ç½®ã€‚\nCgroups ä¸»è¦ä½œç”¨æ˜¯ä¸ºä¸€ä¸ªè¿›ç¨‹ç»„è®¾ç½®èµ„æºä¸Šé™ï¼Œå¦‚ CPUã€å†…å­˜ã€ç£ç›˜å’Œå¸¦å®½ç­‰ã€‚ä¹Ÿå¯ä»¥è®¾ç½®è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œå®¡è®¡ï¼ŒæŒ‚èµ·ï¼Œé‡å¯ç­‰ã€‚\nå› æ­¤ï¼Œä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Docker å®¹å™¨ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå¯ç”¨äº†å¤šä¸ª Namespace çš„åº”ç”¨è¿›ç¨‹ï¼Œè€Œè¿™ä¸ªè¿›ç¨‹èƒ½å¤Ÿä½¿ç”¨çš„èµ„æºæ˜¯ç”± Cgroups æ¥é™åˆ¶ã€‚\næŒ‚è½½åœ¨å®¹å™¨æ ¹ç›®å½•ä¸Šï¼Œç”¨æ¥ä¸ºå®¹å™¨è¿›ç¨‹æä¾›éš”ç¦»åæ‰§è¡Œç¯å¢ƒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå°±æ˜¯å®¹å™¨é•œåƒï¼Œrootfsã€‚\n å¯åŠ¨ Namespace é…ç½® è®¾ç½® Cgroups å‚æ•° åˆ‡æ¢è¿›ç¨‹æ ¹ç›®å½• rootf  docker é•œåƒè®¾è®¡æ—¶ï¼Œå¼•å…¥äº†å±‚ï¼ˆlayerï¼‰ï¼Œç”¨æˆ·åˆ¶ä½œé•œåƒçš„æ¯ä¸€æ­¥æ“ä½œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå±‚ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¢é‡çš„ rootfsã€‚AuFSï¼Œæ‰€ä»¥å°±æœ‰äº†å…±äº«å±‚ï¼Œé•œåƒä¸ç”¨é‚£ä¹ˆå¤§ã€‚\nä¸€ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥é€‰æ‹©åŠ å…¥åˆ°æŸä¸ªè¿›ç¨‹å·²æœ‰çš„ Namespace å½“ä¸­ï¼Œä»è€Œè¾¾åˆ°è¿›å…¥è¿™ä¸ªè¿›ç¨‹æ‰€åœ¨çš„å®¹å™¨çš„ç›®çš„ï¼Œè¿™æ­£æ˜¯ docker exec çš„å®ç°åŸç†ã€‚\nvolume æœºåˆ¶ï¼Œå…è®¸ä½ å°†å®¿ä¸»æœºä¸ŠæŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶ï¼ŒæŒ‚è½½åˆ°å®¹å™¨é‡Œé¢è¿›è¡Œè¯»å–å’Œä¿®æ”¹æ“ä½œã€‚\nä¸»è¦ä¾èµ– Linux ä¾èµ–ä¸‰å¤§æŠ€æœ¯  Namespace Cgroups rootfs  å’Œè™šæ‹Ÿæœºæ¯”è¾ƒ è™šæ‹Ÿæœºæ˜¯é€šè¿‡ç¡¬ä»¶è™šæ‹ŸåŒ–åŠŸèƒ½ï¼Œæ¨¡æ‹Ÿä¸€å¥—æ“ä½œç³»ç»Ÿæ‰€éœ€è¦çš„å„ç§ç¡¬ä»¶ï¼Œå¦‚ CPUã€å†…å­˜ã€IO è®¾å¤‡ç­‰ï¼Œç„¶åå®‰è£…ä¸€ä¸ªæ–°çš„æ“ä½œç³»ç»Ÿã€‚\ndocker æ˜¯åˆ©ç”¨ Linux çš„ Namespace åŸç†ï¼Œå¸®åŠ©ç”¨æˆ·å¯åŠ¨çš„è¿˜æ˜¯ç³»ç»Ÿçš„åº”ç”¨è¿›ç¨‹ï¼Œåªæ˜¯åŠ äº†ä¸€äº›å‚æ•°ï¼Œé™åˆ¶å…¶èƒ½çœ‹åˆ°çš„èµ„æºã€‚å› æ­¤ç›¸å¯¹äºè™šæ‹Ÿæœºèµ„æºæ¶ˆè€—æ›´å°ï¼Œè€Œä¸”è½»é‡çº§ï¼Œæ•æ·é«˜æ€§èƒ½ã€‚\nä¸è¿‡ç¼ºç‚¹å°±æ˜¯éš”ç¦»ä¸å½»åº•ï¼Œå¤šä¸ªå®¹å™¨è¿›ç¨‹å…¬ç”¨å®¿ä¸»æœºæ“ä½œç³»ç»Ÿå†…æ ¸ã€‚æœ‰äº›èµ„æºå’Œå¯¹è±¡ä¸å¯ä»¥è¢« Namespace åŒ–çš„ï¼Œå¦‚æ—¶é—´ã€‚\nkubernetes è¦è§£å†³çš„é—®é¢˜\nç¼–æ’ï¼Ÿè°ƒåº¦ï¼Ÿå®¹å™¨äº‘ï¼Ÿé›†ç¾¤ç®¡ç†ï¼Ÿ\n master  kube-apiserverï¼šAPI æœåŠ¡ kube-schedulerï¼šè°ƒåº¦ kube-controller-managerï¼šç¼–æ’   node  kubeletï¼šåŒå®¹å™¨è¿è¡Œæ—¶æ‰“äº¤é“ã€‚ä¾èµ–äº CRIï¼ˆcontainer runtime interface å®¹å™¨è¿è¡Œæ¥å£ï¼‰è¿œç¨‹è°ƒç”¨æ¥å£ï¼Œè¿™ä¸ªæ¥å£å®šä¹‰äº†å®¹å™¨è¿è¡Œæ—¶çš„å„é¡¹æ ¸å¿ƒæ“ä½œã€‚   etcd  è¿è¡Œåœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸­çš„å„ç§ä»»åŠ¡ä¹‹é—´ï¼Œå®é™…å­˜åœ¨å„ç§å„æ ·çš„å…³ç³»ã€‚è¿™äº›å…³ç³»çš„å¤„ç†ï¼Œæ‰æ˜¯ä½œä¸šç¼–æ’å’Œç®¡ç†ç³»ç»Ÿæœ€å›°éš¾çš„åœ°æ–¹ã€‚\nsudo\n é¦–å…ˆï¼Œé€šè¿‡ä¸€ä¸ªç¼–æ’å¯¹è±¡ï¼Œå¦‚ podï¼Œjob æˆ– cronjob ç­‰ï¼Œæ¥æè¿°ä½ è¯•å›¾ç®¡ç†çš„åº”ç”¨ï¼› ç„¶åï¼Œå†ä¸ºå®ƒå®šä¹‰ä¸€äº›æœåŠ¡å¯¹è±¡ï¼Œå¦‚ serviceï¼Œsecretï¼Œautoscaler ç­‰ã€‚è¿™äº›å¯¹è±¡ï¼Œä¼šè´Ÿè´£å…·ä½“çš„å¹³å°çº§åŠŸèƒ½ã€‚  è¿™ç§ä½¿ç”¨æ–¹æ³•ï¼Œå°±æ˜¯æ‰€è°“çš„â€œå£°æ˜å¼ APIâ€ã€‚è¿™ç§ API å¯¹åº”çš„ç¼–æ’å¯¹è±¡å’ŒæœåŠ¡å¯¹è±¡ï¼Œéƒ½æ˜¯ k8s é¡¹ç›®ä¸­çš„ API å¯¹è±¡ã€‚\nç®€å•ä½¿ç”¨ kubectl create -f æˆ‘çš„é…ç½®æ–‡ä»¶ pod å°±æ˜¯ k8s ä¸–ç•Œä¸­çš„åº”ç”¨ï¼Œè€Œä¸€ä¸ªåº”ç”¨å¯ä»¥ç”±å¤šä¸ªå®¹å™¨ç»„æˆã€‚\nä½¿ç”¨ä¸€ä¸ª API å¯¹è±¡ç®¡ç†å¦ä¸€ä¸ª API å¯¹è±¡çš„æ–¹æ³•ï¼Œå«æ§åˆ¶å™¨æ¨¡å¼ã€‚\næ¯ä¸ª API å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª metadata å­—æ®µï¼Œè¿™ä¸ªå­—æ®µæ˜¯ API å¯¹è±¡çš„æ ‡è¯†ï¼Œå³å…ƒæ•°æ®ã€‚ä¸»è¦ç”¨åˆ°çš„æ˜¯ labelsï¼Œspec.selector.matchLabels å°±æ˜¯ k8s è¿‡æ»¤çš„è§„åˆ™ã€‚ä¸ labels åŒå±‚çº§çš„æ˜¯ annotationsï¼Œè¿™æ˜¯ç”± k8s æ‰€æ„Ÿå…´è¶£çš„ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ã€‚\nä¸€ä¸ª k8s çš„ API å¯¹è±¡éƒ½æœ‰ metadata å’Œ spec ä¸¤ä¸ªéƒ¨åˆ†ã€‚å‰è€…æ”¾çš„æ˜¯å¯¹è±¡çš„å…ƒæ•°æ®ï¼Œå¯¹æ‰€æœ‰ API å¯¹è±¡æ¥è®²ï¼Œè¿™éƒ¨åˆ†çš„å­—æ®µå’Œæ ¼å¼åŸºæœ¬ä¸€æ ·ï¼›è€Œåè€…å­˜æ”¾çš„æ˜¯å±äºè¿™ä¸ªå¯¹è±¡ç‹¬æœ‰çš„å®šä¹‰ï¼Œç”¨æ¥æè¿°å®ƒæ‰€è¦è¡¨è¾¾çš„åŠŸèƒ½ã€‚\n$ kubectl create -f nginx-deployment.yaml  $ kubectl get pods -l app=nginx NAME READY STATUS RESTARTS AGE nginx-deployment-67594d6bf6-9gdvr 1/1 Running 0 10m nginx-deployment-67594d6bf6-v6j7w 1/1 Running 0 10m  $ kubectl describe pod nginx-deployment-67594d6bf6-9gdvr Name: nginx-deployment-67594d6bf6-9gdvr Namespace: default Priority: 0 PriorityClassName: \u0026lt;none\u0026gt; Node: node-1/10.168.0.3 Start Time: Thu, 16 Aug 2018 08:48:42 +0000 Labels: app=nginx  pod-template-hash=2315082692 Annotations: \u0026lt;none\u0026gt; Status: Running IP: 10.32.0.23 Controlled By: ReplicaSet/nginx-deployment-67594d6bf6 ... Events:   Type Reason Age From Message   ---- ------ ---- ---- -------   Normal Scheduled 1m default-scheduler Successfully assigned default/nginx-deployment-67594d6bf6-9gdvr to node-1  Normal Pulling 25s kubelet, node-1 pulling image \u0026#34;nginx:1.7.9\u0026#34;  Normal Pulled 17s kubelet, node-1 Successfully pulled image \u0026#34;nginx:1.7.9\u0026#34;  Normal Created 17s kubelet, node-1 Created container  Normal Started 17s kubelet, node-1 Started container   $ kubectl apply -f nginx-deployment.yaml  # ä¿®æ”¹ nginx-deployment.yaml çš„å†…å®¹  $ kubectl apply -f nginx-deployment.yaml åœ¨å‘½ä»¤è¡Œä¸­ï¼Œæ‰€æœ‰ key-value æ ¼å¼çš„å‚æ•°ï¼Œéƒ½ä½¿ç”¨â€œ=â€œè€Œä¸æ˜¯â€ï¼šâ€œè¡¨ç¤ºã€‚\nåœ¨ k8s æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹ API å¯¹è±¡çš„æ‰€æœ‰é‡è¦æ“ä½œï¼Œéƒ½ä¼šè¢«è®°å½•åœ¨è¿™ä¸ªå¯¹è±¡çš„ events ä¸­ã€‚\nåœ¨çº¿ä¸šåŠ¡\nDeployment\nStatefunSet\nDaemonSet\nç¦»çº¿ä¸šåŠ¡\nJob\nrestartPolicy åœ¨ job å¯¹è±¡é‡Œåªè¢«å…è®¸è®¾ç½®ä¸º never å’Œ onFailureï¼›è€Œåœ¨ Deployment å¯¹è±¡ä¸­ï¼Œåªè¢«å…è®¸è®¾ç½®ä¸º alwaysã€‚\nå£°æ˜å¼ API å’Œ Kubernetes ç¼–ç¨‹èŒƒå¼ åˆ›å»ºä¸€ä¸ªä¸¤ä¸ª Nginx å®¹å™¨çš„æ­¥éª¤ï¼š\né¦–å…ˆå†™ä¸€ä¸ª Deployment çš„ yaml æ–‡ä»¶ï¼š\napiVersion: apps/v1 kind: Deployment metadata:  name: nginx-deployment spec:  selector:  matchLabels:  app: nginx  replicas: 2  template:  metadata:  labels:  app: nginx  spec:  containers:  - name: nginx  image: nginx  ports:  - containerPort: 80 ç„¶åä½¿ç”¨ kubectl create å‘½ä»¤åœ¨ Kubernetes ä¸­åˆ›å»ºä¸€ä¸ª Deployment å¯¹è±¡ï¼š\nkubectl create -f nginx.yaml è¿™æ ·ä¸¤ä¸ª Nginx pod å°±è¿è¡Œèµ·æ¥äº†ã€‚\nå¦‚æœè¦æ›´æ–°çš„è¯ï¼Œåªéœ€è¦ä¿®æ”¹ yaml æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ kubectl apply å‘½ä»¤æ›´æ–°ï¼Œè§¦å‘äº†æ»šåŠ¨æ›´æ–°ã€‚\nè¿™ä¸ª apply å‘½ä»¤å°±æ˜¯å£°æ˜å¼ APIã€‚\nistio é¡¹ç›®ä¸­ï¼Œæœ€æ ¹æœ¬çš„ç»„ä»¶æ˜¯è¿è¡Œåœ¨æ¯ä¸ª pod é‡Œçš„ envoy å®¹å™¨ã€‚è¿™ä¸ªä»£ç†æœåŠ¡ä»¥ sidecar å®¹å™¨çš„æ–¹å¼ï¼ŒæŠŠæ•´ä¸ª pod çš„è¿›å‡ºæµé‡æ¥ç®¡ä¸‹æ¥ã€‚istio çš„æ§åˆ¶å±‚çš„ pilot ç»„ä»¶ï¼Œé€šè¿‡è°ƒç”¨æ¯ä¸ª envoy çš„ APIï¼Œå®ç°å¾®æœåŠ¡çš„æ²»ç†ã€‚\nåˆ©ç”¨ Kubernetes çš„ Admission Controlï¼Œä¹Ÿå«ï¼šInitializerï¼Œå…ˆåˆ›å»ºä¸€ä¸ª Podï¼Œç„¶å istio å°±æ˜¯åœ¨ pod çš„ yaml ç»™ Kubernetes ä¹‹åï¼Œè‡ªåŠ¨åŠ ä¸Š envoy çš„é…ç½®ã€‚\n æ‰€è°“çš„å£°æ˜å¼ï¼ŒæŒ‡çš„å°±æ˜¯æˆ‘åªéœ€è¦æäº¤ä¸€ä¸ªå®šä¹‰å¥½çš„ API å¯¹è±¡æ¥å£°æ˜æˆ‘æ‰€æœŸæœ›çš„çŠ¶æ€æ˜¯ä»€ä¹ˆæ ·å­ã€‚ å…¶æ¬¡ï¼Œå£°æ˜å¼ API å…è®¸æœ‰å¤šä¸ª API å†™ç«¯ï¼Œä»¥ PATCH çš„æ–¹å¼å¯¹ API å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ— éœ€å…³å¿ƒåŸå§‹çš„ YAML æ–‡ä»¶çš„å†…å®¹ã€‚ æœ€åï¼ŒKubernetes åŸºäºå¯¹ API å¯¹è±¡çš„å¢åˆ æ”¹æŸ¥ï¼Œåœ¨æ— éœ€å¤–ç•Œå¹²é¢„çš„æƒ…å†µä¸‹ï¼Œå®Œæˆå¯¹å®é™…çŠ¶æ€å’ŒæœŸæœ›çŠ¶æ€çš„è°ƒè°ã€‚  ä¸€ä¸ª API å¯¹è±¡åœ¨ etcd ä¸­å®Œæ•´è·¯å¾„æ˜¯ç”±ï¼šgroupï¼ˆAPI ç»„ï¼‰ï¼Œversionï¼ˆAPI ç‰ˆæœ¬ï¼‰å’Œ Resourceï¼ˆAPI èµ„æºç±»å‹ï¼‰ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆçš„ã€‚\napiVersion: batch/v2 kind: CronJob batch æ˜¯ç»„ï¼Œv2 æ˜¯ç‰ˆæœ¬ï¼ŒCronJob æ˜¯ç±»å‹ã€‚\nå¯¹äºæ ¸å¿ƒ API å¯¹è±¡ï¼šPodï¼ŒNode ç­‰ï¼Œä¸éœ€è¦ group çš„ã€‚éæ ¸å¿ƒå¯¹è±¡æ˜¯éœ€è¦ç»„ã€‚\nåŒ¹é…è§„åˆ™å°±æ˜¯ï¼š\n/apis/batch/v2/CronJob\n  é¦–å…ˆ yaml æ–‡ä»¶è¢«æäº¤ç»™äº† APIServer\nè¿‡æ»¤ï¼Œæˆæƒï¼Œè¶…æ—¶å¤„ç†æˆ–å®¡è®¡ç­‰\n  è¿›å…¥è·¯ç”±æµç¨‹\næ ¹æ® yamlï¼ŒæŒ‰ç…§åŒ¹é…è§„åˆ™å»æ‰¾\n  æ ¹æ®å®šä¹‰ï¼ŒæŒ‰ç…§ yaml ä¸­çš„å­—æ®µï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡\n  è¿›è¡Œ Amission å’Œ Validationã€‚\n  æŠŠéªŒè¯è¿‡çš„å¯¹è±¡ï¼Œåºåˆ—åŒ–å­˜åˆ° etcd ä¸­\n  RBAC åŸºäºè§’è‰²çš„æ§åˆ¶\nroleï¼šè§’è‰²ï¼Œä¸€ç»„è§„åˆ™ï¼Œå®šä¹‰ Kubernetes API å¯¹è±¡çš„æ“ä½œæƒé™\nsubjectï¼šè¢«ä½œç”¨è€…ï¼Œå¯ä»¥æ˜¯äººï¼Œä¹Ÿå¯ä»¥æ˜¯æœºå™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯ Kubernetes å®šä¹‰çš„ç”¨æˆ·\nrolebindingï¼šå®šä¹‰è¢«ä½œç”¨è€…å’Œè§’è‰²çš„ç»‘å®šå…³ç³»\nServiceAccountï¼Œä¼šè¢«è‡ªåŠ¨åˆ›å»ºåˆ†é…ä¸€ä¸ª secret å¯¹è±¡ã€‚\næ‰€è°“è§’è‰²å°±æ˜¯ä¸€ç»„æƒé™è§„åˆ™åˆ—è¡¨ï¼Œè€Œæˆ‘ä»¬åˆ†é…è¿™äº›æƒé™çš„æ–¹å¼ï¼Œå°±æ˜¯é€šè¿‡åˆ›å»º rolebinding å¯¹è±¡ï¼Œå°†è¢«ä½œç”¨è€…å’Œæƒé™åˆ—è¡¨è¿›è¡Œç»‘å®šã€‚\nå¦å¤–ï¼Œä¸ä¹‹å¯¹åº”çš„ ClusterRole å’Œ ClusterRoleBindingï¼Œåˆ™æ˜¯ Kubernetes é›†ç¾¤çº§åˆ«çš„ Role å’Œ RoleBindingï¼Œå®ƒä»¬çš„ä½œç”¨èŒƒå›´ä¸å— Namespace é™åˆ¶ã€‚\nå°½ç®¡è¢«ä½œç”¨è€…æœ‰å¾ˆå¤šç§ï¼ˆå¦‚ Userã€Groupï¼‰ï¼Œä½†åœ¨æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ€æ™®éçš„è¿˜æ˜¯ ServiceAccountã€‚\nç½‘ç»œæ¨¡å‹ Veth Pair å¸¸å¸¸è¢«ç”¨ä½œè¿æ¥ä¸åŒ Network Namespace çš„ç½‘çº¿ã€‚veth pair è™šæ‹Ÿè®¾å¤‡ã€‚æ€»æ˜¯ä»¥ä¸¤å¼ è™šæ‹Ÿç½‘å¡å½¢å¼æˆå¯¹å‡ºç°ã€‚å¹¶ä¸”ï¼Œä»ä¸€ä¸ªç½‘å¡ä¸­å‘å‡ºçš„æ•°æ®åŒ…ï¼Œå¯ä»¥ç›´æ¥å‡ºç°åœ¨å¦ä¸€å¼ ç½‘å¡ä¸Šï¼Œå“ªæ€•è¿™ä¸¤ä¸ªç½‘å¡åœ¨ä¸åŒçš„ network Namespace é‡Œã€‚\nä¸€æ—¦ä¸€å¼ è™šæ‹Ÿç½‘å¡è¢«æ’åœ¨ç½‘æ¡¥ä¸Šï¼Œä»–å°±ä¼šå˜æˆè¯¥ç½‘æ¡¥çš„ä»è®¾å¤‡ã€‚ä»è®¾å¤‡ä¼šé™çº§æˆä¸ºç½‘æ¡¥çš„ä¸€ä¸ªç«¯å£ï¼Œä¸èƒ½å¤„ç†æ•°æ®åŒ…ï¼Œåªèƒ½æ¥æ”¶æµå…¥çš„æ•°æ®åŒ…äº¤ç»™å¯¹åº”çš„ç½‘æ¡¥ã€‚\nä¸¤ä¸ªå®¹å™¨çš„è™šæ‹Ÿç½‘å¡éƒ½æ’åœ¨å®¿ä¸»æœºçš„ä¸€ä¸ªç½‘æ¡¥ä¸Šï¼Œè¿™ä¸ªç½‘æ¡¥å°±æ‰®æ¼”ä¸€ä¸ªäº¤æ¢æœºçš„è§’è‰²ã€‚å½“ä¸¤ä¸ªå®¹å™¨è¿›è¡Œç½‘ç»œäº¤äº’æ—¶ï¼Œä»ä¸€ä¸ªå®¹å™¨çš„å‘å‡ºè¯·æ±‚åˆ°å®¿ä¸»æœºï¼Œç”±äº Veth Pair çš„æœºåˆ¶ï¼Œå¦ä¸€ä¸ªå®¹å™¨å°±çœ‹åˆ°æœ‰æ•°æ®æµå…¥ã€‚\nå› æ­¤é»˜è®¤æƒ…å†µä¸‹ï¼Œè¢«é™åˆ¶åœ¨ network Namespace çš„å®¹å™¨è¿›ç¨‹ï¼Œå®é™…å°±æ˜¯é€šè¿‡ veth pair è®¾å¤‡+å®¿ä¸»æœºç½‘æ¡¥çš„æ–¹å¼ï¼Œå®ç°äº†è·Ÿå…¶ä»–å®¹å™¨çš„æ•°æ®äº¤æ¢ã€‚\nè·¨ä¸»é€šä¿¡ï¼Œéœ€è¦æœ‰ä¸€ä¸ªé›†ç¾¤å…¬ç”¨çš„ç½‘æ¡¥ï¼Œæ‰€æœ‰å®¹å™¨éƒ½è¿æ¥åˆ°è¯¥ç½‘æ¡¥ä¸Šï¼Œå°±å¯ä»¥ç›¸äº’é€šä¿¡ï¼Œè¿™å°±æ˜¯ overlay networkï¼ˆè¦†ç›–ç½‘ç»œï¼‰\n","permalink":"https://zhenfeng-zhu.github.io/post/kubernetes/","summary":"docker åˆ©ç”¨ Linux çš„ cgroups å’Œ namespaceï¼Œæ„å»ºä¸€ä¸ªæ²™ç®±è¿è¡Œç¯å¢ƒã€‚\ndocker é•œåƒ å…¶å®å°±æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè¿™ä¸ªå‹ç¼©åŒ…æ˜¯ç”±ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æ–‡ä»¶ç›®å½•æ„æˆï¼ŒåŒ…å«äº†è¿™ä¸ªåº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„æ‰€æœ‰ä¾èµ–ï¼Œæ‰€ä»¥æœ¬åœ°å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒæ˜¯ä¸€æ ·çš„ã€‚\nè§£å†³äº†åº”ç”¨æ‰“åŒ…çš„æ ¹æœ¬æ€§é—®é¢˜ã€‚\nå®¹å™¨ç¼–æ’ å¯¹ Docker å®¹å™¨çš„ä¸€ç³»åˆ—å®šä¹‰ã€é…ç½®å’Œåˆ›å»ºåŠ¨ä½œçš„ç®¡ç†\n å®¹å™¨æœ¬èº«æ²¡æœ‰ä»·å€¼ï¼Œæœ‰ä»·å€¼çš„æ˜¯â€œå®¹å™¨ç¼–æ’â€ã€‚\n åŸç† å®¹å™¨æŠ€æœ¯çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå°±æ˜¯é€šè¿‡çº¦æŸå’Œä¿®æ”¹è¿›ç¨‹çš„åŠ¨æ€è¡¨ç°ï¼Œä»è€Œä¸ºå…¶åˆ›é€ ä¸€ä¸ªâ€œè¾¹ç•Œâ€ã€‚\nåœ¨åˆ›å»ºä¸€ä¸ªå®¹å™¨è¿›ç¨‹çš„æ—¶å€™ï¼ŒæŒ‡å®šäº†è¿™ä¸ªè¿›ç¨‹æ‰€éœ€è¦å¯åŠ¨çš„ä¸€ç»„ Namespace å‚æ•°ï¼Œè¿™æ ·å®¹å™¨å°±åªèƒ½çœ‹åˆ°å½“å‰ Namespace æ‰€é™å®šçš„èµ„æºã€æ–‡ä»¶ã€è®¾å¤‡ã€çŠ¶æ€æˆ–é…ç½®ã€‚\nCgroups ä¸»è¦ä½œç”¨æ˜¯ä¸ºä¸€ä¸ªè¿›ç¨‹ç»„è®¾ç½®èµ„æºä¸Šé™ï¼Œå¦‚ CPUã€å†…å­˜ã€ç£ç›˜å’Œå¸¦å®½ç­‰ã€‚ä¹Ÿå¯ä»¥è®¾ç½®è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œå®¡è®¡ï¼ŒæŒ‚èµ·ï¼Œé‡å¯ç­‰ã€‚\nå› æ­¤ï¼Œä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Docker å®¹å™¨ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå¯ç”¨äº†å¤šä¸ª Namespace çš„åº”ç”¨è¿›ç¨‹ï¼Œè€Œè¿™ä¸ªè¿›ç¨‹èƒ½å¤Ÿä½¿ç”¨çš„èµ„æºæ˜¯ç”± Cgroups æ¥é™åˆ¶ã€‚\næŒ‚è½½åœ¨å®¹å™¨æ ¹ç›®å½•ä¸Šï¼Œç”¨æ¥ä¸ºå®¹å™¨è¿›ç¨‹æä¾›éš”ç¦»åæ‰§è¡Œç¯å¢ƒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå°±æ˜¯å®¹å™¨é•œåƒï¼Œrootfsã€‚\n å¯åŠ¨ Namespace é…ç½® è®¾ç½® Cgroups å‚æ•° åˆ‡æ¢è¿›ç¨‹æ ¹ç›®å½• rootf  docker é•œåƒè®¾è®¡æ—¶ï¼Œå¼•å…¥äº†å±‚ï¼ˆlayerï¼‰ï¼Œç”¨æˆ·åˆ¶ä½œé•œåƒçš„æ¯ä¸€æ­¥æ“ä½œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå±‚ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¢é‡çš„ rootfsã€‚AuFSï¼Œæ‰€ä»¥å°±æœ‰äº†å…±äº«å±‚ï¼Œé•œåƒä¸ç”¨é‚£ä¹ˆå¤§ã€‚\nä¸€ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥é€‰æ‹©åŠ å…¥åˆ°æŸä¸ªè¿›ç¨‹å·²æœ‰çš„ Namespace å½“ä¸­ï¼Œä»è€Œè¾¾åˆ°è¿›å…¥è¿™ä¸ªè¿›ç¨‹æ‰€åœ¨çš„å®¹å™¨çš„ç›®çš„ï¼Œè¿™æ­£æ˜¯ docker exec çš„å®ç°åŸç†ã€‚\nvolume æœºåˆ¶ï¼Œå…è®¸ä½ å°†å®¿ä¸»æœºä¸ŠæŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶ï¼ŒæŒ‚è½½åˆ°å®¹å™¨é‡Œé¢è¿›è¡Œè¯»å–å’Œä¿®æ”¹æ“ä½œã€‚\nä¸»è¦ä¾èµ– Linux ä¾èµ–ä¸‰å¤§æŠ€æœ¯  Namespace Cgroups rootfs  å’Œè™šæ‹Ÿæœºæ¯”è¾ƒ è™šæ‹Ÿæœºæ˜¯é€šè¿‡ç¡¬ä»¶è™šæ‹ŸåŒ–åŠŸèƒ½ï¼Œæ¨¡æ‹Ÿä¸€å¥—æ“ä½œç³»ç»Ÿæ‰€éœ€è¦çš„å„ç§ç¡¬ä»¶ï¼Œå¦‚ CPUã€å†…å­˜ã€IO è®¾å¤‡ç­‰ï¼Œç„¶åå®‰è£…ä¸€ä¸ªæ–°çš„æ“ä½œç³»ç»Ÿã€‚\ndocker æ˜¯åˆ©ç”¨ Linux çš„ Namespace åŸç†ï¼Œå¸®åŠ©ç”¨æˆ·å¯åŠ¨çš„è¿˜æ˜¯ç³»ç»Ÿçš„åº”ç”¨è¿›ç¨‹ï¼Œåªæ˜¯åŠ äº†ä¸€äº›å‚æ•°ï¼Œé™åˆ¶å…¶èƒ½çœ‹åˆ°çš„èµ„æºã€‚å› æ­¤ç›¸å¯¹äºè™šæ‹Ÿæœºèµ„æºæ¶ˆè€—æ›´å°ï¼Œè€Œä¸”è½»é‡çº§ï¼Œæ•æ·é«˜æ€§èƒ½ã€‚","title":"kubernetes"},{"content":"ç›‘è§†å™¨\nç›‘è§†å™¨æä¾›äº†ä¸€ä¸ªå¤–éƒ¨ä¸–ç•Œå’Œå‡½æ•°ä¹‹é—´çš„éæ‰˜ç®¡çš„é€šç”¨æ¥å£ã€‚å®ƒçš„å·¥ä½œæ˜¯æ”¶é›†ä» API ç½‘å…³æ¥çš„ HTTP è¯·æ±‚ï¼Œç„¶åè°ƒç”¨ç¨‹åºã€‚ç›‘è§†å™¨æ˜¯ä¸€ä¸ªå°å‹çš„ Golang æœåŠ¡â€”â€”ä¸‹å›¾å±•ç¤ºäº†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š\n ä¸Šå›¾ï¼šä¸€ä¸ªå°å‹çš„ web æœåŠ¡ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªä¼ å…¥çš„ HTTP è¯·æ±‚åˆ†é…æ‰€éœ€è¦çš„è¿›ç¨‹ã€‚\n æ¯ä¸ªå‡½æ•°éƒ½éœ€è¦åµŒå…¥è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¹¶å°†å…¶ä½œä¸ºENTRYPOINT æˆ– CMDï¼Œå®é™…ä¸Šæ˜¯æŠŠå®ƒä½œä¸ºå®¹å™¨çš„åˆå§‹åŒ–è¿›ç¨‹ã€‚ä¸€æ—¦ä½ çš„è¿›ç¨‹è¢«åˆ›å»ºåˆ†æ”¯ï¼Œç›‘è§†å™¨å°±ä¼šé€šè¿‡stdin ä¼ é€’ HTTP è¯·æ±‚å¹¶ä»stdoutä¸­è¯»å– HTTP å“åº”ã€‚è¿™æ„å‘³ç€ä½ çš„ç¨‹åºæ— éœ€çŸ¥é“ web å’Œ HTTP çš„ä»»ä½•ä¿¡æ¯ã€‚\nè½»æ¾åˆ›å»ºæ–°å‡½æ•° ä» CLI åˆ›å»ºä¸€ä¸ªå‡½æ•°\nåˆ›å»ºå‡½æ•°æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ FaaS CLI å’Œæ¨¡æ¿ã€‚CLI æŠ½è±¡äº†æ‰€æœ‰ Docker çš„çŸ¥è¯†ï¼Œä½¿å¾—ä½ åªéœ€è¦ç¼–å†™æ‰€æ”¯æŒè¯­è¨€çš„ handler æ–‡ä»¶å³å¯ã€‚\n ä½ çš„ç¬¬ä¸€ä¸ªä½¿ç”¨ OpenFaaS çš„æ— æœåŠ¡å™¨ Python å‡½æ•° é˜…è¯»æœ‰å…³ FaaS CLI çš„æ•™ç¨‹  æ·±å…¥ç ”ç©¶ Package your function æ‰“åŒ…ä½ çš„å‡½æ•°\nå¦‚æœä½ ä¸æƒ³ä½¿ç”¨ CLI æˆ–è€…ç°æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶æˆ–é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•å»æ‰“åŒ…å‡½æ•°ï¼š\n ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æˆ–è€…ä¸€ä¸ªæ–°çš„ Docker é•œåƒä½œä¸ºåŸºç¡€é•œåƒ FROM é€šè¿‡curl æˆ– ADD https://ä» Releases é¡µé¢ æ·»åŠ  fwatchdog äºŒè¿›åˆ¶æ–‡ä»¶ ä¸ºæ¯ä¸ªä½ è¦è¿è¡Œçš„å‡½æ•°è®¾ç½® fprocess(å‡½æ•°è¿›ç¨‹) ç¯å¢ƒå˜é‡ Expose port 8080 æš´éœ²ç«¯å£ 8080 Set the CMD to fwatchdog è®¾ç½® CMDä¸ºfwatchdog  ä¸€ä¸ªechoå‡½æ•°çš„ç¤ºä¾‹ Dockerfileï¼š\nFROM alpine:3.7  ADD https://github.com/openfaas/faas/releases/download/0.8.0/fwatchdog /usr/bin RUN chmod +x /usr/bin/fwatchdog  # Define your binary here ENV fprocess=\u0026#34;/bin/cat\u0026#34;  CMD [\u0026#34;fwatchdog\u0026#34;] Implementing a Docker healthcheck å®ç°ä¸€ä¸ª Docker å¥åº·æ£€æŸ¥\nDocke çš„å¥åº·æ£€æŸ¥ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†æ˜¯å®ƒæ˜¯æœ€ä½³å®è·µã€‚è¿™ä¼šç¡®ä¿ç›‘è§†å™¨å·²ç»åœ¨ API ç½‘å…³è½¬å‘è¯·æ±‚ä¹‹å‰å‡†å¤‡å¥½æ¥æ”¶è¯·æ±‚ã€‚å¦‚æœå‡½æ•°æˆ–è€…ç›‘è§†å™¨é‡åˆ°ä¸€ä¸ªä¸å¯æ¢å¤çš„é—®é¢˜ï¼ŒSwarm ä¹Ÿä¼šé‡å¯å®¹å™¨ã€‚\nHere is an example of the echo function implementing a healthcheck with a 5-second checking interval.\nä¸‹é¢æ˜¯å®ç°äº†ä¸€ä¸ªå…·æœ‰ 5 ç§’é—´éš”çš„å¥åº·æ£€æŸ¥çš„echoå‡½æ•°ç¤ºä¾‹ï¼š\nFROM functions/alpine  ENV fprocess=\u0026#34;cat /etc/hostname\u0026#34;  HEALTHCHECK --interval=5s CMD [ -e /tmp/.lock ] || exit 1 ç›‘è§†å™¨è¿›ç¨‹æ—©å¯åŠ¨å†…éƒ¨ Golang HTTP æœåŠ¡çš„æ—¶å€™ä¼šåœ¨ /tmp/ä¸‹é¢åˆ›å»ºä¸€ä¸ª.lock æ–‡ä»¶ã€‚[ -e file_name ]shell å‘½ä»¤å¯ä»¥æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚åœ¨ Windows å®¹å™¨ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åˆæ³•çš„è·¯å¾„ï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€è¦è®¾ç½®suppress_lock ç¯å¢ƒå˜é‡ã€‚\næœ‰å…³å¥åº·æ£€æŸ¥ï¼Œè¯·é˜…è¯»æˆ‘çš„ Docker Swarm æ•™ç¨‹ï¼š\n 10 åˆ†é’Ÿå†…è¯•ç”¨ Docker çš„å¥åº·æ£€æŸ¥  ç¯å¢ƒå˜é‡é‡è½½:\nç›‘è§†å™¨å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ¥é…ç½®ï¼Œä½ å¿…é¡»å§‹ç»ˆæŒ‡å®šä¸€ä¸ªfprocess å˜é‡\né«˜çº§/è°ƒæ•´ (æ–°)â€”â€”å­ç›‘è§†å™¨å’Œ HTTP æ¨¡å¼  éƒ¨åˆ†çš„ç›‘è§†å™¨  ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹åˆ†æ”¯å…·æœ‰è¿›ç¨‹éš”ç¦»ï¼Œå¯ç§»æ¤å’Œç®€å•çš„ä¼˜ç‚¹ã€‚ä»»ä½•è¿›ç¨‹éƒ½å¯ä»¥åœ¨æ²¡æœ‰ä»»ä½•é™„åŠ ä»£ç çš„æƒ…å†µä¸‹å˜æˆä¸€ä¸ªå‡½æ•°ã€‚of-watchdog å¯å’Œ HTTP æ¨¡å¼æ˜¯ä¸€ç§ä¼˜åŒ–ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ‰€æœ‰è¯·æ±‚ä¹‹é—´ç»´æŠ¤ä¸€ä¸ªå•ä¸€çš„è¿›ç¨‹ã€‚\næ–°ç‰ˆæœ¬çš„ç›‘è§†å™¨æ­£åœ¨openfaas-incubator/of-watchdogä¸Šæµ‹è¯•ã€‚\nè¿™ç§é‡å†™ä¸»è¦æ˜¯ç”Ÿæˆä¸€ä¸ªå¯ä»¥æŒç»­ç»´æŠ¤çš„ç»“æ„ã€‚å®ƒå°†ä¼šæ›¿ä»£ç°æœ‰çš„ç›‘è§†å™¨ï¼Œä¹Ÿä¼šæœ‰äºŒè¿›åˆ¶çš„é‡Šæ”¾ç‰ˆã€‚\nä½¿ç”¨ HTTP å¤´ HTTP çš„å¤´å’Œå…¶ä»–è¯·æ±‚ä¿¡æ¯ä»¥ä¸‹é¢çš„æ ¼å¼æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼š\nX-Forwarded-By`å¤´å˜æˆäº†`Http_X_Forwarded_By  Http_Method - GET/POST etc Http_Method - GET/POST ç­‰ç­‰ Http_Query - QueryString value Http_Query - æŸ¥è¯¢å­—ç¬¦ä¸²çš„å€¼ Http_ContentLength - gives the total content-length of the incoming HTTP request received by the watchdog. Http_ContentLength - ç›‘è§†å™¨æ”¶åˆ°çš„ HTTP è¯·æ±‚çš„å†…å®¹é•¿åº¦ã€‚   é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡cgi_headers ç¯å¢ƒå˜é‡å¯ç”¨è¯¥è¡Œä¸ºã€‚\n ä»¥ä¸‹æ˜¯å¸¦æœ‰é™„åŠ å¤´å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²çš„ POST è¯·æ±‚çš„ç¤ºä¾‹ï¼š\n$ cgi_headers=true fprocess=env ./watchdog \u0026amp; 2017/06/23 17:02:58 Writing lock-file to: /tmp/.lock  $ curl \u0026#34;localhost:8080?q=serverless\u0026amp;page=1\u0026#34; -X POST -H X-Forwarded-By:http://my.vpn.com å¦‚æœä½ å† Linux ç³»ç»Ÿä¸‹è®¾ç½®äº†fprocess åˆ° envä¸­ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š\nHttp_User_Agent=curl/7.43.0 Http_Accept=*/* Http_X_Forwarded_By=http://my.vpn.com Http_Method=POST Http_Query=q=serverless\u0026amp;page=1 ä¹Ÿå¯ä»¥ä½¿ç”¨GETè¯·æ±‚ï¼š\ncurl \u0026#34;localhost:8080?action=quote\u0026amp;qty=1\u0026amp;productId=105\u0026#34; ç›‘è§†å™¨çš„è¾“å‡ºå¦‚ä¸‹ï¼š\nHttp_User_Agent=curl/7.43.0 Http_Accept=*/* Http_Method=GET Http_Query=action=quote\u0026amp;qty=1\u0026amp;productId=105 ç°åœ¨å°±å¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨ HTTP çŠ¶æ€æ¥åšå†³ç­–äº†ã€‚\nHTTP æ–¹æ³• ç›‘è§†å™¨æ”¯æŒçš„ HTTP æ–¹æ³•æœ‰ï¼š\nå¸¦æœ‰è¯·æ±‚ä½“çš„ï¼š\n POST, PUT, DELETE, UPDATE  ä¸å¸¦è¯·æ±‚ä½“çš„ï¼š\n GET   API ç½‘å…³ç°åœ¨æ”¯æŒå‡½æ•°çš„ POST è·¯ç”±ã€‚\n è¯·æ±‚å“åº”çš„å†…å®¹ç±»å‹ é»˜è®¤æƒ…å†µä¸‹ï¼Œç›‘è§†å™¨ä¼šåŒ¹é…å®¢æˆ·ç«¯çš„\u0026quot;Content-Type\u0026quot;ã€‚\n å¦‚æœå®¢æˆ·ç«¯å‘é€ Content-Type ä¸º application/json çš„ json å½¢å¼çš„ post è¯·æ±‚ï¼Œå°†ä¼šåœ¨å“åº”çš„æ—¶å€™è‡ªåŠ¨åŒ¹é…ã€‚ å¦‚æœå®¢æˆ·ç«¯å‘é€ Content-Type ä¸º text/plain çš„ json å½¢å¼çš„ post è¯·æ±‚ï¼Œå“åº”ä¹Ÿä¼šè‡ªåŠ¨åŒ¹é…ã€‚  è‹¥è¦é‡è½½æ‰€æœ‰å“åº”çš„ Content-Type ï¼Œéœ€è¦è®¾ç½®content_type ç¯å¢ƒå˜é‡ã€‚\nI don\u0026rsquo;t want to use the watchdog æˆ‘ä¸æƒ³ä½¿ç”¨ç›‘è§†å™¨ è¿™ç§æ¡ˆä¾‹æ˜¯ OpenFaaS æ‰€ä¸æ”¯æŒçš„ï¼Œä½†æ˜¯å¦‚æœä½ çš„å®¹å™¨ç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼Œé‚£ä¹ˆ OpenFaaS çš„ç½‘å…³å’Œå…¶ä»–å·¥å…·ä¹Ÿä¼šç®¡ç†å’Œä¼¸ç¼©æœåŠ¡ã€‚\nä½ éœ€è¦æä¾›ä¸€ä¸ªé”æ–‡ä»¶ /tmp/.lockï¼Œä»¥ä¾¿ä¸šåŠ¡æµç¨‹ç³»ç»Ÿå¯ä»¥åœ¨å®¹å™¨ä¸­è¿è¡Œå¥åº·æ£€æŸ¥ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ swarmï¼Œé‚£ä¹ˆè¯·ç¡®ä¿åœ¨ Dockerfile ä¸­æä¾›HEALTHCHECKæŒ‡ä»¤â€”â€”åœ¨ faaså­˜å‚¨åº“ä¸­æœ‰ç¤ºä¾‹ã€‚\n åœ¨ HTTP ä¹‹ä¸Šæš´éœ² TCP ç«¯å£ 8080 åˆ›å»º/tmp/.lock æ–‡ä»¶ï¼Œæˆ–è€…åœ¨å“åº”æ“ä½œ tempdir ç³»ç»Ÿè°ƒç”¨çš„ä»»ä½•ä½ç½®ã€‚  è°ƒæ•´è‡ªåŠ¨ä¼¸ç¼© è‡ªåŠ¨ä¼¸ç¼©å¼ä» 1 ä¸ªå‰¯æœ¬å¼€å§‹ï¼Œä»¥ 5 ä¸ªä½ä¸€ä¸ªå•ä½è¿›è¡Œå‡çº§ï¼š\n 1-\u0026gt;5 5-\u0026gt;10 10-\u0026gt;15 15-\u0026gt;20  ä½ å¯ä»¥é€šè¿‡æ ‡ç­¾æ¥è¦†ç›–ä¸€ä¸ªå‡½æ•° minimum å’Œ maximum ã€‚\nå¦‚æœè¦åœ¨ 2 åˆ° 15 ä¹‹é—´çš„è¯ï¼Œè¯·åœ¨éƒ¨ç½²çš„æ—¶å€™é…ç½®ä»¥ä¸‹æ ‡ç­¾ï¼š\ncom.openfaas.scale.min: \u0026#34;2\u0026#34; com.openfaas.scale.max: \u0026#34;15\u0026#34; è¿™äº›æ ‡ç­¾æ˜¯å¯é€‰çš„\nç¦ç”¨è‡ªåŠ¨ä¼¸ç¼©\nå¦‚æœè¦ç¦ç”¨æŸä¸ªå‡½æ•°çš„è‡ªåŠ¨ä¼¸ç¼©ï¼Œå°†æœ€å°å’Œæœ€å¤§çš„å‰¯æœ¬æ•°è®¾ç½®ä¸ºç›¸åŒçš„å€¼ï¼Œå³â€œ1â€ã€‚\nåŒæ ·ä¹Ÿå¯ä»¥åˆ é™¤ AlertManagerã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/watchdog/","summary":"ç›‘è§†å™¨\nç›‘è§†å™¨æä¾›äº†ä¸€ä¸ªå¤–éƒ¨ä¸–ç•Œå’Œå‡½æ•°ä¹‹é—´çš„éæ‰˜ç®¡çš„é€šç”¨æ¥å£ã€‚å®ƒçš„å·¥ä½œæ˜¯æ”¶é›†ä» API ç½‘å…³æ¥çš„ HTTP è¯·æ±‚ï¼Œç„¶åè°ƒç”¨ç¨‹åºã€‚ç›‘è§†å™¨æ˜¯ä¸€ä¸ªå°å‹çš„ Golang æœåŠ¡â€”â€”ä¸‹å›¾å±•ç¤ºäº†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š\n ä¸Šå›¾ï¼šä¸€ä¸ªå°å‹çš„ web æœåŠ¡ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªä¼ å…¥çš„ HTTP è¯·æ±‚åˆ†é…æ‰€éœ€è¦çš„è¿›ç¨‹ã€‚\n æ¯ä¸ªå‡½æ•°éƒ½éœ€è¦åµŒå…¥è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¹¶å°†å…¶ä½œä¸ºENTRYPOINT æˆ– CMDï¼Œå®é™…ä¸Šæ˜¯æŠŠå®ƒä½œä¸ºå®¹å™¨çš„åˆå§‹åŒ–è¿›ç¨‹ã€‚ä¸€æ—¦ä½ çš„è¿›ç¨‹è¢«åˆ›å»ºåˆ†æ”¯ï¼Œç›‘è§†å™¨å°±ä¼šé€šè¿‡stdin ä¼ é€’ HTTP è¯·æ±‚å¹¶ä»stdoutä¸­è¯»å– HTTP å“åº”ã€‚è¿™æ„å‘³ç€ä½ çš„ç¨‹åºæ— éœ€çŸ¥é“ web å’Œ HTTP çš„ä»»ä½•ä¿¡æ¯ã€‚\nè½»æ¾åˆ›å»ºæ–°å‡½æ•° ä» CLI åˆ›å»ºä¸€ä¸ªå‡½æ•°\nåˆ›å»ºå‡½æ•°æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ FaaS CLI å’Œæ¨¡æ¿ã€‚CLI æŠ½è±¡äº†æ‰€æœ‰ Docker çš„çŸ¥è¯†ï¼Œä½¿å¾—ä½ åªéœ€è¦ç¼–å†™æ‰€æ”¯æŒè¯­è¨€çš„ handler æ–‡ä»¶å³å¯ã€‚\n ä½ çš„ç¬¬ä¸€ä¸ªä½¿ç”¨ OpenFaaS çš„æ— æœåŠ¡å™¨ Python å‡½æ•° é˜…è¯»æœ‰å…³ FaaS CLI çš„æ•™ç¨‹  æ·±å…¥ç ”ç©¶ Package your function æ‰“åŒ…ä½ çš„å‡½æ•°\nå¦‚æœä½ ä¸æƒ³ä½¿ç”¨ CLI æˆ–è€…ç°æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶æˆ–é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•å»æ‰“åŒ…å‡½æ•°ï¼š\n ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æˆ–è€…ä¸€ä¸ªæ–°çš„ Docker é•œåƒä½œä¸ºåŸºç¡€é•œåƒ FROM é€šè¿‡curl æˆ– ADD https://ä» Releases é¡µé¢ æ·»åŠ  fwatchdog äºŒè¿›åˆ¶æ–‡ä»¶ ä¸ºæ¯ä¸ªä½ è¦è¿è¡Œçš„å‡½æ•°è®¾ç½® fprocess(å‡½æ•°è¿›ç¨‹) ç¯å¢ƒå˜é‡ Expose port 8080 æš´éœ²ç«¯å£ 8080 Set the CMD to fwatchdog è®¾ç½® CMDä¸ºfwatchdog  ä¸€ä¸ªechoå‡½æ•°çš„ç¤ºä¾‹ Dockerfileï¼š","title":"watchdog"},{"content":"queue-worker æºç åˆ†æ å¼‚æ­¥å‡½æ•°å’ŒåŒæ­¥å‡½æ•° åœ¨ OpenFaaS ä¸­åŒæ­¥è°ƒç”¨å‡½æ•°æ—¶ï¼Œå°†ä¼šè¿æ¥åˆ°ç½‘å…³ï¼Œç›´åˆ°å‡½æ•°æˆåŠŸè¿”å›æ‰ä¼šå…³é—­è¿æ¥ã€‚åŒæ­¥è°ƒç”¨æ˜¯é˜»å¡çš„ã€‚\n ç½‘å…³çš„è·¯ç”±æ˜¯ï¼š/function/\u0026lt;function_name\u0026gt; å¿…é¡»ç­‰å¾… åœ¨ç»“æŸçš„æ—¶å€™å¾—åˆ°ç»“æœ æ˜ç¡®çŸ¥é“æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥  å¼‚æ­¥å‡½æ•°ä¼šæœ‰ä¸€äº›å·®å¼‚ï¼š\n ç½‘å…³çš„è·¯ç”±æ˜¯ï¼š/async-function/\u0026lt;function_name\u0026gt; å®¢æˆ·ç«¯è·å¾— 202 çš„å³æ—¶å“åº”ç  ä» queue-worker ä¸­è°ƒç”¨å‡½æ•° é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æœæ˜¯è¢«ä¸¢å¼ƒçš„ã€‚  æŸ¥çœ‹ queue-worker çš„æ—¥å¿— docker service logs -f func_queue-worker åˆ©ç”¨ requestbin å’Œ X-Callback-Url è·å–å¼‚æ­¥å‡½æ•°çš„ç»“æœ å¦‚æœéœ€è¦è·å¾—å¼‚æ­¥å‡½æ•°çš„ç»“æœï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š\n æ›´æ”¹ä»£ç ï¼Œå°†ç»“æœè¿”å›ç»™ç«¯ç‚¹æˆ–è€…æ¶ˆæ¯ç³»ç»Ÿ åˆ©ç”¨å†…ç½®çš„å›è°ƒ å†…ç½®çš„å›è°ƒå°†ä¼šå…è®¸å‡½æ•°æä¾›ä¸€ä¸ª urlï¼Œqueue-worker ä¼šæŠ¥å‘Šå‡½æ•°çš„æˆåŠŸæˆ–å¤±è´¥ã€‚ requestbin ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ binï¼Œè¿™æ˜¯äº’è”ç½‘çš„ä¸€ä¸ª url åœ°å€ï¼Œå¯ä»¥ä»è¿™é‡Œè·å–å‡½æ•°çš„ç»“æœã€‚  æºç åˆ†æ ä¾èµ–é¡¹ github.com/nats-io/go-nats-streaming github.com/nats-io/go-nats  github.com/openfaas/faas go-nats å’Œ go-nats-streaming æ˜¯ nats å’Œ nats-streaming çš„ go ç‰ˆæœ¬çš„å®¢æˆ·ç«¯ã€‚\nfaas è¿™ä¸ªä¾èµ–å…¶å®æ˜¯åªç”¨åˆ°äº† queue åŒ…ä¸‹é¢çš„ types.go æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯å®šä¹‰äº†å¼‚æ­¥è¯·æ±‚çš„ Request ç»“æ„ä½“å’Œä¸€ä¸ª CanQueueRequests æ¥å£ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š\npackage queue  import \u0026#34;net/url\u0026#34; import \u0026#34;net/http\u0026#34;  // Request for asynchronous processing type Request struct {  Header http.Header  Body []byte  Method string  QueryString string  Function string  CallbackURL *url.URL `json:\u0026#34;CallbackUrl\u0026#34;` }  // CanQueueRequests can take on asynchronous requests type CanQueueRequests interface {  Queue(req *Request) error } ä»è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥æ˜ç™½ä½œè€…çš„è®¾è®¡æ€è·¯ï¼Œåªè¦æ˜¯å®ç°äº†è¿™ä¸ª CanQueueRequests æ¥å£ï¼Œå°±å¯ä»¥ä½œä¸ºä¸€ä¸ª queue-workerã€‚\næ¥å£å®ç°ç±» NatsQueue æ¥å£çš„å®ç°ç±» NatsQueue æ˜¯åœ¨ handler åŒ…é‡Œã€‚å®ƒçš„å±æ€§éƒ½æ˜¯ nats ä¸­å¸¸ç”¨åˆ°çš„ï¼ŒåŒ…æ‹¬ clientIdï¼ŒclusterIdï¼Œurlï¼Œè¿æ¥ï¼Œä¸»é¢˜ç­‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n// NatsQueue queue for work type NatsQueue struct {  nc stan.Conn // natsçš„è¿æ¥  ClientID string // natsçš„clientId  ClusterID string // natsçš„clusterId  NATSURL string // natsçš„URL  Topic string // ä¸»é¢˜ } å®ƒçš„ queue æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä¸»è¦åšäº†ä¸¤ä»¶äº‹å„¿ï¼š\n è§£æä¼ å…¥çš„ Request å¯¹è±¡ï¼Œå¹¶è½¬ä¸º json å¯¹è±¡ out å°† out å‘å¸ƒåˆ°é˜Ÿåˆ—é‡Œ  // Queue request for processing func (q *NatsQueue) Queue(req *queue.Request) error {  var err error   fmt.Printf(\u0026#34;NatsQueue - submitting request: %s.\\n\u0026#34;, req.Function)   out, err := json.Marshal(req)  if err != nil {  log.Println(err)  }   err = q.nc.Publish(q.Topic, out)   return err } go è¯­è¨€æ²¡æœ‰æ„é€ æ–¹æ³•ï¼Œæ‰€ä»¥ NatsQueue è¿˜ç”¨äºåˆ›å»º NatsQueue çš„å®ä¾‹çš„æ–¹æ³•ï¼Œè¿™é‡Œå°±æˆä¸ºå·¥å‚æ–¹æ³•ã€‚è¿™ä¸ªå·¥å‚æ–¹æ³•ä¸»è¦å°±æ˜¯ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ç¯å¢ƒå˜é‡çš„å€¼ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª nats çš„è¿æ¥ï¼Œç›¸å½“äºç»™ NatsQueue çš„å¯¹è±¡çš„æ¯ä¸ªå±æ€§è¿›è¡Œèµ‹å€¼ã€‚\nfunc CreateNatsQueue(address string, port int, clientConfig NatsConfig) (*NatsQueue, error) {  queue1 := NatsQueue{}  var err error  natsURL := fmt.Sprintf(\u0026#34;nats://%s:%d\u0026#34;, address, port)  log.Printf(\u0026#34;Opening connection to %s\\n\u0026#34;, natsURL)   clientID := clientConfig.GetClientID()  clusterID := \u0026#34;faas-cluster\u0026#34;   nc, err := stan.Connect(clusterID, clientID, stan.NatsURL(natsURL))  queue1.nc = nc   return \u0026amp;queue1, err } è¿™ä¸ª CreateNatsQueue æ–¹æ³•æ˜¯ Gateway é¡¹ç›®ä¸­è¿›è¡Œè°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Gateway é¡¹ç›®çš„ main.go ä¸­æ‰¾åˆ°ï¼Œå¦‚æœ Gateway çš„é…ç½®å¼€å¯äº†å¼‚æ­¥å‡½æ•°æ”¯æŒï¼Œå°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ª NatsQueue å¯¹è±¡ï¼Œç„¶åæŠŠå‡½æ•°æ”¾åˆ°é˜Ÿåˆ—ä¸­ï¼Œè¿™é‡Œå°±ä¸æ·±å…¥è®²è§£ï¼š\nif config.UseNATS() {  log.Println(\u0026#34;Async enabled: Using NATS Streaming.\u0026#34;)  natsQueue, queueErr := natsHandler.CreateNatsQueue(*config.NATSAddress, *config.NATSPort, natsHandler.DefaultNatsConfig{})  if queueErr != nil {  log.Fatalln(queueErr)  }   faasHandlers.QueuedProxy = handlers.MakeQueuedProxy(metricsOptions, true, natsQueue)  faasHandlers.AsyncReport = handlers.MakeAsyncReport(metricsOptions) } åˆ°è¿™é‡Œï¼Œæˆ‘ç›¸ä¿¡è¯»è€…ä¹Ÿäº†è§£åˆ°ï¼ŒGateway å…¶å®å°±æ˜¯ä¸€ä¸ªå‘å¸ƒè€…ï¼Œå°†å¼‚æ­¥è¯·æ±‚æ‰”åˆ°é˜Ÿåˆ—é‡Œã€‚æ¥ä¸‹æ¥è‚¯å®šè¦æœ‰ä¸€ä¸ªè®¢é˜…è€…å°†è¯·æ±‚æ¶ˆè´¹å¤„ç†ã€‚\nè®¢é˜…è€…å¤„ç† æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œnats streaming çš„è®¢é˜…è€…è®¢é˜…åˆ°æ¶ˆæ¯ä¹‹åï¼Œä¼šæŠŠæ¶ˆæ¯æ‰”ç»™ä¸€ä¸ªå›è°ƒå‡½æ•°å»å¤„ç†ã€‚queue-worker çš„è®¢é˜…è€…å®ç°ä¹Ÿæ˜¯è¿™æ ·ï¼Œå®ƒçš„å®ç°å¹¶ä¸å¤æ‚ï¼Œæ‰€æœ‰é€»è¾‘éƒ½åœ¨ main.go çš„ä¸­ã€‚\næˆ‘ä»¬å…ˆçœ‹å›è°ƒå‡½æ•° mcb éƒ½åšäº†ä»€ä¹ˆï¼š\n é¦–å…ˆå½“ç„¶æ˜¯å°†æ¶ˆæ¯ä½“ååºåˆ—åŒ–æˆä¸Šé¢è¯´åˆ°çš„ç”¨äºå¼‚æ­¥å¤„ç†çš„ Request å¯¹è±¡ã€‚ æ„é€  http è¯·æ±‚çš„ url å’Œ querystringï¼Œurl çš„æ ¼å¼å¦‚ä¸‹ï¼š functionURL := fmt.Sprintf(\u0026ldquo;http://%s%s:8080/%s\u0026rdquo;, req.Function, config.FunctionSuffix, queryString) è®¾ç½® http çš„ headerï¼Œå¹¶ä»¥ post çš„å½¢å¼å‘ functionURL å‘èµ·è¯·æ±‚ã€‚ å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œè®¾ç½®è¿”å›çŠ¶æ€ç ä¸ºhttp.StatusServiceUnavailableï¼Œå¹¶åˆ†åˆ«å¤„ç† CallbackURL æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚ å¦‚æœè¯·æ±‚æˆåŠŸï¼ŒåŒæ ·ä¹Ÿæ˜¯è¦åˆ†åˆ«å¤„ç† CallbackURL æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚  å½“ç„¶åœ¨è¿™ä¸ª callback ä¸­ä¼šæ ¹æ®ä¸€äº›ç¯å¢ƒå˜é‡çš„å­˜åœ¨ï¼Œé€‰æ‹©æ˜¯å¦æ‰“å°æ—¥å¿—å‡ºæ¥ã€‚\nmcb := func(msg *stan.Msg) {  i++   printMsg(msg, i)   started := time.Now()   req := queue.Request{}  unmarshalErr := json.Unmarshal(msg.Data, \u0026amp;req)   if unmarshalErr != nil {  log.Printf(\u0026#34;Unmarshal error: %s with data %s\u0026#34;, unmarshalErr, msg.Data)  return  }   fmt.Printf(\u0026#34;Request for %s.\\n\u0026#34;, req.Function)   if config.DebugPrintBody {  fmt.Println(string(req.Body))  }   queryString := \u0026#34;\u0026#34;  if len(req.QueryString) \u0026gt; 0 {  queryString = fmt.Sprintf(\u0026#34;?%s\u0026#34;, strings.TrimLeft(req.QueryString, \u0026#34;?\u0026#34;))  }   functionURL := fmt.Sprintf(\u0026#34;http://%s%s:8080/%s\u0026#34;, req.Function, config.FunctionSuffix, queryString)   request, err := http.NewRequest(http.MethodPost, functionURL, bytes.NewReader(req.Body))  defer request.Body.Close()   copyHeaders(request.Header, \u0026amp;req.Header)   res, err := client.Do(request)  var status int  var functionResult []byte   if err != nil {  status = http.StatusServiceUnavailable   log.Println(err)  timeTaken := time.Since(started).Seconds()   if req.CallbackURL != nil {  log.Printf(\u0026#34;Callback to: %s\\n\u0026#34;, req.CallbackURL.String())   resultStatusCode, resultErr := postResult(\u0026amp;client, res, functionResult, req.CallbackURL.String())  if resultErr != nil {  log.Println(resultErr)  } else {  log.Printf(\u0026#34;Posted result: %d\u0026#34;, resultStatusCode)  }  }   statusCode, reportErr := postReport(\u0026amp;client, req.Function, status, timeTaken, config.GatewayAddress)  if reportErr != nil {  log.Println(reportErr)  } else {  log.Printf(\u0026#34;Posting report - %d\\n\u0026#34;, statusCode)  }  return  }   if res.Body != nil {  defer res.Body.Close()   resData, err := ioutil.ReadAll(res.Body)  functionResult = resData   if err != nil {  log.Println(err)  }   if config.WriteDebug {  fmt.Println(string(functionResult))  } else {  fmt.Printf(\u0026#34;Wrote %d Bytes\\n\u0026#34;, len(string(functionResult)))  }  }   timeTaken := time.Since(started).Seconds()   fmt.Println(res.Status)   if req.CallbackURL != nil {  log.Printf(\u0026#34;Callback to: %s\\n\u0026#34;, req.CallbackURL.String())  resultStatusCode, resultErr := postResult(\u0026amp;client, res, functionResult, req.CallbackURL.String())  if resultErr != nil {  log.Println(resultErr)  } else {  log.Printf(\u0026#34;Posted result: %d\u0026#34;, resultStatusCode)  }  }   statusCode, reportErr := postReport(\u0026amp;client, req.Function, res.StatusCode, timeTaken, config.GatewayAddress)   if reportErr != nil {  log.Println(reportErr)  } else {  log.Printf(\u0026#34;Posting report - %d\\n\u0026#34;, statusCode)  } } postResultå‡½æ•°æ˜¯ç”¨æ¥å¤„ç† callbackURL å­˜åœ¨çš„æƒ…å†µï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­å°†ç»“æœï¼Œä»¥ post è¯·æ±‚è°ƒç”¨ callbackURL å‘é€å‡ºå»ã€‚\npostReportå‡½æ•°ç”¨æ¥å¤„ç† callbackURL ä¸å­˜åœ¨çš„æƒ…å†µï¼Œè¿™é‡Œæ˜¯å°†ç»“æœå‘åˆ° Gateway ç½‘å…³çš„\u0026quot;http://\u0026quot; + gatewayAddress + \u0026quot;:8088/system/async-report\u0026quot;ä¸­ï¼Œæˆ‘ä»¬ä¹‹åå°±å¯ä»¥ä»è¿™ä¸ª url é‡ŒæŸ¥è¯¢å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œç»“æœäº†ã€‚\næ€»ç»“ æœ¬æ–‡ä¸»è¦åˆ†æäº† NATS Streaming ç‰ˆæœ¬çš„ queue worker çš„å®ç°ï¼Œé€šè¿‡åˆ†ææºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ° OpenFaaS åœ¨æ¶æ„çš„è®¾è®¡å¾ˆæœ‰è€ƒç©¶ï¼Œå……åˆ†çš„è€ƒè™‘åˆ°äº†å¯æ‰©å±•æ€§ï¼Œé€šè¿‡å®šä¹‰æ¥å£è§„èŒƒï¼Œä½¿å¾—å¼€å‘è€…å¾ˆå®¹æ˜“å®ç°è‡ªå®šä¹‰ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/queue-worker/","summary":"queue-worker æºç åˆ†æ å¼‚æ­¥å‡½æ•°å’ŒåŒæ­¥å‡½æ•° åœ¨ OpenFaaS ä¸­åŒæ­¥è°ƒç”¨å‡½æ•°æ—¶ï¼Œå°†ä¼šè¿æ¥åˆ°ç½‘å…³ï¼Œç›´åˆ°å‡½æ•°æˆåŠŸè¿”å›æ‰ä¼šå…³é—­è¿æ¥ã€‚åŒæ­¥è°ƒç”¨æ˜¯é˜»å¡çš„ã€‚\n ç½‘å…³çš„è·¯ç”±æ˜¯ï¼š/function/\u0026lt;function_name\u0026gt; å¿…é¡»ç­‰å¾… åœ¨ç»“æŸçš„æ—¶å€™å¾—åˆ°ç»“æœ æ˜ç¡®çŸ¥é“æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥  å¼‚æ­¥å‡½æ•°ä¼šæœ‰ä¸€äº›å·®å¼‚ï¼š\n ç½‘å…³çš„è·¯ç”±æ˜¯ï¼š/async-function/\u0026lt;function_name\u0026gt; å®¢æˆ·ç«¯è·å¾— 202 çš„å³æ—¶å“åº”ç  ä» queue-worker ä¸­è°ƒç”¨å‡½æ•° é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æœæ˜¯è¢«ä¸¢å¼ƒçš„ã€‚  æŸ¥çœ‹ queue-worker çš„æ—¥å¿— docker service logs -f func_queue-worker åˆ©ç”¨ requestbin å’Œ X-Callback-Url è·å–å¼‚æ­¥å‡½æ•°çš„ç»“æœ å¦‚æœéœ€è¦è·å¾—å¼‚æ­¥å‡½æ•°çš„ç»“æœï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š\n æ›´æ”¹ä»£ç ï¼Œå°†ç»“æœè¿”å›ç»™ç«¯ç‚¹æˆ–è€…æ¶ˆæ¯ç³»ç»Ÿ åˆ©ç”¨å†…ç½®çš„å›è°ƒ å†…ç½®çš„å›è°ƒå°†ä¼šå…è®¸å‡½æ•°æä¾›ä¸€ä¸ª urlï¼Œqueue-worker ä¼šæŠ¥å‘Šå‡½æ•°çš„æˆåŠŸæˆ–å¤±è´¥ã€‚ requestbin ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ binï¼Œè¿™æ˜¯äº’è”ç½‘çš„ä¸€ä¸ª url åœ°å€ï¼Œå¯ä»¥ä»è¿™é‡Œè·å–å‡½æ•°çš„ç»“æœã€‚  æºç åˆ†æ ä¾èµ–é¡¹ github.com/nats-io/go-nats-streaming github.com/nats-io/go-nats  github.com/openfaas/faas go-nats å’Œ go-nats-streaming æ˜¯ nats å’Œ nats-streaming çš„ go ç‰ˆæœ¬çš„å®¢æˆ·ç«¯ã€‚\nfaas è¿™ä¸ªä¾èµ–å…¶å®æ˜¯åªç”¨åˆ°äº† queue åŒ…ä¸‹é¢çš„ types.go æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯å®šä¹‰äº†å¼‚æ­¥è¯·æ±‚çš„ Request ç»“æ„ä½“å’Œä¸€ä¸ª CanQueueRequests æ¥å£ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š","title":"queue-worker"},{"content":" æœ¬æ–‡æ˜¯é˜…è¯»http://www.netkiller.cn/blockchain/ch01s10.html ä¸Šçš„ä¸€äº›ç¬”è®°ã€‚\n ç†è§£åŒºå—é“¾çš„åˆ†å¸ƒå¼è®°è´¦ http://www.netkiller.cn/blockchain/ch01s10.html\nåŒºå—é“¾ä¸­æåˆ°çš„è´¦æœ¬ï¼Œè®°è´¦ç­‰è¯æ±‡æ˜¯å’Œä¼šè®¡æ— å…³çš„è¯æ±‡ã€‚\næˆ‘ä»¬ä¼ ç»Ÿç†è§£çš„è´¦æœ¬æ˜¯ä¸€ä¸ªäºŒç»´çš„è¡¨æ ¼ï¼Œè®°å½•äº†æŸå¹´æŸæœˆæŸæ—¥çš„è´¹ç”¨ï¼š\n   æ—¶é—´ ç”¨é€” é‡‘é¢     2018-08-23 å€Ÿ 100   2018-08-22 è¿˜ 200   2018-08-21 å€Ÿ 50   2018-08-20 è¿˜ 1000    å¦‚æœè´¦ç›®æ¯”è¾ƒå¤šï¼Œå¯ä»¥æ‹†è´¦ï¼Œå°†ä¸åŒåˆ†ç±»çš„è´¦ç›®æ”¾åœ¨ç‰¹å®šçš„è´¦æœ¬ä¸­ï¼Œè€Œä¸”äºŒç»´è¡¨æ ¼è¿˜å¯ä»¥è®¾ç½®ç´¢å¼•ç­‰ï¼Œå¿«é€Ÿæ‰¾åˆ°ä¸€ç¬”äº¤æ˜“ã€‚\nä½†æ˜¯åŒºå—é“¾çš„è®°è´¦å½¢å¼æ˜¯ï¼š\nå¯ä»¥å‘ç°ï¼ŒåŒºå—é“¾çš„è¿™ç§è®°è´¦æ–¹å¼æ˜¯åšäº†è¡Œåˆ—çŸ©é˜µè½¬æ¢ï¼ŒèŠ‚ç‚¹ä¹‹é—´æ”¶å°¾ç›¸äº’è¿æ¥ï¼Œæˆä¸ºé“¾å¼ç»“æ„ï¼Œæ‰€æœ‰çš„è´¦ç›®éƒ½åœ¨ä¸€æ¡é“¾ä¸Šã€‚\næ‰€è°“åˆ†å¸ƒå¼è®°è´¦ï¼Œå…¶å®å°±æ˜¯ä¸Šè¿°é“¾çŠ¶çš„æ•°æ®ç»“æ„ä¿å­˜åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šï¼Œå½¢æˆåˆ†å¸ƒå¼é›†ç¾¤ã€‚\nä¹‹æ‰€ä»¥é‡‡ç”¨åŒºå—é“¾æ¥åšåˆ†å¸ƒå¼è®°è´¦ï¼Œä¸»è¦æ˜¯åŒºå—é“¾æœ‰å¦‚ä¸‹å¥½å¤„ï¼š\n  å»ä¸­å¿ƒåŒ–\nä¼ ç»Ÿçš„æ•°æ®åº“å­˜å‚¨æ˜¯ä¸­å¿ƒåŒ–çš„ï¼Œé€šè¿‡æš´éœ² ip åœ°å€å’Œç«¯å£å·æä¾›æœåŠ¡ï¼Œåæ¥åˆ†å¸ƒå¼è¿›ç¾¤åŒ–ä¹‹åï¼Œå‡ºç°äº†ä¸»ä¸»ä»æ¶æ„ç­‰ã€‚\nä¸æ•°æ®åº“ç›¸æ¯”ï¼ŒåŒºå—é“¾æ˜¯å¤šä¸»æ¶æ„ï¼Œè€Œä¸”å®ç°æ›´ä¸ºå¤æ‚ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¹‹é—´ä¸æ˜¯ç®€å•çš„äºŒè¿›åˆ¶æ—¥å¿—åŒæ­¥ï¼Œè€Œæ˜¯è¦é€šè¿‡åŠ å¯†æŠ€æœ¯ï¼ŒèŠ‚ç‚¹è¾¾æˆå…±è¯†ä¹‹åæ‰å­˜å‚¨ã€‚\n  å¯è¿½æº¯\n  å®‰å…¨\nå®‰å…¨åˆ†ä¸ºå¾ˆå¤šå±‚ï¼ŒåŒºå—é“¾åªèƒ½åšåˆ°å­˜å‚¨å±‚çš„å®‰å…¨ã€‚\nåŒºå—é“¾æ— æ³•è§£å†³ç”¨æˆ·å±‚ï¼Œåº”ç”¨å±‚ï¼Œé€»è¾‘å±‚ç­‰å®‰å…¨é—®é¢˜ï¼Œä»–åªèƒ½ä¿è¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„åŒºå—ä¸è¢«ä¿®æ”¹ã€‚\n  ä¸å¯ç¯¡æ”¹\nå¾ˆå¤šäººè®¤ä¸ºåŒºå—é“¾æ•°æ®ä¸€æ—¦åˆ›å»ºä¹‹åå°±ä¸èƒ½ä¿®æ”¹ï¼Œæ‰€ä»¥é‡‡ç”¨åŒºå—é“¾æŠ€æœ¯å¾ˆå®‰å…¨ã€‚å…¶å®ä¸ç„¶ï¼Œæ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œä½†æ˜¯ä¸èƒ½ç¯¡æ”¹ã€‚\næ’°æ”¹æ˜¯æŒ‡éæ³•ä¿®æ”¹åŒºå—é“¾æ•°æ®ï¼Œè€Œä¿®æ”¹åˆ™æ˜¯åˆæ³•å˜æ›´æ•°æ®ã€‚\né€šå¸¸æ’°æ”¹åŒºå—é“¾æ•°æ®å¤šæŒ‡æ•°æ®å­˜å‚¨å±‚é¢çš„ä¿®æ”¹ã€‚è€Œä¿®æ”¹åˆ™æ˜¯é€šè¿‡åˆçº¦æä¾›çš„ä¿®æ”¹å‡½æ•°å˜æ›´åŒºå—é“¾é‡Œé¢çš„æ•°æ®ã€‚\nå¤šæ•°åŒºå—é“¾å¹³å°æ²¡æœ‰ç”¨æˆ·è®¤è¯æƒé™ç®¡ç†æ¨¡å—ã€‚æ‰€ä»¥æ— æ³•æ§åˆ¶åŒºå—ä¸­çš„å“ªäº›æ•°æ®èƒ½è¢«ä¿®æ”¹ï¼Œå“ªäº›ä¸èƒ½ä¿®æ”¹ï¼Œå“ªäº›ç”¨æˆ·å¯ä»¥ä¿®æ”¹ç­‰ç­‰ã€‚å³ä½¿æœ‰äº›åŒºå—é“¾å¹³å°å…·å¤‡æƒé™æ§åˆ¶ï¼Œé¢—ç²’åº¦ä¹Ÿæ— æ³•è¾¾åˆ°ç›®å‰çš„æ•°æ®åº“æ§åˆ¶çš„é‚£ä¹ˆç»†ã€‚\n  é‡‡ç”¨åŒºå—é“¾ä½œä¸ºè´¦æœ¬çš„æ—¶å€™ï¼Œä¼šé¢ä¸´å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\n  ä¸èƒ½å»ºç«‹ç´¢å¼•ï¼Œæ— æ³•å¿«é€Ÿæœç´¢å‡ºåŒºå—ä¸­çš„æ•°æ®ï¼Œå¿…é¡»ä¾èµ–åŒºå—é“¾ä»¥å¤–çš„æŠ€æœ¯ï¼Œå¦‚æœç´¢å¼•æ“ï¼Œæ•°æ®åº“ç­‰ã€‚ä¾‹å¦‚ï¼›etherscan.io å°±æ˜¯æŠŠä»¥å¤ªåŠä¸Šçš„åŒºå—é‡æ–°å…¥åº“ï¼Œå€ŸåŠ©æ•°æ®åº“å®ç°æ•°æ®æ£€ç´¢ã€‚\n  åŒºå—é“¾åªèƒ½é¡ºåºæ£€ç´¢ï¼Œè¿ç®—æˆæœ¬é«˜ã€‚ä¾‹å¦‚åœ¨ä¸­å¿ƒåŒ–è´¦æœ¬ä¸­æ±‡æ€»æ±‚å’Œæ“ä½œï¼ŒåŒºå—é“¾å¿…é¡»ä»å¤´å‘åéå†ã€‚\n  æ‰€æœ‰è´¦ç›®å‡åœ¨ä¸€æ¡é“¾ä¸Šï¼Œä¸åŒçš„åˆ†ç±»æ··åœ¨ä¸€èµ·ï¼Œå½¼æ­¤ç›¸è¿ã€‚\n  æ— æ³•å½’æ¡£ã€‚\nä¼ ç»Ÿçš„æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥å½’æ¡£ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ï¼Œè€Œè¿™äº›å½’æ¡£çš„æ•°æ®åŸºæœ¬éƒ½æ˜¯å†·æ•°æ®ï¼Œä¸ä¼šå†è¢«æŸ¥è¯¢ï¼Œå½’æ¡£æ•°æ®çš„å¤‡ä»½åˆ°å­˜å‚¨ä»‹è´¨ä¸Šçš„è§£å†³æ–¹æ¡ˆä¹Ÿæœ‰å¾ˆå¤šã€‚\nä½†æ˜¯åŒºå—é“¾çš„æ•°æ®éƒ½æ˜¯çƒ­æ•°æ®ï¼Œä»»ä½•æ–°å¢çš„èŠ‚ç‚¹éƒ½å¿…é¡»ä» 0 å¼€å§‹åŒæ­¥ï¼Œå¹¶ä¸”ä¿è¯åŒæ­¥åˆ°æœ€æ–°åŒºå—ï¼Œå¦åˆ™å¯èƒ½æ— æ³•å®Œæˆäº¤æ˜“ï¼Œæ•°æ®ä¼šä¸€ç›´è†¨èƒ€ä¸‹å»ã€‚\nè™½ç„¶æœ‰ç®—æ³•èƒ½å¤Ÿå‡å°‘åŒæ­¥çš„é‡ï¼Œä½†æ˜¯ç°é˜¶æ®µçš„ä½“éªŒä»ç„¶ä¸å¥½ã€‚\n  æ²¡æœ‰äº‹åŠ¡å¤„ç†ã€‚\nå› ä¸ºåŒºå—é“¾æ˜¯é¦–å°¾ç›¸è¿çš„é“¾å¼ç»“æ„ï¼Œæ‰€ä»¥åªèƒ½åœ¨å°¾éƒ¨åŠ åŒºå—ï¼Œæ— æ³•ä¿®æ”¹ä¸­é—´çš„åŒºå—ã€‚å‡è®¾æœ‰ä¸ªåŒºå—å›æ»šï¼Œè¯¥åŒºå—çš„ hash äº§ç”Ÿå˜åŒ–ï¼Œåé¢çš„åŒºå—éƒ½è¦ä½œåºŸã€‚\næ‰€ä»¥å½“å¹¶å‘æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°æ··ä¹±ã€‚å› æ­¤æˆ‘ä»¬è¦åœ¨åº”ç”¨å±‚åšä¸€äº›å¤„ç†ã€‚\n  æ€§èƒ½é—®é¢˜\n  ç”±äºæ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œæ— æ³•é¢„æµ‹ä½•æ—¶å®Œæˆã€‚\n  äº¤æ˜“å®¹æ˜“é˜»å¡\n  gas è´¹ç”¨ã€‚\n  åŒºå—é“¾è½åœ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ å¦‚æœè¦åœ¨ä¼ä¸šä¸­è½åœ°åŒºå—é“¾ï¼Œå°å°æœ‰å¦‚ä¸‹è§£å†³æ–¹æ¡ˆï¼š\n  è§£å†³æ€§èƒ½é—®é¢˜\nç›®å‰åŒºå—é“¾åªé€‚åˆåšä½é¢‘é«˜ä»·å€¼ä¸šåŠ¡ã€‚\nè¯»å–æ€§èƒ½é€šå¸¸æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å†™å…¥å®é™…ä¸Šæ— è®ºä½ ç”¨å¤šå°‘ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹éƒ½ä¸èƒ½æå‡ï¼Œå› ä¸ºå†™å…¥åŒºå—éœ€è¦åšå…±è¯†ç®—æ³•ï¼Œè¿™æ­¥æ“ä½œï¼Œä¼šåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šè¿›è¡Œï¼ŒåŒæ—¶è¿˜éœ€è¦åŠ å¯†è¿ç®—ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯ CPU å¯†é›†å‹æ“ä½œã€‚\næ–¹æ¡ˆï¼š\n  é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æŠ€æœ¯å¼‚æ­¥å†™å…¥ï¼Œå°†éœ€è¦å†™å…¥çš„åŒºå—æ”¾å…¥é˜Ÿåˆ—ï¼Œå¼‚æ­¥å®Œæˆä¸Šé“¾æ“ä½œã€‚\n  å¹¶è¡Œå†™å…¥ï¼Œæˆ‘ä»¬å¯ä»¥å»ºè®¾å¤šä¸ªåŒºå—é“¾å¹³å°ã€‚å¤šä¸ªå¹³å°åŒæ—¶æœåŠ¡äºä¸šåŠ¡ã€‚\nä¸ºäº†è¾¾åˆ°å»ä¸­å¿ƒåŒ–å¹¶è¡Œå†™å…¥ï¼Œæˆ‘ä»¬å°†åœ¨å®¢æˆ·ç«¯é€šè¿‡ç®—æ³•ï¼ŒåŒ¹é…æœåŠ¡å™¨ã€‚å› ä¸ºå¦‚æœåœ¨å¹³å°å‰é¢å¢åŠ è´Ÿè½½å‡è¡¡ï¼ŒåŠ å› ä¸ºè¿™æ ·åˆå›åˆ°äº†ä¸­å¿ƒåŒ–ç³»ç»Ÿã€‚\n    æº¯æºé¢—ç²’åº¦\nå¯¹äºæ‰€è¦è¢«æº¯æºçš„ç‰©å“æˆ–è€…äº¤æ˜“æ¥è®²ï¼Œæœ‰å››ç§æƒ…å†µï¼Œä½é¢‘ä½ä»·å€¼ï¼Œä½é¢‘é«˜ä»·å€¼ï¼Œé«˜é¢‘é«˜ä»·å€¼ï¼Œé«˜é¢‘ä½ä»·å€¼ ã€‚\nå¯¹äºä½é¢‘é«˜ä»·å€¼å’Œé«˜é¢‘é«˜ä»·å€¼çš„ä¸šåŠ¡ï¼Œå°½é‡åšåˆ°æœ€å°é¢—ç²’åº¦ã€‚\nå¯¹äºä½é¢‘ä½ä»·å€¼å’Œé«˜é¢‘ä½ä»·å€¼çš„ä¸šåŠ¡ï¼Œå¯ä»¥é¢—ç²’åº¦æ›´ç²—ã€‚\n  å’Œä¼ ç»Ÿæ•°æ®åº“äº’è¡¥\nåŒºå—é“¾æŠ€æœ¯æœ¬èº«æ˜¯ä¸€ç§è¿½æ±‚åˆ†å¸ƒä¸€è‡´æ€§çš„æ•°æ®åº“ã€‚\næˆ‘ä»¬éƒ½çŸ¥é“ CAP ç†è®ºã€‚CAP ç†è®ºæ˜¯æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œ Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€ Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼Œä¸‰è€…ä¸å¯å¾—å…¼ã€‚å¤§å¤šæ•°åŒºå—é“¾ï¼Œæ”¾å¼ƒäº†ä¸€äº›å¯ç”¨æ€§ï¼Œåå‘äº†ä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™ã€‚\nåŒºå—é“¾å¹¶éèƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œè™½ç„¶ä»–ä¹Ÿç®—æ˜¯ä¸€ç§æ•°æ®åº“ï¼Œå®ƒèƒ½è§£å†³é—®é¢˜ååˆ†æœ‰é™ï¼Œå®ƒçš„æ•°æ®ç®¡ç†å’ŒæŸ¥è¯¢èƒ½åŠ›è¿˜æ‰“ä¸åˆ° NoSQL çš„æ°´å¹³ï¼Œæ›´åˆ«æ SQL çš„å¤æ‚åº”ç”¨ã€‚æ‰€ä»¥åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼ŒåŒºå—é“¾ä¸èƒ½æ›¿ä»£ä¼ ç»Ÿæ•°æ®åº“ï¼Œåªèƒ½äº’è¡¥ã€‚\n  é“¾ä¸Šé“¾ä¸‹æ•°æ®ä¸€è‡´æ€§é—®é¢˜\næ—¢ç„¶åŒºå—é“¾æ›¿ä»£ä¸äº†ä¼ ç»Ÿæ•°æ®åº“ï¼Œé‚£ä¹ˆå¿…ç„¶è¦åœ¨é¡¹ç›®ä¸­åŒæ—¶ä½¿ç”¨ä¸¤ç§æŠ€æœ¯ã€‚è¿™æ ·é—®é¢˜æ¥äº†ï¼Œä¼šæœ‰ä¸¤ä»½æ•°æ®ï¼Œä¸€ä»½å­˜å‚¨åœ¨é“¾ä¸‹ï¼Œå³ä¼ ç»Ÿæ•°æ®åº“ï¼Œå¦å¤–ä¸€éƒ¨åˆ†æ•°æ®ä¸Šé“¾ï¼Œè¿™æ ·å°±æœ‰ä¸¤ä»½é‡å¤çš„æ•°æ®ï¼Œé‚£ä¹ˆæ€æ ·ä¿è¯ä»–ä»¬çš„ä¸€è‡´æ€§å‘¢ï¼Ÿ\nåŒºå—é“¾å’Œæ¯”ç‰¹å¸ç½‘ç»œä¸åŒï¼Œæ¯”ç‰¹å¸æ˜¯åœ¨é“¾ä¸Šäº§ç”Ÿçš„ï¼Œå®ƒä¸åŒºå—é“¾å¯†å¸ƒå¯åˆ†ï¼Œæ˜¯ä¸€ä½“çš„ï¼Œæ‰€ä»¥å®ƒçš„æ•°æ®å®‰å…¨æ€§æ˜¯è‡ªé—­ç¯çš„ã€‚è€Œæˆ‘ä»¬çš„é“¾ä¸‹æ•°æ®å¹¶ä¸æ˜¯åœ¨åŒºå—é“¾ä¸­äº§ç”Ÿçš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä¸Šé“¾çš„æ—¶å€™ï¼Œå°½é‡é‡‡ç”¨å¦‚ä¸‹çš„æ–¹æ¡ˆï¼š\n ä¸¤ç«¯éƒ½åšä¸€æ¬¡å“ˆå¸Œï¼Œå¯å¿«é€Ÿå¯¹æ¯”æ•°æ®æ˜¯å¦ä¸€è‡´ ä»¥é“¾ä¸Šæ•°æ®ä¸ºå‡†ï¼Œå› ä¸ºæ•°æ®åº“çš„æ•°æ®æ›´å®¹æ˜“è¢«ç¯¡æ”¹ å‰ç«¯ä¸šåŠ¡èµ°é“¾ï¼Œåç«¯ä¸šåŠ¡èµ°æ•°æ®åº“ï¼Œå› ä¸ºå‰å°ä¸šåŠ¡æ˜¯ä¸ºç”¨æˆ·æä¾›æœåŠ¡ï¼Œæ‰€ä»¥è¦èµ°é“¾ä¸Šæ•°æ®ï¼Œè€Œåå°æ˜¯å¯ä»¥ç®¡ç†çš„ï¼Œèµ°æ•°æ®åº“å³å¯ã€‚ å…±äº«æ•°æ®ä¸Šé“¾ï¼Œç§æœ‰æ•°æ®ä¸ä¸Šé“¾ã€‚    åŒºå—é“¾çš„ç›¸å…³æŠ€æœ¯ åŒºå—é“¾çš„æŠ€æœ¯æ¨¡å‹è‡ªä¸‹è€Œä¸Šåˆ†ä¸ºï¼›æ•°æ®å±‚ï¼Œç½‘è·¯å±‚ï¼Œå…±è¯†å±‚ï¼Œæ¿€åŠ±å±‚ï¼Œåˆçº¦å±‚ä»¥åŠåº”ç”¨å±‚ã€‚\n  æ•°æ®å±‚ï¼Œå°è£…äº†åº•å±‚æ•°æ®åŒºå—çš„é“¾å¼ç»“æ„ï¼Œä»¥åŠç›¸å…³çš„éå¯¹ç§°å…¬ç§é’¥æ•°æ®åŠ å¯†æŠ€æœ¯å’Œæ—¶é—´æˆ³ç­‰æŠ€æœ¯ï¼Œè¿™æ˜¯æ•´ä¸ªåŒºå—é“¾æŠ€æœ¯ä¸­æœ€åº•å±‚çš„æ•°æ®ç»“æ„ã€‚\nè¿™äº›æŠ€æœ¯æ˜¯æ„å»ºå…¨çƒé‡‘èç³»ç»Ÿçš„åŸºç¡€ï¼Œæ•°åå¹´çš„ä½¿ç”¨è¯æ˜äº†å®ƒéå¸¸å®‰å…¨çš„å¯é æ€§ã€‚è€ŒåŒºå—é“¾ï¼Œæ­£å¼å·§å¦™åœ°æŠŠè¿™äº›æŠ€æœ¯ç»“åˆåœ¨äº†ä¸€èµ·ã€‚\n  ç½‘ç»œå±‚ï¼ŒåŒ…æ‹¬ P2P ç»„ç½‘æœºåˆ¶ã€æ•°æ®ä¼ æ’­æœºåˆ¶å’Œæ•°æ®éªŒè¯æœºåˆ¶ç­‰ã€‚\nP2P ç»„ç½‘æŠ€æœ¯æ—©æœŸåº”ç”¨åœ¨ BT è¿™ç±» P2P ä¸‹è½½è½¯ä»¶ä¸­ï¼Œè¿™å°±æ„å‘³ç€åŒºå—é“¾å…·æœ‰è‡ªåŠ¨ç»„ç½‘åŠŸèƒ½ã€‚\n  å…±è¯†å±‚ï¼Œå°è£…äº†ç½‘ç»œèŠ‚ç‚¹çš„å„ç±»å…±è¯†æœºåˆ¶ç®—æ³•ã€‚å…±è¯†æœºåˆ¶ç®—æ³•æ˜¯åŒºå—é“¾çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå› ä¸ºè¿™å†³å®šäº†åˆ°åº•æ˜¯è°æ¥è¿›è¡Œè®°è´¦ï¼Œè€Œè®°è´¦å†³å®šæ–¹å¼å°†ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿçš„å®‰å…¨æ€§å’Œå¯é æ€§ã€‚\næ•°æ®å±‚ã€ç½‘ç»œå±‚ã€å…±è¯†å±‚æ˜¯æ„å»ºåŒºå—é“¾æŠ€æœ¯çš„å¿…è¦å…ƒç´ ï¼Œç¼ºå°‘ä»»ä½•ä¸€å±‚éƒ½å°†ä¸èƒ½ç§°ä¹‹ä¸ºçœŸæ­£æ„ä¹‰ä¸Šçš„åŒºå—é“¾æŠ€æœ¯ã€‚\nç›®å‰å·²ç»å‡ºç°äº†åä½™ç§å…±è¯†æœºåˆ¶ç®—æ³•ï¼Œå…¶ä¸­æ¯”è¾ƒæœ€ä¸ºçŸ¥åçš„æœ‰å·¥ä½œé‡è¯æ˜æœºåˆ¶ï¼ˆPoWï¼ŒProof of Workï¼‰ã€æƒç›Šè¯æ˜æœºåˆ¶ï¼ˆPoSï¼ŒProof ofStakeï¼‰ã€è‚¡ä»½æˆæƒè¯æ˜æœºåˆ¶ï¼ˆDPoSï¼ŒDelegated ProofofStakeï¼‰ç­‰ã€‚\n  æ¿€åŠ±å±‚ï¼Œå°†ç»æµå› ç´ é›†æˆåˆ°åŒºå—é“¾æŠ€æœ¯ä½“ç³»ä¸­æ¥ï¼ŒåŒ…æ‹¬ç»æµæ¿€åŠ±çš„å‘è¡Œæœºåˆ¶å’Œåˆ†é…æœºåˆ¶ç­‰ï¼Œä¸»è¦å‡ºç°åœ¨å…¬æœ‰é“¾å½“ä¸­ã€‚\nåœ¨å…¬æœ‰é“¾ä¸­å¿…é¡»æ¿€åŠ±éµå®ˆè§„åˆ™å‚ä¸è®°è´¦çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”æƒ©ç½šä¸éµå®ˆè§„åˆ™çš„èŠ‚ç‚¹ï¼Œæ‰èƒ½è®©æ•´ä¸ªç³»ç»Ÿæœç€è‰¯æ€§å¾ªç¯çš„æ–¹å‘å‘å±•ã€‚è€Œåœ¨ç§æœ‰é“¾å½“ä¸­ï¼Œåˆ™ä¸ä¸€å®šéœ€è¦è¿›è¡Œæ¿€åŠ±ï¼Œå› ä¸ºå‚ä¸è®°è´¦çš„èŠ‚ç‚¹å¾€å¾€æ˜¯åœ¨é“¾å¤–å®Œæˆäº†åšå¼ˆï¼Œé€šè¿‡å¼ºåˆ¶åŠ›æˆ–è‡ªæ„¿æ¥è¦æ±‚å‚ä¸è®°è´¦ã€‚\n  åˆçº¦å±‚ï¼Œå°è£…å„ç±»è„šæœ¬ã€ç®—æ³•å’Œæ™ºèƒ½åˆçº¦ï¼Œæ˜¯åŒºå—é“¾å¯ç¼–ç¨‹ç‰¹æ€§çš„åŸºç¡€ã€‚\næ¯”ç‰¹å¸æœ¬èº«å°±å…·æœ‰ç®€å•è„šæœ¬çš„ç¼–å†™åŠŸèƒ½ï¼Œè€Œä»¥å¤ªåŠæå¤§çš„å¼ºåŒ–äº†ç¼–ç¨‹è¯­è¨€åè®®ï¼Œç†è®ºä¸Šå¯ä»¥ç¼–å†™å®ç°ä»»ä½•åŠŸèƒ½çš„åº”ç”¨ã€‚å¦‚æœæŠŠæ¯”ç‰¹å¸çœ‹æˆæ˜¯å…¨çƒè´¦æœ¬çš„è¯ï¼Œä»¥å¤ªåŠå¯ä»¥çœ‹ä½œæ˜¯ä¸€å°â€œå…¨çƒè®¡ç®—æœºâ€ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ å’Œæ‰§è¡Œä»»æ„çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ç¨‹åºçš„æœ‰æ•ˆæ‰§è¡Œèƒ½å¾—åˆ°ä¿è¯ã€‚\n  åº”ç”¨å±‚ï¼Œå°è£…äº†åŒºå—é“¾çš„å„ç§åº”ç”¨åœºæ™¯å’Œæ¡ˆä¾‹ï¼Œæ¯”å¦‚æ­å»ºåœ¨ä»¥å¤ªåŠä¸Šçš„å„ç±»åŒºå—é“¾åº”ç”¨å³éƒ¨ç½²åœ¨åº”ç”¨å±‚ï¼Œè€Œæœªæ¥çš„å¯ç¼–ç¨‹é‡‘èå’Œå¯ç¼–ç¨‹ç¤¾ä¼šä¹Ÿå°†ä¼šæ˜¯æ­å»ºåœ¨åº”ç”¨å±‚ã€‚\n  å…±è¯†ç®—æ³•\n pow pos dpos poa pbft raft  HD Wallet\nBIP32 å®šä¹‰ Hierarchical Deterministic wallet (ç®€ç§° \u0026ldquo;HD Wallet\u0026rdquo;)ï¼Œæ˜¯ä¸€ä¸ªç³»ç»Ÿå¯ä»¥ä»å•ä¸ª seed äº§ç”Ÿæ ‘çŠ¶ç»“æ„å‚¨å­˜å¤šç»„ keypairsï¼ˆç§é’¥å’Œå…¬é’¥ï¼‰ã€‚\nBIP39 å®šä¹‰é’±åŒ…åŠ©è®°è¯å’Œ seed ç”Ÿæˆè§„åˆ™ï¼Œä¸€èˆ¬ç”± 12 -24 ä¸ªå•å­—ç»„æˆï¼Œç§°ä¸º mnemonicã€‚\nBIP44 åŸºäº BIP32 çš„ç³»ç»Ÿï¼Œèµ‹äºˆæ ‘çŠ¶ç»“æ„ä¸­çš„å„å±‚ç‰¹æ®Šçš„æ„ä¹‰ã€‚è®©åŒä¸€ä¸ª seed å¯ä»¥æ”¯æ´å¤šå¸ç§ã€å¤šå¸æˆ·ç­‰ ã€‚\nä½¿ç”¨åŠ©è®°è¯ç”Ÿæˆç¡®å®šæ€§é’±åŒ…ã€‚\nHD Wallet é‡‡ç”¨ 2048 ä¸ªå•è¯ï¼Œæˆ–è€…æ±‰å­—ä½œä¸ºåŠ©è®°è¯ï¼Œè¿™äº›è¯åº“å¯¹å¤–å…¬å¼€ï¼Œå¾ˆå¤šé’±åŒ…ä»…ä»…ä½¿ç”¨ path ç¬¬ä¸€ä¸ªåœ°å€å¹¶ä¸”æ²¡æœ‰åŠ å¯†ã€‚å¦‚æœä½ çŸ¥é“æŸä¸ªç”¨æˆ·çš„åŠ©è®°è¯ä¸­çš„ 11 å„è¯çš„æ’åˆ—é¡ºåºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç©·ä¸¾æ–¹æ³•ï¼Œç®—å‡ºæ‰€æœ‰åœ°å€çš„ç§é’¥ï¼Œå¦‚æœç¢°å·§æ‰¾åˆ°äº†å·²ç»åœ¨ä½¿ç”¨çš„åœ°å€ã€‚å°±å¯ä»¥å°†é‡Œé¢çš„ ETH å…¨éƒ¨è½¬èµ°ã€‚\nä»¥å¤ªåŠå¸¸ç”¨æ“ä½œ è®¡ç®— gas è´¹ç”¨\nvar estimateGas = eth.estimateGas({from:eth.accounts[1], to: eth.accounts[2], value: web3.toWei(1)})  var cost = estimateGas * gasPrice è§£é”è´¦æˆ·\npersonal.unlockAccount(eth.accounts[3], \u0026#34;12345678\u0026#34;) è½¬è´¦\nvar txnHash = eth.sendTransaction({from: eth.accounts[3], to: eth.accounts[5], value: eth.getBalance(eth.accounts[3]) - cost, gas: estimateGas}) æŸ¥çœ‹äº¤æ˜“ç»†èŠ‚\nweb3.eth.getTransaction(txnHash) è·å–ä½™é¢\neth.getBalance(eth.accounts[3]) keystore æ–‡ä»¶\nä»¥å¤ªåŠçš„æ¯ä¸ªå¤–éƒ¨è´¦æˆ·éƒ½æ˜¯ç”±ä¸€å¯¹å¯†é’¥ï¼ˆä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥ï¼‰å®šä¹‰çš„ã€‚è´¦æˆ·ä»¥åœ°å€ä¸ºç´¢å¼•ï¼Œåœ°å€ç”±å…¬é’¥è¡ç”Ÿè€Œæ¥ï¼Œå–å…¬é’¥çš„æœ€å 20 ä¸ªå­—èŠ‚ã€‚\næ¯å¯¹ç§é’¥ /åœ°å€éƒ½ç¼–ç åœ¨ä¸€ä¸ªé’¥åŒ™æ–‡ä»¶é‡Œï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ keystore æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶æ˜¯ JSON æ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å’Œæµè§ˆã€‚é’¥åŒ™æ–‡ä»¶çš„å…³é”®éƒ¨åˆ†â€”â€”è´¦æˆ·ç§é’¥ï¼Œé€šå¸¸ç”¨ä½ åˆ›å»ºå¸æˆ·æ—¶è®¾ç½®çš„å¯†ç è¿›è¡ŒåŠ å¯†ã€‚å¦‚æœä½ ä¸¢å¤±äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å°±ä¸¢å¤±äº†ç§é’¥ï¼Œæ„å‘³ç€ä½ å¤±å»äº†ç­¾ç½²äº¤æ˜“çš„èƒ½åŠ›ï¼Œæ„å‘³ç€ä½ çš„èµ„é‡‘è¢«æ°¸ä¹…çš„é”å®šåœ¨äº†ä½ çš„è´¦æˆ·é‡Œã€‚\næ‰¹é‡è½¬è´¦\næœ‰æ—¶æˆ‘ä»¬éœ€è¦å°† Token å‘é€åˆ°å¤šä¸ªåœ°å€ä¸Šå»ã€‚é€šå¸¸çš„åšæ³•å°±æ˜¯ä½¿ç”¨ web.js å†™ä¸€ä¸ªå¾ªç¯ç¨‹åºï¼Œä½†æ˜¯å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°è¿™ç§åšæ³•å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œå¸¸ä¼šå‘ç”Ÿè½¬è´¦å¤±è´¥æƒ…å†µã€‚\nç»è¿‡åˆ†æé€ æˆå‘é€å¤±è´¥åŸå› æ˜¯ï¼Œé¢‘ç‡å¤ªé«˜ï¼Œå› ä¸º web.js æ˜¯å¼‚æ­¥æ“ä½œï¼Œå½“å‰ç¨‹åºè¿˜æœªå®Œæˆäº¤æ˜“ï¼Œäº¤æ˜“å°šæœªç¡®è®¤çš„æƒ…å†µä¸‹ç¬¬äºŒç¬”äº¤æ˜“å‘é€å‡ºå»ï¼Œè¿™æ—¶å°±ä¼šå‡ºé”™ã€‚\nweb3.eth.getTransactionCount(from).then(function(nonce){  // é—®é¢˜å°±å‡ºåœ¨ nonce ï¼Œ nonce å¦‚åŒæ•°æ®åº“ä¸­çš„åºåˆ—ä¸»é”®ï¼Œå¦‚æœä¸Šä¸€ä¸ªäº¤æ˜“æ²¡æœ‰å®Œæˆï¼Œä¸‹ä¸€ä¸ªäº¤æ˜“å–å¾— nonce + 1 åä¸ä¸Šä¸€ä¸ª pending çš„äº¤æ˜“ç›¸åŒï¼Œäº§ç”Ÿå†²çª } æœ€å¥½çš„è§£æ–¹æ¡ˆæ˜¯åœ¨åˆçº¦ä¸­å®ç°æ‰¹é‡è½¬è´¦åŠŸèƒ½ï¼Œè¿™æ ·éœ€è¦ä¸€ä¸ªäº¤æ˜“ txhash å®Œæˆå¤šæ¯”äº¤æ˜“ã€‚\nå¦‚æœä½ çš„ Token å·²ç»åœ¨ä½¿ç”¨äº†ï¼Œä¸”æ²¡æœ‰æ‰¹é‡è½¬è´¦çš„åŠŸèƒ½æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨å†™ä¸€ä¸ª Token ç»§æ‰¿åŸæ¥çš„ Tokenï¼Œåœ¨æ–°çš„ Token ä¸­å®ç°æ‰¹é‡è½¬è´¦åŠŸèƒ½ã€‚\nä»£å¸å…‘æ¢\nå…‘æ¢ä»£å¸é€šå¸¸æ˜¯æŒ‡ä½¿ç”¨ ETH æˆ–è€…å…¶ä»–å¸å…‘æ¢ Tokenã€‚é€šå¸¸æ˜¯è¿™æ ·å®ç°çš„ï¼Œä½¿ç”¨æ™ºèƒ½åˆçº¦ï¼Œå°† ETH è¾¾åˆ°æŒ‡å®šåˆçº¦åœ°å€ï¼Œåˆçº¦ä¼šæ‰“å›ä»£å¸ç»™ç”¨æˆ·ã€‚\nè¿™ç§æ–¹å¼ä¸ç”¨äººå·¥å‚ä¸ï¼Œä¹Ÿä¸ç”¨å¼€å‘ç¨‹åºã€‚ç¼ºç‚¹ä¸èƒ½åšåˆ°å®æ—¶æ±‡ç‡ï¼Œéœ€è¦äººå·¥è®¾ç½®æ±‡ç‡ã€‚\nERC20 Token\nERC20 â€œæè¿°äº†å®ç°ä»£å¸åˆçº¦çš„æ ‡å‡†åŠŸèƒ½â€ï¼ŒERC20 æ˜¯å„ä¸ªä»£å¸çš„æ ‡å‡†æ¥å£ã€‚ERC20 ä»£å¸ä»…ä»…æ˜¯ä»¥å¤ªåŠä»£å¸çš„å­é›†ã€‚ä¸ºäº†å……åˆ†å…¼å®¹ ERC20ï¼Œå¼€å‘è€…éœ€è¦å°†ä¸€ç»„ç‰¹å®šçš„å‡½æ•°é›†æˆåˆ°ä»–ä»¬çš„æ™ºèƒ½åˆçº¦ä¸­ï¼Œä»¥ä¾¿åœ¨é«˜å±‚é¢èƒ½å¤Ÿæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\n è·å¾—ä»£å¸æ€»ä¾›åº”é‡ è·å¾—è´¦æˆ·ä½™é¢ è½¬è®©ä»£å¸ æ‰¹å‡†èŠ±è´¹ä»£å¸  æœ€ç®€å•çš„åˆçº¦å¦‚ä¸‹ï¼š\npragma solidity ^0.4.24;  contract EncryptToken {  uint256 INITIAL_SUPPLY = 666666;  mapping(address =\u0026gt; uint256) balances;   constructor() public {  balances[msg.sender] = INITIAL_SUPPLY;  }   function transfer(address to, uint256 amount) public{  assert(balances[msg.sender] \u0026gt; amount);  balances[msg.sender] -= amount;  balances[to] += amount;  }   function balanceOf(address owner) constant public returns (uint256){  return balances[owner];  }  } ä½¿ç”¨äº† openzeppeline-solidity çš„å®‰å…¨æ ‡å‡†ä»£å¸åˆçº¦æ˜¯ï¼š\n pragma solidity ^0.4.24;  import \u0026#34;openzeppelin-solidity/contracts/token/ERC20/StandardToken.sol\u0026#34;;   contract BloggerCoin is StandardToken{  string public name = \u0026#34;BloggerCoin\u0026#34;; // åå­—  string public symbol = \u0026#34;BLC\u0026#34;; // ç®€ç§°  uint8 public decimals = 4; // 10çš„4æ¬¡æ–¹  uint256 public INITIAL_SUPPLY = 666666;   constructor() public{  totalSupply_ = INITIAL_SUPPLY;  balances[msg.sender] = INITIAL_SUPPLY;  }  } ","permalink":"https://zhenfeng-zhu.github.io/post/blockchain/","summary":"æœ¬æ–‡æ˜¯é˜…è¯»http://www.netkiller.cn/blockchain/ch01s10.html ä¸Šçš„ä¸€äº›ç¬”è®°ã€‚\n ç†è§£åŒºå—é“¾çš„åˆ†å¸ƒå¼è®°è´¦ http://www.netkiller.cn/blockchain/ch01s10.html\nåŒºå—é“¾ä¸­æåˆ°çš„è´¦æœ¬ï¼Œè®°è´¦ç­‰è¯æ±‡æ˜¯å’Œä¼šè®¡æ— å…³çš„è¯æ±‡ã€‚\næˆ‘ä»¬ä¼ ç»Ÿç†è§£çš„è´¦æœ¬æ˜¯ä¸€ä¸ªäºŒç»´çš„è¡¨æ ¼ï¼Œè®°å½•äº†æŸå¹´æŸæœˆæŸæ—¥çš„è´¹ç”¨ï¼š\n   æ—¶é—´ ç”¨é€” é‡‘é¢     2018-08-23 å€Ÿ 100   2018-08-22 è¿˜ 200   2018-08-21 å€Ÿ 50   2018-08-20 è¿˜ 1000    å¦‚æœè´¦ç›®æ¯”è¾ƒå¤šï¼Œå¯ä»¥æ‹†è´¦ï¼Œå°†ä¸åŒåˆ†ç±»çš„è´¦ç›®æ”¾åœ¨ç‰¹å®šçš„è´¦æœ¬ä¸­ï¼Œè€Œä¸”äºŒç»´è¡¨æ ¼è¿˜å¯ä»¥è®¾ç½®ç´¢å¼•ç­‰ï¼Œå¿«é€Ÿæ‰¾åˆ°ä¸€ç¬”äº¤æ˜“ã€‚\nä½†æ˜¯åŒºå—é“¾çš„è®°è´¦å½¢å¼æ˜¯ï¼š\nå¯ä»¥å‘ç°ï¼ŒåŒºå—é“¾çš„è¿™ç§è®°è´¦æ–¹å¼æ˜¯åšäº†è¡Œåˆ—çŸ©é˜µè½¬æ¢ï¼ŒèŠ‚ç‚¹ä¹‹é—´æ”¶å°¾ç›¸äº’è¿æ¥ï¼Œæˆä¸ºé“¾å¼ç»“æ„ï¼Œæ‰€æœ‰çš„è´¦ç›®éƒ½åœ¨ä¸€æ¡é“¾ä¸Šã€‚\næ‰€è°“åˆ†å¸ƒå¼è®°è´¦ï¼Œå…¶å®å°±æ˜¯ä¸Šè¿°é“¾çŠ¶çš„æ•°æ®ç»“æ„ä¿å­˜åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šï¼Œå½¢æˆåˆ†å¸ƒå¼é›†ç¾¤ã€‚\nä¹‹æ‰€ä»¥é‡‡ç”¨åŒºå—é“¾æ¥åšåˆ†å¸ƒå¼è®°è´¦ï¼Œä¸»è¦æ˜¯åŒºå—é“¾æœ‰å¦‚ä¸‹å¥½å¤„ï¼š\n  å»ä¸­å¿ƒåŒ–\nä¼ ç»Ÿçš„æ•°æ®åº“å­˜å‚¨æ˜¯ä¸­å¿ƒåŒ–çš„ï¼Œé€šè¿‡æš´éœ² ip åœ°å€å’Œç«¯å£å·æä¾›æœåŠ¡ï¼Œåæ¥åˆ†å¸ƒå¼è¿›ç¾¤åŒ–ä¹‹åï¼Œå‡ºç°äº†ä¸»ä¸»ä»æ¶æ„ç­‰ã€‚\nä¸æ•°æ®åº“ç›¸æ¯”ï¼ŒåŒºå—é“¾æ˜¯å¤šä¸»æ¶æ„ï¼Œè€Œä¸”å®ç°æ›´ä¸ºå¤æ‚ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¹‹é—´ä¸æ˜¯ç®€å•çš„äºŒè¿›åˆ¶æ—¥å¿—åŒæ­¥ï¼Œè€Œæ˜¯è¦é€šè¿‡åŠ å¯†æŠ€æœ¯ï¼ŒèŠ‚ç‚¹è¾¾æˆå…±è¯†ä¹‹åæ‰å­˜å‚¨ã€‚\n  å¯è¿½æº¯\n  å®‰å…¨\nå®‰å…¨åˆ†ä¸ºå¾ˆå¤šå±‚ï¼ŒåŒºå—é“¾åªèƒ½åšåˆ°å­˜å‚¨å±‚çš„å®‰å…¨ã€‚\nåŒºå—é“¾æ— æ³•è§£å†³ç”¨æˆ·å±‚ï¼Œåº”ç”¨å±‚ï¼Œé€»è¾‘å±‚ç­‰å®‰å…¨é—®é¢˜ï¼Œä»–åªèƒ½ä¿è¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„åŒºå—ä¸è¢«ä¿®æ”¹ã€‚\n  ä¸å¯ç¯¡æ”¹\nå¾ˆå¤šäººè®¤ä¸ºåŒºå—é“¾æ•°æ®ä¸€æ—¦åˆ›å»ºä¹‹åå°±ä¸èƒ½ä¿®æ”¹ï¼Œæ‰€ä»¥é‡‡ç”¨åŒºå—é“¾æŠ€æœ¯å¾ˆå®‰å…¨ã€‚å…¶å®ä¸ç„¶ï¼Œæ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œä½†æ˜¯ä¸èƒ½ç¯¡æ”¹ã€‚\næ’°æ”¹æ˜¯æŒ‡éæ³•ä¿®æ”¹åŒºå—é“¾æ•°æ®ï¼Œè€Œä¿®æ”¹åˆ™æ˜¯åˆæ³•å˜æ›´æ•°æ®ã€‚\né€šå¸¸æ’°æ”¹åŒºå—é“¾æ•°æ®å¤šæŒ‡æ•°æ®å­˜å‚¨å±‚é¢çš„ä¿®æ”¹ã€‚è€Œä¿®æ”¹åˆ™æ˜¯é€šè¿‡åˆçº¦æä¾›çš„ä¿®æ”¹å‡½æ•°å˜æ›´åŒºå—é“¾é‡Œé¢çš„æ•°æ®ã€‚\nå¤šæ•°åŒºå—é“¾å¹³å°æ²¡æœ‰ç”¨æˆ·è®¤è¯æƒé™ç®¡ç†æ¨¡å—ã€‚æ‰€ä»¥æ— æ³•æ§åˆ¶åŒºå—ä¸­çš„å“ªäº›æ•°æ®èƒ½è¢«ä¿®æ”¹ï¼Œå“ªäº›ä¸èƒ½ä¿®æ”¹ï¼Œå“ªäº›ç”¨æˆ·å¯ä»¥ä¿®æ”¹ç­‰ç­‰ã€‚å³ä½¿æœ‰äº›åŒºå—é“¾å¹³å°å…·å¤‡æƒé™æ§åˆ¶ï¼Œé¢—ç²’åº¦ä¹Ÿæ— æ³•è¾¾åˆ°ç›®å‰çš„æ•°æ®åº“æ§åˆ¶çš„é‚£ä¹ˆç»†ã€‚\n  é‡‡ç”¨åŒºå—é“¾ä½œä¸ºè´¦æœ¬çš„æ—¶å€™ï¼Œä¼šé¢ä¸´å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\n  ä¸èƒ½å»ºç«‹ç´¢å¼•ï¼Œæ— æ³•å¿«é€Ÿæœç´¢å‡ºåŒºå—ä¸­çš„æ•°æ®ï¼Œå¿…é¡»ä¾èµ–åŒºå—é“¾ä»¥å¤–çš„æŠ€æœ¯ï¼Œå¦‚æœç´¢å¼•æ“ï¼Œæ•°æ®åº“ç­‰ã€‚ä¾‹å¦‚ï¼›etherscan.","title":"åŒºå—é“¾å­¦ä¹ ç¬”è®°"},{"content":"åœ¨è¿™ç¯‡æ–‡ç« ä¸è€ƒè™‘äººå·¥æ™ºèƒ½ï¼Œè°ˆè°ˆæˆ‘å¯¹èŠå¤©æœºå™¨äººæ¡†æ¶å®ç°æœºåˆ¶çš„ç†è§£ã€‚\nèŠå¤©æœºå™¨äºº  èŠå¤©æœºå™¨äººï¼ˆChatterbotï¼‰æ˜¯ç»ç”±å¯¹è¯æˆ–æ–‡å­—è¿›è¡Œäº¤è°ˆçš„è®¡ç®—æœºç¨‹åº[1]ã€‚èƒ½å¤Ÿæ¨¡æ‹Ÿäººç±»å¯¹è¯ï¼Œé€šè¿‡å›¾çµæµ‹è¯•ã€‚\n æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç°æœ‰çš„ IM å·¥å…·ä¸Šå·²ç»æœ‰äº†å¾ˆå¤šæœºå™¨äººï¼Œå…¶å®èŠå¤©æœºå™¨äººä¸åªæ˜¯å•çº¯çš„å’Œç”¨æˆ·è¿›è¡ŒèŠå¤©ï¼Œä»–å…¶å®è¿˜å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ä¸€äº›è¯ï¼Œå¯ä»¥å¸®ç”¨æˆ·è®¢é¤ã€‚å¦å¤–åœ¨è¿ç»´é¢†åŸŸï¼Œä¹Ÿå‡ºç°äº† chatopsï¼Œé€šè¿‡å’Œæœºå™¨äººèŠå¤©ï¼Œè¿›è¡Œè¿ç»´æ“ä½œã€‚\næœºå™¨äººå¼€å‘æ¡†æ¶ ä½œä¸ºèŠå¤©æœºå™¨äººå¼€å‘è€…ï¼Œé¢å¯¹å¦‚æ­¤å¤šçš„ IM å·¥å…·å’Œ SDKï¼Œå¸¸ä¼šæ„Ÿåˆ°æ— æ‰€é€‚ä»ã€‚Bot å¼€å‘æ¡†æ¶å°±æ˜¯å¯¹èŠå¤©æœºå™¨äººå¼€å‘è¿‡ç¨‹ä¸­çš„äººå·¥å†…å®¹åšæŠ½è±¡åŒ–å¤„ç†ã€‚ç®€å•åœ°è§£é‡Šï¼Œæœºå™¨äººå¼€å‘æ¡†æ¶å°±æ˜¯ç”¨æ¥åˆ¶é€ æœºå™¨äººå¹¶å®šä¹‰å…¶è¡Œä¸ºã€‚\nç„¶è€Œå°½ç®¡å¾ˆå¤šæœºå™¨äººæ¡†æ¶å®£ç§°ã€Œä»£ç ä¸€æ—¦å†™å¥½å¯éƒ¨ç½²åˆ°ä»»ä½•åœ°æ–¹ã€ï¼Œä½†æ˜¯è¿˜ä¼šæ˜¯å‡ºç°ä¸ºæ¯ä¸€ä¸ª IM å·¥å…·å¼€å‘ä¸€ä¸ªå•ç‹¬çš„èŠå¤©æœºå™¨äººã€‚è€Œä¸€ä¸ªè‰¯å¥½çš„æœºå™¨äººæ¡†æ¶ä¸»è¦åŒ…å«å¼€å‘ SDKï¼Œè¿æ¥å™¨å’Œæ¨¡æ‹Ÿå™¨ç­‰ã€‚\nä½¿ç”¨æœºå™¨äººæ¡†æ¶å…¶å®å¹¶ä¸é€‚åˆåˆå­¦è€…å­¦ä¹ èŠå¤©æœºå™¨äººå¼€å‘ã€‚å®ƒä»¬å°è¯•è‡ªåŠ¨åŒ–å¤ªå¤šå·¥ä½œï¼Œå¯¹åˆå­¦è€…æ©ç›–äº†åŸºç¡€æœºåˆ¶ã€‚\nå®ç°æ–¹å¼  webhook äº‹ä»¶å›è°ƒ FSM çŠ¶æ€æœº workflow å·¥ä½œæµ  æœ€ç®€å•çš„æœºå™¨äººæ˜¯æ²¡æœ‰ä¸Šä¸‹æ–‡çš„è¯­ä¹‰ç†è§£çš„ä¸€é—®ä¸€ç­”ï¼Œä»…ä»…æ˜¯å¯¹ç”¨æˆ·çš„å¯¹è¯è¿›è¡Œå“åº”ï¼Œè¿™ç§å°±å¯ä»¥é‡‡ç”¨ webhook çš„æ–¹å¼è¿›è¡Œå¼€å‘ã€‚ä¸éœ€è¦é‡‡ç”¨ä»€ä¹ˆå¼€å‘æ¡†æ¶ã€‚\né‚£ä¹ˆå¯¹äºå¤šè½®å¯¹è¯çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿›è¡Œä¸€å®šçš„å¯¹è¯ç®¡ç†ã€‚ç”±æ­¤å¼•å…¥äº† FSM çŠ¶æ€æœºã€‚\nå¯èƒ½æœ‰äººä¸æ˜¯å¾ˆæ‡‚æœ‰é™çŠ¶æ€æœºï¼Œè¿™é‡Œåšä¸€ä¸‹ç®€å•è¯´æ˜ã€‚\n æœ‰é™çŠ¶æ€æœºåœ¨ç°å®ç”Ÿæ´»ä¸­å…¶å®éšå¤„å¯è§ï¼Œä¼¸ç¼©å¼åœ†ç ç¬”å…¶å®å°±æ˜¯ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºï¼ˆä¸¤ç§çŠ¶æ€äº’ç›¸è½¬æ¢ï¼‰ã€‚\næœ‰é™çŠ¶æ€æœºï¼Œç¼©å†™ä¸º FSMï¼Œåˆç§°ä¸ºæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼Œç®€ç§°çŠ¶æ€æœºã€‚æ˜¯è¡¨ç¤ºæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦æ¨¡å‹ã€‚\nå¯ä»¥æ€»ç»“ä¸ºï¼šf(state, action) =\u0026gt; stateâ€™\nä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå‡½æ•°é‡‡ç”¨å½“å‰çš„çŠ¶æ€å’Œä¸€æ¬¡è¡ŒåŠ¨ï¼ˆå³æ›´æ”¹çŠ¶æ€çš„æ–¹æ³•ï¼‰ï¼Œä¹‹åå°†è¯¥è¡ŒåŠ¨åº”ç”¨äºè¿™ç§çŠ¶æ€å¹¶è¿”å›æ–°çš„çŠ¶æ€ã€‚\nå¯ä»¥è®¤ä¸ºçŠ¶æ€æœºæ˜¯å›¾çµå®Œå¤‡çš„ã€‚\n æˆ‘ä»¬å¯ä»¥å°†å¯¹è¯çœ‹åšæ˜¯åœ¨æœ‰é™çŠ¶æ€å†…è·³è½¬çš„è¿‡ç¨‹ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æœ‰å¯¹åº”çš„åŠ¨ä½œå’Œå›å¤ï¼Œå¦‚æœèƒ½ä»å¼€å§‹èŠ‚ç‚¹é¡ºåˆ©çš„æµè½¬åˆ°ç»ˆæ­¢èŠ‚ç‚¹ï¼Œä»»åŠ¡å°±å®Œæˆäº†ã€‚\næˆ‘ä»¬å¯ä»¥å°†å¯¹è¯çš„è¿‡ç¨‹ï¼Œåˆ†ä¸ºä¸€ä¸ªä¸ªçš„çŠ¶æ€ï¼Œç„¶åä½¿ç”¨ DSL æ¥å®ç°ä¸€ä¸ª FSMï¼Œå¯¹äºå¼€å‘è€…æ¥è®²ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ä¸€ä¸ªä¸ªçŠ¶æ€å‡½æ•°å³å¯ã€‚\nç‰¹ç‚¹æ˜¯ï¼š\n äººä¸ºå®šä¹‰å¯¹è¯æµç¨‹ å®Œå…¨æœ‰ç³»ç»Ÿä¸»å¯¼ï¼Œç³»ç»Ÿé—®ç”¨æˆ·ç­” ç­”éæ‰€é—®çš„æƒ…å†µç›´æ¥å¿½ç•¥ å»ºæ¨¡ç®€å•ï¼Œèƒ½æ¸…æ™°æ˜äº†çš„æŠŠäº¤äº’åŒ¹é…åˆ°æ¨¡å‹ éš¾ä»¥æ‰©å±•ï¼Œå¾ˆå®¹æ˜“å˜çš„å¤æ‚ é€‚ç”¨äºç®€å•çš„ä»»åŠ¡ï¼Œéš¾ä»¥å¤„ç†å¤æ‚é—®é¢˜ ç¼ºå°‘çµæ´»æ€§ï¼Œè¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œè¾“å…¥æœ‰é™ï¼Œå¯¹è¯ç»“æ„å’Œæµè½¬è·¯å¾„æœ‰é™  ç¤ºä¾‹ï¼š\nconst {startWith, when, goto, stay, stop} = botkit.DSL(fsm);  startWith(MyStates.IDLE, {counter: 0});  when(MyStates.IDLE)(async (sender, content, data) =\u0026gt; {  });  when(MyStates.UI)((sender, content, data) =\u0026gt; {  });  when(MyStates.STEP1)((sender, content, data) =\u0026gt; {  });  when(MyStates.STEP2)((sender, content, data) =\u0026gt; {  });  when(MyStates.DONE)((sender, content, data) =\u0026gt; {  });  when(MyStates.EMPTY)((sender, content, data) =\u0026gt; {  });  when(MyStates.LOOP)((sender, content, data) =\u0026gt; {  }); ä»ç¤ºä¾‹ä¸­å¯ä»¥å‘ç°ï¼ŒåŸºäº fsm çš„æœºå™¨äººæ¡†æ¶éœ€è¦ä½¿ç”¨ç±»ä¼¼ DSL é¢†åŸŸç‰¹å®šè¯­è¨€ä¸€æ ·çš„æè¿°è¯­è¨€ï¼Œå®šä¹‰å„ç§å„æ ·çš„çŠ¶æ€ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€éƒ½æœ‰è§¦å‘ç‚¹ã€‚å½“æ»¡è¶³æŸä¸ªçŠ¶æ€æ¡ä»¶æ—¶ï¼Œè¿›å…¥è¯¥çŠ¶æ€ï¼Œæ‰§è¡Œè¯¥çŠ¶æ€çš„é€»è¾‘ã€‚è¿™ç§åŸºäºçŠ¶æ€æœºçš„æœºå™¨äººæ¡†æ¶ï¼Œå¯¹äºç®€å•çš„åœºæ™¯æ¯”è¾ƒå®¹æ˜“å†™ï¼Œä½†æ˜¯å¦‚æœæ˜¯é‡åˆ°äº†å¤æ‚çš„åœºæ™¯ï¼Œæ¯”å¦‚å¤šè½®å¯¹è¯ä¸­è¿˜é™„å¸¦ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå°±ä¼šå†™èµ·æ¥éå¸¸å¤æ‚ã€‚\näºæ˜¯å¼•å…¥äº†åŸºäºå·¥ä½œæµçš„ chatbot æ¡†æ¶ã€‚å…¶å®å·¥ä½œæµæ˜¯å¯¹ fsm çš„ä¸€ç§ç®€åŒ–å°è£…ï¼Œæœ¬è´¨ä¸Šæ¥è®²ï¼Œå·¥ä½œæµèƒ½åšåˆ°çš„ï¼Œfsm çŠ¶æ€æœºä¹Ÿèƒ½åšåˆ°ï¼Œè€Œä¸” fsm çŠ¶æ€æœºæˆ–è®¸èƒ½æ‹†çš„æ›´ç»†ï¼Œä½†æ˜¯å·¥ä½œæµçš„ä¸€ä¸ªä¸ª functionï¼Œæˆ–è€…æ˜¯ function çš„é›†åˆ dialogï¼Œå¯ä»¥äº’ç›¸ç»„åˆï¼Œå¼€å‘èµ·æ¥æ›´ç¬¦åˆå¤§éƒ¨åˆ†äººçš„ç›´è§‰ã€‚\n  routing dialog\n// hotels.js module.exports = [  // Destination  function (session) {  session.send(\u0026#39;Welcome to the Hotels finder!\u0026#39;);  builder.Prompts.text(session, \u0026#39;Please enter your destination\u0026#39;);  },  function (session, results, next) {  session.dialogData.destination = results.response;  session.send(\u0026#39;Looking for hotels in %s\u0026#39;, results.response);  next();  },  ... ];  // app.js var bot = new builder.UniversalBot(connector, [  function (session) {  // ...  },  // ... ]);  bot.dialog(\u0026#39;hotels\u0026#39;, require(\u0026#39;./hotels\u0026#39;)); bot.dialog(\u0026#39;flights\u0026#39;, require(\u0026#39;./flights\u0026#39;)); é€šè¿‡ routing dialogï¼Œæˆ‘ä»¬å¯ä»¥å®ç° dialog çš„å¤ç”¨ã€‚\n  waterfall dialog\nä¸€ä¸ªç€‘å¸ƒæµçš„ dialogï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸€ä¸ª dialog ä¸­åƒæµä¸€æ ·å®Œæˆä¸€ç³»åˆ—çš„åŠ¨ä½œã€‚å°±åƒ fsm çš„å¤šç§çŠ¶æ€çš„é›†åˆã€‚\n[  // Destination  function (session) {  session.send(\u0026#39;Welcome to the Hotels finder!\u0026#39;);  builder.Prompts.text(session, \u0026#39;Please enter your destination\u0026#39;);  },  function (session, results, next) {  session.dialogData.destination = results.response;  session.send(\u0026#39;Looking for hotels in %s\u0026#39;, results.response);  next();  },  ...  function (session) {  var destination = session.dialogData.destination;  var checkIn = new Date(session.dialogData.checkIn);  var checkOut = checkIn.addDays(session.dialogData.nights);   session.send(  \u0026#39;Ok. Searching for Hotels in %s from %d/%d to %d/%d...\u0026#39;,  destination,  checkIn.getMonth() + 1, checkIn.getDate(),  checkOut.getMonth() + 1, checkOut.getDate());   // Async search  Store  .searchHotels(destination, checkIn, checkOut)  .then(function (hotels) {  // Results  session.send(\u0026#39;I found in total %d hotels for your dates:\u0026#39;, hotels.length);   var message = new builder.Message()  .attachmentLayout(builder.AttachmentLayout.carousel)  .attachments(hotels.map(hotelAsAttachment));   session.send(message);   // End  session.endDialog();  });  } ]   state\nåœ¨ä¸€ä¸ª dialog ä¸Šä¸‹æ–‡ä¸­å…±äº«çš„æ•°æ®ï¼Œæˆ–è€…åœ¨å¤šä¸ª dialog ä¸­å…±äº«çš„æ•°æ®ã€‚å¯¹äºå¾®è½¯çš„ botbuilder æ¥è®²ï¼Œä»–ä»¬æä¾›äº†å¦‚ä¸‹å‡ ä¸ª APIï¼š\n   Field Use Cases     userData Stores information globally for the user across all conversations.   conversationData Stores information globally for a single conversation. This data is visible to everyone within the conversation so care should be used to whatâ€™s stored there. Itâ€™s disabled by default and needs to be enabled using the bots persistConversationData setting.   privateConversationData Stores information globally for a single conversation but its private data for the current user. This data spans all dialogs so itâ€™s useful for storing temporary state that you want cleaned up when the conversation ends.   dialogData Persists information for a single dialog instance. This is essential for storing temporary information in between the steps of a waterfall.      Conversation UI å¯¹è¯å¼ UIï¼ˆConversation UIï¼Œä¸‹æ–‡ç®€ç§° CUIï¼‰ã€‚\nCUI åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬æ—¥å¸¸è·ŸäººèŠå¤©çš„å¾®ä¿¡ã€çŸ­ä¿¡ç•Œé¢å°±æ˜¯ã€‚ç”±ä¸€æ¡æ¡æ¶ˆæ¯ç»„æˆï¼ŒæŒ‰æ—¶é—´å…ˆåå±•ç¤ºå‡ºæ¥ï¼Œå°±å¯ä»¥çœ‹ä½œ CUIã€‚\nchatbot åœ¨ä¸ç”¨æˆ·äº¤æµæ—¶ï¼Œä¸å•å•æ˜¯åªæœ‰æ–‡å­—ï¼Œè¿˜ä¼šéœ€è¦ç”¨æˆ·è¿›è¡Œäº’åŠ¨ï¼Œè¿™æ—¶å€™å°±æ˜¯ CUI çš„ç”¨æ­¦ä¹‹åœ°äº†ã€‚æˆ‘ä»¬å¯ä»¥å’Œç§»åŠ¨ç«¯è¿›è¡Œçº¦å®šï¼Œå¯¹ä¸€äº›ç‰¹å®šçš„æ¶ˆæ¯æ ¼å¼è¿›è¡Œæ¸²æŸ“ï¼Œè¿™æ ·å°±å¯ä»¥åšå‡ºæŒ‰é’®ï¼Œåˆ—è¡¨ç­‰ã€‚\nBot Service ä½œä¸ºä¸€ä¸ªæœºå™¨äººæ¡†æ¶ï¼Œå¼€å‘å®Œæˆä¹‹åï¼Œè¿˜éœ€è¦å’Œ telegramï¼ŒFacebook messengerï¼Œslack ç­‰ IM å¹³å°è¿›è¡Œå¯¹æ¥ï¼Œå¦‚æœè¦å¼€å‘è€…ä¸€ä¸ªä¸ªå¯¹æ¥çš„è¯ï¼Œå°†ä¼šç‰¹åˆ«éº»çƒ¦ã€‚ä½œä¸º chatbot å¼€å‘æ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œbot service çš„å·¥ä½œå°±æ˜¯å¯¹æ¥ IM å¹³å°ã€‚\nBot Builder æºç é˜…è¯» å¾®è½¯çš„ botbuilder-js å‡ºåˆ°äº† V4 ç‰ˆæœ¬ï¼Œåœ¨æ–°ç‰ˆæœ¬çš„æœºå™¨äººæ¡†æ¶æœ‰ç€å¾ˆå¤§çš„å˜åŠ¨ï¼Œç›¸æ¯”äº V3 ç›®å½•ç»“æ„å˜åŒ–äº†ï¼Œè€Œä¸”æœºå™¨äººç¼–å†™æµç¨‹ä¹Ÿæœ‰äº†ä¸€å®šçš„å·®å¼‚ã€‚\né¡¹ç›®ç»“æ„\nâ”œâ”€â”€ botbuilder â”œâ”€â”€ botbuilder-ai â”œâ”€â”€ botbuilder-azure â”œâ”€â”€ botbuilder-core â”œâ”€â”€ botbuilder-dialogs â”œâ”€â”€ botframework-config â”œâ”€â”€ botframework-connector â”œâ”€â”€ botframework-schema ç›®å½•ç»“æ„æ›´åŠ çš„ç»„ä»¶åŒ–ã€‚\nå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨å¾®è½¯çš„æœåŠ¡ï¼Œé‚£ä¹ˆ botbuilder-ai å’Œ botbuilder-azure å…¶å®ä¸é‡è¦ã€‚\nbotbuilder botbuilder æ˜¯æ¡†æ¶çš„å…¥å£ï¼Œåœ¨è¿™ä¸ª package ä¸­åšçš„äº‹æƒ…æ¯”è¾ƒç®€å•ï¼š\nexport * from \u0026#39;./botFrameworkAdapter\u0026#39;; export * from \u0026#39;./fileTranscriptStore\u0026#39;; export * from \u0026#39;../../botbuilder-core/lib\u0026#39;; å¯¼å‡º botbuilder-core å’Œç»§æ‰¿äº† botAdapter çš„å­ç±» botFrameworkAdapterã€‚\nfileTranscriptStore æ˜¯å­˜å‚¨æ¯ä¸ª activity çš„ transcript åˆ°æ–‡ä»¶ä¸­ï¼ŒTranscript æ˜¯äººå’Œ bot çš„å¯¹è¯åŠ¨ä½œçš„æ—¥å¿—ã€‚\nå¦‚æœæˆ‘ä»¬è¦å®šåˆ¶è‡ªå·±çš„ bot åŠ¨ä½œï¼Œå…¶å®å°±å¯ä»¥ç»§æ‰¿ botAdapterï¼Œç„¶åå¯¹æ¥è‡ªå·±çš„ IM ç­‰ç­‰ã€‚botAdapter ä¹Ÿæ˜¯ botbuilder-core ä¸­çš„ï¼Œæ‰€ä»¥ botbuilder-core æ˜¯æ ¸å¿ƒï¼Œåªè¦è¯»æ‡‚äº† botbuilder-coreï¼Œå°±å¯ä»¥è¯´æ˜¯ç†è§£äº†å¾®è½¯çš„æœºå™¨äººæ¡†æ¶ã€‚\nbotbuilder-core çœ‹ botbuilder-coreï¼Œä¹Ÿä» index.ts å¼€å§‹ã€‚\nexport * from \u0026#39;../../botframework-schema/lib\u0026#39;; export * from \u0026#39;./autoSaveStateMiddleware\u0026#39;; export * from \u0026#39;./botAdapter\u0026#39;; export * from \u0026#39;./botState\u0026#39;; export * from \u0026#39;./botStatePropertyAccessor\u0026#39;; export * from \u0026#39;./botStateSet\u0026#39;; export * from \u0026#39;./browserStorage\u0026#39;; export * from \u0026#39;./cardFactory\u0026#39;; export * from \u0026#39;./conversationState\u0026#39;; export * from \u0026#39;./memoryStorage\u0026#39;; export * from \u0026#39;./memoryTranscriptStore\u0026#39;; export * from \u0026#39;./messageFactory\u0026#39;; export * from \u0026#39;./middlewareSet\u0026#39;; export * from \u0026#39;./privateConversationState\u0026#39;; export * from \u0026#39;./propertyManager\u0026#39;; export * from \u0026#39;./recognizerResult\u0026#39;; export * from \u0026#39;./showTypingMiddleware\u0026#39;; export * from \u0026#39;./storage\u0026#39;; export * from \u0026#39;./testAdapter\u0026#39;; export * from \u0026#39;./transcriptLogger\u0026#39;; export * from \u0026#39;./turnContext\u0026#39;; export * from \u0026#39;./userState\u0026#39;; è¿™é‡Œå¼•å…¥äº†ä¸€ä¸ª botframework-schemaï¼Œé€šè¿‡åå­—å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç±»å‹å®šä¹‰çš„åŒ…ï¼Œä¸»è¦æ˜¯æœºå™¨äºº Activity çš„ Schemaã€‚Activity æ˜¯äººå’Œ bot æ‰€åšçš„ä¼šè¯çš„ç¨‹åºçº§åˆ«çš„è¡¨ç¤ºï¼Œè¯¥ schema ä¸­åŒ…å«äº†æ–‡æœ¬åè®®ã€å¤šåª’ä½“å’Œéå†…å®¹åŠ¨ä½œï¼ˆå¦‚ç¤¾äº¤äº’åŠ¨å’Œæ‰“å­—æŒ‡ç¤ºç¬¦ï¼‰çš„è§„å®šã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/botbuilder/","summary":"åœ¨è¿™ç¯‡æ–‡ç« ä¸è€ƒè™‘äººå·¥æ™ºèƒ½ï¼Œè°ˆè°ˆæˆ‘å¯¹èŠå¤©æœºå™¨äººæ¡†æ¶å®ç°æœºåˆ¶çš„ç†è§£ã€‚\nèŠå¤©æœºå™¨äºº  èŠå¤©æœºå™¨äººï¼ˆChatterbotï¼‰æ˜¯ç»ç”±å¯¹è¯æˆ–æ–‡å­—è¿›è¡Œäº¤è°ˆçš„è®¡ç®—æœºç¨‹åº[1]ã€‚èƒ½å¤Ÿæ¨¡æ‹Ÿäººç±»å¯¹è¯ï¼Œé€šè¿‡å›¾çµæµ‹è¯•ã€‚\n æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç°æœ‰çš„ IM å·¥å…·ä¸Šå·²ç»æœ‰äº†å¾ˆå¤šæœºå™¨äººï¼Œå…¶å®èŠå¤©æœºå™¨äººä¸åªæ˜¯å•çº¯çš„å’Œç”¨æˆ·è¿›è¡ŒèŠå¤©ï¼Œä»–å…¶å®è¿˜å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ä¸€äº›è¯ï¼Œå¯ä»¥å¸®ç”¨æˆ·è®¢é¤ã€‚å¦å¤–åœ¨è¿ç»´é¢†åŸŸï¼Œä¹Ÿå‡ºç°äº† chatopsï¼Œé€šè¿‡å’Œæœºå™¨äººèŠå¤©ï¼Œè¿›è¡Œè¿ç»´æ“ä½œã€‚\næœºå™¨äººå¼€å‘æ¡†æ¶ ä½œä¸ºèŠå¤©æœºå™¨äººå¼€å‘è€…ï¼Œé¢å¯¹å¦‚æ­¤å¤šçš„ IM å·¥å…·å’Œ SDKï¼Œå¸¸ä¼šæ„Ÿåˆ°æ— æ‰€é€‚ä»ã€‚Bot å¼€å‘æ¡†æ¶å°±æ˜¯å¯¹èŠå¤©æœºå™¨äººå¼€å‘è¿‡ç¨‹ä¸­çš„äººå·¥å†…å®¹åšæŠ½è±¡åŒ–å¤„ç†ã€‚ç®€å•åœ°è§£é‡Šï¼Œæœºå™¨äººå¼€å‘æ¡†æ¶å°±æ˜¯ç”¨æ¥åˆ¶é€ æœºå™¨äººå¹¶å®šä¹‰å…¶è¡Œä¸ºã€‚\nç„¶è€Œå°½ç®¡å¾ˆå¤šæœºå™¨äººæ¡†æ¶å®£ç§°ã€Œä»£ç ä¸€æ—¦å†™å¥½å¯éƒ¨ç½²åˆ°ä»»ä½•åœ°æ–¹ã€ï¼Œä½†æ˜¯è¿˜ä¼šæ˜¯å‡ºç°ä¸ºæ¯ä¸€ä¸ª IM å·¥å…·å¼€å‘ä¸€ä¸ªå•ç‹¬çš„èŠå¤©æœºå™¨äººã€‚è€Œä¸€ä¸ªè‰¯å¥½çš„æœºå™¨äººæ¡†æ¶ä¸»è¦åŒ…å«å¼€å‘ SDKï¼Œè¿æ¥å™¨å’Œæ¨¡æ‹Ÿå™¨ç­‰ã€‚\nä½¿ç”¨æœºå™¨äººæ¡†æ¶å…¶å®å¹¶ä¸é€‚åˆåˆå­¦è€…å­¦ä¹ èŠå¤©æœºå™¨äººå¼€å‘ã€‚å®ƒä»¬å°è¯•è‡ªåŠ¨åŒ–å¤ªå¤šå·¥ä½œï¼Œå¯¹åˆå­¦è€…æ©ç›–äº†åŸºç¡€æœºåˆ¶ã€‚\nå®ç°æ–¹å¼  webhook äº‹ä»¶å›è°ƒ FSM çŠ¶æ€æœº workflow å·¥ä½œæµ  æœ€ç®€å•çš„æœºå™¨äººæ˜¯æ²¡æœ‰ä¸Šä¸‹æ–‡çš„è¯­ä¹‰ç†è§£çš„ä¸€é—®ä¸€ç­”ï¼Œä»…ä»…æ˜¯å¯¹ç”¨æˆ·çš„å¯¹è¯è¿›è¡Œå“åº”ï¼Œè¿™ç§å°±å¯ä»¥é‡‡ç”¨ webhook çš„æ–¹å¼è¿›è¡Œå¼€å‘ã€‚ä¸éœ€è¦é‡‡ç”¨ä»€ä¹ˆå¼€å‘æ¡†æ¶ã€‚\né‚£ä¹ˆå¯¹äºå¤šè½®å¯¹è¯çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿›è¡Œä¸€å®šçš„å¯¹è¯ç®¡ç†ã€‚ç”±æ­¤å¼•å…¥äº† FSM çŠ¶æ€æœºã€‚\nå¯èƒ½æœ‰äººä¸æ˜¯å¾ˆæ‡‚æœ‰é™çŠ¶æ€æœºï¼Œè¿™é‡Œåšä¸€ä¸‹ç®€å•è¯´æ˜ã€‚\n æœ‰é™çŠ¶æ€æœºåœ¨ç°å®ç”Ÿæ´»ä¸­å…¶å®éšå¤„å¯è§ï¼Œä¼¸ç¼©å¼åœ†ç ç¬”å…¶å®å°±æ˜¯ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºï¼ˆä¸¤ç§çŠ¶æ€äº’ç›¸è½¬æ¢ï¼‰ã€‚\næœ‰é™çŠ¶æ€æœºï¼Œç¼©å†™ä¸º FSMï¼Œåˆç§°ä¸ºæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼Œç®€ç§°çŠ¶æ€æœºã€‚æ˜¯è¡¨ç¤ºæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦æ¨¡å‹ã€‚\nå¯ä»¥æ€»ç»“ä¸ºï¼šf(state, action) =\u0026gt; stateâ€™\nä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå‡½æ•°é‡‡ç”¨å½“å‰çš„çŠ¶æ€å’Œä¸€æ¬¡è¡ŒåŠ¨ï¼ˆå³æ›´æ”¹çŠ¶æ€çš„æ–¹æ³•ï¼‰ï¼Œä¹‹åå°†è¯¥è¡ŒåŠ¨åº”ç”¨äºè¿™ç§çŠ¶æ€å¹¶è¿”å›æ–°çš„çŠ¶æ€ã€‚\nå¯ä»¥è®¤ä¸ºçŠ¶æ€æœºæ˜¯å›¾çµå®Œå¤‡çš„ã€‚\n æˆ‘ä»¬å¯ä»¥å°†å¯¹è¯çœ‹åšæ˜¯åœ¨æœ‰é™çŠ¶æ€å†…è·³è½¬çš„è¿‡ç¨‹ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æœ‰å¯¹åº”çš„åŠ¨ä½œå’Œå›å¤ï¼Œå¦‚æœèƒ½ä»å¼€å§‹èŠ‚ç‚¹é¡ºåˆ©çš„æµè½¬åˆ°ç»ˆæ­¢èŠ‚ç‚¹ï¼Œä»»åŠ¡å°±å®Œæˆäº†ã€‚\næˆ‘ä»¬å¯ä»¥å°†å¯¹è¯çš„è¿‡ç¨‹ï¼Œåˆ†ä¸ºä¸€ä¸ªä¸ªçš„çŠ¶æ€ï¼Œç„¶åä½¿ç”¨ DSL æ¥å®ç°ä¸€ä¸ª FSMï¼Œå¯¹äºå¼€å‘è€…æ¥è®²ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ä¸€ä¸ªä¸ªçŠ¶æ€å‡½æ•°å³å¯ã€‚\nç‰¹ç‚¹æ˜¯ï¼š\n äººä¸ºå®šä¹‰å¯¹è¯æµç¨‹ å®Œå…¨æœ‰ç³»ç»Ÿä¸»å¯¼ï¼Œç³»ç»Ÿé—®ç”¨æˆ·ç­” ç­”éæ‰€é—®çš„æƒ…å†µç›´æ¥å¿½ç•¥ å»ºæ¨¡ç®€å•ï¼Œèƒ½æ¸…æ™°æ˜äº†çš„æŠŠäº¤äº’åŒ¹é…åˆ°æ¨¡å‹ éš¾ä»¥æ‰©å±•ï¼Œå¾ˆå®¹æ˜“å˜çš„å¤æ‚ é€‚ç”¨äºç®€å•çš„ä»»åŠ¡ï¼Œéš¾ä»¥å¤„ç†å¤æ‚é—®é¢˜ ç¼ºå°‘çµæ´»æ€§ï¼Œè¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œè¾“å…¥æœ‰é™ï¼Œå¯¹è¯ç»“æ„å’Œæµè½¬è·¯å¾„æœ‰é™  ç¤ºä¾‹ï¼š\nconst {startWith, when, goto, stay, stop} = botkit.","title":"è°ˆè°ˆèŠå¤©æœºå™¨äººæ¡†æ¶çš„å®ç°åŸç†"},{"content":"å…¬å¸é¡¹ç›®ä¸­ä½¿ç”¨å…¬ç½‘ä¸Šçš„ä»¥å¤ªåŠç§é“¾ï¼Œäº¤æ˜“é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œäºæ˜¯è¿™å‡ å¤©éƒ½åœ¨é¼“æ£åŸºäºä»¥å¤ªåŠçš„è”ç›Ÿé“¾ï¼Œparity æ˜¯å¯ä»¥æ„å»ºå‡ºä¸€ä¸ªåŸºäº PoA å…±è¯†çš„ç§é“¾ï¼Œè€Œä¸”å…¼å®¹ä»¥å¤ªåŠçš„åˆçº¦ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è®°å½•è‡ªå·±çš„è¸©å‘ç»å†ï¼Œä¸»è¦å®ç°äº†èŠ‚ç‚¹çš„æ­å»ºï¼Œåˆçº¦çš„éƒ¨ç½²ä»¥åŠæœ¬åœ°ä»¥å¤ªåŠæµè§ˆå™¨çš„å¯åŠ¨ã€‚\néƒ¨ç½²è”ç›Ÿé“¾ parity çš„æ–‡æ¡£ï¼šhttps://wiki.parity.io/Demo-PoA-tutorial\nå®‰è£… é¦–å…ˆæ˜¯ä¸‹è½½ parityï¼Œåœ¨ mac ä¸‹æ˜¯ç›´æ¥ brew å®‰è£…å³å¯ã€‚\nbrew tap paritytech/paritytech  brew install parity åˆ›ä¸–åŒºå— åˆ›ä¸–åŒºå—çš„é…ç½®æ–‡ä»¶ï¼š\n// demo-spec.json { \u0026#34;name\u0026#34;: \u0026#34;DemoPoA\u0026#34;, \u0026#34;engine\u0026#34;: { \u0026#34;authorityRound\u0026#34;: { \u0026#34;params\u0026#34;: { \u0026#34;stepDuration\u0026#34;: \u0026#34;5\u0026#34;, \u0026#34;validators\u0026#34;: { \u0026#34;list\u0026#34;: [ \u0026#34;0x00bd138abd70e2f00903268f3db08f2d25677c9e\u0026#34;, \u0026#34;0x00aa39d30f0d20ff03a22ccfc30b7efbfca597c2\u0026#34; ] } } } }, \u0026#34;params\u0026#34;: { \u0026#34;gasLimitBoundDivisor\u0026#34;: \u0026#34;0x400\u0026#34;, \u0026#34;maximumExtraDataSize\u0026#34;: \u0026#34;0x20\u0026#34;, \u0026#34;minGasLimit\u0026#34;: \u0026#34;0x1388\u0026#34;, \u0026#34;networkID\u0026#34;: \u0026#34;0x2323\u0026#34;, \u0026#34;eip155Transition\u0026#34;: 0, \u0026#34;validateChainIdTransition\u0026#34;: 0, \u0026#34;eip140Transition\u0026#34;: 0, \u0026#34;eip211Transition\u0026#34;: 0, \u0026#34;eip214Transition\u0026#34;: 0, \u0026#34;eip658Transition\u0026#34;: 0 }, \u0026#34;genesis\u0026#34;: { \u0026#34;seal\u0026#34;: { \u0026#34;authorityRound\u0026#34;: { \u0026#34;step\u0026#34;: \u0026#34;0x0\u0026#34;, \u0026#34;signature\u0026#34;: \u0026#34;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\u0026#34; } }, \u0026#34;difficulty\u0026#34;: \u0026#34;0x20000\u0026#34;, \u0026#34;gasLimit\u0026#34;: \u0026#34;0x5B8D80\u0026#34; }, \u0026#34;accounts\u0026#34;: { \u0026#34;0x0000000000000000000000000000000000000001\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;builtin\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;ecrecover\u0026#34;, \u0026#34;pricing\u0026#34;: { \u0026#34;linear\u0026#34;: { \u0026#34;base\u0026#34;: 3000, \u0026#34;word\u0026#34;: 0 } } } }, \u0026#34;0x0000000000000000000000000000000000000002\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;builtin\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;sha256\u0026#34;, \u0026#34;pricing\u0026#34;: { \u0026#34;linear\u0026#34;: { \u0026#34;base\u0026#34;: 60, \u0026#34;word\u0026#34;: 12 } } } }, \u0026#34;0x0000000000000000000000000000000000000003\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;builtin\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;ripemd160\u0026#34;, \u0026#34;pricing\u0026#34;: { \u0026#34;linear\u0026#34;: { \u0026#34;base\u0026#34;: 600, \u0026#34;word\u0026#34;: 120 } } } }, \u0026#34;0x0000000000000000000000000000000000000004\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;builtin\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;identity\u0026#34;, \u0026#34;pricing\u0026#34;: { \u0026#34;linear\u0026#34;: { \u0026#34;base\u0026#34;: 15, \u0026#34;word\u0026#34;: 3 } } } }, \u0026#34;0x004ec07d2329997267ec62b4166639513386f32e\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;10000000000000000000000\u0026#34; } } } node0 node0 èŠ‚ç‚¹ï¼š\n## node0.toml  [parity] chain = \u0026#34;demo-spec.json\u0026#34; base_path = \u0026#34;parity0\u0026#34;  [network] port = 30300  [rpc] port = 8546 apis = [\u0026#34;web3\u0026#34;, \u0026#34;eth\u0026#34;, \u0026#34;net\u0026#34;, \u0026#34;personal\u0026#34;, \u0026#34;parity\u0026#34;, \u0026#34;parity_set\u0026#34;, \u0026#34;traces\u0026#34;, \u0026#34;rpc\u0026#34;, \u0026#34;parity_accounts\u0026#34;] interface = \u0026#34;0.0.0.0\u0026#34; cors = [\u0026#34;*\u0026#34;] hosts = [\u0026#34;all\u0026#34;]   [websockets] port = 8456   [account] password = [\u0026#34;node.pwds\u0026#34;]   [mining] engine_signer = \u0026#34;0x00bd138abd70e2f00903268f3db08f2d25677c9e\u0026#34; reseal_on_txs = \u0026#34;none\u0026#34; node1 node1 èŠ‚ç‚¹ï¼š\n## node1.toml  [parity] chain = \u0026#34;demo-spec.json\u0026#34; base_path = \u0026#34;parity1\u0026#34;   [network] port = 30301   [rpc] port = 8541 apis = [\u0026#34;web3\u0026#34;, \u0026#34;eth\u0026#34;, \u0026#34;net\u0026#34;, \u0026#34;personal\u0026#34;, \u0026#34;parity\u0026#34;, \u0026#34;parity_set\u0026#34;, \u0026#34;traces\u0026#34;, \u0026#34;rpc\u0026#34;, \u0026#34;parity_accounts\u0026#34;]    [websockets] port = 8451   [ipc] disable = true   [account] password = [\u0026#34;node.pwds\u0026#34;]   [mining] engine_signer = \u0026#34;0x00aa39d30f0d20ff03a22ccfc30b7efbfca597c2\u0026#34; reseal_on_txs = \u0026#34;none\u0026#34;   [ui] disable = true å¯åŠ¨å¹¶åˆ›å»ºè´¦æˆ· å¯åŠ¨\nparity --config node0.toml --fat-db=on parity --config node1.toml --fat-db=on åˆ›å»ºè´¦æˆ·ï¼š\ncurl --data \u0026#39;{\u0026#34;jsonrpc\u0026#34;:\u0026#34;2.0\u0026#34;,\u0026#34;method\u0026#34;:\u0026#34;parity_newAccountFromPhrase\u0026#34;,\u0026#34;params\u0026#34;:[\u0026#34;node0\u0026#34;, \u0026#34;node0\u0026#34;],\u0026#34;id\u0026#34;:0}\u0026#39; -H \u0026#34;Content-Type: application/json\u0026#34; -X POST localhost:8546 curl --data \u0026#39;{\u0026#34;jsonrpc\u0026#34;:\u0026#34;2.0\u0026#34;,\u0026#34;method\u0026#34;:\u0026#34;parity_newAccountFromPhrase\u0026#34;,\u0026#34;params\u0026#34;:[\u0026#34;user\u0026#34;, \u0026#34;user\u0026#34;],\u0026#34;id\u0026#34;:0}\u0026#39; -H \u0026#34;Content-Type: application/json\u0026#34; -X POST localhost:8546 curl --data \u0026#39;{\u0026#34;jsonrpc\u0026#34;:\u0026#34;2.0\u0026#34;,\u0026#34;method\u0026#34;:\u0026#34;parity_newAccountFromPhrase\u0026#34;,\u0026#34;params\u0026#34;:[\u0026#34;node1\u0026#34;, \u0026#34;node1\u0026#34;],\u0026#34;id\u0026#34;:0}\u0026#39; -H \u0026#34;Content-Type: application/json\u0026#34; -X POST localhost:8541 è¿™æ ·å°±åˆ›å»ºäº† 3 ä¸ªè´¦æˆ·ï¼Œå…¶ä¸­ node0 å’Œ node1 æ˜¯è§è¯è€… user æ˜¯åˆå§‹å‘é’±çš„ã€‚\nå› ä¸º parity ui æ˜¯è¦è¿æ¥ 8546 ç«¯å£ï¼Œæ‰€ä»¥è¿™é‡Œå°±è®© node0 çš„ rpc çš„ç«¯å£æ˜¯ 8546ã€‚\nèŠ‚ç‚¹äº’é€šå’Œè½¬è´¦ è®© node0 å’Œ node1 èŠ‚ç‚¹ç›¸é€šï¼Œå…¶å®å°±æ˜¯è®©ä¸¤ä¸ªèŠ‚ç‚¹æˆä¸ºä¸€ä¸ªç½‘ç»œï¼š\n// è·å–node0çš„encode curl --data \u0026#39;{\u0026#34;jsonrpc\u0026#34;:\u0026#34;2.0\u0026#34;,\u0026#34;method\u0026#34;:\u0026#34;parity_enode\u0026#34;,\u0026#34;params\u0026#34;:[],\u0026#34;id\u0026#34;:0}\u0026#39; -H \u0026#34;Content-Type: application/json\u0026#34; -X POST localhost:8546  // è°ƒç”¨node1çš„rpcï¼Œå°†node0åŠ å…¥ï¼Œ RESULTå°±æ˜¯ä¸Šä¸€æ­¥è·å–çš„ curl --data \u0026#39;{\u0026#34;jsonrpc\u0026#34;:\u0026#34;2.0\u0026#34;,\u0026#34;method\u0026#34;:\u0026#34;parity_addReservedPeer\u0026#34;,\u0026#34;params\u0026#34;:[\u0026#34;enode://RESULT\u0026#34;],\u0026#34;id\u0026#34;:0}\u0026#39; -H \u0026#34;Content-Type: application/json\u0026#34; -X POST localhost:8541 æˆ‘ä»¬å…ˆç»™ä¸¤ä¸ªè´¦æˆ·è½¬è´¦ï¼š\ncurl --data \u0026#39;{\u0026#34;jsonrpc\u0026#34;:\u0026#34;2.0\u0026#34;,\u0026#34;method\u0026#34;:\u0026#34;personal_sendTransaction\u0026#34;,\u0026#34;params\u0026#34;:[{\u0026#34;from\u0026#34;:\u0026#34;0x004ec07d2329997267Ec62b4166639513386F32e\u0026#34;,\u0026#34;to\u0026#34;:\u0026#34;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e\u0026#34;,\u0026#34;value\u0026#34;:\u0026#34;0xde0b6b3a7640000\u0026#34;}, \u0026#34;user\u0026#34;],\u0026#34;id\u0026#34;:0}\u0026#39; -H \u0026#34;Content-Type: application/json\u0026#34; -X POST localhost:8540 ä» user ä¸­è½¬äº† 1 ä¸ªä»¥å¤ªåŠåˆ°äº† node0 è´¦æˆ·ä¸­ï¼ŒåŒæ ·å†è½¬ç»™ node1ã€‚\néƒ¨ç½²åˆçº¦ å†ä½¿ç”¨ truffle å¼€å‘å®Œåˆçº¦ä¹‹åï¼ŒæŠŠè´¦æˆ·éƒ¨ç½²åˆ°æˆ‘ä»¬åˆšåˆšèµ·æ¥çš„è”ç›Ÿé“¾ã€‚éƒ¨ç½²åˆçº¦éœ€è¦æ¶ˆè€—ä¸€å®šçš„ gasï¼Œtruffle ä½¿ç”¨çš„æ˜¯ HD wallet çš„ Providerï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆç»™ä¸€ä¸ªé’±åŒ…è½¬ä¸€äº›ä»¥å¤ªå¸ã€‚\nå› ä¸ºè¿™é‡Œç”¨çš„æ˜¯ metamaskï¼Œåœ¨æœ€åˆåˆ›å»ºé’±åŒ…çš„æ—¶å€™æœ‰è®¾ç½® 12 ä¸ªåŠ©è®°è¯ï¼Œæ‰€ä»¥å…ˆè®©é’±åŒ…è¿æ¥åˆ° node0 èŠ‚ç‚¹ï¼š\nåˆ›å»ºä¸€ä¸ªè´¦æˆ·ï¼Œå‘é‚£ä¸ªè´¦æˆ·è½¬å‡ ä¸ªä»¥å¤ªå¸ã€‚\nç„¶ååœ¨ truffle ä¸­ï¼Œé…ç½®å¦‚ä¸‹ï¼š\n// truffle.js  module.exports = {  // See \u0026lt;http://truffleframework.com/docs/advanced/configuration\u0026gt;  // to customize your Truffle configuration!  networks: {  development: {  host: \u0026#34;127.0.0.1\u0026#34;,  port: 8545,  network_id: \u0026#34;*\u0026#34;  },  parity: {  provider: function () {  return new HDWalletProvider(\u0026#39;è¿™é‡Œå†™åŠ©è®°è¯\u0026#39;, \u0026#34;http://127.0.0.1:8546\u0026#34;)  },  network_id: 3,  gas: 4700000  }  } }; ç„¶ååœ¨æ‰§è¡Œéƒ¨ç½²åˆçº¦çš„æ—¶å€™ï¼ŒæŒ‡å®š parity å³å¯ï¼š\ntruffle migrate --network parity éƒ¨ç½²ä»¥å¤ªåŠæµè§ˆå™¨ ä»¥å¤ªåŠçš„æµè§ˆå™¨æ‰¾äº†å¥½å‡ ä¸ªï¼Œæœ€åé€‰ä¸­äº†etherchain-lightã€‚éƒ¨ç½²èµ·æ¥ç®€å•ã€‚\né¦–å…ˆ clone ä»£ç åˆ°æœ¬åœ°ï¼Œç„¶å npm å®‰è£…ä¾èµ–ã€‚\ngit clone https://github.com/gobitfly/etherchain-light --recursive  cd etherchain-light \u0026amp;\u0026amp; yarn ä¸€å®šè¦ç”¨â€”-recursiveï¼Œå°†æ‰€æœ‰ git çš„å­æ¨¡å—éƒ½ä¸‹è½½ä¸‹æ¥ã€‚\nä¿®æ”¹ config.js.example æ–‡ä»¶ä¸º config.jsï¼Œç„¶åæŠŠ Provider æ”¹ä¸º HttpProviderï¼Œè¿æ¥åˆ° node0 çš„èŠ‚ç‚¹å³å¯ã€‚\n// config.js var web3 = require(\u0026#39;web3\u0026#39;); var net = require(\u0026#39;net\u0026#39;);  var config = function () {   this.logFormat = \u0026#34;combined\u0026#34;;  // this.ipcPath = process.env[\u0026#34;HOME\u0026#34;] + \u0026#34;/.local/share/io.parity.ethereum/jsonrpc.ipc\u0026#34;;  // this.provider = new web3.providers.IpcProvider(this.ipcPath, net);   this.provider = new web3.providers.HttpProvider(\u0026#34;http://127.0.0.1:8546\u0026#34;)   // ... çœç•¥å…¶ä½™ä»£ç  }  module.exports = config; æ‰§è¡Œnpm startä¹‹åå³å¯å°†ä»¥å¤ªåŠæµè§ˆå™¨è¿è¡Œèµ·æ¥ã€‚ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—®http://localhost:3000ã€‚\næ€è€ƒ PoA å…±è¯†åŸºäºæƒå¨çš„å…±è¯†æœºåˆ¶ï¼Œå’ŒåŸºäº raft åè®®çš„å…±è¯†æœºåˆ¶å…·ä½“å“ªä¸ªæ›´å¿«ï¼Ÿ\nParity æ–‡æ¡£ä¸­æ²¡æœ‰æ‰¾åˆ°å’Œæƒé™æ§åˆ¶ç›¸å…³çš„æ¨¡å—ï¼Œç”¨å®ƒæ¥åšè”ç›Ÿé“¾è¿˜æœ‰å¾…ç¡®å®šã€‚\nQuorum æ˜¯ JP æ‘©æ ¹å¼€æºçš„åŸºäºä»¥å¤ªåŠçš„è”ç›Ÿé“¾ï¼Œä½¿ç”¨çš„ raft ç®—æ³•ï¼Œå¯ä»¥ç ”ç©¶ç ”ç©¶ã€‚\nè¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œfabric å·²ç»æ˜¯è”ç›Ÿé“¾ä¸»æµçš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©ä»¥å¤ªåŠåšè”ç›Ÿé“¾çš„å¥½å¤„æœ‰å¤šå¤§ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/parity/","summary":"å…¬å¸é¡¹ç›®ä¸­ä½¿ç”¨å…¬ç½‘ä¸Šçš„ä»¥å¤ªåŠç§é“¾ï¼Œäº¤æ˜“é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œäºæ˜¯è¿™å‡ å¤©éƒ½åœ¨é¼“æ£åŸºäºä»¥å¤ªåŠçš„è”ç›Ÿé“¾ï¼Œparity æ˜¯å¯ä»¥æ„å»ºå‡ºä¸€ä¸ªåŸºäº PoA å…±è¯†çš„ç§é“¾ï¼Œè€Œä¸”å…¼å®¹ä»¥å¤ªåŠçš„åˆçº¦ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è®°å½•è‡ªå·±çš„è¸©å‘ç»å†ï¼Œä¸»è¦å®ç°äº†èŠ‚ç‚¹çš„æ­å»ºï¼Œåˆçº¦çš„éƒ¨ç½²ä»¥åŠæœ¬åœ°ä»¥å¤ªåŠæµè§ˆå™¨çš„å¯åŠ¨ã€‚\néƒ¨ç½²è”ç›Ÿé“¾ parity çš„æ–‡æ¡£ï¼šhttps://wiki.parity.io/Demo-PoA-tutorial\nå®‰è£… é¦–å…ˆæ˜¯ä¸‹è½½ parityï¼Œåœ¨ mac ä¸‹æ˜¯ç›´æ¥ brew å®‰è£…å³å¯ã€‚\nbrew tap paritytech/paritytech  brew install parity åˆ›ä¸–åŒºå— åˆ›ä¸–åŒºå—çš„é…ç½®æ–‡ä»¶ï¼š\n// demo-spec.json { \u0026#34;name\u0026#34;: \u0026#34;DemoPoA\u0026#34;, \u0026#34;engine\u0026#34;: { \u0026#34;authorityRound\u0026#34;: { \u0026#34;params\u0026#34;: { \u0026#34;stepDuration\u0026#34;: \u0026#34;5\u0026#34;, \u0026#34;validators\u0026#34;: { \u0026#34;list\u0026#34;: [ \u0026#34;0x00bd138abd70e2f00903268f3db08f2d25677c9e\u0026#34;, \u0026#34;0x00aa39d30f0d20ff03a22ccfc30b7efbfca597c2\u0026#34; ] } } } }, \u0026#34;params\u0026#34;: { \u0026#34;gasLimitBoundDivisor\u0026#34;: \u0026#34;0x400\u0026#34;, \u0026#34;maximumExtraDataSize\u0026#34;: \u0026#34;0x20\u0026#34;, \u0026#34;minGasLimit\u0026#34;: \u0026#34;0x1388\u0026#34;, \u0026#34;networkID\u0026#34;: \u0026#34;0x2323\u0026#34;, \u0026#34;eip155Transition\u0026#34;: 0, \u0026#34;validateChainIdTransition\u0026#34;: 0, \u0026#34;eip140Transition\u0026#34;: 0, \u0026#34;eip211Transition\u0026#34;: 0, \u0026#34;eip214Transition\u0026#34;: 0, \u0026#34;eip658Transition\u0026#34;: 0 }, \u0026#34;genesis\u0026#34;: { \u0026#34;seal\u0026#34;: { \u0026#34;authorityRound\u0026#34;: { \u0026#34;step\u0026#34;: \u0026#34;0x0\u0026#34;, \u0026#34;signature\u0026#34;: \u0026#34;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\u0026#34; } }, \u0026#34;difficulty\u0026#34;: \u0026#34;0x20000\u0026#34;, \u0026#34;gasLimit\u0026#34;: \u0026#34;0x5B8D80\u0026#34; }, \u0026#34;accounts\u0026#34;: { \u0026#34;0x0000000000000000000000000000000000000001\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;builtin\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;ecrecover\u0026#34;, \u0026#34;pricing\u0026#34;: { \u0026#34;linear\u0026#34;: { \u0026#34;base\u0026#34;: 3000, \u0026#34;word\u0026#34;: 0 } } } }, \u0026#34;0x0000000000000000000000000000000000000002\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;builtin\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;sha256\u0026#34;, \u0026#34;pricing\u0026#34;: { \u0026#34;linear\u0026#34;: { \u0026#34;base\u0026#34;: 60, \u0026#34;word\u0026#34;: 12 } } } }, \u0026#34;0x0000000000000000000000000000000000000003\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;builtin\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;ripemd160\u0026#34;, \u0026#34;pricing\u0026#34;: { \u0026#34;linear\u0026#34;: { \u0026#34;base\u0026#34;: 600, \u0026#34;word\u0026#34;: 120 } } } }, \u0026#34;0x0000000000000000000000000000000000000004\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;builtin\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;identity\u0026#34;, \u0026#34;pricing\u0026#34;: { \u0026#34;linear\u0026#34;: { \u0026#34;base\u0026#34;: 15, \u0026#34;word\u0026#34;: 3 } } } }, \u0026#34;0x004ec07d2329997267ec62b4166639513386f32e\u0026#34;: { \u0026#34;balance\u0026#34;: \u0026#34;10000000000000000000000\u0026#34; } } } node0 node0 èŠ‚ç‚¹ï¼š","title":"åŸºäºä»¥å¤ªåŠçš„ Parity è”ç›Ÿé“¾éƒ¨ç½²"},{"content":"redis æŒä¹…åŒ–ï¼Œ\næœºåˆ¶æœ‰ä¸¤ç§ï¼š\n å¿«ç…§ï¼šå…¨é‡å¤‡ä»½ï¼ŒäºŒè¿›åˆ¶åºåˆ—åŒ–ï¼Œå­˜å‚¨ç´§å‡‘ AOF æ—¥å¿—ï¼šè¿ç»­çš„å¢é‡å¤‡ä»½ï¼Œå†…å­˜æ•°æ®ä¿®æ”¹çš„æ–‡æœ¬  ","permalink":"https://zhenfeng-zhu.github.io/post/dive-into-redis/","summary":"redis æŒä¹…åŒ–ï¼Œ\næœºåˆ¶æœ‰ä¸¤ç§ï¼š\n å¿«ç…§ï¼šå…¨é‡å¤‡ä»½ï¼ŒäºŒè¿›åˆ¶åºåˆ—åŒ–ï¼Œå­˜å‚¨ç´§å‡‘ AOF æ—¥å¿—ï¼šè¿ç»­çš„å¢é‡å¤‡ä»½ï¼Œå†…å­˜æ•°æ®ä¿®æ”¹çš„æ–‡æœ¬  ","title":"dive-into-redis"},{"content":"ä¸€  x509 error when using HTTPS inside a Docker container\n å› ä¸º docker ä¸­æ²¡æœ‰ CA è¯ä¹¦ã€‚\næ™®é€šçš„é•œåƒè§£å†³åŠæ³•\nFROM ubuntu:14.04.1  RUN apt-get update RUN apt-get install -y ca-certificates  CMD curl https://www.google.com å¦‚æœæ˜¯ alpine çš„å‚è€ƒè¿™ä¸ªï¼š\nFROM docker.finogeeks.club/base/alpine MAINTAINER \u0026#34;zhuzhenfeng@finogeeks.club\u0026#34;  RUN set -ex \\  \u0026amp;\u0026amp; apk add --no-cache ca-certificates  COPY src/wallet/wallet /opt/wallet  ENTRYPOINT /opt/wallet äºŒ  panic: runtime error: invalid memory address or nil pointer dereference [signal 0xb code=0x1 addr=0x38 pc=0x26df]\n \u0026ldquo;An error is returned if caused by client policy (such as CheckRedirect), or if there was an HTTP protocol error. A non-2xx response doesn\u0026rsquo;t cause an error.\nWhen err is nil, resp always contains a non-nil resp.Body.\u0026rdquo;\næ˜¯ http è¯·æ±‚çš„æ—¶å€™ï¼Œdefer res.Body.Close()å¼•èµ·çš„ï¼Œåº”è¯¥åœ¨ err æ£€æŸ¥ä¹‹åã€‚\nTheÂ deferÂ only defers the function call. The field and method are accessed immediately.\n","permalink":"https://zhenfeng-zhu.github.io/post/golang%E8%B8%A9%E5%9D%91/","summary":"ä¸€  x509 error when using HTTPS inside a Docker container\n å› ä¸º docker ä¸­æ²¡æœ‰ CA è¯ä¹¦ã€‚\næ™®é€šçš„é•œåƒè§£å†³åŠæ³•\nFROM ubuntu:14.04.1  RUN apt-get update RUN apt-get install -y ca-certificates  CMD curl https://www.google.com å¦‚æœæ˜¯ alpine çš„å‚è€ƒè¿™ä¸ªï¼š\nFROM docker.finogeeks.club/base/alpine MAINTAINER \u0026#34;zhuzhenfeng@finogeeks.club\u0026#34;  RUN set -ex \\  \u0026amp;\u0026amp; apk add --no-cache ca-certificates  COPY src/wallet/wallet /opt/wallet  ENTRYPOINT /opt/wallet äºŒ  panic: runtime error: invalid memory address or nil pointer dereference [signal 0xb code=0x1 addr=0x38 pc=0x26df]","title":"golang è¸©å‘"},{"content":"æœ€è¿‘å› å…¬å¸é¡¹ç›®éœ€è¦ï¼Œåšä¸ºä¸€ä¸ªæ‰“æ‚å·¥ç¨‹å¸ˆï¼Œæ“èµ·é”®ç›˜å’Œç¬”è®°æœ¬å¼€å§‹äº†ä»¥å¤ªåŠçš„è¸©å‘ä¹‹æ—…ã€‚ä»¥å¤ªåŠçš„å¼€å‘æ¯”è¾ƒæ–°ï¼Œå˜åŒ–ä¹Ÿæ¯”è¾ƒå¤šï¼Œè¿˜å¥½æœ‰@cctanfujunçš„æ‰‹æŠŠæ‰‹å¸¦é¢†ä¸‹ï¼ŒåŠåªè„šè¸å…¥äº†ä»¥å¤ªåŠçš„å¼€å‘çš„å¤§é—¨ã€‚\nåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä¼šç®€å•ä»‹ç»ä¸€ä¸‹ä»¥å¤ªåŠçš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠæˆ‘ç°åœ¨ç”¨åˆ°çš„ä¸€äº›å·¥å…·ï¼Œè¿˜æœ‰å…·ä½“çš„ä¸€ä¸ªå¼€å‘æµç¨‹ã€‚å› ä¸ºæˆ‘è¿˜æ²¡æœ‰æ¥è§¦åˆ°å¦‚ä½•ä¸Šä¸»é“¾ï¼Œæ‰€ä»¥è¿™äº›éƒ½æ˜¯åŸºäºæµ‹è¯•é“¾è®²è§£ã€‚å¸Œæœ›èƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€äº›å¸®åŠ©ã€‚\nä»€ä¹ˆæ˜¯åŒºå—é“¾\nç›¸ä¿¡å¤§å®¶å¯¹åŒºå—é“¾éƒ½æœ‰è‡ªå·±çš„ç†è§£ï¼Œä¸ä»…ä»…æ˜¯äº’è”ç½‘å…¬å¸ï¼Œä¼ ç»Ÿä¼ä¸šä¹Ÿåœ¨â€œå¸æ”¹è½¬å‹â€ã€‚\n**ç®€è¨€ä¹‹ï¼ŒåŒºå—é“¾å°±æ˜¯æ•°æ®åº“ã€‚**å®ƒæ˜¯ç‰¹å®šæ•°æ®çš„æ•°æ®åº“ï¼Œé‡Œé¢çš„æ•°æ®ä¸æ–­å¢é•¿ï¼Œå…·æœ‰éå‡¡ç‰¹æ€§ï¼š\n ä¸€æ—¦æ•°æ®å­˜å‚¨äºæ•°æ®åº“ï¼Œæ°¸è¿œéƒ½æ— æ³•è¢«ä¿®æ”¹æˆ–åˆ é™¤ã€‚åŒºå—é“¾ä¸Šçš„æ¯ä¸ªè®°å½•ä¼šè¢«æ°¸ä¹…ä¿å­˜ä¸‹æ¥ã€‚ æ²¡æœ‰å•ç‹¬çš„ä¸ªäººæˆ–ç»„ç»‡èƒ½ç»´æŠ¤è¯¥æ•°æ®åº“ã€‚å¿…é¡»è¦ä¸Šåƒä¸ªäººæ‰è¡Œï¼Œæ¯ä¸ªäººéƒ½æœ‰æ•°æ®åº“çš„å‰¯æœ¬ã€‚  ä»€ä¹ˆæ˜¯ä»¥å¤ªåŠï¼Ÿ\n ä»¥å¤ªåŠï¼ˆè‹±è¯­ï¼šEthereumï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„æœ‰æ™ºèƒ½åˆçº¦åŠŸèƒ½çš„å…¬å…±åŒºå—é“¾å¹³å°[1][2]ã€‚é€šè¿‡å…¶ä¸“ç”¨åŠ å¯†è´§å¸ä»¥å¤ªå¸ï¼ˆEtherï¼Œåˆç§°â€œä»¥å¤ªå¸â€ï¼‰æä¾›å»ä¸­å¿ƒåŒ–çš„è™šæ‹Ÿæœºï¼ˆç§°ä¸ºâ€œä»¥å¤ªè™šæ‹Ÿæœºâ€Ethereum Virtual Machineï¼‰æ¥å¤„ç†ç‚¹å¯¹ç‚¹åˆçº¦ã€‚\n ä¸ºä»€ä¹ˆé€‰æ‹©ä»¥å¤ªåŠï¼Ÿ\n  æ™ºèƒ½åˆçº¦\n  ä»£å¸\n  èµ„æ–™ç›¸å¯¹å®Œå–„ï¼Œç›¸å¯¹å®¹æ˜“å¼€å‘\n  å¤§ä½¬å¯¹ä»¥å¤ªåŠæ¯”è¾ƒç†Ÿæ‚‰\n  å¤§ä½¬å¯¹ä»¥å¤ªåŠæ¯”è¾ƒç†Ÿæ‚‰\n  å¤§ä½¬å¯¹ä»¥å¤ªåŠæ¯”è¾ƒç†Ÿæ‚‰\n  é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œæœ‰ä¸€ä¸ªç»éªŒä¸°å¯Œçš„äººå¸¦é¢†ï¼Œåšä¸œè¥¿è‚¯å®šäº‹åŠåŠŸå€ã€‚\nè‡ªå·±åŠ¨æ‰‹å†™åŒºå—é“¾\nè¿™é‡Œæä¾›ä¸¤ä¸ªæ•™ç¨‹ï¼Œä¸€ä¸ªæ˜¯ä¹¦ï¼Œä¸€ä¸ªæ˜¯è§†é¢‘ã€‚å…¶ä¸­è§†é¢‘å’Œä¹¦æ˜¯å¯¹åº”çš„ï¼Œä¸æ¸…æ¥šæ˜¯ä¸æ˜¯åŒä¸€ä¸ªä½œè€…ã€‚\nBlockchain Tutorial\nç§æœ‰åŒºå—é“¾ï¼Œæˆ‘ä»¬ä¸€èµ· GO\nä»¥å¤ªåŠå¼€å‘\nç”±äºæˆ‘æ˜¯ä¸“æ³¨äºåç«¯çš„å¼€å‘ï¼Œç°åœ¨çš„æŠ€æœ¯æ ˆæ˜¯\n node go  æ­£å¼è¿›å…¥ä»¥å¤ªåŠçš„å¼€å‘ã€‚è¿™æ˜¯æˆ‘è¿™æ®µæ—¶é—´æ¥è§¦åˆ°çš„ä¸€äº›èµ„æºï¼š\n  go-ethereumï¼šä¹Ÿå°±æ˜¯ gethï¼Œå®˜æ–¹çš„ go ç‰ˆæœ¬çš„å®¢æˆ·ç«¯\n  solidityï¼šæ™ºèƒ½åˆçº¦ç¼–ç¨‹è¯­è¨€\n  truffleï¼šæ™ºèƒ½åˆçº¦çš„ç¼–ç¨‹æ¡†æ¶ï¼ŒåŸºäº nodejs\n  Ganacheï¼šå¯åŠ¨äº†å¤šä¸ªèŠ‚ç‚¹æœ¬åœ°ç§é“¾\n  Rinkebyï¼šä»¥å¤ªåŠæµ‹è¯•é“¾\n  Etherscanï¼šä»¥å¤ªåŠåŒºå—é“¾æµè§ˆå™¨ï¼Œå¯ä»¥æŸ¥è¯¢äº¤æ˜“\n  MetaMaskï¼šchrome çš„é’±åŒ…æ’ä»¶\n  web3ï¼šå®˜æ–¹å°è£…çš„å¼€å‘ Dapp çš„åº“ï¼Œå¯ä»¥è°ƒç”¨åˆçº¦\n  truffle-hdwallet-providerï¼šweb3 çš„ç¡®å®šæ€§é’±åŒ… provider\n  æ¦‚å¿µ\nè´¦æˆ·å’Œé’±åŒ…\nåœ¨ä»¥å¤ªåŠä¸­ï¼Œä¸€ä¸ªè´¦å·å°±æ˜¯ä¸€ä¸ªåœ°å€ï¼ˆaddressï¼‰ï¼Œé‡Œé¢æœ‰ä½™é¢ã€‚\né’±åŒ…æ˜¯ä¿ç®¡ç§é’¥çš„åœ°å€ï¼Œ ç§é’¥-\u0026gt;å…¬é’¥-\u0026gt;åœ°å€ è¿™æ˜¯ä¸€ä¸ªä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œé’±åŒ…é‡Œé¢å¯ä»¥æœ‰å¤šä¸ªè´¦æˆ·ã€‚\nç§é’¥ä¸åŒçš„ç”Ÿæˆæ–¹æ³•ï¼Œå¯¹åº”ç€ä¸åŒçš„é’±åŒ…ç»“æ„ï¼Œå› æ­¤åˆ†ä¸ºäº†ç¡®å®šæ€§é’±åŒ…å’Œéç¡®å®šæ€§é’±åŒ…ã€‚\n æ¯”ç‰¹å¸æœ€æ—©çš„å®¢æˆ·ç«¯ï¼ˆSatoshi clientï¼‰å°±æ˜¯éç¡®å®šæ€§é’±åŒ…ï¼Œé’±åŒ…æ˜¯ä¸€å †éšæœºç”Ÿæˆçš„ç§é’¥çš„é›†åˆã€‚ å®¢æˆ·ç«¯ä¼šé¢„å…ˆç”Ÿæˆ 100 ä¸ªéšæœºç§é’¥ï¼Œå¹¶ä¸”æ¯ä¸ªç§é’¥åªä½¿ç”¨ä¸€æ¬¡ã€‚ ç¡®å®šæ€§é’±åŒ…åˆ™ä¸éœ€è¦æ¯æ¬¡è½¬è´¦éƒ½è¦å¤‡ä»½ï¼Œç¡®å®šæ€§é’±åŒ…çš„ç§é’¥æ˜¯å¯¹ç§å­è¿›è¡Œå•å‘å“ˆå¸Œè¿ç®—ç”Ÿæˆçš„ï¼Œç§å­æ˜¯ä¸€ä¸²ç”±éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆçš„éšæœºæ•°ã€‚åœ¨ç¡®å®šæ€§é’±åŒ…ä¸­ï¼Œåªè¦æœ‰è¿™ä¸ªç§å­ï¼Œå°±å¯ä»¥æ‰¾å›æ‰€æœ‰ç§é’¥  HD é’±åŒ…æ˜¯ç›®å‰å¸¸ç”¨çš„ç¡®å®šæ€§é’±åŒ… ï¼Œè¯´åˆ° HD é’±åŒ…ï¼Œå¤§å®¶å¯èƒ½ç¬¬ä¸€ååº”ä¼šæƒ³åˆ°ç¡¬ä»¶é’±åŒ… ï¼ˆHardware Walletï¼‰ï¼Œå…¶å®è¿™é‡Œçš„ HD æ˜¯ Hierarchical Deterministicï¼ˆåˆ†å±‚ç¡®å®šæ€§ï¼‰çš„ç¼©å†™ã€‚\n æ‰€è°“åˆ†å±‚ï¼Œå°±æ˜¯ä¸€ä¸ªå¤§å…¬å¸å¯ä»¥ä¸ºæ¯ä¸ªå­éƒ¨é—¨åˆ†åˆ«ç”Ÿæˆä¸åŒçš„ç§é’¥ï¼Œå­éƒ¨é—¨è¿˜å¯ä»¥å†ç®¡ç†å­å­éƒ¨é—¨çš„ç§é’¥ï¼Œæ¯ä¸ªéƒ¨é—¨å¯ä»¥çœ‹åˆ°æ‰€æœ‰å­éƒ¨é—¨é‡Œçš„å¸ï¼Œä¹Ÿå¯ä»¥èŠ±è¿™é‡Œé¢çš„å¸ã€‚ä¹Ÿå¯ä»¥åªç»™ä¼šè®¡äººå‘˜æŸä¸ªå±‚çº§çš„å…¬é’¥ï¼Œè®©ä»–å¯ä»¥çœ‹è§è¿™ä¸ªéƒ¨é—¨åŠå­éƒ¨é—¨çš„æ”¶æ”¯è®°å½•ï¼Œä½†ä¸èƒ½èŠ±é‡Œé¢çš„é’±ï¼Œä½¿å¾—è´¢åŠ¡ç®¡ç†æ›´æ–¹ä¾¿äº†ã€‚\n ç”Ÿæˆè§„åˆ™æ˜¯ï¼š\n ç”Ÿæˆä¸€ä¸ªåŠ©è®°è¯ï¼ˆå‚è§ BIP39ï¼‰ è¯¥åŠ©è®°è¯ä½¿ç”¨ PBKDF2 è½¬åŒ–ä¸ºç§å­ï¼ˆå‚è§ BIP39ï¼‰ ç§å­ç”¨äºä½¿ç”¨ HMAC-SHA512 ç”Ÿæˆæ ¹ç§é’¥ï¼ˆå‚è§ BIP32ï¼‰ ä»è¯¥æ ¹ç§é’¥ï¼Œå¯¼å‡ºå­ç§é’¥ï¼ˆå‚è§ BIP32ï¼‰ï¼Œå…¶ä¸­èŠ‚ç‚¹å¸ƒå±€ç”± BIP44 è®¾ç½®  DAPP\nä»¥å¤ªåŠä¸å…¶ä»–åŠ å¯†è´§å¸çš„ä¸»è¦ä¸åŒåœ¨äºï¼Œä»¥å¤ªåŠä¸æ˜¯å•çº¯çš„è´§å¸ï¼Œè€Œæ˜¯ä¸€ä¸ªç¯å¢ƒ/å¹³å°ã€‚åœ¨è¿™ä¸ªå¹³å°ä¸Šï¼Œä»»ä½•äººéƒ½å¯ä»¥åˆ©ç”¨åŒºå—é“¾çš„æŠ€æœ¯ï¼Œé€šè¿‡æ™ºèƒ½åˆçº¦æ¥æ„å»ºè‡ªå·±çš„é¡¹ç›®å’Œ DAPPSï¼ˆå»ä¸­å¿ƒåŒ–åº”ç”¨ï¼‰ã€‚DAPPS å‘å¸ƒçš„æ–¹å¼é€šå¸¸æ˜¯é‡‡ç”¨è¢«ç§°ä¸ºâ€œICOâ€çš„ä¼—ç­¹æ–¹å¼ã€‚ç®€å•æ¥è¯´ï¼Œä½ éœ€è¦ç”¨ä½ çš„ä»¥å¤ªæ¥è´­ä¹°ç›¸åº” DAPP çš„ä¸€äº› tokensã€‚\nä»£å¸\nä¸ºä»€ä¹ˆä¸èƒ½åœ¨è¿™äº› DAPPS ä¸­ç›´æ¥ä½¿ç”¨ä»¥å¤ªå®Œæˆäº¤æ˜“ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ç»™ DAPPS åˆ›é€ ä¸€ç§åŸç”Ÿçš„è´§å¸ï¼Ÿ\nå› ä¸ºå³ä½¿åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨ä½¿ç”¨æŸç§å½¢å¼çš„ Token æ¥ä»£æ›¿ç°é‡‘ã€‚æ¯”å¦‚ï¼šåœ¨æ¸¸ä¹åœºé‡Œï¼Œä½ å…ˆç”¨ç°é‡‘å…‘æ¢ä»£å¸ï¼Œç„¶åç”¨ä»£å¸æ¥æ”¯ä»˜å„ç§æœåŠ¡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç°é‡‘å°±æ˜¯ä»¥å¤ªï¼Œä»£å¸å°±æ˜¯ tokenã€‚\nERC20ï¼šä»¥å¤ªåŠ token æ ‡å‡†\nç®€å•æ¥è¯´ï¼ŒERC20 æ˜¯å¼€å‘è€…åœ¨è‡ªå·±çš„ tokens ä¸­å¿…é¡»é‡‡ç”¨çš„ä¸€å¥—å…·ä½“çš„å…¬å¼/æ–¹æ³•ï¼Œä»è€Œç¡®ä¿è¯¥ token ä¸ ERC20 å…¼å®¹ã€‚åœ¨åˆçº¦æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸‹é¢çš„å››ä¸ªè¡Œä¸ºæ˜¯ ERC20 tokens æ‰€éœ€è¦å®Œæˆçš„ï¼š\n è·å¾— Token ä¾›ç»™æ€»é‡. è·å¾—è´¦æˆ·ä½™é¢. ä»ä¸€æ–¹å‘å¦ä¸€æ–¹è½¬ç§» Token. è®¤å¯ Token ä½œä¸ºè´§å¸æ€§èµ„äº§çš„ä½¿ç”¨.  å¤§ä½¬è¯´ï¼šä»£å¸å…¶å®å°±æ˜¯æ™ºèƒ½åˆçº¦ï¼Œè€Œè¿™ä¸ªåˆçº¦æ˜¯å‘ç”Ÿäº† 0 ä¸ªä»¥å¤ªçš„è½¬è´¦ã€‚\nGas å’ŒæŒ–çŸ¿\nä¸å°‘å°å“¥å“¥æˆ–å°å§å§ä¼šè®¤ä¸ºæŒ–çŸ¿å°±æ˜¯æŒ–ä»¥å¤ªå¸ï¼Œå…¶å®ä»£å¸ä¸ç”¨æŒ–çš„ï¼Œå½“ä½ æŒ–åˆ°äº†åŒºå—ï¼Œä»£å¸æ˜¯ç»™ä½ çš„å¥–åŠ±ã€‚å› ä¸ºä»»ä½•ä¸€ç¬”äº¤æ˜“éƒ½éœ€è¦è®°å½•ï¼Œä¸€ä¸ªåŒºå—çš„å¤§å°ä¹Ÿå°±å‡  Mï¼Œå­˜å‚¨ä¸äº†é‚£ä¹ˆå¤šäº¤æ˜“ä¿¡æ¯ï¼Œæ‰€ä»¥è¦æŒç»­æŒ–åŒºå—æ¥è®°å½•äº¤æ˜“ï¼ŒåŒæ—¶åªè¦æ˜¯ä½ å‘èµ·äº†äº¤æ˜“ï¼Œå°±å¾—ä»˜æ‰‹ç»­è´¹ï¼Œè¿™äº›æ‰‹ç»­è´¹ä¹Ÿæˆä¸º Gasï¼Œä¼šæŒ‰ç…§ä¸€å®šçš„ç®—æ³•å¥–åŠ±ç»™æŒ–å‡ºåŒºå—çš„äººã€‚\næ¥ä¸‹æ¥ä¼šè®²ä¸€ä¸‹ï¼Œå¹³æ—¶å¼€å‘ä¸­å¦‚ä½•åˆ›å»ºé’±åŒ…ï¼Œå¦‚ä½•è½¬è´¦ï¼Œå¦‚ä½•è‡ªå·±å‘ä»£å¸ï¼Œå¦‚ä½•éƒ¨ç½²åˆçº¦å¹¶è°ƒç”¨ã€‚\nç¯å¢ƒå‡†å¤‡\n å®‰è£… Ganache å¹¶å¯åŠ¨ å®‰è£… truffle æ¡†æ¶  åˆ›å»ºé’±åŒ…\ngolang\nä¾èµ–\ngithub.com/ethereum/go-ethereum é¦–å…ˆè¦è¿æ¥åˆ°æµ‹è¯•é“¾ï¼Œæµ‹è¯•é“¾å¯ä»¥æ˜¯æœ¬åœ°çš„ä¹Ÿå¯ä»¥æ˜¯å…¬ç½‘çš„ã€‚\nfunc connectRPC() (*ethclient.Client, error) {  // è¿æ¥æµ‹è¯•é“¾çš„èŠ‚ç‚¹  //rpcClient, err := rpc.Dial(\u0026#34;https://rinkeby.infura.io/v3/6c81fb1b66804f0698d49f2ec242afc9\u0026#34;)  rpcClient, err := rpc.Dial(\u0026#34;http://127.0.0.1:7545\u0026#34;)  if err != nil {  log.Fatalln(err)  return nil, err  }   conn := ethclient.NewClient(rpcClient)  return conn, nil } ä¸€èˆ¬éƒ½é€‰æ‹©ä»¥ keystore çš„å½¢å¼åˆ›å»ºè´¦æˆ·\nfunc CreateWallet() (key, addr string) {  ks := keystore.NewKeyStore(\u0026#34;~/Documents/github/gowork/src/geth-demo/\u0026#34;,  keystore.StandardScryptN, keystore.StandardScryptP)  account, _ := ks.NewAccount(\u0026#34;password\u0026#34;)  key_json, err := ks.Export(account, \u0026#34;password\u0026#34;, \u0026#34;password\u0026#34;)  if err != nil {  log.Fatalln(\u0026#34;å¯¼å‡ºè´¦æˆ·é”™è¯¯: \u0026#34;, err)  panic(err)  }  key = string(key_json)  addr = account.Address.Hex()  return } å½“ç„¶å¦ä¸€ç§åˆ›å»ºè´¦æˆ·çš„æ–¹å¼æ˜¯ç”¨ç§é’¥ï¼š\nfunc CreateWallet() (string, error) {  key, err := crypto.GenerateKey()  if err != nil {  log.Fatalln(err)  return \u0026#34;\u0026#34;, nil  }   address := crypto.PubkeyToAddress(key.PublicKey).Hex()  log.Println(\u0026#34;address: \u0026#34;, address)   privateKey := hex.EncodeToString(key.D.Bytes())  log.Println(\u0026#34;privateKey: \u0026#34;, privateKey)  return address, nil } Node\nnode ä¸€èˆ¬ä½¿ç”¨ web3ã€‚åˆ›å»º web3 å¯¹è±¡çš„æ—¶å€™è¦ä½¿ç”¨ä¸€ä¸ª providerï¼Œè¿™ä¸ª provider ç”¨æ¥è¿æ¥åˆ°æµ‹è¯•é“¾ï¼Œå¯ä»¥æ˜¯é’±åŒ…çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª HttpProviderã€‚\nåˆ›å»º web3\nconst web3 = new Web3(new Web3.providers.HttpProvider(\u0026#34;http://localhost:7545\u0026#34;)); æˆ–è€…ä½¿ç”¨truffle-hdwallet-provideræ¥åˆ›å»ºï¼Œä½¿ç”¨è¿™ä¸ªçš„å‰ææ˜¯ï¼Œè‡ªå·±å·²ç»åˆ›å»ºäº†ä¸€ä¸ªé’±åŒ…ï¼Œå¹¶ä¸”è¿™ä¸ªé’±åŒ…æ˜¯ HD çš„ã€‚\nconst Web3 = require(\u0026#39;web3\u0026#39;); const HDWalletProvider = require(\u0026#39;truffle-hdwallet-provider\u0026#39;);  const provider = new HDWalletProvider(åŠ©è®°è¯, æµ‹è¯•é“¾url); const web3 = new Web3(provider); åˆ›å»ºè´¦æˆ·\n","permalink":"https://zhenfeng-zhu.github.io/post/eth-tools/","summary":"æœ€è¿‘å› å…¬å¸é¡¹ç›®éœ€è¦ï¼Œåšä¸ºä¸€ä¸ªæ‰“æ‚å·¥ç¨‹å¸ˆï¼Œæ“èµ·é”®ç›˜å’Œç¬”è®°æœ¬å¼€å§‹äº†ä»¥å¤ªåŠçš„è¸©å‘ä¹‹æ—…ã€‚ä»¥å¤ªåŠçš„å¼€å‘æ¯”è¾ƒæ–°ï¼Œå˜åŒ–ä¹Ÿæ¯”è¾ƒå¤šï¼Œè¿˜å¥½æœ‰@cctanfujunçš„æ‰‹æŠŠæ‰‹å¸¦é¢†ä¸‹ï¼ŒåŠåªè„šè¸å…¥äº†ä»¥å¤ªåŠçš„å¼€å‘çš„å¤§é—¨ã€‚\nåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä¼šç®€å•ä»‹ç»ä¸€ä¸‹ä»¥å¤ªåŠçš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠæˆ‘ç°åœ¨ç”¨åˆ°çš„ä¸€äº›å·¥å…·ï¼Œè¿˜æœ‰å…·ä½“çš„ä¸€ä¸ªå¼€å‘æµç¨‹ã€‚å› ä¸ºæˆ‘è¿˜æ²¡æœ‰æ¥è§¦åˆ°å¦‚ä½•ä¸Šä¸»é“¾ï¼Œæ‰€ä»¥è¿™äº›éƒ½æ˜¯åŸºäºæµ‹è¯•é“¾è®²è§£ã€‚å¸Œæœ›èƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€äº›å¸®åŠ©ã€‚\nä»€ä¹ˆæ˜¯åŒºå—é“¾\nç›¸ä¿¡å¤§å®¶å¯¹åŒºå—é“¾éƒ½æœ‰è‡ªå·±çš„ç†è§£ï¼Œä¸ä»…ä»…æ˜¯äº’è”ç½‘å…¬å¸ï¼Œä¼ ç»Ÿä¼ä¸šä¹Ÿåœ¨â€œå¸æ”¹è½¬å‹â€ã€‚\n**ç®€è¨€ä¹‹ï¼ŒåŒºå—é“¾å°±æ˜¯æ•°æ®åº“ã€‚**å®ƒæ˜¯ç‰¹å®šæ•°æ®çš„æ•°æ®åº“ï¼Œé‡Œé¢çš„æ•°æ®ä¸æ–­å¢é•¿ï¼Œå…·æœ‰éå‡¡ç‰¹æ€§ï¼š\n ä¸€æ—¦æ•°æ®å­˜å‚¨äºæ•°æ®åº“ï¼Œæ°¸è¿œéƒ½æ— æ³•è¢«ä¿®æ”¹æˆ–åˆ é™¤ã€‚åŒºå—é“¾ä¸Šçš„æ¯ä¸ªè®°å½•ä¼šè¢«æ°¸ä¹…ä¿å­˜ä¸‹æ¥ã€‚ æ²¡æœ‰å•ç‹¬çš„ä¸ªäººæˆ–ç»„ç»‡èƒ½ç»´æŠ¤è¯¥æ•°æ®åº“ã€‚å¿…é¡»è¦ä¸Šåƒä¸ªäººæ‰è¡Œï¼Œæ¯ä¸ªäººéƒ½æœ‰æ•°æ®åº“çš„å‰¯æœ¬ã€‚  ä»€ä¹ˆæ˜¯ä»¥å¤ªåŠï¼Ÿ\n ä»¥å¤ªåŠï¼ˆè‹±è¯­ï¼šEthereumï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„æœ‰æ™ºèƒ½åˆçº¦åŠŸèƒ½çš„å…¬å…±åŒºå—é“¾å¹³å°[1][2]ã€‚é€šè¿‡å…¶ä¸“ç”¨åŠ å¯†è´§å¸ä»¥å¤ªå¸ï¼ˆEtherï¼Œåˆç§°â€œä»¥å¤ªå¸â€ï¼‰æä¾›å»ä¸­å¿ƒåŒ–çš„è™šæ‹Ÿæœºï¼ˆç§°ä¸ºâ€œä»¥å¤ªè™šæ‹Ÿæœºâ€Ethereum Virtual Machineï¼‰æ¥å¤„ç†ç‚¹å¯¹ç‚¹åˆçº¦ã€‚\n ä¸ºä»€ä¹ˆé€‰æ‹©ä»¥å¤ªåŠï¼Ÿ\n  æ™ºèƒ½åˆçº¦\n  ä»£å¸\n  èµ„æ–™ç›¸å¯¹å®Œå–„ï¼Œç›¸å¯¹å®¹æ˜“å¼€å‘\n  å¤§ä½¬å¯¹ä»¥å¤ªåŠæ¯”è¾ƒç†Ÿæ‚‰\n  å¤§ä½¬å¯¹ä»¥å¤ªåŠæ¯”è¾ƒç†Ÿæ‚‰\n  å¤§ä½¬å¯¹ä»¥å¤ªåŠæ¯”è¾ƒç†Ÿæ‚‰\n  é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œæœ‰ä¸€ä¸ªç»éªŒä¸°å¯Œçš„äººå¸¦é¢†ï¼Œåšä¸œè¥¿è‚¯å®šäº‹åŠåŠŸå€ã€‚\nè‡ªå·±åŠ¨æ‰‹å†™åŒºå—é“¾\nè¿™é‡Œæä¾›ä¸¤ä¸ªæ•™ç¨‹ï¼Œä¸€ä¸ªæ˜¯ä¹¦ï¼Œä¸€ä¸ªæ˜¯è§†é¢‘ã€‚å…¶ä¸­è§†é¢‘å’Œä¹¦æ˜¯å¯¹åº”çš„ï¼Œä¸æ¸…æ¥šæ˜¯ä¸æ˜¯åŒä¸€ä¸ªä½œè€…ã€‚\nBlockchain Tutorial\nç§æœ‰åŒºå—é“¾ï¼Œæˆ‘ä»¬ä¸€èµ· GO\nä»¥å¤ªåŠå¼€å‘\nç”±äºæˆ‘æ˜¯ä¸“æ³¨äºåç«¯çš„å¼€å‘ï¼Œç°åœ¨çš„æŠ€æœ¯æ ˆæ˜¯\n node go  æ­£å¼è¿›å…¥ä»¥å¤ªåŠçš„å¼€å‘ã€‚è¿™æ˜¯æˆ‘è¿™æ®µæ—¶é—´æ¥è§¦åˆ°çš„ä¸€äº›èµ„æºï¼š\n  go-ethereumï¼šä¹Ÿå°±æ˜¯ gethï¼Œå®˜æ–¹çš„ go ç‰ˆæœ¬çš„å®¢æˆ·ç«¯\n  solidityï¼šæ™ºèƒ½åˆçº¦ç¼–ç¨‹è¯­è¨€\n  truffleï¼šæ™ºèƒ½åˆçº¦çš„ç¼–ç¨‹æ¡†æ¶ï¼ŒåŸºäº nodejs\n  Ganacheï¼šå¯åŠ¨äº†å¤šä¸ªèŠ‚ç‚¹æœ¬åœ°ç§é“¾\n  Rinkebyï¼šä»¥å¤ªåŠæµ‹è¯•é“¾\n  Etherscanï¼šä»¥å¤ªåŠåŒºå—é“¾æµè§ˆå™¨ï¼Œå¯ä»¥æŸ¥è¯¢äº¤æ˜“","title":"ä»¥å¤ªåŠå¼€å‘æ€»ç»“"},{"content":"å‚ä¸äº†å…¬å¸çš„ä¸€ä¸ªé¡¹ç›®ï¼Œä¸Šäº†ä»¥å¤ªåŠï¼Œè¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹è¸©å‘ã€‚\né¦–å…ˆå…ˆæŠŠ go çš„ä¾èµ–ä¸‹è½½ä¸‹æ¥ï¼š\ngo get -u -v github.com/ethereum/go-ethereum æœ‰æ—¶å€™ä¸‹è½½çš„å¾ˆæ…¢ï¼Œå¯ä»¥ä» github ä¸Šæ‹‰ä¸‹æ¥ä»£ç ã€‚\nè´¦æˆ· ä»¥å¤ªåŠçš„åœ°å€åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿå¯ä»¥åˆ›å»ºåˆ°ã€‚\nåˆ›å»ºè´¦æˆ·æœ‰ä¸¤ç§æ–¹å¼ï¼š\nä»¥å…¬é’¥å’Œç§é’¥çš„å½¢å¼åˆ›å»º func CreateAccount() (string, error) {  key, err := crypto.GenerateKey()  if err != nil {  log.Fatalln(err)  return \u0026#34;\u0026#34;, nil  }   address := crypto.PubkeyToAddress(key.PublicKey).Hex()  log.Println(\u0026#34;address: \u0026#34;, address)   privateKey := hex.EncodeToString(key.D.Bytes())  log.Println(\u0026#34;privateKey: \u0026#34;, privateKey)  return address, nil } è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨çš„æ¯”è¾ƒå°‘ã€‚\nä»¥ keystore çš„å½¢å¼åˆ›å»º keystore ä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š\n{ \u0026#34;address\u0026#34;: \u0026#34;d93688757810e644f0b9c162102d9c598813f0dd\u0026#34;, \u0026#34;crypto\u0026#34;: { \u0026#34;cipher\u0026#34;: \u0026#34;aes-128-ctr\u0026#34;, \u0026#34;ciphertext\u0026#34;: \u0026#34;71ae7c8144729b2f9e0c51d95c6dfb73e63f14b5332b3594e8a1f325237c27ed\u0026#34;, \u0026#34;cipherparams\u0026#34;: { \u0026#34;iv\u0026#34;: \u0026#34;620c73001081c014a862ce80003a4648\u0026#34; }, \u0026#34;kdf\u0026#34;: \u0026#34;scrypt\u0026#34;, \u0026#34;kdfparams\u0026#34;: { \u0026#34;dklen\u0026#34;: 32, \u0026#34;n\u0026#34;: 262144, \u0026#34;p\u0026#34;: 1, \u0026#34;r\u0026#34;: 8, \u0026#34;salt\u0026#34;: \u0026#34;bd272aa37271ef9913eb095a4d143be238e348c48fce6459896e1bb1b0236741\u0026#34; }, \u0026#34;mac\u0026#34;: \u0026#34;2b3ade771645090a2b34c214906c592a1300d529e459faefb1421ba496b6fe1d\u0026#34; }, \u0026#34;id\u0026#34;: \u0026#34;e4dd5384-56a8-4ec7-b6e0-492dcd3742e9\u0026#34;, \u0026#34;version\u0026#34;: 3 } åœ¨ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šè®©ä½ è¾“ä¸€ä¸ªå¯†ç ï¼Œè¿™ä¸ªæ–‡ä»¶åŠ å¯†ç å…¶å®å°±æ˜¯ä¸€ä¸ªç§é’¥ã€‚\n// ç†è®ºä¸Šæ¥è®²ï¼Œè¿™ä¸ªå‡½æ•°åº”è¯¥åªè¢«åˆ›å»ºä¸€æ¬¡å³å¯ // åˆ›å»ºä¸€ä¸ªè´¦æˆ· func CreateWallet() (key, addr string) {  ks := keystore.NewKeyStore(\u0026#34;/Users/zhuzhenfeng/Documents/github/gowork/src/geth-demo/\u0026#34;, keystore.StandardScryptN, keystore.StandardScryptP)  account, _ := ks.NewAccount(\u0026#34;password\u0026#34;)  key_json, err := ks.Export(account, \u0026#34;password\u0026#34;, \u0026#34;password\u0026#34;)  if err != nil {  log.Fatalln(\u0026#34;å¯¼å‡ºè´¦æˆ·é”™è¯¯: \u0026#34;, err)  panic(err)  }  key = string(key_json)  addr = account.Address.Hex()  return } è¿™ä¸ª key å’Œ addressï¼Œ\u0026ldquo;password\u0026quot;æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å¯†ç ã€‚\nç§é“¾ ä¸€ç§æ–¹å¼æ˜¯è¿æ¥äº’è”ç½‘ä¸Šçš„æµ‹è¯•é“¾ï¼Œä¸€ç§æ˜¯è¿æ¥æœ¬åœ°çš„ç§é“¾ã€‚\næœ¬åœ°ç§é“¾çš„å¯åŠ¨ å¯åŠ¨æœ¬åœ°ç§é“¾æœ€ç®€å•çš„ä¸€ç§æ–¹å¼æ˜¯ç”¨ Truffle æä¾›çš„ Ganacheï¼Œåªè¦å°†å®ƒä¸‹è½½ä¸‹æ¥ï¼Œå¯åŠ¨èµ·æ¥å³å¯ã€‚\nå¯ä»¥çœ‹åˆ°å·²ç»å¯åŠ¨äº†ï¼Œè¿æ¥çš„åœ°å€æ˜¯:\nhttp://127.0.0.1:7545 äº’è”ç½‘ä¸Šçš„æµ‹è¯•é“¾åœ°å€ https://rinkeby.infura.io/v3/6c81fb1b66804f0698d49f2ec242afc9 è¿æ¥ æˆ‘ä»¬ç”¨ geth çš„ rpc è¿æ¥ä¸Šé¢çš„ç§é“¾åœ°å€å³å¯ï¼š\nfunc connectRPC() (*ethclient.Client, error) {  // è¿æ¥æµ‹è¯•é“¾çš„èŠ‚ç‚¹  //rpcClient, err := rpc.Dial(\u0026#34;https://rinkeby.infura.io/v3/6c81fb1b66804f0698d49f2ec242afc9\u0026#34;)  rpcClient, err := rpc.Dial(\u0026#34;http://127.0.0.1:7545\u0026#34;)  if err != nil {  log.Fatalln(err)  return nil, err  }   conn := ethclient.NewClient(rpcClient)  return conn, nil } å…¶ä»–æ“ä½œ åœ¨ä¸Šä¸€æ­¥ä¸­è¿æ¥ rpc ä¸­ï¼Œæ‹¿åˆ°äº† clientã€‚ç”¨è¿™ä¸ª client å°±å¯ä»¥åšå¾ˆå¤šäº‹å„¿ï¼š\nè·å–ä½™é¢ func GetBalance(address string) (float64, error) {  client, err := connectRPC()  if err != nil {  log.Fatalln(\u0026#34;err: \u0026#34;, err)  panic(err)  }   balance, err := client.BalanceAt(context.TODO(), common.HexToAddress(address), nil)  if err != nil {  log.Fatalln(balance)  return 0, err  }  balanceV := float64(balance.Int64()) * math.Pow(10, -18)  return balanceV, nil } ä»£å¸è½¬è´¦ è¦ç”Ÿæˆä»£å¸ï¼Œéœ€è¦å†™ä¸€ä¸ª token çš„åˆçº¦ã€‚å¯ä»¥ç”¨è¿™ä¸€ä¸ªæœ€ç®€å•çš„ token.abiã€‚å¤æ‚ä¸€èˆ¬å¯ä»¥ç”¨ truffle æ¡†æ¶æ¥ç¼–å†™ã€‚\n// token.abi [ { \u0026#34;anonymous\u0026#34;: false, \u0026#34;inputs\u0026#34;: [ { \u0026#34;indexed\u0026#34;: true, \u0026#34;name\u0026#34;: \u0026#34;from\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;address\u0026#34; }, { \u0026#34;indexed\u0026#34;: true, \u0026#34;name\u0026#34;: \u0026#34;to\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;address\u0026#34; }, { \u0026#34;indexed\u0026#34;: false, \u0026#34;name\u0026#34;: \u0026#34;value\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;uint256\u0026#34; } ], \u0026#34;name\u0026#34;: \u0026#34;Transfer\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;event\u0026#34; }, { \u0026#34;constant\u0026#34;: true, \u0026#34;inputs\u0026#34;: [], \u0026#34;name\u0026#34;: \u0026#34;totalSupply\u0026#34;, \u0026#34;outputs\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;uint256\u0026#34; } ], \u0026#34;payable\u0026#34;: false, \u0026#34;stateMutability\u0026#34;: \u0026#34;view\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;function\u0026#34; }, { \u0026#34;constant\u0026#34;: false, \u0026#34;inputs\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;_to\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;address\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;_value\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;uint256\u0026#34; } ], \u0026#34;name\u0026#34;: \u0026#34;transfer\u0026#34;, \u0026#34;outputs\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;bool\u0026#34; } ], \u0026#34;payable\u0026#34;: false, \u0026#34;stateMutability\u0026#34;: \u0026#34;nonpayable\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;function\u0026#34; }, { \u0026#34;constant\u0026#34;: true, \u0026#34;inputs\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;_owner\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;address\u0026#34; } ], \u0026#34;name\u0026#34;: \u0026#34;balanceOf\u0026#34;, \u0026#34;outputs\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;uint256\u0026#34; } ], \u0026#34;payable\u0026#34;: false, \u0026#34;stateMutability\u0026#34;: \u0026#34;view\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;function\u0026#34; } ] ç„¶åå°†å…¶è½¬æ¢ä¸º go æ–‡ä»¶ï¼š\nabigen --abi token.abi --pkg main --type Token --out token.go ç”Ÿæˆçš„ token.go æ–‡ä»¶ï¼Œæ‰æ˜¯å¯ä»¥è¢«æ“ä½œçš„æ–‡ä»¶ã€‚\nfunc TransferToken() {  key, to_address := CreateWallet()   client, err := connectRPC()  if err != nil {  log.Fatalln(err)  panic(err)  }   auth, err := bind.NewTransactor(strings.NewReader(key), \u0026#34;password\u0026#34;)  if err != nil {  log.Fatalln(\u0026#34;è¯»å–keystoreå¤±è´¥\u0026#34;, err)  panic(err)  }   token, err := cont.NewToken(common.HexToAddress(\u0026#34;0x75a26aaaecda412bd914e8fbfaed586a467fa8b5\u0026#34;), client)  if err != nil {  log.Fatalln(\u0026#34;è·å–tokenå¤±è´¥\u0026#34;, err)  panic(err)  }   balance, err := token.BalanceOf(nil, common.HexToAddress(to_address))  if err != nil {  log.Fatalln(\u0026#34;token balance of\u0026#34;, err)  }   log.Println(\u0026#34;to address balance: \u0026#34;, balance)   amount := big.NewFloat(10.00)  //è¿™æ˜¯å¤„ç†ä½æ•°çš„ä»£ç æ®µ  tenDecimal := big.NewFloat(math.Pow(10, 18))  convertAmount, _ := new(big.Float).Mul(tenDecimal, amount).Int(\u0026amp;big.Int{})   tx, err := token.Transfer(auth, common.HexToAddress(to_address), convertAmount)  if nil != err {  fmt.Printf(\u0026#34;err: %v \\n\u0026#34;, err)  return  }  fmt.Printf(\u0026#34;result: %v\\n\u0026#34;, tx) }  ä¸çŸ¥ä¸ºä½•ä¼šå‡ºç° failed to estimate gas needed çš„æƒ…å†µ\n ä»£å¸è½¬è´¦çš„ä»£ç å°±å¦‚ä¸Šæ‰€ç¤ºï¼Œæœ‰äº†è¿™ä¸ªï¼Œå…¶å®æˆ‘ä»¬å°±å¯ä»¥å‘å¸äº†ã€‚\nè‡³äºä¸Šé¢çš„ä¸€å¥ä»£ç ä¸­çš„ï¼š\ntoken, err := cont.NewToken(common.HexToAddress(\u0026#34;0x75a26aaaecda412bd914e8fbfaed586a467fa8b5\u0026#34;), client) è¿™ä¸ª0x75a26aaaecda412bd914e8fbfaed586a467fa8b5åœ°å€ï¼Œå°±æ˜¯åˆçº¦çš„åœ°å€ã€‚å…³äºåˆçº¦çš„éƒ¨ç½²ï¼Œå…¶å®å¦‚æœæ˜¯åœ¨æœ¬åœ°è°ƒè¯•çš„è¯ï¼Œå¯ä»¥ç”¨ truffleã€‚truffle åœ¨éƒ¨ç½²çš„æ—¶å€™ï¼Œä¼šå°†åˆçº¦åœ°å€è¿”å›ã€‚\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå…³äºå¦‚ä½•åœ¨ä»¥å¤ªåŠä¸Šå†™ä»£å¸çš„åˆçº¦ï¼Œä¸‹æ¬¡å†å†™ä¸€ä¸‹ç¬”è®°ã€‚\næ€»ç»“ å¯ä»¥ç”¨ web3 å»åšè¿™äº›äº‹å„¿ï¼Œä¼šæ›´ç®€å•ä¸€äº›ã€‚å› ä¸ºæœåŠ¡ç«¯é€‰å‹ç”¨çš„ goï¼Œæ‰€ä»¥å°±ç”¨ go è¸©äº†ä¸€äº›å‘ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E4%BB%A5%E5%A4%AA%E5%9D%8A/","summary":"å‚ä¸äº†å…¬å¸çš„ä¸€ä¸ªé¡¹ç›®ï¼Œä¸Šäº†ä»¥å¤ªåŠï¼Œè¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹è¸©å‘ã€‚\né¦–å…ˆå…ˆæŠŠ go çš„ä¾èµ–ä¸‹è½½ä¸‹æ¥ï¼š\ngo get -u -v github.com/ethereum/go-ethereum æœ‰æ—¶å€™ä¸‹è½½çš„å¾ˆæ…¢ï¼Œå¯ä»¥ä» github ä¸Šæ‹‰ä¸‹æ¥ä»£ç ã€‚\nè´¦æˆ· ä»¥å¤ªåŠçš„åœ°å€åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿå¯ä»¥åˆ›å»ºåˆ°ã€‚\nåˆ›å»ºè´¦æˆ·æœ‰ä¸¤ç§æ–¹å¼ï¼š\nä»¥å…¬é’¥å’Œç§é’¥çš„å½¢å¼åˆ›å»º func CreateAccount() (string, error) {  key, err := crypto.GenerateKey()  if err != nil {  log.Fatalln(err)  return \u0026#34;\u0026#34;, nil  }   address := crypto.PubkeyToAddress(key.PublicKey).Hex()  log.Println(\u0026#34;address: \u0026#34;, address)   privateKey := hex.EncodeToString(key.D.Bytes())  log.Println(\u0026#34;privateKey: \u0026#34;, privateKey)  return address, nil } è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨çš„æ¯”è¾ƒå°‘ã€‚\nä»¥ keystore çš„å½¢å¼åˆ›å»º keystore ä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š\n{ \u0026#34;address\u0026#34;: \u0026#34;d93688757810e644f0b9c162102d9c598813f0dd\u0026#34;, \u0026#34;crypto\u0026#34;: { \u0026#34;cipher\u0026#34;: \u0026#34;aes-128-ctr\u0026#34;, \u0026#34;ciphertext\u0026#34;: \u0026#34;71ae7c8144729b2f9e0c51d95c6dfb73e63f14b5332b3594e8a1f325237c27ed\u0026#34;, \u0026#34;cipherparams\u0026#34;: { \u0026#34;iv\u0026#34;: \u0026#34;620c73001081c014a862ce80003a4648\u0026#34; }, \u0026#34;kdf\u0026#34;: \u0026#34;scrypt\u0026#34;, \u0026#34;kdfparams\u0026#34;: { \u0026#34;dklen\u0026#34;: 32, \u0026#34;n\u0026#34;: 262144, \u0026#34;p\u0026#34;: 1, \u0026#34;r\u0026#34;: 8, \u0026#34;salt\u0026#34;: \u0026#34;bd272aa37271ef9913eb095a4d143be238e348c48fce6459896e1bb1b0236741\u0026#34; }, \u0026#34;mac\u0026#34;: \u0026#34;2b3ade771645090a2b34c214906c592a1300d529e459faefb1421ba496b6fe1d\u0026#34; }, \u0026#34;id\u0026#34;: \u0026#34;e4dd5384-56a8-4ec7-b6e0-492dcd3742e9\u0026#34;, \u0026#34;version\u0026#34;: 3 } åœ¨ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šè®©ä½ è¾“ä¸€ä¸ªå¯†ç ï¼Œè¿™ä¸ªæ–‡ä»¶åŠ å¯†ç å…¶å®å°±æ˜¯ä¸€ä¸ªç§é’¥ã€‚","title":"ä»¥å¤ªåŠ"},{"content":"ç±»å‹ Solidity æ˜¯é™æ€ç±»å‹çš„è¯­è¨€ã€‚\nå€¼ç±»å‹  bool int/uint fixed/unfixed address  balance å’Œ transfer send call, callcode å’Œ delegatecall   byte bytes å’Œ string åå…­è¿›åˆ¶ hex\u0026quot;0012\u0026quot; enum function  å¼•ç”¨ç±»å‹   æ•°ç»„\nuint[]\n  ç»“æ„ä½“\nstruct\n  Map\nmapping(key =\u0026gt; value)\n  å•å…ƒå’Œå…¨å±€å˜é‡   ä»¥å¤ªå¸çš„å•ä½\nåœ¨æ•°å­—åé¢åŠ ä¸ŠÂ weiã€Â finneyã€Â szaboÂ æˆ–Â etherã€‚é»˜è®¤æ˜¯ wei\n  æ—¶é—´å•ä½\næ•°å­—åé¢å¸¦æœ‰Â secondsã€Â minutesã€Â hoursã€Â daysã€Â weeksÂ å’ŒÂ yearsã€‚é»˜è®¤æ˜¯ç§’ã€‚\n  åŒºå—å’Œäº¤æ˜“\n block.blockhash(uintÂ blockNumber)Â returnsÂ (bytes32)ï¼šæŒ‡å®šåŒºå—çš„åŒºå—å“ˆå¸Œã€‚ block.coinbase (address): æŒ–å‡ºå½“å‰åŒºå—çš„çŸ¿å·¥åœ°å€ block.difficulty (uint): å½“å‰åŒºå—éš¾åº¦ block.gaslimit (uint): å½“å‰åŒºå— gas é™é¢ block.number (uint): å½“å‰åŒºå—å· block.timestamp (uint): è‡ª unix epoch èµ·å§‹å½“å‰åŒºå—ä»¥ç§’è®¡çš„æ—¶é—´æˆ³ gasleft() returns (uint256)ï¼šå‰©ä½™çš„ gas msg.data (bytes): å®Œæ•´çš„ calldata msg.gas (uint): å‰©ä½™ gas - è‡ª 0.4.21 ç‰ˆæœ¬å¼€å§‹å·²ç»ä¸æ¨èä½¿ç”¨ï¼Œç”± gesleft() ä»£æ›¿ msg.sender (address): æ¶ˆæ¯å‘é€è€…ï¼ˆå½“å‰è°ƒç”¨ï¼‰ msg.sig (bytes4): calldata çš„å‰ 4 å­—èŠ‚ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°æ ‡è¯†ç¬¦ï¼‰ msg.value (uint): éšæ¶ˆæ¯å‘é€çš„ wei çš„æ•°é‡ now (uint): ç›®å‰åŒºå—æ—¶é—´æˆ³ï¼ˆblock.timestampï¼‰ tx.gasprice (uint): äº¤æ˜“çš„ gas ä»·æ ¼ tx.origin (address): äº¤æ˜“å‘èµ·è€…ï¼ˆå®Œå…¨çš„è°ƒç”¨é“¾ï¼‰    åœ°å€ç›¸å…³\n  \u0026lt;address\u0026gt;.balance (uint256):\nä»¥ Wei ä¸ºå•ä½çš„ åœ°å€ç±»å‹ çš„ä½™é¢ã€‚\n  \u0026lt;address\u0026gt;.transfer(uint256 amount):\nå‘ åœ°å€ç±»å‹ å‘é€æ•°é‡ä¸º amount çš„ Weiï¼Œå¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œå‘é€ 2300 gas çš„çŸ¿å·¥è´¹ï¼Œä¸å¯è°ƒèŠ‚ã€‚\n  \u0026lt;address\u0026gt;.send(uint256 amount) returns (bool):\nå‘ åœ°å€ç±»å‹ å‘é€æ•°é‡ä¸º amount çš„ Weiï¼Œå¤±è´¥æ—¶è¿”å› falseï¼Œå‘é€ 2300 gas çš„çŸ¿å·¥è´¹ç”¨ï¼Œä¸å¯è°ƒèŠ‚ã€‚\n  \u0026lt;address\u0026gt;.call(...) returns (bool):\nå‘å‡ºä½çº§å‡½æ•° CALLï¼Œå¤±è´¥æ—¶è¿”å› falseï¼Œå‘é€æ‰€æœ‰å¯ç”¨ gasï¼Œå¯è°ƒèŠ‚ã€‚\n  \u0026lt;address\u0026gt;.callcode(...) returns (bool)ï¼š\nå‘å‡ºä½çº§å‡½æ•° CALLCODEï¼Œå¤±è´¥æ—¶è¿”å› falseï¼Œå‘é€æ‰€æœ‰å¯ç”¨ gasï¼Œå¯è°ƒèŠ‚ã€‚\n  \u0026lt;address\u0026gt;.delegatecall(...) returns (bool):\nå‘å‡ºä½çº§å‡½æ•° DELEGATECALLï¼Œå¤±è´¥æ—¶è¿”å› falseï¼Œå‘é€æ‰€æœ‰å¯ç”¨ gasï¼Œå¯è°ƒèŠ‚ã€‚\n    åˆçº¦ç›¸å…³\nthis (current contract\u0026rsquo;s type):\nå½“å‰åˆçº¦ï¼Œå¯ä»¥æ˜ç¡®è½¬æ¢ä¸º åœ°å€ç±»å‹ã€‚\nselfdestruct(address recipient):\né”€æ¯åˆçº¦ï¼Œå¹¶æŠŠä½™é¢å‘é€åˆ°æŒ‡å®š åœ°å€ç±»å‹ã€‚\nsuicide(address recipient):\nä¸ selfdestruct ç­‰ä»·ï¼Œä½†å·²ä¸æ¨èä½¿ç”¨ã€‚\n  æ§åˆ¶ç»“æ„ è¾“å…¥å‚æ•°å’Œæˆ‘ä»¬å¸¸è§çš„å‡½æ•°çš„å‚æ•°ç›¸åŒ\nè¾“å‡ºå‚æ•°å¿…é¡»è¦åœ¨ returns åé¢ï¼Œå’Œ go çš„ç±»ä¼¼\nfunction arithmetics(uint _a, uint _b) returns (uint o_sum, uint o_product) {  o_sum = _a + _b;  o_product = _a * _b; }  function arithmetics(uint _a, uint _b) returns (uint , uint ) {  o_sum = _a + _b;  o_product = _a * _b;  return o_sum, o_product; } ä¸èƒ½ç”¨ switch å’Œ goto\nå†…éƒ¨å‡½æ•°è°ƒç”¨ï¼Œå°±å’Œæ™®é€šçš„æ–¹æ³•è°ƒç”¨ä¸€æ ·ã€‚\nä»å¤–éƒ¨è°ƒç”¨åˆçº¦çš„å‡½æ•°ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªåˆçº¦å®ä¾‹ï¼ˆå’Œç±»çš„å¯¹è±¡ä¸€æ ·ï¼‰ï¼Œç„¶åè°ƒç”¨å®ä¾‹æ–¹æ³•ã€‚\nè°ƒå‡½æ•°è¦å‘é€ wei å’Œ gasï¼Œå°±åƒä¸‹å›¾æ‰€ç¤ºï¼š\npragma solidity ^0.4.0;  contract InfoFeed {  function info() public payable returns (uint ret) { return 42; } }  contract Consumer {  InfoFeed feed;  function setFeed(address addr) public { feed = InfoFeed(addr); }  function callFeed() public { feed.info.value(10).gas(800)(); } } payable ä¿®é¥°ç¬¦è¦ç”¨äºä¿®é¥° infoï¼Œå¦åˆ™ï¼Œ.value() é€‰é¡¹å°†ä¸å¯ç”¨ã€‚\nå¯ä»¥é€šè¿‡ new åˆ›å»ºä¸€ä¸ªåˆçº¦ï¼Œå’Œ new å‡ºä¸€ä¸ªå¯¹è±¡ä¸€æ ·ã€‚\nåˆçº¦ç»“æ„   çŠ¶æ€å˜é‡\nçŠ¶æ€å˜é‡æ˜¯æ°¸ä¹…å­˜å‚¨åœ¨åˆçº¦ä¸­çš„å€¼ï¼Œå…¶å®å¯ä»¥ç†è§£ä¸ºç±»çš„æˆå‘˜å˜é‡ã€‚\n  å‡½æ•°\nå‡½æ•°æ˜¯åˆçº¦çš„å¯æ‰§è¡Œå•å…ƒï¼Œå¯ä»¥ç†è§£ä¸ºç±»çš„æˆå‘˜å‡½æ•°ã€‚\n  å‡½æ•°ä¿®é¥°å™¨\nä»¥å£°æ˜çš„å½¢å¼æ”¹è‰¯å‡½æ•°è¯­ä¹‰ã€‚\n  äº‹ä»¶\nä»¥å¤ªåŠçš„æ—¥å¿—å·¥å…·æ¥å£ã€‚\nevent HighestBidIncreased(address bidder, uint amount); // äº‹ä»¶  emit HighestBidIncreased(msg.sender, msg.value); // è§¦å‘äº‹ä»¶   ç»“æ„ä½“\nç†è§£ä¸ºæ•°æ®ç±»ã€‚\n  æšä¸¾\n  åˆçº¦å‡½æ•°å¯è§æ€§ä¿®é¥°\n","permalink":"https://zhenfeng-zhu.github.io/post/contract/","summary":"ç±»å‹ Solidity æ˜¯é™æ€ç±»å‹çš„è¯­è¨€ã€‚\nå€¼ç±»å‹  bool int/uint fixed/unfixed address  balance å’Œ transfer send call, callcode å’Œ delegatecall   byte bytes å’Œ string åå…­è¿›åˆ¶ hex\u0026quot;0012\u0026quot; enum function  å¼•ç”¨ç±»å‹   æ•°ç»„\nuint[]\n  ç»“æ„ä½“\nstruct\n  Map\nmapping(key =\u0026gt; value)\n  å•å…ƒå’Œå…¨å±€å˜é‡   ä»¥å¤ªå¸çš„å•ä½\nåœ¨æ•°å­—åé¢åŠ ä¸ŠÂ weiã€Â finneyã€Â szaboÂ æˆ–Â etherã€‚é»˜è®¤æ˜¯ wei\n  æ—¶é—´å•ä½\næ•°å­—åé¢å¸¦æœ‰Â secondsã€Â minutesã€Â hoursã€Â daysã€Â weeksÂ å’ŒÂ yearsã€‚é»˜è®¤æ˜¯ç§’ã€‚\n  åŒºå—å’Œäº¤æ˜“","title":"contract"},{"content":"faas-provider æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œåªè¦å®ç°äº†è¿™ä¸ªæ¨¡æ¿çš„æ¥å£ï¼Œå°±å¯ä»¥è‡ªå®šä¹‰å®ç°è‡ªå·±çš„ providerã€‚\nfaas-provider OpenFaaS å®˜æ–¹æä¾›äº†ä¸¤å¥—åå° providerï¼š\n Docker Swarm Kubernetes  è¿™ä¸¤è€…åœ¨éƒ¨ç½²å’Œè°ƒç”¨å‡½æ•°çš„æ—¶å€™æµç¨‹å›¾å¦‚ä¸‹ï¼š\néƒ¨ç½²ä¸€ä¸ªå‡½æ•°\nè°ƒç”¨ä¸€ä¸ªå‡½æ•°\nprovider è¦æä¾›çš„ä¸€äº› API æœ‰ï¼š\n List / Create / Delete ä¸€ä¸ªå‡½æ•°  /system/functions\næ–¹æ³•: GET / POST / DELETE\n è·å–ä¸€ä¸ªå‡½æ•°  /system/function/{name:[-a-zA-Z_0-9]+}\næ–¹æ³•: GET\n ä¼¸ç¼©ä¸€ä¸ªå‡½æ•°  /system/scale-function/{name:[-a-zA-Z_0-9]+}\næ–¹æ³•: POST\n è°ƒç”¨ä¸€ä¸ªå‡½æ•°  /function/{name:[-a-zA-Z_0-9]+}\næ–¹æ³•: POST\nåœ¨ provider çš„ server.go çš„ serve æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ª serve æ–¹æ³•åˆ›å»ºäº†å‡ ä¸ªè·¯ç”±ï¼Œæ¥å—ä¸€ä¸ª FaaSHandler å¯¹è±¡ã€‚\n// Serve load your handlers into the correct OpenFaaS route spec. This function is blocking. func Serve(handlers *types.FaaSHandlers, config *types.FaaSConfig) {  r.HandleFunc(\u0026#34;/system/functions\u0026#34;, handlers.FunctionReader).Methods(\u0026#34;GET\u0026#34;)  r.HandleFunc(\u0026#34;/system/functions\u0026#34;, handlers.DeployHandler).Methods(\u0026#34;POST\u0026#34;)  r.HandleFunc(\u0026#34;/system/functions\u0026#34;, handlers.DeleteHandler).Methods(\u0026#34;DELETE\u0026#34;)  r.HandleFunc(\u0026#34;/system/functions\u0026#34;, handlers.UpdateHandler).Methods(\u0026#34;PUT\u0026#34;)   r.HandleFunc(\u0026#34;/system/function/{name:[-a-zA-Z_0-9]+}\u0026#34;, handlers.ReplicaReader).Methods(\u0026#34;GET\u0026#34;)  r.HandleFunc(\u0026#34;/system/scale-function/{name:[-a-zA-Z_0-9]+}\u0026#34;, handlers.ReplicaUpdater).Methods(\u0026#34;POST\u0026#34;)   r.HandleFunc(\u0026#34;/function/{name:[-a-zA-Z_0-9]+}\u0026#34;, handlers.FunctionProxy)  r.HandleFunc(\u0026#34;/function/{name:[-a-zA-Z_0-9]+}/\u0026#34;, handlers.FunctionProxy)   r.HandleFunc(\u0026#34;/system/info\u0026#34;, handlers.InfoHandler).Methods(\u0026#34;GET\u0026#34;)   if config.EnableHealth {  r.HandleFunc(\u0026#34;/healthz\u0026#34;, handlers.Health).Methods(\u0026#34;GET\u0026#34;)  }  // çœç•¥ } å› æ­¤åœ¨è‡ªå®šä¹‰çš„ providerï¼Œåªéœ€å®ç° FaaSHandlers ä¸­çš„å‡ ä¸ªè·¯ç”±å¤„ç†å‡½æ•°å³å¯ã€‚è¿™å‡ ä¸ª handler æ˜¯ï¼š\n// FaaSHandlers provide handlers for OpenFaaS type FaaSHandlers struct {  FunctionReader http.HandlerFunc  DeployHandler http.HandlerFunc  DeleteHandler http.HandlerFunc  ReplicaReader http.HandlerFunc  FunctionProxy http.HandlerFunc  ReplicaUpdater http.HandlerFunc   // Optional: Update an existing function  UpdateHandler http.HandlerFunc  Health http.HandlerFunc  InfoHandler http.HandlerFunc } æˆ‘ä»¬ä»¥å®˜æ–¹å®ç°çš„ faas-netes ä¸ºä¾‹ï¼Œè®²è§£ä¸€ä¸‹è¿™å‡ ä¸ª hander çš„å®ç°è¿‡ç¨‹ã€‚\nfaas-netes æˆ‘ä»¬çœ‹ä¸‹åœ¨ faas-netes çš„ä¸­çš„ FaaSHandlers å®ç°ï¼š\nbootstrapHandlers := bootTypes.FaaSHandlers{  FunctionProxy: handlers.MakeProxy(functionNamespace, cfg.ReadTimeout),  DeleteHandler: handlers.MakeDeleteHandler(functionNamespace, clientset),  DeployHandler: handlers.MakeDeployHandler(functionNamespace, clientset, deployConfig),  FunctionReader: handlers.MakeFunctionReader(functionNamespace, clientset),  ReplicaReader: handlers.MakeReplicaReader(functionNamespace, clientset),  ReplicaUpdater: handlers.MakeReplicaUpdater(functionNamespace, clientset),  UpdateHandler: handlers.MakeUpdateHandler(functionNamespace, clientset),  Health: handlers.MakeHealthHandler(),  InfoHandler: handlers.MakeInfoHandler(version.BuildVersion(), version.GitCommit), } å› ä¸ºæ˜¯ Kubernetes ä¸Šçš„ provider å®ç°ï¼Œæ‰€ä»¥è¿™äº›å‡½æ•°éƒ½å¸¦æœ‰ä¸€ä¸ª namespace çš„å‚æ•°ã€‚\nFunctionProxy è¿™é‡Œæœ€é‡è¦çš„å°±æ˜¯ FunctionProxyï¼Œå®ƒä¸»è¦è´Ÿè´£è°ƒç”¨å‡½æ•°ã€‚è¿™ä¸ª handler å…¶å®ä¹Ÿæ˜¯èµ·åˆ°äº†ä¸€ä¸ªä»£ç†è½¬å‘çš„ä½œç”¨ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œåªæ¥å— get å’Œ postã€‚è°ƒç”¨å‡½æ•°åªæ¥å— post å’Œ get è¯·æ±‚\n  åˆ›å»ºä¸€ä¸ª http çš„ client å¯¹è±¡\n  åªå¤„ç† get å’Œ post è¯·æ±‚ã€‚\n  ç»„è£…ä»£ç†è½¬å‘çš„ watchdog çš„åœ°å€\nurl := forwardReq.ToURL(fmt.Sprintf(\u0026#34;%s.%s\u0026#34;, service, functionNamespace), watchdogPort) æ‰€ä»¥æœ€åè¯·æ±‚çš„æ ¼å¼å°±ä¼šå½¢å¦‚ï¼š\nhttp://å‡½æ•°å.namespace:ç›‘è§†å™¨çš„ç«¯å£/è·¯å¾„   å°†è¯·æ±‚å‘å‡ºå»\n  è®¾ç½® http å“åº”çš„å¤´\n  ReplicaReader å’Œ ReplicaUpdater è¿™ä¸¤ä¸ªæ˜¯å’Œå‰¯æœ¬æ•°ç›¸å…³çš„ï¼Œæ‰€ä»¥æ”¾åœ¨ä¸€èµ·å¯¹æ¯”è®²è§£ã€‚è¿™ä¸¤ä¸ªçš„å®ç°ä¾èµ–äº Kubernetes çš„å®¢æˆ·ç«¯ï¼Œè·å–ä»£ç å¦‚ä¸‹ï¼š\nclientset, err := kubernetes.NewForConfig(config) è¿™ä¸ª config ä¸»è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶å°±è¡Œï¼š\nConfig{  // TODO: switch to using cluster DNS.  Host: \u0026#34;https://\u0026#34; + net.JoinHostPort(host, port),  BearerToken: string(token),  TLSClientConfig: tlsClientConfig, } Kubernetes çš„æ‰€æœ‰æ“ä½œéƒ½å¯ä»¥é€šè¿‡ rest api æ¥å®Œæˆï¼Œè¿™ä¸¤ä¸ª handler ä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨ Kubernetes çš„ api æ¥åšçš„ã€‚\nReplicaReader MakeReplicaReaderå‡½æ•°æ˜¯è·å–å½“å‰çš„å‰¯æœ¬æ•°ï¼š\n  é€šè¿‡ mux ä»è·¯ç”±ä¸­è·å–åˆ° name å‚æ•°\n  è°ƒç”¨ getService æ–¹æ³•è·å–å‰¯æœ¬æ•°ï¼ŒgetService çš„æ ¸å¿ƒä»£ç å°±ä¸€å¥ï¼š\nitem, err := clientset.ExtensionsV1beta1().Deployments(functionNamespace).Get(functionName, getOpts)   åºåˆ—åŒ–ä¹‹åï¼ŒæŠŠç»“æœè¿”å›\n  ReplicaUpdater MakeReplicaUpdateræ˜¯è§£æä» gateway ä¼ è¿‡æ¥çš„ post è¯·æ±‚ï¼Œè°ƒç”¨ k8s çš„ API è®¾ç½®å‰¯æœ¬æ•°ã€‚\n  ä»è¯·æ±‚ä¸­å–å‡º body\n  é¦–å…ˆè·å–è¯¥å‡½æ•°çš„å·²éƒ¨ç½²çš„ deployment å¯¹è±¡\n  ç„¶åå°† deployment çš„å‰¯æœ¬æ•°é‡è®¾ç½®ä¸ºåº”è®¾æ•°é‡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†ä»…ä»…ä¿®æ”¹å‰¯æœ¬æ•°ï¼Œè€Œä¸ä¿®æ”¹åˆ«çš„å±æ€§ã€‚\n_, err = clientset.ExtensionsV1beta1().Deployments(functionNamespace).Update(deployment)    æ³¨ï¼šmux åšè·¯ç”±çš„æ—¶å€™ï¼Œå¦‚æœæˆåŠŸçš„æ—¶å€™ä¸å¯¹ w åšä»»ä½•å¤„ç†ï¼Œæ˜¯ä¼šé»˜è®¤çŠ¶æ€ç ä¸º 200ï¼Œç©ºå­—ç¬¦ä¸²ã€‚\n DeleteHandlerï¼ŒDeployHandlerï¼ŒFunctionReader å’Œ UpdateHandler è¿™å‡ ä¸ªéƒ½æ˜¯å¯¹å‡½æ•°çš„æ“ä½œï¼Œå…¶å®å°±æ˜¯è°ƒç”¨ä¸€ä¸‹ Kubernetes çš„ API è¿›è¡Œæ“ä½œã€‚\nè¿™å‡ ä¸ªæ˜¯æ ¸å¿ƒçš„å‡ å¥ä»£ç ï¼š\nclientset.ExtensionsV1beta1().Deployments(functionNamespace).Delete(request.FunctionName, opts)  deploy := clientset.Extensions().Deployments(functionNamespace)  res, err := clientset.ExtensionsV1beta1().Deployments(functionNamespace).List(listOpts)  _, updateErr := clientset.CoreV1().Services(functionNamespace).Update(service) æ€»ç»“ å®˜æ–¹è¿˜æä¾›äº†ä¸€ä¸ª faas-swarmï¼Œå…¶å®ç°æ€è·¯ä¹Ÿæ˜¯è¿™æ ·ï¼Œæ“ä½œ swarm çš„ api æ¥åšå¯¹å®¹å™¨çš„æ“ä½œã€‚è‡³äºå¦‚ä½•è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½æ˜¯åœ¨å‡½æ•°çš„ watchdog ä¸­å®ç°ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/faas-provider/","summary":"faas-provider æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œåªè¦å®ç°äº†è¿™ä¸ªæ¨¡æ¿çš„æ¥å£ï¼Œå°±å¯ä»¥è‡ªå®šä¹‰å®ç°è‡ªå·±çš„ providerã€‚\nfaas-provider OpenFaaS å®˜æ–¹æä¾›äº†ä¸¤å¥—åå° providerï¼š\n Docker Swarm Kubernetes  è¿™ä¸¤è€…åœ¨éƒ¨ç½²å’Œè°ƒç”¨å‡½æ•°çš„æ—¶å€™æµç¨‹å›¾å¦‚ä¸‹ï¼š\néƒ¨ç½²ä¸€ä¸ªå‡½æ•°\nè°ƒç”¨ä¸€ä¸ªå‡½æ•°\nprovider è¦æä¾›çš„ä¸€äº› API æœ‰ï¼š\n List / Create / Delete ä¸€ä¸ªå‡½æ•°  /system/functions\næ–¹æ³•: GET / POST / DELETE\n è·å–ä¸€ä¸ªå‡½æ•°  /system/function/{name:[-a-zA-Z_0-9]+}\næ–¹æ³•: GET\n ä¼¸ç¼©ä¸€ä¸ªå‡½æ•°  /system/scale-function/{name:[-a-zA-Z_0-9]+}\næ–¹æ³•: POST\n è°ƒç”¨ä¸€ä¸ªå‡½æ•°  /function/{name:[-a-zA-Z_0-9]+}\næ–¹æ³•: POST\nåœ¨ provider çš„ server.go çš„ serve æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ª serve æ–¹æ³•åˆ›å»ºäº†å‡ ä¸ªè·¯ç”±ï¼Œæ¥å—ä¸€ä¸ª FaaSHandler å¯¹è±¡ã€‚\n// Serve load your handlers into the correct OpenFaaS route spec.","title":"faas-provider"},{"content":"OpenFaaS çš„ Gateway æ˜¯ä¸€ä¸ª golang å®ç°çš„è¯·æ±‚è½¬å‘çš„ç½‘å…³ï¼Œåœ¨è¿™ä¸ªç½‘å…³æœåŠ¡ä¸­ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š\n UI éƒ¨ç½²å‡½æ•° ç›‘æ§ è‡ªåŠ¨ä¼¸ç¼©  æ¶æ„åˆ†æ ä»å›¾ä¸­å¯ä»¥å‘ç°ï¼Œå½“ Gateway ä½œä¸ºä¸€ä¸ªå…¥å£ï¼Œå½“ CLI æˆ–è€… web é¡µé¢å‘æ¥è¦éƒ¨ç½²æˆ–è€…è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒGateway ä¼šå°†è¯·æ±‚è½¬å‘ç»™ Providerï¼ŒåŒæ—¶ä¼šå°†ç›‘æ§æŒ‡æ ‡å‘ç»™ Prometheusã€‚AlterManager ä¼šæ ¹æ®éœ€æ±‚ï¼Œè°ƒç”¨ API è‡ªåŠ¨ä¼¸ç¼©å‡½æ•°ã€‚\næºç åˆ†æ ä¾èµ– github.com/gorilla/mux  github.com/nats-io/go-nats-streaming github.com/nats-io/go-nats github.com/openfaas/nats-queue-worker  github.com/prometheus/client_golang mux æ˜¯ä¸€ä¸ªç”¨æ¥æ‰§è¡Œ http è¯·æ±‚çš„è·¯ç”±å’Œåˆ†å‘çš„ç¬¬ä¸‰æ–¹æ‰©å±•åŒ…ã€‚\ngo-nats-streamingï¼Œgo-natsï¼Œnats-queue-worker è¿™ä¸‰ä¸ªä¾èµ–æ˜¯å¼‚æ­¥å‡½æ•°çš„æ—¶å€™æ‰ä¼šç”¨åˆ°ï¼Œåœ¨åˆ†æ queue-worker çš„æ—¶å€™æœ‰è¯´åˆ° Gateway ä¹Ÿæ˜¯ä¸€ä¸ªå‘å¸ƒè€…ã€‚\nclient_golang æ˜¯ Prometheus çš„å®¢æˆ·ç«¯ã€‚\né¡¹ç›®ç»“æ„ â”œâ”€â”€ Dockerfile â”œâ”€â”€ Dockerfile.arm64 â”œâ”€â”€ Dockerfile.armhf â”œâ”€â”€ Gopkg.lock â”œâ”€â”€ Gopkg.toml â”œâ”€â”€ README.md â”œâ”€â”€ assets â”œâ”€â”€ build.sh â”œâ”€â”€ handlers â”‚Â â”œâ”€â”€ alerthandler.go â”‚Â â”œâ”€â”€ alerthandler_test.go â”‚Â â”œâ”€â”€ asyncreport.go â”‚Â â”œâ”€â”€ baseurlresolver_test.go â”‚Â â”œâ”€â”€ basic_auth.go â”‚Â â”œâ”€â”€ basic_auth_test.go â”‚Â â”œâ”€â”€ callid_middleware.go â”‚Â â”œâ”€â”€ cors.go â”‚Â â”œâ”€â”€ cors_test.go â”‚Â â”œâ”€â”€ forwarding_proxy.go â”‚Â â”œâ”€â”€ forwarding_proxy_test.go â”‚Â â”œâ”€â”€ function_cache.go â”‚Â â”œâ”€â”€ function_cache_test.go â”‚Â â”œâ”€â”€ infohandler.go â”‚Â â”œâ”€â”€ metrics.go â”‚Â â”œâ”€â”€ queueproxy.go â”‚Â â”œâ”€â”€ scaling.go â”‚Â â””â”€â”€ service_query.go â”œâ”€â”€ metrics â”‚Â â”œâ”€â”€ add_metrics.go â”‚Â â”œâ”€â”€ add_metrics_test.go â”‚Â â”œâ”€â”€ externalwatcher.go â”‚Â â”œâ”€â”€ metrics.go â”‚Â â””â”€â”€ prometheus_query.go â”œâ”€â”€ plugin â”‚Â â”œâ”€â”€ external.go â”‚Â â””â”€â”€ external_test.go â”œâ”€â”€ queue â”‚Â â””â”€â”€ types.go â”œâ”€â”€ requests â”‚Â â”œâ”€â”€ forward_request.go â”‚Â â”œâ”€â”€ forward_request_test.go â”‚Â â”œâ”€â”€ prometheus.go â”‚Â â”œâ”€â”€ prometheus_test.go â”‚Â â””â”€â”€ requests.go â”œâ”€â”€ server.go â”œâ”€â”€ tests â”‚Â â””â”€â”€ integration â”œâ”€â”€ types â”‚Â â”œâ”€â”€ handler_set.go â”‚Â â”œâ”€â”€ inforequest.go â”‚Â â”œâ”€â”€ load_credentials.go â”‚Â â”œâ”€â”€ proxy_client.go â”‚Â â”œâ”€â”€ readconfig.go â”‚Â â””â”€â”€ readconfig_test.go â”œâ”€â”€ vendor â”‚Â â””â”€â”€ github.com â””â”€â”€ version  â””â”€â”€ version.go Gateway çš„ç›®å½•æ˜æ˜¾å¤šäº†å¾ˆå¤šï¼Œçœ‹æºç çš„æ—¶å€™ï¼Œé¦–å…ˆè¦æ‰¾åˆ°çš„æ˜¯ main åŒ…ï¼Œä» main å‡½æ•°çœ‹èµ·ï¼Œå°±èƒ½å¾ˆå®¹æ˜“åˆ†æå‡ºæ¥é¡¹ç›®æ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚\nä» server.go çš„ main å‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®æœ‰å¦‚ä¸‹å‡ ä¸ªæ¨¡å—ï¼š\n åŸºæœ¬çš„å®‰å…¨éªŒè¯ å’Œå‡½æ•°ç›¸å…³çš„ä»£ç†è½¬å‘  åŒæ­¥å‡½æ•°  åˆ—å‡ºå‡½æ•° éƒ¨ç½²å‡½æ•° åˆ é™¤å‡½æ•° æ›´æ–°å‡½æ•°   å¼‚æ­¥å‡½æ•°   Prometheus çš„ç›‘æ§ ui è‡ªåŠ¨ä¼¸ç¼©  åŸºæœ¬çš„å®‰å…¨éªŒè¯ å¦‚æœé…ç½®äº†å¼€å¯åŸºæœ¬å®‰å…¨éªŒè¯ï¼Œä¼šä»ç£ç›˜ä¸­è¯»å–å¯†é’¥ï¼š\nvar credentials *types.BasicAuthCredentials  if config.UseBasicAuth {  var readErr error  reader := types.ReadBasicAuthFromDisk{  SecretMountPath: config.SecretMountPath,  }  credentials, readErr = reader.Read()   if readErr != nil {  log.Panicf(readErr.Error())  } } åœ¨ Gateway çš„é…ç½®ç›¸å…³çš„ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª read()æ–¹æ³•ï¼Œè¿›è¡Œåˆå§‹åŒ–èµ‹å€¼ã€‚\nå¦‚æœ credentials è¢«èµ‹å€¼ä¹‹åï¼Œå°±ä¼šå¯¹ä¸€äº›è¦åŠ å¯†çš„ API handler è¿›è¡Œä¸€ä¸ªä¿®é¥°ï¼Œè¢«ä¿®é¥°çš„ API æœ‰ï¼š\n UpdateFunction DeleteFunction DeployFunction ListFunctions ScaleFunction  if credentials != nil {  faasHandlers.UpdateFunction =  handlers.DecorateWithBasicAuth(faasHandlers.UpdateFunction, credentials)  faasHandlers.DeleteFunction =  handlers.DecorateWithBasicAuth(faasHandlers.DeleteFunction, credentials)  faasHandlers.DeployFunction =  handlers.DecorateWithBasicAuth(faasHandlers.DeployFunction, credentials)  faasHandlers.ListFunctions =  handlers.DecorateWithBasicAuth(faasHandlers.ListFunctions, credentials)  faasHandlers.ScaleFunction =  handlers.DecorateWithBasicAuth(faasHandlers.ScaleFunction, credentials) } è¿™ä¸ª DecorateWithBasicAuth()æ–¹æ³•æ˜¯ä¸€ä¸ªè·¯ç”±ä¸­é—´ä»¶ï¼š\n è°ƒç”¨ mux è·¯ç”±çš„ BasicAuth()ï¼Œä» http çš„ header ä¸­å–åˆ°ç”¨æˆ·åå’Œå¯†ç  ç„¶åç»™è¯·æ±‚å¤´ä¸Šè®¾ç½®ä¸€ä¸ªå­—æ®µWWW-Authenticateï¼Œå€¼ä¸ºBasic realm=\u0026quot;Restricted\u0026quot; å¦‚æœæ ¡éªŒå¤±è´¥ï¼Œåˆ™è¿”å›é”™è¯¯ï¼ŒæˆåŠŸçš„è¯è°ƒç”¨ next æ–¹æ³•ç»§ç»­è¿›å…¥ä¸‹ä¸€ä¸ª handlerã€‚  // DecorateWithBasicAuth enforces basic auth as a middleware with given credentials func DecorateWithBasicAuth(next http.HandlerFunc, credentials *types.BasicAuthCredentials) http.HandlerFunc {  return func(w http.ResponseWriter, r *http.Request) {  user, password, ok := r.BasicAuth()  w.Header().Set(\u0026#34;WWW-Authenticate\u0026#34;, `Basic realm=\u0026#34;Restricted\u0026#34;`)   if !ok || !(credentials.Password == password \u0026amp;\u0026amp; user == credentials.User) {   w.WriteHeader(http.StatusUnauthorized)  w.Write([]byte(\u0026#34;invalid credentials\u0026#34;))  return  }  next.ServeHTTP(w, r)  } } ä»£ç†è½¬å‘ Gateway æœ¬èº«ä¸åšä»»ä½•å’Œéƒ¨ç½²å‘å¸ƒå‡½æ•°çš„äº‹æƒ…ï¼Œå®ƒåªæ˜¯ä½œä¸ºä¸€ä¸ªä»£ç†ï¼ŒæŠŠè¯·æ±‚è½¬å‘ç»™ç›¸åº”çš„ Provider å»å¤„ç†ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½è¦é€šè¿‡è¿™ä¸ªç½‘å…³ã€‚\nåŒæ­¥å‡½æ•°è½¬å‘ ä¸»è¦è½¬å‘çš„ API æœ‰ï¼š\n RoutelessProxy ListFunctions DeployFunction DeleteFunction UpdateFunction  faasHandlers.RoutelessProxy = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver)  faasHandlers.ListFunctions = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver)  faasHandlers.DeployFunction = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver)  faasHandlers.DeleteFunction = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver)  faasHandlers.UpdateFunction = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver) MakeForwardingProxyHandler()æœ‰ä¸‰ä¸ªå‚æ•°ï¼š\n  proxy\nè¿™æ˜¯ä¸€ä¸ª http çš„å®¢æˆ·ç«¯ï¼Œä½œè€…æŠŠè¿™ä¸ªå®¢æˆ·ç«¯æŠ½æˆä¸€ä¸ªç±»ï¼Œç„¶åä½¿ç”¨è¯¥ç±»çš„ NewHTTPClientReverseProxy æ–¹æ³•åˆ›å»ºå®ä¾‹ï¼Œè¿™æ ·å°±ç®€åŒ–äº†ä»£ç ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å¾—å†™ä¸€å †ç›¸åŒçš„é…ç½®ã€‚\n  notifiers\nè¿™ä¸ªå…¶å®æ˜¯è¦æ‰“å°çš„æ—¥å¿—ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ª HTTPNotifier çš„æ¥å£ã€‚è€Œåœ¨è¿™ä¸ª MakeForwardingProxyHandler ä¸­å…¶å®æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼Œä¸€ä¸ªæ˜¯ LoggingNotifierï¼Œä¸€ä¸ªæ˜¯ PrometheusFunctionNotifierï¼Œåˆ†åˆ«ç”¨æ¥æ‰“å°å’Œå‡½æ•° http è¯·æ±‚ç›¸å…³çš„æ—¥å¿—ä»¥åŠå’Œ Prometheus ç›‘æ§ç›¸å…³çš„æ—¥å¿—ã€‚\n  baseURLResolver\nè¿™ä¸ªå°±æ˜¯ Provider çš„ url åœ°å€ã€‚\n  åœ¨è¿™ä¸ª MakeForwardingProxyHandler ä¸­ä¸»è¦åšäº†ä¸‰ä»¶äº‹å„¿ï¼š\n  è§£æè¦è½¬å‘çš„ url\n  è°ƒç”¨ forwardRequest æ–¹æ³•è½¬å‘è¯·æ±‚ï¼Œ\nforwardRequest æ–¹æ³•çš„é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯æŠŠè¯·æ±‚å‘å‡ºå»ã€‚è¿™é‡Œå°±ä¸æ·±å…¥åˆ†æäº†ã€‚\n  æ‰“å°æ—¥å¿—\n  // MakeForwardingProxyHandler create a handler which forwards HTTP requests func MakeForwardingProxyHandler(proxy *types.HTTPClientReverseProxy, notifiers []HTTPNotifier, baseURLResolver BaseURLResolver) http.HandlerFunc {  return func(w http.ResponseWriter, r *http.Request) {  baseURL := baseURLResolver.Resolve(r)  requestURL := r.URL.Path  start := time.Now()  statusCode, err := forwardRequest(w, r, proxy.Client, baseURL, requestURL, proxy.Timeout)  seconds := time.Since(start)  if err != nil {  log.Printf(\u0026#34;error with upstream request to: %s, %s\\n\u0026#34;, requestURL, err.Error())  }  for _, notifier := range notifiers {  notifier.Notify(r.Method, requestURL, statusCode, seconds)  }  } } å¼‚æ­¥å‡½æ•°è½¬å‘ å‰é¢è¯´è¿‡ï¼Œå¦‚æœæ˜¯å¼‚æ­¥å‡½æ•°ï¼ŒGateway å°±ä½œä¸ºä¸€ä¸ªå‘å¸ƒè€…ï¼Œå°†å‡½æ•°æ”¾åˆ°é˜Ÿåˆ—é‡Œã€‚MakeQueuedProxy æ–¹æ³•å°±æ˜¯åšè¿™ä»¶äº‹å„¿çš„ï¼š\n è¯»å–è¯·æ±‚ä½“ å°†X-Callback-Urlå‚æ•°ä»å‚æ•°ä¸­ http çš„ header ä¸­è¯»å‡ºæ¥ å®ä¾‹åŒ–ç”¨äºå¼‚æ­¥å¤„ç†çš„ Request å¯¹è±¡ è°ƒç”¨ canQueueRequests.Queue(req)ï¼Œå°†è¯·æ±‚å‘å¸ƒåˆ°é˜Ÿåˆ—ä¸­  // MakeQueuedProxy accepts work onto a queue func MakeQueuedProxy(metrics metrics.MetricOptions, wildcard bool, canQueueRequests queue.CanQueueRequests) http.HandlerFunc {  return func(w http.ResponseWriter, r *http.Request) {  defer r.Body.Close()  body, err := ioutil.ReadAll(r.Body)  // çœç•¥é”™è¯¯å¤„ç†ä»£ç   vars := mux.Vars(r)  name := vars[\u0026#34;name\u0026#34;]   callbackURLHeader := r.Header.Get(\u0026#34;X-Callback-Url\u0026#34;)  var callbackURL *url.URL  if len(callbackURLHeader) \u0026gt; 0 {  urlVal, urlErr := url.Parse(callbackURLHeader)  // çœç•¥é”™è¯¯å¤„ç†ä»£ç   callbackURL = urlVal  }  req := \u0026amp;queue.Request{  Function: name,  Body: body,  Method: r.Method,  QueryString: r.URL.RawQuery,  Header: r.Header,  CallbackURL: callbackURL,  }  err = canQueueRequests.Queue(req)  // çœç•¥é”™è¯¯å¤„ç†ä»£ç   w.WriteHeader(http.StatusAccepted)  } } è‡ªåŠ¨ä¼¸ç¼© ä¼¸ç¼©æ€§å…¶å®æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¯ä»¥é€šè¿‡è°ƒç”¨ API æ¥å£ï¼Œæ¥å°†å‡½æ•°è¿›è¡Œç¼©æ”¾ã€‚å¦å¤–ä¸€ç§å°±æ˜¯é€šè¿‡ AlertHandlerã€‚\nè‡ªåŠ¨ä¼¸ç¼©æ˜¯ OpenFaaS çš„ä¸€å¤§ç‰¹ç‚¹ï¼Œè§¦å‘è‡ªåŠ¨ä¼¸ç¼©ä¸»è¦æ˜¯æ ¹æ®ä¸åŒçš„æŒ‡æ ‡éœ€æ±‚ã€‚\n  æ ¹æ®æ¯ç§’è¯·æ±‚æ•°æ¥åšä¼¸ç¼©\nOpenFaaS é™„å¸¦äº†ä¸€ä¸ªè‡ªåŠ¨ä¼¸ç¼©çš„è§„åˆ™ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯åœ¨ AlertManager é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ã€‚AlertManager ä» Prometheus ä¸­è¯»å–ä½¿ç”¨æƒ…å†µï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰ï¼Œç„¶ååœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶å‘ Gateway å‘é€è­¦æŠ¥ã€‚\nå¯ä»¥é€šè¿‡åˆ é™¤ AlertManagerï¼Œæˆ–è€…å°†éƒ¨ç½²æ‰©å±•çš„ç¯å¢ƒå˜é‡è®¾ç½®ä¸º 0ï¼Œæ¥ç¦ç”¨æ­¤æ–¹å¼ã€‚\n  æœ€å°/æœ€å¤§å‰¯æœ¬æ•°\né€šè¿‡å‘å‡½æ•°æ·»åŠ æ ‡ç­¾, å¯ä»¥åœ¨éƒ¨ç½²æ—¶è®¾ç½®æœ€å° (åˆå§‹) å’Œæœ€å¤§å‰¯æœ¬æ•°ã€‚\n com.openfaas.scale.min é»˜è®¤æ˜¯ 1 com.openfaas.scale.max é»˜è®¤æ˜¯ 20 com.openfaas.scale.factor é»˜è®¤æ˜¯ 20% ï¼Œåœ¨ 0-100 ä¹‹é—´ï¼Œè¿™æ˜¯æ¯æ¬¡æ‰©å®¹çš„æ—¶å€™ï¼Œæ–°å¢å®ä¾‹çš„ç™¾åˆ†æ¯”ï¼Œè‹¥æ˜¯ 100 çš„è¯ï¼Œä¼šç¬é—´é£™å‡åˆ°å‰¯æœ¬æ•°çš„æœ€å¤§å€¼ã€‚  com.openfaas.scale.minÂ å’ŒÂ com.openfaas.scale.maxå€¼ä¸€æ ·çš„æ—¶å€™ï¼Œå¯ä»¥å…³é—­è‡ªåŠ¨ä¼¸ç¼©ã€‚\ncom.openfaas.scale.factoræ˜¯ 0 æ—¶ï¼Œä¹Ÿä¼šå…³é—­è‡ªåŠ¨ä¼¸ç¼©ã€‚\n  é€šè¿‡å†…å­˜å’Œ CPU çš„ä½¿ç”¨é‡ã€‚\nä½¿ç”¨ k8s å†…ç½®çš„ HPAï¼Œä¹Ÿå¯ä»¥è§¦å‘ AlertManagerã€‚\n  æ‰‹åŠ¨æŒ‡å®šä¼¸ç¼©çš„å€¼ å¯ä»¥ä»è¿™å¥ä»£ç ä¸­å‘ç°ï¼Œè°ƒç”¨è¿™ä¸ªè·¯ç”±ï¼Œè½¬å‘ç»™äº† provider å¤„ç†ã€‚\nr.HandleFunc(\u0026#34;/system/scale-function/{name:[-a-zA-Z_0-9]+}\u0026#34;, faasHandlers.ScaleFunction).Methods(http.MethodPost) å¤„ç† AlertManager çš„ä¼¸ç¼©è¯·æ±‚ Prometheus å°†ç›‘æ§æŒ‡æ ‡å‘ç»™ AlertManager ä¹‹åï¼Œä¼šè§¦å‘ AlterManager è°ƒç”¨/system/alertæ¥å£ï¼Œè¿™ä¸ªæ¥å£çš„ handler æ˜¯ç”±handlers.MakeAlertHandleræ–¹æ³•ç”Ÿæˆã€‚\nMakeAlertHandler æ–¹æ³•æ¥æ”¶çš„å‚æ•°æ˜¯ ServiceQueryã€‚ServiceQuery æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œç”¨æ¥ get æˆ–è€… ser æœ€å¤§çš„å‰¯æœ¬æ•°ã€‚Gateway ä¸­å®ç°è¿™ä¸ªæ¥å£çš„ç±»æ˜¯ ExternalServiceQueryï¼Œè¿™ä¸ªå®ç°ç±»æ˜¯åœ¨ plugin åŒ…ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å®šåˆ¶è¿™ä¸ªå®ç°ç±»ï¼Œç”¨æ¥å®ç°æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚\n// ServiceQuery provides interface for replica querying/setting type ServiceQuery interface {  GetReplicas(service string) (response ServiceQueryResponse, err error)  SetReplicas(service string, count uint64) error }  // ExternalServiceQuery proxies service queries to external plugin via HTTP type ExternalServiceQuery struct {  URL url.URL  ProxyClient http.Client } è¿™ä¸ª ExternalServiceQuery æœ‰ä¸€ä¸ªNewExternalServiceQueryæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œç”¨æ¥åˆ›å»ºå®ä¾‹ã€‚è¿™ä¸ª url å…¶å®å°±æ˜¯ provider çš„ urlï¼ŒproxyClient å°±æ˜¯ä¸€ä¸ª http çš„ client å¯¹è±¡ã€‚\n  GetReplicasæ–¹æ³•\nä»system/function/:nameæ¥å£è·å–åˆ°å‡½æ•°çš„ä¿¡æ¯ï¼Œç»„è£…ä¸€ä¸ªServiceQueryResponseå¯¹è±¡å³å¯ã€‚\n  SetReplicasæ–¹æ³•\nè°ƒç”¨system/scale-function/:nameæ¥å£ï¼Œè®¾ç½®å‰¯æœ¬æ•°ã€‚\n  MakeAlertHandler çš„å‡½æ•°ä¸»è¦æ˜¯ä»http.Requestä¸­è¯»å– bodyï¼Œç„¶åååºåˆ—åŒ–æˆPrometheusAlertå¯¹è±¡ï¼š\n// PrometheusAlert as produced by AlertManager type PrometheusAlert struct {  Status string `json:\u0026#34;status\u0026#34;`  Receiver string `json:\u0026#34;receiver\u0026#34;`  Alerts []PrometheusInnerAlert `json:\u0026#34;alerts\u0026#34;` } å¯ä»¥å‘ç°ï¼Œè¿™ä¸ª Alerts æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥æ˜¯å¯¹å¤šä¸ªå‡½æ•°è¿›è¡Œç¼©æ”¾ã€‚ååºåˆ—åŒ–ä¹‹åï¼Œè°ƒç”¨handleAlertsæ–¹æ³•ï¼Œè€ŒhandleAlertså¯¹ Alerts è¿›è¡Œéå†ï¼Œé’ˆå¯¹æ¯ä¸ª Alerts è°ƒç”¨äº†scaleServiceæ–¹æ³•ã€‚scaleServiceæ‰æ˜¯çœŸæ­£å¤„ç†ä¼¸ç¼©æœåŠ¡çš„å‡½æ•°ã€‚\nfunc scaleService(alert requests.PrometheusInnerAlert, service ServiceQuery) error {  var err error  serviceName := alert.Labels.FunctionName   if len(serviceName) \u0026gt; 0 {  queryResponse, getErr := service.GetReplicas(serviceName)  if getErr == nil {  status := alert.Status   newReplicas := CalculateReplicas(status, queryResponse.Replicas, uint64(queryResponse.MaxReplicas), queryResponse.MinReplicas, queryResponse.ScalingFactor)   log.Printf(\u0026#34;[Scale] function=%s %d =\u0026gt; %d.\\n\u0026#34;, serviceName, queryResponse.Replicas, newReplicas)  if newReplicas == queryResponse.Replicas {  return nil  }   updateErr := service.SetReplicas(serviceName, newReplicas)  if updateErr != nil {  err = updateErr  }  }  }  return err } ä»ä»£ç æ€»å°±å¯ä»¥çœ‹åˆ°ï¼ŒscaleService åšäº†ä¸‰ä»¶äº‹å„¿ï¼š\n  è·å–ç°åœ¨çš„å‰¯æœ¬æ•°\n  è®¡ç®—æ–°çš„å‰¯æœ¬æ•°\næ–°å‰¯æœ¬æ•°çš„è®¡ç®—æ–¹æ³•æ˜¯æ ¹æ®com.openfaas.scale.factorè®¡ç®—æ­¥é•¿ï¼š\nstep := uint64((float64(maxReplicas) / 100) * float64(scalingFactor))   è®¾ç½®ä¸ºæ–°çš„å‰¯æœ¬æ•°\n  ä» 0 å¢åŠ å‰¯æœ¬åˆ°çš„æœ€å°å€¼ æˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œç”¨çš„è·¯ç”±æ˜¯ï¼š/function/:nameã€‚å¦‚æœç¯å¢ƒå˜é‡é‡Œæœ‰é…ç½®scale_from_zeroä¸º trueï¼Œå…ˆç”¨MakeScalingHandler()æ–¹æ³•å¯¹ proxyHandler è¿›è¡Œä¸€æ¬¡åŒ…è£…ã€‚\nMakeScalingHandleræ¥å—å‚æ•°ä¸»è¦æ˜¯ï¼š\n  nextï¼šå°±æ˜¯ä¸‹ä¸€ä¸ª httpHandlerFuncï¼Œä¸­é—´ä»¶éƒ½ä¼šæœ‰è¿™æ ·ä¸€ä¸ªå‚æ•°\n  configï¼šScalingConfigçš„å¯¹è±¡ï¼š\n// ScalingConfig for scaling behaviours type ScalingConfig struct {  MaxPollCount uint // æŸ¥åˆ°çš„æœ€å¤§æ•°é‡  FunctionPollInterval time.Duration // å‡½æ•°è°ƒç”¨æ—¶é—´é—´éš”  CacheExpiry time.Duration // ç¼“å­˜è¿‡æœŸæ—¶é—´  ServiceQuery ServiceQuery // å¤–éƒ¨æœåŠ¡è°ƒç”¨çš„ä¸€ä¸ªæ¥å£ }   è¿™ä¸ªMakeScalingHandlerä¸­é—´ä»¶ä¸»è¦åšäº†å¦‚ä¸‹çš„äº‹æƒ…ï¼š\n å…ˆä» FunctionCache ç¼“å­˜ä¸­è·å–è¯¥å‡½æ•°çš„åŸºæœ¬ä¿¡æ¯ï¼Œä»è¿™ä¸ªç¼“å­˜å¯ä»¥æ‹¿åˆ°æ¯ä¸ªå‡½æ•°çš„å‰¯æœ¬æ•°é‡ã€‚ ä¸ºäº†åŠ å¿«å‡½æ•°çš„å¯åŠ¨é€Ÿåº¦ï¼Œå¦‚æœç¼“å­˜ä¸­å¯ä»¥è·è¯¥å¾—å‡½æ•°ï¼Œä¸”å‡½æ•°çš„å‰¯æœ¬æ•°å¤§äº 0ï¼Œæ»¡è¶³æ¡ä»¶ï¼Œreturn å³å¯ã€‚ å¦‚æœä¸æ»¡è¶³ä¸Šä¸€æ­¥ï¼Œå°±ä¼šè°ƒç”¨SetReplicasæ–¹æ³•è®¾ç½®å‰¯æœ¬æ•°ï¼Œå¹¶æ›´æ–° FunctionCache çš„ç¼“å­˜ã€‚  // MakeScalingHandler creates handler which can scale a function from // zero to 1 replica(s). func MakeScalingHandler(next http.HandlerFunc, upstream http.HandlerFunc, config ScalingConfig) http.HandlerFunc {  cache := FunctionCache{  Cache: make(map[string]*FunctionMeta),  Expiry: config.CacheExpiry,  }  return func(w http.ResponseWriter, r *http.Request) {  functionName := getServiceName(r.URL.String())  if serviceQueryResponse, hit := cache.Get(functionName); hit \u0026amp;\u0026amp; serviceQueryResponse.AvailableReplicas \u0026gt; 0 {  next.ServeHTTP(w, r)  return  }  queryResponse, err := config.ServiceQuery.GetReplicas(functionName)  cache.Set(functionName, queryResponse)  // çœç•¥é”™è¯¯å¤„ç†  if queryResponse.AvailableReplicas == 0 {  minReplicas := uint64(1)  if queryResponse.MinReplicas \u0026gt; 0 {  minReplicas = queryResponse.MinReplicas  }  err := config.ServiceQuery.SetReplicas(functionName, minReplicas)  // çœç•¥é”™è¯¯å¤„ç†ä»£ç   for i := 0; i \u0026lt; int(config.MaxPollCount); i++ {  queryResponse, err := config.ServiceQuery.GetReplicas(functionName)  cache.Set(functionName, queryResponse)  // çœç•¥é”™è¯¯å¤„ç†  time.Sleep(config.FunctionPollInterval)  }  }  next.ServeHTTP(w, r)  } } ç›‘æ§ ç›‘æ§æ˜¯ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå¼€å¯äº†ä¸€ä¸ªæ–°åç¨‹ï¼Œåˆ©ç”¨ go çš„ ticker.C çš„é—´éš”ä¸åœçš„å»è°ƒç”¨/system/functionsæ¥å£ã€‚ååºåˆ—åŒ–åˆ° MetricOptions å¯¹è±¡ä¸­ã€‚\nfunc AttachExternalWatcher(endpointURL url.URL, metricsOptions MetricOptions, label string, interval time.Duration) {  ticker := time.NewTicker(interval)  quit := make(chan struct{})  proxyClient := // çœç•¥åˆ›å»ºä¸€ä¸ªhttp.Clientå¯¹è±¡   go func() {  for {  select {  case \u0026lt;-ticker.C:  get, _ := http.NewRequest(http.MethodGet, endpointURL.String()+\u0026#34;system/functions\u0026#34;, nil)  services := []requests.Function{}  res, err := proxyClient.Do(get)  // çœç•¥ååºåˆ—çš„ä»£ç   for _, service := range services {  metricsOptions.ServiceReplicasCounter.  WithLabelValues(service.Name).  Set(float64(service.Replicas))  }  break  case \u0026lt;-quit:  return  }  }  }() } UI UI çš„ä»£ç å¾ˆç®€å•ï¼Œä¸»è¦å°±æ˜¯ä¸€äº›å‰ç«¯çš„ä»£ç ï¼Œè°ƒç”¨ä¸Šé¢çš„è®²çš„ä¸€äº› API æ¥å£å³å¯ï¼Œè¿™é‡Œå°±ç•¥å»ä¸è¡¨ã€‚\næ€»ç»“ Gateway æ˜¯ OpenFaaS æœ€ä¸ºé‡è¦çš„ä¸€ä¸ªç»„ä»¶ã€‚å›è¿‡å¤´çœ‹æ•´ä¸ªé¡¹ç›®çš„ç»“æ„ï¼ŒGateway å°±æ˜¯ä¸€ä¸ª rest è½¬å‘æœåŠ¡ï¼Œä¸€ä¸ªä¸€ä¸ªçš„ handlerï¼Œæ¯ä¸ªæ¨¡å—ä¹‹é—´çš„è€¦åˆæ€§ä¸æ˜¯å¾ˆé«˜ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å»æ‹†å¸ï¼Œè‡ªå®šä¹‰å®ç°ç›¸åº”çš„æ¨¡å—ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/gateway-reading/","summary":"OpenFaaS çš„ Gateway æ˜¯ä¸€ä¸ª golang å®ç°çš„è¯·æ±‚è½¬å‘çš„ç½‘å…³ï¼Œåœ¨è¿™ä¸ªç½‘å…³æœåŠ¡ä¸­ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š\n UI éƒ¨ç½²å‡½æ•° ç›‘æ§ è‡ªåŠ¨ä¼¸ç¼©  æ¶æ„åˆ†æ ä»å›¾ä¸­å¯ä»¥å‘ç°ï¼Œå½“ Gateway ä½œä¸ºä¸€ä¸ªå…¥å£ï¼Œå½“ CLI æˆ–è€… web é¡µé¢å‘æ¥è¦éƒ¨ç½²æˆ–è€…è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒGateway ä¼šå°†è¯·æ±‚è½¬å‘ç»™ Providerï¼ŒåŒæ—¶ä¼šå°†ç›‘æ§æŒ‡æ ‡å‘ç»™ Prometheusã€‚AlterManager ä¼šæ ¹æ®éœ€æ±‚ï¼Œè°ƒç”¨ API è‡ªåŠ¨ä¼¸ç¼©å‡½æ•°ã€‚\næºç åˆ†æ ä¾èµ– github.com/gorilla/mux  github.com/nats-io/go-nats-streaming github.com/nats-io/go-nats github.com/openfaas/nats-queue-worker  github.com/prometheus/client_golang mux æ˜¯ä¸€ä¸ªç”¨æ¥æ‰§è¡Œ http è¯·æ±‚çš„è·¯ç”±å’Œåˆ†å‘çš„ç¬¬ä¸‰æ–¹æ‰©å±•åŒ…ã€‚\ngo-nats-streamingï¼Œgo-natsï¼Œnats-queue-worker è¿™ä¸‰ä¸ªä¾èµ–æ˜¯å¼‚æ­¥å‡½æ•°çš„æ—¶å€™æ‰ä¼šç”¨åˆ°ï¼Œåœ¨åˆ†æ queue-worker çš„æ—¶å€™æœ‰è¯´åˆ° Gateway ä¹Ÿæ˜¯ä¸€ä¸ªå‘å¸ƒè€…ã€‚\nclient_golang æ˜¯ Prometheus çš„å®¢æˆ·ç«¯ã€‚\né¡¹ç›®ç»“æ„ â”œâ”€â”€ Dockerfile â”œâ”€â”€ Dockerfile.arm64 â”œâ”€â”€ Dockerfile.armhf â”œâ”€â”€ Gopkg.lock â”œâ”€â”€ Gopkg.toml â”œâ”€â”€ README.md â”œâ”€â”€ assets â”œâ”€â”€ build.sh â”œâ”€â”€ handlers â”‚Â â”œâ”€â”€ alerthandler.","title":"gateway-reading"},{"content":"å¸‚é¢ä¸Šå¸¸è§åˆ°çš„å’Œ Nats åŠŸèƒ½ç±»ä¼¼çš„æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿæœ‰ï¼š\nActiveMQï¼ˆJava ç¼–å†™ï¼‰ã€KafKaï¼ˆScala ç¼–å†™ï¼‰ã€RabbitMqï¼ˆRuby ç¼–å†™ï¼‰ã€Natsï¼ˆä¹‹å‰æ˜¯ Ruby ç¼–å†™ç°å·²ä¿®æ”¹ä¸º Goï¼‰ã€Redisï¼ˆC è¯­è¨€ç¼–å†™ï¼‰ã€Kestrelï¼ˆScala ç¼–å†™ä¸å¸¸ç”¨ï¼‰ã€NSQï¼ˆGo è¯­è¨€ç¼–å†™ï¼‰ï¼Œè¿™äº›æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿåœ¨ Broker ååé‡æ–¹é¢çš„æ¯”è¾ƒï¼š\nå¯ä»¥çœ‹åˆ° NATS çš„ååé‡ç‰¹åˆ«é«˜ï¼ŒÂ NATS åŸæ¥æ˜¯ä½¿ç”¨ Ruby ç¼–å†™ï¼Œå¯ä»¥å®ç°æ¯ç§’ 150k æ¶ˆæ¯ï¼Œåæ¥ä½¿ç”¨ Go è¯­è¨€é‡å†™ï¼Œèƒ½å¤Ÿè¾¾åˆ°æ¯ç§’ 8-11 ç™¾ä¸‡ä¸ªæ¶ˆæ¯ï¼Œæ•´ä¸ªç¨‹åºå¾ˆå°åªæœ‰ 3M Docker imageï¼Œå®ƒä¸æ”¯æŒæŒä¹…åŒ–æ¶ˆæ¯ï¼Œå¦‚æœä½ ç¦»çº¿ï¼Œä½ å°±ä¸èƒ½è·å¾—æ¶ˆæ¯ã€‚å…³äº NATS çš„è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚è€ƒä¸Šç¯‡æ–‡ç« ï¼šNATS ç®€ä»‹\nNATS Streaming NATS Streaming æ˜¯ç”± NATS é©±åŠ¨çš„æ•°æ®æµç³»ç»Ÿï¼Œä¹Ÿæ˜¯ç”± go è¯­è¨€å†™æˆçš„ï¼Œåœ¨ä¿è¯ååé‡å’Œæ—¶å»¶çš„åŸºç¡€ä¸Šï¼Œè§£å†³äº† Nats æ¶ˆæ¯æŠ•é€’ä¸€è‡´æ€§çš„é—®é¢˜ã€‚nats streaming å¯ä»¥å’Œæ ¸å¿ƒ nats å¹³å°æ— ç¼åµŒå…¥ï¼Œæ‰©å±•å’Œäº’åŠ¨ã€‚\nåŠŸèƒ½ é™¤äº† nats å¹³å°çš„ä¸€äº›åŠŸèƒ½ï¼Œnats streaming è¿˜æ”¯æŒä»¥ä¸‹çš„ï¼š\n å¢å¼ºçš„æ¶ˆæ¯åè®® æ¶ˆæ¯/äº‹ä»¶æŒä¹…åŒ– è‡³å°‘ä¸€æ¬¡æŠ•é€’ å‘å¸ƒè€…é€Ÿç‡é™åˆ¶ æ¯ä¸ªè®¢é˜…è€…çš„é€Ÿç‡åŒ¹é…/é™åˆ¶ å¯é‡å¤æ¶ˆè´¹ æŒä¹…è®¢é˜…  ä½¿ç”¨ é¦–å…ˆå®‰è£… nats-streaming-server æœåŠ¡ï¼Œæœ‰å¤šç§æ–¹å¼ï¼Œè¿™é‡Œä»‹ç»ä¸¤ç§ï¼š\n  homebrew\nç›´æ¥åœ¨å‘½ä»¤è¡Œå¯åŠ¨\nbrew install nats-streaming-server   go get\nè¿™ç§æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬ç›´æ¥è¿è¡Œæºç å¯åŠ¨\ngo get github.com/nats-io/nats-streaming-server   å¯åŠ¨ nats-streaming-server\næœ‰ä¸‰ç§å¯åŠ¨æ–¹å¼\n  ç›´æ¥å¯åŠ¨\nnats-streaming-server   å¼€å¯ nats ç›‘æ§çš„å¯åŠ¨\nnats-streaming-server -m 8222   æºç æ–¹å¼å¯åŠ¨\ncd $GOPATH/src/github.com/nats-io/nats-streaming-server  go run nats-streaming-server.go   å®¢æˆ·ç«¯ ç›´æ¥ä¸‹è½½ go çš„å®¢æˆ·ç«¯\ngo get github.com/nats-io/go-nats-streaming è¿è¡Œå‘å¸ƒè€…\ncd $GOPATH/src/github.com/nats-io/go-nats-streaming/examples/stan-pub  go run main.go foo \u0026#34;msg one\u0026#34;  go run main.go foo \u0026#34;msg two\u0026#34;  go run main.go foo \u0026#34;msg three\u0026#34; å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nè¿è¡Œè®¢é˜…è€…\ncd $GOPATH/src/github.com/nats-io/go-nats-streaming/examples/stan-sub  go run main.go --all -c test-cluster -id myID foo å®ä¾‹ é¦–å…ˆåœ¨æœ¬åœ°å¯åŠ¨ nats-streaming-serverï¼Œç„¶åä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å‘å¸ƒè®¢é˜…çš„è¿‡ç¨‹ï¼š\npackage main  import (  \u0026#34;github.com/nats-io/go-nats-streaming\u0026#34;  \u0026#34;github.com/nats-io/go-nats-streaming/pb\u0026#34;  \u0026#34;log\u0026#34;  \u0026#34;strconv\u0026#34;  \u0026#34;time\u0026#34; )  func main() {  var clusterId string = \u0026#34;test-cluster\u0026#34;  var clientId string = \u0026#34;test-client\u0026#34;   sc, err := stan.Connect(clusterId, clientId, stan.NatsURL(\u0026#34;nats://localhost:4222\u0026#34;))  if err != nil {  log.Fatal(err)  return  }   // å¼€å¯ä¸€ä¸ªåç¨‹ï¼Œä¸åœçš„ç”Ÿäº§æ•°æ®  go func() {  m := 0  for {  m++  sc.Publish(\u0026#34;foo1\u0026#34;, []byte(\u0026#34;hello message \u0026#34;+strconv.Itoa(m)))  time.Sleep(time.Second)  }   }()   // æ¶ˆè´¹æ•°æ®  i := 0  mcb := func(msg *stan.Msg) {  i++  log.Println(i, \u0026#34;----\u0026gt;\u0026#34;, msg.Subject, msg)  }  startOpt := stan.StartAt(pb.StartPosition_LastReceived)  //_, err = sc.QueueSubscribe(\u0026#34;foo1\u0026#34;, \u0026#34;\u0026#34;, mcb, startOpt) // ä¹Ÿå¯ä»¥ç”¨queue subscribe  _, err = sc.Subscribe(\u0026#34;foo1\u0026#34;, mcb, startOpt)  if err != nil {  sc.Close()  log.Fatal(err)  }   // åˆ›å»ºä¸€ä¸ªchannelï¼Œé˜»å¡ç€  signalChan := make(chan int)  \u0026lt;-signalChan } è¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n2018/07/30 18:04:01 2 ----\u0026gt; foo1 sequence:546 subject:\u0026#34;foo1\u0026#34; data:\u0026#34;hello message 1\u0026#34; timestamp:1532945041825538757 2018/07/30 18:04:02 3 ----\u0026gt; foo1 sequence:547 subject:\u0026#34;foo1\u0026#34; data:\u0026#34;hello message 2\u0026#34; timestamp:1532945042828881383 2018/07/30 18:04:03 4 ----\u0026gt; foo1 sequence:548 subject:\u0026#34;foo1\u0026#34; data:\u0026#34;hello message 3\u0026#34; timestamp:1532945043833360222 2018/07/30 18:04:04 5 ----\u0026gt; foo1 sequence:549 subject:\u0026#34;foo1\u0026#34; data:\u0026#34;hello message 4\u0026#34; timestamp:1532945044833810697 2018/07/30 18:04:05 6 ----\u0026gt; foo1 sequence:550 subject:\u0026#34;foo1\u0026#34; data:\u0026#34;hello message 5\u0026#34; timestamp:1532945045838056450 2018/07/30 18:04:06 7 ----\u0026gt; foo1 sequence:551 subject:\u0026#34;foo1\u0026#34; data:\u0026#34;hello message 6\u0026#34; timestamp:1532945046838585417 2018/07/30 18:04:07 8 ----\u0026gt; foo1 sequence:552 subject:\u0026#34;foo1\u0026#34; data:\u0026#34;hello message 7\u0026#34; timestamp:1532945047840775810 æºç åœ¨ï¼šhttps://github.com/zhenfeng-zhu/nats-demo\næ€»ç»“ NATS Streaming çš„é«˜çº§åŠŸèƒ½ç±»ä¼¼äº Apache Kafka çš„åŠŸèƒ½ï¼Œä½†å½“ä½ è€ƒè™‘ç®€å•æ€§è€Œéå¤æ‚æ€§æ—¶å‰è€…æ›´ä¼˜ã€‚ç”±äº NATS Streaming ç›¸å¯¹æ¥è¯´æ˜¯ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œä¸ Apache Kafka ç›¸æ¯”ï¼Œå®ƒåœ¨æŸäº›é¢†åŸŸéœ€è¦æ”¹è¿›ï¼Œå°¤å…¶æ˜¯ä¸ºè´Ÿè½½å‡è¡¡åœºæ™¯æä¾›æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/nats-streaming/","summary":"å¸‚é¢ä¸Šå¸¸è§åˆ°çš„å’Œ Nats åŠŸèƒ½ç±»ä¼¼çš„æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿæœ‰ï¼š\nActiveMQï¼ˆJava ç¼–å†™ï¼‰ã€KafKaï¼ˆScala ç¼–å†™ï¼‰ã€RabbitMqï¼ˆRuby ç¼–å†™ï¼‰ã€Natsï¼ˆä¹‹å‰æ˜¯ Ruby ç¼–å†™ç°å·²ä¿®æ”¹ä¸º Goï¼‰ã€Redisï¼ˆC è¯­è¨€ç¼–å†™ï¼‰ã€Kestrelï¼ˆScala ç¼–å†™ä¸å¸¸ç”¨ï¼‰ã€NSQï¼ˆGo è¯­è¨€ç¼–å†™ï¼‰ï¼Œè¿™äº›æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿåœ¨ Broker ååé‡æ–¹é¢çš„æ¯”è¾ƒï¼š\nå¯ä»¥çœ‹åˆ° NATS çš„ååé‡ç‰¹åˆ«é«˜ï¼ŒÂ NATS åŸæ¥æ˜¯ä½¿ç”¨ Ruby ç¼–å†™ï¼Œå¯ä»¥å®ç°æ¯ç§’ 150k æ¶ˆæ¯ï¼Œåæ¥ä½¿ç”¨ Go è¯­è¨€é‡å†™ï¼Œèƒ½å¤Ÿè¾¾åˆ°æ¯ç§’ 8-11 ç™¾ä¸‡ä¸ªæ¶ˆæ¯ï¼Œæ•´ä¸ªç¨‹åºå¾ˆå°åªæœ‰ 3M Docker imageï¼Œå®ƒä¸æ”¯æŒæŒä¹…åŒ–æ¶ˆæ¯ï¼Œå¦‚æœä½ ç¦»çº¿ï¼Œä½ å°±ä¸èƒ½è·å¾—æ¶ˆæ¯ã€‚å…³äº NATS çš„è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚è€ƒä¸Šç¯‡æ–‡ç« ï¼šNATS ç®€ä»‹\nNATS Streaming NATS Streaming æ˜¯ç”± NATS é©±åŠ¨çš„æ•°æ®æµç³»ç»Ÿï¼Œä¹Ÿæ˜¯ç”± go è¯­è¨€å†™æˆçš„ï¼Œåœ¨ä¿è¯ååé‡å’Œæ—¶å»¶çš„åŸºç¡€ä¸Šï¼Œè§£å†³äº† Nats æ¶ˆæ¯æŠ•é€’ä¸€è‡´æ€§çš„é—®é¢˜ã€‚nats streaming å¯ä»¥å’Œæ ¸å¿ƒ nats å¹³å°æ— ç¼åµŒå…¥ï¼Œæ‰©å±•å’Œäº’åŠ¨ã€‚\nåŠŸèƒ½ é™¤äº† nats å¹³å°çš„ä¸€äº›åŠŸèƒ½ï¼Œnats streaming è¿˜æ”¯æŒä»¥ä¸‹çš„ï¼š\n å¢å¼ºçš„æ¶ˆæ¯åè®® æ¶ˆæ¯/äº‹ä»¶æŒä¹…åŒ– è‡³å°‘ä¸€æ¬¡æŠ•é€’ å‘å¸ƒè€…é€Ÿç‡é™åˆ¶ æ¯ä¸ªè®¢é˜…è€…çš„é€Ÿç‡åŒ¹é…/é™åˆ¶ å¯é‡å¤æ¶ˆè´¹ æŒä¹…è®¢é˜…  ä½¿ç”¨ é¦–å…ˆå®‰è£… nats-streaming-server æœåŠ¡ï¼Œæœ‰å¤šç§æ–¹å¼ï¼Œè¿™é‡Œä»‹ç»ä¸¤ç§ï¼š\n  homebrew","title":"NATS streaming"},{"content":"nats æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œäº‘åŸç”Ÿçš„æ¶ˆæ¯ç³»ç»Ÿã€‚Apceraï¼Œç™¾åº¦ï¼Œè¥¿é—¨å­ï¼ŒVMwareï¼ŒHTC å’Œçˆ±ç«‹ä¿¡ç­‰å…¬å¸éƒ½æœ‰åœ¨ä½¿ç”¨ã€‚\næ ¸å¿ƒåŸºäº EventMachine å¼€å‘ï¼ŒåŸç†æ˜¯åŸºäºæ¶ˆæ¯å‘å¸ƒè®¢é˜…æœºåˆ¶ï¼Œæ¯å°æœåŠ¡å™¨ä¸Šçš„æ¯ä¸ªæ¨¡å—ä¼šæ ¹æ®è‡ªå·±çš„æ¶ˆæ¯ç±»åˆ«å‘ MessageBus å‘å¸ƒå¤šä¸ªæ¶ˆæ¯ä¸»é¢˜ï¼Œè€ŒåŒæ—¶ä¹Ÿå‘è‡ªå·±éœ€è¦äº¤äº’çš„æ¨¡å—ï¼ŒæŒ‰ç…§éœ€è¦çš„ä¸»é¢˜è®¢é˜…æ¶ˆæ¯ã€‚èƒ½å¤Ÿè¾¾åˆ°æ¯ç§’ 8-11 ç™¾ä¸‡ä¸ªæ¶ˆæ¯ï¼Œæ•´ä¸ªç¨‹åºå¾ˆå°åªæœ‰ 3M Docker imageï¼Œå®ƒä¸æ”¯æŒæŒä¹…åŒ–æ¶ˆæ¯ï¼Œå¦‚æœä½ ç¦»çº¿ï¼Œä½ å°±ä¸èƒ½è·å¾—æ¶ˆæ¯ã€‚ä½¿ç”¨ nats streaming å¯ä»¥åšåˆ°æŒä¹…åŒ–ï¼Œç¼“å­˜ç­‰åŠŸèƒ½ã€‚\nNATS server nats æä¾›äº†ä¸€ä¸ª go ç¼–å†™çš„è½»é‡çº§æœåŠ¡å™¨ã€‚å‘è¡Œç‰ˆåŒ…æ‹¬äºŒè¿›åˆ¶å’Œ docker é•œåƒ\nNATS clients\nnats å®˜æ–¹æä¾›çš„å®¢æˆ·ç«¯æœ‰ Goï¼ŒNodeï¼ŒRubyï¼ŒJavaï¼ŒCï¼ŒCï¼ƒï¼ŒNGINX ç­‰ã€‚\nNATS è®¾è®¡ç›®æ ‡\næ ¸å¿ƒåŸåˆ™æ˜¯æ€§èƒ½ï¼Œå¯ä¼¸ç¼©å’Œæ˜“ç”¨æ€§ã€‚\n é«˜æ•ˆ å§‹ç»ˆåœ¨çº¿å’Œå¯ç”¨ éå¸¸è½»å·§ æ”¯æŒå¤šç§è´¨é‡çš„æœåŠ¡ æ”¯æŒå„ç§æ¶ˆæ¯ä¼ é€’æ¨¡å‹å’Œä½¿ç”¨åœºæ™¯  NATS ä½¿ç”¨åœºæ™¯ nats æ˜¯ä¸€ä¸ªç®€å•ä¸”å¼ºå¤§çš„æ¶ˆæ¯ç³»ç»Ÿï¼Œä¸ºæ”¯æŒç°ä»£äº‘åŸç”Ÿæ¶æ„è®¾è®¡ã€‚ç”±äºå¯ä¼¸ç¼©æ€§çš„å¤æ‚æ€§ï¼Œnats æ—¨åœ¨å®¹æ˜“ä½¿ç”¨å’Œå®ç°ï¼Œä¸”èƒ½æä¾›å¤šç§è´¨é‡çš„æœåŠ¡ã€‚\nä¸€äº›é€‚ç”¨ nats çš„åœºæ™¯æœ‰ï¼š\n é«˜ååé‡çš„æ¶ˆæ¯åˆ†æ•£ â€”â€” å°‘æ•°çš„ç”Ÿäº§è€…éœ€è¦å°†æ•°æ®å‘é€ç»™å¾ˆå¤šçš„æ¶ˆè´¹è€…ã€‚ å¯»å€å’Œå‘ç° â€”â€” å°†æ•°æ®å‘é€ç»™ç‰¹å®šçš„åº”ç”¨å®ä¾‹ï¼Œè®¾å¤‡æˆ–è€…ç”¨æˆ·ï¼Œä¹Ÿå¯ç”¨äºå‘ç°å¹¶è¿æ¥åˆ°åŸºç¡€æ¶æ„ä¸­çš„å®ä¾‹ï¼Œè®¾å¤‡æˆ–ç”¨æˆ·ã€‚ å‘½ä»¤å’Œæ§åˆ¶ï¼ˆæ§åˆ¶é¢æ¿ï¼‰â€”â€” å‘ç¨‹åºæˆ–è®¾å¤‡å‘é€æŒ‡ä»¤ï¼Œå¹¶ä»ç¨‹åº/è®¾å¤‡ä¸­æ¥æ”¶çŠ¶æ€ï¼Œå¦‚ SCADAï¼Œå«æ˜Ÿé¥æ„Ÿï¼Œç‰©è”ç½‘ç­‰ã€‚ è´Ÿè½½å‡è¡¡ â€”â€” ä¸»è¦åº”ç”¨äºç¨‹åºä¼šç”Ÿæˆå¤§é‡çš„è¯·æ±‚ï¼Œä¸”å¯åŠ¨æ€ä¼¸ç¼©ç¨‹åºå®ä¾‹ã€‚ N è·¯å¯æ‰©å±•æ€§ â€”â€” é€šä¿¡åŸºç¡€æ¶æ„èƒ½å¤Ÿå……åˆ†åˆ©ç”¨ go çš„é«˜æ•ˆå¹¶å‘/è°ƒåº¦æœºåˆ¶ï¼Œä»¥å¢å¼ºæ°´å¹³å’Œå‚ç›´çš„æ‰©å±•æ€§ã€‚ ä½ç½®é€æ˜ â€”â€” ç¨‹åºåœ¨å„ä¸ªåœ°ç†ä½ç½®ä¸Šåˆ†å¸ƒè€…å¤§é‡å®ä¾‹ï¼Œä¸”ä½ æ— æ³•äº†è§£åˆ°ç¨‹åºä¹‹é—´çš„ç«¯ç‚¹é…ç½®è¯¦æƒ…ï¼ŒåŠä»–ä»¬æ‰€ç”Ÿäº§æˆ–æ¶ˆè´¹çš„æ•°æ®ã€‚ å®¹é”™  ä½¿ç”¨ nats-streaming çš„é™„åŠ åœºæ™¯æœ‰ï¼š\n ä»ç‰¹å®šæ—¶é—´æˆ–é¡ºåºæ¶ˆè´¹ æŒä¹…æ€§ æœ‰ä¿è¯çš„æ¶ˆæ¯æŠ•é€’  NATS æ¶ˆæ¯ä¼ é€’æ¨¡å‹  å‘å¸ƒè®¢é˜… è¯·æ±‚å›å¤ æ’é˜Ÿ  NATS çš„ç‰¹ç‚¹ nats çš„ç‹¬ç‰¹åŠŸèƒ½æœ‰ï¼š\n çº¯å‡€çš„ pub-sub é›†ç¾¤æ¨¡å¼çš„ server è®¢é˜…è€…çš„è‡ªåŠ¨è£å‰ª åŸºäºæ–‡æœ¬çš„åè®® å¤šç§æœåŠ¡è´¨é‡  æœ€å¤šä¸€æ¬¡æŠ•é€’ è‡³å°‘ä¸€æ¬¡æŠ•é€’   æŒä¹… ç¼“å­˜  ","permalink":"https://zhenfeng-zhu.github.io/post/nats/","summary":"nats æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œäº‘åŸç”Ÿçš„æ¶ˆæ¯ç³»ç»Ÿã€‚Apceraï¼Œç™¾åº¦ï¼Œè¥¿é—¨å­ï¼ŒVMwareï¼ŒHTC å’Œçˆ±ç«‹ä¿¡ç­‰å…¬å¸éƒ½æœ‰åœ¨ä½¿ç”¨ã€‚\næ ¸å¿ƒåŸºäº EventMachine å¼€å‘ï¼ŒåŸç†æ˜¯åŸºäºæ¶ˆæ¯å‘å¸ƒè®¢é˜…æœºåˆ¶ï¼Œæ¯å°æœåŠ¡å™¨ä¸Šçš„æ¯ä¸ªæ¨¡å—ä¼šæ ¹æ®è‡ªå·±çš„æ¶ˆæ¯ç±»åˆ«å‘ MessageBus å‘å¸ƒå¤šä¸ªæ¶ˆæ¯ä¸»é¢˜ï¼Œè€ŒåŒæ—¶ä¹Ÿå‘è‡ªå·±éœ€è¦äº¤äº’çš„æ¨¡å—ï¼ŒæŒ‰ç…§éœ€è¦çš„ä¸»é¢˜è®¢é˜…æ¶ˆæ¯ã€‚èƒ½å¤Ÿè¾¾åˆ°æ¯ç§’ 8-11 ç™¾ä¸‡ä¸ªæ¶ˆæ¯ï¼Œæ•´ä¸ªç¨‹åºå¾ˆå°åªæœ‰ 3M Docker imageï¼Œå®ƒä¸æ”¯æŒæŒä¹…åŒ–æ¶ˆæ¯ï¼Œå¦‚æœä½ ç¦»çº¿ï¼Œä½ å°±ä¸èƒ½è·å¾—æ¶ˆæ¯ã€‚ä½¿ç”¨ nats streaming å¯ä»¥åšåˆ°æŒä¹…åŒ–ï¼Œç¼“å­˜ç­‰åŠŸèƒ½ã€‚\nNATS server nats æä¾›äº†ä¸€ä¸ª go ç¼–å†™çš„è½»é‡çº§æœåŠ¡å™¨ã€‚å‘è¡Œç‰ˆåŒ…æ‹¬äºŒè¿›åˆ¶å’Œ docker é•œåƒ\nNATS clients\nnats å®˜æ–¹æä¾›çš„å®¢æˆ·ç«¯æœ‰ Goï¼ŒNodeï¼ŒRubyï¼ŒJavaï¼ŒCï¼ŒCï¼ƒï¼ŒNGINX ç­‰ã€‚\nNATS è®¾è®¡ç›®æ ‡\næ ¸å¿ƒåŸåˆ™æ˜¯æ€§èƒ½ï¼Œå¯ä¼¸ç¼©å’Œæ˜“ç”¨æ€§ã€‚\n é«˜æ•ˆ å§‹ç»ˆåœ¨çº¿å’Œå¯ç”¨ éå¸¸è½»å·§ æ”¯æŒå¤šç§è´¨é‡çš„æœåŠ¡ æ”¯æŒå„ç§æ¶ˆæ¯ä¼ é€’æ¨¡å‹å’Œä½¿ç”¨åœºæ™¯  NATS ä½¿ç”¨åœºæ™¯ nats æ˜¯ä¸€ä¸ªç®€å•ä¸”å¼ºå¤§çš„æ¶ˆæ¯ç³»ç»Ÿï¼Œä¸ºæ”¯æŒç°ä»£äº‘åŸç”Ÿæ¶æ„è®¾è®¡ã€‚ç”±äºå¯ä¼¸ç¼©æ€§çš„å¤æ‚æ€§ï¼Œnats æ—¨åœ¨å®¹æ˜“ä½¿ç”¨å’Œå®ç°ï¼Œä¸”èƒ½æä¾›å¤šç§è´¨é‡çš„æœåŠ¡ã€‚\nä¸€äº›é€‚ç”¨ nats çš„åœºæ™¯æœ‰ï¼š\n é«˜ååé‡çš„æ¶ˆæ¯åˆ†æ•£ â€”â€” å°‘æ•°çš„ç”Ÿäº§è€…éœ€è¦å°†æ•°æ®å‘é€ç»™å¾ˆå¤šçš„æ¶ˆè´¹è€…ã€‚ å¯»å€å’Œå‘ç° â€”â€” å°†æ•°æ®å‘é€ç»™ç‰¹å®šçš„åº”ç”¨å®ä¾‹ï¼Œè®¾å¤‡æˆ–è€…ç”¨æˆ·ï¼Œä¹Ÿå¯ç”¨äºå‘ç°å¹¶è¿æ¥åˆ°åŸºç¡€æ¶æ„ä¸­çš„å®ä¾‹ï¼Œè®¾å¤‡æˆ–ç”¨æˆ·ã€‚ å‘½ä»¤å’Œæ§åˆ¶ï¼ˆæ§åˆ¶é¢æ¿ï¼‰â€”â€” å‘ç¨‹åºæˆ–è®¾å¤‡å‘é€æŒ‡ä»¤ï¼Œå¹¶ä»ç¨‹åº/è®¾å¤‡ä¸­æ¥æ”¶çŠ¶æ€ï¼Œå¦‚ SCADAï¼Œå«æ˜Ÿé¥æ„Ÿï¼Œç‰©è”ç½‘ç­‰ã€‚ è´Ÿè½½å‡è¡¡ â€”â€” ä¸»è¦åº”ç”¨äºç¨‹åºä¼šç”Ÿæˆå¤§é‡çš„è¯·æ±‚ï¼Œä¸”å¯åŠ¨æ€ä¼¸ç¼©ç¨‹åºå®ä¾‹ã€‚ N è·¯å¯æ‰©å±•æ€§ â€”â€” é€šä¿¡åŸºç¡€æ¶æ„èƒ½å¤Ÿå……åˆ†åˆ©ç”¨ go çš„é«˜æ•ˆå¹¶å‘/è°ƒåº¦æœºåˆ¶ï¼Œä»¥å¢å¼ºæ°´å¹³å’Œå‚ç›´çš„æ‰©å±•æ€§ã€‚ ä½ç½®é€æ˜ â€”â€” ç¨‹åºåœ¨å„ä¸ªåœ°ç†ä½ç½®ä¸Šåˆ†å¸ƒè€…å¤§é‡å®ä¾‹ï¼Œä¸”ä½ æ— æ³•äº†è§£åˆ°ç¨‹åºä¹‹é—´çš„ç«¯ç‚¹é…ç½®è¯¦æƒ…ï¼ŒåŠä»–ä»¬æ‰€ç”Ÿäº§æˆ–æ¶ˆè´¹çš„æ•°æ®ã€‚ å®¹é”™  ä½¿ç”¨ nats-streaming çš„é™„åŠ åœºæ™¯æœ‰ï¼š","title":"nats ç®€ä»‹"},{"content":"OpenFaaS æ¦‚è§ˆ  æ— æœåŠ¡å™¨å‡½æ•°å˜å¾—ç®€å•ã€‚\n å‡½æ•°ç›‘è§†å™¨  ä½ å¯ä»¥é€šè¿‡æ·»åŠ å‡½æ•°ç›‘è§†å™¨ (ä¸€ä¸ªå°å‹çš„ Golang HTTP æœåŠ¡)æŠŠä»»ä½•ä¸€ä¸ª Docker é•œåƒå˜æˆæ— æœåŠ¡å™¨å‡½æ•°ã€‚ å‡½æ•°ç›‘è§†å™¨æ˜¯å…è®¸ HTTP è¯·æ±‚é€šè¿‡ STDIN è½¬å‘åˆ°ç›®æ ‡è¿›ç¨‹çš„å…¥å£ç‚¹ã€‚å“åº”ä¼šä»ä½ åº”ç”¨å†™å…¥ STDOUT è¿”å›ç»™è°ƒç”¨è€…ã€‚  API ç½‘å…³/UI é—¨æˆ·  API ç½‘å…³ä¸ºä½ çš„å‡½æ•°æä¾›å¤–éƒ¨è·¯ç”±ï¼Œå¹¶é€šè¿‡ Prometheus æ”¶é›†äº‘åŸç”ŸæŒ‡æ ‡ã€‚ ä½ çš„ API ç½‘å…³å°†ä¼šæ ¹æ®éœ€æ±‚æ›´æ”¹ Docker Swarm æˆ– Kubernetes API ä¸­çš„æœåŠ¡å‰¯æœ¬æ•°æ¥å®ç°ä¼¸ç¼©æ€§ã€‚ UI æ˜¯å…è®¸ä½ åœ¨æµè§ˆå™¨ä¸­è°ƒç”¨å‡½æ•°æˆ–è€…æ ¹æ®éœ€è¦åˆ›å»ºæ–°çš„å‡½æ•°ã€‚   API ç½‘å…³æ˜¯ä¸€ä¸ª RESTful å½¢å¼çš„å¾®æœåŠ¡ï¼Œä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹Swagger æ–‡æ¡£ã€‚\n å‘½ä»¤è¡Œ Docker ä¸­çš„ä»»ä½•å®¹å™¨æˆ–è€…è¿›ç¨‹éƒ½å¯ä»¥æ˜¯ FaaS ä¸­çš„ä¸€ä¸ªæ— æœåŠ¡å™¨å‡½æ•°ã€‚ä½¿ç”¨FaaS CLI ï¼Œä½ å¯ä»¥å¿«é€Ÿçš„éƒ¨ç½²å‡½æ•°ã€‚\nå¯ä»¥ä» Node.js, Python, Go æˆ–è€…æ›´å¤šçš„è¯­è¨€æ¨¡æ¿ä¸­åˆ›å»ºæ–°çš„å‡½æ•°ã€‚å¦‚æœä½ æ— æ³•æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„æ¨¡æ¿ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ä¸€ä¸ª Dockerfileã€‚\n CLI å®é™…ä¸Šæ˜¯ API ç½‘å…³çš„ä¸€ä¸ª RESTful å®¢æˆ·ç«¯ã€‚\n åœ¨é…ç½®å¥½ OpenFaaS ä¹‹åï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå¼€å§‹å­¦ä¹  CLIå¼€å§‹å­¦ä¹  CLI\nå‡½æ•°ç¤ºä¾‹ ä½ å¯ä»¥é€šè¿‡ ä½¿ç”¨ FaaS-CLI å’Œå…¶å†…ç½®çš„æ¨¡æ¿åˆ›å»ºæ–°å‡½æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨ Docker ä¸­ä½¿ç”¨ Windows æˆ– Linux çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚\n Python ç¤ºä¾‹ï¼š  import requests  def handle(req):  r = requests.get(req, timeout = 1)  print(req +\u0026#34; =\u0026gt; \u0026#34; + str(r.status_code)) handler.py\n Node.js ç¤ºä¾‹ï¼š  \u0026#34;use strict\u0026#34;  module.exports = (callback, context) =\u0026gt; {  callback(null, {\u0026#34;message\u0026#34;: \u0026#34;You said: \u0026#34; + context}) } handler.js\nåœ¨ Github ä»“åº“ä¸­æä¾›äº†ä¸€ç³»åˆ—ç¼–ç¨‹è¯­è¨€çš„å…¶ä»–ç¤ºä¾‹å‡½æ•° ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/overview-of-openfaas/","summary":"OpenFaaS æ¦‚è§ˆ  æ— æœåŠ¡å™¨å‡½æ•°å˜å¾—ç®€å•ã€‚\n å‡½æ•°ç›‘è§†å™¨  ä½ å¯ä»¥é€šè¿‡æ·»åŠ å‡½æ•°ç›‘è§†å™¨ (ä¸€ä¸ªå°å‹çš„ Golang HTTP æœåŠ¡)æŠŠä»»ä½•ä¸€ä¸ª Docker é•œåƒå˜æˆæ— æœåŠ¡å™¨å‡½æ•°ã€‚ å‡½æ•°ç›‘è§†å™¨æ˜¯å…è®¸ HTTP è¯·æ±‚é€šè¿‡ STDIN è½¬å‘åˆ°ç›®æ ‡è¿›ç¨‹çš„å…¥å£ç‚¹ã€‚å“åº”ä¼šä»ä½ åº”ç”¨å†™å…¥ STDOUT è¿”å›ç»™è°ƒç”¨è€…ã€‚  API ç½‘å…³/UI é—¨æˆ·  API ç½‘å…³ä¸ºä½ çš„å‡½æ•°æä¾›å¤–éƒ¨è·¯ç”±ï¼Œå¹¶é€šè¿‡ Prometheus æ”¶é›†äº‘åŸç”ŸæŒ‡æ ‡ã€‚ ä½ çš„ API ç½‘å…³å°†ä¼šæ ¹æ®éœ€æ±‚æ›´æ”¹ Docker Swarm æˆ– Kubernetes API ä¸­çš„æœåŠ¡å‰¯æœ¬æ•°æ¥å®ç°ä¼¸ç¼©æ€§ã€‚ UI æ˜¯å…è®¸ä½ åœ¨æµè§ˆå™¨ä¸­è°ƒç”¨å‡½æ•°æˆ–è€…æ ¹æ®éœ€è¦åˆ›å»ºæ–°çš„å‡½æ•°ã€‚   API ç½‘å…³æ˜¯ä¸€ä¸ª RESTful å½¢å¼çš„å¾®æœåŠ¡ï¼Œä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹Swagger æ–‡æ¡£ã€‚\n å‘½ä»¤è¡Œ Docker ä¸­çš„ä»»ä½•å®¹å™¨æˆ–è€…è¿›ç¨‹éƒ½å¯ä»¥æ˜¯ FaaS ä¸­çš„ä¸€ä¸ªæ— æœåŠ¡å™¨å‡½æ•°ã€‚ä½¿ç”¨FaaS CLI ï¼Œä½ å¯ä»¥å¿«é€Ÿçš„éƒ¨ç½²å‡½æ•°ã€‚\nå¯ä»¥ä» Node.js, Python, Go æˆ–è€…æ›´å¤šçš„è¯­è¨€æ¨¡æ¿ä¸­åˆ›å»ºæ–°çš„å‡½æ•°ã€‚å¦‚æœä½ æ— æ³•æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„æ¨¡æ¿ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ä¸€ä¸ª Dockerfileã€‚\n CLI å®é™…ä¸Šæ˜¯ API ç½‘å…³çš„ä¸€ä¸ª RESTful å®¢æˆ·ç«¯ã€‚\n åœ¨é…ç½®å¥½ OpenFaaS ä¹‹åï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå¼€å§‹å­¦ä¹  CLIå¼€å§‹å­¦ä¹  CLI","title":"overview-of-openfaas"},{"content":"è¿™æ˜¯ä¸€ç¯‡å…³äºå¦‚ä½•åœ¨ Rancher 2.0 ä¸Šåˆ›å»º OpenFaaS æ ˆçš„æ–‡ç« ã€‚æˆ‘å‡è®¾ä½ å·²ç»å‡†å¤‡å¥½äº† Rancher 2.0 é›†ç¾¤ï¼Œå¦‚æœæ²¡æœ‰è¯·æŒ‰ç…§å®˜æ–¹æ–‡æ¡£åˆ›å»ºä¸€ä¸ªã€‚\nä¸‹é¢çš„è§†é¢‘å±•ç¤ºäº†å¦‚ä½•åˆ›å»º OpenFaaS æ ˆï¼Œå¹¶åœ¨å®é™…ä¸­ä½¿ç”¨ï¼š\nhttps://www.youtube.com/watch?v=kX8mXv5d1qg\u0026amp;feature=youtu.be\nè¿™é‡Œæ˜¯åˆ›å»ºæ ˆçš„compose.ymlæ–‡ä»¶ï¼š\nversion: \u0026#34;2\u0026#34; services:  alertmanager:  image: functions/alertmanager:latest  labels:  io.rancher.container.pull_image: always  stop_signal: SIGTERM  restart: always  stdin_open: true  tty: true  scale: 1  faas-rancher:  environment:  - CATTLE_URL=${CATTLE_URL}  - CATTLE_ACCESS_KEY=${CATTLE_ACCESS_KEY}  - CATTLE_SECRET_KEY=${CATTLE_SECRET_KEY}  - FUNCTION_STACK_NAME=faas-functions  image: kenfdev/faas-rancher:v3  labels:  io.rancher.container.pull_image: always  stop_signal: SIGTERM  restart: always  stdin_open: true  tty: true  scale: 1  gateway:  environment:  - functions_provider_url=http://faas-rancher:8080/  image: functions/gateway:0.6.6-beta1  labels:  io.rancher.container.pull_image: always  ports:  - 8080:8080/tcp  stop_signal: SIGTERM  restart: always  stdin_open: true  tty: true  scale: 1  prometheus:  command: [-config.file=/etc/prometheus/prometheus.yml, -storage.local.path=/prometheus,  -storage.local.memory-chunks=10000, \u0026#39;--alertmanager.url=http://alertmanager:9093\u0026#39;]  image: kenfdev/prometheus:latest-cattle  labels:  io.rancher.container.pull_image: always  stop_signal: SIGTERM  restart: always  stdin_open: true  tty: true  scale: 1 æˆ‘åœ¨ Rancher 2.0 ä¸­æ‰¾åˆ°ä¸€ä¸ªæ¯”è¾ƒé…·çš„ç‚¹æ˜¯compose.ymlæ–‡ä»¶ä¸­çš„å˜é‡éƒ½å¯ä»¥åœ¨ UI ä¸­è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\næ–°çš„faas-rancheré¡¹ç›®å·²ç»è½¬æ¢ä¸ºä½¿ç”¨ Rancher çš„ v3 ç‰ˆæœ¬çš„ APIï¼Œè€Œä¸”åŸºæœ¬ä¸Šå·²ç»é€šè¿‡äº†æµ‹è¯•ã€‚æ¬¢è¿è´¡çŒ®å’Œåé¦ˆã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-on-rancher/","summary":"è¿™æ˜¯ä¸€ç¯‡å…³äºå¦‚ä½•åœ¨ Rancher 2.0 ä¸Šåˆ›å»º OpenFaaS æ ˆçš„æ–‡ç« ã€‚æˆ‘å‡è®¾ä½ å·²ç»å‡†å¤‡å¥½äº† Rancher 2.0 é›†ç¾¤ï¼Œå¦‚æœæ²¡æœ‰è¯·æŒ‰ç…§å®˜æ–¹æ–‡æ¡£åˆ›å»ºä¸€ä¸ªã€‚\nä¸‹é¢çš„è§†é¢‘å±•ç¤ºäº†å¦‚ä½•åˆ›å»º OpenFaaS æ ˆï¼Œå¹¶åœ¨å®é™…ä¸­ä½¿ç”¨ï¼š\nhttps://www.youtube.com/watch?v=kX8mXv5d1qg\u0026amp;feature=youtu.be\nè¿™é‡Œæ˜¯åˆ›å»ºæ ˆçš„compose.ymlæ–‡ä»¶ï¼š\nversion: \u0026#34;2\u0026#34; services:  alertmanager:  image: functions/alertmanager:latest  labels:  io.rancher.container.pull_image: always  stop_signal: SIGTERM  restart: always  stdin_open: true  tty: true  scale: 1  faas-rancher:  environment:  - CATTLE_URL=${CATTLE_URL}  - CATTLE_ACCESS_KEY=${CATTLE_ACCESS_KEY}  - CATTLE_SECRET_KEY=${CATTLE_SECRET_KEY}  - FUNCTION_STACK_NAME=faas-functions  image: kenfdev/faas-rancher:v3  labels:  io.rancher.container.pull_image: always  stop_signal: SIGTERM  restart: always  stdin_open: true  tty: true  scale: 1  gateway:  environment:  - functions_provider_url=http://faas-rancher:8080/  image: functions/gateway:0.","title":"OpenFaaS on Rancher 2.0"},{"content":"å®éªŒ 4\u0026ndash;æ›´æ·±å…¥åœ°ä½¿ç”¨å‡½æ•° åœ¨å¼€å§‹æœ¬å®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚ç”±äºæœ¬å®éªŒæ˜¯å»ºç«‹åœ¨æ—©æœŸå®éªŒçš„åŸºç¡€ä¸Šçš„ï¼Œæ‰€ä»¥è¯·å¤åˆ¶ lab3ã€‚\n$ cp -r lab3 lab4\\  \u0026amp;\u0026amp; cd lab4 é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥é…ç½® èƒ½å¤Ÿæ§åˆ¶ä¸€ä¸ªå‡½æ•°åœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºæ–¹å¼æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®ç°è¿™ä¸€ç‚¹ã€‚\nåœ¨éƒ¨ç½²æ—¶ *åœ¨éƒ¨ç½²æ—¶è®¾ç½®ç¯å¢ƒå˜é‡\næˆ‘ä»¬åœ¨Lab 3ä¸­ç”¨write_debugåšäº†è¿™ä¸ª - ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®ä»»ä½•ä½ æƒ³è¦çš„è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ - ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ä¸ºä½ çš„hello worldå‡½æ•°é…ç½®ä¸€ç§è¯­è¨€ï¼Œä½ å¯ä»¥å¼•å…¥ä¸€ä¸ªspoken_languageå˜é‡ã€‚\nä½¿ç”¨ HTTP ä¸Šä¸‹æ–‡\u0026ndash;querystring / headers *ä½¿ç”¨ querystring å’Œ HTTP headers\nå¦ä¸€ä¸ªæ›´åŠ¨æ€çš„ã€å¯ä»¥åœ¨æ¯ä¸ªè¯·æ±‚å±‚é¢ä¸Šæ”¹å˜çš„é€‰é¡¹æ˜¯ä½¿ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²å’Œ HTTP å¤´ä¿¡æ¯ï¼Œä¸¤è€…éƒ½å¯ä»¥é€šè¿‡faas-cliæˆ–curlä¼ é€’ã€‚\nè¿™äº›å¤´ä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡æš´éœ²å‡ºæ¥ï¼Œæ‰€ä»¥å®ƒä»¬å¾ˆå®¹æ˜“åœ¨ä½ çš„å‡½æ•°ä¸­è¢«ä½¿ç”¨ã€‚æ‰€ä»¥ä»»ä½•å¤´ä¿¡æ¯éƒ½ä»¥Http_ä¸ºå‰ç¼€ï¼Œæ‰€æœ‰-è¿å­—ç¬¦éƒ½è¢«æ›¿æ¢æˆ_ä¸‹åˆ’çº¿ã€‚\nè®©æˆ‘ä»¬ç”¨ querystring å’Œä¸€ä¸ªåˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡çš„å‡½æ•°æ¥è¯•è¯•ã€‚\n ä½¿ç”¨ BusyBox çš„å†…ç½®å‘½ä»¤ï¼Œéƒ¨ç½²ä¸€ä¸ªæ‰“å°ç¯å¢ƒå˜é‡çš„å‡½æ•°ã€‚  faas-cli deploy --name env --fprocess=\u0026#34;env\u0026#34; --image=\u0026#34;function/alpine:latest\u0026#34;  ç”¨ä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²è°ƒç”¨è¯¥å‡½æ•°ã€‚  $ echo \u0026#34;\u0026#34; | faas-cli invoke env --query workshop=1 PATH=/usr/local/bin:/usr/local/bin:/usr/bin:/sbin:/bin HOSTNAME=05e8db360c5a fprocess=env HOME=/root Http_Connection=close Http_Content_Type=text/plain Http_X_Call_Id=cdbed396-a20a-43fe-9123-1d5a122c976d Http_X_Forwarded_For=10.255.0.2 Http_X_Start_Time=1519729562486546741 Http_User_Agent=Go-http-client/1.1 Http_Accept_Encoding=gzip Http_Method=POST Http_ContentLength=-1 Http_Path=/ ... Http_Query=workshop=1 ... åœ¨ Python ä»£ç ä¸­ï¼Œä½ ä¼šè¾“å…¥os.getenv(\u0026quot;Http_Query\u0026quot;)ã€‚\n å°†è·¯å¾„é™„åŠ åˆ°ä½ çš„å‡½æ•° URL ä¸Š  ç”¨ä»¥ä¸‹æ–¹æ³•è°ƒç”¨ env å‡½æ•°ã€‚\n$ curl -X GET $OPENFAAS_URL/function/env/some/path -d \u0026#34;\u0026#34; PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin HOSTNAME=fae2ac4b75f9 fprocess=env HOME=/root Http_X_Forwarded_Host=127.0.0.1:8080 Http_X_Start_Time=1539370471902481800 Http_Accept_Encoding=gzip Http_User_Agent=curl/7.54.0 Http_Accept=*/* Http_X_Forwarded_For=10.255.0.2:60460 Http_X_Call_Id=bb86b4fb-641b-463d-ae45-af68c1aa0d42 Http_Method=GET Http_ContentLength=0 ... Http_Path=/some/path ... æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼ŒHttp_Pathå¤´åŒ…å«ä½ çš„è·¯å¾„ã€‚ å¦‚æœä½ æƒ³åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨å®ƒï¼Œåªè¦ç”¨os.getenv(\u0026quot;Http_Path\u0026quot;)æ¥è·å–å®ƒã€‚\n ç°åœ¨ç”¨æ ‡å¤´æ¥è°ƒç”¨å®ƒã€‚  $ curl $OPENFAAS_URL/function/env --header \u0026#34;X-Output-Mode: json\u0026#34; -d \u0026#34;\u0026#34; PATH=/usr/local/bin:/usr/local/bin:/usr/bin:/sbin:/bin HOSTNAME=05e8db360c5a fprocess=env HOME=/root Http_X_Call_Id=8e597bcf-614f-4ca5-8f2e-f345d660db5e Http_X_Forwarded_For=10.255.0.2 Http_X_Start_Time=1519729577415481886 Http_Accept=*/* Http_Accept_Encoding=gzip Http_Connection=close Http_User_Agent=curl/7.55.1 Http_Method=GET Http_ContentLength=0 Http_Path=/ ... Http_X_Output_Mode=json ... åœ¨ Python ä»£ç ä¸­ï¼Œä½ ä¼šè¾“å…¥`os.getenv(\u0026ldquo;Http_X_Output_Mode\u0026rdquo;)\u0026rsquo;ã€‚\nä½ å¯ä»¥çœ‹åˆ°æ‰€æœ‰å…¶ä»–çš„ HTTP ä¸Šä¸‹æ–‡ä¹Ÿè¢«æä¾›äº†ï¼Œæ¯”å¦‚å½“ Http_Methodæ˜¯ POSTæ—¶çš„ Content-Lengthï¼ŒUser_Agentï¼ŒCookies å’Œå…¶ä»–ä½ æœŸæœ›ä» HTTP è¯·æ±‚ä¸­çœ‹åˆ°çš„ä¸œè¥¿ã€‚\nå®‰å…¨ï¼šåªè¯»æ–‡ä»¶ç³»ç»Ÿ OpenFaaS å¯ä»¥ä½¿ç”¨çš„å®¹å™¨å®‰å…¨ç‰¹æ€§ä¹‹ä¸€æ˜¯ä½¿æˆ‘ä»¬æ‰§è¡Œç¯å¢ƒçš„æ ¹æ–‡ä»¶ç³»ç»Ÿåªè¯»çš„èƒ½åŠ›ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°è¢«ç ´åï¼Œè¿™å¯ä»¥å‡å°‘æ”»å‡»é¢ã€‚\nç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œå°†æ–‡ä»¶ä¿å­˜åˆ°å‡½æ•°çš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚\nfaas-cli new --lang python3 ingest-file --prefix=your-name æ›´æ–°å¤„ç†ç¨‹åºã€‚\nimport os import time  def handle(req):  # Read the path or a default from environment variable  path = os.getenv(\u0026#34;save_path\u0026#34;, \u0026#34;/home/app/\u0026#34;)   # generate a name using the current timestamp  t = time.time()  file_name = path + str(t)   # write a file  with open(file_name, \u0026#34;w\u0026#34;) as f:  f.write(req)  f.close()   return file_name å»ºç«‹è¿™ä¸ªä¾‹å­ã€‚\nfaas-cli up -f ingest-file.yml è°ƒç”¨è¯¥ä¾‹å­ã€‚\necho \u0026#34;Hello function\u0026#34; \u0026gt; message.txt  cat message.txt | faas-cli invoke -f ingest-file.yml ingest-file è¯¥æ–‡ä»¶å°†è¢«å†™å…¥/home/appè·¯å¾„ä¸­ã€‚\nç°åœ¨ç¼–è¾‘ ingest-file.yml å¹¶ä½¿è¯¥å‡½æ•°ä¸ºåªè¯»ã€‚\n... functions:  ingest-file:  lang: python3  handler: ./ingest-file  image: alexellis2/ingest-file:latest  readonly_root_filesystem: true  ä¹Ÿè¯·å‚è§ã€‚YAML å‚è€ƒ\n å†æ¬¡éƒ¨ç½²ã€‚\nfaas-cli up -f ingest-file.yml ç°åœ¨è¿™å°†ä¼šå¤±è´¥ã€‚\necho \u0026#34;Hello function\u0026#34; \u0026gt; message.txt  cat message.txt | faas-cli invoke -f ingest-file.yml ingest-file è¯·çœ‹é”™è¯¯ã€‚\nServer returned unexpected status code: 500 - exit status 1 Traceback (most recent call last):  File \u0026#34;index.py\u0026#34;, line 19, in \u0026lt;module\u0026gt;  ret = handler.handle(st)  File \u0026#34;/home/app/function/handler.py\u0026#34;, line 13, in handle  with open(file_name, \u0026#34;w\u0026#34;) as f: OSError: [Errno 30] Read-only file system: \u0026#39;/home/app/1556714998.092464\u0026#39; ä¸ºäº†å†™åˆ°ä¸€ä¸ªä¸´æ—¶åŒºåŸŸï¼Œè®¾ç½®ç¯å¢ƒå˜é‡save_pathã€‚\n... functions:  ingest-file:  lang: python3  handler: ./ingest-file  image: alexellis2/ingest-file:latest  readonly_root_filesystem: true  environment:  save_path: \u0026#34;/tmp/\u0026#34; ç°åœ¨ä½ å¯ä»¥å†è¿è¡Œä¸€æ¬¡faas-cli up -f ingest-file.ymlæ¥æµ‹è¯•è¿™ä¸ªä¿®æ­£ï¼Œæ–‡ä»¶å°†è¢«å†™å…¥/tmp/ã€‚\næˆ‘ä»¬ç°åœ¨æœ‰èƒ½åŠ›é”å®šæˆ‘ä»¬çš„å‡½æ•°ä»£ç ï¼Œä½¿å…¶ä¸èƒ½è¢«æ„å¤–æ”¹å˜æˆ–æ¶æ„æ›´æ–°ã€‚\nåˆ©ç”¨æ—¥å¿—è®°å½• OpenFaaS çœ‹é—¨ç‹—é€šè¿‡æ ‡å‡† I/O æµstdinå’Œstdoutä¼ å…¥ HTTP è¯·æ±‚å’Œè¯»å– HTTP å“åº”æ¥è¿è¡Œã€‚è¿™æ„å‘³ç€ä½œä¸ºä¸€ä¸ªå‡½æ•°è¿è¡Œçš„è¿›ç¨‹ä¸éœ€è¦çŸ¥é“ä»»ä½•å…³äºç½‘ç»œæˆ– HTTP çš„ä¿¡æ¯ã€‚\nä¸€ä¸ªæœ‰è¶£çš„æƒ…å†µæ˜¯ï¼Œå½“ä¸€ä¸ªå‡½æ•°ä»¥éé›¶é€€å‡ºä»£ç é€€å‡ºæ—¶ï¼Œstderrä¸æ˜¯ç©ºçš„ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå‡½æ•°çš„stdout/stderræ˜¯åˆå¹¶çš„ï¼Œstderrä¸è¢«æ‰“å°åˆ°æ—¥å¿—ä¸­ã€‚\nè®©æˆ‘ä»¬ç”¨Lab 3ä¸­çš„hello-openfaaså‡½æ•°æ¥æ£€æŸ¥ã€‚\nå°†handler.pyçš„ä»£ç æ”¹ä¸º\nimport sys import json  def handle(req):   sys.stderr.write(\u0026#34;This should be an error message.\\n\u0026#34;)  return json.dumps({\u0026#34;Hello\u0026#34;: \u0026#34;OpenFaaS\u0026#34;}) æ„å»ºå’Œéƒ¨ç½²\nfaas-cli up -f hello-openfaas.yml ç°åœ¨ç”¨ä»¥ä¸‹æ–¹æ³•è°ƒç”¨è¯¥å‡½æ•°\necho | faas-cli invoke hello-openfaas ä½ åº”è¯¥çœ‹åˆ°åˆå¹¶è¾“å‡ºã€‚\nThis should be an error message. {\u0026#34;Hello\u0026#34;: \u0026#34;OpenFaaS\u0026#34;}  æ³¨æ„ï¼šå¦‚æœä½ ç”¨docker service logs hello-openfaasæ£€æŸ¥å®¹å™¨æ—¥å¿—ï¼ˆæˆ–è€…kubectl logs deployment/hello-openfaas -n openfaas-fnï¼‰ï¼Œä½ åº”è¯¥çœ‹ä¸åˆ° stderr è¾“å‡ºã€‚\n åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸ªå‡½æ•°è¿”å›æœ‰æ•ˆçš„ JSONï¼Œå¯ä»¥è¢«è§£æã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ—¥å¿—ä¿¡æ¯ä½¿è¾“å‡ºæ— æ•ˆã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†è¿™äº›ä¿¡æ¯ä» stderr é‡å®šå‘åˆ°å®¹å™¨çš„æ—¥å¿—ä¸­ã€‚ OpenFaaS æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥ä½ å¯ä»¥å°†é”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ—¥å¿—ä¸­ï¼Œå¹¶ä¿æŒå‡½æ•°å“åº”çš„æ¸…æ™°ï¼Œåªè¿”å›stdoutã€‚ ä¸ºæ­¤ä½ åº”è¯¥ä½¿ç”¨combine_outputæ ‡å¿—ã€‚\nè®©æˆ‘ä»¬æ¥è¯•è¯•ã€‚æ‰“å¼€hello-openfaas.ymlæ–‡ä»¶ï¼Œæ·»åŠ è¿™äº›è¡Œã€‚\n environment:  combine_output: false éƒ¨ç½²å¹¶è°ƒç”¨è¯¥å‡½æ•°ã€‚\nè¾“å‡ºåº”è¯¥æ˜¯ã€‚\n{\u0026#34;Hello\u0026#34;: \u0026#34;OpenFaaS\u0026#34;} æ£€æŸ¥å®¹å™¨æ—¥å¿—ä¸­çš„stderrã€‚ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼çš„ä¿¡æ¯ã€‚\nhello-openfaas.1.2xtrr2ckkkth@linuxkit-025000000001 | 2018/04/03 08:35:24 stderr: This should be an error message. åˆ›å»ºå·¥ä½œæµ åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼ŒæŠŠä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ è¿™åœ¨å®¢æˆ·ç«¯å’Œé€šè¿‡ API ç½‘å…³éƒ½å¯ä»¥å®ç°ã€‚\nå®¢æˆ·ç«¯ä¸Šçš„è¿é”å‡½æ•° ä½ å¯ä»¥ä½¿ç”¨curlã€faas-cliæˆ–ä¸€äº›ä½ è‡ªå·±çš„ä»£ç å°†ä¸€ä¸ªå‡½æ•°çš„ç»“æœè¾“é€åˆ°å¦ä¸€ä¸ªå‡½æ•°ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚\nä¼˜ç‚¹ã€‚\n ä¸éœ€è¦ä»£ç  - å¯ä»¥ç”¨ CLI ç¨‹åºå®Œæˆ *å¿«é€Ÿå¼€å‘å’Œæµ‹è¯• *å®¹æ˜“åœ¨ä»£ç ä¸­å»ºæ¨¡  ç¼ºç‚¹ã€‚\n é¢å¤–çš„å»¶è¿Ÿ - æ¯ä¸ªå‡½æ•°éƒ½è¦è¿”å›åˆ°æœåŠ¡å™¨ä¸Š èŠå¤©ï¼ˆæ›´å¤šçš„ä¿¡æ¯ï¼‰  ä¾‹å­ã€‚\n  ä»å‡½æ•°åº“éƒ¨ç½² NodeInfo å‡½æ•°\n  ç„¶åé€šè¿‡ Markdown è½¬æ¢å™¨æ¨é€ NodeInfo çš„è¾“å‡º\n  $ echo -n \u0026#34;\u0026#34; | faas-cli invoke nodeinfo | faas-cli invoke markdown \u0026lt;p\u0026gt;Hostname: 64767782518c\u0026lt;/p\u0026gt;  \u0026lt;p\u0026gt;Platform: linux Arch: x64 CPU count: 4 Uptime: 1121466\u0026lt;/p\u0026gt; ç°åœ¨ä½ ä¼šçœ‹åˆ° NodeInfo å‡½æ•°çš„è¾“å‡ºè¢«è£…é¥°æˆ HTML æ ‡ç­¾ï¼Œä¾‹å¦‚ã€‚\u0026lt;p\u0026gt;.\nå¦ä¸€ä¸ªå®¢æˆ·ç«¯å‡½æ•°é“¾çš„ä¾‹å­å¯èƒ½æ˜¯è°ƒç”¨ä¸€ä¸ªç”Ÿæˆå›¾åƒçš„å‡½æ•°ï¼Œç„¶åå°†è¯¥å›¾åƒå‘é€åˆ°å¦ä¸€ä¸ªæ·»åŠ æ°´å°çš„å‡½æ•°ä¸­ã€‚\nä»å¦ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•° ä»å¦ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æœ€ç®€å•æ–¹æ³•æ˜¯é€šè¿‡ OpenFaaS API ç½‘å…³é€šè¿‡ HTTP è¿›è¡Œè°ƒç”¨ã€‚è¿™ä¸ªè°ƒç”¨ä¸éœ€è¦çŸ¥é“å¤–éƒ¨åŸŸåæˆ– IP åœ°å€ï¼Œå®ƒå¯ä»¥ç®€å•åœ°é€šè¿‡ DNS æ¡ç›®å°† API ç½‘å…³ç§°ä¸ºgatewayã€‚\nå½“ä»ä¸€ä¸ªå‡½æ•°è®¿é—® API ç½‘å…³ç­‰æœåŠ¡æ—¶ï¼Œæœ€å¥½çš„åšæ³•æ˜¯ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥é…ç½®ä¸»æœºåï¼Œè¿™å¾ˆé‡è¦ï¼Œæœ‰ä¸¤ä¸ªåŸå› \u0026ndash;åç§°å¯èƒ½ä¼šæ”¹å˜ï¼Œåœ¨ Kubernetes ä¸­æœ‰æ—¶éœ€è¦ä¸€ä¸ªåç¼€ã€‚\nä¼˜ç‚¹ã€‚\n å‡½æ•°ä¹‹é—´å¯ä»¥ç›´æ¥åˆ©ç”¨å¯¹æ–¹ ä½å»¶è¿Ÿï¼Œå› ä¸ºå‡½æ•°å¯ä»¥åœ¨åŒä¸€ç½‘ç»œä¸Šç›¸äº’è®¿é—®  ç¼ºç‚¹ã€‚\n éœ€è¦ä¸€ä¸ªä»£ç åº“æ¥è¿›è¡Œ HTTP è¯·æ±‚  ä¾‹å­ã€‚\nåœ¨å®éªŒå®¤ 3ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† request æ¨¡å—ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥è°ƒç”¨ä¸€ä¸ªè¿œç¨‹ APIï¼Œä»¥è·å¾—å›½é™…ç©ºé—´ç«™ä¸Šçš„ä¸€ä¸ªå®‡èˆªå‘˜çš„åå­—ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæ ·çš„æŠ€æœ¯æ¥è°ƒç”¨éƒ¨ç½²åœ¨ OpenFaaS ä¸Šçš„å¦ä¸€ä¸ªå‡½æ•°ã€‚\n ä½¿ç”¨ç”¨æˆ·ç•Œé¢ï¼Œè¿›å…¥å‡½æ•°å•†åº—å¹¶éƒ¨ç½²æƒ…æ„Ÿåˆ†æå‡½æ•°ã€‚  æˆ–è€…ä½¿ç”¨ CLIã€‚\nfaas-cli store deploy SentimentAnalysis æƒ…æ„Ÿåˆ†æå‡½æ•°å°†å‘Šè¯‰ä½ ä»»ä½•å¥å­çš„ä¸»è§‚æ€§å’Œææ€§ï¼ˆç§¯ææ€§è¯„çº§ï¼‰ã€‚è¯¥å‡½æ•°çš„ç»“æœæ˜¯ä»¥ JSON æ ¼å¼æ˜¾ç¤ºçš„ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ã€‚\n$ echo -n \u0026#34;California is great, it\u0026#39;s always sunny there.\u0026#34; | faas-cli invoke sentimentanalysis {\u0026#34;polarity\u0026#34;: 0.8, \u0026#34;sentence_count\u0026#34;: 1, \u0026#34;subjectivity\u0026#34;: 0.75} å› æ­¤ï¼Œç»“æœæ˜¾ç¤ºæˆ‘ä»¬çš„æµ‹è¯•å¥å­æ—¢éå¸¸ä¸»è§‚ï¼ˆ75%ï¼‰åˆéå¸¸ç§¯æï¼ˆ80%ï¼‰ã€‚è¿™ä¸¤ä¸ªå­—æ®µçš„å€¼æ€»æ˜¯åœ¨-1.00å’Œ1.00ä¹‹é—´ã€‚\nä¸‹é¢çš„ä»£ç å¯ä»¥ç”¨æ¥è°ƒç”¨æƒ…ç»ªåˆ†æå‡½æ•°æˆ–ä»»ä½•å…¶ä»–å‡½æ•°ã€‚\nç»™ç½‘å…³ä¸»æœºåŠ ä¸Šopenfaaså‘½åç©ºé—´çš„åç¼€ã€‚\n r = requests.get(\u0026#34;http://gateway.openfaas:8080/function/sentimentanalysis\u0026#34;, text= test_sentence) æˆ–è€…é€šè¿‡ä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚\n gateway_hostname = os.getenv(\u0026#34;gateway_hostname\u0026#34;, \u0026#34;gateway.openfaas\u0026#34;) # uses a default of \u0026#34;gateway.openfaas\u0026#34; for when \u0026#34;gateway_hostname\u0026#34; is not set  test_sentence = \u0026#34;California is great, it\u0026#39;s always sunny there.\u0026#34;  r = requests.get(\u0026#34;http://\u0026#34; + gateway_hostname + \u0026#34;:8080/function/sentimentanalysis\u0026#34;, data= test_sentence) ç”±äºç»“æœæ€»æ˜¯ä»¥ JSON æ ¼å¼å‡ºç°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¾…åŠ©å‡½æ•°.json()æ¥è½¬æ¢å“åº”ã€‚\n result = r.json()  if result[\u0026#34;polarity\u0026#34;] \u0026gt; 0.45:  return \u0026#34;That was probably positive\u0026#34;  else:  return \u0026#34;That was neutral or negative\u0026#34; ç°åœ¨ï¼Œåœ¨ Python ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶å°†å…¶å…¨éƒ¨æ•´åˆèµ·æ¥\nimport os import requests import sys  def handle(req):  \u0026#34;\u0026#34;\u0026#34;handle a request to the function Args: req (str): request body \u0026#34;\u0026#34;\u0026#34;   gateway_hostname = os.getenv(\u0026#34;gateway_hostname\u0026#34;, \u0026#34;gateway.openfaas\u0026#34;) # uses a default of \u0026#34;gateway\u0026#34; for when \u0026#34;gateway_hostname\u0026#34; is not set   test_sentence = req   r = requests.get(\u0026#34;http://\u0026#34; + gateway_hostname + \u0026#34;:8080/function/sentimentanalysis\u0026#34;, data= test_sentence)   if r.status_code != 200:  sys.exit(\u0026#34;Error with sentimentanalysis, expected: %d, got: %d\\n\u0026#34; % (200, r.status_code))   result = r.json()  if result[\u0026#34;polarity\u0026#34;] \u0026gt; 0.45:  return \u0026#34;That was probably positive\u0026#34;  else:  return \u0026#34;That was neutral or negative\u0026#34;  è®°å¾—åœ¨ä½ çš„requirements.txtæ–‡ä»¶ä¸­åŠ å…¥requestsã€‚  æ³¨æ„ï¼šä½ ä¸éœ€è¦ä¿®æ”¹æˆ–æ”¹å˜ SentimentAnalysis å‡½æ•°çš„æºä»£ç ï¼Œæˆ‘ä»¬å·²ç»éƒ¨ç½²äº†å®ƒå¹¶å°†é€šè¿‡ API ç½‘å…³è®¿é—®å®ƒã€‚\nç°åœ¨è½¬åˆ°å®éªŒå®¤ 5ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab4/","summary":"å®éªŒ 4\u0026ndash;æ›´æ·±å…¥åœ°ä½¿ç”¨å‡½æ•° åœ¨å¼€å§‹æœ¬å®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚ç”±äºæœ¬å®éªŒæ˜¯å»ºç«‹åœ¨æ—©æœŸå®éªŒçš„åŸºç¡€ä¸Šçš„ï¼Œæ‰€ä»¥è¯·å¤åˆ¶ lab3ã€‚\n$ cp -r lab3 lab4\\  \u0026amp;\u0026amp; cd lab4 é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥é…ç½® èƒ½å¤Ÿæ§åˆ¶ä¸€ä¸ªå‡½æ•°åœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºæ–¹å¼æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®ç°è¿™ä¸€ç‚¹ã€‚\nåœ¨éƒ¨ç½²æ—¶ *åœ¨éƒ¨ç½²æ—¶è®¾ç½®ç¯å¢ƒå˜é‡\næˆ‘ä»¬åœ¨Lab 3ä¸­ç”¨write_debugåšäº†è¿™ä¸ª - ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®ä»»ä½•ä½ æƒ³è¦çš„è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ - ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ä¸ºä½ çš„hello worldå‡½æ•°é…ç½®ä¸€ç§è¯­è¨€ï¼Œä½ å¯ä»¥å¼•å…¥ä¸€ä¸ªspoken_languageå˜é‡ã€‚\nä½¿ç”¨ HTTP ä¸Šä¸‹æ–‡\u0026ndash;querystring / headers *ä½¿ç”¨ querystring å’Œ HTTP headers\nå¦ä¸€ä¸ªæ›´åŠ¨æ€çš„ã€å¯ä»¥åœ¨æ¯ä¸ªè¯·æ±‚å±‚é¢ä¸Šæ”¹å˜çš„é€‰é¡¹æ˜¯ä½¿ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²å’Œ HTTP å¤´ä¿¡æ¯ï¼Œä¸¤è€…éƒ½å¯ä»¥é€šè¿‡faas-cliæˆ–curlä¼ é€’ã€‚\nè¿™äº›å¤´ä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡æš´éœ²å‡ºæ¥ï¼Œæ‰€ä»¥å®ƒä»¬å¾ˆå®¹æ˜“åœ¨ä½ çš„å‡½æ•°ä¸­è¢«ä½¿ç”¨ã€‚æ‰€ä»¥ä»»ä½•å¤´ä¿¡æ¯éƒ½ä»¥Http_ä¸ºå‰ç¼€ï¼Œæ‰€æœ‰-è¿å­—ç¬¦éƒ½è¢«æ›¿æ¢æˆ_ä¸‹åˆ’çº¿ã€‚\nè®©æˆ‘ä»¬ç”¨ querystring å’Œä¸€ä¸ªåˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡çš„å‡½æ•°æ¥è¯•è¯•ã€‚\n ä½¿ç”¨ BusyBox çš„å†…ç½®å‘½ä»¤ï¼Œéƒ¨ç½²ä¸€ä¸ªæ‰“å°ç¯å¢ƒå˜é‡çš„å‡½æ•°ã€‚  faas-cli deploy --name env --fprocess=\u0026#34;env\u0026#34; --image=\u0026#34;function/alpine:latest\u0026#34;  ç”¨ä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²è°ƒç”¨è¯¥å‡½æ•°ã€‚  $ echo \u0026#34;\u0026#34; | faas-cli invoke env --query workshop=1 PATH=/usr/local/bin:/usr/local/bin:/usr/bin:/sbin:/bin HOSTNAME=05e8db360c5a fprocess=env HOME=/root Http_Connection=close Http_Content_Type=text/plain Http_X_Call_Id=cdbed396-a20a-43fe-9123-1d5a122c976d Http_X_Forwarded_For=10.","title":"openfaas-workshop-lab4"},{"content":"sudo chown \u0026#34;$USER\u0026#34;:\u0026#34;$USER\u0026#34; /home/\u0026#34;$USER\u0026#34;/.docker -R sudo chmod g+rwx \u0026#34;/home/$USER/.docker\u0026#34; -R https://api.finochat.com/api/v1/platform/apps/RETAIL/profiles/@custom:finolabs.com.cn/avatar?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmY2lkIjoiQHBjdXN0b20tMTA6Zmlub2xhYnMuY29tLmNuIiwiaXNzIjoieUNkNXVhaWRhWU4zc1pwTTdHU2V5WWVqSGdlN3hSa1EiLCJpYXQiOjE1MzAyNjk5NDh9.UUsO2xw1f8cA6FiG1bNAGyYQh-vh32hKHKSJ2EKZicI    http://localhost:3000/api/v1/platform/apps/RETAIL/profiles/@custom:finolabs.com.cn/avatar?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmY2lkIjoiQHBjdXN0b20tMTA6Zmlub2xhYnMuY29tLmNuIiwiaXNzIjoieUNkNXVhaWRhWU4zc1pwTTdHU2V5WWVqSGdlN3hSa1EiLCJpYXQiOjE1MzAyNjk5NDh9.UUsO2xw1f8cA6FiG1bNAGyYQh-vh32hKHKSJ2EKZicI ","permalink":"https://zhenfeng-zhu.github.io/post/ubuntu-docker-sudo/","summary":"sudo chown \u0026#34;$USER\u0026#34;:\u0026#34;$USER\u0026#34; /home/\u0026#34;$USER\u0026#34;/.docker -R sudo chmod g+rwx \u0026#34;/home/$USER/.docker\u0026#34; -R https://api.finochat.com/api/v1/platform/apps/RETAIL/profiles/@custom:finolabs.com.cn/avatar?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmY2lkIjoiQHBjdXN0b20tMTA6Zmlub2xhYnMuY29tLmNuIiwiaXNzIjoieUNkNXVhaWRhWU4zc1pwTTdHU2V5WWVqSGdlN3hSa1EiLCJpYXQiOjE1MzAyNjk5NDh9.UUsO2xw1f8cA6FiG1bNAGyYQh-vh32hKHKSJ2EKZicI    http://localhost:3000/api/v1/platform/apps/RETAIL/profiles/@custom:finolabs.com.cn/avatar?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmY2lkIjoiQHBjdXN0b20tMTA6Zmlub2xhYnMuY29tLmNuIiwiaXNzIjoieUNkNXVhaWRhWU4zc1pwTTdHU2V5WWVqSGdlN3hSa1EiLCJpYXQiOjE1MzAyNjk5NDh9.UUsO2xw1f8cA6FiG1bNAGyYQh-vh32hKHKSJ2EKZicI ","title":"ubuntu-docker-sudo"},{"content":"å®éªŒ 3\u0026ndash;å‡½æ•°ä»‹ç» åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab3\\`s  \u0026amp;\u0026amp; cd lab3 åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•° æœ‰ä¸¤ç§æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚\n ä½¿ç”¨ä¸€ä¸ªå†…ç½®çš„æˆ–ç¤¾åŒºçš„ä»£ç æ¨¡æ¿å»ºç«‹ä¸€ä¸ªå‡½æ•°ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶å¹¶å°†å…¶ä½œä¸ºä½ çš„å‡½æ•°ï¼ˆé«˜çº§ï¼‰  æ„å»ºæˆ–ç”Ÿæˆä¸€ä¸ªæ–°å‡½æ•° åœ¨ç”¨æ¨¡æ¿åˆ›å»ºæ–°å‡½æ•°ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ ä» GitHub ä¸Šæå–äº†æ¨¡æ¿ã€‚\n$ faas-cli template pull  Fetch templates from repository: https://github.com/openfaas/templates.git  Attempting to expand templates from https://github.com/openfaas/templates.git 2021/08/25 15:58:10 Fetched 13 template(s) : [csharp dockerfile go java11 java11-vert-x node node12 node14 php7 python python3 python3-debian ruby] from https://github.com/openfaas/templates.git ä¹‹åï¼Œè¦æƒ³çŸ¥é“å“ªäº›è¯­è¨€æ˜¯å¯ç”¨çš„ï¼Œè¯·é”®å…¥ã€‚\n$ faas-cli new --list Languages available as templates: - csharp - dockerfile - go - java11 - java11-vert-x - node - node12 - node14 - php7 - python - python3 - python3-debian - ruby æˆ–è€…åˆ›å»ºä¸€ä¸ªåŒ…å«Dockerfileçš„æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨ YAML æ–‡ä»¶ä¸­é€‰æ‹© Dockerfileè¯­è¨€ç±»å‹ã€‚\nåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ å¯ä»¥ä¸º Pythonã€Python 3ã€Rubyã€Goã€Nodeã€CSharp ç­‰åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚\n å…³äºæˆ‘ä»¬çš„ä¾‹å­çš„è¯´æ˜  æˆ‘ä»¬è¿™æ¬¡ç ”è®¨ä¼šçš„æ‰€æœ‰ä¾‹å­éƒ½ç»è¿‡äº† OpenFaaS ç¤¾åŒºå¯¹Python 3çš„å…¨é¢æµ‹è¯•ï¼Œä½†ä¹Ÿåº”è¯¥ä¸Python 2.7å…¼å®¹ã€‚\nå¦‚æœä½ å–œæ¬¢ä½¿ç”¨ Python 2.7 è€Œä¸æ˜¯ Python 3ï¼Œé‚£ä¹ˆæŠŠfaas-cli new --lang python3æ¢æˆfaas-cli new --lang pythonã€‚\nPython ä¸­çš„ Hello world æˆ‘ä»¬å°†åœ¨ Python ä¸­åˆ›å»ºä¸€ä¸ª hello-world å‡½æ•°ï¼Œç„¶åè½¬åˆ°ä¹Ÿä½¿ç”¨é¢å¤–ä¾èµ–çš„ä¸œè¥¿ä¸Šã€‚\n æ„å»ºå‡½æ•°çš„è„šæ‰‹æ¶  faas-cli new --lang python3 hello-openfaas --prefix=\u0026#34;\u0026lt;your-docker-username-here\u0026gt;\u0026#34; å‚æ•°--prefixå°†æ›´æ–°image:\u0026ndash;prefixå‚æ•°å°†æ›´æ–°hello-openfaas.ymlä¸­çš„å€¼ï¼Œå…¶å‰ç¼€åº”è¯¥æ˜¯ä½ çš„Docker Hubè´¦å·ã€‚å¯¹äº[OpenFaaS](https://hub.docker.com/r/functions)æ¥è¯´ï¼Œè¿™æ˜¯image: functions/hello-openfaasï¼Œå‚æ•°å°†æ˜¯\u0026ndash;prefix=\u0026ldquo;function\u0026rdquo;`ã€‚\nå¦‚æœä½ åœ¨åˆ›å»ºå‡½æ•°æ—¶æ²¡æœ‰æŒ‡å®šå‰ç¼€ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºåç¼–è¾‘ YAML æ–‡ä»¶ã€‚\nè¿™å°†åˆ›å»ºä¸‰ä¸ªæ–‡ä»¶å’Œä¸€ä¸ªç›®å½•ã€‚\n./hello-openfaas.yml ./hello-openfaas ./hello-openfaas/handler.py ./hello-openfaas/requirements.txt YAML (.yml) æ–‡ä»¶æ˜¯ç”¨æ¥é…ç½® CLI æ¥æ„å»ºã€æ¨é€å’Œéƒ¨ç½²ä½ çš„å‡½æ•°ã€‚\n æ³¨æ„ï¼šæ¯å½“ä½ éœ€è¦åœ¨ Kubernetes æˆ–è¿œç¨‹ OpenFaaS å®ä¾‹ä¸Šéƒ¨ç½²ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä½ å¿…é¡»åœ¨æ„å»ºå‡½æ•°åæ¨é€å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªç¯å¢ƒå˜é‡è¦†ç›–é»˜è®¤çš„ç½‘å…³ URLï¼Œå³ 127.0.0.1:8080ã€‚export OPENFAAS_URL=127.0.0.1:31112`.\n ä¸‹é¢æ˜¯ YAML æ–‡ä»¶çš„å†…å®¹ã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  hello-openfaas:  lang: python3  handler: ./hello-openfaas  image: hello-openfaas  å‡½æ•°çš„åç§°ç”±functionsä¸‹çš„é”®è¡¨ç¤ºï¼Œå³hello-openfaasã€‚ è¯­è¨€ç”± lang å­—æ®µè¡¨ç¤ºã€‚ ç”¨äºæ„å»ºçš„æ–‡ä»¶å¤¹è¢«ç§°ä¸º handlerï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹è€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚ è¦ä½¿ç”¨çš„ Docker é•œåƒåç§°åœ¨imageå­—æ®µä¸‹ã€‚  è¯·è®°ä½ï¼ŒgatewayURL å¯ä»¥åœ¨ YAML æ–‡ä»¶ä¸­ï¼ˆé€šè¿‡ç¼–è¾‘provider:ä¸‹çš„gateway:å€¼ï¼‰æˆ–åœ¨ CLI ä¸Šï¼ˆé€šè¿‡ä½¿ç”¨--gatewayæˆ–è®¾ç½®OPENFAAS_URLç¯å¢ƒå˜é‡ï¼‰è¿›è¡Œè¦†ç›–ã€‚\nä¸‹é¢æ˜¯handler.pyæ–‡ä»¶çš„å†…å®¹ã€‚\ndef handle(req):  \u0026#34;\u0026#34;\u0026#34;handle a request to the function Args: req (str): request body \u0026#34;\u0026#34;\u0026#34;   return req è¿™ä¸ªå‡½æ•°å°†åªæ˜¯è¿”å›è¾“å…¥ï¼Œæ‰€ä»¥å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªechoå‡½æ•°ã€‚\nç¼–è¾‘ä¿¡æ¯ï¼Œä½¿å…¶è¿”å› Hello OpenFaaSï¼Œä¾‹å¦‚ã€‚\n return \u0026#34;Hello OpenFaaS\u0026#34; ä»»ä½•è¿”å›åˆ° stdout çš„å€¼éƒ½ä¼šéšåè¿”å›åˆ°è°ƒç”¨ç¨‹åºã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨print()è¯­å¥ï¼Œå®ƒå°†è¡¨ç°å‡ºç±»ä¼¼çš„æµå‘ï¼Œå¹¶ä¼ é€’ç»™è°ƒç”¨ç¨‹åºã€‚\nè¿™æ˜¯æœ¬åœ°å¼€å‘äººå‘˜å¯¹å‡½æ•°çš„å·¥ä½œæµç¨‹ã€‚\nfaas-cli up -f hello-openfaas.yml  æ³¨æ„ï¼šåœ¨è¿è¡Œè¿™ä¸ªå‘½ä»¤ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»ç”¨docker loginå‘½ä»¤ç™»å½•äº† docker æ³¨å†Œä¸­å¿ƒã€‚ æ³¨æ„: faas-cli upå‘½ä»¤å°†faas-cliçš„æ„å»ºã€æ¨é€å’Œéƒ¨ç½²å‘½ä»¤åˆå¹¶ä¸ºä¸€æ¡å‘½ä»¤ã€‚\n éšåé€šè¿‡ç”¨æˆ·ç•Œé¢ã€CLIã€curlæˆ–å…¶ä»–åº”ç”¨ç¨‹åºè°ƒç”¨è¯¥å‡½æ•°ã€‚\nè¯¥å‡½æ•°å°†å§‹ç»ˆè·å¾—ä¸€ä¸ªè·¯ç”±ï¼Œä¾‹å¦‚ã€‚\n$OPENFAAS_URL/function/\u0026lt;function_name\u0026gt;ï¼ˆå‡½æ•°åï¼‰ã€‚ $OPENFAAS_URL/function/figlet $OPENFAAS_URL/function/hello-openfaas  æç¤ºï¼šå¦‚æœä½ æŠŠ YAML æ–‡ä»¶é‡å‘½åä¸ºstack.ymlï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦å‘ä»»ä½•å‘½ä»¤ä¼ é€’-fæ ‡å¿—ã€‚\n å‡½æ•°åªèƒ½é€šè¿‡GETæˆ–POSTæ–¹æ³•æ¥è°ƒç”¨ã€‚\n è°ƒç”¨ä½ çš„å‡½æ•°  ç”¨faas-cli invokeæµ‹è¯•å‡½æ•°ï¼ŒæŸ¥çœ‹faas-cli invoke --helpè·å–æ›´å¤šé€‰é¡¹ã€‚\nç¤ºä¾‹å‡½æ•°ï¼šastronaut-finder æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸º astronaut-finder çš„å‡½æ•°ï¼Œåœ¨å›½é™…ç©ºé—´ç«™ï¼ˆISSï¼‰ä¸Šéšæœºæ‹‰å‡ºä¸€ä¸ªå¤ªç©ºäººçš„åå­—ã€‚\nfaas-cli new --lang python3 astronaut-finder --prefix=\u0026#34;\u0026lt;your-docker-username-here\u0026gt;\u0026#34; è¿™å°†ä¸ºæˆ‘ä»¬å†™ä¸‰ä¸ªæ–‡ä»¶ã€‚\n./astronaut-finder/handler.py å‡½æ•°çš„å¤„ç†ç¨‹åº\u0026ndash;ä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¸¦æœ‰åŸå§‹è¯·æ±‚çš„reqå¯¹è±¡ï¼Œå¹¶å¯ä»¥å°†å‡½æ•°çš„ç»“æœæ‰“å°åˆ°æ§åˆ¶å°ã€‚\n./astronaut-finder/requirements.txt è¿™ä¸ªæ–‡ä»¶ç”¨æ¥ç®¡ç†å‡½æ•°\u0026ndash;å®ƒæœ‰å‡½æ•°çš„åç§°ã€Docker é•œåƒå’Œä»»ä½•å…¶ä»–éœ€è¦çš„å®šåˆ¶ã€‚\n./astronaut-finder.yml ä½¿ç”¨è¯¥æ–‡ä»¶åˆ—å‡ºä½ è¦å®‰è£…çš„ä»»ä½•pipæ¨¡å—ï¼Œå¦‚requestsæˆ–urllibã€‚\n ç¼–è¾‘./astronaut-finder/requirements.txtã€‚  requests è¿™å‘Šè¯‰å‡½æ•°å®ƒéœ€è¦ä½¿ç”¨ä¸€ä¸ªåä¸ºrequestsçš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œç”¨äºé€šè¿‡ HTTP è®¿é—®ç½‘ç«™ã€‚\n ç¼–å†™è¯¥å‡½æ•°çš„ä»£ç ã€‚  æˆ‘ä»¬å°†ä»ä»¥ä¸‹åœ°æ–¹æ‹‰å…¥æ•°æ®ï¼š http://api.open-notify.org/astros.json\nä¸‹é¢æ˜¯ä¸€ä¸ªç»“æœçš„ä¾‹å­ã€‚\n{\u0026#34;number\u0026#34;: 6, \u0026#34;people\u0026#34;: [{\u0026#34;craft\u0026#34;: \u0026#34;ISS\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Alexander Misurkin\u0026#34;}, {\u0026#34;craft\u0026#34;: \u0026#34;ISS\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Mark Vande Hei\u0026#34;}, {\u0026#34;craft\u0026#34;: \u0026#34;ISS\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Joe Acaba\u0026#34;}, {\u0026#34;craft\u0026#34;: \u0026#34;ISS\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Anton Shkaplerov\u0026#34;}, {\u0026#34;craft\u0026#34;: \u0026#34;ISS\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Scott Tingle\u0026#34;}, {\u0026#34;craft\u0026#34;: \u0026#34;ISS\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Norishige Kanai\u0026#34;}], \u0026#34;message\u0026#34;: \u0026#34;success\u0026#34;} æ›´æ–°handler.pyã€‚\nimport requests import random  def handle(req):  r = requests.get(\u0026#34;http://api.open-notify.org/astros.json\u0026#34;)  result = r.json()  index = random.randint(0, len(result[\u0026#34;people\u0026#34;])-1)  name = result[\u0026#34;people\u0026#34;][index][\u0026#34;name\u0026#34;]   return \u0026#34;%sis in space\u0026#34; % (name)  æ³¨æ„ï¼šåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨å‚æ•°reqï¼Œä½†å¿…é¡»æŠŠå®ƒæ”¾åœ¨å‡½æ•°çš„å¤´éƒ¨ã€‚\n ç°åœ¨å»ºç«‹è¿™ä¸ªå‡½æ•°ã€‚\nfaas-cli build -f ./astronaut-finder.yml  æç¤ºã€‚è¯•ç€æŠŠ astronaut-finder.yml é‡å‘½åä¸ºstack.ymlï¼Œç„¶ååªè°ƒç”¨faas-cli buildã€‚stack.ymlæ˜¯ CLI çš„é»˜è®¤æ–‡ä»¶åã€‚\n æ¨é€å‡½æ•°ã€‚\nfaas-cli push -f ./astronaut-finder.yml éƒ¨ç½²è¯¥å‡½æ•°ã€‚\nfaas-cli deploy -f ./astronaut-finder.yml è°ƒç”¨è¯¥å‡½æ•°\n$ echo | faas-cli invoke astronaut-finder å®‰ä¸œ-å²å¡æ™®å‹’å¤«åœ¨å¤ªç©ºä¸­  $ echo | faas-cli invoke astronaut-finder ä¹”-é˜¿å¡å·´åœ¨å¤ªç©ºä¸­ æ•…éšœæ’é™¤ï¼šæ‰¾åˆ°å®¹å™¨çš„æ—¥å¿— ä½ å¯ä»¥é€šè¿‡å®¹å™¨çš„æ—¥å¿—æ‰¾åˆ°ä½ çš„å‡½æ•°çš„æ¯æ¬¡è°ƒç”¨çš„é«˜çº§ä¿¡æ¯ã€‚\nkubectl logs deployment/astronaut-finder -n openfaas-fn æ•…éšœæ’é™¤ï¼šä½¿ç”¨`write_debug\u0026rsquo;çš„ verbose è¾“å‡º è®©æˆ‘ä»¬ä¸ºä½ çš„å‡½æ•°æ‰“å¼€ verbose è¾“å‡ºã€‚è¿™åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å…³é—­çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šç”¨æ•°æ®æ·¹æ²¡ä½ çš„å‡½æ•°çš„æ—¥å¿—\u0026ndash;è¿™åœ¨å¤„ç†äºŒè¿›åˆ¶æ•°æ®æ—¶å°¤å…¶é‡è¦ï¼Œå› ä¸ºäºŒè¿›åˆ¶æ•°æ®åœ¨æ—¥å¿—ä¸­æ²¡æœ‰æ„ä¹‰ã€‚\nè¿™æ˜¯æ ‡å‡†çš„ YAML é…ç½®ã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  astronaut-finder:  lang: python3  handler: ./astronaut-finder  image: astronaut-finder ä¸ºè¯¥å‡½æ•°ç¼–è¾‘ YAML æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸ª environment éƒ¨åˆ†ã€‚\n astronaut-finder:  lang: python3  handler: ./astronaut-finder  image: astronaut-finder  environment:  write_debug: true ç°åœ¨ç”¨faas-cli deploy -f ./astronaut-finder.ymlå†æ¬¡éƒ¨ç½²ä½ çš„å‡½æ•°ã€‚\nè°ƒç”¨è¯¥å‡½æ•°ï¼Œç„¶åå†æ¬¡æ£€æŸ¥æ—¥å¿—ï¼ŒæŸ¥çœ‹å‡½æ•°çš„å“åº”ã€‚\nkubectl logs deployment/astronaut-finder -n openfaas-fn ç®¡ç†å¤šä¸ªå‡½æ•° CLI çš„ YAML æ–‡ä»¶å…è®¸å°†å‡½æ•°åˆ†ç»„ä¸ºå †æ ˆï¼Œè¿™åœ¨å¤„ç†ä¸€ç»„ç›¸å…³å‡½æ•°æ—¶å¾ˆæœ‰å¸®åŠ©ã€‚\nä¸ºäº†äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œç”Ÿæˆä¸¤ä¸ªå‡½æ•°ã€‚\nfaas-cli new --lang python3 first å¯¹äºç¬¬äºŒä¸ªå‡½æ•°ä½¿ç”¨--appendæ ‡å¿—ã€‚\nfaas-cli new --lang python3 second --append=./first.yml ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬æŠŠfirst.ymlæ”¹åä¸ºexample.ymlã€‚\nmv first.yml example.yml ç°åœ¨çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶ã€‚\nprovider:  name: openfaas  gateway: http://127.0.0.1:8080  functions:  first:  lang: python3  handler: ./first  image: first  second:  lang: python3  handler: ./second  image: second è¿™é‡Œæœ‰å‡ ä¸ªæ ‡å¿—ï¼Œåœ¨å¤„ç†å‡½æ•°å †æ ˆæ—¶æœ‰å¸®åŠ©ã€‚\n ä»¥å¹¶è¡Œæ–¹å¼æ„å»ºã€‚  faas-cli build -f ./example.yml --parallel=2  åªå»ºç«‹/æ¨é€ä¸€ä¸ªå‡½æ•°ã€‚  faas-cli build -f ./example.yml --filter=second èŠ±ç‚¹æ—¶é—´æ¥æ¢ç´¢build/pushå’Œdeployçš„é€‰é¡¹ã€‚\n faas-cli build --helpã€‚ faas-cli push --helpã€‚ faas-cli deploy --helpã€‚  è¦åŒæ—¶è¿è¡Œfaas-cli build \u0026amp;\u0026amp;faas-cli push \u0026amp;\u0026amp;faas-cli deployï¼Œè¯·ä½¿ç”¨faas-cli upä»£æ›¿ã€‚\n ä¸“ä¸šæç¤ºï¼šå¦‚æœä½ ä¸æƒ³ä¼ é€’-få‚æ•°ï¼Œstack.ymlæ˜¯ faas-cli å¯»æ‰¾çš„é»˜è®¤åç§°ã€‚\n ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨faas-cli deploy -f https://....é€šè¿‡ HTTPï¼ˆsï¼‰éƒ¨ç½²è¿œç¨‹å‡½æ•°æ ˆï¼ˆyamlï¼‰æ–‡ä»¶ã€‚\nè‡ªå®šä¹‰æ¨¡æ¿ å¦‚æœä½ æœ‰è‡ªå·±çš„ä¸€å¥—åˆ†å‰æ¨¡æ¿æˆ–è‡ªå®šä¹‰æ¨¡æ¿ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠŠå®ƒä»¬æ‹‰ä¸‹æ¥ï¼Œç”¨ CLI ä½¿ç”¨ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªè·å– Python 3 æ¨¡æ¿çš„ä¾‹å­ï¼Œå®ƒä½¿ç”¨ Debian Linuxã€‚\nä½¿ç”¨ git URL æ‹‰å–æ¨¡æ¿ã€‚\nfaas-cli template pull https://github.com/openfaas-incubator/python3-debian ç°åœ¨é”®å…¥ faas-cli new --listã€‚\n$ faas-cli new --list | grep python - python - python3 - python3-debian è¿™äº›æ–°æ¨¡æ¿ä¼šè¢«ä¿å­˜åœ¨ä½ å½“å‰çš„å·¥ä½œç›®å½•ä¸‹./templates/ã€‚\nè‡ªå®šä¹‰æ¨¡æ¿ã€‚æ¨¡æ¿å•†åº— æ¨¡æ¿å•†åº—æ˜¯ä¸€ä¸ªç±»ä¼¼äºå‡½æ•°å•†åº—*çš„æ¦‚å¿µï¼Œå®ƒä½¿ç”¨æˆ·å¯ä»¥é€šè¿‡åˆ†äº«ä»–ä»¬çš„æ¨¡æ¿æ¥è¿›è¡Œåä½œã€‚æ¨¡æ¿å•†åº—ä¹Ÿæ„å‘³ç€ä½ ä¸å¿…è®°ä½ä»»ä½• URL æ¥åˆ©ç”¨ä½ å–œæ¬¢çš„ç¤¾åŒºæˆ–é¡¹ç›®æ¨¡æ¿ã€‚\nä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤æ¥æœç´¢å’Œå‘ç°æ¨¡æ¿ã€‚\n$ faas-cli template store list $ faas-cli template store list -v  NAME SOURCE DESCRIPTION csharp openfaas Classic C# template dockerfile openfaas Classic Dockerfile template go openfaas Classic Golang template ... ä¸ºäº†è·å¾—æ›´å¤šçš„ç»†èŠ‚ï¼Œä½ å¯ä»¥ä½¿ç”¨--verboseæ ‡å¿—ï¼Œæˆ–è€…describeå‘½ä»¤ã€‚\nè®©æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªå…·æœ‰ HTTP æ ¼å¼çš„ Golang æ¨¡æ¿ã€‚\nfaas-cli template store list | grep golang  golang-http openfaas Golang HTTP template golang-middleware openfaas Golang Middleware template ç„¶åæŸ¥çœ‹å…¶ä¸Šæ¸¸ä»“åº“ã€‚\n$ faas-cli template store describe golang-http  Name: golang-http Platform: x86_64 Language: Go Source: openfaas Description: Golang HTTP template Repository: https://github.com/openfaas/golang-http-template Official Template: true æŠŠæ¨¡æ¿æ‹‰ä¸‹æ¥ã€‚\nfaas-cli template store pull golang-http ç°åœ¨ä½ å¯ä»¥é€šè¿‡è¾“å…¥ä»¥ä¸‹å†…å®¹ç”¨è¿™ä¸ªæ¨¡æ¿åˆ›å»ºä¸€ä¸ªå‡½æ•°ã€‚\nbash faas-cli new \u0026ndash;lang golang-http NAME\n ä¸ºäº†æ¯”è¿è¡Œ`faas-cli template store pull golang-http`æ¥åˆ›å»ºå‡½æ•°æ›´å®¹æ˜“ï¼Œä½ å¯ä»¥åœ¨ä½ çš„stack.ymlæ–‡ä»¶ä¸­é™„åŠ ä»¥ä¸‹å†…å®¹ã€‚  ```yaml configuration:  templates:  - name: golang-http ç„¶åè¿è¡Œä»¥ä¸‹å†…å®¹ï¼Œè€Œä¸æ˜¯æŒ‡å®šæ¨¡æ¿åç§°ã€‚\nfaas-cli template store pull ä¹Ÿè¯·å‚è§ã€‚\n OpenFaaS YAML å‚è€ƒæŒ‡å— å‡½æ•°ä¸æ¨¡æ¿å­˜å‚¨  YAML æ–‡ä»¶ä¸­çš„å˜é‡æ›¿æ¢ï¼ˆå¯é€‰ç»ƒä¹ ) ç”¨äºé…ç½® CLI çš„.ymlæ–‡ä»¶èƒ½å¤Ÿè¿›è¡Œå˜é‡æ›¿æ¢ï¼Œè¿™æ ·ä½ å°±èƒ½å¤Ÿä½¿ç”¨åŒä¸€ä¸ª.ymlæ–‡ä»¶è¿›è¡Œå¤šç§é…ç½®ã€‚\nå…¶ä¸­ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œå½“å¼€å‘å’Œç”Ÿäº§å›¾åƒæœ‰ä¸åŒçš„æ³¨å†Œè¡¨æ—¶ï¼Œè¿™å°±å¾ˆæœ‰ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨å˜é‡æ›¿æ¢ï¼Œä½¿æœ¬åœ°å’Œæµ‹è¯•ç¯å¢ƒä½¿ç”¨é»˜è®¤è´¦æˆ·ï¼Œè€Œ CI æœåŠ¡å™¨å¯ä»¥è¢«é…ç½®ä¸ºä½¿ç”¨ç”Ÿäº§è´¦æˆ·ã€‚\n è¿™æ˜¯ç”±[envsubst åº“]ï¼ˆhttps://github.com/drone/envsubstï¼‰æä¾›çš„ã€‚éµå¾ªè¯¥é“¾æ¥å¯ä»¥çœ‹åˆ°æ”¯æŒçš„å˜é‡çš„ä¾‹å­\n ç¼–è¾‘ä½ çš„astronaut-finder.ymlä»¥åŒ¹é…ä»¥ä¸‹å†…å®¹ã€‚\n astronaut-finder:  lang: python3  handler: ./astronaut-finder  image: ${DOCKER_USER:-development}/astronaut-finder  environment:  write_debug: true ä½ ä¼šæ³¨æ„åˆ°imageå±æ€§å·²è¢«æ›´æ–°ï¼ŒåŒ…æ‹¬ä¸€ä¸ªå˜é‡å®šä¹‰ï¼ˆDOCKER_USERï¼‰ã€‚è¯¥å€¼å°†è¢«æ›¿æ¢ä¸ºåŒåçš„ç¯å¢ƒå˜é‡çš„å€¼ã€‚å¦‚æœç¯å¢ƒå˜é‡ä¸å­˜åœ¨ï¼Œæˆ–ä¸ºç©ºï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼ï¼ˆdevelopmentï¼‰ã€‚\nè¯¥å˜é‡å°†åœ¨æ•´ä¸ªæ–‡ä»¶ä¸­è¢«æ›¿æ¢æˆè¯¥å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ çš„.ymlæ–‡ä»¶ä¸­æœ‰å‡ ä¸ªå‡½æ•°ï¼Œæ‰€æœ‰å¯¹DOCKER_USERå˜é‡çš„å¼•ç”¨å°†è¢«æ›¿æ¢ä¸ºè¯¥ç¯å¢ƒå˜é‡çš„å€¼\nè¿è¡Œä¸‹é¢çš„å‘½ä»¤å¹¶è§‚å¯Ÿè¾“å‡ºã€‚\nfaas-cli build -f ./astronaut-finder.ymlã€‚\nè¾“å‡ºåº”è¯¥æ˜¾ç¤ºï¼Œæ„å»ºçš„é•œåƒè¢«æ ‡è®°ä¸ºdevelopment/astronaut-finder:latestã€‚\nç°åœ¨ï¼Œå°†ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºä½ çš„ Docker Hub è´¦æˆ·åï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ OpenFaaS çš„ functionè´¦æˆ·ï¼‰ã€‚\nexport DOCKER_USER=functions è¿è¡Œä¸ä¹‹å‰ç›¸åŒçš„æ„å»ºå‘½ä»¤ï¼Œè§‚å¯Ÿè¾“å‡ºã€‚\nfaas-cli build -f ./astronaut-finder.ymlã€‚\nç°åœ¨è¾“å‡ºåº”è¯¥æ˜¾ç¤ºï¼Œé•œåƒæ˜¯ç”¨æ›´æ–°çš„æ ‡ç­¾ functions/astronaut-finder:latestæ„å»ºçš„ã€‚\nè‡ªå®šä¹‰äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸ºå‡½æ•°(å¯é€‰ç»ƒä¹ ) è‡ªå®šä¹‰äºŒè¿›åˆ¶æ–‡ä»¶æˆ–å®¹å™¨å¯ä»¥ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œä½†å¤§å¤šæ•°æ—¶å€™ï¼Œä½¿ç”¨è¯­è¨€æ¨¡æ¿åº”è¯¥æ¶µç›–æ‰€æœ‰æœ€å¸¸è§çš„æƒ…å†µã€‚\nä¸ºäº†ä½¿ç”¨è‡ªå®šä¹‰äºŒè¿›åˆ¶æ–‡ä»¶æˆ– Dockerfileï¼Œä½¿ç”¨dockerfileè¯­è¨€åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚\nfaas-cli new --lang dockerfile sorter --prefix=\u0026#34;\u0026lt;your-docker-username-here\u0026gt;\u0026#34; ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªåä¸º sorterå’Œ sorter.ymlçš„æ–‡ä»¶å¤¹è¢«åˆ›å»ºã€‚\nç¼–è¾‘sorter/Dockerfileå¹¶æ›´æ–°è®¾ç½®fprocess'çš„é‚£ä¸€è¡Œã€‚è®©æˆ‘ä»¬æŠŠå®ƒæ”¹æˆå†…ç½®çš„bashå‘½ä»¤sort`ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨æŒ‰å­—æ¯æ•°å­—é¡ºåºè¿›è¡Œæ’åºã€‚\nENV fprocess=\u0026#34;sort\u0026#34;ç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚\nfaas-cli up -f sorter.yml ç°åœ¨é€šè¿‡ç”¨æˆ·ç•Œé¢æˆ– CLI æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚\n$ echo -n \u0026#39; elephant zebra horse aardvark monkey\u0026#39;| faas-cli invoke sorter  aardvark elephant horse monkey zebra åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†BusyBoxä¸­çš„sortï¼Œå®ƒæ˜¯å†…ç½®çš„å‡½æ•°ã€‚è¿˜æœ‰å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤ï¼Œå¦‚sha512sumï¼Œç”šè‡³æ˜¯bashæˆ– shell è„šæœ¬ï¼Œä½†ä½ å¹¶ä¸å±€é™äºè¿™äº›å†…ç½®å‘½ä»¤ã€‚ä»»ä½•äºŒè¿›åˆ¶æˆ–ç°æœ‰çš„å®¹å™¨éƒ½å¯ä»¥é€šè¿‡æ·»åŠ  OpenFaaS å‡½æ•°çœ‹é—¨ç‹—è€Œæˆä¸ºæ— æœåŠ¡å™¨å‡½æ•°ã€‚\n æç¤ºï¼šä½ çŸ¥é“ OpenFaaS ä¹Ÿæ”¯æŒ Windows äºŒè¿›åˆ¶æ–‡ä»¶å—ï¼Ÿæ¯”å¦‚ C#ã€VB æˆ– PowerShellï¼Ÿ\n ç°åœ¨è¿›å…¥å®éªŒå®¤ 4\n","permalink":"https://zhenfeng-zhu.github.io/post/openfaas-workshop-lab3/","summary":"å®éªŒ 3\u0026ndash;å‡½æ•°ä»‹ç» åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚\n$ mkdir -p lab3\\`s  \u0026amp;\u0026amp; cd lab3 åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•° æœ‰ä¸¤ç§æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚\n ä½¿ç”¨ä¸€ä¸ªå†…ç½®çš„æˆ–ç¤¾åŒºçš„ä»£ç æ¨¡æ¿å»ºç«‹ä¸€ä¸ªå‡½æ•°ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶å¹¶å°†å…¶ä½œä¸ºä½ çš„å‡½æ•°ï¼ˆé«˜çº§ï¼‰  æ„å»ºæˆ–ç”Ÿæˆä¸€ä¸ªæ–°å‡½æ•° åœ¨ç”¨æ¨¡æ¿åˆ›å»ºæ–°å‡½æ•°ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ ä» GitHub ä¸Šæå–äº†æ¨¡æ¿ã€‚\n$ faas-cli template pull  Fetch templates from repository: https://github.com/openfaas/templates.git  Attempting to expand templates from https://github.com/openfaas/templates.git 2021/08/25 15:58:10 Fetched 13 template(s) : [csharp dockerfile go java11 java11-vert-x node node12 node14 php7 python python3 python3-debian ruby] from https://github.com/openfaas/templates.git ä¹‹åï¼Œè¦æƒ³çŸ¥é“å“ªäº›è¯­è¨€æ˜¯å¯ç”¨çš„ï¼Œè¯·é”®å…¥ã€‚\n$ faas-cli new --list Languages available as templates: - csharp - dockerfile - go - java11 - java11-vert-x - node - node12 - node14 - php7 - python - python3 - python3-debian - ruby æˆ–è€…åˆ›å»ºä¸€ä¸ªåŒ…å«Dockerfileçš„æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨ YAML æ–‡ä»¶ä¸­é€‰æ‹© Dockerfileè¯­è¨€ç±»å‹ã€‚","title":"openfaas-workshop-lab3"},{"content":"ä»Šå¤©å¤§å¤šæ•°å…¬å¸åœ¨å¼€å‘åº”ç”¨ç¨‹åºå¹¶å°†å…¶éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„æ—¶å€™ï¼Œæ— è®ºæ˜¯é€‰æ‹©å…¬æœ‰äº‘è¿˜æ˜¯ç§æœ‰çš„æ•°æ®ä¸­å¿ƒï¼Œéƒ½éœ€è¦æå‰äº†è§£ç©¶ç«Ÿéœ€è¦å¤šå°‘å°æœåŠ¡å™¨ã€å¤šå¤§å®¹é‡çš„å­˜å‚¨å’Œæ•°æ®åº“çš„åŠŸèƒ½ç­‰ã€‚å¹¶éœ€è¦éƒ¨ç½²è¿è¡Œåº”ç”¨ç¨‹åºå’Œä¾èµ–çš„è½¯ä»¶åˆ°åŸºç¡€è®¾æ–½ä¹‹ä¸Šã€‚å‡è®¾æˆ‘ä»¬ä¸æƒ³åœ¨è¿™äº›ç»†èŠ‚ä¸ŠèŠ±è´¹ç²¾åŠ›ï¼Œæ˜¯å¦æœ‰ä¸€ç§ç®€å•çš„æ¶æ„æ¨¡å‹èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬è¿™ç§æƒ³æ³•ï¼Ÿè¿™ä¸ªç­”æ¡ˆå·²ç»å­˜åœ¨ï¼Œè¿™å°±æ˜¯ä»Šå¤©è½¯ä»¶æ¶æ„ä¸–ç•Œä¸­æ–°é²œä½†æ˜¯å¾ˆçƒ­é—¨çš„ä¸€ä¸ªè¯é¢˜â€”â€”Serverlessï¼ˆæ— æœåŠ¡å™¨ï¼‰æ¶æ„ã€‚\nç›®å‰å·²ç»æœ‰ä¸€æ‰¹ä¼˜ç§€çš„ serverless æ¶æ„å¼€æºé¡¹ç›®ï¼ŒOpenFaas å°±æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ã€‚å¥ˆä½•å…¶ä¸­çš„ä¸­æ–‡èµ„æ–™æ¯”è¾ƒå°‘ï¼Œæˆ‘ä¹Ÿæ˜¯è¾¹å­¦è¾¹ç¿»è¯‘ï¼Œå¸Œæœ›èƒ½å¤ŸæŠ›ç –å¼•ç‰ï¼ŒåŠ©åŠ› serverless çš„å‘å±•ã€‚\nè¿™æ˜¯ä¸€ä¸ªè‡ªå­¦ç ”è®¨ä¼šï¼Œå­¦ä¹ å¦‚ä½•æ„å»ºã€éƒ¨ç½²å’Œè¿è¡Œ OpenFaas å‡½æ•°ã€‚\nLab1 - OpenFaas çš„å‡†å¤‡å·¥ä½œ OpenFaas å¯ä»¥åœ¨ Docker Swarm å’Œ Kubernetes çš„è¿‡å‡ ä¸ªä¸»è¦å¹³å°ä¹‹ä¸Šè¿è¡Œã€‚åœ¨æ­¤æ•™ç¨‹é‡Œï¼Œæˆ‘ä»¬å°†ä¼šåœ¨çš„æ‚¨æœ¬åœ°ç”µè„‘ä½¿ç”¨ Docker Swarm æ¥å…¥é—¨ã€‚\né¢„å¤‡æ¡ä»¶ Docker Mac\n Docker CE for Mac Edge Edition  Windows\n ä»…é’ˆå¯¹ windows10 ä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆ å®‰è£…Docker CE for Windows å®‰è£…Git Bash   å¤‡æ³¨ï¼šæ‰€æœ‰æ­¥éª¤ä¸­è¯·ä½¿ç”¨ Git Bashï¼šä¸è¦å°è¯•ä½¿ç”¨ WSL æˆ– Bash for Windowsã€‚\n Linux - Ubuntu æˆ– Debian\n Docker CE for Linux   ä½ å¯ä»¥ä»Docker Storeä¸­å®‰è£… Docker CE\n è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹çš„ Docker Swarm OpenFaas åœ¨ Docker Swarm å’Œ Kubernetes ä¸Šå·¥ä½œã€‚å› ä¸º Docker Swarm å¾ˆå®¹æ˜“è®¾ç½®ï¼Œæ‰€ä»¥åœ¨æ­¤ Workshop ä¸­æˆ‘ä»¬ä½¿ç”¨ Docker Swarmã€‚åœ¨æ–‡æ¡£ä¸­æœ‰ä»–ä»¬ä¸¤ä¸ªçš„æŒ‡å—ã€‚\nåœ¨ä½ çš„ç¬”è®°æœ¬æˆ–è™šæ‹Ÿæœºä¸­è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹çš„ Docker Swarmï¼š\ndocker swarm init  å¦‚æœè¿è¡Œæ­¤å‘½ä»¤å‡ºé”™ï¼ŒåŠ ä¸Š \u0026ndash;advertise-addr ä½ çš„ IP å‚æ•°ã€‚\n Docker Hub æ³¨å†Œä¸€ä¸ª Docker Hub è´¦å·ã€‚Docker Hub å…è®¸ä½ åœ¨äº’è”ç½‘ä¸­å‘å¸ƒè‡ªå·±çš„ Docker é•œåƒæ¥ç”¨äºå¤šèŠ‚ç‚¹é›†ç¾¤æˆ–ç¤¾åŒºå…±äº«ã€‚åœ¨ Workshop ä¸­æˆ‘ä»¬ä½¿ç”¨ Docker Hub å‘å¸ƒå‡½æ•°ã€‚\nä½ å¯ä»¥åœ¨è¿™é‡Œæ³¨å†Œï¼šDocker Hub\n å¤‡æ³¨ï¼šDocker Hub ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºè‡ªåŠ¨æ„å»ºé•œåƒã€‚\n æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ–è€… Git Bash çª—å£ï¼Œç„¶åä½¿ç”¨ä¸Šé¢æ³¨å†Œçš„ç”¨æˆ·åç™»é™† Docker Hubã€‚\ndocker login OpenFaas CLI ä½ å¯ä»¥åœ¨ mac ä¸Šä½¿ç”¨ brew æˆ–è€…åœ¨ Linu å’Œ mac ä¸Šä½¿ç”¨ä¸€ä¸ªé›†æˆè„šæœ¬æ¥å®‰è£… OpenFaas CLIã€‚\nåœ¨ Mac æˆ– Linux ä¸Šç»ˆç«¯ä¸­è¾“å…¥ï¼š\ncurl -sL cli.openfaas.com | sudo sh å¯¹äº windows å¹³å°ï¼Œä»releases pageä¸­ä¸‹è½½æœ€æ–°çš„çš„ faas-cli.exeã€‚ä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ª local æ–‡ä»¶å¤¹æˆ–è€…åœ¨ C:\\Windows\\è·¯å¾„ä¸­ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ã€‚\n å¦‚æœä½ æ˜¯ä¸€ä¸ªé«˜çº§ Windows ç”¨æˆ·ï¼ŒæŠŠ CLI æ”¾åœ¨ä½ è‡ªå®šä¹‰çš„æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åæŠŠæ­¤æ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ã€‚\n æˆ‘ä»¬å°†ä¼šä½¿ç”¨ faas-åˆ›å»ºæ–°å‡½æ•°çš„è„šæ‰‹æ¶ï¼Œbuildï¼Œdeploy å’Œ invoke å‡½æ•°ã€‚ä½ å¯ä»¥ä» faas-cli â€”help ä¸­æ‰¾åˆ°è¿™äº›å‘½ä»¤ã€‚\næµ‹è¯• faas-cli\næ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ– Git Bash çª—å£ï¼Œç„¶åè¾“å…¥ï¼š\nfaas-cli help faas-cli version éƒ¨ç½² OpenFaas å‘å¸ƒ OpenFaas çš„è¯´æ˜æ–‡æ¡£ä¿®æ”¹äº†å¾ˆå¤šæ¬¡ï¼Œå› ä¸ºæˆ‘ä»¬åŠªåŠ›ä½¿ä»–ç®€å•ã€‚æ¥ä¸‹æ¥å°†ä¼šåœ¨ 60 ç§’å·¦å³çš„æ—¶é—´ä½¿å¾— OpenFaas éƒ¨ç½²èµ·æ¥ã€‚\n é¦–å…ˆ clone é¡¹ç›®  git clone https://github.com/openfaas/faas  ç„¶åä½¿ç”¨ git æ£€å‡ºåˆ°æœ€æ–°ç‰ˆæœ¬  $ cd faas \u0026amp;\u0026amp; \\  git checkout master  å¤‡æ³¨ï¼šä½ ä¹Ÿå¯ä»¥åœ¨project release pageä¸­æ‰¾åˆ°æœ€æ–°å¯¼å…¥ release ç‰ˆæœ¬ã€‚\n  ç°åœ¨ä½¿ç”¨ Docker Swarm éƒ¨ç½² stack  ./deploy_stack.sh ä½ ç°åœ¨åº”è¯¥å·²ç»æŠŠ OpenFaas éƒ¨ç½²äº†ã€‚\nå¦‚æœä½ ç°åœ¨åœ¨ä¸€ä¸ªå…±äº« WIFI è¿æ¥ä¸­ï¼Œå®ƒå°†ä¼šéœ€è¦å‡ åˆ†é’Ÿæ—¶é—´æ‹‰å–é•œåƒå¹¶å¯åŠ¨ã€‚\nåœ¨æ­¤å±å¹•ä¸Šæ£€æŸ¥æœåŠ¡æ˜¯å¦æ˜¾ç¤ºä¸º 1/1:\ndocker service ls å¦‚æœä½ æœŸé—´æœ‰é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·æŸ¥é˜… Docker Swarm çš„Â éƒ¨ç½²æŒ‡å—ã€‚\nç°åœ¨è¿›å…¥Lab 2ã€‚\næœªå®Œå¾…ç»­ ","permalink":"https://zhenfeng-zhu.github.io/post/workshop-lab1/","summary":"ä»Šå¤©å¤§å¤šæ•°å…¬å¸åœ¨å¼€å‘åº”ç”¨ç¨‹åºå¹¶å°†å…¶éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„æ—¶å€™ï¼Œæ— è®ºæ˜¯é€‰æ‹©å…¬æœ‰äº‘è¿˜æ˜¯ç§æœ‰çš„æ•°æ®ä¸­å¿ƒï¼Œéƒ½éœ€è¦æå‰äº†è§£ç©¶ç«Ÿéœ€è¦å¤šå°‘å°æœåŠ¡å™¨ã€å¤šå¤§å®¹é‡çš„å­˜å‚¨å’Œæ•°æ®åº“çš„åŠŸèƒ½ç­‰ã€‚å¹¶éœ€è¦éƒ¨ç½²è¿è¡Œåº”ç”¨ç¨‹åºå’Œä¾èµ–çš„è½¯ä»¶åˆ°åŸºç¡€è®¾æ–½ä¹‹ä¸Šã€‚å‡è®¾æˆ‘ä»¬ä¸æƒ³åœ¨è¿™äº›ç»†èŠ‚ä¸ŠèŠ±è´¹ç²¾åŠ›ï¼Œæ˜¯å¦æœ‰ä¸€ç§ç®€å•çš„æ¶æ„æ¨¡å‹èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬è¿™ç§æƒ³æ³•ï¼Ÿè¿™ä¸ªç­”æ¡ˆå·²ç»å­˜åœ¨ï¼Œè¿™å°±æ˜¯ä»Šå¤©è½¯ä»¶æ¶æ„ä¸–ç•Œä¸­æ–°é²œä½†æ˜¯å¾ˆçƒ­é—¨çš„ä¸€ä¸ªè¯é¢˜â€”â€”Serverlessï¼ˆæ— æœåŠ¡å™¨ï¼‰æ¶æ„ã€‚\nç›®å‰å·²ç»æœ‰ä¸€æ‰¹ä¼˜ç§€çš„ serverless æ¶æ„å¼€æºé¡¹ç›®ï¼ŒOpenFaas å°±æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ã€‚å¥ˆä½•å…¶ä¸­çš„ä¸­æ–‡èµ„æ–™æ¯”è¾ƒå°‘ï¼Œæˆ‘ä¹Ÿæ˜¯è¾¹å­¦è¾¹ç¿»è¯‘ï¼Œå¸Œæœ›èƒ½å¤ŸæŠ›ç –å¼•ç‰ï¼ŒåŠ©åŠ› serverless çš„å‘å±•ã€‚\nè¿™æ˜¯ä¸€ä¸ªè‡ªå­¦ç ”è®¨ä¼šï¼Œå­¦ä¹ å¦‚ä½•æ„å»ºã€éƒ¨ç½²å’Œè¿è¡Œ OpenFaas å‡½æ•°ã€‚\nLab1 - OpenFaas çš„å‡†å¤‡å·¥ä½œ OpenFaas å¯ä»¥åœ¨ Docker Swarm å’Œ Kubernetes çš„è¿‡å‡ ä¸ªä¸»è¦å¹³å°ä¹‹ä¸Šè¿è¡Œã€‚åœ¨æ­¤æ•™ç¨‹é‡Œï¼Œæˆ‘ä»¬å°†ä¼šåœ¨çš„æ‚¨æœ¬åœ°ç”µè„‘ä½¿ç”¨ Docker Swarm æ¥å…¥é—¨ã€‚\né¢„å¤‡æ¡ä»¶ Docker Mac\n Docker CE for Mac Edge Edition  Windows\n ä»…é’ˆå¯¹ windows10 ä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆ å®‰è£…Docker CE for Windows å®‰è£…Git Bash   å¤‡æ³¨ï¼šæ‰€æœ‰æ­¥éª¤ä¸­è¯·ä½¿ç”¨ Git Bashï¼šä¸è¦å°è¯•ä½¿ç”¨ WSL æˆ– Bash for Windowsã€‚\n Linux - Ubuntu æˆ– Debian\n Docker CE for Linux   ä½ å¯ä»¥ä»Docker Storeä¸­å®‰è£… Docker CE","title":"è¯‘ï¼šopenfaas-workshop-Lab1"},{"content":"å¯¹äº mac ç¯å¢ƒæ¥è®²ï¼Œé¦–å…ˆå®‰è£…æ–°ç‰ˆ docker:\nbrew cask install docker ç„¶åå¯åŠ¨ dockerã€‚\nå‘½ä»¤è¡Œç™»é™† docker hub\ndocker login å¯åŠ¨ docker swarm\ndocker swarm init å®‰è£… faas-cli\nbrew install faas-cli clone ä¸‹æ¥ä»£ç ï¼š\ngit clone https://github.com/openfaas/faas ç„¶åæ‰§è¡Œ\n./deploy_stack.sh éƒ¨ç½²ä¸€äº›ç¤ºä¾‹\nfaas-cli deploy -f https://raw.githubusercontent.com/openfaas/faas/master/stack.yml ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:8080 å°±å¯ä»¥çœ‹åˆ° ui ç•Œé¢äº†ã€‚\nå®‰è£… grafana è¿›è¡Œç›‘æ§\ndocker service create -d \\ --name=grafana \\ --publish=3000:3000 \\ --network=func_functions \\ stefanprodan/faas-grafana:4.6.3 æµè§ˆå™¨æ‰“å¼€ï¼š http://127.0.0.1:3000 ç™»é™† admin admin æŸ¥çœ‹ã€‚\nå¸¸ç”¨å‘½ä»¤ï¼š\nfaas-cli new --list faas-cli build -f ./hello-openfaas.yml faas-cli push -f ./hello-openfaas.yml faas-cli deploy -f ./hello-openfaas.yml ","permalink":"https://zhenfeng-zhu.github.io/post/openfaas/","summary":"å¯¹äº mac ç¯å¢ƒæ¥è®²ï¼Œé¦–å…ˆå®‰è£…æ–°ç‰ˆ docker:\nbrew cask install docker ç„¶åå¯åŠ¨ dockerã€‚\nå‘½ä»¤è¡Œç™»é™† docker hub\ndocker login å¯åŠ¨ docker swarm\ndocker swarm init å®‰è£… faas-cli\nbrew install faas-cli clone ä¸‹æ¥ä»£ç ï¼š\ngit clone https://github.com/openfaas/faas ç„¶åæ‰§è¡Œ\n./deploy_stack.sh éƒ¨ç½²ä¸€äº›ç¤ºä¾‹\nfaas-cli deploy -f https://raw.githubusercontent.com/openfaas/faas/master/stack.yml ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:8080 å°±å¯ä»¥çœ‹åˆ° ui ç•Œé¢äº†ã€‚\nå®‰è£… grafana è¿›è¡Œç›‘æ§\ndocker service create -d \\ --name=grafana \\ --publish=3000:3000 \\ --network=func_functions \\ stefanprodan/faas-grafana:4.6.3 æµè§ˆå™¨æ‰“å¼€ï¼š http://127.0.0.1:3000 ç™»é™† admin admin æŸ¥çœ‹ã€‚\nå¸¸ç”¨å‘½ä»¤ï¼š\nfaas-cli new --list faas-cli build -f .","title":"openfaas"},{"content":"Spring web mvcï¼š ä¼ ç»Ÿ servlet web\nspring web fluxï¼š Reactive web\n ç¼–ç¨‹æ¨¡å¼ï¼š non-blocking éé˜»å¡  nioï¼šåŒæ­¥ï¼Ÿå¼‚æ­¥ï¼Ÿ   å¹¶è¡Œæ¨¡å‹  sync åŒæ­¥ async å¼‚æ­¥    Reactive æ¦‚å¿µ Reactive programmingï¼š å“åº”å¼ç¼–ç¨‹\nInÂ computing,Â reactive programmingÂ is a declarativeÂ programming paradigmÂ concerned withÂ data streamsÂ and the propagation of change. With this paradigm it is possible to express static (e.g. arrays) or dynamic (e.g. event emitters)Â data streamsÂ with ease, and also communicate that an inferred dependency within the associatedÂ execution modelÂ exists, which facilitates the automatic propagation of the changed data flow.\nå®ç°æ¡†æ¶   RxJava\nReactiveX is a library for composing asynchronous and event-based programs by using observable sequences.\nè¿™ç§å°±æ˜¯æ¨çš„æ¨¡å¼\nint[] a=[1, 2, 3]  for(int i: a){  } package com.reactive.demo.reactivedemo;  import java.util.Observable;  /**  * todo  *  * @author zhuzhenfeng  * @date 2018/6/23  */ public class ObserverPatternDemo {  public static void main(String[] args) {  MyObservable observable = new MyObservable();   // 1 observable nä¸ªobserver   observable.addObserver((o, value) -\u0026gt; {  System.out.println(\u0026#34;1 æ”¶åˆ°æ•°æ®æ›´æ–°\u0026#34; + value);  });   observable.addObserver((o, value) -\u0026gt; {  System.out.println(\u0026#34;2 æ”¶åˆ°æ•°æ®æ›´æ–°\u0026#34; + value);  });   observable.setChanged();   observable.notifyObservers(\u0026#34;hello world\u0026#34;);// push data å‘å¸ƒæ•°æ®    }   public static class MyObservable extends Observable {  @Override  protected synchronized void setChanged() {  super.setChanged();  }  } } /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/bin/java \u0026#34;- 2 æ”¶åˆ°æ•°æ®æ›´æ–°hello world 1 æ”¶åˆ°æ•°æ®æ›´æ–°hello world  Process finished with exit code 0 å½“æ—¶ä¸é˜»å¡ï¼Œåç»­å›è°ƒã€‚éé˜»å¡åŸºæœ¬ä¸Šé‡‡ç”¨ callback çš„å½¢å¼ã€‚\nå¯¹äº java æ¥è®²ï¼Œå¼‚æ­¥ä»£è¡¨åˆ‡æ¢äº†çº¿ç¨‹ã€‚\nå½“å‰çš„å®ç°ï¼š åŒæ­¥+éé˜»å¡\nå¦‚æœæ˜¯åˆ‡æ¢äº†çº¿ç¨‹ï¼Œä»£è¡¨æ˜¯å¼‚æ­¥ çš„éé˜»å¡ï¼Œä¸€èˆ¬æ˜¯ gui ç¨‹åºçš„ã€‚\n  Reactor\n  ç‰¹æ€§  å¼‚æ­¥ éé˜»å¡ äº‹ä»¶é©±åŠ¨ å¯èƒ½æœ‰èƒŒå‹ backpressure é˜²æ­¢å›è°ƒåœ°ç‹±  Reactive ä½¿ç”¨åœºæ™¯ Long Live æ¨¡å¼ï¼š netty çš„ io è¿æ¥ï¼ˆrpcï¼‰ timeout\nshort live æ¨¡å¼ï¼šä¸å¤ªé€‚åˆ Reactive webï¼Œå› ä¸ºè¿™æ˜¯ç­‰å¾…ã€‚åªæ˜¯ä¼šå¿«é€Ÿè¿”å›ï¼Œä½†æ˜¯å¹¶ä¸ä¼šç»™ä½ çœŸæ­£çš„ç»“æœã€‚çŸ­é¢‘å¿«çš„è¿æ¥ï¼Œä¸å¤ªæœ‰ç”¨æ­¦ä¹‹åœ°ã€‚\n http http è¶…æ—¶æ—¶é—´  Reactive ç†è§£è¯¯åŒº webï¼šå¿«é€Ÿå“åº”\n200 Q-\u0026gt;200 T -\u0026gt; 50T\n1-50\nTomcat connector thread pool(200)-\u0026gt;reactive thread pool(50)\nio è¿æ¥ä» Tomcat-\u0026gt;Reactive\nè¿æ¥\nReactive thread poolï¼ˆ50ï¼‰\nä¸å¤ªé€‚åˆ web è¯·æ±‚ã€‚\nwebflux å…¶å®å¹¶ä¸ä¼šæå‡æ€§èƒ½ã€‚\nå°‘é‡çš„çº¿ç¨‹ï¼Œå°‘é‡çš„å†…å­˜æ¥åšæ›´å¥½çš„ä¼¸ç¼©æ€§ï¼Œè€Œå¹¶ä¸æ˜¯ä¸ºäº†æå‡æ›´å¥½çš„æ€§èƒ½ã€‚ä½¿ç”¨ Reactive åªä¼šæ˜¯ä½¿å•ä½æ—¶é—´å†…æ¥å—è¯·æ±‚çš„æ•°é‡å¢åŠ ï¼Œå•ä½æ—¶é—´å†…çš„å¤„ç†è¯·æ±‚çš„æ•°é‡ä¸‹é™ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/java-reactive-web/","summary":"Spring web mvcï¼š ä¼ ç»Ÿ servlet web\nspring web fluxï¼š Reactive web\n ç¼–ç¨‹æ¨¡å¼ï¼š non-blocking éé˜»å¡  nioï¼šåŒæ­¥ï¼Ÿå¼‚æ­¥ï¼Ÿ   å¹¶è¡Œæ¨¡å‹  sync åŒæ­¥ async å¼‚æ­¥    Reactive æ¦‚å¿µ Reactive programmingï¼š å“åº”å¼ç¼–ç¨‹\nInÂ computing,Â reactive programmingÂ is a declarativeÂ programming paradigmÂ concerned withÂ data streamsÂ and the propagation of change. With this paradigm it is possible to express static (e.g. arrays) or dynamic (e.g. event emitters)Â data streamsÂ with ease, and also communicate that an inferred dependency within the associatedÂ execution modelÂ exists, which facilitates the automatic propagation of the changed data flow.","title":"java-reactive-web"},{"content":"å¯åŠ¨ zookeeper\nbin/zookeeper-server-start.sh config/zookeeper.properties å¯åŠ¨ kafka\nbin/kafka-server-start.sh config/server.properties åˆ›å»ºä¸€ä¸ªä¸»é¢˜\nbin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test bin/kafka-topics.sh --list --zookeeper localhost:2181 ç”Ÿäº§è€…\nbin/kafka-console-producer.sh --broker-list localhost:9092 --topic test æ¶ˆè´¹è€…\nbin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning kafka connect\necho -e \u0026#34;zhisheng\\ntian\u0026#34; \u0026gt; test.txt ls\nzhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… echo -e \u0026#34;zhisheng\\ntian\u0026#34; \u0026gt; test.txt  zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… ls LICENSE NOTICE bin config libs logs site-docs test.txt zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… å¯åŠ¨è¿æ¥å™¨\nbin/connect-standalone.sh config/connect-standalone.properties config/connect-file-source.properties config/connect-file-sink.properties ç„¶åå‘ç°å¤šäº†ä¸€ä¸ªæ–‡ä»¶\n/Users/zhuzhenfeng/Documents/software/kafka_2.12-1.1.0 [kafka_2.12-1.1.0] ls 18:25:38 LICENSE NOTICE bin config libs logs site-docs test.sink.txt test.txt [kafka_2.12-1.1.0] ç„¶åæ¶ˆè´¹\n\u0026gt;\u0026gt; bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic connect-test --from-beginning  {\u0026#34;schema\u0026#34;:{\u0026#34;type\u0026#34;:\u0026#34;string\u0026#34;,\u0026#34;optional\u0026#34;:false},\u0026#34;payload\u0026#34;:\u0026#34;zhisheng\u0026#34;} {\u0026#34;schema\u0026#34;:{\u0026#34;type\u0026#34;:\u0026#34;string\u0026#34;,\u0026#34;optional\u0026#34;:false},\u0026#34;payload\u0026#34;:\u0026#34;tian\u0026#34;} {\u0026#34;schema\u0026#34;:{\u0026#34;type\u0026#34;:\u0026#34;string\u0026#34;,\u0026#34;optional\u0026#34;:false},\u0026#34;payload\u0026#34;:\u0026#34;sd\u0026#34;} {\u0026#34;schema\u0026#34;:{\u0026#34;type\u0026#34;:\u0026#34;string\u0026#34;,\u0026#34;optional\u0026#34;:false},\u0026#34;payload\u0026#34;:\u0026#34;sdafasdfasdfdsa\u0026#34;} ","permalink":"https://zhenfeng-zhu.github.io/post/kafka/","summary":"å¯åŠ¨ zookeeper\nbin/zookeeper-server-start.sh config/zookeeper.properties å¯åŠ¨ kafka\nbin/kafka-server-start.sh config/server.properties åˆ›å»ºä¸€ä¸ªä¸»é¢˜\nbin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test bin/kafka-topics.sh --list --zookeeper localhost:2181 ç”Ÿäº§è€…\nbin/kafka-console-producer.sh --broker-list localhost:9092 --topic test æ¶ˆè´¹è€…\nbin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning kafka connect\necho -e \u0026#34;zhisheng\\ntian\u0026#34; \u0026gt; test.txt ls\nzhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… echo -e \u0026#34;zhisheng\\ntian\u0026#34; \u0026gt; test.txt  zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… ls LICENSE NOTICE bin config libs logs site-docs test.txt zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… å¯åŠ¨è¿æ¥å™¨","title":"kafka"},{"content":" å°è¯•ç¿»è¯‘ vertx çš„æ–‡æ¡£ã€‚å°Šé‡åŸæ–‡ï¼Œéƒ¨åˆ†ä½¿ç”¨è‡ªå·±çš„ç†è§£ã€‚\n Vert.x çš„ kotlin åç¨‹æä¾›äº† async/await æˆ–è€…å’Œ go ç±»ä¼¼çš„ channelã€‚è¿™ä½¿å¾—ä½ èƒ½å¤Ÿä»¥ç†Ÿæ‚‰çš„é¡ºåºé£æ ¼å†™å‚ç›´ä»£ç ã€‚\nvertx-lang-kotlin-coroutines é›†æˆäº† kotlin åç¨‹ï¼Œç”¨äºæ‰§è¡Œå¼‚æ­¥æ“ä½œå’Œå¤„ç†äº‹ä»¶ã€‚è¿™æ ·å°±èƒ½å¤Ÿä»¥åŒæ­¥ä»£ç çš„æ¨¡å‹ç¼–å†™ä»£ç ï¼Œè€Œä¸”ä¸ä¼šé˜»å¡å†…æ ¸çº¿ç¨‹ã€‚\nç®€ä»‹ vert.x ä¸è®¸å¤šæ—§çš„åº”ç”¨å¹³å°ç›¸æ¯”çš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿æ˜¯å®ƒå‡ ä¹å®Œå…¨æ˜¯éé˜»å¡çš„ï¼ˆå†…æ ¸çº¿ç¨‹ï¼‰ã€‚è¿™å…è®¸åŸºäº vert.x çš„ç¨‹åºä½¿ç”¨æå°‘æ•°çš„å†…æ ¸çº¿ç¨‹å¤„ç†å¤§é‡çš„å¹¶å‘ï¼ˆä¾‹å¦‚ï¼šè®¸å¤šè¿æ¥å’Œæ¶ˆæ¯ï¼‰ï¼Œå¯ä»¥è·å¾—æ›´å¥½çš„ä¼¸ç¼©æ€§ã€‚\nvert.x çš„éé˜»å¡ç‰¹æ€§å½¢æˆäº†éé˜»å¡ APIã€‚éé˜»å¡ API å¯ä»¥é‡‡ç”¨å¤šç§å½¢å¼æ¥å®ç°ï¼ŒåŒ…æ‹¬å›è°ƒå‡½æ•°ï¼Œpromiseï¼Œfibers æˆ–è€…å“åº”å¼æ‰©å±•ã€‚vert.x çš„æ ¸å¿ƒ API ä½¿ç”¨å›è°ƒå‡½æ•°çš„é£æ ¼ï¼Œä½†æ˜¯å®ƒä¹Ÿæ”¯æŒå…¶ä»–æ¨¡å‹ï¼Œå¦‚ RxJava 1 å’Œ 2ã€‚\nåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨å¼‚æ­¥çš„ API ç¼–ç¨‹å¯èƒ½æ¯”ä½¿ç”¨ç»å…¸çš„é¡ºåºä»£ç é£æ ¼æ›´å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œç‰¹åˆ«æ˜¯éœ€è¦æŒ‰ç…§é¡ºåºå®Œæˆè‹¥å¹²æ“ä½œã€‚å¦å¤–ï¼Œä½¿ç”¨å¼‚æ­¥ API æ—¶ï¼Œé”™è¯¯çš„ä¼ æ’­ä¹Ÿæ›´ä¸ºå¤æ‚ã€‚\nvertx-lang-kotlin-coroutines ä½¿ç”¨åç¨‹ã€‚åç¨‹æ˜¯éå¸¸è½»é‡çº§çš„çº¿ç¨‹ï¼Œè€Œä¸”ä¸ä¸åº•å±‚çš„å†…æ ¸çº¿ç¨‹å¯¹åº”ã€‚æ‰€ä»¥å½“åç¨‹éœ€è¦â€œé˜»å¡â€æ—¶ï¼Œå®ƒä¼šæš‚åœå¹¶é‡Šæ”¾å½“å‰çš„å†…æ ¸çº¿ç¨‹ï¼Œä½¿å¾—å¦ä¸€ä¸ªåç¨‹å¯ä»¥å¤„ç†äº‹ä»¶ã€‚\nvertx-lang-kotlin-coroutines ä½¿ç”¨ kotlinx.coroutines æ¥å®ç°åç¨‹ã€‚\n vertx-lang-kotlin-coroutines ç›®å‰ä»…é€‚ç”¨äº kotlinï¼Œè€Œä¸”æ˜¯ kotlin1.1 çš„ä¸€ä¸ªå®éªŒç‰¹æ€§ã€‚\n ä»ä¸€ä¸ª vertx.x çš„ contex ä¸­å¯åŠ¨åç¨‹ å¯¼å…¥ io.vertx.kotlin.coroutines.VertxCoroutineï¼Œlaunchï¼ˆåç¨‹ç”Ÿæˆå™¨ï¼‰æ–¹æ³•ä¸­å…è®¸è¿è¡Œä¸€æ®µä»£ç ä½œä¸ºå¯ä»¥æš‚åœçš„åç¨‹ï¼š\nval vertx = Vertx.vertx() vertx.deployVerticle(ExampleVerticle())  launch(vertx.dispatcher()) {  val timerId = awaitEvent\u0026lt;Long\u0026gt; { handler -\u0026gt;  vertx.setTimer(1000, handler)  }  println(\u0026#34;Event fired from timer with id ${timerId}\u0026#34;) } vertx.dispatcher()è¿”å›ä¸€ä¸ªä½¿ç”¨ vert.x çš„äº‹ä»¶å¾ªç¯æ‰§è¡Œåç¨‹çš„ disptacherã€‚\nawaitEvent å‡½æ•°æš‚åœåç¨‹çš„æ‰§è¡Œç›´åˆ°å®šæ—¶å™¨è§¦å‘ä¸ºæ­¢ï¼Œå¹¶ä½¿ç”¨èµ‹ç»™ handler çš„å€¼æ¢å¤åç¨‹ã€‚\næœ‰å…³ handlersï¼Œevents å’Œäº‹ä»¶æµçš„æ›´å¤šç»†èŠ‚ï¼Œå°†åœ¨ä¸‹ä¸€èŠ‚ä¸­ç»™å‡ºã€‚\nç»§æ‰¿ CoroutineVerticle ä½ å¯ä»¥å°†ä»£ç éƒ¨ç½²ä¸º io.vertx.kotlin.coroutines.CoroutineVerticle çš„å®ä¾‹ï¼Œè¿™æ˜¯ kotlin åç¨‹çš„ä¸“ç”¨ç±»å‹ã€‚ä½ åº”è¯¥é‡è½½ verticle çš„ start()æ–¹æ³•ï¼Œstop()æ–¹æ³•çš„é‡è½½æ˜¯å¯é€‰çš„ï¼š\nclass MyVerticle : CoroutineVerticle() {  suspend override fun start() {  // ...  } } è·å¾—ä¸€æ¬¡æ€§çš„å¼‚æ­¥ç»“æœ vert.x çš„è®¸å¤šå¼‚æ­¥æ“ä½œéƒ½é‡‡ç”¨ Handler\u0026lt;AsyncResult\u0026lt;T\u0026gt;\u0026gt; ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ã€‚ä¸€ä¸ªä¾‹å­å°±æ˜¯ä½¿ç”¨ vert.x çš„ mongo client æ‰§è¡Œå¯¹è±¡æ£€ç´¢ï¼Œæˆ–è€…æ˜¯å‘é€ä¸€ä¸ªäº‹ä»¶æ€»çº¿æ¶ˆæ¯ä¹‹åç­‰å¾…å›å¤ã€‚\nè¿™æ˜¯é€šè¿‡ awaitResult æ–¹æ³•æ¥å®ç°ï¼Œå®ƒè¿”å›ä¸€ä¸ªå€¼æˆ–è€…æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚\nåç¨‹ä¼šä¸€ç›´å¤„äºæš‚åœçš„çŠ¶æ€çŸ¥é“äº‹ä»¶è¢«å¤„ç†ï¼Œå¹¶ä¸”è¿™æ—¶æ²¡æœ‰å†…æ ¸çº¿ç¨‹è¢«é˜»å¡ã€‚\nThe method is executed by specifying the asynchronous operation that needs to be executed in the form of a block that is passed to the handler at run-time.\nè¿™ä¸ªæ–¹æ³•æ˜¯é€šè¿‡æŒ‡å®šä¸€ä¸ªå¼‚æ­¥æ“ä½œæ¥æ‰§è¡Œï¼Œè¿™ä¸ªå¼‚æ­¥æ“ä½œéœ€è¦ä»¥å—çš„å½¢å¼æ‰§è¡Œï¼Œè€Œè¿™ä¸ªå¼‚æ­¥æ“ä½œå—åœ¨è¿è¡Œæ—¶ä¼šè¢«ä¼ ç»™ handlerã€‚\nè¿™é‡Œæ˜¯ä¸€ä¸ªä¾‹å­ï¼š\nsuspend fun awaitResultExample() {  val consumer = vertx.eventBus().localConsumer\u0026lt;String\u0026gt;(\u0026#34;a.b.c\u0026#34;)  consumer.handler { message -\u0026gt;  println(\u0026#34;Consumer received: ${message.body()}\u0026#34;)  message.reply(\u0026#34;pong\u0026#34;)  }   // Send a message and wait for a reply  val reply = awaitResult\u0026lt;Message\u0026lt;String\u0026gt;\u0026gt; { h -\u0026gt;  vertx.eventBus().send(\u0026#34;a.b.c\u0026#34;, \u0026#34;ping\u0026#34;, h)  }  println(\u0026#34;Reply received: ${reply.body()}\u0026#34;) } å½“æ­¤å—äº§ç”Ÿå¤±è´¥æ—¶ï¼Œè°ƒç”¨è€…å¯ä»¥ä½¿ç”¨ try/catch ç»“æ„å¤„ç†å¼‚å¸¸ã€‚\nsuspend fun awaitResultFailureExample() {  val consumer = vertx.eventBus().localConsumer\u0026lt;String\u0026gt;(\u0026#34;a.b.c\u0026#34;)  consumer.handler { message -\u0026gt;  // The consumer will get a failure  message.fail(0, \u0026#34;it failed!!!\u0026#34;)  }   // Send a message and wait for a reply  try {  val reply: Message\u0026lt;String\u0026gt; = awaitResult\u0026lt;Message\u0026lt;String\u0026gt;\u0026gt; { h -\u0026gt;  vertx.eventBus().send(\u0026#34;a.b.c\u0026#34;, \u0026#34;ping\u0026#34;, h)  }  } catch(e: ReplyException) {  // Handle specific reply exception here  println(\u0026#34;Reply failure: ${e.message}\u0026#34;)  } } è·å–ä¸€æ¬¡æ€§äº‹ä»¶ ä½¿ç”¨ awaitEvent å‡½æ•°å¤„ç†ä¸€æ¬¡æ€§äº‹ä»¶ï¼ˆè€Œä¸æ˜¯ä¸‹ä¸€æ¬¡å‡ºç°çš„äº‹ä»¶ï¼‰ï¼š\nsuspend fun awaitEventExample() {  val id = awaitEvent\u0026lt;Long\u0026gt; { h -\u0026gt; vertx.setTimer(2000L, h) }  println(\u0026#34;This should be fired in 2s by some time with id=$id\u0026#34;) } è·å–ä¸€æ¬¡æ€§ worker çš„ç»“æœ ä½¿ç”¨ awaitBlocking å‡½æ•°å¤„ç†é˜»å¡è®¡ç®—ï¼š\nsuspend fun awaitBlockingExample() {  val s = awaitBlocking\u0026lt;String\u0026gt; {  Thread.sleep(1000)  \u0026#34;some-string\u0026#34;  } } äº‹ä»¶æµ åœ¨ vert.x API çš„å¾ˆå¤šåœ°æ–¹ï¼Œäº‹ä»¶æµéƒ½æ˜¯é€šè¿‡ handler æ¥å¤„ç†ã€‚è¿™äº›ä¾‹å­åŒ…æ‹¬äº‹ä»¶æ¶ˆæ¯æ€»çº¿çš„ä½¿ç”¨è€…å’Œ http æœåŠ¡å™¨çš„è¯·æ±‚ã€‚\nReceiveChannelHandler ç±»å…è®¸é€šè¿‡(suspendable)receive æ–¹æ³•æ¥æ”¶äº‹ä»¶ï¼š\nsuspend fun streamExample() {  val adapter = vertx.receiveChannelHandler\u0026lt;Message\u0026lt;Int\u0026gt;\u0026gt;()  vertx.eventBus().localConsumer\u0026lt;Int\u0026gt;(\u0026#34;a.b.c\u0026#34;).handler(adapter)   // Send 15 messages  for (i in 0..15) vertx.eventBus().send(\u0026#34;a.b.c\u0026#34;, i)   // Receive the first 10 messages  for (i in 0..10) {  val message = adapter.receive()  println(\u0026#34;Received: ${message.body()}\u0026#34;)  } } ç­‰å¾… vert.x çš„ future çš„å®Œæˆ vert.x çš„ future ç±»å®ä¾‹çš„æ‰©å±•æ–¹æ³• awaitï¼Œå¯ä»¥æš‚åœåç¨‹ç›´åˆ°ä»–ä»¬å®Œæˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•è¿”å›ç›¸åº”çš„ AsyncResult\u0026lt;T\u0026gt; å¯¹è±¡ã€‚\nsuspend fun awaitingFuture() {  val httpServerFuture = Future.future\u0026lt;HttpServer\u0026gt;()  vertx.createHttpServer()  .requestHandler { req -\u0026gt; req.response().end(\u0026#34;Hello!\u0026#34;) }  .listen(8000, httpServerFuture)   val httpServer = httpServerFuture.await()  println(\u0026#34;HTTP server port: ${httpServer.actualPort()}\u0026#34;)   val result = CompositeFuture.all(httpServerFuture, httpServerFuture).await()  if (result.succeeded()) {  println(\u0026#34;The server is now running!\u0026#34;)  } else {  result.cause().printStackTrace()  } } é€šé“ channel å’Œ java çš„ BlockingQueue ç±»ä¼¼ï¼Œåªæ˜¯ Channel ä¸ä¼šé˜»å¡è€Œæ˜¯æš‚åœåç¨‹ã€‚\n å°†å€¼å‘é€åˆ°æ»¡äº†çš„ Channel ä¼šæš‚åœåç¨‹ ä»ä¸€ä¸ªç©º Channel ä¸­æ¥æ”¶å€¼ä¹Ÿä¼šæš‚åœåç¨‹  ä½¿ç”¨ toChannel çš„æ‰©å±•æ–¹æ³•å¯ä»¥å°† vert.x çš„ ReadStreamÂ å’ŒÂ WriteStream é€‚é…æˆé€šé“ã€‚\nè¿™äº›é€‚é…å™¨è´Ÿè´£ç®¡ç†èƒŒå‹å’Œæµç»ˆç«¯ï¼š\n ReadStream\u0026lt;T\u0026gt; é€‚é…ä¸º ReceiveChannel\u0026lt;T\u0026gt; WriteStream\u0026lt;T\u0026gt; é€‚é…ä¸º SendChannel\u0026lt;T\u0026gt;  æ¥æ”¶æ•°æ® å½“ä½ éœ€è¦å¤„ç†ä¸€ç³»åˆ—ç›¸å…³å€¼çš„æ—¶å€™ï¼Œchannel å¯èƒ½éå¸¸æœ‰ç”¨ï¼š\nsuspend fun handleTemperatureStream() {  val stream = vertx.eventBus().consumer\u0026lt;Double\u0026gt;(\u0026#34;temperature\u0026#34;)  val channel = stream.toChannel(vertx)   var min = Double.MAX_VALUE  var max = Double.MIN_VALUE   // Iterate until the stream is closed  // Non-blocking  for (msg in channel) {  val temperature = msg.body()  min = Math.min(min, temperature)  max = Math.max(max, temperature)  }   // The stream is now closed } ä»–ä¹Ÿå¯ä»¥ç”¨äºè§£æåè®®ã€‚æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªéé˜»å¡çš„ http è¯·æ±‚è§£æå™¨æ¥å±•ç¤ºé€šé“çš„åŠŸèƒ½ã€‚\næˆ‘ä»¬å°†ä¾é  RecordParser å°†ä»¥\\r \\n åˆ†å‰²çš„ buffer æµè¿›è¡Œåˆ†å‰²ã€‚\nè¿™æ˜¯è§£æå™¨çš„åˆå§‹ç‰ˆæœ¬ï¼Œå®ƒåªå¤„ç† http çš„è¯·æ±‚è¡Œã€‚\nval server = vertx.createNetServer().connectHandler { socket -\u0026gt;   // The record parser provides a stream of buffers delimited by \\r\\n  val stream = RecordParser.newDelimited(\u0026#34;\\r\\n\u0026#34;, socket)   // Convert the stream to a Kotlin channel  val channel = stream.toChannel(vertx)   // Run the coroutine  launch(vertx.dispatcher()) {   // Receive the request-line  // Non-blocking  val line = channel.receive().toString().split(\u0026#34; \u0026#34;)  val method = line[0]  val uri = line[1]   println(\u0026#34;Received HTTP request ($method, $uri)\u0026#34;)   // Still need to parse headers and body...  } } è§£æè¯·æ±‚è¡Œå°±åƒåœ¨ channel ä¸Šè°ƒç”¨ receive ä¸€æ ·ç®€å•ã€‚\nä¸‹ä¸€æ­¥æ˜¯é€šè¿‡æ¥æ”¶å—æ¥è§£æ http å¤´ï¼Œç›´åˆ°æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªç©ºå—ä¸ºæ­¢ã€‚\n// Receive HTTP headers val headers = HashMap\u0026lt;String, String\u0026gt;() while (true) {   // Non-blocking  val header = channel.receive().toString()   // Done with parsing headers  if (header.isEmpty()) {  break  }   val pos = header.indexOf(\u0026#39;:\u0026#39;)  headers[header.substring(0, pos).toLowerCase()] = header.substring(pos + 1).trim() }  println(\u0026#34;Received HTTP request ($method, $uri) with headers ${headers.keys}\u0026#34;) æœ€åï¼Œæˆ‘ä»¬é€šè¿‡å¤„ç†å¯é€‰çš„è¯·æ±‚ä½“æ¥ç»ˆæ­¢è§£æå™¨ã€‚\n// Receive the request body val transferEncoding = headers[\u0026#34;transfer-encoding\u0026#34;] val contentLength = headers[\u0026#34;content-length\u0026#34;]  val body : Buffer? if (transferEncoding == \u0026#34;chunked\u0026#34;) {   // Handle chunked encoding, e.g  // 5\\r\\n  // HELLO\\r\\n  // 0\\r\\n  // \\r\\n   body = Buffer.buffer()  while (true) {   // Parse length chunk  // Non-blocking  val len = channel.receive().toString().toInt(16)  if (len == 0) {  break  }   // The stream is flipped to parse a chunk of the exact size  stream.fixedSizeMode(len + 2)   // Receive the chunk and append it  // Non-blocking  val chunk = channel.receive()  body.appendBuffer(chunk, 0, chunk.length() - 2)   // The stream is flipped back to the \\r\\n delimiter to parse the next chunk  stream.delimitedMode(\u0026#34;\\r\\n\u0026#34;)  } } else if (contentLength != null) {   // The stream is flipped to parse a body of the exact size  stream.fixedSizeMode(contentLength.toInt())   // Non-blocking  body = channel.receive() } else {  body = null }  println(\u0026#34;Received HTTP request ($method, $uri) with headers ${headers.keys}and body with size ${body?.length() ?: 0}\u0026#34;) å‘é€æ•°æ® ä½¿ç”¨ channel å‘é€æ•°æ®ä¹Ÿéå¸¸ç›´æ¥ï¼š\nsuspend fun sendChannel() {  val stream = vertx.eventBus().publisher\u0026lt;Double\u0026gt;(\u0026#34;temperature\u0026#34;)  val channel = stream.toChannel(vertx)   while (true) {  val temperature = readTemperatureSensor()   // Broadcast the temperature  // Non-blocking but could be suspended  channel.send(temperature)   // Wait for one second  awaitEvent\u0026lt;Long\u0026gt; { vertx.setTimer(1000, it) }  } } SendChannel#send å’Œ WriteStream#write éƒ½æ˜¯éé˜»å¡æ“ä½œã€‚ä¸åƒå½“ channel æ»¡çš„æ—¶å€™ SendChannel#send å¯ä»¥åœæ­¢æ‰§è¡Œï¼Œè€Œç­‰æ•ˆ WriteStream#writ çš„æ—  channel æ“ä½œå¯èƒ½åƒè¿™æ ·ï¼š\n// Check we can write in the stream if (stream.writeQueueFull()) {   // We can\u0026#39;t write so we set a drain handler to be called when we can write again  stream.drainHandler { broadcastTemperature() } } else {   // Read temperature  val temperature = readTemperatureSensor()   // Write it to the stream  stream.write(temperature)   // Wait for one second  vertx.setTimer(1000) {  broadcastTemperature()  } } å»¶è¿Ÿï¼Œå–æ¶ˆå’Œè¶…æ—¶ å€ŸåŠ©äº vert.x çš„å®šæ—¶å™¨ï¼Œvert.x çš„è°ƒåº¦å™¨å®Œå…¨æ”¯æŒåç¨‹çš„ delay å‡½æ•°ï¼š\nlaunch(vertx.dispatcher()) {  // Set a one second Vertx timer  delay(1000) } å®šæ—¶å™¨ä¹Ÿæ”¯æŒå–æ¶ˆï¼š\nval job = launch(vertx.dispatcher()) {  // Set a one second Vertx timer  while (true) {  delay(1000)  // Do something periodically  } }  // Sometimes later job.cancel() å–æ¶ˆæ˜¯åˆä½œçš„ã€‚\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ withTimeout å‡½æ•°å®‰æ’è¶…æ—¶ã€‚\nlaunch(vertx.dispatcher()) {  try {  val id = withTimeout\u0026lt;String\u0026gt;(1000) {  return awaitEvent\u0026lt;String\u0026gt; { anAsyncMethod(it) }  }  } catch (e: TimeoutCancellationException) {  // Cancelled  } } Vert.x æ”¯æŒæ‰€æœ‰çš„åç¨‹æ„å»ºå™¨ï¼šlaunchï¼Œasync å’Œ runBlockingã€‚runBlocking æ„å»ºå™¨ä¸èƒ½å† vert.x çš„æ—¶é—´å¾ªç¯çº¿ç¨‹ä¸­ä½¿ç”¨ã€‚\nåç¨‹çš„äº’æ“ä½œæ€§ vert.x é›†æˆåç¨‹è¢«è®¾è®¡ä¸ºå®Œå…¨å¯ä»¥å’Œ kotlin åç¨‹äº’æ“ä½œã€‚\nkotlinx.coroutines.experimental.sync.Mutex è¢«æ‰§è¡Œåœ¨ä½¿ç”¨ vert.x è°ƒåº¦å™¨çš„äº‹ä»¶å¾ªç¯çº¿ç¨‹ã€‚\nRxJava çš„äº’æ“ä½œæ€§ è™½ç„¶ vertx-lang-kotlin-coroutines æ¨¡å—æ²¡æœ‰ä¸ RxJava ç‰¹å®šé›†æˆï¼Œä½†æ˜¯ kotlin åç¨‹æä¾›äº† RxJava çš„é›†æˆã€‚RxJava å¯ä»¥å’Œ vertx-lang-kotlin-coroutines å¾ˆå¥½çš„ååŒå·¥ä½œã€‚\nä½ å¯ä»¥é˜…è¯»å“åº”æµå’Œåç¨‹çš„æŒ‡å—ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/vertx-kotlin-coroutine/","summary":"å°è¯•ç¿»è¯‘ vertx çš„æ–‡æ¡£ã€‚å°Šé‡åŸæ–‡ï¼Œéƒ¨åˆ†ä½¿ç”¨è‡ªå·±çš„ç†è§£ã€‚\n Vert.x çš„ kotlin åç¨‹æä¾›äº† async/await æˆ–è€…å’Œ go ç±»ä¼¼çš„ channelã€‚è¿™ä½¿å¾—ä½ èƒ½å¤Ÿä»¥ç†Ÿæ‚‰çš„é¡ºåºé£æ ¼å†™å‚ç›´ä»£ç ã€‚\nvertx-lang-kotlin-coroutines é›†æˆäº† kotlin åç¨‹ï¼Œç”¨äºæ‰§è¡Œå¼‚æ­¥æ“ä½œå’Œå¤„ç†äº‹ä»¶ã€‚è¿™æ ·å°±èƒ½å¤Ÿä»¥åŒæ­¥ä»£ç çš„æ¨¡å‹ç¼–å†™ä»£ç ï¼Œè€Œä¸”ä¸ä¼šé˜»å¡å†…æ ¸çº¿ç¨‹ã€‚\nç®€ä»‹ vert.x ä¸è®¸å¤šæ—§çš„åº”ç”¨å¹³å°ç›¸æ¯”çš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿æ˜¯å®ƒå‡ ä¹å®Œå…¨æ˜¯éé˜»å¡çš„ï¼ˆå†…æ ¸çº¿ç¨‹ï¼‰ã€‚è¿™å…è®¸åŸºäº vert.x çš„ç¨‹åºä½¿ç”¨æå°‘æ•°çš„å†…æ ¸çº¿ç¨‹å¤„ç†å¤§é‡çš„å¹¶å‘ï¼ˆä¾‹å¦‚ï¼šè®¸å¤šè¿æ¥å’Œæ¶ˆæ¯ï¼‰ï¼Œå¯ä»¥è·å¾—æ›´å¥½çš„ä¼¸ç¼©æ€§ã€‚\nvert.x çš„éé˜»å¡ç‰¹æ€§å½¢æˆäº†éé˜»å¡ APIã€‚éé˜»å¡ API å¯ä»¥é‡‡ç”¨å¤šç§å½¢å¼æ¥å®ç°ï¼ŒåŒ…æ‹¬å›è°ƒå‡½æ•°ï¼Œpromiseï¼Œfibers æˆ–è€…å“åº”å¼æ‰©å±•ã€‚vert.x çš„æ ¸å¿ƒ API ä½¿ç”¨å›è°ƒå‡½æ•°çš„é£æ ¼ï¼Œä½†æ˜¯å®ƒä¹Ÿæ”¯æŒå…¶ä»–æ¨¡å‹ï¼Œå¦‚ RxJava 1 å’Œ 2ã€‚\nåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨å¼‚æ­¥çš„ API ç¼–ç¨‹å¯èƒ½æ¯”ä½¿ç”¨ç»å…¸çš„é¡ºåºä»£ç é£æ ¼æ›´å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œç‰¹åˆ«æ˜¯éœ€è¦æŒ‰ç…§é¡ºåºå®Œæˆè‹¥å¹²æ“ä½œã€‚å¦å¤–ï¼Œä½¿ç”¨å¼‚æ­¥ API æ—¶ï¼Œé”™è¯¯çš„ä¼ æ’­ä¹Ÿæ›´ä¸ºå¤æ‚ã€‚\nvertx-lang-kotlin-coroutines ä½¿ç”¨åç¨‹ã€‚åç¨‹æ˜¯éå¸¸è½»é‡çº§çš„çº¿ç¨‹ï¼Œè€Œä¸”ä¸ä¸åº•å±‚çš„å†…æ ¸çº¿ç¨‹å¯¹åº”ã€‚æ‰€ä»¥å½“åç¨‹éœ€è¦â€œé˜»å¡â€æ—¶ï¼Œå®ƒä¼šæš‚åœå¹¶é‡Šæ”¾å½“å‰çš„å†…æ ¸çº¿ç¨‹ï¼Œä½¿å¾—å¦ä¸€ä¸ªåç¨‹å¯ä»¥å¤„ç†äº‹ä»¶ã€‚\nvertx-lang-kotlin-coroutines ä½¿ç”¨ kotlinx.coroutines æ¥å®ç°åç¨‹ã€‚\n vertx-lang-kotlin-coroutines ç›®å‰ä»…é€‚ç”¨äº kotlinï¼Œè€Œä¸”æ˜¯ kotlin1.1 çš„ä¸€ä¸ªå®éªŒç‰¹æ€§ã€‚\n ä»ä¸€ä¸ª vertx.x çš„ contex ä¸­å¯åŠ¨åç¨‹ å¯¼å…¥ io.vertx.kotlin.coroutines.VertxCoroutineï¼Œlaunchï¼ˆåç¨‹ç”Ÿæˆå™¨ï¼‰æ–¹æ³•ä¸­å…è®¸è¿è¡Œä¸€æ®µä»£ç ä½œä¸ºå¯ä»¥æš‚åœçš„åç¨‹ï¼š\nval vertx = Vertx.vertx() vertx.deployVerticle(ExampleVerticle())  launch(vertx.dispatcher()) {  val timerId = awaitEvent\u0026lt;Long\u0026gt; { handler -\u0026gt;  vertx.","title":"è¯‘ï¼švertx-kotlin-coroutine"},{"content":" Being happy doesn\u0026rsquo;t mean that everything is perfect. It means that you decided to look beyond the imperfections.\n åç«¯ç¼–ç¨‹ï¼Œæ¶‰åŠæœ€å¤šçš„å°±æ˜¯å¹¶å‘ã€‚ç®€å•ç†è§£å°±æ˜¯ï¼š\n å¹¶å‘æ˜¯åŒæ—¶ç®¡ç†å¤šä¸ªä»»åŠ¡å»æ‰§è¡Œï¼Œå¹¶è¡Œæ˜¯é’ˆå¯¹å¤šæ ¸å¤„ç†å™¨ï¼ŒåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ˜¯ manageï¼Œä¸€ä¸ªæ˜¯ runã€‚\n å¹¶å‘ä¸€èˆ¬ç‰¹æŒ‡ IOï¼ŒIO æ˜¯ç‹¬ç«‹äº CPU çš„è®¾å¤‡ï¼ŒIO è®¾å¤‡é€šå¸¸è¿œè¿œæ…¢äº CPUï¼Œæ‰€ä»¥æˆ‘ä»¬å¼•å…¥äº†å¹¶å‘çš„æ¦‚å¿µï¼Œè®© CPU å¯ä»¥ä¸€æ¬¡æ€§å‘èµ·å¤šä¸ª IO æ“ä½œè€Œä¸ç”¨ç­‰å¾… IO è®¾å¤‡åšå®Œä¸€ä¸ªæ“ä½œå†åšä»¤ä¸€ä¸ªã€‚åŸç†å°±æ˜¯éé˜»å¡æ“ä½œ+äº‹ä»¶é€šçŸ¥ã€‚\nç¡¬ä»¶åº•å±‚ä¸Šæˆ‘å…¶å®ä¸å…³å¿ƒï¼Œä¸»è¦å°±æ˜¯åœ¨å†™ç¨‹åºä¸Šï¼Œå¦‚ä½•ç®€å•çš„å»å†™å¹¶å‘çš„ä»£ç ã€‚åœ¨è¯­æ³•å±‚é¢ä¸Šå¯¹å¹¶å‘åšçš„æ¯”è¾ƒå¥½çš„ï¼Œå¾ˆé€‚åˆåšæœåŠ¡ç«¯ï¼Œæ¯”å¦‚ goï¼Œæ¯”å¦‚ nodeï¼Œåˆæ¯”å¦‚æŸäº›å‡½æ•°å¼è¯­è¨€ã€‚æˆ‘æœ€è¿‘æœ€è¿‘ä¸»è¦ä½¿ç”¨çš„æ˜¯ node å’Œ kotlinã€‚\né‚£ä¹ˆåœ¨å†™å¹¶å‘ä»£ç çš„æ—¶å€™ï¼Œå°±ä¼šæ—¶ä¸æ—¶çš„æƒ³è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š\nä¸€ä¸ªé—®é¢˜ å½“ä»£ç é‡åˆ°ä¸€ä¸ªâ€œæš‚æ—¶ä¸èƒ½å®Œæˆâ€çš„æµç¨‹æ—¶ï¼ˆä¾‹å¦‚å»ºç«‹ä¸€ä¸ª tcp é“¾æ¥ï¼Œå¯èƒ½éœ€è¦ 5ms æ‰èƒ½å»ºç«‹ï¼‰ï¼Œä»–ä¸æƒ³é˜»å¡åœ¨è¿™é‡Œç¡çœ ï¼Œæƒ³æš‚æ—¶ç¦»å¼€ç°åœºå»å¹²ç‚¹åˆ«çš„äº‹æƒ…ï¼ˆä¾‹å¦‚çœ‹çœ‹å¦å¤–ä¸€ä¸ªå·²ç»å»ºç«‹çš„é“¾æ¥æ˜¯å¦å¯ä»¥æ”¶åŒ…äº†ï¼‰ã€‚é—®é¢˜æ˜¯ï¼šç¦»å¼€ç°åœºåï¼Œå½“ä½ å›æ¥çš„æ—¶å€™ï¼Œä¸Šä¸‹æ–‡è¿˜åƒä½ èµ°çš„æ—¶å€™å—ï¼Ÿ\nè·³è½¬ç¦»å¼€ï¼Œåœ¨ä»»ä½•è¯­è¨€é‡Œéƒ½æœ‰ 2 ç§æœ€åŸºæœ¬çš„æ–¹æ³•ï¼š1ï¼‰ä»å½“å‰å‡½æ•°è¿”å›ï¼› 2ï¼‰è°ƒç”¨ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ å‰è€…ä¼šæŠŠä¸Šä¸‹æ–‡ä¸­çš„å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°å…¨éƒ¨æ‘§æ¯ï¼Œé™¤éä»–è¿”å›å‰æŠŠè¿™äº›å˜é‡æ‰¾ä¸ªåˆ«çš„åœ°æ–¹ä¿å­˜èµ·æ¥ï¼›åè€…åˆ™èƒ½ä¿æŠ¤ä½æ•´ä¸ªä¸Šä¸‹æ–‡çš„å†…å­˜ï¼ˆé™¤äº†åç¨‹åˆ‡æ¢åä¼šæ‘§æ¯ä¸€äº›å¯„å­˜å™¨ï¼‰ï¼Œè€Œä¸”è·³è½¬å›æ¥ä¹Ÿæ˜¯å¸¸è§„æ–¹æ³•ï¼šå‡½æ•°è¿”å›ã€‚\nåœ¨å†™ node çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ— è„‘ä¸Š async/awaitã€‚æ¯æ¬¡çœ‹åˆ°å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œå¼ºè¿«ç—‡å°±çŠ¯äº†ï¼Œæ€»æ˜¯æƒ³æ–¹è®¾æ³•å°†é‚£ä¸ªæ–¹æ³•è½¬æˆ promiseï¼Œç„¶åä½¿ç”¨ await è·å¾—ç»“æœã€‚æ— è„‘å°è¯•äº† bluebird å’Œ node çš„ utilï¼Œè™½ç„¶æœ‰äº›æ˜¯å¾ˆå¥½ç”¨çš„ï¼Œä½†æ˜¯æœ‰çš„è¿˜æ˜¯æ— æ³•è¾¾åˆ°æˆ‘é¢„æœŸçš„ã€‚é ç€æ— è„‘çš„ async/awaitï¼Œå®ç°äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä»£ç å†™èµ·æ¥ä¹Ÿæ˜¯å¿«çš„é£èµ·ï¼Œä½†æ˜¯åªé¡¾ç€åšä¸šåŠ¡è€Œä¸æ·±å…¥æ€è€ƒçš„è¯ï¼Œæ˜¯ä¸€ä¸ªä¸å¥½çš„è¡¨ç°ï¼Œæ‰€ä»¥æˆ‘å°±åœä¸‹æ¥æœäº†å¾ˆå¤š async/await çš„ä¸œè¥¿ï¼Œç‰¹åˆ«æ˜¯ä»é˜®ä¸€å³°è€å¸ˆé‚£é‡Œæ”¶è·äº†å¾ˆå¤šã€‚\njs å¼‚æ­¥ç¼–ç¨‹ å› ä¸º js æ˜¯å•çº¿ç¨‹ï¼Œæ‰€ä»¥å¼‚æ­¥ç¼–ç¨‹å¯¹ js ç‰¹åˆ«é‡è¦ã€‚\nå®ç°å¼‚æ­¥ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç§ï¼š\n  å›è°ƒå‡½æ•°\ncallbackï¼Œè‹±è¯­ç›´è¯‘å°±æ˜¯é‡æ–°è°ƒç”¨ã€‚\næ‰€è°“çš„å›è°ƒå‡½æ•°å°±æ˜¯æŠŠä»»åŠ¡çš„ç¬¬äºŒæ®µå•ç‹¬å†™åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œç­‰åˆ°é‡æ–°æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚\nå›è°ƒæœ¬èº«æ²¡é—®é¢˜ï¼Œä½†æ˜¯å°±æ€•å¤šé‡åµŒå¥—ã€‚\n  promise\npromise æ˜¯ä¸€ç§æ–°çš„å†™æ³•ï¼ŒæŠŠå›è°ƒå‡½æ•°çš„æ¨ªå‘åµŒå¥—ï¼Œç”¨ then çš„å½¢å¼æ”¹æˆçºµå‘çš„åŠ è½½ã€‚\n  åç¨‹\nåç¨‹å°±æ˜¯æ¯”çº¿ç¨‹æ›´å°çš„å•ä½ã€‚\næ‰§è¡Œè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š\nç¬¬ä¸€æ­¥ï¼Œåç¨‹ A å¼€å§‹æ‰§è¡Œã€‚\nç¬¬äºŒæ­¥ï¼Œåç¨‹ A æ‰§è¡Œåˆ°ä¸€åŠï¼Œè¿›å…¥æš‚åœï¼Œæ‰§è¡Œæƒè½¬ç§»åˆ°åç¨‹ Bã€‚\nç¬¬ä¸‰æ­¥ï¼Œï¼ˆä¸€æ®µæ—¶é—´åï¼‰åç¨‹ B äº¤è¿˜æ‰§è¡Œæƒã€‚\nç¬¬å››æ­¥ï¼Œåç¨‹ A æ¢å¤æ‰§è¡Œã€‚\nåé¢å†å±•å¼€è¯´åç¨‹ã€‚\n  å¾ˆæ˜æ˜¾ï¼Œåœ¨ go ç«èµ·æ¥ä¹‹åï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½åœ¨å¾€åç¨‹ä¸Šé ï¼Œå› ä¸ºåç¨‹å¾ˆå¥½çš„å°†å¼‚æ­¥çš„å†™æ³•è½¬åŒ–æˆäº†åŒæ­¥çš„å†™æ³•ï¼Œé™ä½äº†å¿ƒæ™ºè´Ÿæ‹…ã€‚js å½“ç„¶ä¹Ÿä¸è½åã€‚\njs çš„å¼‚æ­¥å†™æ³•çš„æ¼”è¿›\n  generator\nes6 å¢åŠ äº† generator å‡½æ•°ï¼Œå°±æ˜¯åç¨‹çš„ä¸€ç§å®ç°ï¼Œæœ€å¤§ç‰¹ç‚¹å°±æ˜¯ä½¿ç”¨ yield å…³é”®å­—å°±æ˜¯ç”¨æ¥äº¤å‡ºå‡½æ•°çš„æ‰§è¡Œæƒã€‚\nfunction* gen(x){  var y = yield x + 2;  return y; } ä¸åŒäºæ™®é€šå‡½æ•°çš„åœ°æ–¹åœ¨äºè°ƒç”¨ generator å‡½æ•°çš„æ—¶å€™ï¼Œä¸è¿”å›ç»“æœï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ªå†…éƒ¨çš„æŒ‡é’ˆã€‚è°ƒç”¨æŒ‡é’ˆçš„ next æ–¹æ³•ï¼Œä¼šç§»åŠ¨å†…éƒ¨æŒ‡é’ˆï¼ˆå³æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„ç¬¬ä¸€æ®µï¼‰ï¼Œé‡åˆ°çš„ yield è¯­å¥å°±äº¤å‡ºæ‰§è¡Œæƒï¼Œæ‰§è¡Œåˆ«çš„ä»£ç ã€‚ä¸‹æ¬¡å†è°ƒç”¨è¯¥å‡½æ•°æŒ‡é’ˆçš„ next æ–¹æ³•ï¼Œå°±ç»§ç»­æ‰§è¡Œåˆ°è¯¥å‡½æ•°çš„ä¸‹ä¸€ä¸ª yield è¯­å¥ã€‚\nè™½ç„¶ Generator å‡½æ•°å°†å¼‚æ­¥æ“ä½œè¡¨ç¤ºå¾—å¾ˆç®€æ´ï¼Œä½†æ˜¯æµç¨‹ç®¡ç†å´ä¸æ–¹ä¾¿ï¼ˆå³ä½•æ—¶æ‰§è¡Œç¬¬ä¸€é˜¶æ®µã€ä½•æ—¶æ‰§è¡Œç¬¬äºŒé˜¶æ®µï¼‰ï¼Œè¿™æ ·çœ‹æ¥å…¶å® generator å‡½æ•°å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„å®¹å™¨ï¼Œéœ€è¦æœ‰ä¸€ä¸ªè§¦å‘å®ƒè‡ªåŠ¨æ‰§è¡Œçš„æœºåˆ¶ã€‚\n  Thunk å‡½æ•°\nè¯´åˆ° thunk å‡½æ•°ï¼Œå°±å¾—å…ˆäº†è§£ä¸€ä¸‹å‚æ•°çš„æ±‚å€¼ç­–ç•¥ã€‚\nlet m=1; function f(x){  return x*2 }  f(m+5)   ä¼ å€¼è°ƒç”¨\nå…ˆè®¡ç®—å‡ºæ¥ m+5 çš„å€¼ 6ï¼Œç„¶åå†å°†å€¼ä¼ ç»™å‡½æ•° fï¼Œå³ 6*2\n  ä¼ åè°ƒç”¨\næŠŠ m+5 ä¼ å…¥åˆ° f ä¸­ï¼Œåœ¨ç”¨åˆ°çš„æ—¶å€™å†è®¡ç®—ï¼Œå³(x+5)*2ã€‚\n  ä¼ å€¼è°ƒç”¨æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å¯¹å‚æ•°æ±‚å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šè¿˜æ²¡ç”¨åˆ°è¿™ä¸ªå‚æ•°ï¼Œæœ‰å¯èƒ½é€ æˆæ€§èƒ½æŸå¤±ã€‚\nç¼–è¯‘å™¨çš„\u0026quot;ä¼ åè°ƒç”¨\u0026quot;å®ç°ï¼Œå¾€å¾€æ˜¯å°†å‚æ•°æ”¾åˆ°ä¸€ä¸ªä¸´æ—¶å‡½æ•°ä¹‹ä¸­ï¼Œå†å°†è¿™ä¸ªä¸´æ—¶å‡½æ•°ä¼ å…¥å‡½æ•°ä½“ã€‚è¿™ä¸ªä¸´æ—¶å‡½æ•°å°±å«åš Thunk å‡½æ•°ã€‚\njs æ˜¯ä¼ å€¼è°ƒç”¨ã€‚ä»–çš„ thunk å‡½æ•°æ˜¯å°†å¤šå‚æ•°çš„å‡½æ•°ï¼Œæ›¿æ¢æˆäº†å•å‚æ•°çš„ç‰ˆæœ¬ï¼Œè€Œä¸”åªæ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚\nè¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°äº†åŸºäº thunk å‡½æ•°çš„ generator è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚\nå…·ä½“çš„å®ç°å’Œå¦‚ä½•ä½¿ç”¨ï¼Œå‚è€ƒhttp://www.ruanyifeng.com/blog/2015/05/thunk.htmlã€‚\n  co å‡½æ•°\nco å‡½æ•°æ˜¯åŸºäº Promise çš„ generator å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚\næºä»£ç åªæœ‰å‡ åè¡Œï¼Œtj å¤§ç¥å¤ªå¼ºğŸ‘äº†ã€‚\nhttp://www.ruanyifeng.com/blog/2015/05/co.html\n  async/await\nasync å‡½æ•°å°±æ˜¯ generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚\nasync å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ï¼Œæ— è„‘å†™ async å’Œ await çš„æ—¶å€™å°±æ˜¯ï¼Œå‡ ä¹æ‰€æœ‰çš„å‡½æ•°éƒ½å†™æˆäº† async å‡½æ•°ï¼Œåªè¦éœ€è¦ç­‰å¾…çš„æ–¹æ³•ï¼Œéƒ½ç”¨ await å»ç­‰å¾…ï¼Œè¿™æ ·å°±é€ æˆäº†å¾ˆå¤šæ— æ„ä¹‰çš„ç­‰å¾…ã€‚æœ¬æ¥ä¸¤ä¸ªä¸ç›¸å¹²çš„æ“ä½œï¼Œå¦‚æœæ¯ä¸ªéƒ½æ˜¯ç”¨ await ç­‰çš„è¯ï¼Œå°±ä¼šå¾ˆå½±å“æ€§èƒ½ã€‚\nå¤šä¸ªè¯·æ±‚å¹¶å‘æ‰§è¡Œçš„æ—¶å€™ï¼Œå°½é‡é€‰ç”¨ Promise.all æ–¹æ³•ã€‚\n  ç†è§£äº†ä»¥ä¸Šçš„æ¼”è¿›è¿‡ç¨‹ï¼Œæ„Ÿè§‰è‡ªå·±ç»ˆäºæ‘†è„±äº† java æ€ç»´çš„æªï¼Œå¯¹ node ç»ˆäºå…¥é—¨äº†ã€‚ç„¶åï¼ŒåŒæ­¥åœ°å†™ç€ kotlin é¡¹ç›®ï¼Œåˆé™·å…¥äº†æ³¥æ½­ä¸­ã€‚\nFutureã€RxJavaã€Actor å’Œ kotlin åç¨‹ æˆ‘ç†è§£çš„ä¹Ÿä¸æ˜¯å¾ˆæ·±ï¼Œæ±‚ç§‘æ™®ã€‚\nä»¥å‰å†™ java çš„æ—¶å€™ï¼Œè‡ªå·±éƒ½æ˜¯æ— è„‘ç”¨çº¿ç¨‹æ± ï¼Œå¼€å¤šçº¿ç¨‹å»å¤„ç†ï¼Œä¸€èˆ¬è¿™ç§æƒ…å†µä¸‹ä¸éœ€è¦çº¿ç¨‹çš„ç»“æœã€‚\n  future\nå› ä¸ºä¸èƒ½ç›´æ¥ä»åˆ«çš„çº¿ç¨‹ä¸­å¾—åˆ°å‡½æ•°çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ future å°±å‡ºåœºäº†ã€‚\nFutrue å¯ä»¥ç›‘è§†ç›®æ ‡çº¿ç¨‹è°ƒç”¨ call çš„æƒ…å†µï¼Œå½“ä½ è°ƒç”¨ Future çš„ get()æ–¹æ³•ä»¥è·å¾—ç»“æœæ—¶ï¼Œå½“å‰çº¿ç¨‹å°±å¼€å§‹é˜»å¡ï¼Œç›´æ¥ call æ–¹æ³•ç»“æŸè¿”å›ç»“æœã€‚\nFuture å¯¹è±¡æœ¬èº«å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ˜¾å¼çš„å¼•ç”¨ï¼Œä¸€ä¸ªå¯¹å¼‚æ­¥å¤„ç†ç»“æœçš„å¼•ç”¨ã€‚ç”±äºå…¶å¼‚æ­¥æ€§è´¨ï¼Œåœ¨åˆ›å»ºä¹‹åˆï¼Œå®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡å¯èƒ½è¿˜å¹¶ä¸å¯ç”¨ï¼ˆæ¯”å¦‚å°šåœ¨è¿ç®—ä¸­ï¼Œç½‘ç»œä¼ è¾“ä¸­æˆ–ç­‰å¾…ä¸­ï¼‰ã€‚è¿™æ—¶ï¼Œå¾—åˆ° Future çš„ç¨‹åºæµç¨‹å¦‚æœå¹¶ä¸æ€¥äºä½¿ç”¨ Future æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥åšå…¶å®ƒä»»ä½•æƒ³åšçš„äº‹å„¿ï¼Œå½“æµç¨‹è¿›è¡Œåˆ°éœ€è¦ Future èƒŒåå¼•ç”¨çš„å¯¹è±¡æ—¶ï¼Œå¯èƒ½æœ‰ä¸¤ç§æƒ…å†µï¼š\n  å¸Œæœ›èƒ½çœ‹åˆ°è¿™ä¸ªå¯¹è±¡å¯ç”¨ï¼Œå¹¶å®Œæˆä¸€äº›ç›¸å…³çš„åç»­æµç¨‹ã€‚\nå¯ä»¥é€šè¿‡è°ƒç”¨ Future.isDone()åˆ¤æ–­å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°±ç»ªï¼Œå¹¶é‡‡å–ä¸åŒçš„å¤„ç†ã€‚\n  å¦‚æœå®åœ¨ä¸å¯ç”¨ï¼Œä¹Ÿå¯ä»¥è¿›å…¥å…¶å®ƒåˆ†æ”¯æµç¨‹ã€‚\nåªéœ€è°ƒç”¨ get()æˆ– get(long timeout, TimeUnit unit)é€šè¿‡åŒæ­¥é˜»å¡æ–¹å¼ç­‰å¾…å¯¹è±¡å°±ç»ªã€‚å®é™…è¿è¡ŒæœŸæ˜¯é˜»å¡è¿˜æ˜¯ç«‹å³è¿”å›å°±å–å†³äº get()çš„è°ƒç”¨æ—¶æœºå’Œå¯¹è±¡å°±ç»ªçš„å…ˆåäº†ã€‚\n    rxjava\n  actor\n  coroutine\n  è·ªæ±‚ç§‘æ™®ï¼Œç­‰ç†è§£äº†å†æ¥ç€å®Œå–„ã€‚\næµ…è°ˆåç¨‹ è¯´åˆ°åç¨‹ï¼Œå°±è¦è¯´çº¿ç¨‹ã€‚\nçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·æ€æ¦‚å¿µï¼Œçº¿ç¨‹æœ¬èº«ä¹Ÿä¾èµ–ä¸­æ–­æ¥è¿›è¡Œè°ƒåº¦ã€‚æ—©æœŸçš„ç”¨æˆ·æ€ IO å¹¶å‘å¤„ç†æ˜¯ç”¨ poll(select)æ¨¡å‹å»è½®è¯¢ IO çŠ¶æ€ï¼Œç„¶åå‘èµ·ç›¸åº”çš„ IO æ“ä½œï¼Œç§°ä¹‹ä¸ºäº‹ä»¶å“åº”å¼çš„å¼‚æ­¥æ¨¡å‹ï¼Œè¿™ç§æ–¹å¼å¹¶ä¸å®¹æ˜“ä½¿ç”¨ï¼Œæ‰€ä»¥åˆå‘å±•å‡ºäº†é˜»å¡å¼ IO æ“ä½œï¼Œè®©é€»è¾‘æŒ‚èµ·å¹¶ç­‰å¾… IO å®Œæˆï¼Œä¸ºäº†è®©é˜»å¡å¼ IO èƒ½å¤Ÿå¹¶å‘å°±å¿…é¡»ä¾èµ–å¤šçº¿ç¨‹æˆ–è€…å¤šè¿›ç¨‹æ¨¡å‹æ¥å®ç°ã€‚ä½†æ˜¯çº¿ç¨‹çš„å¼€é”€æ˜¯éå¸¸å¤§çš„ï¼Œå½“é‡åˆ°å¤§è§„æ¨¡å¹¶å‘çš„æ—¶å€™å¤šçº¿ç¨‹æ¨¡å‹å°±æ— æ³•èƒœä»»äº†ã€‚æ‰€ä»¥å¤§è§„æ¨¡å¹¶å‘æ—¶æˆ‘ä»¬åˆé€€å›å»ä½¿ç”¨äº‹ä»¶å“åº”ï¼Œepoll åœ¨æœ¬è´¨ä¸Šè¿˜æ˜¯ poll æ¨¡å‹ï¼Œåªæ˜¯åœ¨ç®—æ³•ä¸Šä¼˜åŒ–äº†å®ç°ï¼Œæ­¤æ—¶æˆ‘ä»¬åªç”¨å•çº¿ç¨‹å°±å¯ä»¥å¤„ç†ä¸Šä¸‡çš„å¹¶å‘è¯·æ±‚äº†ã€‚\nç›´åˆ°å¤šæ ¸ CPU çš„å‡ºç°ï¼Œæˆ‘ä»¬å‘ç°åªç”¨ä¸€ä¸ªçº¿ç¨‹æ˜¯æ— æ³•å‘æŒ¥å¤šæ ¸ CPU çš„å¨åŠ›çš„ï¼Œæ‰€ä»¥å†æ¬¡å¼•å…¥çº¿ç¨‹æ± æ¥åˆ†æ‘Š IO æ“ä½œçš„ CPU æ¶ˆè€—ï¼Œç”šè‡³ CPU çš„ä¸­æ–­å“åº”ä¹Ÿå¯ä»¥ç”±å¤šä¸ªæ ¸æ¥åˆ†æ‘Šæ‰§è¡Œï¼Œæ­¤æ—¶çš„çº¿ç¨‹æ•°é‡æ˜¯å¤§è‡´ç­‰äº CPU çš„æ ¸å¿ƒæ•°è€Œè¿œå°äºå¹¶å‘ IO æ•°çš„ï¼ˆè¿™æ—¶ CPU èƒ½å¤„ç†ç™¾ä¸‡çº§çš„å¹¶å‘ï¼‰ï¼Œçº¿ç¨‹çš„å¼•å…¥å®Œå…¨æ˜¯ä¸ºäº†è´Ÿè½½å‡è¡¡è€Œè·Ÿå¹¶å‘æ²¡æœ‰å…³ç³»ã€‚æ‰€ä»¥ä¸ç®¡æ˜¯ç”¨ select/epoll/iocp åœ¨é€»è¾‘å±‚éƒ½ç»•ä¸å¼€åŸºäºäº‹ä»¶å“åº”çš„å¼‚æ­¥æ“ä½œï¼Œé¢å¯¹å¼‚æ­¥é€»è¾‘æœ¬èº«çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬æ‰å¼•å…¥äº† async/await ä»¥åŠ coroutine æ¥é™ä½å¤æ‚æ€§ã€‚\ncoroutine æ˜¯ä¸ªå¾ˆå®½æ³›çš„æ¦‚å¿µï¼Œasync/await ä¹Ÿå±äº coroutine çš„ä¸€ç§ã€‚\nè€Œåç¨‹åœ¨å®ç°æ¨¡å¼ä¸Šåˆåˆ†ä¸ºï¼šstackful coroutine å’Œ stackless coroutineã€‚\næ‰€è°“ stackful æ˜¯æŒ‡æ¯ä¸ª coroutine æœ‰ç‹¬ç«‹çš„è¿è¡Œæ ˆï¼Œæ¯”å¦‚ go è¯­è¨€çš„æ¯ä¸ª goroutine ä¼šåˆ†é…ä¸€ä¸ª 4k çš„å†…å­˜æ¥åšä¸ºè¿è¡Œæ ˆï¼Œåˆ‡æ¢ goroutine çš„æ—¶å€™è¿è¡Œæ ˆä¹Ÿä¼šåˆ‡æ¢ã€‚stackful çš„å¥½å¤„åœ¨äºè¿™ç§ coroutine æ˜¯å®Œæ•´çš„ï¼Œcoroutine å¯ä»¥åµŒå¥—ã€å¾ªç¯ã€‚\nä¸ stackful å¯¹åº”çš„æ˜¯ stackless coroutineï¼Œæ¯”å¦‚ js çš„ generator å‡½æ•°ï¼Œè¿™ç±» coroutine ä¸éœ€è¦åˆ†é…å•ç‹¬çš„æ ˆç©ºé—´ï¼Œcoroutine çŠ¶æ€ä¿å­˜åœ¨é—­åŒ…é‡Œï¼Œä½†ç¼ºç‚¹æ˜¯åŠŸèƒ½æ¯”è¾ƒå¼±ï¼Œä¸èƒ½è¢«åµŒå¥—è°ƒç”¨ï¼Œä¹Ÿæ²¡åŠæ³•å’Œå¼‚æ­¥å‡½æ•°é…åˆä½¿ç”¨è¿›è¡Œæ§åˆ¶æµçš„è°ƒåº¦ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ²¡åŠæ³•è·Ÿ stackful coroutine åšæ¯”è¾ƒã€‚ä¿å­˜è¿™äº›çŠ¶æ€çš„æ—¶å€™ï¼Œæœ‰çš„è¯­è¨€å°±å¼•å…¥äº†çŠ¶æ€æœºçš„æ¨¡å‹æ¥å®ç°çº¿ç¨‹ã€‚\nasync/await çš„å‡ºç°ï¼Œå®ç°äº†åŸºäº stackless coroutine çš„å®Œæ•´ coroutineã€‚åœ¨ç‰¹æ€§ä¸Šå·²ç»éå¸¸æ¥è¿‘ stackful coroutine äº†ï¼Œä¸ä½†å¯ä»¥åµŒå¥—ä½¿ç”¨ä¹Ÿå¯ä»¥æ”¯æŒ try catchã€‚\nç»“è¯­ å‘ç°è‡ªå·±æŒºæ— è„‘çš„ï¼Œå­¦ä¼šäº†ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ— è„‘çš„å»ç”¨ï¼Œç›´åˆ°ç¢°å£äº†æ‰ä¼šå»æ€è€ƒã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/async/","summary":"Being happy doesn\u0026rsquo;t mean that everything is perfect. It means that you decided to look beyond the imperfections.\n åç«¯ç¼–ç¨‹ï¼Œæ¶‰åŠæœ€å¤šçš„å°±æ˜¯å¹¶å‘ã€‚ç®€å•ç†è§£å°±æ˜¯ï¼š\n å¹¶å‘æ˜¯åŒæ—¶ç®¡ç†å¤šä¸ªä»»åŠ¡å»æ‰§è¡Œï¼Œå¹¶è¡Œæ˜¯é’ˆå¯¹å¤šæ ¸å¤„ç†å™¨ï¼ŒåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ˜¯ manageï¼Œä¸€ä¸ªæ˜¯ runã€‚\n å¹¶å‘ä¸€èˆ¬ç‰¹æŒ‡ IOï¼ŒIO æ˜¯ç‹¬ç«‹äº CPU çš„è®¾å¤‡ï¼ŒIO è®¾å¤‡é€šå¸¸è¿œè¿œæ…¢äº CPUï¼Œæ‰€ä»¥æˆ‘ä»¬å¼•å…¥äº†å¹¶å‘çš„æ¦‚å¿µï¼Œè®© CPU å¯ä»¥ä¸€æ¬¡æ€§å‘èµ·å¤šä¸ª IO æ“ä½œè€Œä¸ç”¨ç­‰å¾… IO è®¾å¤‡åšå®Œä¸€ä¸ªæ“ä½œå†åšä»¤ä¸€ä¸ªã€‚åŸç†å°±æ˜¯éé˜»å¡æ“ä½œ+äº‹ä»¶é€šçŸ¥ã€‚\nç¡¬ä»¶åº•å±‚ä¸Šæˆ‘å…¶å®ä¸å…³å¿ƒï¼Œä¸»è¦å°±æ˜¯åœ¨å†™ç¨‹åºä¸Šï¼Œå¦‚ä½•ç®€å•çš„å»å†™å¹¶å‘çš„ä»£ç ã€‚åœ¨è¯­æ³•å±‚é¢ä¸Šå¯¹å¹¶å‘åšçš„æ¯”è¾ƒå¥½çš„ï¼Œå¾ˆé€‚åˆåšæœåŠ¡ç«¯ï¼Œæ¯”å¦‚ goï¼Œæ¯”å¦‚ nodeï¼Œåˆæ¯”å¦‚æŸäº›å‡½æ•°å¼è¯­è¨€ã€‚æˆ‘æœ€è¿‘æœ€è¿‘ä¸»è¦ä½¿ç”¨çš„æ˜¯ node å’Œ kotlinã€‚\né‚£ä¹ˆåœ¨å†™å¹¶å‘ä»£ç çš„æ—¶å€™ï¼Œå°±ä¼šæ—¶ä¸æ—¶çš„æƒ³è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š\nä¸€ä¸ªé—®é¢˜ å½“ä»£ç é‡åˆ°ä¸€ä¸ªâ€œæš‚æ—¶ä¸èƒ½å®Œæˆâ€çš„æµç¨‹æ—¶ï¼ˆä¾‹å¦‚å»ºç«‹ä¸€ä¸ª tcp é“¾æ¥ï¼Œå¯èƒ½éœ€è¦ 5ms æ‰èƒ½å»ºç«‹ï¼‰ï¼Œä»–ä¸æƒ³é˜»å¡åœ¨è¿™é‡Œç¡çœ ï¼Œæƒ³æš‚æ—¶ç¦»å¼€ç°åœºå»å¹²ç‚¹åˆ«çš„äº‹æƒ…ï¼ˆä¾‹å¦‚çœ‹çœ‹å¦å¤–ä¸€ä¸ªå·²ç»å»ºç«‹çš„é“¾æ¥æ˜¯å¦å¯ä»¥æ”¶åŒ…äº†ï¼‰ã€‚é—®é¢˜æ˜¯ï¼šç¦»å¼€ç°åœºåï¼Œå½“ä½ å›æ¥çš„æ—¶å€™ï¼Œä¸Šä¸‹æ–‡è¿˜åƒä½ èµ°çš„æ—¶å€™å—ï¼Ÿ\nè·³è½¬ç¦»å¼€ï¼Œåœ¨ä»»ä½•è¯­è¨€é‡Œéƒ½æœ‰ 2 ç§æœ€åŸºæœ¬çš„æ–¹æ³•ï¼š1ï¼‰ä»å½“å‰å‡½æ•°è¿”å›ï¼› 2ï¼‰è°ƒç”¨ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ å‰è€…ä¼šæŠŠä¸Šä¸‹æ–‡ä¸­çš„å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°å…¨éƒ¨æ‘§æ¯ï¼Œé™¤éä»–è¿”å›å‰æŠŠè¿™äº›å˜é‡æ‰¾ä¸ªåˆ«çš„åœ°æ–¹ä¿å­˜èµ·æ¥ï¼›åè€…åˆ™èƒ½ä¿æŠ¤ä½æ•´ä¸ªä¸Šä¸‹æ–‡çš„å†…å­˜ï¼ˆé™¤äº†åç¨‹åˆ‡æ¢åä¼šæ‘§æ¯ä¸€äº›å¯„å­˜å™¨ï¼‰ï¼Œè€Œä¸”è·³è½¬å›æ¥ä¹Ÿæ˜¯å¸¸è§„æ–¹æ³•ï¼šå‡½æ•°è¿”å›ã€‚\nåœ¨å†™ node çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ— è„‘ä¸Š async/awaitã€‚æ¯æ¬¡çœ‹åˆ°å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œå¼ºè¿«ç—‡å°±çŠ¯äº†ï¼Œæ€»æ˜¯æƒ³æ–¹è®¾æ³•å°†é‚£ä¸ªæ–¹æ³•è½¬æˆ promiseï¼Œç„¶åä½¿ç”¨ await è·å¾—ç»“æœã€‚æ— è„‘å°è¯•äº† bluebird å’Œ node çš„ utilï¼Œè™½ç„¶æœ‰äº›æ˜¯å¾ˆå¥½ç”¨çš„ï¼Œä½†æ˜¯æœ‰çš„è¿˜æ˜¯æ— æ³•è¾¾åˆ°æˆ‘é¢„æœŸçš„ã€‚é ç€æ— è„‘çš„ async/awaitï¼Œå®ç°äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä»£ç å†™èµ·æ¥ä¹Ÿæ˜¯å¿«çš„é£èµ·ï¼Œä½†æ˜¯åªé¡¾ç€åšä¸šåŠ¡è€Œä¸æ·±å…¥æ€è€ƒçš„è¯ï¼Œæ˜¯ä¸€ä¸ªä¸å¥½çš„è¡¨ç°ï¼Œæ‰€ä»¥æˆ‘å°±åœä¸‹æ¥æœäº†å¾ˆå¤š async/await çš„ä¸œè¥¿ï¼Œç‰¹åˆ«æ˜¯ä»é˜®ä¸€å³°è€å¸ˆé‚£é‡Œæ”¶è·äº†å¾ˆå¤šã€‚","title":"å°è®® async/await å’Œ coroutine"},{"content":"ä»¥å‰æ²¡æœ‰å¥½å¥½å­¦çš„ä¸œè¥¿ï¼Œç°åœ¨åœ¨å·¥ä½œä¸­æ…¢æ…¢çš„è¡¥å›æ¥äº†ã€‚\nåŸºç¡€æ¦‚å¿µ  ç´¢å¼•  es æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªç´¢å¼•ï¼ˆindexï¼‰ä¸­ã€‚\nç´¢å¼•å°±åƒæ˜¯æ•°æ®åº“ã€‚\n æ–‡æ¡£  æ–‡æ¡£æ˜¯ es çš„å®ä½“ã€‚ç”±å­—æ®µæ„æˆï¼Œæ¯ä¸ªå­—æ®µåŒ…å«å­—æ®µåå’Œä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—æ®µå€¼ã€‚\næ–‡æ¡£å°±åƒæ•°æ®åº“ä¸­çš„ä¸€æ¡æ¡è®°å½•ã€‚\n ç±»å‹  æ¯ä¸ªæ–‡æ¡£éƒ½æœ‰ä¸€ä¸ªç±»å‹ä¸ä¹‹ç›¸å¯¹åº”ã€‚\nç±»å‹å°±åƒæ•°æ®åº“ä¸­çš„è¡¨ã€‚\n Map  æ‰€æœ‰æ–‡æ¡£åœ¨è¢«å†™å…¥åˆ° es ä¸­ï¼Œéƒ½ä¼šè¢«åˆ†æã€‚ç”±ç”¨æˆ·è®¾ç½®ä¸€äº›å‚æ•°å†³å®šå¦‚ä½•åˆ†å‰²è¯æ¡ã€å“ªäº›å­—åº”è¯¥è¢«è¿‡æ»¤æ‰ç­‰ç­‰ã€‚\n èŠ‚ç‚¹  å•ä¸ª es æœåŠ¡å®ä¾‹å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n é›†ç¾¤  å¤šä¸ªååŒå·¥ä½œçš„ es èŠ‚ç‚¹çš„é›†åˆå°±æ˜¯é›†ç¾¤ã€‚\n åˆ†ç‰‡  es å°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªç‰©ç†çš„ Lucene ç´¢å¼•ä¸Šï¼Œè¿™äº›ç‰©ç† Lucene ç´¢å¼•è¢«ç§°ä¸ºåˆ†ç‰‡ã€‚\n å‰¯æœ¬  å‰¯æœ¬å°±æ˜¯æ¯ä¸ªåˆ†ç‰‡éƒ½åšå†—ä½™å¤„ç†ï¼Œä¸€ä¸ªå®•æœºä¹‹åï¼Œä¸å½±å“æœåŠ¡ã€‚\nå¿«é€Ÿå…¥é—¨ å®‰è£… es çš„å®‰è£…å¾ˆç®€å•ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ macï¼Œä¸‹è½½ä¸‹æ¥ zip åŒ…ï¼Œè§£å‹å³å¯ä½¿ç”¨ã€‚\n[elasticsearch-6.2.4] pwd /Users/zhuzhenfeng/Documents/software/elasticsearch-6.2.4 [elasticsearch-6.2.4] ./bin/elasticsearch Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release. [2018-05-20T17:18:37,619][INFO ][o.e.n.Node ] [] initializing ... [2018-05-20T17:18:37,766][INFO ][o.e.e.NodeEnvironment ] [M41310-] using [1] data paths, mounts [[/ (/dev/disk1s1)]], net usable_space [136gb], net total_space [233.4gb], types [apfs] [2018-05-20T17:18:37,767][INFO ][o.e.e.NodeEnvironment ] [M41310-] heap size [990.7mb], compressed ordinary object pointers [true] è¿™æ ·å°±å°† es å¯åŠ¨äº†ï¼Œç„¶ååœ¨ chrome ä¸­ï¼Œè¾“å…¥http://localhost:9200ï¼Œå³å¯æŸ¥çœ‹æœ‰æ²¡æœ‰å¯åŠ¨æˆåŠŸã€‚\n{ \u0026#34;name\u0026#34;: \u0026#34;M41310-\u0026#34;, \u0026#34;cluster_name\u0026#34;: \u0026#34;elasticsearch\u0026#34;, \u0026#34;cluster_uuid\u0026#34;: \u0026#34;58U11tViTYuXpI2b5SiGrg\u0026#34;, \u0026#34;version\u0026#34;: { \u0026#34;number\u0026#34;: \u0026#34;6.2.4\u0026#34;, \u0026#34;build_hash\u0026#34;: \u0026#34;ccec39f\u0026#34;, \u0026#34;build_date\u0026#34;: \u0026#34;2018-04-12T20:37:28.497551Z\u0026#34;, \u0026#34;build_snapshot\u0026#34;: false, \u0026#34;lucene_version\u0026#34;: \u0026#34;7.2.1\u0026#34;, \u0026#34;minimum_wire_compatibility_version\u0026#34;: \u0026#34;5.6.0\u0026#34;, \u0026#34;minimum_index_compatibility_version\u0026#34;: \u0026#34;5.0.0\u0026#34; }, \u0026#34;tagline\u0026#34;: \u0026#34;You Know, for Search\u0026#34; } å¸¸ç”¨çš„å‘½ä»¤ ä½¿ç”¨ postman æ¥æ¨¡æ‹Ÿå‘é€è¯·æ±‚ã€‚\nåˆ›å»º index PUT\nhttp://127.0.0.1:9200/myindex response\n{ \u0026#34;acknowledged\u0026#34;: true, \u0026#34;shards_acknowledged\u0026#34;: true, \u0026#34;index\u0026#34;: \u0026#34;myindex\u0026#34; } åˆ›å»ºäº†ä¸€ä¸ªå« myindex çš„ç´¢å¼•\nåˆ é™¤ index DELETE\nhttp://127.0.0.1:9200/myindex response\n{ \u0026#34;acknowledged\u0026#34;: true } ä½¿ç”¨ delete æ–¹æ³•å°±å¯ä»¥åˆ é™¤ç´¢å¼•ï¼Œè€Œä¸”å¯ä»¥å‘ç° es çš„ response ç‰¹åˆ«äººæ€§åŒ–ã€‚\nåˆ›å»º maping POST\nhttp://localhost:9200/myindex/fulltext/_mapping body\n{ \u0026#34;properties\u0026#34;: { \u0026#34;content\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;text\u0026#34;, \u0026#34;analyzer\u0026#34;: \u0026#34;ik_max_word\u0026#34;, \u0026#34;search_analyzer\u0026#34;: \u0026#34;ik_max_word\u0026#34; } } } response\n{ \u0026#34;acknowledged\u0026#34;: true } åœ¨è¿™é‡Œåœ¨åˆ›å»ºä¸€ä¸ª type æ˜¯ fulltext çš„åŒæ—¶ï¼ŒæŒ‡å®šäº†è¿™ä¸ª fulltext ç±»å‹çš„å­—æ®µ Mapã€‚åœ¨ mapping ä¸­ï¼Œä¸€èˆ¬æ˜¯è®¾ç½®å­—æ®µæ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œæ¯”å¦‚ boolï¼Œtext ç­‰ã€‚analyzer æ˜¯ç»™æ–‡æ¡£å»ºç´¢å¼•çš„åˆ†è¯æ–¹æ³•ï¼Œsearch_analyzer æ˜¯æœç´¢æ—¶å¯¹æœç´¢çš„å†…å®¹è¿›è¡Œåˆ†è¯çš„æ–¹æ³•ã€‚è¿™é‡Œéƒ½æ˜¯ç”¨äº† ik çš„åˆ†è¯å™¨ã€‚\næ–°å¢ doc POST\nhttp://localhost:9200/myindex/fulltext/1 body\n{ \u0026#34;content\u0026#34;: \u0026#34;ä¸­å›½å´›èµ·å“¦\u0026#34; } response\n{ \u0026#34;_index\u0026#34;: \u0026#34;myindex\u0026#34;, \u0026#34;_type\u0026#34;: \u0026#34;fulltext\u0026#34;, \u0026#34;_id\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;_version\u0026#34;: 1, \u0026#34;result\u0026#34;: \u0026#34;created\u0026#34;, \u0026#34;_shards\u0026#34;: { \u0026#34;total\u0026#34;: 2, \u0026#34;successful\u0026#34;: 1, \u0026#34;failed\u0026#34;: 0 }, \u0026#34;_seq_no\u0026#34;: 0, \u0026#34;_primary_term\u0026#34;: 1 } å¦‚æœæ²¡æœ‰æŒ‡å®š id çš„è¯ï¼Œæ¯æ¬¡æ–°å¢çš„æ—¶å€™éƒ½ä¼šç”¨ es è‡ªåŠ¨ç»™çš„ idã€‚å¦‚æœä¸æ³¨æ„çš„è¯ï¼Œå¯èƒ½ä¼šå‡ºç°é‡å¤æ–°å¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹ä¼šä½¿ç”¨è‡ªå·±ç»™çš„çš„ idã€‚\næœç´¢ POST\nhttp://127.0.0.1:9200/myindex/fulltext/_search body\n{ \u0026#34;query\u0026#34;: { \u0026#34;match\u0026#34;: { \u0026#34;content\u0026#34;: { \u0026#34;query\u0026#34;: \u0026#34;ä¸­å›½\u0026#34; } } } } response\n{ \u0026#34;took\u0026#34;: 98, \u0026#34;timed_out\u0026#34;: false, \u0026#34;_shards\u0026#34;: { \u0026#34;total\u0026#34;: 5, \u0026#34;successful\u0026#34;: 5, \u0026#34;skipped\u0026#34;: 0, \u0026#34;failed\u0026#34;: 0 }, \u0026#34;hits\u0026#34;: { \u0026#34;total\u0026#34;: 1, \u0026#34;max_score\u0026#34;: 0.2876821, \u0026#34;hits\u0026#34;: [ { \u0026#34;_index\u0026#34;: \u0026#34;myindex\u0026#34;, \u0026#34;_type\u0026#34;: \u0026#34;fulltext\u0026#34;, \u0026#34;_id\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;_score\u0026#34;: 0.2876821, \u0026#34;_source\u0026#34;: { \u0026#34;content\u0026#34;: \u0026#34;ä¸­å›½å´›èµ·å“¦\u0026#34; } } ] } }ã€‚ å‰é¢éƒ½æ²¡å•¥ï¼Œä¸»è¦å°±æ˜¯å¦‚ä½•æŠŠæ•°æ®çŒåˆ° es ä¸­ã€‚es ä½œä¸ºä¸€ä¸ªæœç´¢å¼•æ“ï¼Œè‚¯å®šæœç´¢æ‰æ˜¯æœ€é‡è¦çš„ã€‚è¿™é‡Œåªæ˜¯ç”¨çš„æœ€ç®€å•çš„æœç´¢ã€‚å…³äº es çš„æœç´¢ï¼Œæˆ‘åœ¨å®é™…ç”Ÿäº§ä¸­ä¸»è¦ä½¿ç”¨çš„æ˜¯ï¼Œå¤šå­—æ®µçš„æœç´¢ï¼Œä½¿ç”¨äº† bool æ“ä½œç¬¦ã€‚\nåŸç† ç›¸å…³æ€§å¾—åˆ† ElasticsearchÂ é»˜è®¤æŒ‰ç…§ç›¸å…³æ€§å¾—åˆ†æ’åºï¼Œå³æ¯ä¸ªæ–‡æ¡£è·ŸæŸ¥è¯¢çš„åŒ¹é…ç¨‹åº¦ã€‚Elasticsearch ä¸­çš„Â ç›¸å…³æ€§Â æ¦‚å¿µéå¸¸é‡è¦ï¼Œä¹Ÿæ˜¯å®Œå…¨åŒºåˆ«äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ•°æ®åº“ä¸­çš„ä¸€æ¡è®°å½•è¦ä¹ˆåŒ¹é…è¦ä¹ˆä¸åŒ¹é…ã€‚\næœç´¢ è½»é‡çº§æœç´¢ _search\n_search?q=content:ä¸­å›½\nè¿™ç§æœç´¢æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œå¾ˆè½»é‡ã€‚\næŸ¥è¯¢è¡¨è¾¾å¼ å³ dsl å½¢å¼çš„ã€‚ä½¿ç”¨çš„æ˜¯ POST æ–¹æ³•ï¼Œåœ¨ body ä¸­ï¼Œå†™æœç´¢çš„ dslã€‚\nç®€å•çš„ dsl {  \u0026#34;query\u0026#34;: {  \u0026#34;match\u0026#34;: {  \u0026#34;content\u0026#34;: {  \u0026#34;query\u0026#34;: \u0026#34;ä¸­å›½\u0026#34;  }  }  } } bool æ“ä½œç¬¦çš„ DSL { \u0026#34;query\u0026#34; : { \u0026#34;bool\u0026#34;: { \u0026#34;must\u0026#34;: { \u0026#34;match\u0026#34; : { \u0026#34;last_name\u0026#34; : \u0026#34;smith\u0026#34; } }, \u0026#34;filter\u0026#34;: { \u0026#34;range\u0026#34; : { \u0026#34;age\u0026#34; : { \u0026#34;gt\u0026#34; : 30 } } } } } } æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªÂ è¿‡æ»¤å™¨Â ç”¨äºæ‰§è¡Œä¸€ä¸ªèŒƒå›´æŸ¥è¯¢ï¼Œå¹¶å¤ç”¨ä¹‹å‰çš„Â matchÂ æŸ¥è¯¢ã€‚\nçŸ­è¯­æœç´¢ { \u0026#34;query\u0026#34; : { \u0026#34;match_phrase\u0026#34; : { \u0026#34;about\u0026#34; : \u0026#34;rock climbing\u0026#34; } } } å¦‚æœä¸ç”¨çŸ­è¯­æœç´¢çš„è¯ï¼Œä¼šå°†åªå«æœ‰ rock æˆ–è€… climbing çš„è¿”å›ã€‚ä¸ºäº†èƒ½è®©äºŒè€…æ˜¯çŸ­è¯­å½¢å¼ï¼Œes ä¸­æ–°å¢äº†çŸ­è¯­æœç´¢ dslã€‚\né«˜äº® è®¸å¤šåº”ç”¨éƒ½å€¾å‘äºåœ¨æ¯ä¸ªæœç´¢ç»“æœä¸­Â é«˜äº®Â éƒ¨åˆ†æ–‡æœ¬ç‰‡æ®µï¼Œä»¥ä¾¿è®©ç”¨æˆ·çŸ¥é“ä¸ºä½•è¯¥æ–‡æ¡£ç¬¦åˆæŸ¥è¯¢æ¡ä»¶ã€‚åœ¨ Elasticsearch ä¸­æ£€ç´¢å‡ºé«˜äº®ç‰‡æ®µä¹Ÿå¾ˆå®¹æ˜“ã€‚\n{ \u0026#34;query\u0026#34; : { \u0026#34;match_phrase\u0026#34; : { \u0026#34;about\u0026#34; : \u0026#34;rock climbing\u0026#34; } }, \u0026#34;highlight\u0026#34;: { \u0026#34;fields\u0026#34; : { \u0026#34;about\u0026#34; : {} } } } åŠ ä¸Š highlight å…³é”®å­—å³å¯ã€‚\nèšåˆ Â Elasticsearch æœ‰ä¸€ä¸ªåŠŸèƒ½å«èšåˆï¼ˆaggregationsï¼‰ï¼Œå…è®¸æˆ‘ä»¬åŸºäºæ•°æ®ç”Ÿæˆä¸€äº›ç²¾ç»†çš„åˆ†æç»“æœã€‚èšåˆä¸ SQL ä¸­çš„Â GROUP BYÂ ç±»ä¼¼ä½†æ›´å¼ºå¤§ã€‚\n{ \u0026#34;aggs\u0026#34;: { \u0026#34;all_interests\u0026#34;: { \u0026#34;terms\u0026#34;: { \u0026#34;field\u0026#34;: \u0026#34;interests\u0026#34; } } } } ","permalink":"https://zhenfeng-zhu.github.io/post/elasticsearch/","summary":"ä»¥å‰æ²¡æœ‰å¥½å¥½å­¦çš„ä¸œè¥¿ï¼Œç°åœ¨åœ¨å·¥ä½œä¸­æ…¢æ…¢çš„è¡¥å›æ¥äº†ã€‚\nåŸºç¡€æ¦‚å¿µ  ç´¢å¼•  es æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªç´¢å¼•ï¼ˆindexï¼‰ä¸­ã€‚\nç´¢å¼•å°±åƒæ˜¯æ•°æ®åº“ã€‚\n æ–‡æ¡£  æ–‡æ¡£æ˜¯ es çš„å®ä½“ã€‚ç”±å­—æ®µæ„æˆï¼Œæ¯ä¸ªå­—æ®µåŒ…å«å­—æ®µåå’Œä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—æ®µå€¼ã€‚\næ–‡æ¡£å°±åƒæ•°æ®åº“ä¸­çš„ä¸€æ¡æ¡è®°å½•ã€‚\n ç±»å‹  æ¯ä¸ªæ–‡æ¡£éƒ½æœ‰ä¸€ä¸ªç±»å‹ä¸ä¹‹ç›¸å¯¹åº”ã€‚\nç±»å‹å°±åƒæ•°æ®åº“ä¸­çš„è¡¨ã€‚\n Map  æ‰€æœ‰æ–‡æ¡£åœ¨è¢«å†™å…¥åˆ° es ä¸­ï¼Œéƒ½ä¼šè¢«åˆ†æã€‚ç”±ç”¨æˆ·è®¾ç½®ä¸€äº›å‚æ•°å†³å®šå¦‚ä½•åˆ†å‰²è¯æ¡ã€å“ªäº›å­—åº”è¯¥è¢«è¿‡æ»¤æ‰ç­‰ç­‰ã€‚\n èŠ‚ç‚¹  å•ä¸ª es æœåŠ¡å®ä¾‹å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n é›†ç¾¤  å¤šä¸ªååŒå·¥ä½œçš„ es èŠ‚ç‚¹çš„é›†åˆå°±æ˜¯é›†ç¾¤ã€‚\n åˆ†ç‰‡  es å°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªç‰©ç†çš„ Lucene ç´¢å¼•ä¸Šï¼Œè¿™äº›ç‰©ç† Lucene ç´¢å¼•è¢«ç§°ä¸ºåˆ†ç‰‡ã€‚\n å‰¯æœ¬  å‰¯æœ¬å°±æ˜¯æ¯ä¸ªåˆ†ç‰‡éƒ½åšå†—ä½™å¤„ç†ï¼Œä¸€ä¸ªå®•æœºä¹‹åï¼Œä¸å½±å“æœåŠ¡ã€‚\nå¿«é€Ÿå…¥é—¨ å®‰è£… es çš„å®‰è£…å¾ˆç®€å•ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ macï¼Œä¸‹è½½ä¸‹æ¥ zip åŒ…ï¼Œè§£å‹å³å¯ä½¿ç”¨ã€‚\n[elasticsearch-6.2.4] pwd /Users/zhuzhenfeng/Documents/software/elasticsearch-6.2.4 [elasticsearch-6.2.4] ./bin/elasticsearch Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.","title":"elasticsearch"},{"content":"æ•´ç†ä¸€ä¸‹å¸¸ç”¨çš„ git æ“ä½œï¼Œä¸ç”¨å†åˆ°å¤„æ‰¾äº†ã€‚\ngit æ”¾å¼ƒæœ¬åœ°ä¿®æ”¹ï¼Œå¼ºåˆ¶æ›´æ–° git fetch --all git reset --hard origin/master git ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€ git remote set-url origin url cherry-pick å½“ä½ é€šè¿‡ä¸€ç•ªæŒ£æ‰ç»ˆäºæå®šä¸€ä¸ª bug,é¡ºæ‰‹æäº¤åˆ° git æœåŠ¡å™¨,å¿ƒé‡Œä¸€é˜µæš—çˆ½. è¿™æ—¶å‘ç°ä½ å½“å‰æ‰€åœ¨çš„åˆ†æ”¯æ˜¯ master !!!\nè¿™ä¸ªåˆ†æ”¯ä¸æ˜¯å¼€å‘è€…ç”¨æ¥æäº¤ä»£ç çš„,å¯æƒœç°åœ¨å‰æ‰‹ä¹Ÿæ™šäº†.\n å…ˆåˆ‡æ¢åˆ° master  git checkout master  git log  å¤åˆ¶æäº¤çš„ commit id\n  åˆ‡æ¢åˆ° dev, cherry-pick\n  git checkout dev  git cherry-pic ${commit_id} å¸¸ç”¨å¼€å‘æµç¨‹ git checkout -b feature1\ngit commit ä¹‹åï¼Œè¿›è¡Œ rebase\ngit pull \u0026ndash;rebase\ngca!\ngit rvm\n","permalink":"https://zhenfeng-zhu.github.io/post/git/","summary":"æ•´ç†ä¸€ä¸‹å¸¸ç”¨çš„ git æ“ä½œï¼Œä¸ç”¨å†åˆ°å¤„æ‰¾äº†ã€‚\ngit æ”¾å¼ƒæœ¬åœ°ä¿®æ”¹ï¼Œå¼ºåˆ¶æ›´æ–° git fetch --all git reset --hard origin/master git ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€ git remote set-url origin url cherry-pick å½“ä½ é€šè¿‡ä¸€ç•ªæŒ£æ‰ç»ˆäºæå®šä¸€ä¸ª bug,é¡ºæ‰‹æäº¤åˆ° git æœåŠ¡å™¨,å¿ƒé‡Œä¸€é˜µæš—çˆ½. è¿™æ—¶å‘ç°ä½ å½“å‰æ‰€åœ¨çš„åˆ†æ”¯æ˜¯ master !!!\nè¿™ä¸ªåˆ†æ”¯ä¸æ˜¯å¼€å‘è€…ç”¨æ¥æäº¤ä»£ç çš„,å¯æƒœç°åœ¨å‰æ‰‹ä¹Ÿæ™šäº†.\n å…ˆåˆ‡æ¢åˆ° master  git checkout master  git log  å¤åˆ¶æäº¤çš„ commit id\n  åˆ‡æ¢åˆ° dev, cherry-pick\n  git checkout dev  git cherry-pic ${commit_id} å¸¸ç”¨å¼€å‘æµç¨‹ git checkout -b feature1\ngit commit ä¹‹åï¼Œè¿›è¡Œ rebase\ngit pull \u0026ndash;rebase\ngca!\ngit rvm","title":"git å¸¸ç”¨æ“ä½œ"},{"content":"æˆ‘ä»¬çŸ¥é“ js æ˜¯è¿è¡Œå•çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ª node è¿›ç¨‹åªèƒ½è¿è¡Œåœ¨ä¸€ä¸ª cpu ä¸Šã€‚é‚£ä¹ˆå¦‚æœç”¨ node æ¥åš web server çš„è¯ï¼Œå°±æ— æ³•äº«å—åˆ°å¤šæ ¸è¿ç®—çš„å¥½å¤„ã€‚\nä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼š\nå¦‚ä½•æ¦¨å¹²æœåŠ¡å™¨èµ„æºï¼Œåˆ©ç”¨å¤šæ ¸CPUçš„å¹¶å‘ä¼˜åŠ¿ã€‚ node å®˜æ–¹æä¾›çš„è§£å†³æ–¹æ¡ˆæ˜¯ clusterã€‚\n1 cluster æ˜¯ä»€ä¹ˆ ç®€å•æ¥è¯´ï¼š\n åœ¨æœåŠ¡å™¨ä¸ŠåŒæ—¶å¯åŠ¨å¤šä¸ªè¿›ç¨‹ã€‚ æ¯ä¸ªè¿›ç¨‹éƒ½è·‘çš„æ˜¯åŒä¸€ä»½æºç ã€‚ è¿™äº›è¿›ç¨‹å¯ä»¥åŒæ—¶ç›‘å¬ä¸€ä¸ªç«¯å£ã€‚  å…¶ä¸­ï¼š\n è´Ÿè´£å¯åŠ¨å…¶ä»–è¿›ç¨‹çš„å«åš master è¿›ç¨‹ï¼Œä¸åšå…·ä½“å·¥ä½œï¼Œåªè´Ÿè´£å¯åŠ¨å…¶ä»–è¿›ç¨‹ã€‚ å…¶ä»–è¢«å¯åŠ¨çš„å« worker è¿›ç¨‹ã€‚ä»–ä»¬æ¥æ”¶è¯·æ±‚ï¼Œå¯¹å¤–æä¾›æœåŠ¡ã€‚ worker è¿›ç¨‹çš„æ•°é‡ä¸€èˆ¬æ ¹æ®æœåŠ¡å™¨çš„ cpu æ ¸æ•°æ¥å†³å®šï¼Œè¿™æ ·å°±å¯ä»¥å®Œç¾åˆ©ç”¨å¤šæ ¸èµ„æºã€‚  ä»¥ä¸‹æ˜¯å®˜æ–¹æ–‡æ¡£çš„ä¸€ä¸ªä¾‹å­ï¼š\nconst cluster = require(\u0026#39;cluster\u0026#39;); const http = require(\u0026#39;http\u0026#39;); const numCPUs = require(\u0026#39;os\u0026#39;).cpus().length;  if (cluster.isMaster) {  console.log(`ä¸»è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);   // è¡ç”Ÿå·¥ä½œè¿›ç¨‹ã€‚  for (let i = 0; i \u0026lt; numCPUs; i++) {  cluster.fork();  }   cluster.on(\u0026#39;exit\u0026#39;, (worker, code, signal) =\u0026gt; {  console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} å·²é€€å‡º`);  }); } else {  // å·¥ä½œè¿›ç¨‹å¯ä»¥å…±äº«ä»»ä½• TCP è¿æ¥ã€‚  // åœ¨æœ¬ä¾‹å­ä¸­ï¼Œå…±äº«çš„æ˜¯ä¸€ä¸ª HTTP æœåŠ¡å™¨ã€‚  http.createServer((req, res) =\u0026gt; {  res.writeHead(200);  res.end(\u0026#39;ä½ å¥½ä¸–ç•Œ\\n\u0026#39;);  }).listen(8000);   console.log(`å·¥ä½œè¿›ç¨‹ ${process.pid} å·²å¯åŠ¨`); } % node cluster.js ä¸»è¿›ç¨‹ 16391 æ­£åœ¨è¿è¡Œ å·¥ä½œè¿›ç¨‹ 16394 å·²å¯åŠ¨ å·¥ä½œè¿›ç¨‹ 16393 å·²å¯åŠ¨ å·¥ä½œè¿›ç¨‹ 16395 å·²å¯åŠ¨ å·¥ä½œè¿›ç¨‹ 16392 å·²å¯åŠ¨ 2 å¤šè¿›ç¨‹æ¨¡å‹ å®˜ç½‘çš„ç¤ºä¾‹å¾ˆç®€å•ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜è¦è€ƒè™‘å¾ˆå¤šä¸œè¥¿ã€‚\n worker è¿›ç¨‹å¼‚å¸¸é€€å‡ºä»¥åå¦‚ä½•å¤„ç†ï¼Ÿ å¤šä¸ª worker è¿›ç¨‹ä¹‹é—´å¦‚ä½•å…±äº«èµ„æºï¼Ÿ å¤šä¸ª worker è¿›ç¨‹ä¹‹é—´å¦‚ä½•è°ƒåº¦ï¼Ÿ ã€‚ã€‚ã€‚  è¿›ç¨‹å®ˆæŠ¤ å¥å£®æ€§æ˜¯æˆ‘ä»¬åšå¤§å‹åº”ç”¨è¦è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œnode çš„è¿›ç¨‹é€€å‡ºå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š\n æœªæ•è·å¼‚å¸¸ å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰æˆ–è€…ç³»ç»Ÿå¼‚å¸¸  ä»£ç è·‘å‡ºäº†å¼‚å¸¸å´æ²¡æœ‰æ²¡æ•æ‰æ—¶ï¼Œè¿›ç¨‹å°†ä¼šé€€å‡ºï¼Œæ­¤æ—¶ node æä¾›äº† process.on(\u0026lsquo;uncaughtException\u0026rsquo;, handler)æ¥æ•è·ã€‚ä½†æ˜¯å½“ä¸€ä¸ª worker è¿›ç¨‹é‡åˆ°æœª æ•è·çš„å¼‚å¸¸æ—¶ï¼Œä»–å·²ç»å¤„äºä¸€ä¸ªä¸ç¡®å®šçš„çŠ¶æ€ï¼Œæ­¤æ—¶æˆ‘ä»¬åº”è¯¥è®©è¿™ä¸ªè¿›ç¨‹ä¼˜é›…çš„é€€å‡ºã€‚\nä¼˜é›…é€€å‡ºçš„æµç¨‹æ˜¯ï¼š\n å…³é—­å¼‚å¸¸ worker è¿›ç¨‹å’Œæ‰€æœ‰çš„ tcp server(å°†å·²æœ‰çš„è¿æ¥å¿«é€Ÿæ–­å¼€ï¼Œä¸”ä¸å†æ¥æ”¶æ–°çš„è¿æ¥)ï¼Œæ–­å¼€å’Œ master çš„ ipc é€šé“ï¼Œä¸å†æ¥æ”¶æ–°çš„ç”¨æˆ·è¯·æ±‚ã€‚ master ç«‹å³ fork ä¸€ä¸ªæ–°çš„ worker è¿›ç¨‹ï¼Œä¿è¯åœ¨çº¿çš„â€œå·¥äººâ€æ€»æ•°ä¸å˜ã€‚ å¼‚å¸¸ worker ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå¤„ç†å®Œå·²ç»æ¥å—çš„è¯·æ±‚åé€€å‡ºã€‚  è€Œå½“ä¸€ä¸ªè¿›ç¨‹å‡ºç°å¼‚å¸¸å¯¼è‡´ crash æˆ–è€… OOM è¢«ç³»ç»Ÿæ€æ­»æ—¶ï¼Œä¸åƒæœªæ•è·å¼‚å¸¸å‘ç”Ÿæ—¶æˆ‘ä»¬è¿˜æœ‰æœºä¼šè®©è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼Œåªèƒ½å¤Ÿè®©å½“å‰è¿›ç¨‹ç›´æ¥é€€å‡ºï¼ŒMaster ç«‹åˆ» fork ä¸€ä¸ªæ–°çš„ Workerã€‚\nAgent æœºåˆ¶ æœ‰äº›å·¥ä½œå¹¶ä¸éœ€è¦æ¯ä¸ª worker éƒ½å»åšï¼Œå¦‚æœéƒ½åšï¼Œä¸€ä¸ªæ˜¯æµªè´¹èµ„æºï¼Œå¦ä¸€ä¸ªæ›´é‡è¦çš„æ˜¯å¯èƒ½ä¼šå¯¼è‡´å¤šè¿›ç¨‹ä¹‹é—´èµ„æºè®¿é—®å†²çªã€‚\næ¯”å¦‚ï¼šç”Ÿäº§ç¯å¢ƒä¸­ä¸€èˆ¬ä¼šæŒ‰ç…§æ—¥æœŸè¿›è¡Œå½’æ¡£ï¼Œåœ¨å•è¿›ç¨‹æ¨¡å‹çš„æ—¶å€™æ¯”è¾ƒç®€å•ï¼š\n æ¯å¤©å‡Œæ™¨ï¼Œæ‰¹é‡å°†æ—¥å¿—æ–‡ä»¶é‡å‘½å åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶ç»§ç»­å†™å…¥ã€‚  å¦‚æœè¿™ä¸ªä»»åŠ¡ç”± 4 ä¸ªè¿›ç¨‹åŒæ—¶åšï¼Œå°±ä¹±å¥—äº†ã€‚æ‰€ä»¥å¯¹äºè¿™ä¸€ç±»çš„åå°è¿è¡Œé€»è¾‘ï¼Œåº”è¯¥æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹å»æ‰§è¡Œï¼Œè¿™ä¸ªè¿›ç¨‹å°±æ˜¯ agentã€‚agent å¥½æ¯”æ˜¯ç»™å…¶ä»– worker è¯·çš„ä¸€ä¸ªç§˜ä¹¦ï¼Œå®ƒä¸å¯¹å¤–æä¾›æœåŠ¡ï¼Œåªç»™ worker æ‰“å·¥ï¼Œå¤„ç†ä¸€äº›å…¬å…±äº‹åŠ¡ã€‚\nå¦å¤–ï¼Œå…³äº Agent Worker è¿˜æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼š\n ç”±äº Worker ä¾èµ–äº Agentï¼Œæ‰€ä»¥å¿…é¡»ç­‰ Agent åˆå§‹åŒ–å®Œæˆåæ‰èƒ½ fork Worker Agent è™½ç„¶æ˜¯ Worker çš„ã€å°ç§˜ã€ï¼Œä½†æ˜¯ä¸šåŠ¡ç›¸å…³çš„å·¥ä½œä¸åº”è¯¥æ”¾åˆ° Agent ä¸Šå»åšã€‚ ç”±äº Agent çš„ç‰¹æ®Šå®šä½ï¼Œæˆ‘ä»¬åº”è¯¥ä¿è¯å®ƒç›¸å¯¹ç¨³å®šã€‚å½“å®ƒå‘ç”Ÿæœªæ•è·å¼‚å¸¸ï¼Œä¸åº”è¯¥åƒ Worker ä¸€æ ·è®©ä»–é€€å‡ºé‡å¯ï¼Œè€Œæ˜¯è®°å½•å¼‚å¸¸æ—¥å¿—ã€æŠ¥è­¦ç­‰å¾…äººå·¥å¤„ç†ã€‚  3 è¿›ç¨‹é—´é€šè®¯ï¼ˆIPCï¼‰ è™½ç„¶æ¯ä¸ª Worker è¿›ç¨‹æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´å§‹ç»ˆè¿˜æ˜¯éœ€è¦é€šè®¯çš„ï¼Œå«è¿›ç¨‹é—´é€šè®¯ï¼ˆIPCï¼‰ã€‚\nif (cluster.isMaster) {  const worker = cluster.fork();  worker.send(\u0026#39;hi there\u0026#39;);  } else if (cluster.isWorker) {  process.on(\u0026#39;message\u0026#39;, (msg) =\u0026gt; {  process.send(msg);  }); } è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œå·¥ä½œè¿›ç¨‹å°†ä¸»è¿›ç¨‹å‘é€çš„æ¶ˆæ¯ echo å›å»ã€‚\n4 é•¿è¿æ¥ ä¸€äº›ä¸­é—´ä»¶å®¢æˆ·ç«¯éœ€è¦å’ŒæœåŠ¡å™¨å»ºç«‹é•¿è¿æ¥ï¼Œç†è®ºä¸Šä¸€å°æœåŠ¡å™¨æœ€å¥½åªå»ºç«‹ä¸€ä¸ªé•¿è¿æ¥ï¼Œä½†å¤šè¿›ç¨‹æ¨¡å‹ä¼šå¯¼è‡´ n å€ï¼ˆn = Worker è¿›ç¨‹æ•°ï¼‰è¿æ¥è¢«åˆ›å»ºã€‚\nä¸ºäº†å°½å¯èƒ½çš„å¤ç”¨é•¿è¿æ¥ï¼ˆå› ä¸ºå®ƒä»¬å¯¹äºæœåŠ¡ç«¯æ¥è¯´æ˜¯éå¸¸å®è´µçš„èµ„æºï¼‰ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒæ”¾åˆ° Agent è¿›ç¨‹é‡Œç»´æŠ¤ï¼Œç„¶åé€šè¿‡ messenger å°†æ•°æ®ä¼ é€’ç»™å„ä¸ª Workerã€‚è¿™ç§åšæ³•æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å¾€å¾€éœ€è¦å†™å¤§é‡ä»£ç å»å°è£…æ¥å£å’Œå®ç°æ•°æ®çš„ä¼ é€’ï¼Œéå¸¸éº»çƒ¦ã€‚\nå¦å¤–ï¼Œé€šè¿‡ messenger ä¼ é€’æ•°æ®æ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ï¼Œå› ä¸ºå®ƒä¼šé€šè¿‡ Master æ¥åšä¸­è½¬ï¼›ä¸‡ä¸€ IPC é€šé“å‡ºç°é—®é¢˜è¿˜å¯èƒ½å°† Master è¿›ç¨‹ææŒ‚ã€‚\né‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬æä¾›ä¸€ç§æ–°çš„æ¨¡å¼æ¥é™ä½è¿™ç±»å®¢æˆ·ç«¯å°è£…çš„å¤æ‚åº¦ã€‚é€šè¿‡å»ºç«‹ Agent å’Œ Worker çš„ socket ç›´è¿è·³è¿‡ Master çš„ä¸­è½¬ã€‚Agent ä½œä¸ºå¯¹å¤–çš„é—¨é¢ç»´æŒå¤šä¸ª Worker è¿›ç¨‹çš„å…±äº«è¿æ¥ã€‚\næ ¸å¿ƒæ€æƒ³  å—åˆ° Leader/Follower æ¨¡å¼çš„å¯å‘ å®¢æˆ·ç«¯ä¼šè¢«åŒºåˆ†ä¸ºä¸¤ç§è§’è‰²ï¼š  Leader: è´Ÿè´£å’Œè¿œç¨‹æœåŠ¡ç«¯ç»´æŒè¿æ¥ï¼Œå¯¹äºåŒä¸€ç±»çš„å®¢æˆ·ç«¯åªæœ‰ä¸€ä¸ª Leader Follower: ä¼šå°†å…·ä½“çš„æ“ä½œå§”æ‰˜ç»™ Leaderï¼Œå¸¸è§çš„æ˜¯è®¢é˜…æ¨¡å‹ï¼ˆè®© Leader å’Œè¿œç¨‹æœåŠ¡ç«¯äº¤äº’ï¼Œå¹¶ç­‰å¾…å…¶è¿”å›ï¼‰ã€‚   å¦‚ä½•ç¡®å®šè°æ˜¯ Leaderï¼Œè°æ˜¯ Follower å‘¢ï¼Ÿæœ‰ä¸¤ç§æ¨¡å¼ï¼š  è‡ªç”±ç«äº‰æ¨¡å¼ï¼šå®¢æˆ·ç«¯å¯åŠ¨çš„æ—¶å€™é€šè¿‡æœ¬åœ°ç«¯å£çš„äº‰å¤ºæ¥ç¡®å®š Leaderã€‚ä¾‹å¦‚ï¼šå¤§å®¶éƒ½å°è¯•ç›‘å¬ 7777 ç«¯å£ï¼Œæœ€ååªä¼šæœ‰ä¸€ä¸ªå®ä¾‹æŠ¢å åˆ°ï¼Œé‚£å®ƒå°±å˜æˆ Leaderï¼Œå…¶ä½™çš„éƒ½æ˜¯ Followerã€‚ å¼ºåˆ¶æŒ‡å®šæ¨¡å¼ï¼šæ¡†æ¶æŒ‡å®šæŸä¸€ä¸ª Leaderï¼Œå…¶ä½™çš„å°±æ˜¯ Follower   å¯åŠ¨çš„æ—¶å€™ Master ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„ç«¯å£ä½œä¸º Cluster Client ç›‘å¬çš„é€šè®¯ç«¯å£ï¼Œå¹¶å°†å®ƒé€šè¿‡å‚æ•°ä¼ é€’ç»™ Agent å’Œ App Worker Leader å’Œ Follower ä¹‹é—´é€šè¿‡ socket ç›´è¿ï¼ˆé€šè¿‡é€šè®¯ç«¯å£ï¼‰ï¼Œä¸å†éœ€è¦ Master ä¸­è½¬   5 å‚è€ƒèµ„æ–™ å¤šè¿›ç¨‹æ¨¡å‹å’Œè¿›ç¨‹é—´é€šè®¯\nNode.js v8.11.1 æ–‡æ¡£ cluster\n","permalink":"https://zhenfeng-zhu.github.io/post/node%E7%9A%84cluster/","summary":"æˆ‘ä»¬çŸ¥é“ js æ˜¯è¿è¡Œå•çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ª node è¿›ç¨‹åªèƒ½è¿è¡Œåœ¨ä¸€ä¸ª cpu ä¸Šã€‚é‚£ä¹ˆå¦‚æœç”¨ node æ¥åš web server çš„è¯ï¼Œå°±æ— æ³•äº«å—åˆ°å¤šæ ¸è¿ç®—çš„å¥½å¤„ã€‚\nä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼š\nå¦‚ä½•æ¦¨å¹²æœåŠ¡å™¨èµ„æºï¼Œåˆ©ç”¨å¤šæ ¸CPUçš„å¹¶å‘ä¼˜åŠ¿ã€‚ node å®˜æ–¹æä¾›çš„è§£å†³æ–¹æ¡ˆæ˜¯ clusterã€‚\n1 cluster æ˜¯ä»€ä¹ˆ ç®€å•æ¥è¯´ï¼š\n åœ¨æœåŠ¡å™¨ä¸ŠåŒæ—¶å¯åŠ¨å¤šä¸ªè¿›ç¨‹ã€‚ æ¯ä¸ªè¿›ç¨‹éƒ½è·‘çš„æ˜¯åŒä¸€ä»½æºç ã€‚ è¿™äº›è¿›ç¨‹å¯ä»¥åŒæ—¶ç›‘å¬ä¸€ä¸ªç«¯å£ã€‚  å…¶ä¸­ï¼š\n è´Ÿè´£å¯åŠ¨å…¶ä»–è¿›ç¨‹çš„å«åš master è¿›ç¨‹ï¼Œä¸åšå…·ä½“å·¥ä½œï¼Œåªè´Ÿè´£å¯åŠ¨å…¶ä»–è¿›ç¨‹ã€‚ å…¶ä»–è¢«å¯åŠ¨çš„å« worker è¿›ç¨‹ã€‚ä»–ä»¬æ¥æ”¶è¯·æ±‚ï¼Œå¯¹å¤–æä¾›æœåŠ¡ã€‚ worker è¿›ç¨‹çš„æ•°é‡ä¸€èˆ¬æ ¹æ®æœåŠ¡å™¨çš„ cpu æ ¸æ•°æ¥å†³å®šï¼Œè¿™æ ·å°±å¯ä»¥å®Œç¾åˆ©ç”¨å¤šæ ¸èµ„æºã€‚  ä»¥ä¸‹æ˜¯å®˜æ–¹æ–‡æ¡£çš„ä¸€ä¸ªä¾‹å­ï¼š\nconst cluster = require(\u0026#39;cluster\u0026#39;); const http = require(\u0026#39;http\u0026#39;); const numCPUs = require(\u0026#39;os\u0026#39;).cpus().length;  if (cluster.isMaster) {  console.log(`ä¸»è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);   // è¡ç”Ÿå·¥ä½œè¿›ç¨‹ã€‚  for (let i = 0; i \u0026lt; numCPUs; i++) {  cluster.","title":"node çš„ cluster"},{"content":"module é¦–å…ˆç¬¬ä¸€ä¸ªå°±æ˜¯ es6 çš„ moduleã€‚\nçœ‹åˆ°åˆ«äººå†™çš„\nimport { a } from \u0026#34;./module\u0026#34;; æ‰€ä»¥è‡ªå·±ä¹Ÿæƒ³è¦è¿™ä¹ˆå†™ï¼Œä½†æ˜¯æ¯æ¬¡è¿è¡Œçš„æ—¶å€™éƒ½ä¼šæŠ¥é”™ã€‚\n// demo2.js export const a = \u0026#34;hello\u0026#34;;  //demo1.js import { a } from \u0026#34;./demo2\u0026#34;;  function hello() {  console.log(a); } zhuzhenfengdeMacBook-Pro :: node/node-example Â» node demo1.js /Users/zhuzhenfeng/Documents/github/node/node-example/demo1.js:1 (function (exports, require, module, __filename, __dirname) { import { a } from \u0026#34;./demo2\u0026#34;;  ^  SyntaxError: Unexpected token {  at new Script (vm.js:74:7)  at createScript (vm.js:246:10)  at Object.runInThisContext (vm.js:298:10)  at Module._compile (internal/modules/cjs/loader.js:646:28)  at Object.Module._extensions..js (internal/modules/cjs/loader.js:689:10)  at Module.load (internal/modules/cjs/loader.js:589:32)  at tryModuleLoad (internal/modules/cjs/loader.js:528:12)  at Function.Module._load (internal/modules/cjs/loader.js:520:3)  at Function.Module.runMain (internal/modules/cjs/loader.js:719:10)  at startup (internal/bootstrap/node.js:228:19) zhuzhenfengdeMacBook-Pro :: node/node-example Â» åæ¥ä»”ç»†æŸ¥äº†èµ„æ–™ä¹‹åï¼Œæ‰å‘ç°ï¼Œnode ç°åœ¨è¿˜ä¸èƒ½è¿™ä¹ˆä½¿ç”¨ã€‚\nå¦‚ä¸‹æ˜¯è§£å†³çš„åŠæ³•ã€‚\nç»™æ¯ä¸ª js æ–‡ä»¶éƒ½ä»¥ mjs å‘½åã€‚\n// module.js export const a = \u0026#34;hello\u0026#34;;  // useModule.js import { a } from \u0026#34;./module.mjs\u0026#34;;  function hello() {  console.log(a); }  hello(); zhuzhenfengdeMacBook-Pro :: node/node-example Â» node --experimental-modules useModule.mjs (node:15282) ExperimentalWarning: The ESM module loader is experimental. hello zhuzhenfengdeMacBook-Pro :: node/node-example Â» è¿™æ ·æ‰èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/node%E8%B8%A9%E5%9D%91/","summary":"module é¦–å…ˆç¬¬ä¸€ä¸ªå°±æ˜¯ es6 çš„ moduleã€‚\nçœ‹åˆ°åˆ«äººå†™çš„\nimport { a } from \u0026#34;./module\u0026#34;; æ‰€ä»¥è‡ªå·±ä¹Ÿæƒ³è¦è¿™ä¹ˆå†™ï¼Œä½†æ˜¯æ¯æ¬¡è¿è¡Œçš„æ—¶å€™éƒ½ä¼šæŠ¥é”™ã€‚\n// demo2.js export const a = \u0026#34;hello\u0026#34;;  //demo1.js import { a } from \u0026#34;./demo2\u0026#34;;  function hello() {  console.log(a); } zhuzhenfengdeMacBook-Pro :: node/node-example Â» node demo1.js /Users/zhuzhenfeng/Documents/github/node/node-example/demo1.js:1 (function (exports, require, module, __filename, __dirname) { import { a } from \u0026#34;./demo2\u0026#34;;  ^  SyntaxError: Unexpected token {  at new Script (vm.js:74:7)  at createScript (vm.","title":"node è¸©å‘"},{"content":"å†™ node ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ•´ç†ä¸€ä¸‹å­¦ä¹ ç¬”è®°ï¼Œå…±åŒè¿›æ­¥\nä»€ä¹ˆæ˜¯ node é¦–å…ˆçœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯ node.js\n Node æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç«¯ JavaScript Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒ Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆ Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿ  æ¨¡å—ç³»ç»Ÿæ˜¯ node æœ€åŸºæœ¬ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ã€‚ä¸€èˆ¬å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š\n åŸç”Ÿæ¨¡å— æ–‡ä»¶æ¨¡å— ç¬¬ä¸‰æ–¹æ¨¡å— è‡ªå®šä¹‰æ¨¡å—  node ç¤¾åŒºå´‡å°š DRY æ–‡åŒ–ï¼Œå³ Don\u0026rsquo;t repeate yourselfã€‚è¿™ç§æ–‡åŒ–ä½¿å¾— node çš„ç”Ÿæ€å¼‚å¸¸ç¹è£ï¼ŒåŒæ ·ä¹Ÿç”±äºæŸäº›åŒ…çš„è´¨é‡ä½ä¸‹å¼•æ¥äº†ä¸€äº›è¯Ÿç—…ã€‚\nè°ˆè°ˆè‡ªå®šä¹‰æ¨¡å— æˆ‘ä»¬åœ¨å†™ node ç¨‹åºçš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨å†™è‡ªå®šä¹‰æ¨¡å—ã€‚\n  åˆ›å»ºæ¨¡å—\n// b.js function FunA(){  return \u0026#34;hello world\u0026#34;; }  // æš´éœ²æ–¹æ³•FunA module.exports = FunA;   åŠ è½½æ¨¡å—\n// a.js const FunA=require(\u0026#39;./b.js\u0026#39;);  // è¿è¡ŒFunA const name=FunA(); console.log(name);   åœ¨åšæ¨¡å—åˆ°å¤„çš„æ—¶å€™æœ‰ä¸¤ç§æ–¹å¼ï¼š\n  module.exports\nmodule.exports å°± Node.js ç”¨äºå¯¹å¤–æš´éœ²ï¼Œæˆ–è€…è¯´å¯¹å¤–å¼€æ”¾æŒ‡å®šè®¿é—®æƒé™çš„ä¸€ä¸ªå¯¹è±¡ã€‚\nä¸€ä¸ªæ¨¡å—ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª module.exportsï¼Œå¦‚æœæœ‰å¤šä¸ªé‚£åé¢çš„åˆ™ä¼šè¦†ç›–å‰é¢çš„ã€‚\n  exports\nexports æ˜¯ module å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨å¾ˆå¤šæ—¶å€™ä¸€ä¸ª js æ–‡ä»¶æœ‰å¤šä¸ªéœ€è¦æš´éœ²çš„æ–¹æ³•æˆ–æ˜¯å¯¹è±¡ï¼Œmodule.exports åˆåªèƒ½æš´éœ²ä¸€ä¸ªï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ° exports:\nfunction FunA(){  return \u0026#39;Tom\u0026#39;; }  function FunB(){  return \u0026#39;Sam\u0026#39;; }  exports.FunA = FunA; exports.FunB = FunB; //FunA = exports,exports æ˜¯ä¸€ä¸ªå¯¹è±¡ var FunA = require(\u0026#39;./b.js\u0026#39;); var name1 = FunA.FunA();// è¿è¡Œ FunAï¼Œname = \u0026#39;Tom\u0026#39; var name2 = FunA.FunB();// è¿è¡Œ FunBï¼Œname = \u0026#39;Sam\u0026#39; console.log(name1); console.log(name2); å½“ç„¶åœ¨å¼•å…¥çš„æ—¶å€™ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š\n//FunA = exports,exports æ˜¯ä¸€ä¸ªå¯¹è±¡ var {FunA, FunB} = require(\u0026#39;./b.js\u0026#39;); var name1 = FunA();// è¿è¡Œ FunAï¼Œname = \u0026#39;Tom\u0026#39; var name2 = FunB();// è¿è¡Œ FunBï¼Œname = \u0026#39;Sam\u0026#39; console.log(name1); console.log(name2);   å¸¸ç”¨çš„åŸç”Ÿæ¨¡å— å¸¸ç”¨çš„åŸç”Ÿæ¨¡å—æœ‰å¦‚ä¸‹å››ä¸ªï¼š\n http url queryString fs  http æ‰€æœ‰åç«¯çš„è¯­è¨€è¦æƒ³è¿è¡Œèµ·æ¥ï¼Œéƒ½å¾—æœ‰æœåŠ¡å™¨ã€‚node é€šè¿‡åŸç”Ÿçš„ http æ¨¡å—æ¥æ­å»ºæœåŠ¡å™¨ï¼š\n åŠ è½½ http æ¨¡å— è°ƒç”¨ http.createServer() æ–¹æ³•åˆ›å»ºæœåŠ¡ï¼Œæ–¹æ³•æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°ä¸­æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¯·æ±‚ä½“ï¼Œç¬¬äºŒä¸ªæ˜¯å“åº”ä½“ã€‚ åœ¨å›è°ƒå‡½æ•°ä¸­ä¸€å®šè¦ä½¿ç”¨ response.end() æ–¹æ³•ï¼Œç”¨äºç»“æŸå½“å‰è¯·æ±‚ï¼Œä¸ç„¶å½“å‰è¯·æ±‚ä¼šä¸€ç›´å¤„åœ¨ç­‰å¾…çš„çŠ¶æ€ã€‚ è°ƒç”¨ listen ç›‘å¬ä¸€ä¸ªç«¯å£ã€‚  //åŸç”Ÿæ¨¡å— var http = require(\u0026#39;http\u0026#39;);  http.createServer(function(reqeust, response){  response.end(\u0026#39;Hello Node\u0026#39;); }).listen(8080); å¤„ç†å‚æ•°\n  get\nå½“ get è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨é€šè¿‡ request.method æ¥åˆ¤æ–­å½“å‰çš„è¯·æ±‚æ–¹å¼å¹¶é€šè¿‡ request.url æ¥è·å–å½“å‰çš„è¯·æ±‚å‚æ•°ï¼š\nvar http = require(\u0026#39;http\u0026#39;); var url = require(\u0026#39;url\u0026#39;);  http.createServer(function(req, res){  var params = url.parse(req.url, true).query;  res.end(params);  }).listen(3000);   post\npost è¯·æ±‚åˆ™ä¸èƒ½é€šè¿‡ url æ¥è·å–ï¼Œè¿™æ—¶å€™å°±å¾—å¯¹è¯·æ±‚ä½“è¿›è¡Œäº‹ä»¶ç›‘å¬ã€‚\nvar http = require(\u0026#39;http\u0026#39;); var util = require(\u0026#39;util\u0026#39;); var querystring = require(\u0026#39;querystring\u0026#39;);  http.createServer(function(req, res){  // å®šä¹‰äº†ä¸€ä¸ªpostå˜é‡ï¼Œç”¨äºæš‚å­˜è¯·æ±‚ä½“çš„ä¿¡æ¯  var post = \u0026#39;\u0026#39;;   // é€šè¿‡reqçš„dataäº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œæ¯å½“æ¥å—åˆ°è¯·æ±‚ä½“çš„æ•°æ®ï¼Œå°±ç´¯åŠ åˆ°postå˜é‡ä¸­  req.on(\u0026#39;data\u0026#39;, function(chunk){  post += chunk;  });   // åœ¨endäº‹ä»¶è§¦å‘åï¼Œé€šè¿‡querystring.parseå°†postè§£æä¸ºçœŸæ­£çš„POSTè¯·æ±‚æ ¼å¼ï¼Œç„¶åå‘å®¢æˆ·ç«¯è¿”å›ã€‚  req.on(\u0026#39;end\u0026#39;, function(){  post = querystring.parse(post);  res.end(util.inspect(post));  }); }).listen(3000);   url url å’Œ http æ˜¯é…åˆä½¿ç”¨çš„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ url éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ï¼ŒåŒ…å«çš„ä¿¡æ¯ä¹Ÿæ¯”è¾ƒå¤šï¼Œæ¯”å¦‚æœ‰ï¼šåè®®ã€ä¸»æœºåã€ç«¯å£ã€è·¯å¾„ã€å‚æ•°ã€é”šç‚¹ç­‰ã€‚å¦‚æœæ˜¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œç›´æ¥è§£æçš„è¯ï¼Œç›¸å½“éº»çƒ¦ï¼Œnode æä¾›çš„ url æ¨¡å—ä¾¿å¯è½»æ¾è§£å†³è¿™ä¸€ç±»çš„é—®é¢˜ã€‚\nå­—ç¬¦ä¸²è½¬å¯¹è±¡  æ ¼å¼ï¼šurl.parse(urlstring, boolean) å‚æ•°  urlstringï¼šå­—ç¬¦ä¸²æ ¼å¼çš„ url booleanï¼šåœ¨ url ä¸­æœ‰å‚æ•°ï¼Œé»˜è®¤å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚æœæ­¤å‚æ•°ä¸º trueï¼Œåˆ™ä¼šè‡ªåŠ¨å°†å‚æ•°è½¬è½¬å¯¹è±¡   å¸¸ç”¨å±æ€§  hrefï¼š è§£æå‰çš„å®Œæ•´åŸå§‹ URLï¼Œåè®®åå’Œä¸»æœºåå·²è½¬ä¸ºå°å†™ protocolï¼š è¯·æ±‚åè®®ï¼Œå°å†™ hostï¼š url ä¸»æœºåï¼ŒåŒ…æ‹¬ç«¯å£ä¿¡æ¯ï¼Œå°å†™ hostname: ä¸»æœºåï¼Œå°å†™ port: ä¸»æœºçš„ç«¯å£å· pathname: URL ä¸­è·¯å¾„ï¼Œä¸‹é¢ä¾‹å­çš„ /one search: æŸ¥è¯¢å¯¹è±¡ï¼Œå³ï¼šqueryStringï¼ŒåŒ…æ‹¬ä¹‹å‰çš„é—®å·â€œ?â€ path: pathname å’Œ search çš„åˆé›† query: æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­çš„å‚æ•°éƒ¨åˆ†ï¼ˆé—®å·åé¢éƒ¨åˆ†å­—ç¬¦ä¸²ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ querystring.parse() è§£æåè¿”å›çš„å¯¹è±¡ hash: é”šç‚¹éƒ¨åˆ†ï¼ˆå³ï¼šâ€œ#â€åŠå…¶åçš„éƒ¨åˆ†ï¼‰    å¯¹è±¡è½¬å­—ç¬¦ä¸²  æ ¼å¼ï¼šurl.format(urlObj) å‚æ•° urlObj åœ¨æ ¼å¼åŒ–çš„æ—¶å€™ä¼šåšå¦‚ä¸‹å¤„ç†  href: ä¼šè¢«å¿½ç•¥ï¼Œä¸åšå¤„ç† protocolï¼šæ— è®ºæœ«å°¾æ˜¯å¦æœ‰å†’å·éƒ½ä¼šå¤„ç†ï¼Œåè®®åŒ…æ‹¬ http, https, ftp, gopher, file åç¼€æ˜¯ :// (å†’å·-æ–œæ -æ–œæ ) hostnameï¼šå¦‚æœ host å±æ€§æ²¡è¢«å®šä¹‰ï¼Œåˆ™ä¼šä½¿ç”¨æ­¤å±æ€§ portï¼šå¦‚æœ host å±æ€§æ²¡è¢«å®šä¹‰ï¼Œåˆ™ä¼šä½¿ç”¨æ­¤å±æ€§ hostï¼šä¼˜å…ˆä½¿ç”¨ï¼Œå°†ä¼šæ›¿ä»£ hostname å’Œ port pathnameï¼šå°†ä¼šåŒæ ·å¤„ç†æ— è®ºç»“å°¾æ˜¯å¦æœ‰/ (æ–œæ ) searchï¼šå°†ä¼šæ›¿ä»£ query å±æ€§ï¼Œæ— è®ºå‰é¢æ˜¯å¦æœ‰ ? (é—®å·)ï¼Œéƒ½ä¼šåŒæ ·çš„å¤„ç† queryï¼š(object ç±»å‹; è¯¦ç»†è¯·çœ‹ querystring) å¦‚æœæ²¡æœ‰ search,å°†ä¼šä½¿ç”¨æ­¤å±æ€§. hashï¼šæ— è®ºå‰é¢æ˜¯å¦æœ‰# (äº•å·, é”šç‚¹)ï¼Œéƒ½ä¼šåŒæ ·å¤„ç†    æ‹¼æ¥ å½“æœ‰å¤šä¸ª url éœ€è¦æ‹¼æ¥å¤„ç†çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨åˆ° url.resolve\nvar url = require(\u0026#39;url\u0026#39;); url.resolve(\u0026#39;http://dk-lan.com/\u0026#39;, \u0026#39;/one\u0026#39;)// \u0026#39;http://dk-lan.com/one\u0026#39; querystring url æ˜¯å¯¹ url å­—ç¬¦ä¸²çš„å¤„ç†ï¼Œè€Œ querystring å°±æ˜¯ä»…é’ˆå¯¹å‚æ•°çš„å¤„ç†ã€‚\nå­—ç¬¦ä¸²è½¬å¯¹è±¡ var str = \u0026#39;firstname=dk\u0026amp;url=http%3A%2F%2Fdk-lan.com\u0026amp;lastname=tom\u0026amp;passowrd=123456\u0026#39;; var param = querystring.parse(param); //ç»“æœ //{firstname:\u0026#34;dk\u0026#34;, url:\u0026#34;http://dk-lan.com\u0026#34;, lastname: \u0026#39;tom\u0026#39;, passowrd: 123456}; å¯¹è±¡è½¬å­—ç¬¦ä¸² var querystring = require(\u0026#39;querystring\u0026#39;);  var obj = {firstname:\u0026#34;dk\u0026#34;, url:\u0026#34;http://dk-lan.com\u0026#34;, lastname: \u0026#39;tom\u0026#39;, passowrd: 123456}; //å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸² var param = querystring.stringify(obj); //ç»“æœ //firstname=dk\u0026amp;url=http%3A%2F%2Fdk-lan.com\u0026amp;lastname=tom\u0026amp;passowrd=123456 fs ä»»ä½•æœåŠ¡ç«¯è¯­è¨€éƒ½ä¸èƒ½ç¼ºå¤±æ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚\nè¯»å–æ–‡æœ¬ \u0026ndash; å¼‚æ­¥è¯»å– var fs = require(\u0026#39;fs\u0026#39;); // å¼‚æ­¥è¯»å– // å‚æ•°1ï¼šæ–‡ä»¶è·¯å¾„ï¼Œ // å‚æ•°2ï¼šè¯»å–æ–‡ä»¶åçš„å›è°ƒ fs.readFile(\u0026#39;demoFile.txt\u0026#39;, function (err, data) {  if (err) {  return console.error(err);  }  console.log(\u0026#34;å¼‚æ­¥è¯»å–: \u0026#34; + data.toString()); }); è¯»å–æ–‡æœ¬ \u0026ndash; åŒæ­¥è¯»å– var fs = require(\u0026#39;fs\u0026#39;); var data = fs.readFileSync(\u0026#39;demoFile.txt\u0026#39;); console.log(\u0026#34;åŒæ­¥è¯»å–: \u0026#34; + data.toString()); å†™å…¥æ–‡æœ¬ \u0026ndash; è¦†ç›–å†™å…¥ var fs = require(\u0026#39;fs\u0026#39;); //æ¯æ¬¡å†™å…¥æ–‡æœ¬éƒ½ä¼šè¦†ç›–ä¹‹å‰çš„æ–‡æœ¬å†…å®¹ fs.writeFile(\u0026#39;input.txt\u0026#39;, \u0026#39;æŠµåˆ¶ä¸€åˆ‡ä¸åˆ©äºä¸­å›½å’Œä¸–ç•Œå’Œå¹³çš„åŠ¨æœºï¼\u0026#39;, function(err) {  if (err) {  return console.error(err);  }  console.log(\u0026#34;æ•°æ®å†™å…¥æˆåŠŸï¼\u0026#34;);  console.log(\u0026#34;--------æˆ‘æ˜¯åˆ†å‰²çº¿-------------\u0026#34;)  console.log(\u0026#34;è¯»å–å†™å…¥çš„æ•°æ®ï¼\u0026#34;);  fs.readFile(\u0026#39;input.txt\u0026#39;, function (err, data) {  if (err) {  return console.error(err);  }  console.log(\u0026#34;å¼‚æ­¥è¯»å–æ–‡ä»¶æ•°æ®: \u0026#34; + data.toString());  }); }); å†™å…¥æ–‡æœ¬ \u0026ndash; è¿½åŠ å†™å…¥ var fs = require(\u0026#39;fs\u0026#39;); fs.appendFile(\u0026#39;input.txt\u0026#39;, \u0026#39;æ„¿ä¸–ç•Œå’Œå¹³ï¼\u0026#39;, function (err) {  if (err) {  return console.error(err);  }  console.log(\u0026#34;æ•°æ®å†™å…¥æˆåŠŸï¼\u0026#34;);  console.log(\u0026#34;--------æˆ‘æ˜¯åˆ†å‰²çº¿-------------\u0026#34;)  console.log(\u0026#34;è¯»å–å†™å…¥çš„æ•°æ®ï¼\u0026#34;);  fs.readFile(\u0026#39;input.txt\u0026#39;, function (err, data) {  if (err) {  return console.error(err);  }  console.log(\u0026#34;å¼‚æ­¥è¯»å–æ–‡ä»¶æ•°æ®: \u0026#34; + data.toString());  }); }); å›¾ç‰‡è¯»å– å›¾ç‰‡è¯»å–ä¸åŒäºæ–‡æœ¬ï¼Œå› ä¸ºæ–‡æœ¬è¯»å‡ºæ¥å¯ä»¥ç›´æ¥ç”¨ console.log() æ‰“å°ï¼Œä½†å›¾ç‰‡åˆ™éœ€è¦åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºï¼Œæ‰€ä»¥éœ€è¦å…ˆæ­å»º web æœåŠ¡ï¼Œç„¶åæŠŠä»¥å­—èŠ‚æ–¹å¼è¯»å–çš„å›¾ç‰‡åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“ã€‚\n å›¾ç‰‡è¯»å–æ˜¯ä»¥å­—èŠ‚çš„æ–¹å¼ å›¾ç‰‡åœ¨æµè§ˆå™¨çš„æ¸²æŸ“å› ä¸ºæ²¡æœ‰ img æ ‡ç­¾ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®å“åº”å¤´ä¸º image  var http = require(\u0026#39;http\u0026#39;); var fs = require(\u0026#39;fs\u0026#39;); var content = fs.readFileSync(\u0026#39;001.jpg\u0026#39;, \u0026#34;binary\u0026#34;);  http.createServer(function(request, response){  response.writeHead(200, {\u0026#39;Content-Type\u0026#39;: \u0026#39;image/jpeg\u0026#39;});  response.write(content, \u0026#34;binary\u0026#34;);  response.end(); }).listen(8888);  console.log(\u0026#39;Server running at http://127.0.0.1:8888/\u0026#39;); stream æµå¤„ç† å¯¹ http æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„ request å¯¹è±¡å°±æ˜¯ä¸€ä¸ª Streamï¼Œè¿˜æœ‰ stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ã€‚å¾€å¾€ç”¨äºæ‰“å¼€å¤§å‹çš„æ–‡æœ¬æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªè¯»å–æ“ä½œçš„æ•°æ®æµã€‚æ‰€è°“å¤§å‹æ–‡æœ¬æ–‡ä»¶ï¼ŒæŒ‡çš„æ˜¯æ–‡æœ¬æ–‡ä»¶çš„ä½“ç§¯å¾ˆå¤§ï¼Œè¯»å–æ“ä½œçš„ç¼“å­˜è£…ä¸ä¸‹ï¼Œåªèƒ½åˆ†æˆå‡ æ¬¡å‘é€ï¼Œæ¯æ¬¡å‘é€ä¼šè§¦å‘ä¸€ä¸ª data äº‹ä»¶ï¼Œå‘é€ç»“æŸä¼šè§¦å‘ end äº‹ä»¶ã€‚\nä¸»è¦åˆ†ä¸º\n è¯»å–æµ å†™å…¥æµ ç®¡é“æµ é“¾å¼æµ  è¿™å‡ ç§æµéƒ½æ˜¯ fs çš„ä¸€éƒ¨åˆ†ã€‚\nè·¯ç”± åœ¨ BS æ¶æ„ä¸­ï¼Œè·¯ç”±çš„æ¦‚å¿µéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥ç†è§£ä¸ºæ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚çš„ url æ˜ å°„åˆ°ä¸åŒçš„æ–¹æ³•å®ç°ã€‚ä¸€èˆ¬ web æ¡†æ¶ä¸­éƒ½ä¼šæœ‰ç›¸åº”çš„è·¯ç”±æ¨¡å—ã€‚ä½†æ˜¯åœ¨åŸç”Ÿ node ä¸­å»å¤„ç†çš„è¯åªèƒ½æ˜¯è§£æ url æ¥è¿›è¡Œæ˜ å°„ï¼Œå®ç°èµ·æ¥ä¸å¤Ÿç®€æ´ã€‚\nfetch axios æ˜¯ä¸€ç§å¯¹ ajax çš„å°è£…ï¼Œfetch æ˜¯ä¸€ç§æµè§ˆå™¨åŸç”Ÿå®ç°çš„è¯·æ±‚æ–¹å¼ï¼Œè·Ÿ ajax å¯¹ç­‰ã€‚\nåœ¨ç°åœ¨å‘èµ· http è¯·æ±‚é‡Œï¼Œéƒ½æ˜¯é€šè¿‡ fetch æ¥å‘é€è¯·æ±‚ï¼Œå’Œ ajax ç±»ä¼¼ã€‚\nconst fetch=require(\u0026#39;isomorphic-fetch\u0026#39;);  const options={  header:{},  body:JSON.strify({}),  method: \u0026#39;\u0026#39; }  try{  const res=await fetch(\u0026#39;url\u0026#39;, options); }catch(err){  } Async Node.js æ˜¯ä¸€ä¸ªå¼‚æ­¥æœºåˆ¶çš„æœåŠ¡ç«¯è¯­è¨€ï¼Œåœ¨å¤§é‡å¼‚æ­¥çš„åœºæ™¯ä¸‹éœ€è¦æŒ‰é¡ºåºæ‰§è¡Œï¼Œé‚£æ­£å¸¸åšæ³•å°±æ˜¯å›è°ƒåµŒå¥—å›è°ƒï¼Œå›è°ƒåµŒå¥—å¤ªå¤šçš„é—®é¢˜è¢«ç§°ä¹‹å›è°ƒåœ°ç‹±ã€‚\nNode.js ä¸ºè§£å†³è¿™ä¸€é—®é¢˜æ¨å‡ºäº†å¼‚æ­¥æ§åˆ¶æµ â€”â€”â€”â€” Async\nAsync/Await\nAsync/Await å°± ES7 çš„æ–¹æ¡ˆï¼Œç»“åˆ ES6 çš„ Promise å¯¹è±¡ï¼Œä½¿ç”¨å‰è¯·ç¡®å®š Node.js çš„ç‰ˆæœ¬æ˜¯ 7.6 ä»¥ä¸Šã€‚\nAsync/await çš„ä¸»è¦ç›Šå¤„æ˜¯å¯ä»¥é¿å…å›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰ï¼Œä¸”ä»¥æœ€æ¥è¿‘åŒæ­¥ä»£ç çš„æ–¹å¼ç¼–å†™å¼‚æ­¥ä»£ç ã€‚\nåŸºæœ¬è§„åˆ™\n async è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª async å‡½æ•°ï¼Œawait åªèƒ½ç”¨åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ã€‚ await è¡¨ç¤ºåœ¨è¿™é‡Œç­‰å¾… promise è¿”å›ç»“æœäº†ï¼Œå†ç»§ç»­æ‰§è¡Œã€‚ await åé¢è·Ÿç€çš„åº”è¯¥æ˜¯ä¸€ä¸ª promise å¯¹è±¡  express æ¡†æ¶ ä½¿ç”¨ nodeï¼Œéƒ½ç»•ä¸å¼€ expressã€‚\nç®€å•ä½¿ç”¨ express çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œç”±äºæˆ‘æœ€æ—©æ¥è§¦çš„æ˜¯ spring é‚£å¥— web æ¡†æ¶ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨åˆ° express çš„æ—¶å€™è§‰å¾— node çš„ web ç‰¹åˆ«è½»é‡ç®€å•ã€‚\nåŠ è½½æ¨¡å—\nconst express=require(\u0026#39;express\u0026#39;); const app=express(); ç›‘å¬ç«¯å£ 8080\napp.listen(3000, ()=\u0026gt;consloe.log(\u0026#39;running\u0026#39;)); è·¯ç”± express å¯¹è·¯ç”±çš„å¤„ç†ç‰¹åˆ«ç®€å•ï¼Œé…åˆä¸­é—´ä»¶ body parserï¼Œå¾ˆæ–¹ä¾¿çš„æä¾› rest æ¥å£ï¼š\napp.get(\u0026#39;/\u0026#39;, (req, res)=\u0026gt;{  res.send(\u0026#39;hello world\u0026#39;); }) response.send() å¯ç†è§£ä¸º response.end()ï¼Œå…¶ä¸­ä¸€ä¸ªä¸åŒç‚¹åœ¨äº response.send() å‚æ•°å¯ä¸ºå¯¹è±¡ã€‚\nNode.js é»˜è®¤æ˜¯ä¸èƒ½è®¿é—®é™æ€èµ„æºæ–‡ä»¶ï¼ˆ.htmlã€.jsã€.cssã€.jpg ç­‰ï¼‰ï¼Œå¦‚æœè¦è®¿é—®æœåŠ¡ç«¯çš„é™æ€èµ„æºæ–‡ä»¶åˆ™è¦ç”¨åˆ°æ–¹æ³• sendFile\n__dirname ä¸º Node.js çš„ç³»ç»Ÿå˜é‡ï¼ŒæŒ‡å‘æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚\napp.get(\u0026#39;/index.html\u0026#39;, function (req, res) {  res.sendFile( __dirname + \u0026#34;/\u0026#34; + \u0026#34;index.html\u0026#34; ); }); Express \u0026ndash; GET å‚æ•°æ¥æ”¶ä¹‹è·¯å¾„æ–¹å¼\nè®¿é—®åœ°å€ï¼šhttp://localhost:8080/getusers/admin/18ï¼Œå¯é€šè¿‡ request.params æ¥è·å–å‚æ•°\napp.get(\u0026#39;/getUsers/:username/:age\u0026#39;, function(request, response){  var params = {  username: request.params.username,  age: request.params.age  }  response.send(params); }) Express \u0026ndash; POST\n post å‚æ•°æ¥æ”¶ï¼Œå¯ä¾èµ–ç¬¬ä¸‰æ–¹æ¨¡å— body-parser è¿›è¡Œè½¬æ¢ä¼šæ›´æ–¹ä¾¿ã€æ›´ç®€å•ï¼Œè¯¥æ¨¡å—ç”¨äºå¤„ç† JSON, Raw, Text å’Œ URL ç¼–ç çš„æ•°æ®ã€‚ å®‰è£… body-parser npm install body-parser å‚æ•°æ¥å—å’Œ GET åŸºæœ¬ä¸€æ ·ï¼Œä¸åŒçš„åœ¨äº GET æ˜¯ request.query è€Œ POST çš„æ˜¯ request.body  var bodyParser = require(\u0026#39;body-parser\u0026#39;); // åˆ›å»º application/x-www-form-urlencoded ç¼–ç è§£æ var urlencodedParser = bodyParser.urlencoded({ extended: false }) app.post(\u0026#39;/getUsers\u0026#39;, urlencodedParser, function (request, response) {  var params = {  username: request.body.username,  age: request.body.age  }  response.send(params); }); Express \u0026ndash; è·¨åŸŸæ”¯æŒ(æ”¾åœ¨æœ€å‰é¢)\napp.all(\u0026#39;*\u0026#39;, function(req, res, next) {  res.header(\u0026#34;Access-Control-Allow-Origin\u0026#34;, \u0026#34;*\u0026#34;);  res.header(\u0026#34;Access-Control-Allow-Headers\u0026#34;, \u0026#34;Content-Type,Content-Length, Authorization, Accept,X-Requested-With\u0026#34;);  res.header(\u0026#34;Access-Control-Allow-Methods\u0026#34;,\u0026#34;PUT,POST,GET,DELETE,OPTIONS\u0026#34;);  res.header(\u0026#34;X-Powered-By\u0026#34;,\u0026#39; 3.2.1\u0026#39;)  if(req.method==\u0026#34;OPTIONS\u0026#34;) {  res.send(200);/*è®©optionsè¯·æ±‚å¿«é€Ÿè¿”å›*/  } else{  next();  } }); ä¸­é—´ä»¶ express çš„ä¸­é—´ä»¶ç¼–å†™â€”â€”è¿‡æ»¤å™¨\nç®€å•ä½¿ç”¨\nconst express = require(\u0026#39;express\u0026#39;) const app = express();  let filter = (req, res, next) =\u0026gt; {  if(req.params.name == \u0026#39;admin\u0026#39; \u0026amp;\u0026amp; req.params.pwd == \u0026#39;admin\u0026#39;){  next()  } else {  next(\u0026#39;ç”¨æˆ·åå¯†ç ä¸æ­£ç¡®\u0026#39;)  }  }  app.get(\u0026#39;/:name/:pwd\u0026#39;, filter, (req, res) =\u0026gt; {  res.send(\u0026#39;ok\u0026#39;) }).listen(88) è¿™é‡Œå†™äº†ä¸€ä¸ª filter æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ª next å‚æ•°ã€‚åœ¨è·¯ç”±çš„æ—¶å€™ï¼ŒæŠŠ filter ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œåˆ™å°±å¯ä»¥å…ˆæ‰§è¡Œ filter å‡½æ•°ï¼Œç„¶åæ‰§è¡Œè·¯ç”±çš„é€»è¾‘ã€‚\nå¦‚æœæƒ³è¦å…¨å±€ä½¿ç”¨çš„è¯ï¼Œå°±ç›´æ¥ä½¿ç”¨ use æ–¹æ³•å³å¯ã€‚\napp.use(filter); æ–‡ä»¶ä¸Šä¼  å‰é¢è¯´åˆ°çš„ body-parser ä¸æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œé‚£ä¹ˆä½¿ç”¨ multer åˆ™å¯ä»¥å®ç°ã€‚\næ“ä½œæ•°æ®åº“ node ä¸€èˆ¬ä¼šä½¿ç”¨ mongo å’Œ mysqlï¼Œä½¿ç”¨ä¸‹é¢è¿™ä¸ªä¾‹å­å³å¯ï¼š\næ“ä½œ MongoDB å®˜æ–¹ api http://mongodb.github.io/node-mongodb-native/\nvar mongodb = require(\u0026#39;mongodb\u0026#39;); var MongoClient = mongodb.MongoClient; var db;  MongoClient.connect(\u0026#34;mongodb://localhost:27017/test1705candel\u0026#34;, function(err, database) {  if(err) throw err;   db = database; });  module.exports = {  insert: function(_collection, _data, _callback){  var i = db.collection(_collection).insert(_data).then(function(result){  _callback(result);  });  },  select: function(_collection, _condition, _callback){  var i = db.collection(_collection).find(_condition || {}).toArray(function(error, dataset){  _callback({status: true, data: dataset});  })  } } æ“ä½œ MySql var mysql = require(\u0026#39;mysql\u0026#39;);  //åˆ›å»ºè¿æ¥æ±  var pool = mysql.createPool({  host : \u0026#39;localhost\u0026#39;,  user : \u0026#39;root\u0026#39;,  password : \u0026#39;root\u0026#39;,  port: 3306,  database: \u0026#39;1000phone\u0026#39;,  multipleStatements: true });   module.exports = {  select: function(tsql, callback){  pool.query(tsql, function(error, rows){  if(rows.length \u0026gt; 1){  callback({rowsCount: rows[1][0][\u0026#39;rowsCount\u0026#39;], data: rows[0]});  } else {  callback(rows);  }  })  } } session Session æ˜¯ä¸€ç§è®°å½•å®¢æˆ·çŠ¶æ€çš„æœºåˆ¶ï¼Œä¸åŒçš„æ˜¯ Cookie ä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ï¼Œè€Œ Session ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šçš„è¿›ç¨‹ä¸­ã€‚\nå®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æŠŠå®¢æˆ·ç«¯ä¿¡æ¯ä»¥æŸç§å½¢å¼è®°å½•åœ¨æœåŠ¡å™¨ä¸Šï¼Œè¿™å°±æ˜¯ Sessionã€‚å®¢æˆ·ç«¯æµè§ˆå™¨å†æ¬¡è®¿é—®æ—¶åªéœ€è¦ä»è¯¥ Session ä¸­æŸ¥æ‰¾è¯¥å®¢æˆ·çš„çŠ¶æ€å°±å¯ä»¥äº†ã€‚\nå¦‚æœè¯´ Cookie æœºåˆ¶æ˜¯é€šè¿‡æ£€æŸ¥å®¢æˆ·èº«ä¸Šçš„â€œé€šè¡Œè¯â€æ¥ç¡®å®šå®¢æˆ·èº«ä»½çš„è¯ï¼Œé‚£ä¹ˆ Session æœºåˆ¶å°±æ˜¯é€šè¿‡æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„â€œå®¢æˆ·æ˜ç»†è¡¨â€æ¥ç¡®è®¤å®¢æˆ·èº«ä»½ã€‚\nSession ç›¸å½“äºç¨‹åºåœ¨æœåŠ¡å™¨ä¸Šå»ºç«‹çš„ä¸€ä»½å®¢æˆ·æ¡£æ¡ˆï¼Œå®¢æˆ·æ¥è®¿çš„æ—¶å€™åªéœ€è¦æŸ¥è¯¢å®¢æˆ·æ¡£æ¡ˆè¡¨å°±å¯ä»¥äº†ã€‚\nSession ä¸èƒ½è·¨åŸŸã€‚\nnode æ“ä½œ session å’Œ cookie ä¹Ÿå¾ˆç®€å•ï¼Œä¹Ÿæ˜¯é€šè¿‡ä¸­é—´ä»¶çš„å½¢å¼ã€‚\nconst express = require(\u0026#39;express\u0026#39;) const path = require(\u0026#39;path\u0026#39;) const app = express();  const bodyParser = require(\u0026#39;body-parser\u0026#39;);  const cp = require(\u0026#39;cookie-parser\u0026#39;); const session = require(\u0026#39;express-session\u0026#39;);  app.use(cp()); app.use(session({  secret: \u0026#39;12345\u0026#39;,//ç”¨æ¥å¯¹sessionæ•°æ®è¿›è¡ŒåŠ å¯†çš„å­—ç¬¦ä¸².è¿™ä¸ªå±æ€§å€¼ä¸ºå¿…é¡»æŒ‡å®šçš„å±æ€§  name: \u0026#39;testapp\u0026#39;, //è¿™é‡Œçš„nameå€¼å¾—æ˜¯cookieçš„nameï¼Œé»˜è®¤cookieçš„nameæ˜¯ï¼šconnect.sid  cookie: {maxAge: 5000 }, //è®¾ç½®maxAgeæ˜¯5000msï¼Œå³5såsessionå’Œç›¸åº”çš„cookieå¤±æ•ˆè¿‡æœŸ  resave: false,  saveUninitialized: true, })) app.use(bodyParser.urlencoded({extended: false})); app.use(express.static(path.join(__dirname, \u0026#39;/\u0026#39;)));  app.get(\u0026#39;/setsession\u0026#39;, (request, response) =\u0026gt; {  request.session.user = {username: \u0026#39;admin\u0026#39;};  response.send(\u0026#39;set session success\u0026#39;); })  app.get(\u0026#39;/getsession\u0026#39;, (request, response) =\u0026gt; {  response.send(request.session.user); })  app.get(\u0026#39;/delsession\u0026#39;, (request, response) =\u0026gt; {  delete reqeust.session.user;  response.send(request.session.user); })  app.listen(88) Token Token çš„ç‰¹ç‚¹\n éšæœºæ€§ ä¸å¯é¢„æµ‹æ€§ æ—¶æ•ˆæ€§ æ— çŠ¶æ€ã€å¯æ‰©å±• è·¨åŸŸ  åŸºäº Token çš„èº«ä»½éªŒè¯åœºæ™¯\n å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è¯·æ±‚ç™»å½• æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯ç™»å½•æ˜¯å¦æˆåŠŸ éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›ä¸€ä¸ª Token ç»™å®¢æˆ·ç«¯ï¼Œåä¹‹ï¼Œè¿”å›èº«ä»½éªŒè¯å¤±è´¥çš„ä¿¡æ¯ å®¢æˆ·ç«¯æ”¶åˆ° Token åæŠŠ Token ç”¨ä¸€ç§æ–¹å¼(cookie/localstorage/sessionstorage/å…¶ä»–)å­˜å‚¨èµ·æ¥ å®¢æˆ·ç«¯æ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶éƒ½é€‰å“¦å°† Token å‘ç»™æœåŠ¡ç«¯ æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼ŒéªŒè¯ Token çš„åˆæ³•æ€§ï¼Œåˆæ³•å°±è¿”å›å®¢æˆ·ç«¯æ‰€éœ€æ•°æ®ï¼Œåä¹‹ï¼Œè¿”å›éªŒè¯å¤±è´¥çš„ä¿¡æ¯  Token èº«ä»½éªŒè¯å®ç° â€”â€” jsonwebtoken\nå…ˆå®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å— jsonwebtoken npm install jsonwebtoken\nconst express = require(\u0026#39;express\u0026#39;) const path = require(\u0026#39;path\u0026#39;) const app = express(); const bodyParser = require(\u0026#39;body-parser\u0026#39;); const jwt = require(\u0026#39;jsonwebtoken\u0026#39;);  app.use(bodyParser.urlencoded({extended: false})); app.use(express.static(path.join(__dirname, \u0026#39;/\u0026#39;)));  app.all(\u0026#39;*\u0026#39;, function(req, res, next) {  res.header(\u0026#34;Access-Control-Allow-Origin\u0026#34;, \u0026#34;*\u0026#34;);  res.header(\u0026#34;Access-Control-Allow-Headers\u0026#34;, \u0026#34;Content-Type,Content-Length, Auth, Accept,X-Requested-With\u0026#34;);  res.header(\u0026#34;Access-Control-Allow-Methods\u0026#34;,\u0026#34;PUT,POST,GET,DELETE,OPTIONS\u0026#34;);  res.header(\u0026#34;X-Powered-By\u0026#34;,\u0026#39; 3.2.1\u0026#39;)  if(req.method==\u0026#34;OPTIONS\u0026#34;) {  res.sendStatus(200);/*è®©optionsè¯·æ±‚å¿«é€Ÿè¿”å›*/  } else{  next();  } });   app.get(\u0026#39;/createtoken\u0026#39;, (request, response) =\u0026gt; {  //è¦ç”Ÿæˆ token çš„ä¸»é¢˜ä¿¡æ¯  let user = {  username: \u0026#39;admin\u0026#39;,  }  //è¿™æ˜¯åŠ å¯†çš„ keyï¼ˆå¯†é’¥ï¼‰  let secret = \u0026#39;dktoken\u0026#39;;  //ç”Ÿæˆ Token  let token = jwt.sign(user, secret, {  \u0026#39;expiresIn\u0026#39;: 60*60*24 // è®¾ç½®è¿‡æœŸæ—¶é—´, 24 å°æ—¶  })  response.send({status: true, token}); })  app.post(\u0026#39;/verifytoken\u0026#39;, (request, response) =\u0026gt; {  //è¿™æ˜¯åŠ å¯†çš„ keyï¼ˆå¯†é’¥ï¼‰ï¼Œå’Œç”Ÿæˆ token æ—¶çš„å¿…é¡»ä¸€æ ·  let secret = \u0026#39;dktoken\u0026#39;;  let token = request.headers[\u0026#39;auth\u0026#39;];  if(!token){  response.send({status: false, message: \u0026#39;tokenä¸èƒ½ä¸ºç©º\u0026#39;});  }  jwt.verify(token, secret, (error, result) =\u0026gt; {  if(error){  response.send({status: false});  } else {  response.send({status: true, data: result});  }  }) })  app.listen(88) web socket HTTP åè®®å¯ä»¥æ€»ç»“å‡ ä¸ªç‰¹ç‚¹ï¼š\n ä¸€æ¬¡æ€§çš„ã€æ— çŠ¶æ€çš„çŸ­è¿æ¥ï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ã€æœåŠ¡ç«¯å“åº”ã€ç»“æŸã€‚ è¢«åŠ¨æ€§å“åº”ï¼šåªæœ‰å½“å®¢æˆ·ç«¯è¯·æ±‚æ—¶æ‰è¢«æ‰§è¡Œï¼Œç»™äºˆå“åº”ï¼Œä¸èƒ½ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·å“åº”ã€‚ ä¿¡æ¯å®‰å…¨æ€§ï¼šå¾—åœ¨æœåŠ¡å™¨æ·»åŠ  SSL è¯ä¹¦ï¼Œè®¿é—®æ—¶ç”¨ HTTPSã€‚ è·¨åŸŸï¼šæœåŠ¡å™¨é»˜è®¤ä¸æ”¯æŒè·¨åŸŸï¼Œå¯åœ¨æœåŠ¡ç«¯è®¾ç½®æ”¯æŒè·¨åŸŸçš„ä»£ç æˆ–å¯¹åº”çš„é…ç½®ã€‚  TCP åè®®å¯ä»¥æ€»ç»“å‡ ä¸ªç‰¹ç‚¹ï¼š\n æœ‰çŠ¶æ€çš„é•¿è¿æ¥ï¼šå®¢æˆ·ç«¯å‘èµ·è¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å“åº”å¹¶å»ºç«‹è¿æ¥ï¼Œè¿æ¥ä¼šä¸€ç›´ä¿æŒç›´åˆ°ä¸€æ–¹ä¸»åŠ¨æ–­å¼€ã€‚ ä¸»åŠ¨æ€§ï¼šå»ºç«‹èµ·ä¸å®¢æˆ·ç«¯çš„è¿æ¥åï¼ŒæœåŠ¡ç«¯å¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·è°ƒç”¨ã€‚ ä¿¡æ¯å®‰å…¨æ€§ï¼šåŒæ ·å¯ä»¥ä½¿ç”¨ SSL è¯ä¹¦è¿›è¡Œä¿¡æ¯åŠ å¯†ï¼Œè®¿é—®æ—¶ç”¨ WSS ã€‚ è·¨åŸŸï¼šé»˜è®¤æ”¯æŒè·¨åŸŸã€‚  å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å— wsï¼šnpm install ws\nå¼€å¯ä¸€ä¸ª WebSocket çš„æœåŠ¡å™¨ï¼Œç«¯å£ä¸º 8080\nvar socketServer = require(\u0026#39;ws\u0026#39;).Server; var wss = new socketServer({  port: 8080 }); ä¹Ÿå¯ä»¥åˆ©ç”¨ Express æ¥å¼€å¯ WebSocket çš„æœåŠ¡å™¨\nvar app = require(\u0026#39;express\u0026#39;)(); var server = require(\u0026#39;http\u0026#39;).Server(app);  var socketServer = require(\u0026#39;ws\u0026#39;).Server; var wss = new socketServer({server: server, port: 8080});  ç”¨ on æ¥è¿›è¡Œäº‹ä»¶ç›‘å¬ connectionï¼šè¿æ¥ç›‘å¬ï¼Œå½“å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡ç«¯æ—¶è§¦å‘è¯¥äº‹ä»¶ closeï¼šè¿æ¥æ–­å¼€ç›‘å¬ï¼Œå½“å®¢æˆ·ç«¯æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥æ—¶è§¦å‘ messageï¼šæ¶ˆæ¯æ¥å—ç›‘å¬ï¼Œå½“å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¿¡æ¯æ—¶è§¦å‘è¯¥äº‹ä»¶ send: å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯  soket.io å¯ä»¥ç†è§£ä¸ºå¯¹ WebSocket çš„ä¸€ç§å°è£…ã€‚å¥½æ¯”å‰ç«¯çš„ jQuery å¯¹åŸç”Ÿ javascript çš„å°è£…ã€‚ soket.io ä¾é äº‹ä»¶é©±åŠ¨çš„æ¨¡å¼ï¼Œçµæ´»çš„ä½¿ç”¨äº†è‡ªå®šä¹‰äº‹ä»¶å’Œè°ƒç”¨äº‹ä»¶æ¥å®Œæˆæ›´å¤šçš„åœºæ™¯ï¼Œä¸å¿…ä¾èµ–è¿‡å¤šçš„åŸç”Ÿäº‹ä»¶ã€‚\n å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å— npm install express socket.io å¼€æˆ· Socket æœåŠ¡å™¨ï¼Œç«¯å£ä¸º 88  var express = require(\u0026#39;express\u0026#39;); var app = express(); var http = require(\u0026#39;http\u0026#39;).Server(app); var io = require(\u0026#39;socket.io\u0026#39;)(http); http.listen(88);  ç”¨ on æ¥è¿›è¡Œäº‹ä»¶ç›‘å¬å’Œå®šä¹‰äº‹ä»¶ connectionï¼šç›‘å¬å®¢æˆ·ç«¯è¿æ¥,å›è°ƒå‡½æ•°ä¼šä¼ é€’æœ¬æ¬¡è¿æ¥çš„ socket emitï¼šè§¦å‘ç”¨å®¢æˆ·ç«¯çš„äº‹ä»¶  io.on(\u0026#39;connection\u0026#39;, function(client){  //æŠŠå½“å‰ç™»å½•çš„ç”¨æˆ·ä¿å­˜åˆ°å¯¹è±¡ onlinePersonsï¼Œå¹¶å‘æ‰€æœ‰åœ¨çº¿çš„ç”¨æˆ·å‘èµ·ä¸Šçº¿æç¤º  //serverLogin ä¸ºè‡ªå®šä¹‰äº‹ä»¶ï¼Œä¾›å®¢æˆ·ç«¯è°ƒç”¨  client.on(\u0026#39;serverLogin\u0026#39;, function(_person){  var _personObj = JSON.parse(_person);  onlinePersons[_personObj.id] = _personObj;  //å‘æ‰€æœ‰åœ¨çº¿çš„ç”¨æˆ·å‘èµ·ä¸Šçº¿æç¤º  //è§¦å‘å®¢æˆ·ç«¯çš„ clientTips äº‹ä»¶  //clientTips ä¸ºå®¢æˆ·ç«¯çš„è‡ªå®šä¹‰äº‹ä»¶  io.emit(\u0026#39;clientTips\u0026#39;, JSON.stringify(onlinePersons));  })   //å½“ç›‘å¬åˆ°å®¢æˆ·ç«¯æœ‰ç”¨æˆ·åœ¨ç§»åŠ¨ï¼Œå°±å‘æ‰€æœ‰åœ¨çº¿ç”¨æˆ·å‘èµ·ç§»åŠ¨ä¿¡æ¯ï¼Œè§¦å‘å®¢æˆ·ç«¯ clientMove äº‹ä»¶  //serverMove ä¸ºè‡ªå®šä¹‰äº‹ä»¶ï¼Œä¾›å®¢æˆ·ç«¯è°ƒç”¨  client.on(\u0026#39;serverMove\u0026#39;, function(_person){  var _personObj = JSON.parse(_person);  onlinePersons[_personObj.id] = _personObj;  console.log(\u0026#39;serverLogin\u0026#39;, onlinePersons);  //clientTips ä¸ºå®¢æˆ·ç«¯çš„è‡ªå®šä¹‰äº‹ä»¶  io.emit(\u0026#39;clientMove\u0026#39;, _person);  }); }) kafka-node node ä¹Ÿå¯ä»¥å»è¯»å†™ kafkaï¼Œè€Œä¸”å¾ˆç®€å•ã€‚åªéœ€è¦å¼•å…¥ kafka çš„åº“å³å¯ã€‚\nyarn add kafka-node å…·ä½“ api å¯ä»¥çœ‹æ–‡æ¡£ï¼šhttps://github.com/SOHU-Co/kafka-node\nç”Ÿäº§è€…\nvar kafka = require(\u0026#39;..\u0026#39;); var Producer = kafka.Producer; var KeyedMessage = kafka.KeyedMessage; var Client = kafka.Client; var client = new Client(\u0026#39;localhost:2181\u0026#39;); var argv = require(\u0026#39;optimist\u0026#39;).argv; var topic = argv.topic || \u0026#39;topic1\u0026#39;; var p = argv.p || 0; var a = argv.a || 0; var producer = new Producer(client, { requireAcks: 1 });  producer.on(\u0026#39;ready\u0026#39;, function () {  var message = \u0026#39;a message\u0026#39;;  var keyedMessage = new KeyedMessage(\u0026#39;keyed\u0026#39;, \u0026#39;a keyed message\u0026#39;);   producer.send([  { topic: topic, partition: p, messages: [message, keyedMessage], attributes: a }  ], function (err, result) {  console.log(err || result);  process.exit();  }); });  producer.on(\u0026#39;error\u0026#39;, function (err) {  console.log(\u0026#39;error\u0026#39;, err); }); æ¶ˆè´¹è€…\n\u0026#39;use strict\u0026#39;;  var kafka = require(\u0026#39;..\u0026#39;); var Consumer = kafka.Consumer; var Offset = kafka.Offset; var Client = kafka.Client; var argv = require(\u0026#39;optimist\u0026#39;).argv; var topic = argv.topic || \u0026#39;topic1\u0026#39;;  var client = new Client(\u0026#39;localhost:2181\u0026#39;); var topics = [{ topic: topic, partition: 1 }, { topic: topic, partition: 0 }]; var options = { autoCommit: false, fetchMaxWaitMs: 1000, fetchMaxBytes: 1024 * 1024 };  var consumer = new Consumer(client, topics, options); var offset = new Offset(client);  consumer.on(\u0026#39;message\u0026#39;, function (message) {  console.log(message); });  consumer.on(\u0026#39;error\u0026#39;, function (err) {  console.log(\u0026#39;error\u0026#39;, err); });  /* * If consumer get `offsetOutOfRange` event, fetch data from the smallest(oldest) offset */ consumer.on(\u0026#39;offsetOutOfRange\u0026#39;, function (topic) {  topic.maxNum = 2;  offset.fetch([topic], function (err, offsets) {  if (err) {  return console.error(err);  }  var min = Math.min.apply(null, offsets[topic.topic][topic.partition]);  consumer.setOffset(topic.topic, topic.partition, min);  }); }); Node å•å…ƒæµ‹è¯• ä»¥ function ä¸ºæœ€å°å•ä½ï¼ŒéªŒè¯ç‰¹å®šæƒ…å†µä¸‹çš„ input å’Œ output æ˜¯å¦æ­£ç¡®ã€‚\n é˜²æ­¢æ”¹ A å Bï¼Œé¿å…ä¸èƒ½è·‘çš„ä»£ç æ¯”èƒ½è·‘çš„è¿˜å¤šã€‚ æ˜ç¡®æŒ‡å‡ºé—®é¢˜æ‰€åœ¨ã€å‘ŠçŸ¥æ­£ç¡®çš„è¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Œå‡å°‘ debug çš„æ—¶é—´ã€‚  å¯¹äº node æ¥è¯´ï¼Œå•å…ƒæµ‹è¯•ä¹Ÿå¾ˆå®¹æ˜“åšã€‚\næµ‹è¯•ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼ŒTDD å’Œ BDDã€‚\nTDD VS. BDD æ¯”è¾ƒ TDD ä¸ BDD çš„å·®å¼‚ã€‚\n    TDD BDD     å…¨å æµ‹è¯•é©±åŠ¨å¼€å‘ Test-Driven Development è¡Œä¸ºé©±åŠ¨å¼€å‘ Behavior Driven Development   å®šä¹‰ åœ¨å¼€å‘å‰å…ˆæ’°å†™æµ‹è¯•ç¨‹å¼ï¼Œä»¥ç¡®ä¿ç¨‹å¼ç å“è´¨ä¸ç¬¦åˆéªŒæ”¶è§„æ ¼ã€‚ TDD çš„è¿›åŒ–ç‰ˆã€‚é™¤äº†å®ä½œå‰å…ˆå†™æµ‹è¯•å¤–ï¼Œè¿˜è¦å†™ä¸€ä»½ã€Œå¯ä»¥æ‰§è¡Œçš„è§„æ ¼ã€ã€‚   ç‰¹æ€§ ä»æµ‹è¯•å»æ€è€ƒç¨‹å¼å¦‚ä½•å®ä½œã€‚å¼ºè°ƒå°æ­¥å‰è¿›ã€å¿«é€Ÿä¸”æŒç»­å›é¦ˆã€æ‹¥æŠ±å˜åŒ–ã€é‡è§†æ²Ÿé€šã€æ»¡è¶³éœ€æ±‚ã€‚ ä»ç”¨æˆ·çš„éœ€æ±‚å‡ºå‘ï¼Œå¼ºè°ƒç³»ç»Ÿè¡Œä¸ºã€‚ä½¿ç”¨è‡ªç„¶è¯­è¨€æè¿°æµ‹è¯•æ¡ˆä¾‹ï¼Œä»¥å‡å°‘ä½¿ç”¨è€…å’Œå·¥ç¨‹å¸ˆçš„æ²Ÿé€šæˆæœ¬ã€‚æµ‹è¯•åçš„è¾“å‡ºç»“æœå¯ä»¥ç›´æ¥åšä¸ºæ–‡ä»¶é˜…è¯»ã€‚    ä»ä»£ç å±‚é¢æ¥çœ‹ï¼š\nTDD\nsuite(\u0026#39;Array\u0026#39;, ()=\u0026gt;{  setup(()={   });   test(\u0026#39;equal -1 when index beyond array length\u0026#39;, ()=\u0026gt;{  assert.equal(-1, [1,2,3].indexOf(4));  }); }) BDD\ndescribe(\u0026#39;Array\u0026#39;, function() {  before(function() {  });   it(\u0026#39;should return -1 when no such index\u0026#39;, function() {  [1,2,3].indexOf(4).should.equal(-1);  }); }); å¯¹æ¯”äº†è¿™ä¸¤ç§ç±»å‹çš„è¯­æ³•ä¹‹åï¼Œæˆ‘é€‰æ‹©äº† BDDã€‚\næµ‹è¯•æ¡†æ¶å®è·µ åœ¨ node ç¤¾åŒºï¼Œæ¯”è¾ƒæˆç†Ÿçš„æ˜¯ mochaã€‚mocha æœ¬èº«æ˜¯ä¸æä¾›æ–­è¨€åº“çš„ï¼Œä¸€èˆ¬æ¥è¯´æ–­è¨€åº“æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ chaiã€‚mocha å’Œ chaiï¼Œåˆèµ·æ¥å°±è¢«æˆç§°ä¸ºæŠ¹èŒ¶ã€‚\nmocha ä¸€èˆ¬éœ€è¦å…¨å±€å®‰è£…ï¼Œchai å®‰è£…åˆ°é¡¹ç›®ç›®å½•ä¸‹å³å¯ã€‚\nyarn global add mocha  yarn add chai mocha è¯­æ³•è¯´æ˜  describe()ï¼šæè¿°åœºæ™¯æˆ–åœˆå‡ºç‰¹å®šåŒºå—ï¼Œä¾‹å¦‚ï¼šæ ‡æ˜æµ‹è¯•çš„åŠŸèƒ½æˆ– functionã€‚ it()ï¼šæ’°å†™æµ‹è¯•æ¡ˆä¾‹ï¼ˆTest Caseï¼‰ã€‚ before()ï¼šåœ¨æ‰€æœ‰æµ‹è¯•å¼€å§‹å‰ä¼šæ‰§è¡Œçš„ä»£ç ã€‚ after()ï¼šåœ¨æ‰€æœ‰æµ‹è¯•ç»“æŸåä¼šæ‰§è¡Œçš„ä»£ç ã€‚ beforeEach()ï¼šåœ¨æ¯ä¸ª Test Case å¼€å§‹å‰æ‰§è¡Œçš„ä»£ç ã€‚ afterEach()ï¼šåœ¨æ¯ä¸ª Test Case ç»“æŸåæ‰§è¡Œçš„ä»£ç ã€‚  ä»£ç ç¤ºä¾‹ describe(\u0026#39;hooks\u0026#39;, function() {  before(function() {   });   after(function() {   });   beforeEach(function() {   });   afterEach(function() {   });    it(\u0026#39;should ...\u0026#39;, function() {   }); }); chai assert assert(expression, message)ï¼šæµ‹è¯•è¿™ä¸ªé¡¹ç›®çš„ expression æ˜¯å¦ä¸ºçœŸï¼Œè‹¥ä¸ºå‡åˆ™æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ messageã€‚\nExpect / Should é¢„æœŸ 3 ç­‰äºï¼ˆ===ï¼‰2ã€‚è¿™æ˜¯ä½¿ç”¨å¯ä¸²è¿çš„æ“ä½œç¬¦ æ¥å®Œæˆæ–­è¨€ã€‚è¿™äº›å¯ä¸²è”çš„æœ‰ toã€isã€have ç­‰ã€‚å®ƒå¾ˆåƒè‹±æ–‡ï¼Œç”¨å¾ˆå£è¯­çš„æ–¹å¼åšåˆ¤æ–­ã€‚\nè¦†ç›–ç‡ æ—¢ç„¶æ˜¯ç»™åŠŸèƒ½ä»£ç å†™å•å…ƒæµ‹è¯•ï¼Œé‚£å°±åº”è¯¥æœ‰ä¸ªæŒ‡æ ‡å»è¡¡é‡å•å…ƒæµ‹è¯•è¦†ç›–äº†å“ªäº›åŠŸèƒ½ä»£ç ï¼Œè¿™å°±æ˜¯æ¥ä¸‹æ¥è¦ä»‹ç»çš„æµ‹è¯•è¦†ç›–ç‡ã€‚\nåœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ istanbul ä½œä¸ºè¦†ç›–ç‡ç»Ÿè®¡çš„å·¥å…·ï¼Œistanbul å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç»Ÿè®¡åˆ°ä»£ç çš„è¯­å¥è¦†ç›–ç‡ã€åˆ†æ”¯è¦†ç›–ç‡ã€å‡½æ•°è¦†ç›–ç‡ä»¥åŠè¡Œè¦†ç›–ç‡ã€‚\nå…¨å±€å®‰è£…ï¼š\nyarn global add istanbul åªéœ€è¦ä½¿ç”¨ istanbul cover å°±å¯ä»¥å¾—åˆ°è¦†ç›–ç‡ã€‚\nistanbul cover simple.js å¯ä»¥å’Œ mocha é…åˆä½¿ç”¨ï¼š\nisbuntal cover _mocha test/simple-test.js mocha å’Œ _mocha æ˜¯ä¸¤ä¸ªä¸åŒçš„å‘½ä»¤ï¼Œå‰è€…ä¼šæ–°å»ºä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ï¼Œè€Œåè€…æ˜¯åœ¨å½“å‰è¿›ç¨‹ï¼ˆå³ istanbul æ‰€åœ¨çš„è¿›ç¨‹ï¼‰æ‰§è¡Œæµ‹è¯•ï¼Œåªæœ‰è¿™æ ·ï¼Œ istanbul æ‰ä¼šæ•æ‰åˆ°è¦†ç›–ç‡æ•°æ®ã€‚å…¶ä»–æµ‹è¯•æ¡†æ¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¿…é¡»åœ¨åŒä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ã€‚\nå¼•å…¥ typescript typescript å…¶å®å°±æ˜¯åŠ äº†ç±»å‹çš„ jsã€‚\næ‰€è°“ç±»å‹ï¼Œå°±æ˜¯çº¦å®šå˜é‡çš„å†…å­˜å¸ƒå±€ã€‚js ä½œä¸ºä¸€ä¸ªåŠ¨æ€å¼±ç±»å‹çš„è¯­è¨€ï¼Œåœ¨å¼€å‘å¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œä¸å…å¯èƒ½å‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥æœ‰ç±»å‹çš„è¯­è¨€å¯ä»¥åœ¨ç¼–è¯‘æœŸå°±èƒ½æ£€æµ‹åˆ°é”™è¯¯ï¼Œå‡å°‘ debug çš„æ—¶é—´ã€‚\nå®‰è£… yarn global add typescript æ–°é¡¹ç›®å¼•å…¥ ts ç°åœ¨æ–°å»ºæ–‡ä»¶server.tsï¼š\nimport * as http from \u0026#39;http\u0026#39;;  const server = http.createServer(function (req, res) {  res.end(\u0026#39;Hello, world\u0026#39;); });  server.listen(3000, function () {  console.log(\u0026#39;server is listening\u0026#39;); }); ä¸ºäº†èƒ½æ‰§è¡Œæ­¤æ–‡ä»¶ï¼Œéœ€è¦é€šè¿‡ tsc å‘½ä»¤æ¥ç¼–è¯‘è¯¥ TypeScript æºç ï¼š\ntsc server.ts å¦‚æœæ²¡æœ‰ä»€ä¹ˆæ„å¤–çš„è¯ï¼Œæ­¤æ—¶æ§åˆ¶å°ä¼šæ‰“å°å‡ºä»¥ä¸‹çš„å‡ºé”™ä¿¡æ¯ï¼š\nserver.ts(1,23): error TS2307: Cannot find module \u0026#39;http\u0026#39;. è¿™è¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°httpè¿™ä¸ªæ¨¡å—å®šä¹‰ï¼ˆTyprScript ç¼–è¯‘æ—¶æ˜¯é€šè¿‡æŸ¥æ‰¾æ¨¡å—çš„ typings å£°æ˜æ–‡ä»¶æ¥åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨çš„ï¼Œè€Œä¸æ˜¯æ ¹æ®çœŸå®çš„ js æ–‡ä»¶ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†è§£é‡Šï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬å½“å‰ç›®å½•ä¸‹è¿˜æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶server.jsï¼Œæˆ‘ä»¬å¯ä»¥è¯•ç€æ‰§è¡Œå®ƒï¼š\nnode server.js å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œé‚£ä¹ˆæ§åˆ¶å°å°†ä¼šæ‰“å°å‡º server is listening è¿™æ ·çš„ä¿¡æ¯ï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://127.0.0.1:3000æ—¶ä¹Ÿèƒ½çœ‹åˆ°æ­£ç¡®çš„ç»“æœï¼šHello, world\nç°åœ¨å†å›è¿‡å¤´æ¥çœ‹çœ‹åˆšæ‰çš„ç¼–è¯‘é”™è¯¯ä¿¡æ¯ã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ª Node.js é¡¹ç›®ï¼Œtypescript è¯­è¨€ä¸­å¹¶æ²¡æœ‰å®šä¹‰httpè¿™ä¸ªæ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£… Node.js è¿è¡Œç¯å¢ƒçš„å£°æ˜æ–‡ä»¶ï¼š\nyarn global add @types/node å®‰è£…å®Œæ¯•ä¹‹åï¼Œå†é‡å¤ä¸Šæ–‡çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œæ­¤æ—¶ tsc ä¸å†æŠ¥é”™äº†ã€‚\nå¤§å¤šæ•°æ—¶å€™ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ ts-node å‘½ä»¤æ‰§è¡Œ TypeScript æºæ–‡ä»¶è€Œä¸éœ€è¦é¢„å…ˆç¼–è¯‘ã€‚é¦–å…ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… ts-nodeï¼š\nyarn global add -g ts-node ç„¶åä½¿ç”¨ ts-node å‘½ä»¤æ‰§è¡Œå³å¯ï¼š\nts-node --no-cache server.ts è¯´æ˜ï¼šä½¿ç”¨ ts-node æ‰§è¡Œ TypeScript ç¨‹åºæ—¶ï¼Œä¸ºäº†æé«˜ç¼–è¯‘é€Ÿåº¦ï¼Œé»˜è®¤ä¼šç¼“å­˜æœªä¿®æ”¹è¿‡çš„ .ts æ–‡ä»¶ï¼Œä½†æœ‰æ—¶å€™ä¼šå¯¼è‡´ä¸€äº› Bugï¼Œæ‰€ä»¥å»ºè®®å¯åŠ¨æ—¶åŠ ä¸Š --no-cache å‚æ•°ã€‚\ntsconfig.json é…ç½®æ–‡ä»¶ æ¯ä¸ª TypeScript é¡¹ç›®éƒ½éœ€è¦ä¸€ä¸ª tsconfig.json æ–‡ä»¶æ¥æŒ‡å®šç›¸å…³çš„é…ç½®ï¼Œæ¯”å¦‚å‘Šè¯‰ TypeScript ç¼–è¯‘å™¨è¦å°†ä»£ç è½¬æ¢æˆ ES5 è¿˜æ˜¯ ES6 ä»£ç ç­‰ã€‚\nå¯ä»¥ä½¿ç”¨ tsc å‘½ä»¤ç”Ÿæˆã€‚\ntsc --init ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å— ä¸€èˆ¬æƒ…å†µä¸‹åœ¨ TypeScript ä¸­æ˜¯ä¸èƒ½â€ç›´æ¥â€œä½¿ç”¨ npm ä¸Šçš„æ¨¡å—çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦ä½¿ç”¨ express æ¨¡å—ï¼Œå…ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š\nyarn add express ç„¶åæ–°å»ºæ–‡ä»¶ server.ts :\nimport * as express from \u0026#39;express\u0026#39;;  const app = express(); app.get(\u0026#39;/\u0026#39;, function (req, res) {  res.end(\u0026#39;hello, world\u0026#39;); })  app.listen(3000, function () {  console.log(\u0026#39;server is listening\u0026#39;); }); ç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰§è¡Œï¼š\nts-node server.ts å¦‚æœä¸å‡ºæ„å¤–ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°è¿™æ ·çš„æŠ¥é”™ä¿¡æ¯ï¼š\nsrc/server.ts(1,26): error TS7016: Could not find a declaration file for module \u0026#39;express\u0026#39;. æŠ¥é”™çš„ä¿¡æ¯è¡¨æ˜æ²¡æœ‰æ‰¾åˆ°expressæ¨¡å—çš„å£°æ˜æ–‡ä»¶ã€‚ç”±äº TypeScript é¡¹ç›®æœ€ç»ˆä¼šç¼–è¯‘æˆ JavaScript ä»£ç æ‰§è¡Œï¼Œå½“æˆ‘ä»¬åœ¨ TypeScript æºç ä¸­å¼•å…¥è¿™äº›è¢«ç¼–è¯‘æˆ JavaScript çš„æ¨¡å—æ—¶ï¼Œå®ƒéœ€è¦ç›¸åº”çš„å£°æ˜æ–‡ä»¶ï¼ˆ.d.tsæ–‡ä»¶ï¼‰æ¥çŸ¥é“è¯¥æ¨¡å—ç±»å‹ä¿¡æ¯ï¼Œè¿™äº›å£°æ˜æ–‡ä»¶å¯ä»¥é€šè¿‡è®¾ç½®tsconfig.jsonä¸­çš„declaration: trueæ¥è‡ªåŠ¨ç”Ÿæˆã€‚è€Œé‚£äº›ä¸æ˜¯ä½¿ç”¨ TypeScript ç¼–å†™çš„æ¨¡å—ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ‰‹åŠ¨ç¼–å†™å£°æ˜æ–‡ä»¶æ¥å…¼å®¹ TypeScriptã€‚\nå½“é‡åˆ°ç¼ºå°‘æ¨¡å—å£°æ˜æ–‡ä»¶çš„æƒ…å†µï¼Œå¼€å‘è€…å¯ä»¥å°è¯•é€šè¿‡ yarn addl @types/xxx æ¥å®‰è£…æ¨¡å—å£°æ˜æ–‡ä»¶å³å¯ã€‚\nç°åœ¨æˆ‘ä»¬å°è¯•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… express æ¨¡å—çš„å£°æ˜æ–‡ä»¶ï¼š\nyarn add @types/express æ²¡æœ‰æ„å¤–ï¼Œæœç„¶èƒ½æˆåŠŸå®‰è£…ã€‚ç°åœ¨å†é€šè¿‡ ts-node æ¥æ‰§è¡Œçš„æ—¶å€™ï¼Œå‘ç°å·²ç»æ²¡æœ‰æŠ¥é”™äº†ã€‚\nå•å…ƒæµ‹è¯• ç›´æ¥ä½¿ç”¨ mocha å’Œ chaiï¼Œè¿›è¡Œ ts çš„æµ‹è¯•ã€‚\næ—§é¡¹ç›®è¿ç§» é€šå¸¸æ¥è¯´è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬äº†ä»¥ä¸‹æ­¥éª¤ï¼š\n æ·»åŠ  tsconfig.json å°†ä½ çš„æºä»£ç æ–‡ä»¶æ‰©å±•åä» .js æ”¹æˆ .tsã€‚ä½¿ç”¨ any æ¥å¼€å§‹æŠ‘æ­¢é”™è¯¯ã€‚ ä½¿ç”¨ TypeScript æ¥ç¼–å†™æ–°çš„ä»£ç å¹¶ä¸”å°½å¯èƒ½å°‘åœ°ä½¿ç”¨ anyã€‚ è¿”å›åˆ°æ—§ä»£ç é‡Œå¹¶ä¸”å¼€å§‹åŠ å…¥ç±»å‹æ ‡æ³¨å’Œè§£å†³å‘ç°çš„ bugsã€‚ ä¸ºç¬¬ä¸‰æ–¹ JavaScript ä»£ç ä½¿ç”¨ç¯å¢ƒå®šä¹‰ã€‚  ","permalink":"https://zhenfeng-zhu.github.io/post/node-learning/","summary":"å†™ node ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ•´ç†ä¸€ä¸‹å­¦ä¹ ç¬”è®°ï¼Œå…±åŒè¿›æ­¥\nä»€ä¹ˆæ˜¯ node é¦–å…ˆçœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯ node.js\n Node æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç«¯ JavaScript Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒ Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆ Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿ  æ¨¡å—ç³»ç»Ÿæ˜¯ node æœ€åŸºæœ¬ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ã€‚ä¸€èˆ¬å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š\n åŸç”Ÿæ¨¡å— æ–‡ä»¶æ¨¡å— ç¬¬ä¸‰æ–¹æ¨¡å— è‡ªå®šä¹‰æ¨¡å—  node ç¤¾åŒºå´‡å°š DRY æ–‡åŒ–ï¼Œå³ Don\u0026rsquo;t repeate yourselfã€‚è¿™ç§æ–‡åŒ–ä½¿å¾— node çš„ç”Ÿæ€å¼‚å¸¸ç¹è£ï¼ŒåŒæ ·ä¹Ÿç”±äºæŸäº›åŒ…çš„è´¨é‡ä½ä¸‹å¼•æ¥äº†ä¸€äº›è¯Ÿç—…ã€‚\nè°ˆè°ˆè‡ªå®šä¹‰æ¨¡å— æˆ‘ä»¬åœ¨å†™ node ç¨‹åºçš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨å†™è‡ªå®šä¹‰æ¨¡å—ã€‚\n  åˆ›å»ºæ¨¡å—\n// b.js function FunA(){  return \u0026#34;hello world\u0026#34;; }  // æš´éœ²æ–¹æ³•FunA module.exports = FunA;   åŠ è½½æ¨¡å—\n// a.","title":"node å­¦ä¹ ç¬”è®°"},{"content":"Node.js Redis å®¢æˆ·ç«¯æ¨¡å— ä¸ºäº†è¿½æ–°ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„ yarnï¼Œæ¯•ç«Ÿæˆ‘æ˜¯ HDDï¼ˆé¢å‘çƒ­ç‚¹ç¼–ç¨‹ï¼‰ç¼–ç¨‹å®è·µè€…ã€‚\næ¨¡å—å®‰è£…\nyarn add redis æ¨¡å—ä½¿ç”¨å®ä¾‹\nconst redis = require(\u0026#39;redis\u0026#39;) const client = redis.createClient(\u0026#39;6379\u0026#39;, \u0026#39;127.0.0.1\u0026#39;)  client.on(\u0026#34;error\u0026#34;, function (err) {  console.log(\u0026#34;Error \u0026#34; + err); });  client.set(\u0026#34;string key\u0026#34;, \u0026#34;string val\u0026#34;, redis.print); client.hset(\u0026#34;hash key\u0026#34;, \u0026#34;hashtest 1\u0026#34;, \u0026#34;some value\u0026#34;, redis.print); client.hset([\u0026#34;hash key\u0026#34;, \u0026#34;hashtest 2\u0026#34;, \u0026#34;some other value\u0026#34;], redis.print); client.hkeys(\u0026#34;hash key\u0026#34;, function (err, replies) {  console.log(replies.length + \u0026#34; replies:\u0026#34;);  replies.forEach(function (reply, i) {  console.log(\u0026#34; \u0026#34; + i + \u0026#34;: \u0026#34; + reply);  });  client.quit(); }); è¾“å‡ºçš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š\nâœ node-example git:(master) âœ— node redis-demo.js Reply: OK Reply: 0 Reply: 0 2 replies:  0: hashtest 1  1: hashtest 2 Promises\nå¦‚æœæ˜¯ä½¿ç”¨ node 8 æˆ–è€…ä¹‹ä¸Šçš„è¯ï¼Œä½¿ç”¨ node çš„ util.promisify æ¥å°†è¯·æ±‚å˜æˆ promise çš„ã€‚\nconst {promisify}=require(\u0026#39;util\u0026#39;) const redis = require(\u0026#39;redis\u0026#39;) const client = redis.createClient(\u0026#39;6379\u0026#39;, \u0026#39;127.0.0.1\u0026#39;)  const getAsync=promisify(client.get).bind(client) function getFoo(){  return getAsync(\u0026#39;foo\u0026#39;).then(res =\u0026gt; {  console.log(res)  }) }  getFoo() å‘é€å‘½ä»¤\næ¯ä¸ª redis å‘½ä»¤éƒ½ä¼šé€šè¿‡ client å¯¹è±¡çš„ä¸€ä¸ªå‡½æ•°æš´éœ²ï¼Œæ‰€æœ‰è¿™äº›å‡½æ•°éƒ½ä¼šæœ‰ä¸€ä¸ª args æ•°ç»„é€‰é¡¹å’Œä¸€ä¸ª callback å›è°ƒå‡½æ•°ã€‚\nå­—ç¬¦ä¸²æ“ä½œ\nset key value\nget key\nå“ˆå¸Œæ“ä½œ\nhmset key field1 value1\nhget key field1 value1\nåˆ—è¡¨æ“ä½œ\nlpush key value1 value2\nlrange key 0 n\né›†åˆæ“ä½œ\nsadd key member1 member2\nsmembers key\næœ‰åºé›†åˆæ“ä½œ\nzadd key index value\nzrange key 0 n\n","permalink":"https://zhenfeng-zhu.github.io/post/node%E7%9A%84redis%E5%AE%9E%E6%88%98/","summary":"Node.js Redis å®¢æˆ·ç«¯æ¨¡å— ä¸ºäº†è¿½æ–°ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„ yarnï¼Œæ¯•ç«Ÿæˆ‘æ˜¯ HDDï¼ˆé¢å‘çƒ­ç‚¹ç¼–ç¨‹ï¼‰ç¼–ç¨‹å®è·µè€…ã€‚\næ¨¡å—å®‰è£…\nyarn add redis æ¨¡å—ä½¿ç”¨å®ä¾‹\nconst redis = require(\u0026#39;redis\u0026#39;) const client = redis.createClient(\u0026#39;6379\u0026#39;, \u0026#39;127.0.0.1\u0026#39;)  client.on(\u0026#34;error\u0026#34;, function (err) {  console.log(\u0026#34;Error \u0026#34; + err); });  client.set(\u0026#34;string key\u0026#34;, \u0026#34;string val\u0026#34;, redis.print); client.hset(\u0026#34;hash key\u0026#34;, \u0026#34;hashtest 1\u0026#34;, \u0026#34;some value\u0026#34;, redis.print); client.hset([\u0026#34;hash key\u0026#34;, \u0026#34;hashtest 2\u0026#34;, \u0026#34;some other value\u0026#34;], redis.print); client.hkeys(\u0026#34;hash key\u0026#34;, function (err, replies) {  console.log(replies.length + \u0026#34; replies:\u0026#34;);  replies.forEach(function (reply, i) {  console.log(\u0026#34; \u0026#34; + i + \u0026#34;: \u0026#34; + reply);  });  client.","title":"node çš„ redis å®æˆ˜"},{"content":"è¿™ç¯‡æ–‡ç« æ‰“çš„æ ‡ç­¾æ¯”è¾ƒå¤šï¼Œä¹ŸåŸºæœ¬æ¶µç›–äº†æˆ‘æ‰€äº†è§£çš„ä¸€äº›çŸ¥è¯†ï¼Œå½’çº³æ€»ç»“ä¸€ä¸‹è‡ªå·±å¯¹ web æ¡†æ¶çš„ç†è§£ã€‚è‡ªå·±äº†è§£çš„ä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œä¹Ÿè¯·å¤šå¤šæŒ‡æ•™ã€‚\nå†™ç¨‹åºå…ä¸äº†è¦åš web ç›¸å…³çš„ï¼Œç°åœ¨ç”±äºå‰åç«¯çš„åˆ†ç¦»ï¼Œåç«¯ä¸€èˆ¬åªæä¾› rest æ¥å£ï¼Œå‰ç«¯ä¸€èˆ¬ä½¿ç”¨ node æ¥åšæ¸²æŸ“ã€‚åœ¨ä¹‹å‰ä½¿ç”¨ jsp é‚£ä¸€å¥—çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šéƒ½è¦å†™ html+js çš„å‰ç«¯çš„ä¸€å¥—ï¼Œä¹Ÿè¦å†™åç«¯ java çš„ CRUDã€‚\næˆ‘ç†è§£çš„ web æ¡†æ¶ä¸­ï¼Œå¤§è‡´æ˜¯åˆ†ä¸ºè¿™ä¹ˆä¸¤ç±»ï¼š\n router æ¡†æ¶ mvc æ¡†æ¶  mvc ç±»æ¡†æ¶ mvcï¼Œåˆçº§ç¨‹åºå‘˜é¢è¯•ç¬”è¯•çš„æ—¶å€™å¿…è€ƒçš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚model-view-controllerï¼Œå³æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ã€‚\n mï¼Œæ¨¡å‹ä¸»è¦ç”¨äºå°è£…ä¸åº”ç”¨ç¨‹åºç›¸å…³çš„æ•°æ®ä»¥åŠå¯¹æ•°æ®çš„å¤„ç†æ–¹æ³•ã€‚ vï¼Œåœ¨ View ä¸­ä¸€èˆ¬æ²¡æœ‰ç¨‹åºä¸Šçš„é€»è¾‘ã€‚ä¸ºäº†å®ç° View ä¸Šçš„åˆ·æ–°åŠŸèƒ½ï¼ŒView éœ€è¦è®¿é—®å®ƒç›‘è§†çš„æ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ï¼Œå› æ­¤åº”è¯¥äº‹å…ˆåœ¨è¢«å®ƒç›‘è§†çš„æ•°æ®é‚£é‡Œæ³¨å†Œã€‚ cï¼Œç”¨äºæ§åˆ¶åº”ç”¨ç¨‹åºçš„æµç¨‹ã€‚  æˆ‘äº†è§£æ¯”è¾ƒå¤šçš„ mvc æ¡†æ¶æ˜¯ spring mvcã€‚springã€spring mvc å’Œ spring boot ç­‰ï¼Œä»–ä»¬å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œä¹Ÿä¸æ˜¯ä»…ä»…ç”¨äº web å¼€å‘ã€‚ä½†æ˜¯åœ¨è¿™é‡Œæˆ‘å°±ä¸åˆ†é‚£ä¹ˆç»†ï¼Œç»Ÿä¸€ç”¨ spring æ¥ä»£æ›¿ã€‚è¿™é‡Œæ‰€è¯´çš„ spring éƒ½æ˜¯æŒ‡ç‹­ä¹‰ä¸Šçš„ web å¼€å‘æ–¹é¢ã€‚\nåœ¨åš web å¼€å‘çš„æ—¶å€™ï¼Œé¡¹ç›®ç›®å½•ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š\n $ tree [16:23:43] . â”œâ”€â”€ mvnw â”œâ”€â”€ mvnw.cmd â”œâ”€â”€ pom.xml â””â”€â”€ src  â”œâ”€â”€ main  â”‚Â â”œâ”€â”€ java  â”‚Â â”‚Â â””â”€â”€ com  â”‚Â â”‚Â â””â”€â”€ example  â”‚Â â”‚Â â””â”€â”€ demo  â”‚Â â”‚Â â””â”€â”€ DemoApplication.java  â”‚Â â””â”€â”€ resources  â”‚Â â”œâ”€â”€ application.properties  â”‚Â â”œâ”€â”€ static  â”‚Â â””â”€â”€ templates  â””â”€â”€ test  â””â”€â”€ java  â””â”€â”€ com  â””â”€â”€ example  â””â”€â”€ demo  â””â”€â”€ DemoApplicationTests.java  14 directories, 6 files è¦æ¸²æŸ“é¡µé¢çš„æ—¶å€™ï¼Œä¼šæŠŠç›¸å…³çš„ç±»å†™åœ¨ controller åŒ…ä¸‹é¢ï¼Œç„¶åä½¿ç”¨@Controlle æ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª controllerã€‚\nå¦‚æœæ˜¯å®ä½“ç±»ï¼Œä¸€èˆ¬ä¼šæ”¾åœ¨ entity åŒ…æˆ–è€… domain åŒ…ä¸­ã€‚\nå¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œçš„ç±»ï¼Œä¸€èˆ¬ä¼šæ”¾åœ¨ repository æˆ–è€… dao ä¸­ã€‚\ncontroller ä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨ daoï¼Œè€Œæ˜¯ä¼šå•ç‹¬å†™ä¸€ä¸ª service è´Ÿè´£å»åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ã€‚\næ¯ä¸ªåŒ…åˆ†å·¥æ˜ç¡®ã€‚\nè€Œ url çš„è·¯ç”±æ‹¦æˆªå¤„ç†æ˜¯åœ¨ controller äº†ä¸­å»å®ç°çš„ã€‚\nrouter æ¡†æ¶ æˆ‘ç†è§£çš„ router æ¡†æ¶ä¸»è¦æ˜¯ä»¥ express ä¸ºä»£è¡¨çš„æ¡†æ¶ã€‚ç°åœ¨çš„è½»é‡çº§çš„ web æ¡†æ¶ä¼šæœ‰è·¯ç”±è¿™ä¹ˆä¸€ä¸ªé‡è¦çš„æ¦‚å¿µã€‚\nè·¯ç”±ç”¨äºç¡®å®šåº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹çš„å®¢æˆ·æœºè¯·æ±‚ï¼ŒåŒ…å«ä¸€ä¸ª URIï¼ˆæˆ–è·¯å¾„ï¼‰å’Œä¸€ä¸ªç‰¹å®šçš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚\næ¯ä¸ªè·¯ç”±å¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¤„ç†ç¨‹åºå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œã€‚\nè·¯ç”±ä¸€èˆ¬é‡‡ç”¨å¦‚ä¸‹çš„ç»“æ„ï¼š\nrouter.METHOD(PATH, HANDLER) å…¶ä¸­ï¼š\n router æ˜¯è·¯ç”±å®ä¾‹ã€‚ METHOD æ˜¯ http çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚ GETï¼ŒPOST ç­‰ã€‚ PATH æ˜¯ URL è¯·æ±‚è·¯å¾„ã€‚ HANDLER æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨è·¯ç”±åŒ¹é…æˆåŠŸæ—¶æ‰§è¡Œçš„ã€‚  å¯ä»¥å‘ç°ï¼Œåœ¨ router ç±»æ¡†æ¶ä¸­ï¼Œhandler æ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„ï¼Œè¿™æ˜¯ä¸€ç§ç¼–ç¨‹çš„æ¨¡å¼â€”â€”è¡Œä¸ºå‚æ•°åŒ–ã€‚\njava çš„ vertx å’Œ go çš„ gin æ¡†æ¶ä¹Ÿæ˜¯è¿™æ ·ä¸€ç§æ€è·¯ã€‚\nä¸‹é¢è¿™ä¸ªç¤ºä¾‹æ˜¯ gin çš„ï¼š\npackage main  import (  \u0026#34;github.com/gin-gonic/gin\u0026#34;  \u0026#34;net/http\u0026#34; )  func main() {  router:=gin.Default()   router.GET(\u0026#34;/hello\u0026#34;, greeting)   // ä¹Ÿå¯ä»¥å†™æˆåŒ¿åå‡½æ•°  router.GET(\u0026#34;/\u0026#34;, func(context *gin.Context) {  context.String(http.StatusOK, \u0026#34;I am Lucas\u0026#34;)  })   router.Run() }  // å¯ä»¥å•ç‹¬å†™ä¸€ä¸ªhandlerå‡½æ•° func greeting(context *gin.Context) {  context.String(http.StatusOK, \u0026#34;hello world\u0026#34;) } å¯ä»¥çœ‹åˆ° router ç±»çš„æ¡†æ¶ç‰¹åˆ«è½»é‡çº§ï¼Œè€Œä¸”å¾ˆé€‚åˆå†™ rest api æ¥å£ã€‚\nrouter çš„åŸç† ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œrouter ä½¿ç”¨çš„æ•°æ®ç»“æ„æ˜¯ radix treeï¼Œå‹ç¼©å­—å…¸æ ‘ã€‚\nå­—å…¸æ ‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œä¸‹å›¾æ˜¯ä¸€ä¸ªå…¸å‹çš„å­—å…¸æ ‘ç»“æ„ï¼š\nå­—å…¸æ ‘ä¸€èˆ¬ç”¨æ¥è¿›è¡Œå­—ç¬¦ä¸²çš„æ£€ç´¢ã€‚å¯¹äºç›®æ ‡å­—ç¬¦ä¸²ï¼Œåªè¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå³å¯åˆ¤æ–­å‡ºè¯¥å­—ç¬¦ä¸²æ˜¯å¦æ›¾ç»å‡ºç°è¿‡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œn å¯ä»¥è®¤ä¸ºæ˜¯ç›®æ ‡å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿå­—ç¬¦ä¸²æœ¬èº«ä¸åƒæ•°å€¼ç±»å‹å¯ä»¥è¿›è¡Œæ•°å€¼æ¯”è¾ƒï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹æ¯”çš„æ—¶é—´å¤æ‚åº¦å–å†³äºå­—ç¬¦ä¸²é•¿åº¦ã€‚å¦‚æœä¸ç”¨å­—å…¸æ ‘æ¥å®Œæˆä¸Šè¿°åŠŸèƒ½ï¼Œè¦å¯¹å†å²å­—ç¬¦ä¸²è¿›è¡Œæ’åºï¼Œå†åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ä¹‹ç±»çš„ç®—æ³•å»æœç´¢ï¼Œæ—¶é—´å¤æ‚åº¦åªé«˜ä¸ä½ã€‚å¯è®¤ä¸ºå­—å…¸æ ‘æ˜¯ä¸€ç§ç©ºé—´æ¢æ—¶é—´çš„å…¸å‹åšæ³•ã€‚\næ™®é€šçš„å­—å…¸æ ‘æœ‰ä¸€ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå°±æ˜¯æ¯ä¸ªå­—æ¯éƒ½éœ€è¦å»ºç«‹ä¸€ä¸ªå­©å­èŠ‚ç‚¹ï¼Œè¿™æ ·ä¼šå¯¼è‡´å­—å…¸æ ‘çš„å±‚æ ‘æ¯”è¾ƒæ·±ï¼Œå‹ç¼©å­—å…¸æ ‘ç›¸å¯¹å¥½åœ°å¹³è¡¡äº†å­—å…¸æ ‘çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚ä¸‹å›¾æ˜¯å…¸å‹çš„å‹ç¼©å­—å…¸æ ‘ç»“æ„ï¼š\næ¯ä¸ªèŠ‚ç‚¹ä¸Šä¸åªå­˜å‚¨ä¸€ä¸ªå­—æ¯äº†ï¼Œè¿™ä¹Ÿæ˜¯å‹ç¼©å­—å…¸æ ‘ä¸­â€œå‹ç¼©â€çš„ä¸»è¦å«ä¹‰ã€‚ä½¿ç”¨å‹ç¼©å­—å…¸æ ‘å¯ä»¥å‡å°‘æ ‘çš„å±‚æ•°ï¼ŒåŒæ—¶å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹ä¸Šæ•°æ®å­˜å‚¨ä¹Ÿæ¯”é€šå¸¸çš„å­—å…¸æ ‘è¦å¤šï¼Œæ‰€ä»¥ç¨‹åºçš„å±€éƒ¨æ€§è¾ƒå¥½(ä¸€ä¸ªèŠ‚ç‚¹çš„ path åŠ è½½åˆ° cache å³å¯è¿›è¡Œå¤šä¸ªå­—ç¬¦çš„å¯¹æ¯”)ï¼Œä»è€Œå¯¹ CPU ç¼“å­˜å‹å¥½ã€‚\nä¸­é—´ä»¶ å¯¹äºå¤§å¤šæ•°çš„åœºæ™¯æ¥è®²ï¼Œéä¸šåŠ¡çš„éœ€æ±‚éƒ½æ˜¯åœ¨ http è¯·æ±‚å¤„ç†å‰åšä¸€äº›äº‹æƒ…ï¼Œæˆ–è€…/å¹¶ä¸”åœ¨å“åº”å®Œæˆä¹‹ååšä¸€äº›äº‹æƒ…ã€‚æˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•ä½¿ç”¨ä¸€äº›é‡æ„æ€è·¯æŠŠè¿™äº›å…¬å…±çš„éä¸šåŠ¡åŠŸèƒ½ä»£ç å‰¥ç¦»å‡ºå»å‘¢ï¼Ÿ\nè¿™ä¸ªæ—¶å€™å°±æ˜¯å°±å¼•å…¥äº†ä¸­é—´ä»¶çš„æ¦‚å¿µã€‚\nä¸­é—´ä»¶å‡½æ•°èƒ½å¤Ÿè®¿é—®è¯·æ±‚å¯¹è±¡ (req)ã€å“åº”å¯¹è±¡ (res) ä»¥åŠåº”ç”¨ç¨‹åºçš„è¯·æ±‚/å“åº”å¾ªç¯ä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚\nä¸­é—´ä»¶å‡½æ•°å¯ä»¥æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š\n æ‰§è¡Œä»»ä½•ä»£ç ã€‚ å¯¹è¯·æ±‚å’Œå“åº”å¯¹è±¡è¿›è¡Œæ›´æ”¹ã€‚ ç»“æŸè¯·æ±‚/å“åº”å¾ªç¯ã€‚ è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚  è¿™äº›ä¸­é—´ä»¶å…¶å®å°±æ˜¯ä¸€äº›å¯æ’æ‹”çš„å‡½æ•°ç»„ä»¶ï¼Œå¯¹è¯·æ±‚å’Œå“åº”çš„å¯¹è±¡è¿›è¡Œå°è£…å¤„ç†ã€‚\nå“ªäº›äº‹æƒ…é€‚åˆåœ¨ä¸­é—´ä»¶ä¸­åš ä»¥è¾ƒæµè¡Œçš„å¼€æº go æ¡†æ¶ chi ä¸ºä¾‹ï¼š\ncompress.go  =\u0026gt; å¯¹ http çš„ response body è¿›è¡Œå‹ç¼©å¤„ç† heartbeat.go  =\u0026gt; è®¾ç½®ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±ï¼Œä¾‹å¦‚ /pingï¼Œ/healthcheckï¼Œç”¨æ¥ç»™ load balancer ä¸€ç±»çš„å‰ç½®æœåŠ¡è¿›è¡Œæ¢æ´» logger.go  =\u0026gt; æ‰“å° request å¤„ç†æ—¥å¿—ï¼Œä¾‹å¦‚è¯·æ±‚å¤„ç†æ—¶é—´ï¼Œè¯·æ±‚è·¯ç”± profiler.go  =\u0026gt; æŒ‚è½½ pprof éœ€è¦çš„è·¯ç”±ï¼Œå¦‚ /pprofã€/pprof/trace åˆ°ç³»ç»Ÿä¸­ realip.go  =\u0026gt; ä»è¯·æ±‚å¤´ä¸­è¯»å– X-Forwarded-For å’Œ X-Real-IPï¼Œå°† http.Request ä¸­çš„ RemoteAddr ä¿®æ”¹ä¸ºå¾—åˆ°çš„ RealIP requestid.go  =\u0026gt; ä¸ºæœ¬æ¬¡è¯·æ±‚ç”Ÿæˆå•ç‹¬çš„ requestidï¼Œå¯ä¸€è·¯é€ä¼ ï¼Œç”¨æ¥ç”Ÿæˆåˆ†å¸ƒå¼è°ƒç”¨é“¾è·¯ï¼Œä¹Ÿå¯ç”¨äºåœ¨æ—¥å¿—ä¸­ä¸²è¿å•æ¬¡è¯·æ±‚çš„æ‰€æœ‰é€»è¾‘ timeout.go  =\u0026gt; ç”¨ context.Timeout è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå¹¶å°†å…¶é€šè¿‡ http.Request ä¸€è·¯é€ä¼ ä¸‹å» throttler.go  =\u0026gt; é€šè¿‡å®šé•¿å¤§å°çš„ channel å­˜å‚¨ tokenï¼Œå¹¶é€šè¿‡è¿™äº› token å¯¹æ¥å£è¿›è¡Œé™æµ æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸€äº›é€šç”¨çš„éä¸šåŠ¡åœºæ™¯çš„éƒ½å¯ä»¥ç”¨ä¸­é—´ä»¶æ¥åŒ…è£¹ã€‚\nspring æœ‰ AOP è¿™ä¸ªå¤§æ€å™¨ï¼Œå®ƒé‡‡ç”¨åŠ¨æ€ä»£ç†çš„æ–¹å¼ä¹Ÿå¯ä»¥å®ç°ä¸­é—´ä»¶çš„è¡Œä¸ºã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E8%B0%88%E8%B0%88web%E6%A1%86%E6%9E%B6/","summary":"è¿™ç¯‡æ–‡ç« æ‰“çš„æ ‡ç­¾æ¯”è¾ƒå¤šï¼Œä¹ŸåŸºæœ¬æ¶µç›–äº†æˆ‘æ‰€äº†è§£çš„ä¸€äº›çŸ¥è¯†ï¼Œå½’çº³æ€»ç»“ä¸€ä¸‹è‡ªå·±å¯¹ web æ¡†æ¶çš„ç†è§£ã€‚è‡ªå·±äº†è§£çš„ä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œä¹Ÿè¯·å¤šå¤šæŒ‡æ•™ã€‚\nå†™ç¨‹åºå…ä¸äº†è¦åš web ç›¸å…³çš„ï¼Œç°åœ¨ç”±äºå‰åç«¯çš„åˆ†ç¦»ï¼Œåç«¯ä¸€èˆ¬åªæä¾› rest æ¥å£ï¼Œå‰ç«¯ä¸€èˆ¬ä½¿ç”¨ node æ¥åšæ¸²æŸ“ã€‚åœ¨ä¹‹å‰ä½¿ç”¨ jsp é‚£ä¸€å¥—çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šéƒ½è¦å†™ html+js çš„å‰ç«¯çš„ä¸€å¥—ï¼Œä¹Ÿè¦å†™åç«¯ java çš„ CRUDã€‚\næˆ‘ç†è§£çš„ web æ¡†æ¶ä¸­ï¼Œå¤§è‡´æ˜¯åˆ†ä¸ºè¿™ä¹ˆä¸¤ç±»ï¼š\n router æ¡†æ¶ mvc æ¡†æ¶  mvc ç±»æ¡†æ¶ mvcï¼Œåˆçº§ç¨‹åºå‘˜é¢è¯•ç¬”è¯•çš„æ—¶å€™å¿…è€ƒçš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚model-view-controllerï¼Œå³æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ã€‚\n mï¼Œæ¨¡å‹ä¸»è¦ç”¨äºå°è£…ä¸åº”ç”¨ç¨‹åºç›¸å…³çš„æ•°æ®ä»¥åŠå¯¹æ•°æ®çš„å¤„ç†æ–¹æ³•ã€‚ vï¼Œåœ¨ View ä¸­ä¸€èˆ¬æ²¡æœ‰ç¨‹åºä¸Šçš„é€»è¾‘ã€‚ä¸ºäº†å®ç° View ä¸Šçš„åˆ·æ–°åŠŸèƒ½ï¼ŒView éœ€è¦è®¿é—®å®ƒç›‘è§†çš„æ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ï¼Œå› æ­¤åº”è¯¥äº‹å…ˆåœ¨è¢«å®ƒç›‘è§†çš„æ•°æ®é‚£é‡Œæ³¨å†Œã€‚ cï¼Œç”¨äºæ§åˆ¶åº”ç”¨ç¨‹åºçš„æµç¨‹ã€‚  æˆ‘äº†è§£æ¯”è¾ƒå¤šçš„ mvc æ¡†æ¶æ˜¯ spring mvcã€‚springã€spring mvc å’Œ spring boot ç­‰ï¼Œä»–ä»¬å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œä¹Ÿä¸æ˜¯ä»…ä»…ç”¨äº web å¼€å‘ã€‚ä½†æ˜¯åœ¨è¿™é‡Œæˆ‘å°±ä¸åˆ†é‚£ä¹ˆç»†ï¼Œç»Ÿä¸€ç”¨ spring æ¥ä»£æ›¿ã€‚è¿™é‡Œæ‰€è¯´çš„ spring éƒ½æ˜¯æŒ‡ç‹­ä¹‰ä¸Šçš„ web å¼€å‘æ–¹é¢ã€‚\nåœ¨åš web å¼€å‘çš„æ—¶å€™ï¼Œé¡¹ç›®ç›®å½•ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š\n $ tree [16:23:43] . â”œâ”€â”€ mvnw â”œâ”€â”€ mvnw.cmd â”œâ”€â”€ pom.","title":"è°ˆè°ˆ web æ¡†æ¶"},{"content":"åˆ›ä¸šå…¬å¸çœŸçš„æ¯”è¾ƒé”»ç‚¼äººï¼Œæ¥è§¦äº†å¾ˆå¤šçš„ä¸œè¥¿ï¼Œè§†é‡å¼€é˜”äº†ï¼Œä½†æ˜¯åœ¨æŸäº›æ—¶å€™è‡ªå·±ç–²äºå¥”å‘½ï¼Œæ¯ä¸ªä¸œè¥¿éƒ½æ˜¯æ¥è§¦äº†ä¸€ç‚¹ç‚¹å°±è¢«èµ¶é¸­å­ä¸Šæ¶å¼€å§‹å¼€å‘äº†ã€‚\næŠ€æœ¯æ ˆ  Docker  docker æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä»¥å‰å°±çœ‹è¿‡ docker ç›¸å…³çš„ä¸œè¥¿ï¼Œä½†æ˜¯æ²¡æœ‰ä»”ç»†ç ”ç©¶ï¼Œdocker çš„å‘½ä»¤ä¼šç”¨ä¸€äº›ï¼Œåœ¨å·¥ä½œä¸­ä½¿ç”¨äº†ï¼Œçœ‹äº†ä¸€æœ¬ docker çš„ä¹¦ï¼Œèƒ½å¤Ÿç¼–å†™ docker çš„ compose æ–‡ä»¶ã€‚\n rancher  rancher æ˜¯ä¸€ä¸ªåšå®¹å™¨ç®¡ç†çš„ã€‚æˆ‘ä»¬æŠŠä¸»æœºæ·»åŠ åˆ° rancher ä¸­ï¼Œä»–å°±å¯ä»¥è‡ªåŠ¨åšåˆ° LBï¼ŒæœåŠ¡çš„å‘ç°ç¼–æ’ã€‚æˆ‘ä»¬éƒ¨ç½²çš„æ—¶å€™åªéœ€è¦ç¼–å†™ catalogï¼Œä»–å°±å¯ä»¥è‡ªåŠ¨å‘ç° docker åº”ç”¨ï¼Œç„¶åæ‹‰å–é•œåƒï¼Œéƒ¨ç½²åˆ°ç›¸å…³çš„æœºå™¨ä¸Šï¼Œå¾ˆæ˜¯æ–¹ä¾¿ã€‚\n aws  è¿‘æœŸä¸»è¦æ˜¯å¯¹ aws çš„è¿›è¡Œå…¬å¸æœåŠ¡çš„éƒ¨ç½²ï¼Œæ­å»ºä¸€å¥— rancher çš„ç¯å¢ƒã€‚aws çš„æœåŠ¡ç‰¹åˆ«å¤šï¼Œec2 æ˜¯å®ä¾‹ä¸»æœºï¼Œå°±å’Œè™šæ‹Ÿæœºä¸€æ ·ï¼ŒVPC å°±åƒæœºæˆ¿ï¼Œec2 ä¾æ‰˜äº VPC è€Œå­˜åœ¨ï¼Œåœ¨è¿™åŸºç¡€ä¸Šåˆäº†è§£äº†å­ç½‘ã€DHCP å¼¹æ€§ IP ç­‰ç­‰ã€‚\n kotlin  ä¹‹å‰è‡ªå·±ç”¨ kotlin å¼€å‘è¿‡ä¸€ä¸ªåšå®¢ï¼Œå¯¹ kotlin çš„æ„Ÿè§‰æ˜¯æœ‰äº›ä¸œè¥¿å†™çš„å¾ˆçˆ½ï¼Œä½†æ˜¯è¿˜æ˜¯è§‰å¾— java å¥½ç”¨ä¸€äº›ï¼Œå¯¹ kotlin çš„æ€åº¦æ˜¯ç”¨ä¸ç”¨éƒ½æ— æ‰€è°“ã€‚\n guice  è¿™ä¸ªæˆ‘ä¹‹å‰éƒ½è¯»é”™äº†ï¼Œæˆ‘è¯»æˆäº†ç›–æ–¯ï¼Œå…¶å®æ˜¯å’Œæœæ±çš„è‹±æ–‡å‘éŸ³å¾ˆåƒï¼Œju æ–¯ã€‚åªæ˜¯ä¸€ä¸ªä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œåªæ˜¯å•çº¯çš„å»åš DIï¼Œæ¯” spring æ›´è½»é‡çº§ä¸€äº›ã€‚\néœ€è¦æˆ‘ä»¬ç¼–å†™ AppModule.java å»æ‰‹åŠ¨é…ç½®å“ªä¸ªç±»æ³¨å…¥å“ªä¸ªç±»ã€‚\n rxjava  rxjava æˆ‘éƒ½æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªç³»ç»Ÿçš„æ•™ç¨‹ï¼Œä¸çŸ¥é“è¯¥ä»å“ªé‡Œå­¦ä¹ ã€‚\n vertx  vertx+Reactive ç¼–ç¨‹çš„æ–¹å¼ç›¸å½“è€ƒéªŒå¿ƒæ™ºï¼Œè‡ªå·±è„‘å­ä¸­çš„ç¼–ç¨‹æ–¹å¼è¿˜æ²¡è½¬è¿‡æ¥ã€‚\n ES6  node ä»£ç ä¸­éƒ½æ˜¯ç”¨ es6 æ¥å†™çš„ï¼Œasync å’Œ await ç°åœ¨ä¹Ÿä¼šç”¨äº†ã€‚\n express  æƒ³åˆ°è‡ªå·±å¤§å­¦çš„æ—¶å€™çœ‹è¿‡ node çš„ä¹¦ï¼Œé‡Œé¢è®²çš„å°±æ˜¯ expressï¼Œåªæ˜¯è‡ªå·±å½“æ—¶æ²¡æƒ³æ˜ç™½ï¼Œç°åœ¨çœ‹çš„å›è°ƒå¤šäº†ï¼Œç®—æ˜¯ç†Ÿæ‚‰äº†ä»–è¿™ç§çš„ç¼–ç¨‹æ¨¡å¼ï¼Œæ‰€ä»¥è§‰å¾— express ç‰¹åˆ«ç®€å•æ˜“ä¸Šæ‰‹ã€‚\n typescript  è¿˜æ²¡å®ƒå»å†™ä¸œè¥¿ï¼Œå¯èƒ½ä¸‹å‘¨ä¼šç”¨å®ƒæ¥å†™ä¸ªæœºå™¨äººã€‚\nè²Œä¼¼è‡ªå·±å·²ç»å®Œå…¨æŠ›å¼ƒäº† spring+java çš„é‚£ä¸€å¥—ä¸œè¥¿ï¼Œæ²¡æœºä¼šç”¨åˆ°ã€‚\nçŸ¥è¯†é¢æ‰©å±•  ç›‘æ§  grafana+Prometheus+graylog å»åšå¯è§†åŒ–å’Œæ—¥å¿—çš„ç›‘æ§ã€‚\nå¯¹äºä¸šåŠ¡çš„æ•°æ®ï¼Œéœ€è¦åœ¨ä»£ç å±‚é¢è¿›è¡ŒåŸ‹ç‚¹ï¼ŒæŠŠè¦ç›‘æ§çš„æ•°æ®ä¼ ç»™æ™®ç½—ç±³ä¿®æ–¯ã€‚\n FSM çŠ¶æ€æœº  æœºå™¨äººçš„æ¡†æ¶ä½¿ç”¨çš„æ˜¯ FSM çŠ¶æ€æœºæ¥ç®¡ç†ï¼Œä»¥å‰åšæ¸¸æˆçš„æ—¶å€™æ¥è§¦è¿‡ã€‚\n ç½‘å…³  ç½‘å…³ç°åœ¨å·²ç»æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„æ ‡é…äº†ï¼Œç”¨å®ƒæ¥åšä¸€äº›é™æµï¼ŒLB å’Œæ—¥å¿—æ”¶é›†ç­‰ç­‰ã€‚\næˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ kongï¼Œåœ¨è¿™é‡Œ kong åŠ ä¸Šä¸€äº›æ’ä»¶ï¼Œç›¸å½“å¥½ç”¨ã€‚\n è§„åˆ™å¼•æ“  åœ¨è§„åˆ™å¼•æ“ä¸­ï¼Œéƒ½æ˜¯ä¸€ä¸ªä¸ªè§„åˆ™ã€‚\n DSL  é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œåœ¨è§„åˆ™å¼•æ“å’Œæœºå™¨äººçš„æ—¶å€™ï¼Œå°±ç”¨äº† DSLã€‚æˆ‘ç°åœ¨çš„ç†è§£å°±æ˜¯ DSL å°±æ˜¯ç”¨ç¼–ç¨‹è¯­è¨€å®ç°çš„ä¸€äº›å‡½æ•°ã€‚\n Key Transparency  è°·æ­Œçš„ä¸€ä¸ªå…¬é’¥ç®¡ç†åº“ï¼Œä¿è¯äº†æ— æ³•è¢«ç¯¡æ”¹ã€‚\næœªæ¥å¯èƒ½è¦æ¥è§¦  go  ","permalink":"https://zhenfeng-zhu.github.io/post/%E6%8A%80%E6%9C%AF%E6%A0%88/","summary":"åˆ›ä¸šå…¬å¸çœŸçš„æ¯”è¾ƒé”»ç‚¼äººï¼Œæ¥è§¦äº†å¾ˆå¤šçš„ä¸œè¥¿ï¼Œè§†é‡å¼€é˜”äº†ï¼Œä½†æ˜¯åœ¨æŸäº›æ—¶å€™è‡ªå·±ç–²äºå¥”å‘½ï¼Œæ¯ä¸ªä¸œè¥¿éƒ½æ˜¯æ¥è§¦äº†ä¸€ç‚¹ç‚¹å°±è¢«èµ¶é¸­å­ä¸Šæ¶å¼€å§‹å¼€å‘äº†ã€‚\næŠ€æœ¯æ ˆ  Docker  docker æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä»¥å‰å°±çœ‹è¿‡ docker ç›¸å…³çš„ä¸œè¥¿ï¼Œä½†æ˜¯æ²¡æœ‰ä»”ç»†ç ”ç©¶ï¼Œdocker çš„å‘½ä»¤ä¼šç”¨ä¸€äº›ï¼Œåœ¨å·¥ä½œä¸­ä½¿ç”¨äº†ï¼Œçœ‹äº†ä¸€æœ¬ docker çš„ä¹¦ï¼Œèƒ½å¤Ÿç¼–å†™ docker çš„ compose æ–‡ä»¶ã€‚\n rancher  rancher æ˜¯ä¸€ä¸ªåšå®¹å™¨ç®¡ç†çš„ã€‚æˆ‘ä»¬æŠŠä¸»æœºæ·»åŠ åˆ° rancher ä¸­ï¼Œä»–å°±å¯ä»¥è‡ªåŠ¨åšåˆ° LBï¼ŒæœåŠ¡çš„å‘ç°ç¼–æ’ã€‚æˆ‘ä»¬éƒ¨ç½²çš„æ—¶å€™åªéœ€è¦ç¼–å†™ catalogï¼Œä»–å°±å¯ä»¥è‡ªåŠ¨å‘ç° docker åº”ç”¨ï¼Œç„¶åæ‹‰å–é•œåƒï¼Œéƒ¨ç½²åˆ°ç›¸å…³çš„æœºå™¨ä¸Šï¼Œå¾ˆæ˜¯æ–¹ä¾¿ã€‚\n aws  è¿‘æœŸä¸»è¦æ˜¯å¯¹ aws çš„è¿›è¡Œå…¬å¸æœåŠ¡çš„éƒ¨ç½²ï¼Œæ­å»ºä¸€å¥— rancher çš„ç¯å¢ƒã€‚aws çš„æœåŠ¡ç‰¹åˆ«å¤šï¼Œec2 æ˜¯å®ä¾‹ä¸»æœºï¼Œå°±å’Œè™šæ‹Ÿæœºä¸€æ ·ï¼ŒVPC å°±åƒæœºæˆ¿ï¼Œec2 ä¾æ‰˜äº VPC è€Œå­˜åœ¨ï¼Œåœ¨è¿™åŸºç¡€ä¸Šåˆäº†è§£äº†å­ç½‘ã€DHCP å¼¹æ€§ IP ç­‰ç­‰ã€‚\n kotlin  ä¹‹å‰è‡ªå·±ç”¨ kotlin å¼€å‘è¿‡ä¸€ä¸ªåšå®¢ï¼Œå¯¹ kotlin çš„æ„Ÿè§‰æ˜¯æœ‰äº›ä¸œè¥¿å†™çš„å¾ˆçˆ½ï¼Œä½†æ˜¯è¿˜æ˜¯è§‰å¾— java å¥½ç”¨ä¸€äº›ï¼Œå¯¹ kotlin çš„æ€åº¦æ˜¯ç”¨ä¸ç”¨éƒ½æ— æ‰€è°“ã€‚\n guice  è¿™ä¸ªæˆ‘ä¹‹å‰éƒ½è¯»é”™äº†ï¼Œæˆ‘è¯»æˆäº†ç›–æ–¯ï¼Œå…¶å®æ˜¯å’Œæœæ±çš„è‹±æ–‡å‘éŸ³å¾ˆåƒï¼Œju æ–¯ã€‚åªæ˜¯ä¸€ä¸ªä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œåªæ˜¯å•çº¯çš„å»åš DIï¼Œæ¯” spring æ›´è½»é‡çº§ä¸€äº›ã€‚\néœ€è¦æˆ‘ä»¬ç¼–å†™ AppModule.java å»æ‰‹åŠ¨é…ç½®å“ªä¸ªç±»æ³¨å…¥å“ªä¸ªç±»ã€‚\n rxjava  rxjava æˆ‘éƒ½æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªç³»ç»Ÿçš„æ•™ç¨‹ï¼Œä¸çŸ¥é“è¯¥ä»å“ªé‡Œå­¦ä¹ ã€‚","title":"æŠ€æœ¯æ ˆ"},{"content":"å…·ä½“æ–¹æ³• Configuring a remote for a fork  ç»™ fork é…ç½®ä¸€ä¸ª remote ä¸»è¦ä½¿ç”¨ git remote -v æŸ¥çœ‹è¿œç¨‹çŠ¶æ€ã€‚  git remote -v # origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch) # origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (push)  æ·»åŠ ä¸€ä¸ªå°†è¢«åŒæ­¥ç»™ fork è¿œç¨‹çš„ä¸Šæ¸¸ä»“åº“  git remote add upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git  å†æ¬¡æŸ¥çœ‹çŠ¶æ€ç¡®è®¤æ˜¯å¦é…ç½®æˆåŠŸã€‚  git remote -v # origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch) # origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (push) # upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (fetch) # upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (push) Syncing a fork  ä»ä¸Šæ¸¸ä»“åº“ fetch åˆ†æ”¯å’Œæäº¤ç‚¹ï¼Œä¼ é€åˆ°æœ¬åœ°ï¼Œå¹¶ä¼šè¢«å­˜å‚¨åœ¨ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ upstream/master git fetch upstream  git fetch upstream # remote: Counting objects: 75, done. # remote: Compressing objects: 100% (53/53), done. # remote: Total 62 (delta 27), reused 44 (delta 9) # Unpacking objects: 100% (62/62), done. # From https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY # * [new branch] master -\u0026gt; upstream/master  åˆ‡æ¢åˆ°æœ¬åœ°ä¸»åˆ†æ”¯(å¦‚æœä¸åœ¨çš„è¯) git checkout master  git checkout master # Switched to branch \u0026#39;master\u0026#39;  æŠŠ upstream/master åˆ†æ”¯åˆå¹¶åˆ°æœ¬åœ° master ä¸Šï¼Œè¿™æ ·å°±å®Œæˆäº†åŒæ­¥ï¼Œå¹¶ä¸”ä¸ä¼šä¸¢æ‰æœ¬åœ°ä¿®æ”¹çš„å†…å®¹ã€‚ git merge upstream/master  git merge upstream/master # Updating a422352..5fdff0f # Fast-forward # README | 9 ------- # README.md | 7 ++++++ # 2 files changed, 7 insertions(+), 9 deletions(-) # delete mode 100644 README # create mode 100644 README.md  å¦‚æœæƒ³æ›´æ–°åˆ° GitHub çš„ fork ä¸Šï¼Œç›´æ¥ git push origin master å°±å¥½äº†ã€‚  ","permalink":"https://zhenfeng-zhu.github.io/post/%E5%90%8C%E6%AD%A5%E4%B8%80%E4%B8%AA-fork/","summary":"å…·ä½“æ–¹æ³• Configuring a remote for a fork  ç»™ fork é…ç½®ä¸€ä¸ª remote ä¸»è¦ä½¿ç”¨ git remote -v æŸ¥çœ‹è¿œç¨‹çŠ¶æ€ã€‚  git remote -v # origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch) # origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (push)  æ·»åŠ ä¸€ä¸ªå°†è¢«åŒæ­¥ç»™ fork è¿œç¨‹çš„ä¸Šæ¸¸ä»“åº“  git remote add upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git  å†æ¬¡æŸ¥çœ‹çŠ¶æ€ç¡®è®¤æ˜¯å¦é…ç½®æˆåŠŸã€‚  git remote -v # origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch) # origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (push) # upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (fetch) # upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (push) Syncing a fork  ä»ä¸Šæ¸¸ä»“åº“ fetch åˆ†æ”¯å’Œæäº¤ç‚¹ï¼Œä¼ é€åˆ°æœ¬åœ°ï¼Œå¹¶ä¼šè¢«å­˜å‚¨åœ¨ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ upstream/master git fetch upstream  git fetch upstream # remote: Counting objects: 75, done.","title":"åŒæ­¥ä¸€ä¸ª fork"},{"content":"æœ€è¿‘å…¬å¸è¦ç»Ÿä¸€æŠ€æœ¯æ ˆï¼Œåœ¨ kotlin å’Œ go ä¹‹é—´é€‰ã€‚æˆ‘å¿ƒé‡Œæ˜¯æ¯”è¾ƒå€¾å‘ go çš„ï¼Œä¸»è¦æœ‰å¦‚ä¸‹å‡ ç‚¹ä½“ä¼šã€‚\n è¯­è¨€ç®€å•ï¼Œä¸Šæ‰‹å¿«ã€‚ gorotuine æ˜“å‘å¸ƒ åƒåœ¾å›æ”¶ çº¦å®šå¤§äºé…ç½®  æˆ‘æœ€æ—©å¬è¯´åç¨‹ï¼Œæ˜¯åœ¨å¤§ä¸‰æ‰¾å®ä¹ çš„æ—¶å€™ï¼Œé‚£ä¸ªæ—¶å€™é¢è¯•ä¼šé—®çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»ï¼Œé—®çš„æ·±ä¸€äº›å°±æ˜¯åç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ã€‚æ¸¸æˆå…¬å¸åŸºæœ¬éƒ½ç”¨ luaï¼Œçœ‹äº† lua çš„èµ„æ–™åï¼Œå¯¹åç¨‹æœ‰äº†ä¸€äº›è‡ªå·±çš„äº†è§£ï¼Œéšåå°±æ˜¯åœ¨åš Unity ç›¸å…³çš„å¼€å‘ï¼Œåœ¨ unity ä¸­ä½¿ç”¨äº†å¾ˆå¤šçš„åç¨‹ï¼Œä½†æ˜¯åœ¨ unity ä¸­ä½¿ç”¨çš„åç¨‹å¥½åƒè·Ÿä¸»æµçš„ä¸å¤ªä¸€æ ·ï¼Œåœ¨çœ‹äº† go ä¹‹åï¼Œè±ç„¶å¼€æœ—ã€‚\ngoroutine ä½¿ç”¨çš„å†…å­˜æ¯”çº¿ç¨‹æ›´å°‘ï¼Œgo åœ¨è¿è¡Œçš„æ—¶å€™ä¼šè‡ªåŠ¨åœ¨é…ç½®çš„ä¸€ç»„é€»è¾‘å¤„ç†å™¨ä¸Šè°ƒåº¦æ‰§è¡Œã€‚æ¯”å¦‚ï¼š\nfunc log(msg string){  ... }  go log(\u0026#34;\u0026#34;) ä½¿ç”¨å…³é”®å­— goï¼Œå³å¯è®© log å‡½æ•°åœ¨ä¸€ä¸ª goroutine é‡Œæ‰§è¡Œäº†ã€‚\nå¹¶å‘æœ€éš¾çš„éƒ¨åˆ†æ˜¯è¦ç¡®ä¿å…¶ä»–å¹¶å‘è¿è¡Œçš„è¿›ç¨‹ã€çº¿ç¨‹æˆ–è€… goroutine ä¸ä¼šä»¥å¤–çš„ä¿®æ”¹æ•°æ®ã€‚go ä½¿ç”¨äº† Channel çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¯¹äºé€šé“æ¨¡å¼ï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ª goroutine ä¿®æ”¹æ•°æ®ã€‚\nè¯´èµ· go çš„è¯­è¨€ç®€å•ï¼Œå…¶å®ä¸»è¦æ˜¯ä»–çš„ç±»å‹æ¯”è¾ƒç®€å•ã€‚go ä½¿ç”¨çš„æ˜¯ç»„åˆæ¨¡å¼ï¼Œåªéœ€è¦å°†ä¸€ä¸ªç±»å‹åµŒå…¥åˆ°å¦å¤–ä¸€ä¸ªç±»å‹å°±å¯ä»¥å¤ç”¨æ‰€æœ‰çš„åŠŸèƒ½ã€‚è€Œä¸” go è¿˜å…·æœ‰ç‹¬ç‰¹çš„æ¥å£å®ç°æœºåˆ¶ï¼Œå…è®¸ç”¨æˆ·å¯¹è¡Œä¸ºè¿›è¡Œå»ºæ¨¡ï¼Œåœ¨ go ä¸­ä¸éœ€è¦å£°æ˜æŸä¸ªç±»å‹å®ç°äº†æŸä¸ªæ¥å£ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯ä½¿ç”¨ä»€ä¹ˆæ¥å£ã€‚\nå¯¹äº java æ¥è¯´ï¼Œæ‰€æœ‰çš„è®¾è®¡éƒ½æ˜¯å›´ç»•ç€æ¥å£å±•å¼€ï¼Œäºæ˜¯åœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼Œå°±æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼š\ninterface User{  void login();  void logout(); } åœ¨ java ä¸­ï¼Œç»§æ‰¿çš„ç±»å¿…é¡»æ˜¾å¼å£°æ˜ç»§æ‰¿äº†æ­¤æ¥å£ã€‚è€Œåœ¨ go ä¸­æ¥å£åªæ˜¯æè¿°ä¸€ä¸ªåŠ¨ä½œï¼Œå¦‚æœè¯´æ˜¯å®ç°è¿™ä¸ªæ¥å£ï¼Œåªéœ€è¦è®©æŸä¸ªå®ä¾‹å®ç°äº†è¿™ä¸ªæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•å°±è¡Œäº†ã€‚\ntype Reader interface{  Read(p []byte))(n int, err error) } è¿™å…¶å®å’Œä¼ ç»Ÿçš„ oop è¯­è¨€çš„æ¥å£æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼Œgo ä¸­çš„æ¥å£ä¸€èˆ¬åªå®šä¹‰ä¸€ä¸ªå•ä¸€çš„åŠ¨ä½œï¼Œå®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œè¿™æ›´æœ‰åˆ©äºä½¿ç”¨ç»„åˆæ¥å¤ç”¨ä»£ç ã€‚\nçº¦å®šå¤§äºé…ç½®è¿™ç‚¹ï¼Œgo åœ¨è¿™æ–¹é¢ä¸Šåšçš„æ„Ÿè§‰æœ‰ç‚¹å„¿å¹æ¯›æ±‚ç–µäº†ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿä½¿å¾—ç¨‹åºå¯è¯»æ€§æ›´å¼ºï¼Œæ²¡æœ‰å¾ˆå¤šåƒåœ¾ä»£ç ã€‚æ¯”å¦‚ go çš„æ–‡ä»¶ç»“æ„å¿…é¡»æ˜¯ src pkg å’Œ bin ä¸‰ä¸ªåŒ…ï¼Œè€Œä¸” go ä¹Ÿä¸å…è®¸ä½ å£°æ˜ä¸€ä¸ªå˜é‡å´ä¸ä½¿ç”¨ï¼Œå¯¼å…¥äº†ä¸€ä¸ªåŒ…å´ä¸ä½¿ç”¨ï¼Œè€Œä¸”ç¨‹åºçš„ä»£ç ä¹Ÿæœ‰çº¦å®šï¼Œinit æ–¹æ³•æ¯” main æ–¹æ³•æ›´æ—©æ‰§è¡Œã€‚\ngo çš„å¹¶å‘ è¯´åˆ°å¹¶å‘ï¼Œå°±ä¼šæƒ³åˆ°å¦å¤–ä¸€ä¸ªæ¦‚å¿µï¼Œå¹¶è¡Œã€‚å¯ä»¥ç®€å•è¿™æ ·çš„ç†è§£ï¼š\nå¹¶å‘æ˜¯åŒæ—¶ç®¡ç†å¤šä¸ªäº‹æƒ…ï¼Œè€Œå¹¶è¡Œæ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ã€‚ä¹Ÿå°±æ˜¯å¹¶å‘æ˜¯manageï¼Œå¹¶è¡Œæ˜¯runã€‚ å¯¹äºå•æ ¸å¤„ç†å™¨æ¥è®²ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œï¼Œé‚£ä¹ˆå¹¶å‘å°±æ˜¯åŒæ—¶ç®¡ç†å¤šä¸ªä»»åŠ¡ï¼Œè®©ä»–ä»¬äº¤æ›¿æ‰§è¡Œã€‚å¹¶è¡Œæ˜¯é’ˆå¯¹äºå¤šæ ¸å¤„ç†å™¨çš„ï¼ŒåŒä¸€æ—¶åˆ»å¯ä»¥æŠŠå¤šä¸ªä»»åŠ¡æ”¾åœ¨ä¸åŒçš„å¤„ç†å™¨ä¸Šæ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶æ‰§è¡Œã€‚\nåœ¨ go é‡Œé¢ä¸»è¦æ˜¯é‡‡ç”¨åç¨‹æ¥å®ç°å¹¶å‘çš„ï¼Œä¹Ÿå°±æ˜¯ goroutineã€‚ä¸å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œgo æ˜¯åœ¨è¯­æ³•å±‚é¢åšåˆ°çš„ï¼Œå³ go func();\nè¯­æ³• go f(x, y) go æ˜¯å…³é”®å­—ï¼Œåé¢è·Ÿå‡½æ•°ã€‚\nä¾‹å­ package main  import (  \u0026#34;log\u0026#34;  \u0026#34;time\u0026#34; )  func doSomething(id int) {  log.Printf(\u0026#34;before do job:(%d) \\n\u0026#34;, id)  time.Sleep(3 * time.Second)  log.Printf(\u0026#34;after do job:(%d) \\n\u0026#34;, id) }  func main() {  doSomething(1)  doSomething(2)  doSomething(3) } è¿™ä¸ªä¾‹å­çš„è¾“å‡ºæ˜¯ï¼š\n2018/04/15 17:06:05 before do job:(1) 2018/04/15 17:06:08 after do job:(1) 2018/04/15 17:06:08 before do job:(2) 2018/04/15 17:06:11 after do job:(2) 2018/04/15 17:06:11 before do job:(3) 2018/04/15 17:06:14 after do job:(3) å¯ä»¥çœ‹åˆ°æ˜¯ç”¨äº† 9 ç§’çš„æ—¶é—´æ‰å®Œæˆï¼Œå¦‚æœæ˜¯é‡‡ç”¨ goroutine çš„è¯ï¼Œå°±å¾ˆå¿«ã€‚å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨æ‰§è¡Œ doSomething ä¹‹å‰ï¼ŒåŠ ä¸Š go å…³é”®å­—ã€‚\nimport (  \u0026#34;log\u0026#34;  \u0026#34;time\u0026#34; )  func doSomething(id int) {  log.Printf(\u0026#34;before do job:(%d) \\n\u0026#34;, id)  time.Sleep(3 * time.Second)  log.Printf(\u0026#34;after do job:(%d) \\n\u0026#34;, id) }  func main() {  go doSomething(1)  go doSomething(2)  go doSomething(3) } ä½†æ˜¯è¿™æ ·çš„è¯ï¼Œä»€ä¹ˆç»“æœä¹Ÿæ²¡æœ‰ï¼Œæ˜¯å› ä¸º main å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª goroutineï¼Œmain æ‰§è¡Œå®Œä¹‹åï¼Œå…¶ä»–çš„è¿˜æ²¡å¼€å§‹ï¼Œæ‰€ä»¥ä»€ä¹ˆä¹Ÿçœ‹ä¸åˆ°ã€‚æœ€ç®€å•çš„åŠæ³•å°±æ˜¯è®© main å‡½æ•°ç­‰å¾…ä¸€æ®µæ—¶é—´å†ç»“æŸï¼Œä½†æ˜¯è¿™æ ·ä¸å¤Ÿä¼˜é›…ã€‚\næˆ‘ä»¬åº”è¯¥é‡‡ç”¨ sync.WaitGroup æ¥ç­‰å¾…æ‰€æœ‰çš„ goroutine ç»“æŸã€‚\npackage main  import (  \u0026#34;log\u0026#34;  \u0026#34;sync\u0026#34;  \u0026#34;time\u0026#34; )  func doSomething(id int, wg *sync.WaitGroup) {  defer wg.Done()   log.Printf(\u0026#34;before do job:(%d) \\n\u0026#34;, id)  time.Sleep(3 * time.Second)  log.Printf(\u0026#34;after do job:(%d) \\n\u0026#34;, id) }  func main() {  var wg sync.WaitGroup  wg.Add(3)   // å› ä¸ºæˆ‘ä»¬è¦ä¿®æ”¹wgçš„çŠ¶æ€ï¼Œæ‰€ä»¥è¦ä¼ æŒ‡é’ˆè¿‡å»  go doSomething(1, \u0026amp;wg)  go doSomething(2, \u0026amp;wg)  go doSomething(3, \u0026amp;wg)   wg.Wait()  log.Printf(\u0026#34;finish all jobs\\n\u0026#34;) } æ‰§è¡Œç»“æœæ˜¯ï¼š\n2018/04/15 17:13:14 before do job:(3) 2018/04/15 17:13:14 before do job:(2) 2018/04/15 17:13:14 before do job:(1) 2018/04/15 17:13:17 after do job:(2) 2018/04/15 17:13:17 after do job:(1) 2018/04/15 17:13:17 after do job:(3) å¯ä»¥çœ‹åˆ°è¿™æ¬¡åªç”¨äº† 3 ç§’å·¦å³å°±æ‰§è¡Œå®Œäº†ï¼Œè€Œä¸”ä»–ä»¬çš„æ‰§è¡Œé¡ºåºä¹Ÿä¸ç¡®å®šï¼Œç«äº‰æ‰§è¡Œã€‚\nchannel æ¯ä¸ªåç¨‹ä¹‹é—´è¦è¿›è¡Œé€šä¿¡ï¼Œé‚£ä¹ˆåœ¨é€šä¿¡çš„æ—¶å€™é‡‡ç”¨çš„æ˜¯ Channel çš„å½¢å¼ï¼Œå³ä¸€ä¸ª goroutine å°†æ•°æ®ä¼ é€’ç»™ Channelï¼Œå¦ä¸€ä¸ª goroutine ä» Channel ä¸­è¯»å–æ•°æ®ã€‚\nåˆ›å»º Channel æœ‰ä¸¤ç§æ–¹å¼ï¼š\nä½¿ç”¨å†…å»ºå‡½æ•° make å¯ä»¥åˆ›å»º channelï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š\nch := make(chan int) // æ³¨æ„ï¼š channel å¿…é¡»å®šä¹‰å…¶ä¼ é€’çš„æ•°æ®ç±»å‹ ä¹Ÿå¯ä»¥ç”¨ var å£°æ˜ channel, å¦‚ä¸‹ï¼š\nvar ch chan int ä»¥ä¸Šå£°æ˜çš„ channel éƒ½æ˜¯åŒå‘çš„ï¼Œæ„å‘³ç€å¯ä»¥è¯¥ channel å¯ä»¥å‘é€æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶æ•°æ®ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/go%E8%AF%AD%E8%A8%80%E4%BD%93%E4%BC%9A/","summary":"æœ€è¿‘å…¬å¸è¦ç»Ÿä¸€æŠ€æœ¯æ ˆï¼Œåœ¨ kotlin å’Œ go ä¹‹é—´é€‰ã€‚æˆ‘å¿ƒé‡Œæ˜¯æ¯”è¾ƒå€¾å‘ go çš„ï¼Œä¸»è¦æœ‰å¦‚ä¸‹å‡ ç‚¹ä½“ä¼šã€‚\n è¯­è¨€ç®€å•ï¼Œä¸Šæ‰‹å¿«ã€‚ gorotuine æ˜“å‘å¸ƒ åƒåœ¾å›æ”¶ çº¦å®šå¤§äºé…ç½®  æˆ‘æœ€æ—©å¬è¯´åç¨‹ï¼Œæ˜¯åœ¨å¤§ä¸‰æ‰¾å®ä¹ çš„æ—¶å€™ï¼Œé‚£ä¸ªæ—¶å€™é¢è¯•ä¼šé—®çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»ï¼Œé—®çš„æ·±ä¸€äº›å°±æ˜¯åç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ã€‚æ¸¸æˆå…¬å¸åŸºæœ¬éƒ½ç”¨ luaï¼Œçœ‹äº† lua çš„èµ„æ–™åï¼Œå¯¹åç¨‹æœ‰äº†ä¸€äº›è‡ªå·±çš„äº†è§£ï¼Œéšåå°±æ˜¯åœ¨åš Unity ç›¸å…³çš„å¼€å‘ï¼Œåœ¨ unity ä¸­ä½¿ç”¨äº†å¾ˆå¤šçš„åç¨‹ï¼Œä½†æ˜¯åœ¨ unity ä¸­ä½¿ç”¨çš„åç¨‹å¥½åƒè·Ÿä¸»æµçš„ä¸å¤ªä¸€æ ·ï¼Œåœ¨çœ‹äº† go ä¹‹åï¼Œè±ç„¶å¼€æœ—ã€‚\ngoroutine ä½¿ç”¨çš„å†…å­˜æ¯”çº¿ç¨‹æ›´å°‘ï¼Œgo åœ¨è¿è¡Œçš„æ—¶å€™ä¼šè‡ªåŠ¨åœ¨é…ç½®çš„ä¸€ç»„é€»è¾‘å¤„ç†å™¨ä¸Šè°ƒåº¦æ‰§è¡Œã€‚æ¯”å¦‚ï¼š\nfunc log(msg string){  ... }  go log(\u0026#34;\u0026#34;) ä½¿ç”¨å…³é”®å­— goï¼Œå³å¯è®© log å‡½æ•°åœ¨ä¸€ä¸ª goroutine é‡Œæ‰§è¡Œäº†ã€‚\nå¹¶å‘æœ€éš¾çš„éƒ¨åˆ†æ˜¯è¦ç¡®ä¿å…¶ä»–å¹¶å‘è¿è¡Œçš„è¿›ç¨‹ã€çº¿ç¨‹æˆ–è€… goroutine ä¸ä¼šä»¥å¤–çš„ä¿®æ”¹æ•°æ®ã€‚go ä½¿ç”¨äº† Channel çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¯¹äºé€šé“æ¨¡å¼ï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ª goroutine ä¿®æ”¹æ•°æ®ã€‚\nè¯´èµ· go çš„è¯­è¨€ç®€å•ï¼Œå…¶å®ä¸»è¦æ˜¯ä»–çš„ç±»å‹æ¯”è¾ƒç®€å•ã€‚go ä½¿ç”¨çš„æ˜¯ç»„åˆæ¨¡å¼ï¼Œåªéœ€è¦å°†ä¸€ä¸ªç±»å‹åµŒå…¥åˆ°å¦å¤–ä¸€ä¸ªç±»å‹å°±å¯ä»¥å¤ç”¨æ‰€æœ‰çš„åŠŸèƒ½ã€‚è€Œä¸” go è¿˜å…·æœ‰ç‹¬ç‰¹çš„æ¥å£å®ç°æœºåˆ¶ï¼Œå…è®¸ç”¨æˆ·å¯¹è¡Œä¸ºè¿›è¡Œå»ºæ¨¡ï¼Œåœ¨ go ä¸­ä¸éœ€è¦å£°æ˜æŸä¸ªç±»å‹å®ç°äº†æŸä¸ªæ¥å£ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯ä½¿ç”¨ä»€ä¹ˆæ¥å£ã€‚\nå¯¹äº java æ¥è¯´ï¼Œæ‰€æœ‰çš„è®¾è®¡éƒ½æ˜¯å›´ç»•ç€æ¥å£å±•å¼€ï¼Œäºæ˜¯åœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼Œå°±æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼š\ninterface User{  void login();  void logout(); } åœ¨ java ä¸­ï¼Œç»§æ‰¿çš„ç±»å¿…é¡»æ˜¾å¼å£°æ˜ç»§æ‰¿äº†æ­¤æ¥å£ã€‚è€Œåœ¨ go ä¸­æ¥å£åªæ˜¯æè¿°ä¸€ä¸ªåŠ¨ä½œï¼Œå¦‚æœè¯´æ˜¯å®ç°è¿™ä¸ªæ¥å£ï¼Œåªéœ€è¦è®©æŸä¸ªå®ä¾‹å®ç°äº†è¿™ä¸ªæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•å°±è¡Œäº†ã€‚","title":"Go è¯­è¨€ä½“ä¼š"},{"content":"ä¸»åŠ¨ç®¡ç†æ—¶é—´ï¼Œæ•¢äºè¯´ä¸ã€‚\næœ‰ç›®æ ‡å‘å‰çœ‹ï¼Œæ²¡ç›®æ ‡å‘é’±çœ‹ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E5%85%B3%E4%BA%8E%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/","summary":"ä¸»åŠ¨ç®¡ç†æ—¶é—´ï¼Œæ•¢äºè¯´ä¸ã€‚\næœ‰ç›®æ ‡å‘å‰çœ‹ï¼Œæ²¡ç›®æ ‡å‘é’±çœ‹ã€‚","title":"å…³äºæ—¶é—´ç®¡ç†"},{"content":"å½“æˆ‘ä»¬åœ¨åšæ•°æ®åº“åˆ†åº“åˆ†è¡¨æˆ–è€…åšåˆ†å¸ƒå¼ç¼“å­˜çš„æ—¶å€™ï¼Œä¸å¯é¿å…çš„éƒ½ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š\nå¦‚ä½•å°†æ•°æ®å‡åŒ€çš„åˆ†æ•£åˆ°å„ä¸ªèŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”å°½é‡çš„åœ¨åŠ å‡èŠ‚ç‚¹çš„æ—¶èƒ½ä½¿å—å½±å“çš„æ•°æ®æœ€å°‘ã€‚\n1 hash å–æ¨¡ éšæœºæ”¾ç½®å°±ä¸å¤šè¯´äº†ã€‚é€šå¸¸æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ¡ˆæ˜¯å“ˆå¸Œå–æ¨¡äº†ã€‚\nå¯ä»¥å°†ä¼ å…¥çš„ key æŒ‰ç…§ $$ index=hash(key) % N $$ è¿™æ ·æ¥è®¡ç®—å‡ºéœ€è¦å­˜æ”¾çš„èŠ‚ç‚¹ã€‚\nè¿™æ ·å¯ä»¥æ»¡è¶³æ•°æ®çš„å‡åŒ€åˆ†é…ï¼Œä½†æ˜¯è¿™ä¸ªç®—æ³•çš„å®¹é”™æ€§å’Œæ‰©å±•æ€§æ¯”è¾ƒå·®ã€‚æ¯”å¦‚å¢åŠ æˆ–è€…åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ key éƒ½è¦é‡æ–°è®¡ç®—ï¼Œæ˜¾ç„¶è¿™æ ·çš„æˆæœ¬æ¯”è¾ƒé«˜ï¼Œä¸ºæ­¤éœ€è¦ä¸€ä¸ªç®—æ³•æ¥æ»¡è¶³å‡åŒ€çš„åŒæ—¶ä¹Ÿè¦æœ‰è‰¯å¥½çš„å®¹é”™æ€§å’Œæ‰©å±•æ€§ã€‚\n2 ä¸€è‡´æ€§ hash ç®—æ³• ä¸€è‡´æ€§ hash ç®—æ³•æ˜¯å°†æ‰€æœ‰çš„å“ˆå¸Œå€¼æ„æˆäº†ä¸€ä¸ªç¯ï¼Œå…¶èŒƒå›´æ˜¯ 0~2^32-1ã€‚å¦‚å›¾ï¼š\nä¹‹åå°†å„ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹æ•£åˆ—åˆ°è¿™ä¸ªç¯ä¸Šï¼Œå¯ä»¥ç”¨èŠ‚ç‚¹çš„ IPï¼Œhostname è¿™æ ·å”¯ä¸€æ€§çš„å­—æ®µä½œä¸º key è¿›è¡Œ hashã€‚æ•£åˆ—ä¹‹åå¦‚ä¸‹ï¼š\nä¹‹åéœ€è¦å°†æ•°æ®å®šä½åˆ°å¯¹åº”çš„èŠ‚ç‚¹ä¸Šï¼Œä½¿ç”¨åŒæ ·çš„ hash å‡½æ•°å°† key ä¹Ÿæ˜ å°„åˆ°è¿™ä¸ªç¯ä¸Šã€‚\nè¿™æ ·å°±æŒ‰ç…§é¡ºæ—¶é’ˆæ–¹å‘å°±å¯ä»¥å°† k1 å®šä½åˆ° N1 èŠ‚ç‚¹ï¼Œk2 å®šä½åˆ° N3 èŠ‚ç‚¹ï¼Œk3 å®šä½åˆ° N2 èŠ‚ç‚¹ã€‚\n2.1 å®¹é”™æ€§ å‡è®¾ N1 å®•æœºäº†ï¼š\nä¾ç„¶æ ¹æ®é¡ºæ—¶é’ˆæ–¹å‘ï¼Œk2 å’Œ k3 ä¿æŒä¸å˜ï¼Œåªæœ‰ k1 è¢«é‡æ–°æ˜ å°„åˆ°äº† N3ã€‚è¿™æ ·å°±å¾ˆå¥½çš„ä¿è¯äº†å®¹é”™æ€§ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºæ—¶åªä¼šå½±å“åˆ°å°‘éƒ¨åˆ†æ•°æ®ã€‚\n2.2 æ‰©å±•æ€§ å½“æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼š\nåœ¨ N2 å’Œ N3 ä¹‹é—´æ–°å¢äº†ä¸€ä¸ªèŠ‚ç‚¹ N4ï¼Œè¿™æ—¶å—å½±å“çš„æ•°æ®åªæœ‰ k3ï¼Œå…¶ä½™çš„æ•°æ®ä¹Ÿæ˜¯ä¿æŒä¸å˜ã€‚\n2.3 è™šæ‹ŸèŠ‚ç‚¹ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¯¥ç®—æ³•ä¹Ÿæœ‰ä¸€äº›é—®é¢˜ï¼š\nå½“èŠ‚ç‚¹è¾ƒå°‘çš„æ—¶å€™å¯èƒ½å‡ºç°æ•°æ®ä¸å‡åŒ€çš„æƒ…å†µï¼š\nè¿™æ ·ä¼šå¯¼è‡´å¤§éƒ¨åˆ†æ•°æ®éƒ½åœ¨ N1 èŠ‚ç‚¹ï¼Œåªæœ‰å°‘é‡çš„æ•°æ®åœ¨ N2 èŠ‚ç‚¹ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹ã€‚\nå°†æ¯ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œå¤šæ¬¡å“ˆå¸Œï¼Œç”Ÿæˆçš„èŠ‚ç‚¹æ”¾ç½®åœ¨ç¯ä¸Šæˆä¸ºè™šæ‹ŸèŠ‚ç‚¹ã€‚\nè®¡ç®—æ—¶å¯ä»¥åœ¨ IP ååŠ ä¸Šç¼–å·æ¥ç”Ÿæˆå“ˆå¸Œå€¼ã€‚\nè¿™æ ·åªéœ€è¦åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šå¤šä¸€æ­¥ç”±è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°å®é™…èŠ‚ç‚¹çš„æ­¥éª¤å³å¯è®©å°‘é‡èŠ‚ç‚¹ä¹Ÿèƒ½æ»¡è¶³å‡åŒ€æ€§ã€‚\n3 å‚è€ƒ https://crossoverjie.top/2018/01/08/Consistent-Hash/#more\n","permalink":"https://zhenfeng-zhu.github.io/post/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/","summary":"å½“æˆ‘ä»¬åœ¨åšæ•°æ®åº“åˆ†åº“åˆ†è¡¨æˆ–è€…åšåˆ†å¸ƒå¼ç¼“å­˜çš„æ—¶å€™ï¼Œä¸å¯é¿å…çš„éƒ½ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š\nå¦‚ä½•å°†æ•°æ®å‡åŒ€çš„åˆ†æ•£åˆ°å„ä¸ªèŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”å°½é‡çš„åœ¨åŠ å‡èŠ‚ç‚¹çš„æ—¶èƒ½ä½¿å—å½±å“çš„æ•°æ®æœ€å°‘ã€‚\n1 hash å–æ¨¡ éšæœºæ”¾ç½®å°±ä¸å¤šè¯´äº†ã€‚é€šå¸¸æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ¡ˆæ˜¯å“ˆå¸Œå–æ¨¡äº†ã€‚\nå¯ä»¥å°†ä¼ å…¥çš„ key æŒ‰ç…§ $$ index=hash(key) % N $$ è¿™æ ·æ¥è®¡ç®—å‡ºéœ€è¦å­˜æ”¾çš„èŠ‚ç‚¹ã€‚\nè¿™æ ·å¯ä»¥æ»¡è¶³æ•°æ®çš„å‡åŒ€åˆ†é…ï¼Œä½†æ˜¯è¿™ä¸ªç®—æ³•çš„å®¹é”™æ€§å’Œæ‰©å±•æ€§æ¯”è¾ƒå·®ã€‚æ¯”å¦‚å¢åŠ æˆ–è€…åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ key éƒ½è¦é‡æ–°è®¡ç®—ï¼Œæ˜¾ç„¶è¿™æ ·çš„æˆæœ¬æ¯”è¾ƒé«˜ï¼Œä¸ºæ­¤éœ€è¦ä¸€ä¸ªç®—æ³•æ¥æ»¡è¶³å‡åŒ€çš„åŒæ—¶ä¹Ÿè¦æœ‰è‰¯å¥½çš„å®¹é”™æ€§å’Œæ‰©å±•æ€§ã€‚\n2 ä¸€è‡´æ€§ hash ç®—æ³• ä¸€è‡´æ€§ hash ç®—æ³•æ˜¯å°†æ‰€æœ‰çš„å“ˆå¸Œå€¼æ„æˆäº†ä¸€ä¸ªç¯ï¼Œå…¶èŒƒå›´æ˜¯ 0~2^32-1ã€‚å¦‚å›¾ï¼š\nä¹‹åå°†å„ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹æ•£åˆ—åˆ°è¿™ä¸ªç¯ä¸Šï¼Œå¯ä»¥ç”¨èŠ‚ç‚¹çš„ IPï¼Œhostname è¿™æ ·å”¯ä¸€æ€§çš„å­—æ®µä½œä¸º key è¿›è¡Œ hashã€‚æ•£åˆ—ä¹‹åå¦‚ä¸‹ï¼š\nä¹‹åéœ€è¦å°†æ•°æ®å®šä½åˆ°å¯¹åº”çš„èŠ‚ç‚¹ä¸Šï¼Œä½¿ç”¨åŒæ ·çš„ hash å‡½æ•°å°† key ä¹Ÿæ˜ å°„åˆ°è¿™ä¸ªç¯ä¸Šã€‚\nè¿™æ ·å°±æŒ‰ç…§é¡ºæ—¶é’ˆæ–¹å‘å°±å¯ä»¥å°† k1 å®šä½åˆ° N1 èŠ‚ç‚¹ï¼Œk2 å®šä½åˆ° N3 èŠ‚ç‚¹ï¼Œk3 å®šä½åˆ° N2 èŠ‚ç‚¹ã€‚\n2.1 å®¹é”™æ€§ å‡è®¾ N1 å®•æœºäº†ï¼š\nä¾ç„¶æ ¹æ®é¡ºæ—¶é’ˆæ–¹å‘ï¼Œk2 å’Œ k3 ä¿æŒä¸å˜ï¼Œåªæœ‰ k1 è¢«é‡æ–°æ˜ å°„åˆ°äº† N3ã€‚è¿™æ ·å°±å¾ˆå¥½çš„ä¿è¯äº†å®¹é”™æ€§ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºæ—¶åªä¼šå½±å“åˆ°å°‘éƒ¨åˆ†æ•°æ®ã€‚\n2.2 æ‰©å±•æ€§ å½“æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼š\nåœ¨ N2 å’Œ N3 ä¹‹é—´æ–°å¢äº†ä¸€ä¸ªèŠ‚ç‚¹ N4ï¼Œè¿™æ—¶å—å½±å“çš„æ•°æ®åªæœ‰ k3ï¼Œå…¶ä½™çš„æ•°æ®ä¹Ÿæ˜¯ä¿æŒä¸å˜ã€‚","title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•"},{"content":"Spring Boot å¯åŠ¨åŸç†åˆ†æ æˆ‘ä»¬åœ¨å¼€å‘ spring boot åº”ç”¨çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šé‡åˆ°å¦‚ä¸‹çš„å¯åŠ¨ç±»ï¼š\n@SpringBootApplication public class DemoApplication {  public static void main(String[] args) {  SpringApplication.run(DemoApplication.class, args);  } } ä»è¿™æ®µä»£ç å¯ä»¥çœ‹å‡ºï¼Œæ³¨è§£@SpringBootApplication å’Œ SpringApplication.run()æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸¤ä¸ªä¸œè¥¿ã€‚\n1 @SpringApplication æ³¨è§£ @Target(ElementType.TYPE) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited @SpringBootConfiguration @EnableAutoConfiguration @ComponentScan(excludeFilters = {  @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),  @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) }) public @interface SpringBootApplication { ... } åœ¨è¿™æ®µä»£ç é‡Œï¼Œæ¯”è¾ƒé‡è¦çš„åªæœ‰ä¸‰ä¸ªæ³¨è§£ï¼š\n @Configurationï¼ˆ@SpringBootConfiguration ç‚¹å¼€æŸ¥çœ‹å‘ç°é‡Œé¢è¿˜æ˜¯åº”ç”¨äº†@Configurationï¼‰ @EnableAutoConfiguration @ComponentScan  å…¶å®ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸‰ä¸ªæ³¨è§£æ¥ä¿®é¥° springboot çš„å¯åŠ¨ç±»ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œ,å¦‚ä¸‹æ‰€ç¤ºï¼š\n@ComponentScan @EnableAutoConfiguration @Configuration public class DemoApplication {  public static void main(String[] args) {  SpringApplication.run(DemoApplication.class, args);  } } æ¯æ¬¡å†™è¿™ä¸‰ä¸ªæ³¨è§£çš„è¯ï¼Œæ¯”è¾ƒç¹çï¼Œæ‰€ä»¥å°± spring å›¢é˜Ÿå°±å°è£…äº†ä¸€ä¸ª@SpringBootApplicationã€‚\n1.1 @Configuration @Configuration å°±æ˜¯ JavaConfig å½¢å¼çš„ Spring Ioc å®¹å™¨çš„é…ç½®ç±»ä½¿ç”¨çš„é‚£ä¸ª@Configurationï¼ŒSpringBoot ç¤¾åŒºæ¨èä½¿ç”¨åŸºäº JavaConfig çš„é…ç½®å½¢å¼ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œçš„å¯åŠ¨ç±»æ ‡æ³¨äº†@Configuration ä¹‹åï¼Œæœ¬èº«å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ª IoC å®¹å™¨çš„é…ç½®ç±»ã€‚\nXML è·Ÿ config é…ç½®æ–¹å¼çš„åŒºåˆ«å¯ä»¥ä»å¦‚ä¸‹å‡ ä¸ªæ–¹é¢æ¥è¯´ï¼š\n  è¡¨è¾¾å½¢å¼å±‚é¢ åŸºäº xml çš„é…ç½®æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34;  xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34;  xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\u0026#34;  default-lazy-init=\u0026#34;true\u0026#34;\u0026gt;  \u0026lt;!--beanå®šä¹‰--\u0026gt; \u0026lt;/beans\u0026gt; åŸºäº java config é…ç½®æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š\n@Configuration public class MockConfiguration{  //beanå®šä¹‰ }   æ³¨å†Œ bean å®šä¹‰å±‚é¢ åŸºäº XML çš„é…ç½®å½¢å¼æ˜¯è¿™æ ·ï¼š\n\u0026lt;bean id=\u0026#34;mockService\u0026#34; class=\u0026#34;..MockServiceImpl\u0026#34;\u0026gt;  ... \u0026lt;/bean\u0026gt; è€ŒåŸºäº Java config çš„é…ç½®å½¢å¼æ˜¯è¿™æ ·çš„ï¼š\n@Configuration public class MockConfiguration{  @Bean  public MockService mockService(){  return new MockServiceImpl();  } } ä»»ä½•ä¸€ä¸ªæ ‡æ³¨äº†@Bean çš„æ–¹æ³•ï¼Œå…¶è¿”å›å€¼å°†ä½œä¸ºä¸€ä¸ª bean å®šä¹‰æ³¨å†Œåˆ° Spring çš„ IoC å®¹å™¨ï¼Œæ–¹æ³•åå°†é»˜è®¤æˆè¯¥ bean å®šä¹‰çš„ idã€‚\n  è¡¨è¾¾ä¾èµ–æ³¨å…¥å…³ç³»å±‚é¢ ä¸ºäº†è¡¨è¾¾ bean ä¸ bean ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œåœ¨ XML å½¢å¼ä¸­ä¸€èˆ¬æ˜¯è¿™æ ·ï¼š\n\u0026lt;bean id=\u0026#34;mockService\u0026#34; class=\u0026#34;..MockServiceImpl\u0026#34;\u0026gt;  \u0026lt;propery name =\u0026#34;dependencyService\u0026#34; ref=\u0026#34;dependencyService\u0026#34; /\u0026gt; \u0026lt;/bean\u0026gt;  \u0026lt;bean id=\u0026#34;dependencyService\u0026#34; class=\u0026#34;DependencyServiceImpl\u0026#34;\u0026gt;\u0026lt;/bean\u0026gt; è€ŒåŸºäº Java config çš„é…ç½®å½¢å¼æ˜¯è¿™æ ·çš„ï¼š\n@Configuration public class MockConfiguration{  @Bean  public MockService mockService(){  return new MockServiceImpl(dependencyService());  }   @Bean  public DependencyService dependencyService(){  return new DependencyServiceImpl();  } } å¦‚æœä¸€ä¸ª bean çš„å®šä¹‰ä¾èµ–å…¶ä»– bean,åˆ™ç›´æ¥è°ƒç”¨å¯¹åº”çš„ JavaConfig ç±»ä¸­ä¾èµ– bean çš„åˆ›å»ºæ–¹æ³•å°±å¯ä»¥äº†ã€‚\n  1.2 @ComponentScan @ComponentScan çš„åŠŸèƒ½å…¶å®å°±æ˜¯è‡ªåŠ¨æ‰«æå¹¶åŠ è½½ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶ï¼ˆæ¯”å¦‚@Component å’Œ@Repository ç­‰ï¼‰æˆ–è€… bean å®šä¹‰ï¼Œæœ€ç»ˆå°†è¿™äº› bean å®šä¹‰åŠ è½½åˆ° IoC å®¹å™¨ä¸­ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡ basePackages ç­‰å±æ€§æ¥ç»†ç²’åº¦çš„å®šåˆ¶@ComponentScan è‡ªåŠ¨æ‰«æçš„èŒƒå›´ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ Spring æ¡†æ¶å®ç°ä¼šä»å£°æ˜@ComponentScan æ‰€åœ¨ç±»çš„ package è¿›è¡Œæ‰«æã€‚\næ‰€ä»¥ SpringBoot çš„å¯åŠ¨ç±»æœ€å¥½æ˜¯æ”¾åœ¨ root package ä¸‹ï¼Œå› ä¸ºé»˜è®¤ä¸æŒ‡å®š basePackagesã€‚\n1.3 @EnableAutoConfiguration Spring æ¡†æ¶æä¾›äº†å„ç§åå­—ä¸º@Enable å¼€å¤´çš„ Annotation å®šä¹‰ï¼Œæ¯”å¦‚@EnableSchedulingã€@EnableCachingã€@EnableMBeanExport ç­‰ã€‚@EnableAutoConfiguration çš„ç†å¿µå’Œåšäº‹æ–¹å¼å…¶å®ä¸€è„‰ç›¸æ‰¿ï¼Œç®€å•æ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯ï¼Œå€ŸåŠ©@Import çš„æ”¯æŒï¼Œæ”¶é›†å’Œæ³¨å†Œç‰¹å®šåœºæ™¯ç›¸å…³çš„ bean å®šä¹‰ã€‚\n@EnableAutoConfiguration ä¹Ÿæ˜¯å€ŸåŠ©@Import çš„å¸®åŠ©ï¼Œå°†æ‰€æœ‰ç¬¦åˆè‡ªåŠ¨é…ç½®æ¡ä»¶çš„ bean å®šä¹‰åŠ è½½åˆ° IoC å®¹å™¨ã€‚\n@SuppressWarnings(\u0026#34;deprecation\u0026#34;) @Target(ElementType.TYPE) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited @AutoConfigurationPackage @Import(EnableAutoConfigurationImportSelector.class) public @interface EnableAutoConfiguration { ... } @EnableAutoConfiguration ä½œä¸ºä¸€ä¸ªå¤åˆ Annotationï¼Œ\nå…¶ä¸­ï¼Œæœ€å…³é”®çš„è¦å±@Import(EnableAutoConfigurationImportSelector.class)ï¼Œå€ŸåŠ© EnableAutoConfigurationImportSelectorï¼Œ@EnableAutoConfiguration å€ŸåŠ©äº SpringFactoriesLoader çš„æ”¯æŒå¯ä»¥å¸®åŠ© SpringBoot åº”ç”¨å°†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„@Configuration é…ç½®éƒ½åŠ è½½åˆ°å½“å‰ SpringBoot åˆ›å»ºå¹¶ä½¿ç”¨çš„ IoC å®¹å™¨ã€‚SpringFactoriesLoader çš„æ”¯æŒã€‚\n1.4 SpringFactoriesLoader SpringFactoriesLoader å±äº Spring æ¡†æ¶ç§æœ‰çš„ä¸€ç§æ‰©å±•æ–¹æ¡ˆï¼Œå…¶ä¸»è¦åŠŸèƒ½å°±æ˜¯ä»æŒ‡å®šçš„é…ç½®æ–‡ä»¶META-INF/spring.factoriesåŠ è½½é…ç½®ã€‚\npublic abstract class SpringFactoriesLoader {  public static \u0026lt;T\u0026gt; List\u0026lt;T\u0026gt; loadFactories(Class\u0026lt;T\u0026gt; factoryClass, ClassLoader classLoader) {  ...  }   public static List\u0026lt;String\u0026gt; loadFactoryNames(Class\u0026lt;?\u0026gt; factoryClass, ClassLoader classLoader){  ....  } } é…åˆ@EnableAutoConfiguration ä½¿ç”¨çš„è¯ï¼Œå®ƒæ›´å¤šæ˜¯æä¾›ä¸€ç§é…ç½®æŸ¥æ‰¾çš„åŠŸèƒ½æ”¯æŒï¼Œå³æ ¹æ®@EnableAutoConfiguration çš„å®Œæ•´ç±»å org.springframework.boot.autoconfigure.EnableAutoConfiguration ä½œä¸ºæŸ¥æ‰¾çš„ Key,è·å–å¯¹åº”çš„ä¸€ç»„@Configuration ç±»ã€‚\n@EnableAutoConfiguration è‡ªåŠ¨é…ç½®æµç¨‹å°±æ˜¯ï¼š\n ä» classpath ä¸­æœå¯»æ‰€æœ‰çš„ META-INF/spring.factories é…ç½®æ–‡ä»¶ï¼› å¹¶å°†å…¶ä¸­ org.springframework.boot.autoconfigure.EnableutoConfiguration å¯¹åº”çš„é…ç½®é¡¹é€šè¿‡åå°„ï¼ˆJava Refletionï¼‰å®ä¾‹åŒ–ä¸ºå¯¹åº”çš„æ ‡æ³¨äº†@Configuration çš„ JavaConfig å½¢å¼çš„ IoC å®¹å™¨é…ç½®ç±»ï¼› ç„¶åæ±‡æ€»ä¸ºä¸€ä¸ªå¹¶åŠ è½½åˆ° IoC å®¹å™¨ã€‚  2 SpringApplication SpringApplication çš„ run è¯¥æ–¹æ³•çš„ä¸»è¦æµç¨‹å¤§ä½“å¯ä»¥å½’çº³å¦‚ä¸‹ï¼š\n1ï¼‰ å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ SpringApplication çš„é™æ€ run æ–¹æ³•ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ª SpringApplication å¯¹è±¡å®ä¾‹ï¼Œç„¶åè°ƒç”¨è¿™ä¸ªåˆ›å»ºå¥½çš„ SpringApplication çš„å®ä¾‹æ–¹æ³•ã€‚åœ¨ SpringApplication å®ä¾‹åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå®ƒä¼šæå‰åšå‡ ä»¶äº‹æƒ…ï¼š\n æ ¹æ® classpath é‡Œé¢æ˜¯å¦å­˜åœ¨æŸä¸ªç‰¹å¾ç±»ï¼ˆorg.springframework.web.context.ConfigurableWebApplicationContextï¼‰æ¥å†³å®šæ˜¯å¦åº”è¯¥åˆ›å»ºä¸€ä¸ªä¸º Web åº”ç”¨ä½¿ç”¨çš„ ApplicationContext ç±»å‹ã€‚ ä½¿ç”¨ SpringFactoriesLoader åœ¨åº”ç”¨çš„ classpath ä¸­æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨çš„ ApplicationContextInitializerã€‚ ä½¿ç”¨ SpringFactoriesLoader åœ¨åº”ç”¨çš„ classpath ä¸­æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨çš„ ApplicationListenerã€‚ æ¨æ–­å¹¶è®¾ç½® main æ–¹æ³•çš„å®šä¹‰ç±»ã€‚  2ï¼‰ SpringApplication å®ä¾‹åˆå§‹åŒ–å®Œæˆå¹¶ä¸”å®Œæˆè®¾ç½®åï¼Œå°±å¼€å§‹æ‰§è¡Œ run æ–¹æ³•çš„é€»è¾‘äº†ï¼Œæ–¹æ³•æ‰§è¡Œä¼Šå§‹ï¼Œé¦–å…ˆéå†æ‰§è¡Œæ‰€æœ‰é€šè¿‡ SpringFactoriesLoader å¯ä»¥æŸ¥æ‰¾åˆ°å¹¶åŠ è½½çš„ SpringApplicationRunListenerã€‚è°ƒç”¨å®ƒä»¬çš„ started()æ–¹æ³•ï¼Œå‘Šè¯‰è¿™äº› SpringApplicationRunListenerï¼Œâ€œå˜¿ï¼ŒSpringBoot åº”ç”¨è¦å¼€å§‹æ‰§è¡Œå’¯ï¼â€ã€‚\n3ï¼‰ åˆ›å»ºå¹¶é…ç½®å½“å‰ Spring Boot åº”ç”¨å°†è¦ä½¿ç”¨çš„ Environmentï¼ˆåŒ…æ‹¬é…ç½®è¦ä½¿ç”¨çš„ PropertySource ä»¥åŠ Profileï¼‰ã€‚\n4ï¼‰ éå†è°ƒç”¨æ‰€æœ‰ SpringApplicationRunListener çš„ environmentPrepared()çš„æ–¹æ³•ï¼Œå‘Šè¯‰ä»–ä»¬ï¼šâ€œå½“å‰ SpringBoot åº”ç”¨ä½¿ç”¨çš„ Environment å‡†å¤‡å¥½äº†å’¯ï¼â€ã€‚\n5ï¼‰ å¦‚æœ SpringApplication çš„ showBanner å±æ€§è¢«è®¾ç½®ä¸º trueï¼Œåˆ™æ‰“å° bannerã€‚\n6ï¼‰ æ ¹æ®ç”¨æˆ·æ˜¯å¦æ˜ç¡®è®¾ç½®äº† applicationContextClass ç±»å‹ä»¥åŠåˆå§‹åŒ–é˜¶æ®µçš„æ¨æ–­ç»“æœï¼Œå†³å®šè¯¥ä¸ºå½“å‰ SpringBoot åº”ç”¨åˆ›å»ºä»€ä¹ˆç±»å‹çš„ ApplicationContext å¹¶åˆ›å»ºå®Œæˆï¼Œç„¶åæ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦æ·»åŠ  ShutdownHookï¼Œå†³å®šæ˜¯å¦ä½¿ç”¨è‡ªå®šä¹‰çš„ BeanNameGeneratorï¼Œå†³å®šæ˜¯å¦ä½¿ç”¨è‡ªå®šä¹‰çš„ ResourceLoaderï¼Œå½“ç„¶ï¼Œæœ€é‡è¦çš„ï¼Œå°†ä¹‹å‰å‡†å¤‡å¥½çš„ Environment è®¾ç½®ç»™åˆ›å»ºå¥½çš„ ApplicationContext ä½¿ç”¨ã€‚\n7ï¼‰ ApplicationContext åˆ›å»ºå¥½ä¹‹åï¼ŒSpringApplication ä¼šå†æ¬¡å€ŸåŠ© Spring-FactoriesLoaderï¼ŒæŸ¥æ‰¾å¹¶åŠ è½½ classpath ä¸­æ‰€æœ‰å¯ç”¨çš„ ApplicationContext-Initializerï¼Œç„¶åéå†è°ƒç”¨è¿™äº› ApplicationContextInitializer çš„ initializeï¼ˆapplicationContextï¼‰æ–¹æ³•æ¥å¯¹å·²ç»åˆ›å»ºå¥½çš„ ApplicationContext è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†ã€‚\n8ï¼‰ éå†è°ƒç”¨æ‰€æœ‰ SpringApplicationRunListener çš„ contextPrepared()æ–¹æ³•ã€‚\n9ï¼‰ æœ€æ ¸å¿ƒçš„ä¸€æ­¥ï¼Œå°†ä¹‹å‰é€šè¿‡@EnableAutoConfiguration è·å–çš„æ‰€æœ‰é…ç½®ä»¥åŠå…¶ä»–å½¢å¼çš„ IoC å®¹å™¨é…ç½®åŠ è½½åˆ°å·²ç»å‡†å¤‡å®Œæ¯•çš„ ApplicationContextã€‚\n10ï¼‰ éå†è°ƒç”¨æ‰€æœ‰ SpringApplicationRunListener çš„ contextLoaded()æ–¹æ³•ã€‚\n11ï¼‰ è°ƒç”¨ ApplicationContext çš„ refresh()æ–¹æ³•ï¼Œå®Œæˆ IoC å®¹å™¨å¯ç”¨çš„æœ€åä¸€é“å·¥åºã€‚\n12ï¼‰ æŸ¥æ‰¾å½“å‰ ApplicationContext ä¸­æ˜¯å¦æ³¨å†Œæœ‰ CommandLineRunnerï¼Œå¦‚æœæœ‰ï¼Œåˆ™éå†æ‰§è¡Œå®ƒä»¬ã€‚\n13ï¼‰ æ­£å¸¸æƒ…å†µä¸‹ï¼Œéå†æ‰§è¡Œ SpringApplicationRunListener çš„ finished()æ–¹æ³•ã€ï¼ˆå¦‚æœæ•´ä¸ªè¿‡ç¨‹å‡ºç°å¼‚å¸¸ï¼Œåˆ™ä¾ç„¶è°ƒç”¨æ‰€æœ‰ SpringApplicationRunListener çš„ finished()æ–¹æ³•ï¼Œåªä¸è¿‡è¿™ç§æƒ…å†µä¸‹ä¼šå°†å¼‚å¸¸ä¿¡æ¯ä¸€å¹¶ä¼ å…¥å¤„ç†ï¼‰\nå»é™¤äº‹ä»¶é€šçŸ¥ç‚¹åï¼Œæ•´ä¸ªæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n3 å‚è€ƒèµ„æ–™ Spring Boot å¹²è´§ç³»åˆ—ï¼šï¼ˆä¸‰ï¼‰å¯åŠ¨åŸç†è§£æ SpringBoot æ­ç§˜å¿«é€Ÿæ„å»ºä¸ºæœåŠ¡ä½“ç³»\n","permalink":"https://zhenfeng-zhu.github.io/post/spring-boot%E5%90%AF%E5%8A%A8%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/","summary":"Spring Boot å¯åŠ¨åŸç†åˆ†æ æˆ‘ä»¬åœ¨å¼€å‘ spring boot åº”ç”¨çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šé‡åˆ°å¦‚ä¸‹çš„å¯åŠ¨ç±»ï¼š\n@SpringBootApplication public class DemoApplication {  public static void main(String[] args) {  SpringApplication.run(DemoApplication.class, args);  } } ä»è¿™æ®µä»£ç å¯ä»¥çœ‹å‡ºï¼Œæ³¨è§£@SpringBootApplication å’Œ SpringApplication.run()æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸¤ä¸ªä¸œè¥¿ã€‚\n1 @SpringApplication æ³¨è§£ @Target(ElementType.TYPE) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited @SpringBootConfiguration @EnableAutoConfiguration @ComponentScan(excludeFilters = {  @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),  @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) }) public @interface SpringBootApplication { ... } åœ¨è¿™æ®µä»£ç é‡Œï¼Œæ¯”è¾ƒé‡è¦çš„åªæœ‰ä¸‰ä¸ªæ³¨è§£ï¼š\n @Configurationï¼ˆ@SpringBootConfiguration ç‚¹å¼€æŸ¥çœ‹å‘ç°é‡Œé¢è¿˜æ˜¯åº”ç”¨äº†@Configurationï¼‰ @EnableAutoConfiguration @ComponentScan  å…¶å®ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸‰ä¸ªæ³¨è§£æ¥ä¿®é¥° springboot çš„å¯åŠ¨ç±»ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œ,å¦‚ä¸‹æ‰€ç¤ºï¼š","title":"Spring Boot å¯åŠ¨åŸç†åˆ†æ"},{"content":"ä¸ºäº†è§£å†³æŠ½è±¡å„ä¸ª Java å®ä½“åŸºæœ¬çš„â€œå¢åˆ æ”¹æŸ¥â€æ“ä½œï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä»¥æ³›å‹çš„æ–¹å¼å°è£…ä¸€ä¸ªæ¨¡æ¿ Dao æ¥è¿›è¡ŒæŠ½è±¡ç®€åŒ–ï¼Œä½†æ˜¯è¿™æ ·ä¾ç„¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹æ¯ä¸ªå®ä½“ç¼–å†™ä¸€ä¸ªç»§æ‰¿è‡ªæ³›å‹æ¨¡æ¿ Dao çš„æ¥å£ï¼Œå†ç¼–å†™è¯¥æ¥å£çš„å®ç°ã€‚è™½ç„¶ä¸€äº›åŸºç¡€çš„æ•°æ®è®¿é—®å·²ç»å¯ä»¥å¾—åˆ°å¾ˆå¥½çš„å¤ç”¨ï¼Œä½†æ˜¯åœ¨ä»£ç ç»“æ„ä¸Šé’ˆå¯¹æ¯ä¸ªå®ä½“éƒ½ä¼šæœ‰ä¸€å † Dao çš„æ¥å£å’Œå®ç°ã€‚\nç”±äºæ¨¡æ¿ Dao çš„å®ç°ï¼Œä½¿å¾—è¿™äº›å…·ä½“å®ä½“çš„ Dao å±‚å·²ç»å˜çš„éå¸¸â€œè–„â€ï¼Œæœ‰ä¸€äº›å…·ä½“å®ä½“çš„ Dao å®ç°å¯èƒ½å®Œå…¨å°±æ˜¯å¯¹æ¨¡æ¿ Dao çš„ç®€å•ä»£ç†ï¼Œå¹¶ä¸”å¾€å¾€è¿™æ ·çš„å®ç°ç±»å¯èƒ½ä¼šå‡ºç°åœ¨å¾ˆå¤šå®ä½“ä¸Šã€‚Spring-data-jpa çš„å‡ºç°æ­£å¯ä»¥è®©è¿™æ ·ä¸€ä¸ªå·²ç»å¾ˆâ€œè–„â€çš„æ•°æ®è®¿é—®å±‚å˜æˆåªæ˜¯ä¸€å±‚æ¥å£çš„ç¼–å†™æ–¹å¼ã€‚\n1 å·¥ç¨‹é…ç½® 1.1 pom \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;project xmlns=\u0026#34;http://maven.apache.org/POM/4.0.0\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34;  xsi:schemaLocation=\u0026#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\u0026#34;\u0026gt;  \u0026lt;modelVersion\u0026gt;4.0.0\u0026lt;/modelVersion\u0026gt;   \u0026lt;groupId\u0026gt;com.example\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;jpa-demo\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;0.0.1-SNAPSHOT\u0026lt;/version\u0026gt;  \u0026lt;packaging\u0026gt;jar\u0026lt;/packaging\u0026gt;   \u0026lt;name\u0026gt;jpa-demo\u0026lt;/name\u0026gt;  \u0026lt;description\u0026gt;Demo project for Spring Boot\u0026lt;/description\u0026gt;   \u0026lt;parent\u0026gt;  \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;spring-boot-starter-parent\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;1.5.9.RELEASE\u0026lt;/version\u0026gt;  \u0026lt;relativePath/\u0026gt; \u0026lt;!-- lookup parent from repository --\u0026gt;  \u0026lt;/parent\u0026gt;   \u0026lt;properties\u0026gt;  \u0026lt;project.build.sourceEncoding\u0026gt;UTF-8\u0026lt;/project.build.sourceEncoding\u0026gt;  \u0026lt;project.reporting.outputEncoding\u0026gt;UTF-8\u0026lt;/project.reporting.outputEncoding\u0026gt;  \u0026lt;java.version\u0026gt;1.8\u0026lt;/java.version\u0026gt;  \u0026lt;/properties\u0026gt;   \u0026lt;dependencies\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;spring-boot-starter-data-jpa\u0026lt;/artifactId\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt;  \u0026lt;/dependency\u0026gt;   \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt;  \u0026lt;scope\u0026gt;runtime\u0026lt;/scope\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt;  \u0026lt;optional\u0026gt;true\u0026lt;/optional\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;spring-boot-starter-test\u0026lt;/artifactId\u0026gt;  \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt;  \u0026lt;/dependency\u0026gt;   \u0026lt;/dependencies\u0026gt;   \u0026lt;build\u0026gt;  \u0026lt;plugins\u0026gt;  \u0026lt;plugin\u0026gt;  \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;spring-boot-maven-plugin\u0026lt;/artifactId\u0026gt;  \u0026lt;/plugin\u0026gt;  \u0026lt;/plugins\u0026gt;  \u0026lt;/build\u0026gt;   \u0026lt;/project\u0026gt; 1.2 application.properties spring.datasource.url=jdbc:mysql://localhost:3306/test spring.datasource.username=root spring.datasource.password=root spring.datasource.driver-class-name=com.mysql.jdbc.Driver spring.jpa.properties.hibernate.hbm2ddl.auto=create-drop spring.jpa.properties.hibernate.hbm2ddl.autoæ˜¯ hibernate çš„é…ç½®å±æ€§ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ï¼šè‡ªåŠ¨åˆ›å»ºã€æ›´æ–°ã€éªŒè¯æ•°æ®åº“è¡¨ç»“æ„ã€‚è¯¥å‚æ•°çš„å‡ ç§é…ç½®å¦‚ä¸‹ï¼š\n createï¼šæ¯æ¬¡åŠ è½½ hibernate æ—¶éƒ½ä¼šåˆ é™¤ä¸Šä¸€æ¬¡çš„ç”Ÿæˆçš„è¡¨ï¼Œç„¶åæ ¹æ®ä½ çš„ model ç±»å†é‡æ–°æ¥ç”Ÿæˆæ–°è¡¨ï¼Œå“ªæ€•ä¸¤æ¬¡æ²¡æœ‰ä»»ä½•æ”¹å˜ä¹Ÿè¦è¿™æ ·æ‰§è¡Œï¼Œè¿™å°±æ˜¯å¯¼è‡´æ•°æ®åº“è¡¨æ•°æ®ä¸¢å¤±çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚ create-dropï¼šæ¯æ¬¡åŠ è½½ hibernate æ—¶æ ¹æ® model ç±»ç”Ÿæˆè¡¨ï¼Œä½†æ˜¯ sessionFactory ä¸€å…³é—­,è¡¨å°±è‡ªåŠ¨åˆ é™¤ã€‚ updateï¼šæœ€å¸¸ç”¨çš„å±æ€§ï¼Œç¬¬ä¸€æ¬¡åŠ è½½ hibernate æ—¶æ ¹æ® model ç±»ä¼šè‡ªåŠ¨å»ºç«‹èµ·è¡¨çš„ç»“æ„ï¼ˆå‰ææ˜¯å…ˆå»ºç«‹å¥½æ•°æ®åº“ï¼‰ï¼Œä»¥ååŠ è½½ hibernate æ—¶æ ¹æ® model ç±»è‡ªåŠ¨æ›´æ–°è¡¨ç»“æ„ï¼Œå³ä½¿è¡¨ç»“æ„æ”¹å˜äº†ä½†è¡¨ä¸­çš„è¡Œä»ç„¶å­˜åœ¨ä¸ä¼šåˆ é™¤ä»¥å‰çš„è¡Œã€‚è¦æ³¨æ„çš„æ˜¯å½“éƒ¨ç½²åˆ°æœåŠ¡å™¨åï¼Œè¡¨ç»“æ„æ˜¯ä¸ä¼šè¢«é©¬ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œæ˜¯è¦ç­‰åº”ç”¨ç¬¬ä¸€æ¬¡è¿è¡Œèµ·æ¥åæ‰ä¼šã€‚ validateï¼šæ¯æ¬¡åŠ è½½ hibernate æ—¶ï¼ŒéªŒè¯åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼Œåªä¼šå’Œæ•°æ®åº“ä¸­çš„è¡¨è¿›è¡Œæ¯”è¾ƒï¼Œä¸ä¼šåˆ›å»ºæ–°è¡¨ï¼Œä½†æ˜¯ä¼šæ’å…¥æ–°å€¼ã€‚  2 å®ä½“ç±» åˆ›å»ºä¸€ä¸ª User å®ä½“ï¼ŒåŒ…å« idï¼ˆä¸»é”®ï¼‰ã€nameï¼ˆå§“åï¼‰ã€ageï¼ˆå¹´é¾„ï¼‰å±æ€§ï¼Œé€šè¿‡ ORM æ¡†æ¶å…¶ä¼šè¢«æ˜ å°„åˆ°æ•°æ®åº“è¡¨ä¸­ï¼Œç”±äºé…ç½®äº†hibernate.hbm2ddl.autoï¼Œåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™æ¡†æ¶ä¼šè‡ªåŠ¨å»æ•°æ®åº“ä¸­åˆ›å»ºå¯¹åº”çš„è¡¨ã€‚\n@Data @NoArgsConstructor @Entity public class Users {  @Id  @GeneratedValue  private Long id;   @Column(nullable = false)  private String name;   @Column(nullable = false)  private Integer age;   public Users(String name, Integer age) {  this.name = name;  this.age = age;  } } 3 repository é’ˆå¯¹ User å®ä½“åˆ›å»ºå¯¹åº”çš„Repositoryæ¥å£å®ç°å¯¹è¯¥å®ä½“çš„æ•°æ®è®¿é—®ï¼š\n@Repository public interface UsersRepository extends JpaRepository\u0026lt;Users, Long\u0026gt; {  Users findByName(String name);  Users findByNameAndAge(String name, Integer age);   @Query(\u0026#34;from Users u where u.name=:name\u0026#34;)  Users findUser(@Param(\u0026#34;name\u0026#34;) String name); } åœ¨ Spring-data-jpa ä¸­ï¼Œåªéœ€è¦ç¼–å†™ç±»ä¼¼ä¸Šé¢è¿™æ ·çš„æ¥å£å°±å¯å®ç°æ•°æ®è®¿é—®ã€‚ä¸å†åƒæˆ‘ä»¬ä»¥å¾€ç¼–å†™äº†æ¥å£æ—¶å€™è¿˜éœ€è¦è‡ªå·±ç¼–å†™æ¥å£å®ç°ç±»ï¼Œç›´æ¥å‡å°‘äº†æˆ‘ä»¬çš„æ–‡ä»¶æ¸…å•ã€‚\nä¸‹é¢å¯¹ä¸Šé¢çš„UserRepositoryåšä¸€äº›è§£é‡Šï¼Œè¯¥æ¥å£ç»§æ‰¿è‡ªJpaRepositoryï¼Œé€šè¿‡æŸ¥çœ‹JpaRepositoryæ¥å£çš„API æ–‡æ¡£ï¼Œå¯ä»¥çœ‹åˆ°è¯¥æ¥å£æœ¬èº«å·²ç»å®ç°äº†åˆ›å»ºï¼ˆsaveï¼‰ã€æ›´æ–°ï¼ˆsaveï¼‰ã€åˆ é™¤ï¼ˆdeleteï¼‰ã€æŸ¥è¯¢ï¼ˆfindAllã€findOneï¼‰ç­‰åŸºæœ¬æ“ä½œçš„å‡½æ•°ï¼Œå› æ­¤å¯¹äºè¿™äº›åŸºç¡€æ“ä½œçš„æ•°æ®è®¿é—®å°±ä¸éœ€è¦å¼€å‘è€…å†è‡ªå·±å®šä¹‰ã€‚\nåœ¨ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹é¢ä¸¤ä¸ªå‡½æ•°ï¼š\n User findByName(String name) User findByNameAndAge(String name, Integer age)  å®ƒä»¬åˆ†åˆ«å®ç°äº†æŒ‰ name æŸ¥è¯¢ User å®ä½“å’ŒæŒ‰ name å’Œ age æŸ¥è¯¢ User å®ä½“ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰ä»»ä½•ç±» SQL è¯­å¥å°±å®Œæˆäº†ä¸¤ä¸ªæ¡ä»¶æŸ¥è¯¢æ–¹æ³•ã€‚è¿™å°±æ˜¯ Spring-data-jpa çš„ä¸€å¤§ç‰¹æ€§ï¼šé€šè¿‡è§£ææ–¹æ³•ååˆ›å»ºæŸ¥è¯¢ã€‚\né™¤äº†é€šè¿‡è§£ææ–¹æ³•åæ¥åˆ›å»ºæŸ¥è¯¢å¤–ï¼Œå®ƒä¹Ÿæä¾›é€šè¿‡ä½¿ç”¨@Query æ³¨è§£æ¥åˆ›å»ºæŸ¥è¯¢ï¼Œæ‚¨åªéœ€è¦ç¼–å†™ JPQL è¯­å¥ï¼Œå¹¶é€šè¿‡ç±»ä¼¼â€œ:nameâ€æ¥æ˜ å°„@Param æŒ‡å®šçš„å‚æ•°ï¼Œå°±åƒä¾‹å­ä¸­çš„ç¬¬ä¸‰ä¸ª findUser å‡½æ•°ä¸€æ ·ã€‚\n4 å•å…ƒæµ‹è¯• @RunWith(SpringRunner.class) @SpringBootTest public class JpaDemoApplicationTests {   @Autowired  private UsersRepository usersRepository;   @Test  public void contextLoads() {  }   @Test  public void testJPA() {  // åˆ›å»º10æ¡è®°å½•  usersRepository.save(new Users(\u0026#34;AAA\u0026#34;, 10));  usersRepository.save(new Users(\u0026#34;BBB\u0026#34;, 20));  usersRepository.save(new Users(\u0026#34;CCC\u0026#34;, 30));  usersRepository.save(new Users(\u0026#34;DDD\u0026#34;, 40));  usersRepository.save(new Users(\u0026#34;EEE\u0026#34;, 50));  usersRepository.save(new Users(\u0026#34;FFF\u0026#34;, 60));  usersRepository.save(new Users(\u0026#34;GGG\u0026#34;, 70));  usersRepository.save(new Users(\u0026#34;HHH\u0026#34;, 80));  usersRepository.save(new Users(\u0026#34;III\u0026#34;, 90));  usersRepository.save(new Users(\u0026#34;JJJ\u0026#34;, 100));   // æµ‹è¯•findAll, æŸ¥è¯¢æ‰€æœ‰è®°å½•  Assert.assertEquals(10, usersRepository.findAll().size());   // æµ‹è¯•findByName, æŸ¥è¯¢å§“åä¸ºFFFçš„User  Assert.assertEquals(60, usersRepository.findByName(\u0026#34;FFF\u0026#34;).getAge().longValue());   // æµ‹è¯•findUser, æŸ¥è¯¢å§“åä¸ºFFFçš„User  Assert.assertEquals(60, usersRepository.findUser(\u0026#34;FFF\u0026#34;).getAge().longValue());   // æµ‹è¯•findByNameAndAge, æŸ¥è¯¢å§“åä¸ºFFFå¹¶ä¸”å¹´é¾„ä¸º60çš„User  Assert.assertEquals(\u0026#34;FFF\u0026#34;, usersRepository.findByNameAndAge(\u0026#34;FFF\u0026#34;, 60).getName());   // æµ‹è¯•åˆ é™¤å§“åä¸ºAAAçš„User  usersRepository.delete(usersRepository.findByName(\u0026#34;AAA\u0026#34;));   // æµ‹è¯•findAll, æŸ¥è¯¢æ‰€æœ‰è®°å½•, éªŒè¯ä¸Šé¢çš„åˆ é™¤æ˜¯å¦æˆåŠŸ  Assert.assertEquals(9, usersRepository.findAll().size());  } } 5 å‚è€ƒèµ„æ–™ Spring Boot ä½¿ç”¨ Spring-data-jpa ç®€åŒ–æ•°æ®è®¿é—®å±‚\n","permalink":"https://zhenfeng-zhu.github.io/post/spring-data-jpa%E5%AE%9E%E6%88%98/","summary":"ä¸ºäº†è§£å†³æŠ½è±¡å„ä¸ª Java å®ä½“åŸºæœ¬çš„â€œå¢åˆ æ”¹æŸ¥â€æ“ä½œï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä»¥æ³›å‹çš„æ–¹å¼å°è£…ä¸€ä¸ªæ¨¡æ¿ Dao æ¥è¿›è¡ŒæŠ½è±¡ç®€åŒ–ï¼Œä½†æ˜¯è¿™æ ·ä¾ç„¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹æ¯ä¸ªå®ä½“ç¼–å†™ä¸€ä¸ªç»§æ‰¿è‡ªæ³›å‹æ¨¡æ¿ Dao çš„æ¥å£ï¼Œå†ç¼–å†™è¯¥æ¥å£çš„å®ç°ã€‚è™½ç„¶ä¸€äº›åŸºç¡€çš„æ•°æ®è®¿é—®å·²ç»å¯ä»¥å¾—åˆ°å¾ˆå¥½çš„å¤ç”¨ï¼Œä½†æ˜¯åœ¨ä»£ç ç»“æ„ä¸Šé’ˆå¯¹æ¯ä¸ªå®ä½“éƒ½ä¼šæœ‰ä¸€å † Dao çš„æ¥å£å’Œå®ç°ã€‚\nç”±äºæ¨¡æ¿ Dao çš„å®ç°ï¼Œä½¿å¾—è¿™äº›å…·ä½“å®ä½“çš„ Dao å±‚å·²ç»å˜çš„éå¸¸â€œè–„â€ï¼Œæœ‰ä¸€äº›å…·ä½“å®ä½“çš„ Dao å®ç°å¯èƒ½å®Œå…¨å°±æ˜¯å¯¹æ¨¡æ¿ Dao çš„ç®€å•ä»£ç†ï¼Œå¹¶ä¸”å¾€å¾€è¿™æ ·çš„å®ç°ç±»å¯èƒ½ä¼šå‡ºç°åœ¨å¾ˆå¤šå®ä½“ä¸Šã€‚Spring-data-jpa çš„å‡ºç°æ­£å¯ä»¥è®©è¿™æ ·ä¸€ä¸ªå·²ç»å¾ˆâ€œè–„â€çš„æ•°æ®è®¿é—®å±‚å˜æˆåªæ˜¯ä¸€å±‚æ¥å£çš„ç¼–å†™æ–¹å¼ã€‚\n1 å·¥ç¨‹é…ç½® 1.1 pom \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;project xmlns=\u0026#34;http://maven.apache.org/POM/4.0.0\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34;  xsi:schemaLocation=\u0026#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\u0026#34;\u0026gt;  \u0026lt;modelVersion\u0026gt;4.0.0\u0026lt;/modelVersion\u0026gt;   \u0026lt;groupId\u0026gt;com.example\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;jpa-demo\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;0.0.1-SNAPSHOT\u0026lt;/version\u0026gt;  \u0026lt;packaging\u0026gt;jar\u0026lt;/packaging\u0026gt;   \u0026lt;name\u0026gt;jpa-demo\u0026lt;/name\u0026gt;  \u0026lt;description\u0026gt;Demo project for Spring Boot\u0026lt;/description\u0026gt;   \u0026lt;parent\u0026gt;  \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;spring-boot-starter-parent\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;1.5.9.RELEASE\u0026lt;/version\u0026gt;  \u0026lt;relativePath/\u0026gt; \u0026lt;!-- lookup parent from repository --\u0026gt;  \u0026lt;/parent\u0026gt;   \u0026lt;properties\u0026gt;  \u0026lt;project.","title":"Spring Data Jpa å®æˆ˜"},{"content":"spring boot å¤šæ•°æ®æºé…ç½® åœ¨å•æ•°æ®æºçš„æƒ…å†µä¸‹ï¼ŒSpring Boot çš„é…ç½®éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ application.properties æ–‡ä»¶ä¸­é…ç½®è¿æ¥å‚æ•°å³å¯ã€‚ä½†æ˜¯å¾€å¾€éšç€ä¸šåŠ¡é‡å‘å±•ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¿›è¡Œæ•°æ®åº“æ‹†åˆ†æˆ–æ˜¯å¼•å…¥å…¶ä»–æ•°æ®åº“ï¼Œä»è€Œæˆ‘ä»¬éœ€è¦é…ç½®å¤šä¸ªæ•°æ®æºã€‚\n1 å‡†å¤‡ 1.1 ç¦æ­¢ DataSourceAutoConfiguration é¦–å…ˆè¦å°† spring boot è‡ªå¸¦çš„DataSourceAutoConfigurationç¦æ‰ï¼Œå› ä¸ºå®ƒä¼šè¯»å–application.propertiesæ–‡ä»¶çš„spring.datasource.*å±æ€§å¹¶è‡ªåŠ¨é…ç½®å•æ•°æ®æºã€‚åœ¨@SpringBootApplicationæ³¨è§£ä¸­æ·»åŠ excludeå±æ€§å³å¯ï¼š\n@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class}) public class DemoApplication {  public static void main(String[] args) {  SpringApplication.run(JpaDemoApplication.class, args);  } } 1.2 é…ç½®æ•°æ®åº“è¿æ¥ ç„¶ååœ¨application.propertiesä¸­é…ç½®å¤šæ•°æ®æºè¿æ¥ä¿¡æ¯ï¼š\nspring.datasource.primary.url=jdbc:mysql://localhost:3306/test spring.datasource.primary.username=root spring.datasource.primary.password=root spring.datasource.primary.driver-class-name=com.mysql.jdbc.Driver spring.datasource.secondary.url=jdbc:mysql://localhost:3306/test1 spring.datasource.secondary.username=root spring.datasource.secondary.password=root spring.datasource.secondary.driver-class-name=com.mysql.jdbc.Driver 1.3 æ‰‹æ®µåˆ›å»ºæ•°æ®æº ç”±äºæˆ‘ä»¬ç¦æ‰äº†è‡ªåŠ¨æ•°æ®æºé…ç½®ï¼Œå› äº›ä¸‹ä¸€æ­¥å°±éœ€è¦æ‰‹åŠ¨å°†è¿™äº›æ•°æ®æºåˆ›å»ºå‡ºæ¥ï¼š\n@Configuration public class DataSourceConfig {   @Bean(name = \u0026#34;primaryDataSource\u0026#34;) // @Qualifier(value = \u0026#34;primaryDataSource\u0026#34;)  @ConfigurationProperties(prefix = \u0026#34;spring.datasource.primary\u0026#34;)  public DataSource primaryDataSource(){  return DataSourceBuilder.create().build();  }    @Bean(name = \u0026#34;secondaryDataSource\u0026#34;) // @Qualifier(value = \u0026#34;secondaryDataSource\u0026#34;)  @ConfigurationProperties(prefix = \u0026#34;spring.datasource.secondary\u0026#34;)  public DataSource secondaryDataSource() {  return DataSourceBuilder.create().build();  } } 2 jdbcTemplate å¤šæ•°æ®æº 2.1 jdbcTemplate çš„æ•°æ®æºé…ç½® æ–°å»º jdbcTemplate çš„æ•°æ®æºé…ç½®ï¼š\n@Configuration public class JdbcTemplateConfig {  @Bean(name = \u0026#34;primaryJdbcTemplate\u0026#34;)  public JdbcTemplate primaryJdbcTemplate(  @Qualifier(\u0026#34;primaryDataSource\u0026#34;) DataSource dataSource) {  return new JdbcTemplate(dataSource);  }   @Bean(name = \u0026#34;secondaryJdbcTemplate\u0026#34;)  public JdbcTemplate secondaryJdbcTemplate(  @Qualifier(\u0026#34;secondaryDataSource\u0026#34;) DataSource dataSource) {  return new JdbcTemplate(dataSource);  } } 2.2 å•å…ƒæµ‹è¯• ç„¶åç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼š\n@RunWith(SpringRunner.class) @SpringBootTest public class JpaDemoApplicationTests {  @Autowired  @Qualifier(\u0026#34;primaryJdbcTemplate\u0026#34;)  protected JdbcTemplate jdbcTemplate1;   @Autowired  @Qualifier(\u0026#34;secondaryJdbcTemplate\u0026#34;)  protected JdbcTemplate jdbcTemplate2;   @Test  public void testJdbc() {  // å¾€ç¬¬ä¸€ä¸ªæ•°æ®æºä¸­æ’å…¥ä¸¤æ¡æ•°æ®  jdbcTemplate1.update(\u0026#34;insert into users(id,name,age) values(?, ?, ?)\u0026#34;, 1, \u0026#34;aaa\u0026#34;, 20);  jdbcTemplate1.update(\u0026#34;insert into users(id,name,age) values(?, ?, ?)\u0026#34;, 2, \u0026#34;bbb\u0026#34;, 30);   // å¾€ç¬¬äºŒä¸ªæ•°æ®æºä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œè‹¥æ’å…¥çš„æ˜¯ç¬¬ä¸€ä¸ªæ•°æ®æºï¼Œåˆ™ä¼šä¸»é”®å†²çªæŠ¥é”™  jdbcTemplate2.update(\u0026#34;insert into users(id,name,age) values(?, ?, ?)\u0026#34;, 1, \u0026#34;aaa\u0026#34;, 20);   // æŸ¥ä¸€ä¸‹ç¬¬ä¸€ä¸ªæ•°æ®æºä¸­æ˜¯å¦æœ‰ä¸¤æ¡æ•°æ®ï¼ŒéªŒè¯æ’å…¥æ˜¯å¦æˆåŠŸ  Assert.assertEquals(\u0026#34;2\u0026#34;, jdbcTemplate1.queryForObject(\u0026#34;select count(1) from users\u0026#34;, String.class));   // æŸ¥ä¸€ä¸‹ç¬¬ä¸€ä¸ªæ•°æ®æºä¸­æ˜¯å¦æœ‰ä¸¤æ¡æ•°æ®ï¼ŒéªŒè¯æ’å…¥æ˜¯å¦æˆåŠŸ  Assert.assertEquals(\u0026#34;1\u0026#34;, jdbcTemplate2.queryForObject(\u0026#34;select count(1) from users\u0026#34;, String.class));   }    @Test  public void contextLoads() {  } } 3 mybatis å¤šæ•°æ®æºé…ç½® 3.1 è‡ªå®šä¹‰ SqlSessionFactory æ–°å»ºä¸¤ä¸ª mybatis çš„ SqlSessionFactory é…ç½®ï¼š\n@Configuration @MapperScan(basePackages = {\u0026#34;com.example.jpademo.primary.mapper\u0026#34;}, sqlSessionFactoryRef = \u0026#34;sqlSessionFactory1\u0026#34;) public class MybatisPrimaryConfig {  @Autowired  @Qualifier(\u0026#34;primaryDataSource\u0026#34;)  private DataSource primaryDataSource;   @Bean  public SqlSessionFactory sqlSessionFactory1() throws Exception {  SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();  // ä½¿ç”¨primaryDataSourceæ•°æ®æº  factoryBean.setDataSource(primaryDataSource);  return factoryBean.getObject();  }   @Bean  public SqlSessionTemplate sqlSessionTemplate1() throws Exception {  // ä½¿ç”¨ä¸Šé¢é…ç½®çš„Factory  SqlSessionTemplate template = new SqlSessionTemplate(sqlSessionFactory1());  return template;  } } è¿™æ ·ï¼Œcom.example.jpademo.primary.mapperåŒ…ä¸‹çš„æ‰€æœ‰ mapper å°±ä¼šç”¨sqlSessionFactory1ã€‚åŒç†å¯ä»¥åˆ›å»º\nsqlSessionFactory2ï¼š\n@Configuration @MapperScan(basePackages = {\u0026#34;com.example.jpademo.secondary.mapper\u0026#34;}, sqlSessionFactoryRef = \u0026#34;sqlSessionFactory2\u0026#34;) public class MybatisSecondaryConfig {  @Autowired  @Qualifier(\u0026#34;secondaryDataSource\u0026#34;)  private DataSource secondaryDataSource;   @Bean  public SqlSessionFactory sqlSessionFactory2() throws Exception {  SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();  // ä½¿ç”¨primaryDataSourceæ•°æ®æº  factoryBean.setDataSource(secondaryDataSource);  return factoryBean.getObject();  }   @Bean  public SqlSessionTemplate sqlSessionTemplate1() throws Exception {  // ä½¿ç”¨ä¸Šé¢é…ç½®çš„Factory  SqlSessionTemplate template = new SqlSessionTemplate(sqlSessionFactory2());  return template;  } } 3.2 mapper å’Œå®ä½“ç±» ç„¶åç¼–å†™ mapper å’Œå®ä½“ç±»ï¼š\n@Data public class User {  private Integer id;  private String name;  private Integer age; } package com.example.jpademo.primary.mapper;  import com.example.jpademo.domain.User; import org.apache.ibatis.annotations.Mapper; import org.apache.ibatis.annotations.Param; import org.apache.ibatis.annotations.Select; import org.springframework.beans.factory.annotation.Qualifier;  @Mapper @Qualifier(\u0026#34;userMapper1\u0026#34;) public interface UserMapper1 {  @Select(\u0026#34;select * from users where id=#{id}\u0026#34;)  User findById(@Param(\u0026#34;id\u0026#34;) Integer id); } package com.example.jpademo.secondary.mapper;  import com.example.jpademo.domain.User; import org.apache.ibatis.annotations.Mapper; import org.apache.ibatis.annotations.Select; import org.springframework.beans.factory.annotation.Qualifier;  @Mapper @Qualifier(\u0026#34;userMapper2\u0026#34;) public interface UserMapper2 {  @Select(\u0026#34;select * from users where id=#{id}\u0026#34;)  User findById(Integer id); } 3.3 å•å…ƒæµ‹è¯• ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼š\n@RunWith(SpringRunner.class) @SpringBootTest public class JpaDemoApplicationTests {   @Autowired  private UserMapper1 userMapper1;   @Autowired  private UserMapper2 userMapper2;   @Test  public void testMybatis() {  User user1 = userMapper1.findById(1);  User user2 = userMapper2.findById(1);   Assert.assertEquals(\u0026#34;aaa\u0026#34;, user1.getName());  Assert.assertEquals(\u0026#34;ccc\u0026#34;, user2.getName());  } } 4 å‚è€ƒèµ„æ–™ Spring Boot + Mybatis å¤šæ•°æ®æºå’ŒåŠ¨æ€æ•°æ®æºé…ç½®\nSpring Boot ä¸¤ç§å¤šæ•°æ®æºé…ç½®ï¼šJdbcTemplateã€Spring-data-jpa\n","permalink":"https://zhenfeng-zhu.github.io/post/spring-boot%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE/","summary":"spring boot å¤šæ•°æ®æºé…ç½® åœ¨å•æ•°æ®æºçš„æƒ…å†µä¸‹ï¼ŒSpring Boot çš„é…ç½®éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ application.properties æ–‡ä»¶ä¸­é…ç½®è¿æ¥å‚æ•°å³å¯ã€‚ä½†æ˜¯å¾€å¾€éšç€ä¸šåŠ¡é‡å‘å±•ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¿›è¡Œæ•°æ®åº“æ‹†åˆ†æˆ–æ˜¯å¼•å…¥å…¶ä»–æ•°æ®åº“ï¼Œä»è€Œæˆ‘ä»¬éœ€è¦é…ç½®å¤šä¸ªæ•°æ®æºã€‚\n1 å‡†å¤‡ 1.1 ç¦æ­¢ DataSourceAutoConfiguration é¦–å…ˆè¦å°† spring boot è‡ªå¸¦çš„DataSourceAutoConfigurationç¦æ‰ï¼Œå› ä¸ºå®ƒä¼šè¯»å–application.propertiesæ–‡ä»¶çš„spring.datasource.*å±æ€§å¹¶è‡ªåŠ¨é…ç½®å•æ•°æ®æºã€‚åœ¨@SpringBootApplicationæ³¨è§£ä¸­æ·»åŠ excludeå±æ€§å³å¯ï¼š\n@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class}) public class DemoApplication {  public static void main(String[] args) {  SpringApplication.run(JpaDemoApplication.class, args);  } } 1.2 é…ç½®æ•°æ®åº“è¿æ¥ ç„¶ååœ¨application.propertiesä¸­é…ç½®å¤šæ•°æ®æºè¿æ¥ä¿¡æ¯ï¼š\nspring.datasource.primary.url=jdbc:mysql://localhost:3306/test spring.datasource.primary.username=root spring.datasource.primary.password=root spring.datasource.primary.driver-class-name=com.mysql.jdbc.Driver spring.datasource.secondary.url=jdbc:mysql://localhost:3306/test1 spring.datasource.secondary.username=root spring.datasource.secondary.password=root spring.datasource.secondary.driver-class-name=com.mysql.jdbc.Driver 1.3 æ‰‹æ®µåˆ›å»ºæ•°æ®æº ç”±äºæˆ‘ä»¬ç¦æ‰äº†è‡ªåŠ¨æ•°æ®æºé…ç½®ï¼Œå› äº›ä¸‹ä¸€æ­¥å°±éœ€è¦æ‰‹åŠ¨å°†è¿™äº›æ•°æ®æºåˆ›å»ºå‡ºæ¥ï¼š\n@Configuration public class DataSourceConfig {   @Bean(name = \u0026#34;primaryDataSource\u0026#34;) // @Qualifier(value = \u0026#34;primaryDataSource\u0026#34;)  @ConfigurationProperties(prefix = \u0026#34;spring.datasource.primary\u0026#34;)  public DataSource primaryDataSource(){  return DataSourceBuilder.","title":"spring boot å¤šæ•°æ®æºé…ç½®"},{"content":"Spring-data-redisä¸º spring-data æ¨¡å—ä¸­å¯¹ redis çš„æ”¯æŒéƒ¨åˆ†ï¼Œç®€ç§°ä¸ºâ€œSDRâ€ï¼Œæä¾›äº†åŸºäº jedis å®¢æˆ·ç«¯ API çš„é«˜åº¦å°è£…ä»¥åŠä¸ spring å®¹å™¨çš„æ•´åˆï¼Œ\njedis å®¢æˆ·ç«¯åœ¨ç¼–ç¨‹å®æ–½æ–¹é¢å­˜åœ¨å¦‚ä¸‹ä¸è¶³ï¼š\n connection ç®¡ç†ç¼ºä¹è‡ªåŠ¨åŒ–ï¼Œconnection-pool çš„è®¾è®¡ç¼ºå°‘å¿…è¦çš„å®¹å™¨æ”¯æŒã€‚ æ•°æ®æ“ä½œéœ€è¦å…³æ³¨â€œåºåˆ—åŒ–â€/â€œååºåˆ—åŒ–â€ï¼Œå› ä¸º jedis çš„å®¢æˆ·ç«¯ API æ¥å—çš„æ•°æ®ç±»å‹ä¸º string å’Œ byteï¼Œå¯¹ç»“æ„åŒ–æ•°æ®(json,xml,pojo ç­‰)æ“ä½œéœ€è¦é¢å¤–çš„æ”¯æŒã€‚ äº‹åŠ¡æ“ä½œçº¯ç²¹ä¸ºç¡¬ç¼–ç  pub/sub åŠŸèƒ½ï¼Œç¼ºä¹å¿…è¦çš„è®¾è®¡æ¨¡å¼æ”¯æŒï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€éœ€è¦å…³æ³¨çš„å¤ªå¤šã€‚  1 spring-data-redis ç‰¹æ€§  è¿æ¥æ± è‡ªåŠ¨ç®¡ç†ï¼Œæä¾›äº†ä¸€ä¸ªé«˜åº¦å°è£…çš„â€œRedisTemplateâ€ç±» é’ˆå¯¹ jedis å®¢æˆ·ç«¯ä¸­å¤§é‡ api è¿›è¡Œäº†å½’ç±»å°è£…,å°†åŒä¸€ç±»å‹æ“ä½œå°è£…ä¸º operation æ¥å£  ValueOperationsï¼šç®€å• K-V æ“ä½œ SetOperationsï¼šset ç±»å‹æ•°æ®æ“ä½œ ZSetOperationsï¼šzset ç±»å‹æ•°æ®æ“ä½œ HashOperationsï¼šé’ˆå¯¹ map ç±»å‹çš„æ•°æ®æ“ä½œ ListOperationsï¼šé’ˆå¯¹ list ç±»å‹çš„æ•°æ®æ“ä½œ   æä¾›äº†å¯¹ key çš„â€œboundâ€(ç»‘å®š)ä¾¿æ·åŒ–æ“ä½œ APIï¼Œå¯ä»¥é€šè¿‡ bound å°è£…æŒ‡å®šçš„ keyï¼Œç„¶åè¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œè€Œæ— é¡»â€œæ˜¾å¼â€çš„å†æ¬¡æŒ‡å®š Keyï¼Œå³ BoundKeyOperationsï¼š  BoundValueOperations BoundSetOperations BoundListOperations BoundSetOperations BoundHashOperations   å°†äº‹åŠ¡æ“ä½œå°è£…ï¼Œæœ‰å®¹å™¨æ§åˆ¶ã€‚ é’ˆå¯¹æ•°æ®çš„â€œåºåˆ—åŒ–/ååºåˆ—åŒ–â€ï¼Œæä¾›äº†å¤šç§å¯é€‰æ‹©ç­–ç•¥(RedisSerializer)  JdkSerializationRedisSerializerï¼šPOJO å¯¹è±¡çš„å­˜å–åœºæ™¯ï¼Œä½¿ç”¨ JDK æœ¬èº«åºåˆ—åŒ–æœºåˆ¶ï¼Œå°† pojo ç±»é€šè¿‡ ObjectInputStream/ObjectOutputStream è¿›è¡Œåºåˆ—åŒ–æ“ä½œï¼Œæœ€ç»ˆ redis-server ä¸­å°†å­˜å‚¨å­—èŠ‚åºåˆ—ã€‚æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„åºåˆ—åŒ–ç­–ç•¥ã€‚ StringRedisSerializerï¼šKey æˆ–è€… value ä¸ºå­—ç¬¦ä¸²çš„åœºæ™¯ï¼Œæ ¹æ®æŒ‡å®šçš„ charset å¯¹æ•°æ®çš„å­—èŠ‚åºåˆ—ç¼–ç æˆ stringï¼Œæ˜¯â€œnew String(bytes, charset)â€å’Œâ€œstring.getBytes(charset)â€çš„ç›´æ¥å°è£…ã€‚æ˜¯æœ€è½»é‡çº§å’Œé«˜æ•ˆçš„ç­–ç•¥ã€‚ JacksonJsonRedisSerializerï¼šjackson-json å·¥å…·æä¾›äº† javabean ä¸ json ä¹‹é—´çš„è½¬æ¢èƒ½åŠ›ï¼Œå¯ä»¥å°† pojo å®ä¾‹åºåˆ—åŒ–æˆ json æ ¼å¼å­˜å‚¨åœ¨ redis ä¸­ï¼Œä¹Ÿå¯ä»¥å°† json æ ¼å¼çš„æ•°æ®è½¬æ¢æˆ pojo å®ä¾‹ã€‚å› ä¸º jackson å·¥å…·åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶ï¼Œéœ€è¦æ˜ç¡®æŒ‡å®š Class ç±»å‹ï¼Œå› æ­¤æ­¤ç­–ç•¥å°è£…èµ·æ¥ç¨å¾®å¤æ‚ã€‚ OxmSerializerï¼šæä¾›äº†å°† javabean ä¸ xml ä¹‹é—´çš„è½¬æ¢èƒ½åŠ›ï¼Œç›®å‰å¯ç”¨çš„ä¸‰æ–¹æ”¯æŒåŒ…æ‹¬ jaxbï¼Œapache-xmlbeansï¼›redis å­˜å‚¨çš„æ•°æ®å°†æ˜¯ xml å·¥å…·ã€‚ä¸è¿‡ä½¿ç”¨æ­¤ç­–ç•¥ï¼Œç¼–ç¨‹å°†ä¼šæœ‰äº›éš¾åº¦ï¼Œè€Œä¸”æ•ˆç‡æœ€ä½ï¼›ä¸å»ºè®®ä½¿ç”¨ã€‚   åŸºäºè®¾è®¡æ¨¡å¼ï¼Œå’Œ JMS å¼€å‘æ€è·¯ï¼Œå°† pub/sub çš„ API è®¾è®¡è¿›è¡Œäº†å°è£…ï¼Œä½¿å¼€å‘æ›´åŠ ä¾¿æ·ã€‚ spring-data-redis ä¸­ï¼Œå¹¶æ²¡æœ‰å¯¹ sharding æä¾›è‰¯å¥½çš„å°è£…ï¼Œå¦‚æœä½ çš„æ¶æ„æ˜¯åŸºäº shardingï¼Œé‚£ä¹ˆä½ éœ€è¦è‡ªå·±å»å®ç°ï¼Œè¿™ä¹Ÿæ˜¯ sdr å’Œ jedis ç›¸æ¯”ï¼Œå”¯ä¸€ç¼ºå°‘çš„ç‰¹æ€§ã€‚  2 å¼•å…¥ä¾èµ– \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;spring-boot-starter-data-redis\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt; 3 é…ç½® # REDIS (RedisProperties) # Redisæ•°æ®åº“ç´¢å¼•ï¼ˆé»˜è®¤ä¸º0ï¼‰ spring.redis.database=0 # RedisæœåŠ¡å™¨åœ°å€ spring.redis.host=localhost # RedisæœåŠ¡å™¨è¿æ¥ç«¯å£ spring.redis.port=6379 # RedisæœåŠ¡å™¨è¿æ¥å¯†ç ï¼ˆé»˜è®¤ä¸ºç©ºï¼‰ spring.redis.password=root # è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ spring.redis.pool.max-active=8 # è¿æ¥æ± æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ spring.redis.pool.max-wait=-1 # è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥ spring.redis.pool.max-idle=8 # è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥ spring.redis.pool.min-idle=0 # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ spring.redis.timeout=0 å…¶ä¸­ spring.redis.database çš„é…ç½®é€šå¸¸ä½¿ç”¨ 0 å³å¯ï¼ŒRedis åœ¨é…ç½®çš„æ—¶å€™å¯ä»¥è®¾ç½®æ•°æ®åº“æ•°é‡ï¼Œé»˜è®¤ä¸º 16ï¼Œå¯ä»¥ç†è§£ä¸ºæ•°æ®åº“çš„ schema\n3.1 StringRedisTemplate @RunWith(SpringRunner.class) @SpringBootTest public class DemoApplicationTests {   @Autowired  private StringRedisTemplate stringRedisTemplate;   @Test  public void testRedis(){  stringRedisTemplate.opsForValue().set(\u0026#34;myKey\u0026#34;, \u0026#34;hello redis\u0026#34;);  Assert.assertEquals(\u0026#34;hello redis\u0026#34;, stringRedisTemplate.opsForValue().get(\u0026#34;myKey\u0026#34;));  }  } é€šè¿‡ä¸Šé¢è¿™æ®µæä¸ºç®€å•çš„æµ‹è¯•æ¡ˆä¾‹æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡è‡ªåŠ¨é…ç½®çš„ StringRedisTemplate å¯¹è±¡è¿›è¡Œ Redis çš„è¯»å†™æ“ä½œï¼Œè¯¥å¯¹è±¡ä»å‘½åä¸­å°±å¯æ³¨æ„åˆ°æ”¯æŒçš„æ˜¯ String ç±»å‹ã€‚å¦‚æœæœ‰ä½¿ç”¨è¿‡ spring-data-redis çš„å¼€å‘è€…ä¸€å®šç†Ÿæ‚‰ RedisTemplate\u0026lt;K, V\u0026gt;æ¥å£ï¼ŒStringRedisTemplate å°±ç›¸å½“äº RedisTemplate\u0026lt;String, String\u0026gt;çš„å®ç°ã€‚\né™¤äº† String ç±»å‹ï¼Œæˆ‘ä»¬è¿˜ç»å¸¸ä¼šåœ¨ Redis ä¸­å­˜å‚¨å¯¹è±¡ã€‚\n3.2 RedisTemplate\u0026lt;Object, Object\u0026gt; 3.2.1 æ–°å»º User ç±» @Data @AllArgsConstructor public class User implements Serializable{  private static final long serialVersionUID = 1L;  private Integer id;  private String username;  private Integer age; } 3.2.2 åˆ›å»º UserRepository @Repository public class UserRepository {  @Autowired  private RedisTemplate\u0026lt;Object, Object\u0026gt; redisTemplate;   //  @Resource(name = \u0026#34;redisTemplate\u0026#34;)  ValueOperations\u0026lt;Object, Object\u0026gt; valOps;   /**  * ä¿å­˜  * @param user  */  public void save(User user) {  int id = user.getId();  valOps.set(id, user);  }   /**  * è·å–  * @param id  * @return  */  public User getUserById(int id) {  return (User) valOps.get(id);  }  } @Resource æ³¨è§£å’Œ@Autowired ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥æ ‡æ³¨åœ¨å­—æ®µæˆ–å±æ€§çš„ setter æ–¹æ³•ä¸Šï¼Œä½†å®ƒé»˜è®¤æŒ‰åç§°è£…é…ã€‚åç§°å¯ä»¥é€šè¿‡@Resource çš„ name å±æ€§æŒ‡å®šï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š name å±æ€§ï¼Œå½“æ³¨è§£æ ‡æ³¨åœ¨å­—æ®µä¸Šï¼Œå³é»˜è®¤å–å­—æ®µçš„åç§°ä½œä¸º bean åç§°å¯»æ‰¾ä¾èµ–å¯¹è±¡ï¼Œå½“æ³¨è§£æ ‡æ³¨åœ¨å±æ€§çš„ setter æ–¹æ³•ä¸Šï¼Œå³é»˜è®¤å–å±æ€§åä½œä¸º bean åç§°å¯»æ‰¾ä¾èµ–å¯¹è±¡ã€‚\n3.2.3 å•å…ƒæµ‹è¯• @RunWith(SpringRunner.class) @SpringBootTest public class DemoApplicationTests {  @Autowired  private UserRepository userRepository;   @Test  public void testRedis(){  User user=new User(1, \u0026#34;hello\u0026#34;, 12);  userRepository.save(user);  Assert.assertEquals(\u0026#34;hello\u0026#34;, userRepository.getUserById(1).getUsername());  } } 4 å‚è€ƒèµ„æ–™ SpringBoot ä¹‹ Redis çš„æ”¯æŒ\nSpring-data-redis ç‰¹æ€§ä¸å®ä¾‹\n","permalink":"https://zhenfeng-zhu.github.io/post/spring-boot%E8%BF%9E%E6%8E%A5redis/","summary":"Spring-data-redisä¸º spring-data æ¨¡å—ä¸­å¯¹ redis çš„æ”¯æŒéƒ¨åˆ†ï¼Œç®€ç§°ä¸ºâ€œSDRâ€ï¼Œæä¾›äº†åŸºäº jedis å®¢æˆ·ç«¯ API çš„é«˜åº¦å°è£…ä»¥åŠä¸ spring å®¹å™¨çš„æ•´åˆï¼Œ\njedis å®¢æˆ·ç«¯åœ¨ç¼–ç¨‹å®æ–½æ–¹é¢å­˜åœ¨å¦‚ä¸‹ä¸è¶³ï¼š\n connection ç®¡ç†ç¼ºä¹è‡ªåŠ¨åŒ–ï¼Œconnection-pool çš„è®¾è®¡ç¼ºå°‘å¿…è¦çš„å®¹å™¨æ”¯æŒã€‚ æ•°æ®æ“ä½œéœ€è¦å…³æ³¨â€œåºåˆ—åŒ–â€/â€œååºåˆ—åŒ–â€ï¼Œå› ä¸º jedis çš„å®¢æˆ·ç«¯ API æ¥å—çš„æ•°æ®ç±»å‹ä¸º string å’Œ byteï¼Œå¯¹ç»“æ„åŒ–æ•°æ®(json,xml,pojo ç­‰)æ“ä½œéœ€è¦é¢å¤–çš„æ”¯æŒã€‚ äº‹åŠ¡æ“ä½œçº¯ç²¹ä¸ºç¡¬ç¼–ç  pub/sub åŠŸèƒ½ï¼Œç¼ºä¹å¿…è¦çš„è®¾è®¡æ¨¡å¼æ”¯æŒï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€éœ€è¦å…³æ³¨çš„å¤ªå¤šã€‚  1 spring-data-redis ç‰¹æ€§  è¿æ¥æ± è‡ªåŠ¨ç®¡ç†ï¼Œæä¾›äº†ä¸€ä¸ªé«˜åº¦å°è£…çš„â€œRedisTemplateâ€ç±» é’ˆå¯¹ jedis å®¢æˆ·ç«¯ä¸­å¤§é‡ api è¿›è¡Œäº†å½’ç±»å°è£…,å°†åŒä¸€ç±»å‹æ“ä½œå°è£…ä¸º operation æ¥å£  ValueOperationsï¼šç®€å• K-V æ“ä½œ SetOperationsï¼šset ç±»å‹æ•°æ®æ“ä½œ ZSetOperationsï¼šzset ç±»å‹æ•°æ®æ“ä½œ HashOperationsï¼šé’ˆå¯¹ map ç±»å‹çš„æ•°æ®æ“ä½œ ListOperationsï¼šé’ˆå¯¹ list ç±»å‹çš„æ•°æ®æ“ä½œ   æä¾›äº†å¯¹ key çš„â€œboundâ€(ç»‘å®š)ä¾¿æ·åŒ–æ“ä½œ APIï¼Œå¯ä»¥é€šè¿‡ bound å°è£…æŒ‡å®šçš„ keyï¼Œç„¶åè¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œè€Œæ— é¡»â€œæ˜¾å¼â€çš„å†æ¬¡æŒ‡å®š Keyï¼Œå³ BoundKeyOperationsï¼š  BoundValueOperations BoundSetOperations BoundListOperations BoundSetOperations BoundHashOperations   å°†äº‹åŠ¡æ“ä½œå°è£…ï¼Œæœ‰å®¹å™¨æ§åˆ¶ã€‚ é’ˆå¯¹æ•°æ®çš„â€œåºåˆ—åŒ–/ååºåˆ—åŒ–â€ï¼Œæä¾›äº†å¤šç§å¯é€‰æ‹©ç­–ç•¥(RedisSerializer)  JdkSerializationRedisSerializerï¼šPOJO å¯¹è±¡çš„å­˜å–åœºæ™¯ï¼Œä½¿ç”¨ JDK æœ¬èº«åºåˆ—åŒ–æœºåˆ¶ï¼Œå°† pojo ç±»é€šè¿‡ ObjectInputStream/ObjectOutputStream è¿›è¡Œåºåˆ—åŒ–æ“ä½œï¼Œæœ€ç»ˆ redis-server ä¸­å°†å­˜å‚¨å­—èŠ‚åºåˆ—ã€‚æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„åºåˆ—åŒ–ç­–ç•¥ã€‚ StringRedisSerializerï¼šKey æˆ–è€… value ä¸ºå­—ç¬¦ä¸²çš„åœºæ™¯ï¼Œæ ¹æ®æŒ‡å®šçš„ charset å¯¹æ•°æ®çš„å­—èŠ‚åºåˆ—ç¼–ç æˆ stringï¼Œæ˜¯â€œnew String(bytes, charset)â€å’Œâ€œstring.","title":"spring boot è¿æ¥ redis"},{"content":"æœ€ç»ˆä¸€è‡´æ€§çš„å®ç°æ‰‹æ®µ å®ç°æœ€ç»ˆä¸€è‡´æ€§æœ‰ä¸‰ç§æ‰‹æ®µï¼šå¯é äº‹ä»¶æ¨¡å¼ã€ä¸šåŠ¡è¡¥å¿æ¨¡å¼å’Œ TCC æ¨¡å¼\n1 å¯é äº‹ä»¶æ¨¡å¼ å¯é äº‹ä»¶æ¨¡å¼å±äºäº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œå½“æŸä»¶é‡è¦çš„äº‹æƒ…å‘ç”Ÿæ—¶ï¼Œæ¯”å¦‚æ›´æ–°ä¸€ä¸ªä¸šåŠ¡å®ä½“ï¼Œå¾®æœåŠ¡ä¼šå‘æ¶ˆæ¯ä»£ç†å‘å¸ƒä¸€ä¸ªäº‹ä»¶ã€‚æ¶ˆæ¯ä»£ç†ä¼šå°†è®¢é˜…äº‹ä»¶çš„å¾®æœåŠ¡æ¨é€äº‹ä»¶ã€‚\nè¦å®ç°è¿™ç§æ¨¡å¼éœ€è¦æ¶ˆæ¯é˜Ÿåˆ—å®ç°äº‹ä»¶çš„æŒä¹…åŒ–å’Œ at least once çš„å¯é äº‹ä»¶æŠ•é€’æ¨¡å¼ã€‚\n1.1 æœ¬åœ°äº‹ä»¶è¡¨ æœ¬åœ°äº‹ä»¶è¡¨æ–¹æ³•æ˜¯å°†äº‹ä»¶å’Œä¸šåŠ¡æ•°æ®ä¿å­˜åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„äº‹ä»¶æ¢å¤æœåŠ¡æ¥æ¢å¤äº‹ä»¶ï¼Œç”±æœ¬åœ°äº‹ç‰©ä¿è¯æ›´æ–°ä¸šåŠ¡å’Œå‘å¸ƒäº‹ä»¶çš„åŸå­æ€§ã€‚\nä½†æ˜¯ä¸šåŠ¡ç³»ç»Ÿå’Œäº‹ä»¶ç³»ç»Ÿè€¦åˆæ¯”è¾ƒç´§å¯†ï¼Œé¢å¤–çš„äº‹ä»¶æ•°æ®åº“æ“ä½œä¹Ÿä¼šç»™æ•°æ®åº“å¸¦æ¥é¢å¤–çš„å‹åŠ›ï¼Œå¯èƒ½æˆä¸ºç“¶é¢ˆã€‚\n1.2 å¤–éƒ¨äº‹ä»¶ æ­¤æ–¹æ³•æ˜¯å°†äº‹ä»¶æŒä¹…åŒ–åˆ°å¤–éƒ¨çš„äº‹ä»¶ç³»ç»Ÿï¼Œäº‹ä»¶ç³»ç»Ÿéœ€è¦æä¾›å®æ—¶äº‹ä»¶æœåŠ¡ä»¥æ¥å—å¾®æœåŠ¡å‘å¸ƒçš„äº‹ä»¶ï¼ŒåŒæ—¶äº‹ä»¶ç³»ç»Ÿè¿˜éœ€è¦æä¾›äº‹ä»¶æ¢å¤æœåŠ¡æ¥ç¡®è®¤æ¢å¤äº‹ä»¶ã€‚\n1.3 ä¸è¶³ æ­¤è¿‡ç¨‹å¯èƒ½å‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å†µã€‚\n2 è¡¥å¿æ¨¡å¼ ä¸€èˆ¬æ¥è®²ï¼Œå¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ä»¥ä¸‹ä¸¤ç§æƒ…å†µé€ æˆçš„ï¼š\nä¸šåŠ¡å¼‚å¸¸ï¼šä¸šåŠ¡é€»è¾‘äº§ç”Ÿçš„é”™è¯¯ï¼Œæ¯”å¦‚ä½™é¢ä¸è¶³ã€åº“å­˜ä¸è¶³ç­‰ã€‚\næŠ€æœ¯å¼‚å¸¸ï¼šéä¸šåŠ¡é€»è¾‘äº§ç”Ÿçš„å¼‚å¸¸ï¼Œæ¯”å¦‚ç½‘ç»œè¿æ¥å¼‚å¸¸ã€è¶…æ—¶ç­‰ã€‚\nè¡¥å¿æ¨¡å¼å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„åè°ƒæœåŠ¡æ¥åè°ƒå„ä¸ªéœ€è¦ä¿è¯ä¸€è‡´æ€§çš„å…¶ä»–æœåŠ¡ã€‚åè°ƒæœåŠ¡æŒ‰é¡ºåºè°ƒç”¨æ¯ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœæŸä¸ªæœåŠ¡è°ƒç”¨å¼‚å¸¸å°±å–æ¶ˆä¹‹å‰æ‰€æœ‰å·²ç»è°ƒç”¨æˆåŠŸçš„æœåŠ¡ã€‚\nå»ºè®®ä»…ç”¨äºæŠ€æœ¯å¼‚å¸¸çš„æƒ…å†µã€‚å¯¹äºä¸šåŠ¡å¼‚å¸¸æ¥è®²ï¼Œåº”è¯¥å°½å¯èƒ½çš„å»ä¼˜åŒ–ä¸šåŠ¡æ¨¡å¼ï¼Œä»¥é¿å…è¦æ±‚è¡¥å¿äº‹åŠ¡ã€‚\n2.1 å¸¸ç”¨æ‰‹æ®µ åœ¨å®ç°è¡¥å¿æ¨¡å¼æ—¶åº”è¯¥åšåˆ°ä¸¤ç‚¹ï¼š\n é¦–å…ˆè¦ç¡®å®šå¤±è´¥çš„æ­¥éª¤å’ŒçŠ¶æ€ï¼Œä»è€Œç¡®å®šè¦è¡¥å¿çš„èŒƒå›´ã€‚ å…¶æ¬¡è¦èƒ½æä¾›è¡¥å¿æ“ä½œä½¿ç”¨çš„ä¸šåŠ¡æ•°æ®ã€‚  å¯ä»¥é€šè¿‡è®°å½•å®Œæ•´çš„ä¸šåŠ¡æµæ°´çš„æ–¹æ³•æ¥å®ç°ä¸Šé¢ä¸¤ç‚¹è¦æ±‚ã€‚ä½†æ˜¯å¯¹äºä¸€ä¸ªé€šç”¨çš„è¡¥å¿æ¡†æ¶æ¥è¯´ï¼Œé¢„å…ˆçŸ¥é“å¾®æœåŠ¡éœ€è¦è®°å½•çš„ä¸šåŠ¡è¦ç´ æ˜¯ä¸å¯èƒ½çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ç§åŠæ³•æ¥ä¿è¯ä¸šåŠ¡æµæ°´çš„å¯æ‰©å±•æ€§ï¼Œå®è·µä¸­ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼šå¤§è¡¨å’Œå…³è”è¡¨ã€‚\n å¤§è¡¨ï¼Œé¡¾æ˜æ€è®®å°±æ˜¯è®¾è®¡æ—¶é™¤äº†å¿…é¡»çš„å­—æ®µå¤–ï¼Œè¿˜éœ€è¦é¢„ç•™å¤§é‡çš„å¤‡ç”¨å­—æ®µï¼Œæ¡†æ¶å¯ä»¥æä¾›è¾…åŠ©å·¥å…·æ¥å°†ä¸šåŠ¡æ•°æ®æ˜ å°„åˆ°å¤‡ç”¨å­—æ®µä¸­ã€‚å¤§è¡¨å¯¹äºæ¡†æ¶å±‚å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›éš¾ç‚¹ï¼Œæ¯”å¦‚é¢„ç•™å¤šå°‘ä¸ªå­—æ®µåˆé€‚ï¼Œæ¯ä¸ªå­—æ®µåˆéœ€è¦é¢„ç•™å¤šé•¿ã€‚è¿˜æœ‰ä¸€ä¸ªéš¾ç‚¹æ˜¯å¦‚æœä»…ä»æ•°æ®å±‚é¢æ¥æŸ¥è¯¢æ•°æ®ï¼Œå¾ˆéš¾ä¸€çœ¼çœ‹å‡ºå¤‡ç”¨å­—æ®µçš„ä¸šåŠ¡å«ä¹‰ï¼Œç»´æŠ¤è¿‡ç¨‹ä¸å‹å¥½ã€‚ å…³è”è¡¨ï¼Œåˆ†ä¸ºæŠ€æœ¯è¡¨å’Œä¸šåŠ¡è¡¨ã€‚æŠ€æœ¯è¡¨ä¸­ä¿å­˜ä¸ºå®ç°è¡¥å¿æ“ä½œæ‰€éœ€è¦çš„æŠ€æœ¯æ•°æ®ï¼Œä¸šåŠ¡è¡¨ä¸­ä¿å­˜ä¸šåŠ¡æ•°æ®ã€‚é€šè¿‡åœ¨æŠ€æœ¯è¡¨ä¸­å¢åŠ ä¸šåŠ¡è¡¨åå’Œä¸šåŠ¡è¡¨ä¸»é”®æ¥å»ºç«‹å’Œä¸šåŠ¡æ•°æ®çš„å…³è”ã€‚å…³è”è¡¨æ›´çµæ´»ï¼Œèƒ½æ”¯æŒä¸åŒä¸šåŠ¡ç±»å‹è®°å½•ä¸åŒçš„ä¸šåŠ¡è¦ç´ ã€‚ä½†æ˜¯åœ¨æ¡†æ¶çš„å®ç°ä¸Šéš¾åº¦è¾ƒé«˜ï¼Œæ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦å¤æ‚çš„å…³è”åŠ¨ä½œï¼Œæ€§èƒ½ä¼šå—åˆ°å½±å“ã€‚  2.2 é‡è¯• è¡¥å¿è¿‡ç¨‹ä½œä¸ºä¸€ä¸ªæœåŠ¡ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™ä¹Ÿä¼šå‡ºç°ä¸æˆåŠŸçš„æƒ…å†µï¼Œè¿™æ—¶å°±è¦é€šè¿‡é‡è¯•æœºåˆ¶æ¥ä¿è¯è¡¥å¿çš„æˆåŠŸç‡ã€‚å› æ­¤è¦æ±‚è¡¥å¿æ“ä½œå…·æœ‰å¹‚ç­‰æ€§ã€‚\nä½†æ˜¯ä¹Ÿä¸æ˜¯ç›²ç›®çš„é‡è¯•ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æœåŠ¡æ‰§è¡Œå¤±è´¥çš„åŸå› æ¥é€‰æ‹©ä¸åŒçš„ç­–ç•¥ï¼š\n å› ä¸šåŠ¡å› ç´ å¯¼è‡´å¤±è´¥ï¼Œéœ€è¦åœæ­¢é‡è¯•ã€‚ ç½•è§çš„å¼‚å¸¸ï¼Œå¦‚ç½‘ç»œä¸­æ–­ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®ä¸¢å¤±ï¼Œåº”è¯¥ç«‹å³é‡è¯•ã€‚ å¦‚æœæ˜¯å› ä¸ºç³»ç»Ÿç¹å¿™ï¼Œæ­¤æ—¶éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´å†é‡è¯•ã€‚  2.3 ä¸è¶³ åœ¨è¡¥å¿æ¨¡å¼ä¸­æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ç¼ºé™·æ˜¯éš”ç¦»æ€§ï¼Œä»ç¬¬ä¸€ä¸ªæœåŠ¡å¼€å§‹ä¸€ç›´åˆ°è¡¥å¿å®Œæˆï¼Œä¸ä¸€è‡´æ€§æ˜¯å¯¹å…¶ä»–æœåŠ¡å¯è§çš„ã€‚å¦å¤–è¡¥å¿æ¨¡å¼è¿‡åˆ†ä¾èµ–åè°ƒæœåŠ¡çš„å¥å£®æ€§ï¼Œå¦‚æœåè°ƒæœåŠ¡å¼‚å¸¸ï¼Œåˆ™æ²¡åŠæ³•è¾¾åˆ°ä¸€è‡´æ€§ã€‚\n3 TCC æ¨¡å¼ TCCï¼Œæ˜¯ Tryï¼ŒConfirm å’Œ Cancel çš„ç¼©å†™ã€‚ä¸€ä¸ªå®Œæ•´çš„ TCC ä¸šåŠ¡ä¸€èˆ¬æ˜¯ç”±ä¸€ä¸ªä¸»ä¸šåŠ¡å’Œè‹¥å¹²ä¸ªä»ä¸šåŠ¡ç»„æˆã€‚\n Try  å®Œæˆæ‰€æœ‰ä¸šåŠ¡æ£€æŸ¥ é¢„ç•™å¿…é¡»çš„ä¸šåŠ¡èµ„æº   Confirm  çœŸæ­£æ‰§è¡Œä¸šåŠ¡ ä¸åšä»»ä½•ä¸šåŠ¡æ£€æŸ¥ åªä½¿ç”¨ Try é˜¶æ®µé¢„ç•™çš„ä¸šåŠ¡èµ„æº æ»¡è¶³å¹‚ç­‰æ€§   Cancel  é‡Šæ”¾ Try é˜¶æ®µé¢„ç•™çš„ä¸šåŠ¡èµ„æº æ»¡è¶³å¹‚ç­‰æ€§    3.1 å®ç°è¿‡ç¨‹ æ•´ä¸ª TCC ä¸šåŠ¡åˆ†æˆä¸¤ä¸ªé˜¶æ®µå®Œæˆï¼š\nç¬¬ä¸€é˜¶æ®µï¼šä¸»ä¸šåŠ¡æœåŠ¡åˆ†åˆ«è°ƒç”¨æ‰€æœ‰ä»ä¸šåŠ¡çš„ try æ“ä½œï¼Œå¹¶åœ¨æ´»åŠ¨ç®¡ç†å™¨ä¸­ç™»è®°æ‰€æœ‰ä»ä¸šåŠ¡æœåŠ¡ã€‚å½“æ‰€æœ‰ä»ä¸šåŠ¡æœåŠ¡çš„ try æ“ä½œéƒ½è°ƒç”¨æˆåŠŸæˆ–è€…æŸä¸ªä»ä¸šåŠ¡æœåŠ¡çš„ try æ“ä½œå¤±è´¥ï¼Œè¿›å…¥ç¬¬äºŒé˜¶æ®µã€‚\nç¬¬äºŒé˜¶æ®µï¼šæ´»åŠ¨ç®¡ç†å™¨æ ¹æ®ç¬¬ä¸€é˜¶æ®µçš„æ‰§è¡Œç»“æœæ¥æ‰§è¡Œ Confirm æˆ– Cancel æ“ä½œã€‚å¦‚æœç¬¬ä¸€é˜¶æ®µæ‰€æœ‰çš„ try æ“ä½œæ˜¯æˆåŠŸçš„ï¼Œåˆ™è°ƒç”¨æ‰€æœ‰ä»ä¸šåŠ¡çš„ Confirm æ“ä½œï¼Œå¦åˆ™éƒ½è°ƒç”¨ Cancel æ“ä½œã€‚\nTCC æ¨¡å¼ä¸å†éœ€è¦è®°å½•è¯¦ç»†çš„ä¸šåŠ¡æµæ°´ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†è¡¥å¿æ¨¡å¼çš„ç¼ºé™·ï¼Œåœ¨ TCC æ¨¡å¼ä¸­ï¼Œç›´åˆ°æ˜ç¡®çš„ Confirm åŠ¨ä½œï¼Œæ‰€æœ‰çš„ä¸šåŠ¡æ“ä½œéƒ½æ˜¯éš”ç¦»çš„ã€‚è€Œä¸”è¿˜å¯ä»¥é€šè¿‡æŒ‡å®š try çš„è¶…æ—¶æ—¶é—´ï¼Œä¸»åŠ¨çš„ Cancel é¢„ç•™çš„èµ„æºï¼Œä»è€Œå®ç°äº†è‡ªæ²»ã€‚\n3.2 ä¸è¶³ TCC æ¨¡å¼ä¸èƒ½ç™¾åˆ†ç™¾ä¿è¯ä¸€è‡´æ€§ï¼Œå¦‚æœæŸæœåŠ¡æäº¤äº† Confirm æˆåŠŸï¼Œä½†æ˜¯ç”±äºç½‘ç»œæ•…éšœï¼Œå¯¼è‡´ä¸»æœåŠ¡æ”¶åˆ°çš„å¤±è´¥ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸ä¸€è‡´æ€§ï¼Œè¿™è¢«ç§°ä¸º heuristic exceptionã€‚å› æ­¤ä¸ºä¿è¯æˆåŠŸç‡ï¼Œéƒ½éœ€è¦æ”¯æŒé‡è¯•ã€‚\nheuristic exception æ˜¯ä¸å¯æœç»çš„ï¼Œä½†æ˜¯é€šè¿‡è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ã€é‡è¯•é¢‘ç‡ä»¥åŠç›‘æ§ï¼Œå¯ä»¥ä½¿æ­¤å¼‚å¸¸çš„å¯èƒ½æ€§é™åˆ°å¾ˆä½ï¼Œå¦å¤–å¦‚æœå‡ºç°äº†æ­¤å¼‚å¸¸ï¼Œè¿˜å¯é€šè¿‡äººå·¥æ‰‹æ®µè¡¥æ•‘ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%89%8B%E6%AE%B5/","summary":"æœ€ç»ˆä¸€è‡´æ€§çš„å®ç°æ‰‹æ®µ å®ç°æœ€ç»ˆä¸€è‡´æ€§æœ‰ä¸‰ç§æ‰‹æ®µï¼šå¯é äº‹ä»¶æ¨¡å¼ã€ä¸šåŠ¡è¡¥å¿æ¨¡å¼å’Œ TCC æ¨¡å¼\n1 å¯é äº‹ä»¶æ¨¡å¼ å¯é äº‹ä»¶æ¨¡å¼å±äºäº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œå½“æŸä»¶é‡è¦çš„äº‹æƒ…å‘ç”Ÿæ—¶ï¼Œæ¯”å¦‚æ›´æ–°ä¸€ä¸ªä¸šåŠ¡å®ä½“ï¼Œå¾®æœåŠ¡ä¼šå‘æ¶ˆæ¯ä»£ç†å‘å¸ƒä¸€ä¸ªäº‹ä»¶ã€‚æ¶ˆæ¯ä»£ç†ä¼šå°†è®¢é˜…äº‹ä»¶çš„å¾®æœåŠ¡æ¨é€äº‹ä»¶ã€‚\nè¦å®ç°è¿™ç§æ¨¡å¼éœ€è¦æ¶ˆæ¯é˜Ÿåˆ—å®ç°äº‹ä»¶çš„æŒä¹…åŒ–å’Œ at least once çš„å¯é äº‹ä»¶æŠ•é€’æ¨¡å¼ã€‚\n1.1 æœ¬åœ°äº‹ä»¶è¡¨ æœ¬åœ°äº‹ä»¶è¡¨æ–¹æ³•æ˜¯å°†äº‹ä»¶å’Œä¸šåŠ¡æ•°æ®ä¿å­˜åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„äº‹ä»¶æ¢å¤æœåŠ¡æ¥æ¢å¤äº‹ä»¶ï¼Œç”±æœ¬åœ°äº‹ç‰©ä¿è¯æ›´æ–°ä¸šåŠ¡å’Œå‘å¸ƒäº‹ä»¶çš„åŸå­æ€§ã€‚\nä½†æ˜¯ä¸šåŠ¡ç³»ç»Ÿå’Œäº‹ä»¶ç³»ç»Ÿè€¦åˆæ¯”è¾ƒç´§å¯†ï¼Œé¢å¤–çš„äº‹ä»¶æ•°æ®åº“æ“ä½œä¹Ÿä¼šç»™æ•°æ®åº“å¸¦æ¥é¢å¤–çš„å‹åŠ›ï¼Œå¯èƒ½æˆä¸ºç“¶é¢ˆã€‚\n1.2 å¤–éƒ¨äº‹ä»¶ æ­¤æ–¹æ³•æ˜¯å°†äº‹ä»¶æŒä¹…åŒ–åˆ°å¤–éƒ¨çš„äº‹ä»¶ç³»ç»Ÿï¼Œäº‹ä»¶ç³»ç»Ÿéœ€è¦æä¾›å®æ—¶äº‹ä»¶æœåŠ¡ä»¥æ¥å—å¾®æœåŠ¡å‘å¸ƒçš„äº‹ä»¶ï¼ŒåŒæ—¶äº‹ä»¶ç³»ç»Ÿè¿˜éœ€è¦æä¾›äº‹ä»¶æ¢å¤æœåŠ¡æ¥ç¡®è®¤æ¢å¤äº‹ä»¶ã€‚\n1.3 ä¸è¶³ æ­¤è¿‡ç¨‹å¯èƒ½å‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å†µã€‚\n2 è¡¥å¿æ¨¡å¼ ä¸€èˆ¬æ¥è®²ï¼Œå¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ä»¥ä¸‹ä¸¤ç§æƒ…å†µé€ æˆçš„ï¼š\nä¸šåŠ¡å¼‚å¸¸ï¼šä¸šåŠ¡é€»è¾‘äº§ç”Ÿçš„é”™è¯¯ï¼Œæ¯”å¦‚ä½™é¢ä¸è¶³ã€åº“å­˜ä¸è¶³ç­‰ã€‚\næŠ€æœ¯å¼‚å¸¸ï¼šéä¸šåŠ¡é€»è¾‘äº§ç”Ÿçš„å¼‚å¸¸ï¼Œæ¯”å¦‚ç½‘ç»œè¿æ¥å¼‚å¸¸ã€è¶…æ—¶ç­‰ã€‚\nè¡¥å¿æ¨¡å¼å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„åè°ƒæœåŠ¡æ¥åè°ƒå„ä¸ªéœ€è¦ä¿è¯ä¸€è‡´æ€§çš„å…¶ä»–æœåŠ¡ã€‚åè°ƒæœåŠ¡æŒ‰é¡ºåºè°ƒç”¨æ¯ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœæŸä¸ªæœåŠ¡è°ƒç”¨å¼‚å¸¸å°±å–æ¶ˆä¹‹å‰æ‰€æœ‰å·²ç»è°ƒç”¨æˆåŠŸçš„æœåŠ¡ã€‚\nå»ºè®®ä»…ç”¨äºæŠ€æœ¯å¼‚å¸¸çš„æƒ…å†µã€‚å¯¹äºä¸šåŠ¡å¼‚å¸¸æ¥è®²ï¼Œåº”è¯¥å°½å¯èƒ½çš„å»ä¼˜åŒ–ä¸šåŠ¡æ¨¡å¼ï¼Œä»¥é¿å…è¦æ±‚è¡¥å¿äº‹åŠ¡ã€‚\n2.1 å¸¸ç”¨æ‰‹æ®µ åœ¨å®ç°è¡¥å¿æ¨¡å¼æ—¶åº”è¯¥åšåˆ°ä¸¤ç‚¹ï¼š\n é¦–å…ˆè¦ç¡®å®šå¤±è´¥çš„æ­¥éª¤å’ŒçŠ¶æ€ï¼Œä»è€Œç¡®å®šè¦è¡¥å¿çš„èŒƒå›´ã€‚ å…¶æ¬¡è¦èƒ½æä¾›è¡¥å¿æ“ä½œä½¿ç”¨çš„ä¸šåŠ¡æ•°æ®ã€‚  å¯ä»¥é€šè¿‡è®°å½•å®Œæ•´çš„ä¸šåŠ¡æµæ°´çš„æ–¹æ³•æ¥å®ç°ä¸Šé¢ä¸¤ç‚¹è¦æ±‚ã€‚ä½†æ˜¯å¯¹äºä¸€ä¸ªé€šç”¨çš„è¡¥å¿æ¡†æ¶æ¥è¯´ï¼Œé¢„å…ˆçŸ¥é“å¾®æœåŠ¡éœ€è¦è®°å½•çš„ä¸šåŠ¡è¦ç´ æ˜¯ä¸å¯èƒ½çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ç§åŠæ³•æ¥ä¿è¯ä¸šåŠ¡æµæ°´çš„å¯æ‰©å±•æ€§ï¼Œå®è·µä¸­ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼šå¤§è¡¨å’Œå…³è”è¡¨ã€‚\n å¤§è¡¨ï¼Œé¡¾æ˜æ€è®®å°±æ˜¯è®¾è®¡æ—¶é™¤äº†å¿…é¡»çš„å­—æ®µå¤–ï¼Œè¿˜éœ€è¦é¢„ç•™å¤§é‡çš„å¤‡ç”¨å­—æ®µï¼Œæ¡†æ¶å¯ä»¥æä¾›è¾…åŠ©å·¥å…·æ¥å°†ä¸šåŠ¡æ•°æ®æ˜ å°„åˆ°å¤‡ç”¨å­—æ®µä¸­ã€‚å¤§è¡¨å¯¹äºæ¡†æ¶å±‚å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›éš¾ç‚¹ï¼Œæ¯”å¦‚é¢„ç•™å¤šå°‘ä¸ªå­—æ®µåˆé€‚ï¼Œæ¯ä¸ªå­—æ®µåˆéœ€è¦é¢„ç•™å¤šé•¿ã€‚è¿˜æœ‰ä¸€ä¸ªéš¾ç‚¹æ˜¯å¦‚æœä»…ä»æ•°æ®å±‚é¢æ¥æŸ¥è¯¢æ•°æ®ï¼Œå¾ˆéš¾ä¸€çœ¼çœ‹å‡ºå¤‡ç”¨å­—æ®µçš„ä¸šåŠ¡å«ä¹‰ï¼Œç»´æŠ¤è¿‡ç¨‹ä¸å‹å¥½ã€‚ å…³è”è¡¨ï¼Œåˆ†ä¸ºæŠ€æœ¯è¡¨å’Œä¸šåŠ¡è¡¨ã€‚æŠ€æœ¯è¡¨ä¸­ä¿å­˜ä¸ºå®ç°è¡¥å¿æ“ä½œæ‰€éœ€è¦çš„æŠ€æœ¯æ•°æ®ï¼Œä¸šåŠ¡è¡¨ä¸­ä¿å­˜ä¸šåŠ¡æ•°æ®ã€‚é€šè¿‡åœ¨æŠ€æœ¯è¡¨ä¸­å¢åŠ ä¸šåŠ¡è¡¨åå’Œä¸šåŠ¡è¡¨ä¸»é”®æ¥å»ºç«‹å’Œä¸šåŠ¡æ•°æ®çš„å…³è”ã€‚å…³è”è¡¨æ›´çµæ´»ï¼Œèƒ½æ”¯æŒä¸åŒä¸šåŠ¡ç±»å‹è®°å½•ä¸åŒçš„ä¸šåŠ¡è¦ç´ ã€‚ä½†æ˜¯åœ¨æ¡†æ¶çš„å®ç°ä¸Šéš¾åº¦è¾ƒé«˜ï¼Œæ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦å¤æ‚çš„å…³è”åŠ¨ä½œï¼Œæ€§èƒ½ä¼šå—åˆ°å½±å“ã€‚  2.2 é‡è¯• è¡¥å¿è¿‡ç¨‹ä½œä¸ºä¸€ä¸ªæœåŠ¡ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™ä¹Ÿä¼šå‡ºç°ä¸æˆåŠŸçš„æƒ…å†µï¼Œè¿™æ—¶å°±è¦é€šè¿‡é‡è¯•æœºåˆ¶æ¥ä¿è¯è¡¥å¿çš„æˆåŠŸç‡ã€‚å› æ­¤è¦æ±‚è¡¥å¿æ“ä½œå…·æœ‰å¹‚ç­‰æ€§ã€‚\nä½†æ˜¯ä¹Ÿä¸æ˜¯ç›²ç›®çš„é‡è¯•ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æœåŠ¡æ‰§è¡Œå¤±è´¥çš„åŸå› æ¥é€‰æ‹©ä¸åŒçš„ç­–ç•¥ï¼š\n å› ä¸šåŠ¡å› ç´ å¯¼è‡´å¤±è´¥ï¼Œéœ€è¦åœæ­¢é‡è¯•ã€‚ ç½•è§çš„å¼‚å¸¸ï¼Œå¦‚ç½‘ç»œä¸­æ–­ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®ä¸¢å¤±ï¼Œåº”è¯¥ç«‹å³é‡è¯•ã€‚ å¦‚æœæ˜¯å› ä¸ºç³»ç»Ÿç¹å¿™ï¼Œæ­¤æ—¶éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´å†é‡è¯•ã€‚  2.3 ä¸è¶³ åœ¨è¡¥å¿æ¨¡å¼ä¸­æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ç¼ºé™·æ˜¯éš”ç¦»æ€§ï¼Œä»ç¬¬ä¸€ä¸ªæœåŠ¡å¼€å§‹ä¸€ç›´åˆ°è¡¥å¿å®Œæˆï¼Œä¸ä¸€è‡´æ€§æ˜¯å¯¹å…¶ä»–æœåŠ¡å¯è§çš„ã€‚å¦å¤–è¡¥å¿æ¨¡å¼è¿‡åˆ†ä¾èµ–åè°ƒæœåŠ¡çš„å¥å£®æ€§ï¼Œå¦‚æœåè°ƒæœåŠ¡å¼‚å¸¸ï¼Œåˆ™æ²¡åŠæ³•è¾¾åˆ°ä¸€è‡´æ€§ã€‚\n3 TCC æ¨¡å¼ TCCï¼Œæ˜¯ Tryï¼ŒConfirm å’Œ Cancel çš„ç¼©å†™ã€‚ä¸€ä¸ªå®Œæ•´çš„ TCC ä¸šåŠ¡ä¸€èˆ¬æ˜¯ç”±ä¸€ä¸ªä¸»ä¸šåŠ¡å’Œè‹¥å¹²ä¸ªä»ä¸šåŠ¡ç»„æˆã€‚\n Try  å®Œæˆæ‰€æœ‰ä¸šåŠ¡æ£€æŸ¥ é¢„ç•™å¿…é¡»çš„ä¸šåŠ¡èµ„æº   Confirm  çœŸæ­£æ‰§è¡Œä¸šåŠ¡ ä¸åšä»»ä½•ä¸šåŠ¡æ£€æŸ¥ åªä½¿ç”¨ Try é˜¶æ®µé¢„ç•™çš„ä¸šåŠ¡èµ„æº æ»¡è¶³å¹‚ç­‰æ€§   Cancel  é‡Šæ”¾ Try é˜¶æ®µé¢„ç•™çš„ä¸šåŠ¡èµ„æº æ»¡è¶³å¹‚ç­‰æ€§    3.","title":"æœ€ç»ˆä¸€è‡´æ€§çš„å®ç°æ‰‹æ®µ"},{"content":"Reactive å¾®æœåŠ¡ åˆ†å¸ƒå¼ç³»ç»Ÿæ„å»ºèµ·æ¥å¾ˆå›°éš¾ï¼Œå› ä¸ºå®ƒä»¬å®¹æ˜“å‡ºé—®é¢˜ï¼Œè¿è¡Œç¼“æ…¢ï¼Œå¹¶ä¸”è¢« CAP å’Œ FLP ç†è®ºæ‰€é™åˆ¶ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬çš„æ„å»ºå’Œè¿ç»´éƒ½ç‰¹åˆ«å¤æ‚ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œreactive ä¾¿å‡ºç°äº†ã€‚\nReactive ç¼–ç¨‹ï¼šä¸€ç§å¼€å‘æ¨¡å‹ï¼Œå…¶ä¸“æ³¨äºæ•°æ®æµå‘ã€å¯¹å˜åŒ–çš„åé¦ˆï¼Œä»¥åŠä¼ æ’­ä»–ä»¬ã€‚\nåœ¨ reactive ç¼–ç¨‹ä¸­ï¼Œåˆºæ¿€ä¿¡å·æ˜¯æ•°æ®çš„è½¬ç§»ï¼Œå«åš streamsã€‚å…¶å®å¾ˆåƒç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…æ¨¡å¼ï¼Œæ¶ˆè´¹è€…å¯¹å€¼è¿›è¡Œè®¢é˜…å¹¶å“åº”ã€‚\nReactive ç³»ç»Ÿï¼šä¸€ç§æ¶æ„é£æ ¼ï¼Œå…¶åŸºäºå¼‚æ­¥æ¶ˆæ¯æ¥æ„å»ºå“åº”å¼çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚\nreactive ç³»ç»Ÿä½¿ç”¨äº†æ¶ˆæ¯é©±åŠ¨çš„æ–¹æ³•ã€‚æ‰€æœ‰çš„æ„å»ºé€šè¿‡å¼‚æ­¥æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶æ¥äº¤äº’ã€‚æ¶ˆæ¯æŠ•é€’çš„é€»è¾‘ç”±åº•å±‚çš„å®ç°å†³å®šã€‚å‘é€è€…ä¸ä¼šé˜»å¡ç€ç­‰å¾…å›å¤ï¼Œå®ƒä»¬å¯èƒ½ä¼šç¨åæ‰æ¥æ”¶åˆ°å›å¤ã€‚\nreactive ç³»ç»Ÿä¼šæœ‰ä¸¤ä¸ªé‡è¦çš„ç‰¹å¾ï¼š\n  ä¼¸ç¼©æ€§â€”â€”å¯ä»¥æ¨ªå‘ä¼¸ç¼©\nä¼¸ç¼©æ€§æ¥è‡ªæ¶ˆæ¯ä¼ é€’çš„è§£è€¦ã€‚æ¶ˆæ¯è¢«å‘é€åˆ°ä¸€ä¸ªåœ°å€ä¹‹åï¼Œå¯ä»¥è¢«ä¸€ç»„æ¶ˆè´¹è€…æŒ‰ç…§ä¸€ç§è´Ÿè½½å‡è¡¡æ–¹æ³•æ¶ˆè´¹ã€‚å½“ reactive ç³»ç»Ÿé‡åˆ°è´Ÿè½½é«˜å³°æ—¶ï¼Œå®ƒå¯ä»¥åˆ›é€ å‡ºæ–°çš„æ¶ˆè´¹è€…ï¼Œå¹¶åœ¨æ­¤ä¹‹åé”€æ¯å®ƒä»¬ã€‚\n  æ¢å¤æ€§â€”â€”å¯ä»¥å¤„ç†é”™è¯¯å¹¶ä¸”æ¢å¤\né¦–å…ˆï¼Œè¿™ç§æ¶ˆæ¯äº¤äº’æ¨¡å¼å…è®¸ç»„ä»¶åœ¨å…¶æœ¬åœ°å¤„ç†é”™è¯¯ï¼Œç»„ä»¶ä¸éœ€è¦ç­‰å¾…æ¶ˆæ¯ï¼Œå› æ­¤å½“ä¸€ä¸ªç»„ä»¶å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå…¶ä»–ç»„ä»¶ä»ç„¶ä¼šæ­£å¸¸å·¥ä½œã€‚å…¶æ¬¡ï¼Œå½“ä¸€ä¸ªå¤„ç†æ¶ˆæ¯çš„ç»„ä»¶å‘ç”Ÿé”™è¯¯åï¼Œæ¶ˆæ¯å¯ä»¥å¯ä»¥ä¼ é€’ç»™åœ¨ç›¸åŒåœ°å€æ³¨å†Œçš„å…¶ä»–ç»„ä»¶ã€‚\n  reactive å¾®æœåŠ¡ç³»ç»Ÿæ˜¯ç”± reactive å¾®æœåŠ¡ç»„æˆçš„ã€‚è¿™äº›å¾®æœåŠ¡æœ‰ä¸‹é¢å››ä¸ªç‰¹å¾ï¼š\n è‡ªæ²»æ€§ å¼‚æ­¥æ€§ æ¢å¤æ€§ ä¼¸ç¼©æ€§  Reactive å¾®æœåŠ¡æ˜¯å¯è‡ªæ²»çš„ã€‚ä»–ä»¬å¯ä»¥æ ¹æ®å‘¨å›´çš„æœåŠ¡æ˜¯å¦å¯ç”¨æ¥è°ƒæ•´è‡ªå·±çš„è¡Œä¸ºã€‚è‡ªæ²»æ€§å¾€å¾€ä¼´éšç€å­¤ç«‹æ€§ï¼›Reactive å¾®æœåŠ¡å¯ä»¥åœ¨æœ¬åœ°å¤„ç†é”™è¯¯ã€ç‹¬ç«‹åœ°å®Œæˆä»»åŠ¡ï¼Œå¹¶åœ¨å¿…è¦æ—¶å’Œå…¶ä»–æœåŠ¡åˆä½œã€‚å®ƒä»¬ä½¿ç”¨å¼‚æ­¥æ¶ˆæ¯ä¼ é€’çš„æœºåˆ¶å’Œå…¶ä»–æœåŠ¡æ²Ÿé€šï¼›å®ƒä»¬ä¹Ÿä¼šæ¥æ”¶æ¶ˆæ¯å¹¶ä¸”å¯¹å…¶ä½œå‡ºå›åº”ã€‚\nå¾—ç›Šäºå¼‚æ­¥æ¶ˆæ¯æœºåˆ¶ï¼Œreactive å¾®æœåŠ¡å¯ä»¥å¤„ç†é”™è¯¯å¹¶æ ¹æ®æƒ…å†µè°ƒæ•´è‡ªå·±çš„è¡Œä¸ºã€‚é”™è¯¯ä¸ä¼šè¢«æ‰©æ•£ï¼Œè€Œæ˜¯åœ¨é è¿‘é”™è¯¯æºå¤´çš„åœ°æ–¹è¢«å¤„ç†æ‰ã€‚å½“ä¸€ä¸ªå¾®æœåŠ¡æŒ‚æ‰ä¹‹åï¼Œå®ƒçš„æ¶ˆè´¹è€…å¾®æœåŠ¡è¦èƒ½å¤Ÿå¤„ç†é”™è¯¯å¹¶é¿å…æ‰©æ•£ã€‚è¿™ä¸€å­¤ç«‹åŸåˆ™æ˜¯é¿å…é”™è¯¯é€å±‚ä¸Šæµ®è€Œæ¯æ‰æ•´ä¸ªç³»ç»Ÿçš„å…³é”®ã€‚å¯æ¢å¤æ€§ä¸åªæ˜¯å…³äºå¤„ç†é”™è¯¯ï¼Œå®ƒè¿˜æ¶‰åŠåˆ°è‡ªæ„ˆæ€§ï¼›ä¸€ä¸ª reactive å¾®æœåŠ¡åº”è¯¥èƒ½å¤Ÿä»é”™è¯¯ä¸­æ¢å¤å¹¶ä¸”å¯¹é”™è¯¯è¿›è¡Œè¡¥æ•‘ã€‚\næœ€åï¼Œreactive å¾®æœåŠ¡å¿…é¡»æ˜¯å¯ä¼¸ç¼©çš„ï¼Œè¿™æ ·ç³»ç»Ÿæ‰å¯ä»¥æ ¹æ®è´Ÿè½½æƒ…å†µæ¥è°ƒæ•´èŠ‚ç‚¹æ•°é‡ã€‚è¿™ä¸€ç‰¹æ€§æ„å‘³ç€å°†ä¼šæœ‰ä¸€ç³»åˆ—çš„é™åˆ¶ï¼Œæ¯”å¦‚ä¸èƒ½æœ‰åœ¨å†…å­˜ä¸­çš„çŠ¶æ€ï¼Œè¦èƒ½å¤Ÿåœ¨å¿…è¦æ—¶åŒæ­¥çŠ¶æ€ä¿¡æ¯ï¼Œæˆ–è€…è¦èƒ½å¤Ÿå°†æ¶ˆæ¯è·¯ç”±åˆ°çŠ¶æ€ä¿¡æ¯ç›¸åŒçš„èŠ‚ç‚¹ã€‚\nVert.x Vert.x æ˜¯ä¸€ä¸ªç”¨äºæ„å»º reactive å’Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„å·¥å…·ç®±ï¼Œå…¶ä½¿ç”¨äº†å¼‚æ­¥éé˜»å¡ç¼–ç¨‹æ¨¡å‹ã€‚å½“ä½¿ç”¨ Vert.x æ„å»ºå¾®æœåŠ¡çš„æ—¶å€™ï¼Œå¾®æœåŠ¡ä¼šè‡ªç„¶åœ°å¸¦ä¸Šä¸€ä¸ªæ ¸å¿ƒç‰¹å¾ï¼šæ‰€æœ‰äº‹æƒ…éƒ½æ˜¯å¼‚æ­¥çš„ã€‚\nä¼ ç»Ÿç¼–ç¨‹æ¨¡å¼\nint res = compute(1, 2); åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæ˜¯åœ¨ç­‰å¾… compute å‡½æ•°è®¡ç®—å‡ºæ¥ç»“æœä¹‹åå†è¿›è¡Œå‰©ä¸‹çš„æ“ä½œã€‚è€Œåœ¨å¼‚æ­¥éé˜»å¡çš„ç¼–ç¨‹æ¨¡å¼ä¸­ï¼Œå°†ä¼šåˆ›å»ºä¸€ä¸ª handlerï¼š\ncompute(1, 2, res -\u0026gt; {  // called with the result }); åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œcompute å‡½æ•°ä¸å†è¿”å›ä¸€ä¸ªç»“æœï¼Œè€Œæ˜¯ä¼ ä¸€ä¸ª handlerï¼Œå½“ç»“æœå‡†å¤‡å¥½æ—¶è°ƒç”¨å°±å¯ä»¥äº†ã€‚å¾—ç›Šäºè¿™ç§å¼€å‘æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨å¾ˆå°‘çš„çº¿ç¨‹å»å¤„ç†é«˜å¹¶å‘å·¥ä½œã€‚åœ¨ vert.x ä¸­ï¼Œåˆ°å¤„éƒ½å¯ä»¥çœ‹åˆ°è¿™ç§å½¢å¼çš„ä»£ç ï¼Œæ¯”å¦‚åˆ›å»º http æœåŠ¡å™¨æ—¶ï¼š\nvertx.createHttpServer()  .requestHandler(request -\u0026gt; {  request.response().end(\u0026#34;hello vert.x\u0026#34;);  })  .listen(8080); è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®©ä¸€ä¸ª requestHandler æ¥æ”¶ HTTP è¯·æ±‚(äº‹ä»¶)å¹¶ä¸”è¿”å›\u0026quot;hello vert.x\u0026quot;ã€‚Handler æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå®ƒä¼šè¢«è°ƒç”¨ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œhandler ä»£ç ä¼šåœ¨æ¯æ¬¡è¯·æ±‚è¿›æ¥æ—¶è¢«è°ƒç”¨æ‰§è¡Œã€‚è¦æ³¨æ„çš„æ˜¯ï¼ŒHandler å¹¶ä¸ä¼šè¿”å›ä¸€ä¸ªç»“æœï¼Œä½†æ˜¯å®ƒå¯ä»¥æä¾›ä¸€ä¸ªç»“æœï¼›è¿™ä¸ªç»“æœæ˜¯æ€æ ·è¢«æä¾›çš„ï¼Œè¿™ä¸ªè¦çœ‹æ˜¯å“ªç§äº¤äº’è¡Œä¸ºã€‚åœ¨ä¸Šé¢çš„ä»£ç æ®µä¸­ï¼Œå®ƒåªæ˜¯å‘ä¸€ä¸ª HTTP response å†™å…¥äº†ç»“æœã€‚è¿™ä¸ª Handler åé¢è·Ÿäº†ä¸€ä¸ªæ–¹æ³•ä»¤å…¶ç›‘å¬ 8080 ç«¯å£ã€‚è°ƒç”¨è¿™ä¸ª HTTP æœåŠ¡å®ƒä¼šè¿”å›ä¸€ä¸ªç®€å•çš„ responseã€‚\nevent loop ç»å¤§å¤šæ•°æƒ…å†µï¼ŒVert.x ä¼šç”¨ä¸€ä¸ªå«åš event loop çš„çº¿ç¨‹æ¥è°ƒç”¨æ‰€æœ‰çš„ handlerã€‚\nåŸºäºæ¶ˆæ¯å¾ªç¯çš„çº¿ç¨‹æ¨¡å‹æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜ç‚¹ï¼šå®ƒç®€åŒ–äº†å¹¶å‘ã€‚å› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹å­˜åœ¨ï¼Œå› æ­¤æ°¸è¿œéƒ½åªè¢«ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è€Œä¸å­˜åœ¨å¹¶å‘çš„æƒ…å†µã€‚ä½†æ˜¯åŒæ ·ä¹Ÿæœ‰ä¸€ä¸ªé™åˆ¶ï¼š\n ä¸è¦é˜»å¡æ¶ˆæ¯å¾ªç¯\n å› ä¸ºæ²¡æœ‰é˜»å¡ï¼Œä¸€ä¸ªæ¶ˆæ¯å¾ªç¯çº¿ç¨‹å¯ä»¥çŸ­æ—¶é—´å†…åˆ†å‘å·¨é‡çš„äº‹ä»¶ï¼Œè¿™ä¸ªæ¨¡å¼å°±å«åš reactor æ¨¡å¼ã€‚\nverticles Verticles æ˜¯è¢« Vert.x éƒ¨ç½²å’Œè¿è¡Œçš„ä»£ç å—ã€‚ä¸€ä¸ªå¾®æœåŠ¡çš„åº”ç”¨ï¼Œæ˜¯ç”±è¿è¡Œåœ¨åŒä¸€ä¸ª Vert.x å®ä¾‹ä¸Šçš„è‹¥å¹² verticle ç»„æˆçš„ã€‚ä¸€ä¸ª verticle é€šå¸¸ä¼šåˆ›å»ºæœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ã€æ³¨å†Œä¸€ç»„ Handlerï¼Œä»¥åŠå°è£…ä¸€éƒ¨åˆ†ç³»ç»Ÿçš„ä¸šåŠ¡å¤„ç†é€»è¾‘ã€‚\næ ‡å‡†çš„ verticle æ ‡å‡†çš„ verticle ä¼šåœ¨ Vert.x çš„æ¶ˆæ¯å¾ªç¯ä¸­è¢«æ‰§è¡Œï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šé˜»å¡ã€‚Vert.x ä¿è¯äº†æ¯ä¸€ä¸ª verticle éƒ½ä¼šåªè¢«åŒä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè€Œä¸ä¼šæœ‰å¹¶å‘å‘ç”Ÿï¼Œä»è€Œé¿å…åŒæ­¥å·¥ä½œã€‚\nWorker Verticle å’Œæ ‡å‡†çš„ verticle ä¸åŒï¼Œworker verticle ä¸æ˜¯åœ¨æ¶ˆæ¯å¾ªç¯ä¸­æ‰§è¡Œçš„ï¼Œè¿™å°±æ„å‘³ç€ä»–ä»¬å¯ä»¥æ‰§è¡Œé˜»å¡ä»£ç ã€‚ä½†æ˜¯ï¼Œè¿™ä¼šé™åˆ¶ä½ çš„å¯æ‰©å±•æ€§ã€‚\nVerticle å¯ä»¥è®¿é—® vertx æˆå‘˜å˜é‡(æ˜¯ç”± AbstractVerticle ç±»æä¾›çš„)æ¥åˆ›å»ºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼Œä»¥åŠå’Œå…¶ä»–çš„ verticle äº¤äº’ã€‚Verticle è¿˜å¯ä»¥éƒ¨ç½²å…¶ä»–çš„ verticleï¼Œå¯¹å®ƒä»¬è¿›è¡Œé…ç½®ï¼Œå¹¶è®¾ç½®åˆ›å»ºå®ä¾‹çš„æ•°é‡ã€‚è¿™äº›å®ä¾‹ä¼šå’Œä¸åŒçš„æ¶ˆæ¯å¾ªç¯çº¿ç¨‹ç»‘å®šï¼ŒVert.x é€šè¿‡è¿™äº›å®ä¾‹æ¥å‡è¡¡è´Ÿè½½ã€‚\nä» Callbacks åˆ° Observables æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒVert.x å¼€å‘æ¨¡å¼ä½¿ç”¨å›è°ƒæ–¹æ³•ã€‚åœ¨ç»„ç»‡ç®¡ç†å¤šä¸ªå¼‚æ­¥åŠ¨ä½œæ—¶ï¼Œè¿™ç§åŸºäºå›è°ƒçš„å¼€å‘æ¨¡å¼å®¹æ˜“äº§ç”Ÿå¤æ‚çš„ä»£ç ï¼Œé™·å…¥ callback hellã€‚\nVert.x æä¾›äº†è§£å†³è¿™ä¸ªå¼€å‘éš¾é¢˜çš„ç­”æ¡ˆâ€”â€”RxJava APIã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/reactive%E5%BE%AE%E6%9C%8D%E5%8A%A1/","summary":"Reactive å¾®æœåŠ¡ åˆ†å¸ƒå¼ç³»ç»Ÿæ„å»ºèµ·æ¥å¾ˆå›°éš¾ï¼Œå› ä¸ºå®ƒä»¬å®¹æ˜“å‡ºé—®é¢˜ï¼Œè¿è¡Œç¼“æ…¢ï¼Œå¹¶ä¸”è¢« CAP å’Œ FLP ç†è®ºæ‰€é™åˆ¶ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬çš„æ„å»ºå’Œè¿ç»´éƒ½ç‰¹åˆ«å¤æ‚ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œreactive ä¾¿å‡ºç°äº†ã€‚\nReactive ç¼–ç¨‹ï¼šä¸€ç§å¼€å‘æ¨¡å‹ï¼Œå…¶ä¸“æ³¨äºæ•°æ®æµå‘ã€å¯¹å˜åŒ–çš„åé¦ˆï¼Œä»¥åŠä¼ æ’­ä»–ä»¬ã€‚\nåœ¨ reactive ç¼–ç¨‹ä¸­ï¼Œåˆºæ¿€ä¿¡å·æ˜¯æ•°æ®çš„è½¬ç§»ï¼Œå«åš streamsã€‚å…¶å®å¾ˆåƒç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…æ¨¡å¼ï¼Œæ¶ˆè´¹è€…å¯¹å€¼è¿›è¡Œè®¢é˜…å¹¶å“åº”ã€‚\nReactive ç³»ç»Ÿï¼šä¸€ç§æ¶æ„é£æ ¼ï¼Œå…¶åŸºäºå¼‚æ­¥æ¶ˆæ¯æ¥æ„å»ºå“åº”å¼çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚\nreactive ç³»ç»Ÿä½¿ç”¨äº†æ¶ˆæ¯é©±åŠ¨çš„æ–¹æ³•ã€‚æ‰€æœ‰çš„æ„å»ºé€šè¿‡å¼‚æ­¥æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶æ¥äº¤äº’ã€‚æ¶ˆæ¯æŠ•é€’çš„é€»è¾‘ç”±åº•å±‚çš„å®ç°å†³å®šã€‚å‘é€è€…ä¸ä¼šé˜»å¡ç€ç­‰å¾…å›å¤ï¼Œå®ƒä»¬å¯èƒ½ä¼šç¨åæ‰æ¥æ”¶åˆ°å›å¤ã€‚\nreactive ç³»ç»Ÿä¼šæœ‰ä¸¤ä¸ªé‡è¦çš„ç‰¹å¾ï¼š\n  ä¼¸ç¼©æ€§â€”â€”å¯ä»¥æ¨ªå‘ä¼¸ç¼©\nä¼¸ç¼©æ€§æ¥è‡ªæ¶ˆæ¯ä¼ é€’çš„è§£è€¦ã€‚æ¶ˆæ¯è¢«å‘é€åˆ°ä¸€ä¸ªåœ°å€ä¹‹åï¼Œå¯ä»¥è¢«ä¸€ç»„æ¶ˆè´¹è€…æŒ‰ç…§ä¸€ç§è´Ÿè½½å‡è¡¡æ–¹æ³•æ¶ˆè´¹ã€‚å½“ reactive ç³»ç»Ÿé‡åˆ°è´Ÿè½½é«˜å³°æ—¶ï¼Œå®ƒå¯ä»¥åˆ›é€ å‡ºæ–°çš„æ¶ˆè´¹è€…ï¼Œå¹¶åœ¨æ­¤ä¹‹åé”€æ¯å®ƒä»¬ã€‚\n  æ¢å¤æ€§â€”â€”å¯ä»¥å¤„ç†é”™è¯¯å¹¶ä¸”æ¢å¤\né¦–å…ˆï¼Œè¿™ç§æ¶ˆæ¯äº¤äº’æ¨¡å¼å…è®¸ç»„ä»¶åœ¨å…¶æœ¬åœ°å¤„ç†é”™è¯¯ï¼Œç»„ä»¶ä¸éœ€è¦ç­‰å¾…æ¶ˆæ¯ï¼Œå› æ­¤å½“ä¸€ä¸ªç»„ä»¶å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå…¶ä»–ç»„ä»¶ä»ç„¶ä¼šæ­£å¸¸å·¥ä½œã€‚å…¶æ¬¡ï¼Œå½“ä¸€ä¸ªå¤„ç†æ¶ˆæ¯çš„ç»„ä»¶å‘ç”Ÿé”™è¯¯åï¼Œæ¶ˆæ¯å¯ä»¥å¯ä»¥ä¼ é€’ç»™åœ¨ç›¸åŒåœ°å€æ³¨å†Œçš„å…¶ä»–ç»„ä»¶ã€‚\n  reactive å¾®æœåŠ¡ç³»ç»Ÿæ˜¯ç”± reactive å¾®æœåŠ¡ç»„æˆçš„ã€‚è¿™äº›å¾®æœåŠ¡æœ‰ä¸‹é¢å››ä¸ªç‰¹å¾ï¼š\n è‡ªæ²»æ€§ å¼‚æ­¥æ€§ æ¢å¤æ€§ ä¼¸ç¼©æ€§  Reactive å¾®æœåŠ¡æ˜¯å¯è‡ªæ²»çš„ã€‚ä»–ä»¬å¯ä»¥æ ¹æ®å‘¨å›´çš„æœåŠ¡æ˜¯å¦å¯ç”¨æ¥è°ƒæ•´è‡ªå·±çš„è¡Œä¸ºã€‚è‡ªæ²»æ€§å¾€å¾€ä¼´éšç€å­¤ç«‹æ€§ï¼›Reactive å¾®æœåŠ¡å¯ä»¥åœ¨æœ¬åœ°å¤„ç†é”™è¯¯ã€ç‹¬ç«‹åœ°å®Œæˆä»»åŠ¡ï¼Œå¹¶åœ¨å¿…è¦æ—¶å’Œå…¶ä»–æœåŠ¡åˆä½œã€‚å®ƒä»¬ä½¿ç”¨å¼‚æ­¥æ¶ˆæ¯ä¼ é€’çš„æœºåˆ¶å’Œå…¶ä»–æœåŠ¡æ²Ÿé€šï¼›å®ƒä»¬ä¹Ÿä¼šæ¥æ”¶æ¶ˆæ¯å¹¶ä¸”å¯¹å…¶ä½œå‡ºå›åº”ã€‚\nå¾—ç›Šäºå¼‚æ­¥æ¶ˆæ¯æœºåˆ¶ï¼Œreactive å¾®æœåŠ¡å¯ä»¥å¤„ç†é”™è¯¯å¹¶æ ¹æ®æƒ…å†µè°ƒæ•´è‡ªå·±çš„è¡Œä¸ºã€‚é”™è¯¯ä¸ä¼šè¢«æ‰©æ•£ï¼Œè€Œæ˜¯åœ¨é è¿‘é”™è¯¯æºå¤´çš„åœ°æ–¹è¢«å¤„ç†æ‰ã€‚å½“ä¸€ä¸ªå¾®æœåŠ¡æŒ‚æ‰ä¹‹åï¼Œå®ƒçš„æ¶ˆè´¹è€…å¾®æœåŠ¡è¦èƒ½å¤Ÿå¤„ç†é”™è¯¯å¹¶é¿å…æ‰©æ•£ã€‚è¿™ä¸€å­¤ç«‹åŸåˆ™æ˜¯é¿å…é”™è¯¯é€å±‚ä¸Šæµ®è€Œæ¯æ‰æ•´ä¸ªç³»ç»Ÿçš„å…³é”®ã€‚å¯æ¢å¤æ€§ä¸åªæ˜¯å…³äºå¤„ç†é”™è¯¯ï¼Œå®ƒè¿˜æ¶‰åŠåˆ°è‡ªæ„ˆæ€§ï¼›ä¸€ä¸ª reactive å¾®æœåŠ¡åº”è¯¥èƒ½å¤Ÿä»é”™è¯¯ä¸­æ¢å¤å¹¶ä¸”å¯¹é”™è¯¯è¿›è¡Œè¡¥æ•‘ã€‚\næœ€åï¼Œreactive å¾®æœåŠ¡å¿…é¡»æ˜¯å¯ä¼¸ç¼©çš„ï¼Œè¿™æ ·ç³»ç»Ÿæ‰å¯ä»¥æ ¹æ®è´Ÿè½½æƒ…å†µæ¥è°ƒæ•´èŠ‚ç‚¹æ•°é‡ã€‚è¿™ä¸€ç‰¹æ€§æ„å‘³ç€å°†ä¼šæœ‰ä¸€ç³»åˆ—çš„é™åˆ¶ï¼Œæ¯”å¦‚ä¸èƒ½æœ‰åœ¨å†…å­˜ä¸­çš„çŠ¶æ€ï¼Œè¦èƒ½å¤Ÿåœ¨å¿…è¦æ—¶åŒæ­¥çŠ¶æ€ä¿¡æ¯ï¼Œæˆ–è€…è¦èƒ½å¤Ÿå°†æ¶ˆæ¯è·¯ç”±åˆ°çŠ¶æ€ä¿¡æ¯ç›¸åŒçš„èŠ‚ç‚¹ã€‚\nVert.x Vert.x æ˜¯ä¸€ä¸ªç”¨äºæ„å»º reactive å’Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„å·¥å…·ç®±ï¼Œå…¶ä½¿ç”¨äº†å¼‚æ­¥éé˜»å¡ç¼–ç¨‹æ¨¡å‹ã€‚å½“ä½¿ç”¨ Vert.x æ„å»ºå¾®æœåŠ¡çš„æ—¶å€™ï¼Œå¾®æœåŠ¡ä¼šè‡ªç„¶åœ°å¸¦ä¸Šä¸€ä¸ªæ ¸å¿ƒç‰¹å¾ï¼šæ‰€æœ‰äº‹æƒ…éƒ½æ˜¯å¼‚æ­¥çš„ã€‚\nä¼ ç»Ÿç¼–ç¨‹æ¨¡å¼\nint res = compute(1, 2); åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæ˜¯åœ¨ç­‰å¾… compute å‡½æ•°è®¡ç®—å‡ºæ¥ç»“æœä¹‹åå†è¿›è¡Œå‰©ä¸‹çš„æ“ä½œã€‚è€Œåœ¨å¼‚æ­¥éé˜»å¡çš„ç¼–ç¨‹æ¨¡å¼ä¸­ï¼Œå°†ä¼šåˆ›å»ºä¸€ä¸ª handlerï¼š\ncompute(1, 2, res -\u0026gt; {  // called with the result }); åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œcompute å‡½æ•°ä¸å†è¿”å›ä¸€ä¸ªç»“æœï¼Œè€Œæ˜¯ä¼ ä¸€ä¸ª handlerï¼Œå½“ç»“æœå‡†å¤‡å¥½æ—¶è°ƒç”¨å°±å¯ä»¥äº†ã€‚å¾—ç›Šäºè¿™ç§å¼€å‘æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨å¾ˆå°‘çš„çº¿ç¨‹å»å¤„ç†é«˜å¹¶å‘å·¥ä½œã€‚åœ¨ vert.","title":"Reactive å¾®æœåŠ¡"},{"content":"Guice å¿«é€Ÿå…¥é—¨ æ¥æ‰‹çš„æ–°é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨ kotlin+vert.x æ¥å†™çš„ï¼Œä½¿ç”¨ gradle æ„å»ºï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨äº† guiceã€‚è¿™æ®µæ—¶é—´éƒ½æ˜¯åœ¨ç†Ÿæ‚‰ä»£ç çš„è¿‡ç¨‹ï¼Œæ¶è¡¥ä¸€äº›çŸ¥è¯†ã€‚\nguice æ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå½“ç„¶ spring ä¹Ÿå¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œåªæ˜¯ spring å¤ªåºå¤§äº†ã€‚\n1 åŸºæœ¬ä½¿ç”¨ å¼•å…¥ä¾èµ– ä½¿ç”¨ gradle æˆ–è€… mavenï¼Œå¼•å…¥ guiceã€‚\nmaven:\n\u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;com.google.inject\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;guice\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;4.1.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; Gradle:\ncompile \u0026#34;com.google.inject:guice:4.1.0\u0026#34; é¡¹ç›®éª¨æ¶ é¦–å…ˆéœ€è¦ä¸€ä¸ªä¸šåŠ¡æ¥å£ï¼ŒåŒ…å«ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå®ƒçš„å®ç°éå¸¸ç®€å•ï¼š\npackage com.learning.guice; public interface UserService {  void process(); }   package com.learning.guice; public class UserServiceImpl implements UserService {  @Override  public void process() {  System.out.println(\u0026#34;æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘\u0026#34;);  } } ç„¶åå†™ä¸€ä¸ªæ—¥å¿—çš„æ¥å£ï¼š\npackage com.learning.guice; public interface LogService {  void log(String msg); }  package com.learning.guice; public class LogServiceImpl implements LogService {  @Override  public void log(String msg) {  System.out.println(\u0026#34;------LOG: \u0026#34; + msg);  } } æœ€åæ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å£å’Œç›¸åº”çš„å®ç°ï¼Œåœ¨å®ç°ä¸­ä½¿ç”¨äº†ä¸šåŠ¡æ¥å£å’Œæ—¥å¿—æ¥å£å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ‰“å°æ—¥å¿—ä¿¡æ¯ï¼š\npackage com.learning.guice; public interface Application {  void work(); }   package com.learning.guice; import com.google.inject.Inject; public class MyApp implements Application {  private UserService userService;  private LogService logService;   @Inject  public MyApp(UserService userService, LogService logService) {  this.userService = userService;  this.logService = logService;  }   @Override  public void work() {  userService.process();  logService.log(\u0026#34;ç¨‹åºæ­£å¸¸è¿è¡Œ\u0026#34;);  } } é…ç½®ä¾èµ–æ³¨å…¥ guice æ˜¯ä½¿ç”¨ java ä»£ç æ¥é…ç½®ä¾èµ–ã€‚ç»§æ‰¿ AbstractModule ç±»ï¼Œå¹¶é‡å†™å…¶ä¸­çš„ config æ–¹æ³•ã€‚åœ¨ config æ–¹æ³•ä¸­ï¼Œè°ƒç”¨ AbstractModule ç±»ä¸­æä¾›çš„æ–¹æ³•æ¥é…ç½®ä¾èµ–å…³ç³»ã€‚æœ€å¸¸ç”¨çš„æ˜¯ bind(æ¥å£).to(å®ç°ç±»)ã€‚\npackage com.learning.guice;  import com.google.inject.AbstractModule;  public class MyAppModule extends AbstractModule {   @Override  protected void configure() {  bind(LogService.class).to(LogServiceImpl.class);  bind(UserService.class).to(UserServiceImpl.class);  bind(Application.class).to(MyApp.class);  } } å•å…ƒæµ‹è¯• guice é…ç½®å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨ Guice.createInjector æ–¹æ³•ä¼ å…¥é…ç½®ç±»æ¥åˆ›å»ºä¸€ä¸ªæ³¨å…¥å™¨ï¼Œç„¶åä½¿ç”¨æ³¨å…¥å™¨ä¸­çš„ getInstance æ–¹æ³•è·å–ç›®æ ‡ç±»ã€‚\npackage com.learning.guice;  import com.google.inject.Guice; import com.google.inject.Injector; import org.junit.BeforeClass; import org.junit.Test;  public class MyAppTest {  private static Injector injector;   @BeforeClass  public static void init(){  injector= Guice.createInjector(new MyAppModule());  }   @Test  public void testMyApp(){  Application application=injector.getInstance(Application.class);  application.work();  } } ç¨‹åºæ‰§è¡Œç»“æœæ˜¯ï¼š\n/Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/bin/java -ea -... æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘ ------LOG: ç¨‹åºæ­£å¸¸è¿è¡Œ  Process finished with exit code 0 2 åŸºæœ¬æ¦‚å¿µ 2.1 Bingdings ç»‘å®š   é“¾å¼ç»‘å®š\nåœ¨ç»‘å®šä¾èµ–çš„æ—¶å€™ä¸ä»…å¯ä»¥å°†çˆ¶ç±»å’Œå­ç±»ç»‘å®šï¼Œè¿˜å¯ä»¥å°†å­ç±»å’Œå­ç±»çš„å­ç±»è¿›è¡Œç»‘å®šã€‚\npublic class BillingModule extends AbstractModule {  @Override  protected void configure() {  bind(TransactionLog.class).to(DatabaseTransactionLog.class);  bind(DatabaseTransactionLog.class).to(MySqlDatabaseTransactionLog.class);  } } åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œinjector ä¼šæŠŠæ‰€æœ‰ TransactionLog æ›¿æ¢ä¸º MySqlDatabaseTransactionLogã€‚\n  æ³¨è§£ç»‘å®š\nå½“æˆ‘ä»¬éœ€è¦å°†å¤šä¸ªåŒä¸€ç±»å‹çš„å¯¹è±¡æ³¨å…¥ä¸åŒå¯¹è±¡çš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨æ³¨è§£åŒºåˆ†è¿™äº›ä¾èµ–äº†ã€‚æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ä½¿ç”¨@Named æ³¨è§£è¿›è¡ŒåŒºåˆ†ã€‚\né¦–å…ˆéœ€è¦åœ¨è¦æ³¨å…¥çš„åœ°æ–¹æ·»åŠ @Named æ³¨è§£ã€‚\npublic class RealBillingService implements BillingService {   @Inject  public RealBillingService(@Named(\u0026#34;Checkout\u0026#34;) CreditCardProcessor processor,  TransactionLog transactionLog) {  ...  } ç„¶ååœ¨ç»‘å®šä¸­æ·»åŠ  annotatedWith æ–¹æ³•æŒ‡å®š@Named ä¸­æŒ‡å®šçš„åç§°ã€‚ç”±äºç¼–è¯‘å™¨æ— æ³•æ£€æŸ¥å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ Guice å®˜æ–¹å»ºè®®æˆ‘ä»¬ä¿å®ˆåœ°ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚\nbind(CreditCardProcessor.class)  .annotatedWith(Names.named(\u0026#34;Checkout\u0026#34;))  .to(CheckoutCreditCardProcessor.class);   å®ä¾‹ç»‘å®š\næœ‰æ—¶å€™éœ€è¦ç›´æ¥æ³¨å…¥ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ä»ä¾èµ–å…³ç³»ä¸­è§£æã€‚å¦‚æœæˆ‘ä»¬è¦æ³¨å…¥åŸºæœ¬ç±»å‹çš„è¯åªèƒ½è¿™ä¹ˆåšã€‚\nbind(String.class)  .annotatedWith(Names.named(\u0026#34;JDBC URL\u0026#34;))  .toInstance(\u0026#34;jdbc:mysql://localhost/pizza\u0026#34;); bind(Integer.class)  .annotatedWith(Names.named(\u0026#34;login timeout seconds\u0026#34;))  .toInstance(10);   @Privides æ–¹æ³•\nå½“ä¸€ä¸ªå¯¹è±¡å¾ˆå¤æ‚ï¼Œæ— æ³•ä½¿ç”¨ç®€å•çš„æ„é€ å™¨æ¥ç”Ÿæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Provides æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯åœ¨é…ç½®ç±»ä¸­ç”Ÿæˆä¸€ä¸ªæ³¨è§£äº†@Provides çš„æ–¹æ³•ã€‚åœ¨è¯¥æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥ç¼–å†™ä»»æ„ä»£ç æ¥æ„é€ å¯¹è±¡ã€‚\n@Provides æ–¹æ³•ä¹Ÿå¯ä»¥åº”ç”¨@Named å’Œè‡ªå®šä¹‰æ³¨è§£ï¼Œè¿˜å¯ä»¥æ³¨å…¥å…¶ä»–ä¾èµ–ï¼ŒGuice ä¼šåœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰æ³¨å…¥éœ€è¦çš„å¯¹è±¡ã€‚\npublic class BillingModule extends AbstractModule {  @Override  protected void configure() {  ...  }   @Provides  TransactionLog provideTransactionLog() {  DatabaseTransactionLog transactionLog = new DatabaseTransactionLog();  transactionLog.setJdbcUrl(\u0026#34;jdbc:mysql://localhost/pizza\u0026#34;);  transactionLog.setThreadPoolSize(30);  return transactionLog;  } }   Provider ç»‘å®š\nå¦‚æœé¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªæ¯”è¾ƒå¤æ‚çš„å¯¹è±¡éœ€è¦æ„å»ºï¼Œä½¿ç”¨@Provide æ–¹æ³•ä¼šè®©é…ç½®ç±»å˜å¾—æ¯”è¾ƒä¹±ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Guice æä¾›çš„ Provider æ¥å£å°†å¤æ‚çš„ä»£ç æ”¾åˆ°å•ç‹¬çš„ç±»ä¸­ã€‚åŠæ³•å¾ˆç®€å•ï¼Œå®ç° Provideræ¥å£çš„ get æ–¹æ³•å³å¯ã€‚åœ¨ Provider ç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Inject ä»»æ„æ³¨å…¥å¯¹è±¡ã€‚\npublic class DatabaseTransactionLogProvider implements Provider\u0026lt;TransactionLog\u0026gt; {  private final Connection connection;   @Inject  public DatabaseTransactionLogProvider(Connection connection) {  this.connection = connection;  }   public TransactionLog get() {  DatabaseTransactionLog transactionLog = new DatabaseTransactionLog();  transactionLog.setConnection(connection);  return transactionLog;  } } ç„¶ååœ¨ config æ–¹æ³•ä¸­ï¼Œè°ƒç”¨.toProvider æ–¹æ³•ï¼š\npublic class BillingModule extends AbstractModule {  @Override  protected void configure() {  bind(TransactionLog.class)  .toProvider(DatabaseTransactionLogProvider.class);  } }   æ— ç›®æ ‡ç»‘å®š\næ— ç›®æ ‡ç»‘å®šæ²¡æœ‰ to å­å¥\n  æ„é€ å™¨ç»‘å®š\næŸäº›åœºæ™¯ä¸‹ï¼Œä½ èƒ½éœ€è¦æŠŠæŸä¸ªç±»å‹ç»‘å®šåˆ°ä»»æ„ä¸€ä¸ªæ„é€ å‡½æ•°ä¸Šã€‚ä»¥ä¸‹æƒ…å†µä¼šæœ‰è¿™ç§éœ€æ±‚ï¼š1ã€ @Inject æ³¨è§£æ— æ³•è¢«åº”ç”¨åˆ°ç›®æ ‡æ„é€ å‡½æ•°ï¼›2ã€ç›®æ ‡ç±»æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»ï¼›3ã€ç›®æ ‡ç±»æœ‰å¤šä¸ªæ„é€ å‡½æ•°å‚ä¸ DIã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œguice æä¾›äº† toConstructor()ç»‘å®š ï¼Œå®ƒéœ€è¦ä½ æŒ‡å®šè¦ä½¿ç”¨çš„ç¡®åˆ‡çš„æŸä¸ªç›®æ ‡æ„é€ å‡½æ•°ï¼Œå¹¶å¤„ç† \u0026ldquo;constructor annot be found\u0026rdquo; å¼‚å¸¸ï¼š\npublic class BillingModule extends AbstractModule {  @Override  protected void configure() {  try {  bind(TransactionLog.class).toConstructor(  DatabaseTransactionLog.class.getConstructor(DatabaseConnection.class));  } catch (NoSuchMethodException e) {  addError(e);  }  } }   å†…ç½®ç»‘å®š\né™¤äº†æ˜¾ç¤ºç»‘å®šå’Œå³æ—¶ç»‘å®š just-in-time bindingsï¼Œå‰©ä¸‹çš„ç»‘å®šéƒ½å±äº injector çš„å†…ç½®ç»‘å®šã€‚è¿™äº›ç»‘å®šåªèƒ½ç”± injector è‡ªå·±åˆ›å»ºï¼Œä¸å…è®¸å¤–éƒ¨è°ƒç”¨ã€‚\n  å³æ—¶ç»‘å®š\nå½“ injector éœ€è¦æŸä¸€ä¸ªç±»å‹çš„å®ä¾‹çš„æ—¶å€™ï¼Œå®ƒéœ€è¦è·å–ä¸€ä¸ªç»‘å®šã€‚åœ¨ Module ç±»ä¸­çš„ç»‘å®šå«åšæ˜¾å¼ç»‘å®šï¼Œåªè¦ä»–ä»¬å¯ç”¨ï¼Œinjector å°±ä¼šåœ¨ä»»ä½•æ—¶å€™ä½¿ç”¨å®ƒä»¬ã€‚å¦‚æœéœ€è¦æŸä¸€ç±»å‹çš„å®ä¾‹ï¼Œä½†æ˜¯åˆæ²¡æœ‰æ˜¾å¼ç»‘å®šï¼Œé‚£ä¹ˆ injector å°†ä¼šè¯•å›¾åˆ›å»ºä¸€ä¸ªå³æ—¶ç»‘å®šï¼ˆJust-in-time Bindingsï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º JIT ç»‘å®š æˆ– éšå¼ç»‘å®šã€‚\n  2.2 ä½œç”¨åŸŸ é»˜è®¤æƒ…å†µä¸‹ Guice ä¼šåœ¨æ¯æ¬¡æ³¨å…¥çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚å¦‚æœå¸Œæœ›åˆ›å»ºä¸€ä¸ªå•ä¾‹ä¾èµ–çš„è¯ï¼Œå¯ä»¥åœ¨å®ç°ç±»ä¸Šåº”ç”¨@Singleton æ³¨è§£ã€‚\n@Singleton public class InMemoryTransactionLog implements TransactionLog {  /* everything here should be threadsafe! */ } æˆ–è€…ä¹Ÿå¯ä»¥åœ¨é…ç½®ç±»ä¸­æŒ‡å®šã€‚\nbind(TransactionLog.class).to(InMemoryTransactionLog.class).in(Singleton.class); åœ¨@Providesæ–¹æ³•ä¸­ä¹Ÿå¯ä»¥æŒ‡å®šå•ä¾‹ã€‚\n@Provides @Singleton  TransactionLog provideTransactionLog() {  ...  } å¦‚æœä¸€ä¸ªç±»å‹ä¸Šå­˜åœ¨å¤šä¸ªå†²çªçš„ä½œç”¨åŸŸï¼ŒGuice ä¼šä½¿ç”¨ bind()æ–¹æ³•ä¸­æŒ‡å®šçš„ä½œç”¨åŸŸã€‚å¦‚æœä¸æƒ³ä½¿ç”¨æ³¨è§£çš„ä½œç”¨åŸŸï¼Œå¯ä»¥åœ¨ bind()æ–¹æ³•ä¸­å°†å¯¹è±¡ç»‘å®šä¸º Scopes.NO_SCOPEã€‚\nGuice å’Œå®ƒçš„æ‰©å±•æä¾›äº†å¾ˆå¤šä½œç”¨åŸŸï¼Œå’Œ spring ä¸€æ ·ï¼Œæœ‰å•ä¾‹ Singletonï¼ŒSession ä½œç”¨åŸŸ SessionScopedï¼ŒRequest è¯·æ±‚ä½œç”¨åŸŸ RequestScoped ç­‰ç­‰ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸã€‚\n2.3 æ³¨å…¥ guice çš„æ³¨å…¥å’Œ spring ç±»ä¼¼ï¼Œè€Œä¸”è¿˜åšäº†ä¸€äº›æ‰©å±•ã€‚\n  æ„é€ å™¨æ³¨å…¥\nä½¿ç”¨ @Inject æ³¨è§£æ ‡è®°ç±»çš„æ„é€ æ–¹æ³•ï¼Œè¿™ä¸ªæ„é€ æ–¹æ³•éœ€è¦æ¥å—ç±»ä¾èµ–ä½œä¸ºå‚æ•°ã€‚å¤§å¤šæ•°æ„é€ å­å°†ä¼šæŠŠæ¥æ”¶åˆ°çš„å‚æ•°åˆ†æ´¾ç»™å†…éƒ¨æˆå‘˜å˜é‡ã€‚\n  æ–¹æ³•æ³¨å…¥\nGuice å¯ä»¥å‘æ ‡æ³¨äº† @Inject çš„æ–¹æ³•ä¸­æ³¨å…¥ä¾èµ–ã€‚ä¾èµ–é¡¹ä»¥å‚æ•°çš„å½¢å¼ä¼ ç»™æ–¹æ³•ï¼ŒGuice ä¼šåœ¨è°ƒç”¨æ³¨å…¥æ–¹æ³•å‰å®Œæˆä¾èµ–é¡¹çš„æ„å»ºã€‚æ³¨å…¥æ–¹æ³•å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå¹¶ä¸”æ–¹æ³•åå¯¹æ³¨å…¥æ“ä½œä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚\n  å­—æ®µæ³¨å…¥\nä½¿ç”¨ @Inject æ³¨è§£æ ‡è®°å­—æ®µã€‚è¿™æ˜¯æœ€ç®€æ´çš„æ³¨å…¥æ–¹å¼ã€‚\næ³¨æ„ï¼šä¸èƒ½ç»™ final å­—æ®µåŠ @Inject æ³¨è§£ã€‚\n  å¯é€‰æ³¨å…¥\næœ‰çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦ä¸€ä¸ªä¾èµ–é¡¹å­˜åœ¨åˆ™è¿›è¡Œæ³¨å…¥ï¼Œä¸å­˜åœ¨åˆ™ä¸æ³¨å…¥ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨æ–¹æ³•æ³¨å…¥æˆ–å­—æ®µæ³¨å…¥æ¥åšè¿™ä»¶äº‹ï¼Œå½“ä¾èµ–é¡¹ä¸å¯ç”¨çš„æ—¶å€™ Guice å°±ä¼šå¿½ç•¥è¿™äº›æ³¨å…¥ã€‚å¦‚æœä½ éœ€è¦é…ç½®å¯é€‰æ³¨å…¥çš„è¯ï¼Œä½¿ç”¨ @Inject(optional = true) æ³¨è§£å°±å¯ä»¥äº†ã€‚\n  æŒ‰éœ€æ³¨å…¥\næ–¹æ³•æ³¨å…¥å’Œå­—æ®µæ³¨å…¥å¯ä»¥å¯ä»¥ç”¨æ¥åˆå§‹åŒ–ç°æœ‰å®ä¾‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ Injector.injectMembersã€‚\nè¿™ä¸ªä¸å¸¸ç”¨ã€‚\n  é™æ€æ³¨å…¥\nä¸å»ºè®®ä½¿ç”¨é™æ€æ³¨å…¥ã€‚\n  è‡ªåŠ¨æ³¨å…¥\nGuice ä¼šå¯¹ä»¥ä¸‹æƒ…å½¢åšè‡ªåŠ¨æ³¨å…¥ï¼š\n åœ¨ç»‘å®šè¯­å¥é‡Œï¼Œé€šè¿‡ toInstance() æ³¨å…¥å®ä¾‹ã€‚ åœ¨ç»‘å®šè¯­å¥é‡Œï¼Œé€šè¿‡ toProvider() æ³¨å…¥ Provider å®ä¾‹ã€‚è¿™äº›å¯¹è±¡ä¼šåœ¨æ³¨å…¥å™¨åˆ›å»ºçš„æ—¶å€™è¢«åˆ›å»ºå¹¶æ³¨å…¥å®¹å™¨ã€‚å¦‚æœå®ƒä»¬éœ€è¦æ»¡è¶³å…¶ä»–å¯åŠ¨æ³¨å…¥ï¼ŒGuice ä¼šåœ¨å®ƒä»¬è¢«ä½¿ç”¨å‰å°†ä»–ä»¬æ³¨å…¥è¿›å»ã€‚    2.4 AOP guice çš„ aop åŠŸèƒ½è¾ƒå¼±ï¼Œæ—¶é—´åŸå› è¿˜æ²¡ç ”ç©¶é€ï¼Œåç»­ç»§ç»­å†™ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/guice%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/","summary":"Guice å¿«é€Ÿå…¥é—¨ æ¥æ‰‹çš„æ–°é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨ kotlin+vert.x æ¥å†™çš„ï¼Œä½¿ç”¨ gradle æ„å»ºï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨äº† guiceã€‚è¿™æ®µæ—¶é—´éƒ½æ˜¯åœ¨ç†Ÿæ‚‰ä»£ç çš„è¿‡ç¨‹ï¼Œæ¶è¡¥ä¸€äº›çŸ¥è¯†ã€‚\nguice æ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå½“ç„¶ spring ä¹Ÿå¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œåªæ˜¯ spring å¤ªåºå¤§äº†ã€‚\n1 åŸºæœ¬ä½¿ç”¨ å¼•å…¥ä¾èµ– ä½¿ç”¨ gradle æˆ–è€… mavenï¼Œå¼•å…¥ guiceã€‚\nmaven:\n\u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;com.google.inject\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;guice\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;4.1.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; Gradle:\ncompile \u0026#34;com.google.inject:guice:4.1.0\u0026#34; é¡¹ç›®éª¨æ¶ é¦–å…ˆéœ€è¦ä¸€ä¸ªä¸šåŠ¡æ¥å£ï¼ŒåŒ…å«ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå®ƒçš„å®ç°éå¸¸ç®€å•ï¼š\npackage com.learning.guice; public interface UserService {  void process(); }   package com.learning.guice; public class UserServiceImpl implements UserService {  @Override  public void process() {  System.out.println(\u0026#34;æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘\u0026#34;);  } } ç„¶åå†™ä¸€ä¸ªæ—¥å¿—çš„æ¥å£ï¼š\npackage com.","title":"Guice å¿«é€Ÿå…¥é—¨"},{"content":"å¿«é€Ÿæµè§ˆä¸€ä¸‹ Kotlin çš„è¯­æ³•ã€‚\nåŸºæœ¬è¯­æ³• åŒ…å®šä¹‰å’Œå¼•ç”¨ åœ¨æºæ–‡ä»¶å¤´éƒ¨ï¼š\npackage my.demo import java.util.* æ–¹æ³•å®šä¹‰  å¸¦æœ‰æ–¹æ³•ä½“ï¼Œå¹¶ä¸”è¿”å›ç¡®å®šç±»å‹æ•°æ®çš„å®šä¹‰æ–¹å¼ï¼Œä¾‹å¦‚æ¥å— Int ç±»å‹çš„å‚æ•°å¹¶è¿”å› Int ç±»å‹çš„å€¼ï¼š  fun sum(a: Int, b: Int): Int {  return a + b }  å¸¦æœ‰æ–¹æ³•ä½“ï¼Œè¿”å›æ¨æ–­ç±»å‹æ•°æ®çš„å®šä¹‰æ–¹å¼ï¼Œä¾‹å¦‚ï¼š  fun sum(a: Int, b: Int) = a + b  è¿”å›æ— æ„ä¹‰ç±»å‹çš„å®šä¹‰æ–¹å¼ï¼š  fun printSum(a: Int, b: Int): Unit {  println(\u0026#34;sum of $aand $bis ${a + b}\u0026#34;) } æˆ–è€…çœç•¥ Unitï¼š\nfun printSum(a: Int, b: Int) {  println(\u0026#34;sum of $aand $bis ${a + b}\u0026#34;) } å˜é‡å®šä¹‰  åªèµ‹å€¼ä¸€æ¬¡ï¼ˆåªè¯»ï¼‰æœ¬åœ°å˜é‡ï¼Œvalï¼š  val a:Int = 1 // æŒ‡å®šåˆå§‹å€¼ val b = 2 // ç±»å‹è‡ªæ¨æ–­ä¸º `Int` val c:Int // å½“ä¸æŒ‡å®šåˆå§‹å€¼æ—¶éœ€è¦æŒ‡å®šç±»å‹ c = 3 // å»¶è¿Ÿèµ‹å€¼  å¯å˜å˜é‡ï¼Œ varï¼š  var x = 5 // ç±»å‹è‡ªæ¨æ–­ä¸º `Int` x += 1  é¡¶å±‚å˜é‡  val PI = 3.14 var x = 0  fun incrementX() {  x += 1 } æ³¨é‡Š ä¸ Java å’Œ JavaScript ä¸€æ ·ï¼ŒKotlin æ”¯æŒè¡Œå°¾æ³¨é‡Šå’Œå—æ³¨é‡Šï¼š\n// è¡Œå°¾æ³¨é‡Š /* å¤šè¡Œ å—æ³¨é‡Š */ ä¸ Java ä¸åŒï¼ŒKotlin ä¸­çš„å—æ³¨é‡Šå¯ä»¥åµŒå¥—ã€‚\nstring æ¨¡æ¿ var a = 1 val s1 = \u0026#34;a is $a\u0026#34;  a = 2 val s2 = \u0026#34;${s1.replace(\u0026#34;is\u0026#34;, \u0026#34;was\u0026#34;)}, but now is $a}\u0026#34; æ¡ä»¶è¡¨è¾¾å¼ fun maxOf(a:Int, b:Int): Int {  if (a \u0026gt; b) {  return a  } else {  return b  } } ä½¿ç”¨ if åšä¸ºè¡¨è¾¾å¼ï¼š\nfun maxOf(a:Int, b:Int) = if (a \u0026gt; b) a else b å¯èƒ½ä¸º null çš„å€¼ï¼Œæ£€æŸ¥æ˜¯å¦ä¸º null å¦‚æœå€¼å¯èƒ½ä¸º null æ—¶ï¼Œå¿…é¡»æ˜¾ç¤ºçš„æŒ‡å‡ºã€‚ ä¾‹å¦‚ï¼š\nfun parseInt(str: String): Int? {  // ... } ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„æ–¹æ³•ï¼š\nfun printProduct(arg1: String, arg2: String) {  val x = parseInt(arg1)  val y = parseInt(arg2)   if (x != null \u0026amp;\u0026amp; y != null) {  println(x * y)  } else {  println(either \u0026#39;$arg1\u0026#39; or \u0026#39;$arg2\u0026#39; is not a number) } æˆ–è€…ï¼š\nif (x == null) {  println(\u0026#34;Wrong number format in arg1: \u0026#39;$arg1\u0026#39;\u0026#34;)  return } if (y == null) {  println(\u0026#34;Wrong number format in arg2: \u0026#39;$arg2\u0026#39;\u0026#34;)  return }  println(x * y) ç±»å‹æ£€æŸ¥å’Œè‡ªåŠ¨è½¬æ¢ is æ“ä½œç¬¦ç”¨äºæ£€æŸ¥æŸä¸ªå®ä¾‹æ˜¯å¦ä¸ºæŸç§ç±»å‹ã€‚å¦‚æœä¸€ä¸ªä¸å¯å˜æœ¬åœ°å˜é‡æˆ–å±æ€§å·²ç»åšè¿‡ç±»å‹æ£€æŸ¥ï¼Œé‚£ä¹ˆå¯ä»¥ä¸å¿…æ˜¾ç¤ºçš„è¿›è¡Œç±»å‹è½¬æ¢å°±å¯ä»¥ä½¿ç”¨å¯¹åº”ç±»å‹çš„å±æ€§æˆ–æ–¹æ³•ã€‚\nfun getStringLength(obj: Any): Int? {  if (obj is String) {  return obj.length // åœ¨è¿™ä¸ªç±»å‹æ£€æŸ¥åˆ†æ”¯ä¸­ï¼Œ`obj` è‡ªåŠ¨è½¬æ¢ä¸º `String`  }   return null // åœ¨ç±»å‹æ£€æŸ¥åˆ†æ”¯å¤–ï¼Œ`obj` ä»ç„¶ä¸º `Any` } æˆ–è€…ï¼š\nfun getStringLength(obj: Any): Int? {  if (obj !is String) return null   return obj.length // åœ¨è¿™ä¸ªåˆ†æ”¯ä¸­ï¼Œ`obj` è‡ªåŠ¨è½¬æ¢ä¸º `String` } å†æˆ–è€…ï¼š\nfun getStringLength(obj: Any): Int? {  if (obj is String \u0026amp;\u0026amp; obj.length \u0026gt; 0) { // åœ¨ `\u0026amp;\u0026amp;` æ“ä½œç¬¦çš„å³ä¾§ï¼Œ`obj` è‡ªåŠ¨è½¬æ¢ä¸º `String`  return obj.length  }   return null } for å¾ªç¯ val items = listOf(\u0026#34;apple\u0026#34;, \u0026#34;banana\u0026#34;, \u0026#34;kiwi\u0026#34;) for (item in items) {  println(item) } æˆ–è€…ï¼š\nval items = listOf(\u0026#34;apple\u0026#34;, \u0026#34;banana\u0026#34;, \u0026#34;kiwi\u0026#34;) for (index in items.indices) {  println(\u0026#34;item at $indexis ${items[index]}\u0026#34;) } while å¾ªç¯ val items = listOf(\u0026#34;apple\u0026#34;, \u0026#34;banana\u0026#34;, \u0026#34;kiwi\u0026#34;) var index = 0 while (index \u0026lt; items.size) {  println(\u0026#34;item at $indexis ${items[index]}\u0026#34;)  index ++ } when è¡¨è¾¾å¼ fun describe(obj: Any): String = when (obj) {  1 -\u0026gt; \u0026#34;one\u0026#34;  \u0026#34;hello\u0026#34; -\u0026gt; \u0026#34;Greeting\u0026#34;  is Long -\u0026gt; \u0026#34;Long\u0026#34;  !is String -\u0026gt; \u0026#34;Not a String\u0026#34;  else -\u0026gt; \u0026#34;Unknown\u0026#34; } åŒºé—´  ä½¿ç”¨ in æ“ä½œç¬¦æ£€æŸ¥æ•°å­—æ˜¯å¦åœ¨åŒºé—´å†…ï¼š  val x = 10 val y = 9 if (x in 1..y+1) {  println(\u0026#34;fits in range\u0026#34;) }  æ£€æŸ¥æ•°å­—æ˜¯å¦åœ¨èŒƒå›´å¤–ï¼š  val list = listOf(\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34;)  if (-1 !in 0..list.lastIndex) {  println(\u0026#34;-1 is out of range\u0026#34;) } if (list.size !in list.indices) {  println(\u0026#34;list size is out of valid list indices range too\u0026#34;) }  åŒºé—´éå†  for (x in 1..5) {  print(x) } é›†åˆ  éå†é›†åˆï¼š  for (item in items) {  println(item) }  ä½¿ç”¨ in æ“ä½œç¬¦åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŸä¸ªå¯¹è±¡ï¼š  when {  \u0026#34;orange\u0026#34; in items -\u0026gt; println(\u0026#34;juicy\u0026#34;)  \u0026#34;apple\u0026#34; in items -\u0026gt; println(\u0026#34;apple is fine too\u0026#34;) }  ä½¿ç”¨ lambda è¡¨è¾¾å¼è¿‡æ»¤å’Œ map é›†åˆï¼š  val fruits = listOf(\u0026#34;banana\u0026#34;, \u0026#34;avocado\u0026#34;, \u0026#34;apple\u0026#34;, \u0026#34;kiwi\u0026#34;) fruits .filter {it.startWith(\u0026#34;a\u0026#34;)} .sortedBy {it} .map {it.upperCase()} .forEach {println(it)} åˆ›å»ºåŸºæœ¬ç±»å’Œå®ä¾‹ fun main(args: Array\u0026lt;String\u0026gt;) {  val rectangle = Rectangle(5.0, 2.0) // ä¸éœ€è¦ä½¿ç”¨ \u0026#39;new\u0026#39; å…³é”®è¯  val triangle = Triangle(3.0, 4.0, 5.0)  println(\u0026#34;Area of rectangle is ${rectangle.calculateArea()}, its perimeter is ${rectangle.perimeter}\u0026#34;)  println(\u0026#34;Area of triangle is ${triangle.calculateArea()}, its perimeter is ${triangle.perimeter}\u0026#34;) }  abstract class Shape(val sides: List\u0026lt;Double\u0026gt;) {  val perimeter: Double get() = sides.sum()  abstract fun calculateArea(): Double }  interface RectangleProperties {  val isSquare: Boolean }  class Rectangle(  var height: Double,  var length: Double ) : Shape(listOf(height, length, height, length)), RectangleProperties {  override val isSquare: Boolean get() = height == length  override fun calculateArea(): Double = height * length }  class Triangle(  var sideA: Double,  var sideB: Double,  var sideC: Double ) : Shape(listOf(sideA, sideB, sideC)) {  override fyb calculateArre(): Double {  val s = perimeter / 2  return Math.sqrt(s * (s - sideA) * (s - sideB) * (s - sideC))  } }  ä»¥ä¸Šå¼•è‡ªï¼š\n http://kotlinlang.org/docs/reference/basic-syntax.html\n ","permalink":"https://zhenfeng-zhu.github.io/post/kotlin%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/","summary":"å¿«é€Ÿæµè§ˆä¸€ä¸‹ Kotlin çš„è¯­æ³•ã€‚\nåŸºæœ¬è¯­æ³• åŒ…å®šä¹‰å’Œå¼•ç”¨ åœ¨æºæ–‡ä»¶å¤´éƒ¨ï¼š\npackage my.demo import java.util.* æ–¹æ³•å®šä¹‰  å¸¦æœ‰æ–¹æ³•ä½“ï¼Œå¹¶ä¸”è¿”å›ç¡®å®šç±»å‹æ•°æ®çš„å®šä¹‰æ–¹å¼ï¼Œä¾‹å¦‚æ¥å— Int ç±»å‹çš„å‚æ•°å¹¶è¿”å› Int ç±»å‹çš„å€¼ï¼š  fun sum(a: Int, b: Int): Int {  return a + b }  å¸¦æœ‰æ–¹æ³•ä½“ï¼Œè¿”å›æ¨æ–­ç±»å‹æ•°æ®çš„å®šä¹‰æ–¹å¼ï¼Œä¾‹å¦‚ï¼š  fun sum(a: Int, b: Int) = a + b  è¿”å›æ— æ„ä¹‰ç±»å‹çš„å®šä¹‰æ–¹å¼ï¼š  fun printSum(a: Int, b: Int): Unit {  println(\u0026#34;sum of $aand $bis ${a + b}\u0026#34;) } æˆ–è€…çœç•¥ Unitï¼š\nfun printSum(a: Int, b: Int) {  println(\u0026#34;sum of $aand $bis ${a + b}\u0026#34;) } å˜é‡å®šä¹‰  åªèµ‹å€¼ä¸€æ¬¡ï¼ˆåªè¯»ï¼‰æœ¬åœ°å˜é‡ï¼Œvalï¼š  val a:Int = 1 // æŒ‡å®šåˆå§‹å€¼ val b = 2 // ç±»å‹è‡ªæ¨æ–­ä¸º `Int` val c:Int // å½“ä¸æŒ‡å®šåˆå§‹å€¼æ—¶éœ€è¦æŒ‡å®šç±»å‹ c = 3 // å»¶è¿Ÿèµ‹å€¼  å¯å˜å˜é‡ï¼Œ varï¼š  var x = 5 // ç±»å‹è‡ªæ¨æ–­ä¸º `Int` x += 1  é¡¶å±‚å˜é‡  val PI = 3.","title":"kotlin å¿«é€Ÿå…¥é—¨"},{"content":"RxJava2 å¿«é€Ÿå…¥é—¨ å¼•å…¥ä¾èµ– compile \u0026#39;io.reactivex.rxjava2:rxjava:2.0.1\u0026#39; å†™æ³• ç®€å•ç‰ˆæœ¬  private static void helloSimple() {  Consumer\u0026lt;String\u0026gt; consumer = new Consumer\u0026lt;String\u0026gt;() {  @Override  public void accept(String s) throws Exception {  System.out.println(\u0026#34;consumer accept is \u0026#34; + s);  }  };   Observable.just(\u0026#34;hello world\u0026#34;).subscribe(consumer);  } å¤æ‚ç‰ˆæœ¬  private static void helloComplex() {  Observer\u0026lt;String\u0026gt; observer = new Observer\u0026lt;String\u0026gt;() {  @Override  public void onSubscribe(Disposable d) {  System.out.println(\u0026#34;onSubscribe: \u0026#34; + d);  }   @Override  public void onNext(String s) {  System.out.println(\u0026#34;onNext: \u0026#34; + s);  }   @Override  public void onError(Throwable e) {  System.out.println(\u0026#34;onError: \u0026#34; + e);  }   @Override  public void onComplete() {  System.out.println(\u0026#34;onComplete: \u0026#34;);  }  };   Observable.just(\u0026#34;Hello world\u0026#34;).subscribe(observer);  } å˜æ€ç‰ˆæœ¬  private static void helloPlus() {  Observer\u0026lt;String\u0026gt; observer = new Observer\u0026lt;String\u0026gt;() {  @Override  public void onSubscribe(Disposable d) {  System.out.println(\u0026#34;onSubscribe: \u0026#34; + d);  }   @Override  public void onNext(String s) {  System.out.println(\u0026#34;onNext: \u0026#34; + s);  }   @Override  public void onError(Throwable e) {  System.out.println(\u0026#34;onError: \u0026#34; + e);  }   @Override  public void onComplete() {  System.out.println(\u0026#34;onComplete: \u0026#34;);  }  };   Observable\u0026lt;String\u0026gt; observable = Observable.create(new ObservableOnSubscribe\u0026lt;String\u0026gt;() {  @Override  public void subscribe(ObservableEmitter\u0026lt;String\u0026gt; e) throws Exception {  e.onNext(\u0026#34;hello world\u0026#34;);  e.onComplete();  }  });   observable.subscribe(observer);  } å¸¸ç”¨æ“ä½œç¬¦ filter ä½ æ—©ä¸Šå»åƒæ—©é¤ï¼Œå¸ˆå‚…æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œè¯´å’±è¿™æœ‰\u0026quot;åŒ…å­\u0026quot;, \u0026ldquo;é¦’å¤´\u0026rdquo;, \u0026ldquo;èŠ±ç”Ÿ\u0026rdquo;, \u0026ldquo;ç‰›å¥¶\u0026rdquo;, \u0026ldquo;é¥ºå­\u0026rdquo;, \u0026ldquo;æ˜¥å·\u0026rdquo;, \u0026ldquo;æ²¹æ¡\u0026rdquo;ï¼Œä½ ä»”ç»†æƒ³äº†æƒ³ï¼Œå‘ç°ä½ æ˜¯æœ€å–œæ¬¢é¥ºå­çš„ï¼Œæ‰€ä»¥æŠŠå…¶ä»–çš„éƒ½æ’é™¤æ‰ï¼Œ äºæ˜¯ä½ å°±åƒåˆ°äº†é¥ºå­ã€‚\n private static void helloFilter() {  Consumer\u0026lt;String\u0026gt; consumer = new Consumer\u0026lt;String\u0026gt;() {  @Override  public void accept(String s) throws Exception {  System.out.println(\u0026#34;accept: \u0026#34; + s);  }  };   Observable.just(\u0026#34;åŒ…å­\u0026#34;, \u0026#34;é¦’å¤´\u0026#34;, \u0026#34;èŠ±ç”Ÿ\u0026#34;, \u0026#34;ç‰›å¥¶\u0026#34;, \u0026#34;é¥ºå­\u0026#34;, \u0026#34;æ˜¥å·\u0026#34;, \u0026#34;æ²¹æ¡\u0026#34;)  .filter(new Predicate\u0026lt;String\u0026gt;() {  @Override  public boolean test(String s) throws Exception {  System.out.println(\u0026#34;test: \u0026#34; + s);  return s.equals(\u0026#34;é¥ºå­\u0026#34;);  }  })  .subscribe(consumer);  } Map map æ“ä½œç¬¦èƒ½å¤Ÿå®Œæˆæ•°æ®ç±»å‹çš„è½¬æ¢ã€‚\nå°† String ç±»å‹è½¬æ¢ä¸º Integer ç±»å‹ã€‚\n private static void helloMap() {  // è§‚å¯Ÿè€…è§‚å¯ŸInteger  Observer\u0026lt;Integer\u0026gt; observer = new Observer\u0026lt;Integer\u0026gt;() {  @Override  public void onSubscribe(Disposable d) {  System.out.println(\u0026#34;onSubscribe: \u0026#34; + d);  }   @Override  public void onNext(Integer s) {  System.out.println(\u0026#34;onNext: \u0026#34; + s);  }   @Override  public void onError(Throwable e) {  System.out.println(\u0026#34;onError: \u0026#34; + e);  }   @Override  public void onComplete() {  System.out.println(\u0026#34;onComplete: \u0026#34;);  }  };   Observable.just(\u0026#34;100\u0026#34;)  .map(new Function\u0026lt;String, Integer\u0026gt;() {  @Override  public Integer apply(String s) throws Exception {  return Integer.valueOf(s);  }  })  .subscribe(observer);  } FlatMap flatmap èƒ½å¤Ÿé“¾å¼åœ°å®Œæˆæ•°æ®ç±»å‹çš„è½¬æ¢å’ŒåŠ å·¥ã€‚\néå†ä¸€ä¸ªå­¦æ ¡æ‰€æœ‰ç­çº§æ‰€æœ‰ç»„çš„æ‰€æœ‰å­¦ç”Ÿ\nprivate void flatmapClassToGroupToStudent() {  Observable.fromIterable(new School().getClasses())  //è¾“å…¥æ˜¯Classç±»å‹ï¼Œè¾“å‡ºæ˜¯ObservableSource\u0026lt;Group\u0026gt;ç±»å‹  .flatMap(new Function\u0026lt;Class, ObservableSource\u0026lt;Group\u0026gt;\u0026gt;() {  @Override  public ObservableSource\u0026lt;Group\u0026gt; apply(Class aClass) throws Exception {  Log.d(TAG, \u0026#34;apply: \u0026#34; + aClass.toString());  return Observable.fromIterable(aClass.getGroups());  }  })  //è¾“å…¥ç±»å‹æ˜¯Groupï¼Œè¾“å‡ºç±»å‹æ˜¯ObservableSource\u0026lt;Student\u0026gt;ç±»å‹  .flatMap(new Function\u0026lt;Group, ObservableSource\u0026lt;Student\u0026gt;\u0026gt;() {  @Override  public ObservableSource\u0026lt;Student\u0026gt; apply(Group group) throws Exception {  Log.d(TAG, \u0026#34;apply: \u0026#34; + group.toString());  return Observable.fromIterable(group.getStudents());  }  })  .subscribe(  new Observer\u0026lt;Student\u0026gt;() {  @Override  public void onSubscribe(Disposable d) {  Log.d(TAG, \u0026#34;onSubscribe: \u0026#34;);  }   @Override  public void onNext(Student value) {  Log.d(TAG, \u0026#34;onNext: \u0026#34; + value.toString());  }   @Override  public void onError(Throwable e) {   }   @Override  public void onComplete() {   }  }); } çº¿ç¨‹è°ƒåº¦ å…³äº RxJava çš„çº¿ç¨‹è°ƒåº¦ï¼Œåˆå­¦è€…åªéœ€è¦æŒæ¡ä¸¤ä¸ª api å°±å¤Ÿå¤Ÿçš„å•¦ã€‚\nsubscribeOn æŒ‡å®š Observable åœ¨ä¸€ä¸ªæŒ‡å®šçš„çº¿ç¨‹è°ƒåº¦å™¨ä¸Šåˆ›å»ºã€‚åªèƒ½æŒ‡å®šä¸€æ¬¡ï¼Œå¦‚æœæŒ‡å®šå¤šæ¬¡åˆ™ä»¥ç¬¬ä¸€æ¬¡ä¸ºå‡†\nobserveOn æŒ‡å®šåœ¨äº‹ä»¶ä¼ é€’ï¼Œè½¬æ¢ï¼ŒåŠ å·¥å’Œæœ€ç»ˆè¢«è§‚å¯Ÿè€…æ¥å—å‘ç”Ÿåœ¨å“ªä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨ã€‚å¯æŒ‡å®šå¤šæ¬¡ï¼Œæ¯æ¬¡æŒ‡å®šå®Œéƒ½åœ¨ä¸‹ä¸€æ­¥ç”Ÿæ•ˆã€‚\nå¸¸ç”¨çº¿ç¨‹è°ƒåº¦å™¨ç±»å‹  Schedulers.single() å•çº¿ç¨‹è°ƒåº¦å™¨ï¼Œçº¿ç¨‹å¯å¤ç”¨ Schedulers.newThread() ä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºæ–°çš„çº¿ç¨‹ Schedulers.io() å¤„ç† io å¯†é›†å‹ä»»åŠ¡ï¼Œå†…éƒ¨æ˜¯çº¿ç¨‹æ± å®ç°ï¼Œå¯è‡ªåŠ¨æ ¹æ®éœ€æ±‚å¢é•¿ Schedulers.computation() å¤„ç†è®¡ç®—ä»»åŠ¡ï¼Œå¦‚äº‹ä»¶å¾ªç¯å’Œå›è°ƒä»»åŠ¡ AndroidSchedulers.mainThread() Android ä¸»çº¿ç¨‹è°ƒåº¦å™¨  ","permalink":"https://zhenfeng-zhu.github.io/post/rxjava2%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/","summary":"RxJava2 å¿«é€Ÿå…¥é—¨ å¼•å…¥ä¾èµ– compile \u0026#39;io.reactivex.rxjava2:rxjava:2.0.1\u0026#39; å†™æ³• ç®€å•ç‰ˆæœ¬  private static void helloSimple() {  Consumer\u0026lt;String\u0026gt; consumer = new Consumer\u0026lt;String\u0026gt;() {  @Override  public void accept(String s) throws Exception {  System.out.println(\u0026#34;consumer accept is \u0026#34; + s);  }  };   Observable.just(\u0026#34;hello world\u0026#34;).subscribe(consumer);  } å¤æ‚ç‰ˆæœ¬  private static void helloComplex() {  Observer\u0026lt;String\u0026gt; observer = new Observer\u0026lt;String\u0026gt;() {  @Override  public void onSubscribe(Disposable d) {  System.","title":"RxJava2 å¿«é€Ÿå…¥é—¨"},{"content":"åœ¨çœ‹é¡¹ç›®ä»£ç çš„æ—¶å€™ï¼Œå‘ç°äº† entity åŒ…å’Œ dto åŒ…ï¼Œé‡Œé¢éƒ½æ˜¯åªä¿å­˜æ•°æ®çš„ç±»ï¼Œä»”ç»†æŸ¥äº†èµ„æ–™ï¼Œæ‰å‘ç° java å¯¹äºåªä¿å­˜æ•°æ®çš„ç±»æœ‰å¥½å‡ ä¸ªåˆ†ç±»ã€‚\n pojo ç±»ï¼šè¿™æ˜¯æ™®é€šçš„ java ç±»ï¼Œå…·æœ‰ä¸€éƒ¨åˆ†çš„ get å’Œ set æ–¹æ³•ã€‚ dto ç±»ï¼šdata transfer object æ•°æ®ä¼ è¾“å¯¹è±¡ç±»ï¼Œæ³›æŒ‡ç”¨äºå±•ç¤ºå±‚ä¸æœåŠ¡å±‚ä¹‹é—´ä¼ è¾“çš„å¯¹è±¡ã€‚ vo ç±»ï¼švo æœ‰ä¸¤ç§è¯´æ³•ï¼Œä¸€ç§æ˜¯ view objectï¼Œä¸€ç§æ˜¯ value objectã€‚ po ç±»ï¼špersisent object æŒä¹…å¯¹è±¡ã€‚å’Œ pojo ç±»ä¸€æ ·ï¼Œä¹Ÿæ˜¯åªæœ‰ get set æ–¹æ³•ï¼Œä½†æ˜¯è¿™ç§ç±»ä¸€èˆ¬æ˜¯ç”¨äºæŒä¹…å±‚ã€‚ bo ç±»ï¼šbusiness objectï¼Œä¸šåŠ¡å¯¹è±¡ï¼Œè¡¨ç¤ºåº”ç”¨ç¨‹åºé¢†åŸŸå†…äº‹ç‰©çš„æ‰€æœ‰å®ä½“ç±»ã€‚ do ç±»ï¼šdomain objectï¼Œé¢†åŸŸå¯¹è±¡ï¼Œå°±æ˜¯ä»ç°å®ä¸­æŠ½è±¡å‡ºæ¥çš„æœ‰å½¢æˆ–è€…æ— å½¢çš„ä¸šåŠ¡å®ä½“ã€‚  æ ¹æ®æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œå¤§éƒ¨åˆ†äººéƒ½æ²¡æœ‰åˆ†é‚£ä¹ˆæ¸…æ¥šï¼Œä¸€èˆ¬æ˜¯æŠŠæ•°æ®ç±»æ”¾åœ¨ domain åŒ…ï¼Œæˆ–è€… entity åŒ…é‡Œã€‚å†ç»†åˆ†ä¸€ä¸‹çš„è¯ï¼Œå¯ä»¥æŠŠ dto ç±»å•ç‹¬æå–åˆ°ä¸€ä¸ªåŒ…é‡Œã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/%E9%A2%86%E5%9F%9F%E5%AE%9E%E4%BD%93%E7%B1%BB/","summary":"åœ¨çœ‹é¡¹ç›®ä»£ç çš„æ—¶å€™ï¼Œå‘ç°äº† entity åŒ…å’Œ dto åŒ…ï¼Œé‡Œé¢éƒ½æ˜¯åªä¿å­˜æ•°æ®çš„ç±»ï¼Œä»”ç»†æŸ¥äº†èµ„æ–™ï¼Œæ‰å‘ç° java å¯¹äºåªä¿å­˜æ•°æ®çš„ç±»æœ‰å¥½å‡ ä¸ªåˆ†ç±»ã€‚\n pojo ç±»ï¼šè¿™æ˜¯æ™®é€šçš„ java ç±»ï¼Œå…·æœ‰ä¸€éƒ¨åˆ†çš„ get å’Œ set æ–¹æ³•ã€‚ dto ç±»ï¼šdata transfer object æ•°æ®ä¼ è¾“å¯¹è±¡ç±»ï¼Œæ³›æŒ‡ç”¨äºå±•ç¤ºå±‚ä¸æœåŠ¡å±‚ä¹‹é—´ä¼ è¾“çš„å¯¹è±¡ã€‚ vo ç±»ï¼švo æœ‰ä¸¤ç§è¯´æ³•ï¼Œä¸€ç§æ˜¯ view objectï¼Œä¸€ç§æ˜¯ value objectã€‚ po ç±»ï¼špersisent object æŒä¹…å¯¹è±¡ã€‚å’Œ pojo ç±»ä¸€æ ·ï¼Œä¹Ÿæ˜¯åªæœ‰ get set æ–¹æ³•ï¼Œä½†æ˜¯è¿™ç§ç±»ä¸€èˆ¬æ˜¯ç”¨äºæŒä¹…å±‚ã€‚ bo ç±»ï¼šbusiness objectï¼Œä¸šåŠ¡å¯¹è±¡ï¼Œè¡¨ç¤ºåº”ç”¨ç¨‹åºé¢†åŸŸå†…äº‹ç‰©çš„æ‰€æœ‰å®ä½“ç±»ã€‚ do ç±»ï¼šdomain objectï¼Œé¢†åŸŸå¯¹è±¡ï¼Œå°±æ˜¯ä»ç°å®ä¸­æŠ½è±¡å‡ºæ¥çš„æœ‰å½¢æˆ–è€…æ— å½¢çš„ä¸šåŠ¡å®ä½“ã€‚  æ ¹æ®æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œå¤§éƒ¨åˆ†äººéƒ½æ²¡æœ‰åˆ†é‚£ä¹ˆæ¸…æ¥šï¼Œä¸€èˆ¬æ˜¯æŠŠæ•°æ®ç±»æ”¾åœ¨ domain åŒ…ï¼Œæˆ–è€… entity åŒ…é‡Œã€‚å†ç»†åˆ†ä¸€ä¸‹çš„è¯ï¼Œå¯ä»¥æŠŠ dto ç±»å•ç‹¬æå–åˆ°ä¸€ä¸ªåŒ…é‡Œã€‚","title":"é¢†åŸŸå®ä½“ç±»"},{"content":"docker å¸¸ç”¨å‘½ä»¤ docker   è·å–é•œåƒ\ndocker pull\n  æ–°å»ºå¹¶å¯åŠ¨\ndocker run\n  åˆ—å‡ºé•œåƒ\ndocker image ls\ndocker images\n  åˆ é™¤è™šæ‚¬é•œåƒ\ndocker image prune\n  åˆ é™¤æœ¬åœ°é•œåƒ\ndocker iamge rm\n  æŸ¥çœ‹åº”ç”¨ä¿¡æ¯\ndocker logs\n  dockerfile ä¸€èˆ¬æ­¥éª¤  åœ¨ä¸€ä¸ªç›®å½•é‡Œï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º Dockerfile åœ¨ Dockerfile çš„ç›®å½•å†…ï¼Œæ‰§è¡Œ docker build  å¸¸ç”¨æŒ‡ä»¤   FROM æŒ‡å®šåŸºç¡€é•œåƒï¼Œä¸”æ˜¯ç¬¬ä¸€æ¡å‘½ä»¤\n  RUN æ‰§è¡Œå‘½ä»¤\nshell æ ¼å¼\nexec æ ¼å¼\n  COPY å’Œ ADD æŒ‡ä»¤æ˜¯å¤åˆ¶æ–‡ä»¶\n  CMD æŒ‡ä»¤å’Œ RUN ç±»ä¼¼ï¼Œå®¹å™¨å¯åŠ¨å‘½ä»¤\nshell æ ¼å¼\nexec æ ¼å¼\nå‚æ•°åˆ—è¡¨æ ¼å¼\n  ENV è®¾ç½®ç¯å¢ƒå˜é‡\n  EXPOSE å£°æ˜å¯¹å¤–æš´éœ²çš„ç«¯å£\n  WORKDIR æŒ‡å®šå·¥ä½œç›®å½•\n  compose ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µ  service æœåŠ¡ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®ä¾‹ã€‚ project é¡¹ç›®ï¼šç”±ä¸€ç»„å…³è”çš„å®¹å™¨ç»„æˆä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ docker-compose.yml æ–‡ä»¶ä¸­å®šä¹‰ã€‚  ä¸€èˆ¬æ­¥éª¤   åœ¨ä¸€ä¸ªé¡¹ç›®ç›®å½•é‡Œï¼Œæ–°å»ºä¸€ä¸ª Dockerfile\n  æ–°å»ºä¸€ä¸ªæ–‡ä»¶ docker-compose.yml\næ¨¡æ¿æ ¼å¼\nversion: 3.0 services:  web:  build: .  ports:  - \u0026#34;5000:5000\u0026#34;   redis:  images: \u0026#34;redis:alpine\u0026#34;   docker-compose up è¿è¡Œé¡¹ç›®\n  å¸¸ç”¨å‘½ä»¤  docker-compose build é‡æ–°æ„å»ºé¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨ config éªŒè¯ compose æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡® down åœæ­¢ up å‘½ä»¤æ‰€å¯åŠ¨çš„å®¹å™¨ images åˆ—å‡º compose æ–‡ä»¶ä¸­åŒ…å«çš„é•œåƒ exec è¿›å…¥æŒ‡å®šçš„å®¹å™¨ kill å¼ºåˆ¶åœæ­¢æœåŠ¡å®¹å™¨ ps åˆ—å‡ºç›®å‰æ‰€æœ‰å®¹å™¨ rm åˆ é™¤åœæ­¢çŠ¶æ€çš„å®¹å™¨ top æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨çš„è¿›ç¨‹  compose æ¨¡æ¿æ–‡ä»¶ æ¯ä¸ªæœåŠ¡éƒ½å¿…é¡»é€šè¿‡ image æŒ‡ä»¤æŒ‡å®šé•œåƒæˆ–è€… build æŒ‡ä»¤ï¼ˆéœ€è¦ dockerfileï¼‰æ¥æ„å»ºç”Ÿæˆçš„é•œåƒã€‚\n  build\næŒ‡å®š dockerfile æ‰€åœ¨çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œcompose å°†ä¼šåˆ©ç”¨å®ƒæ¥è‡ªåŠ¨æ„å»ºè¿™ä¸ªé•œåƒï¼Œç„¶åä½¿ç”¨ã€‚\n  depends_on\nè§£å†³å®¹å™¨çš„ä¾èµ–å’Œå…ˆåå¯åŠ¨é—®é¢˜ã€‚ä½†æ˜¯ä¸ä¼šç­‰å¾…å®Œæˆå¯åŠ¨ä¹‹åå†å¯åŠ¨ï¼Œè€Œæ˜¯åœ¨ä»–ä»¬å¯åŠ¨ä¹‹åå°±å»å¯åŠ¨ã€‚\n  environment\nè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåœ¨è¿™é‡ŒæŒ‡å®šç¨‹åºæˆ–è€…å®¹å™¨å¯åŠ¨æ—¶æ‰€ä¾èµ–çš„ç¯å¢ƒå‚æ•°ã€‚\n  expose\næŒ‡å®šæš´éœ²çš„ç«¯å£ï¼Œåªè¢«è¿æ¥çš„æœåŠ¡è®¿é—®ã€‚\n  image\næŒ‡å®šé•œåƒåç§°ï¼Œå¦‚æœæœ¬åœ°ä¸å­˜åœ¨åˆ™å»æ‹‰å–è¿™ä¸ªé•œåƒã€‚\n  labels\nä¸ºå®¹å™¨æ·»åŠ  docker å…ƒæ•°æ®ä¿¡æ¯ï¼Œå³ä¸€äº›è¾…åŠ©è¯´æ˜ã€‚\n  ports\næš´éœ²ç«¯å£ä¿¡æ¯ï¼Œå®¿ä¸»ç«¯å£:å®¹å™¨ç«¯å£ï¼Œæˆ–è€…åªæŒ‡å®šå®¹å™¨ç«¯å£ã€‚\n  ","permalink":"https://zhenfeng-zhu.github.io/post/docker/","summary":"docker å¸¸ç”¨å‘½ä»¤ docker   è·å–é•œåƒ\ndocker pull\n  æ–°å»ºå¹¶å¯åŠ¨\ndocker run\n  åˆ—å‡ºé•œåƒ\ndocker image ls\ndocker images\n  åˆ é™¤è™šæ‚¬é•œåƒ\ndocker image prune\n  åˆ é™¤æœ¬åœ°é•œåƒ\ndocker iamge rm\n  æŸ¥çœ‹åº”ç”¨ä¿¡æ¯\ndocker logs\n  dockerfile ä¸€èˆ¬æ­¥éª¤  åœ¨ä¸€ä¸ªç›®å½•é‡Œï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º Dockerfile åœ¨ Dockerfile çš„ç›®å½•å†…ï¼Œæ‰§è¡Œ docker build  å¸¸ç”¨æŒ‡ä»¤   FROM æŒ‡å®šåŸºç¡€é•œåƒï¼Œä¸”æ˜¯ç¬¬ä¸€æ¡å‘½ä»¤\n  RUN æ‰§è¡Œå‘½ä»¤\nshell æ ¼å¼\nexec æ ¼å¼\n  COPY å’Œ ADD æŒ‡ä»¤æ˜¯å¤åˆ¶æ–‡ä»¶","title":"docker"},{"content":"Express å¿«é€Ÿå…¥é—¨ å®‰è£… npm init  npm install --save express hello world var express = require(\u0026#39;express\u0026#39;); var app = express();  app.get(\u0026#39;/\u0026#39;, function (req, res) {  res.send(\u0026#39;Hello World!\u0026#39;); });  app.listen(3000, function () {  console.log(\u0026#39;Example app listening on port 3000!\u0026#39;); }); æ‰§è¡Œå‘½ä»¤è¿è¡Œåº”ç”¨ç¨‹åº\nnode app.js ç„¶åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost:3000/ ä»¥æŸ¥çœ‹è¾“å‡ºã€‚\nexpress ç¨‹åºç”Ÿæˆå™¨ å®‰è£… npm install -g express-generator ç¤ºä¾‹ ä»¥ä¸‹è¯­å¥åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­åˆ›å»ºåä¸º myapp çš„ Express åº”ç”¨ç¨‹åºï¼š\nexpress --view=pug myapp åœ¨ MacOS æˆ– Linux ä¸Šï¼Œé‡‡ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œæ­¤åº”ç”¨ç¨‹åºï¼š\nDEBUG=myapp:* npm start ç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost:3000/ ä»¥è®¿é—®æ­¤åº”ç”¨ç¨‹åºã€‚\nè·¯ç”± åŸºæœ¬è·¯ç”± è·¯ç”±ç”¨äºç¡®å®šåº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹çš„å®¢æˆ·æœºè¯·æ±‚ï¼ŒåŒ…å«ä¸€ä¸ª URIï¼ˆæˆ–è·¯å¾„ï¼‰å’Œä¸€ä¸ªç‰¹å®šçš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚\næ¯ä¸ªè·¯ç”±å¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¤„ç†ç¨‹åºå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œã€‚\nè·¯ç”±å®šä¹‰é‡‡ç”¨ä»¥ä¸‹ç»“æ„ï¼š\napp.METHOD(PATH, HANDLER) å…¶ä¸­ï¼š\n app æ˜¯ express çš„å®ä¾‹ã€‚ METHOD æ˜¯ HTTP è¯·æ±‚æ–¹æ³•ã€‚ PATH æ˜¯æœåŠ¡å™¨ä¸Šçš„è·¯å¾„ã€‚ HANDLER æ˜¯åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œçš„å‡½æ•°ã€‚  æ¯”å¦‚ç®€å•çš„ Hello worldï¼š\napp.get(\u0026#39;/\u0026#39;, function (req, res) {  res.send(\u0026#39;Hello World!\u0026#39;); }); å“åº”æ–¹æ³• ä¸‹è¡¨ä¸­å“åº”å¯¹è±¡ (res) çš„æ–¹æ³•å¯ä»¥å‘å®¢æˆ·æœºå‘é€å“åº”ï¼Œå¹¶ç»ˆæ­¢è¯·æ±‚/å“åº”å¾ªç¯ã€‚å¦‚æœæ²¡æœ‰ä»è·¯ç”±å¤„ç†ç¨‹åºè°ƒç”¨å…¶ä¸­ä»»ä½•æ–¹æ³•ï¼Œå®¢æˆ·æœºè¯·æ±‚å°†ä¿æŒæŒ‚èµ·çŠ¶æ€ã€‚\n   æ–¹æ³• æè¿°     res.download() æç¤ºå°†è¦ä¸‹è½½æ–‡ä»¶ã€‚   res.end() ç»“æŸå“åº”è¿›ç¨‹ã€‚   res.json() å‘é€ JSON å“åº”ã€‚   res.jsonp() åœ¨ JSONP çš„æ”¯æŒä¸‹å‘é€ JSON å“åº”ã€‚   res.redirect() é‡å®šå‘è¯·æ±‚ã€‚   res.render() å‘ˆç°è§†å›¾æ¨¡æ¿ã€‚   res.send() å‘é€å„ç§ç±»å‹çš„å“åº”ã€‚   res.sendFile ä»¥å…«ä½å…ƒæµå½¢å¼å‘é€æ–‡ä»¶ã€‚   res.sendStatus() è®¾ç½®å“åº”çŠ¶æ€ç å¹¶ä»¥å“åº”ä¸»ä½“å½¢å¼å‘é€å…¶å­—ç¬¦ä¸²è¡¨ç¤ºã€‚    app.route() å¯ä»¥ä½¿ç”¨ app.route() ä¸ºè·¯ç”±è·¯å¾„åˆ›å»ºå¯é“¾æ¥çš„è·¯ç”±å¤„ç†ç¨‹åºã€‚ å› ä¸ºåœ¨å•ä¸€ä½ç½®æŒ‡å®šè·¯å¾„ï¼Œæ‰€ä»¥å¯ä»¥å‡å°‘å†—ä½™å’Œè¾“å…¥é”™è¯¯ã€‚\napp.route(\u0026#39;/book\u0026#39;)  .get(function(req, res) {  res.send(\u0026#39;Get a random book\u0026#39;);  })  .post(function(req, res) {  res.send(\u0026#39;Add a book\u0026#39;);  })  .put(function(req, res) {  res.send(\u0026#39;Update the book\u0026#39;);  }); express.Router ä½¿ç”¨ express.Router ç±»æ¥åˆ›å»ºå¯å®‰è£…çš„æ¨¡å—åŒ–è·¯ç”±å¤„ç†ç¨‹åºã€‚Router å®ä¾‹æ˜¯å®Œæ•´çš„ä¸­é—´ä»¶å’Œè·¯ç”±ç³»ç»Ÿï¼›å› æ­¤ï¼Œå¸¸å¸¸å°†å…¶ç§°ä¸ºâ€œå¾®å‹åº”ç”¨ç¨‹åºâ€ã€‚\nä»¥ä¸‹ç¤ºä¾‹å°†è·¯ç”±å™¨åˆ›å»ºä¸ºæ¨¡å—ï¼Œåœ¨å…¶ä¸­è£…å…¥ä¸­é—´ä»¶ï¼Œå®šä¹‰ä¸€äº›è·¯ç”±ï¼Œç„¶åå®‰è£…åœ¨ä¸»åº”ç”¨ç¨‹åºçš„è·¯å¾„ä¸­ã€‚\nåœ¨åº”ç”¨ç¨‹åºç›®å½•ä¸­åˆ›å»ºåä¸º birds.js çš„è·¯ç”±å™¨æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\nvar express = require(\u0026#39;express\u0026#39;); var router = express.Router();  // middleware that is specific to this router router.use(function timeLog(req, res, next) {  console.log(\u0026#39;Time: \u0026#39;, Date.now());  next(); }); // define the home page route router.get(\u0026#39;/\u0026#39;, function(req, res) {  res.send(\u0026#39;Birds home page\u0026#39;); }); // define the about route router.get(\u0026#39;/about\u0026#39;, function(req, res) {  res.send(\u0026#39;About birds\u0026#39;); });  module.exports = router; æ¥ç€ï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­è£…å…¥è·¯ç”±å™¨æ¨¡å—ï¼š\nvar birds = require(\u0026#39;./birds\u0026#39;); ... app.use(\u0026#39;/birds\u0026#39;, birds); æ­¤åº”ç”¨ç¨‹åºç°åœ¨å¯å¤„ç†é’ˆå¯¹ /birds å’Œ /birds/about çš„è¯·æ±‚ï¼Œè°ƒç”¨ç‰¹å®šäºæ­¤è·¯ç”±çš„ timeLog ä¸­é—´ä»¶å‡½æ•°ã€‚\nä¸­é—´ä»¶ ä¸­é—´ä»¶å‡½æ•°èƒ½å¤Ÿè®¿é—®è¯·æ±‚å¯¹è±¡ (req)ã€å“åº”å¯¹è±¡ (res) ä»¥åŠåº”ç”¨ç¨‹åºçš„è¯·æ±‚/å“åº”å¾ªç¯ä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°é€šå¸¸ç”±åä¸º next çš„å˜é‡æ¥è¡¨ç¤ºã€‚\n next() å‡½æ•°ä¸æ˜¯ Node.js æˆ– Express API çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¼ é€’ç»™ä¸­é—´ä»¶å‡½æ•°çš„ç¬¬ä¸‰è‡ªå˜é‡ã€‚next() å‡½æ•°å¯ä»¥å‘½åä¸ºä»»ä½•åç§°ï¼Œä½†æ˜¯æŒ‰çº¦å®šï¼Œå§‹ç»ˆå‘½åä¸ºâ€œnextâ€ã€‚\n ä¸­é—´ä»¶å‡½æ•°å¯ä»¥æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š\n æ‰§è¡Œä»»ä½•ä»£ç ã€‚ å¯¹è¯·æ±‚å’Œå“åº”å¯¹è±¡è¿›è¡Œæ›´æ”¹ã€‚ ç»“æŸè¯·æ±‚/å“åº”å¾ªç¯ã€‚ è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚  å¦‚æœå½“å‰ä¸­é—´ä»¶å‡½æ•°æ²¡æœ‰ç»“æŸè¯·æ±‚/å“åº”å¾ªç¯ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»è°ƒç”¨ next()ï¼Œä»¥å°†æ§åˆ¶æƒä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚å¦åˆ™ï¼Œè¯·æ±‚å°†ä¿æŒæŒ‚èµ·çŠ¶æ€ã€‚\nExpress åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç±»å‹çš„ä¸­é—´ä»¶ï¼š\n åº”ç”¨å±‚ä¸­é—´ä»¶ è·¯ç”±å™¨å±‚ä¸­é—´ä»¶ é”™è¯¯å¤„ç†ä¸­é—´ä»¶ å†…ç½®ä¸­é—´ä»¶ ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶  æ¨¡æ¿å¼•æ“ åœ¨ Express å¯ä»¥å‘ˆç°æ¨¡æ¿æ–‡ä»¶ä¹‹å‰ï¼Œå¿…é¡»è®¾ç½®ä»¥ä¸‹åº”ç”¨ç¨‹åºè®¾ç½®ï¼š\n viewsï¼šæ¨¡æ¿æ–‡ä»¶æ‰€åœ¨ç›®å½•ã€‚ä¾‹å¦‚ï¼šapp.set('views', './views') view engineï¼šè¦ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“ã€‚ä¾‹å¦‚ï¼šapp.set('view engine', 'pug')  ç„¶åå®‰è£…å¯¹åº”çš„æ¨¡æ¿å¼•æ“ npm åŒ…ï¼š\nnpm install pug --save åœ¨ views ç›®å½•ä¸­åˆ›å»ºåä¸º index.pug çš„ Pug æ¨¡æ¿æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\nhtml  head  title!= title  body  h1!= message éšååˆ›å»ºè·¯ç”±ä»¥å‘ˆç° index.pug æ–‡ä»¶ã€‚å¦‚æœæœªè®¾ç½® view engine å±æ€§ï¼Œå¿…é¡»æŒ‡å®š view æ–‡ä»¶çš„æ‰©å±•åã€‚å¦åˆ™ï¼Œå¯ä»¥å°†å…¶å¿½ç•¥ã€‚\napp.get(\u0026#39;/\u0026#39;, function (req, res) {  res.render(\u0026#39;index\u0026#39;, { title: \u0026#39;Hey\u0026#39;, message: \u0026#39;Hello there!\u0026#39;}); }); å‘ä¸»é¡µå‘å‡ºè¯·æ±‚æ—¶ï¼Œindex.pug æ–‡ä»¶å°†å‘ˆç°ä¸º HTMLã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/express/","summary":"Express å¿«é€Ÿå…¥é—¨ å®‰è£… npm init  npm install --save express hello world var express = require(\u0026#39;express\u0026#39;); var app = express();  app.get(\u0026#39;/\u0026#39;, function (req, res) {  res.send(\u0026#39;Hello World!\u0026#39;); });  app.listen(3000, function () {  console.log(\u0026#39;Example app listening on port 3000!\u0026#39;); }); æ‰§è¡Œå‘½ä»¤è¿è¡Œåº”ç”¨ç¨‹åº\nnode app.js ç„¶åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost:3000/ ä»¥æŸ¥çœ‹è¾“å‡ºã€‚\nexpress ç¨‹åºç”Ÿæˆå™¨ å®‰è£… npm install -g express-generator ç¤ºä¾‹ ä»¥ä¸‹è¯­å¥åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­åˆ›å»ºåä¸º myapp çš„ Express åº”ç”¨ç¨‹åºï¼š\nexpress --view=pug myapp åœ¨ MacOS æˆ– Linux ä¸Šï¼Œé‡‡ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œæ­¤åº”ç”¨ç¨‹åºï¼š","title":"express"},{"content":"ä¸€ç›´æ²¡æœ‰æœºä¼šå†™ 2017 çš„å¹´ç»ˆæ€»ç»“ï¼Œæƒ³åˆ°å»å¹´å†™çš„æ–°çš„ä¸€å¹´çš„è®¡åˆ’ï¼Œå¥½åƒè‡ªå·±éƒ½æ²¡æœ‰æŒ‰ç…§è®¡åˆ’æ¥åšï¼Œè€Œä¸”å†™çš„è®¡åˆ’ä¹Ÿä¸çŸ¥é“å†™åˆ°å“ªé‡Œå»äº†ã€‚\nç«™åœ¨ç°åœ¨çš„æ—¶é—´ç‚¹å»å®¡è§†è¿‡å»çš„ä¸€å¹´ï¼Œè¿™ä¸ªæœ¬å‘½å¹´è¿˜æ˜¯å‘ç”Ÿäº†å¾ˆå¤šå¯¹è‡ªå·±çš„æœªæ¥æœ‰ç€æ¯”è¾ƒå¤§å½±å“çš„çš„äº‹æƒ…ã€‚æˆ¿å­+å¥³æœ‹å‹+æ–°å·¥ä½œï¼Œè¿™äº›äº‹æƒ…çªç„¶çš„æ¶Œç°å‡ºæ¥ï¼Œæå¾—è‡ªå·±æœ‰äº›æ‰‹å¿™è„šä¹±ã€‚\næ¢³ç†ä¸€ä¸‹è‡ªå·±çš„æ”¶è·å§ï¼š\né¦–å…ˆå½“ç„¶æ˜¯ç»“è¯†äº†ä¸€å¸®å°ä¼™ä¼´ï¼Œæˆ‘ä»¬ä¸€èµ·æ‰“å†œè¯ï¼Œä¸€èµ·è°ƒ bugï¼Œä¸€èµ·å¥‹æˆ˜åŒåä¸€ã€‚\nåœ¨æŠ€æœ¯ä¸Šä¹Ÿæœ‰äº†ä¸€å®šçš„æå‡ï¼Œå…³é”®æ˜¯è‡ªå·±çš„è§†é‡ä¸Šæœ‰äº†å¾ˆå¤§çš„å˜åŒ–ï¼Œä¸å†æ˜¯åƒå½“åˆå¤§å­¦çš„æ—¶å€™ï¼Œä¸çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆã€‚è¿™é‡Œå¯¹æˆ‘å½±å“æ¯”è¾ƒå¤§çš„ä¸€ä¸ªæ˜¯ phodalï¼Œçœ‹äº†ä»–å†™çš„åšå®¢å’Œä¹¦ä¹‹åï¼Œå¯¹è‡ªå·±çš„è§¦åŠ¨å¾ˆå¤§ï¼Œæ„Ÿè§‰ä»–æ‡‚å¾—å¾ˆå¤šä¸œè¥¿ï¼ŒçŸ¥è¯†é¢å¾ˆå¹¿ï¼Œè€Œä¸”èƒ½å¤Ÿå†™å‡ºæ¥ï¼Œæ‰©å¤§äº†è‡ªå·±çš„å½±å“åŠ›ï¼Œæ‰€ä»¥æˆ‘å°±æƒ³ç€è‡ªå·±èƒ½ä¸èƒ½æ¨¡ä»¿ä»–ã€‚å¦å¤–ä¸€ä¸ªå°±æ˜¯ç”°å“¥äº†ï¼Œæˆ‘è§‰å¾—ä»–æ˜¯æˆ‘è®¤è¯†çš„åŒé¾„äººä¸­ï¼Œæ¯”è¾ƒæœ‰è‡ªå·±æƒ³æ³•çš„ä¸€ä¸ªäººï¼Œæ‰“è¿› acm world final çš„äººå°±æ˜¯ä¸ä¸€æ ·ï¼Œä»–çœ‹é—®é¢˜çš„è§’åº¦æ¯”è¾ƒæ–°é¢–ï¼Œè€Œä¸”å½’çº³æ€»ç»“èƒ½åŠ›å¾ˆå¼ºï¼Œç»™äº†æˆ‘ä¸€äº›åœ¨ç¼–ç¨‹ä¸Šçš„æŒ‡ç‚¹ï¼Œè®©æˆ‘å°‘èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚\nä¹Ÿå¾ˆæ„Ÿè°¢è‡ªå·±çš„å‡ ä¸ªå®¤å‹ï¼Œè®©æˆ‘ä¸å†æ„Ÿåˆ°å­¤å•ã€‚è‡ªä»åˆ˜å·æ¥äº†æ·±åœ³ä¹‹åï¼Œ11I æ›´æ¬¢ä¹äº†ï¼Œä¹Ÿæ›´æ±¡äº†ã€‚æˆ‘ä»¬ç»å¸¸åœ¨å®¶é‡Œç…®ç«é”…åƒï¼Œåƒçš„ç‰¹åˆ«çˆ½ï¼Œä»¥è‡³äºç°åœ¨æˆ‘éƒ½ä¸æƒ³å»ç«é”…åº—é‡Œåƒï¼Œæ€»è§‰å¾—åœ¨å®¶åƒçš„æ¯”è¾ƒçˆ½ã€‚\nå¥³æœ‹å‹ï¼Œå‡ºä¹æˆ‘çš„æ„æ–™ï¼Œç°åœ¨æƒ³æƒ³è¿˜æ˜¯æ„Ÿè§‰æ´»åœ¨æ¢¦é‡Œï¼Œç•¥è¿‡ç•¥è¿‡ã€‚\nè‡³äºä¹°æˆ¿ï¼Œæ²¡ä¹°ä¹‹å‰çš„æƒ³æ³•ç›²ç›®ä¹è§‚ï¼Œåæ¥ç®—äº†ä¸€ä¸‹ï¼Œè¦æ˜¯åœ¨æ·±åœ³ä¹°æˆ¿çš„è¯ï¼Œæˆ‘æ¯ä¸ªæœˆçš„æˆ¿è´·æ˜¯ 2 ä¸‡å¤šï¼Œå…³é”®æ˜¯é¦–ä»˜è¿˜ä¸ä¸€å®šèƒ½æå¾—å‡ºæ¥ã€‚è¿˜æ˜¯å»ºè®®åœ¨åŒ—ä¸Šå¹¿æ·±å·¥ä½œçš„äººï¼Œæœ‰æœºä¼šç°åœ¨è€å®¶çš„çœä¼šä¸€ç±»çš„åŸå¸‚ï¼Œå…ˆæä¸€å¥—ï¼Œä»¥åå¯ä»¥ç½®æ¢ï¼Œèƒ½ä¸Šè½¦çš„æ—¶å€™æ—©ç‚¹ä¸Šè½¦ï¼Œä¹Ÿæ˜¯ç›¸å½“äºå˜ç›¸æ”’é’±äº†ã€‚å¯¹äºä¸ä¼šæŠ•èµ„æˆ–è€…åˆ›ä¸šçš„æœ‹å‹ï¼Œæœ‰æ—¶å€™è¾›è¾›è‹¦è‹¦å¹²ä¸€å¹´ä¹‹åç®—ä¸€ä¸‹ï¼Œä¸çŸ¥ä¸è§‰ä¸­ï¼Œè‡ªå·±çš„é’±éƒ½ä¸çŸ¥é“èŠ±åœ¨äº†å“ªé‡Œï¼Œå¦‚æœæœ‰æˆ¿è´·çš„è¯ï¼Œç­‰ç”¨çš„æ—¶å€™è¯´ä¸å®šå–æ‰è¿˜èƒ½èµšä¸€äº›é’±ã€‚\næ„Ÿè§‰è‡ªå·±æ¢å…¬å¸è¿˜æ˜¯æŒºæˆå‰§åŒ–çš„ï¼Œå½“æ—¶ä¹Ÿæ²¡æƒ³ç€çœŸçš„å°±æ¢å·¥ä½œå§ï¼Œåªæ˜¯æƒ³æŠ•æŠ•ç®€å†ï¼Œç„¶åå»é¢è¯•ä¸€æ³¢çœ‹çœ‹è‡ªå·±çš„æ°´å¹³æ€ä¹ˆæ ·ã€‚æ€»è§‰å¾—è‡ªå·±åœ¨æ‹›é“¶çš„èˆ’é€‚åŒºå¾…çš„å¤ªä¹…äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¿€æƒ…äº†ã€‚åŒæ—¶è‡ªå·±ä¹Ÿæƒ³å‡ºæ¥è¯•è¯•ï¼Œä¸‡ä¸€å…¬å¸ä¸Šå¸‚ï¼Œæ‘‡èº«ä¸€å˜æˆä¸ºå¯Œç¿äº†ã€‚å½“ç„¶è¿™æ˜¯ç™½æ—¥æ¢¦äº†ï¼Œè·¯è¿˜æ˜¯è¦ä¸€æ­¥ä¸€æ­¥çš„èµ°çš„ã€‚\næ€»æ„Ÿè§‰è‡ªå·±æƒ³äº†å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯å°±æ˜¯å†™ä¸å‡ºæ¥ï¼Œè‡ªå·±è®²æ•…äº‹çš„èƒ½åŠ›è¿˜æ˜¯è¦æå‡ä¸€äº›ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/a-month-in-finogeeks/","summary":"ä¸€ç›´æ²¡æœ‰æœºä¼šå†™ 2017 çš„å¹´ç»ˆæ€»ç»“ï¼Œæƒ³åˆ°å»å¹´å†™çš„æ–°çš„ä¸€å¹´çš„è®¡åˆ’ï¼Œå¥½åƒè‡ªå·±éƒ½æ²¡æœ‰æŒ‰ç…§è®¡åˆ’æ¥åšï¼Œè€Œä¸”å†™çš„è®¡åˆ’ä¹Ÿä¸çŸ¥é“å†™åˆ°å“ªé‡Œå»äº†ã€‚\nç«™åœ¨ç°åœ¨çš„æ—¶é—´ç‚¹å»å®¡è§†è¿‡å»çš„ä¸€å¹´ï¼Œè¿™ä¸ªæœ¬å‘½å¹´è¿˜æ˜¯å‘ç”Ÿäº†å¾ˆå¤šå¯¹è‡ªå·±çš„æœªæ¥æœ‰ç€æ¯”è¾ƒå¤§å½±å“çš„çš„äº‹æƒ…ã€‚æˆ¿å­+å¥³æœ‹å‹+æ–°å·¥ä½œï¼Œè¿™äº›äº‹æƒ…çªç„¶çš„æ¶Œç°å‡ºæ¥ï¼Œæå¾—è‡ªå·±æœ‰äº›æ‰‹å¿™è„šä¹±ã€‚\næ¢³ç†ä¸€ä¸‹è‡ªå·±çš„æ”¶è·å§ï¼š\né¦–å…ˆå½“ç„¶æ˜¯ç»“è¯†äº†ä¸€å¸®å°ä¼™ä¼´ï¼Œæˆ‘ä»¬ä¸€èµ·æ‰“å†œè¯ï¼Œä¸€èµ·è°ƒ bugï¼Œä¸€èµ·å¥‹æˆ˜åŒåä¸€ã€‚\nåœ¨æŠ€æœ¯ä¸Šä¹Ÿæœ‰äº†ä¸€å®šçš„æå‡ï¼Œå…³é”®æ˜¯è‡ªå·±çš„è§†é‡ä¸Šæœ‰äº†å¾ˆå¤§çš„å˜åŒ–ï¼Œä¸å†æ˜¯åƒå½“åˆå¤§å­¦çš„æ—¶å€™ï¼Œä¸çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆã€‚è¿™é‡Œå¯¹æˆ‘å½±å“æ¯”è¾ƒå¤§çš„ä¸€ä¸ªæ˜¯ phodalï¼Œçœ‹äº†ä»–å†™çš„åšå®¢å’Œä¹¦ä¹‹åï¼Œå¯¹è‡ªå·±çš„è§¦åŠ¨å¾ˆå¤§ï¼Œæ„Ÿè§‰ä»–æ‡‚å¾—å¾ˆå¤šä¸œè¥¿ï¼ŒçŸ¥è¯†é¢å¾ˆå¹¿ï¼Œè€Œä¸”èƒ½å¤Ÿå†™å‡ºæ¥ï¼Œæ‰©å¤§äº†è‡ªå·±çš„å½±å“åŠ›ï¼Œæ‰€ä»¥æˆ‘å°±æƒ³ç€è‡ªå·±èƒ½ä¸èƒ½æ¨¡ä»¿ä»–ã€‚å¦å¤–ä¸€ä¸ªå°±æ˜¯ç”°å“¥äº†ï¼Œæˆ‘è§‰å¾—ä»–æ˜¯æˆ‘è®¤è¯†çš„åŒé¾„äººä¸­ï¼Œæ¯”è¾ƒæœ‰è‡ªå·±æƒ³æ³•çš„ä¸€ä¸ªäººï¼Œæ‰“è¿› acm world final çš„äººå°±æ˜¯ä¸ä¸€æ ·ï¼Œä»–çœ‹é—®é¢˜çš„è§’åº¦æ¯”è¾ƒæ–°é¢–ï¼Œè€Œä¸”å½’çº³æ€»ç»“èƒ½åŠ›å¾ˆå¼ºï¼Œç»™äº†æˆ‘ä¸€äº›åœ¨ç¼–ç¨‹ä¸Šçš„æŒ‡ç‚¹ï¼Œè®©æˆ‘å°‘èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚\nä¹Ÿå¾ˆæ„Ÿè°¢è‡ªå·±çš„å‡ ä¸ªå®¤å‹ï¼Œè®©æˆ‘ä¸å†æ„Ÿåˆ°å­¤å•ã€‚è‡ªä»åˆ˜å·æ¥äº†æ·±åœ³ä¹‹åï¼Œ11I æ›´æ¬¢ä¹äº†ï¼Œä¹Ÿæ›´æ±¡äº†ã€‚æˆ‘ä»¬ç»å¸¸åœ¨å®¶é‡Œç…®ç«é”…åƒï¼Œåƒçš„ç‰¹åˆ«çˆ½ï¼Œä»¥è‡³äºç°åœ¨æˆ‘éƒ½ä¸æƒ³å»ç«é”…åº—é‡Œåƒï¼Œæ€»è§‰å¾—åœ¨å®¶åƒçš„æ¯”è¾ƒçˆ½ã€‚\nå¥³æœ‹å‹ï¼Œå‡ºä¹æˆ‘çš„æ„æ–™ï¼Œç°åœ¨æƒ³æƒ³è¿˜æ˜¯æ„Ÿè§‰æ´»åœ¨æ¢¦é‡Œï¼Œç•¥è¿‡ç•¥è¿‡ã€‚\nè‡³äºä¹°æˆ¿ï¼Œæ²¡ä¹°ä¹‹å‰çš„æƒ³æ³•ç›²ç›®ä¹è§‚ï¼Œåæ¥ç®—äº†ä¸€ä¸‹ï¼Œè¦æ˜¯åœ¨æ·±åœ³ä¹°æˆ¿çš„è¯ï¼Œæˆ‘æ¯ä¸ªæœˆçš„æˆ¿è´·æ˜¯ 2 ä¸‡å¤šï¼Œå…³é”®æ˜¯é¦–ä»˜è¿˜ä¸ä¸€å®šèƒ½æå¾—å‡ºæ¥ã€‚è¿˜æ˜¯å»ºè®®åœ¨åŒ—ä¸Šå¹¿æ·±å·¥ä½œçš„äººï¼Œæœ‰æœºä¼šç°åœ¨è€å®¶çš„çœä¼šä¸€ç±»çš„åŸå¸‚ï¼Œå…ˆæä¸€å¥—ï¼Œä»¥åå¯ä»¥ç½®æ¢ï¼Œèƒ½ä¸Šè½¦çš„æ—¶å€™æ—©ç‚¹ä¸Šè½¦ï¼Œä¹Ÿæ˜¯ç›¸å½“äºå˜ç›¸æ”’é’±äº†ã€‚å¯¹äºä¸ä¼šæŠ•èµ„æˆ–è€…åˆ›ä¸šçš„æœ‹å‹ï¼Œæœ‰æ—¶å€™è¾›è¾›è‹¦è‹¦å¹²ä¸€å¹´ä¹‹åç®—ä¸€ä¸‹ï¼Œä¸çŸ¥ä¸è§‰ä¸­ï¼Œè‡ªå·±çš„é’±éƒ½ä¸çŸ¥é“èŠ±åœ¨äº†å“ªé‡Œï¼Œå¦‚æœæœ‰æˆ¿è´·çš„è¯ï¼Œç­‰ç”¨çš„æ—¶å€™è¯´ä¸å®šå–æ‰è¿˜èƒ½èµšä¸€äº›é’±ã€‚\næ„Ÿè§‰è‡ªå·±æ¢å…¬å¸è¿˜æ˜¯æŒºæˆå‰§åŒ–çš„ï¼Œå½“æ—¶ä¹Ÿæ²¡æƒ³ç€çœŸçš„å°±æ¢å·¥ä½œå§ï¼Œåªæ˜¯æƒ³æŠ•æŠ•ç®€å†ï¼Œç„¶åå»é¢è¯•ä¸€æ³¢çœ‹çœ‹è‡ªå·±çš„æ°´å¹³æ€ä¹ˆæ ·ã€‚æ€»è§‰å¾—è‡ªå·±åœ¨æ‹›é“¶çš„èˆ’é€‚åŒºå¾…çš„å¤ªä¹…äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¿€æƒ…äº†ã€‚åŒæ—¶è‡ªå·±ä¹Ÿæƒ³å‡ºæ¥è¯•è¯•ï¼Œä¸‡ä¸€å…¬å¸ä¸Šå¸‚ï¼Œæ‘‡èº«ä¸€å˜æˆä¸ºå¯Œç¿äº†ã€‚å½“ç„¶è¿™æ˜¯ç™½æ—¥æ¢¦äº†ï¼Œè·¯è¿˜æ˜¯è¦ä¸€æ­¥ä¸€æ­¥çš„èµ°çš„ã€‚\næ€»æ„Ÿè§‰è‡ªå·±æƒ³äº†å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯å°±æ˜¯å†™ä¸å‡ºæ¥ï¼Œè‡ªå·±è®²æ•…äº‹çš„èƒ½åŠ›è¿˜æ˜¯è¦æå‡ä¸€äº›ã€‚","title":"ç¢ç¢å¿µ"},{"content":"java å†…å­˜æ¨¡å‹å’Œçº¿ç¨‹  å¹¶å‘ä¸ä¸€å®šä¾èµ–å¤šçº¿ç¨‹ï¼Œä½†æ˜¯åœ¨ java é‡Œé¢è°ˆè®ºå¹¶å‘ï¼Œå¤§å¤šä¸çº¿ç¨‹è„±ä¸å¼€å…³ç³»ã€‚\n çº¿ç¨‹æ˜¯å¤§å¤šæ˜¯é¢è¯•éƒ½ä¼šé—®åˆ°çš„é—®é¢˜ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œçº¿ç¨‹æ˜¯æ¯”è¿›ç¨‹æ›´è½»é‡çº§çš„è°ƒåº¦å•ä½ï¼Œçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ã€‚ä¹‹å‰é¢è¯•çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è¿™æ ·å›ç­”ï¼Œè¿·è¿·ç³Šç³Šï¼Œæ²¡æœ‰ä¸€ä¸ªæ¸…æ™°çš„æ¦‚å¿µã€‚\nå¤§å­¦çš„å­¦ä¹ çš„æ—¶å€™ï¼Œå†™ C å’Œ C++ï¼Œè‡ªå·±éƒ½æ²¡æœ‰ç”¨è¿‡å¤šçº¿ç¨‹ï¼Œçœ‹è¿‡ä¸€ä¸ª Windows ç¼–ç¨‹çš„ä¹¦ï¼Œé‡Œé¢è®²å¤šçº¿ç¨‹çš„æ—¶å€™ï¼Œä¸€å¤§å †å¤§å†™çš„å­—æ¯ï¼Œçœ‹ç€ä¸€ç‚¹éƒ½ä¸çˆ½ï¼Œä¹Ÿæ˜¯æƒ­æ„§ã€‚åæ¥çš„å®ä¹ ï¼Œå†™ unityï¼Œunity çš„ C#ä½¿ç”¨çš„æ˜¯åç¨‹ã€‚åªæœ‰åœ¨åšäº† java åç«¯ä¹‹åï¼Œæ‰çŸ¥é“çº¿ç¨‹åˆ°åº•æ˜¯æ€ä¹ˆç”¨çš„ã€‚äº†è§£äº†java å†…å­˜æ¨¡å‹ä¹‹åï¼Œä»”ç»†çœ‹äº†ä¸€äº›èµ„æ–™ï¼Œå¯¹ java çº¿ç¨‹æœ‰äº†æ›´æ·±å…¥çš„è®¤è¯†ï¼Œæ•´ç†å†™æˆè¿™ç¯‡æ–‡ç« ï¼Œç”¨æ¥ä»¥åå‚è€ƒã€‚\n1 Java å†…å­˜æ¨¡å‹ Java è™šæ‹Ÿæœºè§„èŒƒè¯•å›¾å®šä¹‰ä¸€ç§ java å†…å­˜æ¨¡å‹æ¥å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œä»¥å®ç°è®© java ç¨‹åºåœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´æ€§å†…å­˜è®¿é—®çš„æ•ˆæœã€‚\njava å†…å­˜æ¨¡å‹çš„ä¸»è¦ç›®æ ‡æ˜¯å®šä¹‰ç¨‹åºä¸­å„ä¸ªå˜é‡çš„è®¿é—®è§„åˆ™ï¼Œå³åœ¨è™šæ‹Ÿæœºä¸­å°†å˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­å–å‡ºå˜é‡çš„åº•å±‚ç»†èŠ‚ã€‚ï¼ˆè¿™é‡Œæ‰€è¯´çš„å˜é‡åŒ…æ‹¬äº†å®ä¾‹å­—æ®µã€é™æ€å­—æ®µå’Œæ•°ç»„ç­‰ï¼Œä½†ä¸åŒ…æ‹¬å±€éƒ¨å˜é‡ä¸æ–¹æ³•å‚æ•°ï¼Œå› ä¸ºè¿™äº›æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œä¸è¢«å…±äº«ã€‚ï¼‰\n1.1 ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ java è§„å®šæ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ã€‚æ¯æ¡çº¿ç¨‹æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ã€‚\nçº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­çš„å˜é‡æ˜¯ä¸»å†…å­˜ä¸­è¯¥å˜é‡çš„å‰¯æœ¬ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ä¸­çš„å˜é‡ã€‚ä¸åŒçº¿ç¨‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚\n1.2 å†…å­˜ä¹‹é—´çš„äº¤äº’ å…³äºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„å…·ä½“äº¤äº’åè®®ï¼Œjava å†…å­˜æ¨¡å‹å®šä¹‰äº† 8 ä¸­æ“ä½œæ¥å®Œæˆï¼Œè™šæ‹Ÿæœºå®ç°çš„æ—¶å€™å¿…é¡»ä¿è¯æ¯ä¸ªæ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œä¸å¯åˆ†å‰²çš„ï¼ˆå¯¹äº long å’Œ double æœ‰ä¾‹å¤–ï¼‰\n lock é”å®šï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼Œä»£è¡¨ä¸€ä¸ªå˜é‡æ˜¯ä¸€æ¡çº¿ç¨‹ç‹¬å ã€‚ unlock è§£é”ï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼ŒæŠŠé”å®šçš„å˜é‡è§£é”ã€‚ read è¯»å–ï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼ŒæŠŠå˜é‡å€¼ä»ä¸»å†…å­˜ä¼ åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä¾› load ä½¿ç”¨ã€‚ load è½½å…¥ï¼šä½œç”¨å·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠä¸Šä¸€ä¸ª read åˆ°çš„å€¼æ”¾å…¥åˆ°å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ä¸­ã€‚ use ä½¿ç”¨ï¼šä½œç”¨äºå·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ã€‚ assignï¼šä½œç”¨äºå·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠæ‰§è¡Œå¼•æ“æ‰§è¡Œè¿‡çš„å€¼èµ‹ç»™å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ã€‚ store å­˜å‚¨ï¼šä½œç”¨äºå·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„å˜é‡å€¼ä¼ ç»™ä¸»å†…å­˜ï¼Œä¾› write ä½¿ç”¨ã€‚  è¿™äº›æ“ä½œè¦æ»¡è¶³ä¸€å®šçš„è§„åˆ™ã€‚\n1.3 volatile volatile å¯ä»¥è¯´æ˜¯ java çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ã€‚\nå½“ä¸€ä¸ªå˜é‡è¢«å®šä¹‰ä¸º volatile ä¹‹åï¼Œä»–å°±å…·å¤‡ä¸¤ç§ç‰¹æ€§ï¼š\n  ä¿è¯æ­¤å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„\nè¿™é‡Œçš„å¯è§æ€§æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸå˜é‡çš„å€¼ï¼Œæ–°å€¼å¯¹äºå…¶ä»–çº¿ç¨‹æ¥è®²æ˜¯ç«‹å³å¾—çŸ¥çš„ã€‚è€Œæ™®é€šå˜é‡åšä¸åˆ°ï¼Œå› ä¸ºæ™®é€šå˜é‡éœ€è¦ä¼ é€’åˆ°ä¸»å†…å­˜ä¸­æ‰å¯ä»¥åšåˆ°è¿™ç‚¹ã€‚\n  ç¦æ­¢æŒ‡ä»¤é‡æ’\nå¯¹äºæ™®é€šå˜é‡æ¥è¯´ï¼Œä»…ä»…ä¼šä¿è¯åœ¨è¯¥æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€æœ‰ä¾èµ–èµ‹å€¼ç»“æœçš„åœ°æ–¹éƒ½èƒ½è·å–åˆ°æ­£ç¡®çš„ç»“æœï¼Œè€Œä¸èƒ½ä¿è¯å˜é‡èµ‹å€¼æ“ä½œçš„é¡ºåºä¸ç¨‹åºä»£ç ä¸­çš„æ‰§æ€§é¡ºåºä¸€è‡´ã€‚\nè‹¥ç”¨ volatile ä¿®é¥°å˜é‡ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šåœ¨æŒ‡ä»¤åºåˆ—ä¸­æ’å…¥å†…å­˜å±éšœæ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºã€‚\n  volatile å¯¹äºå•ä¸ªçš„å…±äº«å˜é‡çš„è¯»/å†™å…·æœ‰åŸå­æ€§ï¼Œä½†æ˜¯åƒ num++è¿™ç§å¤åˆæ“ä½œï¼Œvolatile æ— æ³•ä¿è¯å…¶åŸå­æ€§ã€‚\n1.4 long å’Œ double long å’Œ double æ˜¯ä¸€ä¸ª 64 ä½çš„æ•°æ®ç±»å‹ã€‚\nè™šæ‹Ÿæœºå…è®¸å°†æ²¡æœ‰è¢« volatile ä¿®é¥°çš„ 64 ä½å˜é‡çš„è¯»å†™æ“ä½œåˆ†ä¸ºä¸¤æ¬¡ 32 ä½çš„æ“ä½œæ¥è¿›è¡Œã€‚å› æ­¤å½“å¤šä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ªæ²¡æœ‰å£°æ˜ä¸º volatile çš„ long æˆ–è€… double å˜é‡ï¼Œå¯èƒ½å‡ºç°æ“ä½œåŠä¸ªå˜é‡çš„æƒ…å†µã€‚\nä½†æ˜¯è¿™ç§æƒ…å†µæ˜¯ç½•è§çš„ï¼Œä¸€èˆ¬å•†ç”¨çš„è™šæ‹Ÿæœºéƒ½æ˜¯è®² long å’Œ double çš„è¯»å†™å½“æˆåŸå­æ“ä½œè¿›è¡Œçš„ï¼Œæ‰€ä»¥åœ¨å†™ä»£ç æ—¶ä¸éœ€è¦å°† long å’Œ double ä¸“é—¨å£°æ˜ä¸º volatileã€‚\n1.5 åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§ java çš„å†…å­˜æ¨¡å‹æ˜¯å›´ç»•ç€åœ¨å¹¶å‘è¿‡ç¨‹ä¸­å¦‚ä½•å¤„ç†åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§ã€‚\nåŸå­æ€§\nåŸºæœ¬æ•°æ®ç±»å‹çš„è®¿é—®è¯»å†™æ˜¯å‰§æœ¬åŸå­æ€§çš„ã€‚\nå¦‚æœéœ€è¦ä¸€ä¸ªæ›´å¤§èŒƒå›´çš„åŸå­æ€§ä¿è¯ï¼Œjava æä¾›äº† lock å’Œ unlock æ“ä½œï¼Œå¯¹åº”äºå†™ä»£ç æ—¶å°±æ˜¯ synchronized å…³é”®å­—ï¼Œå› æ­¤åœ¨ synchronized å—ä¹‹é—´çš„æ“ä½œä¹Ÿæ˜¯å…·å¤‡åŸå­æ€§çš„ã€‚\nå¯è§æ€§\nå¯è§æ€§æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹åˆ°äº†ä¸€ä¸ªå…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çš„çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚å…±äº«å˜é‡çš„è¯»å†™éƒ½æ˜¯é€šè¿‡ä¸»å†…å­˜ä½œä¸ºåª’ä»‹æ¥å¤„ç†å¯è§æ€§çš„ã€‚\nvolatile çš„ç‰¹æ®Šè§„åˆ™ä¿è¯äº†æ–°å€¼å¯ä»¥ç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œæ¯æ¬¡ä½¿ç”¨å‰ç«‹å³ä»ä¸»å†…å­˜åˆ·æ–°ã€‚\nsynchronized åŒæ­¥å—çš„å¯è§æ€§æ˜¯ç”±â€å¯¹äºä¸€ä¸ªå˜é‡ unlock æ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥å›å†…å­˜ä¸­â€œæ¥å®ç°çš„ã€‚\nfinal çš„å¯è§æ€§æ˜¯æŒ‡è¢« final ä¿®é¥°çš„å­—æ®µåœ¨æ„é€ å™¨ä¸­ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œå¹¶ä¸”æ„é€ å™¨æ²¡æœ‰æŠŠ this çš„å¼•ç”¨ä¼ é€’å‡ºå»ï¼Œé‚£ä¹ˆåœ¨å…¶ä»–çº¿ç¨‹ä¸­å°±èƒ½çœ‹è§ final å­—æ®µçš„å€¼ã€‚\næœ‰åºæ€§\nå¦‚æœåœ¨æœ¬çº¿ç¨‹å†…è§‚å¯Ÿï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼›å¦‚æœåœ¨ä¸€ä¸ªçº¿ç¨‹å†…è§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚ volatile å…³é”®å­—æœ¬èº«å°±åŒ…å«äº†ç¦æ­¢æŒ‡ä»¤é‡æ’çš„è¯­ä¹‰ï¼Œè€Œ synchronized åˆ™æ˜¯ç”±â€œä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œ lock æ“ä½œâ€è¿™æ¡è§„åˆ™æ¥å®ç°æœ‰åºæ€§çš„ã€‚\n1.6 å…ˆè¡Œå‘ç”ŸåŸåˆ™ å¦‚æœ java å†…å­˜æ¨¡å‹ä¸­çš„æ‰€æœ‰æœ‰åºæ€§éƒ½æ˜¯é ç€ volatile å’Œ synchronized æ¥å®Œæˆï¼Œé‚£æœ‰äº›æ“ä½œå°†ä¼šå˜å¾—å¾ˆç¹çï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å†™ java å¹¶å‘ä»£ç çš„æ—¶å€™æ²¡æœ‰æ„Ÿå—åˆ°è¿™ä¸€ç‚¹ï¼Œéƒ½æ˜¯å› ä¸º java æœ‰ä¸€ä¸ªâ€œå…ˆè¡Œå‘ç”Ÿâ€åŸåˆ™ã€‚\nå…ˆè¡Œå‘ç”Ÿæ˜¯ java å†…å­˜æ¨¡å‹ä¸­å®šä¹‰çš„ä¸¤é¡¹æ“ä½œä¹‹é—´çš„ååºå…³ç³»ï¼Œå¦‚æœè¯´æ“ä½œ A å…ˆå‘ç”Ÿäºæ“ä½œ Bï¼Œå…¶å®å°±æ˜¯è¯´åœ¨å‘ç”Ÿ B ä¹‹å‰ï¼ŒA äº§ç”Ÿçš„å½±å“éƒ½èƒ½è¢« B è§‚å¯Ÿåˆ°ï¼Œè¿™é‡Œçš„å½±å“åŒ…æ‹¬ä¿®æ”¹äº†å†…å­˜ä¸­å…±äº«å˜é‡çš„å€¼ã€å‘é€äº†æ¶ˆæ¯ã€è°ƒç”¨äº†æ–¹æ³•ç­‰ç­‰ã€‚\n  ç¨‹åºæ¬¡åºè§„åˆ™\nåœ¨ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç¨‹åºä»£ç æ§åˆ¶æµé¡ºåºæ‰§è¡Œã€‚\n  ç®¡ç¨‹é”å®šè§„åˆ™\nunlock å‘ç”Ÿåœ¨åé¢æ—¶é—´åŒä¸€ä¸ªé”çš„ lock æ“ä½œã€‚\n  volatile å˜é‡è§„åˆ™\nvolatile å˜é‡çš„å†™æ“ä½œå‘ç”Ÿåœ¨åé¢æ—¶é—´çš„è¯»æ“ä½œã€‚\n  çº¿ç¨‹å¯åŠ¨è§„åˆ™\n  çº¿ç¨‹ç»ˆæ­¢è§„åˆ™\n  çº¿ç¨‹ä¸­æ–­è§„åˆ™\n  å¯¹è±¡ç»ˆç»“è§„åˆ™\nä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆåœ¨ finalize æ–¹æ³•ä¹‹å‰ã€‚\n  ä¼ é€’æ€§\nå¦‚æœ A å…ˆè¡Œå‘ç”Ÿ Bï¼ŒB å…ˆè¡Œå‘ç”Ÿ Cï¼Œé‚£ä¹ˆ A å…ˆè¡Œå‘ç”Ÿ Cã€‚\n  ç”±äºæŒ‡ä»¤é‡æ’çš„åŸå› ï¼Œæ‰€ä»¥ä¸€ä¸ªæ“ä½œçš„æ—¶é—´ä¸Šçš„å…ˆå‘ç”Ÿï¼Œä¸ä»£è¡¨è¿™ä¸ªæ“ä½œå°±æ˜¯å…ˆè¡Œå‘ç”Ÿï¼›åŒæ ·ä¸€ä¸ªæ“ä½œçš„å…ˆè¡Œå‘ç”Ÿï¼Œä¹Ÿä¸ä»£è¡¨è¿™ä¸ªæ“ä½œå¿…å®šåœ¨æ—¶é—´ä¸Šå…ˆå‘ç”Ÿã€‚\n2 Java çº¿ç¨‹ 2.1 çº¿ç¨‹çš„å®ç° ä¸»æµçš„æ“ä½œç³»ç»Ÿéƒ½æä¾›äº†çº¿ç¨‹çš„å®ç°ï¼Œjava åˆ™æ˜¯åœ¨ä¸åŒçš„ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å¹³å°ä¸‹ï¼Œå¯¹çº¿ç¨‹çš„æ“ä½œæä¾›äº†ç»Ÿä¸€çš„å¤„ç†ï¼Œä¸€ä¸ª Thread ç±»çš„å®ä¾‹å°±ä»£è¡¨äº†ä¸€ä¸ªçº¿ç¨‹ã€‚Thread ç±»çš„å…³é”®æ–¹æ³•éƒ½æ˜¯ native çš„ï¼Œæ‰€ä»¥ java çš„çº¿ç¨‹å®ç°ä¹Ÿéƒ½æ˜¯ä¾èµ–äºå¹³å°ç›¸å…³çš„æŠ€æœ¯æ‰‹æ®µæ¥å®ç°çš„ã€‚\nå®ç°çº¿ç¨‹ä¸»è¦æœ‰ 3 ç§æ–¹å¼ï¼šä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°ï¼Œä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°å’Œä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹å®ç°ã€‚\n2.1.1 ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç° å†…æ ¸çº¿ç¨‹å°±æ˜¯ç›´æ¥ç”±æ“ä½œç³»ç»Ÿå†…æ ¸æ”¯æŒçš„çº¿ç¨‹ï¼Œè¿™ç§çº¿ç¨‹ç”±å†…æ ¸æ¥å®Œæˆçº¿ç¨‹çš„åˆ‡æ¢ï¼Œå†…æ ¸é€šè¿‡æ“çºµè°ƒåº¦å™¨å¯¹çº¿ç¨‹è¿›è¡Œè°ƒåº¦ï¼Œå¹¶è´Ÿè´£å°†çº¿ç¨‹çš„ä»»åŠ¡æ˜ å°„åˆ°å„ä¸ªå¤„ç†å™¨ä¸Šã€‚\nç¨‹åºä¸€èˆ¬ä¸ä¼šç›´æ¥å»è°ƒç”¨å†…æ ¸çº¿ç¨‹ï¼Œè€Œæ˜¯ä½¿ç”¨å†…æ ¸çº¿ç¨‹çš„ä¸€ä¸ªé«˜çº§æ¥å£â€”â€”è½»é‡çº§è¿›ç¨‹ï¼ˆLight Weigh Processï¼‰ï¼ŒLWP å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ„ä¹‰ä¸Šæ‰€è¯´çš„çº¿ç¨‹ã€‚\nç”±äºæ¯ä¸ªè½»é‡çº§è¿›ç¨‹éƒ½ç”±ä¸€ä¸ªå†…æ ¸çº¿ç¨‹æ”¯æŒï¼Œè¿™ç§è½»é‡çº§è¿›ç¨‹ä¸å†…æ ¸çº¿ç¨‹ä¹‹é—´ 1:1 çš„å…³ç³»æˆä¸ºä¸€å¯¹ä¸€çº¿ç¨‹æ¨¡å‹ã€‚\nå±€é™æ€§\nè™½ç„¶ç”±äºå†…æ ¸çº¿ç¨‹çš„æ”¯æŒï¼Œæ¯ä¸ªè½»é‡çº§è¿›ç¨‹éƒ½æˆä¸ºäº†ä¸€ä¸ªç‹¬ç«‹çš„è°ƒåº¦å•å…ƒï¼Œå³ä½¿æœ‰ä¸€ä¸ªé˜»å¡ï¼Œä¹Ÿä¸å½±å“æ•´ä¸ªè¿›ç¨‹çš„å·¥ä½œï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€å®šçš„å±€é™æ€§ï¼š\n  ç³»ç»Ÿè°ƒç”¨ä»£ä»·è¾ƒé«˜\nç”±äºåŸºäºå†…æ ¸çº¿ç¨‹å®ç°ï¼Œæ‰€ä»¥å„ç§çº¿ç¨‹çš„æ“ä½œéƒ½è¦è¿›è¡Œç³»ç»Ÿè°ƒç”¨ã€‚è€Œç³»ç»Ÿè°ƒç”¨çš„ä»£ä»·æ¯”è¾ƒé«˜ï¼Œéœ€è¦åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€æ¥å›åˆ‡æ¢ã€‚\n  ç³»ç»Ÿæ”¯æŒæ•°é‡æœ‰é™\næ¯ä¸ªè½»é‡çº§è¿›ç¨‹éƒ½éœ€è¦ä¸€ä¸ªå†…æ ¸çº¿ç¨‹æ”¯æŒï¼Œéœ€è¦æ¶ˆè€—ä¸€å®šçš„å†…æ ¸èµ„æºï¼Œæ‰€ä»¥æ”¯æŒçš„çº¿ç¨‹æ•°é‡æ˜¯æœ‰é™çš„ã€‚\n  2.1.2 ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç° æŒ‡çš„æ˜¯å®Œå…¨å»ºç«‹åœ¨ç”¨æˆ·ç©ºé—´çš„çº¿ç¨‹åº“ä¸Šï¼Œç³»ç»Ÿå†…æ ¸ä¸èƒ½æ„ŸçŸ¥çº¿ç¨‹å­˜åœ¨çš„å®ç°ã€‚ç”¨æˆ·çº¿ç¨‹çš„å»ºç«‹ã€åŒå¸ƒã€é”€æ¯å’Œè°ƒåº¦å®Œå…¨åœ¨ç”¨æˆ·æ€ä¸­å®Œæˆï¼Œä¸éœ€è¦å†…æ ¸å¸®åŠ©ã€‚\nå¦‚æœç¨‹åºå®ç°å¾—å½“ï¼Œåˆ™è¿™äº›çº¿ç¨‹éƒ½ä¸éœ€è¦åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œæ“ä½œéå¸¸å¿«é€Ÿæ¶ˆè€—ä½ï¼Œå¯ä»¥æ”¯æŒå¤§è§„æ¨¡çº¿ç¨‹æ•°é‡ã€‚è¿™ç§è¿›ç¨‹å’Œç”¨æˆ·çº¿ç¨‹ä¹‹é—´ 1:N çš„å…³ç³»æˆä¸ºä¸€å¯¹å¤šçº¿ç¨‹æ¨¡å‹ã€‚\nå±€é™æ€§\nä¸éœ€è¦ç³»ç»Ÿå†…æ ¸çš„ï¼Œæ—¢æ˜¯ä¼˜åŠ¿ä¹Ÿæ˜¯åŠ£åŠ¿ã€‚ç”±äºæ²¡æœ‰ç³»ç»Ÿå†…æ ¸æ”¯æ´ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½éœ€è¦ç¨‹åºå»å¤„ç†ï¼Œç”±äºæ“ä½œç³»ç»Ÿåªæ˜¯æŠŠå¤„ç†å™¨èµ„æºåˆ†ç»™è¿›ç¨‹ï¼Œé‚£â€œé˜»å¡å¦‚ä½•å¤„ç†â€ã€â€œå¤šå¤„ç†å™¨ç³»ç»Ÿå¦‚ä½•å°†çº¿ç¨‹æ˜ å°„åˆ°å…¶ä»–å¤„ç†å™¨ä¸Šâ€è¿™ç±»é—®é¢˜çš„è§£å†³ååˆ†å›°éš¾ï¼Œæ‰€ä»¥ç°åœ¨ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹çš„è¶Šæ¥è¶Šå°‘äº†ã€‚\n2.1.3 ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç° åœ¨è¿™ç§æ··åˆæ¨¡å¼ä¸‹ï¼Œæ—¢å­˜åœ¨ç”¨æˆ·çº¿ç¨‹ï¼Œä¹Ÿå­˜åœ¨è½»é‡çº§è¿›ç¨‹ã€‚\nç”¨æˆ·çº¿ç¨‹è¿˜æ˜¯å®Œå…¨å»ºç«‹åœ¨ç”¨æˆ·ç©ºé—´ä¸­ï¼Œå› æ­¤ç”¨æˆ·çº¿ç¨‹çš„åˆ›å»ºã€åˆ‡æ¢ã€ææ„ç­‰æ“ä½œä¾ç„¶å»‰ä»·ï¼Œè€Œä¸”æ”¯æŒå¤§è§„æ¨¡ç”¨æˆ·çº¿ç¨‹å¹¶å‘ã€è€Œæ“ä½œç³»ç»Ÿæä¾›æ”¯æŒçš„è½»é‡çº§è¿›ç¨‹åˆ™ä½œä¸ºç”¨æˆ·çº¿ç¨‹å’Œå†…æ ¸çº¿ç¨‹ä¹‹é—´çš„æ¡¥æ¢ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨å†…æ ¸æä¾›çš„çº¿ç¨‹è°ƒåº¦å’Œå¤„ç†å™¨æ˜ å°„ï¼Œå¹¶ä¸”ç”¨æˆ·çº¿ç¨‹çš„ç³»ç»Ÿè°ƒç”¨è¦é€šè¿‡è½»é‡çº§è¿›ç¨‹æ¥å®Œæˆï¼Œå¤§å¤§é™ä½äº†æ•´ä¸ªè¿›ç¨‹è¢«å®Œå…¨é˜»å¡çš„é£é™©ã€‚\nåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·çº¿ç¨‹å’Œè½»é‡çº§è¿›ç¨‹æ•°é‡æ¯”ä¸å›ºå®š N:Mï¼Œè¿™ç§æ¨¡å¼å°±æ˜¯å¤šå¯¹å¤šçº¿ç¨‹æ¨¡å‹ã€‚\n2.1.4 java çº¿ç¨‹çš„å®ç° ç›®å‰çš„ jdk ç‰ˆæœ¬ä¸­ï¼Œæ“ä½œç³»ç»Ÿæ”¯æŒæ€æ ·çš„çº¿ç¨‹æ¨¡å‹ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå°±å†³å®šäº† jvm çš„çº¿ç¨‹æ˜¯æ€ä¹ˆæ˜ å°„çš„ï¼Œè¿™ç‚¹åœ¨ä¸åŒçš„å¹³å°æ²¡åŠæ³•æ‰“æˆä¸€è‡´ã€‚çº¿ç¨‹æ¨¡å‹åªå¯¹çº¿ç¨‹çš„å¹¶å‘è§„æ¨¡å’Œæ“ä½œæˆæœ¬äº§ç”Ÿå½±å“ï¼Œå¯¹ç¼–ç å’Œè¿è¡Œéƒ½æ²¡ä»€ä¹ˆå·®å¼‚ã€‚\nwindows å’Œ linux éƒ½æ˜¯ä¸€å¯¹ä¸€çš„çº¿ç¨‹æ¨¡å‹ã€‚\n2.2 çº¿ç¨‹è°ƒåº¦ çº¿ç¨‹çš„è°ƒåº¦æ˜¯æŒ‡ç³»ç»Ÿä¸ºçº¿ç¨‹åˆ†é…å¤„ç†å™¨ä½¿ç”¨æƒçš„è¿‡ç¨‹ï¼Œä¸»è¦çš„è°ƒåº¦æ–¹å¼æœ‰ä¸¤ç§ï¼šååŒå¼çº¿ç¨‹è°ƒåº¦å’ŒæŠ¢å å¼çº¿ç¨‹è°ƒåº¦ã€‚\n2.2.1 ååŒå¼çº¿ç¨‹è°ƒåº¦ çº¿ç¨‹çš„æ‰§æ€§æ—¶é—´ç”±çº¿ç¨‹æœ¬èº«æ¥æ§åˆ¶ï¼Œçº¿ç¨‹æŠŠè‡ªå·±çš„å·¥ä½œæ‰§æ€§å®Œäº†ä¹‹åï¼Œè¦ä¸»åŠ¨é€šçŸ¥ç³»ç»Ÿåˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸Šã€‚Lua çš„åç¨‹å°±æ˜¯è¿™æ ·ã€‚\nå¥½å¤„\nååŒå¼å¤šçº¿ç¨‹æœ€å¤§çš„å¥½å¤„å°±æ˜¯å®ç°ç®€å•ã€‚\nç”±äºçº¿ç¨‹è¦æŠŠè‡ªå·±çš„äº‹æƒ…å¹²å®Œä¹‹åæ‰è¿›è¡Œçº¿ç¨‹åˆ‡æ¢ï¼Œåˆ‡æ¢æ“ä½œå¯¹çº¿ç¨‹æ˜¯å…‹åˆ¶çš„ï¼Œæ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆçº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚\nåå¤„\nåå¤„ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œçº¿ç¨‹æ‰§è¡Œæ—¶é—´ä¸å¯æ§ã€‚ç”šè‡³å¦‚æœä¸€ä¸ªçº¿ç¨‹å†™çš„é—®é¢˜ï¼Œä¸€ç›´ä¸å‘Šè¯‰ç³»ç»Ÿåˆ‡æ¢ï¼Œé‚£ç¨‹åºå°±ä¼šä¸€ç›´é˜»å¡ã€‚\n2.2.2 æŠ¢å å¼çº¿ç¨‹è°ƒåº¦ æ¯ä¸ªçº¿ç¨‹ç”±ç³»ç»Ÿåˆ†é…æ‰§è¡Œæ—¶é—´ï¼Œçº¿ç¨‹çš„åˆ‡æ¢ä¸æ˜¯åˆçº¿ç¨‹æœ¬èº«æ¥å†³å®šã€‚\nä½¿ç”¨ yield æ–¹æ³•æ˜¯å¯ä»¥è®©å‡ºæ‰§è¡Œæ—¶é—´ï¼Œä½†æ˜¯è¦è·å–æ‰§è¡Œæ—¶é—´ï¼Œçº¿ç¨‹æœ¬èº«æ˜¯æ²¡æœ‰ä»€ä¹ˆåŠæ³•çš„ã€‚\nåœ¨è¿™ç§è°ƒåº¦æ¨¡å¼ä¸‹ï¼Œçº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´æ˜¯ç³»ç»Ÿå¯æ§çš„ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°ä¸€ä¸ªçº¿ç¨‹å¯¼è‡´æ•´ä¸ªè¿›ç¨‹é˜»å¡ã€‚\n2.2.3 java çº¿ç¨‹è°ƒåº¦ java ä½¿ç”¨çš„æ˜¯æŠ¢å å¼çº¿ç¨‹è°ƒåº¦ã€‚\nè™½ç„¶ java çš„çº¿ç¨‹è°ƒåº¦æ˜¯ç³»ç»Ÿæ¥æ§åˆ¶çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§çš„æ–¹å¼ï¼Œè®©æŸäº›çº¿ç¨‹å¤šåˆ†é…ä¸€äº›æ—¶é—´ï¼ŒæŸäº›çº¿ç¨‹å°‘åˆ†é…ä¸€äº›æ—¶é—´ã€‚\nä¸è¿‡çº¿ç¨‹ä¼˜å…ˆçº§è¿˜æ˜¯ä¸å¤ªé è°±ï¼ŒåŸå› å°±æ˜¯ java çš„çº¿ç¨‹æ˜¯é€šè¿‡æ˜ å°„åˆ°ç³»ç»Ÿçš„åŸç”Ÿçº¿ç¨‹æ¥å®ç°çš„ï¼Œæ‰€ä»¥çº¿ç¨‹çš„è°ƒåº¦è¿˜æ˜¯å–å†³äºæ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ä¼˜å…ˆçº§ä¸ä¸€å®šå’Œ java çš„çº¿ç¨‹ä¼˜å…ˆçº§ä¸€ä¸€å¯¹åº”ã€‚è€Œä¸”ä¼˜å…ˆçº§è¿˜å¯èƒ½è¢«ç³»ç»Ÿè‡ªè¡Œæ”¹å˜ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨ç¨‹åºä¸­é€šè¿‡ä¼˜å…ˆçº§æ¥å‡†ç¡®çš„åˆ¤æ–­å…ˆæ‰§è¡Œå“ªä¸€ä¸ªçº¿ç¨‹ã€‚\n2.3 çº¿ç¨‹çš„çŠ¶æ€è½¬æ¢ çœ‹åˆ°ç½‘ä¸Šæœ‰å¥½å¤šç§è¯´æ³•ï¼Œä¸è¿‡å¤§è‡´ä¹Ÿéƒ½æ˜¯è¯´ 5 ç§çŠ¶æ€ï¼šæ–°å»ºï¼ˆnewï¼‰ã€å¯è¿è¡Œï¼ˆrunnableï¼‰ã€è¿è¡Œï¼ˆrunningï¼‰ã€é˜»å¡ï¼ˆblockedï¼‰å’Œæ­»äº¡ï¼ˆdeadï¼‰ã€‚\nè€Œæ·±å…¥ç†è§£ jvm è™šæ‹Ÿæœºä¸­è¯´ java å®šä¹‰äº† 5 ç§çº¿ç¨‹çŠ¶æ€ï¼Œåœ¨ä»»ä¸€æ—¶é—´ç‚¹ï¼Œä¸€ä¸ªçº¿ç¨‹åªèƒ½æœ‰å…¶ä¸­çš„ä¸€ç§çŠ¶æ€ï¼š\n  æ–°å»º new\n  è¿è¡Œ runnable\nåŒ…æ‹¬äº†æ“ä½œç³»ç»Ÿçº¿ç¨‹çŠ¶æ€çš„ running å’Œ readyï¼Œä¹Ÿå°±æ˜¯è¯´å¤„äºæ­¤çŠ¶æ€çš„çº¿ç¨‹å¯èƒ½æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿå¯èƒ½æ­£åœ¨ç­‰å¾… cpu ç»™åˆ†é…æ‰§è¡Œæ—¶é—´ã€‚\n  æ— é™æœŸç­‰å¾… waiting\nå¤„äºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¸ä¼šè¢« cpu åˆ†é…æ‰§è¡Œæ—¶é—´ï¼Œéœ€è¦è¢«å…¶ä»–çº¿ç¨‹æ˜¾ç¤ºå”¤é†’ï¼Œèƒ½å¤Ÿå¯¼è‡´çº¿ç¨‹é™·å…¥æ— é™æœŸç­‰å¾…çš„æ–¹æ³•æœ‰ï¼š\n æ²¡æœ‰è®¾ç½® timeout å‚æ•°çš„ wait æ–¹æ³•ã€‚ æ²¡æœ‰è®¾ç½® timeout å‚æ•°çš„ join æ–¹æ³•ã€‚ LockSupport.park æ–¹æ³•ã€‚    é™æœŸç­‰å¾… timed waiting\nå¤„äºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¹Ÿä¸ä¼šè¢« cpu åˆ†é…æ‰§è¡Œæ—¶é—´ï¼Œä¸è¿‡ä¸éœ€è¦è¢«å…¶ä»–çº¿ç¨‹æ˜¾ç¤ºå”¤é†’ï¼Œæ˜¯ç»è¿‡ä¸€æ®µæ—¶é—´ä¹‹åï¼Œè¢«æ“ä½œç³»ç»Ÿè‡ªåŠ¨å”¤é†’ã€‚èƒ½å¤Ÿå¯¼è‡´çº¿ç¨‹é™·å…¥é™æœŸç­‰å¾…çš„æ–¹æ³•æœ‰ï¼š\n sleep æ–¹æ³•ã€‚ è®¾ç½® timeout å‚æ•°çš„ wait æ–¹æ³•ã€‚ è®¾ç½®å‚æ•°çš„ join æ–¹æ³•ã€‚ LockSupport.parkNanos æ–¹æ³•ã€‚ LockSupport.parkUntil æ–¹æ³•ã€‚    é˜»å¡ blocked\nçº¿ç¨‹è¢«é˜»å¡äº†ã€‚åœ¨çº¿ç¨‹ç­‰å¾…è¿›å…¥åŒæ­¥åŒºåŸŸçš„æ—¶å€™æ˜¯è¿™ä¸ªçŠ¶æ€ã€‚\né˜»å¡å’Œç­‰å¾…çš„åŒºåˆ«æ˜¯ï¼šé˜»å¡æ˜¯æ’é˜Ÿç­‰å¾…è·å–ä¸€ä¸ªæ’ä»–é”ï¼Œè€Œç­‰å¾…æ˜¯æŒ‡ç­‰ä¸€æ®µæ—¶é—´æˆ–è€…ä¸€ä¸ªå”¤é†’åŠ¨ä½œã€‚\n  ç»“æŸ terminated\nå·²ç»ç»ˆæ­¢çš„çº¿ç¨‹ã€‚\n  3 å†™åœ¨æœ€å å¹¶å‘å¤„ç†çš„å¹¿æ³›åº”ç”¨æ˜¯ä½¿å¾— Amdahl å®šå¾‹ä»£æ›¿æ‘©å°”å®šå¾‹æˆä¸ºè®¡ç®—æœºæ€§èƒ½å‘å±•æºåŠ¨åŠ›çš„æ ¹æœ¬åŸå› ï¼Œä¹Ÿæ˜¯äººç±»å‹æ¦¨è®¡ç®—æœºè¿ç®—èƒ½åŠ›çš„æœ€æœ‰åŠ›æ­¦å™¨ã€‚æœ‰äº›é—®é¢˜ä½¿ç”¨è¶Šå¤šçš„èµ„æºå°±èƒ½è¶Šå¿«åœ°è§£å†³â€”â€”è¶Šå¤šçš„å·¥äººå‚ä¸æ”¶å‰²åº„ç¨¼ï¼Œé‚£ä¹ˆå°±èƒ½è¶Šå¿«åœ°å®Œæˆæ”¶è·ã€‚ä½†æ˜¯å¦ä¸€äº›ä»»åŠ¡æ ¹æœ¬å°±æ˜¯ä¸²è¡ŒåŒ–çš„â€”â€”å¢åŠ æ›´å¤šçš„å·¥äººæ ¹æœ¬ä¸å¯èƒ½æé«˜æ”¶å‰²é€Ÿåº¦ã€‚\næˆ‘ä»¬ä½¿ç”¨çº¿ç¨‹çš„é‡è¦åŸå› ä¹‹ä¸€æ˜¯ä¸ºäº†æ”¯é…å¤šå¤„ç†å™¨çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯é—®é¢˜è¢«æ°å½“åœ°è¿›è¡Œäº†å¹¶è¡ŒåŒ–çš„åˆ†è§£ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„ç¨‹åºæœ‰æ•ˆåœ°ä½¿ç”¨äº†è¿™ç§å¹¶è¡Œçš„æ½œèƒ½ã€‚æœ‰æ—¶å€™è‰¯å¥½çš„è®¾è®¡åŸåˆ™ä¸å¾—ä¸å‘ç°å®åšå‡ºä¸€äº›è®©æ­¥ï¼Œæˆ‘ä»¬å¿…é¡»è®©è®¡ç®—æœºæ­£ç¡®æ— è¯¯çš„è¿è¡Œï¼Œé¦–å…ˆä¿è¯å¹¶å‘çš„æ­£ç¡®æ€§ï¼Œæ‰èƒ½å¤Ÿåœ¨æ­¤åŸºç¡€ä¸Šè°ˆé«˜æ•ˆï¼Œæ‰€ä»¥çº¿ç¨‹çš„å®‰å…¨é—®é¢˜æ˜¯ä¸€ä¸ªå¾ˆå€¼å¾—è€ƒè™‘çš„é—®é¢˜ã€‚\nè™½ç„¶ä¸€ç›´è¯´ java ä¸å¥½ï¼Œä½†æ˜¯ java å¸¦ç»™æˆ‘çš„å½±å“ç¡®å®æœ€å¤§çš„ï¼Œä» java è¿™ä¸ªå¹³å°é‡Œå­¦åˆ°äº†å¾ˆå¤šæœ‰ç”¨çš„ä¸œè¥¿ã€‚ç°åœ¨ golangï¼Œnodejsï¼Œpython ç­‰è¯­è¨€ï¼Œæ¯ä¸ªéƒ½æ˜¯åœ¨ä¸€æ–¹é¢èƒ½ç§’ javaï¼Œå¯æ˜¯ java ç”Ÿæ€å’Œ java å¯¹è½¯ä»¶è¡Œä¸šçš„å½±å“ï¼Œæ˜¯æ— æ³•è¢«è¶…è¶Šçš„ï¼Œjava è¿™ç§è¯­è¨€ï¼Œä»å‡ºç”Ÿåˆ°ç°åœ¨å‡ åå¹´äº†ï¼ŒåŸºæœ¬ä¸Šæ¯æ¬¡è½¯ä»¶æŠ€æœ¯çš„é©å‘½éƒ½æ²¡æœ‰è½ä¸‹ï¼Œæ¯æ¬¡éƒ½è§‰å¾—è¦æ­»çš„æ—¶å€™ï¼Œå¿½ç„¶é—´æŸ³æš—èŠ±æ˜ï¼Œæ¯æœ¨é€¢æ˜¥ã€‚å’³å’³ï¼Œæ‰¯è¿œäº†ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/java-memory-thread/","summary":"java å†…å­˜æ¨¡å‹å’Œçº¿ç¨‹  å¹¶å‘ä¸ä¸€å®šä¾èµ–å¤šçº¿ç¨‹ï¼Œä½†æ˜¯åœ¨ java é‡Œé¢è°ˆè®ºå¹¶å‘ï¼Œå¤§å¤šä¸çº¿ç¨‹è„±ä¸å¼€å…³ç³»ã€‚\n çº¿ç¨‹æ˜¯å¤§å¤šæ˜¯é¢è¯•éƒ½ä¼šé—®åˆ°çš„é—®é¢˜ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œçº¿ç¨‹æ˜¯æ¯”è¿›ç¨‹æ›´è½»é‡çº§çš„è°ƒåº¦å•ä½ï¼Œçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ã€‚ä¹‹å‰é¢è¯•çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è¿™æ ·å›ç­”ï¼Œè¿·è¿·ç³Šç³Šï¼Œæ²¡æœ‰ä¸€ä¸ªæ¸…æ™°çš„æ¦‚å¿µã€‚\nå¤§å­¦çš„å­¦ä¹ çš„æ—¶å€™ï¼Œå†™ C å’Œ C++ï¼Œè‡ªå·±éƒ½æ²¡æœ‰ç”¨è¿‡å¤šçº¿ç¨‹ï¼Œçœ‹è¿‡ä¸€ä¸ª Windows ç¼–ç¨‹çš„ä¹¦ï¼Œé‡Œé¢è®²å¤šçº¿ç¨‹çš„æ—¶å€™ï¼Œä¸€å¤§å †å¤§å†™çš„å­—æ¯ï¼Œçœ‹ç€ä¸€ç‚¹éƒ½ä¸çˆ½ï¼Œä¹Ÿæ˜¯æƒ­æ„§ã€‚åæ¥çš„å®ä¹ ï¼Œå†™ unityï¼Œunity çš„ C#ä½¿ç”¨çš„æ˜¯åç¨‹ã€‚åªæœ‰åœ¨åšäº† java åç«¯ä¹‹åï¼Œæ‰çŸ¥é“çº¿ç¨‹åˆ°åº•æ˜¯æ€ä¹ˆç”¨çš„ã€‚äº†è§£äº†java å†…å­˜æ¨¡å‹ä¹‹åï¼Œä»”ç»†çœ‹äº†ä¸€äº›èµ„æ–™ï¼Œå¯¹ java çº¿ç¨‹æœ‰äº†æ›´æ·±å…¥çš„è®¤è¯†ï¼Œæ•´ç†å†™æˆè¿™ç¯‡æ–‡ç« ï¼Œç”¨æ¥ä»¥åå‚è€ƒã€‚\n1 Java å†…å­˜æ¨¡å‹ Java è™šæ‹Ÿæœºè§„èŒƒè¯•å›¾å®šä¹‰ä¸€ç§ java å†…å­˜æ¨¡å‹æ¥å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œä»¥å®ç°è®© java ç¨‹åºåœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´æ€§å†…å­˜è®¿é—®çš„æ•ˆæœã€‚\njava å†…å­˜æ¨¡å‹çš„ä¸»è¦ç›®æ ‡æ˜¯å®šä¹‰ç¨‹åºä¸­å„ä¸ªå˜é‡çš„è®¿é—®è§„åˆ™ï¼Œå³åœ¨è™šæ‹Ÿæœºä¸­å°†å˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­å–å‡ºå˜é‡çš„åº•å±‚ç»†èŠ‚ã€‚ï¼ˆè¿™é‡Œæ‰€è¯´çš„å˜é‡åŒ…æ‹¬äº†å®ä¾‹å­—æ®µã€é™æ€å­—æ®µå’Œæ•°ç»„ç­‰ï¼Œä½†ä¸åŒ…æ‹¬å±€éƒ¨å˜é‡ä¸æ–¹æ³•å‚æ•°ï¼Œå› ä¸ºè¿™äº›æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œä¸è¢«å…±äº«ã€‚ï¼‰\n1.1 ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ java è§„å®šæ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ã€‚æ¯æ¡çº¿ç¨‹æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ã€‚\nçº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­çš„å˜é‡æ˜¯ä¸»å†…å­˜ä¸­è¯¥å˜é‡çš„å‰¯æœ¬ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ä¸­çš„å˜é‡ã€‚ä¸åŒçº¿ç¨‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚\n1.2 å†…å­˜ä¹‹é—´çš„äº¤äº’ å…³äºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„å…·ä½“äº¤äº’åè®®ï¼Œjava å†…å­˜æ¨¡å‹å®šä¹‰äº† 8 ä¸­æ“ä½œæ¥å®Œæˆï¼Œè™šæ‹Ÿæœºå®ç°çš„æ—¶å€™å¿…é¡»ä¿è¯æ¯ä¸ªæ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œä¸å¯åˆ†å‰²çš„ï¼ˆå¯¹äº long å’Œ double æœ‰ä¾‹å¤–ï¼‰\n lock é”å®šï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼Œä»£è¡¨ä¸€ä¸ªå˜é‡æ˜¯ä¸€æ¡çº¿ç¨‹ç‹¬å ã€‚ unlock è§£é”ï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼ŒæŠŠé”å®šçš„å˜é‡è§£é”ã€‚ read è¯»å–ï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼ŒæŠŠå˜é‡å€¼ä»ä¸»å†…å­˜ä¼ åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä¾› load ä½¿ç”¨ã€‚ load è½½å…¥ï¼šä½œç”¨å·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠä¸Šä¸€ä¸ª read åˆ°çš„å€¼æ”¾å…¥åˆ°å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ä¸­ã€‚ use ä½¿ç”¨ï¼šä½œç”¨äºå·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ã€‚ assignï¼šä½œç”¨äºå·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠæ‰§è¡Œå¼•æ“æ‰§è¡Œè¿‡çš„å€¼èµ‹ç»™å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ã€‚ store å­˜å‚¨ï¼šä½œç”¨äºå·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„å˜é‡å€¼ä¼ ç»™ä¸»å†…å­˜ï¼Œä¾› write ä½¿ç”¨ã€‚  è¿™äº›æ“ä½œè¦æ»¡è¶³ä¸€å®šçš„è§„åˆ™ã€‚","title":"Java å†…å­˜æ¨¡å‹å’Œçº¿ç¨‹"},{"content":"ä¸€äº›åŸºç¡€æ¦‚å¿µ\nEC2 äº‘æœåŠ¡å™¨ï¼Œå¯ä»¥ç†è§£æˆè™šæ‹Ÿæœºï¼Œæ–°å»ºä¸€ä¸ªå®ä¾‹ï¼Œå°±æ˜¯æ–°å»ºä¸€ä¸ªè™šæ‹Ÿæœºå¹¶å®‰è£…æ“ä½œç³»ç»Ÿï¼ˆLinux æˆ–è€… windowsï¼‰ã€‚\nVPC Virtual Private Cloudã€‚å¯ä»¥ç†è§£æˆæ•°æ®ä¸­å¿ƒï¼Œæœºæˆ¿ã€‚å¯¹äºç¾å¤‡æˆ–è€…åŒæ´»éœ€è¦çš„ï¼Œå¯ä»¥åˆ›å»ºä¸¤ä¸ª VPCã€‚\nå­ç½‘ ä¸€ä¸ª VPC é‡Œå¯ä»¥æœ‰å¤šä¸ªå­ç½‘ã€‚æ¯”å¦‚æŸæœºæ„çš„ä¸€ä¸ª VPC å¯ä»¥åŠå…¬ç½‘å’Œç”Ÿäº§ç½‘æ®µï¼Œæˆ–è€…å†…ç½‘å’Œå¤–ç½‘ã€‚ä¸€èˆ¬å¤–ç½‘å¯ä»¥è¢«è®¿é—®ï¼Œå†…ç½‘çš„è¯å¯ä»¥æ˜¯æ•°æ®åº“çš„æœåŠ¡å™¨ä¹‹ç±»çš„ã€‚\nIAM è§’è‰² ç±»ä¼¼äºç”¨æˆ·ï¼Œå¯ä»¥è¢«åˆ†é…æƒé™ã€‚\nå®‰å…¨ç»„ æ§åˆ¶è¿æ¥åˆ°æ­¤ EC2 å®ä¾‹çš„æµé‡ï¼Œæˆ–è€…æ˜¯æ§åˆ¶å¯¹å¤–æš´éœ²çš„ç«¯å£ã€‚\nCIDR CIDR ä¸»è¦æ˜¯ä¸€ä¸ªæŒ‰ä½çš„ã€åŸºäºå‰ç¼€çš„ï¼Œç”¨äºè§£é‡Š IP åœ°å€çš„æ ‡å‡†ã€‚å½“ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºè¿™äº›åœ°å€æ—¶ï¼Œå®ƒä»¬æœ‰ç€åœ¨å¼€å¤´éƒ¨åˆ†çš„ä¸€ç³»åˆ—ç›¸åŒçš„ä½ã€‚\nIPv4 çš„ CIDR åœ°å€å—çš„è¡¨ç¤ºæ–¹æ³•å’Œ IPv4 åœ°å€çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ç›¸ä¼¼çš„ï¼šç”±å››éƒ¨åˆ†ç»„æˆçš„ç‚¹åˆ†åè¿›åˆ¶åœ°å€ï¼Œåè·Ÿä¸€ä¸ªæ–œçº¿ï¼Œæœ€åæ˜¯èŒƒå›´åœ¨ 0 åˆ° 32 ä¹‹é—´çš„ä¸€ä¸ªæ•°å­—ï¼šA.B.C.D/Nã€‚ç‚¹åˆ†åè¿›åˆ¶çš„éƒ¨åˆ†å’Œ IPv4 åœ°å€ä¸€æ ·æ˜¯ä¸€ä¸ªè¢«åˆ†æˆå››ä¸ªå…«ä½ä½ç»„çš„ 32 ä½äºŒè¿›åˆ¶æ•°ã€‚æ–œçº¿åé¢çš„æ•°å­—å°±æ˜¯å‰ç¼€é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ä»å·¦åˆ°å³ï¼Œè¢«åœ°å€å—é‡Œçš„åœ°å€æ‰€å…±äº«çš„ä½çš„æ•°ç›®ã€‚\nåè¿›åˆ¶éƒ¨åˆ†æœ‰æ—¶ä¼šè¢«çœç•¥ï¼Œå› æ­¤ï¼Œ/20 å°±è¡¨ç¤ºä¸€ä¸ªå‰ç¼€é•¿åº¦æ˜¯ 20 çš„ CIDR åœ°å€å—ã€‚å¦‚æœä¸€ä¸ª IP åœ°å€çš„å‰ N ä½ä¸ä¸€ä¸ª CIDR åœ°å€å—çš„å‰ç¼€æ˜¯ç›¸åŒçš„è¯ï¼Œé‚£ä¹ˆå°±è¯´è¿™ä¸ªåœ°å€å±äºè¿™ä¸ª CIDR åœ°å€å—ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸ CIDR åœ°å€å—çš„å‰ç¼€åŒ¹é…ã€‚æ‰€ä»¥ï¼Œè¦ç†è§£ CIDRï¼Œå°±è¦æŠŠåœ°å€å†™æˆäºŒè¿›åˆ¶çš„å½¢å¼ã€‚\n","permalink":"https://zhenfeng-zhu.github.io/post/aws-md/","summary":"ä¸€äº›åŸºç¡€æ¦‚å¿µ\nEC2 äº‘æœåŠ¡å™¨ï¼Œå¯ä»¥ç†è§£æˆè™šæ‹Ÿæœºï¼Œæ–°å»ºä¸€ä¸ªå®ä¾‹ï¼Œå°±æ˜¯æ–°å»ºä¸€ä¸ªè™šæ‹Ÿæœºå¹¶å®‰è£…æ“ä½œç³»ç»Ÿï¼ˆLinux æˆ–è€… windowsï¼‰ã€‚\nVPC Virtual Private Cloudã€‚å¯ä»¥ç†è§£æˆæ•°æ®ä¸­å¿ƒï¼Œæœºæˆ¿ã€‚å¯¹äºç¾å¤‡æˆ–è€…åŒæ´»éœ€è¦çš„ï¼Œå¯ä»¥åˆ›å»ºä¸¤ä¸ª VPCã€‚\nå­ç½‘ ä¸€ä¸ª VPC é‡Œå¯ä»¥æœ‰å¤šä¸ªå­ç½‘ã€‚æ¯”å¦‚æŸæœºæ„çš„ä¸€ä¸ª VPC å¯ä»¥åŠå…¬ç½‘å’Œç”Ÿäº§ç½‘æ®µï¼Œæˆ–è€…å†…ç½‘å’Œå¤–ç½‘ã€‚ä¸€èˆ¬å¤–ç½‘å¯ä»¥è¢«è®¿é—®ï¼Œå†…ç½‘çš„è¯å¯ä»¥æ˜¯æ•°æ®åº“çš„æœåŠ¡å™¨ä¹‹ç±»çš„ã€‚\nIAM è§’è‰² ç±»ä¼¼äºç”¨æˆ·ï¼Œå¯ä»¥è¢«åˆ†é…æƒé™ã€‚\nå®‰å…¨ç»„ æ§åˆ¶è¿æ¥åˆ°æ­¤ EC2 å®ä¾‹çš„æµé‡ï¼Œæˆ–è€…æ˜¯æ§åˆ¶å¯¹å¤–æš´éœ²çš„ç«¯å£ã€‚\nCIDR CIDR ä¸»è¦æ˜¯ä¸€ä¸ªæŒ‰ä½çš„ã€åŸºäºå‰ç¼€çš„ï¼Œç”¨äºè§£é‡Š IP åœ°å€çš„æ ‡å‡†ã€‚å½“ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºè¿™äº›åœ°å€æ—¶ï¼Œå®ƒä»¬æœ‰ç€åœ¨å¼€å¤´éƒ¨åˆ†çš„ä¸€ç³»åˆ—ç›¸åŒçš„ä½ã€‚\nIPv4 çš„ CIDR åœ°å€å—çš„è¡¨ç¤ºæ–¹æ³•å’Œ IPv4 åœ°å€çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ç›¸ä¼¼çš„ï¼šç”±å››éƒ¨åˆ†ç»„æˆçš„ç‚¹åˆ†åè¿›åˆ¶åœ°å€ï¼Œåè·Ÿä¸€ä¸ªæ–œçº¿ï¼Œæœ€åæ˜¯èŒƒå›´åœ¨ 0 åˆ° 32 ä¹‹é—´çš„ä¸€ä¸ªæ•°å­—ï¼šA.B.C.D/Nã€‚ç‚¹åˆ†åè¿›åˆ¶çš„éƒ¨åˆ†å’Œ IPv4 åœ°å€ä¸€æ ·æ˜¯ä¸€ä¸ªè¢«åˆ†æˆå››ä¸ªå…«ä½ä½ç»„çš„ 32 ä½äºŒè¿›åˆ¶æ•°ã€‚æ–œçº¿åé¢çš„æ•°å­—å°±æ˜¯å‰ç¼€é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ä»å·¦åˆ°å³ï¼Œè¢«åœ°å€å—é‡Œçš„åœ°å€æ‰€å…±äº«çš„ä½çš„æ•°ç›®ã€‚\nåè¿›åˆ¶éƒ¨åˆ†æœ‰æ—¶ä¼šè¢«çœç•¥ï¼Œå› æ­¤ï¼Œ/20 å°±è¡¨ç¤ºä¸€ä¸ªå‰ç¼€é•¿åº¦æ˜¯ 20 çš„ CIDR åœ°å€å—ã€‚å¦‚æœä¸€ä¸ª IP åœ°å€çš„å‰ N ä½ä¸ä¸€ä¸ª CIDR åœ°å€å—çš„å‰ç¼€æ˜¯ç›¸åŒçš„è¯ï¼Œé‚£ä¹ˆå°±è¯´è¿™ä¸ªåœ°å€å±äºè¿™ä¸ª CIDR åœ°å€å—ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸ CIDR åœ°å€å—çš„å‰ç¼€åŒ¹é…ã€‚æ‰€ä»¥ï¼Œè¦ç†è§£ CIDRï¼Œå°±è¦æŠŠåœ°å€å†™æˆäºŒè¿›åˆ¶çš„å½¢å¼ã€‚","title":"aws.md"},{"content":" è½¯ä»¶å·¥ç¨‹å¸ˆ\n ç¼–ç¨‹å°è¯­ç§çˆ±å¥½è€…ï¼Œç²¾é€šå„ç§è¯­è¨€çš„hello worldï¼Œç›®å‰æ²‰è¿·Clojureã€elixir Get Startedå·¥ç¨‹å¸ˆï¼Œæ­¢æ­¥äºå¤§é‡æ¡†æ¶å’ŒåŒ…çš„readme åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œå¶å°”å†™ä¸€äº›å‰ç«¯ï¼Œä¼ªå…¨æ ˆ ä¹Ÿæ˜¯ä¸€åæ•°æ®å·¥ç¨‹å¸ˆï¼Œæœç€SQL Boyè¿›åŒ–   Skills Languages, software and services used:\n Python | Django Go | Gin Node.js | Vue.js MongoDB | Mysql Docker | K8S Git Hugo | Markdown Hive | Flink  Tools  VSCode Postman  Education åŒ—äº¬é‚®ç”µå¤§å­¦\nYou can also find me on:  çŸ¥ä¹ å¾®åš twitter  ","permalink":"https://zhenfeng-zhu.github.io/about/","summary":" è½¯ä»¶å·¥ç¨‹å¸ˆ\n ç¼–ç¨‹å°è¯­ç§çˆ±å¥½è€…ï¼Œç²¾é€šå„ç§è¯­è¨€çš„hello worldï¼Œç›®å‰æ²‰è¿·Clojureã€elixir Get Startedå·¥ç¨‹å¸ˆï¼Œæ­¢æ­¥äºå¤§é‡æ¡†æ¶å’ŒåŒ…çš„readme åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œå¶å°”å†™ä¸€äº›å‰ç«¯ï¼Œä¼ªå…¨æ ˆ ä¹Ÿæ˜¯ä¸€åæ•°æ®å·¥ç¨‹å¸ˆï¼Œæœç€SQL Boyè¿›åŒ–   Skills Languages, software and services used:\n Python | Django Go | Gin Node.js | Vue.js MongoDB | Mysql Docker | K8S Git Hugo | Markdown Hive | Flink  Tools  VSCode Postman  Education åŒ—äº¬é‚®ç”µå¤§å­¦\nYou can also find me on:  çŸ¥ä¹ å¾®åš twitter  ","title":"About Me"},{"content":"","permalink":"https://zhenfeng-zhu.github.io/tags/","summary":"","title":"Tags"}]