<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Go Data</title><meta name=keywords content><meta name=description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta name=author content="Lucas"><link rel=canonical href=https://zhenfeng-zhu.github.io/><link href=/assets/css/stylesheet.min.8d754ccb970fef4a6d8e5b0441e01d76a0d3530c6777067a1b2ca581aa1b4af7.css integrity="sha256-jXVMy5cP70ptjlsEQeAddqDTUwxndwZ6GyylgaobSvc=" rel="preload stylesheet" as=style><link rel=icon href=https://zhenfeng-zhu.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zhenfeng-zhu.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zhenfeng-zhu.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://zhenfeng-zhu.github.io/apple-touch-icon.png><link rel=mask-icon href=https://zhenfeng-zhu.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.81.0"><link rel=alternate type=application/rss+xml href=https://zhenfeng-zhu.github.io/index.xml><link rel=alternate type=application/json href=https://zhenfeng-zhu.github.io/index.json><meta property="og:title" content="Go Data"><meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><meta property="og:type" content="website"><meta property="og:url" content="https://zhenfeng-zhu.github.io/"><meta property="og:image" content="https://zhenfeng-zhu.github.io/papermod-cover.png"><meta property="og:updated_time" content="2021-03-10T20:09:11+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zhenfeng-zhu.github.io/papermod-cover.png"><meta name=twitter:title content="Go Data"><meta name=twitter:description content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Go Data","url":"https://zhenfeng-zhu.github.io","description":"Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod","thumbnailUrl":"https://zhenfeng-zhu.github.io/favicon.ico","sameAs":["https://github.com/zhenfeng-zhu","index.xml"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://zhenfeng-zhu.github.io accesskey=h title="Go Data (Alt + H)">Go Data</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://zhenfeng-zhu.github.io/about title=About><span>About</span></a></li><li><a href=https://zhenfeng-zhu.github.io/search/ title=ğŸ”><span>ğŸ”</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2>overview-of-openfaas</h2></header><section class=entry-content><p>OpenFaaSæ¦‚è§ˆ æ— æœåŠ¡å™¨å‡½æ•°å˜å¾—ç®€å•ã€‚
å‡½æ•°ç›‘è§†å™¨ ä½ å¯ä»¥é€šè¿‡æ·»åŠ å‡½æ•°ç›‘è§†å™¨ (ä¸€ä¸ªå°å‹çš„Golang HTTPæœåŠ¡)æŠŠä»»ä½•ä¸€ä¸ªDockeré•œåƒå˜æˆæ— æœåŠ¡å™¨å‡½æ•°ã€‚ å‡½æ•°ç›‘è§†å™¨æ˜¯å…è®¸HTTPè¯·æ±‚é€šè¿‡STDINè½¬å‘åˆ°ç›®æ ‡è¿›ç¨‹çš„å…¥å£ç‚¹ã€‚å“åº”ä¼šä»ä½ åº”ç”¨å†™å…¥STDOUTè¿”å›ç»™è°ƒç”¨è€…ã€‚ APIç½‘å…³/UIé—¨æˆ· APIç½‘å…³ä¸ºä½ çš„å‡½æ•°æä¾›å¤–éƒ¨è·¯ç”±ï¼Œå¹¶é€šè¿‡Prometheusæ”¶é›†äº‘åŸç”ŸæŒ‡æ ‡ã€‚ ä½ çš„APIç½‘å…³å°†ä¼šæ ¹æ®éœ€æ±‚æ›´æ”¹Docker Swarm æˆ– Kubernetes APIä¸­çš„æœåŠ¡å‰¯æœ¬æ•°æ¥å®ç°ä¼¸ç¼©æ€§ã€‚ UIæ˜¯å…è®¸ä½ åœ¨æµè§ˆå™¨ä¸­è°ƒç”¨å‡½æ•°æˆ–è€…æ ¹æ®éœ€è¦åˆ›å»ºæ–°çš„å‡½æ•°ã€‚ APIç½‘å…³æ˜¯ä¸€ä¸ªRESTfulå½¢å¼çš„å¾®æœåŠ¡ï¼Œä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹Swaggeræ–‡æ¡£ã€‚
å‘½ä»¤è¡Œ Dockerä¸­çš„ä»»ä½•å®¹å™¨æˆ–è€…è¿›ç¨‹éƒ½å¯ä»¥æ˜¯FaaSä¸­çš„ä¸€ä¸ªæ— æœåŠ¡å™¨å‡½æ•°ã€‚ä½¿ç”¨FaaS CLI ï¼Œä½ å¯ä»¥å¿«é€Ÿçš„éƒ¨ç½²å‡½æ•°ã€‚
å¯ä»¥ä»Node.js, Python, Go æˆ–è€…æ›´å¤šçš„è¯­è¨€æ¨¡æ¿ä¸­åˆ›å»ºæ–°çš„å‡½æ•°ã€‚å¦‚æœä½ æ— æ³•æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„æ¨¡æ¿ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ä¸€ä¸ªDockerfileã€‚
CLIå®é™…ä¸Šæ˜¯APIç½‘å…³çš„ä¸€ä¸ªRESTfulå®¢æˆ·ç«¯ã€‚
åœ¨é…ç½®å¥½OpenFaaSä¹‹åï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå¼€å§‹å­¦ä¹ CLIå¼€å§‹å­¦ä¹ CLI
å‡½æ•°ç¤ºä¾‹ ä½ å¯ä»¥é€šè¿‡ ä½¿ç”¨FaaS-CLIå’Œå…¶å†…ç½®çš„æ¨¡æ¿åˆ›å»ºæ–°å‡½æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨Dockerä¸­ä½¿ç”¨Windowsæˆ–Linuxçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚
Pythonç¤ºä¾‹ï¼š import requests def handle(req): r = requests.get(req, timeout = 1) print(req +" => " + str(r.status_code)) handler.py
Node.jsç¤ºä¾‹ï¼š "use strict" module.exports = (callback, context) => { callback(null, {"message": "You said: " + context}) } handler....</p></section><footer class=entry-footer>July 26, 2018&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to overview-of-openfaas" href=https://zhenfeng-zhu.github.io/posts/overview-of-openfaas/></a></article><article class=post-entry><header class=entry-header><h2>OpenFaaS on Rancher 2.0</h2></header><section class=entry-content><p>è¿™æ˜¯ä¸€ç¯‡å…³äºå¦‚ä½•åœ¨Rancher 2.0ä¸Šåˆ›å»ºOpenFaaSæ ˆçš„æ–‡ç« ã€‚æˆ‘å‡è®¾ä½ å·²ç»å‡†å¤‡å¥½äº†Rancher 2.0é›†ç¾¤ï¼Œå¦‚æœæ²¡æœ‰è¯·æŒ‰ç…§å®˜æ–¹æ–‡æ¡£åˆ›å»ºä¸€ä¸ªã€‚
ä¸‹é¢çš„è§†é¢‘å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºOpenFaaSæ ˆï¼Œå¹¶åœ¨å®é™…ä¸­ä½¿ç”¨ï¼š
https://www.youtube.com/watch?v=kX8mXv5d1qg&feature=youtu.be
è¿™é‡Œæ˜¯åˆ›å»ºæ ˆçš„compose.ymlæ–‡ä»¶ï¼š
version: "2" services: alertmanager: image: functions/alertmanager:latest labels: io.rancher.container.pull_image: always stop_signal: SIGTERM restart: always stdin_open: true tty: true scale: 1 faas-rancher: environment: - CATTLE_URL=${CATTLE_URL} - CATTLE_ACCESS_KEY=${CATTLE_ACCESS_KEY} - CATTLE_SECRET_KEY=${CATTLE_SECRET_KEY} - FUNCTION_STACK_NAME=faas-functions image: kenfdev/faas-rancher:v3 labels: io.rancher.container.pull_image: always stop_signal: SIGTERM restart: always stdin_open: true tty: true scale: 1 gateway: environment: - functions_provider_url=http://faas-rancher:8080/ image: functions/gateway:0.6.6-beta1 labels: io.rancher.container.pull_image: always ports: - 8080:8080/tcp stop_signal: SIGTERM restart: always stdin_open: true tty: true scale: 1 prometheus: command: [-config....</p></section><footer class=entry-footer>July 26, 2018&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to OpenFaaS on Rancher 2.0" href=https://zhenfeng-zhu.github.io/posts/openfaas-on-rancher/></a></article><article class=post-entry><header class=entry-header><h2>openfaas-workshop-lab4</h2></header><section class=entry-content><p>Lab 4 - æ·±å…¥å‡½æ•° åœ¨å¼€å§‹æœ¬å®éªŒä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼ŒæŠŠ lab3 çš„æ–‡ä»¶æ‹·è´åˆ° lab4 é‡Œï¼š
$ cp -r lab3 lab4 \ && cd lab4 é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥é…ç½® It is useful to be able to control how a function behaves at runtime, we can do that in at least two ways:
æ§åˆ¶å‡½æ•°åœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºå¾ˆæœ‰ç”¨ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®ç°ï¼š
åœ¨éƒ¨ç½²æ—¶ åœ¨éƒ¨ç½²æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ æˆ‘ä»¬åœ¨ Lab3 æ—¶ç”¨äº† write_debug æ¥åšâ€”â€”ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®ä½ æƒ³è¦çš„ä»»ä½•è‡ªå®šä¹‰çš„ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼šå¦‚æœä½ æƒ³ä¸º hello world å‡½æ•°é…ç½®ä¸€ç§è¯­è¨€ï¼Œå¯ä»¥å¼•å…¥ä¸€ä¸ª spoken_language å˜é‡ã€‚
ä½¿ç”¨ HTTP ä¸Šä¸‹æ–‡â€”â€”querystring / headers ä½¿ç”¨ querystring å’Œ HTTP headers å¦ä¸€ä¸ªæ›´ä¸ºåŠ¨æ€çš„é€‰é¡¹æ˜¯å¯ä»¥åœ¨æ¯ä¸ªè¯·æ±‚çº§åˆ«ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œå³ä½¿ç”¨ querystrings å’Œ HTTP headersï¼Œè¿™ä¸¤è€…éƒ½å¯ä»¥é€šè¿‡ faas-cli æˆ–è€… curl ä¼ é€’ã€‚...</p></section><footer class=entry-footer>July 2, 2018&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to openfaas-workshop-lab4" href=https://zhenfeng-zhu.github.io/posts/openfaas-workshop-lab4/></a></article><article class=post-entry><header class=entry-header><h2>ubuntu-docker-sudo</h2></header><section class=entry-content><p>sudo chown "$USER":"$USER" /home/"$USER"/.docker -R sudo chmod g+rwx "/home/$USER/.docker" -R https://api.finochat.com/api/v1/platform/apps/RETAIL/profiles/@custom:finolabs.com.cn/avatar?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmY2lkIjoiQHBjdXN0b20tMTA6Zmlub2xhYnMuY29tLmNuIiwiaXNzIjoieUNkNXVhaWRhWU4zc1pwTTdHU2V5WWVqSGdlN3hSa1EiLCJpYXQiOjE1MzAyNjk5NDh9.UUsO2xw1f8cA6FiG1bNAGyYQh-vh32hKHKSJ2EKZicI http://localhost:3000/api/v1/platform/apps/RETAIL/profiles/@custom:finolabs.com.cn/avatar?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmY2lkIjoiQHBjdXN0b20tMTA6Zmlub2xhYnMuY29tLmNuIiwiaXNzIjoieUNkNXVhaWRhWU4zc1pwTTdHU2V5WWVqSGdlN3hSa1EiLCJpYXQiOjE1MzAyNjk5NDh9.UUsO2xw1f8cA6FiG1bNAGyYQh-vh32hKHKSJ2EKZicI ...</p></section><footer class=entry-footer>June 29, 2018&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to ubuntu-docker-sudo" href=https://zhenfeng-zhu.github.io/posts/ubuntu-docker-sudo/></a></article><article class=post-entry><header class=entry-header><h2>openfaas-workshop-lab3</h2></header><section class=entry-content><p>Lab3 - å‡½æ•°çš„ä»‹ç» åœ¨å¼€å§‹æœ¬å®éªŒä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼š
$ mkdir -p lab3 \ && cd lab3 åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•° åˆ›å»ºå‡½æ•°æœ‰ä¸¤ç§æ–¹å¼ï¼š
ä½¿ç”¨å†…ç½®çš„æˆ–ç¤¾åŒºæä¾›çš„ä»£ç æœ«ç­åˆ›å»ºä¸€ä¸ªå‡½æ•°è„šæ‰‹æ¶ï¼ˆé»˜è®¤ï¼‰ å°†ç°æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸ºå‡½æ•°ï¼ˆé«˜çº§ï¼‰ ç”Ÿæˆä¸€ä¸ªæ–°å‡½æ•° åœ¨ä½¿ç”¨æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ä¹‹å‰ï¼Œé¦–å…ˆç¡®è®¤ä½ å·²ç»ä» Github ä¸Šæ‹‰ä¸‹æ¥æ¨¡æ¿æ–‡ä»¶ï¼š
$ faas-cli template pull Fetch templates from repository: https://github.com/openfaas/templates.git Attempting to expand templates from https://github.com/openfaas/templates.git Fetched 11 template(s) : [csharp dockerfile go go-armhf node node-arm64 node-armhf python python-armhf python3 ruby] ä¹‹åæ‰¾åˆ°å¯ç”¨çš„è¯­è¨€ï¼š
$ faas-cli new --list Languages available as templates: - csharp - dockerfile - go - go-armhf - node - node-arm64 - node-armhf - python - python-armhf - python3 - ruby Or alternatively create a folder containing a Dockerfile, then pick the "Dockerfile" lang type in your YAML file....</p></section><footer class=entry-footer>June 28, 2018&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to openfaas-workshop-lab3" href=https://zhenfeng-zhu.github.io/posts/openfaas-workshop-lab3/></a></article><article class=post-entry><header class=entry-header><h2>openfaas-workshop-lab2</h2></header><section class=entry-content><p>Lab2 æµ‹è¯•ä¸€ä¸‹ åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼š
$ mkdir -p lab2 \ && cd lab2 ä½¿ç”¨UIç•Œé¢ ä½ ç°åœ¨å¯ä»¥æ‰“å¼€http://127.0.0.1:8080æµ‹è¯•OpenFaaSçš„UIã€‚å¦‚æœæ˜¯åœ¨ä¸€å°LInuxè™šæ‹Ÿæœºä¸­éƒ¨ç½²ï¼Œå°†127.0.0.1æ›¿æ¢ä¸ºè¯¥è™šæ‹Ÿæœºçš„ipåœ°å€ã€‚
å¤‡æ³¨ï¼šæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯127.0.0.1è€Œä¸æ˜¯localhostï¼Œå› ä¸ºåœ¨ä¸€äº›Linuxå‘è¡Œç‰ˆä¸­IPv4/IPv6å‡ºç°ä¸å…¼å®¹ã€‚
æˆ‘ä»¬å¯ä»¥éƒ¨ç½²ä¸€äº›æ ·ä¾‹ä»£ç æ¥è¿›è¡Œæµ‹è¯•ï¼š
faas-cli deploy -f https://raw.githubusercontent.com/openfaas/faas/master/stack.yml ä½ å¯ä»¥åœ¨UIé‡Œé¢é€‰æ‹©Markdownå‡½æ•°è¿›è¡Œæµ‹è¯•ï¼Œè¿™ä¸ªå‡½æ•°å°†markdownè½¬æ¢ä¸ºhtmlã€‚
åœ¨Requestä¸€æ ä¸­è¾“å…¥ï¼š
## The **OpenFaaS** _workshop_ ç‚¹å‡»INVOKEæŒ‰é’®ï¼Œç„¶ååœ¨å±å¹•ä¸‹æ–¹è§‚å¯Ÿå“åº”ã€‚
å³ï¼š
&lt;h2>The &lt;strong>OpenFaaS&lt;/strong> &lt;em>workshop&lt;/em>&lt;/h2> ä½ åŒæ—¶ä¹Ÿä¼šå‘ç°åœ¨å…¶ä»–æ ä¸­çš„å€¼ï¼š
Status - å‡½æ•°æ˜¯å¦å¯ä»¥è¿è¡Œçš„çŠ¶æ€ã€‚å¦‚æœåœ¨UIä¸­çš„çŠ¶æ€ä¸å¯ç”¨ï¼Œä½ å°†ä¸èƒ½invokeå‡½æ•°ã€‚ Replicas - è¿è¡Œåœ¨swarmé›†ç¾¤ä¸­çš„å‡½æ•°å‰¯æœ¬ã€‚ Image - å‘å¸ƒåœ¨docker hubæˆ–å…¶ä»–dockerä»“åº“ä¸­çš„é•œåƒåå­—ã€‚ Invocation count - 5ç§’æ›´æ–°ä¸€æ¬¡ï¼Œæ˜¾ç¤ºè¯¥å‡½æ•°å·²ç»è¢«è§¦å‘çš„æ¬¡æ•°ã€‚ ç‚¹å‡»INVOKEæŒ‰é’®å‡ æ¬¡ï¼Œå¯ä»¥çœ‹åˆ°Invocation countåœ¨å¢åŠ ã€‚
é€šè¿‡å‡½æ•°å•†åº—è¿›è¡Œéƒ¨ç½² ä½ ä¹Ÿå¯ä»¥ä»OpenFaaså•†åº—ä¸­éƒ¨ç½²ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå•†åº—æ˜¯æ˜¯ç¤¾åŒºæ•´ç†çš„ä¸€äº›å…è´¹å‡½æ•°é›†åˆã€‚
ç‚¹å‡»Deploy New Function ç‚¹å‡»From Store ç‚¹å‡»Figletæˆ–è€…ä»æœç´¢æ ä¸­è¿›å…¥figletï¼Œç„¶åç‚¹å‡»Deploy Figletå‡½æ•°å°†ä¼šåœ¨å·¦ä¾§çš„å‡½æ•°åˆ—è¡¨ä¸­ã€‚ç¨ç­‰å‡ åˆ†é’Ÿï¼Œç­‰å¾…å‡½æ•°ä»Docker Hubä¸­ä¸‹è½½ã€‚ç„¶åå°±åƒMarkdownå‡½æ•°ä¸€æ ·ï¼Œè¾“å…¥ä¸€äº›æ–‡å­—ï¼Œç‚¹å‡»INVOKEã€‚
ä¸€ä¸ªASCIIçš„logoå°†ä¼šç”Ÿæˆï¼š
_ ___ ___ _ __ / |/ _ \ / _ (_)/ / | | | | | | | |/ / | | |_| | |_| / /_ |_|\___/ \___/_/(_) å­¦ä¹ CLI ä½ ç°åœ¨å¯ä»¥æµ‹è¯•CLIï¼Œä½†æ˜¯é¦–å…ˆå…ˆåšä¸€äº›ç½‘å…³URLçš„è¯´æ˜ï¼š...</p></section><footer class=entry-footer>June 27, 2018&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to openfaas-workshop-lab2" href=https://zhenfeng-zhu.github.io/posts/openfaas-workshop-lab2/></a></article><article class=post-entry><header class=entry-header><h2>è¯‘ï¼šopenfaas-workshop-Lab1</h2></header><section class=entry-content><p>ä»Šå¤©å¤§å¤šæ•°å…¬å¸åœ¨å¼€å‘åº”ç”¨ç¨‹åºå¹¶å°†å…¶éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„æ—¶å€™ï¼Œæ— è®ºæ˜¯é€‰æ‹©å…¬æœ‰äº‘è¿˜æ˜¯ç§æœ‰çš„æ•°æ®ä¸­å¿ƒï¼Œéƒ½éœ€è¦æå‰äº†è§£ç©¶ç«Ÿéœ€è¦å¤šå°‘å°æœåŠ¡å™¨ã€å¤šå¤§å®¹é‡çš„å­˜å‚¨å’Œæ•°æ®åº“çš„åŠŸèƒ½ç­‰ã€‚å¹¶éœ€è¦éƒ¨ç½²è¿è¡Œåº”ç”¨ç¨‹åºå’Œä¾èµ–çš„è½¯ä»¶åˆ°åŸºç¡€è®¾æ–½ä¹‹ä¸Šã€‚å‡è®¾æˆ‘ä»¬ä¸æƒ³åœ¨è¿™äº›ç»†èŠ‚ä¸ŠèŠ±è´¹ç²¾åŠ›ï¼Œæ˜¯å¦æœ‰ä¸€ç§ç®€å•çš„æ¶æ„æ¨¡å‹èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬è¿™ç§æƒ³æ³•ï¼Ÿè¿™ä¸ªç­”æ¡ˆå·²ç»å­˜åœ¨ï¼Œè¿™å°±æ˜¯ä»Šå¤©è½¯ä»¶æ¶æ„ä¸–ç•Œä¸­æ–°é²œä½†æ˜¯å¾ˆçƒ­é—¨çš„ä¸€ä¸ªè¯é¢˜â€”â€”Serverlessï¼ˆæ— æœåŠ¡å™¨ï¼‰æ¶æ„ã€‚
ç›®å‰å·²ç»æœ‰ä¸€æ‰¹ä¼˜ç§€çš„serverlessæ¶æ„å¼€æºé¡¹ç›®ï¼ŒOpenFaaså°±æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ã€‚å¥ˆä½•å…¶ä¸­çš„ä¸­æ–‡èµ„æ–™æ¯”è¾ƒå°‘ï¼Œæˆ‘ä¹Ÿæ˜¯è¾¹å­¦è¾¹ç¿»è¯‘ï¼Œå¸Œæœ›èƒ½å¤ŸæŠ›ç –å¼•ç‰ï¼ŒåŠ©åŠ›serverlessçš„å‘å±•ã€‚
è¿™æ˜¯ä¸€ä¸ªè‡ªå­¦ç ”è®¨ä¼šï¼Œå­¦ä¹ å¦‚ä½•æ„å»ºã€éƒ¨ç½²å’Œè¿è¡ŒOpenFaas å‡½æ•°ã€‚
Lab1 - OpenFaasçš„å‡†å¤‡å·¥ä½œ OpenFaaså¯ä»¥åœ¨Docker Swarmå’ŒKubernetesçš„è¿‡å‡ ä¸ªä¸»è¦å¹³å°ä¹‹ä¸Šè¿è¡Œã€‚åœ¨æ­¤æ•™ç¨‹é‡Œï¼Œæˆ‘ä»¬å°†ä¼šåœ¨çš„æ‚¨æœ¬åœ°ç”µè„‘ä½¿ç”¨Docker Swarmæ¥å…¥é—¨ã€‚
é¢„å¤‡æ¡ä»¶ Docker Mac
Docker CE for Mac Edge Edition Windows
ä»…é’ˆå¯¹windows10 ä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆ å®‰è£…Docker CE for Windows å®‰è£…Git Bash å¤‡æ³¨ï¼šæ‰€æœ‰æ­¥éª¤ä¸­è¯·ä½¿ç”¨Git Bashï¼šä¸è¦å°è¯•ä½¿ç”¨WSLæˆ–Bash for Windowsã€‚
Linux - Ubuntu æˆ– Debian
Docker CE for Linux ä½ å¯ä»¥ä»Docker Storeä¸­å®‰è£…Docker CE
è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹çš„Docker Swarm OpenFaasåœ¨Docker Swarmå’ŒKubernetesä¸Šå·¥ä½œã€‚å› ä¸ºDocker Swarmå¾ˆå®¹æ˜“è®¾ç½®ï¼Œæ‰€ä»¥åœ¨æ­¤Workshopä¸­æˆ‘ä»¬ä½¿ç”¨Docker Swarmã€‚åœ¨æ–‡æ¡£ä¸­æœ‰ä»–ä»¬ä¸¤ä¸ªçš„æŒ‡å—ã€‚
åœ¨ä½ çš„ç¬”è®°æœ¬æˆ–è™šæ‹Ÿæœºä¸­è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹çš„Docker Swarmï¼š
$ docker swarm init å¦‚æœè¿è¡Œæ­¤å‘½ä»¤å‡ºé”™ï¼ŒåŠ ä¸Š â€“advertise-addr ä½ çš„IP å‚æ•°ã€‚...</p></section><footer class=entry-footer>June 25, 2018&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to è¯‘ï¼šopenfaas-workshop-Lab1" href=https://zhenfeng-zhu.github.io/posts/workshop-lab1/></a></article><article class=post-entry><header class=entry-header><h2>openfaas</h2></header><section class=entry-content><p>å¯¹äºmacç¯å¢ƒæ¥è®²ï¼Œé¦–å…ˆå®‰è£…æ–°ç‰ˆdocker:
brew cask install docker ç„¶åå¯åŠ¨dockerã€‚
å‘½ä»¤è¡Œç™»é™†docker hub
docker login å¯åŠ¨docker swarm
docker swarm init å®‰è£…faas-cli
brew install faas-cli cloneä¸‹æ¥ä»£ç ï¼š
git clone https://github.com/openfaas/faas ç„¶åæ‰§è¡Œ
./deploy_stack.sh éƒ¨ç½²ä¸€äº›ç¤ºä¾‹
faas-cli deploy -f https://raw.githubusercontent.com/openfaas/faas/master/stack.yml ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:8080 å°±å¯ä»¥çœ‹åˆ°uiç•Œé¢äº†ã€‚
å®‰è£…grafanaè¿›è¡Œç›‘æ§
docker service create -d \ --name=grafana \ --publish=3000:3000 \ --network=func_functions \ stefanprodan/faas-grafana:4.6.3 æµè§ˆå™¨æ‰“å¼€ï¼š http://127.0.0.1:3000 ç™»é™†admin admin æŸ¥çœ‹ã€‚
å¸¸ç”¨å‘½ä»¤ï¼š
$ faas-cli new --list $ faas-cli build -f ./hello-openfaas.yml $ faas-cli push -f ./hello-openfaas.yml $ faas-cli deploy -f ....</p></section><footer class=entry-footer>June 24, 2018&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to openfaas" href=https://zhenfeng-zhu.github.io/posts/openfaas/></a></article><article class=post-entry><header class=entry-header><h2>java-reactive-web</h2></header><section class=entry-content><p>Spring web mvcï¼š ä¼ ç»Ÿservlet web
spring web fluxï¼š Reactive web
ç¼–ç¨‹æ¨¡å¼ï¼š non-blocking éé˜»å¡ nioï¼šåŒæ­¥ï¼Ÿå¼‚æ­¥ï¼Ÿ å¹¶è¡Œæ¨¡å‹ sync åŒæ­¥ async å¼‚æ­¥ Reactive æ¦‚å¿µ Reactive programmingï¼š å“åº”å¼ç¼–ç¨‹
InÂ computing,Â reactive programmingÂ is a declarativeÂ programming paradigmÂ concerned withÂ data streamsÂ and the propagation of change. With this paradigm it is possible to express static (e.g. arrays) or dynamic (e.g. event emitters)Â data streamsÂ with ease, and also communicate that an inferred dependency within the associatedÂ execution modelÂ exists, which facilitates the automatic propagation of the changed data flow....</p></section><footer class=entry-footer>June 23, 2018&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to java-reactive-web" href=https://zhenfeng-zhu.github.io/posts/java-reactive-web/></a></article><article class=post-entry><header class=entry-header><h2>kafka</h2></header><section class=entry-content><p>å¯åŠ¨zookeeper
bin/zookeeper-server-start.sh config/zookeeper.properties å¯åŠ¨kafka
bin/kafka-server-start.sh config/server.properties åˆ›å»ºä¸€ä¸ªä¸»é¢˜
bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test bin/kafka-topics.sh --list --zookeeper localhost:2181 ç”Ÿäº§è€…
bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test æ¶ˆè´¹è€…
bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning kafka connect
echo -e "zhisheng\ntian" > test.txt ls
zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… echo -e "zhisheng\ntian" > test.txt zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… ls LICENSE NOTICE bin config libs logs site-docs test.txt zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… å¯åŠ¨è¿æ¥å™¨
bin/connect-standalone.sh config/connect-standalone....</p></section><footer class=entry-footer>June 21, 2018&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lucas</footer><a class=entry-link aria-label="post link to kafka" href=https://zhenfeng-zhu.github.io/posts/kafka/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://zhenfeng-zhu.github.io/page/4/>Â« Prev Page</a>
<a class=next href=https://zhenfeng-zhu.github.io/page/6/>Next Page Â»</a></nav></footer></main><footer class=footer><span>&copy; 2021 <a href=https://zhenfeng-zhu.github.io>Go Data</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>