<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on æ¼”ç¤ºç«™ç‚¹</title><link>https://example.com/post/</link><description>Recent content in Posts on æ¼”ç¤ºç«™ç‚¹</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 27 Feb 2022 18:39:35 +0800</lastBuildDate><atom:link href="https://example.com/post/index.xml" rel="self" type="application/rss+xml"/><item><title>è°·çˆ±å‡Œï¼šæˆ‘æ‰¿è®¤ï¼Œæˆ‘çˆ±ä¸Šäº†ææƒ§</title><link>https://example.com/p/%E8%B0%B7%E7%88%B1%E5%87%8C%E6%88%91%E6%89%BF%E8%AE%A4%E6%88%91%E7%88%B1%E4%B8%8A%E4%BA%86%E6%81%90%E6%83%A7/</link><pubDate>Sun, 27 Feb 2022 18:39:35 +0800</pubDate><guid>https://example.com/p/%E8%B0%B7%E7%88%B1%E5%87%8C%E6%88%91%E6%89%BF%E8%AE%A4%E6%88%91%E7%88%B1%E4%B8%8A%E4%BA%86%E6%81%90%E6%83%A7/</guid><description>&lt;p>åœ¨æˆ‘è¿„ä»Š18å¹´äººç”Ÿçš„å10å¹´é‡Œï¼Œæˆ‘ä¸€ç›´åœ¨è¿½å¯»ç€çš„æ˜¯ä¸€ç§çº·ä¹±çš„ã€å……æ»¡ææƒ§çš„çˆ±ã€‚æˆ‘æ˜¯ä¸€åä¸“ä¸šçš„è‡ªç”±å¼æ»‘é›ªè¿åŠ¨å‘˜ï¼Œè„šä¸Šçš„ä¸€åŒé›ªæ¿ã€22è‹±å°ºé•¿çš„uå‹æ± å’Œå„ç§ç‰¹æŠ€åŠ¨ä½œæ˜¯æˆ‘è‚¾ä¸Šè…ºç´ çš„ä¸»è¦æ¥æºï¼Œä¹Ÿæ˜¯æé™è¿åŠ¨ä¸­çœŸæ­£ä»¤äººä¸Šç˜¾çš„æ ¸å¿ƒè¦ç´ ã€‚&lt;/p>
&lt;p>æ­£å¦‚æ‰€æœ‰é‚£äº›èƒ½è¿·å€’å¸¸äººçš„æ‹äººä¸€æ ·ï¼ˆè‡³å°‘æ˜¯åƒæˆ‘ä»å°è¯´ä¸­è¯»åˆ°çš„é‚£äº›ä¸€æ ·ï¼Œå› ä¸ºç°å®ç”Ÿæ´»ä¸­æˆ‘è¿˜ç¼ºä¹ç›¸åº”çš„ç»éªŒï¼‰ï¼Œä½ è¿™ä¸ªé‡è¦çš„å¦ä¸€åŠæœ‰æ—¶å¯èƒ½ä¼šå¾ˆâ€¦â€¦åå¤æ— å¸¸ã€‚å®é™…ä¸Šï¼Œâ€œææƒ§â€å¯ä»¥ç®—æ˜¯ä¸‰ç§ä¸åŒæ„Ÿè§‰çš„æ€»ç§°ï¼Œé‚£å°±æ˜¯å…´å¥‹ã€ä¸ç¡®å®šå’Œå‹åŠ›ã€‚&lt;/p>
&lt;p>æˆ‘å·²ç»å‘ç°ï¼Œå¦‚æœè¿™äº›æ„Ÿè§‰èƒ½è¢«è¯†åˆ«å’Œç§¯æåœ°åˆ©ç”¨ï¼Œé‚£ä¹ˆæ¯ä¸€ç§æ„Ÿè§‰ä¸­éƒ½æœ‰ä¸€äº›å¾®å¦™çš„æŒ‡æ ‡å¯ä»¥å¸®åŠ©ä½ æˆåŠŸï¼Œè€Œå¦‚æœå…¶åŸç†è¢«å¿½è§†ï¼Œé‚£ä¹ˆè¿™äº›æ„Ÿè§‰å¯èƒ½å°±ä¼šæ˜¯ä½ å—ä¼¤çš„å‰å…†ã€‚&lt;/p>
&lt;p>è™½ç„¶ä»äº‹æé™è¿åŠ¨çš„è¿åŠ¨å‘˜å¾ˆå®¹æ˜“è¢«è´´ä¸Šâ€œæ— ç•â€æˆ–â€œä»»æ€§â€çš„æ ‡ç­¾ï¼Œä½†æ— è®ºæ˜¯æˆ‘ä¸ºæ„æ€æŠ€å·§è€ŒèŠ±è´¹çš„æ— æ•°ä¸ªå°æ—¶ï¼Œè¿˜æ˜¯åœ¨æ³¡æ²«å‘(æ³¡æ²«ç²’å­åˆ°å¤„éƒ½æ˜¯çš„é‚£ç§)é‡Œå’Œå®‰å…¨æ°”å›Šä¸Šåº¦è¿‡çš„æ— æ•°æ—¶é—´éƒ½å¯ä»¥è¡¨æ˜æƒ…å†µå¹¶éå¦‚æ­¤ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬è¦è¿åè‡ªå·±çš„ç”Ÿç‰©ç›´è§‰ï¼ŒæŠŠè‡ªå·±ç½®äºé£é™©ä¹‹ä¸­ã€‚è™½ç„¶æˆ‘ä»¬ä¼šå°½ä¸€åˆ‡åŠªåŠ›åšå¥½èº«ä½“ä¸Šçš„å‡†å¤‡ï¼Œä½†å†å¤šçš„å®‰å…¨ç½‘æ¨¡æ‹Ÿè®­ç»ƒä¹Ÿæ— æ³•ç­‰åŒäºæˆ‘ä»¬ä»é™¡å¡ä¸Šèµ·é£ã€æŠŠèº«ä½“æŠ›åˆ°ç©ºä¸­å¹¶å³å°†è½åœ°æ—¶æ‰€å°†é¢å¯¹çš„é›ªå¡ï¼Œå®ƒæ˜¯ä¸ä¼šè®²æƒ…é¢çš„ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¹¶éæ— è§†ææƒ§ï¼Œè€Œæ˜¯è¦åŸ¹å…»æ·±åˆ»çš„è‡ªæˆ‘æ„è¯†ï¼Œå¹¶è¿›è¡Œæ·±æ€ç†Ÿè™‘çš„é£é™©è¯„ä¼°ï¼Œä»è€Œä¸ææƒ§å»ºç«‹èµ·ç‹¬ç‰¹çš„å…³ç³»ã€‚&lt;/p>
&lt;p>è¿™é¡¹å·¥ä½œçš„ç¬¬ä¸€æ­¥å«åšå…·è±¡åŒ–ï¼šåœ¨æˆ‘å°è¯•ä¸€ä¸ªæ–°çš„æŠ€å·§åŠ¨ä½œä¹‹å‰ï¼Œæˆ‘ä¼šæ„Ÿåˆ°èƒ¸è…”ï¼ˆå‡†ç¡®åœ°è¯´ï¼Œæ˜¯åœ¨æˆ‘çš„å–‰å’™åº•éƒ¨å’Œè†ˆè‚Œé¡¶éƒ¨ä¹‹é—´ï¼‰æœ‰ä¸€ç§ç´§å¼ æ„Ÿã€‚&lt;/p>
&lt;p>æˆ‘æ·±å¸ä¸€å£æ°”ï¼Œé—­ä¸Šçœ¼ç›ã€‚å½“æˆ‘çˆ¬ä¸Šå·¨å¤§çš„èµ·é£å¡é“æ—¶ï¼Œæˆ‘ä¼šåœ¨æƒ³è±¡ä¸­ä¼¸å±•æˆ‘çš„åŒè…¿ä»¥æœ€å¤§é™åº¦åœ°æé«˜å‡åŠ›ã€‚ç„¶åï¼Œæˆ‘è¦åœ¨è„‘æµ·ä¸­æç»˜å¦‚ä½•ä»¥ç›¸åçš„æ–¹å‘æ‰­è½¬æˆ‘çš„ä¸ŠåŠèº«ï¼Œäº§ç”Ÿæ‰­çŸ©ï¼Œç„¶åå†è®©å®ƒæœå¦ä¸€ä¸ªæ–¹å‘å¼¹å›æ¥ã€‚&lt;/p>
&lt;p>ç°åœ¨ï¼Œåœ¨æˆ‘çš„æ„è¯†é‡Œï¼Œæˆ‘å·²ç»æ˜¯é£åœ¨ç©ºä¸­çš„çŠ¶æ€äº†ã€‚&lt;/p>
&lt;p>æˆ‘åœ¨è·ƒèµ·åç¬¬ä¸€æ—¶é—´å°±ä¼šçœ‹åˆ°è‡ªå·±çš„èƒŒåï¼Œç„¶åèº«ä½“æ—‹è½¬ä¼šæŠŠæˆ‘çš„è§†çº¿æ‹½å‘å¤´é¡¶ä¸‡é‡Œæ— äº‘çš„å¤©ç©ºã€‚é£å£°å¦‚åŒæˆ‘è€³æœµé‡Œçš„ä¸€ç§éŸ³ä¹ï¼Œæ¯ä¸€ä¸ª360åº¦çš„æ—‹è½¬éƒ½åœ¨ä¸ºæˆ‘çš„è¿åŠ¨æä¾›éŸ³ä¹èˆ¬çš„èŠ‚æ‹ã€‚&lt;/p>
&lt;p>å½“æˆ‘çš„è„šåœ¨æˆ‘çš„èº«ä½“ä¸‹é¢æ—¶ï¼Œæˆ‘å°±å¯ä»¥åœ¨æŠŠèº«ä½“æ‹‰åˆ°ç¬¬äºŒä¸ªç©ºç¿»å‰çš„ä¸€ç¬é—´å‘ç°æœ€ç»ˆè½åœ°çš„åœ°ç‚¹ã€‚å½“æˆ‘å›åˆ°å¯ä»¥é¢å‘å‰æ–¹çš„ä½ç½®æ—¶ï¼Œæˆ‘ä¼šæƒ³è±¡ç€æˆ‘çš„è…¿åœ¨æˆ‘çš„è„šä¸‹æ‘†åŠ¨ï¼Œå¹¶è®©é›ªé‹çš„å‰ç«¯æ‰¿è½½ç€æˆ‘çš„é‡é‡ç¢°åˆ°åœ°é¢ã€‚&lt;/p>
&lt;p>æˆ‘éœ²å‡ºå¾®ç¬‘ï¼Œç„¶åçå¼€çœ¼ç›ï¼Œä¸€ä¸ª1440åº¦çš„ç¿»è½¬åŠ¨ä½œå°±å®Œæˆäº†ã€‚&lt;/p>
&lt;p>åœ¨å®Œæˆâ€œå…·è±¡åŒ–â€çš„å‡ ç§’ä¹‹åï¼Œæˆ‘èƒ¸è…”ä¸­çš„ç´§è¿«æ„Ÿä¼šæœ‰ä¸€é˜µä¸Šä¸‹çš„æ³¢åŠ¨ï¼Œç„¶åå¼€å§‹æ‰©æ•£â€”â€”è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å·²ç»æ¥åˆ°ç ´èŒ§æˆè¶çš„å…³é”®é˜¶æ®µã€‚&lt;/p>
&lt;p>å…´å¥‹æ„Ÿæ˜¯è‚¾ä¸Šè…ºç´ çš„äº§ç‰©ï¼Œä¹Ÿæ˜¯æˆ‘æ‰€é…·çˆ±å’Œç€è¿·çš„å­˜åœ¨ã€‚æˆ‘æ—¢æœ‰ç€å¯¹è‡ªå·±å®‰å…¨åˆ›é€ å¥‡è¿¹çš„ä¿¡å¿ƒï¼Œä¹Ÿä¼šäº§ç”Ÿå¯¹å³å°†åˆ°æ¥çš„ä¸å¯é¢„çŸ¥ä½“éªŒçš„å…´å¥‹æ„Ÿï¼ŒäºŒè€…çš„å¹³è¡¡éå¸¸ä¸ç¨³å®šã€‚æˆ‘å¬è¯´è¿™ä¸ªçŠ¶æ€å¯ä»¥è¢«ç§°ä¸ºâ€œå…¥å¢ƒï¼ˆzoneï¼‰â€ï¼Œå»å¹´ç§‹å¤©ï¼Œå½“æˆ‘æˆä¸ºå†å²ä¸Šç¬¬ä¸€ä¸ªå®Œæˆ1440åº¦åè½´è½¬ä½“åŠ¨ä½œçš„çš„å¥³æ€§åŒæ¿æ»‘é›ªè¿åŠ¨å‘˜æ—¶ï¼Œæˆ‘å°±æ›¾ä½“ä¼šè¿‡è¿™æ ·çš„å¿ƒå¢ƒã€‚&lt;/p>
&lt;p>ä¸å¹¸çš„æ˜¯ï¼Œä½ å¿ƒä¸­çš„ä¸ç¡®å®šæ„Ÿå¾€å¾€å¾ˆå®¹æ˜“å°±ä¼šå‹å€’è‡ªä¿¡å¿ƒã€‚&lt;/p>
&lt;p>ä¸å®Œç¾çš„å‡†å¤‡ä¼šä½¿æˆ‘çš„æ‰‹å¿ƒå‡ºæ±—ï¼Œå¹¶ä½¿å¾—æˆ‘ä¹‹å‰æ‰€è¯´çš„é‚£ä¸ªæ„Ÿåˆ°ç´§å¼ çš„ä½ç½®è¢«è½¬ç§»åˆ°è‡ªå·±çš„èƒƒé‡Œï¼Œä»è€Œä½¿ä½ çš„æ¯æ¬¡å‘¼å¸éƒ½æ¯”ä¸Šä¸€æ¬¡æ›´æµ…ã€‚è¿™ç§æ„Ÿè§‰ä¸æ˜¯ææ…Œï¼Œè€Œæ˜¯æŸç§ç±»ä¼¼äºç•æƒ§çš„æ„Ÿè§‰ã€‚å±é™©çš„ä¿¡å·ä¼šæ¿€å‘å‡ºè¿›åŒ–çš„æœ¬èƒ½ã€‚&lt;/p>
&lt;p>å¦‚æœæˆ‘é€‰æ‹©å¿½ç•¥è¿™ä¸ªå®‰å…¨æœºåˆ¶ï¼Œæˆ‘çš„èº«ä½“å¯èƒ½ä¼šåœ¨ç©ºä¸­ä¸ç”±è‡ªä¸»åœ°è¡ŒåŠ¨ï¼Œæ—‹è½¬ä¼šå¤±å»æ§åˆ¶ï¼Œå¹¶è¿«ä½¿æˆ‘ä¸ºå³å°†é­å—çš„å†²å‡»åšå¥½å‡†å¤‡ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™çš„æˆ‘çœŸçš„è¦ææƒ§äº†ï¼šå¦‚æœå®Œå…¨æŠ•å…¥è¿™ä¸ªåŠ¨ä½œï¼Œå¯èƒ½ä¼šäº§ç”Ÿç¾éš¾æ€§çš„åæœã€‚&lt;/p>
&lt;p>æ¯ä¸ªè‡ªç”±å¼æ»‘é›ªè¿åŠ¨å‘˜éƒ½è¦ä»¥è¯†åˆ«å‡ºå…´å¥‹æ„Ÿå’Œä¸ç¡®å®šæ„Ÿä¹‹é—´çš„ç»†å¾®å·®åˆ«ä¸ºç›®æ ‡ï¼Œä»¥ä¾¿åœ¨æœ€å¤§é™åº¦åœ°å‘æŒ¥èƒ½åŠ›çš„åŒæ—¶ï¼ŒæŠŠå—ä¼¤çš„é£é™©å‡å°‘åˆ°æœ€å°ã€‚&lt;/p>
&lt;p>æœ€åè¦è®²çš„å°±æ˜¯å‹åŠ›ã€‚è¿™æ˜¯ä¸€ç§ç”¨é€”å¯èƒ½ä¼šå¾ˆå¹¿æ³›çš„èƒ½é‡æºã€‚åœ¨æœ¬æ–‡æåˆ°çš„ä¸ææƒ§ç›¸å…³çš„å‡ ä¸ªæ–¹é¢ä¸­ï¼Œå‹åŠ›æ˜¯æœ€ä¸»è§‚çš„ä¸€ä¸ªé¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªäººå¯¹äºå‹åŠ›çš„ä½“éªŒä¼šå—åˆ°è‡ªèº«å®è·µç»éªŒå’Œæ€æƒ³è§‚ç‚¹çš„å½±å“ã€‚&lt;/p>
&lt;p>å®¶äººå’Œæœ‹å‹çš„æœŸæœ›ï¼Œæ¿€çƒˆç«äº‰çš„æ—¶æ®µï¼Œä¹ƒè‡³äºå¯èƒ½è·å¾—èµåŠ©çš„æœºé‡ï¼Œéƒ½å¯èƒ½ä¸ºä¸€ä¸ªé«˜å‹çš„å¤–åœ¨ç¯å¢ƒæä¾›æ”¯æ’‘ã€‚å¯¹äºé‚£äº›èƒ½æŠŠæ¡åˆ†å¯¸çš„èµ›æ‰‹æ¥è¯´ï¼Œå‹åŠ›å¯ä»¥å˜æˆä¸€ç§å¸®ä»–ä»¬è¿æ¥æŒ‘æˆ˜çš„ç§¯æåŠ›é‡ã€‚ä½†å‹åŠ›ä¹Ÿå¯èƒ½ä¼šå‡­å€Ÿä¸€å·±ä¹‹åŠ›å°±è®©ä½ ä¸€è´¥æ¶‚åœ°ã€‚&lt;/p>
&lt;p>ä¸è¿‡ï¼Œå¯¹äºè¿™ç§åŸ‹è—åœ¨å¿ƒåº•çš„ã€æ¸´æœ›â€œè¯æ˜è‡ªå·±â€çš„æ„Ÿè§‰ï¼Œè¿åŠ¨å‘˜æ—¢å¯èƒ½ä¼šé€‰æ‹©å‹åˆ¶å®ƒï¼Œä¹Ÿå¯èƒ½é€‰æ‹©å¼ºåŒ–å®ƒï¼Œè€Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸Šè¦å–å†³äºä»–ä»¬çš„è‡ªä¿¡å¿ƒã€‚&lt;/p>
&lt;p>ä½œä¸ºä¸€ä¸ªåˆšåˆšæˆå¹´çš„å¥³è¿åŠ¨å‘˜ï¼Œæˆ‘å¯¹äºè¿™æ–¹é¢è¿˜æ˜¯å¾ˆæœ‰äº›è‡ªè±ªçš„ï¼Œæˆ‘å¯ä»¥å¢å¼ºè‡ªå·±çš„è‡ªå°Šï¼Œå¹¶å°½é‡å‡å°‘è‡ªå·±å¯¹äºå¤–ç•ŒæœŸå¾…çš„éœ€æ±‚ï¼Œä»è€Œæ§åˆ¶æˆ‘èº«è¾¹çš„å‹åŠ›ã€‚&lt;/p>
&lt;p>æ— è®ºå­¤èº«ä¸€äººè¿˜æ˜¯é¢å‘æ•´ä¸ªä¸–ç•Œï¼Œæˆ‘éƒ½ä¸“æ³¨äºæ„Ÿæ©å½“ä¸‹ã€åˆ¤æ–­å½“ä¸‹ï¼Œå¹¶äº«å—ä½“è‚²å¸¦ç»™æˆ‘çš„å¿«ä¹ã€‚&lt;/p>
&lt;p>è™½è¯´æˆ‘ä¸ªäººå’Œè¿™ä¸ªä¸–ç•Œçš„è§†è§’æ€»ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ¼”å˜ï¼Œä½†æœ‰ä¸€ä»¶äº‹æ˜¯ä¸ä¼šå˜çš„ï¼šæ— è®ºæ—¶é—´è¿‡äº†å¤šä¹…ï¼Œåœ¨ææƒ§é¢å‰çš„æˆ‘éƒ½ä¼šæ˜¯ä¸€ä¸ªæ— å¯æ•‘è¯çš„æµªæ¼«ä¸»ä¹‰è€…ã€‚&lt;/p></description></item><item><title>å¦‚ä½•æå‡æ²Ÿé€šæŠ€èƒ½</title><link>https://example.com/p/%E5%A6%82%E4%BD%95%E6%8F%90%E5%8D%87%E6%B2%9F%E9%80%9A%E6%8A%80%E8%83%BD/</link><pubDate>Sun, 20 Feb 2022 20:42:37 +0800</pubDate><guid>https://example.com/p/%E5%A6%82%E4%BD%95%E6%8F%90%E5%8D%87%E6%B2%9F%E9%80%9A%E6%8A%80%E8%83%BD/</guid><description>&lt;p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªçœŸå®æ¡ˆä¾‹ï¼š&lt;/p>
&lt;p>ï¼ˆèƒŒæ™¯ï¼‰æŸé¡¹ç›®åŸå®šäº 6 æœˆ 7 æ—¥å®Œæˆï¼Œå¯æ˜¯å®é™…åˆ° 6 æœˆ 9 æ—¥æ‰å®Œæˆï¼Œäºæ˜¯ç ”å‘ç»ç†åˆ˜å¤‡å°±æ‰¾è´Ÿè´£çš„å·¥ç¨‹å¸ˆå¼ é£æ²Ÿé€šã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åˆ˜å¤‡è¯´ï¼šâ€œå’±ä»¬è¿™ä¸ªé¡¹ç›®æŒ‰è®¡åˆ’ 7 å·å®Œæˆï¼Œä½  delay äº†ä¸¤å¤©ä¹Ÿä¸è·Ÿæˆ‘è¯´ä¸€å£°ï¼Œæˆ‘æ˜¯æœ€åä¸€ä¸ªçŸ¥é“çš„ï¼â€&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¼ é£è¯´ï¼šâ€œæˆ‘è·Ÿè´Ÿè´£é¡¹ç›®çš„äº§å“ç»ç†å­”æ˜è¯´äº†å•Šï¼Œä»–ä¹Ÿè§‰å¾—æ²¡é—®é¢˜ï¼Œå¤§å®¶æ²¡æœ‰å¼‚è®®å°±è¡Œäº†å‘—ï¼Œé¡¹ç›®ä¸æ˜¯æˆåŠŸå‘å¸ƒäº†å—ï¼â€&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ˜å¤‡è¯´ï¼šâ€œé‚£ä¹Ÿåº”è¯¥æå‰è·Ÿæˆ‘è¯´ä¸€å£°å•Šï¼Œæˆ‘å¦‚æœæå‰çŸ¥é“å°±ä¼šè®©å­é¾™æ¥å¸®ä½ ï¼Œæœ€åä¹Ÿä¸è‡³äº delay ä¸¤å¤©ã€‚â€&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¼ é£è¯´ï¼šâ€œæˆ‘è§‰å¾—æˆ‘èƒ½æå®šï¼Œä½ ä¸è¦åŠ¨ä¸åŠ¨å°±è®©å­é¾™æ¥å¸®æˆ‘ï¼Œè¿™æ˜¯å¯¹æˆ‘çš„ä¸ä¿¡ä»»ã€‚è¦ä¸æ˜¯æœ€è¿‘å­©å­ç”Ÿç—…æˆ‘ä¹Ÿä¸ä¼š delayã€‚å³ä¾¿ delay äº†ï¼Œæˆ‘ä¹Ÿå’Œåˆä½œæ–¹éƒ½æ²Ÿé€šå¥½äº†ï¼Œä»€ä¹ˆäº‹éƒ½æ²¡è€½è¯¯ã€‚è€Œä¸”æˆ‘å·²ç»å°½æœ€å¤§åŠªåŠ›äº†å•Šï¼Œä½ è¿˜è¦æ€ä¹ˆæ ·å‘¢ï¼Ÿä¿¡ä¸è¿‡æˆ‘çš„è¯ï¼Œä¸‹æ¬¡è¿™æ ·çš„é¡¹ç›®ä½ äº¤ç»™äºŒå“¥å»åšå§ï¼â€&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ˜å¤‡è¯´ï¼šâ€œæˆ‘å°±æ˜¯æƒ³è®©ä½ æå‰å‘Šè¯‰æˆ‘ä¸€å£°ï¼Œä½ æ€¥å•¥ï¼â€&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¼ é£è¯´ï¼šâ€œä½ å…ˆæ€¥çš„å¥½ä¸å¥½ï¼â€&lt;/p>
&lt;/li>
&lt;li>
&lt;p>â€¦â€¦&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ä½ è§‰å¾—æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿå¦‚æœä½ æ˜¯å…¶ä¸­çš„åˆ˜å¤‡æˆ–è€…å¼ é£ï¼Œæ¥ä¸‹æ¥ä½ ä¼šæ€ä¹ˆæ²Ÿé€šå‘¢ï¼Ÿ&lt;/p>
&lt;p>åœ¨æ—¥å¸¸çš„æ²Ÿé€šä¸­ï¼Œç±»ä¼¼çš„åœºæ™¯æ•°ä¸èƒœæ•°ã€‚æœ‰çš„ä¼šäº’æ€¼ä¸‹å»ï¼ŒåƒµæŒä¸ä¸‹ï¼›ä¹Ÿæœ‰çš„ä¼šé€‰æ‹©é€ƒé¿ï¼Œæ•·è¡äº†äº‹ã€‚ä½†æ˜¯è¿™éƒ½è¾¾ä¸åˆ°å½¼æ­¤æ²Ÿé€šçš„æ„å›¾å’Œç›®çš„ã€‚é‚£ä¹ˆï¼Œæ€ä¹ˆæ²Ÿé€šæ‰èƒ½è¾¾åˆ°å½¼æ­¤çš„ç›®çš„å‘¢ï¼Ÿ&lt;/p>
&lt;p>ä¸‹é¢ï¼Œæˆ‘ä»‹ç»ä¸€ä¸ªå·¥å…·ï¼Œåœ¨æ²Ÿé€šä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å¯¹é½å½¼æ­¤çš„ä¿¡æ¯ã€æ„Ÿå—å’Œæ„å›¾ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>äº‹å®ï¼ˆFACTï¼‰&lt;/p>
&lt;ul>
&lt;li>åˆ—ä¸¾äº‹å®ä¿¡æ¯&lt;/li>
&lt;li>ç¡®è®¤å¯¹æ–¹çš„å®¢è§‚æƒ…å†µ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ„Ÿå—ï¼ˆFEELINGï¼‰&lt;/p>
&lt;ul>
&lt;li>å¯¹æ–¹å¯¹ã€äº‹å®ã€çš„æ„Ÿå—å’Œæ€åº¦&lt;/li>
&lt;li>åŒæ–¹å¯¹ã€äº‹å®ã€çš„è®ºæ–­æ˜¯å¦ä¸€è‡´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ„å›¾ï¼ˆFOCUSï¼‰&lt;/p>
&lt;ul>
&lt;li>å¯¹æ–¹çš„ç„¦ç‚¹åœ¨å“ªé‡Œï¼Œæˆ‘çš„ç„¦ç‚¹åœ¨å“ªé‡Œ&lt;/li>
&lt;li>å¯¹æ–¹çš„æ„å›¾æ˜¯ä»€ä¹ˆï¼Œæˆ‘çš„æ„å›¾æ˜¯ä»€ä¹ˆ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å…±è¯†&lt;/p>
&lt;ul>
&lt;li>æ˜¯å¦è¾¾æˆå…±è¯†ï¼Œå¹¶ç¡®è®¤ä¸€è‡´&lt;/li>
&lt;li>æ¥ä¸‹æ¥æ€ä¹ˆåš&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸ªå·¥å…·çš„å‰ä¸‰æ­¥ï¼Œå…¶å®å°±æ˜¯â€œ3Fâ€å€¾å¬ï¼Œåªæ˜¯åœ¨ç›¸äº’å€¾å¬çš„åŸºç¡€ä¹‹ä¸Šï¼Œåˆèµ°åˆ°äº†ç¬¬å››æ­¥ï¼Œå»ç¡®è®¤æœ‰æ²¡æœ‰è¾¾æˆå…±è¯†ã€‚&lt;/p>
&lt;p>æ‰€è°“â€œ3Fâ€å€¾å¬ï¼Œå°±æ˜¯è¦ä»å¯¹æ–¹çš„è°ˆè¯ä¸­å¬å‡ºä¸‰å±‚ä¿¡æ¯ï¼š&lt;/p>
&lt;p>ç¬¬ä¸€ï¼Œäº‹å®ä¿¡æ¯ï¼ˆFACTï¼‰ã€‚å³ï¼Œå¯¹æ–¹è¯´äº†å“ªäº›äº‹å®æ€§ä¿¡æ¯ï¼Ÿå’Œä½ æŒæ¡çš„ä¿¡æ¯ç›¸æ¯”æœ‰æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Ÿè¿™æ˜¯æ²Ÿé€šçš„ç¬¬ä¸€å±‚ï¼Œä¹Ÿæ˜¯æœ€åŸºç¡€çš„ä¸€å±‚ã€‚å¦‚æœåŒæ–¹è¿åŸºæœ¬çš„äº‹å®ä¿¡æ¯éƒ½ä¸ä¸€è‡´ï¼Œè¾¾æˆæœ‰æ•ˆçš„æ²Ÿé€šç»“æœå°±æ— ä»è°ˆèµ·äº†ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œåœ¨ä¸Šè¿°æ¡ˆä¾‹ä¸­ï¼Œåˆ˜å¤‡å’Œå¼ é£çš„æ²Ÿé€šæ˜¯åŸºäºä¸€è‡´çš„äº‹å®ä¿¡æ¯å—ï¼Ÿä¸éš¾å‘ç°ï¼Œå¯¹äºè¿™ä¸‰ç‚¹é‡è¦çš„äº‹å®ï¼š&lt;/p>
&lt;p>åŒæ–¹éƒ½è®¤åŒï¼Œæ˜¯æ²¡æœ‰å¼‚è®®çš„ï¼Œå¯è§ä»–ä»¬æ²Ÿé€šçš„åŸºç¡€ä¿¡æ¯æ²¡æœ‰åˆ†æ­§ã€‚&lt;/p>
&lt;p>ç”±äºäº‹å®ä¿¡æ¯çš„å®¢è§‚æ€§ï¼Œåªè¦è‚¯æ²Ÿé€šï¼Œè¿™å±‚ä¿¡æ¯æ˜¯æœ€å®¹æ˜“è¾¾æˆä¸€è‡´çš„ã€‚æ‰€ä»¥ï¼Œåœ¨å‘ç”Ÿæ„è§å’Œçœ‹æ³•ä¸ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œé¦–å…ˆæ¥å¯¹é½äº‹å®ä¿¡æ¯æ˜¯å¿…è¦ä¸”æœ‰æ•ˆçš„ã€‚å½“ç„¶ï¼Œéšç€åŒæ–¹èƒŒæ™¯ä¿¡æ¯çš„ä¸æ–­åŒæ­¥å’Œé»˜å¥‘åº¦çš„ä¸æ–­æå‡ï¼Œåœ¨ä¸€äº›æ²Ÿé€šä¸­è¯¥æ­¥éª¤å¸¸å¸¸è¢«çœç•¥ã€‚ä½†æ˜¯ï¼Œè¢«çœç•¥å¹¶ä¸æ„å‘³ç€ä¸é‡è¦ï¼Œä¸€æ—¦å‘ç”Ÿåˆ†æ­§çš„æ—¶å€™ï¼Œå°±éœ€è¦æŠŠè¿™å±‚å†…å®¹æ‹¿å‡ºæ¥æ£€è§†å’Œå¯¹é½ä¸€ä¸‹äº†ã€‚&lt;/p>
&lt;p>ç¬¬äºŒï¼Œæ„Ÿå—å’Œåˆ¤æ–­ï¼ˆFEELINGï¼‰ã€‚å³ï¼Œå¯¹äºä¸Šè¿°äº‹å®ä¿¡æ¯ï¼ŒåŒæ–¹æ˜¯ä»€ä¹ˆæ ·çš„æ„Ÿå—å’Œåˆ¤æ–­ã€‚ç”±äºæ¯ä¸ªäººç”Ÿæ´»çš„ç¯å¢ƒä¸åŒï¼Œæ‰€å¤„çš„è§’è‰²ä¸åŒï¼Œæƒ¯ç”¨çš„æ€ç»´æ–¹å¼ä¸åŒï¼Œæ²Ÿé€šçš„åˆè¡·ä¹Ÿä¸åŒï¼Œæ‰€ä»¥ï¼Œå³ä¾¿æ˜¯é’ˆå¯¹åŒæ ·çš„å®¢è§‚äº‹å®ï¼ŒåŒæ–¹çš„æ„Ÿå—å’Œçœ‹æ³•ä¹Ÿå¸¸å¸¸æ˜¯ä¸åŒçš„ã€‚è¿™å°±æ˜¯æ²Ÿé€šä¸­æœ€å®¹æ˜“å‘ç”Ÿåˆ†æ­§çš„åœ°æ–¹ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡å‰é¢çš„ä¾‹å­æ¥çœ‹ï¼ŒåŸºäºåŒä¸€ä¸ªäº‹å®ï¼Œåˆ˜å¤‡å’Œå¼ é£å„è‡ªçš„æ„Ÿå—å’Œåˆ¤æ–­æ˜¯ä»€ä¹ˆã€‚&lt;/p>
&lt;p>åœ¨åˆ˜å¤‡çœ‹èµ·æ¥ï¼šå¦‚æœå¼ é£æå‰å‘Šè¯‰ä»–è¿™ä¸ªé£é™©ï¼Œè¿™ä¸ªé¡¹ç›®æœ¬å¯ä»¥ä¸ç”¨ delayï¼›è€Œä¸”ï¼Œè‡ªå·±ä½œä¸ºå¼ é£çš„ç›´æ¥ä¸Šçº§ï¼Œæœ€åæ‰çŸ¥é“æœ‰è¿™å›äº‹ï¼Œæ— è®ºæ€ä¹ˆè¯´ï¼Œè‡ªå·±å’Œå¼ é£ä¹‹é—´çš„åä½œæ–¹å¼éƒ½éœ€è¦æ”¹è¿›ã€‚&lt;/p>
&lt;p>åœ¨å¼ é£çœ‹èµ·æ¥ï¼šdelay ä¸¤å¤©ç¡®å®ä¸åº”è¯¥ï¼Œä½†ä¹Ÿæ˜¯ä¸å¯æŠ—æ‹’çš„å®¢è§‚æƒ…å†µé€ æˆçš„ï¼Œè€Œä¸”ä¸ºäº†ä¸ç»™åˆ˜å¤‡æ·»éº»çƒ¦ï¼Œè‡ªå·±ä¸»åŠ¨åè°ƒå¥½äº†å„ä¸ªåˆä½œæ–¹ï¼Œå¹¶ä¿è¯é¡¹ç›®æˆåŠŸå‘å¸ƒï¼Œåˆ˜å¤‡ä¸ä½†ä¸é¢†æƒ…ï¼Œè¿˜ä¸€å‰¯ä¿¡ä¸è¿‡æˆ‘çš„æ ·å­ï¼Œæ˜¾ç„¶åœ¨ä»–çœ¼é‡Œå­é¾™æ›´èƒ½å¹²ã€‚&lt;/p>
&lt;p>å½“ç„¶ï¼Œæˆ‘ä¸æ˜¯åˆ˜å¤‡ï¼Œä¹Ÿä¸æ˜¯å¼ é£ï¼Œè¿™äº›å†…å¿ƒçš„æ„Ÿå—å’Œè§‚ç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘é‡‡è®¿ä»–ä»¬ä¹‹åå¾—çŸ¥çš„ã€‚ä½ å¯ä»¥çœ‹åˆ°ä»–ä»¬å¯¹äºåŒä¸€ä¸ªäº‹å®ï¼ŒåŒæ–¹çš„æ„Ÿå—ã€åˆ¤æ–­å’ŒæœŸå¾…æ˜¯å¾ˆä¸ä¸€æ ·çš„ï¼Œä¹‹æ‰€ä»¥ä¼šå‘ç”Ÿåé¢çš„æƒ…ç»ªå¯¹æŠ—ï¼Œå…¶å®å°±æ˜¯ä»è¿™é‡Œå¼€å§‹çš„ã€‚&lt;/p>
&lt;p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¸¸è¯´çš„â€œé»˜å¥‘â€ï¼Œå°±ä¸»è¦ä½“ç°åœ¨æ²Ÿé€šåŒæ–¹å¯¹å½¼æ­¤çš„æ„Ÿå—å’Œåˆ¤æ–­é€»è¾‘çš„ç†è§£ç¨‹åº¦ä¸Šã€‚å› æ­¤ï¼Œä½ ä»¬è¶Šæ˜¯ç†Ÿæ‚‰å½¼æ­¤çš„ç«‹åœºã€æ€ç»´æ–¹å¼å’Œæ²Ÿé€šé£æ ¼ï¼Œå°±è¶Šæ˜¯å®¹æ˜“å’Œå¯¹æ–¹è¾¾æˆé»˜å¥‘ã€‚æ‰€ä»¥ï¼Œé»˜å¥‘æ˜¯åœ¨ä¸æ–­åˆä½œçš„è¿‡ç¨‹ä¸­ç£¨åˆå‡ºæ¥çš„ï¼Œå¾ˆéš¾è‡ªç„¶è€Œç„¶åœ°å½¢æˆã€‚&lt;/p>
&lt;p>é‚£ä¹ˆï¼Œåœ¨è¿˜æ²¡æœ‰è¿™ç§é»˜å¥‘çš„æ—¶å€™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿéš¾é“å°±è¦åƒåˆ˜å¤‡å’Œå¼ é£ä¸€æ ·äº‰æ‰§å’Œäº’æ€¼å—ï¼Ÿ&lt;/p>
&lt;p>æˆ‘çš„å›ç­”æ˜¯ï¼Œæœ‰æ„è¯†åœ°å»è¯¢é—®ï¼Œè€Œä¸æ˜¯é»˜è®¤å¯¹æ–¹ä¸€å®šæ¸…æ¥šè‡ªå·±çš„é€»è¾‘å’Œåˆ¤æ–­ã€‚æ€ä¹ˆè¯¢é—®å‘¢ï¼Ÿå¦‚æœæˆ‘æ˜¯åˆ˜å¤‡æˆ–è€…å¼ é£çš„è¯ï¼Œæˆ‘å¯ä»¥è¿™æ ·è¯´ï¼šâ€œå¯¹äºè¿™äº›äº‹å®æƒ…å†µï¼Œæˆ‘çš„çœ‹æ³•æ˜¯è¿™æ ·çš„â€¦â€¦æˆ‘æƒ³äº†è§£ä¸‹ï¼Œä½ çš„çœ‹æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€è¿™æ ·ä¸€ç¡®è®¤ï¼Œå°±é¿å…äº†â€œçŒœæµ‹â€å’Œâ€œæƒ³å½“ç„¶â€å¸¦æ¥çš„å„ç§å„æ ·çš„è¯¯ä¼šã€‚&lt;/p>
&lt;p>ç¬¬ä¸‰ï¼Œæ„å›¾ï¼ˆFOCUSï¼‰ã€‚å³ï¼Œå¯¹æ–¹æ²Ÿé€šçš„ç„¦ç‚¹åœ¨å“ªé‡Œï¼Œå„è‡ªä¸ºäº†è¾¾åˆ°ä»€ä¹ˆæ„å›¾å’Œç›®çš„ã€‚æ¯ä¸€æ¬¡æ²Ÿé€šï¼Œéƒ½æ˜¯åŸºäºæŸä¸ªç‰¹å®šçš„ç›®çš„å’Œåˆè¡·çš„ï¼Œæ— è®ºè¿™ä¸ªé—®é¢˜ä½ æœ‰æ²¡æœ‰åœ¨æ²Ÿé€šä¹‹å‰å»åˆ»æ„å˜æ¸…ï¼Œéƒ½æ˜¯å¦‚æ­¤ã€‚&lt;/p>
&lt;p>æ²Ÿé€šçš„ç›®çš„ä¸å¤–ä¹å››ä¸ªï¼šå»ºç«‹é€šé“ã€åŒæ­¥ä¿¡æ¯ã€è¡¨è¾¾æƒ…æ„Ÿå’Œè¾“å‡ºå½±å“ã€‚æ˜¾ç„¶ï¼Œåœ¨å‰é¢çš„æ¡ˆä¾‹ä¸­ï¼Œåˆ˜å¤‡æ²Ÿé€šçš„ç›®çš„å’Œæ„å›¾æ˜¯æƒ³è¯´æœå¼ é£ï¼Œè®©ä»–åœ¨ä»¥åçš„å·¥ä½œä¸­ï¼Œæå‰é€šæŠ¥é£é™©ï¼Œè€Œä¸æ˜¯ç’è€Œä¸æŠ¥ï¼Œä»–ä»æ¥æ²¡æœ‰è´¨ç–‘è¿‡å¼ é£çš„èƒ½åŠ›ã€‚è€Œå¼ é£çš„ç›®çš„å’Œæ„å›¾æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»–åœ¨è¡¨è¾¾ä¸€ç§ä¸æ»¡ï¼Œè¿™ç§ä¸æ»¡æƒ…ç»ªçš„èƒŒåï¼Œæ˜¯ä»–å¸Œæœ›åˆ˜å¤‡å¯ä»¥ç»™ä»–ä¸€äº›è®¤å¯å’Œé¼“åŠ±ï¼Œå¹¶ä¿¡ä»»ä»–çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œä»–ä»¬çš„æ„å›¾å¹¶æ²¡æœ‰çŸ›ç›¾å’Œå†²çªï¼Œè¿™åœºæ²Ÿé€šï¼Œå®Œå…¨å¯ä»¥è¾¾åˆ°å½¼æ­¤æ»¡æ„çš„ç»“æœã€‚åªæ˜¯å› ä¸ºä»–ä»¬åœ¨æ²Ÿé€šä¸­ï¼Œä¸åœ¨ä¸€ä¸ªé¢‘é“ä¸Šï¼ŒæŠŠäº‹å®ã€åˆ¤æ–­ã€æ„Ÿå—ã€è´£ä»»ã€åŸå› ã€æ–¹æ¡ˆç­‰ç»Ÿç»Ÿæ‰åˆ°ä¸€èµ·æ¥è¯´äº†ï¼šä½ è®²äº‹å®ä»–è¯´åŸå› ï¼Œä½ è¯´åŸå› ä»–è¯´æ„Ÿå—ï¼Œä½ è¯´æ„Ÿå—ä»–è¯´é€»è¾‘ï¼Œä½ è¯´é€»è¾‘ä»–è¯´è´£ä»»ï¼Œä½ è¯´è´£ä»»ä»–è¯´è§£å†³æ–¹æ¡ˆï¼Œä½ è¯´è§£å†³æ–¹æ¡ˆä»–è¯´å›°éš¾â€¦â€¦æœ€ç»ˆå°±æˆäº†â€œé¸¡åŒé¸­è®²â€ï¼Œäº’ç›¸çš„ä¸ç†è§£å’Œä¸è®¤åŒã€‚&lt;/p>
&lt;p>é€šè¿‡ç”¨â€œ3Fâ€å€¾å¬å’Œæ²Ÿé€šå±‚æ¬¡å›¾å¯¹ä¸Šé¢çš„æ¡ˆä¾‹è¿›è¡Œåˆ†å±‚æ‹†è§£ï¼Œä½ ä¸éš¾å‘ç°ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ²Ÿé€šä¸­ï¼Œæœ‰æ„è¯†åœ°åˆ†äº‹å®ã€æ„Ÿå—ã€æ„å›¾è¿™ä¸‰ä¸ªå±‚æ¬¡å»ç†è§£å¯¹æ–¹çš„è¯ï¼Œå¹¶ä¸”ä»è¿™ä¸‰ä¸ªå±‚æ¬¡åˆ†åˆ«å’Œè‡ªå·±çš„äº‹å®ã€æ„Ÿå—ã€æ„å›¾åšä¸€ä¸ªå¯¹åº”ï¼Œå°±å¯ä»¥å‡å°‘å¾ˆå¤šä¸å¿…è¦çš„è¯¯ä¼šï¼ŒåŒæ—¶é¿å…æƒ…ç»ªå¯¹æŠ—ï¼Œä»è€Œè¾¾æˆæœ‰æ•ˆçš„æ²Ÿé€šç»“æœã€‚&lt;/p>
&lt;p>å¯¹äºä¸€ä¸ªç»å¸¸æ²Ÿé€šçš„å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªå·¥å…·ï¼Œåœ¨å’Œå¯¹æ–¹ä¸æ–­åœ°å€¾å¬ä¸ç¡®è®¤ä¸­ï¼Œå½¢æˆé»˜å¥‘ï¼›åœ¨ä¸æ–­åœ°é»˜å¥‘åˆä½œä¸­ï¼Œæå‡ä¿¡ä»»ã€‚å½“ä¿¡ä»»å’Œé»˜å¥‘ç¨‹åº¦è¶Šæ¥è¶Šé«˜ï¼Œä¹Ÿå°±æ˜¯æ²Ÿé€šé€šé“å“è´¨è¶Šæ¥è¶Šå¥½æ—¶ï¼Œå¾ˆå¤šå·¥å…·å’ŒæŠ€å·§ä¹Ÿå°±å¯ä»¥çœç•¥å’Œç®€åŒ–äº†ã€‚äºæ˜¯ï¼Œä½ ä¹Ÿå°±çŸ¥é“äº†ï¼Œè¶Šæ˜¯åœ¨ä¿¡ä»»åº¦å’Œé»˜å¥‘åº¦ä½çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå·¥å…·è¶Šæœ‰ç”¨æ­¦ä¹‹åœ°ï¼›è¶Šæ˜¯åœ¨äººå¤šå£æ‚çš„æ—¶å€™ï¼Œè¶Šå®¹æ˜“è®©å¤§å®¶åœ¨åŒä¸€ä¸ªæ¡†æ¶ä¸‹è¾¾æˆæ²Ÿé€šæˆæœã€‚&lt;/p></description></item><item><title>æ‰“é€ å¥½ç”¨çš„winä¸Šå¼€å‘ä½“éªŒ</title><link>https://example.com/p/%E6%89%93%E9%80%A0%E5%A5%BD%E7%94%A8%E7%9A%84win%E4%B8%8A%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C/</link><pubDate>Sat, 12 Feb 2022 22:22:28 +0800</pubDate><guid>https://example.com/p/%E6%89%93%E9%80%A0%E5%A5%BD%E7%94%A8%E7%9A%84win%E4%B8%8A%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C/</guid><description>&lt;h1 id="0x00ç§‘å­¦ä¸Šç½‘">0x00ï¼šç§‘å­¦ä¸Šç½‘&lt;/h1>
&lt;p>å¦‚æœä¸èƒ½å¤Ÿç§‘å­¦ä¸Šç½‘çš„è¯ï¼Œæ•´ä¸ªå¼€å‘ä½“éªŒå°†å¤§æ‰“æŠ˜æ‰£ã€‚&lt;/p>
&lt;p>æ­¤è¿‡ç¨‹è¾ƒä¸ºæ•æ„Ÿï¼Œæ‰€ä»¥éœ€è¦å¤§å®¶è‡ªè¡Œé€‰æ‹©ç§‘å­¦ä¸Šç½‘çš„æ–¹å¼ã€‚&lt;/p>
&lt;h1 id="0x01åŸºæœ¬å¯ç”¨çš„ç»ˆç«¯">0x01ï¼šåŸºæœ¬å¯ç”¨çš„ç»ˆç«¯&lt;/h1>
&lt;p>&lt;a class="link" href="https://gitforwindows.org/" target="_blank" rel="noopener"
>https://gitforwindows.org/&lt;/a>&lt;/p>
&lt;p>git for windows å†…åµŒäº†git bashï¼Œgit bashçš„ä½¿ç”¨ä½“éªŒå’Œlinux æˆ– macçš„ä½“éªŒç±»ä¼¼ã€‚&lt;/p>
&lt;p>å®‰è£…å¥½ä¹‹åï¼Œéœ€è¦è¿›å…¥åˆ°homeç›®å½•ï¼Œç¼–è¾‘ .bashrc æ–‡ä»¶ï¼Œä½¿ç»ˆç«¯ä¹Ÿå¯ä»¥ç§‘å­¦ä¸Šç½‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ cd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim .bashrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é…ç½®å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span> proxy_on&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git config --global https.proxy http://127.0.0.1:1081
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git config --global https.proxy http://127.0.0.1:1081
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">http_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://127.0.0.1:1081&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">https_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://127.0.0.1:1081&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">all_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://127.0.0.1:1081&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print_proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span> proxy_off&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git config --global --unset https.proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git config --global --unset https.proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">unset&lt;/span> http_proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">unset&lt;/span> https_proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">unset&lt;/span> all_proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print_proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span> print_proxy&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$http_proxy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$https_proxy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$all_proxy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span> l&lt;span class="o">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">proxy_on
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>proxy_onæ˜¯æ‰“å¼€ä»£ç†ï¼Œproxy_offæ˜¯å…³é—­ä»£ç†ï¼Œprint_proxyæ˜¯ä¸€ä¸ªå¸®åŠ©å‡½æ•°ï¼Œç”¨æ¥æŸ¥çœ‹å½“å‰çš„ä»£ç†ï¼Œ&lt;code>l&lt;/code> å‡½æ•°æ˜¯å› ä¸ºè‡ªå·±ç»å¸¸ä½¿ç”¨lå‘½ä»¤ï¼Œä¸ºäº†ä¸æŠ¥é”™è€ŒåŠ çš„ã€‚&lt;/p>
&lt;h1 id="0x02scoop">0x02ï¼šscoop&lt;/h1>
&lt;p>æ‰“å¼€powershellï¼Œå®‰è£…winä¸‹å¥½ç”¨çš„å‘½ä»¤è¡Œè½¯ä»¶ç®¡ç†å·¥å…·ï¼šscoop&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Invoke-Expression (New-Object System.Net.WebClient).DownloadString(&amp;#39;https://get.scoop.sh&amp;#39;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœå®‰è£…å¤±è´¥ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Set-ExecutionPolicy RemoteSigned -scope CurrentUser
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="0x03èŠ±å“¨çš„ç»ˆç«¯">0x03ï¼šèŠ±å“¨çš„ç»ˆç«¯&lt;/h1>
&lt;p>&lt;a class="link" href="https://starship.rs/" target="_blank" rel="noopener"
>https://starship.rs/&lt;/a>&lt;/p>
&lt;p>åœ¨git bashä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ scoop install starship
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨.bashrcè¿½åŠ é…ç½®ï¼Œä½¿å…¶å¯ä»¥é»˜è®¤ä½¿ç”¨starshipï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">eval &amp;#34;$(starship init bash)&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åè¿›å…¥åˆ°homeç›®å½•ï¼Œåˆ›å»ºstarshipçš„é…ç½®æ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ mkdir -p .config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cd .config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim starship.toml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å…¥ä»¥ä¸‹é…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># ~/.config/starship.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">battery&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">full_symbol&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ”‹&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">charging_symbol&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ”Œ&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">discharging_symbol&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;âš¡&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[[&lt;/span>&lt;span class="nx">battery&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">display&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">threshold&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bold red&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">character&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">error_symbol&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;[âœ–](bold red) &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">cmd_duration&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">min_time&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">10_000&lt;/span> &lt;span class="c"># Show command duration over 10,000 milliseconds (=10 sec)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34; took [$duration]($style)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">directory&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">truncation_length&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;[$path]($style)[$lock_symbol]($lock_style) &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">git_branch&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34; [$symbol$branch]($style) &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">symbol&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ£ &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bold yellow&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">git_commit&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">commit_hash_length&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bold white&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">git_state&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s1">&amp;#39;[\($state( $progress_current of $progress_total)\)]($style) &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">git_status&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">conflicted&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;âš”ï¸ &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ahead&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸï¸ ğŸ’¨ Ã—${count}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">behind&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ¢ Ã—${count}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">diverged&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ”± ğŸï¸ ğŸ’¨ Ã—${ahead_count} ğŸ¢ Ã—${behind_count}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">untracked&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ›¤ï¸ Ã—${count}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">stashed&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ“¦ &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">modified&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ“ Ã—${count}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">staged&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ—ƒï¸ Ã—${count}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">renamed&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ“› Ã—${count}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">deleted&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ—‘ï¸ Ã—${count}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bright-white&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;$all_status$ahead_behind&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">hostname&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ssh_only&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;[$hostname]($style)&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">trim_at&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;-&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bold dimmed white&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">disabled&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">julia&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;[$symbol$version]($style) &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">symbol&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;à®ƒ &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bold green&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">memory_usage&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;$symbol[${ram}( | ${swap})]($style) &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">threshold&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">70&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bold dimmed white&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">disabled&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">package&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">disabled&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">python&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;[$symbol$version]($style) &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bold green&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">rust&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;[$symbol$version]($style) &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bold green&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">time&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">time_format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;%T&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">format&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ğŸ•™ $time($style) &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bright-white&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">disabled&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">username&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">style_user&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bold dimmed blue&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">show_always&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­¤æ—¶ï¼Œç»ˆç«¯å°±å¼€å§‹èŠ±é‡Œèƒ¡å“¨èµ·æ¥äº†ï¼Œæ¯”å¦‚æˆ‘çš„ç»ˆç«¯å°±é•¿è¿™æ ·ï¼š&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/zhenfeng-zhu.github.io/main/content/post/images/terminal.png"
loading="lazy"
>&lt;/p>
&lt;h1 id="0x04å…¶ä»–æå‡å¹¸ç¦æ„Ÿçš„å·¥å…·">0x04ï¼šå…¶ä»–æå‡å¹¸ç¦æ„Ÿçš„å·¥å…·&lt;/h1>
&lt;ul>
&lt;li>vscode&lt;/li>
&lt;/ul></description></item><item><title>Flutter RatingBar</title><link>https://example.com/p/flutter-ratingbar/</link><pubDate>Tue, 01 Feb 2022 21:01:17 +0800</pubDate><guid>https://example.com/p/flutter-ratingbar/</guid><description>&lt;p>The RatingBar widget is used to show a rating or collect ratings from users (this is an interactive RatingBar). For example, you can use the RatingBar widget inside an e-commerce app to show ratings for a product.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012101831.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter RatioButton</title><link>https://example.com/p/flutter-ratiobutton/</link><pubDate>Tue, 01 Feb 2022 21:00:30 +0800</pubDate><guid>https://example.com/p/flutter-ratiobutton/</guid><description>&lt;p>The RadioButton widget is used to allow a user to select one option from multiple selections.
You can use the RadioButton widget for implementing a single selection such as gender selection, notification preferences, etc.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012100222.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Dropdown</title><link>https://example.com/p/flutter-dropdown/</link><pubDate>Tue, 01 Feb 2022 20:59:39 +0800</pubDate><guid>https://example.com/p/flutter-dropdown/</guid><description>&lt;p>The DropDown widget is used to allow a user to select from a list of items. The DropDown widget shows the currently selected item and opens up a list of options when you click on it.
You can use the Dropdown widget for implementing a single selection such as language selection, shirt size, etc.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012059283.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter TextField</title><link>https://example.com/p/flutter-textfield/</link><pubDate>Tue, 01 Feb 2022 20:58:49 +0800</pubDate><guid>https://example.com/p/flutter-textfield/</guid><description>&lt;p>The TextField widget allows users to input text into your app. You can use the TextField widget for building forms, send messages, dialogs, search, etc.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012059785.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter ToggleIcon</title><link>https://example.com/p/flutter-toggleicon/</link><pubDate>Tue, 01 Feb 2022 20:57:42 +0800</pubDate><guid>https://example.com/p/flutter-toggleicon/</guid><description>&lt;p>The ToggleIcon widget is used to allow a user to switch between two icons that represent two different states. You can use the ToggleIcon widget to implement a feature such as an on-off button, like button, etc.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012058089.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter CheckboxListTitle</title><link>https://example.com/p/flutter-checkboxlisttitle/</link><pubDate>Tue, 01 Feb 2022 20:55:43 +0800</pubDate><guid>https://example.com/p/flutter-checkboxlisttitle/</guid><description>&lt;p>The CheckboxListTile is a combination of Checkbox and ListTile. Tapping anywhere on the CheckboxListTile toggles the checkbox.
You can use the CheckboxListTile to show a list of ToDo items to mark them as complete.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012056855.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter SlidableListTitle</title><link>https://example.com/p/flutter-slidablelisttitle/</link><pubDate>Tue, 01 Feb 2022 20:54:54 +0800</pubDate><guid>https://example.com/p/flutter-slidablelisttitle/</guid><description>&lt;p>The SlidableListTile is a special type of ListTile widget that reveals a list of actions that can be taken on a ListTile when a user swipes right.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012055514.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter ListTitle</title><link>https://example.com/p/flutter-listtitle/</link><pubDate>Tue, 01 Feb 2022 20:54:13 +0800</pubDate><guid>https://example.com/p/flutter-listtitle/</guid><description>&lt;p>The ListTile widget contains a Title, Subtitle, Leading Icon, and Trailing Icon. The ListTile widget is typically used to populate a ListView.
For example, you can use the ListTile to show a list of To Do items or emails.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012054559.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter ChoiceChips</title><link>https://example.com/p/flutter-choicechips/</link><pubDate>Tue, 01 Feb 2022 20:53:02 +0800</pubDate><guid>https://example.com/p/flutter-choicechips/</guid><description>&lt;p>The ChoiceChips widget is used to allow the selection of a single chip from a group of chips. Each chip represents has an icon and text.
You can use the ChoiceChips widget to show the options that can be used to filter a list or to change the UI based on selection.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012053034.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Icon</title><link>https://example.com/p/flutter-icon/</link><pubDate>Tue, 01 Feb 2022 20:52:09 +0800</pubDate><guid>https://example.com/p/flutter-icon/</guid><description>&lt;p>The Icon widget is used to show a small image or a symbol.
You can use the Icon widget to let users quickly understand the meaning of the text. For example, placing a location icon ( ) before the numbers such as 23.35, 79.57 helps users identify that the values are a latitude and longitude.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012052115.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter IconButton</title><link>https://example.com/p/flutter-iconbutton/</link><pubDate>Tue, 01 Feb 2022 20:44:57 +0800</pubDate><guid>https://example.com/p/flutter-iconbutton/</guid><description>&lt;p>The IconButton widget allows users to take action with a single tap. Unlike the regular Button widget, an IconButton shows a small image or a symbol and does not include text.
You can use the Icon widget to let users quickly understand the meaning of an action. For example, the delete action can be easily conveyed using the trash can icon which looks like this ( )&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012051408.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Button</title><link>https://example.com/p/flutter-button/</link><pubDate>Tue, 01 Feb 2022 20:44:14 +0800</pubDate><guid>https://example.com/p/flutter-button/</guid><description>&lt;p>The Button widget allows users to take an action such as saving data, opening a new page, etc. It is one of the most widely used widgets in Flutter.
You can use the Button widget in forms, dialogs, cards, etc.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012044617.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter CircleImage</title><link>https://example.com/p/flutter-circleimage/</link><pubDate>Tue, 01 Feb 2022 20:43:18 +0800</pubDate><guid>https://example.com/p/flutter-circleimage/</guid><description>&lt;p>The CircleImage widget is used to show a circular image from uploaded assets or the URL link. The CircleImage widget can display the different types of images such as JPEG, PNG, GIF, Animated GIF, WebP, Animated WebP, BMP, and WBMP.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012043086.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Image</title><link>https://example.com/p/flutter-image/</link><pubDate>Tue, 01 Feb 2022 20:42:22 +0800</pubDate><guid>https://example.com/p/flutter-image/</guid><description>&lt;p>The Image widget is used to show an image from uploaded assets or the URL link. The Image widget can display the different types of images such as JPEG, PNG, GIF, Animated GIF, WebP, Animated WebP, BMP, and WBMP.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012042368.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Text</title><link>https://example.com/p/flutter-text/</link><pubDate>Tue, 01 Feb 2022 20:41:31 +0800</pubDate><guid>https://example.com/p/flutter-text/</guid><description>&lt;p>The Text widget is used to show text on the screen. It is one of the most frequently used widgets.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012041563.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter FAB</title><link>https://example.com/p/flutter-fab/</link><pubDate>Tue, 01 Feb 2022 20:40:30 +0800</pubDate><guid>https://example.com/p/flutter-fab/</guid><description>&lt;p>The FloatingActionButton widget (also known as FAB) floats above the content on the screen and is tied to an action. The FAB widget is circular in shape and resides in the bottom right corner of the screen.
You can use the FAB widget to perform the primary action on the screen, such as Add, Create, etc.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012040327.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter EndDrawer</title><link>https://example.com/p/flutter-enddrawer/</link><pubDate>Tue, 01 Feb 2022 20:39:17 +0800</pubDate><guid>https://example.com/p/flutter-enddrawer/</guid><description>&lt;p>The EndDrawer is typically used to provide navigation to other pages. The EndDrawer opens up from the right side of the screen by swiping right-to-left or clicking the menu icon in the AppBar. The EndDrawer can be closed by clicking outside of the EndDrawer or by swiping left-to-right.
You can use the EndDrawer widget when the space for showing the navigation options is not sufficient.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012039981.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Drawer</title><link>https://example.com/p/flutter-drawer/</link><pubDate>Tue, 01 Feb 2022 20:38:17 +0800</pubDate><guid>https://example.com/p/flutter-drawer/</guid><description>&lt;p>The Drawer widget is used to provide navigation to other pages. The Drawer opens up from the left side of the screen by swiping left-to-right or clicking the menu icon in the AppBar. The Drawer can be closed by clicking outside of the Drawer or by swiping left-to-right.
You can use the Drawer widget when the space for showing the navigation options is not sufficient.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012038428.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter AppBar</title><link>https://example.com/p/flutter-appbar/</link><pubDate>Tue, 01 Feb 2022 20:36:43 +0800</pubDate><guid>https://example.com/p/flutter-appbar/</guid><description>&lt;p>The AppBar widget is used to show the information and actions related to the current page. You can use the AppBar widget to display the menu icon, back button, page title, various actions such as share, search, delete, and so on.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012037429.png"
loading="lazy"
>&lt;/p>
&lt;p>The AppBar widget consists of three sections, Leading, Title, and Actions.
The Leading section is typically used to show a clickable widget such as the back button, cancel icon, profile icon, menu icon, etc.
The Title section usually includes a title.
The Actions section typically contains clickable widgets that can be used to take actions on that page.&lt;/p>
&lt;p>Each section can be customized based on your needs. Multiple widgets can be added to each section by using layout elements such as rows and columns.&lt;/p></description></item><item><title>Flutter Wrap</title><link>https://example.com/p/flutter-wrap/</link><pubDate>Tue, 01 Feb 2022 20:35:59 +0800</pubDate><guid>https://example.com/p/flutter-wrap/</guid><description>&lt;p>The Wrap widget is similar to Row and Column as it shows its children one after another. If there is not enough space to show your item, the Wrap widget will automatically place it in a new row or column.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012036958.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Container</title><link>https://example.com/p/flutter-container/</link><pubDate>Tue, 01 Feb 2022 20:35:05 +0800</pubDate><guid>https://example.com/p/flutter-container/</guid><description>&lt;p>The Container widget is like a box that allows you to add a background color, rounded corners, or set some size constraints to a child widget.
You can use Containers to help create your UI structure. Containers can be helpful in dividing the screen into smaller logical parts.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012035720.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Divider</title><link>https://example.com/p/flutter-divider/</link><pubDate>Tue, 01 Feb 2022 20:34:26 +0800</pubDate><guid>https://example.com/p/flutter-divider/</guid><description>&lt;p>The Divider widget is a horizontal line that is used to visually separate widgets.
You can use the Divider widget to create some space between a group of widgets or between the items in a ListView.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012034273.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter PageView</title><link>https://example.com/p/flutter-pageview/</link><pubDate>Tue, 01 Feb 2022 20:33:32 +0800</pubDate><guid>https://example.com/p/flutter-pageview/</guid><description>&lt;p>The PageView widget is used to create swipeable pages. It contains a list of scrollable pages that you can swipe either horizontally or vertically.
For example, you can use the PageView widget to create onboarding screens, an app that shows a short video on swipe up or down just like Instagram, TikTok, Youtube shorts, etc.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012033280.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter TabBar</title><link>https://example.com/p/flutter-tabbar/</link><pubDate>Tue, 01 Feb 2022 20:32:28 +0800</pubDate><guid>https://example.com/p/flutter-tabbar/</guid><description>&lt;p>The TabBar widget is used to show different categories of content.
You can use the TabBar widget to quickly glance at each option and move between the categories by swiping or clicking on the Tab.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012032582.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Spacer</title><link>https://example.com/p/flutter-spacer/</link><pubDate>Tue, 01 Feb 2022 20:31:30 +0800</pubDate><guid>https://example.com/p/flutter-spacer/</guid><description>&lt;p>The Spacer widget is used to insert a flexible empty space between the children of the Column and Row widget.
If you want even space between your child widgets, you can add space by setting the Main Axis Alignment to Space Around, Space Evenly, and Space Between. If you want a more customized space between your child widgets (example below), you should use the Spacer Widget.&lt;/p>
&lt;blockquote>
&lt;p>The Spacer widget takes all of the available space so the Spacer Widget will have no effect on a Column or Row where the Main Axis Alignment is set to Space Around, Space Evenly, and Space Between.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202012032761.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Card</title><link>https://example.com/p/flutter-card/</link><pubDate>Tue, 01 Feb 2022 18:37:32 +0800</pubDate><guid>https://example.com/p/flutter-card/</guid><description>&lt;p>The Card widget is used to represent some related information. For example, you can use a Card widget to show a Business card, restaurant information, movie details, etc.
The Card widget is frequently used with a List to display the item information for a specific record.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202011838567.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Gridview</title><link>https://example.com/p/flutter-gridview/</link><pubDate>Tue, 01 Feb 2022 18:36:56 +0800</pubDate><guid>https://example.com/p/flutter-gridview/</guid><description>&lt;p>The GridView widget is used to display a list of items in a grid or 2- dimensions (Both vertically and horizontally at the same time.)
For example, you can use GridView to show a list of photos or a list of products.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202011837617.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter ListView</title><link>https://example.com/p/flutter-listview/</link><pubDate>Tue, 01 Feb 2022 18:36:15 +0800</pubDate><guid>https://example.com/p/flutter-listview/</guid><description>&lt;p>The ListView widget is used to show a large number of items as a scrollable list. ListView is an advanced version of the Column widget that automatically provides scrolling when the list of items won&amp;rsquo;t fit on the screen.
You can use the ListView to show the list of items either vertically or horizontally.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202011836208.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Stack</title><link>https://example.com/p/flutter-stack/</link><pubDate>Tue, 01 Feb 2022 18:34:51 +0800</pubDate><guid>https://example.com/p/flutter-stack/</guid><description>&lt;p>The Stack widget allows child widgets to overlap on top of each other. The last child of the Stack stays on top.
Sometimes basic widgets such as Column and Row are not sufficient for creating a complex UI. For example, if want to show text on top of an image - you should consider using the Stack widget.
The following figure helps you understand how the Stack widget is different from other widgets.&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202011835440.png"
loading="lazy"
>&lt;/p>
&lt;p>Here&amp;rsquo;s another example that shows the use of the Stack widget:&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202011835258.png"
loading="lazy"
>&lt;/p></description></item><item><title>Flutter Row</title><link>https://example.com/p/flutter-row/</link><pubDate>Tue, 01 Feb 2022 18:32:45 +0800</pubDate><guid>https://example.com/p/flutter-row/</guid><description>&lt;p>The Row widget is used to create a horizontal layout. It is one of the most used widgets. Hereâ€™s how the Row arranges its children:&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202011834688.png"
loading="lazy"
>&lt;/p>
&lt;p>As shown in the figure above, the Main Axis and the Cross Axis are two important properties of the Row. For a Row, the Main Axis runs horizontally and the Cross Axis runs vertically. By default, all the children inside of the Row will be arranged in a horizontal fashion.&lt;/p></description></item><item><title>Flutter Columns</title><link>https://example.com/p/flutter-columns/</link><pubDate>Tue, 01 Feb 2022 18:31:19 +0800</pubDate><guid>https://example.com/p/flutter-columns/</guid><description>&lt;p>The Column widget is one of the most used widgets and is essential in creating a vertical layout for any UI. Hereâ€™s how the column arranges its children:&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202202011831071.png"
loading="lazy"
>&lt;/p>
&lt;p>As shown in the figure above, the Main Axis and the Cross Axis are two important properties of the column. For a column, the Main Axis runs vertically and the Cross Axis runs horizontally. By default, all the children inside of the column will be arranged in a vertical fashion.&lt;/p></description></item><item><title>æ‰“é€ æ–‡æ¡£</title><link>https://example.com/p/%E6%89%93%E9%80%A0%E6%96%87%E6%A1%A3/</link><pubDate>Sun, 30 Jan 2022 15:26:35 +0800</pubDate><guid>https://example.com/p/%E6%89%93%E9%80%A0%E6%96%87%E6%A1%A3/</guid><description>&lt;h1 id="ä¸¤ç§æ–‡æ¡£è§†è§’éœ€æ±‚è§†è§’å’Œä¾›ç»™è§†è§’">ä¸¤ç§æ–‡æ¡£è§†è§’ï¼šéœ€æ±‚è§†è§’å’Œä¾›ç»™è§†è§’&lt;/h1>
&lt;h2 id="éœ€æ±‚è§†è§’æƒ³æƒ³ä½ çš„å—ä¼—æ˜¯è°äº†è§£ä»–ä»¬çš„æœŸæœ›å€¼">éœ€æ±‚è§†è§’ï¼šæƒ³æƒ³ä½ çš„å—ä¼—æ˜¯è°ï¼Œäº†è§£ä»–ä»¬çš„æœŸæœ›å€¼&lt;/h2>
&lt;p>ç®¡ç†è€…&lt;/p>
&lt;blockquote>
&lt;p>æ±‡æŠ¥ä¸Šçº§&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>ä¸šåŠ¡æ•´ä½“æƒ…å†µ&lt;/li>
&lt;li>æˆ˜ç•¥é‡å¿ƒå’Œèµ„æºæŠ•å…¥&lt;/li>
&lt;li>é¢ä¸´é—®é¢˜å’Œè§£å†³åŠæ³•&lt;/li>
&lt;/ul>
&lt;p>åä½œè€…&lt;/p>
&lt;blockquote>
&lt;p>ä¸šåŠ¡æµç¨‹èŠ‚ç‚¹ä¸­çš„ä¸€ç¯ï¼Œä½ çš„å·¥ä½œä¼šå½±å“ taï¼Œæˆ–è€… ta çš„å·¥ä½œä¼šå½±å“ä½ ã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>ä¸šåŠ¡æ•´ä½“æƒ…å†µ&lt;/li>
&lt;li>æ¥ä¸‹æ¥ä½ çš„å“ªäº›äº‹æƒ…ä¼šå½±å“åˆ°æˆ‘çš„äº‹æƒ…ï¼Ÿæˆ‘è¯¥æ€ä¹ˆé…åˆï¼Ÿ&lt;/li>
&lt;/ul>
&lt;p>ä¿¡æ¯åŒæ­¥è€…&lt;/p>
&lt;blockquote>
&lt;p>ä»–ä»¬å¤§éƒ¨åˆ†æ—¶é—´å¹¶ä¸åœ¨ä¸šåŠ¡æµç¨‹èŠ‚ç‚¹ä¸­ã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>ä¸šåŠ¡æ•´ä½“æƒ…å†µï¼Œæˆ‘å°±æ˜¯æƒ³çŸ¥é“ä¸€ä¸‹ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="ä¾›ç»™è§†è§’æŠŠæˆ‘åšäº†ä»€ä¹ˆå±•ç¤ºç»™ä½ çœ‹">ä¾›ç»™è§†è§’ï¼šæŠŠæˆ‘åšäº†ä»€ä¹ˆå±•ç¤ºç»™ä½ çœ‹&lt;/h2>
&lt;ul>
&lt;li>ç‰¹ç‚¹ï¼šæ–‡æ¡£çš„æ•´ä½“ç»“æ„å’Œä¸šåŠ¡çš„äºŒçº§éƒ¨é—¨æ¶æ„é«˜åº¦ç›¸ä¼¼ï¼Œå„ä¸ªäºŒçº§éƒ¨é—¨è´Ÿè´£å†™ä¸€å°å—ï¼Œæœ€åæ‰¾ PMO ç¼åˆåœ¨ä¸€èµ·ã€‚&lt;/li>
&lt;li>é™·é˜±ï¼šå¾ˆå®¹æ˜“å¤±å»é‡ç‚¹ï¼Œå˜æˆå·¥ä½œçš„æµæ°´è´¦ï¼Œæ˜¥æ™šå¼æ±‡æŠ¥&lt;/li>
&lt;li>ç¼ºç‚¹ï¼šå¯¹ä¸ç†Ÿæ‚‰çš„äººæ¥è¯´ï¼Œè¿™äº›è€¦åˆå…³ç³»å’Œä¸šåŠ¡é€»è¾‘ç†è§£æˆæœ¬æ¯”è¾ƒé«˜ï¼Œå¾ˆå®¹æ˜“å¬æ™•ï¼Œä½†åˆä¸å¥½æ„æ€ç°åœºæé—®ï¼Œä¼šåä¸€çŸ¥åŠè§£ã€‚&lt;/li>
&lt;li>ä¼˜ç‚¹ï¼šäº‹æ— å·¨ç»†ï¼Œé¢é¢ä¿±åˆ°ã€‚&lt;/li>
&lt;/ul>
&lt;p>ã€æ€»ç»“ã€‘&lt;/p>
&lt;ul>
&lt;li>å…¬å¸åŒæœˆä¼šï¼šéœ€æ±‚è§†è§’ä¼˜å…ˆ&lt;/li>
&lt;li>å†…éƒ¨ reviewï¼šä¾›ç»™è§†è§’ä¼˜å…ˆ&lt;/li>
&lt;/ul>
&lt;h1 id="èšç„¦æ€ä¹ˆæŠŠä¸€å—å„¿ä¸šåŠ¡è¯´æ¸…æ¥šè®²æ˜ç™½">èšç„¦ï¼šæ€ä¹ˆæŠŠä¸€å—å„¿ä¸šåŠ¡è¯´æ¸…æ¥šã€è®²æ˜ç™½&lt;/h1>
&lt;h2 id="è§£æ³•ç”¨-25-ä¸ªç»´åº¦æ¥å™è¿°ä¸šåŠ¡">è§£æ³•ï¼šç”¨ 2.5 ä¸ªç»´åº¦æ¥å™è¿°ä¸šåŠ¡&lt;/h2>
&lt;ul>
&lt;li>ç»´åº¦ 1ï¼šä¸šåŠ¡ä¸»çº¿ï¼Œæ¦‚æ‹¬æ€§è´¨çš„ä¸œè¥¿ï¼Œåç²—&lt;/li>
&lt;li>ç»´åº¦ 2ï¼šä»ä¸€ä¸ªæˆ–å‡ ä¸ªç»´åº¦å¯¹ä¸šåŠ¡çš„ break downï¼Œè®©å¤§å®¶çœ‹åˆ°å¢é•¿æˆ–ä¸‹é™çš„å½’å› &lt;/li>
&lt;li>ç»´åº¦ 2.5ï¼šé€‰ä¸€ä¸ªæœ€å€¼å¾—æ‹¿å‡ºæ¥è¯´çš„å•ç‚¹ï¼Œå¾€ä¸‹é’»ï¼Œå±•å¼€æ¥è¯´ï¼Œå¢åŠ ä¿¡æ¯ä¸°å¯Œåº¦ï¼Œä»¥å°è§å¤§ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="ç»´åº¦-1ä¸šåŠ¡æ•´ä½“çŠ¶å†µå¦‚ä½•åœ¨æœ€çŸ­çš„æ—¶é—´å†…è®©å¤§å®¶äº†è§£è¿™ä¸ªä¸šåŠ¡çš„è¿›å±•">ç»´åº¦ 1ï¼šä¸šåŠ¡æ•´ä½“çŠ¶å†µï¼Œå¦‚ä½•åœ¨æœ€çŸ­çš„æ—¶é—´å†…è®©å¤§å®¶äº†è§£è¿™ä¸ªä¸šåŠ¡çš„è¿›å±•&lt;/h2>
&lt;ul>
&lt;li>for è´Ÿè´£äººï¼šå¦‚æœæ¯å¤©åªæœ‰ä¸€åˆ†é’Ÿï¼Œä½ ä¼šå…³æ³¨å“ªäº›æŒ‡æ ‡å’Œäº‹æƒ…è¿›å±•ï¼Ÿ&lt;/li>
&lt;li>for ä¸‰ç§è§’è‰²ï¼šå‡è®¾æœ‰ä¸”åªæœ‰ä¸‰ä¸ªé—®é¢˜ï¼Œä½ ä¼šé—®å…³äºè¿™ä¸ªä¸šåŠ¡çš„ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/li>
&lt;/ul>
&lt;p>æƒ³æ˜ç™½ä¸Šè¿°çš„ä¸¤ä¸ªé—®é¢˜ï¼Œç­”æ¡ˆå‘¼ä¹‹æ¬²å‡ºï¼›æƒ³ä¸å‡ºæ¥ï¼Œå°±ç»§ç»­æƒ³ï¼Œå’Œä¸Šçº§è®¨è®ºï¼Œå’Œåä½œæ–¹è®¨è®ºï¼Œç›´åˆ°å¾—å‡ºè®©ä½ å¾ˆè¸å®å’Œè‡ªä¿¡çš„ç­”æ¡ˆã€‚&lt;/p>
&lt;p>è¦æ±‚ç®€å•ç›´æ¥ï¼Œè®©äººç§’æ‡‚ã€‚&lt;/p>
&lt;h2 id="ç»´åº¦-2æ‰¾åˆ°ä¸šåŠ¡çš„å¢é•¿å…¬å¼æ‹†è§£å¼€æ¥çœ‹">ç»´åº¦ 2ï¼šæ‰¾åˆ°ä¸šåŠ¡çš„å¢é•¿å…¬å¼ï¼Œæ‹†è§£å¼€æ¥çœ‹&lt;/h2>
&lt;p>æ·±åˆ»ç†è§£ä¸šåŠ¡æ˜¯èµ·ç‚¹ï¼Œé’ˆå¯¹ç»´åº¦ 1 é‡Œé¢çš„å…³é”®æŒ‡æ ‡ï¼ŒæŠŠä»–ä»¬åˆ†è§£æˆä¸€çº§å¢é•¿å…¬å¼ã€‚&lt;/p>
&lt;blockquote>
&lt;p>performance = A &lt;em>B&lt;/em> C * D&lt;/p>
&lt;/blockquote>
&lt;p>ABCD é‡Œæœ‰äº›æ˜¯å¿«å˜é‡ï¼Œæœ‰äº›æ˜¯æ…¢å˜é‡ï¼Œåœ¨è¿™ä¸ªç¯èŠ‚ä¸­ï¼Œéœ€è¦æ¸…æ™°çš„ç»™å—ä¼—æŒ‡å‡ºï¼šé©±åŠ¨ä¸šåŠ¡å½“å‰å‘å±•çš„ä¸»è¦åŠ¨åŠ›å’Œé˜»åŠ›æ˜¯ä»€ä¹ˆï¼Ÿä»¥åŠå¯¹åº”çš„åç»­æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p>
&lt;p>æ‰€ä»¥å™äº‹çº¿ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š&lt;/p>
&lt;p>Performance è¾¾åˆ°é¢„æœŸï¼Œä¸»è¦æ˜¯å› ä¸º AB è¶…å‡ºé¢„æœŸï¼ŒC æ— æ˜æ˜¾å˜åŒ–ï¼ŒD æ˜æ˜¾åœ°åŸŸé¢„æœŸ
A ä¸»è¦æ˜¯å› ä¸ºåšäº† xxxxï¼Œåç»­æ‰“ç®— xxx
B ä¸»è¦æ˜¯å› ä¸º xxxï¼Œåç»­æ‰“ç®— xxx
C åšäº† xxxï¼Œæ²¡æœ‰æ•ˆæœï¼Œåç»­ä¸æäº†
D ä¸»è¦æ˜¯ xxxï¼Œå¯¼è‡´æ²¡æœ‰è¾¾åˆ°é¢„æœŸï¼Œåç»­ todo æ˜¯ xxxï¼Œéœ€è¦æ”¯æŒï¼š@xxx&lt;/p>
&lt;p>ç®€å•å¹²å‡€ï¼Œä¸æ‹–æ³¥å¸¦æ°´ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥æ˜¯çµé­‚ä¸‰é—®ã€‚&lt;/p>
&lt;ol>
&lt;li>å¦‚ä½•é€‰æ‹© break down çš„è§’åº¦
è¿™é‡Œçš„åˆ†è§£åŠ¨ä½œï¼Œé€šå¸¸æœ‰å¤šä¸ªç»´åº¦å¯ä»¥é€‰æ‹©ã€‚&lt;/li>
&lt;/ol>
&lt;p>å…³é”®çš„å†³ç­–ç‚¹åœ¨äºï¼šæ€ä¹ˆåˆ‡åˆ†æœ€èƒ½ååº”çœŸå®çš„é—®é¢˜ï¼Œå°±é€‰æ‹©å“ªä¸ªè§’åº¦ã€‚æ‰€ä»¥å®é™…æ“ä½œä¸­ï¼Œéƒ½ä¼šåœ¨åº•ä¸‹å„ç§æ¨æ¼”ï¼Œç›´åˆ°æ‰¾å¥½æœ€ä½³çš„ä¸šåŠ¡è§‚å¯Ÿè§’åº¦ã€‚&lt;/p>
&lt;ol start="2">
&lt;li>ä¸ºä»€ä¹ˆé¿å…æŠŠå¢é•¿å…¬å¼æ‹†è§£åˆ° -2 ç”šè‡³ -3 å±‚çº§ï¼Ÿ&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>å¤ªå¤æ‚&lt;/li>
&lt;li>çœ‹ä¸æ‡‚&lt;/li>
&lt;li>å¤§å®¶ä¸å…³å¿ƒï¼ˆè¿™æ˜¯ä½ ä»½å†…çš„äº‹å„¿ï¼‰&lt;/li>
&lt;/ul>
&lt;ol start="3">
&lt;li>åå®šå‹çš„èŒèƒ½çº¿ã€æ”¯æŒç±»çš„ä¸šåŠ¡æ˜¯å¦ä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹å¼ï¼Ÿ&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>å¯ä»¥&lt;/li>
&lt;li>è¿™ç§æœªå¿…å¯ä»¥æ˜æ˜¾é‡åŒ–ï¼Œä½†æ˜¯å®é™…äº§å‡ºæœ€åä¹Ÿæ˜¯å¯ä»¥åˆ†è§£æˆå‡ ä¸ªåŠ¨ä½œï¼Œé“ç†ä¸€æ ·çš„ã€‚å¦‚æœæ— æ³•åˆ†è§£ï¼Œå¾ˆå¯èƒ½ä½ å¯¹ä¸šåŠ¡çš„ç†è§£è¿˜æ˜¯ç¼ºä¹ä¸€ä¸ªã€å‘ä¸ŠæŠ½ç¦»ã€çš„åŠ¨ä½œã€‚&lt;/li>
&lt;/ul>
&lt;p>nothing is unbreakable.&lt;/p>
&lt;h2 id="ç»´åº¦-25æ·±å…¥ä¸‹é’»ä»¥å°è§å¤§">ç»´åº¦ 2.5ï¼šæ·±å…¥ä¸‹é’»ï¼Œä»¥å°è§å¤§&lt;/h2>
&lt;p>å‰é¢ä¼šæ— é™å‹åˆ¶ä½ æƒ³ä¸‹é’»åˆ°-2 -3 å±‚çº§çš„å†²åŠ¨ï¼Œè¿™é‡Œå¯ä»¥å‘æ³„ä¸€ä¸‹ã€‚&lt;/p>
&lt;p>æ— è®º 1 æˆ– 2ï¼Œéƒ½ä¼šç»™äººä¸€ç§æµ®äºè¡¨é¢çš„æ„Ÿè§‰ï¼Œè¿™é‡Œæ˜¯æ‹¿ä¸ªæ”¾å¤§é•œï¼ŒæŠŠæŸä¸ªç‚¹æ‰“å¼€æ¥çœ‹ã€‚&lt;/p>
&lt;p>ä¸ºä»€ä¹ˆè¯´è¿™ä¸ªç»´åº¦æ˜¯ä¸šåŠ¡çš„ä»¥å°è§å¤§å‘¢ï¼Œå› ä¸ºè¿™ä¸ª case èƒŒåååº”çš„æ˜¯ç³»ç»Ÿå±‚é¢çš„ todoï¼Œå¤šå°‘æœ‰ä¸€äº›ä¸Šçº²ä¸Šçº¿çš„å‘³é“ï¼Œæ¯”å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸€ä¸ª bad case çš„åˆ†æï¼Œéœ€è¦æç‚¼åˆ°ååº”å‡ºçš„ xx å±‚é¢æœ‰å“ªäº›ä¸è¶³ï¼Œåç»­ todo æ˜¯å•¥ï¼Œéœ€è¦ xx æ¥æ”¯æŒé…åˆã€‚&lt;/li>
&lt;li>&amp;hellip;&lt;/li>
&lt;/ul>
&lt;h1 id="å¦‚ä½•ç²¾ç›Šæ±‚ç²¾">å¦‚ä½•ç²¾ç›Šæ±‚ç²¾&lt;/h1>
&lt;h2 id="ä¸‰ç§è§’è‰²çš„ä¸ªæ€§åŒ–éœ€æ±‚æ€ä¹ˆåŠ">ä¸‰ç§è§’è‰²çš„ä¸ªæ€§åŒ–éœ€æ±‚æ€ä¹ˆåŠ&lt;/h2>
&lt;p>è¿™ä¸ªä¸ç”¨æ‹…å¿ƒã€‚&lt;/p>
&lt;p>å¦‚æœä»ä¸Šé¢ 2.5 ä¸ªè§’åº¦è¯´æ¸…æ¥šäº†ä¸šåŠ¡ï¼Œä½ ä¼šå‘ç°è¿™äº›é—®é¢˜çš„ç­”æ¡ˆéƒ½åœ¨å„ç§ todo é‡Œäº†ã€‚&lt;/p>
&lt;p>å¦ä¸€ç§æ›´ä¸ºç›´æ¥ï¼Œåœ¨è®²æ¸…æ¥šä¸šåŠ¡æœ¬èº«çš„ facts ä¹‹åï¼Œåé¢å•ç‹¬èµ·ä¸ªæ¨¡å—ï¼Œç”¨æ¥è®²æ¸…æ¥šéœ€è¦è®¨è®ºçš„é—®é¢˜å’Œéœ€è¦çš„æ”¯æŒï¼Œå¯¹åº” at åˆ°å…·ä½“çš„äººã€‚&lt;/p>
&lt;h2 id="okr-æ€ä¹ˆåŠ">OKR æ€ä¹ˆåŠ&lt;/h2>
&lt;p>å¦‚æœåšå®Œä¸Šè¿°é‚£ä¹ˆå¤šå·¥ä½œä¹‹åï¼Œè¿˜æ˜¯å¯¹äºæ¥ä¸‹æ¥è¦åšçš„äº‹å„¿ä¸æ¸…æ¥šï¼Œå†™ä¸å‡º okrï¼Œé‚£å°±å†èµ°ä¸€éã€‚&lt;/p>
&lt;p>ç¬¦åˆé¢„æœŸçš„äº‹å„¿ï¼Œéƒ½æ˜¯ä½ å¥½æˆ‘å¥½å¤§å®¶å¥½ï¼Œæ— éæ˜¯é‡è®¾ç›®æ ‡çš„äº‹å„¿ã€‚ä¸ç¬¦åˆé¢„æœŸçš„äº‹å„¿ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨ï¼Œç”¨ okr åšç›®æ ‡ç®¡ç†ã€‚&lt;/p>
&lt;ul>
&lt;li>å¯ä»¥ç«‹ç«¿è§å½±çš„äº‹å„¿ï¼Œæ˜¯å¿«å˜é‡ï¼Œé€šå¸¸å¾ˆå¤šäººæ¥ç›¯ï¼Œè¿™äº›å¿«å˜é‡å› ä¸ºæ˜¯çŸ­æœŸä¸šåŠ¡å¢é•¿çš„åŠ¨åŠ›ï¼Œåè€Œä¸å®¹æ˜“å‡ºé—®é¢˜ï¼Œå³ä½¿å‡ºäº†é—®é¢˜ä¿®èµ·æ¥ä¹Ÿç‰¹åˆ«å¿«ã€‚&lt;/li>
&lt;li>å®¹æ˜“å‡ºé—®é¢˜çš„æ˜¯é‚£äº›å½±å“é•¿æœŸå¢é•¿çš„æ…¢å˜é‡ï¼ŒçŸ­æœŸæœªå¿…é©¬ä¸Šäº§å‡ºä½œç”¨ï¼Œéœ€è¦æ›´é«˜å±‚çº§çš„ç®¡ç†å±‚å…³æ³¨ï¼Œå¹¶ç”¨å‡ ä¸ªæœˆçš„ okr æ¥çªç ´ï¼Œæ¯”å¦‚ç»„ç»‡é—®é¢˜ã€æ•ˆç‡é—®é¢˜ã€åˆè§„é—®é¢˜ã€å®‰å…¨é—®é¢˜ç­‰ã€‚&lt;/li>
&lt;li>ä¸€çº¿å‘˜å·¥é™¤äº†å¤§é‡å…³æ³¨æ—¥å¸¸å¿«å˜é‡ä¹‹å¤–ï¼Œè¿˜éœ€è¦ç»§æ‰¿ä¸€éƒ¨åˆ†æ¥è‡ªæ›´é«˜å±‚çº§çš„æ…¢å˜é‡å·¥ä½œã€‚&lt;/li>
&lt;/ul>
&lt;p>å¿«å˜é‡&lt;/p>
&lt;blockquote>
&lt;p>çŸ­æœŸä¸šåŠ¡å¢é•¿çš„åŠ¨åŠ›ï¼Œåé¦ˆè§æ•ˆå¿«ã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>ç¬¦åˆé¢„æœŸï¼šé‡è®¾ç›®æ ‡&lt;/li>
&lt;li>ä¸ç¬¦åˆé¢„æœŸï¼šä¸šåŠ¡çº¿è´Ÿè´£äºº-1 -2 çš„ okrï¼Œmanager -1 -2 çš„ okr&lt;/li>
&lt;/ul>
&lt;p>æ…¢å˜é‡&lt;/p>
&lt;blockquote>
&lt;p>é•¿æœŸå¢é•¿çš„åŸºçŸ³ï¼Œéœ€è¦å¤§é‡æ™´å¤©ä¿®é›¨ä¼çš„å·¥ä½œã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>ç¬¦åˆé¢„æœŸï¼šç»§ç»­ä¿æŒ&lt;/li>
&lt;li>ä¸ç¬¦åˆé¢„æœŸï¼šä¸šåŠ¡çº¿è´Ÿè´£äººçš„ okrï¼Œmanger çš„ okr&lt;/li>
&lt;/ul>
&lt;h1 id="å…¶ä»–">å…¶ä»–&lt;/h1>
&lt;ul>
&lt;li>ä½¿ç”¨å°ç™½è¯­è¨€ï¼Œå°½é‡å‡å°‘æœ¯è¯­ã€‚&lt;/li>
&lt;li>æ§åˆ¶ç¯‡å¹…ï¼Œ1w å­—ä»¥å†…&lt;/li>
&lt;li>æ— æ ¼å¼å’Œè¯­æ³•é”™è¯¯&lt;/li>
&lt;/ul></description></item><item><title>ä¹¦å•</title><link>https://example.com/p/%E4%B9%A6%E5%8D%95/</link><pubDate>Sun, 30 Jan 2022 15:18:30 +0800</pubDate><guid>https://example.com/p/%E4%B9%A6%E5%8D%95/</guid><description>&lt;p>ä¸€ã€ç†è§£è‡ªå·±ä¹‹ç”Ÿç†ä¸å¿ƒç†å¥åº·&lt;/p>
&lt;ul>
&lt;li>è‚¥èƒ–ä»£ç &lt;/li>
&lt;li>æ­£å¿µçš„å¥‡è¿¹&lt;/li>
&lt;li>å†¥æƒ³çš„åŸç†ä¸å®è·µè¿›é˜¶&lt;/li>
&lt;/ul>
&lt;p>äºŒã€ç†è§£è‡ªå·±ä¹‹å·…å³°æ—¶åˆ»&lt;/p>
&lt;ul>
&lt;li>è·¨è¶Šä¸å¯èƒ½&lt;/li>
&lt;li>çº³ç“¦å°”å®å…¸ï¼šè´¢å¯Œå’Œå¹¸ç¦æŒ‡å—&lt;/li>
&lt;li>å·¨äººçš„å·¥å…·ä¹¦&lt;/li>
&lt;/ul>
&lt;p>ä¸‰ã€ç†è§£ä¸–ç•Œä¹‹å¤æ‚ç§‘å­¦&lt;/p>
&lt;ul>
&lt;li>å·´æ‹‰å·´è¥¿æˆåŠŸå®šå¾‹&lt;/li>
&lt;li>è§„æ¨¡&lt;/li>
&lt;li>ç›´è§‰æ³µ&lt;/li>
&lt;li>å¦‚ä½•è§£å†³å¤æ‚é—®é¢˜&lt;/li>
&lt;/ul>
&lt;p>å››ã€ç†è§£ä¸–ç•Œä¹‹é‡‘èã€æŠ•èµ„ã€ç»æµ&lt;/p>
&lt;ul>
&lt;li>è´¢å¯Œçš„èµ·æº&lt;/li>
&lt;li>æŠ€æœ¯é©å‘½ä¸é‡‘èèµ„æœ¬&lt;/li>
&lt;li>æŠ€æœ¯çš„æœ¬è´¨&lt;/li>
&lt;li>å¤æ‚ç»æµå­¦ï¼šç»æµæ€æƒ³çš„æ–°æ¡†æ¶&lt;/li>
&lt;li>æ–‡æ˜-ç°ä»£åŒ–ä»·å€¼æŠ•èµ„ä¸ä¸­å›½&lt;/li>
&lt;li>å¤§è¡°é€€å¹´ä»£&lt;/li>
&lt;/ul>
&lt;p>äº”ã€ç†è§£ä¸–ç•Œä¹‹ç”Ÿæ´»&lt;/p>
&lt;ul>
&lt;li>ç½®èº«äº‹å†…ï¼šä¸­å›½æ”¿åºœä¸ç»æµå‘å±•&lt;/li>
&lt;li>ä¸­å›½çš„é€‰æ‹©ï¼šä¸­ç¾åšå¼ˆä¸æˆ˜ç•¥æŠ‰æ‹©&lt;/li>
&lt;li>ä¸­å›½çš„å®—æ•™&lt;/li>
&lt;/ul>
&lt;p>ä¸ƒã€ä¸¤æœ¬ä¼ è®°&lt;/p>
&lt;ul>
&lt;li>å¯Œå…°å…‹æ—ä¼ &lt;/li>
&lt;li>ä¹”å¸ƒæ–¯ä¼ &lt;/li>
&lt;/ul></description></item><item><title>å­¦ä¹ ä¸Šç˜¾</title><link>https://example.com/p/%E5%AD%A6%E4%B9%A0%E4%B8%8A%E7%98%BE/</link><pubDate>Sun, 30 Jan 2022 15:10:35 +0800</pubDate><guid>https://example.com/p/%E5%AD%A6%E4%B9%A0%E4%B8%8A%E7%98%BE/</guid><description>&lt;p>æœ€è¿‘ä¸¤å¹´ï¼Œæ·±æ„Ÿè¶Šæ¥è¶Šå¤šäººæ‚£ä¸Šäº†â€œæ¯’é¸¡æ±¤è¢«è¿«å®³å¦„æƒ³ç—‡â€ï¼Œå½“åˆ«äººæŠ›å‡ºä¸€ä¸ªè®ºç‚¹åï¼Œä½ ä¸‹æ„è¯†çš„å°†å…¶å½’ä¸ºâ€œé¸¡æ±¤â€ã€â€œè£…é€¼â€ã€â€œå‡æ­£ç»â€ï¼Œè™½ç„¶å†…å¿ƒä¸€æ—¶ç«™ä¸Šäº†é“å¾·é«˜åœ°å¹¶æ²¾æ²¾è‡ªå–œï¼Œä½†é•¿æœŸåšæŒä¸‹æ¥ï¼Œä½ å·²ç»æ“…é•¿äº†ç™¾æ¯’ä¸ä¾µï¼Œè¿™éå¸¸å¥½ï¼Œä½†è¿™ä¹Ÿæ˜¯å¦ä¸€ç§è‡ªæˆ‘ç»é£Ÿã€‚&lt;/p>
&lt;p>æˆ‘å€’æ˜¯è®¤ä¸ºï¼Œæ”¾ä½ä¸€ç‚¹å¯¹è‡ªæˆ‘æ™ºè¯†é«˜åœ°çš„ç»´æŠ¤ï¼Œè®¤çœŸå¯¹å¾…é‚£äº›è®©ä½ ä¸‹æ„è¯†å¿ƒç”ŸåŒæ¶çš„è§‚ç‚¹ï¼Œä¼šè®©è‡ªå·±å¿ƒé‡Œå°‘ç‚¹æˆ¾æ°”ï¼Œé¡ºä¾¿æ‰¾åˆ°ä¸€äº›æœªæ¥çš„æœºä¼šã€‚&lt;/p>
&lt;h1 id="ä¸è¦è¯•å›¾è‡ªå¾‹">ä¸è¦è¯•å›¾è‡ªå¾‹&lt;/h1>
&lt;p>keep çš„ slogan å«â€œè‡ªå¾‹ç»™æˆ‘è‡ªç”±â€ï¼Œå¯ç°å®ç”Ÿæ´»ä¸­æœ‰å¤šå°‘äººçœŸçš„èƒ½åšæŒè‡ªå¾‹ï¼Ÿ&lt;/p>
&lt;p>æˆ‘é—®è¿‡å¾ˆå¤šåšæŒå¥èº«çš„äººï¼Œä»–ä»¬å¹¶ä¸æ˜¯æ¯å¤©å¾ˆç—›è‹¦çš„å»å¥èº«æˆ¿ï¼Œè€Œæ˜¯æ¯å¤©è¿«ä¸åŠå¾…çš„å»å¥èº«æˆ¿ï¼Œå› ä¸ºé‚£é‡Œä¼šè®©ä»–ä»¬å¾ˆçˆ½ã€‚è¦æ˜¯ä¸ä¿¡çš„è¯ï¼Œä½ å¯ä»¥å»æ‰¾èº«è¾¹çš„äººé—®é—®ã€‚&lt;/p>
&lt;p>è¦äº†è§£â€œè‡ªå¾‹â€è¿™ç§æ„è¯†çœ‹ä¼¼å¾ˆè™šæ— ç¼¥ç¼ˆï¼Œä½†æ‰€æœ‰çš„æ„è¯†éƒ½æ˜¯è¢«å¤§è„‘ç¥ç»é€’è´¨æ‰€æ§åˆ¶çš„ï¼Œæˆ‘ä»¬åº”è¯¥ä»å¤§è„‘ç¥ç»é€’è´¨å±‚é¢ï¼Œçœ‹è¯¥å¦‚ä½•åˆ©ç”¨å®ƒä»¬ï¼Œè€Œä¸æ˜¯æŠµæŠ—ä»–ä»¬ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™äº›ç¥ç»é€’è´¨æ˜¯å¦‚ä½•èµ·ä½œç”¨çš„ï¼š&lt;/p>
&lt;blockquote>
&lt;p>å¤šå·´èƒºæ˜¯å¤§è„‘ä¸­æœ€ä¸»è¦çš„å¥–åŠ±åŒ–å­¦ç‰©è´¨ï¼Œå‚¬äº§ç´ ç´§éšå…¶åï¼Œç„¶è€Œè¡€æ¸…ç´ ã€å†…å•¡è‚½ã€å»ç”²è‚¾ä¸Šè…ºç´ å’ŒèŠ±ç”Ÿå››çƒ¯ä¹™é†‡èƒºä¹Ÿå‘æŒ¥ç€ä½œç”¨ã€‚
è¿™äº›åŒ–å­¦ç‰©è´¨ä¸­çš„æ¯ä¸€ç§æ‰€äº§ç”Ÿçš„æ„‰æ‚¦æ„Ÿéƒ½ä¼šé©±ä½¿æˆ‘ä»¬é‡‡å–è¡ŒåŠ¨ï¼Œå¦‚æœè¡ŒåŠ¨æˆåŠŸä¾¿æœ‰äº†æ­£åé¦ˆï¼Œå°±ä¼šåœ¨è®°å¿†ä¸­å¼ºåŒ–è¯¥è¡Œä¸ºã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ­£ç¡®çš„å­¦ä¹ æ–¹å¼ï¼Œä¸æ˜¯ä¾é è‡ªå¾‹ï¼Œè€Œæ˜¯è¦å€ŸåŠ©è¿™äº›ç¥ç»é€’è´¨å‘æŒ¥ä½œç”¨ã€‚&lt;/p>
&lt;h1 id="ä¸ºä»€ä¹ˆå–œæ¬¢åˆ·æŠ–éŸ³å’Œ-b-ç«™è€Œä¸æƒ³åˆ·å­¦ä¹ ">ä¸ºä»€ä¹ˆå–œæ¬¢åˆ·æŠ–éŸ³å’Œ B ç«™è€Œä¸æƒ³åˆ·å­¦ä¹ &lt;/h1>
&lt;p>æ˜¯é‚£äº›è®©ä½ äº§ç”Ÿå¥½å¥‡å¿ƒçš„æ ‡é¢˜ï¼Œæ¯”å¦‚é‚£äº›äººäººéƒ½å¬è¿‡ã€æ²¡äººçœŸçš„æ‡‚çš„äº‹æƒ…ã€‚&lt;/p>
&lt;p>å¥½å¥‡å¿ƒæ˜¯ç”Ÿç‰©å­¦è®¾è®¡çš„èµ·ç‚¹ã€‚è¿™æ˜¯ä½ å¯¹æŸäº‹çš„åŸºæœ¬å…´è¶£ï¼Œåœ¨ç¥ç»åŒ–å­¦ä¸Šç”±ä¸€ç‚¹å»ç”²è‚¾ä¸Šè…ºç´ å’Œå¤šå·´èƒºæ”¯æ’‘ã€‚è€Œå¥½å¥‡å¿ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŠ¨åŠ›ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯æ¿€æƒ…çš„åŸºç¡€æˆåˆ†ï¼Œæ˜¯ä¸€ä¸ªæ›´å¤§çš„åŠ¨åŠ›ã€‚&lt;/p>
&lt;p>é‚£ä»€ä¹ˆæ ·çš„å†…å®¹è®©ä½ çœ‹å®Œåä¹Ÿè§‰å¾—å¾ˆçˆ½å‘¢ï¼Ÿ&lt;/p>
&lt;p>å¤ªç®€å•çš„å†…å®¹ä¼šè®©ä½ è§‰å¾—å¥½æ— èŠï¼Œå¤ªå¤æ‚çš„å†…å®¹åˆå¾ˆæ¯ç‡¥çœ‹ä¸æ‡‚ï¼Œæ˜¯é‚£äº›ä½ æ—¢æœ‰ä¸€äº›äº†è§£ä½†åˆå‡ºä¹ä½ æ„æ–™çš„å†…å®¹ï¼ŒåŒæ—¶å™äº‹æ‰‹æ³•åˆå¯Œæœ‰èŠ‚å¥æ„Ÿï¼Œä¸åœçš„å¼•å‘ä½ æƒ…ç»ªå˜åŒ–çš„å†…å®¹ã€‚&lt;/p>
&lt;p>åˆ©ç”¨å¥½å¥‡å¿ƒè®©è‡ªå·±å¼€å§‹ä¸€æ¬¡å­¦ä¹ ï¼Œåˆ©ç”¨å¿ƒæµè®©æˆ‘ä»¬æ²‰æµ¸ï¼Œæœ€åç”¨è‡ªæ´½çš„é€»è¾‘å’Œç»“è®ºå®Œæˆç»ˆææš´å‡»ã€‚&lt;/p>
&lt;h1 id="æ­£ç¡®çš„åˆ·å­¦ä¹ æ–¹å¼">æ­£ç¡®çš„åˆ·å­¦ä¹ æ–¹å¼&lt;/h1>
&lt;p>1ã€å¦‚ä½•åˆ©ç”¨å¥½å¥‡å¿ƒå¼€å§‹&lt;/p>
&lt;p>å­¦ä¹ å°±å’Œåˆ·è§†é¢‘ä¸€æ ·ï¼Œé¦–å…ˆï¼Œä½ è¦æœ‰ä¸ªè®©ä½ å¥½å¥‡å¿ƒçš„é—®é¢˜ã€‚&lt;/p>
&lt;p>è¿™ä¸€æ­¥å¯èƒ½æ˜¯æœ€éš¾åˆ°å¤§å®¶çš„ï¼Œæ¯•ç«Ÿå­¦ç”Ÿæ—¶ä»£çš„æˆ‘ä»¬ï¼Œä¹ æƒ¯äº†åœ¨åˆ«äººè§„å®šå¥½çš„æ¡†æ¶å†…çœ‹ä¹¦ã€ç­”é¢˜ï¼Œæ—©å°±æ²¡äº†å¥½å¥‡å¿ƒã€‚&lt;/p>
&lt;p>å¯¹æ­¤ï¼Œæˆ‘çš„è§‚ç‚¹æ˜¯ï¼Œä½ ä¸æ˜¯å¤±å»äº†å¥½å¥‡å¿ƒï¼Œåªæ˜¯æ‰¾ä¸åˆ°äº†å¥½å¥‡å¿ƒï¼Œå…´è¶£ä¹Ÿä¸æ˜¯å¤©ç”Ÿçš„ï¼Œè€Œæ˜¯åå¤©åŸ¹å…»çš„ã€‚&lt;/p>
&lt;p>è¿™çš„ç¡®æŒºéš¾ï¼Œåœ¨èº«è¾¹æœ‹å‹ä¸­å®è·µè¿‡ä¸€ä¸ªå¯è¡Œçš„åŠæ³•ã€‚&lt;/p>
&lt;blockquote>
&lt;p>1 æ‹¿ä¸€å¼ çº¸ï¼ŒæŠŠä½ ç”Ÿæ´»ä¸­æ„Ÿå…´è¶£çš„äº‹æƒ…å…¨éƒ¨åˆ—ä¸Šå»ï¼Œå¤§äº‹å°äº‹éƒ½å¯ä»¥åˆ—ï¼›
2 æ‰¾åˆ°è¿™äº›äº‹æƒ…çš„äº¤å‰ç‚¹ï¼Œä»¥åŠå¼„æ¸…æ¥šæŸä¸ªç‰¹å®šçš„äº¤å‰ç‚¹æ˜¯å¦çœŸçš„è¶³å¤Ÿæœ‰è¶£ï¼Œè¿™äº›äº¤å‰ç‚¹ï¼Œå¾€å¾€è•´å«äº†å¯èƒ½çˆ†å‘çš„å¥½å¥‡å¿ƒï¼›
3 æ€ä¹ˆçŸ¥é“ä¸€ä¸ªäº¤å‰ç‚¹æ˜¯å®Œç¾çš„ï¼Ÿå»è¿™äº›äº¤å‰ç‚¹ä¸Šâ€œç©ä¸€ç©â€ï¼ŒçœŸæ˜¯æ˜¯æ‰¾ä¸€äº›ä¸œè¥¿ç©ä¸€ç©ï¼Œè€Œä¸æ˜¯å­¦ä¸€å­¦ã€‚
4 ç”¨â€œå…¬å¼€çš„æˆåŠŸâ€æ¿€åŠ±å†æ·±å…¥ä¸€ç‚¹ï¼Œäººç±»æ˜¯ä¸€ç§ç¤¾ä¼šåŠ¨ç‰©ï¼Œæˆ‘ä»¬è¦åˆ©ç”¨å¥½èº«è¾¹äººçš„æ­£åé¦ˆï¼Œå“ªæ€•æ˜¯å‘ä¸ªæœ‹å‹åœˆåˆ†äº«ä¸€ä¸‹ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä¸Šé¢çš„è¿‡ç¨‹çœ‹ä¼¼æœ‰äº›æ— è¶£ï¼Œä½†è¯·å®Œæ•´çš„æŠŠè¿™å››éƒ¨æµç¨‹èµ°å‡ éï¼Œç›¸ä¿¡æˆ‘ï¼Œä¼šæˆ–å¤šæˆ–å°‘çš„å¼€å¯ä¸€ç‚¹çš„ã€‚&lt;/p>
&lt;p>2ã€å¦‚ä½•åˆ©ç”¨å¿ƒæµè®©æˆ‘ä»¬æ²‰æµ¸&lt;/p>
&lt;p>å¿ƒæµæ˜¯ä¸€ä¸ªç‰¹åˆ«å¤æ‚çš„è¯é¢˜ï¼Œè¿™é‡Œæ¨èä¸€æœ¬å½»åº•è®²æ¸…æ¥šå¿ƒæµçš„ä¹¦ã€Šthe art of impossibleã€‹ï¼Œä½†è¿™é‡Œï¼Œåªè®²ä¸€ä¸ªæœ€æ ¸å¿ƒçš„ç†è®ºï¼šå¿ƒæµåŒºé—´ã€‚&lt;/p>
&lt;p>å‰é¢æè¿‡ï¼Œå¤ªç®€å•çš„å†…å®¹è®©äººæ— èŠï¼Œå¤ªéš¾çš„å†…å®¹è®©äººç—›è‹¦ï¼Œè¿™å°±æ˜¯å¿ƒæµåŒºé—´çš„æ¥æºã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201301514761.png"
loading="lazy"
>&lt;/p>
&lt;p>æˆ‘ä»¬è¦è§£å†³çš„æ˜¯é‚£äº›ä¸å¤ªéš¾åˆä¸å¤ªå®¹æ˜“çš„å›°æƒ‘ï¼Œå³ä½ å·²ç»æ¨¡æ¨¡ç³Šç³ŠçŸ¥é“æ€è·¯ï¼Œä½†åˆä¸å®Œå…¨æ¸…æ¥šè§£æ³•çš„å›°æƒ‘ã€‚è¿™æ ·çš„å›°æƒ‘æœ€å®¹æ˜“è®©ä½ ä½“ä¼šåˆ°â€å­¦ä¹ è¿‡ç¨‹çš„ä¹è¶£â€œã€‚&lt;/p>
&lt;p>è€Œçœ‹ä¹¦ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“äº§ç”Ÿå¿ƒæµçŠ¶æ€çš„äº‹æƒ…ï¼Œä½†å¾ˆå¤šäººæ˜æ˜å¯åŠ¨äº†çœ‹ä¹¦ï¼Œä½†çœ‹ä¸è¿›å»ï¼Œæ ¸å¿ƒåŸå› æ˜¯ï¼šä½ çš„ä¹¦é€‰é”™äº†ã€‚&lt;/p>
&lt;p>è®°ä½è¿™ä¸€ç‚¹ï¼šä»»ä½•è®©ä½ çœ‹ä¸è¿›å»çš„ä¹¦ï¼Œè¦ä¹ˆæ˜¯ä¹¦æœ¬èº«å†™çš„å¤ªçƒ‚äº†ï¼ˆå°±åƒä¸€ä¸ªç”µå½±é€‰é¢˜å¾ˆå¥½ä½†ç¼–å‰§å¤ªçƒ‚ä¸€æ ·ï¼‰ï¼Œè¦ä¹ˆå°±æ˜¯ä½ çš„çŸ¥è¯†ç»“æ„è¿˜ä¸è¶³ä»¥æ”¯æ’‘çœ‹æ‡‚è¿™æœ¬ä¹¦ã€‚&lt;/p>
&lt;p>æ¯”å¦‚ä¸€ä¸ªæ²¡æœ‰ä»»ä½•ç»æµå­¦æ¦‚å¿µçš„äººå»å­¦ä¹ ç»æµå­¦åŸç†ï¼Œä»–æ˜¯å¾ˆéš¾è¯»ä¸‹å»çš„ï¼Œå³ä¾¿å‹‰å¼ºè¯»ä¸‹å»æ˜¯ç—›è‹¦ä¸”å¾ˆå°‘è¾“å…¥çš„è¯»ä¸‹å»ã€‚è¿™ç§â€œç¡¬éª¨å¤´â€åº”è¯¥èµ¶ç´§æ”¾ä¸‹ï¼Œå†é€‰ä¸€æœ¬ä½ æ„Ÿå…´è¶£çš„ä¹¦ï¼Œæ‰¾ä¸€æœ¬ä¹¦èƒ½è®©ä½ çœ‹çš„çˆ½çš„ä¹¦ã€‚&lt;/p>
&lt;p>è¿™ä¹Ÿæ˜¯ã€ŠThe Motivation Myth åŠ¨åŠ›ç¥è¯ã€‹ä¸€ä¹¦é‡Œçš„æ ¸å¿ƒè§‚ç‚¹ï¼šå°æˆåŠŸå½¢æˆåŠ¨åŠ›ï¼ŒåŠ¨åŠ›ä¿ƒæˆæ›´å¤§çš„æˆåŠŸï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ­£åé¦ˆè¿é”ååº”ã€‚ä¸€èˆ¬çš„æ”¹å˜æ€æƒ³å’Œä¿¡å¿µéƒ½æ˜¯ä¸å¯é çš„ã€‚&lt;/p>
&lt;p>ç›¸ä¿¡è„‘ç§‘å­¦çš„åŠ›é‡ï¼Œä½ ä¼šè¯»ä¸‹å»çš„ã€‚&lt;/p>
&lt;p>3ã€åˆ©ç”¨æ­£åé¦ˆè®©æˆ‘ä»¬è·å¾—æƒ…ç»ªçš„é«˜æ½®&lt;/p>
&lt;p>æ­£åé¦ˆä¸»è¦æ¥æºäºä¸¤æ–¹é¢ï¼š&lt;/p>
&lt;p>ç¬¬ä¸€ï¼Œå¤§è„‘å¤©æ€§å–œæ¬¢åœ†æ»¡ã€è‡ªæ´½ã€ç§©åºã€ç¡®å®šæ€§ã€‚&lt;/p>
&lt;p>æ•´æ•´é½é½çš„æ¡Œé¢è®©äººçˆ½å¿ƒæ‚¦ç›®ï¼Œç¡®å®šæ€§çš„æ”¶è·è®©äººæœ‰å®‰å…¨æ„Ÿï¼Œå…¶å®ï¼Œäººçš„å¤§è„‘ä¹Ÿä¼šå› ä¸ºå›°æƒ‘çš„é—®é¢˜è¢«å®‰æ’ä¸€ä¸ªåˆç†çš„é€»è¾‘è€Œæ„‰æ‚¦ï¼Œè¿™å°±æ˜¯è‡ªæ´½ï¼Œæˆ‘ä»¬æ€»æƒ³ä¸ºä¸€ä¸ªé—®é¢˜æ‰¾åˆ°å…¶è§£é‡Šç†ç”±ã€‚&lt;/p>
&lt;p>è¿™ä¹Ÿæ˜¯æ‰€è°“ aha ha moment çš„é­…åŠ›ï¼ŒæŒç»­çš„â€œå­¦ä¹ â†’ææ¸…æ¥šé—®é¢˜â€ä¼šæŒç»­çš„åˆ†æ³Œå¤šå·´èƒºï¼Œè¿›è€Œä¼šäº§ç”Ÿâ€œå­¦ä¹ ä¸Šç˜¾â€çš„æ„Ÿè§‰ï¼Œå°±åƒâ€œå¸çƒŸâ†’çƒŸè¢«å¸è¿›å’Œå‘¼å‡ºâ€ çš„ä¸Šç˜¾ä¸€æ ·ã€‚è¿™æ˜¯å¤§è„‘çˆ±å­¦ä¹ çš„åŸå› ä¹‹ä¸€ã€‚&lt;/p>
&lt;p>å¤§éƒ¨åˆ†äººéä½†æ²¡æœ‰ä¸Šç˜¾ï¼Œåè€Œè§‰å¾—å¾ˆæ¯ç‡¥ï¼Œæ ¸å¿ƒæ˜¯å› ä¸ºï¼šæ²¡æœ‰å“å°è¿‡â€œå­¦ä¹ â†’ææ¸…æ¥šé—®é¢˜â€ è¿™ä¸€è¿‡ç¨‹çš„æ­£åé¦ˆå¿«æ„Ÿï¼Œå°±åƒåˆšå¼€å§‹æŠ½çƒŸéƒ½è§‰å¾—å¾ˆæ¶å¿ƒï¼Œè€Œä¸æ˜¯å¾ˆçˆ½ã€‚&lt;/p>
&lt;p>æ‰€ä»¥åœ¨å¿ƒæµåŒºé—´é‡Œçœ‹å®Œä¸€æœ¬è§£ç­”ä½ å›°æƒ‘çš„ä¹¦ï¼Œæœ¬èº«å°±æ˜¯ç”Ÿç†æ€§çš„çˆ½ã€‚&lt;/p>
&lt;p>ç¬¬äºŒï¼Œé€šè¿‡å…¬å¼€çš„æ­£åé¦ˆè®©ä½ æ›´çˆ½&lt;/p>
&lt;p>æˆ‘çŸ¥é“å¾ˆå¤šäººä½è°ƒï¼ŒåŒæ¶é«˜è°ƒçš„ç‚«è€€ï¼Œä½†ä½ è¦åšçš„ä¸æ˜¯ç‚«è€€ï¼Œè€Œä½ è¦åšçš„ï¼Œæ˜¯çœŸè¯šçš„åˆ†äº«ã€‚&lt;/p>
&lt;p>å¤§å¤šæ•°äººä¸æ’æ–¥çœŸè¯šã€è°¦è™šï¼Œä½ çš„æŒç»­å­¦ä¹ ï¼Œä¹Ÿéœ€è¦æ¥è‡ªä»–äººç§¯æçš„åé¦ˆã€‚&lt;/p>
&lt;p>èƒŒååŸå› æ˜¯ä»»ä½•ä¸€ç§ç¤¾ä¼šå¼ºåŒ–éƒ½ä¼šå¢åŠ æ„Ÿè§‰è‰¯å¥½çš„ç¥ç»åŒ–å­¦ï¼Œä»è€Œå¢åŠ åŠ¨åŠ›ï¼Œæœ‰ä¸¤ä¸ªç”Ÿç†å­¦åŸå› ï¼š&lt;/p>
&lt;ol>
&lt;li>æ¥è‡ªä»–äººçš„ç§¯æå…³æ³¨ä¼šä½¿å¤§è„‘é‡Šæ”¾å‡ºæ¯”æˆ‘ä»¬å•ç‹¬ä»æ¿€æƒ…ä¸­è·å¾—æ›´å¤šçš„å¤šå·´èƒº&lt;/li>
&lt;li>åŒæ—¶å¢åŠ äº†å‚¬äº§ç´ ã€‚å¤šå·´èƒºå’Œå‚¬äº§ç´ çš„ç»“åˆï¼Œå¥–åŠ±äº†&amp;quot;ç¤¾ä¼šäº’åŠ¨&amp;quot;ï¼Œåˆ›é€ äº†ä¿¡ä»»å’Œçˆ±çš„æ„Ÿè§‰ï¼Œè¿™å¯¹æˆ‘ä»¬çš„ç”Ÿå­˜æ˜¯å¦‚æ­¤çš„å…³é”®ã€‚&lt;/li>
&lt;/ol></description></item><item><title>å¦‚ä½•è®©è‡ªå·±ä¸å¿™ä¸å·è¿˜æœ‰æˆé•¿</title><link>https://example.com/p/%E5%A6%82%E4%BD%95%E8%AE%A9%E8%87%AA%E5%B7%B1%E4%B8%8D%E5%BF%99%E4%B8%8D%E5%8D%B7%E8%BF%98%E6%9C%89%E6%88%90%E9%95%BF/</link><pubDate>Sun, 30 Jan 2022 14:39:04 +0800</pubDate><guid>https://example.com/p/%E5%A6%82%E4%BD%95%E8%AE%A9%E8%87%AA%E5%B7%B1%E4%B8%8D%E5%BF%99%E4%B8%8D%E5%8D%B7%E8%BF%98%E6%9C%89%E6%88%90%E9%95%BF/</guid><description>&lt;h1 id="æ£€æŸ¥ä½ æ˜¯å¦è½å…¥äº†è¿™äº›åä¹ æƒ¯">æ£€æŸ¥ä½ æ˜¯å¦è½å…¥äº†è¿™äº›åä¹ æƒ¯&lt;/h1>
&lt;p>1ã€å–œæ¬¢å¹²äº‹è€Œä¸å–œæ¬¢æƒ³äº‹
ï¼ˆçªç„¶æƒ³èµ·å¥½åƒæ˜¯ç‹å…´è¯´çš„ä¸€å¥è¯ï¼Œå¤§å¤šæ•°äººä¸ºäº†é€ƒé¿çœŸæ­£çš„æ€è€ƒï¼Œæ„¿æ„åšä»»ä½•äº‹æƒ…ã€‚ï¼‰&lt;/p>
&lt;p>2ã€æ²¡ææ¸…æœåŠ¡å¯¹è±¡åˆ°åº•æ˜¯è°
ï¼ˆä½ è§‰å¾—æ˜¯è°ï¼Ÿä¸ºä»€ä¹ˆæ˜¯ taï¼Ÿä½ åœ¨å¸® ta è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿè§£å†³äº†èƒ½æ€æ ·ï¼Ÿå¸® ta è§£å†³é—®é¢˜æ˜¯ä¸æ˜¯ä½ çš„æœ€ç»ˆç›®æ ‡ï¼Ÿï¼‰&lt;/p>
&lt;p>3ã€ç†å¿µæƒ…æ€€ä¸»å¯¼ï¼Œä»æ„Ÿæ€§å’Œå–„æ„å‡ºå‘ï¼Œä½†è®¤è¯†ä¸–ç•Œä¸å¤Ÿå®¢è§‚ï¼Œç§‘å­¦åˆ†æç¼ºå¤±ï¼Œé—®é¢˜å’Œè§£æ³•éƒ½ç¦ä¸èµ·æ¶é—®&lt;/p>
&lt;p>4ã€å¹³è¡¡ä¸­åº¸ï¼Œé»˜è®¤æœä»â€œç¨‹åºæ­£ç¡®â€ã€â€œæ”¿æ²»æ­£ç¡®â€ï¼Œè¡¨é¢ä¸Šå¹³ç­‰å°Šé‡æ¸©æƒ…è„‰è„‰ï¼Œå®é™…ç¼ºå°‘å±‚å±‚é€’è¿›çš„ã€æ¢æ±‚é—®é¢˜æœ¬è´¨çš„è®¨è®ºï¼Œè¿½æ±‚å’Œè°ã€ä¸è¦å‡ºé”™&amp;gt; åˆ¶å®šæ­£ç¡®æ¸…æ™°çš„ç›®æ ‡å¹¶ç«­å°½æ‰€èƒ½ï¼ˆé€æ¸å˜æˆâ€œå‡‘åˆâ€ï¼‰&lt;/p>
&lt;p>ä¸Šé¢è¿™äº›ä¹ æƒ¯ï¼Œå¦‚æœè®©ä½ ç‰¹åˆ«æœ‰æ„Ÿè§‰ï¼Œé‚£å°±è¦å°å¿ƒäº†ï¼
å¦‚æœä½ ä¸€ä¸ªæ„Ÿè§‰éƒ½æ²¡æœ‰ï¼Œé‚£æ›´è¦å°å¿ƒäº†ï¼ï¼ï¼ï¼ˆå› ä¸ºè¿™äº›éƒ½æ˜¯å¾ˆå¸¸è§çš„æ— æ„è¯†çš„åä¹ æƒ¯ï¼Œå¾ˆå®¹æ˜“é™·å…¥å…¶ä¸­è€Œä¸è‡ªçŸ¥ï¼Œéœ€è¦æœ‰æ„è¯†çš„è®­ç»ƒè‡ªå·±çš„è§‰å¯Ÿèƒ½åŠ›ï¼‰&lt;/p>
&lt;h1 id="è¶…è¶Šé—®é¢˜è®©é—®é¢˜ä¸å†æ˜¯é—®é¢˜">è¶…è¶Šé—®é¢˜ï¼Œè®©é—®é¢˜ä¸å†æ˜¯é—®é¢˜&lt;/h1>
&lt;p>ç®¡ç†çš„é—®é¢˜ã€ç»„ç»‡çš„é—®é¢˜ä»æ¥éƒ½ä¸æ˜¯æœ‰æ˜ç¡®â€œå•å› å•æœâ€çš„é—®é¢˜ï¼Œè€Œæ˜¯å­˜åœ¨äºé”™ç»¼å¤æ‚çš„ç»„ç»‡ç³»ç»Ÿï¼Œä¹ƒè‡³æ›´å¹¿æ³›çš„å¤–éƒ¨ç¤¾ä¼šç³»ç»Ÿä¸­çš„é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„å·¥ä½œã€é¡¹ç›®ï¼Œéƒ½æ˜¯ä¸€ä¸ªâ€œæ¢ç´¢çœŸé—®é¢˜çš„è¿‡ç¨‹â€ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼ŒæŒç»­ã€æœ‰æ„è¯†åœ°åšæ·±åº¦æ€è€ƒå’Œå­¦ä¹ æ˜¯æ¯”æ’¸èµ·è¢–å­å¹²äº‹æ›´é‡è¦çš„ï¼Œå¦‚æœç–äºä»˜å‡ºæ€è€ƒä¸Šçš„åŠªåŠ›ï¼Œé¢˜æ‰¾é”™äº†ã€æ–¹å‘åäº†ï¼Œåé¢çš„ä¹Ÿå°±åˆ«æƒ³äº†ã€‚&lt;/p>
&lt;p>æ¶åœ¨é”™è¯¯çš„é—®é¢˜ä¸Šï¼Œé¡¹ç›®å³ä½¿æ²¡åšåï¼Œä½†ä¹Ÿåšä¸åˆ°å¤šå¥½ã€‚å¾€åäº†è¯´ï¼Œä½ é”™è¿‡äº†ä¸€ä¸ªæˆåŠŸè§£å†³æœ‰ä»·å€¼é—®é¢˜çš„æœºä¼šï¼Œæµªè´¹äº†ä½ çš„æ—¶é—´ã€æ‰åå’Œèµ„æºã€‚&lt;/p>
&lt;p>è‡³äºæˆ‘ä»¬ä¸ºä»€ä¹ˆå®¹æ˜“ä¸è‡ªçŸ¥åœ°å¿½è§†è¿™äº›â€œçœŸæ€è€ƒâ€ï¼š&lt;/p>
&lt;ul>
&lt;li>ä»ç”Ÿç†ä¸Šè®²ï¼Œå¤§è„‘æ˜¯å¾ˆä¸å–œæ¬¢è´¹åŠ›æ°”æ€è€ƒçš„ï¼Œå› æ­¤æˆ‘ä»¬å¾€å¾€ä¼šé™·å…¥å¿«é€ŸåŸºäºä¸»è§‚æ€ç»´æƒ¯æ€§ä¸‹ç»“è®ºçš„é”™è¯¯ä¹‹ä¸­è€Œä¸è‡ªçŸ¥ï¼ˆtake for grantedï¼‰ã€‚é™¤äº†é‚£äº›å¤©èµ‹å’Œä¿®ä¸ºæé«˜çš„äººï¼Œå¦‚æœæ™®é€šäººæƒ³è®©æˆé•¿æ›´å¿«ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªé è°±çš„ç§‘å­¦æ–¹æ³•è®ºæ¥æŒ‡å¼•è‡ªå·±ã€‚&lt;/li>
&lt;li>ä»ç»„ç»‡è§’åº¦ï¼Œåœ¨ä¸€ä¸ªå¤§ç»„ç»‡é‡Œè§£å†³é—®é¢˜ï¼Œä¼¼ä¹æ¯ä¸ªäººå¯¹é—®é¢˜è´Ÿæœ‰çš„è´£ä»»ä¹ŸåŒæ—¶è¢«ç¨€é‡Šäº†ï¼Œâ€œæˆ‘æƒ³äº†åˆæœ‰ä»€ä¹ˆç”¨ï¼Ÿâ€ï¼Œâ€œè¿™ä¸ªé—®é¢˜è¯¥æˆ‘å»æƒ³å—ï¼Ÿâ€ï¼Œleader è§‰å¾—åšäº‹æƒ…çš„ä¸‹å±åº”è¯¥è¦ä¸»åŠ¨æƒ³ï¼Œä¸‹å±è§‰å¾— leader æ¯”æˆ‘æ›´è´Ÿæœ‰æ€è€ƒçš„è´£ä»»ï¼Œå†åŠ ä¸Šæ¯ä¸ªäººéƒ½æœ‰å¾ˆå¤šäº‹æƒ…åœ¨ç‰µæ‰¯ç²¾åŠ›ï¼Œâ€œæ·±åº¦æ€è€ƒâ€æ¸æ¸ä¼¼ä¹å˜å°‘äº†ã€‚&lt;/li>
&lt;/ul>
&lt;h1 id="ä¸€åˆ‡ä»æ‰¾å¯¹é—®é¢˜å‡ºå‘">ä¸€åˆ‡ä»æ‰¾å¯¹é—®é¢˜å‡ºå‘&lt;/h1>
&lt;p>è®©æˆ‘ä»¬ä»å¸¸è§çš„è¯¯åŒºå¼€å§‹&lt;/p>
&lt;h2 id="åå·®ä¸€æˆ‘ä»¬çš„é—®é¢˜-vs-ç›®æ ‡å¯¹è±¡çš„é—®é¢˜">åå·®ä¸€ï¼šæˆ‘ä»¬çš„é—®é¢˜ vs ç›®æ ‡å¯¹è±¡çš„é—®é¢˜&lt;/h2>
&lt;p>ç¬¬ä¸€ç§å¸¸è§çš„åå·®æ˜¯ï¼Œäººä»¬å¾€å¾€æ— æ³•å°†è‡ªå·±è®¤ä¸ºçš„é—®é¢˜ä¸ç›®æ ‡æœåŠ¡å¯¹è±¡è®¤ä¸ºçš„é—®é¢˜åŒºåˆ†å¼€ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹åˆ«å®¹æ˜“å®šä½é”™è¯¯çš„åœ°æ–¹ï¼Œå‚è€ƒä¸‹å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201301501280.png"
loading="lazy"
>&lt;/p>
&lt;p>å¤§å®¶éƒ½æ‡‚ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨æˆ‘ä»¬è‡ªå·±å’Œç›®æ ‡å¯¹è±¡éƒ½è®¤ä¸ºæ˜¯é—®é¢˜çš„åœ°æ–¹é‡‡å–è¡ŒåŠ¨ï¼Œä½†å®é™…å·¥ä½œèµ·æ¥ï¼Œè¿˜æ˜¯å¾€å¾€è¢«â€œæˆ‘ä»¬è®¤ä¸ºæ˜¯é—®é¢˜ï¼Œå®¢æˆ·ä¸è®¤ä¸ºæ˜¯é—®é¢˜çš„é—®é¢˜â€ç»Šä½ã€‚&lt;/p>
&lt;ul>
&lt;li>å°±åƒå®¶é•¿è¦æ±‚å­©å­å¥½å¥½åƒé¥­ï¼Œä¸º ta ä¸èƒ½å¥½å¥½åƒé¥­è€Œç”Ÿæ°”ï¼Œå¯å­©å­å¯èƒ½å°±æ˜¯é›¶é£Ÿåƒå¤šäº†ï¼ŒçœŸçš„ä¸é¥¿ä¹Ÿåƒä¸ä¸‹å»&lt;/li>
&lt;li>æˆ‘ä»¬è§‰å¾—æŸäº›åœ°æ–¹å­˜åœ¨ä¸å…¬å¹³çš„é—®é¢˜ï¼Œå¯åœ¨å®¢æˆ·çœ¼é‡Œï¼Œæ˜¯ä¸æ˜¯é‚£ä¹ˆå…¬å¹³å¯èƒ½å¹¶ä¸é‡è¦ä¹Ÿå¹¶ä¸å…³é”®&lt;/li>
&lt;li>æˆ‘ä»¬è§‰å¾—éœ€è¦åšæŸé¡¹èƒ½åŠ›æå‡çš„é¡¹ç›®ï¼Œå¯å®¢æˆ·ç°åœ¨é¢ä¸´å…¶ä»–æ¯”èƒ½åŠ›æå‡æ›´é‡è¦ã€æ›´è¦ç´§çš„é—®é¢˜&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸æ˜¯è¦è´¹åŠ²å»ç»™å®¢æˆ·æ´—è„‘ï¼Œè€Œæ˜¯åº”è¯¥ä»”ç»†è†å¬å¯¹æ–¹çš„å£°éŸ³ï¼Œä»¥åŠæ›´å¤šç›¸å…³æ–¹çš„å£°éŸ³ï¼Œæ‰¾å‡ºâ€œçœŸé—®é¢˜â€ä»¥åŠèƒŒåçš„åŸå› ï¼Œå¯¹é—®é¢˜â€œå»ä¼ªå­˜çœŸâ€ï¼Œæ‰¾åˆ°å…¶ä¸­çš„é€»è¾‘å…³ç³»ï¼Œç„¶åå†å†³å®šè¦æ€ä¹ˆåŠã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œæœ‰æ—¶æˆ‘ä»¬ç¡®å®èƒ½å¤Ÿçœ‹è§çœŸé—®é¢˜ï¼Œä½†å®¢æˆ·ä¸å¤Ÿè®¤åŒï¼Œè¿™æ—¶å€™æœ€åº”è¯¥åšçš„äº‹æƒ…ï¼Œæ˜¯å¯»æ‰¾é‚£äº›æŒæœ‰ç›¸åŒè®¤çŸ¥çš„äººï¼Œç„¶åå’Œä»–ä»¬ä¸€èµ·å·¥ä½œï¼Œä¸€è¾¹åšå‡ºä¸€å®šæˆç»©ï¼Œä¸€è¾¹å¯å‘å’Œå¸¦åŠ¨æ›´å¤šäººã€‚ä¸ç”¨æŠŠç²¾åŠ›çº ç»“åœ¨ä¸ºä»€ä¹ˆå¯¹æ–¹ä¸è®¤åŒè¿™ä¸ªäº‹æƒ…ä¸Šï¼Œç„¶åè®©è‡ªå·±å’Œå›¢é˜Ÿæ¶ˆè€—åœ¨è¿™ä¸ªä¸è®¤åŒä¸Šã€‚&lt;/p>
&lt;h2 id="åå·®äºŒè¿‡ç¨‹å¯¹è±¡-vs-æœ€ç»ˆå¯¹è±¡">åå·®äºŒï¼šè¿‡ç¨‹å¯¹è±¡ vs æœ€ç»ˆå¯¹è±¡&lt;/h2>
&lt;p>ç¬¬äºŒç§å¸¸è§çš„åå·®æ˜¯ï¼Œä¸èƒ½åˆ†è¾¨â€œè¿‡ç¨‹å¯¹è±¡â€å’Œâ€œæœ€ç»ˆå¯¹è±¡â€ï¼Œå®¹æ˜“åœ¨å…³æ³¨è¿‡ç¨‹å¯¹è±¡ä¸­è¿·å¤±ï¼Œä¸è§åˆè¡·ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¸Šå¥½å¤§å­¦æ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œäººçš„å……åˆ†å‘å±•æ˜¯æœ€ç»ˆå¯¹è±¡&lt;/li>
&lt;li>å­¦è‹±è¯­æ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œæ— éšœç¢çš„äº¤æµã€æ¥è§¦æ›´å¤šæ€æƒ³æ˜¯æœ€ç»ˆå¯¹è±¡&lt;/li>
&lt;li>è–ªé…¬å…¬å¹³å’Œæœ‰æ•ˆæ¿€åŠ±æ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œè®©ä¼˜ç§€çš„å‘˜å·¥æ„¿æ„å’Œå…¬å¸ä¸€èµ·é•¿æœŸå‘å±•æ˜¯æœ€ç»ˆå¯¹è±¡&lt;/li>
&lt;li>åœ¨å•†ä¸šç»„ç»‡é‡Œï¼Œä¸šåŠ¡çš„æˆåŠŸæ˜¯æœ€ç»ˆå¯¹è±¡ï¼Œå‘˜å·¥çš„æ»¡æ„åº¦å’Œå‘˜å·¥çš„èƒ½åŠ›æå‡æ˜¯è¿‡ç¨‹å¯¹è±¡ã€‚ä½†äººå¤©ç„¶å¯¹è·ç¦»è‡ªå·±æ›´è¿‘å’Œè‡ªå·±æ›´ç›¸å…³çš„äº‹ç‰©æ•æ„Ÿï¼Œå¯¹è¿œè·ç¦»çš„ç›®æ ‡ä¸æ•æ„Ÿã€‚æˆ‘ä»¬è¦å…³æ³¨å‘˜å·¥çš„æ»¡æ„åº¦å’Œå‘˜å·¥æˆé•¿ï¼Œè¿™æ²¡æœ‰é”™ï¼Œä½†ä¸è¦ç–å¿½äº†å¤§å®¶èšåœ¨ä¸€ä¸ªå…¬å¸é‡Œçš„ç›®çš„æ˜¯ä¸ºè§£å†³æŸç§é—®é¢˜æä¾›å•†ä¸šæœåŠ¡ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„é¦–è¦ç›®æ ‡å’Œé¦–è¦è´£ä»»ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¹¶ä¸æ˜¯è¯´ä¸åº”è¯¥ä»è¿‡ç¨‹å¯¹è±¡å…¥æ‰‹ï¼Œè€Œæ˜¯æˆ‘ä»¬å§‹ç»ˆä¸èƒ½å¿½ç•¥æ‰æœåŠ¡çš„æœ€ç»ˆå¯¹è±¡æ˜¯è°ã€‚&lt;/p>
&lt;h2 id="åå·®ä¸‰ç¬¼ç»Ÿå¯¹è±¡-vs-å…·ä½“å¯¹è±¡">åå·®ä¸‰ï¼šç¬¼ç»Ÿå¯¹è±¡ vs å…·ä½“å¯¹è±¡&lt;/h2>
&lt;p>ç¬¬ä¸‰ç§å¸¸è§çš„åå·®æ˜¯ï¼Œå°†é—®é¢˜æ¦‚æ‹¬åŒ–ã€ç¬¼ç»ŸåŒ–ï¼Œå¾ˆå¤šæŠ½è±¡çš„æ¦‚å¿µå’Œå¤§è¯ï¼Œä½†å…·ä½“æ˜¯è°ã€é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Œä¸å¾—è€ŒçŸ¥ã€‚è¿™äº›è¯ä¸ä¸€å®šæ˜¯é»‘è¯ï¼Œä½†å’Œé»‘è¯æ•ˆæœç±»ä¼¼ï¼Œéƒ½é˜»ç¢äº†æˆ‘ä»¬ç›´è¾¾çœŸæ­£çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>å°¤å…¶å¯¹ç®¡ç†é—®é¢˜çš„æè¿°ï¼Œå¤ªå®¹æ˜“æ»‘å‘ç¬¼ç»Ÿäº†ã€‚&lt;/p>
&lt;ul>
&lt;li>éœ€è¦ä»æ–‡åŒ–å’Œæ„è¯†ä¸Šï¼Œå¼ºè°ƒä¸è¦å†…å·&lt;/li>
&lt;li>å‘˜å·¥çš„å®‰å…¨æ„Ÿéœ€è¦æå‡&lt;/li>
&lt;li>æˆ‘ä»¬éœ€è¦å¹³è¡¡æ•ˆç‡å’Œè´¨é‡ã€æ•ˆç‡å’Œå…¬å¹³çš„çŸ›ç›¾&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœæˆ‘ä»¬å¯¹é—®é¢˜çš„ç•Œå®šè¿‡äºç¬¼ç»Ÿï¼Œè§£å†³æ€è·¯ä¹Ÿå¿…ç„¶èµ°å‘â€œå®å¤§â€ï¼Œå°±æ²¡æœ‰åŠæ³•åšåˆ°å°å¤„ç€æ‰‹ï¼Œä¹Ÿéš¾ä»¥å¾—å‡ºç¦å¾—èµ·æ‹·é—®çš„ã€å¯æ“ä½œçš„ã€é€»è¾‘ä¸Šæ­£ç¡®çš„è¡ŒåŠ¨ã€‚&lt;/p>
&lt;h2 id="åå·®å››ä¸»è§‚åˆ¤æ–­-vs-å®¢è§‚ç°è±¡">åå·®å››ï¼šä¸»è§‚åˆ¤æ–­ vs å®¢è§‚ç°è±¡&lt;/h2>
&lt;p>æˆ‘ä»¬å‡ ä¹å¯¹çœ‹åˆ°çš„äº‹å®é—®é¢˜éƒ½ä¼šå¿«é€Ÿå¾—å‡ºä¸€ä¸ªä¸»è§‚çš„åˆ¤æ–­å’Œç»“è®ºï¼Œä½†æˆ‘ä»¬éœ€è¦æ„è¯†åˆ°ï¼Œå½“æˆ‘ä»¬æŠŠè¿™äº›ä¸»è§‚åˆ¤æ–­å½“æˆé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å·²ç»çŠ¯äº†åç¦»é—®é¢˜æœ¬èº«çš„é”™è¯¯ã€‚&lt;/p>
&lt;p>ä¸¾ä¾‹ï¼š&lt;/p>
&lt;ul>
&lt;li>éœ€è¦æå‡å‘˜å·¥çš„å£è¯­è¡¨è¾¾èƒ½åŠ›&lt;/li>
&lt;li>åœ¨ XX å›¢é˜Ÿï¼Œå¤§å®¶å¼€å‘¨ä¼šçš„æ—¶å€™å› ä¸ºè¯­è¨€éšœç¢ï¼Œé™åˆ¶äº†é—®é¢˜ç†è§£å’Œè¡¨è¾¾&lt;/li>
&lt;/ul>
&lt;p>ç¬¬ä¸€ç§æè¿°æ˜¯ä¸€ç§å¼ºçƒˆçš„ä¸»è§‚è¡¨è¾¾ï¼Œä»£è¡¨ä¸€ç§è§‚ç‚¹å’Œåˆ¤æ–­ï¼Œè€Œä¸æ˜¯åœ¨æè¿°å…·ä½“æ˜¯å“ªäº›ç›®æ ‡å¯¹è±¡ï¼Œå…·ä½“é‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ã€‚ç›´æ¥ä»ä¸»è§‚åˆ¤æ–­å¼€å§‹æ‰¾è§£å†³æ–¹æ¡ˆï¼Œä¸åˆ©äºæˆ‘ä»¬è¯†åˆ«æœ€ç»ˆè¦è§£å†³ä»€ä¹ˆé—®é¢˜ã€å®ç°ä»€ä¹ˆç›®æ ‡ã€‚&lt;/p>
&lt;p>å¥½çš„é—®é¢˜åº”è¯¥æè¿°çš„æ˜¯å®¢è§‚ç°è±¡ï¼ˆå“ªäº›å¯¹è±¡ã€é‡åˆ°äº†ä»€ä¹ˆé˜»ç¢ï¼‰ï¼Œè€Œä¸æ˜¯æè¿°ä¸»è§‚åˆ¤æ–­ã€‚å®¢è§‚ç°è±¡åº”è¯¥æ˜¯â€”â€”å¯è§‚æµ‹ã€å¯è¯ä¼ªã€å®¹æ˜“åœ¨åˆ©ç›Šç›¸å…³æ–¹ä¹‹é—´è¾¾æˆå…±è¯†&lt;/p>
&lt;h1 id="æ•²é»‘æ¿æ€»ç»“">æ•²é»‘æ¿â€”â€”æ€»ç»“&lt;/h1>
&lt;p>æ£€æŸ¥é—®é¢˜æ˜¯ä¸æ˜¯æ‰¾å‡†äº†çš„ checklistï¼ˆé€‚åˆå¯¹ç…§ä½ ç›®å‰æ­£åœ¨è§£å†³çš„é—®é¢˜ï¼Œè‡ªçº è‡ªæŸ¥ä¸€ä¸‹ï¼Œç„¶åä¿®æ­£ä½ çš„é—®é¢˜ï¼‰&lt;/p>
&lt;ul>
&lt;li>è¿™æ˜¯ä¸æ˜¯ä½ æœåŠ¡çš„å¯¹è±¡è®¤å¯çš„é—®é¢˜ï¼ŒåŒæ—¶ä½ ä¹Ÿè®¤å¯çš„é—®é¢˜ï¼Ÿ&lt;/li>
&lt;li>ä½ é€‰æ‹©å·¥ä½œçš„é—®é¢˜å¯¹è±¡æ˜¯è¿‡ç¨‹å¯¹è±¡è¿˜æ˜¯æœ€ç»ˆå¯¹è±¡ï¼Œå¦‚æœæ˜¯è¿‡ç¨‹å¯¹è±¡ï¼Œå¸® ta è§£å†³å¥½è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å¦æœ‰åˆ©äºå¸®åŠ©æœ€ç»ˆå¯¹è±¡ï¼Œè¿™æ˜¯ä¸æ˜¯å¸®åŠ©æœ€ç»ˆå¯¹è±¡çš„æœ€å¯é çš„æ‰‹æ®µï¼Ÿ&lt;/li>
&lt;li>ä½ çš„é—®é¢˜æ˜¯ä¸æ˜¯å¤ªè¿‡ç¬¼ç»Ÿï¼Œä½ èƒ½ä¸èƒ½æŠŠå®ƒæ”¹çš„æ›´å…·ä½“ï¼Ÿ&lt;/li>
&lt;li>ä½ æè¿°çš„æ˜¯å®¢è§‚é—®é¢˜ç°è±¡å—ï¼Ÿè¿˜æ˜¯ä½ çš„ä¸»è§‚åˆ¤æ–­æˆ–æŸç§ä¸»è§‚æ„¿æœ›ï¼Ÿå®ƒæ˜¯å¦æ˜¯ï¼š
&lt;ul>
&lt;li>å¯è§‚æµ‹çš„&lt;/li>
&lt;li>å¯è¯ä¼ªçš„&lt;/li>
&lt;li>å®¹æ˜“å’Œåˆ©ç›Šç›¸å…³æ–¹è¾¾æˆå…±è¯†çš„&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>å¦‚ä½•å¢å¼ºåšäº‹çš„åŠ¨æœº</title><link>https://example.com/p/%E5%A6%82%E4%BD%95%E5%A2%9E%E5%BC%BA%E5%81%9A%E4%BA%8B%E7%9A%84%E5%8A%A8%E6%9C%BA/</link><pubDate>Sun, 30 Jan 2022 14:33:12 +0800</pubDate><guid>https://example.com/p/%E5%A6%82%E4%BD%95%E5%A2%9E%E5%BC%BA%E5%81%9A%E4%BA%8B%E7%9A%84%E5%8A%A8%E6%9C%BA/</guid><description>&lt;p>åŠ¨æœºæ˜¯ä¸€ç§å¼ºå¤§çš„æƒ…æ„Ÿæ¿€åŠ±å› ç´ &lt;/p>
&lt;p>åŠ¨æœº=åŠ¨åŠ›=è‡ªé©±åŠ›=è‡ªæˆ‘é©±åŠ¨åŠ›&lt;/p>
&lt;p>åŠ¨æœº=å¥½å¥‡å¿ƒ+æ¿€æƒ…+ç›®æ ‡+è‡ªä¸»æ€§+æŒæ§æ„Ÿã€‚&lt;/p>
&lt;h1 id="è‡ªä¸»çš„åŠ¨æœºæ‰æ˜¯çœŸåŠ¨æœº">è‡ªä¸»çš„åŠ¨æœºæ‰æ˜¯çœŸåŠ¨æœº&lt;/h1>
&lt;p>è‡ªä¸»æ€§æ˜¯å¯¹è¿½æ±‚ä½ çš„æ¿€æƒ…å’Œç›®çš„æ‰€éœ€çš„æ¸´æœ›ã€‚&lt;/p>
&lt;p>è¿™ç§æ¸´æœ›çš„åŠ¨æœºåˆ†ä¸ºå¤–åœ¨åŠ¨æœºå’Œå†…åœ¨åŠ¨æœºï¼Œå¤–åœ¨åŠ¨æœºæ˜¯ä½ å¿…é¡»è¦åšçš„å·¥ä½œï¼Œå†…åœ¨åŠ¨æœºåˆç§°ä¸ºè‡ªä¸»åŠ¨æœºï¼Œæœ‰ç ”ç©¶å‘ç°ï¼Œä»»ä½•æƒ…å†µä¸‹ï¼Œè‡ªä¸»åŠ¨æœºéƒ½ä¼šæ‰¼æ€å¤–åœ¨åŠ¨æœºã€‚è‡ªä¸»åŠ¨æœºæ˜¯ä¸€ç§æ›´å¼ºå¤§çš„åŠ¨åŠ›&lt;/p>
&lt;h1 id="å¥½å¥‡å¿ƒæ¿€æƒ…ç›®æ ‡æ˜¯æœ€å¤§åŒ–è‡ªä¸»æ€§çš„åŸºç¡€">å¥½å¥‡å¿ƒã€æ¿€æƒ…ã€ç›®æ ‡æ˜¯æœ€å¤§åŒ–è‡ªä¸»æ€§çš„åŸºç¡€&lt;/h1>
&lt;p>å½“æˆ‘ä»¬å› ä¸º&amp;quot;å¥½å¥‡å¿ƒã€æ¿€æƒ…ã€ç›®æ ‡&amp;quot;è€Œåšæˆ‘ä»¬æ­£åœ¨åšçš„äº‹æƒ…æ—¶ï¼Œæˆ‘ä»¬æ­£åœ¨æ­£ç¡®åœ°æŒ–æ˜è‡ªä¸»æ€§ã€‚æ¢å¥è¯è¯´ï¼Œå¯»æ±‚ç³»ç»Ÿå–œæ¬¢æŒæ§è‡ªå·±ç©¶ç«Ÿåœ¨å¯»æ±‚ä»€ä¹ˆæ ·çš„èµ„æºã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä»å¥½å¥‡å¿ƒã€æ¿€æƒ…å’Œç›®æ ‡å¼€å§‹æ¢ç´¢é©±åŠ¨åŠ›çš„åŸå› ã€‚è¿™ä¸‰é‡å¥å»ºç«‹äº†å…´è¶£å’Œäº«å—&amp;ndash;é€šè¿‡å¥½å¥‡å¿ƒå’Œæ¿€æƒ…ï¼Œç„¶åé€šè¿‡ç›®æ ‡æ¥å·©å›ºæ ¸å¿ƒä¿¡å¿µå’Œä»·å€¼è§‚ã€‚æ¢å¥è¯è¯´ï¼Œå¥½å¥‡å¿ƒã€æ¿€æƒ…ã€ç›®æ ‡æ˜¯æœ€å¤§åŒ–è‡ªä¸»æ€§çš„åŸºç¡€ã€‚&lt;/p>
&lt;h1 id="è‡ªä¸»æ€§å°†æˆ‘ä»¬å˜æˆä¸€ä¸ªæ›´æœ‰æ•ˆçš„è‡ªå·±">è‡ªä¸»æ€§å°†æˆ‘ä»¬å˜æˆä¸€ä¸ªæ›´æœ‰æ•ˆçš„è‡ªå·±&lt;/h1>
&lt;h1 id="å·¥ä½œä¸­å¢åŠ è‡ªä¸»æ€§">å·¥ä½œä¸­å¢åŠ è‡ªä¸»æ€§&lt;/h1>
&lt;p>è°·æ­Œç”¨ 20%çš„æ—¶é—´æ¥æŒ–æ˜è¿™ä¸ªé©±åŠ¨åŠ›ï¼Œè¿™æ„å‘³ç€ä»–ä»¬æ¯å‘¨ç»™äººä»¬ 8 ä¸ªå°æ—¶çš„æ—¶é—´æ¥è¿½æ±‚ä¸€ä¸ªä»–ä»¬çƒ­è¡·çš„æƒ³æ³•ã€‚ç„¶è€Œ 3M å…¬å¸ä»…ç”¨ 15%çš„æ—¶é—´å°±è·å¾—äº†æƒŠäººçš„æˆæœï¼Œä¹Ÿå°±æ˜¯æ¯å‘¨åªæœ‰ä¸€ä¸ªä¸‹åˆçš„æ—¶é—´ã€‚&lt;/p>
&lt;p>è·å¾—è‡ªä¸»æ€§æä¾›çš„é©±åŠ¨åŠ›çš„æå‡ï¼Œä½ éœ€è¦è‡ªç”±æ§åˆ¶ä½ çš„ç¡çœ ã€å·¥ä½œå’Œè¿åŠ¨æ—¶é—´è¡¨ã€‚ä½ è¿˜éœ€è¦è‡ªä¸»åœ°å®šæœŸé€šè¿‡è‡ªå·±é€‰æ‹©çš„æ´»åŠ¨æ¥è¿½é€å¿ƒæµã€‚&lt;/p>
&lt;p>ç†æƒ³çš„æƒ…å†µæ˜¯ï¼Œä½ çš„å·¥ä½œæ—¶é—´å°†ç”¨äºä¿ƒè¿›ä½ çš„ç›®çš„çš„æ´»åŠ¨ï¼Œè€Œäº§ç”Ÿå¿ƒæµçš„æ´»åŠ¨ç±»ä¼¼äºå†²æµªæ„å‘³ç€å®ƒå®é™…ä¸Šæ˜¯å·¥ä½œçš„ä¼‘æ¯ã€‚&lt;/p>
&lt;p>å¦‚æœè¿™åœ¨ä½ ä»Šå¤©çš„ç”Ÿæ´»ä¸­æ˜¯ä¸å¯èƒ½çš„ï¼Œé‚£ä¹ˆå°±ä» 3M è®¡åˆ’å¼€å§‹ï¼šå°† 15%çš„æ—¶é—´ç”¨äºä¸€ä¸ªä¸ä½ çš„æ ¸å¿ƒæ¿€æƒ…å’Œç›®çš„ç›¸ä¸€è‡´çš„é¡¹ç›®ã€‚15%å¤§çº¦æ˜¯æ¯å‘¨ä¸€ä¸ªä¸‹åˆçš„æ—¶é—´ï¼Œä¸è¿‡ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°æŠŠè¿™ä¸ªæ—¶é—´åˆ†æˆä¸€å¯¹ä¸¤ä¸ªåŠå°æ—¶çš„åŒºå—ï¼Œå¾—åˆ°ç±»ä¼¼çš„ç»“æœã€‚&lt;/p></description></item><item><title>å¦‚ä½•å¢å¼ºæŒæ§æ„Ÿ</title><link>https://example.com/p/%E5%A6%82%E4%BD%95%E5%A2%9E%E5%BC%BA%E6%8E%8C%E6%8E%A7%E6%84%9F/</link><pubDate>Sun, 30 Jan 2022 11:56:28 +0800</pubDate><guid>https://example.com/p/%E5%A6%82%E4%BD%95%E5%A2%9E%E5%BC%BA%E6%8E%8C%E6%8E%A7%E6%84%9F/</guid><description>&lt;h1 id="15çš„è‡ªä¸»æ—¶é—´">15%çš„è‡ªä¸»æ—¶é—´&lt;/h1>
&lt;p>äººç±»æœ€å–œæ¬¢çš„å°±æ˜¯æŠŠå°èƒœåˆ©å åŠ åœ¨å°èƒœåˆ©ä¹‹ä¸Šï¼Œå†å åŠ åœ¨å°èƒœåˆ©ä¹‹ä¸Šã€‚åœ¨ç¥ç»åŒ–å­¦ä¸Šï¼Œè¿™äº›èƒœåˆ©ä¼šäº§ç”Ÿå¤šå·´èƒºã€‚&lt;/p>
&lt;p>è¦æƒ³çœŸæ­£é©¾é©­æŒæ§åŠ›ä½œä¸ºä¸€ç§åŠ¨åŠ›ï¼Œå°±æŠŠä½ ç”Ÿå‘½ä¸­ä¸ºè‡ªå·±åˆ’å‡ºçš„ 15%çš„æ—¶é—´&amp;ndash;ç§°ä¹‹ä¸ºä½ çš„è‡ªä¸»æ—¶é—´&amp;ndash;èŠ±åœ¨æ¨åŠ¨æŒ‘æˆ˜ä¸æŠ€èƒ½çš„å¹³è¡¡ä¸Šï¼ŒåŠªåŠ›åœ¨ä¸€äº›ä¸å¥½å¥‡å¿ƒã€æ¿€æƒ…å’Œç›®æ ‡ä¸€è‡´çš„äº‹æƒ…ä¸Šåšå¾—æ›´å¥½ä¸€äº›ã€‚ å¼€å§‹è¿½é€æ¸è¿›å¼æ”¹è¿›çš„é«˜å¢ƒç•Œã€‚è¿·ä¸Šè¿›æ­¥çš„å¤šå·´èƒºå¾ªç¯ã€‚&lt;/p>
&lt;p>è¯•ç€è®©ä»Šå¤©æ›´å¥½ä¸€ç‚¹ï¼Œè¯•ç€è®©æ˜å¤©æ›´å¥½ä¸€ç‚¹ã€‚ç„¶åé‡å¤ã€‚å†é‡å¤ã€‚&lt;/p>
&lt;h1 id="å°æˆåŠŸä¿ƒè¿›åŠ¨åŠ›">å°æˆåŠŸä¿ƒè¿›åŠ¨åŠ›&lt;/h1>
&lt;p>äººæ˜¯æ— æ³•æ¬ºéª—è‡ªå·±çš„ä¸‹æ„è¯†çš„ã€‚&lt;/p>
&lt;p>å¾ˆå¤šæ—¶å€™æ‹–å»¶ï¼Œä¸æ„¿æ„åšæŸä»¶äº‹æƒ…ï¼Œæ˜¯å› ä¸ºä¸‹æ„è¯†è§‰å¾—è¿™ä¸ªä¸œè¥¿éº»çƒ¦æ¯ç‡¥æˆ–è€…éå¸¸å›°éš¾ï¼Œä½†å¦‚æœèƒ½å¤ŸæŠŠäº‹æƒ…æ‹†è§£ç»†åˆ†ï¼Œèƒ½å¤Ÿç†è§£æ¯ä¸ªé˜¶æ®µå¤§æ¦‚ä¼šæœ‰ä»€ä¹ˆæ ·çš„æœŸå¾…ï¼Œä»€ä¹ˆæ—¶å€™ä¼šå¾—åˆ°ä»€ä¹ˆå¥–åŠ±ï¼Œä¸€æ—¦ç†è§£é€šäº†ï¼Œé©¬ä¸Šè¡ŒåŠ¨çš„åŠ¨åŠ›å°±ä¼šå¼ºå¤§å¾ˆå¤šã€‚&lt;/p>
&lt;p>æ‰€ä»¥ç¼ºä¹è¡ŒåŠ¨åŠ›ï¼Œå¾ˆå¤šæ—¶å€™æœ¬è´¨è¿˜æ˜¯æ¥æºäºå¤§è„‘å¯¹ç»†èŠ‚ä¸€æ— æ‰€çŸ¥ï¼Œç¼ºä¹ä¸€ä¸ªç›¸å¯¹ç»†åŒ–çš„ç†è§£å’ŒæœŸå¾…ã€‚è¿™æ—¶å€™ä¸åº”å½“ç€æ€¥è›®å¹²ï¼Œè€Œåº”å½“å…ˆå°½é‡è·å–æ›´å¤šä¿¡æ¯ï¼Œè·å¾—å¯¹çŸ­æœŸæ›´åŠ æ¸…æ™°çš„æœŸå¾…å€¼ï¼Œè¿™æ ·æ‰èƒ½æ¿€åŠ±è‡ªå·±åŠ¨èµ·æ¥ã€‚&lt;/p>
&lt;p>å¦‚æœä¸èƒ½é›†ä¸­æ³¨æ„åŠ›åšè‡ªå·±æœ‰å…´è¶£çš„äº‹æƒ…ï¼Œç¨å¾®æ¾æ•£ä¸‹æ¥ï¼Œéç†æ€§å¤§è„‘çš„ä¸€äº›è´Ÿé¢æƒ…ç»ªæˆ–è€…æ€è€ƒä¼šå·å·çš„æ¶Œç°åˆ°å°å‰ã€‚è¿™ç§è´Ÿé¢æƒ…ç»ªæœ‰å®ƒçš„å¹³è¡¡ä½œç”¨ï¼Œä½†æ˜¯è´Ÿé¢æƒ…ç»ªå¤ªå¤šäº†ï¼Œä¼šé™ä½äººçš„å†…åœ¨åŠ¨åŠ›ï¼Œæ—¶é—´é•¿äº†å½¢æˆæ¶æ€§å¾ªç¯ï¼Œç”šè‡³å‡ºç°å¿§éƒæƒ…ç»ªã€‚æ‰€ä»¥ä¸æ–­å¯»æ‰¾å¯ä»¥æ¿€å‘è‡ªå·±å…´è¶£çš„äº‹æƒ…å»åšï¼Œæ˜¯æé«˜ç”Ÿæ´»è´¨é‡çš„é‡è¦è®®é¢˜ã€‚&lt;/p>
&lt;p>è¿™å°±æ˜¯ã€ŠThe Motivation Myth åŠ¨åŠ›ç¥è¯ã€‹ä¸€ä¹¦é‡Œçš„æ ¸å¿ƒè§‚ç‚¹ï¼šå°æˆåŠŸå½¢æˆåŠ¨åŠ›ï¼ŒåŠ¨åŠ›ä¿ƒæˆæ›´å¤§çš„æˆåŠŸï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ­£åé¦ˆè¿é”ååº”ã€‚ä¸€èˆ¬çš„æ”¹å˜æ€æƒ³å’Œä¿¡å¿µéƒ½æ˜¯ä¸å¯é çš„ã€‚&lt;/p>
&lt;p>æ‰€ä»¥æŠŠè‡ªå·±æ‰“é€ æˆä¸€ä¸ªå¤šé¢æ‰‹ï¼Œæ›´å®¹æ˜“æ‰¾åˆ°å±€éƒ¨å°æˆåŠŸï¼Œè€Œç»™è‡ªå·±æ–°çš„åŠ¨åŠ›ç»§ç»­å‰è¿›ã€‚ä»äº‹éå¸¸ç‹­éš˜çš„å•ä¸€å·¥ä½œï¼Œå®¹æ˜“å¡å£³ï¼Œé•¿æœŸç¼ºä¹æ­£åé¦ˆè€Œæ°”é¦ï¼Œæˆ–å› å¤ªæ¯ç‡¥è€Œæ²¡äº‹æ‰¾äº‹å¼„å¾—æ›´ç³Ÿï¼ˆè‚¡å¸‚é¢‘ç¹äº¤æ˜“ï¼‰ã€‚&lt;/p></description></item><item><title>æŠ±æ€¨</title><link>https://example.com/p/%E6%8A%B1%E6%80%A8/</link><pubDate>Sun, 30 Jan 2022 11:32:47 +0800</pubDate><guid>https://example.com/p/%E6%8A%B1%E6%80%A8/</guid><description>&lt;p>å¯¹é—®é¢˜æˆ–å›°å¢ƒçš„æ— èƒ½ä¸ºåŠ›ï¼Œå¯¹ä»–äººæœ‰æ‰€æ¸´æ±‚å’Œå¯„æ‰˜ï¼ŒæœŸæœ›ä»–äººå¸®åŠ©è§£å†³é—®é¢˜ã€‚åŒæ—¶ï¼Œæ¸´æœ›åˆ«äººè¯»æ‡‚è‡ªå·±ï¼Œäº²è¿‘è‡ªå·±ã€‚&lt;/p>
&lt;p>æŠ±æ€¨ï¼Œå…¶å®æ˜¯â€œè¦æŠ±æŠ±â€ã€‚æŠ±æ€¨è¿˜ç»å¸¸ä¼´æœ‰è½»å¾®çš„æ„¤æ€’å’Œå¯¹ä»–äººçš„æ”»å‡»ã€‚ä¸çˆ±æŠ±æ€¨çš„äººï¼Œåœ¨é¢å¯¹æŒ«æŠ˜å’Œæ— æ³•è§£å†³çš„é—®é¢˜æ—¶ï¼Œä»–ä»¬èƒ½å¯¹è‡ªå·±çš„æ— èƒ½ä¸ºåŠ›åŠ ä»¥æ¥çº³ï¼Œèƒ½æ˜ç¡®åœ°æ„ŸçŸ¥é“è‡ªå·±å“ªäº›æ–¹é¢æ˜¯æœ‰ä»·å€¼çš„ï¼Œå“ªäº›æ–¹é¢æ˜¯æ²¡æœ‰ä»·å€¼çš„ï¼Œä¸éœ€è¦æ±‚è¯¸äºä»–äººçš„è‚¯å®šå’Œç†è§£ã€‚&lt;/p>
&lt;p>æŠ±æ€¨ä¼ é€’çš„ä¿¡å·æ˜¯ï¼Œå°†å¤ªå¤šä¸ªäººçš„ä»·å€¼éœ€æ±‚å¯„æ‰˜åˆ°äº†åˆ«äººèº«ä¸Šï¼Œæ²¡æœ‰è¯•å›¾å»å¯»æ‰¾è‡ªå·±åº”å¯¹é—®é¢˜çš„ç­–ç•¥ï¼Œéœ€è¦åŠ å¼ºä¸ªäººè§£å†³é—®é¢˜çš„è¡ŒåŠ¨åŠ›å’Œä¸ªäººä»·å€¼æ„Ÿã€‚ï¼ˆè¯´ç™½äº†ï¼Œäººè¿˜æ˜¯å¾—é è‡ªå·±å‘€ï¼ï¼‰&lt;/p></description></item><item><title>å«‰å¦’</title><link>https://example.com/p/%E5%AB%89%E5%A6%92/</link><pubDate>Sun, 30 Jan 2022 11:32:43 +0800</pubDate><guid>https://example.com/p/%E5%AB%89%E5%A6%92/</guid><description>&lt;p>å«‰å¦’æ˜¯ï¼Œä½ æœ‰è€Œæˆ‘æ²¡æœ‰ï¼Œè®©æˆ‘è§‰å¾—è‡ªå·±å¾ˆæ²¡æœ‰ä»·å€¼ã€‚&lt;/p>
&lt;p>è‡ªæˆ‘ä»·å€¼æ„Ÿè¶Šå®Œå–„ï¼Œå«‰å¦’å‡ºç°çš„æ¦‚ç‡è¶Šä½ï¼Œä¹Ÿä¸å€¾å‘äºé€šè¿‡å’Œä»–äººæ¯”è¾ƒï¼Œæ¥å¡«è¡¥è‡ªå·±çš„ä»·å€¼æ„Ÿã€‚å¦‚æœå€¾å‘äºæ€»æ˜¯å’Œåˆ«äººæ¯”è¾ƒï¼Œæœ¬è´¨åŸå› æ˜¯è‡ªæˆ‘æ„è¯†ä¸ä»–äººåˆ†åŒ–ä¸å¤Ÿï¼Œè‡ªæˆ‘è¾¹ç•Œä¸æ¸…æ™°ï¼Œè€Œå¤§éƒ¨åˆ†äººçš„è‡ªæˆ‘æ„è¯†éƒ½ä¸æ˜¯å¾ˆå®Œå–„ï¼Œæˆ‘ä»¬ä¸ä»–äººä¹‹é—´çš„åˆ†åŒ–åšå¾—å¹¶ä¸å¥½ï¼Œå› ä¸ºåˆ†åŒ–ä¸å¤Ÿï¼Œå¯¼è‡´æˆ‘ä»¬ç»å¸¸ä¸ä»–äººå‘ç”Ÿæ··æ·†ã€‚&lt;/p>
&lt;p>å«‰å¦’æƒ…ç»ªå…¶å®æ˜¯è‡ªæˆ‘è¯„å®šç³»ç»Ÿå‡ºäº†é—®é¢˜ï¼Œå¯¹è‡ªå·±æ²¡æœ‰å®¢è§‚çš„è®¤è¯†ï¼Œä¸èƒ½å‡†ç¡®åœ°æç‚¼å‡ºè‡ªæˆ‘éœ€æ±‚å’Œè‡ªæˆ‘æ„è¯†ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€æ¡è‡ªå·±åšä¿¡çš„è‡ªæˆ‘ä»·å€¼å®ç°çš„é“è·¯ï¼Œæˆ‘ä»¬ä¹Ÿå°±æ— éœ€å«‰å¦’ä»–äººã€‚å«‰å¦’å¯ä»¥å‡åä¸ºç¾¡æ…•å’Œå´‡æ‹œï¼Œè¿™æ˜¯å»ºè®¾æ€§çš„ç§¯æçš„è½¬åŒ–ã€‚é€šè¿‡ç¾¡æ…•å’Œå´‡æ‹œä»–äººï¼Œä¿ƒä½¿æˆ‘ä»¬å‘ä»–äººå­¦ä¹ ï¼Œå®ç°è‡ªæˆ‘ä»·å€¼çš„æå‡ã€‚&lt;/p>
&lt;p>å«‰å¦’æƒ…ç»ªæé†’æˆ‘ä»¬ï¼Œæ··æ·†äº†è‡ªå·±ä¸ä»–äººçš„è¾¹ç•Œï¼Œåº”è¯¥è¯•å›¾å»å»ºç«‹è‡ªå·±ç‹¬ç‰¹çš„ä»·å€¼æ„Ÿï¼Œå°†è‡ªå·±ä¸ä»–äººåŒºåˆ«å¼€ã€‚&lt;/p></description></item><item><title>æ„¤æ€’</title><link>https://example.com/p/%E6%84%A4%E6%80%92/</link><pubDate>Sun, 30 Jan 2022 11:32:38 +0800</pubDate><guid>https://example.com/p/%E6%84%A4%E6%80%92/</guid><description>&lt;p>ä¸€ç§å…·æœ‰å¼ºçƒˆåˆºæ¿€æ€§çš„æƒ…ç»ªï¼Œç”±åˆºæ¿€äº‹ä»¶å¼•å‘äº†å¿ƒç†ä¸Šæåº¦çš„æŒ«æŠ˜æ„Ÿï¼Œä½“ç°åœ¨ä»·å€¼æ„Ÿå’Œå®‰å…¨æ„Ÿéƒ½ä¸§å¤±äº†ï¼Œå¼•å‘äº†å¼ºçƒˆçš„ä¸æ»¡ï¼Œè¿›è€Œè®©äººçˆ†å‘å‡ºåæŠ—ä»–äººçš„æœ¬èƒ½ååº”ã€‚ï¼ˆæœ‰ä¸€å¥è¯ï¼Œæ„¤æ€’çš„èƒŒåæ˜¯è™šå¼±ã€‚ï¼‰&lt;/p>
&lt;p>æ„¤æ€’ä¼šè®©äººæš‚æ—¶å¤±å»ç†æ™ºã€‚&lt;/p>
&lt;p>æ„¤æ€’æƒ…ç»ªè¡¨ç°ä¸ºï¼šå¼ºçƒˆçš„å¯¹å¤–æ”»å‡»æ€§ã€ç ´åæ€§ã€ä¼´éšæœ‰è‚¢ä½“è¯­è¨€ï¼Œè¡Œä¸ºçªç„¶å¤±æ§ï¼Œç¬é—´å¤±å»ç†æ™ºï¼Œæœ‰æ—¶è¿˜æœ‰å¯¹å†…çš„æ”»å‡»æ€§ã€‚æ„¤æ€’çš„å¯¹å†…æ”»å‡»å¯ä»¥ç†è§£ä¸ºè‡ªæˆ‘ä¼¤å®³ï¼Œæ˜¯æŠŠå¯¹å¤–çš„æ„¤æ€’è½¬åŒ–ä¸ºå¯¹è‡ªå·±çš„æ„¤æ€’ï¼Œé€šè¿‡è‡ªæˆ‘æ”»å‡»è‡ªæˆ‘ä¼¤å®³æ¥è¾¾åˆ°ä¼¤å®³å¯¹æ–¹çš„æ•ˆæœã€‚&lt;/p>
&lt;p>æ„¤æ€’çš„æ ¸å¿ƒæ˜¯ã€Œææƒ§æƒ…ç»ªçš„è”“å»¶ã€ï¼Œæ„å›¾ç”¨ä¸€ç§è½¬å˜çˆ†å‘çš„æ–¹å¼æ¥é‡Šæ”¾ææƒ§æƒ…ç»ªï¼Œå‡ºäºå¯¹å®‰å…¨æ„Ÿè¢«ä¼¤å®³çš„ä¿æŠ¤ã€‚&lt;/p>
&lt;p>æ„¤æ€’æƒ…ç»ªå‘Šè¯‰æˆ‘ä»¬ï¼šé¢å¯¹å½“å‰çš„é—®é¢˜çš„åŠ›é‡æ˜¯ä¸è¶³çš„ã€‚æˆ‘ä»¬çš„åŠ›é‡ä¸è¶³ä»¥æ”¯æ’‘æˆ‘ä»¬çš„è‡ªå°Šå’Œè‡ªä¿¡ï¼Œéœ€è¦è°ƒåŠ¨ä½“å†…æ›´å¤§çš„åŠ›é‡æ¥åº”å¯¹é—®é¢˜ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ˜“æ¿€æƒ¹çŠ¶æ€ï¼š
äººåœ¨çˆ†å‘å‰çš„çŠ¶æ€ï¼Œè¡¨ç°æ˜¯ä¸€ç‚¹å°äº‹å°±æƒ…ç»ªæ¿€åŠ¨äº†ï¼Œæç¤ºçš„ä¿¡å·æ˜¯ï¼Œä½ çš„æƒ…ç»ªå®¹é‡å·²ç»æ»¡äº†ï¼Œæ€¥éœ€é‡Šæ”¾ä¸€äº›æƒ…ç»ªï¼Œå¹¶ä¸”å°½é‡ä¸è¦å†å—åˆ°åˆºæ¿€ã€‚æƒ…ç»ªçˆ†å‘ä¹Ÿæ˜¯ä¸€ç§æƒ…ç»ªé‡Šæ”¾çš„æ–¹å¼ï¼Œä½†æ€ä¼¤åŠ›æœ‰ç‚¹å¤§ï¼Œä¸æ˜¯æœ€å¥½çš„æ–¹å¼ã€‚æ£€è§†ä¸€ä¸‹è‡ªå·±å†…åœ¨çš„æƒ…ç»ªéƒ½æœ‰ä»€ä¹ˆï¼Œç„¶åä¸€ä¸€å°†å…¶ç”¨æ­£å¸¸çš„æ¸ é“ã€æ€ä¼¤åŠ›å°ä¸€ç‚¹çš„æ–¹å¼æ’é£æ‰ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æå‰è§‰å¯Ÿè‡ªå·±çš„æƒ…ç»ªä¸´ç•Œç‚¹ï¼Œå½“è¾¾åˆ°æ˜“æ¿€æƒ¹çŠ¶æ€ä¹‹åè¿…é€Ÿå¯»æ‰¾åŠæ³•è§£å†³ï¼Œä¸è®©è‡ªå·±å¤±å»ç†æ™ºåœ°çˆ†å‘ã€‚å½“ç„¶ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯å†æå‰ä¸€ç‚¹ï¼Œä¸è¦è®©è‡ªå·±å‘å±•åˆ°æ˜“æ¿€æƒ¹çŠ¶æ€ã€‚&lt;/p></description></item><item><title>ææƒ§</title><link>https://example.com/p/%E6%81%90%E6%83%A7/</link><pubDate>Sun, 30 Jan 2022 11:32:32 +0800</pubDate><guid>https://example.com/p/%E6%81%90%E6%83%A7/</guid><description>&lt;blockquote>
&lt;p>ææƒ§çš„æœ¬è´¨æ˜¯è‡ªæˆ‘å®‰å…¨æ„Ÿå—åˆ°äº†å¨èƒï¼Œè€Œç†æ€§è„‘æ— æ³•è§£å†³è¿™ç§å¨èƒï¼Œäºæ˜¯ä»£ä¹‹ä»¥æƒ…ç»ªçš„æ–¹æ³•æ¥åº”å¯¹ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ææƒ§çš„æ ¹æºæ˜¯äººçš„å¤±ç­–æˆ–å¤±èƒ½ï¼Œäººåœ¨é¢å¯¹ä¸€ç§çŠ¶å†µæ—¶å¤±å»äº†åº”å¯¹çš„ç­–ç•¥å’Œèƒ½åŠ›ï¼Œè¿™ç§å¤±ç­–å’Œå¤±èƒ½è®©äººçš„ç„¦è™‘æƒ…ç»ªæ— æ³•åŒ–è§£ï¼Œè¿›è€Œæ¼”å˜æˆæˆ–é€ƒé¿æˆ–æ”»å‡»çš„è¡Œä¸ºï¼ˆé€ƒé¿ï¼Œä¹Ÿæ˜¯ä¸€ç§â€œæ”»å‡»â€ï¼‰ã€‚é€šè¿‡æ”»å‡»ï¼Œäººä»¬èƒ½å¤Ÿè¥é€ ä¸€ç§è‡†æƒ³ä¸­å¼ºå¤§çš„è‡ªå·±æ¥è·å¾—è‡ªå·±å†…å¿ƒçš„å®‰å…¨æ„Ÿã€‚ï¼ˆæ­¤å¤„@ç»å¸¸å‘è„¾æ°”çš„åŒå­¦ï¼Œè¯¥åšè§‰å¯Ÿå’Œåæ€äº†ï¼‰&lt;/p>
&lt;p>ææƒ§å¸¦ç»™æˆ‘ä»¬çš„ä¿¡æ¯æ˜¯ï¼Œä½ å½“å‰è§£å†³é—®é¢˜çš„èµ„æºã€åŠ›é‡æˆ–ç­–ç•¥æ˜¯ä¸å¤Ÿçš„ï¼Œä½ éœ€è¦ç»„ç»‡èµ„æºï¼Œè°ƒæ•´ç­–ç•¥ã€è°ƒåŠ¨åŠ›é‡æ¥é‡æ–°è§£å†³é—®é¢˜ã€‚&lt;/p>
&lt;p>æ‰¿è®¤è‡ªå·±çš„å®³æ€•å’Œéœ€è¦å¸®åŠ©ï¼Œå…¶å®æ˜¯ä¸€ç§å¼ºå¤§çš„è¡¨ç°ï¼Œä¸ä¸¢äººã€‚&lt;/p></description></item><item><title>æŠ‘éƒ</title><link>https://example.com/p/%E6%8A%91%E9%83%81/</link><pubDate>Sun, 30 Jan 2022 11:28:47 +0800</pubDate><guid>https://example.com/p/%E6%8A%91%E9%83%81/</guid><description>&lt;blockquote>
&lt;p>æŠ‘éƒæƒ…ç»ªæ˜¯åœ¨å¯¹ç°å®æ¯«æ— å¯¹ç­–çš„æ—¶å€™å‡ºç°çš„ï¼Œå®ƒåœ¨æé†’æˆ‘ä»¬å½“å‰è§£å†³é—®é¢˜çš„ç­–ç•¥æ˜¯æ— æ•ˆçš„ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾å¦å¤–ä¸€ç§æœ‰æ•ˆçš„åº”å¯¹ç­–ç•¥ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æŠ‘éƒäº§ç”Ÿçš„æ¨¡å¼æ˜¯ï¼Œæˆ‘ä»¬ä»˜å‡ºåŠªåŠ›äº†â¡ï¸å¯¹äº‹æƒ…çš„æœŸå¾…æ²¡æœ‰å¾—åˆ°æ»¡è¶³ã€äº§ç”Ÿå¤±è½â¡ï¸å¤±è½æ— æ³•æ’é£ï¼Œäº§ç”Ÿä¸€ç§æ— åŠ©â¡ï¸æ— åŠ©ç»™è‡ªå·±å†…å¿ƒå¸¦æ¥å†²å‡»ï¼Œäº§ç”Ÿè‡ªæˆ‘æ€€ç–‘å’Œè‡ªæˆ‘æŠ›å¼ƒâ¡ï¸æœ€ç»ˆè®¤å®šè‡ªèº«æ²¡ä»·å€¼ï¼ŒåŠªåŠ›æ²¡æœ‰ä»·å€¼ï¼Œäº‹æƒ…æ²¡æœ‰ä»·å€¼ï¼Œä¸€åˆ‡éƒ½æ²¡æœ‰ä»·å€¼ï¼Œé™·å…¥æŠ‘éƒã€‚&lt;/p>
&lt;p>æŠ‘éƒçš„æ ¸å¿ƒæ˜¯ä»·å€¼æ„Ÿå’Œæ„ä¹‰æ„Ÿçš„ç¼ºå¤±ã€‚&lt;/p>
&lt;p>æŠ‘éƒçš„è¡¨ç°ï¼šè®¤çŸ¥æ¶ˆæï¼ˆâ€œè¿™éƒ½ä»€ä¹ˆç©æ„å„¿â€ï¼‰ï¼Œæƒ…ç»ªä½è½ï¼ˆâ€œæ²¡æ„æ€ï¼Œä¸€åˆ‡éƒ½æ²¡æ„æ€â€ï¼‰ï¼Œæ„å¿—åŠ›å‡é€€ï¼Œå¯¹ä»»åŠ¡çš„å¯åŠ¨å›°éš¾ï¼ˆæ€ç»´è¿Ÿé’ï¼‰ï¼Œè®°å¿†åŠ›å’Œåˆ¤æ–­åŠ›å‡é€€ï¼Œè‡ªæˆ‘éš”ç¦»ã€‚&lt;/p>
&lt;p>æŠ‘éƒä¼ é€’çš„ä¿¡æ¯ï¼šä½ å½“å‰æ­£é¢å¯¹ç€ä¸¥é‡çš„é—®é¢˜ï¼Œè€Œä¸”ï¼Œä½ è§£å†³é—®é¢˜çš„æ–¹æ³•æ˜¯æ— æ•ˆçš„âŒã€‚ä½ å¿…é¡»æ›´æ¢è§£å†³é—®é¢˜çš„ç­–ç•¥ï¼Œå°¤å…¶æ˜¯æ­£è§†é—®é¢˜çš„å­˜åœ¨ï¼Œå¹¶è¿«ä½¿è‡ªå·±æ›´åŠ çµæ´»åœ°é¢å¯¹é—®é¢˜ã€‚ï¼ˆé€šå¸¸å›ºæ‰§çš„äººæ›´å®¹æ˜“æŠ‘éƒï¼Œè€Œæ€ç»´æ¯”è¾ƒçµæ´»çš„äººï¼Œå³ä½¿æŠ‘éƒäº†ï¼Œä¹Ÿå®¹æ˜“èµ°å‡ºæ¥ã€‚è®©è‡ªå·±ä¸å†é‚£ä¹ˆâ€œåˆšâ€ï¼Œå¼¹æ€§ä¸€ç‚¹ã€‚ï¼‰&lt;/p>
&lt;p>æŠ‘éƒçš„æ˜“æ„Ÿæ€§å’Œè‡ªæ‹æ°´å¹³ä¹Ÿæœ‰ä¸€å®šçš„å…³ç³»ï¼Œå¦‚æœæˆ‘ä»¬æ”¾ä½ä¸€ç‚¹â€œè‡ªæ‹æ°´å¹³â€ï¼Œå°±æ›´ä¸å®¹æ˜“è¢«æŒ«è´¥ï¼Œä¿æŒå¯¹ä¸–ç•Œã€å¯¹è‡ªæˆ‘æ¸…æ™°å‡†ç¡®çš„è¯„ä¼°å’Œè®¤è¯†ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬ä¸é‚£ä¹ˆå®¹æ˜“æŠ‘éƒã€‚ä»ç²¾ç¥åˆ†æè§’åº¦ï¼Œâ€œæŠ‘éƒâ€å’Œâ€œè¶…æˆ‘â€å¤ªè¿‡äºå¼ºå¤§æœ‰å…³ï¼Œä¸€ä¸ªå¼ºå¤§çš„â€œè¶…æˆ‘â€æ€»åœ¨å‘Šè¯‰æˆ‘ä»¬â€œä½ åº”è¯¥æ€æ ·æ€æ ·â€ï¼Œä¸åœåœ°å‘å†…æ”»å‡»ï¼Œæ‰€ä»¥ï¼Œå¦‚æœç°åœ¨æœ‰æ„Ÿè§‰åˆ°æŠ‘éƒçš„æœ‹å‹ï¼Œå¯¹è‡ªå·±å¥½ä¸€äº›ï¼Œåœæ­¢è¯„ä»·å’Œæ”»å‡»è‡ªå·±ã€‚åŒæ—¶ï¼Œå°è¯•ç”¨â€œå¤šå…ƒä»·å€¼ä½“ç³»â€æ¥çœ‹ä¸€çœ‹è‡ªå·±ï¼Œæˆ‘ä»¬çš„ä»·å€¼ä¸ä»…ä»…ä½“ç°åœ¨ä¸€ä»¶äº‹æƒ…ä¸Šï¼Œä¸è¦è¿‡åº¦æ”¾å¤§ä¸€ä»¶äº‹æƒ…å¯¹äºæˆ‘ä»¬çš„ä»·å€¼ã€‚&lt;/p>
&lt;p>å¦‚æœä½ è§‰å¾—æŠ‘éƒè®©ä½ å¾ˆéš¾å—äº†ï¼Œè¯·åŠæ—¶å°±åŒ»æ£€æŸ¥ã€‚&lt;/p>
&lt;p>å¯¹äº†ï¼Œäººå¦‚æœä¸€ç›´åœ¨å‘æŒ¥â€œåŠŸèƒ½â€è€Œä¸å¾—ä¼‘æ¯ï¼Œä¹Ÿä¼šå¼•å‘æŠ‘éƒï¼Œæ‰€ä»¥ä¸€å®šè¦è®©è‡ªå·±æœ‰ä»€ä¹ˆéƒ½ä¸å›¾ã€ä¸å‘æŒ¥åŠŸèƒ½ã€è®©è‡ªå·±ä½œä¸ºä¸€ä¸ªäººæ¢å¤çš„æ—¶é—´ã€‚&lt;/p></description></item><item><title>ç„¦è™‘</title><link>https://example.com/p/%E7%84%A6%E8%99%91/</link><pubDate>Sun, 30 Jan 2022 11:25:21 +0800</pubDate><guid>https://example.com/p/%E7%84%A6%E8%99%91/</guid><description>&lt;blockquote>
&lt;p>ç„¦è™‘æ¥è‡ªä¸ªä½“åŠªåŠ›è¿½æ±‚ç”Ÿå­˜ï¼Œä»¥åŠç»´æŒå’Œè‚¯å®šè‡ªæˆ‘å­˜åœ¨ã€å®‰å…¨æ„Ÿå’Œä»·å€¼æ„Ÿçš„è¿‡ç¨‹ï¼Œç„¦è™‘æ„Ÿæ˜¯äººç”Ÿä¸­ä¸å¯é¿å…çš„é—®é¢˜ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ç„¦è™‘æ˜¯æˆ‘ä»¬çš„å¤§è„‘å¯¹æŠ—æ½œåœ¨å±æœºçš„ç§¯æè¡Œä¸ºï¼Œæ˜¯ä¸€ç§è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå½“ä½ æ„Ÿè§‰åˆ°è‡ªæˆ‘çš„ä»·å€¼å—åˆ°è´¨ç–‘ï¼Œæˆ–è€…æ„Ÿè§‰åˆ°ä¸å®‰æ—¶å¤§è„‘å°±ä¼šå¯åŠ¨è¿™ä¸ªæœºåˆ¶ï¼Œè®©æˆ‘ä»¬è¡¨ç°å‡ºç„¦è™‘ä¸å®‰ã€‚&lt;/p>
&lt;p>ç„¦è™‘æƒ…ç»ªå¯ä»¥åˆ†ä¸º 3 ç±»ï¼šå­˜åœ¨æ€§ç„¦è™‘ï¼Œç›®æ ‡ç¼ºå¤±çš„ç„¦è™‘ï¼Œæœ‰æ˜ç¡®æŒ‡å‘çš„ç„¦è™‘ã€‚&lt;/p>
&lt;ol>
&lt;li>å­˜åœ¨æ€§ç„¦è™‘ï¼šæˆ‘ä»¬æ¯ä¸ªäººéƒ½æœ‰é“¾æ¥åˆ«äººã€å½±å“åˆ«äººã€ä¿æŒå½±å“åŠ›çš„éœ€æ±‚ï¼ˆç²¾ç¥åˆ†æä¸­æœ‰ä¸€å¥è¯ï¼Œè‡ªæˆ‘æ˜¯å­˜åœ¨äºå…³ç³»ä¹‹ä¸­çš„ï¼‰ï¼Œå¦‚æœè¿™äº›éœ€æ±‚å¾—ä¸åˆ°æ»¡è¶³ï¼Œæˆ‘ä»¬ä¸ªäººå­˜åœ¨çš„ä»·å€¼å°±ä¼šè¢«å‰Šå¼±ï¼ˆæ„Ÿå—ä¸åˆ°è‡ªå·±çš„å­˜åœ¨ï¼‰ï¼Œå°±ä¼šäº§ç”Ÿç„¦è™‘ï¼Œä¾‹å¦‚å­¤ç‹¬ç„¦è™‘ï¼Œä»·å€¼ç„¦è™‘ï¼Œåªè¦æ˜¯äººï¼Œæˆ–å¤šæˆ–å°‘éƒ½æœ‰å­˜åœ¨æ€§ç„¦è™‘ï¼Œå­˜åœ¨æ€§ç„¦è™‘æ— æ³•æ ¹é™¤ï¼Œåªè¦ä¸æ˜¯ç‰¹åˆ«é¡½å›ºåœ°æŒ¥ä¹‹ä¸å»ï¼Œä¹Ÿä¸ä¼šå¯¹äººé€ æˆå¤šå¤§ä¼¤å®³ã€‚&lt;/li>
&lt;/ol>
&lt;p>å¦‚æœä½ è§‰å¾—ä½ ç°åœ¨æœ‰æ¯”è¾ƒä¸¥é‡çš„å­˜åœ¨æ€§ç„¦è™‘ï¼Œå¯èƒ½èƒ½ç¼“è§£çš„æ–¹å¼æ˜¯åšä¸€äº›èƒ½è®©ä½ æ„Ÿå—åˆ°è‡ªå·±å­˜åœ¨çš„äº‹æƒ…ï¼Œe.g. å»çˆ±ï¼Œå»å·¥ä½œï¼Œå»å¯»æ‰¾ä½ çš„ç›®æ ‡ï¼Œå»å‘å±•ä½ çš„çˆ±å¥½ï¼Œå»å¤§è‡ªç„¶é‡Œå¾…ç€ï¼Œæ„Ÿå—é˜³å…‰ç…§åœ¨ä½ èº«ä¸Šï¼Œå»å†™ä½œï¼Œå»å’Œåˆ«äººé—²èŠï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®­ç»ƒè‡ªå·±ä»€ä¹ˆéƒ½ä¸å¹²ï¼Œå°±å¥½å¥½åœ°å’Œè‡ªå·±å¾…ç€ã€‚&lt;/p>
&lt;ol start="2">
&lt;li>ç›®æ ‡ç¼ºå¤±çš„ç„¦è™‘ï¼šä¸çŸ¥é“è‡ªå·±å› ä¸ºä»€ä¹ˆè€Œç„¦è™‘ï¼Œå¼¥æ¼«æ€§ç„¦è™‘ï¼Œç²¾åŠ›å¾ˆéš¾é›†ä¸­ï¼Œæ„Ÿè§‰èº«å¿ƒç–²æƒ«ï¼Œä¸çŸ¥é“è‡ªå·±æ¯å¤©åº”è¯¥å¹²ä»€ä¹ˆï¼Œç„¦è™‘ä»ä¸€ä¸ªç‚¹ï¼Œä¸€ä¸ªæ—¶é—´æ®µå¼¥æ¼«åˆ°æ•´ä¸ªç”Ÿæ´»ï¼Œè¿™ç§ç„¦è™‘æ˜¯ç›®æ ‡ç¼ºå¤±å¯¼è‡´çš„ã€‚æé†’æˆ‘ä»¬éœ€è¦ä¸ºè‡ªå·±å¯»æ‰¾ä¸€ä¸ªç›®æ ‡ï¼Œå®ƒå°±åƒä¸€ä¸ªä¿¡å·ï¼Œå‘Šè¯‰ä½ â€œä½ å¾—å¹²ç‚¹ä»€ä¹ˆäº†â€ï¼Œå½“ä½ æˆåŠŸæ•æ‰åˆ°è¿™ä¸ªä¿¡å·ï¼Œå¹¶è¯•ç€ç”¨è‡ªå·±çš„æ–¹å¼å»è§£å†³å®ƒä¹‹åï¼Œç„¦è™‘ä¹Ÿä¼šç¼“è§£ã€‚å½“ä½ ä¸ºè‡ªå·±æ‰¾åˆ°ä¸€ä¸ªç›®æ ‡å¹¶çœŸçš„è¸è¸å®å®å»åšä¸€äº›äº‹æƒ…ä¹‹åï¼Œä¼šæ„Ÿåˆ°èº«å¿ƒæ— æ¯”è½»æ¾ã€‚&lt;/li>
&lt;/ol>
&lt;p>å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨è™½ç„¶æœ‰çŸ­æœŸè¦åšçš„ç›®æ ‡ï¼Œä½†å¦‚æœè¿™ç§ç›®æ ‡å’Œæˆ‘ä»¬çš„é•¿æœŸç›®æ ‡ä¸åŒ¹é…ï¼Œä¹Ÿä¼šå¼•èµ·ç„¦è™‘ã€‚æ¯”å¦‚ï¼Œæ¯å¤©å·¥ä½œå¿™å¿™ç¢Œç¢Œï¼Œä½†ä¾ç„¶ç„¦è™‘ï¼Œå…¶å®å¯èƒ½åæ˜ å‡ºæˆ‘ä»¬é•¿æœŸç›®æ ‡çš„ç¼ºå¤±ï¼ˆåœ¨æ½œæ„è¯†ä¸­å¯¹æœªæ¥æ²¡æœ‰å®‰å…¨æ„Ÿ&lt;/p>
&lt;ol start="3">
&lt;li>æœ‰æ˜ç¡®æŒ‡å‘çš„ç„¦è™‘ï¼ˆç°å®æ€§ç„¦è™‘ï¼‰ï¼šå› ä¸ºæŸä»¶äº‹æƒ…å¼•èµ·ï¼Œææƒ§äº‹æƒ…å¸¦æ¥çš„åæœï¼Œä¾‹å¦‚è¯¥åšçš„äº‹æƒ…è¿˜æ²¡æœ‰åšï¼Œè€ƒè¯•ç„¦è™‘ï¼ˆå®³æ€•è€ƒç ¸ï¼‰ï¼Œâ€œåŒæœˆç„¦è™‘â€ï¼Œæ¥åˆ°æ–°ç¯å¢ƒçš„ç„¦è™‘ç­‰ã€‚æœ‰æ˜ç¡®æŒ‡å‘çš„ç„¦è™‘å…¶å®æŒ‡å‘çš„æ˜¯ææƒ§ï¼Œå¤§å¤šæ•°ææƒ§æƒ…ç»ªä¹Ÿæ˜¯ä¼´éšç„¦è™‘å‡ºç°çš„ã€‚ç„¦è™‘æ°´å¹³ä¸ç°å®å¨èƒçš„ç¨‹åº¦æˆæ­£æ¯”ã€‚&lt;/li>
&lt;/ol>
&lt;p>è§£å†³è¿™ç±»ç„¦è™‘çš„æ–¹æ³•ï¼Œè¦ä¹ˆé€ƒè·‘ï¼Œè¦ä¹ˆæˆ˜æ–—â€”â€”ã€Œé™ä½å¯¹ç›®æ ‡å¯¹è±¡çš„é‡è§†ç¨‹åº¦å’ŒæœŸå¾…ã€å’Œã€Œæå‡è‡ªå·±æŒæ¡ç›®æ ‡çš„èƒ½åŠ›ã€‚ã€è¯´å¤§ç™½è¯ï¼Œè¦ä¹ˆæˆ‘ä»¬ç»è¿‡æƒè¡¡æ€è€ƒä¹‹åï¼Œè®©è‡ªå·±ç¦»å¼€å‹åŠ›æºï¼Œè¦ä¹ˆå’Œå®ƒæˆ˜æ–—ï¼Œå¿ƒç†ä¸Šå‘Šè¯‰è‡ªå·±ï¼Œè¿™ä¸ªäº‹æƒ…æ²¡æœ‰ä½ æƒ³çš„é‚£ä¹ˆé‡è¦/é‚£ä¹ˆç€æ€¥ï¼ŒåŒæ—¶æ‰¾åˆ°æœ‰æ•ˆçš„ç­–ç•¥ï¼Œè®©è‡ªå·±èƒ½å¤Ÿèƒœä»»è¿™ä¸ªäº‹æƒ…ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ€»ç»“ä¸€ä¸‹ï¼Œç„¦è™‘ä½œä¸ºä¸€ç§ä¿¡å·ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¦‚æœå®ƒä¸æ˜¯ç”±äºå…·ä½“äº‹æƒ…å¼•èµ·çš„ï¼Œåˆ™æé†’æˆ‘ä»¬éœ€è¦ä¸ºè‡ªå·±å¯»æ‰¾ç›®æ ‡åšç‚¹ä»€ä¹ˆäº†ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœæœ‰å…·ä½“åŸå› ï¼Œè¦ä¹ˆé€‰æ‹©è¿œç¦»å‹åŠ›æºï¼Œè¦ä¹ˆé™ä½å¯¹ç„¦è™‘å¯¹è±¡çš„æœŸå¾…ï¼ˆä¾‹å¦‚ï¼Œæ”¾ä½ä¸€ç‚¹å¯¹è´¨é‡çš„è¦æ±‚ã€ç»™å¤šä¸€ç‚¹æ—¶é—´ï¼‰å¹¶æå‡è‡ªå·±æŒæ¡å®ƒçš„èƒ½åŠ›ï¼ˆåˆ†è§£æˆå¯æ‰§è¡Œçš„è¡Œä¸ºå¹¶å»æ‰§è¡Œï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/blockquote></description></item><item><title>å¦‚ä½•æ›´å¥½åœ°ç†è§£æˆ‘ä»¬çš„æƒ…ç»ª</title><link>https://example.com/p/%E5%A6%82%E4%BD%95%E6%9B%B4%E5%A5%BD%E5%9C%B0%E7%90%86%E8%A7%A3%E6%88%91%E4%BB%AC%E7%9A%84%E6%83%85%E7%BB%AA/</link><pubDate>Sun, 30 Jan 2022 11:14:39 +0800</pubDate><guid>https://example.com/p/%E5%A6%82%E4%BD%95%E6%9B%B4%E5%A5%BD%E5%9C%B0%E7%90%86%E8%A7%A3%E6%88%91%E4%BB%AC%E7%9A%84%E6%83%85%E7%BB%AA/</guid><description>&lt;ol>
&lt;li>
&lt;p>æƒ…ç»ªæ˜¯æ¥å¸®æˆ‘ä»¬çš„ï¼Œæ˜¯ä¸ºæˆ‘ä»¬é€ä¿¡å·çš„å†…åœ¨å°å­©ï¼Œå¦‚æœæˆ‘ä»¬çœ‹ä¸è§å®ƒã€ä¸æ­ç†å®ƒã€å‹æŠ‘å®ƒã€ç”šè‡³å’Œå®ƒå¯¹ç€å¹²ï¼Œæ€»æœ‰ä¸€å¤©å®ƒä¼šã€Œåƒæ‰æˆ‘ä»¬ã€ï¼ˆè¢«æƒ…ç»ªåå™¬ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æƒ…ç»ªä¸æ˜¯ï¼Œä¹Ÿä¸åº”è¯¥è¢«ç†è§£ä¸ºæ˜¯â€œåä¸œè¥¿â€ï¼Œæå‡æˆ‘ä»¬å¯¹å„ç§æƒ…ç»ªçš„ç†è§£åŠ›å’Œè€å—åŠ›ï¼Œå½“æƒ…ç»ªæ¥ä¸´çš„æ—¶å€™ï¼Œåˆ«è¯„ä»·å®ƒï¼ˆä¸ç”¨å› ä¸ºæœ‰æƒ…ç»ªè€Œè‡ªè´£ï¼‰ï¼Œä¸ç”¨å®³æ€•çš„èº²å¼€ï¼Œä¹Ÿä¸ç”¨ç€æ€¥å‡ºæ¥ï¼Œæˆ–è€…æŠŠå®ƒä¸€æ‹³æ‰“å›å»ï¼Œå¯ä»¥é™ªå®ƒå¾…ä¸€ä¼šå„¿ï¼Œå’Œé‚£ä¸ªæƒ…ç»ªä¸‹çš„è‡ªå·±å¾…ä¸€ä¼šå„¿ï¼Œé—®é—® â€œå˜¿ï¼Œä½ å’‹å•¦ï¼Ÿâ€ã€‚ï¼ˆè¿™æ˜¯æˆ‘ä»¬éš¾å¾—çš„ï¼Œçœ‹è§è‡ªå·±å’Œæ„Ÿå—è‡ªå·±å­˜åœ¨çš„æœºä¼šï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æˆ‘ä»¬å…¶å®ä¸å¤ªèƒ½â€œæ§åˆ¶æƒ…ç»ªâ€ï¼Œå·²ç»äº§ç”Ÿçš„æƒ…ç»ªå¾ˆéš¾è¢«æ§åˆ¶ï¼Œåªèƒ½è¢«ç–è§£ã€‚æˆ‘ä»¬èƒ½é€‰æ‹©çš„ï¼Œæ˜¯ä»¥ä½•ç§å§¿æ€åº”å¯¹ä¸€ä¸ªäº‹æƒ…çš„å‘ç”Ÿã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>æƒ…ç»ªæ˜¯æˆ‘ä»¬åœ¨å—åˆ°å¤–éƒ¨åˆºæ¿€åäº§ç”Ÿçš„è¿‘ä¹è‡ªåŠ¨çš„ååº”ï¼Œæ˜¯ä¸€ç§â€œç—‡çŠ¶â€å’Œâ€œç»“æœâ€ã€‚æœ‰ä¸€ç§è§£é‡Šæƒ…ç»ªçš„ ABC æ¨¡å‹ï¼Œé¦–å…ˆä¸€ä¸ªè¯±å‘äº‹ä»¶å‘ç”Ÿï¼Œç„¶åæˆ‘ä»¬æ€ä¹ˆçœ‹å¾…è¿™ä¸ªäº‹ä»¶çš„æ€åº¦/ä¿¡å¿µï¼Œå¯¼è‡´æˆ‘ä»¬äº§ç”Ÿä¸åŒçš„æƒ…ç»ªå’Œè¡Œä¸ºã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201301116673.png"
loading="lazy"
>&lt;/p>
&lt;p>æ¯ä¸ªäººéƒ½æœ‰å„ç§æƒ…ç»ªï¼Œå®ƒæ­ç¤ºçš„æ˜¯æˆ‘ä»¬å†…å¿ƒçš„å„ç§ä¿¡å¿µã€‚å½“è´Ÿé¢æƒ…ç»ªå‡ºæ¥çš„æ—¶å€™ï¼Œæ˜¯åœ¨æé†’æˆ‘ä»¬ï¼Œâ€œå‘Šè¯‰ä½ å“¦ï¼Œå“ªé‡Œå‡ºäº†ä»€ä¹ˆé—®é¢˜â€ï¼Œæé†’æˆ‘ä»¬æœ‰ä¸€äº›é‡è¦çš„äº‹æƒ…æ²¡æœ‰è§£å†³ã€æœ‰é‡è¦çš„éœ€æ±‚æ²¡æœ‰è¢«æ»¡è¶³ï¼Œè¯¥åšæ€è€ƒå’Œæ£€æŸ¥äº†ã€‚&lt;/p>
&lt;blockquote>
&lt;p>åˆ»æ„ç»ƒä¹ æ—¶åˆ»&lt;/p>
&lt;p>å½“ä½ ä¸‹æ¬¡æœ‰æƒ…ç»ªçš„æ—¶å€™ï¼Œå¯ä»¥è¯•è¯•â€œæƒ…ç»ªè¨€è¯­è¯â€ï¼Œå°±æ˜¯é€šè¿‡è¯­è¨€ï¼ŒæŠŠè‡ªå·±çš„æƒ…ç»ªè¯´å‡ºæ¥ï¼Œå¥å¼å¯ä»¥æ˜¯â€œå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…/åˆ«äººå¯¹æˆ‘åšäº†ä»€ä¹ˆï¼Œæˆ‘æ„Ÿè§‰åˆ°ä»€ä¹ˆï¼Œæˆ‘çš„å“ªäº›éœ€æ±‚æ²¡æœ‰è¢«æ»¡è¶³ï¼Œæˆ‘å¾ˆâ€¦â€¦â€&lt;/p>
&lt;p>ä¹Ÿå¯ä»¥é€šè¿‡å†™ä½œï¼Œæ•´ç†è¡¨è¾¾è‡ªå·±çš„æƒ…ç»ªï¼Œåœ¨å¾®ä¿¡å…¬ä¼—å·â€œæš‚åœå®éªŒå®¤â€æœ‰æä¾›æ­£å¿µå’Œæƒ…ç»ªä¹¦å†™è®­ç»ƒè¥ã€‚é€šè¿‡è¿™ç§åˆ»æ„çš„è¿‡ç¨‹ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è¯†åˆ«å’Œçœ‹è§è‡ªå·±çš„å„ç§æ„Ÿå—ï¼Œåœ¨åˆºæ¿€äº‹ä»¶å’Œæˆ‘ä»¬çš„ååº”ä¹‹é—´æŒ‰ä¸‹ä¸€ä¸ªæš‚åœé”®ï¼Œä»è€Œå¢åŠ å¯¹æƒ…ç»ªçš„æŒæ§åŠ›ï¼Œè€Œä¸æ˜¯ä½œå‡ºè‡ªåŠ¨åŒ–çš„ååº”ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å¦‚æœæˆ‘ä»¬èƒ½å¤ŸæŠŠæƒ…ç»ªçš„ä¿¡å·è§£è¯»å‡ºæ¥ï¼Œä¸ä½†å¯ä»¥å¹³å¤æƒ…ç»ªï¼Œè¿˜èƒ½å¤Ÿå¯¹æˆ‘ä»¬å½“å‰çš„è¡Œä¸ºå’ŒçŠ¶æ€è¿›è¡ŒåŠæ—¶çš„çŸ«æ­£ï¼ˆå˜æˆäº†ä¸€ä¸ªæ›´å¥½çš„äººå‘¢ï¼‰ã€‚å¦‚æœæƒ…ç»ªæ²¡æœ‰å¾—åˆ°ç…§é¡¾å’Œå¹³å¤ï¼Œå†…åœ¨è‡ªæˆ‘æ±‚æ•‘çš„ä¿¡å·æ²¡æœ‰è¢«æ„ŸçŸ¥åˆ°ï¼Œå®ƒå°±ä¼šæŒç»­å­˜åœ¨ä¸‹å»ï¼Œç”šè‡³ä¼šå¸¦ç€æˆ‘ä»¬åšå‡ºä¸€äº›å¤±æ§çš„è¡Œä¸ºï¼Œå³ä¾¿æœ‰æ—¶æš‚æ—¶è¢«å‹æŠ‘ï¼Œä¹Ÿä¼šå †ç§¯åœ¨æˆ‘ä»¬çš„å¿ƒé‡Œï¼Œæˆ–è€…èµ°å‘æˆ‘ä»¬çš„èº«ä½“ï¼ˆç”Ÿç—…ï¼‰ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬åšâ€œæƒ…ç»ªç®¡ç†â€ï¼Œå¹¶ä¸æ˜¯è¦å‹æŠ‘å·²ç»å‡ºæ¥çš„æƒ…ç»ªï¼Œè€Œæ˜¯è¦ä¸€æ–¹é¢åœ¨æƒ…ç»ªæœ‰è‹—å¤´çš„æ—¶å€™å°±è§‰å¯Ÿåˆ°è‡ªå·±çš„ååº”ï¼ŒåŠæ—¶ä½œå‡ºè°ƒæ•´ï¼›æˆ–è€…é€šè¿‡å·²ç»å‡ºç°çš„æƒ…ç»ªï¼Œæ›´å¥½åœ°çœ‹çœ‹åœ¨è‡ªå·±èº«ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆï¼Œå†…å¿ƒçš„å“ªäº›æƒ³æ³•å’Œç¯å¢ƒäº§ç”Ÿå†²çªäº†ï¼Œç„¶åå†â€œä¿®é€šâ€ä¸€ä¸‹â€”â€”è°ƒæ•´å½“å‰çš„åº”å¯¹ç­–ç•¥ï¼Œæˆ–è°ƒæ•´æˆ‘ä»¬çš„æƒ³æ³•ï¼Œè®©å†…å¿ƒä¸–ç•Œä¸å¤–ç•Œä¸å†å†²çªã€‚&lt;/p>
&lt;blockquote>
&lt;p>â€œåœ¨åˆºæ¿€å’Œååº”ä¹‹é—´ï¼Œæœ‰ä¸€ç‰‡ç©ºé—´ã€‚åœ¨é‚£ç‰‡ç©ºé—´é‡Œï¼Œæˆ‘ä»¬æœ‰è‡ªç”±ã€æœ‰èƒ½åŠ›é€‰æ‹©è‡ªå·±çš„ååº”â€ã€‚&lt;/p>
&lt;/blockquote></description></item><item><title>æ„Ÿå—è‡ªå·±çš„åŠ›é‡</title><link>https://example.com/p/%E6%84%9F%E5%8F%97%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8A%9B%E9%87%8F/</link><pubDate>Sun, 30 Jan 2022 11:10:13 +0800</pubDate><guid>https://example.com/p/%E6%84%9F%E5%8F%97%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8A%9B%E9%87%8F/</guid><description>&lt;blockquote>
&lt;p>è¨ç‰¹è¯´ï¼šæ†æ¨çš„æœ¬è´¨å°±æ˜¯æ‰¿è®¤äº†ä»–äººçš„è‡ªç”±&lt;/p>
&lt;/blockquote>
&lt;p>è¿™å¥è¯æ€ä¹ˆç†è§£ï¼Ÿ&lt;/p>
&lt;p>æˆ‘ä»¬ç¾¡æ…•çš„äººï¼Œä»–ä»¬è‡ªç”±åº¦å¤ªé«˜ä»¥è‡³äºæœ‰åˆç†é¢„æœŸï¼›&lt;/p>
&lt;p>æˆ‘ä»¬å«‰å¦’çš„äººï¼Œä»–ä»¬åªæ˜¯ç¨ç¨å‹æˆ‘ä»¬ä¸€å¤´ï¼›&lt;/p>
&lt;p>è€Œæˆ‘ä»¬æ¨çš„äººï¼Œæ˜¯é‚£äº›å®åŠ›å·®ä¸å¤šï¼Œä½†å› ä¸ºä»–ä»¬è¿‡äºè‡ªç”±è‡ªåœ¨ï¼Œè®©æˆ‘ä»¬äº§ç”Ÿâ€œæˆ‘ä¸è¡Œâ€çš„æ„Ÿè§‰ï¼Œå“²å­¦ä¸­ï¼Œç§°ä¸ºâ€œä¸§å¤±äº†è‡ªæˆ‘ä¸»ä½“æ€§â€ï¼Œç¿»è¯‘æˆå¤§ç™½è¯å°±æ˜¯â€œæ„Ÿå—ä¸åˆ°è‡ªå·±çš„åŠ›é‡â€ã€‚&lt;/p>
&lt;p>å¾ˆå¤šè´Ÿé¢çš„æƒ…ç»ªï¼Œéƒ½æ¥æºäºæˆ‘ä»¬æ„Ÿå—ä¸åˆ°è‡ªå·±æ‰€è•´å«çš„èƒ½é‡ï¼›è€Œä½ æœ€å¼€å¿ƒçš„æƒ…ç»ªï¼Œä¹Ÿéƒ½æ¥æºä½ ä½ æ„Ÿå—åˆ°äº†è‡ªå·±çš„åŠ›é‡ï¼š&lt;/p>
&lt;ul>
&lt;li>å†¥æƒ³ï¼Œè®©ä½ è§‚å¯Ÿåˆ°è‡ªå·±æƒ…ç»ªçš„åŠ›é‡ï¼›&lt;/li>
&lt;li>è¿åŠ¨ï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±èº«ä½“çš„åŠ›é‡ï¼›&lt;/li>
&lt;li>æ¸¸æˆï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±ä½¿ç”¨æŸä¸ªè‹±é›„çš„åŠ›é‡ï¼›&lt;/li>
&lt;li>è·Ÿæœ‹å‹å” å—‘ï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±è¿æ¥ä»–äººçš„åŠ›é‡ï¼›&lt;/li>
&lt;li>å…»å¨ƒå¸çŒ«ï¼Œè®©ä½ æ„Ÿå—åˆ°è‡ªå·±èƒ½å¤ŸæŠšå…»ç”Ÿå‘½çš„åŠ›é‡ï¼›&lt;/li>
&lt;li>&amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>è¿™ç§åŠ›é‡æ„Ÿï¼Œä¹Ÿæœ‰äººç§°ä¸ºæŒæ§æ„Ÿã€è‡ªç”±æ„Ÿï¼Œéœ€è¦è‡ªå·±ç»™è‡ªå·±ã€‚&lt;/p>
&lt;p>å¯æ˜¯ï¼Œæ‰“å·¥äººä¸‹ç­åï¼ŒçœŸçš„æ²¡æœ‰åŠ›æ°”è¿åŠ¨ã€æ²¡æœ‰æ³¨æ„åŠ›å†¥æƒ³äº†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦è®¤è®¤çœŸçœŸåæ€ä¸€ä¸‹ä½ åœ¨å·¥ä½œé‡Œçš„ä¸»ä½“æ€§äº†ï¼Œå¦‚æœå·¥ä½œä¸­æ²¡æœ‰è‡ªä¸»æƒï¼Œäººä»¬å°±ä¼šæœ‰â€œè‡ªå·±ä¸èƒ½åšå†³å®šï¼Œæ— æ³•åšé€‰æ‹©â€çš„æ„Ÿè§‰ï¼Œè¿™ç§æ„Ÿè§‰ä¼šå‡å°‘äººä»¬æ¿€åŠ±è‡ªå·±ï¼Œä»è€Œä¹Ÿå‡å°‘äº†é”»ç‚¼çš„åŠ¨æœºã€‚&lt;/p>
&lt;p>åœ¨é«˜å‹åŠ›ã€æ²¡æœ‰è‡ªä¸»æ§åˆ¶æƒçš„ç¯å¢ƒé‡Œï¼Œäººä¼šå˜å¾—å¯¹ç”Ÿæ´»éƒ½æ²¡æœ‰å¹²åŠ²äº†ã€‚&lt;/p>
&lt;p>è¿™æ˜¯ä¸€ç§å¾ˆå¯æ€•çš„æ¶æ€§å¾ªç¯ï¼Œä¹Ÿæ˜¯ä¸€ç§å¾ˆä¸¥é‡çš„æƒ…ç»ªä¼¤å®³ï¼Œå·¥ä½œä¸­ï¼Œè¦æ—¶åˆ»è­¦æƒ•è‡ªå·±çè´µçš„æƒ…ç»ªè¢«ç ´åï¼Œæƒ…ç»ªè¢«ç”Ÿç†æ€§çš„ç ´åï¼Œå¸¦æ¥çš„åæœè¿˜æŒºä¸¥é‡çš„ã€‚&lt;/p>
&lt;p>è®°å¾—å½“ä½ æƒ…ç»ªä¸å¥½çš„æ—¶å€™ï¼Œå¤šå°è¯•æ„Ÿå—ä¸€ä¸‹ä¸‹è‡ªå·±çš„åŠ›é‡ã€‚&lt;/p></description></item><item><title>å¦‚ä½•é€šè¿‡â€œä¸‰å¶è‰â€æ¨¡å‹æŠ¢æ•‘ä½ çš„å·¥ä½œçŠ¶æ€</title><link>https://example.com/p/%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87%E4%B8%89%E5%8F%B6%E8%8D%89%E6%A8%A1%E5%9E%8B%E6%8A%A2%E6%95%91%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81/</link><pubDate>Sun, 30 Jan 2022 10:57:28 +0800</pubDate><guid>https://example.com/p/%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87%E4%B8%89%E5%8F%B6%E8%8D%89%E6%A8%A1%E5%9E%8B%E6%8A%A2%E6%95%91%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81/</guid><description>&lt;h1 id="ä»€ä¹ˆæ˜¯ä¸‰å¶è‰æ¨¡å‹">ä»€ä¹ˆæ˜¯ä¸‰å¶è‰æ¨¡å‹&lt;/h1>
&lt;p>å·¥ä½œçš„æœ¬è´¨æ˜¯ï¼Œé€šè¿‡ä»·å€¼åˆ›é€ å®Œæˆä»·å€¼å…‘ç°ã€‚æˆ‘ä»¬èƒ½å¤Ÿè¿›è¡Œä»·å€¼åˆ›é€ çš„å‰ææ˜¯å¯¹æ‰€ä»äº‹çš„å·¥ä½œå†…å®¹æœ‰å…´è¶£ï¼Œå…´è¶£åŠ ä¸ŠæŒç»­çš„æŠ•å…¥ï¼Œè®©æˆ‘ä»¬å…·å¤‡å®Œæˆå·¥ä½œæ‰€éœ€è¦çš„èƒ½åŠ›ã€‚é€šè¿‡èƒ½åŠ›åˆ›é€ ä»·å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ç‰©è´¨å›æŠ¥å’Œç²¾ç¥å›æŠ¥ï¼Œè¿™äº›ä¸œè¥¿è®©æˆ‘ä»¬æ„Ÿå—åˆ°ä»·å€¼æ„Ÿå’Œæ»¡è¶³æ„Ÿï¼Œä»è€Œæœ‰æ›´å¼ºçš„å…´è¶£æŠ•å…¥åˆ°å·¥ä½œä¸­ï¼Œè¿™æ ·å½¢æˆä¸€ä¸ªé—­ç¯ã€‚&lt;/p>
&lt;p>æ‰€ä»¥å®Œç¾çš„å·¥ä½œåº”è¯¥åŒ…å«å…´è¶£ã€èƒ½åŠ›ã€ä»·å€¼ä¸‰ä¸ªæ–¹é¢ã€‚&lt;/p>
&lt;ol>
&lt;li>æˆ‘ä»¬æ„Ÿå…´è¶£çš„ï¼›&lt;/li>
&lt;li>æˆ‘ä»¬æœ‰èƒ½åŠ›èƒœä»»çš„ï¼›&lt;/li>
&lt;li>èƒ½å¤Ÿå›é¦ˆç»™æˆ‘ä»¬ä»·å€¼çš„ï¼Œä¸æˆ‘ä»¬å½“ä¸‹æ‰€è¿½æ±‚çš„ä»·å€¼è§‚ç›¸ç¬¦çš„ã€‚&lt;/li>
&lt;/ol>
&lt;p>å½“ä»¥ä¸Šä¸‰ä¸ªæ–¹é¢éƒ½è·å¾—æ»¡è¶³æ—¶ï¼Œæˆ‘ä»¬ä½“éªŒåˆ°çš„æ˜¯å¿«ä¹ã€å¯¹å·¥ä½œæœ‰çƒ­æƒ…ã€æœ‰æˆå°±æ„Ÿå’ŒæŒæ§æ„Ÿã€è§‰å¾—å·¥ä½œæœ‰æ„ä¹‰ã€æœ‰ä»·å€¼ã€‚ç›¸åï¼Œå¦‚æœå½“æŸä¸€æ–¹é¢å¾—ä¸åˆ°æ»¡è¶³æ—¶ï¼Œæˆ‘ä»¬ä¼šäº§ç”Ÿè´Ÿé¢çš„ä½“éªŒå’Œæƒ…ç»ªã€‚&lt;/p>
&lt;p>ä¸‰å¶è‰æ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡æˆ‘ä»¬åœ¨å·¥ä½œä¸­è¡¨ç°å‡ºçš„æƒ…ç»ªçŠ¶æ€ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œè‡ªæˆ‘è§‰å¯Ÿï¼Œæˆ–è€…å¸®åŠ©åˆ«äººåˆ¤æ–­å½“ä¸‹èŒä¸šå‘å±•çš„çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Œå“ªé‡Œå­˜åœ¨é—®é¢˜ï¼Œåº”è¯¥ä»ä½•å¤„ç€æ‰‹è§£å†³é—®é¢˜ï¼Œä¿ƒè¿›å‘å±•ã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201301058434.png"
loading="lazy"
>&lt;/p>
&lt;p>ä¸ç†æƒ³çš„èŒä¸šçŠ¶æ€å’Œå…¸å‹ç‰¹å¾&lt;/p>
&lt;ul>
&lt;li>å…´è¶£ç¼ºå¤±ï¼šåŒå€¦ï¼Œæ˜“æ„Ÿäººç¾¤ï¼šå·¥ä½œ 3 å¹´ä»¥ä¸Šï¼Œæˆ–åŒä¸€ä¸ªå²—ä½å·¥ä½œ 2 å¹´ä»¥ä¸Šï¼Œå·²ç»åº¦è¿‡äº†èµ·æ­¥é€‚åº”é˜¶æ®µï¼Œåœ¨å‘å±•æœŸå‡ºç°å·¥ä½œå€¦æ€ 
&lt;ul>
&lt;li>å¿ƒç†ååº”ï¼šåŒå€¦ï¼Œè®°å¿†åŠ›ä¸‹é™ï¼Œååº”é€Ÿåº¦å˜æ…¢ï¼Œé•¿æ—¶é—´çš„åŒå€¦å®¹æ˜“æ¼”åŒ–ä¸ºæŠ‘éƒ&lt;/li>
&lt;li>èº«ä½“ååº”ï¼šæ‰‹è„šå†°å‡‰ï¼Œå‘å†·ï¼Œå¤´ç–¼ï¼Œæ³¨æ„åŠ›æ¶£æ•£ï¼Œè¡ŒåŠ¨é€Ÿåº¦ä¸‹é™&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>èƒ½åŠ›ç¼ºå¤±ï¼šç„¦è™‘ï¼Œæ˜“æ„Ÿäººç¾¤ï¼šåˆšè¿›å…¥èŒåœºã€åˆšæ™‹å‡ã€åˆšè¿›å…¥æ–°çš„å²—ä½ã€å·¥ä½œæŒ‘æˆ˜å¤§æ—¶
&lt;ul>
&lt;li>å¿ƒç†ååº”ï¼šæ˜“æ€’ï¼Œæš´èºï¼Œè¯´è¯å£°éŸ³å¿«ï¼Œå®¹æ˜“æƒ…ç»ªæ¿€åŠ¨&lt;/li>
&lt;li>èº«ä½“ååº”ï¼šå¤±çœ ï¼Œå‘çƒ§ï¼Œèƒƒç—…ï¼Œå¤´ç–¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä»·å€¼ç¼ºå¤±ï¼šå¤±è½ï¼Œæ˜“æ„Ÿäººç¾¤ï¼šå·¥ä½œå¾—ä¸åˆ°å›æŠ¥å’Œè®¤å¯æ—¶ã€æ‰€åšäº‹æƒ…ä¸è‡ªå·±çš„ä»·å€¼è§‚å‘ç”Ÿå†²çªæ—¶
&lt;ul>
&lt;li>å¿ƒç†ååº”ï¼šçŸ­æœŸä¼šæœ‰æŠ±æ€¨å’Œæ„¤æ€’çš„è¡¨ç°ï¼Œå·¥ä½œæ²¡åŠ¨åŠ›&lt;/li>
&lt;li>èº«ä½“ååº”ï¼šè¡ŒåŠ¨é€Ÿåº¦ä¸‹é™&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h1 id="å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨&lt;/h1>
&lt;p>å½“æˆ‘ä»¬è‡ªå·±æˆ–è€…å…¶ä»–äººé™·å…¥åˆ°ä¸ç†æƒ³çš„å·¥ä½œçŠ¶æ€ä¸­ï¼Œæ‰¾åˆ°æˆ‘ä»¬å¯»æ±‚å¸®åŠ©æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥è¯†åˆ«é—®é¢˜å¹¶ä½œå‡ºåŠªåŠ›æ”¹å–„ã€‚&lt;/p>
&lt;h2 id="æ­¥éª¤-1çŠ¶æ€è¯„ä¼°">æ­¥éª¤ 1ï¼šçŠ¶æ€è¯„ä¼°&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>å¯¹äºå·¥ä½œçŠ¶æ€çœ‹èµ·æ¥æ¯”è¾ƒå¥½çš„äººå¯ä»¥è¿™æ ·æé—®ï¼šâ€œä½ è§‰å¾—ç°åœ¨çš„å·¥ä½œçŠ¶æ€å¯¹ä½ æ¥è¯´ï¼Œåœ¨æ–°é²œæ„Ÿã€æŒæ§æ„Ÿå’Œæ»¡è¶³æ„Ÿæ–¹é¢åˆ†åˆ«å¯ä»¥æ‰“å¤šå°‘åˆ†ï¼ˆ1-10 åˆ†ï¼‰ï¼Ÿå¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„çœŸå®æ„Ÿå—ï¼Œåœ¨è¿™ä¸‰æ–¹é¢æ‰“ä¸ªåˆ†ã€‚â€&lt;/p>
&lt;ul>
&lt;li>æ„Ÿåˆ°å·¥ä½œæ–°é²œã€å¿«ä¹æœ‰è¶£ï¼›&lt;/li>
&lt;li>å¯¹å·¥ä½œæœ‰æŒæ§æ„Ÿï¼Œèƒ½ä½“éªŒåˆ°æˆå°±æ„Ÿï¼›&lt;/li>
&lt;li>å·¥ä½œç»™ä½ å¸¦æ¥æ»¡è¶³æ„Ÿå’Œå¹¸ç¦æ„Ÿï¼›&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¯¹äºå·¥ä½œçŠ¶æ€çœ‹èµ·æ¥ä¸å¥½çš„äººå¯ä»¥è¿™æ ·æé—®ï¼šâ€œæƒ…ç»ªå¯ä»¥åæ˜ æˆ‘ä»¬åœ¨å·¥ä½œä¸­é¢ä¸´çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æƒ…ç»ªçš„è‡ªè¯„ï¼Œäº†è§£æˆ‘ä»¬å·¥ä½œä¸­çš„ä¸»è¦é—®é¢˜åœ¨å“ªé‡Œï¼Œå¯ä»¥æ ¹æ®ä½ ç°åœ¨çš„çœŸå®æ„Ÿå—ï¼Œåœ¨ä»¥ä¸‹ä¸‰ä¸ªæƒ…ç»ªæ–¹é¢åˆ†åˆ«æ‰“ä¸ªåˆ†ï¼ˆ1-10 åˆ†ï¼‰ã€‚â€&lt;/p>
&lt;ul>
&lt;li>å¯¹å·¥ä½œæ„Ÿåˆ°åŒå€¦ã€æä¸èµ·æ¥å…´è¶£ï¼›&lt;/li>
&lt;li>å¯¹å·¥ä½œæ„Ÿåˆ°ç„¦è™‘ã€ç¼ºå°‘æŒæ§æ„Ÿã€ç»å¸¸æ„Ÿåˆ°ä¸å®‰ï¼›&lt;/li>
&lt;li>å¯¹å·¥ä½œæ„Ÿåˆ°å¤±è½ã€ç¼ºå°‘ä»·å€¼æ„Ÿï¼›&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>å…¸å‹æ‰“åˆ†ç»„åˆ&amp;amp;çŠ¶æ€åˆ¤æ–­&lt;/p>
&lt;ul>
&lt;li>å…´è¶£é«˜ï¼Œèƒ½åŠ›ä½ï¼Œä»·å€¼è¿˜å¯ä»¥ï¼šå¤„äºèµ·æ­¥å‘å±•æœŸï¼Œå› ä¸ºå…´è¶£æ˜¯åœ¨çš„ï¼Œæ„å‘³ç€æ„¿æ„æŒç»­åœ°æŠ•å…¥å’Œå­¦ä¹ ï¼Œæœªæ¥ä»æœ‰è¾ƒå¤§å‘å±•ç©ºé—´ï¼Œå½“ä¸‹éœ€è¦é‡ç‚¹åšçš„æ˜¯å…³æ³¨èƒ½åŠ›çš„æå‡ã€‚&lt;/li>
&lt;li>å…´è¶£ä½ï¼Œä½†æ˜¯èƒ½åŠ›å’Œä»·å€¼å›æŠ¥ç›¸å¯¹é«˜ï¼šå¤„äºå¹³å°æœŸï¼Œå¾ˆå¤šèŒåœºè€å‘˜å·¥ä¼šæœ‰è¿™æ ·çš„æ„Ÿè§‰ï¼Œå…´è¶£ä¸€èˆ¬ï¼Œä½†æ˜¯èƒ½ hold ä½å½“å‰çš„å·¥ä½œï¼Œä»·å€¼å›æŠ¥ä¹Ÿä¸é”™ï¼Œé€šå¸¸è¿™ä¸ªæ—¶å€™å‘˜å·¥çŸ­æœŸä¼šç›¸å¯¹ç¨³å®šï¼Œå› ä¸ºå·¥ä½œä¸­èƒ½å¤Ÿæ‹¿åˆ°è‡ªå·±æƒ³è¦çš„ä»·å€¼ï¼Œå› æ­¤æš‚æ—¶ä¸ä¼šæœ‰å˜åŒ–ï¼Œä½†å› ä¸ºå¯¹å·¥ä½œå·²ç»äº§ç”Ÿäº†å€¦æ€ çš„æ„Ÿè§‰ï¼ŒèŒä¸šå‘å±•ä¼šé™·å…¥ä¸€æ®µåœæ»çš„é˜¶æ®µï¼Œæœªæ¥çš„ä¸Šå‡å’Œæˆé•¿ä¼šç›¸å¯¹å—é™åˆ¶ï¼Œéœ€è¦æ’¬åŠ¨æ–°çš„å…´è¶£å’Œä»·å€¼å¢é•¿ç‚¹ï¼Œæ‰èƒ½è¿›é˜¶åˆ°æ–°çš„é˜¶æ®µã€‚&lt;/li>
&lt;li>å…´è¶£é«˜ï¼Œèƒ½åŠ›ä¹Ÿè¿˜å¯ä»¥ï¼Œä½†ä»·å€¼ä½ï¼šè™½ç„¶å¯¹å·¥ä½œæœ‰å…´è¶£ä¹Ÿèƒ½èƒœä»»ï¼Œä½†å¾—åˆ°çš„ä»·å€¼æ— æ³•ä»¤è‡ªå·±æ»¡è¶³æˆ–è€…è¯´ä¸è‡ªå·±å†…å¿ƒçœŸå®æƒ³è¦çš„æœ‰ä¸€å®šå·®è·ï¼Œè¿™ä¸ªä»·å€¼ä¸ä¸€å®šæŒ‡ç‰©è´¨å›æŠ¥ï¼Œä¹ŸæŒ‡ç²¾ç¥å’Œå¿ƒç†éœ€æ±‚ä¸Šçš„æ»¡è¶³ï¼Œæ¯”å¦‚æ˜¯å¦æœ‰æ„ä¹‰æ„Ÿï¼Œæ˜¯å¦è¢«è®¤å¯ï¼Œæ˜¯å¦èƒ½å¤Ÿä½“éªŒåˆ°è‡ªå·±æƒ³è¦çš„äººé™…å…³ç³»ã€‚è¿™ä¸ªæ—¶å€™é€šå¸¸éœ€è¦æ¾„æ¸…ä¸‹è‡ªå·±æƒ³è¦çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Œç„¶åå†æ ¹æ®è‡ªå·±æƒ³è¦çš„ä»·å€¼å°è¯•è½¬æ¢æ–¹å‘ï¼Œæˆ–è€…åœ¨åŸæœ‰çš„å·¥ä½œä¸Šé“¾æ¥ã€æ’¬åŠ¨æ›´å¤šä»·å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;p>åˆ’é‡ç‚¹ï¼š
å¥½çš„èŒä¸šç”Ÿæ¶¯æ˜¯èƒ½å¤ŸæŒç»­ä¸æ–­åœ°æ‰¾åˆ°å…´è¶£ã€æå‡èƒ½åŠ›ã€å…‘æ¢ä»·å€¼ï¼Œé€šå¸¸ 2-3 å¹´æ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œç„¶åæ—¢æœ‰äº‹æƒ…å¯¹æˆ‘ä»¬çš„å¸å¼•åŠ›ä¼šä¸‹é™ï¼Œè¿™æ˜¯å®¢è§‚è§„å¾‹ï¼Œæˆ‘ä»¬è¦ä¸æ–­æ‰¾åˆ°æ–°çš„äº‹æƒ…ã€æ–°çš„å…´è¶£ç‚¹å’Œä»·å€¼å¢é•¿ç‚¹ï¼Œè®©æ¯ä¸ªé˜¶æ®µç§¯ç´¯å’Œä¿®ç‚¼çš„èƒ½åŠ›éƒ½æ˜¯åœ¨ä¸ºä¸‹ä¸ªé˜¶æ®µé“ºè·¯ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯æˆ‘ä»¬ä¸æ–­åæ€è‡ªå·±ã€å¹¶ä¸”å’Œå‘¨å›´ç¯å¢ƒäº’åŠ¨ã€å¹¶ä¸”åœ¨äº’åŠ¨ä¸­æŒç»­è°ƒé€‚è‡ªå·±çš„è¿‡ç¨‹ã€‚&lt;/p>
&lt;h2 id="æ­¥éª¤-2æ¢è®¨å’Œåæ€">æ­¥éª¤ 2ï¼šæ¢è®¨å’Œåæ€&lt;/h2>
&lt;p>åœ¨å®Œæˆæ­¥éª¤ 1 çš„æ‰“åˆ†ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç…§åˆ†æ•°æ¥åˆ†æç°çŠ¶ï¼Œå¹¶æ€è€ƒèƒ½å¤Ÿå¸¦æ¥ç§¯ææ”¹å˜çš„å…³é”®é©±åŠ¨å› ç´ ï¼Œå¯ä»¥é—®è‡ªå·±/é—®å¯¹æ–¹çš„é—®é¢˜ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·çš„åˆ†æ•°ï¼Ÿ&lt;/li>
&lt;li>åˆ°åº•ä»€ä¹ˆåœ°æ–¹è®©ä½ è§‰å¾—ä¸å¤Ÿèˆ’æœï¼Ÿ&lt;/li>
&lt;li>è§‰å¾—è‡ªå·±åœ¨å“ªäº›æ–¹é¢å¯ä»¥æå‡ï¼Ÿ&lt;/li>
&lt;li>æœ‰æ²¡æœ‰å“ªä¸ªéƒ¨åˆ†ï¼Œå¦‚æœä¸€æ—¦å®ƒæå‡ï¼Œå°±èƒ½ç»™ä½ å¸¦æ¥å…¨å±€æå‡å‘¢ï¼Ÿ&lt;/li>
&lt;li>ç¯å¢ƒä¸­æœ‰å“ªäº›èµ„æºæ˜¯è‡ªå·±å¯ä»¥åˆ©ç”¨çš„ï¼Ÿ&lt;/li>
&lt;/ul>
&lt;h2 id="æ­¥éª¤-3æå‡ºæ”¹å–„ç­–ç•¥">æ­¥éª¤ 3ï¼šæå‡ºæ”¹å–„ç­–ç•¥&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>å¦‚æœæ˜¯å…´è¶£ä¸è¶³ï¼šå…´è¶£å…¶å®ä¸å–å†³äºå¤–åœ¨ï¼Œè€Œæ˜¯ä¸€ç§è‡ªæˆ‘ç®¡ç†çš„èƒ½åŠ›ï¼Œå…´è¶£åæ˜ çš„æ˜¯æˆ‘ä»¬å¯¹ä¸€ä»¶äº‹æƒ…çš„â€œè®¤çŸ¥â€ï¼Œè€Œæˆ‘ä»¬å¦‚ä½•â€œè®¤çŸ¥â€ä¸€ä»¶äº‹æƒ…ï¼Œæ˜¯å¯ä»¥è¢«æ”¹å˜çš„ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>â€œæŒ–æ˜â€å·¥ä½œä¸­çš„å…´è¶£ç‚¹ï¼šæ‰€æœ‰å·¥ä½œéƒ½å¯ä»¥å‘å±•å‡ºå…´è¶£ç‚¹ï¼Œå…³é”®æ˜¯æ‰¾åˆ°æˆ‘ä»¬ä¸ªäººçš„ä»·å€¼è§‚å’Œå½“å‰ç¯å¢ƒä»¥åŠå½“å‰å·¥ä½œå¯ä»¥é“¾æ¥çš„éƒ¨åˆ†ï¼Œå…´è¶£éƒ½æ˜¯å¯ä»¥æŒ–æ˜å’ŒåŸ¹å…»çš„ã€‚é€šè¿‡åˆ»æ„ç»ƒä¹ ï¼Œæˆ‘ä»¬èƒ½å¤ŸåŸ¹å…»è‡ªå·±ä»ä¸€ä»¶äº‹æƒ…ä¸­æ‰¾åˆ°ä¹è¶£çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç»™è‡ªå·±æå‡ºæ›´é«˜ã€æ›´å¿«ã€æ›´å¼ºã€æ›´æ·±ã€æ›´å¹¿çš„è¦æ±‚ï¼šå½“æŠŠç°æœ‰å·¥ä½œçš„æ ‡å‡†æé«˜æ—¶ï¼Œæœ‰æ—¶ä¼šæ¿€å‘å‡ºæˆ‘ä»¬æ–°çš„æŒ‘æˆ˜æ¬²æœ›å’Œå…´è¶£ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‘æœ‰èƒ½åŠ›çš„å…´è¶£é¢†åŸŸè¿›è¡Œè§„åˆ’ï¼šå‡èŒã€è½¬å²—ã€‚è½¬å‹ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œéœ€è¦æŒç»­åœ°ç§¯ç´¯å’Œæœ‰ç›®çš„åœ°è¿›è¡Œè§„åˆ’ã€‚å¦‚æœç¡®å®šå½“å‰é¢†åŸŸä¸æ˜¯è‡ªå·±æ„Ÿå…´è¶£çš„ï¼Œå¯ä»¥è¯„ä¼°ä¸€ä¸‹å“ªäº›æ˜¯è‡ªå·±æ„Ÿå…´è¶£å¹¶ä¸”å…·å¤‡èƒœä»»åŠ›çš„ï¼Œç„¶åå†å»è®¾è®¡å’Œè§„åˆ’è‡ªå·±çš„è½¬å‹è·¯å¾„ï¼ŒåŒæ—¶é‡ç‚¹çœ‹ä¸€ä¸‹ï¼Œæœ‰å“ªäº›æ–¹å¼ï¼Œå¯ä»¥è®©è‡ªå·±çš„èƒ½åŠ›åœ¨å½“å‰çš„å·¥ä½œä¸­å¾—åˆ°ç§¯ç´¯å’Œè®­ç»ƒï¼Œæˆ–è€…åœ¨å½“å‰å·¥ä½œä¸­èƒ½å¤Ÿç§¯ç´¯å“ªäº›èµ„æºï¼Œè®©è‡ªå·±å¯ä»¥æ›´é¡ºåˆ©åœ°è¿‡æ¸¡åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœæ˜¯èƒ½åŠ›ä¸è¶³ï¼šé€‚å½“è°ƒæ•´é¢„æœŸï¼Œæ­£ç¡®ä½¿ç”¨èƒ½åŠ›ç®¡ç†ç­–ç•¥&lt;/p>
&lt;ul>
&lt;li>é€‚å½“è°ƒæ•´é¢„æœŸï¼šåˆç†è¯„ä¼°è‡ªå·±çš„èƒ½åŠ›å’Œèµ„æºï¼Œé€‚å½“è°ƒæ•´å·¥ä½œç›®æ ‡ï¼Œé¿å…å®Œç¾ä¸»ä¹‰å€¾å‘ã€‚&lt;/li>
&lt;li>è¯„ä¼°è‡ªå·±å½“ä¸‹èƒ½åŠ›çš„è¾¹ç•Œï¼Œå¯¹äºè¶…å‡ºèƒ½åŠ›èŒƒå›´çš„äº‹æƒ…ï¼Œå¯»æ±‚åˆ«äººçš„å¸®åŠ©ï¼Œèƒ½å¤Ÿå¯»æ±‚å¸®åŠ©ï¼Œä¹Ÿæ˜¯èŒåœºä¸­ä¸€é¡¹å…³é”®çš„èƒ½åŠ›ï¼Œè¿™æ ·å¯ä»¥é¿å…è‡ªå·±å‡ºç°å‹åŠ›çˆ†æ£šï¼ŒåŒæ—¶ä¹Ÿä¸è‡³äºæŠŠäº‹æƒ…æç ¸ã€‚&lt;/li>
&lt;li>ä½¿ç”¨æ­£ç¡®çš„èƒ½åŠ›ç®¡ç†ç­–ç•¥ï¼ˆè¿™ç‚¹éå¸¸éå¸¸éå¸¸å…³é”®ï¼‰ã€‚
&lt;ul>
&lt;li>äººçš„æˆé•¿æ˜¯çº¿æ€§ç¼“æ…¢çš„ï¼Œè€Œæœ‰æ—¶å€™äº‹æƒ…çš„éš¾åº¦ä¼šè¶…å‡ºæˆ‘ä»¬å½“ä¸‹çš„èƒ½åŠ›æ°´å¹³ï¼Œå› æ­¤ç„¦è™‘å’Œå±æœºæ„Ÿå°±ä¼šäº§ç”Ÿã€‚è¿™æ—¶å€™æœ€ç¬¨çš„æ–¹å¼å°±æ˜¯ä¸€ä¸ªäººä¼å›¾é€šè¿‡ä¸ªäººçš„å­¦ä¹ å’ŒåŠªåŠ›æ¥è§£å†³é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åšåŠ æ³•ï¼Œè¿™ç§ä¼šè®©è‡ªå·±é™·å…¥â€œç–²äºåº”ä»˜â€ã€â€œäº‹æƒ…è¶Šåšè¶Šå¤šâ€ã€â€œè¶Šæ¥è¶Šå¿™â€çš„çŠ¶æ€ï¼Œå› ä¸ºèƒ½åŠ›æå‡çš„é€Ÿåº¦å’Œè§£å†³é—®é¢˜çš„é€Ÿåº¦è·Ÿä¸ä¸Šè¦æ±‚ï¼Œå¯¼è‡´ä¸æ–­äº§ç”Ÿæ›´å¤šçš„é—®é¢˜ï¼Œé—®é¢˜è¶Šç§¯è¶Šå¤šï¼Œè‡ªå·±çš„çŠ¶æ€ä¹Ÿè¶Šæ¥è¶Šå·®ã€‚&lt;/li>
&lt;li>æœ€å¥½çš„èƒ½åŠ›ç®¡ç†ç­–ç•¥æ˜¯ï¼šå‡-ä¹˜-é™¤-åŠ 
&lt;ul>
&lt;li>å…ˆåšå‡æ³•ï¼Œçœ‹å“ªäº›äº‹æƒ…å…¶å®æ˜¯å¯ä»¥ä¸ç”¨åšçš„ï¼Œæˆ–è€…å¯ä»¥æˆæƒå…¶ä»–äººæ¥åšçš„ï¼Œç»™è‡ªå·±ç•™å‡ºæ›´å¤šæ—¶é—´å»åšé«˜æ æ†çš„æ€è€ƒå’Œè§„åˆ’ï¼Œè®©è‡ªå·±ä»æ—‹è½¬çš„é™€èºçŠ¶æ€å…ˆæŠ½èº«å‡ºæ¥ã€‚&lt;/li>
&lt;li>å†åšä¹˜æ³•ï¼Œé¢å¯¹æˆ‘ä»¬é è‡ªå·±æ— åŠ›è§£å†³çš„äº‹æƒ…ï¼Œå¼•å…¥æ›´å¤šçš„äººè¿›æ¥ï¼Œåˆ©ç”¨é›†ä½“çš„æ™ºæ…§å’Œèµ„æºè§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯è®©è‡ªå·±æˆä¸ºå¢é•¿çš„ç“¶é¢ˆã€‚&lt;/li>
&lt;li>å†åšé™¤æ³•ï¼Œæ ¹æ®è¦å®Œæˆçš„ç›®æ ‡ï¼Œè¿›è¡Œäº‹æƒ…çš„åˆ†è§£ï¼Œæ‰¾åˆ°åˆé€‚çš„äººå»åšå…·ä½“çš„äº‹æƒ…ã€‚&lt;/li>
&lt;li>æœ€åæ‰æ˜¯åšåŠ æ³•ï¼Œä¸æ–­å­¦ä¹ å’Œæå‡å„ç§çŸ¥è¯†å’ŒæŠ€èƒ½ï¼Œè®©è‡ªå·±çš„ç»éªŒå’Œèƒ½åŠ›æå‡ä¸Šæ¥ï¼Œè¿™æ˜¯éœ€è¦æ—¶é—´çš„ç§¯ç´¯çš„ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœæ˜¯ä»·å€¼ä¸è¶³ï¼šé‡æ–°å®¡è§†ç°æœ‰å·¥ä½œçš„ä»·å€¼ï¼ŒåŒæ—¶é“¾æ¥æ›´å¤šä»·å€¼&lt;/p>
&lt;ul>
&lt;li>åˆ—å‡ºè‡ªå·±å½“ä¸‹é˜¶æ®µæœ€å¸Œæœ›åœ¨å·¥ä½œä¸­æ‹¿åˆ°çš„ä»·å€¼ï¼Œæ˜¯ç‰©è´¨å›æŠ¥ã€ç²¾ç¥è®¤å¯ã€æ˜¯å­¦ä¹ çš„æœºä¼šã€è¿˜æ˜¯é“¾æ¥æ›´å¤šçš„ç¤¾ä¼šèµ„æºï¼Ÿ&lt;/li>
&lt;li>æ€è€ƒç°æœ‰å·¥ä½œå¦‚ä½•èƒ½å¤Ÿäº§ç”Ÿã€é“¾æ¥ã€æˆ–è€…è¯´æ’¬åŠ¨æ›´å¤šä»·å€¼ï¼›èº«è¾¹æ€»æ˜¯æœ‰è¶³å¤Ÿçš„æœºä¼šè®©æˆ‘ä»¬å»å®ç°è‡ªå·±çš„ä»·å€¼ã€‚&lt;/li>
&lt;li>æ¢ä¸åŒçš„è§†è§’ã€è§’åº¦çœ‹äº‹æƒ…çš„ä»·å€¼ï¼Œæœ‰æ—¶å€™å…¶å®æˆ‘ä»¬çš„æ ¸å¿ƒä»·å€¼å·²ç»è¢«æ»¡è¶³äº†ï¼Œä½†äººå¾€å¾€å®¹æ˜“é«˜ä¼°æš‚æ—¶æœªè¢«æ»¡è¶³çš„ä»·å€¼ï¼ŒåŒæ—¶å¿½ç•¥å’Œä½ä¼°å·²ç»æ»¡è¶³çš„ä»·å€¼ã€‚é€šè¿‡é‡æ–°è¯„ä¼°å’Œç†è§£ä¸€ä»½å·¥ä½œçš„ä»·å€¼ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å·²ç»è¢«æ»¡è¶³çš„ä»·å€¼ã€‚&lt;/li>
&lt;li>åœ¨æ›´å¤§çš„æ—¶é—´æ¡†æ¶å†…è¯„ä¼°ç°æœ‰å·¥ä½œçš„ä»·å€¼ï¼Œäººä»¬ç»å¸¸ä»…åœ¨ä¸€ä¸ªè¾ƒçŸ­çš„æ—¶é—´æ¡†æ¶å†…è¯„ä»·äº‹æƒ…çš„ä»·å€¼ï¼Œè€Œå¿½ç•¥é•¿æœŸä»·å€¼ã€‚æˆ‘ä»¬é™¤äº†çœ‹é™æ€çš„å½“ä¸‹çš„ä»·å€¼ï¼Œä¹Ÿè¦çœ‹æœªæ¥çš„ä»·å€¼å˜åŒ–è¶‹åŠ¿ã€‚&lt;/li>
&lt;li>æ¢ç´¢è½¬æ¢å·¥ä½œçš„å¯èƒ½æ€§ï¼šå¦‚æœç»è¿‡ä»¥ä¸Šæ–¹é¢çš„åŠªåŠ›ï¼Œä»ç„¶è®¤ä¸ºå·¥ä½œä»·å€¼ä¸æ˜¯è‡ªå·±æƒ³è¦çš„ï¼Œå¯ä»¥åŠªåŠ›æ™‹å‡åˆ°ä¸‹ä¸€é˜¶æ®µçš„å²—ä½ï¼Œæˆ–è½¬å²—åˆ°å…¶ä»–å·¥ä½œä¸Šã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœæ˜¯ä¸‰æ–¹é¢éƒ½æ¬ ç¼ºï¼šæŒ–æ˜å…´è¶£ã€åˆ©ç”¨ç°æœ‰æœºä¼šå’Œå¹³å°æå‡èƒ½åŠ›&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å…·ä½“è¯´ï¼Œæœ‰ä¸¤ä¸ªå»ºè®®ï¼š&lt;/p>
&lt;ul>
&lt;li>æŒ–æ˜è‡ªå·±çš„å…´è¶£ç‚¹ï¼šä¼˜å…ˆä»æˆ‘ä»¬è‡ªèº«æœ€å®¹æ˜“å½±å“çš„éƒ¨åˆ†å¼€å§‹æ“ä½œï¼Œä¹Ÿå°±æ˜¯ç®¡ç†è‡ªå·±çš„å…´è¶£ç‚¹ï¼Œæå‡è‡ªå·±å‘ç°å…´è¶£çš„èƒ½åŠ›ï¼Œå¯ä»¥å¤šæƒ³æƒ³è‡ªå·±åœ¨åšå“ªäº›äº‹æƒ…çš„æ—¶å€™æœ€å¿«ä¹ï¼Œç°åœ¨çš„å·¥ä½œæœ‰æ²¡æœ‰å“ªäº›æ–¹é¢èƒ½è®©æˆ‘ä»¬æœ‰å¿«ä¹çš„ä½“éªŒã€‚&lt;/li>
&lt;li>åŒæ—¶å…³æ³¨èƒ½åŠ›æå‡ï¼šåœ¨â€œä¸‰å¶è‰â€æ¨¡å‹ä¸­ï¼Œåªæœ‰å…·å¤‡äº†èƒ½åŠ›æˆ‘ä»¬æ‰èƒ½å…‘æ¢ä»·å€¼ï¼Œè€Œä»·å€¼åˆå¯ä»¥ä¿ƒè¿›æˆ‘ä»¬å¯¹ä¸€ä»¶äº‹æƒ…äº§ç”Ÿå…´è¶£ï¼Œå› æ­¤å…ˆæå‡èƒ½åŠ›ï¼Œå¹¶ä¸”é€šè¿‡èƒ½åŠ›é“¾æ¥ä»·å€¼ï¼Œä¹Ÿæ˜¯æ”¹å˜çš„å…³é”®ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨èŒä¸šå‘å±•è¿‡ç¨‹ä¸­ï¼Œå¯¹æˆ‘ä»¬å½±å“æœ€å¤§çš„å…¶å®æ˜¯ä¸€äº›é€šç”¨èƒ½åŠ›ï¼Œæ¯”å¦‚æ²Ÿé€šèƒ½åŠ›ã€åˆ†æé—®é¢˜æœ¬è´¨çš„èƒ½åŠ›ã€è¡¨è¾¾å’Œè¾“å‡ºè§‚ç‚¹çš„èƒ½åŠ›ã€å½±å“åˆ«äººçš„èƒ½åŠ›ã€é¡¹ç›®ç®¡ç†èƒ½åŠ›ç­‰ç­‰ï¼Œè€Œè¿™äº›èƒ½åŠ›çš„ä¿®ç‚¼å’ŒåŸ¹å…»æ˜¯ä¸åˆ†å²—ä½å’ŒèŒä¸šçš„ï¼Œå› æ­¤å¦‚æœåœ¨å…´è¶£ã€èƒ½åŠ›ã€ä»·å€¼éƒ½ç¼ºå¤±ã€æˆ‘ä»¬è‡ªèº«å°šä¸”ä¸å…·å¤‡é€‰æ‹©èµ„æ ¼å’Œè®®ä»·èƒ½åŠ›çš„æ—¶å€™ï¼Œæœ€å¥½çš„é€‰æ‹©æ°æ°æ˜¯ä¸“å¿ƒäºç›®å‰å·²æœ‰çš„æœºä¼šï¼Œçœ‹çœ‹åœ¨å½“å‰çš„å²—ä½ä¸Šå¦‚ä½•æå‡è‡ªå·±çš„èƒ½åŠ›ï¼Œä»è€Œä¸ºä»¥åæ›´å¥½åœ°é“ºè·¯ã€‚è¿™æ˜¯å¯¹å¾ˆå¤šèŒåœºæ–°äººçš„å»ºè®®ã€‚&lt;/li>
&lt;/ul>
&lt;h1 id="ä½•æ—¶ç”¨">ä½•æ—¶ç”¨&lt;/h1>
&lt;p>å“ªäº›æ—¶å€™å¯ä»¥åˆ©ç”¨â€œä¸‰å¶è‰â€æ¨¡å‹å±•å¼€è°ˆè¯å‘¢ï¼Ÿä¸å¦¨ä»ä»¥ä¸‹åœºæ™¯å…¥æ‰‹ï¼Œç›¸åŒçš„ç›®æ ‡éƒ½æ˜¯æŒ–æ˜ä¸ªäººçœŸå®çš„æ„Ÿå—å’ŒçŠ¶æ€ï¼ŒæŒ–æ˜å†…åœ¨åŠ¨æœºï¼Œæ‰¾åˆ°æ”¹å–„çš„çªç ´å£ï¼š&lt;/p>
&lt;ul>
&lt;li>ç»©æ•ˆæ²Ÿé€š&lt;/li>
&lt;li>è½¬å²—è°ˆè¯&lt;/li>
&lt;li>ç¦»èŒæŒ½ç•™&lt;/li>
&lt;li>æ—¥å¸¸å®šæœŸ 1-on-1&lt;/li>
&lt;li>å‘˜å·¥è°ƒç ”ç»“æŸåçš„æ·±åº¦ä¸ªäººè®¿è°ˆ&lt;/li>
&lt;li>ä¸å®šæœŸä¸ªäººæ£€æŸ¥å’Œå›é¡¾åæ€&lt;/li>
&lt;/ul>
&lt;h1 id="å¯å‘">å¯å‘&lt;/h1>
&lt;p>å¯¹ä¸ªäººçš„å¯å‘ï¼š&lt;/p>
&lt;ul>
&lt;li>èŒä¸šå®šä½è¦ç»“åˆå…´è¶£å’Œèƒ½åŠ›ï¼Œåªæœ‰å…´è¶£æ²¡èƒ½åŠ›é¡¶å¤šæ˜¯çˆ±å¥½ï¼Œæœ‰èƒ½åŠ›ä½†æ²¡æœ‰å…´è¶£ä¹Ÿä¸å¯æŒç»­å‘å±•&lt;/li>
&lt;li>åšæœªæ¥ 2 å¹´å·¦å³çš„å‘å±•è§„åˆ’ï¼Œæœ€å¥½ 2-3 å¹´ä¸Šä¸€ä¸ªå°é˜¶ï¼Œå¼€å¯ä¸‹ä¸€è½®å¾ªç¯&lt;/li>
&lt;li>åŸ¹å…»ä»ç§¯æçš„è§†è§’æ„å»ºäº‹æƒ…ä»·å€¼çš„èƒ½åŠ›ï¼Œæ‹¥æœ‰ä¸€åŒå–„äºå‘ç°ç¾çš„çœ¼ç›
å¯¹ç®¡ç†è€…çš„å¯å‘ï¼š&lt;/li>
&lt;li>é¼“åŠ±è€å‘˜å·¥åšæ–°äº‹ï¼Œè€äººå¸¦æ–°ä¸šåŠ¡&lt;/li>
&lt;li>ä¸åŒçš„äººã€æˆ–è€…åŒä¸€ä¸ªäººåœ¨ä¸åŒé˜¶æ®µï¼Œæ‰€è¿½æ±‚çš„ä»·å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¦å–„äºé€šè¿‡æŒ–æ˜å·¥ä½œå’Œä¸ªäººä»·å€¼é‡åˆçš„éƒ¨åˆ†ï¼Œæå‡å·¥ä½œåŠ¨åŠ›&lt;/li>
&lt;li>é™¤äº†ç‰©è´¨å›æŠ¥ï¼Œä¹Ÿè¦å»ºè®¾â€œç²¾ç¥å›æŠ¥â€ï¼Œå¦‚è®¤å¯ã€ç§¯æå¥åº·çš„å›¢é˜Ÿæ°›å›´ã€ä¸šåŠ¡çš„é•¿æœŸä»·å€¼å’Œç¤¾ä¼šä»·å€¼ã€å²—ä½èƒ½æä¾›çš„æ½œåœ¨èµ„æºå’Œæˆé•¿æœºä¼š&lt;/li>
&lt;/ul></description></item><item><title>æˆé•¿çš„æœ¬è´¨æ˜¯æ½œåŠ›å…‘ç°çš„è¿‡ç¨‹</title><link>https://example.com/p/%E6%88%90%E9%95%BF%E7%9A%84%E6%9C%AC%E8%B4%A8%E6%98%AF%E6%BD%9C%E5%8A%9B%E5%85%91%E7%8E%B0%E7%9A%84%E8%BF%87%E7%A8%8B/</link><pubDate>Sat, 29 Jan 2022 15:38:05 +0800</pubDate><guid>https://example.com/p/%E6%88%90%E9%95%BF%E7%9A%84%E6%9C%AC%E8%B4%A8%E6%98%AF%E6%BD%9C%E5%8A%9B%E5%85%91%E7%8E%B0%E7%9A%84%E8%BF%87%E7%A8%8B/</guid><description>&lt;h1 id="æˆé•¿çš„æœ¬è´¨æ˜¯æ½œåŠ›å…‘ç°çš„è¿‡ç¨‹">æˆé•¿çš„æœ¬è´¨æ˜¯æ½œåŠ›å…‘ç°çš„è¿‡ç¨‹&lt;/h1>
&lt;p>ä»»ä½•äººéƒ½æœ‰æ½œåŠ›ï¼Œæ½œåŠ›æœ‰é«˜æœ‰ä½ï¼Œæœ‰å¤§æœ‰å°ã€‚&lt;/p>
&lt;p>æ½œåŠ›æ˜¯å¾ˆå¤§ï¼Œæ¯ä¸ªäººéƒ½æœ‰å¾ˆå¤§çš„æ½œåŠ›ï¼Œåªæ˜¯å¤§éƒ¨åˆ†äººè¿˜æ²¡æœ‰è¾¾åˆ°è‡ªå·±æ½œåŠ›å…‘ç°çš„ä¸‹é™ï¼Œæ›´åˆ«è¯´ä¸Šé™ã€‚&lt;/p>
&lt;h1 id="è½¯ç´ è´¨">è½¯ç´ è´¨&lt;/h1>
&lt;p>è½¯ç´ è´¨åˆ†ä¸ºä¸‰ç±»ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>ä¸€ç±»æ˜¯æ€åº¦&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>å®ƒå¾ˆå¤šæ—¶å€™æ˜¯æ„è¯†çš„ä½“ç°ï¼Œæ¯”å¦‚ä¸»åŠ¨æ€§ã€è´£ä»»å¿ƒã€å¦è¯šã€è¿½æ±‚æè‡´ï¼Œè¿™äº›æœ¬è´¨ä¸Šéƒ½æ˜¯æ˜¯ä¸€ä¸ªæ€åº¦ã€‚&lt;/p>
&lt;ol start="2">
&lt;li>&lt;strong>ç¬¬äºŒä¸ªæ˜¯ç‰¹è´¨&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>ç‰¹è´¨æ˜¯æ¯ä¸ªäººçš„æ€§æ ¼ç‰¹ç‚¹ï¼Œæœ‰äº›å¯ä»¥æ”¹å˜çš„ï¼Œæœ‰äº›æ˜¯æ¯”è¾ƒå›ºåŒ–çš„ã€‚è¿™ä¸ªäººæ˜¯ä¹è§‚è¿˜æ˜¯æ‚²è§‚ï¼Œæœ‰éŸ§æ€§ï¼Œè¿˜æ˜¯æœ‰é‡å¿ƒè¿˜æ˜¯ç›¸å¯¹ä½›ä¸€ç‚¹ï¼Œæ˜¯ä¸æ˜¯èªæ˜ç­‰ã€‚&lt;/p>
&lt;p>å…¶å®ç‰¹è´¨æ²¡æœ‰å¥½å’Œåï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±æ“…é•¿çš„åœ°æ–¹å’Œè‡ªå·±ä¸æ“…é•¿çš„åœ°æ–¹ï¼Œä¸»è¦çœ‹è‡ªå·±èƒ½å¦æ¸…é†’è®¤è¯†åˆ°ã€‚&lt;/p>
&lt;ol start="3">
&lt;li>&lt;strong>æœ€åæ˜¯èƒ½åŠ›&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>èƒ½åŠ›æ˜¯å­¦ä¹ èƒ½åŠ›æŠ€æœ¯åˆ¤æ–­åŠ›æ²Ÿé€šè¡¨è¾¾èƒ½åŠ›ï¼Œè¿™äº›å¯ä»¥é€šè¿‡è®­ç»ƒæé«˜çš„ã€‚&lt;/p>
&lt;h1 id="è½¯ç´ è´¨å†³å®šæˆ‘ä»¬çš„ä¸Šä¸‹é™">è½¯ç´ è´¨å†³å®šæˆ‘ä»¬çš„ä¸Šä¸‹é™&lt;/h1>
&lt;p>ä¸‹é™ï¼Œæ„æ€å°±æ˜¯è¯´æ½œåŠ›æœ€å°‘å¯ä»¥å…‘ç°å‡ºæ¥çš„ä¸œè¥¿ï¼›ä¸Šé™æ˜¯ç†è®ºçš„æœ€é«˜å€¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å¤©èŠ±æ¿ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬çš„è½¯ç´ è´¨ï¼Œæœ‰äº›å†³å®šä¸‹é™æœ‰äº›å†³å®šä¸Šé™ã€‚æˆ‘ä»¬è¦æ¸…é†’çš„æ„è¯†åˆ°æ‰€è°“çš„è½¯ç´ è´¨çš„ä¸œè¥¿ï¼Œå“ªäº›æ˜¯åŸºç¡€å†³å®šä¸‹é™è¦ä¿è¯å¥½ï¼Œå“ªäº›æ˜¯ä¸Šé™çš„ä¸œè¥¿è¦æŒ–æ˜å¥½ã€‚&lt;/p>
&lt;h2 id="ä¸‹é™çš„è½¯ç´ è´¨">ä¸‹é™çš„è½¯ç´ è´¨&lt;/h2>
&lt;p>æ­£ç›´ã€è¯šä¿¡å’Œè´£ä»»å¿ƒå¼ºã€‚&lt;/p>
&lt;p>èµ°æ­£é“è€Œä¸èµ°åé—¨ï¼Œå®ˆæ­£åˆå¿ƒï¼Œæ‰æ‰å®å®æŠŠäº‹æƒ…åšå¥½ï¼›è´£ä»»å¿ƒå¼ºï¼Œäº¤ç»™ä½ çš„äº‹æƒ…æ˜¯ä¸æ˜¯åŠªåŠ›åšå¥½ï¼Œè¶³å¤Ÿè‡ªå¾‹ã€‚èƒ½åšåˆ°ä¸Šè¿°å‡ ç‚¹ï¼Œæ½œåŠ›å…‘ç°åŸºæœ¬æ²¡æœ‰é—®é¢˜ã€‚å¦å¤–è¿˜æœ‰åç‰¹è´¨ä¸€äº›çš„èªæ˜å’Œçƒ­çˆ±æŠ€æœ¯ï¼Œèƒ½ä¸èƒ½é€šè¿‡ä¸»åŠ¨ç§¯ææœ‰è´£ä»»å¿ƒï¼Œå¹¶ä¸”ç”¨æ­£ç¡®éæŠ•æœºçš„æ–¹å¼æŠŠäº‹æƒ…åšå¥½ã€‚&lt;/p>
&lt;p>å¦‚æœéƒ½æ‰æ‰å®å®çš„åšå¥½ï¼Œä¸‹é™éƒ½æ˜¯æ¯”è¾ƒé«˜çš„ã€‚&lt;/p>
&lt;h2 id="ä¸Šé™çš„è½¯ç´ è´¨">ä¸Šé™çš„è½¯ç´ è´¨&lt;/h2>
&lt;ol>
&lt;li>ç¬¬ä¸€ä¸ªè¿½æ±‚æè‡´ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¿™å¥è¯æèµ·æ¥å¾ˆç®€å•ï¼Œåšèµ·æ¥å¾ˆéš¾å¾ˆéš¾ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½çªç ´å¤©èŠ±æ¿ï¼Œå°±æ˜¯è¿½æ±‚æè‡´ã€‚ä½†æè‡´ä¸ç­‰äºå®Œç¾ï¼Œä¸ç­‰äºè¿‡åº¦è®¾è®¡ã€‚æè‡´æ˜¯åœ¨å½“å‰æœ‰é™æƒ…å†µä¸‹ä½ æ˜¯ä¸æ˜¯åŠªåŠ›æŠŠè¿™ä»¶äº‹æƒ³å¾—æ›´å¥½ï¼Œè¿˜æœ‰æ²¡æœ‰åšåˆ°æ›´å¥½çš„åœ°æ–¹ï¼ŒåŠªåŠ›æƒ³ä¼˜åŒ–ç©ºé—´åœ¨å“ªé‡Œï¼Œã€‚&lt;/p>
&lt;p>å“ªä¸ªé˜¶æ®µåšå“ªä¸ªäº‹æƒ…æ”¶ç›Šæ˜¯æœ€é«˜çš„ï¼ŒçŸ­æœŸä¸­æœŸé•¿æœŸå„è‡ªçš„è§£é‡Šæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå¹³è¡¡å¥½ï¼Œå»åŠªåŠ›åˆ¤æ–­å½“å‰æ›´ä¼˜è§£æ˜¯ä»€ä¹ˆã€‚&lt;/p>
&lt;ol start="2">
&lt;li>
&lt;p>ç¬¬äºŒï¼Œä¸»åŠ¨ç§¯æã€‚è¿™å¥è¯å¬èµ·æ¥å¾ˆç®€å•ï¼Œå®é™…è¿‡ç¨‹ä¸­ä¸»åŠ¨ç§¯ææœ‰é‡å¿ƒçš„äººå’Œç›¸å¯¹ä½›çš„äººï¼Œæœ€ç»ˆä½ ä¼šå‘ç°æ—¶é—´æ‹‰é•¿ä¸€ç‚¹ï¼Œå¤§å®¶å‘å±•åŒºåˆ«ä¼šéå¸¸å¤§ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‰©ä¸‹å°±æ˜¯å¥½å¥‡å¿ƒæœ‰éŸ§æ€§ç‹¬ç«‹æ€è€ƒå¼€æ”¾æ¸…æ™°ï¼Œå¯¹æˆåŠŸçš„æ¸´æœ›ï¼Œå…³æ³¨é•¿æœŸæ ¼å±€è¿™äº›éƒ½æ˜¯ä¸Šé™ã€‚&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Flutter åœ°ç†ä½ç½®æ’ä»¶ä½¿ç”¨æŒ‡å—</title><link>https://example.com/p/flutter-%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</link><pubDate>Thu, 27 Jan 2022 10:09:20 +0800</pubDate><guid>https://example.com/p/flutter-%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</guid><description>&lt;p>geolocator æ˜¯ä¸€ä¸ª flutter çš„åœ°ç†ä½ç½®æ’ä»¶ï¼ŒåŒæ—¶æ”¯æŒ Androidã€iOSã€web å’Œ macosã€‚&lt;/p>
&lt;h1 id="å®‰è£…">å®‰è£…&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">flutter pub add geolocator
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ä½¿ç”¨æ–¹å¼">ä½¿ç”¨æ–¹å¼&lt;/h1>
&lt;p>å®šä¹‰ä¸€ä¸ªåŸºç¡€çš„éª¨æ¶&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">NewGeoRoute&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">StatefulWidget&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">@&lt;/span>&lt;span class="n">override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">StatefulWidget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">createState&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">NewGeoRouteState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">NewGeoRouteState&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">NewGeoRoute&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">String&lt;/span> &lt;span class="n">_pos&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Future&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Position&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">_determinLocation&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">@&lt;/span>&lt;span class="n">override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="n">initState&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">super&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">initState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_determinLocation&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setState&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_pos&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">value&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">@&lt;/span>&lt;span class="n">override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Widget&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Scaffold&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">appBar:&lt;/span> &lt;span class="n">AppBar&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">title:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;åœ°ç†ä½ç½®æ¼”ç¤º&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">body:&lt;/span> &lt;span class="n">Center&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Column&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">children:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">_pos&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">CircularProgressIndicator&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;å½“å‰ä½ç½®æ˜¯ï¼š&lt;/span>&lt;span class="si">$&lt;/span>&lt;span class="n">_pos&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">floatingActionButton:&lt;/span> &lt;span class="n">FloatingActionButton&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">onPressed:&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setState&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_pos&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">await&lt;/span> &lt;span class="n">_determinLocation&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setState&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_pos&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">local&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">Icon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Icons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">location_city&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ä½¿ç”¨æ–¹å¼-1">ä½¿ç”¨æ–¹å¼&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="s1">&amp;#39;package:geolocator/geolocator.dart&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Position&lt;/span> &lt;span class="n">position&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">await&lt;/span> &lt;span class="n">Geolocator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">getCurrentPosition&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">desiredAccuracy:&lt;/span> &lt;span class="n">LocationAccuracy&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">high&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ¬æ¬¡é’ˆå¯¹ iosï¼Œéœ€è¦æ·»åŠ  plist æè¿°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;key&amp;gt;NSLocationWhenInUseUsageDescription&amp;lt;/key&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;string&amp;gt;This app needs access to location when open.&amp;lt;/string&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;key&amp;gt;NSLocationAlwaysUsageDescription&amp;lt;/key&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;string&amp;gt;This app needs access to location when in the background.&amp;lt;/string&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201271017300.png"
loading="lazy"
>&lt;/p>
&lt;h1 id="xcode-æ‰“å¼€">XCODE æ‰“å¼€&lt;/h1></description></item><item><title>Flutter WeChat Camera Picker ä½¿ç”¨</title><link>https://example.com/p/flutter-wechat-camera-picker-%E4%BD%BF%E7%94%A8/</link><pubDate>Tue, 25 Jan 2022 10:36:39 +0800</pubDate><guid>https://example.com/p/flutter-wechat-camera-picker-%E4%BD%BF%E7%94%A8/</guid><description>&lt;h1 id="flutter-wechat-camera-picker">Flutter WeChat Camera Picker&lt;/h1>
&lt;p>ä»¿å¾®ä¿¡èµ„æºé€‰æ‹©å™¨ çš„æ‰©å±•ã€‚ åŸºäº camera å®ç°ç›¸æœºç›¸å…³åŠŸèƒ½ï¼Œphoto_manager å®ç°èµ„æºç›¸å…³å†…å®¹ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="https://pub.flutter-io.cn/packages/wechat_camera_picker/example" target="_blank" rel="noopener"
>https://pub.flutter-io.cn/packages/wechat_camera_picker/example&lt;/a>&lt;/p>
&lt;h1 id="å¼•å…¥åŒ…">å¼•å…¥åŒ…&lt;/h1>
&lt;p>åœ¨ &lt;code>pubspec.yaml&lt;/code> ä¸­å¼•å…¥ä¾èµ–&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wechat_camera_picker: any
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ä»£ç -demo">ä»£ç  demo&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">NewPictureRoute&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">StatefulWidget&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">@&lt;/span>&lt;span class="n">override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">StatefulWidget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">createState&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// TODO: implement createState
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">NewPictureRouteState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">NewPictureRouteState&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">NewPictureRoute&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">AssetEntity&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="n">entity&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Uint8List&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Future&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">pick&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kd">async&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">Size&lt;/span> &lt;span class="n">size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MediaQuery&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">scale&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MediaQuery&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">devicePixelRatio&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">AssetEntity&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="n">_entity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">await&lt;/span> &lt;span class="n">CameraPicker&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pickFromCamera&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">context&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">enableRecording:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">_entity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">entity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">_entity&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">entity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">_entity&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">mounted&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setState&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">{});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">await&lt;/span> &lt;span class="n">_entity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">thumbDataWithSize&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">width&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">scale&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">toInt&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">height&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">scale&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">toInt&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">mounted&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">setState&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">{});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rethrow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">@&lt;/span>&lt;span class="n">override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Widget&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// TODO: implement build
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">Scaffold&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">appBar:&lt;/span> &lt;span class="n">AppBar&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">title:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;æ‘„åƒæ¼”ç¤ºdemo&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">body:&lt;/span> &lt;span class="n">Stack&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">children:&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Widget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">entity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Positioned&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">child:&lt;/span> &lt;span class="n">Image&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">memory&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nl">fit:&lt;/span> &lt;span class="n">BoxFit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">contain&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">entity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="n">Center&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">child:&lt;/span> &lt;span class="n">CircularProgressIndicator&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="n">Center&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Click the button to start picking.&amp;#39;&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">floatingActionButton:&lt;/span> &lt;span class="n">FloatingActionButton&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">onPressed:&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pick&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">tooltip:&lt;/span> &lt;span class="s2">&amp;#34;æ‹ç…§&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Icon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Icons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">camera&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ä¿®æ”¹-ios-ç›¸å…³é…ç½®">ä¿®æ”¹ ios ç›¸å…³é…ç½®&lt;/h1>
&lt;h2 id="ä¿®æ”¹-podfile">ä¿®æ”¹ podfile&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">platform :ios, &amp;#39;9.0&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201251042481.png"
loading="lazy"
>&lt;/p>
&lt;p>ä¹Ÿå°±æ˜¯æ‰“å¼€è¿™ä¸ªé…ç½®ã€‚&lt;/p>
&lt;p>ç„¶å cd åˆ° ios æ–‡ä»¶å¤¹å†…ï¼Œæ‰§è¡Œ &lt;code>pod update&lt;/code> å³å¯ã€‚&lt;/p>
&lt;h2 id="ä¿®æ”¹-plist">ä¿®æ”¹ plist&lt;/h2>
&lt;p>è¿›å…¥åˆ° &lt;code>ios/Runner&lt;/code>æ–‡ä»¶å¤¹ä¸‹ï¼Œä¿®æ”¹ info.plist&lt;/p>
&lt;ol>
&lt;li>æ·»åŠ è®¿é—® asset ç›¸å…³çš„é…ç½®&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-zed" data-lang="zed">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">NSAppTransportSecurity&lt;/span>&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">dict&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">NSAllowsArbitraryLoads&lt;/span>&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nn">true/&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">dict&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">NSPhotoLibraryUsageDescription&lt;/span>&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">Replace&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">permission&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>æ·»åŠ è®¿é—® camera ç›¸å…³çš„é…ç½®&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> &amp;lt;key&amp;gt;NSCameraUsageDescription&amp;lt;/key&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;string&amp;gt;Can I use the camera please?&amp;lt;/string&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;key&amp;gt;NSMicrophoneUsageDescription&amp;lt;/key&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;string&amp;gt;Can I use the mic please?&amp;lt;/string&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201251045591.png"
loading="lazy"
>&lt;/p>
&lt;h1 id="åœ¨-xcode-å†…è¿è¡Œ">åœ¨ xcode å†…è¿è¡Œ&lt;/h1>
&lt;p>ç„¶åå°±å¯ä»¥åœ¨è‡ªå·±æ‰‹æœºä¸Šä½¿ç”¨äº†ã€‚&lt;/p></description></item><item><title>Flutter å¸¸ç”¨å·¥å…·</title><link>https://example.com/p/flutter-%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/</link><pubDate>Mon, 24 Jan 2022 20:31:03 +0800</pubDate><guid>https://example.com/p/flutter-%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/</guid><description>&lt;p>æ‘„åƒï¼š &lt;a class="link" href="https://pub.flutter-io.cn/packages/wechat_camera_picker" target="_blank" rel="noopener"
>https://pub.flutter-io.cn/packages/wechat_camera_picker&lt;/a>&lt;/p>
&lt;p>å½•éŸ³ï¼š &lt;a class="link" href="https://pub.flutter-io.cn/packages/flutter_sound_lite" target="_blank" rel="noopener"
>https://pub.flutter-io.cn/packages/flutter_sound_lite&lt;/a>&lt;/p>
&lt;p>å®šä½ï¼š &lt;a class="link" href="https://pub.flutter-io.cn/packages/geolocator" target="_blank" rel="noopener"
>https://pub.flutter-io.cn/packages/geolocator&lt;/a>&lt;/p>
&lt;p>å¾ˆå¤šç”¨èµ·æ¥æ¯”åŸç”Ÿè¿˜ç®€å•æ–¹ä¾¿å¾ˆå¤šï¼Œè€Œä¸”è¿˜ä¸ç”¨å†™ä¸¤ä»½ä»£ç &lt;/p></description></item><item><title>Flutter å¸¸è§é—®é¢˜è®°å½•</title><link>https://example.com/p/flutter-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</link><pubDate>Mon, 24 Jan 2022 10:52:44 +0800</pubDate><guid>https://example.com/p/flutter-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</guid><description>&lt;h1 id="ç¬¬ä¸€ä¸ªé—®é¢˜">ç¬¬ä¸€ä¸ªé—®é¢˜&lt;/h1>
&lt;blockquote>
&lt;p>Cannot run with sound null safety because dependencies don&amp;rsquo;t support null safety&lt;/p>
&lt;/blockquote>
&lt;p>First, you should read through the guide to understand unsound null safety. If you are sure that you want to run your application with unsound null safety, you can use the following command:&lt;/p>
&lt;p>flutter run &amp;ndash;no-sound-null-safety&lt;/p>
&lt;p>The &amp;ndash;no-sound-null-safety option is not documented in the article, however, I have not experienced any problems with it for the last few months (and especially not since the whole Flutter framework has been migrated to null safety).&lt;/p>
&lt;p>The documentation has now been updated to include this. See Testing or running mixed-version programs.&lt;/p>
&lt;p>IDE run arguments/configuration
To set this up in your IDE of choice, you can use:&lt;/p>
&lt;p>In IntelliJ/Android Studio: &amp;ldquo;Edit Configurations&amp;rdquo; (in your run configurations) â†’ &amp;ldquo;Additional run args&amp;rdquo;.
In Visual Studio Code: search for &amp;ldquo;Flutter run additional args&amp;rdquo; in your user settings.
In both cases, add &amp;ndash;no-sound-null-safety.&lt;/p>
&lt;p>Test configuration
For tests, you will want to do the same thing:&lt;/p>
&lt;p>In IntelliJ/Android Studio: &amp;ldquo;Edit Configurations&amp;rdquo; (in your run configurations) â†’ &amp;ldquo;Additional args&amp;rdquo;.
In Visual Studio Code: search for &amp;ldquo;Flutter test additional args&amp;rdquo; in your user settings.
In both cases, add &amp;ndash;no-sound-null-safety.&lt;/p>
&lt;p>In case you were using Visual Studio Code and faced it in your unit test.&lt;/p>
&lt;p>Visual Studio Code â†’ Preferences â†’ Settings â†’ Search setting, type in &amp;ldquo;flutter test&amp;rdquo; â†’ Dart: Flutter Test Additional Args, Add item â†’ Add &amp;ldquo;&amp;ndash;no-sound-null-safety&amp;rdquo;&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201241054614.png"
loading="lazy"
>&lt;/p>
&lt;h1 id="ç¬¬äºŒä¸ªé—®é¢˜">ç¬¬äºŒä¸ªé—®é¢˜&lt;/h1>
&lt;blockquote>
&lt;p>iOS 14 not letting Flutter apps (still in dev) to launch from the home screen compared to Building/Running from the IDE&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201241055807.png"
loading="lazy"
>&lt;/p>
&lt;p>Apparently, this is a known issue of Flutter on iOS 14 for apps in debug mode, see this article on the Flutter website, and this GitHub issue. So for the time being, I believe your main workarounds are the following:&lt;/p>
&lt;p>Always run the app from the host PC (using flutter run, IDE debug, etc.)
Build a release version of your app (instead of debug) and use that on your device, e.g. use flutter run &amp;ndash;release
Use a device with iOS 13 or older
Use a simulator&lt;/p>
&lt;p>If you want to use the app without being connected via usb&lt;/p>
&lt;p>Open the ios folder on Xcode&lt;/p>
&lt;p>Make sure your device is connected&lt;/p>
&lt;p>Select Product from the menu bar -&amp;gt; Scheme -&amp;gt; Edit Scheme&lt;/p>
&lt;p>Or simply use the shortcut: command + &amp;gt;&lt;/p>
&lt;p>Change the build configure to Release
Run the app from Xcode
Disconnect your device and you&amp;rsquo;re good to go!&lt;/p></description></item><item><title>Farewell æ°¸åˆ«äº†</title><link>https://example.com/p/farewell-%E6%B0%B8%E5%88%AB%E4%BA%86/</link><pubDate>Sat, 15 Jan 2022 21:45:17 +0800</pubDate><guid>https://example.com/p/farewell-%E6%B0%B8%E5%88%AB%E4%BA%86/</guid><description>&lt;h1 id="æ°¸åˆ«äº†">æ°¸åˆ«äº†&lt;/h1>
&lt;p>æ­£å¦‚ Semisonic åœ¨ 90 å¹´ä»£çš„çƒ­é—¨æ­Œæ›² &amp;ldquo;Closing Time &amp;ldquo;æ‰€å‘Šè¯‰æˆ‘ä»¬çš„é‚£æ ·ï¼Œæ¯ä¸€ä¸ªæ–°çš„å¼€å§‹éƒ½æ¥è‡ªäºå…¶ä»–ä¸€äº›å¼€å§‹çš„ç»“æŸã€‚æ­å–œä½ ï¼Œé«˜è´µçš„è¯»è€…ï¼Œå®Œæˆäº†è¿™æ¬¡ Clojure ä¹‹æ—…ã€‚æˆ‘å¸Œæœ›ä½ å‘ç°å®ƒæ˜¯æœ‰ä»·å€¼çš„ï¼Œæˆ‘ä¹Ÿå¸Œæœ›ä½ æœŸå¾…ç€æ›´å¤šçš„ä¸œè¥¿ï¼ç›¸ä¿¡æˆ‘ï¼Œè¿˜æœ‰æ›´å¤šçš„ä¸œè¥¿ç­‰ç€ä½ ã€‚&lt;/p>
&lt;p>ç›¸ä¿¡æˆ‘ï¼Œè¿˜æœ‰å¾ˆå¤šä¸œè¥¿ã€‚æˆ‘æœ€å–œæ¬¢ Clojure çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒæœ‰ä¸€ä¸ªå®Œæ•´çš„ä¸–ç•Œå¯ä»¥æ¢ç´¢ã€‚é€»è¾‘ç¼–ç¨‹ã€è§£æå™¨ã€ç±»å‹ç³»ç»Ÿâ€¦â€¦åªè¦ä½ èƒ½è¯´å‡ºè®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªæœ‰è¶£é¢†åŸŸï¼Œä½ å°±å¯ä»¥ç”¨ Clojure æ¥ç ”ç©¶å®ƒã€‚æˆ‘æŠŠæˆ‘å¯¹ä¸‹ä¸€æ­¥è¦å»å“ªé‡Œçš„å»ºè®®ç•™ç»™ä½ ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³å¯¹ Clojure ç”Ÿæ€ç³»ç»Ÿæœ‰ä¸€ä¸ªå¹¿æ³›çš„äº†è§£ï¼Œè¯·æŸ¥çœ‹&lt;a class="link" href="http://www.clojure-toolbox.com/" target="_blank" rel="noopener"
>The Clojure Toolbox&lt;/a>ï¼Œå®ƒåˆ—å‡ºäº†æ•°ç™¾ä¸ª Clojure é¡¹ç›®ï¼Œå¹¶æŒ‰ç…§å®ƒä»¬æ‰€è§£å†³çš„é—®é¢˜è¿›è¡Œç»„ç»‡ã€‚&lt;/p>
&lt;p>å¦‚æœä½ å¯¹ç½‘ç»œç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹æ˜¯ Luminus æ¡†æ¶ï¼ˆ&lt;em>&lt;a class="link" href="http://www.luminusweb.net/" target="_blank" rel="noopener"
>Luminus - ä¸€ä¸ª Clojure ç½‘ç»œæ¡†æ¶&lt;/a>&lt;/em>ï¼‰ã€‚å®ƒçš„æ–‡æ¡£éå¸¸å¥½ï¼Œä½ å¾ˆå¿«å°±ä¼šæœ‰ä¸€ä¸ªç½‘ç«™åœ¨è¿è¡Œã€‚&lt;/p>
&lt;p>è¦æƒ³äº†è§£ Clojure çš„æœ€æ–°åŠ¨æ€ï¼ŒEric Normand çš„ Clojure Gazzette æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ„æºï¼ˆ&lt;a class="link" href="http://www.clojuregazette.com/" target="_blank" rel="noopener"
>æ³¨å†Œæ¯å‘¨åŠŸèƒ½ç¼–ç¨‹é€šè®¯&lt;/a>ï¼‰ã€‚å½“ç„¶ï¼Œè¿˜æœ‰ Clojure é‚®ä»¶åˆ—è¡¨ï¼ˆ&lt;a class="link" href="https://groups.google.com/forum/#!forum/clojure" target="_blank" rel="noopener"
>https://groups.google.com/forum/#!forum/clojure&lt;/a>ï¼‰å’Œ Clojure subreddit ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ã€å‹å¥½çš„åœ°æ–¹ï¼ˆ&lt;a class="link" href="http://www.reddit.com/r/clojure" target="_blank" rel="noopener"
>http://www.reddit.com/r/clojure&lt;/a>ï¼‰ã€‚&lt;/p>
&lt;p>å¦‚æœ Twitter æ˜¯ä½ é€‰æ‹©çš„ç¤¾äº¤åª’ä½“ï¼Œé‚£ä¹ˆ&lt;a class="link" href="http://twitter.com/swannodette" target="_blank" rel="noopener"
>@swannodette&lt;/a> (David Nolen), &lt;a class="link" href="http://twitter.com/gigasquid" target="_blank" rel="noopener"
>@gigasquid&lt;/a> (Carin Meier), &lt;a class="link" href="http://twitter.com/puredanger" target="_blank" rel="noopener"
>@puredanger&lt;/a> (Alex Miller), &lt;a class="link" href="http://twitter.com/ztellman" target="_blank" rel="noopener"
>@ztellman&lt;/a> (Zach Tellman), &lt;a class="link" href="http://twitter.com/bbatsov" target="_blank" rel="noopener"
>@bbatsov&lt;/a> (Bozidar Batsov) å’Œ &lt;a class="link" href="http://twitter.com/stuartsierra" target="_blank" rel="noopener"
>@stuartsierra&lt;/a> (Stuart Sierra) æ˜¯ä½ çš„å°çº¢å¸½ã€‚ä½ ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘ï¼Œ&lt;a class="link" href="http://twitter.com/nonrecursive" target="_blank" rel="noopener"
>@nonrecursive&lt;/a>!&lt;/p>
&lt;p>å†è§äº†ï¼Œå°èŒ¶æ¯ï¼Œç¥ä½  Clojuring æ„‰å¿«&lt;/p></description></item><item><title>AppendixB èŠ±å“¨çš„ Boot</title><link>https://example.com/p/appendixb-%E8%8A%B1%E5%93%A8%E7%9A%84-boot/</link><pubDate>Sat, 15 Jan 2022 21:41:09 +0800</pubDate><guid>https://example.com/p/appendixb-%E8%8A%B1%E5%93%A8%E7%9A%84-boot/</guid><description>&lt;h1 id="bootèŠ±å“¨çš„-clojure-æ„å»ºæ¡†æ¶">Bootï¼ŒèŠ±å“¨çš„ Clojure æ„å»ºæ¡†æ¶&lt;/h1>
&lt;p>Boot æ˜¯ Leiningen çš„æ›¿ä»£å“ï¼Œæä¾›åŒæ ·çš„åŠŸèƒ½ã€‚Leiningen æ›´å—æ¬¢è¿ï¼ˆæˆªè‡³ 2015 å¹´å¤å¤©ï¼‰ï¼Œä½†æˆ‘ä¸ªäººå–œæ¬¢ç”¨ Boot å·¥ä½œï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“æ‰©å±•ã€‚æœ¬é™„å½•è§£é‡Šäº† Boot çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶æŒ‡å¯¼ä½ ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª Boot ä»»åŠ¡ã€‚å¦‚æœä½ å¯¹ä½¿ç”¨ Boot æ„å»ºé¡¹ç›®æ„Ÿå…´è¶£ï¼Œè¯·æŸ¥çœ‹å®ƒçš„ GitHub READMEï¼ˆ&lt;em>&lt;a class="link" href="https://github.com/boot-clj/boot/" target="_blank" rel="noopener"
>GitHub - boot-clj/boot: Build tooling for Clojure.&lt;/a>&lt;/em>ï¼‰å’Œå®ƒçš„ wikiï¼ˆ&lt;a class="link" href="https://github.com/boot-clj/boot/wiki/" target="_blank" rel="noopener"
>Home - boot-clj/boot Wiki - GitHub&lt;/a>&lt;em>ï¼‰&lt;/em>ã€‚&lt;/p>
&lt;p>æ³¨æ„ æˆªè‡³æœ¬æ–‡å†™ä½œæ—¶ï¼ŒBoot å¯¹ Windows çš„æ”¯æŒæœ‰é™ã€‚Boot å›¢é˜Ÿæ¬¢è¿å¤§å®¶çš„è´¡çŒ®!&lt;/p>
&lt;h2 id="boot-çš„æŠ½è±¡">Boot çš„æŠ½è±¡&lt;/h2>
&lt;p>Boot ç”± Micha Niskin å’Œ Alan Dipert åˆ›å»ºï¼Œæ˜¯å¯¹ Clojure å·¥å…·é¢†åŸŸçš„ä¸€ä¸ªæœ‰è¶£è€Œå¼ºå¤§çš„è¡¥å……ã€‚ä»è¡¨é¢ä¸Šçœ‹ï¼Œå®ƒæ˜¯æ„å»º Clojure åº”ç”¨ç¨‹åºå’Œä»å‘½ä»¤è¡Œè¿è¡Œ Clojure ä»»åŠ¡çš„ä¸€ç§ä¾¿æ·æ–¹å¼ã€‚æ·±å…¥ç ”ç©¶ä¸€ä¸‹ï¼Œä½ ä¼šå‘ç° Boot å°±åƒ Git å’Œ Unix çš„çˆ±æƒ…ç»“æ™¶ï¼Œå®ƒæä¾›çš„æŠ½è±¡ä½¿ä½ åœ¨æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„äº¤å‰ç‚¹ä¸Šç¼–å†™ä»£ç æ—¶æ›´åŠ æ„‰å¿«ã€‚&lt;/p>
&lt;p>Unix æä¾›äº†æˆ‘ä»¬éƒ½å¾ˆç†Ÿæ‚‰çš„æŠ½è±¡ï¼Œä»¥è‡³äºæˆ‘ä»¬è®¤ä¸ºå®ƒä»¬æ˜¯ç†æ‰€å½“ç„¶çš„ã€‚(å¶å°”å¸¦ä½ çš„ç”µè„‘å»åƒä¸€é¡¿å¥½çš„é¤å…ä¼šæ­»å—ï¼Ÿ) è¿›ç¨‹æŠ½è±¡è®©ä½ æŠŠç¨‹åºæ¨ç†æˆç‹¬ç«‹çš„é€»è¾‘å•å…ƒï¼Œå¯ä»¥é€šè¿‡ STDIN å’Œ STDOUT æ–‡ä»¶æè¿°ç¬¦è½»æ¾åœ°ç»„æˆä¸€ä¸ªæµå¤„ç†ç®¡é“ã€‚è¿™äº›æŠ½è±¡ä½¿æŸäº›ç±»å‹çš„æ“ä½œï¼Œå¦‚æ–‡æœ¬å¤„ç†ï¼Œå˜å¾—éå¸¸ç›´æ¥ã€‚&lt;/p>
&lt;p>åŒæ ·ï¼ŒBoot ä¹Ÿæä¾›äº†ä¸€äº›æŠ½è±¡ï¼Œä½¿å¾—ç‹¬ç«‹çš„æ“ä½œå¾ˆå®¹æ˜“è¢«ç»„åˆæˆæ„å»ºå·¥å…·æœ€ç»ˆè¦åšçš„é‚£ç§å¤æ‚ã€åè°ƒçš„æ“ä½œï¼Œæ¯”å¦‚å°† ClojureScript è½¬æ¢ä¸º JavaScriptã€‚Â Boot çš„ä»»åŠ¡æŠ½è±¡è®©ä½ å¯ä»¥è½»æ¾åœ°å®šä¹‰é€»è¾‘å•å…ƒï¼Œé€šè¿‡&lt;em>æ–‡ä»¶é›†åˆ&lt;/em>è¿›è¡Œé€šä¿¡ã€‚æ–‡ä»¶é›†åˆæŠ½è±¡å¯ä»¥è·Ÿè¸ªä¸æ–­å˜åŒ–çš„æ„å»ºç¯å¢ƒï¼Œå¹¶æä¾›ä¸€ä¸ªå®šä¹‰æ˜ç¡®ã€å¯é çš„ä»»åŠ¡åè°ƒæ–¹æ³•ã€‚&lt;/p>
&lt;p>è¿™å°±æ˜¯å¾ˆå¤šé«˜å±‚æ¬¡çš„æè¿°ï¼Œå¸Œæœ›èƒ½å¸å¼•ä½ çš„æ³¨æ„åŠ›ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘å¸¦ç€ä¸€æ¿ä¸€çœ¼çš„éšå–»ç¦»å¼€ä½ ï¼Œé‚£å°±å¤ªä¸¢äººäº†ã€‚å“¦ï¼Œä¸ï¼Œäº²çˆ±çš„è¯»è€…ï¼Œè¿™åªæ˜¯å¼€èƒƒèœè€Œå·²ã€‚åœ¨æœ¬é™„å½•çš„å…¶ä½™éƒ¨åˆ†ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å»ºç«‹è‡ªå·±çš„ Boot ä»»åŠ¡ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šå‘ç°ï¼Œæ„å»ºå·¥å…·å®é™…ä¸Šæ˜¯æœ‰æ¦‚å¿µåŸºç¡€çš„ã€‚&lt;/p>
&lt;h2 id="ä»»åŠ¡">ä»»åŠ¡&lt;/h2>
&lt;p>åƒ makeã€rakeã€grunt å’Œå…¶ä»–ä»¥å‰çš„æ„å»ºå·¥å…·ä¸€æ ·ï¼ŒBoot è®©ä½ å®šä¹‰ä»»åŠ¡ã€‚Â &lt;em>ä»»åŠ¡&lt;/em>æ˜¯å‘½åçš„æ“ä½œï¼Œæ¥å—ç”±æŸä¸ªä¸­é—´ç¨‹åºï¼ˆmakeã€rakeã€Bootï¼‰è°ƒåº¦çš„å‘½ä»¤è¡Œé€‰é¡¹ã€‚&lt;/p>
&lt;p>Boot æä¾›äº†è°ƒåº¦ç¨‹åº&lt;em>boot&lt;/em>å’Œä¸€ä¸ª Clojure åº“ï¼Œä½¿ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨&lt;code>deftask&lt;/code>å®æ¥å®šä¹‰å‘½åçš„æ“ä½œåŠå…¶å‘½ä»¤è¡Œé€‰é¡¹ã€‚ä¸ºäº†çœ‹çœ‹æ‰€æœ‰çš„å¤§æƒŠå°æ€ªï¼Œè®©æˆ‘ä»¬æ¥åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œç¼–ç¨‹æ•™ç¨‹é¼“åŠ±ä½ å†™ä»£ç æ¥æ‰“å° &amp;ldquo;Hello World&amp;rdquo;ï¼Œä½†æˆ‘å¸Œæœ›æˆ‘çš„ä¾‹å­èƒ½æœ‰çœŸå®çš„æ•ˆç”¨ï¼Œæ‰€ä»¥ä½ çš„ä»»åŠ¡æ˜¯æ‰“å° &amp;ldquo;æˆ‘çš„è£¤å­ç€ç«äº†ï¼&amp;rdquo; è¿™ä¸ªä¿¡æ¯å®¢è§‚ä¸Šæ›´æœ‰ç”¨ã€‚é¦–å…ˆï¼Œå®‰è£… Bootï¼›ç„¶ååˆ›å»ºä¸€ä¸ªåä¸º&lt;em>boot-walkthrough&lt;/em>çš„æ–°ç›®å½•ï¼Œå¯¼èˆªåˆ°è¯¥ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º*build.boot**çš„æ–‡ä»¶ï¼Œ*ç„¶åè¿™æ ·å†™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(deftask fire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Prints &amp;#39;My pants are on fire!&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;My pants are on fire!&amp;#34;))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ç”¨&lt;code>boot fire&lt;/code>ä»å‘½ä»¤è¡Œè¿è¡Œè¿™ä¸ªä»»åŠ¡ï¼›ä½ åº”è¯¥çœ‹åˆ°ä½ å†™çš„ä¿¡æ¯è¢«æ‰“å°åˆ°ç»ˆç«¯ã€‚è¿™ä¸ªä»»åŠ¡å±•ç¤ºäº†ä¸‰ä¸ªä»»åŠ¡ç»„ä»¶ä¸­çš„ä¸¤ä¸ªï¼šä»»åŠ¡è¢«å‘½åä¸ºï¼ˆ&lt;code>fire&lt;/code>ï¼‰ï¼Œå¹¶ä¸”ç”± boot è°ƒåº¦ã€‚è¿™çœŸæ˜¯å¤ªé…·äº†ã€‚ä½ åŸºæœ¬ä¸Šå·²ç»åˆ›å»ºäº†ä¸€ä¸ª Clojure shell è„šæœ¬ï¼Œç‹¬ç«‹çš„ Clojure ä»£ç ï¼Œä½ å¯ä»¥è½»æ¾åœ°ä»å‘½ä»¤è¡Œè¿è¡Œã€‚ä¸éœ€è¦&lt;em>project.clj&lt;/em>ï¼Œä¸éœ€è¦ç›®å½•ç»“æ„ï¼Œä¹Ÿä¸éœ€è¦å‘½åç©ºé—´!&lt;/p>
&lt;p>è®©æˆ‘ä»¬æ‰©å±•ä¸€ä¸‹è¿™ä¸ªä¾‹å­ï¼Œæ¼”ç¤ºä¸€ä¸‹ä½ å¦‚ä½•ç¼–å†™å‘½ä»¤è¡Œé€‰é¡¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(deftask fire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Announces that something is on fire&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [t thing THING str &amp;#34;The thing that&amp;#39;s on fire&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> p pluralize bool &amp;#34;Whether to pluralize&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [verb (if pluralize &amp;#34;are&amp;#34; &amp;#34;is&amp;#34;)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;My&amp;#34; thing verb &amp;#34;on fire!&amp;#34;)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯•ç€åƒè¿™æ ·è¿è¡Œè¯¥ä»»åŠ¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">boot fire -t heart
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># =&amp;gt; My heart is on fire!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">boot fire -t logs -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># =&amp;gt; My logs are on fire!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œè¦ä¹ˆä½ æ˜¯æ–°è¿‘æ‹çˆ±ï¼Œè¦ä¹ˆä½ éœ€è¦èµ¶åˆ°æ€¥è¯Šå®¤ã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œä½ æ˜¯ä¸€ä¸ªç«¥å­å†›ï¼Œå°´å°¬åœ°è¡¨è¾¾äº†ä½ å¯¹è¾¾åˆ°åŠŸç»©å‹‹ç« è¦æ±‚çš„å…´å¥‹ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ éƒ½èƒ½è½»æ¾åœ°æŒ‡å®šä»»åŠ¡çš„é€‰é¡¹ã€‚&lt;/p>
&lt;p>è¿™æ¬¡å¯¹&lt;code>fire&lt;/code>ä»»åŠ¡çš„æ”¹è¿›å¼•å…¥äº†ä¸¤ä¸ªå‘½ä»¤è¡Œé€‰é¡¹ï¼Œ&lt;code>thing&lt;/code>å’Œ&lt;code>pluralize&lt;/code>ã€‚è¿™ä¸¤ä¸ªé€‰é¡¹éƒ½æ˜¯ç”¨*åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰*å®šä¹‰çš„ã€‚DSL æ˜¯ä»–ä»¬è‡ªå·±çš„ä¸»é¢˜ï¼Œä½†ç®€å•åœ°è¯´ï¼Œè¿™ä¸ªæœ¯è¯­æŒ‡çš„æ˜¯å¾®å‹è¯­è¨€ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªå¤§çš„ç¨‹åºä¸­ä½¿ç”¨ï¼Œä¸ºç‹­ä¹‰çš„é¢†åŸŸï¼ˆå¦‚å®šä¹‰é€‰é¡¹ï¼‰ç¼–å†™ç´§å‡‘çš„ã€å¯Œæœ‰è¡¨ç°åŠ›çš„ä»£ç ã€‚&lt;/p>
&lt;p>åœ¨é€‰é¡¹&lt;code>thing&lt;/code>ä¸­ï¼Œ&lt;code>t&lt;/code>æŒ‡å®šå…¶çŸ­åç§°ï¼Œ&lt;code>thing&lt;/code>æŒ‡å®šå…¶é•¿åç§°ã€‚Â &lt;code>THING&lt;/code>æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘ç¨åä¼šè®²åˆ°å®ƒã€‚Â &lt;code>str&lt;/code>æŒ‡å®šäº†é€‰é¡¹çš„ç±»å‹ï¼ŒBoot ç”¨å®ƒæ¥éªŒè¯å‚æ•°å¹¶è¿›è¡Œè½¬æ¢ã€‚Â &lt;code>&amp;quot;ç€ç«çš„ä¸œè¥¿ &amp;quot;æ˜¯è¯¥é€‰é¡¹çš„æ–‡æ¡£ã€‚ä½ å¯ä»¥ç”¨&lt;/code>boot task-name -h`åœ¨ç»ˆç«¯æŸ¥çœ‹ä¸€ä¸ªä»»åŠ¡çš„æ–‡æ¡£ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">boot fire -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Announces that something is on fire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Options:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># -h, --help Print this help info.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># -t, --thing THING Set the thing that&amp;#39;s on fire to THING.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># -p, --pluralize Whether to pluralize
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“æ£’çš„! Boot ä½¿ç¼–å†™è¦ä»å‘½ä»¤è¡Œè°ƒç”¨çš„ä»£ç å˜å¾—éå¸¸å®¹æ˜“ã€‚&lt;/p>
&lt;p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹&lt;code>THING&lt;/code>ã€‚&lt;code>THING&lt;/code>æ˜¯ä¸€ä¸ª&lt;em>optarg&lt;/em>ï¼Œå®ƒè¡¨ç¤ºè¿™ä¸ªé€‰é¡¹éœ€è¦ä¸€ä¸ªå‚æ•°ã€‚å½“ä½ å®šä¹‰ä¸€ä¸ªé€‰é¡¹æ—¶ï¼Œä½ ä¸éœ€è¦åŒ…æ‹¬ optargï¼ˆæ³¨æ„&lt;code>pluralize&lt;/code>é€‰é¡¹æ²¡æœ‰ optargï¼‰ã€‚optarg ä¸å¿…ä¸é€‰é¡¹çš„å…¨åç›¸å¯¹åº”ï¼›ä½ å¯ä»¥ç”¨&lt;code>BILLY_JOEL'æˆ–å…¶ä»–ä½ æƒ³è¦çš„ä¸œè¥¿æ¥ä»£æ›¿&lt;/code>THING&amp;rsquo;ï¼Œä»»åŠ¡ä¹Ÿä¼šç…§å¸¸è¿›è¡Œã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ optarg æ¥æŒ‡å®šå¤æ‚çš„é€‰é¡¹ã€‚(&lt;a class="link" href="https://github.com/boot-clj/boot/wiki/Task-Options-DSL#complex-options" target="_blank" rel="noopener"
>è®¿é—®&lt;em>https://github.com/boot-clj/boot/wiki/Task-Options-DSL#complex-options&lt;/em>&lt;/a>äº†è§£ Boot å…³äºè¿™ä¸ªé—®é¢˜çš„æ–‡æ¡£ã€‚) åŸºæœ¬ä¸Šï¼Œå¤æ‚é€‰é¡¹å…è®¸ä½ æŒ‡å®šé€‰é¡¹å‚æ•°åº”è¢«è§†ä¸º Mapã€é›†åˆã€Vectorï¼Œç”šè‡³æ˜¯åµŒå¥—é›†åˆã€‚è¿™æ˜¯å¾ˆå¼ºå¤§çš„ã€‚&lt;/p>
&lt;p>Boot ä¸ºä½ æä¾›äº†ç”¨ Clojure æ„å»ºå‘½ä»¤è¡Œç•Œé¢æ‰€éœ€çš„æ‰€æœ‰å·¥å…·ã€‚è€Œä½ æ‰åˆšåˆšå¼€å§‹å­¦ä¹ å®ƒ!&lt;/p>
&lt;h2 id="the-repl">The REPL&lt;/h2>
&lt;p>Boot æœ‰è®¸å¤šæœ‰ç”¨çš„å†…ç½®ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä¸€ä¸ª REPL ä»»åŠ¡ã€‚è¿è¡Œ &lt;code>boot repl&lt;/code> æ¥å¯åŠ¨è¿™ä¸ªå°å®¶ä¼™ã€‚Boot çš„ REPL ä¸ Leiningen çš„ç±»ä¼¼ï¼Œå®ƒè´Ÿè´£åŠ è½½ä½ çš„é¡¹ç›®ä»£ç ï¼Œè¿™æ ·ä½ å°±å¯ä»¥éšæ„ç©è€ã€‚ä½ å¯èƒ½è®¤ä¸ºè¿™ä¸é€‚ç”¨äºä½ æ‰€å†™çš„é¡¹ç›®ï¼Œå› ä¸ºä½ åªå†™äº†ä»»åŠ¡ï¼Œä½†å®é™…ä¸Šä½ å¯ä»¥åœ¨ REPL ä¸­è¿è¡Œä»»åŠ¡ï¼ˆæˆ‘çœç•¥äº†&lt;code>boot.user=&amp;gt;&lt;/code>æç¤ºï¼‰ã€‚ä½ å¯ä»¥ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‡å®šé€‰é¡¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(fire &amp;#34;-t&amp;#34; &amp;#34;NBA Jam guy&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; My NBA Jam guy is on fire!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œé€‰é¡¹çš„å€¼å°±åœ¨é€‰é¡¹çš„åé¢ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥ç”¨å…³é”®å­—æ¥æŒ‡å®šä¸€ä¸ªé€‰é¡¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(fire :thing &amp;#34;NBA Jam guy&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; My NBA Jam guy is on fire!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥ç»“åˆé€‰é¡¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(fire &amp;#34;-p&amp;#34; &amp;#34;-t&amp;#34; &amp;#34;NBA Jam guys&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; My NBA Jam guys are on fire!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(fire :pluralize true :thing &amp;#34;NBA Jam guys&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; My NBA Jam guys are on fire!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ REPL ä¸­ä½¿ç”¨&lt;code>deftask&lt;/code>ï¼Œæ¯•ç«Ÿè¿™åªæ˜¯ Clojureã€‚æˆ‘ä»¬çš„æ”¶è·æ˜¯ï¼ŒBoot å¯ä»¥è®©ä½ æŠŠä»»åŠ¡ä½œä¸º Clojure å‡½æ•°è¿›è¡Œäº¤äº’ï¼Œå› ä¸ºå®ƒä»¬å°±æ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;h2 id="ç»„æˆå’Œåè°ƒ">ç»„æˆå’Œåè°ƒ&lt;/h2>
&lt;p>å¦‚æœåˆ°ç›®å‰ä¸ºæ­¢ä½ æ‰€çœ‹åˆ°çš„å°±æ˜¯ Boot æ‰€èƒ½æä¾›çš„ä¸€åˆ‡ï¼Œé‚£å®ƒå°†æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„å·¥å…·ï¼Œä½†å®ƒä¸å…¶ä»–æ„å»ºå·¥å…·æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚è®© Boot ä¸ä¼—ä¸åŒçš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥è®©ä½ ç¼–æ’ä»»åŠ¡ã€‚ä¸ºäº†ä¾¿äºæ¯”è¾ƒï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª Rake è°ƒç”¨çš„ä¾‹å­ï¼ˆRake æ˜¯ä¸»è¦çš„ Ruby æ„å»ºå·¥å…·ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rake db:create d{:tag :a, :attrs {:href &amp;#34;db:seed&amp;#34;}, :content [&amp;#34;b:migra&amp;#34;]}te db:seed
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç å°†åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œåœ¨å…¶ä¸Šè¿è¡Œè¿ç§»ï¼Œå¹¶åœ¨ Rails é¡¹ç›®ä¸­è¿è¡Œæ—¶å‘å…¶å¡«å……ç§å­æ•°æ®ã€‚ç„¶è€Œï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒRake å¹¶æ²¡æœ‰æä¾›ä»»ä½•æ–¹æ³•è®©è¿™äº›ä»»åŠ¡ä¹‹é—´ç›¸äº’é€šä¿¡ã€‚æŒ‡å®šå¤šä¸ªä»»åŠ¡åªæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œè®©ä½ ä¸å¿…è¿è¡Œ&lt;code>rake db:create; rake db:migrate; rake db:seed&lt;/code>ã€‚å¦‚æœä½ æƒ³åœ¨ä»»åŠ¡ B ä¸­è®¿é—®ä»»åŠ¡ A çš„ç»“æœï¼Œæ„å»ºå·¥å…·å¹¶ä¸èƒ½å¸®åŠ©ä½ ï¼›ä½ å¿…é¡»è‡ªå·±ç®¡ç†è¿™ç§åè°ƒã€‚é€šå¸¸ï¼Œä½ è¦åšçš„æ˜¯æŠŠä»»åŠ¡ A çš„ç»“æœå¡è¿›æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç‰¹æ®Šä½ç½®ï¼Œç„¶åç¡®ä¿ä»»åŠ¡ B è¯»å–è¿™ä¸ªç‰¹æ®Šä½ç½®ã€‚è¿™çœ‹èµ·æ¥å°±åƒç”¨æ˜“å˜çš„å…¨å±€å˜é‡è¿›è¡Œç¼–ç¨‹ï¼Œè€Œä¸”å®ƒä¹Ÿæ˜¯å¾ˆè„†å¼±çš„ã€‚&lt;/p>
&lt;h3 id="handler-å’Œä¸­é—´ä»¶">Handler å’Œä¸­é—´ä»¶&lt;/h3>
&lt;p>Boot é€šè¿‡å°†ä»»åŠ¡è§†ä¸º&lt;em>ä¸­é—´**ä»¶å·¥å‚&lt;/em>æ¥è§£å†³è¿™ä¸ªä»»åŠ¡é€šä¿¡é—®é¢˜ã€‚å¦‚æœä½ ç†Ÿæ‚‰ Ringï¼ŒBoot çš„ä»»åŠ¡å·¥ä½œèµ·æ¥éå¸¸ç›¸ä¼¼ï¼Œæ‰€ä»¥è¯·éšæ„è·³åˆ°&lt;a class="link" href="https://www.braveclojure.com/appendix-b/#Anchor" target="_blank" rel="noopener"
>&amp;ldquo;ä»»åŠ¡æ˜¯ä¸­é—´ä»¶å·¥å‚ &amp;ldquo;ç¬¬ 287 é¡µ&lt;/a>ã€‚å¦‚æœä½ å¯¹ä¸­é—´ä»¶çš„æ¦‚å¿µä¸ç†Ÿæ‚‰ï¼Œè¯·å…è®¸æˆ‘è§£é‡Šä¸€ä¸‹!Â &lt;em>ä¸­é—´ä»¶&lt;/em>æŒ‡çš„æ˜¯ç¨‹åºå‘˜éµå®ˆçš„ä¸€å¥—&lt;em>å…¬çº¦ï¼Œè¿™æ ·ä»–ä»¬å°±å¯ä»¥çµæ´»åœ°åˆ›å»ºç‰¹å®šé¢†åŸŸçš„åŠŸèƒ½ç®¡é“ã€‚è¿™æ˜¯ç›¸å½“å¯†é›†çš„ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬è§£é™¤å¯†é›†ã€‚æˆ‘å°†åœ¨æœ¬èŠ‚ä¸­è®¨è®º&lt;/em>çµæ´»çš„éƒ¨åˆ†ï¼Œå¹¶åœ¨&lt;a class="link" href="https://www.braveclojure.com/appendix-b/#Anchor-12" target="_blank" rel="noopener"
>&amp;ldquo;æ–‡ä»¶é›†åˆ &amp;ldquo;ç¬¬ 288 é¡µ&lt;/a>ä¸­ä»‹ç»&lt;em>ç‰¹å®šé¢†åŸŸçš„&lt;/em>ã€‚&lt;/p>
&lt;p>ä¸ºäº†ç†è§£ä¸­é—´ä»¶æ–¹æ³•ä¸æ™®é€šå‡½æ•°ç»„åˆçš„ä¸åŒä¹‹å¤„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç»„åˆæ—¥å¸¸å‡½æ•°çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def strinc (comp str inc))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(strinc 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;4&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‡½æ•°ç»„åˆå¹¶æ²¡æœ‰ä»€ä¹ˆæœ‰è¶£çš„åœ°æ–¹ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªå‡½æ•°ç»„åˆæ˜¯å¦‚æ­¤çš„ä¸èµ·çœ¼ï¼Œä»¥è‡³äºæˆ‘ä½œä¸ºä¸€ä¸ªä½œå®¶ï¼Œè¦å¯¹å®ƒè¯´äº›ä»€ä¹ˆéƒ½å¾ˆè´¹åŠ²ã€‚æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œå„è‡ªåšè‡ªå·±çš„äº‹æƒ…ï¼Œç°åœ¨å®ƒä»¬è¢«ç»„æˆäº†ä¸€ä¸ªã€‚Whoop-dee-doo!&lt;/p>
&lt;p>ä¸­é—´ä»¶ä¸ºå‡½æ•°ç»„åˆå¼•å…¥äº†ä¸€ä¸ªé¢å¤–çš„æ­¥éª¤ï¼Œä½¿ä½ åœ¨å®šä¹‰å‡½æ•°ç®¡é“æ—¶æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚å‡è®¾åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œä½ æƒ³å¯¹ä»»æ„çš„æ•°å­—è¿”å› &amp;ldquo;æˆ‘ä¸å–œæ¬¢è¿™ä¸ªæ•°å­— X&amp;rdquo;ï¼Œè€Œå¯¹å…¶ä»–çš„ä¸œè¥¿è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åŒ–çš„æ•°å­—ã€‚ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn whiney-str
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [rejects]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:pre [(set? rejects)]}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [x]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (rejects x)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;I don&amp;#39;t like &amp;#34; x)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str x))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def whiney-strinc (comp (whiney-str #{2}) inc))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(whiney-strinc 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;I don&amp;#39;t like 2&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨è®©æˆ‘ä»¬å†è¿›ä¸€æ­¥ã€‚å¦‚æœä½ æƒ³å†³å®šæ˜¯å¦é¦–å…ˆè°ƒç”¨&lt;code>inc&lt;/code>å‘¢ï¼Ÿæ¸…å• B-1 æ˜¾ç¤ºäº†ä½ å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn whiney-middleware
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [next-handler rejects]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:pre [(set? rejects)]}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [x]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (if (= x 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;I&amp;#39;m not going to bother doing anything to that&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [y (next-handler x)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (rejects y)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;I don&amp;#39;t like &amp;#34; y)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str y))))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def whiney-strinc (whiney-middleware inc #{2}))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(whiney-strinc 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;I&amp;#39;m not going to bother doing anything to that&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>B-1. å‡½æ•°ç»„åˆçš„ä¸­é—´ä»¶æ–¹æ³•è®©ä½ å¼•å…¥é€‰æ‹©æƒ&lt;/li>
&lt;/ol>
&lt;p>åœ¨è¿™é‡Œï¼Œä½ ä¸æ˜¯ç”¨&lt;code>comp&lt;/code>æ¥åˆ›å»ºä½ çš„å‡½æ•°ç®¡é“ï¼Œè€Œæ˜¯å°†ç®¡é“ä¸­çš„ä¸‹ä¸€ä¸ªå‡½æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ä¸­é—´ä»¶å‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å°†&lt;code>inc&lt;/code>ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™&lt;code>whiney-middleware&lt;/code>ä½œä¸º&lt;code>next-handler&lt;/code>ã€‚Â &lt;code>whiney-middleware&lt;/code>ç„¶åè¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¯¥å‡½æ•°å…³é—­äº†&lt;code>inc&lt;/code>å¹¶æœ‰èƒ½åŠ›é€‰æ‹©æ˜¯å¦è°ƒç”¨å®ƒã€‚ä½ å¯ä»¥åœ¨âŠçœ‹åˆ°è¿™ä¸ªé€‰æ‹©ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬è¯´ï¼Œä¸€ä¸ªä¸­é—´ä»¶æŠŠä¸€ä¸ª Handler ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª Handlerã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>whiney-middleware&lt;/code>å°†ä¸€ä¸ª Handler ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ&lt;code>inc&lt;/code>ï¼Œå®ƒè¿”å›å¦ä¸€ä¸ª Handlerï¼Œå³åŒ¿åå‡½æ•°ï¼Œ&lt;code>x&lt;/code>æ˜¯å®ƒå”¯ä¸€çš„å‚æ•°ã€‚ä¸­é—´ä»¶ä¹Ÿå¯ä»¥æ¥å—é¢å¤–çš„å‚æ•°ï¼Œå¦‚&lt;code>rejects&lt;/code>ï¼Œä½œä¸ºé…ç½®ã€‚å…¶ç»“æœæ˜¯ï¼Œä¸­é—´ä»¶è¿”å›çš„ Handler å¯ä»¥è¡¨ç°å¾—æ›´åŠ çµæ´»ï¼ˆç”±äºé…ç½®ï¼‰ï¼Œè€Œä¸”å®ƒå¯¹å‡½æ•°ç®¡é“æœ‰æ›´å¤šçš„æ§åˆ¶ï¼ˆå› ä¸ºå®ƒå¯ä»¥é€‰æ‹©æ˜¯å¦è°ƒç”¨ä¸‹ä¸€ä¸ª Handlerï¼‰ã€‚&lt;/p>
&lt;h3 id="ä»»åŠ¡æ˜¯ä¸­é—´ä»¶å·¥å‚">ä»»åŠ¡æ˜¯ä¸­é—´ä»¶å·¥å‚&lt;/h3>
&lt;p>Boot é€šè¿‡å°†ä¸­é—´ä»¶çš„é…ç½®ä¸ Handler çš„åˆ›å»ºåˆ†å¼€ï¼Œå°†è¿™ç§ä½¿å‡½æ•°ç»„åˆæ›´åŠ çµæ´»çš„æ¨¡å¼å‘å‰æ¨è¿›äº†ä¸€æ­¥ã€‚é¦–å…ˆï¼Œä½ åˆ›å»ºä¸€ä¸ªæ¥å—&lt;em>n&lt;/em>é…ç½®å‚æ•°çš„å‡½æ•°ã€‚è¿™å°±æ˜¯&lt;em>ä¸­é—´ä»¶å·¥å‚&lt;/em>ï¼Œå®ƒè¿”å›ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚ä¸­é—´ä»¶å‡½æ•°å¸Œæœ›å¾—åˆ°ä¸€ä¸ªå‚æ•°ï¼Œå³ä¸‹ä¸€ä¸ª Handlerï¼Œå¹¶è¿”å›ä¸€ä¸ª Handlerï¼Œå°±åƒå‰é¢çš„ä¾‹å­ä¸­ä¸€æ ·ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‘ç‰¢éªšçš„ä¸­é—´ä»¶å·¥å‚ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn whiney-middleware-factory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [rejects]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:pre [(set? rejects)]}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [handler]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [x]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (= x 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;I&amp;#39;m not going to bother doing anything to that&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [y (handler x)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (rejects y)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;I don&amp;#39;t like &amp;#34; y &amp;#34; :&amp;#39;(&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str y)))))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def whiney-strinc ((whiney-middleware-factory #{3}) inc))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™æ®µä»£ç ä¸æ¸…å• B-1 å‡ ä¹ç›¸åŒã€‚å˜åŒ–åœ¨äºï¼Œæœ€ä¸Šé¢çš„å‡½æ•°ï¼Œ&lt;code>whiney-middleware-factory&lt;/code>ï¼Œç°åœ¨åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œ&lt;code>rejects&lt;/code>ã€‚å®ƒè¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå³ä¸­é—´ä»¶ï¼Œå®ƒå¸Œæœ›å¾—åˆ°ä¸€ä¸ªå‚æ•°ï¼Œå³ Handlerã€‚å…¶ä½™çš„ä»£ç éƒ½æ˜¯ä¸€æ ·çš„ã€‚&lt;/p>
&lt;p>åœ¨ Boot ä¸­ï¼Œä»»åŠ¡å¯ä»¥å……å½“ä¸­é—´ä»¶å·¥å‚ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬æŠŠ&lt;code>fire&lt;/code>ä»»åŠ¡åˆ†æˆä¸¤ä¸ªä»»åŠ¡ï¼š&lt;code>what&lt;/code>å’Œ&lt;code>fire&lt;/code>ï¼ˆè§æ¸…å• B-2ï¼‰ã€‚Â &lt;code>what&lt;/code>è®©ä½ æŒ‡å®šä¸€ä¸ªå¯¹è±¡ä»¥åŠå®ƒæ˜¯å¦æ˜¯å¤æ•°ï¼Œè€Œ&lt;code>fire&lt;/code>åˆ™å®£å¸ƒå®ƒç€ç«äº†ã€‚è¿™æ˜¯ä¼Ÿå¤§çš„æ¨¡å—åŒ–è½¯ä»¶å·¥ç¨‹ï¼Œå› ä¸ºå®ƒå…è®¸ä½ æ·»åŠ å…¶ä»–ä»»åŠ¡ï¼Œå¦‚&lt;code>gnomes&lt;/code>ï¼Œå®£å¸ƒä¸€ä¸ªä¸œè¥¿è¢«åœ°ç²¾å é¢†äº†ï¼Œè¿™åœ¨å®¢è§‚ä¸ŠåŒæ ·æœ‰ç”¨ã€‚(ä½œä¸ºä¸€ä¸ªç»ƒä¹ ï¼Œå°è¯•åˆ›å»º gnome ä»»åŠ¡ã€‚å®ƒåº”è¯¥å’Œ&lt;code>what&lt;/code>ä»»åŠ¡ç»„æˆï¼Œå°±åƒ&lt;code>fire&lt;/code>ä¸€æ ·ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(deftask what
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Specify a thing&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [t thing THING str &amp;#34;An object&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> p pluralize bool &amp;#34;Whether to pluralize&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn middleware [next-handler]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (fn handler [fileset]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (next-handler (merge fileset {:thing thing :pluralize pluralize})))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(deftask fire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Announce a thing is on fire&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn middleware [next-handler]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (fn handler [fileset]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [verb (if (:pluralize fileset) &amp;#34;are&amp;#34; &amp;#34;is&amp;#34;)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;My&amp;#34; (:thing fileset) verb &amp;#34;on fire!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fileset))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>å®£å¸ƒæŸç‰©ç€ç«çš„å¯ç»„åˆ Boot ä»»åŠ¡çš„å®Œæ•´ä»£ç &lt;/li>
&lt;/ol>
&lt;p>ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•åœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œå®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">boot what -t &amp;#34;pants&amp;#34; -p - fire
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯åœ¨ REPL ä¸­çš„è¿è¡Œæ–¹å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(boot (what :thing &amp;#34;pants&amp;#34; :pluralize true) (fire))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç­‰ä¸€ä¸‹ï¼Œé‚£ä¸ª&lt;code>boot'çš„è°ƒç”¨æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿåœ¨âŠå’Œâ‹çš„&lt;/code>fileset&lt;code>åˆæ˜¯æ€ä¹ˆå›äº‹ï¼Ÿç”¨Michaçš„è¯è¯´ï¼Œ&amp;quot;&lt;/code>boot&lt;code>å®è´Ÿè´£è®¾ç½®å’Œæ¸…ç†ï¼ˆåˆ›å»ºåˆå§‹æ–‡ä»¶é›†åˆï¼Œåœæ­¢ç”±ä»»åŠ¡å¯åŠ¨çš„æœåŠ¡å™¨ï¼Œè¯¸å¦‚æ­¤ç±»çš„äº‹æƒ…ï¼‰ã€‚ä»»åŠ¡æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥è°ƒç”¨å®ƒä»¬ï¼Œä½†å¦‚æœå®ƒä»¬ä½¿ç”¨äº†æ–‡ä»¶é›†åˆï¼Œå°±ä¼šå¤±è´¥ï¼Œé™¤éä½ é€šè¿‡&lt;/code>boot`å®è°ƒç”¨å®ƒä»¬ã€‚&amp;rdquo; è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹æ–‡ä»¶é›†åˆçš„æƒ…å†µã€‚&lt;/p>
&lt;h2 id="æ–‡ä»¶é›†åˆ">æ–‡ä»¶é›†åˆ&lt;/h2>
&lt;p>å‰é¢æˆ‘æåˆ°ï¼Œä¸­é—´ä»¶æ˜¯ç”¨æ¥åˆ›å»º&lt;em>åŸŸç‰¹å®šçš„&lt;/em>å‡½æ•°ç®¡é“ã€‚è¿™æ„å‘³ç€æ¯ä¸ª Handler éƒ½æœŸæœ›æ¥æ”¶ç‰¹å®šé¢†åŸŸçš„æ•°æ®å¹¶è¿”å›ç‰¹å®šé¢†åŸŸçš„æ•°æ®ã€‚ä»¥ Ring ä¸ºä¾‹ï¼Œæ¯ä¸ª Handler éƒ½å¸Œæœ›æ”¶åˆ°ä¸€ä¸ªä»£è¡¨ HTTP è¯·æ±‚çš„è¯·æ±‚ Mapï¼Œå®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{:server-port 80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :request-method :get
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :scheme :http}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¯ä¸ª Handler å¯ä»¥é€‰æ‹©ä»¥æŸç§æ–¹å¼ä¿®æ”¹è¿™ä¸ªè¯·æ±‚ Mapï¼Œç„¶åå†ä¼ é€’ç»™ä¸‹ä¸€ä¸ª Handlerï¼Œä¾‹å¦‚ï¼Œæ·»åŠ ä¸€ä¸ª&lt;code>:params&lt;/code>é”®ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²å’Œ POST å‚æ•°çš„æ¼‚äº® Clojure Mapã€‚ç¯å½¢ Handler è¿”å›ä¸€ä¸ª&lt;em>å“åº” Map&lt;/em>ï¼Œç”±&lt;code>:status'ã€&lt;/code>:headers&amp;rsquo;å’Œ`:body&amp;rsquo;ä¸‰ä¸ªé”®ç»„æˆï¼Œæ¯ä¸ª Handler å¯ä»¥å†æ¬¡ä»¥æŸç§æ–¹å¼è½¬æ¢è¿™äº›æ•°æ®ï¼Œç„¶åå†è¿”å›ç»™å…¶çˆ¶ Handlerã€‚&lt;/p>
&lt;p>åœ¨ Boot ä¸­ï¼Œæ¯ä¸ª Handler æ¥æ”¶å¹¶è¿”å›ä¸€ä¸ª&lt;em>fileset&lt;/em>ã€‚æ–‡ä»¶é›†åˆçš„æŠ½è±¡è®©ä½ æŠŠæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶å½“ä½œä¸å¯æ›´æ”¹çš„æ•°æ®ï¼Œè¿™å¯¹æ„å»ºå·¥å…·æ¥è¯´æ˜¯ä¸€é¡¹ä¼Ÿå¤§çš„åˆ›æ–°ï¼Œå› ä¸ºæ„å»ºé¡¹ç›®æ˜¯ä»¥æ–‡ä»¶ä¸ºä¸­å¿ƒçš„ã€‚ä¾‹å¦‚ï¼Œä½ çš„é¡¹ç›®å¯èƒ½éœ€è¦åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šæ”¾ç½®ä¸´æ—¶çš„ã€ä¸­é—´çš„æ–‡ä»¶ã€‚é€šå¸¸ï¼Œåœ¨å¤§å¤šæ•°æ„å»ºå·¥å…·ä¸­ï¼Œè¿™äº›æ–‡ä»¶è¢«æ”¾ç½®åœ¨ä¸€äº›ç‰¹åˆ«å‘½åçš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼Œ&lt;em>project/target/tmp&lt;/em>ã€‚è¿™æ ·åšçš„é—®é¢˜æ˜¯ï¼Œ&lt;em>project/target/tmp&lt;/em>å®é™…ä¸Šæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå…¶ä»–ä»»åŠ¡å¯èƒ½ä¼šæ„å¤–åœ°æŠŠå®ƒæä¹±ã€‚&lt;/p>
&lt;p>Boot çš„æ–‡ä»¶é›†åˆæŠ½è±¡é€šè¿‡åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šå¢åŠ ä¸€å±‚é—´æ¥æ€§æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¯”æ–¹è¯´ï¼Œä»»åŠ¡ A åˆ›å»ºäº†æ–‡ä»¶ Xï¼Œå¹¶å‘Šè¯‰æ–‡ä»¶é›†åˆæ¥å­˜å‚¨å®ƒã€‚åœ¨å¹•åï¼Œæ–‡ä»¶é›†åˆå°†è¯¥æ–‡ä»¶å­˜å‚¨åœ¨ä¸€ä¸ªåŒ¿åçš„ä¸´æ—¶ç›®å½•ä¸­ã€‚ç„¶åï¼Œè¯¥æ–‡ä»¶é›†åˆè¢«ä¼ é€’ç»™ä»»åŠ¡ Bï¼Œä»»åŠ¡ B ä¿®æ”¹äº†æ–‡ä»¶ X å¹¶è¦æ±‚æ–‡ä»¶é›†åˆå­˜å‚¨ç»“æœã€‚åœ¨å¹•åï¼Œä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œæ–‡ä»¶ Yï¼Œè¢«åˆ›å»ºå’Œå­˜å‚¨ï¼Œä½†æ–‡ä»¶ X ä»ç„¶æ²¡æœ‰è¢«è§¦åŠ¨ã€‚åœ¨ä»»åŠ¡ B ä¸­ï¼Œä¸€ä¸ªæ›´æ–°çš„æ–‡ä»¶é›†åˆè¢«è¿”å›ã€‚è¿™ç›¸å½“äºç”¨ Map åš &amp;ldquo;assoc-in&amp;rdquo;ã€‚ä»»åŠ¡ A ä»ç„¶å¯ä»¥è®¿é—®åŸå§‹æ–‡ä»¶é›†åˆå’Œå®ƒå¼•ç”¨çš„æ–‡ä»¶ã€‚&lt;/p>
&lt;p>åœ¨æ¸…å• B-2 ä¸­çš„&lt;code>what'å’Œ&lt;/code>fire&amp;rsquo;ä»»åŠ¡ä¸­ï¼Œä½ ç”šè‡³éƒ½æ²¡æœ‰ä½¿ç”¨è¿™äº›å¾ˆé…·çš„æ–‡ä»¶ç®¡ç†åŠŸèƒ½ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå½“ Boot ç»„æˆä»»åŠ¡æ—¶ï¼Œå®ƒå¸Œæœ› Handler èƒ½æ¥æ”¶å¹¶è¿”å› fileset è®°å½•ã€‚å› æ­¤ï¼Œä¸ºäº†è·¨ä»»åŠ¡ä¼ è¾¾ä½ çš„æ•°æ®ï¼Œä½ å·å·åœ°ç”¨&lt;code>(merge fileset {:thing thing :pluralize pluralize})&lt;/code>æŠŠå®ƒåŠ åˆ°æ–‡ä»¶é›†åˆè®°å½•ä¸­ã€‚&lt;/p>
&lt;p>è™½ç„¶è¿™æ¶µç›–äº†ä¸­é—´ä»¶å·¥å‚çš„åŸºæœ¬æ¦‚å¿µï¼Œä½†ä½ è¿˜éœ€è¦å­¦ä¹ æ›´å¤šçš„ä¸œè¥¿æ¥å……åˆ†åˆ©ç”¨æ–‡ä»¶é›†åˆçš„ä¼˜åŠ¿ã€‚åœ¨ fileset wikiï¼ˆ&lt;em>&lt;a class="link" href="https://github.com/boot-clj/boot/wiki/Filesets" target="_blank" rel="noopener"
>Filesets - boot-clj/boot Wiki - GitHub&lt;/a>&lt;/em>ï¼‰ä¸­ï¼Œå¯¹ä½¿ç”¨ filesets çš„æœºåˆ¶éƒ½æœ‰è§£é‡Šã€‚åŒæ—¶ï¼Œæˆ‘å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½ç»™ä½ ä¸€ä¸ªå¾ˆå¥½çš„æ¦‚å¿µæ€§æ¦‚è¿°!&lt;/p>
&lt;h2 id="æ¥ä¸‹æ¥çš„æ­¥éª¤">æ¥ä¸‹æ¥çš„æ­¥éª¤&lt;/h2>
&lt;p>æœ¬é™„å½•çš„é‡ç‚¹æ˜¯è§£é‡Š Boot èƒŒåçš„æ¦‚å¿µã€‚ä¸è¿‡ï¼ŒBoot è¿˜æœ‰ä¸€å †å…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚&lt;code>set-env!&lt;/code>å’Œ&lt;code>task-options!&lt;/code>ï¼Œå½“ä½ çœŸæ­£ä½¿ç”¨å®ƒçš„æ—¶å€™ï¼Œä¼šè®©ä½ çš„ç¼–ç¨‹ç”Ÿæ´»æ›´è½»æ¾ã€‚å®ƒæä¾›äº†æƒŠäººçš„ç¥å¥‡åŠŸèƒ½ï¼Œæ¯”å¦‚æä¾› classpath éš”ç¦»ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç”¨ä¸€ä¸ª JVM è¿è¡Œå¤šä¸ªé¡¹ç›®ï¼Œå¹¶è®©ä½ åœ¨æ— éœ€é‡å¯ REPL çš„æƒ…å†µä¸‹å‘é¡¹ç›®æ·»åŠ æ–°çš„ä¾èµ–é¡¹ã€‚å¦‚æœ Boot è®©ä½ å¿ƒç—’éš¾è€ï¼Œè¯·æŸ¥çœ‹å®ƒçš„ READMEï¼Œäº†è§£æ›´å¤šå…³äºå®é™…ä½¿ç”¨çš„ä¿¡æ¯ã€‚å¦å¤–ï¼Œå®ƒçš„ wiki æä¾›äº†ä¸€æµçš„æ–‡æ¡£ã€‚&lt;/p></description></item><item><title>AppendixA ç”¨ Leiningen æ„å»ºå’Œå¼€å‘</title><link>https://example.com/p/appendixa-%E7%94%A8-leiningen-%E6%9E%84%E5%BB%BA%E5%92%8C%E5%BC%80%E5%8F%91/</link><pubDate>Sat, 15 Jan 2022 21:39:36 +0800</pubDate><guid>https://example.com/p/appendixa-%E7%94%A8-leiningen-%E6%9E%84%E5%BB%BA%E5%92%8C%E5%BC%80%E5%8F%91/</guid><description>&lt;h1 id="ç”¨-leiningen-æ„å»ºå’Œå¼€å‘">ç”¨ Leiningen æ„å»ºå’Œå¼€å‘&lt;/h1>
&lt;p>ç”¨ä»»ä½•è¯­è¨€ç¼–å†™è½¯ä»¶éƒ½éœ€è¦ç”Ÿæˆ&lt;em>å·¥ä»¶&lt;/em>ï¼Œå³å¯æ‰§è¡Œæ–‡ä»¶æˆ–åº“åŒ…ï¼Œç”¨äºéƒ¨ç½²æˆ–å…±äº«ã€‚å®ƒè¿˜æ¶‰åŠåˆ°ç®¡ç†ä¾èµ–å·¥ä»¶ï¼Œä¹Ÿç§°ä¸º&lt;em>ä¾èµ–&lt;/em>ï¼Œä»¥ç¡®ä¿å®ƒä»¬è¢«åŠ è½½åˆ°ä½ æ­£åœ¨æ„å»ºçš„é¡¹ç›®ä¸­ã€‚Clojurists ä¸­æœ€æµè¡Œçš„ç®¡ç†å·¥ä»¶çš„å·¥å…·æ˜¯ Leiningenï¼Œæœ¬é™„å½•å°†å‘Šè¯‰ä½ å¦‚ä½•ä½¿ç”¨å®ƒã€‚ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Leiningen æ¥å®Œå…¨å¢å¼ºä½ çš„å¼€å‘ç»éªŒï¼Œä½¿ç”¨&lt;em>æ’ä»¶&lt;/em>ã€‚&lt;/p>
&lt;h2 id="artifact-ecosystem">Artifact Ecosystem&lt;/h2>
&lt;p>å› ä¸º Clojure æ‰˜ç®¡åœ¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šï¼Œæ‰€ä»¥ Clojure çš„å·¥ä»¶æ˜¯ä»¥ JAR æ–‡ä»¶çš„å½¢å¼åˆ†å‘çš„ï¼ˆåœ¨ç¬¬ 12 ç« æœ‰ä»‹ç»ï¼‰ã€‚Java åœ°å·²ç»æœ‰ä¸€ä¸ªå¤„ç† JAR æ–‡ä»¶çš„å®Œæ•´çš„å·¥ä»¶ç”Ÿæ€ç³»ç»Ÿï¼ŒClojure ä¹Ÿä½¿ç”¨å®ƒã€‚&lt;em>ç¥å™¨ç”Ÿæ€ç³»ç»Ÿ&lt;/em>å¹¶ä¸æ˜¯ä¸€ä¸ªå®˜æ–¹çš„ç¼–ç¨‹æœ¯è¯­ï¼›æˆ‘ç”¨å®ƒæ¥æŒ‡ä»£ç”¨äºè¯†åˆ«å’Œåˆ†å‘ç¥å™¨çš„ä¸€å¥—å·¥å…·ã€èµ„æºå’Œæƒ¯ä¾‹ã€‚Java çš„ç”Ÿæ€ç³»ç»Ÿæ˜¯å›´ç»•ç€ Maven æ„å»ºå·¥å…·å‘å±•èµ·æ¥çš„ï¼Œç”±äº Clojure ä½¿ç”¨è¿™ä¸ªç”Ÿæ€ç³»ç»Ÿï¼Œä½ ä¼šç»å¸¸çœ‹åˆ°å¯¹ Maven çš„å¼•ç”¨ã€‚Maven æ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥å…·ï¼Œå¯ä»¥æ‰§è¡Œå„ç§å¤æ€ªçš„é¡¹ç›®ç®¡ç†ä»»åŠ¡ã€‚å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œä½ ä¸éœ€è¦è·å¾— Maven å­¦çš„åšå£«å­¦ä½å°±èƒ½æˆä¸ºä¸€åæœ‰æ•ˆçš„ Clojuristã€‚ä½ éœ€è¦çŸ¥é“çš„å”¯ä¸€ç‰¹å¾æ˜¯ï¼ŒMaven è§„å®šäº†ä¸€ç§è¯†åˆ« Clojure é¡¹ç›®æ‰€éµå®ˆçš„å·¥ä»¶çš„æ¨¡å¼ï¼Œå®ƒè¿˜è§„å®šäº†å¦‚ä½•åœ¨ Maven &lt;em>ä»“åº“&lt;/em>ä¸­æ‰˜ç®¡è¿™äº›å·¥ä»¶ï¼ŒMaven *ä»“åº“åªæ˜¯å­˜å‚¨å·¥ä»¶ä»¥ä¾›åˆ†å‘çš„æœåŠ¡å™¨ã€‚&lt;/p>
&lt;h3 id="identification">Identification&lt;/h3>
&lt;p>Maven å·¥ä»¶éœ€è¦ä¸€ä¸ª&lt;em>ç»„ ID&lt;/em>ï¼Œä¸€ä¸ª&lt;em>å·¥ä»¶ ID&lt;/em>ï¼Œä»¥åŠä¸€ä¸ª&lt;em>ç‰ˆæœ¬&lt;/em>ã€‚ä½ å¯ä»¥åœ¨&lt;em>project.clj&lt;/em>æ–‡ä»¶ä¸­ä¸ºä½ çš„é¡¹ç›®æŒ‡å®šè¿™äº›ã€‚ä»¥ä¸‹æ˜¯ä½ åœ¨ç¬¬ä¸€ç« åˆ›å»ºçš„&lt;code>clojure-noob&lt;/code>é¡¹ç›®çš„&lt;em>project.clj&lt;/em>ç¬¬ä¸€è¡Œçš„å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defproject clojure-noob &amp;#34;0.1.0-SNAPSHOT&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>clojure-noob&lt;/code>æ˜¯ä½ é¡¹ç›®çš„ç»„ ID å’Œå·¥ä»¶ IDï¼Œ&lt;code>&amp;quot;0.1.0-SNAPSHOT&amp;quot;&lt;/code>æ˜¯å…¶ç‰ˆæœ¬ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç‰ˆæœ¬æ˜¯æ°¸ä¹…æ€§çš„ï¼›å¦‚æœä½ å°†ä¸€ä¸ªç‰ˆæœ¬ä¸º 0.1.0 çš„å·¥ä»¶éƒ¨ç½²åˆ°å­˜å‚¨åº“ï¼Œä½ ä¸èƒ½å¯¹è¯¥å·¥ä»¶è¿›è¡Œä¿®æ”¹å¹¶ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬å·è¿›è¡Œéƒ¨ç½²ã€‚æ‚¨éœ€è¦æ”¹å˜ç‰ˆæœ¬å·ã€‚(è®¸å¤šç¨‹åºå‘˜å–œæ¬¢ Semantic Versioning ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥åœ¨*&lt;a class="link" href="http://semver.org/" target="_blank" rel="noopener"
>Semantic Versioning 2.0.0 | Semantic Versioning&lt;/a>.*ä¸­é˜…è¯»åˆ°è¿™ä¸€ç³»ç»Ÿã€‚ï¼‰ å¦‚æœä½ æƒ³è¡¨æ˜è¯¥ç‰ˆæœ¬æ˜¯ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼Œå¹¶ä¸”ä½ è®¡åˆ’ä¸æ–­åœ°æ›´æ–°å®ƒï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç‰ˆæœ¬å·åé¢åŠ ä¸Š&lt;code>-SNAPSHOT&lt;/code>ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³è®©ä½ çš„ç»„ ID ä¸ä½ çš„å·¥ä»¶ ID ä¸åŒï¼Œä½ å¯ä»¥ç”¨æ–œçº¿å°†ä¸¤è€…åˆ†å¼€ï¼Œåƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defproject group-id/artifact-id &amp;#34;0.1.0-SNAPSHOT&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šå¸¸ï¼Œå¼€å‘è€…ä¼šä½¿ç”¨ä»–ä»¬çš„å…¬å¸åç§°æˆ– GitHub ç”¨æˆ·åä½œä¸ºç»„çš„ IDã€‚&lt;/p>
&lt;h3 id="ä¾èµ–">ä¾èµ–&lt;/h3>
&lt;p>ä½ çš„&lt;em>project.clj&lt;/em>æ–‡ä»¶è¿˜åŒ…æ‹¬ä¸€è¡Œçœ‹èµ·æ¥åƒè¿™æ ·çš„å†…å®¹ï¼Œå®ƒåˆ—å‡ºäº†ä½ é¡¹ç›®çš„ä¾èµ–ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> :dependencies [[org.clojure/clojure &amp;#34;1.9.0&amp;#34;]]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ æƒ³ä½¿ç”¨ä¸€ä¸ªåº“ï¼Œä½¿ç”¨ä¸ä½ å‘½åé¡¹ç›®æ—¶ç›¸åŒçš„å‘½åæ¨¡å¼å°†å…¶æ·»åŠ åˆ°è¿™ä¸ªä¾èµ– Vector ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³è½»æ¾åœ°å¤„ç†æ—¥æœŸå’Œæ—¶é—´ï¼Œä½ å¯ä»¥æ·»åŠ  clj-time åº“ï¼Œåƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> :dependencies [[org.clojure/clojure &amp;#34;1.9.0&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [clj-time &amp;#34;0.9.0&amp;#34;]]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹æ¬¡ä½ å¯åŠ¨ä½ çš„é¡¹ç›®æ—¶ï¼Œæ— è®ºæ˜¯é€šè¿‡è¿è¡Œå®ƒè¿˜æ˜¯é€šè¿‡å¯åŠ¨ REPLï¼ŒLeiningen éƒ½ä¼šè‡ªåŠ¨ä¸‹è½½ clj-time å¹¶ä½¿å…¶åœ¨ä½ çš„é¡¹ç›®ä¸­å¯ç”¨ã€‚&lt;/p>
&lt;p>Clojure ç¤¾åŒºåˆ›é€ äº†å¤§é‡æœ‰ç”¨çš„åº“ï¼Œå¯»æ‰¾å®ƒä»¬çš„å¥½åœ°æ–¹æ˜¯*&lt;a class="link" href="http://www.clojure-toolbox.com/" target="_blank" rel="noopener"
>http://www.clojure-toolbox.com&lt;/a>*çš„ Clojure å·¥å…·ç®±ï¼Œå®ƒæ ¹æ®é¡¹ç›®çš„ç›®çš„è¿›è¡Œåˆ†ç±»ã€‚å‡ ä¹æ¯ä¸€ä¸ª Clojure åº“éƒ½åœ¨å…¶ README çš„é¡¶éƒ¨æä¾›äº†å®ƒçš„æ ‡è¯†ç¬¦ï¼Œä½¿ä½ å¾ˆå®¹æ˜“æ‰¾å‡ºå¦‚ä½•æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„ Leiningen ä¾èµ–é¡¹ä¸­ã€‚&lt;/p>
&lt;p>æœ‰æ—¶ä½ å¯èƒ½æƒ³ä½¿ç”¨ä¸€ä¸ª Java åº“ï¼Œä½†æ ‡è¯†ç¬¦å¹¶ä¸é‚£ä¹ˆå®¹æ˜“è·å¾—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³æ·»åŠ  Apache Commons Emailï¼Œä½ å¿…é¡»åœ¨ç½‘ä¸Šæœç´¢ï¼Œç›´åˆ°ä½ æ‰¾åˆ°ä¸€ä¸ªåŒ…å«è¿™æ ·å†…å®¹çš„ç½‘é¡µã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;lt;dependency&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;artifactId&amp;gt;commons-email&amp;lt;/artifactId&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;version&amp;gt;1.3.3&amp;lt;/version&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/dependency&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥ XML æ˜¯ Java é¡¹ç›®æ²Ÿé€šå…¶ Maven æ ‡è¯†ç¬¦çš„æ–¹å¼ã€‚è¦æŠŠå®ƒæ·»åŠ åˆ° Clojure é¡¹ç›®ä¸­ï¼Œä½ éœ€è¦ä¿®æ”¹&lt;code>:dependencies&lt;/code>Vectorï¼Œä½¿å…¶çœ‹èµ·æ¥åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> :dependencies [[org.clojure/clojure &amp;#34;1.9.0&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [clj-time &amp;#34;0.9.0&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [org.apache.commons/commons-email &amp;#34;1.3.3&amp;#34;]]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸»è¦çš„ Clojure åº“æ˜¯ Clojarsï¼ˆ&lt;em>&lt;a class="link" href="https://clojars.org/" target="_blank" rel="noopener"
>Clojars&lt;/a>&lt;/em>ï¼‰ï¼Œä¸»è¦çš„ Java åº“æ˜¯ The Central Repositoryï¼ˆ&lt;em>&lt;a class="link" href="http://search.maven.org/" target="_blank" rel="noopener"
>Maven Central Repository Search&lt;/a>&lt;/em>ï¼‰ï¼Œäººä»¬é€šå¸¸åªæŠŠå®ƒç§°ä¸º&lt;em>Central&lt;/em>ï¼Œå°±åƒæ—§é‡‘å±±å±…æ°‘æŠŠæ—§é‡‘å±±ç§°ä¸º&lt;em>the city&lt;/em>ä¸€æ ·ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™äº›ç½‘ç«™æ¥å¯»æ‰¾åº“å’Œå®ƒä»¬çš„æ ‡è¯†ç¬¦ã€‚&lt;/p>
&lt;p>è¦æŠŠä½ è‡ªå·±çš„é¡¹ç›®éƒ¨ç½²åˆ° Clojarsï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯åœ¨é‚£é‡Œåˆ›å»ºä¸€ä¸ªè´¦æˆ·ï¼Œç„¶ååœ¨ä½ çš„é¡¹ç›®ä¸­è¿è¡Œ&lt;code>lein deploy clojars&lt;/code>ã€‚è¯¥ä»»åŠ¡ä¼šç”Ÿæˆ Maven å·¥ä»¶æ‰€éœ€çš„ä¸€åˆ‡ï¼ŒåŒ…æ‹¬ POM æ–‡ä»¶ï¼ˆæˆ‘å°±ä¸å¤šè¯´äº†ï¼‰å’Œ JAR æ–‡ä»¶ï¼Œä»¥ä¾¿å‚¨å­˜åœ¨ä»“åº“ä¸­ã€‚ç„¶åå°†å®ƒä»¬ä¸Šä¼ åˆ° Clojarsã€‚&lt;/p>
&lt;h3 id="æ’ä»¶">æ’ä»¶&lt;/h3>
&lt;p>Leiningen è®©ä½ ä½¿ç”¨&lt;em>æ’ä»¶&lt;/em>ï¼Œè¿™æ˜¯ä¸€äº›åœ¨ä½ å†™ä»£ç æ—¶èƒ½å¸®åŠ©ä½ çš„åº“ã€‚ä¾‹å¦‚ï¼ŒEastwood æ’ä»¶æ˜¯ä¸€ä¸ª Clojure æ£€æŸ¥å·¥å…·ï¼›å®ƒå¯ä»¥è¯†åˆ«å†™å¾—ä¸å¥½çš„ä»£ç ã€‚ä½ é€šå¸¸è¦åœ¨*$HOME/.lein/profiles.clj&lt;em>æ–‡ä»¶ä¸­æŒ‡å®šä½ çš„æ’ä»¶ã€‚è¦æ·»åŠ  Eastwoodï¼Œä½ è¦æŠŠ&lt;/em>profiles.clj*æ”¹æˆè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{:user {:plugins [[jonase/eastwood &amp;#34;0.2.1&amp;#34;]] ] ã€‚}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±ä¸ºä½ çš„æ‰€æœ‰é¡¹ç›®å¯ç”¨äº†ä¸€ä¸ª&lt;code>eastwood'Leiningenä»»åŠ¡ï¼Œä½ å¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ç”¨&lt;/code>lein eastwood&amp;rsquo;è¿è¡Œã€‚&lt;/p>
&lt;p>Leiningen çš„ GitHub é¡¹ç›®é¡µé¢æœ‰å…³äºå¦‚ä½•ä½¿ç”¨é…ç½®æ–‡ä»¶å’Œæ’ä»¶çš„ä¼˜ç§€æ–‡æ¡£ï¼Œå®ƒåŒ…æ‹¬ä¸€ä¸ªæ–¹ä¾¿çš„æ’ä»¶åˆ—è¡¨ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>æœ¬é™„å½•ç€é‡ä»‹ç»äº†é¡¹ç›®ç®¡ç†ä¸­é‚£äº›é‡è¦ä½†åˆéš¾ä»¥äº†è§£çš„æ–¹é¢ï¼Œæ¯”å¦‚ä»€ä¹ˆæ˜¯ Maven ä»¥åŠ Clojure ä¸å®ƒçš„å…³ç³»ã€‚å®ƒå‘ä½ å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Leiningen æ¥å‘½åä½ çš„é¡¹ç›®ï¼ŒæŒ‡å®šä¾èµ–å…³ç³»ï¼Œå¹¶éƒ¨ç½²åˆ° Clojarsã€‚Leiningen ä¸ºè½¯ä»¶å¼€å‘ä»»åŠ¡æä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä½†å¹¶ä¸æ¶‰åŠå®é™…ç¼–å†™ä»£ç ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œè¯·åœ¨ç½‘ä¸ŠæŸ¥çœ‹ Leiningen æ•™ç¨‹*[leiningen/TUTORIAL.md at stable - technomancy/leiningen - GitHub]ï¼ˆ&lt;a class="link" href="https://github.com/technomancy/leiningen/blob/stable/doc/TUTORIAL.md" target="_blank" rel="noopener"
>https://github.com/technomancy/leiningen/blob/stable/doc/TUTORIAL.md&lt;/a>ï¼‰*.&lt;/p></description></item><item><title>Chapter13 æŠ½è±¡</title><link>https://example.com/p/chapter13-%E6%8A%BD%E8%B1%A1/</link><pubDate>Sat, 15 Jan 2022 21:29:04 +0800</pubDate><guid>https://example.com/p/chapter13-%E6%8A%BD%E8%B1%A1/</guid><description>&lt;h1 id="ç”¨-multimethodsåè®®å’Œè®°å½•åˆ›å»ºå’Œæ‰©å±•æŠ½è±¡æ¦‚å¿µ">ç”¨ Multimethodsã€åè®®å’Œè®°å½•åˆ›å»ºå’Œæ‰©å±•æŠ½è±¡æ¦‚å¿µ&lt;/h1>
&lt;p>èŠ±ä¸€åˆ†é’Ÿæ€è€ƒä¸€ä¸‹ï¼Œä½œä¸ºå¤§è‡ªç„¶çš„é¡¶çº§äº§å“ä¹‹ä¸€ï¼šäººç±»æ˜¯å¤šä¹ˆä¼Ÿå¤§ã€‚ä½œä¸ºä¸€ä¸ªäººç±»ï¼Œä½ å¯ä»¥åœ¨ç¤¾äº¤åª’ä½“ä¸Šé—²èŠï¼Œç©é¾™ä¸åœ°ä¸‹åŸï¼Œæˆ´å¸½å­ã€‚ä¹Ÿè®¸æ›´é‡è¦çš„æ˜¯ï¼Œä½ å¯ä»¥ç”¨æŠ½è±¡çš„æ¦‚å¿µæ¥æ€è€ƒå’Œäº¤æµã€‚&lt;/p>
&lt;p>æŠ½è±¡æ€è€ƒçš„èƒ½åŠ›ç¡®å®æ˜¯äººç±»æœ€å¥½çš„ç‰¹å¾ä¹‹ä¸€ã€‚å®ƒå¯ä»¥è®©ä½ è§„é¿ä½ çš„è®¤çŸ¥æé™ï¼Œå°†ä¸åŒçš„ç»†èŠ‚æ†ç»‘åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæ•´é½çš„æ¦‚å¿µåŒ…ï¼Œè®©ä½ å¯ä»¥åœ¨å·¥ä½œè®°å¿†ä¸­æŒæœ‰ã€‚ä½ ä¸éœ€è¦å»æƒ³ &amp;ldquo;å¯æŒ¤å‹çš„çº¢çƒé¼»å­è£…é¥° &amp;ldquo;è¿™ç§ç¬¨é‡çš„æƒ³æ³•ï¼Œè€Œåªéœ€è¦ &amp;ldquo;å°ä¸‘é¼»å­ &amp;ldquo;è¿™ä¸ªæ¦‚å¿µã€‚&lt;/p>
&lt;p>åœ¨ Clojure ä¸­ï¼Œä¸€ä¸ª&lt;em>æŠ½è±¡&lt;/em>æ˜¯ä¸€ä¸ªæ“ä½œçš„é›†åˆï¼Œè€Œ&lt;em>æ•°æ®ç±»å‹&lt;/em>å®ç°æŠ½è±¡ã€‚ä¾‹å¦‚ï¼Œseq æŠ½è±¡ç”± &amp;ldquo;first &amp;ldquo;å’Œ &amp;ldquo;rest &amp;ldquo;ç­‰æ“ä½œç»„æˆï¼Œè€Œ Vector æ•°æ®ç±»å‹æ˜¯è¯¥æŠ½è±¡çš„å®ç°ï¼›å®ƒå¯¹æ‰€æœ‰ seq æ“ä½œåšå‡ºå“åº”ã€‚åƒ&lt;code>[:seltzer :water]&lt;/code>è¿™æ ·çš„ç‰¹å®š Vector æ˜¯è¯¥æ•°æ®ç±»å‹çš„*å®ä¾‹ã€‚&lt;/p>
&lt;p>ç¼–ç¨‹è¯­è¨€è¶Šæ˜¯è®©ä½ ä»¥æŠ½è±¡çš„æ–¹å¼æ€è€ƒå’Œå†™ä½œï¼Œä½ çš„ç”Ÿäº§åŠ›å°±è¶Šé«˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çŸ¥é“ä¸€ä¸ªæ•°æ®ç»“æ„æ˜¯ seq æŠ½è±¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œä½ å°±å¯ä»¥ç«‹å³è°ƒç”¨ä¸€ä¸ªå¤§çš„çŸ¥è¯†ç½‘ï¼Œäº†è§£å“ªäº›å‡½æ•°å¯ä»¥ä¸æ•°æ®ç»“æ„ä¸€èµ·å·¥ä½œã€‚å› æ­¤ï¼Œä½ ä¼šèŠ±æ—¶é—´å»å®é™…ä½¿ç”¨è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œè€Œä¸æ˜¯ä¸æ–­åœ°å»æŸ¥æ‰¾å…³äºå®ƒå¦‚ä½•å·¥ä½œçš„æ–‡æ¡£ã€‚åŒæ ·åœ°ï¼Œå¦‚æœä½ æ‰©å±•ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä½¿å…¶ä¸ seq æŠ½è±¡ä¸€èµ·å·¥ä½œï¼Œä½ å°±å¯ä»¥åœ¨ä¸Šé¢ä½¿ç”¨å¤§é‡çš„ seq å‡½æ•°åº“ã€‚&lt;/p>
&lt;p>åœ¨ç¬¬å››ç« ä¸­ï¼Œä½ äº†è§£åˆ° Clojure æ˜¯ä»¥æŠ½è±¡çš„æ–¹å¼ç¼–å†™çš„ã€‚è¿™å¾ˆå¼ºå¤§ï¼Œå› ä¸ºåœ¨ Clojure ä¸­ï¼Œä½ å¯ä»¥ä¸“æ³¨äºä½ å¯ä»¥ç”¨æ•°æ®ç»“æ„å®é™…åšçš„äº‹æƒ…ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå®ç°çš„ç»†ææœ«èŠ‚ã€‚æœ¬ç« å‘ä½ ä»‹ç»äº†åˆ›å»ºå’Œå®ç°ä½ è‡ªå·±çš„æŠ½è±¡çš„ä¸–ç•Œã€‚ä½ å°†å­¦ä¹  Multimethodsã€åè®®å’Œè®°å½•çš„åŸºç¡€çŸ¥è¯†ã€‚&lt;/p>
&lt;h2 id="å¤šæ€">å¤šæ€&lt;/h2>
&lt;p>æˆ‘ä»¬åœ¨ Clojure ä¸­å®ç°æŠ½è±¡çš„ä¸»è¦æ–¹å¼æ˜¯å°†ä¸€ä¸ªæ“ä½œåç§°ä¸ä¸€ä¸ªä»¥ä¸Šçš„ç®—æ³•è”ç³»èµ·æ¥ã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸º&lt;em>å¤šæ€&lt;/em>ã€‚ä¾‹å¦‚ï¼Œåœ¨åˆ—è¡¨ä¸Šæ‰§è¡Œ &amp;ldquo;conj &amp;ldquo;çš„ç®—æ³•ä¸ Vector çš„ç®—æ³•ä¸åŒï¼Œä½†æˆ‘ä»¬æŠŠå®ƒä»¬ç»Ÿä¸€åœ¨åŒä¸€ä¸ªåå­—ä¸‹ï¼Œä»¥è¡¨æ˜å®ƒä»¬å®ç°äº†åŒä¸€ä¸ªæ¦‚å¿µï¼Œå³&lt;em>å‘&lt;/em>è¿™ä¸ªæ•°æ®ç»“æ„æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚&lt;/p>
&lt;p>å› ä¸º Clojure çš„è®¸å¤šæ•°æ®ç±»å‹éƒ½ä¾èµ–äº Java çš„æ ‡å‡†åº“ï¼Œæ‰€ä»¥æœ¬ç« ä¸­ä½¿ç”¨äº†ä¸€ç‚¹ Javaã€‚ä¾‹å¦‚ï¼ŒClojure çš„å­—ç¬¦ä¸²åªæ˜¯ Java çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ Java ç±»&lt;code>java.lang.String&lt;/code>çš„å®ä¾‹ã€‚è¦åœ¨ Java ä¸­å®šä¹‰ä½ è‡ªå·±çš„æ•°æ®ç±»å‹ï¼Œä½ è¦ä½¿ç”¨ç±»ã€‚Clojure æä¾›äº†é¢å¤–çš„ç±»å‹ç»“æ„ã€‚Â &lt;em>è®°å½•&lt;/em>å’Œ&lt;em>ç±»å‹&lt;/em>ã€‚æœ¬ä¹¦åªæ¶‰åŠè®°å½•ã€‚&lt;/p>
&lt;p>åœ¨æˆ‘ä»¬å­¦ä¹ è®°å½•ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ Multimethodsï¼Œè¿™æ˜¯æˆ‘ä»¬å®šä¹‰å¤šæ€è¡Œä¸ºçš„ç¬¬ä¸€ä¸ªå·¥å…·ã€‚&lt;/p>
&lt;h3 id="multimethods">Multimethods&lt;/h3>
&lt;p>&lt;em>Multimethods&lt;/em>ä¸ºä½ æä¾›äº†ä¸€ç§ç›´æ¥çš„ã€çµæ´»çš„æ–¹æ³•ï¼Œå°†å¤šæ€å¼•å…¥ä½ çš„ä»£ç ä¸­ã€‚ä½¿ç”¨ Multimethodsï¼Œä½ å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ª&lt;em>è°ƒåº¦å‡½æ•°&lt;/em>å°†ä¸€ä¸ªåå­—ä¸å¤šä¸ªå®ç°è”ç³»èµ·æ¥ï¼Œè¯¥å‡½æ•°äº§ç”Ÿ&lt;em>è°ƒåº¦å€¼&lt;/em>ï¼Œç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ª&lt;em>æ–¹æ³•&lt;/em>ã€‚è°ƒåº¦å‡½æ•°å°±åƒé¤å…é‡Œçš„ä¸»äººã€‚ä¸»äººä¼šé—®ä½ ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ &amp;ldquo;ä½ æœ‰é¢„è®¢å—ï¼Ÿ&amp;ldquo;å’Œ &amp;ldquo;èšä¼šäººæ•°ï¼Ÿ&amp;quot;ï¼Œç„¶åç»™ä½ å®‰æ’ç›¸åº”çš„åº§ä½ã€‚åŒæ ·ï¼Œå½“ä½ è°ƒç”¨ä¸€ä¸ª Multimethods æ—¶ï¼Œè°ƒåº¦å‡½æ•°å°†è¯¢é—®å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°æ­£ç¡®çš„æ–¹æ³•ï¼Œæ­£å¦‚è¿™ä¸ªä¾‹å­æ‰€æ˜¾ç¤ºçš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns were-creatures)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (defmulti full-moon-behavior (fn [were-creature] (:were-type were-creature)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (defmethod full-moon-behavior :wolf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [were-creature]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str (:name were-creature) &amp;#34; will howl and murder&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (defmethod full-moon-behavior :simmons
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [were-creature]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str (:name were-creature) &amp;#34; will encourage people and sweat to the oldies&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(full-moon-behavior {:were-type :wolf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â :name &amp;#34;Rachel from next door&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Rachel from next door will howl and murder&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(full-moon-behavior {:name &amp;#34;Andy the baker&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â :were-type :simmons})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Andy the baker will encourage people and sweat to the oldies&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ª Multimethods æ˜¾ç¤ºäº†ä½ å¦‚ä½•å®šä¹‰ä¸åŒç§ç±»çš„ç‹¼äººç”Ÿç‰©çš„æ»¡æœˆè¡Œä¸ºã€‚å¤§å®¶éƒ½çŸ¥é“ç‹¼äººå˜æˆäº†ç‹¼ï¼Œåˆ°å¤„åšå«ç€æ€äººã€‚ä¸€ç§ä¸å¤ªçŸ¥åçš„ç‹¼äººï¼Œå³ç‹¼-è¥¿è’™æ–¯ï¼Œå˜æˆç†æŸ¥å¾·-è¥¿è’™æ–¯ï¼Œçƒ«ç€å¤´å‘ï¼Œåˆ°å¤„è·‘ï¼Œé¼“åŠ±äººä»¬åšæœ€å¥½çš„è‡ªå·±ï¼Œä¸ºè€äººä»¬æµæ±—ã€‚ä½ ä¸æƒ³è¢«è¿™ä¸¤ç§ç”Ÿç‰©å’¬åˆ°ï¼Œå¦åˆ™ä½ å°±ä¼šå˜æˆå®ƒä»¬ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/multimethods-records-protocols/weresimmons.png"
loading="lazy"
>&lt;/p>
&lt;p>æˆ‘ä»¬åœ¨âŠå¤„åˆ›å»º Multimethodsã€‚è¿™å‘Šè¯‰ Clojureï¼Œ&amp;ldquo;å˜¿ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º&lt;code>full-moon-behavior'çš„æ–°Multimethodsã€‚æ¯å½“æœ‰äººè°ƒç”¨&lt;/code>full-moon-behavior&lt;code>æ—¶ï¼Œåœ¨å‚æ•°ä¸Šè¿è¡Œè°ƒåº¦å‡½æ•°&lt;/code>(fn [were-creature] (:were-type were-creature))`ã€‚ä½¿ç”¨è¯¥å‡½æ•°çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯è°ƒåº¦å€¼ï¼Œæ¥å†³å®šä½¿ç”¨å“ªä¸ªå…·ä½“æ–¹æ³•ï¼&amp;rdquo;&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å½“è°ƒåº¦å‡½æ•°è¿”å›çš„å€¼æ˜¯â‹çš„&lt;code>:wolf&lt;/code>æ—¶ï¼Œå¦ä¸€ä¸ªæ˜¯å½“å®ƒæ˜¯âŒçš„&lt;code>:simmons&lt;/code>æ—¶ã€‚æ–¹æ³•å®šä¹‰çœ‹èµ·æ¥å¾ˆåƒå‡½æ•°å®šä¹‰ï¼Œä½†ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼Œæ–¹æ³•åç§°åé¢ç´§è·Ÿç€&lt;em>dispatch å€¼&lt;/em>ã€‚Â &lt;code>:wolf&lt;/code>å’Œ&lt;code>:simmons&lt;/code>éƒ½æ˜¯&lt;em>dispatch å€¼&lt;/em>ã€‚è¿™ä¸è°ƒåº¦*å€¼ä¸åŒï¼Œåè€…æ˜¯è°ƒåº¦å‡½æ•°çš„è¿”å›å€¼ã€‚å®Œæ•´çš„è°ƒåº¦åºåˆ—æ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;ol>
&lt;li>å½¢å¼&lt;code>(full-moon-behavior {:wer-type :wolf :name &amp;quot;Rachel from next door&amp;quot;})&lt;/code>è¢«æ±‚å€¼ã€‚&lt;/li>
&lt;li>è¿è¡Œ&lt;code>full-moon-behavior&lt;/code>çš„è°ƒåº¦å‡½æ•°ï¼Œè¿”å›&lt;code>:wolf&lt;/code>ä½œä¸ºè°ƒåº¦å€¼ã€‚&lt;/li>
&lt;li>Clojure å°†è°ƒåº¦å€¼&lt;code>:wolf&lt;/code>ä¸ä¸º&lt;code>full-moon-behavior&lt;/code>å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•çš„è°ƒåº¦å€¼ç›¸æ¯”è¾ƒã€‚è¿™äº›è°ƒåº¦å€¼æ˜¯&lt;code>:wolf&lt;/code>å’Œ&lt;code>:simmons&lt;/code>ã€‚&lt;/li>
&lt;li>å› ä¸ºè°ƒåº¦å€¼&lt;code>:wolf&lt;/code>ç­‰äºè°ƒåº¦å€¼&lt;code>:wolf&lt;/code>ï¼Œæ‰€ä»¥&lt;code>:wolf&lt;/code>çš„ç®—æ³•è¿è¡Œã€‚&lt;/li>
&lt;/ol>
&lt;p>ä¸è¦è®©æœ¯è¯­æŠŠä½ ç»Šå€’! ä¸»è¦çš„æƒ³æ³•æ˜¯ï¼Œè°ƒåº¦å‡½æ•°è¿”å›ä¸€äº›å€¼ï¼Œè¿™ä¸ªå€¼è¢«ç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ªæ–¹æ³•å®šä¹‰ã€‚&lt;/p>
&lt;p>å›åˆ°æˆ‘ä»¬çš„ä¾‹å­! æ¥ä¸‹æ¥æˆ‘ä»¬è°ƒç”¨è¯¥æ–¹æ³•ä¸¤æ¬¡ã€‚åœ¨âå¤„ï¼Œè°ƒåº¦å‡½æ•°è¿”å›å€¼&amp;rdquo;:wolf&amp;rdquo;ï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œé€šçŸ¥ä½  &amp;ldquo;éš”å£çš„ Rachel å°†åšå«å¹¶æ€äºº&amp;rdquo;ã€‚åœ¨âï¼Œè¯¥å‡½æ•°çš„è¡Œä¸ºç±»ä¼¼ï¼Œåªæ˜¯&lt;code>:simmons&lt;/code>æ˜¯è°ƒåº¦å€¼ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªä»¥&lt;code>nil&lt;/code>ä¸ºè°ƒåº¦å€¼çš„æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmethod full-moon-behavior nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [were-creature]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str (:name were-creature) &amp;#34; will stay at home and eat ice cream&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(full-moon-behavior {:were-type nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :name &amp;#34;Martin the nurse&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Martin the nurse will stay at home and eat ice cream&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ä½ è¿™æ¬¡è°ƒç”¨&lt;code>full-moon-behavior&lt;/code>æ—¶ï¼Œä½ ç»™å®ƒçš„å‚æ•°&lt;code>:wer-type&lt;/code>æ˜¯&lt;code>nil&lt;/code>ï¼Œæ‰€ä»¥å¯¹åº”äº&lt;code>nil&lt;/code>çš„æ–¹æ³•è¢«æ±‚å€¼ï¼Œä½ è¢«å‘ŠçŸ¥`&amp;ldquo;æŠ¤å£« Martin å°†å‘†åœ¨å®¶é‡Œåƒå†°æ·‡æ·‹&amp;rdquo;ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š&lt;code>:default&lt;/code>ä½œä¸ºè°ƒåº¦å€¼ï¼Œå®šä¹‰ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œåœ¨æ²¡æœ‰å…¶ä»–æ–¹æ³•åŒ¹é…çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç»™å‡ºçš„å‚æ•°çš„&lt;code>:were-type&lt;/code>ä¸ä¹‹å‰å®šä¹‰çš„æ–¹æ³•éƒ½ä¸åŒ¹é…ï¼Œæ‰€ä»¥ä½¿ç”¨äº†é»˜è®¤æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmethod full-moon-behavior :default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [were-creature]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str (:name were-creature) &amp;#34; will stay up all night fantasy footballing&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(full-moon-behavior {:were-type :office-worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :name &amp;#34;Jimmy from sales&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Jimmy from sales will stay up all night fantasy footballing&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Multimethods çš„ä¸€ä¸ªå¾ˆé…·çš„åœ°æ–¹æ˜¯ï¼Œä½ å¯ä»¥éšæ—¶æ·»åŠ æ–°çš„æ–¹æ³•ã€‚å¦‚æœä½ å‘å¸ƒäº†ä¸€ä¸ªåŒ…æ‹¬&lt;code>wer-creatures&lt;/code>å‘½åç©ºé—´çš„åº“ï¼Œå…¶ä»–äººå¯ä»¥ç»§ç»­æ‰©å±• Multimethods æ¥å¤„ç†æ–°çš„æ´¾å‘å€¼ã€‚è¿™ä¸ªä¾‹å­æ˜¾ç¤ºï¼Œä½ åˆ›å»ºäº†è‡ªå·±çš„éšæœºå‘½åç©ºé—´å¹¶åŒ…æ‹¬äº†&lt;code>wer-creatures&lt;/code>å‘½åç©ºé—´ï¼Œç„¶åä¸º&lt;code>full-moon-behavior&lt;/code>Multimethods å®šä¹‰äº†å¦ä¸€ä¸ªæ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns random-namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:require [were-creatures]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defmethod were-creatures/full-moon-behavior :bill-murray
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [were-creature]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str (:name were-creature) &amp;#34; will be the most likeable celebrity&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(were-creatures/full-moon-behavior {:name &amp;#34;Laura the intern&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :were-type :bill-murray})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Laura the intern will be the most likeable celebrity&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ çš„è°ƒåº¦å‡½æ•°å¯ä»¥ä½¿ç”¨å®ƒçš„ä»»ä½•æˆ–æ‰€æœ‰å‚æ•°è¿”å›ä»»æ„çš„å€¼ã€‚ä¸‹ä¸€ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ª Multimethodsï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ¯ä¸ªå‚æ•°ç±»å‹çš„ Vectorã€‚å®ƒè¿˜å®šä¹‰äº†è¯¥æ–¹æ³•çš„ä¸€ä¸ªå®ç°ï¼Œå½“æ¯ä¸ªå‚æ•°éƒ½æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns user)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defmulti types (fn [x y] [(class x) (class y)]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defmethod types [java.lang.String java.lang.String]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [x y]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Two strings!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(types &amp;#34;String 1&amp;#34; &amp;#34;String 2&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Two strings!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä»¬è¢«ç§°ä¸º&lt;em>multi&lt;/em>methodsï¼šå®ƒä»¬å…è®¸å¯¹å¤šä¸ªå‚æ•°è¿›è¡Œè°ƒåº¦ã€‚æˆ‘æ²¡æœ‰ç»å¸¸ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æˆ‘å¯ä»¥çœ‹åˆ°å®ƒè¢«ç”¨äºè§’è‰²æ‰®æ¼”æ¸¸æˆä¸­ï¼Œæ ¹æ®æ³•å¸ˆçš„ä¸»è¦é­”æ³•å­¦æ ¡å’Œä»–çš„é­”æ³•ä¸“é•¿æ¥ç¼–å†™æ–¹æ³•ã€‚æ— è®ºå¦‚ä½•ï¼Œæœ‰å®ƒè€Œä¸éœ€è¦å®ƒæ€»æ¯”éœ€è¦å®ƒè€Œæ²¡æœ‰å®ƒå¥½ã€‚&lt;/p>
&lt;p>æ³¨æ„ Multimethods ä¹Ÿå…è®¸åˆ†å±‚è°ƒåº¦ã€‚Clojure å¯ä»¥è®©ä½ å»ºç«‹è‡ªå®šä¹‰çš„å±‚æ¬¡ç»“æ„ï¼Œæˆ‘ä¸ä¼šä»‹ç»è¿™äº›ï¼Œä½†ä½ å¯ä»¥é€šè¿‡é˜…è¯»&lt;a class="link" href="http://clojure.org/multimethods/" target="_blank" rel="noopener"
>http://clojure.org/multimethods/&lt;/a> çš„æ–‡æ¡£æ¥äº†è§£å®ƒä»¬ã€‚&lt;/p>
&lt;h3 id="åè®®">åè®®&lt;/h3>
&lt;p>åœ¨å¤§çº¦ 93.58%çš„æƒ…å†µä¸‹ï¼Œä½ ä¼šå¸Œæœ›æ ¹æ®å‚æ•°çš„ç±»å‹æ¥è°ƒåº¦æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œ&lt;code>count&lt;/code>éœ€è¦å¯¹ Vector ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯å¯¹ map æˆ– list ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚å°½ç®¡å¯ä»¥ç”¨ Multimethods è¿›è¡Œç±»å‹è°ƒåº¦ï¼Œä½†&lt;em>åè®®&lt;/em>æ˜¯ä¸ºç±»å‹è°ƒåº¦è€Œä¼˜åŒ–çš„ã€‚å®ƒä»¬æ¯” Multimethods æ›´æœ‰æ•ˆï¼Œè€Œä¸” Clojure è®©ä½ å¾ˆå®¹æ˜“ç®€æ´åœ°æŒ‡å®šåè®®çš„å®ç°ã€‚&lt;/p>
&lt;p>Multimethods åªæ˜¯ä¸€ä¸ªå¤šæ€çš„æ“ä½œï¼Œè€Œåè®®æ˜¯ä¸€ä¸ª&lt;em>é›†åˆ&lt;/em>çš„ä¸€ä¸ªæˆ–å¤šä¸ªå¤šæ€æ“ä½œã€‚åè®®æ“ä½œè¢«ç§°ä¸ºæ–¹æ³•ï¼Œå°±åƒ Multimethods æ“ä½œä¸€æ ·ã€‚ä¸ Multimethods ä¸åŒçš„æ˜¯ï¼ŒMultimethods å¯¹è°ƒåº¦å‡½æ•°è¿”å›çš„ä»»æ„å€¼è¿›è¡Œè°ƒåº¦ï¼Œè€Œåè®®æ–¹æ³•æ˜¯æ ¹æ®ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹è¿›è¡Œè°ƒåº¦ï¼Œå¦‚æœ¬ä¾‹æ‰€ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns data-psychology)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ(defprotocol â‹Psychodynamics
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> âŒ&amp;#34;Plumb the inner depths of your data types&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â(thoughts [x] &amp;#34;The data type&amp;#39;s innermost thoughts&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â(feelings-about [x] [x y] &amp;#34;Feelings about self or other&amp;#34;))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆï¼Œåœ¨âŠæœ‰&lt;code>defprotocol&lt;/code>ã€‚è¿™éœ€è¦ä¸€ä¸ªåå­—ï¼Œ&lt;code>Psychodynamics&lt;/code> â‹ï¼Œå’Œä¸€ä¸ªå¯é€‰çš„æ–‡ä»¶ä¸²ï¼Œ&lt;code>&amp;quot;æ¢ç©¶ä½ çš„æ•°æ®ç±»å‹çš„å†…éƒ¨æ·±åº¦&amp;quot;&lt;/code>âŒã€‚æ¥ä¸‹æ¥æ˜¯æ–¹æ³•ç­¾åã€‚ä¸€ä¸ª&lt;em>æ–¹æ³•ç­¾å&lt;/em>ç”±ä¸€ä¸ªåç§°ã€ä¸€ä¸ªå‚æ•°è¯´æ˜å’Œä¸€ä¸ªå¯é€‰çš„æ–‡æ¡£ä¸²ç»„æˆã€‚ç¬¬ä¸€ä¸ªæ–¹æ³•ç­¾åè¢«å‘½åä¸º&lt;code>thoughts&lt;/code>âï¼Œåªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°ã€‚ç¬¬äºŒä¸ªåä¸º&lt;code>feelings-about&lt;/code>âï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ã€‚åè®®æœ‰ä¸€ä¸ªé™åˆ¶ï¼šæ–¹æ³•ä¸èƒ½æœ‰å…¶ä½™å‚æ•°ã€‚æ‰€ä»¥åƒä¸‹é¢è¿™æ ·çš„è¡Œæ˜¯ä¸å…è®¸çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(feels-about [x] [x &amp;amp; others])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡å®šä¹‰ä¸€ä¸ªåè®®ï¼Œä½ åœ¨å®šä¹‰ä¸€ä¸ªæŠ½è±¡ï¼Œä½†ä½ è¿˜æ²¡æœ‰å®šä¹‰å¦‚ä½•å®ç°è¿™ä¸ªæŠ½è±¡ã€‚è¿™å°±åƒä½ ä¸ºè¡Œä¸ºä¿ç•™äº†åå­—ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ ä¿ç•™äº†&lt;code>æ€æƒ³&lt;/code>å’Œ&lt;code>æ„Ÿè§‰-å…³äº&lt;/code>ï¼‰ï¼Œä½†ä½ è¿˜æ²¡æœ‰å®šä¹‰å…·ä½“çš„è¡Œä¸ºã€‚å¦‚æœä½ è¦æ±‚å€¼&lt;code>(thoughts &amp;quot;blorb&amp;quot;)&lt;/code>ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ï¼Œå†…å®¹æ˜¯ï¼š&amp;ldquo;æ²¡æœ‰ä¸º java.lang.String ç±»æ‰¾åˆ°æ–¹æ³•çš„å®ç°ï¼šprotocol: data-psychology/psychodynamics çš„ thoughtsã€‚&amp;rdquo; åè®®æ˜¯æ ¹æ®ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹åˆ†é…çš„ï¼Œæ‰€ä»¥å½“ä½ è°ƒç”¨&lt;code>(thoughts &amp;quot;blorb&amp;quot;)&lt;/code>æ—¶ï¼ŒClojure è¯•å›¾ä¸ºå­—ç¬¦ä¸²æŸ¥æ‰¾&lt;code>thoughts&lt;/code>æ–¹æ³•çš„å®ç°ï¼Œä½†å¤±è´¥äº†ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é€šè¿‡&lt;em>æ‰©å±•&lt;/em>å­—ç¬¦ä¸²æ•°æ®ç±»å‹æ¥&lt;em>å®ç°&lt;/em>&lt;code>Psychodynamics&lt;/code>åè®®æ¥è§£å†³è¿™ä¸€é—æ†¾ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">âŠ (extend-type java.lang.String
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ Psychodynamics
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (thoughts [x] (str x &amp;#34; thinks, &amp;#39;Truly, the character defines the data type&amp;#39;&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â (feelings-about
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x] (str x &amp;#34; is longing for a simpler way of life&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x y] (str x &amp;#34; is envious of &amp;#34; y &amp;#34;&amp;#39;s simpler way of life&amp;#34;))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(thoughts &amp;#34;blorb&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â ; =&amp;gt; &amp;#34;blorb thinks, &amp;#39;Truly, the character defines the data type&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(feelings-about &amp;#34;schmorb&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;schmorb is longing for a simpler way of life&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(feelings-about &amp;#34;schmorb&amp;#34; 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;schmorb is envious of 2&amp;#39;s simpler way of life&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>extend-type&lt;/code>åé¢æ˜¯ä½ æƒ³æ‰©å±•çš„ç±»æˆ–ç±»å‹çš„åç§°å’Œä½ æƒ³è®©å®ƒæ”¯æŒçš„åè®®&amp;ndash;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åœ¨âŠå¤„æŒ‡å®šäº†ç±»&lt;code>java.lang.String&lt;/code>å’Œä½ æƒ³è®©å®ƒæ”¯æŒçš„åè®®&lt;code>Psychodynamics&lt;/code>ï¼Œåœ¨â‹ã€‚ä¹‹åï¼Œä½ åœ¨âŒä¸º &amp;ldquo;thoughts &amp;ldquo;æ–¹æ³•å’Œâä¸º &amp;ldquo;feelings-about &amp;ldquo;æ–¹æ³•æä¾›ä¸€ä¸ªå®ç°ã€‚å¦‚æœä½ è¦æ‰©å±•ä¸€ä¸ªç±»å‹æ¥å®ç°ä¸€ä¸ªåè®®ï¼Œä½ å¿…é¡»å®ç°åè®®ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•ï¼Œå¦åˆ™ Clojure ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¸èƒ½åªå®ç°&lt;code>æ€æƒ³'æˆ–åªå®ç°&lt;/code>æ„Ÿè§‰&amp;rsquo;ï¼›ä½ å¿…é¡»åŒæ—¶å®ç°è¿™ä¸¤ç§æ–¹æ³•ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼Œè¿™äº›æ–¹æ³•çš„å®ç°ä¸åƒ Multimethods é‚£æ ·ä»¥&lt;code>defmethod&lt;/code>å¼€å¤´ã€‚äº‹å®ä¸Šï¼Œå®ƒä»¬çœ‹èµ·æ¥ç±»ä¼¼äºå‡½æ•°å®šä¹‰ï¼Œåªæ˜¯æ²¡æœ‰&lt;code>defn'ã€‚è¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•çš„å®ç°ï¼Œä½ è¦å†™ä¸€ä¸ªä»¥æ–¹æ³•åç§°å¼€å¤´çš„è¡¨æ ¼ï¼Œåƒ&lt;/code>thoughts&amp;rsquo;ï¼Œç„¶åæä¾›ä¸€ä¸ªå‚æ•° Vector å’Œæ–¹æ³•çš„ä¸»ä½“ã€‚è¿™äº›æ–¹æ³•ä¹Ÿå…è®¸é‡è½½ï¼Œå°±åƒå‡½æ•°ä¸€æ ·ï¼Œä½ å®šä¹‰å¤šé‡æ€§çš„æ–¹æ³•å®ç°ä¸å¤šé‡æ€§çš„å‡½æ•°ç±»ä¼¼ã€‚ä½ å¯ä»¥åœ¨âçš„ &amp;ldquo;feelings-about &amp;ldquo;å®ç°ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;p>åœ¨ä½ æ‰©å±•äº†&lt;code>java.lang.String&lt;/code>ç±»å‹ä»¥å®ç°&lt;code>Psychodynamics&lt;/code>åè®®åï¼ŒClojure çŸ¥é“å¦‚ä½•è°ƒåº¦è°ƒç”¨&lt;code>(thoughts &amp;quot;blorb&amp;quot;)&lt;/code>ï¼Œä½ ä¼šåœ¨âå¾—åˆ°å­—ç¬¦ä¸²`&amp;ldquo;blorb thinks, &amp;lsquo;Truly, the character defines the data type&amp;rsquo;&amp;quot;ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³æä¾›ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œå°±åƒä½ å¯¹ multimethods æ‰€åšçš„é‚£æ ·å‘¢ï¼Ÿè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥æ‰©å±•&lt;code>java.lang.Object&lt;/code>ã€‚è¿™æ ·åšæ˜¯å› ä¸º Javaï¼ˆä¹Ÿå°±æ˜¯ Clojureï¼‰ä¸­çš„æ¯ä¸ªç±»å‹éƒ½æ˜¯&lt;code>java.lang.Object&lt;/code>çš„åä»£ã€‚å¦‚æœè¿™ä¸æ˜¯å¾ˆæœ‰æ„ä¹‰ï¼ˆä¹Ÿè®¸æ˜¯å› ä¸ºä½ ä¸ç†Ÿæ‚‰é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼‰ï¼Œä¸è¦æ‹…å¿ƒï¼Œåªè¦çŸ¥é“å®ƒæ˜¯æœ‰æ•ˆçš„ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯ä¸º&lt;code>Psychodynamics&lt;/code>åè®®æä¾›ä¸€ä¸ªé»˜è®¤å®ç°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(extend-type java.lang.Object
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Psychodynamics
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (thoughts [x] &amp;#34;Maybe the Internet is just a vector for toxoplasmosis&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (feelings-about
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x] &amp;#34;meh&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x y] (str &amp;#34;meh about &amp;#34; y))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(thoughts 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Maybe the Internet is just a vector for toxoplasmosis&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(feelings-about 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;meh&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(feelings-about 3 &amp;#34;blorb&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;meh about blorb&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ä¸ºæ•°å­—å®šä¹‰ä¸€ä¸ª&lt;code>å¿ƒç†åŠ¨åŠ›å­¦'çš„å®ç°ï¼ŒClojureå°†å¯¹&lt;/code>æ€æƒ³&amp;rsquo;å’Œ&lt;code>æ„Ÿè§‰-å…³äº'çš„è°ƒç”¨åˆ†æ´¾ç»™ä¸º&lt;/code>java.lang.Object&amp;rsquo;å®šä¹‰çš„å®ç°ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥ä½¿ç”¨&lt;code>extend-protocol'æ¥ä»£æ›¿å¤šæ¬¡è°ƒç”¨&lt;/code>extend-type&amp;rsquo;æ¥æ‰©å±•å¤šä¸ªç±»å‹ï¼Œå®ƒå¯ä»¥è®©ä½ ä¸€æ¬¡ä¸ºå¤šä¸ªç±»å‹å®šä¹‰åè®®å®ç°ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•å®šä¹‰å‰é¢çš„åè®®å®ç°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(extend-protocol Psychodynamics
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> java.lang.String
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (thoughts [x] &amp;#34;Truly, the character defines the data type&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (feelings-about
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x] &amp;#34;longing for a simpler way of life&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x y] (str &amp;#34;envious of &amp;#34; y &amp;#34;&amp;#39;s simpler way of life&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> java.lang.Object
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (thoughts [x] &amp;#34;Maybe the Internet is just a vector for toxoplasmosis&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (feelings-about
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x] &amp;#34;meh&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x y] (str &amp;#34;meh about &amp;#34; y))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯èƒ½ä¼šå‘ç°è¿™ä¸ªæŠ€æœ¯æ¯”ä½¿ç”¨&lt;code>extend-type&lt;/code>æ›´æ–¹ä¾¿ã€‚ç„¶åï¼Œä½ ä¹Ÿå¯èƒ½ä¸è§‰å¾—ã€‚&lt;code>extend-type&lt;/code>è®©ä½ æ„Ÿè§‰å¦‚ä½•ï¼Ÿ&lt;code>extend-protocol&lt;/code>æ€ä¹ˆæ ·ï¼Ÿæ¥ååœ¨è¿™ä¸ªæ²™å‘ä¸Šï¼Œå‘Šè¯‰æˆ‘è¿™ä¸€åˆ‡ã€‚&lt;/p>
&lt;p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªåè®®çš„æ–¹æ³• &amp;ldquo;å±äº &amp;ldquo;å®ƒä»¬æ‰€å®šä¹‰çš„å‘½åç©ºé—´ã€‚åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œ&amp;ldquo;å¿ƒç†åŠ¨åŠ›å­¦ &amp;ldquo;æ–¹æ³•çš„å®Œå…¨é™å®šåç§°æ˜¯ &amp;ldquo;æ•°æ®-å¿ƒç†å­¦/æƒ³æ³• &amp;ldquo;å’Œ &amp;ldquo;æ•°æ®-å¿ƒç†å­¦/æ„Ÿè§‰-å…³äº&amp;rdquo;ã€‚å¦‚æœä½ æœ‰é¢å‘å¯¹è±¡çš„èƒŒæ™¯ï¼Œè¿™å¯èƒ½çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œå› ä¸ºæ–¹æ³•å±äº OOP ä¸­çš„æ•°æ®ç±»å‹ã€‚ä½†ä¸è¦å“åäº†! è¿™åªæ˜¯ Clojure èµ‹äºˆæŠ½è±¡ä¼˜å…ˆæƒçš„å¦ä¸€ç§æ–¹å¼ã€‚è¿™ä¸ªäº‹å®çš„ä¸€ä¸ªåæœæ˜¯ï¼Œå¦‚æœä½ æƒ³è®©ä¸¤ä¸ªä¸åŒçš„åè®®åŒ…æ‹¬å…·æœ‰ç›¸åŒåç§°çš„æ–¹æ³•ï¼Œä½ éœ€è¦æŠŠåè®®æ”¾åœ¨ä¸åŒçš„å‘½åç©ºé—´ä¸­ã€‚&lt;/p>
&lt;h2 id="è®°å½•">è®°å½•&lt;/h2>
&lt;p>Clojure å…è®¸ä½ åˆ›å»º&lt;em>records&lt;/em>ï¼Œå®ƒæ˜¯è‡ªå®šä¹‰çš„ã€ç±»ä¼¼ Map çš„æ•°æ®ç±»å‹ã€‚å®ƒä»¬ç±»ä¼¼äº Mapï¼Œå› ä¸ºå®ƒä»¬å°†é”®å’Œå€¼è”ç³»èµ·æ¥ï¼Œä½ å¯ä»¥åƒä½¿ç”¨ Map ä¸€æ ·æŸ¥è¯¢å®ƒä»¬çš„å€¼ï¼Œè€Œä¸”å®ƒä»¬åƒ Map ä¸€æ ·æ˜¯ä¸å¯æ”¹å˜çš„ã€‚å®ƒä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œä½ ä¸ºè®°å½•æŒ‡å®š*å­—æ®µã€‚å­—æ®µæ˜¯æ•°æ®çš„æ§½ï¼›ä½¿ç”¨å®ƒä»¬å°±åƒæŒ‡å®šä¸€ä¸ªæ•°æ®ç»“æ„åº”è¯¥æœ‰å“ªäº›é”®ã€‚è®°å½•ä¹Ÿä¸ Map ä¸åŒï¼Œä½ å¯ä»¥æ‰©å±•å®ƒä»¬æ¥å®ç°åè®®ã€‚&lt;/p>
&lt;p>è¦åˆ›å»ºä¸€ä¸ªè®°å½•ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>defrecord&lt;/code>æ¥æŒ‡å®šå®ƒçš„åå­—å’Œå­—æ®µã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns were-records)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defrecord WereWolf [name title])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªè®°å½•çš„åå­—æ˜¯&lt;code>WereWolf&lt;/code>ï¼Œå®ƒçš„ä¸¤ä¸ªå­—æ®µæ˜¯&lt;code>name&lt;/code>å’Œ&lt;code>title&lt;/code>ã€‚ä½ å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼åˆ›å»ºè¿™ä¸ªè®°å½•çš„å®ä¾‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">âŠ (WereWolf. &amp;#34;David&amp;#34; &amp;#34;London Tourist&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #were_records.WereWolf{:name &amp;#34;David&amp;#34;, :title &amp;#34;London Tourist&amp;#34;}.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (-&amp;gt;WereWolf &amp;#34;Jacob&amp;#34; &amp;#34;Lead Shirt Discarder&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #were_records.WereWolf{:name &amp;#34;Jacob&amp;#34;, :title &amp;#34;Lead Shirt Discarder&amp;#34;}ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (map-&amp;gt;WereWolf {:name &amp;#34;Lucian&amp;#34; :title &amp;#34;CEO of Melodrama&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #were_records.WereWolf{:name &amp;#34;Lucian&amp;#34;, :title &amp;#34;CEO of Melodrama&amp;#34;}.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨âŠï¼Œæˆ‘ä»¬ä»¥åˆ›å»º Java å¯¹è±¡çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œä½¿ç”¨ç±»å®ä¾‹åŒ–çš„äº’æ“ä½œè°ƒç”¨ã€‚(&lt;em>Interop&lt;/em>æŒ‡çš„æ˜¯åœ¨ Clojure ä¸­ä¸æœ¬åœ° Java ç»“æ„äº¤äº’çš„èƒ½åŠ›)ã€‚è¯·æ³¨æ„ï¼Œå‚æ•°å¿…é¡»éµå¾ªä¸å­—æ®µå®šä¹‰ç›¸åŒçš„é¡ºåºã€‚è¿™æ ·åšçš„åŸå› æ˜¯ï¼Œè®°å½•å®é™…ä¸Šæ˜¯è¢«æ©ç›–çš„ Java ç±»ã€‚&lt;/p>
&lt;p>â‹çš„å®ä¾‹çœ‹èµ·æ¥ä¸âŠçš„å®ä¾‹å‡ ä¹ç›¸åŒï¼Œä½†å…³é”®çš„åŒºåˆ«åœ¨äº&lt;code>-&amp;gt;WereWolf&lt;/code>æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å½“ä½ åˆ›å»ºä¸€æ¡è®°å½•æ—¶ï¼Œå·¥å‚å‡½æ•°&lt;code>-&amp;gt;&lt;/code>RecordName å’Œ&lt;code>map-&amp;gt;&lt;/code>RecordName ä¼šè‡ªåŠ¨åˆ›å»ºã€‚åœ¨âŒï¼Œ&lt;code>map-&amp;gt;WereWolf&lt;/code>æ¥æ”¶ä¸€ä¸ª map ä½œä¸ºå‚æ•°ï¼Œå…¶å…³é”®å­—ä¸è®°å½•ç±»å‹çš„å­—æ®µç›¸å¯¹åº”ï¼Œå¹¶è¿”å›ä¸€ä¸ªè®°å½•ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–å‘½åç©ºé—´çš„è®°å½•ç±»å‹ï¼Œä½ å¿…é¡»å¯¼å…¥å®ƒï¼Œå°±åƒä½ åœ¨ç¬¬ 12 ç« ä¸­å¯¹ Java ç±»æ‰€åšçš„é‚£æ ·ã€‚è¯·æ³¨æ„å°†å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰ç ´æŠ˜å·æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ã€‚è¿™ä¸ªç®€å•çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•åœ¨å¦ä¸€ä¸ªå‘½åç©ºé—´å¯¼å…¥&lt;code>WereWolf&lt;/code>è®°å½•ç±»å‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns monster-mash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:import [were_records WereWolf])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(WereWolf. &amp;#34;David&amp;#34; &amp;#34;London Tourist&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #were_records.WereWolf{:name &amp;#34;David&amp;#34;, :title &amp;#34;London Tourist&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œ&lt;code>were_records&lt;/code>æœ‰ä¸€ä¸ªä¸‹åˆ’çº¿ï¼Œè€Œä¸æ˜¯ç ´æŠ˜å·ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥ç”¨æŸ¥è¯¢ Map å€¼çš„æ–¹å¼æŸ¥è¯¢è®°å½•å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Java å­—æ®µè®¿é—®äº’æ“ä½œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def jacob (-&amp;gt;WereWolf &amp;#34;Jacob&amp;#34; &amp;#34;Lead Shirt Discarder&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (.name jacob)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Jacob&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (:name jacob)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Jacob&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (get jacob :name)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;=&amp;gt; &amp;#34;Jacob&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªä¾‹å­&lt;code>(.name jacob)&lt;/code>åœ¨âŠï¼Œä½¿ç”¨äº† Java äº’æ“ä½œï¼Œâ‹å’ŒâŒçš„ä¾‹å­è®¿é—®&lt;code>:name&lt;/code>çš„æ–¹å¼ä¸ä½¿ç”¨ map ç›¸åŒã€‚&lt;/p>
&lt;p>å½“æµ‹è¯•ç›¸ç­‰æ—¶ï¼ŒClojure å°†æ£€æŸ¥æ‰€æœ‰å­—æ®µæ˜¯å¦ç›¸ç­‰ï¼Œä»¥åŠä¸¤ä¸ªæ¯”è¾ƒä½“æ˜¯å¦å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">âŠ (= jacob (-&amp;gt;WereWolf &amp;#34;Jacob&amp;#34; &amp;#34;Lead Shirt Discarder&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (= jacob (WereWolf. &amp;#34;David&amp;#34; &amp;#34;London Tourist&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (= jacob {:name &amp;#34;Jacob&amp;#34; :title &amp;#34;Lead Shirt Discarder&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>âŠå¤„çš„æµ‹è¯•è¿”å›&lt;code>true&lt;/code>ï¼Œå› ä¸º&lt;code>jacob'å’Œæ–°åˆ›å»ºçš„è®°å½•æ˜¯åŒä¸€ç±»å‹ï¼Œå¹¶ä¸”å®ƒä»¬çš„å­—æ®µæ˜¯ç›¸ç­‰çš„ã€‚â‹å¤„çš„æµ‹è¯•è¿”å› &amp;quot;false&amp;quot;ï¼Œå› ä¸ºå­—æ®µä¸ç›¸ç­‰ã€‚æœ€ååœ¨âŒå¤„çš„æµ‹è¯•è¿”å› &amp;quot;false&amp;quot;ï¼Œå› ä¸ºä¸¤ä¸ªæ¯”è¾ƒå¯¹è±¡çš„ç±»å‹ä¸ä¸€æ ·ã€‚&lt;/code>jacob&amp;rsquo;æ˜¯ä¸€ä¸ª`WereWolf&amp;rsquo;è®°å½•ï¼Œè€Œå¦ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª Mapã€‚&lt;/p>
&lt;p>ä»»ä½•ä½ èƒ½åœ¨ Map ä¸Šä½¿ç”¨çš„å‡½æ•°ï¼Œä½ ä¹Ÿèƒ½åœ¨è®°å½•ä¸Šä½¿ç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(assoc jacob :title &amp;#34;Lead Third Wheel&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #were_records.WereWolf{:name &amp;#34;Jacob&amp;#34;, :title &amp;#34;Lead Third Wheel&amp;#34;}ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œå¦‚æœä½ &lt;code>dissoc&lt;/code>ä¸€ä¸ªå­—æ®µï¼Œç»“æœçš„ç±»å‹å°†æ˜¯ä¸€ä¸ªæ™®é€šçš„&amp;rsquo;Clojure mapï¼›å®ƒå°†ä¸ä¼šæœ‰ä¸åŸå§‹è®°å½•ç›¸åŒçš„æ•°æ®ç±»å‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(dissoc jacob :title)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:name &amp;#34;Jacob&amp;#34;} &amp;lt;- that&amp;#39;s not a were_records.WereWolf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™è‡³å°‘æœ‰ä¸¤ä¸ªåŸå› ï¼šç¬¬ä¸€ï¼Œè®¿é—® Map å€¼æ¯”è®¿é—®è®°å½•å€¼è¦æ…¢ï¼Œæ‰€ä»¥å¦‚æœä½ è¦å»ºç«‹ä¸€ä¸ªé«˜æ€§èƒ½çš„ç¨‹åºï¼Œå°±è¦æ³¨æ„äº†ã€‚ç¬¬äºŒï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„è®°å½•ç±»å‹æ—¶ï¼Œä½ å¯ä»¥æ‰©å±•å®ƒæ¥å®ç°ä¸€ä¸ªåè®®ï¼Œç±»ä¼¼äºä½ ä¹‹å‰ä½¿ç”¨&lt;code>extend-type&lt;/code>æ‰©å±•ä¸€ä¸ªç±»å‹ã€‚å¦‚æœä½ &lt;code>dissoc&lt;/code>ä¸€ä¸ªè®°å½•ï¼Œç„¶åè¯•å›¾åœ¨ç»“æœä¸Šè°ƒç”¨ä¸€ä¸ªåè®®æ–¹æ³•ï¼Œè®°å½•çš„åè®®æ–¹æ³•å°±ä¸ä¼šè¢«è°ƒç”¨ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä½ åœ¨å®šä¹‰è®°å½•æ—¶å¦‚ä½•æ‰©å±•ä¸€ä¸ªåè®®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">âŠ (defprotocol WereCreature
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (full-moon-behavior [x]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (defrecord WereWolf [name title]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> WereCreature
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (full-moon-behavior [x]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str name &amp;#34; will howl and murder&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(full-moon-behavior (map-&amp;gt;WereWolf {:name &amp;#34;Lucian&amp;#34; :title &amp;#34;CEO of Melodrama&amp;#34;}))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Lucian will howl and murder&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åè®®ï¼Œ&lt;code>WereCreature&lt;/code> âŠï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œ&lt;code>full-moon-behavior&lt;/code> â‹ã€‚åœ¨âŒï¼Œ&lt;code>defrecord&lt;/code>ä¸º&lt;code>WereWolf&lt;/code>å®ç°äº†&lt;code>WereCreature&lt;/code>ã€‚åœ¨&lt;code>full-moon-behavior&lt;/code>å®ç°ä¸­æœ€æœ‰è¶£çš„éƒ¨åˆ†æ˜¯ä½ å¯ä»¥è®¿é—®&lt;code>name&lt;/code>ã€‚ä½ è¿˜å¯ä»¥è®¿é—®&lt;code>title'å’Œä»»ä½•å…¶ä»–å¯èƒ½ä¸ºä½ çš„è®°å½•å®šä¹‰çš„å­—æ®µã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;/code>extend-type&lt;code>å’Œ&lt;/code>extend-protocol`æ¥æ‰©å±•è®°å½•ã€‚&lt;/p>
&lt;p>ä½ ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨è®°å½•ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ Mapï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ å‘ç°è‡ªå·±åœ¨åˆ›å»º Map æ—¶åå¤ä½¿ç”¨ç›¸åŒçš„å­—æ®µï¼Œä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨è®°å½•ã€‚è¿™å‘Šè¯‰ä½ ï¼Œè¿™ç»„æ•°æ®ä»£è¡¨äº†ä½ çš„åº”ç”¨ç¨‹åºé¢†åŸŸçš„ä¿¡æ¯ï¼Œå¦‚æœä½ æä¾›ä¸€ä¸ªåŸºäºä½ è¯•å›¾å»ºæ¨¡çš„æ¦‚å¿µçš„åç§°ï¼Œä½ çš„ä»£ç å°†æ›´å¥½åœ°ä¼ è¾¾å…¶ç›®çš„ã€‚ä¸ä»…å¦‚æ­¤ï¼Œè®°å½•è®¿é—®æ¯” Map è®¿é—®æ›´æœ‰è¡¨ç°åŠ›ï¼Œæ‰€ä»¥ä½ çš„ç¨‹åºä¼šå˜å¾—æ›´æœ‰æ•ˆç‡ä¸€äº›ã€‚æœ€åï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨åè®®ï¼Œä½ å°±éœ€è¦åˆ›å»ºä¸€ä¸ªè®°å½•ã€‚&lt;/p>
&lt;h2 id="è¿›ä¸€æ­¥ç ”ç©¶">è¿›ä¸€æ­¥ç ”ç©¶&lt;/h2>
&lt;p>Clojure æä¾›äº†å…¶ä»–çš„å·¥å…·æ¥å¤„ç†æŠ½è±¡å’Œæ•°æ®ç±»å‹ã€‚è¿™äº›å·¥å…·ï¼Œæˆ‘è®¤ä¸ºæ˜¯é«˜çº§çš„ï¼ŒåŒ…æ‹¬&lt;code>deftype&lt;/code>ï¼Œ&lt;code>reify&lt;/code>ï¼Œå’Œ&lt;code>proxy&lt;/code>ã€‚å¦‚æœä½ æœ‰å…´è¶£äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹*&lt;a class="link" href="http://clojure.org/reference/datatypes/" target="_blank" rel="noopener"
>http://clojure.org/datatypes/&lt;/a>*ä¸Šå…³äºæ•°æ®ç±»å‹çš„æ–‡æ¡£ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>Clojure çš„è®¾è®¡åŸåˆ™ä¹‹ä¸€å°±æ˜¯è¦å†™åˆ°æŠ½è±¡ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦åˆ°äº†å¦‚ä½•ä½¿ç”¨ Multimethods å’ŒåŸå‹æ¥å®šä¹‰ä½ è‡ªå·±çš„æŠ½è±¡æ¦‚å¿µã€‚è¿™äº›ç»“æ„æä¾›äº†å¤šæ€ï¼Œå…è®¸åŒä¸€ä¸ªæ“ä½œæ ¹æ®å®ƒçš„å‚æ•°æœ‰ä¸åŒçš„è¡¨ç°ã€‚ä½ è¿˜å­¦ä¼šäº†å¦‚ä½•ç”¨&lt;code>defrecord&lt;/code>åˆ›å»ºå’Œä½¿ç”¨è‡ªå·±çš„å…³è”æ•°æ®ç±»å‹ï¼Œä»¥åŠå¦‚ä½•æ‰©å±•è®°å½•æ¥å®ç°åè®®ã€‚&lt;/p>
&lt;p>å½“æˆ‘åˆšå¼€å§‹å­¦ä¹  Clojure æ—¶ï¼Œæˆ‘å¯¹ä½¿ç”¨ Multimethodsã€åè®®å’Œè®°å½•æ„Ÿåˆ°å¾ˆå®³ç¾ã€‚ç„¶è€Œï¼Œå®ƒä»¬åœ¨ Clojure åº“ä¸­ç»å¸¸è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥äº†è§£å®ƒä»¬çš„å·¥ä½œåŸç†æ˜¯å¾ˆå¥½çš„ã€‚ä¸€æ—¦ä½ æŒæ¡äº†å®ƒä»¬ï¼Œå®ƒä»¬ä¼šå¸®åŠ©ä½ å†™å‡ºæ›´å¹²å‡€çš„ä»£ç ã€‚&lt;/p>
&lt;h2 id="ç»ƒä¹ ">ç»ƒä¹ &lt;/h2>
&lt;ol>
&lt;li>æ‰©å±•&lt;code>full-moon-behavior&lt;/code>Multimethodsï¼Œä¸ºä½ è‡ªå·±çš„ were-creature ç±»å‹æ·»åŠ è¡Œä¸ºã€‚&lt;/li>
&lt;li>åˆ›å»ºä¸€ä¸ª&lt;code>WereSimmons&lt;/code>è®°å½•ç±»å‹ï¼Œç„¶åæ‰©å±•&lt;code>WereCreature&lt;/code>åè®®ã€‚&lt;/li>
&lt;li>åˆ›å»ºä½ è‡ªå·±çš„åè®®ï¼Œç„¶åä½¿ç”¨&lt;code>extend-type&lt;/code>å’Œ&lt;code>extend-protocol&lt;/code>æ¥æ‰©å±•å®ƒã€‚&lt;/li>
&lt;li>åˆ›å»ºä¸€ä¸ªè§’è‰²æ‰®æ¼”æ¸¸æˆï¼Œä½¿ç”¨å¤šé‡è°ƒåº¦æ¥å®ç°è¡Œä¸ºã€‚&lt;/li>
&lt;/ol></description></item><item><title>Chapter12 ä¸ Java çš„äº’æ“ä½œ</title><link>https://example.com/p/chapter12-%E4%B8%8E-java-%E7%9A%84%E4%BA%92%E6%93%8D%E4%BD%9C/</link><pubDate>Sat, 15 Jan 2022 20:55:18 +0800</pubDate><guid>https://example.com/p/chapter12-%E4%B8%8E-java-%E7%9A%84%E4%BA%92%E6%93%8D%E4%BD%9C/</guid><description>&lt;h1 id="ä¸-jvm-ä¸€èµ·å·¥ä½œ">ä¸ JVM ä¸€èµ·å·¥ä½œ&lt;/h1>
&lt;p>åœ¨æ¯ä¸ª Clojurist çš„ç”Ÿå‘½ä¸­éƒ½ä¼šæœ‰è¿™ä¹ˆä¸€å¤©ï¼Œå¥¹å¿…é¡»ä»çº¯å‡½æ•°å’Œä¸å¯å˜æ•°æ®ç»“æ„çš„åº‡æŠ¤æ‰€å†’é™©è¿›å…¥é‡è›®çš„ Java å¤§é™†ã€‚è¿™æ®µè‰°éš¾çš„æ—…ç¨‹æ˜¯å¿…è¦çš„ï¼Œå› ä¸º Clojure æ˜¯åœ¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šæ‰˜ç®¡çš„ï¼Œè¿™èµ‹äºˆäº†å®ƒä¸‰ä¸ªåŸºæœ¬ç‰¹æ€§ã€‚&lt;/p>
&lt;p>èµ‹äºˆå®ƒä¸‰ä¸ªåŸºæœ¬ç‰¹å¾ã€‚é¦–å…ˆï¼Œä½ è¿è¡Œ Clojure åº”ç”¨ç¨‹åºçš„æ–¹å¼ä¸ä½ è¿è¡Œ Java åº”ç”¨ç¨‹åºçš„æ–¹å¼ç›¸åŒã€‚ç¬¬äºŒï¼Œä½ éœ€è¦ä½¿ç”¨ Java å¯¹è±¡æ¥å®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå¦‚è¯»å–æ–‡ä»¶å’Œå¤„ç†æ—¥æœŸã€‚ç¬¬ä¸‰ï¼ŒJava æœ‰ä¸€ä¸ªåºå¤§çš„æœ‰ç”¨åº“çš„ç”Ÿæ€ç³»ç»Ÿï¼Œä½ éœ€è¦å¯¹ Java æœ‰ä¸€å®šçš„äº†è§£æ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚&lt;/p>
&lt;p>è¿™æ ·ä¸€æ¥ï¼ŒClojure å°±æœ‰ç‚¹åƒä¸€ä¸ªä¹Œæ‰˜é‚¦ç¤¾åŒºï¼Œè¢«æ”¾ç½®åœ¨ä¸€ä¸ªä¹Œæ‰˜é‚¦å›½å®¶çš„ä¸­é—´ã€‚æ˜¾ç„¶ï¼Œä½ æ›´æ„¿æ„ä¸å…¶ä»–ä¹Œæ‰˜é‚¦äººäº’åŠ¨ï¼Œä½†å¶å°”ä½ ä¹Ÿéœ€è¦ä¸å½“åœ°äººäº¤è°ˆï¼Œä»¥ä¾¿å®Œæˆå·¥ä½œã€‚&lt;/p>
&lt;p>è¿™ä¸€ç« å°±åƒä¸€æœ¬çŸ­è¯­ä¹¦å’Œ Java å›½å®¶çš„æ–‡åŒ–ä»‹ç»ä¹‹é—´çš„äº¤å‰ã€‚ä½ å°†äº†è§£ä»€ä¹ˆæ˜¯ JVMï¼Œå®ƒæ˜¯å¦‚ä½•è¿è¡Œç¨‹åºçš„ï¼Œä»¥åŠå¦‚ä½•ä¸ºå®ƒç¼–è¯‘ç¨‹åºã€‚æœ¬ç« è¿˜å°†ä¸ºä½ ç®€è¦ä»‹ç»å¸¸ç”¨çš„ Java ç±»å’Œæ–¹æ³•ï¼Œå¹¶è§£é‡Šå¦‚ä½•ä½¿ç”¨ Clojure ä¸å®ƒä»¬äº’åŠ¨ã€‚ä½ å°†å­¦ä¼šå¦‚ä½•æ€è€ƒå’Œç†è§£ Javaï¼Œä»¥ä¾¿å°†ä»»ä½• Java åº“çº³å…¥ä½ çš„ Clojure ç¨‹åºä¸­ã€‚&lt;/p>
&lt;p>è¦è¿è¡Œæœ¬ç« çš„ä¾‹å­ï¼Œä½ éœ€è¦åœ¨ç”µè„‘ä¸Šå®‰è£… 1.6 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ Java å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯è¿è¡Œ&lt;code>javac -version&lt;/code>æ¥æ£€æŸ¥ã€‚ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ &amp;ldquo;java 1.8.0_40 &amp;ldquo;çš„å†…å®¹ï¼›å¦‚æœæ²¡æœ‰ï¼Œè¯·è®¿é—®&lt;a class="link" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener"
>&lt;em>http://www.oracle.com/&lt;/em>&lt;/a>ï¼Œä¸‹è½½æœ€æ–°çš„ JDKã€‚&lt;/p>
&lt;h2 id="jvm">JVM&lt;/h2>
&lt;p>å¼€å‘äººå‘˜ç”¨ JVM è¿™ä¸ªè¯æ¥æŒ‡ä»£ä¸€äº›ä¸åŒçš„ä¸œè¥¿ã€‚ä½ ä¼šå¬åˆ°ä»–ä»¬è¯´ï¼Œ&amp;ldquo;Clojure åœ¨&lt;em>the&lt;/em> JVM ä¸Šè¿è¡Œ&amp;rdquo;ï¼Œä½ ä¹Ÿä¼šå¬åˆ°ï¼Œ&amp;ldquo;Clojure ç¨‹åºåœ¨&lt;em>a&lt;/em> JVM ä¸­è¿è¡Œ&amp;rdquo;ã€‚åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼ŒJVM æŒ‡çš„æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µ&amp;ndash;Java è™šæ‹Ÿæœºçš„ä¸€èˆ¬æ¨¡å‹ã€‚åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œå®ƒæŒ‡çš„æ˜¯ä¸€ä¸ªè¿›ç¨‹&amp;ndash;ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„å®ä¾‹ã€‚æˆ‘ä»¬å°†ä¸“æ³¨äº JVM æ¨¡å‹ï¼Œä½†å½“æˆ‘ä»¬è°ˆè®ºè¿è¡Œä¸­çš„ JVM è¿›ç¨‹æ—¶ï¼Œæˆ‘å°†æŒ‡å‡ºæ¥ã€‚&lt;/p>
&lt;p>ä¸ºäº†ç†è§£ JVMï¼Œè®©æˆ‘ä»¬å›å¤´çœ‹çœ‹æ™®é€šçš„è®¡ç®—æœºæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨è®¡ç®—æœºå¿ƒè„çš„æ·±å¤„æ˜¯å®ƒçš„ CPUï¼Œè€Œ CPU çš„å·¥ä½œæ˜¯æ‰§è¡Œåƒ&lt;em>åŠ å’Œ&lt;/em>æ— ç¬¦å·ä¹˜æ³•è¿™æ ·çš„æ“ä½œã€‚ä½ å¯èƒ½å¬è¯´è¿‡ç¨‹åºå‘˜å°†è¿™äº›æŒ‡ä»¤ç¼–ç åœ¨æ‰“å¡æœºä¸Šã€ç¯æ³¡é‡Œã€ä¹Œé¾Ÿå£³çš„ç¥åœ£ç¼éš™é‡Œï¼Œæˆ–è€…&lt;em>ä»€ä¹ˆçš„ï¼Œä½†ç°åœ¨è¿™äº›æ“ä½œåœ¨æ±‡ç¼–è¯­è¨€ä¸­ç”¨ ADD å’Œ MUL è¿™æ ·çš„è®°å¿†ç¬¦å·è¡¨ç¤ºã€‚CPU æ¶æ„ï¼ˆX86ã€ARMv7ï¼Œç­‰ç­‰ï¼‰å†³å®šäº†å“ªäº›æ“ä½œå¯ä»¥ä½œä¸ºè¯¥æ¶æ„çš„&lt;/em>æŒ‡ä»¤é›†çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p>
&lt;p>ç”±äºç”¨æ±‡ç¼–è¯­è¨€ç¼–ç¨‹å¹¶ä¸æœ‰è¶£ï¼Œäººä»¬å‘æ˜äº†åƒ C å’Œ C++è¿™æ ·çš„é«˜çº§è¯­è¨€ï¼Œå°†å…¶ç¼–è¯‘æˆ CPU å¯ä»¥ç†è§£çš„æŒ‡ä»¤ã€‚å¤§ä½“ä¸Šè¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯&lt;/p>
&lt;ol>
&lt;li>ç¼–è¯‘å™¨è¯»å–æºä»£ç ã€‚&lt;/li>
&lt;li>ç¼–è¯‘å™¨è¾“å‡ºä¸€ä¸ªåŒ…å«æœºå™¨æŒ‡ä»¤çš„æ–‡ä»¶ã€‚&lt;/li>
&lt;li>CPU æ‰§è¡Œè¿™äº›æŒ‡ä»¤ã€‚&lt;/li>
&lt;/ol>
&lt;p>åœ¨å›¾ 12-1 ä¸­æ³¨æ„åˆ°ï¼Œæœ€ç»ˆï¼Œä½ å¿…é¡»å°†ç¨‹åºç¿»è¯‘æˆ CPU èƒ½å¤Ÿç†è§£çš„æŒ‡ä»¤ï¼Œè€Œ CPU å¹¶ä¸å…³å¿ƒä½ ç”¨å“ªç§ç¼–ç¨‹è¯­è¨€æ¥äº§ç”Ÿè¿™äº›æŒ‡ä»¤ã€‚&lt;/p>
&lt;p>JVM ç±»ä¼¼äºè®¡ç®—æœºï¼Œå®ƒä¹Ÿéœ€è¦å°†ä»£ç ç¿»è¯‘æˆä½çº§åˆ«çš„æŒ‡ä»¤ï¼Œç§°ä¸º&lt;em>Java å­—èŠ‚ç &lt;/em>ã€‚ç„¶è€Œï¼Œä½œä¸ºä¸€ä¸ª&lt;em>è™šæ‹Ÿ&lt;/em>æœºå™¨ï¼Œè¿™ç§ç¿»è¯‘æ˜¯ä½œä¸ºè½¯ä»¶è€Œä¸æ˜¯ç¡¬ä»¶å®ç°çš„ã€‚è¿è¡Œä¸­çš„ JVM é€šè¿‡å°†å­—èŠ‚ç å®æ—¶ç¿»è¯‘æˆä¸»æœºå¯ä»¥ç†è§£çš„æœºå™¨ä»£ç æ¥æ‰§è¡Œï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º&lt;em>åŠæ—¶**ç¼–è¯‘&lt;/em>ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/java/compile.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 12-1ï¼šC è¯­è¨€ç¨‹åºå¦‚ä½•è¢«ç¿»è¯‘æˆæœºå™¨ç çš„é«˜çº§æ¦‚è¿°&lt;/p>
&lt;p>ä¸ºäº†è®©ä¸€ä¸ªç¨‹åºåœ¨ JVM ä¸Šè¿è¡Œï¼Œå®ƒå¿…é¡»è¢«ç¼–è¯‘æˆ Java å­—èŠ‚ç ã€‚é€šå¸¸ï¼Œå½“ä½ ç¼–è¯‘ç¨‹åºæ—¶ï¼Œäº§ç”Ÿçš„å­—èŠ‚ç è¢«ä¿å­˜åœ¨ä¸€ä¸ª*.class&lt;em>æ–‡ä»¶ä¸­ã€‚ç„¶åä½ ä¼šæŠŠè¿™äº›æ–‡ä»¶æ‰“åŒ…åœ¨&lt;/em>Java å½’æ¡£*æ–‡ä»¶ï¼ˆJAR æ–‡ä»¶ï¼‰ä¸­ã€‚å°±åƒ CPU ä¸å…³å¿ƒä½ ç”¨å“ªç§ç¼–ç¨‹è¯­è¨€æ¥ç”Ÿæˆæœºå™¨æŒ‡ä»¤ä¸€æ ·ï¼ŒJVM ä¹Ÿä¸å…³å¿ƒä½ å¦‚ä½•åˆ›å»ºå­—èŠ‚ç ã€‚å®ƒä¸å…³å¿ƒä½ æ˜¯å¦ä½¿ç”¨ Scalaã€JRubyã€Clojureï¼Œç”šè‡³æ˜¯ Java æ¥åˆ›å»º Java å­—èŠ‚ç ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±åƒå›¾ 12-2 ä¸­æ‰€ç¤ºçš„é‚£æ ·ã€‚&lt;/p>
&lt;ol>
&lt;li>Java ç¼–è¯‘å™¨è¯»å–æºä»£ç ã€‚&lt;/li>
&lt;li>ç¼–è¯‘å™¨è¾“å‡ºå­—èŠ‚ç ï¼Œé€šå¸¸æ˜¯åœ¨ä¸€ä¸ª JAR æ–‡ä»¶ä¸­ã€‚&lt;/li>
&lt;li>JVM æ‰§è¡Œå­—èŠ‚ç ã€‚&lt;/li>
&lt;li>VM å‘ CPU å‘é€æœºå™¨æŒ‡ä»¤ã€‚&lt;/li>
&lt;/ol>
&lt;p>å½“æœ‰äººè¯´ Clojure åœ¨ JVM ä¸Šè¿è¡Œæ—¶ï¼Œä»–ä»¬çš„æ„æ€ä¹‹ä¸€æ˜¯ Clojure ç¨‹åºè¢«ç¼–è¯‘æˆ Java å­—èŠ‚ç ï¼ŒJVM è¿›ç¨‹æ‰§è¡Œå®ƒä»¬ã€‚ä»æ“ä½œçš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ„å‘³ç€ä½ å¯¹å¾… Clojure ç¨‹åºå’Œ Java ç¨‹åºæ˜¯ä¸€æ ·çš„ã€‚ä½ æŠŠå®ƒä»¬ç¼–è¯‘æˆ JAR æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨&lt;code>java&lt;/code>å‘½ä»¤è¿è¡Œå®ƒä»¬ã€‚å¦‚æœå®¢æˆ·éœ€è¦ä¸€ä¸ªåœ¨ JVM ä¸Šè¿è¡Œçš„ç¨‹åºï¼Œä½ å¯ä»¥å·å·åœ°ç”¨ Clojure è€Œä¸æ˜¯ Java æ¥ç¼–å†™ï¼Œä»–ä»¬ä¸ä¼šçŸ¥é“çš„ã€‚ä»å¤–é¢çœ‹ï¼Œä½ æ— æ³•åˆ†è¾¨ Java å’Œ Clojure ç¨‹åºä¹‹é—´çš„åŒºåˆ«ï¼Œå°±åƒä½ æ— æ³•åˆ†è¾¨ C å’Œ C++ç¨‹åºä¹‹é—´çš„åŒºåˆ«ä¸€æ ·ã€‚Clojure å¯ä»¥è®©ä½ å˜å¾—å¯Œæœ‰æˆæ•ˆï¼Œè€Œä¸”æ˜¯å·å·æ‘¸æ‘¸çš„ã€‚&lt;/p>
&lt;p>ï¼&lt;a class="link" href="https://www.braveclojure.com/assets/images/cftbat/java/jvm-compile.png" target="_blank" rel="noopener"
>&lt;/a>&lt;/p>
&lt;p>å›¾ 12-2ï¼šJava ç¨‹åºäº§ç”Ÿ JVM å­—èŠ‚ç ï¼Œä½† JVM ä»ç„¶éœ€è¦äº§ç”Ÿæœºå™¨æŒ‡ä»¤ï¼Œå°±åƒ C è¯­è¨€ç¼–è¯‘å™¨ä¸€æ ·ã€‚&lt;/p>
&lt;h2 id="ç¼–å†™ç¼–è¯‘å’Œè¿è¡Œä¸€ä¸ª-java-ç¨‹åº">ç¼–å†™ã€ç¼–è¯‘å’Œè¿è¡Œä¸€ä¸ª Java ç¨‹åº&lt;/h2>
&lt;p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªçœŸæ­£çš„ Java ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†äº†è§£åˆ° Java æ‰€ä½¿ç”¨çš„é¢å‘å¯¹è±¡çš„èŒƒå¼ã€‚ç„¶åï¼Œä½ å°†ç”¨ Java å»ºç«‹ä¸€ä¸ªç®€å•çš„æµ·ç›—çŸ­è¯­ä¹¦ã€‚è¿™å°†å¸®åŠ©ä½ å¯¹ JVM æ„Ÿåˆ°æ›´åŠ èˆ’é€‚ï¼Œå®ƒå°†ä¸ºå³å°†åˆ°æ¥çš„ Java äº’æ“ä½œï¼ˆç¼–å†™ç›´æ¥ä½¿ç”¨ Java ç±»ã€å¯¹è±¡å’Œæ–¹æ³•çš„ Clojure ä»£ç ï¼‰ä¸€èŠ‚åšå¥½å‡†å¤‡ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ¶æ£è¯•å›¾åœ¨å…¬æµ·ä¸Šç ´åä½ çš„æˆ˜åˆ©å“ï¼Œå®ƒå°±ä¼šæ´¾ä¸Šç”¨åœºã€‚ä¸ºäº†æŠŠæ‰€æœ‰çš„ä¿¡æ¯è”ç³»åœ¨ä¸€èµ·ï¼Œä½ å°†åœ¨æœ¬ç« çš„æœ€åå·çœ‹ä¸€äº› Clojure çš„ Java ä»£ç ã€‚&lt;/p>
&lt;h3 id="é¢å‘å¯¹è±¡çš„ç¼–ç¨‹åœ¨ä¸–ç•Œæœ€å¾®å°çš„æœå£³ä¸­çš„åº”ç”¨">é¢å‘å¯¹è±¡çš„ç¼–ç¨‹åœ¨ä¸–ç•Œæœ€å¾®å°çš„æœå£³ä¸­çš„åº”ç”¨&lt;/h3>
&lt;p>Java æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³äº†è§£ä½ åœ¨ Clojure ç¼–ç¨‹ä¸­ä½¿ç”¨ Java åº“æˆ–ç¼–å†™ Java äº’æ“ä½œä»£ç æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä½ å°±éœ€è¦äº†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ä½ ä¹Ÿä¼šåœ¨ Clojure æ–‡æ¡£ä¸­å‘ç°é¢å‘å¯¹è±¡çš„æœ¯è¯­ï¼Œæ‰€ä»¥å­¦ä¹ è¿™äº›æ¦‚å¿µå¾ˆé‡è¦ã€‚å¦‚æœä½ ç²¾é€š OOPï¼Œå¯ä»¥éšæ„è·³è¿‡æœ¬èŠ‚ã€‚å¯¹äºé‚£äº›éœ€è¦ä¸¤åˆ†é’Ÿäº†è§£çš„äººæ¥è¯´ï¼Œè¿™é‡Œæ˜¯ï¼šOOP çš„æ ¸å¿ƒè§’è‰²æ˜¯&lt;em>ç±»&lt;/em>ã€&lt;em>å¯¹è±¡&lt;/em>å’Œ&lt;em>æ–¹æ³•&lt;/em>ã€‚&lt;/p>
&lt;p>æˆ‘è®¤ä¸ºå¯¹è±¡æ˜¯çœŸæ­£çš„ã€çœŸæ­£çš„ã€å¯ç¬‘çš„è ¢è´§æœºå™¨äººã€‚å®ƒä»¬æ˜¯é‚£ç§æ°¸è¿œä¸ä¼šå¼•èµ·å“²å­¦è¾©è®ºçš„æœºå™¨äººï¼Œå³å¼ºè¿«æœ‰çŸ¥è§‰çš„ç”Ÿç‰©è¿›è¡Œæ°¸ä¹…çš„å¥´å½¹çš„ä¼¦ç†ã€‚è¿™äº›æœºå™¨äººåªåšä¸¤ä»¶äº‹ï¼šä»–ä»¬å“åº”å‘½ä»¤å’Œç»´æŠ¤æ•°æ®ã€‚åœ¨æˆ‘çš„æƒ³è±¡ä¸­ï¼Œå®ƒä»¬é€šè¿‡åœ¨å° Hello Kitty å‰ªè´´æ¿ä¸Šå†™ä¸‹ä¸œè¥¿æ¥åšè¿™ä»¶äº‹ã€‚&lt;/p>
&lt;p>æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªåˆ¶é€ è¿™äº›æœºå™¨äººçš„å·¥å‚ã€‚æœºå™¨äººæ‰€ç†è§£çš„å‘½ä»¤é›†å’Œå®ƒæ‰€ç»´æŠ¤çš„æ•°æ®é›†éƒ½æ˜¯ç”±åˆ¶é€ æœºå™¨äººçš„å·¥å‚å†³å®šçš„ã€‚åœ¨ OOP æœ¯è¯­ä¸­ï¼Œå·¥å‚å¯¹åº”äºç±»ï¼Œandroids å¯¹åº”äºå¯¹è±¡ï¼Œè€Œå‘½ä»¤å¯¹åº”äºæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ª&lt;code>ScaryClown'å·¥å‚ï¼ˆç±»ï¼‰ï¼Œå®ƒç”Ÿäº§çš„androidsï¼ˆå¯¹è±¡ï¼‰å“åº”&lt;/code>makeBalloonArt&amp;rsquo;å‘½ä»¤ï¼ˆæ–¹æ³•ï¼‰ã€‚è¿™ä¸ªå®‰å“æœºä¸€ç›´è·Ÿè¸ªå®ƒæ‰€æ‹¥æœ‰çš„æ°”çƒçš„æ•°é‡ï¼Œç„¶ååœ¨æ°”çƒçš„æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°è¿™ä¸ªæ•°å­—ã€‚å®ƒå¯ä»¥ç”¨&lt;code>balloonCount&lt;/code>æŠ¥å‘Šè¿™ä¸ªæ•°å­—ï¼Œç”¨&lt;code>receiveBalloons&lt;/code>æ¥æ”¶ä»»ä½•æ•°é‡çš„æ°”çƒã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä¸ä»£è¡¨å°ä¸‘ Belly Rubs çš„ Java å¯¹è±¡è¿›è¡Œäº¤äº’ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ScaryClown bellyRubsTheClown = new ScaryClown();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bellyRubsTheClown.balloonCount();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bellyRubsTheClown.receiveBalloons(2);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bellyRubsTheClown.balloonCount();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bellyRubsTheClown.makeBalloonArt();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; &amp;#34;Belly Rubs makes a balloon shaped like a clown, because Belly Rubs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; is trying to scare you and nothing is scarier than clowns.&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä¾‹å­å‘Šè¯‰ä½ å¦‚ä½•ä½¿ç”¨&lt;code>ScaryClown&lt;/code>ç±»åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡&lt;code>bellyRubsTheClown&lt;/code>ã€‚å®ƒè¿˜å‘ä½ å±•ç¤ºäº†å¦‚ä½•åœ¨è¯¥å¯¹è±¡ä¸Šè°ƒç”¨æ–¹æ³•ï¼ˆå¦‚&lt;code>æ°”çƒè®¡æ•°'ã€&lt;/code>æ¥æ”¶æ°”çƒ&amp;rsquo;å’Œ`åˆ¶ä½œæ°”çƒè‰ºæœ¯&amp;rsquo;ï¼‰ï¼Œå¤§æ¦‚æ˜¯ä¸ºäº†è®©ä½ èƒ½å“å”¬å­©å­ã€‚&lt;/p>
&lt;p>ä½ åº”è¯¥çŸ¥é“ OOP çš„æœ€åä¸€ä¸ªæ–¹é¢ï¼Œæˆ–è€…è‡³å°‘æ˜¯å®ƒåœ¨ Java ä¸­çš„å®ç°æ–¹å¼ï¼Œå°±æ˜¯ä½ ä¹Ÿå¯ä»¥å‘å·¥å‚å‘é€å‘½ä»¤ã€‚åœ¨ OOP æœ¯è¯­ä¸­ï¼Œä½ ä¼šè¯´ï¼Œç±»ä¹Ÿæœ‰æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå†…ç½®ç±»&lt;code>Math&lt;/code>æœ‰è®¸å¤šç±»æ–¹æ³•ï¼ŒåŒ…æ‹¬&lt;code>Math.abs&lt;/code>ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°å­—çš„ç»å¯¹å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Math.abs(-50)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; 50
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘å¸Œæœ›è¿™äº›å°ä¸‘æ²¡æœ‰ç»™ä½ é€ æˆå¤ªå¤§çš„åˆ›ä¼¤ã€‚ç°åœ¨è®©æˆ‘ä»¬æŠŠä½ çš„ OOP çŸ¥è¯†ç”¨åœ¨å·¥ä½œä¸Šå§!&lt;/p>
&lt;h3 id="ahoy-world">Ahoy, World&lt;/h3>
&lt;p>ç»§ç»­å‰è¿›ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º&lt;em>phrasebook&lt;/em>çš„æ–°ç›®å½•ã€‚åœ¨è¯¥ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º&lt;em>PiratePhrases.java&lt;/em>çš„æ–‡ä»¶ï¼Œå¹¶ç¼–å†™ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">public class PiratePhrases
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static void main(String[] args)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;Shiver me timbers!!&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªéå¸¸ç®€å•çš„ç¨‹åºå°†åœ¨ä½ è¿è¡Œæ—¶å‘ä½ çš„ç»ˆç«¯æ‰“å° &amp;ldquo;Shiver me timbers!!!&amp;ldquo;è¿™å¥è¯ã€‚(è¿™å°±æ˜¯æµ·ç›—è¯´ &amp;ldquo;ä½ å¥½ï¼Œä¸–ç•Œï¼&amp;ldquo;çš„æ–¹å¼ï¼‰ï¼Œå½“ä½ è¿è¡Œå®ƒæ—¶ï¼Œå®ƒå°†æ‰“å°åˆ°ä½ çš„ç»ˆç«¯ã€‚å®ƒç”±ä¸€ä¸ªç±»&lt;code>PiratePhrases&lt;/code>å’Œä¸€ä¸ªå±äºè¯¥ç±»çš„é™æ€æ–¹æ³•&lt;code>main&lt;/code>ç»„æˆã€‚é™æ€æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯ç±»çš„æ–¹æ³•ã€‚&lt;/p>
&lt;p>åœ¨ä½ çš„ç»ˆç«¯ï¼Œç”¨ javac PiratePhrases.java å‘½ä»¤ç¼–è¯‘&lt;code>PiratePhrases&lt;/code>æºä»£ç ã€‚å¦‚æœä½ æ‰“çš„å­—éƒ½æ˜¯æ­£ç¡®çš„ï¼Œ**ä½ çš„å¿ƒæ˜¯çº¯æ´çš„ï¼Œä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªåä¸º&lt;em>PiratePhrases.class&lt;/em>çš„æ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PiratePhrases.class PiratePhrases.java
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ åˆšåˆšç¼–è¯‘äº†ä½ çš„ç¬¬ä¸€ä¸ª Java ç¨‹åºï¼Œæˆ‘çš„æœ‹å‹! ç°åœ¨ç”¨&lt;code>java PiratePhrases&lt;/code>è¿è¡Œå®ƒã€‚ä½ åº”è¯¥çœ‹åˆ°è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Shiver me timbers!!!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œå‘ç”Ÿçš„äº‹æƒ…æ˜¯ä½ ç”¨ Java ç¼–è¯‘å™¨&lt;code>javac&lt;/code>åˆ›å»ºäº†ä¸€ä¸ª Java ç±»æ–‡ä»¶ï¼Œ&lt;em>PiratePhrases.class&lt;/em>ã€‚è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†å¤§é‡çš„ Java å­—èŠ‚ç ï¼ˆå¥½å§ï¼Œå¯¹äºè¿™ä¹ˆå¤§çš„ç¨‹åºï¼Œä¹Ÿè®¸åªæœ‰ä¸€ä¸ªå­—èŠ‚ï¼‰ã€‚&lt;/p>
&lt;p>å½“ä½ è¿è¡Œ &amp;ldquo;java PiratePhrases &amp;ldquo;æ—¶ï¼ŒJVM é¦–å…ˆæŸ¥çœ‹äº†ä½ çš„&lt;em>classpath&lt;/em>ï¼Œå¯»æ‰¾ä¸€ä¸ªåä¸º &amp;ldquo;PiratePhrases &amp;ldquo;çš„ç±»ã€‚classpath æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„åˆ—è¡¨ï¼ŒJVM é€šè¿‡æœç´¢æ¥å¯»æ‰¾å®šä¹‰ç±»çš„æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œclasspath åŒ…æ‹¬ä½ è¿è¡Œ java æ—¶æ‰€åœ¨çš„ç›®å½•ã€‚è¯•ç€è¿è¡Œ java -classpath /tmp PiratePhrasesï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå°½ç®¡&lt;em>PiratePhrases.class&lt;/em>å°±åœ¨ä½ çš„å½“å‰ç›®å½•ä¸­ã€‚&lt;/p>
&lt;p>æ³¨æ„ ä½ å¯ä»¥åœ¨ä½ çš„ classpath ä¸Šæœ‰å¤šä¸ªè·¯å¾„ï¼Œå¦‚æœä½ åœ¨ Mac ä¸Šæˆ–è¿è¡Œ Linuxï¼Œå¯ä»¥ç”¨å†’å·éš”å¼€ï¼Œå¦‚æœä½ åœ¨ä½¿ç”¨ Windowsï¼Œå¯ä»¥ç”¨åˆ†å·ã€‚ä¾‹å¦‚ï¼Œclasspath /tmp:/var/maven:.åŒ…æ‹¬/tmpã€/var/maven å’Œ.ç›®å½•ã€‚&lt;/p>
&lt;p>åœ¨ Java ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶åªå…è®¸æœ‰ä¸€ä¸ªå…¬æœ‰ç±»ï¼Œè€Œä¸”æ–‡ä»¶åå¿…é¡»ä¸ç±»åä¸€è‡´ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ&lt;code>java&lt;/code>çŸ¥é“è¦å°è¯•åœ¨&lt;em>PiratePhrases.class&lt;/em>ä¸­å¯»æ‰¾&lt;code>PiratePhrases&lt;/code>ç±»çš„å­—èŠ‚ç ã€‚åœ¨&lt;code>java&lt;/code>æ‰¾åˆ°&lt;code>PiratePhrases&lt;/code>ç±»çš„å­—èŠ‚ç åï¼Œå®ƒæ‰§è¡Œäº†è¯¥ç±»çš„&lt;code>main&lt;/code>æ–¹æ³•ã€‚Java ä¸ C è¯­è¨€ç±»ä¼¼ï¼Œåªè¦ä½ è¯´ &amp;ldquo;è¿è¡ŒæŸäº›ä¸œè¥¿ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªç±»ä½œä¸ºå…¥å£ç‚¹&amp;rdquo;ï¼Œå®ƒå°±ä¼šä¸€ç›´è¿è¡Œè¿™ä¸ªç±»çš„&lt;code>main'æ–¹æ³•ï¼›å› æ­¤ï¼Œè¿™ä¸ªæ–¹æ³•å¿…é¡»æ˜¯&lt;/code>public&amp;rsquo;ï¼Œä½ å¯ä»¥åœ¨`PiratePhrases&amp;rsquo;çš„æºä»£ç ä¸­çœ‹åˆ°ã€‚&lt;/p>
&lt;p>åœ¨ä¸‹ä¸€èŠ‚ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å¤„ç†è·¨è¶Šå¤šä¸ªæ–‡ä»¶çš„ç¨‹åºä»£ç ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Java åº“ã€‚&lt;/p>
&lt;h2 id="åŒ…å’Œå¯¼å…¥">åŒ…å’Œå¯¼å…¥&lt;/h2>
&lt;p>ä¸ºäº†äº†è§£å¦‚ä½•ä½¿ç”¨å¤šæ–‡ä»¶ç¨‹åºå’Œ Java åº“ï¼Œæˆ‘ä»¬å°†ç¼–è¯‘å¹¶è¿è¡Œä¸€ä¸ªç¨‹åºã€‚æœ¬èŠ‚å¯¹ Clojure æœ‰ç›´æ¥çš„å½±å“ï¼Œå› ä¸ºä½ å°†ä½¿ç”¨åŒæ ·çš„æƒ³æ³•å’Œæœ¯è¯­æ¥ä¸ Java åº“è¿›è¡Œäº¤äº’ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬ä»å‡ ä¸ªå®šä¹‰å¼€å§‹ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŒ…&lt;/strong>ä¸ Clojure çš„å‘½åç©ºé—´ç±»ä¼¼ï¼ŒåŒ…æä¾›äº†ä»£ç ç»„ç»‡ã€‚åŒ…åŒ…å«ç±»ï¼ŒåŒ…åå¯¹åº”äºæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸­æœ‰ &amp;ldquo;package com.shapemaster &amp;ldquo;ä¸€è¡Œï¼Œé‚£ä¹ˆç›®å½•&lt;em>com/shapemaster&lt;/em>ä¸€å®šå­˜åœ¨äºä½ çš„ classpath ä¸Šã€‚åœ¨è¯¥ç›®å½•ä¸­ä¼šæœ‰å®šä¹‰ç±»çš„æ–‡ä»¶ã€‚&lt;/li>
&lt;li>&lt;strong>import&lt;/strong> Java å…è®¸ä½ å¯¼å…¥ç±»ï¼Œè¿™åŸºæœ¬ä¸Šæ„å‘³ç€ä½ å¯ä»¥ä¸ä½¿ç”¨å®ƒä»¬çš„å‘½åç©ºé—´å‰ç¼€æ¥å¼•ç”¨å®ƒä»¬ã€‚æ‰€ä»¥å¦‚æœä½ åœ¨&lt;code>com.shapemaster&lt;/code>ä¸­æœ‰ä¸€ä¸ªåä¸º&lt;code>Square&lt;/code>çš„ç±»ï¼Œä½ å¯ä»¥åœ¨&lt;code>.java&lt;/code>æ–‡ä»¶çš„é¡¶éƒ¨å†™ä¸Š&lt;code>import``com.shapemaster.Square;&lt;/code>æˆ–&lt;code>import com.shapemaster.*;&lt;/code>ï¼Œä»¥ä¾¿åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨&lt;code>Square&lt;/code>è€Œä¸æ˜¯&lt;code>com.shapemaster.Square&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>è®©æˆ‘ä»¬è¯•è¯•ä½¿ç”¨&lt;code>package&lt;/code>å’Œ&lt;code>import&lt;/code>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªåä¸º&lt;code>pirate_phrases&lt;/code>çš„åŒ…ï¼Œå®ƒæœ‰ä¸¤ä¸ªç±»ï¼Œ&lt;code>é—®å€™'å’Œ&lt;/code>å‘Šåˆ«&amp;rsquo;ã€‚Â é¦–å…ˆï¼Œæµè§ˆä½ çš„&lt;em>phrasebook&lt;/em>ï¼Œåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºå¦ä¸€ä¸ªç›®å½•ï¼Œ&lt;em>pirate_phrases&lt;/em>ã€‚åˆ›å»º&lt;em>pirate_phrases&lt;/em>æ˜¯å¿…è¦çš„ï¼Œå› ä¸º Java åŒ…çš„åç§°ä¸æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç›¸å¯¹åº”ã€‚ç„¶åï¼Œåœ¨&lt;em>pirate_phrases&lt;/em>ç›®å½•ä¸‹åˆ›å»º&lt;em>Greetings.java&lt;/em>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="err">âŠ&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">pirate_phrases&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">public&lt;/span> &lt;span class="nx">class&lt;/span> &lt;span class="nx">Greetings&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">public&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">void&lt;/span> &lt;span class="nf">hello&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nb">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Shiver me timbers!!!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨âŠï¼Œ&lt;code>package pirate_phrases;&lt;/code>è¡¨ç¤ºè¿™ä¸ªç±»å°†æ˜¯&lt;code>pirate_phrases&lt;/code>åŒ…çš„ä¸€éƒ¨åˆ†ã€‚ç°åœ¨åœ¨&lt;em>pirate_phrases&lt;/em>ç›®å½•ä¸‹åˆ›å»º&lt;em>Farewells.java&lt;/em>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">pirate_phrases&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">public&lt;/span> &lt;span class="nx">class&lt;/span> &lt;span class="nx">Farewells&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">public&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">void&lt;/span> &lt;span class="nf">goodbye&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nb">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;A fair turn of the tide ter ye thar, ye magnificent sea friend!!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨åœ¨&lt;em>phrasebook&lt;/em>ç›®å½•ä¸‹åˆ›å»º&lt;em>PirateConversation.java&lt;/em>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">import pirate_phrases.*;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class PirateConversation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static void main(String[] args)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Greetings greetings = new Greetings();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> greetings.hello();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Farewells farewells = new Farewells();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> farewells.goodbye();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€è¡Œï¼Œ&lt;code>import pirate_phrases.*;&lt;/code>ï¼Œå¯¼å…¥äº†&lt;code>pirate_phrases&lt;/code>åŒ…ä¸­çš„æ‰€æœ‰ç±»ï¼Œå…¶ä¸­åŒ…å«&lt;code>é—®å€™'å’Œ&lt;/code>å‘Šåˆ«&amp;rsquo;ç±»ã€‚&lt;/p>
&lt;p>å¦‚æœä½ åœ¨&lt;em>phrasebook&lt;/em>ç›®å½•ä¸‹è¿è¡Œ&lt;code>javac PirateConversation.java&lt;/code>ï¼Œæ¥ç€è¿è¡Œ&lt;code>java PirateConversation&lt;/code>ï¼Œä½ åº”è¯¥çœ‹åˆ°è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Shiver me timbers!!!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">A fair turn of the tide ter ye thar, ye magnificent sea friend!!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>äº²çˆ±çš„è¯»è€…ï¼Œå¥¹åœ¨é‚£é‡Œå¹äº†èµ·æ¥ã€‚å¥¹ç¡®å®åœ¨å¹ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼Œå½“ä½ ç¼–è¯‘ä¸€ä¸ª Java ç¨‹åºæ—¶ï¼ŒJava ä¼šåœ¨ä½ çš„ classpath ä¸­æœç´¢åŒ…ã€‚è¯•ç€è¾“å…¥ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd pirate_phrases
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">javac ../PirateConversation.java
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¼šå¾—åˆ°è¿™ä¸ªç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">PirateConversation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">java&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">pirate_phrases&lt;/span> &lt;span class="nx">does&lt;/span> &lt;span class="nx">not&lt;/span> &lt;span class="nx">exist&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nx">pirate_phrases&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">^&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è½°éš†éš†! Java ç¼–è¯‘å™¨åˆšåˆšå‘Šè¯‰ä½ ï¼Œè®©ä½ ç¾æ„§åœ°å‚ä¸‹å¤´æ¥ï¼Œä¹Ÿè®¸è¿˜ä¼šå“­æ³£ä¸€ä¸‹ã€‚&lt;/p>
&lt;p>ä¸ºä»€ä¹ˆï¼Ÿå®ƒè®¤ä¸º&lt;code>pirate_phrases&lt;/code>åŒ…ä¸å­˜åœ¨ã€‚ä½†è¿™å¾ˆæ„šè ¢ï¼Œå¯¹å—ï¼Ÿä½ æ˜¯åœ¨&lt;em>pirate_phrases&lt;/em>ç›®å½•ä¸‹ï¼ä½ æ˜¯åœ¨&lt;em>pirate_phrases&lt;/em>ç›®å½•ä¸‹ã€‚&lt;/p>
&lt;p>è¿™é‡Œå‘ç”Ÿçš„æƒ…å†µæ˜¯ï¼Œé»˜è®¤çš„ classpath åªåŒ…æ‹¬å½“å‰çš„ç›®å½•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯&lt;em>pirate_phrases&lt;/em>ã€‚Â &lt;code>javac&lt;/code>è¯•å›¾æ‰¾åˆ°&lt;em>phrasebook/pirate_phrases/pirate_phrases&lt;/em>ç›®å½•ï¼Œä½†è¯¥ç›®å½•å¹¶ä¸å­˜åœ¨ã€‚å½“ä½ åœ¨&lt;em>phrasebook&lt;/em>ç›®å½•ä¸‹è¿è¡Œ&lt;code>javac ../PirateConversation.java&lt;/code>æ—¶ï¼Œ&lt;code>javac&lt;/code>è¯•å›¾æ‰¾åˆ°&lt;em>phrasebook/pirate_phrases&lt;/em>ç›®å½•ï¼Œè¯¥ç›®å½•ç¡®å®å­˜åœ¨ã€‚åœ¨ä¸æ”¹å˜ç›®å½•çš„æƒ…å†µä¸‹ï¼Œå°è¯•è¿è¡Œ javac -classpath ../ ../PirateConversation.javaã€‚å“æˆ‘ä¸€è·³ï¼Œå±…ç„¶æˆåŠŸäº†! è¿™æ˜¯å› ä¸ºä½ æ‰‹åŠ¨å°† classpath è®¾ç½®ä¸º&lt;em>pirate_phrases&lt;/em>çš„çˆ¶ç›®å½•ï¼Œä¹Ÿå°±æ˜¯&lt;em>phrasebook&lt;/em>ã€‚ä»é‚£é‡Œï¼Œ&lt;code>javac&lt;/code>å¯ä»¥æˆåŠŸåœ°æ‰¾åˆ°&lt;em>pirate_phrases&lt;/em>ç›®å½•ã€‚&lt;/p>
&lt;p>ç»¼ä¸Šæ‰€è¿°ï¼ŒåŒ…ç»„ç»‡äº†ä»£ç ï¼Œå¹¶è¦æ±‚æœ‰ä¸€ä¸ªåŒ¹é…çš„ç›®å½•ç»“æ„ã€‚å¯¼å…¥ç±»å¯ä»¥è®©ä½ å¼•ç”¨å®ƒä»¬ï¼Œè€Œä¸éœ€è¦é¢„ç•™æ•´ä¸ªç±»çš„åŒ…åã€‚Â &lt;code>javac&lt;/code>å’Œ Java ä½¿ç”¨ classpath æŸ¥æ‰¾åŒ…ã€‚&lt;/p>
&lt;h2 id="jar-æ–‡ä»¶">JAR æ–‡ä»¶&lt;/h2>
&lt;p>JAR æ–‡ä»¶å…è®¸ä½ å°†æ‰€æœ‰çš„*.class&lt;em>æ–‡ä»¶æ†ç»‘æˆä¸€ä¸ªå•ä¸€çš„æ–‡ä»¶ã€‚å¯¼èˆªåˆ°ä½ çš„&lt;/em>phrasebook*ç›®å½•å¹¶è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">jar cvfe conversation.jar PirateConversation PirateConversation.class
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pirate_phrases/*.class
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">java -jar conversation.jar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·å°±èƒ½æ­£ç¡®æ˜¾ç¤ºæµ·ç›—å¯¹è¯äº†ã€‚ä½ æŠŠæ‰€æœ‰çš„ç±»æ–‡ä»¶æ†ç»‘åœ¨&lt;em>conversation.jar&lt;/em>ä¸­ã€‚ä½¿ç”¨&lt;code>e&lt;/code>æ ‡å¿—ï¼Œä½ è¿˜æŒ‡å‡º&lt;code>PirateConversation&lt;/code>ç±»æ˜¯&lt;em>å…¥å£ç‚¹&lt;/em>ã€‚å…¥å£ç‚¹æ˜¯åŒ…å« JAR æ•´ä½“è¿è¡Œæ—¶åº”è¯¥æ‰§è¡Œçš„&lt;code>main'æ–¹æ³•çš„ç±»ï¼Œ&lt;/code>jar&amp;rsquo;å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨ JAR æ–‡ä»¶ä¸­çš„&lt;em>META-INF/MANIFEST.MF&lt;/em>æ–‡ä»¶ä¸­ã€‚å¦‚æœä½ è¦é˜…è¯»è¯¥æ–‡ä»¶ï¼Œå®ƒå°†åŒ…å«è¿™ä¸€è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Main-Class: PirateConversation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå½“ä½ æ‰§è¡Œ JAR æ–‡ä»¶æ—¶ï¼Œä½ ä¸å¿…æ‹…å¿ƒä½ åœ¨å“ªä¸ªç›®å½•ä¸‹ï¼Œç›¸å¯¹äºæ–‡ä»¶è€Œè¨€ã€‚ä½ å¯ä»¥æ¢åˆ°&lt;em>pirate_phrases&lt;/em>ç›®å½•ï¼Œç„¶åè¿è¡Œ&lt;code>java -jar .../conversation.jar&lt;/code>ï¼Œå°±å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚åŸå› æ˜¯ JAR æ–‡ä»¶ç»´æŠ¤äº†ç›®å½•ç»“æ„ã€‚ä½ å¯ä»¥ç”¨ jar tf conversation.jar æŸ¥çœ‹å®ƒçš„å†…å®¹ï¼Œå®ƒçš„è¾“å‡ºæ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">META-INF/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">meta-inf/manifest.mf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PirateConversation.class
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pirate_phrases/Farewells.class
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Pirate_phrases/Greetings.class
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒJAR æ–‡ä»¶åŒ…æ‹¬&lt;em>pirate_phrases&lt;/em>ç›®å½•ã€‚å…³äº JARs è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„äº‹å®ï¼šå®ƒä»¬å®é™…ä¸Šåªæ˜¯å¸¦æœ‰*.jar*æ‰©å±•åçš„ ZIP æ–‡ä»¶ã€‚ä½ å¯ä»¥åƒå¯¹å¾…å…¶ä»– ZIP æ–‡ä»¶ä¸€æ ·å¯¹å¾…å®ƒä»¬ã€‚&lt;/p>
&lt;h2 id="clojurejar">clojure.jar&lt;/h2>
&lt;p>ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½çœ‹çœ‹ Clojure åœ¨å¼•æ“ç›–ä¸‹æ˜¯å¦‚ä½•å·¥ä½œçš„äº†! ä¸‹è½½[1.9.0 ç¨³å®šç‰ˆ]ï¼ˆ&lt;a class="link" href="http://repo1.maven.org/maven2/org/clojure/clojure/1.7.0/clojure-1.9.0.zip" target="_blank" rel="noopener"
>http://repo1.maven.org/maven2/org/clojure/clojure/1.7.0/clojure-1.9.0.zip&lt;/a>ï¼‰å¹¶è¿è¡Œå®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">java -jar clojure-1.7.0.jar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ åº”è¯¥çœ‹åˆ°æœ€èˆ’å¿ƒçš„æ™¯è±¡ï¼ŒClojure REPLã€‚å®ƒç©¶ç«Ÿæ˜¯å¦‚ä½•å¯åŠ¨çš„å‘¢ï¼Ÿè®©æˆ‘ä»¬çœ‹çœ‹ JAR æ–‡ä»¶ä¸­çš„&lt;em>META-INF/MANIFEST.MF&lt;/em>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Manifest-Version: 1.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Archiver-Version: Plexus Archiver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created-By: Apache Maven
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Built-By: hudson
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Build-Jdk: 1.7.0_20
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Main-Class: clojure.main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœ‹èµ·æ¥ï¼Œ&lt;code>clojure.main&lt;/code>è¢«æŒ‡å®šä¸ºå…¥å£ç‚¹ã€‚è¿™ä¸ªç±»æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿå—¯ï¼Œçœ‹çœ‹ GitHub ä¸Šçš„&lt;em>clojure/main.java&lt;/em>ï¼Œç½‘å€æ˜¯*&lt;a class="link" href="https://github.com/clojure/clojure/blob/master/src/jvm/clojure/main.java" target="_blank" rel="noopener"
>https://github.com/clojure/clojure/blob/master/src/jvm/clojure/main.java&lt;/a>*ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Copyright (c) Rich Hickey. All rights reserved.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * The use and distribution terms for this software are covered by the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * Eclipse Public License 1.0 (http://opensource.org/licenses/eclipse-1.0.php)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * which can be found in the file epl-v10.html at the root of this distribution.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * By using this software in any fashion, you are agreeing to be bound by
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * the terms of this license.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * You must not remove this notice, or any other, from this software.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> **/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">clojure&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nx">clojure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lang&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Symbol&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nx">clojure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lang&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Var&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nx">clojure&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">lang&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">RT&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">public&lt;/span> &lt;span class="nx">class&lt;/span> &lt;span class="nx">main&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">final&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">private&lt;/span> &lt;span class="nx">Symbol&lt;/span> &lt;span class="nx">CLOJURE_MAIN&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">Symbol&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">intern&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;clojure.main&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">final&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">private&lt;/span> &lt;span class="nx">Var&lt;/span> &lt;span class="nx">REQUIRE&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">RT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;clojure.core&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;require&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">final&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">private&lt;/span> &lt;span class="nx">Var&lt;/span> &lt;span class="nx">LEGACY_REPL&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">RT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;clojure.main&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;legacy-repl&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">final&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">private&lt;/span> &lt;span class="nx">Var&lt;/span> &lt;span class="nx">LEGACY_SCRIPT&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">RT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;clojure.main&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;legacy-script&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">final&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">private&lt;/span> &lt;span class="nx">Var&lt;/span> &lt;span class="nx">MAIN&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">RT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;clojure.main&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">public&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">void&lt;/span> &lt;span class="nf">legacy_repl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">String&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">REQUIRE&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">CLOJURE_MAIN&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LEGACY_REPL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">RT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">seq&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">public&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">void&lt;/span> &lt;span class="nf">legacy_script&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">String&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">REQUIRE&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">CLOJURE_MAIN&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">LEGACY_SCRIPT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">RT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">seq&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">public&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">void&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">String&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="nx">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">REQUIRE&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">invoke&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">CLOJURE_MAIN&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MAIN&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">applyTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">RT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">seq&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">args&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¯¥æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º&lt;code>main&lt;/code>çš„ç±»ã€‚å®ƒå±äº &amp;ldquo;clojure &amp;ldquo;åŒ…ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ª &amp;ldquo;å…¬å…±é™æ€ &amp;ldquo;çš„ &amp;ldquo;main &amp;ldquo;æ–¹æ³•ï¼ŒJVM å®Œå…¨ä¹æ„å°†å…¶ä½œä¸ºä¸€ä¸ªå…¥å£ç‚¹ã€‚ä»¥è¿™ç§æ–¹å¼æ¥çœ‹ï¼ŒClojure æ˜¯ä¸€ä¸ª JVM ç¨‹åºï¼Œå°±åƒå…¶ä»–ç¨‹åºä¸€æ ·ã€‚&lt;/p>
&lt;p>è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ·±å…¥çš„ Java æ•™ç¨‹ï¼Œä½†æˆ‘å¸Œæœ›å®ƒæœ‰åŠ©äºæ¾„æ¸…ç¨‹åºå‘˜åœ¨è°ˆè®º Clojure &amp;ldquo;åœ¨ JVM ä¸Šè¿è¡Œ &amp;ldquo;æˆ–æˆä¸ºä¸€ç§ &amp;ldquo;æ‰˜ç®¡ &amp;ldquo;è¯­è¨€æ—¶çš„æ„æ€ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œä½ å°†ç»§ç»­æ¢ç´¢ JVM çš„é­…åŠ›ï¼Œå­¦ä¹ å¦‚ä½•åœ¨ä½ çš„ Clojure é¡¹ç›®ä¸­ä½¿ç”¨é¢å¤–çš„ Java åº“ã€‚&lt;/p>
&lt;p>Clojure åº”ç”¨ç¨‹åº JARs&lt;/p>
&lt;p>ä½ ç°åœ¨çŸ¥é“ Java æ˜¯å¦‚ä½•è¿è¡Œ Java JARs çš„ï¼Œä½†å®ƒæ˜¯å¦‚ä½•è¿è¡Œæ†ç»‘ä¸º JARs çš„ Clojure åº”ç”¨ç¨‹åºçš„å‘¢ï¼Ÿæ¯•ç«Ÿï¼ŒClojure åº”ç”¨ç¨‹åºæ²¡æœ‰ç±»ï¼Œä¸æ˜¯å—ï¼Ÿ&lt;/p>
&lt;p>äº‹å®è¯æ˜ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨å‘½åç©ºé—´å£°æ˜ä¸­åŠ å…¥&lt;code>(:gen-class)&lt;/code>æŒ‡ä»¤ï¼Œè®© Clojure ç¼–è¯‘å™¨ä¸ºä¸€ä¸ªå‘½åç©ºé—´ç”Ÿæˆä¸€ä¸ªç±»ã€‚(ä½ å¯ä»¥åœ¨ä½ åˆ›å»ºçš„ç¬¬ä¸€ä¸ª Clojure ç¨‹åºä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œå³ç¬¬ä¸€ç« çš„&lt;em>clojure-noob&lt;/em>ã€‚è¿˜è®°å¾—é‚£ä¸ªç¨‹åºå—ï¼Œå°èŒ¶å£¶ï¼Ÿï¼‰ è¿™æ„å‘³ç€ç¼–è¯‘å™¨ä¼šäº§ç”Ÿå¿…è¦çš„å­—èŠ‚ç ï¼Œä½¿ JVM æŠŠå‘½åç©ºé—´å½“ä½œå®šä¹‰äº†ä¸€ä¸ª Java ç±»ã€‚&lt;/p>
&lt;p>ä½ åœ¨ç¨‹åºçš„&lt;em>project.clj&lt;/em>æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨&lt;code>:main&lt;/code>å±æ€§ï¼Œä¸ºä½ çš„ç¨‹åºè®¾ç½®å…¥å£ç‚¹çš„å‘½åç©ºé—´ã€‚å¯¹äº&lt;em>clojure-noob&lt;/em>ï¼Œä½ åº”è¯¥çœ‹åˆ°&lt;code>:main ^:skip-aot clojure-noob.core&lt;/code>ã€‚å½“ Leiningen ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œå®ƒå°†æ·»åŠ ä¸€ä¸ª&lt;em>meta-inf/manifest.mf&lt;/em>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«äº†ç”Ÿæˆçš„ JAR æ–‡ä»¶çš„å…¥å£ç‚¹ã€‚&lt;/p>
&lt;p>å› æ­¤ï¼Œå¦‚æœä½ åœ¨å‘½åç©ºé—´ä¸­å®šä¹‰äº†ä¸€ä¸ª&lt;code>-main&lt;/code>å‡½æ•°ï¼Œå¹¶åŒ…æ‹¬&lt;code>(:gen-class)&lt;/code>æŒ‡ä»¤ï¼ŒåŒæ—¶åœ¨ä½ çš„&lt;em>project.clj&lt;/em>æ–‡ä»¶ä¸­è®¾ç½®äº†&lt;code>:main&lt;/code>ï¼Œä½ çš„ç¨‹åºåœ¨è¢«ç¼–è¯‘ä¸º JAR æ—¶ï¼Œå°†æ‹¥æœ‰ Java è¿è¡Œå®ƒæ‰€éœ€çš„ä¸€åˆ‡ã€‚ä½ å¯ä»¥åœ¨ä½ çš„ç»ˆç«¯ä¸­è¯•ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæµè§ˆä½ çš„&lt;em>clojure-noob&lt;/em>ç›®å½•å¹¶è¿è¡Œè¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">lein uberjar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">java -jar target/uberjar/clojure-noob-0.1.0-SNAPSHOT-standalone.jar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ åº”è¯¥çœ‹åˆ°æ‰“å°å‡ºæ¥çš„ä¸¤æ¡ä¿¡æ¯ã€‚&amp;ldquo;æ¸…æ´åº¦ä»…æ¬¡äºç¥æ€§ &amp;ldquo;å’Œ &amp;ldquo;I&amp;rsquo;m a little teapot!&amp;rdquo; æ³¨æ„ï¼Œä½ ä¸éœ€è¦ Leiningen æ¥è¿è¡Œè¿™ä¸ª JAR æ–‡ä»¶ï¼›ä½ å¯ä»¥æŠŠå®ƒå‘é€ç»™æœ‹å‹å’Œé‚»å±…ï¼Œåªè¦ä»–ä»¬å®‰è£…äº† Javaï¼Œå°±å¯ä»¥è¿è¡Œå®ƒã€‚&lt;/p>
&lt;h2 id="java-interop">Java Interop&lt;/h2>
&lt;p>Rich Hickey å¯¹ Clojure çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€æ˜¯åˆ›é€ ä¸€ç§&lt;em>å®ç”¨çš„è¯­è¨€ã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼ŒClojure çš„è®¾è®¡æ˜¯ä¸ºäº†ä½¿ä½ èƒ½å¤Ÿè½»æ¾åœ°ä¸ Java ç±»å’Œå¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ Java å¹¿æ³›çš„æœ¬åœ°åŠŸèƒ½å’Œå®ƒçš„å·¨å¤§ç”Ÿæ€ç³»ç»Ÿã€‚ä½¿ç”¨ Java ç±»ã€å¯¹è±¡å’Œæ–¹æ³•çš„èƒ½åŠ›è¢«ç§°ä¸º&lt;/em>Java interop*ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Clojure çš„äº’æ“ä½œè¯­æ³•ï¼Œå¦‚ä½•å¯¼å…¥ Java åŒ…ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨æœ€å¸¸ç”¨çš„ Java ç±»ã€‚&lt;/p>
&lt;h3 id="äº’é€šè¯­æ³•">äº’é€šè¯­æ³•&lt;/h3>
&lt;p>ä½¿ç”¨ Clojure çš„äº’æ“ä½œè¯­æ³•ï¼Œä¸ Java å¯¹è±¡å’Œç±»çš„äº¤äº’æ˜¯å¾ˆç›´æ¥çš„ã€‚è®©æˆ‘ä»¬ä»å¯¹è±¡äº’æ“ä½œè¯­æ³•å¼€å§‹ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥ä½¿ç”¨&lt;code>(.&lt;/code>methodName object)æ¥è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå› ä¸ºæ‰€æœ‰çš„ Clojure å­—ç¬¦ä¸²éƒ½æ˜¯ä½œä¸º Java å­—ç¬¦ä¸²å®ç°çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¯¹å®ƒä»¬è°ƒç”¨ Java æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(.toUpperCase &amp;#34;By Bluebeard&amp;#39;s bananas!&amp;#34; )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;by bluebeard&amp;#39;s bananas!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (.indexOf &amp;#34;Let&amp;#39;s synergize our bleeding edges&amp;#34; &amp;#34;y&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 7
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™äº›ç­‰åŒäºè¿™ä¸ª Javaã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#34;By Bluebeard&amp;#39;s bananas!&amp;#34;.toUpperCase()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;Let&amp;#39;s synergize our bleeding edges&amp;#34;.indexOf(&amp;#34;y&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼ŒClojure çš„è¯­æ³•å…è®¸ä½ å‘ Java æ–¹æ³•ä¼ é€’å‚æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåœ¨âŠï¼Œä½ æŠŠå‚æ•°&lt;code>&amp;quot;y&amp;quot;&lt;/code>ä¼ ç»™äº†&lt;code>indexOf&lt;/code>æ–¹æ³•ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥è°ƒç”¨ç±»ä¸Šçš„é™æ€æ–¹æ³•å’Œè®¿é—®ç±»çš„é™æ€å­—æ®µã€‚è§‚å¯Ÿä¸€ä¸‹!&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">âŠ (java.lang.Math/abs -3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ java.lang.Math/PI
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3.141592653589793
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨âŠï¼Œä½ è°ƒç”¨äº†&lt;code>java.lang.Math&lt;/code>ç±»çš„&lt;code>abs&lt;/code>é™æ€æ–¹æ³•ï¼Œåœ¨â‹ï¼Œä½ è®¿é—®äº†è¯¥ç±»çš„&lt;code>PI&lt;/code>é™æ€å­—æ®µã€‚&lt;/p>
&lt;p>æ‰€æœ‰è¿™äº›ä¾‹å­ï¼ˆé™¤äº†&lt;code>java.lang.Math/PI&lt;/code>ï¼‰éƒ½ä½¿ç”¨äº†æ‰©å±•åˆ°ä½¿ç”¨*dot ç‰¹æ®Šå½¢å¼çš„å®ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½ ä¸éœ€è¦ä½¿ç”¨ç‚¹çš„ç‰¹æ®Šå½¢å¼ï¼Œé™¤éä½ æƒ³å†™è‡ªå·±çš„å®æ¥ä¸ Java å¯¹è±¡å’Œç±»äº¤äº’ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä¸‹é¢æ˜¯æ¯ä¸ªä¾‹å­åé¢çš„å®æ‰©å±•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(macroexpand-1 &amp;#39;(.toUpperCase &amp;#34;By Bluebeard&amp;#39;s bananas!&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (. &amp;#34;By Bluebeard&amp;#39;s bananas!&amp;#34; toUpperCase)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(macroexpand-1 &amp;#39;(.indexOf &amp;#34;Let&amp;#39;s synergize our bleeding edges&amp;#34; &amp;#34;y&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (. &amp;#34;Let&amp;#39;s synergize our bleeding edges&amp;#34; indexOf &amp;#34;y&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(macroexpand-1 &amp;#39;(Math/abs -3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (. Math abs -3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ˜¯ç‚¹è¿ç®—ç¬¦çš„ä¸€èˆ¬å½¢å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(. object-expr-or-classname-symbol method-or-member-symbol optional-args*)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç‚¹è¿ç®—ç¬¦è¿˜æœ‰ä¸€äº›åŠŸèƒ½ï¼Œå¦‚æœä½ æœ‰å…´è¶£è¿›ä¸€æ­¥æ¢ç´¢å®ƒï¼Œä½ å¯ä»¥çœ‹çœ‹ clojure.org å…³äº Java äº’æ“ä½œçš„æ–‡æ¡£*&lt;a class="link" href="http://clojure.org/java_interop#Java%20Interop-The%20Dot%20special%20form" target="_blank" rel="noopener"
>http://clojure.org/java_interop#Java%20Interop-The%20Dot%20special%20form&lt;/a>*ã€‚&lt;/p>
&lt;p>åˆ›å»ºå’Œå˜å¼‚å¯¹è±¡&lt;/p>
&lt;p>ä¸Šä¸€èŠ‚å‘Šè¯‰ä½ å¦‚ä½•è°ƒç”¨å·²ç»å­˜åœ¨çš„å¯¹è±¡çš„æ–¹æ³•ã€‚æœ¬èŠ‚å‘ä½ å±•ç¤ºå¦‚ä½•åˆ›å»ºæ–°çš„å¯¹è±¡ä»¥åŠå¦‚ä½•ä¸å®ƒä»¬è¿›è¡Œäº¤äº’ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚&lt;code>(new ClassName optional-args)&lt;/code>å’Œ&lt;code>(ClassName. optional-args)&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(new String)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(String.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(String. &amp;#34;To Davey Jones&amp;#39;s Locker with ye hardies&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;To Davey Jones&amp;#39;s Locker with ye hardies&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¤§å¤šæ•°äººä½¿ç”¨ç‚¹çš„ç‰ˆæœ¬ï¼Œ&lt;code>(ClassName.)&lt;/code>ã€‚&lt;/p>
&lt;p>è¦ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ï¼Œä½ è¦åƒä¸Šä¸€èŠ‚é‚£æ ·è°ƒç”¨å…¶ä¸Šçš„æ–¹æ³•ã€‚ä¸ºäº†ç ”ç©¶è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨&lt;code>java.util.Stack&lt;/code>ã€‚è¿™ä¸ªç±»ä»£è¡¨äº†ä¸€ä¸ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„å¯¹è±¡å †æ ˆï¼Œæˆ–è€…åªæ˜¯&lt;em>å †æ ˆ&lt;/em>ã€‚&lt;em>å †æ ˆ&lt;/em>æ˜¯ä¸€ç§å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå®ƒä»¬ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºå †æ ˆï¼Œæ˜¯å› ä¸ºä½ å¯ä»¥æŠŠå®ƒä»¬æƒ³è±¡æˆä¸€æ‘å®ç‰©ï¼Œæ¯”å¦‚è¯´ï¼Œä¸€æ‘ä½ åˆšåˆšæ å¤ºæ¥çš„é‡‘å¸ã€‚å½“ä½ å‘ä½ çš„å †æ ˆæ·»åŠ ä¸€ä¸ªç¡¬å¸æ—¶ï¼Œä½ å°±æŠŠå®ƒæ·»åŠ åˆ°å †æ ˆçš„é¡¶éƒ¨ã€‚å½“ä½ å–å‡ºä¸€æšé‡‘å¸æ—¶ï¼Œä½ å°±æŠŠå®ƒä»ä¸Šé¢ç§»èµ°ã€‚å› æ­¤ï¼Œæœ€åæ·»åŠ çš„å¯¹è±¡å°±æ˜¯ç¬¬ä¸€ä¸ªè¢«ç§»é™¤çš„å¯¹è±¡ã€‚&lt;/p>
&lt;p>ä¸ Clojure æ•°æ®ç»“æ„ä¸åŒï¼ŒJava å †æ ˆæ˜¯å¯å˜çš„ã€‚ä½ å¯ä»¥å‘å®ƒä»¬æ·»åŠ é¡¹ç›®å’Œåˆ é™¤é¡¹ç›®ï¼Œæ”¹å˜å¯¹è±¡è€Œä¸æ˜¯æ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°çš„å€¼ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åˆ›å»ºä¸€ä¸ªå †æ ˆå¹¶å‘å…¶æ·»åŠ ä¸€ä¸ªå¯¹è±¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(java.util.Stack.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (let [stack (java.util.Stack.)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.push stack &amp;#34;Latest episode of Game of Thrones, ho!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stack)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;Latest episode of Game of Thrones, ho!&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæœ‰å‡ ä¸ªæœ‰è¶£çš„ç»†èŠ‚ã€‚é¦–å…ˆï¼Œä½ éœ€è¦ä¸º&lt;code>stack&lt;/code>åˆ›å»ºä¸€ä¸ª&lt;code>let&lt;/code>ç»‘å®šï¼Œå°±åƒä½ åœ¨âŠçœ‹åˆ°çš„é‚£æ ·ï¼Œå¹¶æŠŠå®ƒä½œä¸º&lt;code>let&lt;/code>å½¢å¼çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼ã€‚å¦‚æœä½ ä¸è¿™æ ·åšï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼å°†æ˜¯å­—ç¬¦ä¸²&lt;code>&amp;quot;Game of Thrones, ho!&amp;quot;&lt;/code>ï¼Œå› ä¸ºé‚£æ˜¯&lt;code>push&lt;/code>çš„è¿”å›å€¼ã€‚&lt;/p>
&lt;p>ç¬¬äºŒï¼ŒClojure ç”¨æ–¹æ‹¬å·æ¥æ‰“å°å †æ ˆï¼Œä¸å®ƒç”¨äº Vector çš„æ–‡æœ¬è¡¨ç¤ºæ³•ç›¸åŒï¼Œè¿™å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°å›°æƒ‘ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ª Vectorã€‚ç„¶è€Œï¼Œä½ å¯ä»¥ä½¿ç”¨ Clojure çš„&lt;code>seq&lt;/code>å‡½æ•°æ¥è¯»å–å †æ ˆä¸­çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚&lt;code>first&lt;/code>ï¼Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [stack (java.util.Stack.)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.push stack &amp;#34;Latest episode of Game of Thrones, ho!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (first stack))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Latest episode of Game of Thrones, ho!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½†æ˜¯ä½ ä¸èƒ½ä½¿ç”¨åƒ&lt;code>conj&lt;/code>å’Œ&lt;code>into&lt;/code>è¿™æ ·çš„å‡½æ•°æ¥æ·»åŠ å…ƒç´ åˆ°æ ˆä¸­ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ã€‚ä½¿ç”¨ Clojure å‡½æ•°è¯»å–å †æ ˆæ˜¯å¯èƒ½çš„ï¼Œå› ä¸º Clojure æ‰©å±•äº†å¯¹&lt;code>java.util.Stack&lt;/code>çš„æŠ½è±¡ï¼Œè¿™ä¸ªä¸»é¢˜ä½ å°†åœ¨ç¬¬ 13 ç« å­¦ä¹ ã€‚&lt;/p>
&lt;p>Clojure æä¾›äº†&lt;code>doto&lt;/code>å®ï¼Œå®ƒå…è®¸ä½ æ›´ç®€æ´åœ°åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œå¤šä¸ªæ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(doto (java.util.Stack.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.push &amp;#34;Latest episode of Game of Thrones, ho!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.push &amp;#34;Whoops, I meant &amp;#39;Land, ho!&amp;#39;&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;Latest episode of Game of Thrones, ho!&amp;#34; &amp;#34;Whoops, I meant &amp;#39;Land, ho!&amp;#39;&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>doto&lt;/code>å®è¿”å›å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä»»ä½•æ–¹æ³•è°ƒç”¨çš„è¿”å›å€¼ï¼Œå®ƒæ›´å®¹æ˜“ç†è§£ã€‚å¦‚æœä½ ç”¨&lt;code>macroexpand-1&lt;/code>å±•å¼€å®ƒï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒçš„ç»“æ„ä¸ä½ åˆšæ‰åœ¨å‰é¢çš„ä¾‹å­ä¸­çœ‹åˆ°çš„&lt;code>let&lt;/code>è¡¨è¾¾å¼ç›¸åŒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(macroexpand-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;(doto (java.util.Stack.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.push &amp;#34;Latest episode of Game of Thrones, ho!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.push &amp;#34;Whoops, I meant &amp;#39;Land, ho!&amp;#39;&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (clojure.core/let
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [G__2876 (java.util.Stack.)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.push G__2876 &amp;#34;Latest episode of Game of Thrones, ho!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.push G__2876 &amp;#34;Whoops, I meant &amp;#39;Land, ho!&amp;#39;&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> G__2876)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¾ˆæ–¹ä¾¿!&lt;/p>
&lt;h3 id="å¯¼å…¥">å¯¼å…¥&lt;/h3>
&lt;p>åœ¨ Clojure ä¸­ï¼Œå¯¼å…¥çš„æ•ˆæœå’Œ Java ä¸­çš„ä¸€æ ·ï¼šä½ å¯ä»¥ä½¿ç”¨ç±»ï¼Œè€Œä¸éœ€è¦æ‰“å‡ºæ•´ä¸ªåŒ…çš„å‰ç¼€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(import java.util.Stack)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(Stack.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; []
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§ä¸€èˆ¬å½¢å¼ä¸€æ¬¡å¯¼å…¥å¤šä¸ªç±»ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(import [package.name1 ClassName1 ClassName2]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [package.name2 ClassName3 ClassName4])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(import [java.util Date Stack]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [java.net Proxy URI])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(Date.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #inst &amp;#34;2016-09-19T20:40:02.733-00:00&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ ä¼šåœ¨&lt;code>ns&lt;/code>å®ä¸­åšæ‰€æœ‰çš„å¯¼å…¥å·¥ä½œï¼Œåƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns pirate.talk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:import [java.util Date Stack].
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [java.net Proxy URI])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸¤ç§ä¸åŒçš„å¯¼å…¥ç±»çš„æ–¹æ³•æœ‰ç›¸åŒçš„ç»“æœï¼Œä½†é€šå¸¸ç¬¬äºŒç§æ–¹æ³•æ›´å¯å–ï¼Œå› ä¸ºå¯¹äºé˜…è¯»ä½ çš„ä»£ç çš„äººæ¥è¯´ï¼Œåœ¨&lt;code>ns&lt;/code>å£°æ˜ä¸­çœ‹åˆ°æ‰€æœ‰æ¶‰åŠå‘½åçš„ä»£ç å¾ˆæ–¹ä¾¿ã€‚&lt;/p>
&lt;p>è¿™å°±æ˜¯ä½ å¯¼å…¥ç±»çš„æ–¹æ³•! å¾ˆç®€å•ã€‚ä¸ºäº†ä½¿ç”Ÿæ´»æ›´åŠ ç®€å•ï¼ŒClojure è‡ªåŠ¨å¯¼å…¥äº†&lt;code>java.lang&lt;/code>ä¸­çš„ç±»ï¼ŒåŒ…æ‹¬&lt;code>java.lang.String&lt;/code>å’Œ&lt;code>java.lang.Math&lt;/code>ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ èƒ½å¤Ÿä½¿ç”¨&lt;code>String&lt;/code>è€Œä¸ç”¨å‰é¢çš„åŒ…åã€‚&lt;/p>
&lt;h2 id="å¸¸ç”¨çš„-java-ç±»">å¸¸ç”¨çš„ Java ç±»&lt;/h2>
&lt;p>ä¸ºäº†å®Œå–„æœ¬ç« ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿæµè§ˆä¸€ä¸‹ä½ æœ€å¯èƒ½ç”¨åˆ°çš„ Java ç±»ã€‚&lt;/p>
&lt;h3 id="ç³»ç»Ÿç±»">ç³»ç»Ÿç±»&lt;/h3>
&lt;p>ç³»ç»Ÿ &amp;ldquo;ç±»å…·æœ‰æœ‰ç”¨çš„ç±»å­—æ®µå’Œæ–¹æ³•ï¼Œå¯ä»¥ä¸ç¨‹åºè¿è¡Œçš„ç¯å¢ƒè¿›è¡Œäº¤äº’ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è·å–ç¯å¢ƒå˜é‡ï¼Œä¸æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºæµè¿›è¡Œäº¤äº’ã€‚&lt;/p>
&lt;p>æœ€æœ‰ç”¨çš„æ–¹æ³•å’Œæˆå‘˜æ˜¯&lt;code>exit&lt;/code>ã€&lt;code>getenv&lt;/code>å’Œ&lt;code>getProperty&lt;/code>ã€‚ä½ å¯èƒ½åœ¨ç¬¬ 5 ç« ä¸­è®¤è¯†&lt;code>System/exit&lt;/code>ï¼Œåœ¨é‚£é‡Œä½ ç”¨å®ƒæ¥é€€å‡º Peg Thing æ¸¸æˆã€‚`System/exit&amp;rsquo;å¯ä»¥ç»ˆæ­¢å½“å‰ç¨‹åºï¼Œä½ å¯ä»¥æŠŠçŠ¶æ€ä»£ç ä½œä¸ºå‚æ•°ä¼ ç»™å®ƒã€‚å¦‚æœä½ å¯¹çŠ¶æ€ä»£ç ä¸ç†Ÿæ‚‰ï¼Œæˆ‘æ¨èç»´åŸºç™¾ç§‘çš„ &amp;ldquo;é€€å‡ºçŠ¶æ€ &amp;ldquo;æ–‡ç« ï¼Œç½‘å€æ˜¯*&lt;a class="link" href="http://en.wikipedia.org/wiki/Exit_status" target="_blank" rel="noopener"
>é€€å‡ºçŠ¶æ€-ç»´åŸºç™¾ç§‘&lt;/a>*ã€‚&lt;/p>
&lt;p>&lt;code>System/getenv&lt;/code>å°†ä»¥ Map å½¢å¼è¿”å›æ‰€æœ‰ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(System/getenv)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{&amp;#34;USER&amp;#34; &amp;#34;the-incredible-bulk&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;JAVA_ARCH&amp;#34; &amp;#34;x86_64&amp;#34; }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¯å¢ƒå˜é‡çš„ä¸€ä¸ªå¸¸è§ç”¨é€”æ˜¯é…ç½®ä½ çš„ç¨‹åºã€‚&lt;/p>
&lt;p>JVM æœ‰è‡ªå·±çš„å±æ€§åˆ—è¡¨ï¼Œä¸è®¡ç®—æœºçš„ç¯å¢ƒå˜é‡åˆ†å¼€ï¼Œå¦‚æœéœ€è¦è¯»å–å®ƒä»¬ï¼Œå¯ä»¥ä½¿ç”¨&lt;code>System/getProperty&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">âŠ (System/getProperty &amp;#34;user.dir&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;/Users/dabulk/projects/dabook&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (System/getProperty &amp;#34;java.version&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;1.7.0_17&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªè°ƒç”¨âŠè¿”å› JVM å¯åŠ¨çš„ç›®å½•ï¼Œç¬¬äºŒä¸ªè°ƒç”¨â‹è¿”å› JVM çš„ç‰ˆæœ¬ã€‚&lt;/p>
&lt;h3 id="æ—¥æœŸç±»">æ—¥æœŸç±»&lt;/h3>
&lt;p>Java æœ‰å¾ˆå¥½çš„å·¥å…·æ¥å¤„ç†æ—¥æœŸé—®é¢˜ã€‚æˆ‘ä¸ä¼šå¯¹&lt;code>java.util.Date&lt;/code>ç±»åšå¤ªå¤šçš„ä»‹ç»ï¼Œå› ä¸ºåœ¨çº¿çš„ API æ–‡æ¡£ï¼ˆå¯åœ¨*&lt;a class="link" href="http://docs.oracle.com/javase/7/docs/api/java/util/Date.html" target="_blank" rel="noopener"
>Date (Java Platform SE 7 )&lt;/a>*)å¾ˆè¯¦å°½ã€‚&lt;!-- raw HTML omitted -->ä½œä¸º&lt;!-- raw HTML omitted -->ä¸€ä¸ª Clojure å¼€å‘è€…ï¼Œä½ åº”è¯¥çŸ¥é“è¿™ä¸ª&lt;code>date&lt;/code>ç±»çš„ä¸‰ä¸ªç‰¹ç‚¹ã€‚é¦–å…ˆï¼ŒClojure å…è®¸ä½ ä½¿ç”¨è¿™æ ·çš„å½¢å¼å°†æ—¥æœŸè¡¨ç¤ºä¸ºå­—é¢æ„ä¹‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#inst &amp;#34;2016-09-19T20:40:02.733-00:00&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬äºŒï¼Œå¦‚æœä½ æƒ³è‡ªå®šä¹‰å¦‚ä½•å°†æ—¥æœŸè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œæˆ–è€…ä½ æƒ³å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ—¥æœŸï¼Œä½ éœ€è¦ä½¿ç”¨&lt;code>java.util.DateFormat&lt;/code>ç±»ã€‚ç¬¬ä¸‰ï¼Œå¦‚æœä½ è¦åšçš„ä»»åŠ¡æ˜¯æ¯”è¾ƒæ—¥æœŸæˆ–è¯•å›¾åœ¨æ—¥æœŸä¸Šæ·»åŠ åˆ†é’Ÿã€å°æ—¶æˆ–å…¶ä»–æ—¶é—´å•ä½ï¼Œä½ åº”è¯¥ä½¿ç”¨æå…¶æœ‰ç”¨çš„ clj-time åº“ï¼ˆä½ å¯ä»¥åœ¨*&lt;a class="link" href="https://github.com/clj-time/clj-time" target="_blank" rel="noopener"
>GitHub - clj-time/clj-time: ä¸€ä¸ªç”¨äº Clojure çš„æ—¥æœŸå’Œæ—¶é—´åº“ï¼ŒåŒ…è£…äº† Joda æ—¶é—´åº“ã€‚&lt;/a>*)ã€‚&lt;/p>
&lt;h2 id="æ–‡ä»¶å’Œè¾“å…¥è¾“å‡º">æ–‡ä»¶å’Œè¾“å…¥/è¾“å‡º&lt;/h2>
&lt;p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†äº†è§£åˆ° Java çš„è¾“å…¥/è¾“å‡ºï¼ˆIOï¼‰æ–¹æ³•ï¼Œä»¥åŠ Clojure å¦‚ä½•ç®€åŒ–å®ƒã€‚&lt;code>clojure.java.io&lt;/code>å‘½åç©ºé—´æä¾›äº†è®¸å¤šæ–¹ä¾¿çš„å‡½æ•°æ¥ç®€åŒ– IOï¼ˆ&lt;em>&lt;a class="link" href="https://clojure.github.io/clojure/clojure.java.io-api.html" target="_blank" rel="noopener"
>clojure.java.io - Clojure v1.10.3 API æ–‡æ¡£&lt;/a>&lt;/em>ï¼‰ã€‚è¿™å¾ˆå¥½ï¼Œå› ä¸º Java çš„ IO å¹¶ä¸å®Œå…¨æ˜¯ç®€å•çš„ã€‚å› ä¸ºåœ¨ä½ çš„ç¼–ç¨‹ç”Ÿæ¶¯ä¸­ï¼Œä½ å¯èƒ½ä¼šåœ¨æŸäº›æ—¶å€™æƒ³è¦æ‰§è¡Œ IOï¼Œè®©æˆ‘ä»¬å¼€å§‹æŠŠä½ çš„æ€æƒ³è§¦è§’ç¼ ç»•åœ¨å®ƒä¸Šé¢ã€‚&lt;/p>
&lt;p>IO æ¶‰åŠåˆ°èµ„æºï¼Œæ— è®ºæ˜¯æ–‡ä»¶ã€å¥—æ¥å­—ã€ç¼“å†²åŒºï¼Œè¿˜æ˜¯å…¶ä»–ä»€ä¹ˆã€‚Java æœ‰ç‹¬ç«‹çš„ç±»æ¥è¯»å–èµ„æºçš„å†…å®¹ï¼Œå†™å…¥å…¶å†…å®¹ï¼Œä»¥åŠä¸èµ„æºçš„å±æ€§è¿›è¡Œäº¤äº’ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œ&lt;code>java.io.File&lt;/code>ç±»ç”¨äºä¸æ–‡ä»¶çš„å±æ€§è¿›è¡Œäº¤äº’ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [file (java.io.File. &amp;#34;/&amp;#34;)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (println (.exists file))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (println (.canWrite file))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (println (.getPath file)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; /
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/java/lion.png"
loading="lazy"
>&lt;/p>
&lt;p>åœ¨å…¶ä»–ä»»åŠ¡ä¸­ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æ£€æŸ¥ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè·å¾—æ–‡ä»¶çš„è¯»/å†™/æ‰§è¡Œæƒé™ï¼Œå¹¶è·å¾—å…¶æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼Œä½ å¯ä»¥åœ¨âŠã€â‹å’ŒâŒåˆ†åˆ«çœ‹åˆ°ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸ªèƒ½åŠ›åˆ—è¡¨ä¸­ï¼Œæ˜æ˜¾ç¼ºå°‘è¯»å’Œå†™ã€‚è¦è¯»ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>java.io.BufferedReader&lt;/code>ç±»æˆ–è€…&lt;code>java.io.FileReader&lt;/code>ã€‚åŒæ ·åœ°ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>java.io.BufferedWriter&lt;/code>æˆ–&lt;code>java.io.FileWriter&lt;/code>ç±»æ¥å†™ã€‚å…¶ä»–ç±»ä¹Ÿå¯ç”¨äºè¯»å†™ï¼Œä½ é€‰æ‹©å“ªä¸€ä¸ªå–å†³äºä½ çš„å…·ä½“éœ€æ±‚ã€‚è¯»å–å™¨å’Œå†™å…¥å™¨ç±»çš„æ¥å£éƒ½æœ‰ç›¸åŒçš„åŸºæœ¬æ–¹æ³•é›†ï¼›è¯»å–å™¨å®ç°äº†&lt;code>è¯»å–'ã€&lt;/code>å…³é—­&amp;rsquo;ç­‰ï¼Œè€Œå†™å…¥å™¨å®ç°äº†&lt;code>æ·»åŠ 'ã€&lt;/code>å†™å…¥&amp;rsquo;ã€&lt;code>å…³é—­'å’Œ&lt;/code>åˆ·æ–°&amp;rsquo;ã€‚Java ç»™ä½ æä¾›äº†å„ç§ IO å·¥å…·ã€‚ä¸€ä¸ªæ„¤ä¸–å«‰ä¿—çš„äººå¯èƒ½ä¼šè¯´ï¼ŒJava ç»™ä½ çš„ç»³å­è¶³ä»¥è®©ä½ ä¸ŠåŠï¼Œå¦‚æœä½ æ‰¾åˆ°è¿™æ ·ä¸€ä¸ªäººï¼Œæˆ‘å¸Œæœ›ä½ èƒ½ç»™ä»–ä¸€ä¸ªæ‹¥æŠ±ã€‚&lt;/p>
&lt;p>ä¸ç®¡æ€ä¹ˆè¯´ï¼ŒClojure ä½¿ä½ çš„è¯»å†™æ›´å®¹æ˜“ï¼Œå› ä¸ºå®ƒåŒ…æ‹¬äº†ç»Ÿä¸€ä¸åŒç§ç±»èµ„æºçš„è¯»å†™çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œ&lt;code>spit&lt;/code>å†™åˆ°ä¸€ä¸ªèµ„æºï¼Œè€Œ&lt;code>slurp&lt;/code>ä»ä¸€ä¸ªèµ„æºä¸­è¯»å‡ºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨å®ƒä»¬æ¥å†™å’Œè¯»ä¸€ä¸ªæ–‡ä»¶çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(spit &amp;#34;/tmp/hercules-todo-list&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;- kill dat lion brov
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- chop up what nasty multi-headed snake thing&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(slurp &amp;#34;/tmp/hercules-todo-list&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;- kill dat lion brov
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - chop up what nasty multi-headed snake thing&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥å¯¹ä»£è¡¨æ–‡ä»¶ä»¥å¤–çš„èµ„æºçš„å¯¹è±¡ä½¿ç”¨è¿™äº›å‡½æ•°ã€‚ä¸‹ä¸€ä¸ªä¾‹å­ä½¿ç”¨äº†ä¸€ä¸ª&lt;code>StringWriter&lt;/code>ï¼Œå®ƒå…è®¸ä½ å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œ IO æ“ä½œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [s (java.io.StringWriter.)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (spit s &amp;#34;- capture cerynian hind like for real&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.toString s))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;- capture cerynian hind like for real&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ &amp;ldquo;slurp &amp;ldquo;ä»&lt;code>StringReader&lt;/code>ä¸­è¯»å–ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [s (java.io.StringReader. &amp;#34;- get erymanthian pig what with the tusks&amp;#34;)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (slurp s))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;- get erymanthian pig what with the tusks&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­¤å¤–ï¼Œä½ å¯ä»¥å¯¹èµ„æºä½¿ç”¨&lt;code>è¯»&lt;/code>å’Œ&lt;code>å†™&lt;/code>æ–¹æ³•ã€‚ä½¿ç”¨å“ªç§æ–¹æ³•å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼›&lt;code>spit&lt;/code>å’Œ&lt;code>slurp&lt;/code>å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºå®ƒä»¬åªéœ€ä½¿ç”¨ä¸€ä¸ªä»£è¡¨æ–‡ä»¶ç³»ç»Ÿè·¯å¾„æˆ– URL çš„å­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;p>&lt;code>with-open&lt;/code>å®æ˜¯å¦ä¸€ç§ä¾¿åˆ©ï¼šå®ƒåœ¨å…¶ä¸»ä½“çš„æœ«å°¾éšå«åœ°å…³é—­ä¸€ä¸ªèµ„æºï¼Œç¡®ä¿ä½ ä¸ä¼šå› ä¸ºå¿˜è®°æ‰‹åŠ¨å…³é—­èµ„æºè€Œæ„å¤–åœ°å ç”¨èµ„æºã€‚&lt;code>reader&lt;/code>å‡½æ•°æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ï¼Œæ ¹æ®&lt;code>clojure.java.io&lt;/code>API æ–‡æ¡£ï¼Œ&amp;ldquo;è¯•å›¾å°†å…¶å‚æ•°å¼ºåˆ¶åˆ°ä¸€ä¸ªå¼€æ”¾çš„&lt;code>java.io.Reader&lt;/code>&amp;quot;ã€‚å½“ä½ ä¸æƒ³ä½¿ç”¨&lt;code>slurp&lt;/code>æ—¶ï¼Œè¿™å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºä½ ä¸æƒ³å°è¯•å®Œæ•´åœ°è¯»å–ä¸€ä¸ªèµ„æºï¼Œä½ ä¹Ÿä¸æƒ³å¼„æ¸…æ¥šä½ éœ€è¦ä½¿ç”¨å“ªä¸ª Java ç±»ã€‚å¦‚æœä½ æƒ³ä¸€è¡Œä¸€è¡Œåœ°è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>reader&lt;/code>å’Œ&lt;code>with-open&lt;/code>ä»¥åŠ&lt;code>line-seq&lt;/code>å‡½æ•°ã€‚ä¸‹é¢æ˜¯å¦‚ä½•æ‰“å° Hercules å¾…åŠäº‹é¡¹æ¸…å•çš„ç¬¬ä¸€é¡¹çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(with-open [todo-list-rdr (clojure.java.io/reader &amp;#34;/tmp/hercules-todo-list&amp;#34;)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (first (line-seq todo-list-rdr))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; - kill dat lion brov
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™åº”è¯¥è¶³ä»¥è®©ä½ åœ¨ Clojure ä¸­å¼€å§‹ä½¿ç”¨ IOã€‚å¦‚æœä½ æƒ³åšæ›´å¤æ‚çš„ä»»åŠ¡ï¼Œä¸€å®šè¦çœ‹çœ‹&lt;a class="link" href="https://clojure.github.io/clojure/clojure.java.io-api.html" target="_blank" rel="noopener"
>&lt;code>clojure.java.io&lt;/code> docs&lt;/a>ï¼Œ&lt;code>[java.nio.file](https://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html)&lt;/code>åŒ…æ–‡æ¡£ï¼Œæˆ–&lt;code>[java.io](http://docs.oracle.com/javase/7/docs/api/java/io/package-summary.html)&lt;/code>åŒ…æ–‡æ¡£ã€‚&lt;/p>
&lt;h2 id="èµ„æº">èµ„æº&lt;/h2>
&lt;ul>
&lt;li>&amp;ldquo;Java è™šæ‹Ÿæœºå’Œç¼–è¯‘å™¨çš„è§£é‡Š&amp;rdquo;ã€‚Â &lt;em>&lt;a class="link" href="https://www.youtube.com/watch?v=XjNwyXx2os8" target="_blank" rel="noopener"
>Java è™šæ‹Ÿæœºå’Œç¼–è¯‘å™¨çš„è§£é‡Š&amp;ndash;YouTube&lt;/a>&lt;/em>&lt;/li>
&lt;li>clojure.org Java äº’æ“ä½œæ–‡æ¡£ã€‚Â &lt;em>&lt;a class="link" href="http://clojure.org/java_interop" target="_blank" rel="noopener"
>Clojure - Java Interop&lt;/a>&lt;/em>&lt;/li>
&lt;li>ç»´åŸºç™¾ç§‘çš„ &amp;ldquo;é€€å‡ºçŠ¶æ€ &amp;ldquo;æ–‡ç« ã€‚Â &lt;em>&lt;a class="link" href="http://en.wikipedia.org/wiki/Exit_status" target="_blank" rel="noopener"
>é€€å‡ºçŠ¶æ€ - ç»´åŸºç™¾ç§‘&lt;/a>&lt;/em>&lt;/li>
&lt;/ul>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>åœ¨æœ¬ç« ä¸­ï¼Œä½ äº†è§£äº† Clojure è¢«æ‰˜ç®¡åœ¨ JVM ä¸Šçš„å«ä¹‰ã€‚Clojure ç¨‹åºè¢«ç¼–è¯‘æˆ Java å­—èŠ‚ç å¹¶åœ¨ JVM è¿›ç¨‹ä¸­æ‰§è¡Œã€‚Clojure ç¨‹åºä¹Ÿå¯ä»¥è®¿é—® Java åº“ï¼Œä½ å¯ä»¥ä½¿ç”¨ Clojure çš„äº’æ“ä½œè®¾æ–½è½»æ¾åœ°ä¸å®ƒä»¬äº¤äº’ã€‚&lt;/p></description></item><item><title>Chapter11 core.async</title><link>https://example.com/p/chapter11-core.async/</link><pubDate>Sat, 15 Jan 2022 12:56:01 +0800</pubDate><guid>https://example.com/p/chapter11-core.async/</guid><description>&lt;h1 id="ç”¨-coreasync-æŒæ¡å¹¶å‘è¿›ç¨‹">ç”¨ core.async æŒæ¡å¹¶å‘è¿›ç¨‹&lt;/h1>
&lt;p>æœ‰ä¸€å¤©ï¼Œå½“ä½ èµ°åœ¨å¤§è¡—ä¸Šæ—¶ï¼Œä½ ä¼šæƒŠè®¶ã€å¥½å¥‡ï¼Œå¹¶æœ‰ç‚¹åŒæ¶åœ°å‘ç°ä¸€å°çƒ­ç‹—è‡ªåŠ¨è´©å–æœºã€‚ä½ çš„å¤´çš®è¢«æœ‰ç½ªçš„å¥½å¥‡å¿ƒåˆºç—›ï¼Œä½ ä¼šå¿ä¸ä½æå‡ºä¸‰å—é’±ï¼Œçœ‹çœ‹è¿™ä¸ªè£…ç½®æ˜¯å¦çœŸçš„èƒ½å·¥ä½œã€‚åœ¨ &amp;ldquo;å’”åš“ &amp;ldquo;ä¸€å£°æ¥å—äº†ä½ çš„é’±åï¼Œå®ƒå¼¹å‡ºäº†ä¸€ä¸ªæ–°é²œçš„çƒ­ç‹—ï¼ŒåŒ…æ‹¬é¢åŒ…å’Œæ‰€æœ‰çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/core-async/hotdog-vending-machine.png"
loading="lazy"
>&lt;/p>
&lt;p>è‡ªåŠ¨å”®è´§æœºè¡¨ç°å‡ºç®€å•çš„è¡Œä¸ºï¼šå½“å®ƒæ”¶åˆ°é’±æ—¶ï¼Œå®ƒä¼šæ”¾å‡ºä¸€ä¸ªçƒ­ç‹—ï¼Œç„¶åä¸ºä¸‹ä¸€æ¬¡è´­ä¹°åšå‡†å¤‡ã€‚å½“å®ƒçš„çƒ­ç‹—ç”¨å®Œæ—¶ï¼Œå®ƒå°±ä¼šåœæ­¢ã€‚æˆ‘ä»¬å‘¨å›´çš„çƒ­ç‹—è‡ªåŠ¨å”®è´§æœºä»¥ä¸åŒçš„é¢è²Œå‡ºç°ï¼Œå®ƒä»¬æ˜¯ç‹¬ç«‹çš„å®ä½“ï¼ŒåŒæ—¶å¯¹ä¸–ç•Œä¸Šçš„äº‹ä»¶ä½œå‡ºååº”ã€‚ä½ æœ€å–œæ¬¢çš„å’–å•¡åº—çš„æµ“ç¼©å’–å•¡æœºï¼Œä½ å°æ—¶å€™å–œæ¬¢çš„å® ç‰©ä»“é¼ &amp;ndash;æ‰€æœ‰çš„ä¸œè¥¿éƒ½å¯ä»¥è¢«åˆ†è§£æˆä¸€ç»„è¡Œä¸ºï¼Œè¿™äº›è¡Œä¸ºéµå¾ªä¸€èˆ¬çš„å½¢å¼ &amp;ldquo;å½“&lt;em>x&lt;/em>å‘ç”Ÿæ—¶ï¼Œåš&lt;em>y&lt;/em>&amp;quot;ã€‚ç”šè‡³æˆ‘ä»¬å†™çš„ç¨‹åºä¹Ÿåªæ˜¯ç¾åŒ–çš„çƒ­ç‹—è´©å–æœºï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œç­‰å¾…ç€ä¸‹ä¸€ä¸ªäº‹ä»¶çš„å‘ç”Ÿï¼Œæ— è®ºæ˜¯å‡»é”®ã€è¶…æ—¶ï¼Œè¿˜æ˜¯å¥—æ¥å­—ä¸Šçš„æ•°æ®åˆ°è¾¾ã€‚&lt;/p>
&lt;p>Clojure çš„ core.async åº“å…è®¸ä½ åœ¨ä¸€ä¸ªç¨‹åºä¸­åˆ›å»ºå¤šä¸ªç‹¬ç«‹è¿›ç¨‹ã€‚Â æœ¬ç« æè¿°äº†æ€è€ƒè¿™ç§ç¼–ç¨‹é£æ ¼çš„æœ‰ç”¨æ¨¡å‹ï¼Œä»¥åŠä½ åœ¨å®é™…ç¼–å†™ä»£ç æ—¶éœ€è¦äº†è§£çš„å®é™…ç»†èŠ‚ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨é€šé“åœ¨ç”± go å—å’Œ&lt;code>thread&lt;/code>åˆ›å»ºçš„ç‹¬ç«‹è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼›äº†è§£ä¸€äº›å…³äº Clojure å¦‚ä½•é€šè¿‡åœæ”¾å’Œé˜»å¡æœ‰æ•ˆåœ°ç®¡ç†çº¿ç¨‹ï¼›å¦‚ä½•ä½¿ç”¨&lt;code>alts!!&lt;/code>ï¼›ä»¥åŠä¸€ç§æ›´ç›´æ¥çš„åˆ›å»ºé˜Ÿåˆ—çš„æ–¹æ³•ã€‚æœ€åï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ç”¨è¿›ç¨‹ç®¡é“æ¥è¸¢å›è°ƒçš„å±è‚¡ã€‚&lt;/p>
&lt;h2 id="è¿›ç¨‹çš„å…¥é—¨">è¿›ç¨‹çš„å…¥é—¨&lt;/h2>
&lt;p>core.async çš„æ ¸å¿ƒæ˜¯*è¿›ç¨‹ï¼Œä¸€ä¸ªå¹¶å‘è¿è¡Œçš„é€»è¾‘å•å…ƒï¼Œå¯¹äº‹ä»¶åšå‡ºååº”ã€‚è¿›ç¨‹å¯¹åº”äºæˆ‘ä»¬å¯¹ç°å®ä¸–ç•Œçš„å¿ƒç†æ¨¡å‹ï¼šå®ä½“ä¹‹é—´çš„äº’åŠ¨å’Œå“åº”æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰æŸç§ä¸­å¤®æ§åˆ¶æœºåˆ¶çš„ç‰µåˆ¶ã€‚ä½ æŠŠé’±æ”¾è¿›æœºå™¨é‡Œï¼Œå°±ä¼šæœ‰ä¸€ä¸ªçƒ­ç‹—å‡ºæ¥ï¼Œæ‰€æœ‰è¿™äº›éƒ½ä¸éœ€è¦å…‰ç…§æ´¾æˆ–è€å¤§å“¥æ¥ç­–åˆ’æ•´ä¸ªäº‹æƒ…ã€‚è¿™ä¸ä½ è¿„ä»Šä¸ºæ­¢ä¸€ç›´åœ¨æ¢ç´¢çš„å¹¶å‘æ€§è§‚ç‚¹ä¸åŒï¼Œåœ¨é‚£é‡Œï¼Œä½ å®šä¹‰çš„ä»»åŠ¡è¦ä¹ˆåªæ˜¯æ§åˆ¶ä¸»çº¿ç¨‹çš„æ‰©å±•ï¼ˆä¾‹å¦‚ï¼Œç”¨&lt;code>pmap&lt;/code>å®ç°æ•°æ®å¹¶è¡Œï¼‰ï¼Œè¦ä¹ˆæ˜¯ä½ æ²¡æœ‰å…´è¶£ä¸ä¹‹äº¤æµçš„ä»»åŠ¡ï¼ˆå¦‚ç”¨&lt;code>future&lt;/code>åˆ›å»ºçš„ä¸€æ¬¡æ€§ä»»åŠ¡ï¼‰ã€‚&lt;/p>
&lt;p>æŠŠè‡ªåŠ¨å”®è´§æœºçœ‹æˆæ˜¯ä¸€ä¸ªè¿›ç¨‹å¯èƒ½å¾ˆå¥‡æ€ªï¼šè‡ªåŠ¨å”®è´§æœºæ˜¯åè¯å’Œäº‹ç‰©ï¼Œè€Œè¿›ç¨‹æ˜¯åŠ¨è¯å’Œè¡Œä¸ºã€‚ä¸ºäº†è·å¾—æ­£ç¡®çš„æ€ç»´æ–¹å¼ï¼Œå¯ä»¥å°è¯•å°†ç°å®ä¸–ç•Œçš„ç‰©ä½“å®šä¹‰ä¸ºå…¶äº‹ä»¶é©±åŠ¨çš„è¡Œä¸ºçš„æ€»å’Œã€‚å½“ä¸€ç²’ç§å­è¢«æµ‡æ°´æ—¶ï¼Œå®ƒå°±ä¼šå‘èŠ½ï¼›å½“æ¯äº²çœ‹ç€å¥¹çš„æ–°ç”Ÿå„¿æ—¶ï¼Œå¥¹å°±ä¼šæ„Ÿå—åˆ°çˆ±ï¼›è€Œå½“ä½ è§‚çœ‹ã€Š&lt;em>æ˜Ÿ&lt;/em>æˆ˜ã€‹ç¬¬ä¸€é›†æ—¶ï¼Œä½ ä¼šå……æ»¡æ„¤æ€’å’Œç»æœ›ã€‚å¦‚æœä½ æƒ³å˜å¾—è¶…çº§å“²å­¦ï¼Œå¯ä»¥è€ƒè™‘æ˜¯å¦æœ‰å¯èƒ½å°†æ¯ä¸ªäº‹ç‰©çš„æœ¬è´¨å®šä¹‰ä¸ºå®ƒæ‰€è¯†åˆ«çš„äº‹ä»¶çš„é›†åˆï¼Œä»¥åŠå®ƒå¦‚ä½•åšå‡ºååº”ã€‚ç°å®æ˜¯å¦åªæ˜¯çƒ­ç‹—å”®å–æœºçš„ç»„æˆï¼Ÿ&lt;/p>
&lt;p>æ€»ä¹‹ï¼Œæˆ‘è¯´å¾—å¤Ÿå¤šäº†! è®©æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€äº›ç®€å•çš„è¿‡ç¨‹ï¼Œä»ç†è®ºä¸Šèµ°å‘å…·ä½“ã€‚é¦–å…ˆï¼Œç”¨ &amp;ldquo;lein new app playsync &amp;ldquo;åˆ›å»ºä¸€ä¸ªæ–°çš„ Leiningen é¡¹ç›®ï¼Œåä¸º&lt;em>playsync&lt;/em>ã€‚ç„¶åï¼Œæ‰“å¼€&lt;em>project.clj&lt;/em>æ–‡ä»¶ï¼Œå°† core.async æ·»åŠ åˆ°&lt;code>:dependencies&lt;/code>Vector ä¸­ï¼Œä½¿å…¶å†…å®¹å¦‚ä¸‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[[org.clojure/clojure &amp;#34;1.9.0&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[org.clojure/core.async &amp;#34;0.1.346.0-17112a-alpha&amp;#34;]]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ è‡ªä»æˆ‘å†™å®Œè¿™ç¯‡æ–‡ç« åï¼Œcore.async çš„ç‰ˆæœ¬æœ‰å¯èƒ½æœ‰æ‰€è¿›æ­¥ã€‚å…³äºæœ€æ–°çš„ç‰ˆæœ¬ï¼Œè¯·æŸ¥çœ‹ core.async çš„ GitHub é¡¹ç›®é¡µé¢ã€‚ä½†ä¸ºäº†è¿™äº›ç»ƒä¹ çš„ç›®çš„ï¼Œè¯·ä½¿ç”¨è¿™é‡Œåˆ—å‡ºçš„ç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œæ‰“å¼€&lt;em>src/playsync/core.clj&lt;/em>ï¼Œä½¿å…¶çœ‹èµ·æ¥åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns playsync.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:require [clojure.core.async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :as a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :refer [&amp;gt;! &amp;lt;! &amp;gt;!! &amp;lt;!! go chan buffer close! thread
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> alts! alts!! timeout]]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ï¼Œå½“ä½ åœ¨ REPL ä¸­æ‰“å¼€å®ƒæ—¶ï¼Œä½ å°†æ‹¥æœ‰æœ€å¸¸ç”¨çš„ core.async å‡½æ•°ä¾›ä½ ä½¿ç”¨ã€‚å¾ˆå¥½! åœ¨åˆ›å»ºåƒçƒ­ç‹—å”®å–æœºé‚£æ ·å¤æ‚å’Œé©å‘½æ€§çš„ä¸œè¥¿ä¹‹å‰ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œç®€å•åœ°æ‰“å°å®ƒæ”¶åˆ°çš„æ¶ˆæ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def echo-chan (chan))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(go (println (&amp;lt;! echo-chan)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(&amp;gt;!! echo-chan &amp;#34;ketchup&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ketchup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€è¡Œä»£ç ä¸­ï¼Œä½ ç”¨&lt;code>chan&lt;/code>å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªåä¸º&lt;code>echo-chan&lt;/code>çš„&lt;em>é€šé“ã€‚é€šé“ä¼ è¾¾&lt;/em>æ¶ˆæ¯*ã€‚ä½ å¯ä»¥æŠŠ&lt;em>æ¶ˆæ¯æ”¾åˆ°ä¸€ä¸ªé€šé“ä¸Šï¼Œä¹Ÿå¯ä»¥æŠŠ&lt;/em>æ¶ˆæ¯ä»ä¸€ä¸ªé€šé“ä¸Šæ‹¿ä¸‹æ¥ã€‚è¿›ç¨‹&lt;em>ç­‰å¾…&lt;/em>æ”¾å’Œå–çš„å®Œæˆ&amp;ndash;è¿™äº›æ˜¯è¿›ç¨‹æ‰€å“åº”çš„äº‹ä»¶ã€‚ä½ å¯ä»¥è®¤ä¸ºè¿›ç¨‹æœ‰ä¸¤ä¸ªè§„åˆ™ã€‚1ï¼‰å½“è¯•å›¾æŠŠä¸€ä¸ªæ¶ˆæ¯æ”¾åˆ°é€šé“ä¸Šæˆ–ä»é€šé“ä¸Šå–èµ°ä¸€ä¸ªæ¶ˆæ¯æ—¶ï¼Œç­‰å¾…å¹¶ä¸åšä»»ä½•äº‹æƒ…ï¼Œç›´åˆ°æ”¾æˆ–å–æˆåŠŸï¼›2ï¼‰å½“æ”¾æˆ–å–æˆåŠŸæ—¶ï¼Œç»§ç»­æ‰§è¡Œã€‚&lt;/p>
&lt;p>åœ¨ä¸‹ä¸€è¡Œï¼Œä½ ç”¨&lt;code>go&lt;/code>æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ã€‚&lt;code>go&lt;/code>è¡¨è¾¾å¼ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½è¢«ç§°ä¸º&lt;em>go å—&lt;/em>ï¼Œåœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šå¹¶å‘è¿è¡Œã€‚Go å—åœ¨ä¸€ä¸ªçº¿ç¨‹æ± ä¸Šè¿è¡Œä½ çš„è¿›ç¨‹ï¼Œè¯¥çº¿ç¨‹æ± åŒ…å«çš„çº¿ç¨‹æ•°é‡ç­‰äºä½ çš„æœºå™¨ä¸Šçš„æ ¸å¿ƒæ•°é‡çš„ä¸¤å€ï¼Œè¿™æ„å‘³ç€ä½ çš„ç¨‹åºä¸å¿…ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚è¿™é€šå¸¸ä¼šå¸¦æ¥æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºä½ é¿å…äº†ä¸åˆ›å»ºçº¿ç¨‹æœ‰å…³çš„å¼€é”€ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿›ç¨‹&lt;code>(println (&amp;lt;! echo-chan))&lt;/code>è¡¨è¾¾äº† &amp;ldquo;å½“æˆ‘ä»`echo-chan&amp;rsquo;é‚£é‡Œå¾—åˆ°ä¸€ä¸ªæ¶ˆæ¯æ—¶ï¼Œæ‰“å°å®ƒ&amp;rdquo;ã€‚è¯¥è¿›ç¨‹è¢«åˆ†æµåˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œé‡Šæ”¾äº†å½“å‰çº¿ç¨‹ï¼Œä½¿ä½ èƒ½å¤Ÿç»§ç»­ä¸ REPL äº¤äº’ã€‚&lt;/p>
&lt;p>åœ¨è¡¨è¾¾å¼&lt;code>(&amp;lt;! echo-chan)&lt;/code>ä¸­ï¼Œ&lt;code>&amp;lt;!&lt;/code>æ˜¯&lt;em>take&lt;/em>å‡½æ•°ã€‚å®ƒç›‘å¬ä½ ç»™å®ƒä½œä¸ºå‚æ•°çš„é€šé“ï¼Œå®ƒæ‰€å±çš„è¿›ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªè¿›ç¨‹åœ¨è¯¥é€šé“ä¸Šæ”¾å‡ºä¸€ä¸ªæ¶ˆæ¯ã€‚å½“&lt;code>&amp;lt;!&lt;/code>æ£€ç´¢åˆ°ä¸€ä¸ªå€¼æ—¶ï¼Œè¯¥å€¼è¢«è¿”å›å¹¶æ‰§è¡Œ&lt;code>println&lt;/code>è¡¨è¾¾å¼ã€‚&lt;/p>
&lt;p>è¡¨è¾¾å¼&lt;code>(&amp;gt;!! echo-chan &amp;quot;ketchup&amp;quot;)&lt;/code>å°†å­—ç¬¦ä¸²&lt;code>&amp;quot;ketchup&amp;quot;&lt;/code>æ”¾åˆ°&lt;code>echo-chan&lt;/code>ä¸Šå¹¶è¿”å›&lt;code>true&lt;/code>ã€‚å½“ä½ æŠŠä¸€ä¸ªæ¶ˆæ¯æ”¾åœ¨ä¸€ä¸ªé€šé“ä¸Šæ—¶ï¼Œè¯¥è¿›ç¨‹ä¼šé˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ªè¿›ç¨‹æ¥æ”¶è¯¥æ¶ˆæ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒREPL è¿›ç¨‹æ ¹æœ¬ä¸éœ€è¦ç­‰å¾…ï¼Œå› ä¸ºå·²ç»æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ç›‘å¬è¯¥é€šé“ï¼Œç­‰å¾…ä»è¯¥é€šé“ä¸­è·å–ä¿¡æ¯ã€‚ç„¶è€Œï¼Œå¦‚æœä½ åšäº†ä»¥ä¸‹äº‹æƒ…ï¼Œä½ çš„ REPL å°†æ— é™æœŸåœ°é˜»å¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(&amp;gt;!! (chan) &amp;#34;mustard&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„é€šé“ï¼Œå¹¶åœ¨ä¸Šé¢æ”¾äº†ä¸€äº›ä¸œè¥¿ï¼Œä½†æ²¡æœ‰è¿›ç¨‹åœ¨ç›‘å¬è¿™ä¸ªé€šé“ã€‚è¿›ç¨‹ä¸ä»…ä»…æ˜¯ç­‰å¾…æ¥æ”¶æ¶ˆæ¯ï¼Œä»–ä»¬ä¹Ÿåœ¨ç­‰å¾…ä»–ä»¬æ”¾åœ¨é€šé“ä¸Šçš„æ¶ˆæ¯è¢«æ¥æ”¶ã€‚&lt;/p>
&lt;h3 id="ç¼“å†²">ç¼“å†²&lt;/h3>
&lt;p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå‰é¢çš„ç»ƒä¹ åŒ…å«&lt;em>ä¸¤ä¸ª&lt;/em>è¿›ç¨‹ï¼šä½ ç”¨&lt;code>go&lt;/code>åˆ›å»ºçš„è¿›ç¨‹å’Œ REPL è¿›ç¨‹ã€‚è¿™äº›è¿›ç¨‹ç›¸äº’ä¹‹é—´æ²¡æœ‰æ˜ç¡®çš„çŸ¥è¯†ï¼Œè€Œä¸”å®ƒä»¬ç‹¬ç«‹è¡ŒåŠ¨ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™äº›è¿‡ç¨‹å‘ç”Ÿåœ¨ä¸€ä¸ªé¤å…é‡Œã€‚REPL æ˜¯ç•ªèŒ„é…±å¨å¸ˆï¼Œå½“ä»–å®Œæˆä¸€ä¸ªæ‰¹æ¬¡æ—¶ï¼Œä»–å¤§å£°è¯´ï¼š&amp;ldquo;ç•ªèŒ„é…±ï¼&amp;rdquo; å®Œå…¨æœ‰å¯èƒ½çš„æ˜¯ï¼Œå…¶ä»–å‘˜å·¥éƒ½åœ¨å¤–é¢æ¬£èµä»–ä»¬æœ‰æœºèŠ±å›­é‡Œæœ€æ–°çš„ä¸€æ‰¹ç‰›è‡³ï¼Œè€Œå¨å¸ˆåªæ˜¯åç€ç­‰å¾…ï¼Œç›´åˆ°æœ‰äººæ¥å–ä»–çš„ç•ªèŒ„é…±ã€‚åè¿‡æ¥è¯´ï¼Œ&amp;ldquo;å» &amp;ldquo;çš„è¿‡ç¨‹ä»£è¡¨äº†å…¶ä¸­ä¸€ä¸ªå·¥ä½œäººå‘˜ï¼Œä»–æ­£åœ¨è€å¿ƒåœ°ç­‰å¾…ç€ä»€ä¹ˆå›åº”ã€‚å¯èƒ½æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰å‘ç”Ÿï¼Œä»–åªæ˜¯æ— é™æœŸåœ°ç­‰å¾…ï¼Œç›´åˆ°é¤å…å…³é—¨ã€‚&lt;/p>
&lt;p>è¿™ç§æƒ…å†µä¼¼ä¹æœ‰ç‚¹å‚»ï¼šå“ªä¸ªè‡ªå°Šå¿ƒå¼ºçš„ç•ªèŒ„é…±å¨å¸ˆä¼šåœ¨åˆ¶ä½œæ›´å¤šçš„ç•ªèŒ„é…±ä¹‹å‰ï¼Œåªæ˜¯åç­‰åˆ«äººæ‹¿èµ°ä»–æœ€æ–°çš„ä¸€æ‰¹ç•ªèŒ„é…±ï¼Ÿä¸ºäº†é¿å…è¿™ç§æ‚²å‰§çš„å‘ç”Ÿï¼Œä½ å¯ä»¥åˆ›å»ºç¼“å†²é€šé“ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def echo-buffer (chan 2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(&amp;gt;!! echo-buffer &amp;#34;ketchup&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(&amp;gt;!! echo-buffer &amp;#34;ketchup&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(&amp;gt;!! echo-buffer &amp;#34;ketchup&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; This blocks because the channel buffer is full
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>(å°å¿ƒæ±‚å€¼æœ€åä¸€ä¸ª&lt;code>(&amp;gt;! ! echo-buffer &amp;quot;ketchup&amp;quot;)&lt;/code>ï¼Œå› ä¸ºå®ƒå°†é˜»å¡ä½ çš„ REPLã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Leiningen REPLï¼Œctrl-C ä¼šè§£é™¤å°é”ï¼‰ã€‚&lt;/p>
&lt;p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç¼“å†²åŒºå¤§å°ä¸º 2 çš„é€šé“ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨é€šé“ä¸Šæ”¾ä¸¤ä¸ªå€¼è€Œä¸éœ€è¦ç­‰å¾…ï¼Œä½†æ”¾ç¬¬ä¸‰ä¸ªå€¼æ„å‘³ç€è¿›ç¨‹å°†ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ä»é€šé“ä¸Šå–å€¼ã€‚ä½ è¿˜å¯ä»¥ç”¨&lt;code>sliding-buffer&lt;/code>åˆ›å»º&lt;em>æ»‘åŠ¨&lt;/em>ç¼“å†²åŒºï¼Œå®ƒä»¥å…ˆå…¥å…ˆå‡ºçš„æ–¹å¼ä¸¢å¼ƒæ•°å€¼ï¼›ç”¨&lt;code>dropping-buffer&lt;/code>åˆ›å»º&lt;em>ä¸¢å¼ƒ&lt;/em>ç¼“å†²åŒºï¼Œå®ƒä»¥åå…¥å…ˆå‡ºçš„æ–¹å¼ä¸¢å¼ƒæ•°å€¼ã€‚è¿™ä¸¤ç§ç¼“å†²åŒºéƒ½ä¸ä¼šå¯¼è‡´&lt;code>&amp;gt;!!&lt;/code>é˜»å¡ã€‚&lt;/p>
&lt;p>é€šè¿‡ä½¿ç”¨ç¼“å†²åŒºï¼Œç•ªèŒ„é…±å¤§å¸ˆå¯ä»¥ç»§ç»­åˆ¶ä½œæˆæ‰¹ä»¤äººå‚æ¶æ¬²æ»´çš„ç•ªèŒ„é…±ï¼Œè€Œä¸å¿…ç­‰å¾…ä»–çš„å‘˜å·¥æŠŠå®ƒä»¬å¸¦èµ°ã€‚å¦‚æœä»–ä½¿ç”¨æ™®é€šçš„ç¼“å†²å™¨ï¼Œå°±åƒä»–æœ‰ä¸€ä¸ªæ¶å­ï¼Œå¯ä»¥æŠŠæ‰€æœ‰çš„ç•ªèŒ„é…±æ‰¹æ¬¡æ”¾åœ¨ä¸Šé¢ï¼›ä¸€æ—¦æ¶å­æ»¡äº†ï¼Œä»–è¿˜å¾—ç­‰å¾…ç©ºé—´çš„æ‰“å¼€ã€‚å¦‚æœä»–ç”¨çš„æ˜¯æ»‘åŠ¨ç¼“å†²å™¨ï¼Œå½“æ¶å­ä¸Šçš„ç•ªèŒ„é…±æ»¡äº†ï¼Œä»–å°±ä¼šæŠŠæœ€æ—§çš„ä¸€æ‰¹æ‰”æ‰ï¼ŒæŠŠæ‰€æœ‰çš„ç•ªèŒ„é…±æ»‘ä¸‹æ¥ï¼Œç„¶åæŠŠæ–°çš„ä¸€æ‰¹æ”¾åˆ°ç©ºå‡ºæ¥çš„åœ°æ–¹ã€‚å¦‚æœæ˜¯è·Œè½å¼ç¼“å†²å™¨ï¼Œä»–å°±ä¼šæŠŠæœ€æ–°é²œçš„ä¸€æ‰¹ç•ªèŒ„é…±ä»è´§æ¶ä¸Šæ‰“ä¸‹æ¥ï¼Œç„¶åæŠŠæ–°çš„ä¸€æ‰¹ç•ªèŒ„é…±æ”¾åœ¨é‚£ä¸ªç©ºé—´é‡Œã€‚&lt;/p>
&lt;p>ç¼“å†²åŒºåªæ˜¯å¯¹æ ¸å¿ƒæ¨¡å‹çš„é˜è¿°ï¼šè¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ã€å¹¶å‘æ‰§è¡Œçš„é€»è¾‘å•å…ƒï¼Œå¯¹äº‹ä»¶ä½œå‡ºååº”ã€‚ä½ å¯ä»¥ç”¨ go å—æ¥åˆ›å»ºè¿›ç¨‹ï¼Œå¹¶é€šè¿‡é€šé“æ¥æ²Ÿé€šäº‹ä»¶ã€‚&lt;/p>
&lt;h3 id="å µå¡å’Œåœè½¦">å µå¡å’Œåœè½¦&lt;/h3>
&lt;p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œtake å‡½æ•°&lt;code>&amp;lt;!&lt;/code>åªä½¿ç”¨äº†ä¸€ä¸ªæ„Ÿå¹å·ï¼Œè€Œ put å‡½æ•°&lt;code>&amp;gt;!&lt;/code>åˆ™ä½¿ç”¨äº†ä¸¤ä¸ªæ„Ÿå¹å·ã€‚äº‹å®ä¸Šï¼Œput å’Œ take éƒ½æœ‰ä¸€ä¸ªæ„Ÿå¹å·å’Œä¸¤ä¸ªæ„Ÿå¹å·çš„ç§ç±»ã€‚ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å“ªä¸ªï¼Ÿç®€å•çš„ç­”æ¡ˆæ˜¯ï¼Œä½ å¯ä»¥åœ¨ go å—å†…ä½¿ç”¨ä¸€ä¸ªæ„Ÿå¹å·ï¼Œä½†ä½ å¿…é¡»åœ¨ go å—å¤–ä½¿ç”¨ä¸¤ä¸ªæ„Ÿå¹å·ã€‚&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>Inside go block&lt;/th>
&lt;th>Outside go block&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>put&lt;/td>
&lt;td>&lt;code>&amp;gt;!&lt;/code> or &lt;code>&amp;gt;!!&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;gt;!!&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>take&lt;/td>
&lt;td>&lt;code>&amp;lt;!&lt;/code> or &lt;code>&amp;lt;!!&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;lt;!!&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>è¿™ä¸€åˆ‡éƒ½å½’ç»“ä¸ºæ•ˆç‡é—®é¢˜ã€‚å› ä¸º go å—ä½¿ç”¨ä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œä½ å¯ä»¥åˆ›å»º 1000 ä¸ª go è¿›ç¨‹ï¼Œä½†åªä½¿ç”¨å°‘é‡çš„çº¿ç¨‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def hi-chan (chan))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(doseq [n (range 1000)])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (&amp;gt;! hi-chan (str &amp;#34;hi &amp;#34; n)))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†ç†è§£ Clojure æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼Œæˆ‘ä»¬éœ€è¦æ¢ç´¢è¿›ç¨‹å¦‚ä½•&lt;em>ç­‰å¾…ã€‚ç­‰å¾…æ˜¯ä½¿ç”¨ core.async è¿›ç¨‹çš„ä¸€ä¸ªå…³é”®æ–¹é¢ï¼šæˆ‘ä»¬å·²ç»ç¡®å®šï¼Œ&lt;em>put&lt;/em>ä¼šç­‰å¾…åˆ°å¦ä¸€ä¸ªè¿›ç¨‹åœ¨åŒä¸€é€šé“ä¸Šåš&lt;/em>take*ï¼Œåä¹‹äº¦ç„¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ1,000 ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…å¦ä¸€ä¸ªè¿›ç¨‹ä» &amp;ldquo;hi-chan &amp;ldquo;ä¸­æå–ã€‚&lt;/p>
&lt;p>æœ‰ä¸¤ç§ç±»å‹çš„ç­‰å¾…ã€‚Â &lt;em>åœè½¦&lt;/em>å’Œ&lt;em>é˜»å¡&lt;/em>ã€‚é˜»å¡æ˜¯ä½ ç†Ÿæ‚‰çš„é‚£ç§ç­‰å¾…ï¼šä¸€ä¸ªçº¿ç¨‹åœæ­¢æ‰§è¡Œï¼Œç›´åˆ°ä¸€ä¸ªä»»åŠ¡å®Œæˆã€‚é€šå¸¸è¿™å‘ç”Ÿåœ¨ä½ è¿›è¡ŒæŸç§ I/O æ“ä½œçš„æ—¶å€™ã€‚è¿™ä¸ªçº¿ç¨‹ä»ç„¶æ´»ç€ï¼Œä½†ä¸åšä»»ä½•å·¥ä½œï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³è®©ä½ çš„ç¨‹åºç»§ç»­å·¥ä½œï¼Œä½ å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚åœ¨ç¬¬ 9 ç« ä¸­ï¼Œä½ å­¦åˆ°äº†å¦‚ä½•ç”¨ &amp;ldquo;future &amp;ldquo;æ¥åšè¿™ä»¶äº‹ã€‚&lt;/p>
&lt;p>åœè½¦é‡Šæ”¾äº†çº¿ç¨‹ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ç»§ç»­å·¥ä½œäº†ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªçº¿ç¨‹å’Œä¸¤ä¸ªè¿›ç¨‹ï¼ŒProcess A å’Œ Process Bï¼ŒProcess A åœ¨çº¿ç¨‹ä¸Šè¿è¡Œï¼Œç„¶åç­‰å¾…æ”¾æˆ–å–ã€‚Clojure å°†è¿›ç¨‹ A ç§»å‡ºçº¿ç¨‹ï¼Œå¹¶å°†è¿›ç¨‹ B ç§»åˆ°çº¿ç¨‹ä¸Šã€‚å¦‚æœè¿›ç¨‹ B å¼€å§‹ç­‰å¾…ï¼Œè€Œè¿›ç¨‹ A çš„ put æˆ– take å·²ç»å®Œæˆï¼Œé‚£ä¹ˆ Clojure å°†æŠŠè¿›ç¨‹ B ç§»å‡ºçº¿ç¨‹ï¼ŒæŠŠè¿›ç¨‹ A æ”¾å›çº¿ç¨‹ä¸Šã€‚åœæ”¾å…è®¸å¤šä¸ªè¿›ç¨‹çš„æŒ‡ä»¤åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šäº¤é”™ï¼Œç±»ä¼¼äºä½¿ç”¨å¤šä¸ªçº¿ç¨‹å…è®¸åœ¨ä¸€ä¸ªæ ¸å¿ƒä¸Šäº¤é”™çš„æ–¹å¼ã€‚åœæ”¾çš„å®ç°å¹¶ä¸é‡è¦ï¼›åªéœ€è¯´å®ƒåªåœ¨ go å—å†…å®ç°ï¼Œå¹¶ä¸”åªåœ¨ä½¿ç”¨&lt;code>&amp;gt;!&lt;/code>å’Œ&lt;code>&amp;lt;!&lt;/code>ï¼Œæˆ–&lt;em>åœæ”¾ put&lt;/em>å’Œ&lt;em>åœæ”¾ take&lt;/em>æ—¶å®ç°ã€‚&lt;code>&amp;gt;!!&lt;/code>å’Œ&lt;code>&amp;lt;!!&lt;/code>æ˜¯&lt;em>åœæ”¾çš„æ”¾&lt;/em>å’Œ&lt;em>åœæ”¾çš„å–&lt;/em>ã€‚&lt;/p>
&lt;h3 id="çº¿ç¨‹">çº¿ç¨‹&lt;/h3>
&lt;p>è‚¯å®šæœ‰ä¸€äº›æ—¶å€™ä½ ä¼šæƒ³ä½¿ç”¨é˜»å¡è€Œä¸æ˜¯åœæ”¾ï¼Œæ¯”å¦‚ä½ çš„è¿›ç¨‹è¦èŠ±å¾ˆé•¿æ—¶é—´æ‰èƒ½æ”¾æˆ–å–ï¼Œåœ¨è¿™äº›åœºåˆä½ åº”è¯¥ä½¿ç”¨&lt;code>çº¿ç¨‹&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(thread (println (&amp;lt;!! echo-chan)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(&amp;gt;!! echo-chan &amp;#34;mustard&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; mustard
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>thread&lt;/code>çš„è¡Œä¸ºå‡ ä¹ä¸&lt;code>future&lt;/code>å®Œå…¨ä¸€æ ·ï¼šå®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹å¹¶åœ¨è¯¥çº¿ç¨‹ä¸Šæ‰§è¡Œä¸€ä¸ªè¿›ç¨‹ã€‚ä¸&lt;code>future'ä¸åŒçš„æ˜¯ï¼Œ&lt;/code>thread&amp;rsquo;ä¸æ˜¯è¿”å›ä¸€ä¸ªå¯ä»¥åæ¨çš„å¯¹è±¡ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªé€šé“ã€‚å½“&lt;code>thread&lt;/code>çš„è¿›ç¨‹åœæ­¢æ—¶ï¼Œè¯¥è¿›ç¨‹çš„è¿”å›å€¼ä¼šè¢«æ”¾åœ¨&lt;code>thread&lt;/code>è¿”å›çš„é€šé“ä¸Šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [t (thread &amp;#34;chili&amp;#34;) ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;lt;!! t))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;chili&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿›ç¨‹ä¸ç­‰å¾…ä»»ä½•äº‹ä»¶ï¼›ç›¸åï¼Œå®ƒç«‹å³åœæ­¢ã€‚å®ƒçš„è¿”å›å€¼æ˜¯ &amp;ldquo;chili&amp;rdquo;ï¼Œå®ƒè¢«æ”¾åœ¨ä¸&lt;code>tç»‘å®šçš„é€šé“ä¸Šã€‚&lt;/code>æˆ‘ä»¬ä»&lt;code>t&lt;/code>ä¸­è·å–ï¼Œè¿”å›`&amp;ldquo;chili&amp;rdquo;ã€‚&lt;/p>
&lt;p>å½“ä½ æ‰§è¡Œä¸€ä¸ªé•¿æœŸè¿è¡Œçš„ä»»åŠ¡æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨&lt;code>thread&lt;/code>è€Œä¸æ˜¯ go blockï¼ŒåŸå› æ˜¯ä½ ä¸ä¼šå µå¡ä½ çš„çº¿ç¨‹æ± ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨è¿è¡Œå››ä¸ªè¿›ç¨‹ï¼Œä¸‹è½½å·¨å¤§çš„æ–‡ä»¶ï¼Œä¿å­˜å®ƒä»¬ï¼Œç„¶åæŠŠæ–‡ä»¶çš„è·¯å¾„æ”¾åœ¨ä¸€ä¸ªé€šé“ä¸Šã€‚å½“è¿™äº›è¿›ç¨‹åœ¨ä¸‹è½½æ–‡ä»¶å’Œä¿å­˜è¿™äº›æ–‡ä»¶æ—¶ï¼ŒClojure ä¸èƒ½åœæ”¾å®ƒä»¬çš„çº¿ç¨‹ã€‚å®ƒåªèƒ½åœ¨æœ€åä¸€æ­¥åœæ”¾çº¿ç¨‹ï¼Œå³è¿›ç¨‹å°†æ–‡ä»¶çš„è·¯å¾„æ”¾åœ¨é€šé“ä¸Šæ—¶ã€‚å› æ­¤ï¼Œå¦‚æœä½ çš„çº¿ç¨‹æ± åªæœ‰å››ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰å››ä¸ªçº¿ç¨‹éƒ½å°†è¢«ç”¨äºä¸‹è½½ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ªä¸‹è½½å®Œæˆä¹‹å‰ï¼Œä¸å…è®¸å…¶ä»–è¿›ç¨‹è¿è¡Œã€‚&lt;/p>
&lt;p>&lt;code>go&lt;/code>ã€&lt;code>thread&lt;/code>ã€&lt;code>chan&lt;/code>ã€&lt;code>&amp;lt;!&lt;/code>ã€&lt;code>&amp;lt;!&lt;/code>ã€&lt;code>&amp;gt;!&lt;/code>å’Œ&lt;code>&amp;gt;!&lt;/code>æ˜¯ä½ ç”¨æ¥åˆ›å»ºå’Œä¸è¿›ç¨‹é€šä¿¡çš„æ ¸å¿ƒå·¥å…·ã€‚put å’Œ take éƒ½ä¼šä½¿ä¸€ä¸ªè¿›ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å®ƒçš„è¡¥ç åœ¨ç»™å®šçš„é€šé“ä¸Šè¢«æ‰§è¡Œã€‚&lt;code>go&lt;/code>å…è®¸ä½ ä½¿ç”¨ put å’Œ take çš„åœè½¦å˜ä½“ï¼Œè¿™å¯ä»¥æé«˜æ€§èƒ½ã€‚å¦‚æœä½ åœ¨ put å’Œ take ä¹‹å‰æ‰§è¡Œé•¿æœŸè¿è¡Œçš„ä»»åŠ¡ï¼Œä½ åº”è¯¥ä½¿ç”¨é˜»å¡å¼å˜ä½“ï¼Œä»¥åŠ&lt;code>thread&lt;/code>ã€‚&lt;/p>
&lt;p>è¿™åº”è¯¥èƒ½æ»¡è¶³ä½ çš„ä¸€åˆ‡éœ€æ±‚ï¼Œè®©ä½ å®ç°ä½ çš„å¿ƒæ„¿ï¼Œåˆ›é€ ä¸€å°æŠŠé’±å˜æˆçƒ­ç‹—çš„æœºå™¨ã€‚&lt;/p>
&lt;h2 id="ä½ ä¸€ç›´æ¸´æœ›çš„çƒ­ç‹—æœºè¿‡ç¨‹">ä½ ä¸€ç›´æ¸´æœ›çš„çƒ­ç‹—æœºè¿‡ç¨‹&lt;/h2>
&lt;p>çœ‹å“ªï¼Œä½ çš„æ¢¦æƒ³æˆçœŸäº†!&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn hot-dog-machine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [in (chan)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> out (chan)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (&amp;lt;! in)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;gt;! out &amp;#34;hot dog&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [in out]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ª&lt;code>in&lt;/code>é€šé“ç”¨äºæ¥æ”¶é’±ï¼Œä¸€ä¸ª&lt;code>out&lt;/code>é€šé“ç”¨äºå‘æ”¾çƒ­ç‹—ã€‚ç„¶åç”¨&lt;code>go&lt;/code>åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è¿›ç¨‹ï¼Œç­‰å¾…é’±ï¼Œç„¶åå‘æ”¾çƒ­ç‹—ã€‚æœ€åï¼Œå®ƒå°†&lt;code>in&lt;/code>å’Œ&lt;code>out&lt;/code>é€šé“ä½œä¸ºä¸€ä¸ª Vector è¿”å›ã€‚&lt;/p>
&lt;p>æ˜¯æ—¶å€™åƒçƒ­ç‹—äº†!&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [[in out] (hot-dog-machine)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;gt;!! in &amp;#34;pocket lint&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;lt;!! out))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;hot dog&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªç‰‡æ®µä¸­ï¼Œä½ ç”¨ destructuringï¼ˆåœ¨ç¬¬ä¸‰ç« ä¸­è®²åˆ°ï¼‰å’Œ&lt;code>let&lt;/code>å°†&lt;code>in&lt;/code>å’Œ&lt;code>out&lt;/code>é€šé“ç»‘å®šåˆ°&lt;code>in&lt;/code>å’Œ&lt;code>out&lt;/code>ç¬¦å·ã€‚ç„¶åä½ æŠŠ &amp;ldquo;pocket lint &amp;ldquo;æ”¾åœ¨ &amp;ldquo;in &amp;ldquo;é€šé“ä¸Šã€‚çƒ­ç‹—æœºå™¨è¿›ç¨‹ç­‰å¾…ç€ä¸€äº›ä¸œè¥¿ï¼Œä»»ä½•ä¸œè¥¿ï¼Œåˆ°è¾¾&lt;code>in&lt;/code>é€šé“ï¼›ä¸€æ—¦&lt;code>&amp;quot;pocket lint&amp;quot;&lt;/code>åˆ°è¾¾ï¼Œçƒ­ç‹—æœºå™¨è¿›ç¨‹æ¢å¤æ‰§è¡Œï¼Œå°†&lt;code>&amp;quot;hot dog&amp;quot;&lt;/code>æ”¾åœ¨&lt;code>out&lt;/code>é€šé“ä¸Šã€‚&lt;/p>
&lt;p>ç­‰ä¸€ä¸‹â€¦â€¦è¿™ä¸å¯¹ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œæ˜¯çš„ï¼Œå…è´¹çš„çƒ­ç‹—ï¼Œä½†æ˜¯ä¸€å®šä¼šæœ‰äººå› ä¸ºæœºå™¨æ¥å—å°æ£‰çµ®ä½œä¸ºä»˜æ¬¾è€Œä¸é«˜å…´ã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿™å°æœºå™¨åœ¨å…³é—­å‰åªèƒ½å‘æ”¾ä¸€ä¸ªçƒ­ç‹—ã€‚è®©æˆ‘ä»¬æ”¹å˜çƒ­ç‹—æœºçš„åŠŸèƒ½ï¼Œè®©ä½ å¯ä»¥æŒ‡å®šå®ƒæœ‰å¤šå°‘ä¸ªçƒ­ç‹—ï¼Œå¹¶ä¸”å½“ä½ ç»™å®ƒæ•°å­— 3 æ—¶ï¼Œå®ƒæ‰ä¼šå‘æ”¾ä¸€ä¸ªçƒ­ç‹—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn hot-dog-machine-v2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [hot-dog-count]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [in (chan)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> out (chan)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (loop [hc hot-dog-count]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (&amp;gt; hc 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [input (&amp;lt;! in)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> âŠ(if (= 3 input)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do (&amp;gt;! out &amp;#34;hot dog&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (recur (dec hc)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do (&amp;gt;! out &amp;#34;wilted lettuce&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (recur hc))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â‹(do (close! in)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (close! out)))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [in out]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæœ‰å¾ˆå¤šä»£ç ï¼Œä½†ç­–ç•¥æ˜¯ç›´æ¥çš„ã€‚æ–°å‡½æ•°&lt;code>hot-dog-machine-v2&lt;/code>å…è®¸ä½ æŒ‡å®š&lt;code>hot-dog-count&lt;/code>ã€‚åœ¨âŠçš„ go å—å†…ï¼Œåªæœ‰å½“æ•°å­— 3ï¼ˆæ„æ€æ˜¯ä¸‰å—é’±ï¼‰è¢«æ”¾åœ¨`in&amp;rsquo;é€šé“ä¸Šæ—¶ï¼Œå®ƒæ‰ä¼šæ´¾å‘çƒ­ç‹—ï¼›å¦åˆ™ï¼Œå®ƒæ´¾å‘æ¯èçš„ç”Ÿèœï¼Œè¿™ç»å¯¹ä¸æ˜¯çƒ­ç‹—ã€‚ä¸€æ—¦ä¸€ä¸ªè¿›ç¨‹é‡‡å–äº†è¾“å‡ºï¼Œçƒ­ç‹—æœºè¿›ç¨‹å°±ä¼šå¸¦ç€æ›´æ–°çš„çƒ­ç‹—æ•°é‡å¾ªç¯å›æ¥ï¼Œå¹¶å‡†å¤‡å†æ¬¡æ¥æ”¶é’±ã€‚&lt;/p>
&lt;p>å½“æœºå™¨è¿›ç¨‹çš„çƒ­ç‹—ç”¨å®Œæ—¶ï¼Œè¯¥è¿›ç¨‹å°±ä¼šåœ¨â‹å¤„&lt;em>å…³é—­&lt;/em>é€šé“ã€‚å½“ä½ å…³é—­ä¸€ä¸ªé€šé“æ—¶ï¼Œä½ å°±ä¸èƒ½å†å¯¹å®ƒæ‰§è¡Œ putï¼Œè€Œä¸”ä¸€æ—¦ä½ ä»ä¸€ä¸ªå…³é—­çš„é€šé“ä¸Šå–èµ°æ‰€æœ‰çš„å€¼ï¼Œä»»ä½•åç»­çš„å–å€¼éƒ½å°†è¿”å› &amp;ldquo;nil&amp;rdquo;ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬æ¥è¯•è¯•æ¸…å• 11-1 ä¸­çš„å‡çº§ç‰ˆçƒ­ç‹—æœºï¼ŒæŠŠé’±å’Œå£è¢‹é‡Œçš„æ£‰çµ®æ”¾è¿›å»ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [[in out] (hot-dog-machine-v2 2)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;gt;!! in &amp;#34;pocket lint&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (&amp;lt;!! out))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;gt;!! in 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (&amp;lt;!! out))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;gt;!! in 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (&amp;lt;!! out))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;gt;!! in 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;lt;!! out))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; wilted lettuce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; hotdog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; hotdog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>æ¸…å• 11-1. ä¸ä¸€ä¸ªå¥å£®çš„çƒ­ç‹—å”®è´§æœºè¿›ç¨‹äº¤äº’&lt;/li>
&lt;/ol>
&lt;p>é¦–å…ˆï¼Œæˆ‘ä»¬å°è¯•äº† &amp;ldquo;å£è¢‹é‡Œçš„æ£‰çµ® &amp;ldquo;è¿™ä¸€æ‹›ï¼Œå¾—åˆ°äº†æ‰“è”«çš„ç”Ÿèœã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸¤æ¬¡æŠ•å…¥ 3 ç¾å…ƒï¼Œä¸¤æ¬¡éƒ½å¾—åˆ°ä¸€ä¸ªçƒ­ç‹—ã€‚ç„¶åï¼Œæˆ‘ä»¬è¯•å›¾å†æŠ•å…¥ 3 ç¾å…ƒï¼Œä½†è¿™è¢«å¿½ç•¥äº†ï¼Œå› ä¸ºé€šé“å·²ç»å…³é—­ï¼›æ•°å­— 3 æ²¡æœ‰è¢«æ”¾åœ¨é€šé“ä¸Šã€‚å½“æˆ‘ä»¬è¯•å›¾ä» &amp;ldquo;å‡º &amp;ldquo;é€šé“å–é’±æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°çš„æ˜¯ &amp;ldquo;é›¶&amp;rdquo;ï¼Œè¿™ä¹Ÿæ˜¯å› ä¸ºè¯¥é€šé“æ˜¯å…³é—­çš„ã€‚ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°&lt;code>hot-dog-machine-v2&lt;/code>çš„å‡ ä¸ªæœ‰è¶£çš„ç»†èŠ‚ã€‚é¦–å…ˆï¼Œå®ƒåœ¨åŒä¸€ä¸ª go å—ä¸­åšäº†ä¸€ä¸ª put å’Œä¸€ä¸ª takeã€‚è¿™å¹¶ä¸ç½•è§ï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºè¿›ç¨‹&lt;em>ç®¡é“çš„ä¸€ç§æ–¹æ³•ï¼šåªè¦è®©ä¸€ä¸ªè¿›ç¨‹çš„&lt;/em>å…¥&lt;em>é€šé“æˆä¸ºå¦ä¸€ä¸ªè¿›ç¨‹çš„&lt;/em>å‡º*é€šé“ã€‚ä¸‹é¢çš„ä¾‹å­å°±æ˜¯è¿™æ ·åšçš„ï¼ŒæŠŠä¸€ä¸ªå­—ç¬¦ä¸²é€šè¿‡ä¸€ç³»åˆ—çš„è¿›ç¨‹è¿›è¡Œè½¬æ¢ï¼Œç›´åˆ°æœ€åä¸€ä¸ªè¿›ç¨‹æ‰“å°å‡ºè¿™ä¸ªå­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [c1 (chan)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> c2 (chan)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> c3 (chan)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (&amp;gt;! c2 (clojure.string/upper-case (&amp;lt;! c1))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (&amp;gt;! c3 (clojure.string/reverse (&amp;lt;! c2))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (println (&amp;lt;! c3)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;gt;!! c1 &amp;#34;redrum&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; MURDER
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨æœ¬ç« çš„æœ€åï¼Œæˆ‘å°†ä¼šæœ‰æ›´å¤šå…³äºè¿›ç¨‹ç®¡é“ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥ä»£æ›¿å›è°ƒçš„å†…å®¹ã€‚&lt;/p>
&lt;p>å›åˆ°æ¸…å• 11-1! å¦ä¸€ä»¶éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œçƒ­ç‹—æœºåœ¨ä½ å¤„ç†å®Œå®ƒæ‰€å‘æ”¾çš„ä¸œè¥¿ä¹‹å‰ï¼Œä¸ä¼šæ¥å—æ›´å¤šçš„é’±ã€‚è¿™å…è®¸ä½ å»ºç«‹ç±»ä¼¼äºçŠ¶æ€æœºçš„è¡Œä¸ºæ¨¡å‹ï¼Œå…¶ä¸­é€šé“æ“ä½œçš„å®Œæˆä¼šè§¦å‘çŠ¶æ€è½¬æ¢ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¤ä¸ºè‡ªåŠ¨å”®è´§æœºæœ‰ä¸¤ä¸ªçŠ¶æ€ã€‚&lt;em>å‡†å¤‡æ¥æ”¶é’±&lt;/em>å’Œ&lt;em>å‘æ”¾&lt;/em>ç‰©å“*ã€‚æ’å…¥é’±å’Œå–èµ°ç‰©å“ä¼šè§¦å‘è¿™ä¸¤è€…ä¹‹é—´çš„è½¬æ¢ã€‚&lt;/p>
&lt;h2 id="alts">alts&lt;/h2>
&lt;p>core.async å‡½æ•°&lt;code>alts!!&lt;/code>å¯ä»¥è®©ä½ ä½¿ç”¨ä¸€ä¸ªæ“ä½œé›†åˆä¸­ç¬¬ä¸€ä¸ªæˆåŠŸçš„é€šé“æ“ä½œçš„ç»“æœã€‚æˆ‘ä»¬åœ¨ç¬¬ 198 é¡µçš„ &amp;ldquo;å»¶è¿Ÿ &amp;ldquo;ä¸­ç”¨å»¶è¿Ÿå’Œ Future åšäº†ç±»ä¼¼çš„äº‹æƒ…ã€‚åœ¨é‚£ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠä¸€ç»„å¤´åƒä¸Šä¼ åˆ°ä¸€ä¸ªå¤´åƒåˆ†äº«ç½‘ç«™ï¼Œå¹¶åœ¨ç¬¬ä¸€å¼ ç…§ç‰‡ä¸Šä¼ æ—¶é€šçŸ¥å¤´åƒæ‰€æœ‰è€…ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ç”¨&lt;code>alts!!&lt;/code>åšåŒæ ·çš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn upload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [headshot c]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (Thread/sleep (rand 100))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;gt;! c headshot)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (let [c1 (chan)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> c2 (chan)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> c3 (chan)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (upload &amp;#34;serious.jpg&amp;#34; c1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (upload &amp;#34;fun.jpg&amp;#34; c2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (upload &amp;#34;sassy.jpg&amp;#34; c3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (let [[headshot channel] (alts!! [c1 c2 c3])]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Sending headshot notification for&amp;#34; headshot)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Sending headshot notification for sassy.jpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™é‡Œï¼Œ&lt;code>upload&lt;/code>å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¤´åƒå’Œä¸€ä¸ªé¢‘é“ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹å°†éšæœºç¡çœ ä¸€æ®µæ—¶é—´ï¼ˆæ¨¡æ‹Ÿä¸Šä¼ ï¼‰ï¼Œç„¶åå°†å¤´åƒæ”¾åˆ°é¢‘é“ä¸Šã€‚ä»âŠå¼€å§‹çš„&lt;code>let&lt;/code>ç»‘å®šå’Œ&lt;code>upload&lt;/code>å‡½æ•°è°ƒç”¨åº”è¯¥æ˜¯æœ‰æ„ä¹‰çš„ï¼šæˆ‘ä»¬åˆ›å»ºäº†ä¸‰ä¸ªé€šé“ï¼Œç„¶åç”¨å®ƒä»¬æ¥æ‰§è¡Œä¸Šä¼ ã€‚&lt;/p>
&lt;p>äº‹æƒ…åœ¨â‹å¤„å˜å¾—æœ‰è¶£ã€‚&lt;code>alts!!&lt;/code>å‡½æ•°éœ€è¦ä¸€ä¸ªé€šé“çš„ Vector ä½œä¸ºå…¶å‚æ•°ã€‚è¿™å°±å¥½æ¯”è¯´ï¼Œ&amp;ldquo;è¯•ç€åœ¨è¿™äº›é€šé“ä¸ŠåŒæ—¶åšä¸€ä¸ªé˜»å¡æ€§çš„æ‹æ‘„ã€‚ä¸€æ—¦å–å€¼æˆåŠŸï¼Œè¿”å›ä¸€ä¸ª Vectorï¼Œå…¶ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å–å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯è·èƒœçš„é€šé“&amp;rdquo;ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸&lt;em>sassy.jpg&lt;/em>ç›¸å…³çš„é€šé“é¦–å…ˆæ”¶åˆ°äº†ä¸€ä¸ªå€¼ã€‚å¦‚æœä½ æƒ³è·å–å®ƒä»¬çš„å€¼å¹¶å¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ï¼Œå…¶ä»–é€šé“ä»ç„¶å¯ç”¨ã€‚&lt;code>alts!!&lt;/code>æ‰€åšçš„åªæ˜¯ä»ç¬¬ä¸€ä¸ªæœ‰å€¼çš„é€šé“ä¸­è·å–ä¸€ä¸ªå€¼ï¼›å®ƒå¹¶ä¸è§¦åŠå…¶ä»–é€šé“ã€‚&lt;/p>
&lt;p>&lt;code>alts!!&lt;/code>çš„ä¸€ä¸ªå¾ˆé…·çš„æ–¹é¢æ˜¯ï¼Œä½ å¯ä»¥ç»™å®ƒä¸€ä¸ª&lt;em>timeout é€šé“&lt;/em>ï¼Œå®ƒç­‰å¾…æŒ‡å®šçš„æ¯«ç§’æ•°ï¼Œç„¶åå…³é—­ã€‚è¿™æ˜¯ä¸€ä¸ªä¼˜é›…çš„æœºåˆ¶ï¼Œå¯ä»¥ä¸ºå¹¶å‘æ“ä½œè®¾ç½®ä¸€ä¸ªæ—¶é—´é™åˆ¶ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åœ¨ä¸Šä¼ æœåŠ¡ä¸­ä½¿ç”¨å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [c1 (chan)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (upload &amp;#34;serious.jpg&amp;#34; c1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [[headshot channel] (alts!! [c1 (timeout 20)])]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if headshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Sending headshot notification for&amp;#34; headshot)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Timed out!&amp;#34;))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Timed out!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†è¶…æ—¶è®¾ç½®ä¸º 20 æ¯«ç§’ã€‚å› ä¸ºä¸Šä¼ æ²¡æœ‰åœ¨è¿™ä¸ªæ—¶é—´æ®µå®Œæˆï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªè¶…æ—¶æ¶ˆæ¯ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code>alts!!&lt;/code>æ¥æŒ‡å®š put æ“ä½œã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåœ¨ä½ ä¼ é€’ç»™&lt;code>alts!!&lt;/code>çš„ Vector å†…æ”¾ç½®ä¸€ä¸ª Vectorï¼Œå°±åƒæœ¬ä¾‹ä¸­çš„âŠã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [c1 (chan)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> c2 (chan)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (&amp;lt;! c2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (let [[value channel] (alts!! [c1 [c2 &amp;#34;put!&amp;#34;]])]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println value)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (= channel c2)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œä½ åˆ›å»ºäº†ä¸¤ä¸ªé€šé“ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªè¿›ç¨‹ï¼Œç­‰å¾…å¯¹&lt;code>c2&lt;/code>è¿›è¡Œå¤„ç†ã€‚ä½ æä¾›ç»™&lt;code>alts!!&lt;/code>çš„ Vector å‘Šè¯‰å®ƒï¼Œ&amp;ldquo;å°è¯•å¯¹&lt;code>c1'è¿›è¡Œå–èˆï¼Œå¹¶å°è¯•å°†&lt;/code>&amp;ldquo;put!&amp;quot;&lt;code>æ”¾åœ¨&lt;/code>c2&amp;rsquo;ä¸Šã€‚å¦‚æœåœ¨&lt;code>c1&lt;/code>ä¸Šçš„å–å€¼é¦–å…ˆå®Œæˆï¼Œè¿”å›å…¶å€¼å’Œé€šé“ã€‚å¦‚æœåœ¨&lt;code>c2&lt;/code>ä¸Šçš„æŠ•æ”¾å…ˆå®Œæˆï¼Œå¦‚æœæŠ•æ”¾æˆåŠŸï¼Œè¿”å›&lt;code>true&lt;/code>ï¼Œå¦åˆ™è¿”å›&lt;code>false&lt;/code>ã€‚&amp;rdquo; æœ€åï¼Œ&lt;code>value&lt;/code>çš„ç»“æœï¼ˆæ˜¯&lt;code>true&lt;/code>ï¼Œå› ä¸º&lt;code>c2&lt;/code>çš„é€šé“æ˜¯å¼€æ”¾çš„ï¼‰æ‰“å°å‡ºæ¥ï¼Œæ˜¾ç¤ºè¿”å›çš„é€šé“ç¡®å®æ˜¯&lt;code>c2&lt;/code>ã€‚&lt;/p>
&lt;p>åƒ&lt;code>&amp;lt;!!&lt;/code>å’Œ&lt;code>&amp;gt;!!&lt;/code>ä¸€æ ·ï¼Œ&lt;code>alts!!&lt;/code>æœ‰ä¸€ä¸ªåœè½¦çš„é€‰æ‹©ï¼Œ&lt;code>alts!&lt;/code>ï¼Œä½ å¯ä»¥åœ¨ go å—ä¸­ä½¿ç”¨å®ƒã€‚Â &lt;code>alts!&lt;/code>æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ï¼Œå¯ä»¥å¯¹ä¸€ç»„é€šé“ä¸­çš„å“ªä¸€ä¸ªè¿›è¡ŒæŠ•å…¥æˆ–å–å‡ºçš„é€‰æ‹©ã€‚å®ƒä»ç„¶æ‰§è¡Œæ”¾å’Œå–ï¼Œæ‰€ä»¥ä½¿ç”¨åœæ”¾æˆ–é˜»å¡å˜é‡çš„ç†ç”±åŒæ ·é€‚ç”¨ã€‚&lt;/p>
&lt;p>è¿™å°±æ¶µç›–äº† core.async çš„åŸºç¡€çŸ¥è¯†! æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†è§£é‡Šäº†åè°ƒè¿›ç¨‹çš„ä¸¤ç§å¸¸è§æ¨¡å¼ã€‚&lt;/p>
&lt;h2 id="é˜Ÿåˆ—">é˜Ÿåˆ—&lt;/h2>
&lt;p>åœ¨ç¬¬ 202 é¡µçš„ &amp;ldquo;æ»šåŠ¨ä½ è‡ªå·±çš„é˜Ÿåˆ— &amp;ldquo;ä¸­ï¼Œä½ å†™äº†ä¸€ä¸ªå®ï¼Œè®©ä½ å¯¹ Future è¿›è¡Œæ’é˜Ÿã€‚è¿›ç¨‹è®©ä½ ä»¥ä¸€ç§æ›´ç›´æ¥çš„æ–¹å¼ä½¿ç”¨ç±»ä¼¼çš„æŠ€æœ¯ã€‚å‡è®¾ä½ æƒ³ä»ä¸€ä¸ªç½‘ç«™ä¸Šè·å¾—ä¸€å †éšæœºçš„æŠ¥ä»·ï¼Œå¹¶æŠŠå®ƒä»¬å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ä½ æƒ³ç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ªæŠ¥ä»·è¢«å†™å…¥æ–‡ä»¶ï¼Œè¿™æ ·æ–‡æœ¬å°±ä¸ä¼šè¢«äº¤é”™ï¼Œæ‰€ä»¥ä½ æŠŠä½ çš„æŠ¥ä»·æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€‚ä¸‹é¢æ˜¯å®Œæ•´çš„ä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn append-to-file
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Write a string to the end of a file&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [filename s]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (spit filename s :append true))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn format-quote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Delineate the beginning and end of a quote because it&amp;#39;s convenient&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [quote]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;=== BEGIN QUOTE ===\n&amp;#34; quote &amp;#34;=== END QUOTE ===\n\n&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn random-quote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Retrieve a random quote and format it&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (format-quote (slurp &amp;#34;http://www.braveclojure.com/random-quote&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn snag-quotes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [filename num-quotes]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [c (chan)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (while true (append-to-file filename (&amp;lt;! c))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (dotimes [n num-quotes] (go (&amp;gt;! c (random-quote))))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡½æ•°&lt;code>append-to-file&lt;/code>ã€&lt;code>format-quote&lt;/code>å’Œ&lt;code>random-quote&lt;/code>æœ‰æ–‡æ¡£è¯´æ˜å®ƒä»¬çš„ä½œç”¨ã€‚&lt;code>snag-quotes&lt;/code>æ˜¯å‘ç”Ÿæœ‰è¶£å·¥ä½œçš„åœ°æ–¹ã€‚é¦–å…ˆï¼Œå®ƒåˆ›å»ºä¸€ä¸ªé€šé“ï¼Œåœ¨äº§ç”ŸæŠ¥ä»·çš„è¿›ç¨‹å’Œæ¶ˆè´¹æŠ¥ä»·çš„è¿›ç¨‹ä¹‹é—´å…±äº«ã€‚ç„¶åï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªä½¿ç”¨ &amp;ldquo;while true &amp;ldquo;æ¥åˆ›å»ºä¸€ä¸ªæ— é™å¾ªç¯çš„è¿›ç¨‹ã€‚åœ¨å¾ªç¯çš„æ¯ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œå®ƒç­‰å¾…ä¸€ä¸ªæŠ¥ä»·åˆ°è¾¾&lt;code>c&lt;/code>ï¼Œç„¶åå°†å…¶è¿½åŠ åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚æœ€åï¼Œ&lt;code>snag-quotes&lt;/code>åˆ›å»ºä¸€ä¸ª&lt;code>num-quotes&lt;/code>æ•°é‡çš„è¿›ç¨‹æ¥è·å–ä¸€ä¸ªå¼•å·ï¼Œç„¶åæŠŠå®ƒæ”¾åœ¨&lt;code>c&lt;/code>ä¸Šã€‚å¦‚æœä½ æ±‚å€¼&lt;code>(snag-quotes &amp;quot;quotes&amp;quot; 2)&lt;/code>å¹¶æ£€æŸ¥ä½ å¯åŠ¨ REPL çš„ç›®å½•ä¸­çš„&lt;em>quotes&lt;/em>æ–‡ä»¶ï¼Œå®ƒåº”è¯¥æœ‰ä¸¤ä¸ªå¼•å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">=== BEGIN QUOTE ===
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Nobody&amp;#39;s gonna believe that computers are intelligent until they start
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">coming in late and lying about it.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">=== END QUOTE ===
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">=== BEGIN QUOTE ===
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Give your child mental blocks for Christmas.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">=== END QUOTE ===
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ç§æ’é˜Ÿæ–¹å¼ä¸ç¬¬ 9 ç« ä¸­çš„ä¾‹å­ä¸åŒã€‚åœ¨é‚£ä¸ªä¾‹å­ä¸­ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æ˜¯æŒ‰ç…§å…¶åˆ›å»ºçš„é¡ºåºæ¥å¤„ç†çš„ã€‚åœ¨è¿™é‡Œï¼Œæ¯ä¸ªè·å–æŠ¥ä»·çš„ä»»åŠ¡æ˜¯æŒ‰ç…§å®ƒå®Œæˆçš„é¡ºåºæ¥å¤„ç†çš„ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ éƒ½è¦ç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ªæŠ¥ä»·è¢«å†™å…¥æ–‡ä»¶ã€‚&lt;/p>
&lt;h2 id="ç”¨è¿›ç¨‹ç®¡é“é€ƒç¦»å›è°ƒåœ°ç‹±">ç”¨è¿›ç¨‹ç®¡é“é€ƒç¦»å›è°ƒåœ°ç‹±&lt;/h2>
&lt;p>åœ¨æ²¡æœ‰é€šé“çš„è¯­è¨€ä¸­ï¼Œä½ éœ€è¦ç”¨ &amp;ldquo;å›è°ƒ &amp;ldquo;æ¥è¡¨è¾¾ &amp;ldquo;å½“&lt;em>x&lt;/em>å‘ç”Ÿæ—¶ï¼Œåš&lt;em>y&lt;/em>&amp;ldquo;çš„æƒ³æ³•ã€‚åœ¨åƒ JavaScript è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå›è°ƒæ˜¯ä¸€ç§å®šä¹‰ä»£ç çš„æ–¹å¼ï¼Œä¸€æ—¦å…¶ä»–ä»£ç å®Œæˆå°±ä¼šå¼‚æ­¥æ‰§è¡Œã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JavaScriptï¼Œä½ å¯èƒ½å·²ç»èŠ±äº†ä¸€äº›æ—¶é—´åœ¨&lt;em>å›è°ƒåœ°ç‹±&lt;/em>ä¸­æ²‰æººã€‚&lt;/p>
&lt;p>å®ƒè¢«ç§°ä¸ºå›è°ƒåœ°ç‹±çš„åŸå› æ˜¯ï¼Œåœ¨å›è°ƒå±‚ä¹‹é—´å¾ˆå®¹æ˜“äº§ç”Ÿä¸æ˜æ˜¾çš„ä¾èµ–å…³ç³»ã€‚å®ƒä»¬æœ€ç»ˆä¼šå…±äº«çŠ¶æ€ï¼Œä½¿å¾—åœ¨å›è°ƒè¢«è§¦å‘æ—¶å¾ˆéš¾æ¨ç†æ•´ä¸ªç³»ç»Ÿçš„çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæµç¨‹ç®¡é“æ¥é¿å…è¿™ç§ä»¤äººæ²®ä¸§çš„ç»“æœã€‚è¿™æ ·ä¸€æ¥ï¼Œæ¯ä¸ªé€»è¾‘å•å…ƒéƒ½ç”Ÿæ´»åœ¨è‡ªå·±ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼Œé€»è¾‘å•å…ƒä¹‹é—´çš„æ‰€æœ‰é€šä¿¡éƒ½é€šè¿‡æ˜ç¡®å®šä¹‰çš„è¾“å…¥å’Œè¾“å‡ºé€šé“è¿›è¡Œã€‚&lt;/p>
&lt;p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸‰ä¸ªé€šè¿‡é€šé“è¿æ¥çš„æ— é™å¾ªç¯è¿›ç¨‹ï¼Œå°†ä¸€ä¸ªè¿›ç¨‹çš„&lt;em>è¾“å‡º&lt;/em>é€šé“ä½œä¸ºç®¡é“ä¸­ä¸‹ä¸€ä¸ªè¿›ç¨‹çš„&lt;em>è¾“å…¥&lt;/em>é€šé“ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn upper-caser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [inï¼½
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [out (chan)] (è®© [out (chan)])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (while true (&amp;gt;! out (clojure.string/upper-case (&amp;lt;! in))))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> out))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn reverser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [inï¼½
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [out (chan)] (go (while true (&amp;gt;!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (while true (&amp;gt;! out (clojure.string/reverse (&amp;lt;! in))))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> out))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn printer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [inï¼½
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (go (while true (println (&amp;lt;! in))))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def in-chan (chan))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def upper-caser-out (upper-caser in-chan))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def reverser-out (reverser upper-caser-out))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(Printer reverser-out)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(&amp;gt;ï¼ï¼in-chan &amp;#34;redrum&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; MURDER
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(&amp;gt;!! in-chan &amp;#34;repaid&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; DIAPER
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ä½¿ç”¨è¿™æ ·çš„æµç¨‹å¤„ç†äº‹ä»¶ï¼Œæ¨ç†æ•´ä¸ªæ•°æ®è½¬æ¢ç³»ç»Ÿçš„å„ä¸ªæ­¥éª¤å°±æ›´å®¹æ˜“äº†ã€‚ä½ å¯ä»¥æŸ¥çœ‹æ¯ä¸ªæ­¥éª¤å¹¶ç†è§£å®ƒçš„ä½œç”¨ï¼Œè€Œä¸å¿…å‚è€ƒä¹‹å‰å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…æˆ–ä¹‹åå¯èƒ½å‘ç”Ÿçš„äº‹æƒ…ï¼›æ¯ä¸ªè¿‡ç¨‹å°±åƒä¸€ä¸ªçº¯å‡½æ•°ä¸€æ ·å®¹æ˜“æ¨ç†ã€‚&lt;/p>
&lt;h2 id="é¢å¤–èµ„æº">é¢å¤–èµ„æº&lt;/h2>
&lt;p>Clojure çš„ core.async åº“åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå—åˆ° Go çš„å¹¶å‘æ¨¡å‹çš„å¯å‘ï¼Œå®ƒæ˜¯åŸºäº Tony Hoare åœ¨&lt;em>Communicating Sequential&lt;/em> &lt;em>Processes&lt;/em>ä¸­çš„å·¥ä½œï¼Œå¯åœ¨*&lt;a class="link" href="http://www.usingcsp.com/" target="_blank" rel="noopener"
>http://www.usingcsp.com/&lt;/a>ã€‚*&lt;/p>
&lt;p>Go çš„å…±åŒåˆ›é€ è€… Rob Pike æœ‰ä¸€ä¸ªå¾ˆå¥½çš„å…³äºå¹¶å‘çš„æ¼”è®²ï¼Œå¯åœ¨*&lt;a class="link" href="https://www.youtube.com/watch?v=f6kdp27TYZs" target="_blank" rel="noopener"
>Google I/O 2012 - Go å¹¶å‘æ¨¡å¼ - YouTube&lt;/a>*ã€‚&lt;/p>
&lt;p>ClojureScriptï¼Œä¹Ÿè¢«ç§°ä¸ºæµè§ˆå™¨çš„æœ€ä½³é€‰æ‹©ï¼Œä½¿ç”¨ core.asyncã€‚ä¸å†æœ‰å›è°ƒçš„åœ°ç‹±! ä½ å¯ä»¥åœ¨*&lt;a class="link" href="https://github.com/clojure/clojurescript%3C/span%3E" target="_blank" rel="noopener"
>https://github.com/clojure/clojurescript&lt;/a>*äº†è§£ ClojureScript çš„æƒ…å†µã€‚&lt;/p>
&lt;p>æœ€åï¼Œåœ¨*&lt;a class="link" href="http://clojure.github.io/core.async/" target="_blank" rel="noopener"
>clojure.core.async - core.async 1.2.599-SNAPSHOT API documentation&lt;/a>*æŸ¥çœ‹ API æ–‡æ¡£ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>åœ¨æœ¬ç« ä¸­ï¼Œä½ äº†è§£äº† core.async å¦‚ä½•å…è®¸ä½ åˆ›å»ºå¹¶å‘è¿›ç¨‹ï¼Œä»¥å“åº”é€šé“ä¸Šçš„ put å’Œ take é€šä¿¡äº‹ä»¶ã€‚ä½ äº†è§£äº†å¦‚ä½•ä½¿ç”¨&lt;code>go&lt;/code>å’Œ&lt;code>thread&lt;/code>æ¥åˆ›å»ºå¹¶å‘è¿›ç¨‹ï¼Œé€šè¿‡åœæ”¾å’Œé˜»å¡æ¥ç­‰å¾…é€šä¿¡äº‹ä»¶ã€‚ä½ è¿˜å­¦ä¹ äº†å¦‚ä½•é€šè¿‡ä½¿ä¸€ä¸ªè¿›ç¨‹çš„&lt;em>å‡º&lt;/em>é€šé“æˆä¸ºå¦ä¸€ä¸ªè¿›ç¨‹çš„&lt;em>å…¥&lt;/em>é€šé“æ¥åˆ›å»ºè¿›ç¨‹ç®¡é“ï¼Œä»¥åŠè¿™å¦‚ä½•ä½¿ä½ å†™çš„ä»£ç æ¯”åµŒå¥—å›è°ƒæ›´å®¹æ˜“ç†è§£ã€‚æœ€åï¼Œä½ æ€è€ƒäº†ä½ æ˜¯å¦åªæ˜¯ä¸€å°èŠ±å“¨çš„çƒ­ç‹—å”®è´§æœºã€‚&lt;/p></description></item><item><title>Chapter10 å½¢è€Œä¸Šå­¦</title><link>https://example.com/p/chapter10-%E5%BD%A2%E8%80%8C%E4%B8%8A%E5%AD%A6/</link><pubDate>Sat, 15 Jan 2022 12:42:26 +0800</pubDate><guid>https://example.com/p/chapter10-%E5%BD%A2%E8%80%8C%E4%B8%8A%E5%AD%A6/</guid><description>&lt;h1 id="clojure-metaphysics-åŸå­refsvars-å’Œæ‹¥æŠ±åƒµå°¸">Clojure Metaphysics: åŸå­ã€Refsã€Vars å’Œæ‹¥æŠ±åƒµå°¸&lt;/h1>
&lt;p>ä¸‰ä¸ªå¹¶å‘æ€§çš„å°å¦–ç²¾éƒ½æ˜¯ä»åŒä¸€ä¸ªé‚ªæ¶çš„å‘é‡Œç”Ÿå‡ºæ¥çš„ï¼šå¯¹å¯å˜çŠ¶æ€çš„å…±äº«è®¿é—®ã€‚ä½ å¯ä»¥åœ¨ç¬¬ä¹ç« çš„å¼•ç”¨å•å…ƒè®¨è®ºä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚å½“ä¸¤ä¸ªçº¿ç¨‹å¯¹å¼•ç”¨å•å…ƒè¿›è¡Œä¸åè°ƒçš„æ›´æ”¹æ—¶ï¼Œç»“æœæ˜¯ä¸å¯é¢„æµ‹çš„ã€‚&lt;/p>
&lt;p>Rich Hickey è®¾è®¡ Clojure æ˜¯ä¸ºäº†ä¸“é—¨è§£å†³å…±äº«è®¿é—®æ˜“å˜çŠ¶æ€æ‰€äº§ç”Ÿçš„é—®é¢˜ã€‚äº‹å®ä¸Šï¼ŒClojure ä½“ç°äº†ä¸€ç§éå¸¸æ¸…æ™°çš„çŠ¶æ€æ¦‚å¿µï¼Œä½¿å…¶åœ¨æœ¬è´¨ä¸Šæ¯”å¤§å¤šæ•°æµè¡Œçš„ç¼–ç¨‹è¯­è¨€æ›´å®‰å…¨ã€‚å®ƒæ˜¯å®‰å…¨çš„ï¼Œä¸€ç›´åˆ°å®ƒçš„&lt;em>meta-freakin-physics&lt;/em>ã€‚&lt;/p>
&lt;p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†äº†è§£ Clojure çš„åº•å±‚å½¢è€Œä¸Šå­¦ï¼Œä¸å…¸å‹çš„é¢å‘å¯¹è±¡ï¼ˆOOï¼‰è¯­è¨€çš„å½¢è€Œä¸Šå­¦ç›¸æ¯”è¾ƒã€‚å­¦ä¹ è¿™ç§å“²å­¦å°†ä½¿ä½ å‡†å¤‡å¥½å¤„ç† Clojure å‰©ä¸‹çš„å¹¶å‘å·¥å…·ï¼Œ&lt;em>atom&lt;/em>ã€&lt;em>ref&lt;/em>å’Œ&lt;em>var&lt;/em>å¼•ç”¨ç±»å‹ã€‚(Clojure è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„å¼•ç”¨ç±»å‹ï¼Œ&lt;em>agents&lt;/em>ï¼Œæœ¬ä¹¦æ²¡æœ‰æ¶‰åŠã€‚) è¿™äº›ç±»å‹ä¸­çš„æ¯ä¸€ä¸ªéƒ½èƒ½è®©ä½ å®‰å…¨åœ°åŒæ—¶æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹æ“ä½œã€‚ä½ è¿˜ä¼šå­¦åˆ°ä¸€äº›ç®€å•çš„æ–¹æ³•ï¼Œä½¿ä½ çš„ç¨‹åºæ›´æœ‰æ•ˆç‡ï¼Œè€Œä¸éœ€è¦å¼•å…¥çŠ¶æ€ã€‚&lt;/p>
&lt;p>å½¢è€Œä¸Šå­¦è¯•å›¾ç”¨æœ€å¹¿æ³›çš„æœ¯è¯­æ¥å›ç­”ä¸¤ä¸ªåŸºæœ¬é—®é¢˜ã€‚&lt;/p>
&lt;ul>
&lt;li>é‚£é‡Œæœ‰ä»€ä¹ˆï¼Ÿ&lt;/li>
&lt;li>å®ƒæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ&lt;/li>
&lt;/ul>
&lt;p>ä¸ºäº†å¼•å‡º Clojure å’Œ OO è¯­è¨€ä¹‹é—´çš„å·®å¼‚ï¼Œæˆ‘å°†è§£é‡Šä¸¤ç§ä¸åŒçš„æ‹¥æŠ±åƒµå°¸çš„å»ºæ¨¡æ–¹å¼ã€‚ä¸æ™®é€šçš„åƒµå°¸ä¸åŒï¼Œæ‹¥æŠ±åƒµå°¸å¹¶ä¸æƒ³è¦åå™¬ä½ çš„å¤§è„‘ã€‚å®ƒåªæƒ³ç”¨å‹ºå­èˆ€ä½ ï¼Œä¹Ÿè®¸è¿˜æƒ³é—»é—»ä½ çš„è„–å­ã€‚è¿™ä½¿å¾—å®ƒçš„ä¸æ­»ã€æ‘‡æ™ƒã€è…çƒ‚çš„çŠ¶æ€æ›´åŠ æ‚²æƒ¨ã€‚ä½ æ€ä¹ˆèƒ½è¯•å›¾æ€æ­»åªæƒ³è¦çˆ±çš„ä¸œè¥¿å‘¢ï¼Ÿè°æ˜¯è¿™é‡ŒçœŸæ­£çš„æ€ªç‰©ï¼Ÿ&lt;/p>
&lt;h2 id="é¢å‘å¯¹è±¡çš„å½¢è€Œä¸Šå­¦">é¢å‘å¯¹è±¡çš„å½¢è€Œä¸Šå­¦&lt;/h2>
&lt;p>OO å½¢è€Œä¸Šå­¦å°†æ‹¥æŠ±åƒµå°¸è§†ä¸ºå­˜åœ¨äºä¸–ç•Œä¸Šçš„ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„å±æ€§å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ”¹å˜ï¼Œä½†å®ƒä»ç„¶è¢«å½“ä½œä¸€ä¸ªå•ä¸€çš„ã€ä¸å˜çš„å¯¹è±¡ã€‚å¦‚æœè¿™çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå®Œå…¨æ˜æ˜¾çš„ã€æ²¡æœ‰äº‰è®®çš„åƒµå°¸å½¢è€Œä¸Šå­¦çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å¯èƒ½æ²¡æœ‰åœ¨å“²å­¦å…¥é—¨è¯¾ä¸ŠèŠ±å‡ ä¸ªå°æ—¶æ¥äº‰è®ºä¸€æŠŠæ¤…å­çš„å­˜åœ¨æ„å‘³ç€ä»€ä¹ˆï¼Œä»¥åŠä»€ä¹ˆçœŸæ­£ä½¿å®ƒé¦–å…ˆæˆä¸ºä¸€æŠŠæ¤…å­ã€‚&lt;/p>
&lt;p>æ£˜æ‰‹çš„éƒ¨åˆ†æ˜¯ï¼Œæ‹¥æŠ±çš„åƒµå°¸æ€»æ˜¯åœ¨å˜åŒ–ã€‚å®ƒçš„èº«ä½“æ…¢æ…¢æ¶åŒ–ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒå¯¹æ‹¥æŠ±çš„ä¸ç­æ¸´æœ›è¶Šæ¥è¶Šå¼ºçƒˆã€‚åœ¨ OO æœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬ä¼šè¯´æ‹¥æŠ±åƒµå°¸æ˜¯ä¸€ä¸ªå…·æœ‰å¯æ”¹å˜çŠ¶æ€çš„å¯¹è±¡ï¼Œå®ƒçš„çŠ¶æ€æ˜¯ä¸æ–­æ³¢åŠ¨çš„ã€‚ä½†æ˜¯ä¸ç®¡è¿™ä¸ªåƒµå°¸æœ‰å¤šå¤§çš„å˜åŒ–ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠå®ƒè®¤å®šä¸ºåŒä¸€ä¸ªåƒµå°¸ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åœ¨ Ruby ä¸­å¯¹æŠ±å›¢åƒµå°¸è¿›è¡Œå»ºæ¨¡å’Œäº¤äº’ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">class CuddleZombie
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # attr_accessor is just a shorthand way for creating getters and
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # setters for the listed instance variables
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> attr_accessor :cuddle_hunger_level, :percent_deteriorated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> def initialize(cuddle_hunger_level = 1, percent_deteriorated = 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.cuddle_hunger_level = cuddle_hunger_level
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> self.percent_deteriorated = percent_deteriorated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fred = CuddleZombie.new(2, 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fred.cuddle_hunger_level # =&amp;gt; 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fred.percent_deteriorated # =&amp;gt; 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fred.cuddle_hunger_level = 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fred.cuddle_hunger_level # =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>10-1. ç”¨ Ruby å»ºç«‹æŠ±å›¢åƒµå°¸è¡Œä¸ºæ¨¡å‹&lt;/li>
&lt;/ol>
&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªæŠ±å›¢åƒµå°¸ï¼Œ&lt;code>fred&lt;/code>ï¼Œæœ‰ä¸¤ä¸ªå±æ€§ã€‚&lt;code>cuddle_hunger_level&lt;/code>å’Œ&lt;code>percent_deteriorated&lt;/code>ã€‚&lt;code>fred&lt;/code>ä¸€å¼€å§‹çš„&lt;code>cuddle_hunger_level&lt;/code>æ˜¯ 2ï¼Œä½†æ˜¯ä½ å¯ä»¥æŠŠå®ƒæ”¹æˆä»»ä½•ä½ æƒ³è¦çš„ä¸œè¥¿ï¼Œå®ƒä»ç„¶æ˜¯å¥½çš„&amp;rsquo;Fredï¼ŒåŒä¸€ä¸ªæ‹¥æŠ±åƒµå°¸ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æŠŠå®ƒçš„`cuddle_hunger_level&amp;rsquo;æ”¹ä¸º 3ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/zombie-metaphysics/cuddle-zombie.png"
loading="lazy"
>&lt;/p>
&lt;p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå¯¹è±¡åªæ˜¯ä¸€ä¸ªèŠ±å“¨çš„å¼•ç”¨å•å…ƒã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå®ƒä¹Ÿä¼šå—åˆ°åŒæ ·çš„éç¡®å®šæ€§ç»“æœçš„å½±å“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹è¯•å›¾ç”¨&lt;code>fred.cuddle_hunger_level = fred.cuddle_hunger_level + 1&lt;/code>è¿™æ ·çš„æ–¹å¼æ¥å¢åŠ  Fred çš„é¥¥é¥¿åº¦ï¼Œå…¶ä¸­ä¸€ä¸ªå¢é‡å¯èƒ½ä¼šä¸¢å¤±ï¼Œå°±åƒã€Šä¸‰ä¸ªå°å¦–ç²¾ã€‹ä¸­ä¸¤ä¸ªçº¿ç¨‹å‘&lt;code>X&lt;/code>å†™å…¥çš„ä¾‹å­ä¸€æ ·ã€‚å‚è€ƒå•å…ƒæ ¼ã€ç›¸äº’æ’æ–¥å’ŒçŸ®äººç‹‚æˆ˜å£« &amp;ldquo;ä¸­çš„ä¾‹å­ã€‚&lt;/p>
&lt;p>å³ä½¿ä½ åªåœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šè¿›è¡Œè¯»å–ï¼Œç¨‹åºä»å°†æ˜¯éç¡®å®šæ€§çš„ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æ­£åœ¨è¿›è¡Œå…³äºæŠ±å›¢åƒµå°¸è¡Œä¸ºçš„ç ”ç©¶ã€‚ä½ æƒ³è®°å½•ä¸€ä¸ªåƒµå°¸çš„é¥¥é¥¿ç¨‹åº¦ï¼Œåªè¦å®ƒè¾¾åˆ° 50%çš„æ¶åŒ–ç¨‹åº¦ï¼Œä½†ä½ æƒ³åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šè¿›è¡Œï¼Œä»¥æé«˜æ€§èƒ½ï¼Œä½¿ç”¨ç±»ä¼¼æ¸…å• 10-1 ä¸­çš„ä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">if fred.percent_deteriorated &amp;gt;= 50
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Thread.new { database_logger.log(fred.cuddle_hunger_level) }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>è¿™æ®µ Ruby ä»£ç åœ¨å¹¶å‘æ‰§è¡Œæ—¶å¹¶ä¸å®‰å…¨ã€‚&lt;/li>
&lt;/ol>
&lt;p>é—®é¢˜æ˜¯ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½åœ¨å®é™…å†™å…¥ä¹‹å‰æ”¹å˜&lt;code>fred&lt;/code>ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œå›¾ 10-1 æ˜¾ç¤ºäº†ä¸¤ä¸ªä»ä¸Šåˆ°ä¸‹æ‰§è¡Œçš„çº¿ç¨‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°† 5 å†™å…¥æ•°æ®åº“æ˜¯æ­£ç¡®çš„ï¼Œä½† 10 å´è¢«å†™å…¥äº†ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/zombie-metaphysics/fred-read.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 10-1ï¼šè®°å½•ä¸ä¸€è‡´çš„æŠ±å›¢åƒµå°¸æ•°æ®&lt;/p>
&lt;p>è¿™å°†æ˜¯å¾ˆä¸å¹¸çš„ã€‚å½“ä½ è¯•å›¾ä»æ‹¥æŠ±åƒµå°¸çš„å¯ç¤ºä¸­æ¢å¤æ—¶ï¼Œä½ ä¸å¸Œæœ›ä½ çš„æ•°æ®æ˜¯ä¸ä¸€è‡´çš„ã€‚ç„¶è€Œï¼Œæ²¡æœ‰åŠæ³•ä¿ç•™ä¸€ä¸ªå¯¹è±¡åœ¨æŸä¸€ç‰¹å®šæ—¶åˆ»çš„çŠ¶æ€ã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼Œä¸ºäº†åŒæ—¶æ”¹å˜&lt;code>cuddle_hunger_level&lt;/code>å’Œ&lt;code>percent_deteriorated&lt;/code>ï¼Œä½ å¿…é¡»ç‰¹åˆ«å°å¿ƒã€‚å¦åˆ™ï¼Œ&lt;code>fred&lt;/code>æœ‰å¯èƒ½è¢«è§†ä¸ºä¸ä¸€è‡´çš„çŠ¶æ€ï¼Œå› ä¸ºå¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½ä¼šåœ¨ä½ æ‰“ç®—åŒæ—¶è¿›è¡Œçš„ä¸¤ä¸ªå˜åŒ–ä¹‹é—´&lt;code>è¯»å–&lt;/code>fred`å¯¹è±¡ï¼Œåƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">fred.cuddle_hunger_level = fred.cuddle_hunger_level + 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># At this time, another thread could read fred&amp;#39;s attributes and
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># &amp;#34;perceive&amp;#34; fred in an inconsistent state unless you use a mutex
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fred.percent_deteriorated = fred.percent_deteriorated + 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ˜¯å¦ä¸€ä¸ªç‰ˆæœ¬çš„äº’æ–¥é—®é¢˜ã€‚åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸­ï¼Œä½ å¯ä»¥ç”¨&lt;em>mutex&lt;/em>æ¥æ‰‹åŠ¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥ç¡®ä¿åœ¨ mutex çš„æŒç»­æ—¶é—´å†…ï¼Œæ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ä¸€ä¸ªèµ„æºï¼ˆåœ¨æœ¬ä¾‹ä¸­ï¼Œå°±æ˜¯&lt;code>fred&lt;/code>å¯¹è±¡ï¼‰ã€‚&lt;/p>
&lt;p>å¯¹è±¡æ°¸è¿œä¸ç¨³å®šçš„äº‹å®å¹¶ä¸å¦¨ç¢æˆ‘ä»¬æŠŠå®ƒä»¬å½“ä½œç¨‹åºçš„åŸºæœ¬æ„ä»¶ã€‚äº‹å®ä¸Šï¼Œè¿™è¢«è®¤ä¸ºæ˜¯ OOP çš„ä¸€ä¸ªä¼˜åŠ¿ã€‚çŠ¶æ€å¦‚ä½•å˜åŒ–å¹¶ä¸é‡è¦ï¼›ä½ ä»ç„¶å¯ä»¥ä¸ä¸€ä¸ªç¨³å®šçš„æ¥å£è¿›è¡Œäº¤äº’ï¼Œä¸€åˆ‡éƒ½ä¼šæ­£å¸¸å·¥ä½œã€‚è¿™ç¬¦åˆæˆ‘ä»¬å¯¹ä¸–ç•Œçš„ç›´è§‚æ„Ÿè§‰ã€‚ä¸€å—èœ¡ä»ç„¶æ˜¯åŒä¸€å—èœ¡ï¼Œå³ä½¿å®ƒçš„å±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼šå¦‚æœæˆ‘æ”¹å˜äº†å®ƒçš„é¢œè‰²ï¼ŒèåŒ–äº†å®ƒï¼Œç„¶åæŠŠå®ƒå€’åœ¨æˆ‘çš„æ•Œäººçš„è„¸ä¸Šï¼Œæˆ‘ä»ç„¶ä¼šè®¤ä¸ºå®ƒæ˜¯æˆ‘å¼€å§‹æ—¶çš„é‚£ä¸ªèœ¡å¯¹è±¡ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œåœ¨ OOP ä¸­ï¼Œå¯¹è±¡ä¹Ÿä¼šåšäº‹ã€‚å®ƒä»¬ç›¸äº’ä½œç”¨ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶æ”¹å˜çŠ¶æ€ã€‚åŒæ ·ï¼Œè¿™ä¹Ÿç¬¦åˆæˆ‘ä»¬å¯¹ä¸–ç•Œçš„ç›´è§‚æ„Ÿè§‰ï¼šå˜åŒ–æ˜¯å¯¹è±¡ç›¸äº’ä½œç”¨çš„ç»“æœã€‚ä¸€ä¸ªäººçš„å¯¹è±¡æ¨åˆ°ä¸€ä¸ªé—¨çš„å¯¹è±¡ä¸Šï¼Œè¿›å…¥ä¸€ä¸ªæˆ¿å­çš„å¯¹è±¡ã€‚&lt;/p>
&lt;h2 id="clojure-å½¢è€Œä¸Šå­¦">Clojure å½¢è€Œä¸Šå­¦&lt;/h2>
&lt;p>åœ¨ Clojure å½¢è€Œä¸Šå­¦ä¸­ï¼Œæˆ‘ä»¬ä¼šè¯´ï¼Œæˆ‘ä»¬æ°¸è¿œä¸ä¼šé‡åˆ°ä¸¤æ¬¡ç›¸åŒçš„æ‹¥æŠ±åƒµå°¸ã€‚æ‹¥æŠ±åƒµå°¸å¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹äºå…¶å˜å¼‚è€Œå­˜åœ¨äºä¸–ç•Œä¸Šçš„ç¦»æ•£äº‹ç‰©ï¼šå®ƒå®é™…ä¸Šæ˜¯ä¸€è¿ä¸²çš„&lt;em>ä»·å€¼&lt;/em>ã€‚&lt;/p>
&lt;p>æœ¯è¯­&lt;em>å€¼&lt;/em>ç»å¸¸è¢« Clojurists ä½¿ç”¨ï¼Œå…¶å…·ä½“å«ä¹‰å¯èƒ½ä¸ä½ çš„ä¹ æƒ¯ä¸åŒã€‚ä»·å€¼æ˜¯*åŸå­æ€§çš„ï¼Œå³å®ƒä»¬åœ¨ä¸€ä¸ªæ›´å¤§çš„ç³»ç»Ÿä¸­å½¢æˆä¸€ä¸ªå•ä¸€çš„ä¸å¯è¿˜åŸçš„å•ä½æˆ–ç»„æˆéƒ¨åˆ†ï¼›å®ƒä»¬æ˜¯ä¸å¯åˆ†å‰²çš„ã€ä¸å˜çš„ã€ç¨³å®šçš„å®ä½“ã€‚æ•°å­—æ˜¯ä»·å€¼ï¼šæ•°å­— 15 å˜å¼‚ä¸ºå¦ä¸€ä¸ªæ•°å­—æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚å½“ä½ ä» 15 åŠ å‡æ—¶ï¼Œä½ å¹¶æ²¡æœ‰æ”¹å˜ 15 è¿™ä¸ªæ•°å­—ï¼›ä½ åªæ˜¯å¾—åˆ°äº†ä¸€ä¸ªä¸åŒçš„æ•°å­—ã€‚Clojure çš„æ•°æ®ç»“æ„ä¹Ÿæ˜¯ä»·å€¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸å¯æ”¹å˜çš„ã€‚å½“ä½ åœ¨ä¸€ä¸ª Map ä¸Šä½¿ç”¨&lt;code>assoc&lt;/code>æ—¶ï¼Œä½ ä¸ä¼šä¿®æ”¹åŸæ¥çš„ Mapï¼›ç›¸åï¼Œä½ ä¼šæ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°çš„ Mapã€‚&lt;/p>
&lt;p>æ‰€ä»¥ä¸€ä¸ªå€¼ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯ä½ å¯ä»¥å¯¹ä¸€ä¸ªå€¼åº”ç”¨ä¸€ä¸ª&lt;em>è¿‡ç¨‹æ¥äº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ä»ä¸€ä¸ªå€¼&lt;/em>F1&lt;em>å¼€å§‹ï¼Œç„¶åæˆ‘ä»¬æŠŠ&lt;/em>æ‹¥æŠ±åƒµå°¸&lt;em>è¿‡ç¨‹åº”ç”¨åˆ°&lt;/em>F1*ï¼Œäº§ç”Ÿå€¼&lt;em>F2&lt;/em>ã€‚ç„¶åè¿™ä¸ªè¿‡ç¨‹åˆè¢«åº”ç”¨åˆ°&lt;em>F2&lt;/em>çš„å€¼ä¸Šï¼Œäº§ç”Ÿ&lt;em>F3&lt;/em>çš„å€¼ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p>
&lt;p>è¿™å¯¼è‡´äº†å¯¹&lt;em>èº«ä»½&lt;/em>çš„ä¸åŒæ¦‚å¿µã€‚Clojure å½¢è€Œä¸Šå­¦ä¸æ˜¯åƒ OO å½¢è€Œä¸Šå­¦é‚£æ ·æŠŠèº«ä»½ç†è§£ä¸ºå˜åŒ–çš„å¯¹è±¡æ‰€å›ºæœ‰çš„ï¼Œè€Œæ˜¯æŠŠèº«ä»½ç†è§£ä¸ºæˆ‘ä»¬äººç±»å¼ºåŠ ç»™ç”±ä¸€ä¸ªè¿‡ç¨‹éšæ—¶é—´äº§ç”Ÿçš„ä¸€è¿ä¸²ä¸å˜çš„å€¼çš„ä¸œè¥¿ã€‚æˆ‘ä»¬ä½¿ç”¨&lt;em>åå­—&lt;/em>æ¥æŒ‡å®šèº«ä»½ã€‚åå­—&lt;em>Fred&lt;/em>æ˜¯æŒ‡ä¸€ç³»åˆ—å•ç‹¬çš„çŠ¶æ€&lt;em>F1&lt;/em>ã€&lt;em>F2&lt;/em>ã€&lt;em>F3&lt;/em>ç­‰ç­‰çš„æ–¹ä¾¿æ–¹æ³•ã€‚ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œä¸å­˜åœ¨æ‰€è°“çš„å¯æ”¹å˜çš„çŠ¶æ€ã€‚ç›¸åï¼Œ&lt;em>state&lt;/em>æŒ‡çš„æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„èº«ä»½å€¼ã€‚&lt;/p>
&lt;p>Rich Hickey ç”¨ç”µè¯å·ç çš„æ¯”å–»æ¥è§£é‡ŠçŠ¶æ€ã€‚Â &lt;em>Alan çš„ç”µè¯å·ç &lt;/em>å·²ç»æ”¹å˜äº† 10 æ¬¡ï¼Œä½†æˆ‘ä»¬å°†æ°¸è¿œç”¨åŒä¸€ä¸ªåå­—æ¥ç§°å‘¼è¿™äº›å·ç ï¼Œå³&lt;em>Alan çš„ç”µè¯å·ç &lt;/em>ã€‚è‰¾ä¼¦äº”å¹´å‰çš„ç”µè¯å·ç ä¸ä»Šå¤©çš„ç”µè¯å·ç æ˜¯ä¸åŒçš„æ•°å€¼ï¼Œä¸¤è€…æ˜¯è‰¾ä¼¦ç”µè¯å·ç èº«ä»½çš„ä¸¤ç§çŠ¶æ€ã€‚&lt;/p>
&lt;p>å½“ä½ è€ƒè™‘åˆ°åœ¨ä½ çš„ç¨‹åºä¸­ä½ æ˜¯åœ¨å¤„ç†å…³äºä¸–ç•Œçš„ä¿¡æ¯æ—¶ï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¸å…¶è¯´ä¿¡æ¯å‘ç”Ÿäº†å˜åŒ–ï¼Œä¸å¦‚è¯´ä½ æ”¶åˆ°äº†æ–°çš„ä¿¡æ¯ã€‚å‘¨äº”ä¸­åˆ 12 ç‚¹ï¼Œ&amp;ldquo;æŠ±æŠ±åƒµå°¸ &amp;ldquo;å¼—é›·å¾·å¤„äº 50%çš„è…çƒ‚çŠ¶æ€ã€‚åœ¨ä¸‹åˆ 1 ç‚¹ï¼Œä»–æ˜¯ 60%çš„è…çƒ‚ã€‚è¿™éƒ½æ˜¯ä½ å¯ä»¥å¤„ç†çš„äº‹å®ï¼Œå¼•å…¥ä¸€ä¸ªæ–°çš„äº‹å®å¹¶ä¸ä¼šä½¿ä»¥å‰çš„äº‹å®å¤±æ•ˆã€‚å³ä½¿å¼—é›·å¾·çš„è¡°å˜ç‡ä» 50%å¢åŠ åˆ° 60%ï¼Œä½†åœ¨ä¸‹åˆ 12:00 æ—¶ä»–å¤„äº 50%çš„è¡°å˜çŠ¶æ€ä»ç„¶æ˜¯äº‹å®ã€‚&lt;/p>
&lt;p>å›¾ 10-2 æ˜¾ç¤ºäº†ä½ å¯ä»¥å¦‚ä½•å°†ä»·å€¼ã€è¿‡ç¨‹ã€èº«ä»½å’ŒçŠ¶æ€å¯è§†åŒ–ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/zombie-metaphysics/fp-metaphysics.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 10-2ï¼šä»·å€¼ã€è¿‡ç¨‹ã€èº«ä»½å’ŒçŠ¶æ€&lt;/p>
&lt;p>è¿™äº›ä»·å€¼ä¸ä¼šç›¸äº’ä½œç”¨ï¼Œä¹Ÿä¸èƒ½è¢«æ”¹å˜ã€‚å®ƒä»¬ä¸èƒ½*åšä»»ä½•äº‹æƒ…ã€‚åªæœ‰åœ¨ä»¥ä¸‹æƒ…å†µä¸‹æ‰ä¼šå‘ç”Ÿå˜åŒ–ï¼šaï¼‰ä¸€ä¸ªè¿‡ç¨‹äº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„å€¼ï¼›bï¼‰æˆ‘ä»¬é€‰æ‹©å°†èº«ä»½ä¸æ–°çš„å€¼è”ç³»èµ·æ¥ã€‚&lt;/p>
&lt;p>ä¸ºäº†å¤„ç†è¿™ç§å˜åŒ–ï¼ŒClojure ä½¿ç”¨&lt;em>å‚è€ƒç±»å‹&lt;/em>ã€‚å‚è€ƒç±»å‹è®©ä½ åœ¨ Clojure ä¸­ç®¡ç†èº«ä»½ã€‚ä½¿ç”¨å®ƒä»¬ï¼Œä½ å¯ä»¥å‘½åä¸€ä¸ªèº«ä»½å¹¶æ£€ç´¢å…¶çŠ¶æ€ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å…¶ä¸­æœ€ç®€å•çš„ï¼Œ&lt;em>åŸå­&lt;/em>ã€‚&lt;/p>
&lt;h2 id="åŸå­">åŸå­&lt;/h2>
&lt;p>Clojure çš„åŸå­å¼•ç”¨ç±»å‹å…è®¸ä½ èµ‹äºˆä¸€è¿ä¸²çš„ç›¸å…³å€¼ä»¥èº«ä»½ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŸå­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def fred (atom {:cuddle-hunger-level 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :percent-deteriorated 0}))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„åŸå­ï¼Œå¹¶å°†å…¶ä¸åç§°&lt;code>fred&lt;/code>ç»‘å®šã€‚è¿™ä¸ªåŸå­*å¼•ç”¨äº†&lt;code>{:cuddle-hunger-level 0 :percent-deteriorated 0}&lt;/code>çš„å€¼ï¼Œä½ å¯ä»¥è¯´è¿™æ˜¯å®ƒçš„å½“å‰çŠ¶æ€ã€‚&lt;/p>
&lt;p>è¦å¾—åˆ°ä¸€ä¸ªåŸå­çš„å½“å‰çŠ¶æ€ï¼Œä½ è¦è§£é™¤å¯¹å®ƒçš„å¼•ç”¨ã€‚ä¸‹é¢æ˜¯ Fred çš„å½“å‰çŠ¶æ€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">@fred
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:cuddle-hunger-level 0, :percent-deteriorated 0}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸æœŸè´§ã€å»¶è¿Ÿå’Œæ‰¿è¯ºä¸åŒï¼Œè§£é™¤å¯¹åŸå­ï¼ˆæˆ–ä»»ä½•å…¶ä»–å¼•ç”¨ç±»å‹ï¼‰çš„å¼•ç”¨å°†æ°¸è¿œä¸ä¼šé˜»å¡ã€‚å½“ä½ è§£é™¤å¯¹æœŸè´§ã€å»¶è¿Ÿå’Œæ‰¿è¯ºçš„å¼•ç”¨æ—¶ï¼Œå°±åƒä½ åœ¨è¯´ &amp;ldquo;æˆ‘ç°åœ¨éœ€è¦ä¸€ä¸ªå€¼ï¼Œæˆ‘ä¼šä¸€ç›´ç­‰åˆ°æˆ‘å¾—åˆ°å®ƒ&amp;rdquo;ï¼Œæ‰€ä»¥è¿™ä¸ªæ“ä½œä¼šé˜»å¡æ˜¯åˆç†çš„ã€‚ç„¶è€Œï¼Œå½“ä½ è§£é™¤å¼•ç”¨ç±»å‹çš„å¼•ç”¨æ—¶ï¼Œå°±åƒä½ åœ¨è¯´ &amp;ldquo;ç»™æˆ‘æˆ‘ç°åœ¨å¼•ç”¨çš„å€¼&amp;rdquo;ï¼Œæ‰€ä»¥æ“ä½œä¸ä¼šé˜»å¡æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºå®ƒä¸éœ€è¦ç­‰å¾…ä»»ä½•ä¸œè¥¿ã€‚&lt;/p>
&lt;p>åœ¨æ¸…å• 10-1 ä¸­çš„ Ruby ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°å½“ä½ è¯•å›¾åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šè®°å½•æ•°æ®æ—¶ï¼Œå¯¹è±¡æ•°æ®å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å½“ä½¿ç”¨åŸå­æ¥ç®¡ç†çŠ¶æ€æ—¶å°±ä¸ä¼šå‘ç”Ÿè¿™ç§å±é™©ï¼Œå› ä¸ºæ¯ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸å¯æ”¹å˜çš„ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ç”¨&lt;code>println&lt;/code>æ¥è®°å½•ä¸€ä¸ªåƒµå°¸çš„çŠ¶æ€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [zombie-state @fred]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (&amp;gt;= (:percent-deteriorated zombie-state) 50)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (future (println (:cuddle-hunger-level zombie-state)))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¸…å• 10-1 ä¸­çš„ Ruby ä¾‹å­çš„é—®é¢˜æ˜¯ï¼Œå®ƒéœ€è¦ä¸¤æ­¥æ¥è¯»å–åƒµå°¸çš„ä¸¤ä¸ªå±æ€§ï¼Œè€Œå…¶ä»–çº¿ç¨‹å¯èƒ½åœ¨è¿™ä¸¤æ­¥ä¹‹é—´æ”¹å˜è¿™äº›å±æ€§ã€‚ç„¶è€Œï¼Œé€šè¿‡ä½¿ç”¨åŸå­æ¥å¼•ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼Œä½ åªéœ€è¦æ‰§è¡Œä¸€æ¬¡è¯»å–ï¼Œå¹¶ä¸”è¿”å›çš„æ•°æ®ç»“æ„ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹æ”¹å˜ã€‚&lt;/p>
&lt;p>è¦æ›´æ–°åŸå­ï¼Œä½¿å…¶æŒ‡å‘ä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>swap!&lt;/code>ã€‚è¿™ä¼¼ä¹æ˜¯çŸ›ç›¾çš„ï¼Œå› ä¸ºæˆ‘è¯´è¿‡ï¼ŒåŸå­å€¼æ˜¯ä¸å˜çš„ã€‚çš„ç¡®ï¼Œå®ƒä»¬æ˜¯ä¸å˜çš„ã€‚ä½†æ˜¯ç°åœ¨æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨åŸå­çš„&lt;em>å‚è€ƒç±»å‹&lt;/em>ï¼Œä¸€ä¸ªæŒ‡å‘åŸå­å€¼çš„ç»“æ„ã€‚åŸå­å€¼ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯å¼•ç”¨ç±»å‹å¯ä»¥è¢«æ›´æ–°å¹¶è¢«åˆ†é…ä¸€ä¸ªæ–°çš„å€¼ã€‚&lt;/p>
&lt;p>&lt;code>swap!&lt;/code>æ¥æ”¶ä¸€ä¸ªåŸå­å’Œä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚å®ƒå°†å‡½æ•°åº”ç”¨äºåŸå­çš„å½“å‰çŠ¶æ€ä»¥äº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ï¼Œç„¶åå®ƒæ›´æ–°åŸå­ä»¥å¼•ç”¨è¿™ä¸ªæ–°çš„å€¼ã€‚æ–°çš„å€¼ä¹Ÿè¢«è¿”å›ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•å°† Fred çš„æ‹¥æŠ±é¥¥é¥¿åº¦æé«˜ 1ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(swap! fred
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [current-state]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (merge-with + current-state {:cuddle-hunger-level 1})))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:cuddle-hunger-level 1, :percent-deteriorated 0}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å–æ¶ˆå¼•ç”¨&lt;code>fred&lt;/code>å°†è¿”å›æ–°çš„çŠ¶æ€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">@fred
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:cuddle-hunger-level 1, :percent-deteriorated 0}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ Ruby ä¸åŒï¼Œ&lt;code>fred&lt;/code>ä¸å¯èƒ½å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ï¼Œå› ä¸ºä½ å¯ä»¥åŒæ—¶æ›´æ–°é¥¥é¥¿åº¦å’Œæ¶åŒ–ç™¾åˆ†æ¯”ï¼Œåƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(swap! fred
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [current-state]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (merge-with + current-state {:cuddle-hunger-level 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :percent-deteriorated 1})))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:cuddle-hunger-level 2, :percent-deteriorated 1}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç ä¼ é€’ç»™&lt;code>swap!&lt;/code>ä¸€ä¸ªåªéœ€è¦ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œ&lt;code>current-state&lt;/code>ã€‚ä½ ä¹Ÿå¯ä»¥ä¼ é€’&lt;code>swap!&lt;/code>ä¸€ä¸ªéœ€è¦å¤šä¸ªå‚æ•°çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªéœ€è¦ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯åƒµå°¸çŠ¶æ€ï¼Œå¦ä¸€ä¸ªæ˜¯å¢åŠ å…¶æ‹¥æŠ±é¥¥é¥¿åº¦çš„æ•°é‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn increase-cuddle-hunger-level
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [zombie-state increase-by]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (merge-with + zombie-state {:cuddle-hunger-level increase-by}))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®©æˆ‘ä»¬åœ¨åƒµå°¸çŠ¶æ€ä¸‹å¿«é€Ÿæµ‹è¯•ä¸€ä¸‹&lt;code>increase-cuddle-hunger-level&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(increase-cuddle-hunger-level @fred 10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:cuddle-hunger-level 12, :percent-deteriorated 1}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œè¿™æ®µä»£ç å®é™…ä¸Šå¹¶æ²¡æœ‰æ›´æ–°&lt;code>fred&lt;/code>ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨&lt;code>swap!&lt;/code>ï¼Œæˆ‘ä»¬åªæ˜¯å¯¹&lt;code>increase-cuddle-&lt;/code>hunger&lt;code>-level&lt;/code>åšäº†ä¸€ä¸ªæ­£å¸¸çš„å‡½æ•°è°ƒç”¨ï¼Œå®ƒè¿”å›ä¸€ä¸ªç»“æœã€‚&lt;/p>
&lt;p>ç°åœ¨ç”¨é™„åŠ å‚æ•°è°ƒç”¨&lt;code>swap!&lt;/code>ï¼Œ&lt;code>@fred&lt;/code>å°†è¢«æ›´æ–°ï¼Œå°±åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(swap! fred increase-cuddle-hunger-level 10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:cuddle-hunger-level 12, :percent-deteriorated 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@fred
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:cuddle-hunger-level 12, :percent-deteriorated 1}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ä½ å¯ä»¥ç”¨ Clojure çš„å†…ç½®å‡½æ•°æ¥è¡¨è¾¾æ•´ä¸ªäº‹æƒ…ã€‚&lt;code>update-in&lt;/code>å‡½æ•°éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼šä¸€ä¸ªé›†åˆï¼Œä¸€ä¸ªç”¨äºè¯†åˆ«è¦æ›´æ–°çš„å€¼çš„ Vectorï¼Œä»¥åŠä¸€ä¸ªæ›´æ–°è¯¥å€¼çš„å‡½æ•°ã€‚å®ƒè¿˜å¯ä»¥æ¥å—é¢å¤–çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°å°†è¢«ä¼ é€’ç»™æ›´æ–°å‡½æ•°ã€‚ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(update-in {:a {:b 3}} [:a :b] inc)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:a {:b 4}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(update-in {:a {:b 3}} [:a :b] + 10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:a {:b 13}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä½ æ­£åœ¨æ›´æ–° Map&lt;code>{:a {:b 3}}ã€‚Clojureä½¿ç”¨Vector&lt;/code>[:a :b]&lt;code>æ¥éå†åµŒå¥—å›¾ï¼›&lt;/code>:a&lt;code>äº§ç”ŸåµŒå¥—å›¾&lt;/code>{:b 3}&lt;code>ï¼Œ&lt;/code>:b&lt;code>äº§ç”Ÿå€¼&lt;/code>3&lt;code>ã€‚Clojureå°†&lt;/code>inc&lt;code>å‡½æ•°åº”ç”¨äº&lt;/code>3&lt;code>ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›¿æ¢äº†&lt;/code>3`çš„æ–° Mapã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨&lt;code>update-in&lt;/code>å‡½æ•°æ¥æ”¹å˜ Fred çš„çŠ¶æ€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(swap! fred update-in [:cuddle-hunger-level] + 10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:cuddle-hunger-level 22, : percent-deteriorated 1}.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ä½¿ç”¨åŸå­ï¼Œä½ å¯ä»¥ä¿ç•™è¿‡å»çš„çŠ¶æ€ã€‚ä½ å¯ä»¥è§£é™¤å¼•ç”¨ä¸€ä¸ªåŸå­æ¥æ£€ç´¢çŠ¶æ€ 1ï¼Œç„¶åæ›´æ–°è¯¥åŸå­ï¼Œåˆ›å»ºçŠ¶æ€ 2ï¼Œå¹¶ä»ç„¶ä½¿ç”¨çŠ¶æ€ 1ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [num (atom 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> s1 @num]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (swap! num inc)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;State 1:&amp;#34; s1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Current state:&amp;#34; @num))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; State 1: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Current state: 2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ªåä¸º &amp;ldquo;num &amp;ldquo;çš„åŸå­ï¼Œæ£€ç´¢å…¶çŠ¶æ€ï¼Œæ›´æ–°å…¶çŠ¶æ€ï¼Œç„¶åæ‰“å°å…¶è¿‡å»çš„çŠ¶æ€å’Œå½“å‰çš„çŠ¶æ€ï¼Œè¡¨æ˜å½“æˆ‘è¯´ä½ å¯ä»¥ä¿ç•™è¿‡å»çš„çŠ¶æ€æ—¶ï¼Œæˆ‘å¹¶ä¸æ˜¯è¦æ¬ºéª—ä½ ï¼Œå› æ­¤ä½ å¯ä»¥ä¿¡ä»»æˆ‘æ‰€æœ‰çš„ä¸œè¥¿&amp;ndash;åŒ…æ‹¬ä½ çš„çœŸå®å§“åï¼Œæˆ‘ä¿è¯åªè¯´å‡ºä½ çš„çœŸå®å§“åï¼Œä»¥æ‹¯æ•‘ä½ è„±ç¦»è‡´å‘½çš„å±é™©ã€‚&lt;/p>
&lt;p>è¿™ä¸€åˆ‡éƒ½å¾ˆæœ‰è¶£ï¼Œä½†å¦‚æœä¸¤ä¸ªç‹¬ç«‹çš„çº¿ç¨‹è°ƒç”¨&amp;rdquo;ï¼ˆäº¤æ¢ï¼å¼—é›·å¾·å¢åŠ -æ‹¥æŠ±-é¥¥é¥¿ç­‰çº§ 1ï¼‰&amp;ldquo;ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ˜¯å¦æœ‰å¯èƒ½åƒæ¸…å• 10-1 ä¸­çš„ Ruby ä¾‹å­é‚£æ ·ï¼Œå…¶ä¸­ä¸€ä¸ªå¢é‡è¢«ä¸¢å¤±ï¼Ÿ&lt;/p>
&lt;p>ç­”æ¡ˆæ˜¯å¦å®šçš„!Â &lt;code>swap!&lt;/code>å®ç°äº†&lt;em>æ¯”è¾ƒå’Œè®¾ç½®&lt;/em>çš„è¯­ä¹‰ï¼Œæ„å‘³ç€å®ƒåœ¨å†…éƒ¨åšäº†ä»¥ä¸‹å·¥ä½œã€‚&lt;/p>
&lt;ol>
&lt;li>å®ƒè¯»å–åŸå­çš„å½“å‰çŠ¶æ€ã€‚&lt;/li>
&lt;li>ç„¶åå°†æ›´æ–°å‡½æ•°åº”ç”¨äºè¯¥çŠ¶æ€ã€‚&lt;/li>
&lt;li>æ¥ä¸‹æ¥ï¼Œå®ƒæ£€æŸ¥å®ƒåœ¨æ­¥éª¤ 1 ä¸­è¯»å–çš„å€¼æ˜¯å¦ä¸åŸå­çš„å½“å‰å€¼ç›¸åŒã€‚&lt;/li>
&lt;li>å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆ&lt;code>swap!&lt;/code>å°±æ›´æ–°åŸå­ä»¥å¼•ç”¨æ­¥éª¤ 2 çš„ç»“æœã€‚&lt;/li>
&lt;li>å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆ&lt;code>swap!&lt;/code>é‡è¯•ï¼Œä»ç¬¬ 1 æ­¥å¼€å§‹å†æ¬¡ç»å†è¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¿™ä¸ªè¿‡ç¨‹ä¿è¯äº†æ²¡æœ‰äº¤æ¢ä¼šä¸¢å¤±ã€‚&lt;/p>
&lt;p>å…³äº&lt;code>swap!&lt;/code>éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼ŒåŸå­æ›´æ–°æ˜¯åŒæ­¥å‘ç”Ÿçš„ï¼›å®ƒä»¬å°†é˜»å¡å…¶çº¿ç¨‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æ›´æ–°å‡½æ•°ç”±äºæŸç§åŸå› è°ƒç”¨äº†&lt;code>Thread/sleep 1000&lt;/code>ï¼Œé‚£ä¹ˆå½“&lt;code>swap!&lt;/code>å®Œæˆæ—¶ï¼Œçº¿ç¨‹å°†é˜»å¡è‡³å°‘ä¸€ç§’é’Ÿã€‚&lt;/p>
&lt;p>æœ‰æ—¶ä½ ä¼šæƒ³æ›´æ–°ä¸€ä¸ªåŸå­è€Œä¸æ£€æŸ¥å®ƒçš„å½“å‰å€¼ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šå¼€å‘ä¸€ç§è¡€æ¸…ï¼Œå°†ä¸€ä¸ªæŠ±æ•åƒµå°¸çš„é¥¥é¥¿åº¦å’Œæ¶åŒ–åº¦è®¾ç½®ä¸ºé›¶ã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>reset!&lt;/code>å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(reset! fred {:cuddle-hunger-level 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :percent-deteriorated 0})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±æ¶µç›–äº† atoms çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½! æ€»ç»“ä¸€ä¸‹ï¼šåŸå­å®ç°äº† Clojure çš„çŠ¶æ€æ¦‚å¿µã€‚å®ƒä»¬å…è®¸ä½ ä¸ºä¸€ç³»åˆ—ä¸å¯å˜çš„å€¼èµ‹äºˆä¸€ä¸ªèº«ä»½ã€‚å®ƒä»¬é€šè¿‡æ¯”è¾ƒå’Œè®¾ç½®è¯­ä¹‰ä¸ºå¼•ç”¨å•å…ƒå’Œäº’æ–¥é—®é¢˜æä¾›äº†è§£å†³æ–¹æ¡ˆã€‚å®ƒä»¬è¿˜å…è®¸ä½ å¤„ç†è¿‡å»çš„çŠ¶æ€ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå®ƒä»¬ä¼šåœ¨åŸåœ°å˜å¼‚ã€‚&lt;/p>
&lt;p>é™¤äº†è¿™äº›æ ¸å¿ƒç‰¹æ€§å¤–ï¼ŒåŸå­è¿˜ä¸å…¶ä»–å¼•ç”¨ç±»å‹å…±äº«ä¸¤ä¸ªç‰¹æ€§ã€‚ä½ å¯ä»¥åœ¨åŸå­ä¸Šé™„åŠ &lt;em>watches&lt;/em>å’Œ&lt;em>validators&lt;/em>ã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›ã€‚&lt;/p>
&lt;h2 id="æ‰‹è¡¨å’ŒéªŒè¯å™¨">æ‰‹è¡¨å’ŒéªŒè¯å™¨&lt;/h2>
&lt;p>è§‚å¯Ÿå™¨å…è®¸ä½ è¶…çº§çŒ¥çåœ°æ£€æŸ¥ä½ çš„å‚è€ƒç±»å‹çš„ä¸€ä¸¾ä¸€åŠ¨ã€‚éªŒè¯å™¨å…è®¸ä½ æœ‰è¶…å¼ºçš„æ§åˆ¶åŠ›ï¼Œé™åˆ¶å“ªäº›çŠ¶æ€æ˜¯å¯ä»¥å…è®¸çš„ã€‚é’Ÿè¡¨å’ŒéªŒè¯å™¨éƒ½æ˜¯æ™®é€šçš„å‡½æ•°ã€‚&lt;/p>
&lt;h3 id="æ‰‹è¡¨">æ‰‹è¡¨&lt;/h3>
&lt;p>ä¸€ä¸ª&lt;em>watch&lt;/em>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒéœ€è¦å››ä¸ªå‚æ•°ï¼šä¸€ä¸ªé”®ï¼Œè¢«ç›‘è§†çš„å¼•ç”¨ï¼Œå®ƒçš„å‰ä¸€ä¸ªçŠ¶æ€ï¼Œä»¥åŠå®ƒçš„æ–°çŠ¶æ€ã€‚ä½ å¯ä»¥ä¸ºä¸€ä¸ªå¼•ç”¨ç±»å‹æ³¨å†Œä»»æ„æ•°é‡çš„æ‰‹è¡¨ã€‚&lt;/p>
&lt;p>æ¯”æ–¹è¯´ï¼Œä¸€ä¸ªåƒµå°¸çš„æ´—ç‰Œé€Ÿåº¦ï¼ˆä»¥æ¯å°æ—¶æ´—ç‰Œæ¬¡æ•°è¡¡é‡ï¼Œæˆ–ç§° SPHï¼‰å–å†³äºå…¶é¥¥é¥¿ç¨‹åº¦å’Œæ¶åŒ–ç¨‹åº¦ã€‚ä¸‹é¢æ˜¯ä½ çš„è®¡ç®—æ–¹æ³•ï¼Œç”¨æ‹¥æŠ±çš„é¥¥é¥¿ç¨‹åº¦ä¹˜ä»¥å®ƒçš„å®Œæ•´ç¨‹åº¦ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn shuffle-speed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [zombie]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (* (:cuddle-hunger-level zombie)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (- 100 (:percent-deteriorated zombie))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬è¿˜å¯ä»¥è¯´ï¼Œæ¯å½“åƒµå°¸çš„æ´—ç‰Œé€Ÿåº¦è¾¾åˆ° 5000SPH çš„å±é™©æ°´å¹³æ—¶ï¼Œä½ éƒ½æƒ³å¾—åˆ°æé†’ã€‚å¦åˆ™ï¼Œä½ æƒ³è¢«å‘ŠçŸ¥ä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè§‚å¯Ÿå‡½æ•°ï¼Œä½ å¯ä»¥ç”¨æ¥åœ¨ SPH è¶…è¿‡ 5000 æ—¶æ‰“å°ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ï¼Œå¦åˆ™æ‰“å°ä¸€ä¸ªä¸€åˆ‡æ­£å¸¸çš„ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn shuffle-alert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [key watched old-state new-state]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [sph (shuffle-speed new-state)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (&amp;gt; sph 5000)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Run, you fool!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;The zombie&amp;#39;s SPH is now &amp;#34; sph)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;This message brought to your courtesy of &amp;#34; key))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;All&amp;#39;s well with &amp;#34; key)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Cuddle hunger: &amp;#34; (:cuddle-hunger-level new-state))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Percent deteriorated: &amp;#34; (:percent-deteriorated new-state))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;SPH: &amp;#34; sph)))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è§‚å¯Ÿå‡½æ•°æœ‰å››ä¸ªå‚æ•°ï¼šä¸€ä¸ªå¯ä»¥ç”¨æ¥æŠ¥å‘Šçš„é”®ï¼Œè¢«è§‚å¯Ÿçš„åŸå­ï¼ŒåŸå­æ›´æ–°å‰çš„çŠ¶æ€ï¼Œä»¥åŠåŸå­æ›´æ–°åçš„çŠ¶æ€ã€‚è¿™ä¸ªè§‚å¯Ÿå‡½æ•°è®¡ç®—æ–°çŠ¶æ€çš„æ´—ç‰Œé€Ÿåº¦ï¼Œå¦‚æœå®ƒè¿‡é«˜ï¼Œå°±æ‰“å°ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ï¼Œå½“æ´—ç‰Œé€Ÿåº¦å®‰å…¨æ—¶ï¼Œå°±æ‰“å°ä¸€ä¸ªä¸€åˆ‡æ­£å¸¸çš„ä¿¡æ¯ï¼Œå¦‚ä¸Šæ‰€è¿°ã€‚åœ¨è¿™ä¸¤ç»„ä¿¡æ¯ä¸­ï¼Œ&lt;code>key&lt;/code>è¢«ç”¨æ¥è®©ä½ çŸ¥é“ä¿¡æ¯çš„æ¥æºã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥ç”¨&lt;code>add-watch&lt;/code>æŠŠè¿™ä¸ªå‡½æ•°é™„åŠ åˆ°&lt;code>fred&lt;/code>ä¸Šã€‚&lt;code>add-watch&lt;/code>çš„ä¸€èˆ¬å½¢å¼æ˜¯&lt;code>ï¼ˆadd-watch&lt;/code> ref key watch-fn&lt;code>ï¼‰&lt;/code>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¦é‡ç½®&lt;code>fred&lt;/code>çš„çŠ¶æ€ï¼Œæ·»åŠ &lt;code>shuffle-alert&lt;/code>çš„è§‚å¯Ÿå‡½æ•°ï¼Œç„¶åå¤šæ¬¡æ›´æ–°&lt;code>fred&lt;/code>çš„çŠ¶æ€ä»¥è§¦å‘&lt;code>shuffle-alert&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(reset! fred {:cuddle-hunger-level 22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :percent-deteriorated 2})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(add-watch fred :fred-shuffle-alert shuffle-alert)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(swap! fred update-in [:percent-deteriorated] + 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; All&amp;#39;s well with :fred-shuffle-alert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Cuddle hunger: 22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Percent deteriorated: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; SPH: 2134
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(swap! fred update-in [:cuddle-hunger-level] + 30)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Run, you fool!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; The zombie&amp;#39;s SPH is now 5044
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; This message brought to your courtesy of :fred-shuffle-alert
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªè§‚å¯Ÿå‡½æ•°çš„ä¾‹å­æ²¡æœ‰ä½¿ç”¨&lt;code>watched&lt;/code>æˆ–&lt;code>old-state&lt;/code>ï¼Œä½†å¦‚æœæœ‰éœ€è¦ï¼Œå®ƒä»¬å°±åœ¨é‚£é‡Œã€‚ç°åœ¨æˆ‘ä»¬æ¥è°ˆè°ˆéªŒè¯å™¨ã€‚&lt;/p>
&lt;h3 id="éªŒè¯å™¨">éªŒè¯å™¨&lt;/h3>
&lt;p>&lt;em>éªŒè¯å™¨&lt;/em>å¯ä»¥è®©ä½ æŒ‡å®šä¸€ä¸ªå¼•ç”¨å¯ä»¥æœ‰å“ªäº›çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªéªŒè¯å™¨ï¼Œä½ å¯ä»¥ç”¨æ¥ç¡®ä¿ä¸€ä¸ªåƒµå°¸çš„&lt;code>:%-deteriorated&lt;/code>åœ¨ 0 åˆ° 100 ä¹‹é—´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn percent-deteriorated-validator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [{:keys [percent-deteriorated]}]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (and (&amp;gt;= percent-deteriorated 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;lt;= percent-deteriorated 100)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼ŒéªŒè¯å™¨åªéœ€è¦ä¸€ä¸ªå‚æ•°ã€‚å½“ä½ ç»™ä¸€ä¸ªå¼•ç”¨æ·»åŠ éªŒè¯å™¨æ—¶ï¼Œè¯¥å¼•ç”¨è¢«ä¿®æ”¹ï¼Œè¿™æ ·ï¼Œæ¯å½“å®ƒè¢«æ›´æ–°æ—¶ï¼Œå®ƒå°†è°ƒç”¨è¿™ä¸ªéªŒè¯å™¨ï¼Œå¹¶å°†æ›´æ–°å‡½æ•°è¿”å›çš„å€¼ä½œä¸ºå…¶å‚æ•°ã€‚å¦‚æœéªŒè¯å™¨å› è¿”å› &amp;ldquo;false &amp;ldquo;æˆ–æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸è€Œå¤±è´¥ï¼Œå¼•ç”¨å°†ä¸ä¼šæ”¹å˜ä»¥æŒ‡å‘æ–°çš„å€¼ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥åœ¨åˆ›å»ºåŸå­æ—¶é™„åŠ ä¸€ä¸ªéªŒè¯å™¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def bobby
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (atom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:cuddle-hunger-level 0 :percent-deteriorated 0}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :validator percent-deteriorated-validator))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(swap! bobby update-in [:percent-deteriorated] + 200)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; This throws &amp;#34;Invalid reference state&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>percent-deteriorated-validator&lt;/code>è¿”å›&lt;code>false&lt;/code>ï¼ŒåŸå­æ›´æ–°å¤±è´¥ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œä»¥è·å¾—ä¸€ä¸ªæ›´å…·æè¿°æ€§çš„é”™è¯¯ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn percent-deteriorated-validator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [{:keys [percent-deteriorated]}]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (or (and (&amp;gt;= percent-deteriorated 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;lt;= percent-deteriorated 100))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (throw (IllegalStateException. &amp;#34;That&amp;#39;s not mathy!&amp;#34;))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def bobby
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (atom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:cuddle-hunger-level 0 :percent-deteriorated 0}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :validator percent-deteriorated-validator))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(swap! bobby update-in [:percent-deteriorated] + 200)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; This throws &amp;#34;IllegalStateException: That&amp;#39;s not mathy!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“ä¸é”™! ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹è£åˆ¤ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/zombie-metaphysics/sock-gnome.png"
loading="lazy"
>&lt;/p>
&lt;p>åŸå­æ˜¯ç®¡ç†ç‹¬ç«‹èº«ä»½çŠ¶æ€çš„ç†æƒ³é€‰æ‹©ã€‚ä½†æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¡¨è¾¾ä¸€ä¸ªäº‹ä»¶åº”è¯¥åŒæ—¶æ›´æ–°ä¸€ä¸ªä»¥ä¸Šçš„èº«ä»½çš„çŠ¶æ€ã€‚Â &lt;em>Refs&lt;/em>æ˜¯è¿™ç§æƒ…å†µä¸‹çš„å®Œç¾å·¥å…·ã€‚&lt;/p>
&lt;p>ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯è®°å½• sock gnome äº¤æ˜“ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¢œå­ä¾å„’ä»ä¸–ç•Œå„åœ°çš„æ¯ä¸€ä¸ªå¹²è¡£æœºä¸­å–å‡ºä¸€åªè¢œå­ã€‚ä»–ä»¬ç”¨è¿™äº›è¢œå­æ¥å­µåŒ–ä»–ä»¬çš„å­©å­ã€‚ä½œä¸ºå¯¹è¿™ç§*&amp;quot;*ç¤¼ç‰© &amp;ldquo;çš„å›æŠ¥ï¼Œè¢œå­åœ°ç²¾ä¿æŠ¤ä½ çš„å®¶ä¸è¢« El Chupacabra å…¥ä¾µã€‚å¦‚æœä½ æœ€è¿‘æ²¡æœ‰è¢« El Chupacabra æ‹œè®¿ï¼Œä½ è¦æ„Ÿè°¢è¢œå­ä¾å„’ã€‚&lt;/p>
&lt;p>ä¸ºäº†å»ºç«‹è¢œå­è½¬ç§»çš„æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦è¡¨è¾¾çš„æ˜¯ï¼Œä¸€ä¸ªçƒ˜å¹²æœºå¤±å»äº†ä¸€åªè¢œå­ï¼Œä¸€ä¸ªåœ°ç²¾åŒæ—¶å¾—åˆ°äº†ä¸€åªè¢œå­ã€‚è¿™ä¸€åˆ»ï¼Œè¢œå­å±äºçƒ˜å¹²æœºï¼›ä¸‹ä¸€åˆ»ï¼Œå®ƒå±äºåœ°ç²¾ã€‚è¿™åªè¢œå­ä¸åº”è¯¥åŒæ—¶å±äºçƒ˜å¹²æœºå’Œä¾å„’ï¼Œä¹Ÿä¸åº”è¯¥åŒæ—¶å±äºè¿™ä¸¤ä¸ªäººã€‚&lt;/p>
&lt;h3 id="ä¸ºè¢œå­è½¬ç§»å»ºæ¨¡">ä¸ºè¢œå­è½¬ç§»å»ºæ¨¡&lt;/h3>
&lt;p>ä½ å¯ä»¥ç”¨ refs æ¥æ¨¡æ‹Ÿè¿™ä¸ª sock ä¼ è¾“ã€‚Refs å…è®¸ä½ ä½¿ç”¨äº‹åŠ¡è¯­ä¹‰æ¥æ›´æ–°å¤šä¸ªèº«ä»½çš„çŠ¶æ€ã€‚è¿™äº›äº¤æ˜“æœ‰ä¸‰ä¸ªç‰¹ç‚¹ã€‚&lt;/p>
&lt;ul>
&lt;li>å®ƒä»¬æ˜¯&lt;em>åŸå­æ€§çš„&lt;/em>ï¼Œæ„å‘³ç€æ‰€æœ‰çš„å‚è€ƒæ–‡çŒ®éƒ½è¢«æ›´æ–°ï¼Œæˆ–è€…éƒ½ä¸è¢«æ›´æ–°ã€‚&lt;/li>
&lt;li>å®ƒä»¬æ˜¯&lt;em>ä¸€è‡´çš„&lt;/em>ï¼Œè¿™æ„å‘³ç€å¼•ç”¨æ€»æ˜¯æ˜¾ç¤ºä¸ºæœ‰æ•ˆçš„çŠ¶æ€ã€‚ä¸€ä¸ª sock æ€»æ˜¯å±äºä¸€ä¸ª dryer æˆ–ä¸€ä¸ª gnomeï¼Œä½†ç»ä¸æ˜¯ä¸¤è€…éƒ½å±äºã€‚&lt;/li>
&lt;li>å®ƒä»¬æ˜¯&lt;em>éš”ç¦»çš„&lt;/em>ï¼Œè¿™æ„å‘³ç€äº‹åŠ¡çš„è¡Œä¸ºå°±åƒå®ƒä»¬æ˜¯è¿ç»­æ‰§è¡Œçš„ä¸€æ ·ï¼›å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œæ”¹å˜åŒä¸€å‚è€ƒä¿¡æ¯çš„äº‹åŠ¡ï¼Œä¸€ä¸ªäº‹åŠ¡å°†é‡è¯•ã€‚è¿™ç±»ä¼¼äºåŸå­çš„æ¯”è¾ƒå’Œè®¾ç½®è¯­ä¹‰ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä½ å¯èƒ½è®¤è¯†åˆ°è¿™äº›æ˜¯æ•°æ®åº“äº‹åŠ¡çš„ ACID å±æ€§ä¸­çš„&lt;em>A&lt;/em>ã€&lt;em>C&lt;/em>å’Œ&lt;em>I&lt;/em>ã€‚ä½ å¯ä»¥è®¤ä¸º Refs ç»™ä½ æä¾›äº†ä¸æ•°æ®åº“äº‹åŠ¡ç›¸åŒçš„å¹¶å‘å®‰å…¨æ€§ï¼Œåªæ˜¯åœ¨å†…å­˜ä¸­çš„æ•°æ®ã€‚&lt;/p>
&lt;p>Clojure ä½¿ç”¨*è½¯ä»¶äº‹åŠ¡æ€§å†…å­˜ï¼ˆSTMï¼‰*æ¥å®ç°è¿™ç§è¡Œä¸ºã€‚STM éå¸¸é…·ï¼Œä½†å½“ä½ å¼€å§‹ä½¿ç”¨ Clojure æ—¶ï¼Œä½ ä¸éœ€è¦å¯¹å®ƒäº†è§£å¤ªå¤šï¼›ä½ åªéœ€è¦çŸ¥é“å¦‚ä½•ä½¿ç”¨å®ƒï¼Œè¿™å°±æ˜¯æœ¬èŠ‚è¦å‘Šè¯‰ä½ çš„ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬å¼€å§‹è½¬ç§»ä¸€äº›è¢œå­å§! é¦–å…ˆï¼Œä½ éœ€è¦ç¼–ç ä¸€äº›è¢œå­å’Œ gnome çš„åˆ›å»ºæŠ€æœ¯ã€‚ä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€äº›è¢œå­å“ç§ï¼Œç„¶åå®šä¹‰äº†å‡ ä¸ªè¾…åŠ©å‡½æ•°ã€‚Â &lt;code>sock-count'å°†è¢«ç”¨æ¥å¸®åŠ©è®°å½•æ¯ä¸€ç§è¢œå­æœ‰å¤šå°‘åªå±äºåœ°ç²¾æˆ–çƒ˜å¹²æœºï¼Œè€Œ&lt;/code>generate-sock-gnome&amp;rsquo;å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ã€æ²¡æœ‰è¢œå­çš„åœ°ç²¾ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def sock-varieties
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #{&amp;#34;darned&amp;#34; &amp;#34;argyle&amp;#34; &amp;#34;wool&amp;#34; &amp;#34;horsehair&amp;#34; &amp;#34;mulleted&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;passive-aggressive&amp;#34; &amp;#34;striped&amp;#34; &amp;#34;polka-dotted&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;athletic&amp;#34; &amp;#34;business&amp;#34; &amp;#34;power&amp;#34; &amp;#34;invisible&amp;#34; &amp;#34;gollumed&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn sock-count
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [sock-variety count]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:variety sock-variety
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :count count})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn generate-sock-gnome
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Create an initial sock gnome state with no socks&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [name]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :socks #{}})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ å¯ä»¥åˆ›å»ºä½ çš„å®é™…å‚ç…§ç‰©äº†ã€‚ä¾å„’å°†æœ‰ 0 åªè¢œå­ã€‚å¦ä¸€æ–¹é¢ï¼Œçƒ˜å¹²æœºå°†æœ‰ä¸€ç»„ç”±è¢œå­å“ç§é›†ç”Ÿæˆçš„è¢œå­å¯¹ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„å‚è€ƒæ–‡çŒ®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def sock-gnome (ref (generate-sock-gnome &amp;#34;Barumpharumph&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def dryer (ref {:name &amp;#34;LG 1337&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :socks (set (map #(sock-count % 2) sock-varieties))}))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥åƒè§£é™¤å¯¹åŸå­çš„å¼•ç”¨ä¸€æ ·è§£é™¤å¯¹ ref çš„å¼•ç”¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ çš„è¢œå­çš„é¡ºåºå¯èƒ½ä¼šä¸åŒï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªæ— åºçš„é›†åˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(:socks @dryer)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #{{:variety &amp;#34;passive-aggressive&amp;#34;, :count 2} {:variety &amp;#34;power&amp;#34;, :count 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:variety &amp;#34;athletic&amp;#34;, :count 2} {:variety &amp;#34;business&amp;#34;, :count 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:variety &amp;#34;argyle&amp;#34;, :count 2} {:variety &amp;#34;horsehair&amp;#34;, :count 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:variety &amp;#34;gollumed&amp;#34;, :count 2} {:variety &amp;#34;darned&amp;#34;, :count 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:variety &amp;#34;polka-dotted&amp;#34;, :count 2} {:variety &amp;#34;wool&amp;#34;, :count 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:variety &amp;#34;mulleted&amp;#34;, :count 2} {:variety &amp;#34;striped&amp;#34;, :count 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:variety &amp;#34;invisible&amp;#34;, :count 2}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ï¼Œå¯ä»¥è¿›è¡Œè½¬ç§»äº†ã€‚æˆ‘ä»¬è¦ä¿®æ”¹&lt;code>sock-gnome&lt;/code>å‚æ•°ï¼Œä»¥æ˜¾ç¤ºå®ƒè·å¾—äº†ä¸€åªè¢œå­ï¼Œå¹¶ä¿®æ”¹&lt;code>dryer&lt;/code>å‚æ•°ï¼Œä»¥æ˜¾ç¤ºå®ƒå¤±å»äº†ä¸€åªè¢œå­ã€‚ä½ ç”¨&lt;code>alter'æ¥ä¿®æ”¹å¼•ç”¨ï¼Œè€Œä¸”ä½ å¿…é¡»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ä½¿ç”¨&lt;/code>alter&amp;rsquo;ã€‚Â &lt;code>dosync&lt;/code>å¯åŠ¨ä¸€ä¸ªäº‹åŠ¡å¹¶å®šä¹‰å…¶èŒƒå›´ï¼›ä½ æŠŠæ‰€æœ‰çš„äº‹åŠ¡æ“ä½œæ”¾åœ¨å…¶ä¸»ä½“ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›å·¥å…·æ¥å®šä¹‰ä¸€ä¸ª`steal-sock&amp;rsquo;å‡½æ•°ï¼Œç„¶ååœ¨æˆ‘ä»¬çš„ä¸¤ä¸ªå‚è€ƒæ–‡ä»¶ä¸Šè°ƒç”¨å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn steal-sock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [gnome dryer]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (dosync
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (when-let [pair (some #(if (= (:count %) 2) %) (:socks @dryer))]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [updated-count (sock-count (:variety pair) 1)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (alter gnome update-in [:socks] conj updated-count)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (alter dryer update-in [:socks] disj pair)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (alter dryer update-in [:socks] conj updated-count)))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(steal-sock sock-gnome dryer)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(:socks @sock-gnome)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #{{:variety &amp;#34;passive-aggressive&amp;#34;, :count 1}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨å›¢å­æœ‰ä¸€åªè¢«åŠ¨æ”»å‡»å‹çš„è¢œå­ï¼Œè€Œçƒ˜å¹²æœºå°‘äº†ä¸€åªï¼ˆä½ çš„å›¢å­å¯èƒ½å·äº†ä¸€åªä¸åŒçš„è¢œå­ï¼Œå› ä¸ºè¢œå­æ˜¯ä»¥æ— åºçš„æ–¹å¼å­˜å‚¨çš„ï¼‰ã€‚è®©æˆ‘ä»¬ç¡®ä¿æ‰€æœ‰è¢«åŠ¨æ”»å‡»çš„è¢œå­éƒ½è¢«è®¡ç®—åœ¨å†…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn similar-socks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [target-sock sock-set]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (filter #(= (:variety %) (:variety target-sock)) sock-set))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(similar-socks (first (:socks @sock-gnome)) (:socks @dryer))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ({:variety &amp;#34;passive-aggressive&amp;#34;, :count 1})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæœ‰å‡ ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ï¼šå½“ä½ &lt;code>æ”¹å˜&lt;/code>ä¸€ä¸ªå¼•ç”¨æ—¶ï¼Œè¿™ä¸ªæ”¹å˜åœ¨å½“å‰äº‹åŠ¡ä¹‹å¤–å¹¶ä¸ç«‹å³å¯è§ã€‚è¿™ä½¿å¾—ä½ å¯ä»¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­å¯¹&lt;code>dryer&lt;/code>è°ƒç”¨&lt;code>alter&lt;/code>ä¸¤æ¬¡ï¼Œè€Œä¸ç”¨æ‹…å¿ƒ&lt;code>dryer&lt;/code>ä¼šåœ¨ä¸ä¸€è‡´çš„çŠ¶æ€ä¸‹è¢«è¯»å–ã€‚åŒæ ·çš„ï¼Œå¦‚æœä½ &lt;code>æ”¹å˜&lt;/code>ä¸€ä¸ªå¼•ç”¨ï¼Œç„¶ååœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­&lt;code>deref&lt;/code>å®ƒï¼Œ&lt;code>deref&lt;/code>å°†è¿”å›æ–°çš„çŠ¶æ€ã€‚&lt;/p>
&lt;p>è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­æ¥è¯æ˜è¿™ä¸ªäº¤æ˜“ä¸­çŠ¶æ€çš„æƒ³æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def counter (ref 0))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(future
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (dosync
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (alter counter inc)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println @counter)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Thread/sleep 500)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (alter counter inc)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println @counter)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(Thread/sleep 250)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(println @counter)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°†ä¾æ¬¡æ‰“å°å‡º 1ã€0 å’Œ 2ã€‚é¦–å…ˆï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªå¼•ç”¨ï¼Œ&lt;code>counter&lt;/code>ï¼Œç”¨æ¥ä¿å­˜æ•°å­— 0ã€‚ç„¶åä½ ç”¨&lt;code>future&lt;/code>åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥è¿è¡Œä¸€ä¸ªäº‹åŠ¡ã€‚åœ¨äº‹åŠ¡çº¿ç¨‹ä¸­ï¼Œä½ å¢åŠ è®¡æ•°å™¨å¹¶æ‰“å°å®ƒï¼Œç„¶åæ•°å­— 1 è¢«æ‰“å°å‡ºæ¥ã€‚åŒæ—¶ï¼Œä¸»çº¿ç¨‹ç­‰å¾…äº† 250 æ¯«ç§’ï¼Œä¹Ÿæ‰“å°äº†è®¡æ•°å™¨çš„å€¼ã€‚ç„¶è€Œï¼Œä¸»çº¿ç¨‹ä¸Šçš„è®¡æ•°å™¨çš„å€¼ä»ç„¶æ˜¯ 0&amp;ndash;ä¸»çº¿ç¨‹æ˜¯åœ¨äº‹åŠ¡ä¹‹å¤–çš„ï¼Œä¸èƒ½è®¿é—®äº‹åŠ¡çš„çŠ¶æ€ã€‚è¿™å°±åƒäº‹åŠ¡æœ‰è‡ªå·±çš„ç§æœ‰åŒºåŸŸï¼Œç”¨äºå°è¯•å¯¹çŠ¶æ€çš„æ”¹å˜ï¼Œè€Œä¸–ç•Œä¸Šçš„å…¶ä»–äººåœ¨äº‹åŠ¡å®Œæˆä¹‹å‰ä¸èƒ½çŸ¥é“å®ƒä»¬ã€‚è¿™åœ¨äº‹åŠ¡ä»£ç ä¸­å¾—åˆ°äº†è¿›ä¸€æ­¥è¯´æ˜ï¼šåœ¨å®ƒç¬¬ä¸€æ¬¡æ‰“å°ä¹‹åï¼Œå®ƒå†æ¬¡å°†è®¡æ•°å™¨ä» 1 å¢åŠ åˆ° 2ï¼Œå¹¶æ‰“å°å‡ºç»“æœ 2ã€‚&lt;/p>
&lt;p>äº‹åŠ¡åªæœ‰åœ¨ç»“æŸæ—¶æ‰ä¼šå°è¯•æäº¤å…¶å˜æ›´ã€‚æäº¤çš„å·¥ä½œåŸç†ç±»ä¼¼äºåŸå­çš„æ¯”è¾ƒå’Œè®¾ç½®è¯­ä¹‰ã€‚æ¯ä¸ªå¼•ç”¨éƒ½ä¼šè¢«æ£€æŸ¥ï¼Œçœ‹å®ƒåœ¨ä½ ç¬¬ä¸€æ¬¡è¯•å›¾æ”¹å˜å®ƒä¹‹åæ˜¯å¦æœ‰å˜åŒ–ã€‚å¦‚æœæœ‰ä»»ä½•&lt;em>ä¸ªå¼•ç”¨å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆ&lt;/em>ä¸ªå¼•ç”¨éƒ½ä¸ä¼šè¢«æ›´æ–°ï¼Œäº‹åŠ¡ä¼šè¢«é‡è¯•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœäº‹åŠ¡ A å’Œäº‹åŠ¡ B åœ¨åŒä¸€æ—¶é—´è¢«å°è¯•ï¼Œå¹¶ä¸”äº‹ä»¶æŒ‰ä»¥ä¸‹é¡ºåºå‘ç”Ÿï¼Œäº‹åŠ¡ A å°†è¢«é‡è¯•ã€‚&lt;/p>
&lt;ol>
&lt;li>äº‹åŠ¡ Aï¼š alter gnome&lt;/li>
&lt;li>äº¤æ˜“ B: alter gnome&lt;/li>
&lt;li>äº¤æ˜“ Bï¼šæ”¹å˜çƒ˜å¹²æœº&lt;/li>
&lt;li>äº¤æ˜“ Bï¼šæ”¹å˜çƒ˜å¹²æœº&lt;/li>
&lt;li>äº‹åŠ¡ Bï¼šæäº¤-æˆåŠŸåœ°æ›´æ–° gnome å’Œ dryer&lt;/li>
&lt;li>äº‹åŠ¡ Aï¼šæ”¹å˜ dryer&lt;/li>
&lt;li>äº‹åŠ¡ Aï¼šæ”¹å˜çƒ˜å¹²æœº&lt;/li>
&lt;li>äº‹åŠ¡ Aï¼šæäº¤å¤±è´¥ï¼Œå› ä¸º dryer å’Œ gnome å·²ç»æ”¹å˜ï¼›é‡è¯•ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¿™å°±æ˜¯ä½ çš„å·¥ä½œ! å®‰å…¨ã€ç®€å•ã€å¹¶å‘åœ°åè°ƒçŠ¶æ€å˜åŒ–ã€‚ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨! Refs è¿˜æœ‰ä¸€ä¸ªå¯ç–‘çš„é•¿è¢–å­çš„æŠ€å·§ï¼š&lt;code>commute&lt;/code>ã€‚&lt;/p>
&lt;h3 id="commute">commute&lt;/h3>
&lt;p>&lt;code>commute&lt;/code>å…è®¸ä½ åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ›´æ–°ä¸€ä¸ª ref çš„çŠ¶æ€ï¼Œå°±åƒ &lt;code>alter&lt;/code>ä¸€æ ·ã€‚ç„¶è€Œï¼Œå®ƒåœ¨æäº¤æ—¶çš„è¡Œä¸ºæ˜¯å®Œå…¨ä¸åŒçš„ã€‚ä¸‹é¢æ˜¯`alter&amp;rsquo;çš„è¡Œä¸ºæ–¹å¼ã€‚&lt;/p>
&lt;ol>
&lt;li>åœ¨äº‹åŠ¡ä¹‹å¤–ï¼Œè¯»å– Ref çš„å½“å‰çŠ¶æ€ã€‚&lt;/li>
&lt;li>å°†å½“å‰çŠ¶æ€ä¸å¼•ç”¨è€…åœ¨äº‹åŠ¡ä¸­å¼€å§‹æ—¶çš„çŠ¶æ€è¿›è¡Œæ¯”è¾ƒã€‚&lt;/li>
&lt;li>å¦‚æœä¸¤è€…ä¸åŒï¼Œåˆ™é‡è¯•äº¤æ˜“ã€‚&lt;/li>
&lt;li>å¦åˆ™ï¼Œæäº¤æ”¹å˜åçš„å¼•ç”¨çŠ¶æ€ã€‚&lt;/li>
&lt;/ol>
&lt;p>å¦ä¸€æ–¹é¢ï¼Œ&lt;code>commute&lt;/code>åœ¨æäº¤æ—¶çš„è¡Œä¸ºæ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;ol>
&lt;li>åœ¨äº‹åŠ¡ä¹‹å¤–ï¼Œè¯»å–å¼•ç”¨çš„å½“å‰çŠ¶æ€ã€‚&lt;/li>
&lt;li>ä½¿ç”¨å½“å‰çŠ¶æ€å†æ¬¡è¿è¡Œ&lt;code>commute&lt;/code>å‡½æ•°ã€‚&lt;/li>
&lt;li>æäº¤ç»“æœã€‚&lt;/li>
&lt;/ol>
&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œ&lt;code>commute&lt;/code>å¹¶ä¸å¼ºè¿«äº‹åŠ¡é‡è¯•ã€‚è¿™å¯ä»¥å¸®åŠ©æé«˜æ€§èƒ½ï¼Œä½†é‡è¦çš„æ˜¯ï¼Œåªæœ‰å½“ä½ ç¡®å®šä½ çš„ refs ä¸å¯èƒ½æœ€ç»ˆå¤„äºæ— æ•ˆçŠ¶æ€æ—¶æ‰ä½¿ç”¨ &lt;code>commute'ã€‚è®©æˆ‘ä»¬çœ‹çœ‹&lt;/code>commute`çš„å®‰å…¨å’Œä¸å®‰å…¨ä½¿ç”¨çš„ä¾‹å­ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®‰å…¨ä½¿ç”¨çš„ä¾‹å­ã€‚&lt;code>sleep-print-update&lt;/code>å‡½æ•°è¿”å›æ›´æ–°çš„çŠ¶æ€ï¼Œä½†åŒæ—¶ä¹Ÿç¡çœ äº†æŒ‡å®šçš„æ¯«ç§’æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶äº‹åŠ¡é‡å ã€‚å®ƒæ‰“å°äº†å®ƒè¯•å›¾æ›´æ–°çš„çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ·±å…¥äº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn sleep-print-update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [sleep-time thread-name update-fn]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [state]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Thread/sleep sleep-time)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str thread-name &amp;#34;: &amp;#34; state))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (update-fn state)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def counter (ref 0))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(future (dosync (commute counter (sleep-print-update 100 &amp;#34;Thread A&amp;#34; inc))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(future (dosync (commute counter (sleep-print-update 150 &amp;#34;Thread B&amp;#34; inc))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯æ‰“å°çš„æ—¶é—´çº¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Thread A: 0 | 100ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Thread B: 0 | 150ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Thread A: 0 | 200ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Thread B: 1 | 300ms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯·æ³¨æ„ï¼Œæœ€åæ‰“å°çš„ä¸€è¡Œæ˜¯ &amp;ldquo;çº¿ç¨‹ Bï¼š1&amp;rdquo;ã€‚è¿™æ„å‘³ç€&lt;code>sleep-print-update&lt;/code>åœ¨ç¬¬äºŒæ¬¡è¿è¡Œæ—¶æ”¶åˆ°&lt;code>1&lt;/code>ä½œä¸ºçŠ¶æ€å‚æ•°ã€‚è¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºæ­¤æ—¶çº¿ç¨‹ A å·²ç»æäº¤äº†å®ƒçš„ç»“æœã€‚å¦‚æœä½ åœ¨äº‹åŠ¡è¿è¡Œåè§£é™¤å¯¹&lt;code>counter&lt;/code>çš„å¼•ç”¨ï¼Œä½ ä¼šå‘ç°å…¶å€¼æ˜¯&lt;code>2&lt;/code>ã€‚&lt;/p>
&lt;p>ç°åœ¨ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªä¸å®‰å…¨äº¤æ¢çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def receiver-a (ref #{}))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def receiver-b (ref #{}))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def giver (ref #{1}))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(do (future (dosync (let [gift (first @giver)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Thread/sleep 10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (commute receiver-a conj gift)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (commute giver disj gift))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (future (dosync (let [gift (first @giver)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Thread/sleep 50)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (commute receiver-b conj gift)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (commute giver disj gift)))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@receiver-a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #{1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@receiver-b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #{1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@giver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #{}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>1&lt;/code>è¢«èµ‹äºˆäº†&lt;code>receiver-a&lt;/code>å’Œ&lt;code>receiver-b&lt;/code>ï¼Œä½ æœ€ç»ˆå¾—åˆ°äº†ä¸¤ä¸ª&lt;code>1&lt;/code>çš„å®ä¾‹ï¼Œè¿™å¯¹ä½ çš„ç¨‹åºæ˜¯æ— æ•ˆçš„ã€‚è¿™ä¸ªä¾‹å­çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œåº”ç”¨çš„å‡½æ•°ï¼ŒåŸºæœ¬ä¸Šæ˜¯&lt;code>#(conj % gift)&lt;/code>å’Œ&lt;code>#(disj % gift)&lt;/code>ï¼Œæ˜¯ç”±&lt;code>giver&lt;/code>çš„çŠ¶æ€æ´¾ç”Ÿçš„ã€‚ä¸€æ—¦&lt;code>giver&lt;/code>å‘ç”Ÿå˜åŒ–ï¼Œæ´¾ç”Ÿçš„å‡½æ•°å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ— æ•ˆçš„çŠ¶æ€ï¼Œä½†æ˜¯&lt;code>commute&lt;/code>å¹¶ä¸å…³å¿ƒäº§ç”Ÿçš„çŠ¶æ€æ˜¯æ— æ•ˆçš„ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šæäº¤ç»“æœã€‚è¿™é‡Œçš„æ•™è®­æ˜¯ï¼Œå°½ç®¡&lt;code>commute&lt;/code>å¯ä»¥å¸®åŠ©ä½ åŠ å¿«ç¨‹åºçš„é€Ÿåº¦ï¼Œä½†ä½ å¿…é¡»æ˜æ™ºåœ°å†³å®šä½•æ—¶ä½¿ç”¨å®ƒã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½å¼€å§‹å®‰å…¨ã€ç†æ™ºåœ°ä½¿ç”¨ Refs äº†ã€‚å¼•ç”¨è¿˜æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«ï¼Œæˆ‘åœ¨æ­¤ä¸åšä»‹ç»ï¼Œä½†å¦‚æœä½ å¯¹å®ƒä»¬æ„Ÿåˆ°å¥½å¥‡ï¼Œä½ å¯ä»¥ç ”ç©¶&lt;code>ensure&lt;/code>å‡½æ•°å’Œ&lt;em>write skew&lt;/em>ç°è±¡ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥æ˜¯æœ¬ä¹¦æ¶‰åŠçš„æœ€åä¸€ç§å‚è€ƒæ–‡çŒ®ç±»å‹ã€‚Â &lt;em>vars&lt;/em>ã€‚&lt;/p>
&lt;h2 id="vars">Vars&lt;/h2>
&lt;p>ä½ å·²ç»åœ¨ç¬¬ 6 ç« ä¸­äº†è§£äº†ä¸€äº›å…³äº vars çš„çŸ¥è¯†ã€‚ç®€å•çš„è¯´, &lt;em>vars&lt;/em>æ˜¯ç¬¦å·å’Œå¯¹è±¡ä¹‹é—´çš„å…³è”ã€‚ä½ å¯ä»¥ç”¨&lt;code>def&lt;/code>åˆ›å»ºæ–°çš„å˜é‡ã€‚&lt;/p>
&lt;p>å°½ç®¡ vars å¹¶ä¸åƒåŸå­å’Œ refs é‚£æ ·ç”¨æ¥ç®¡ç†çŠ¶æ€ï¼Œä½†å®ƒä»¬ç¡®å®æœ‰ä¸€äº›å¹¶å‘çš„æŠ€å·§ï¼šä½ å¯ä»¥åŠ¨æ€åœ°ç»‘å®šå®ƒä»¬ï¼Œå¹¶ä¸”å¯ä»¥æ”¹å˜å®ƒä»¬çš„æ ¹ã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åŠ¨æ€ç»‘å®šã€‚&lt;/p>
&lt;h3 id="åŠ¨æ€ç»‘å®š">åŠ¨æ€ç»‘å®š&lt;/h3>
&lt;p>å½“æˆ‘ç¬¬ä¸€æ¬¡ä»‹ç»&lt;code>def&lt;/code>æ—¶ï¼Œæˆ‘æ³è¯·ä½ æŠŠå®ƒå½“ä½œå®šä¹‰ä¸€ä¸ªå¸¸é‡ã€‚äº‹å®è¯æ˜ï¼Œvars æ¯”è¿™æ›´çµæ´»ï¼šä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª&lt;em>åŠ¨æ€&lt;/em>çš„ varï¼Œå®ƒçš„ç»‘å®šå¯ä»¥è¢«æ”¹å˜ã€‚åŠ¨æ€å˜é‡å¯¹äºåˆ›å»ºä¸€ä¸ªå…¨å±€åç§°æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå®ƒåº”è¯¥åœ¨ä¸åŒçš„æƒ…å†µä¸‹æŒ‡ä»£ä¸åŒçš„å€¼ã€‚&lt;/p>
&lt;h4 id="åˆ›å»ºå’Œç»‘å®šåŠ¨æ€å˜é‡">åˆ›å»ºå’Œç»‘å®šåŠ¨æ€å˜é‡&lt;/h4>
&lt;p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåŠ¨æ€ varã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def:dynamic *notification-address* &amp;#34;dobby@elf.org&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„è¿™é‡Œæœ‰ä¸¤ä¸ªé‡è¦çš„ç»†èŠ‚ã€‚é¦–å…ˆï¼Œä½ ç”¨&lt;code>^:dynamic&lt;/code>å‘ Clojure å‘å‡ºä¿¡å·ï¼Œè¡¨æ˜ä¸€ä¸ª var æ˜¯åŠ¨æ€çš„ã€‚ç¬¬äºŒï¼Œvar çš„åå­—æ˜¯ç”±æ˜Ÿå·æ‹¬èµ·æ¥çš„ã€‚Lispers ç§°è¿™äº›ä¸º&lt;em>earmuffs&lt;/em>ï¼Œè¿™å¾ˆå¯çˆ±ã€‚Clojure è¦æ±‚ä½ å°†åŠ¨æ€å˜é‡çš„åå­—ç”¨è€³ç½©æ‹¬èµ·æ¥ã€‚è¿™æœ‰åŠ©äºå‘å…¶ä»–ç¨‹åºå‘˜å‘å‡ºè¯¥å˜é‡çš„&lt;em>åŠ¨æ€æ€§&lt;/em>çš„ä¿¡å·ã€‚&lt;/p>
&lt;p>ä¸æ™®é€šå˜é‡ä¸åŒï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨&lt;code>binding&lt;/code>æ¥ä¸´æ—¶æ”¹å˜åŠ¨æ€å˜é‡çš„å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(binding [*notification-address* &amp;#34;test@elf.org&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *notification-address*)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;test@elf.org&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥å †å ç»‘å®šï¼ˆå°±åƒä½ å¯ä»¥ç”¨&lt;code>let&lt;/code>ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(binding [*notification-address* &amp;#34;tester-1@elf.org&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println *notification-address*)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (binding [*notification-address* &amp;#34;tester-2@elf.org&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println *notification-address*))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println *notification-address*))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; tester-1@elf.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; tester-2@elf.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; tester-1@elf.org
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ çŸ¥é“äº†å¦‚ä½•åŠ¨æ€ç»‘å®šä¸€ä¸ª varï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªçœŸå®ä¸–ç•Œçš„åº”ç”¨ã€‚&lt;/p>
&lt;h4 id="åŠ¨æ€-var-çš„ç”¨é€”">åŠ¨æ€ var çš„ç”¨é€”&lt;/h4>
&lt;p>æ¯”æ–¹è¯´ï¼Œä½ æœ‰ä¸€ä¸ªå‘é€é€šçŸ¥é‚®ä»¶çš„å‡½æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åªæ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†å‡è£…è¿™ä¸ªå‡½æ•°çœŸçš„å‘é€äº†ç”µå­é‚®ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn notify
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [message]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;TO: &amp;#34; *notification-address* &amp;#34;\n&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;MESSAGE: &amp;#34; message))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(notify &amp;#34;I fell.&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;TO: dobby@elf.org\nMESSAGE: I fell.&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ æƒ³æµ‹è¯•è¿™ä¸ªå‡½æ•°ï¼Œè€Œä¸åœ¨æ¯æ¬¡ä½ çš„è§„æ ¼è¿è¡Œæ—¶å‘å¤šæ¯”å‘é€åƒåœ¾é‚®ä»¶ï¼Œæ€ä¹ˆåŠï¼Ÿè¿™æ—¶å°±éœ€è¦&lt;code>binding&lt;/code>æ¥å¸®å¿™äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(binding [*notification-address* &amp;#34;test@elf.org&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (notify &amp;#34;test!&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;TO: test@elf.org\nMESSAGE: test!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶ï¼Œä½ å¯ä»¥ç›´æ¥å®šä¹‰&lt;code>notify&lt;/code>æ¥æ¥å—ä¸€ä¸ªç”µå­é‚®ä»¶åœ°å€ä½œä¸ºå‚æ•°ã€‚äº‹å®ä¸Šï¼Œè¿™é€šå¸¸æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚ä¸ºä»€ä¹ˆè¦ç”¨åŠ¨æ€å˜é‡æ¥ä»£æ›¿å‘¢ï¼Ÿ&lt;/p>
&lt;p>åŠ¨æ€å˜é‡æœ€å¸¸è¢«ç”¨æ¥å‘½åä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°çš„ç›®æ ‡èµ„æºã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å¯ä»¥æŠŠç”µå­é‚®ä»¶åœ°å€çœ‹ä½œæ˜¯ä½ å†™ç»™å®ƒçš„èµ„æºã€‚äº‹å®ä¸Šï¼ŒClojure ä¸ºè¿™ä¸ªç›®çš„æä¾›äº†å¤§é‡çš„å†…ç½®åŠ¨æ€å˜é‡ã€‚Â ä¾‹å¦‚ï¼Œ&amp;quot;&lt;em>out&lt;/em>&amp;ldquo;ä»£è¡¨æ‰“å°æ“ä½œçš„æ ‡å‡†è¾“å‡ºã€‚åœ¨ä½ çš„ç¨‹åºä¸­ï¼Œä½ å¯ä»¥é‡æ–°ç»‘å®š&lt;code>*out*&lt;/code>ï¼Œä½¿æ‰“å°è¯­å¥å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå°±åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(binding [*out* (clojure.java.io/writer &amp;#34;print-output&amp;#34;)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;A man who carries a cat by the tail learns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">something he can learn in no other way.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-- Mark Twain&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(slurp &amp;#34;print-output&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; A man who carries a cat by the tail learns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> something he can learn in no other way.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -- Mark Twain
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ¯”æ¯æ¬¡è°ƒç”¨ &amp;ldquo;println &amp;ldquo;éƒ½ä¼ é€’ä¸€ä¸ªè¾“å‡ºç›®çš„åœ°è¦è½»æ¾å¾—å¤šã€‚åŠ¨æ€å˜é‡æ˜¯ä¸€ç§æŒ‡å®šé€šç”¨èµ„æºçš„å¥½æ–¹æ³•ï¼ŒåŒæ—¶ä¿ç•™äº†åœ¨ç‰¹æ®Šæƒ…å†µä¸‹æ”¹å˜å®ƒçš„çµæ´»æ€§ã€‚&lt;/p>
&lt;p>åŠ¨æ€å˜é‡ä¹Ÿè¢«ç”¨äºé…ç½®ã€‚ä¾‹å¦‚ï¼Œå†…ç½®çš„ var&lt;code>*print-length*&lt;/code>å…è®¸ä½ æŒ‡å®š Clojure åº”è¯¥æ‰“å°ä¸€ä¸ªé›†åˆä¸­çš„å¤šå°‘ä¸ªé¡¹ç›®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(println [&amp;#34;Print&amp;#34; &amp;#34;all&amp;#34; &amp;#34;the&amp;#34; &amp;#34;things!&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [Print all the things!]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(binding [*print-length* 1]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println [&amp;#34;Print&amp;#34; &amp;#34;just&amp;#34; &amp;#34;one!&amp;#34;]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [Print ...]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/zombie-metaphysics/troll.png"
loading="lazy"
>&lt;/p>
&lt;p>æœ€åï¼Œå¯ä»¥å¯¹å·²ç»ç»‘å®šçš„åŠ¨æ€å˜é‡è¿›è¡Œ&lt;code>set!&lt;/code>ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ æ‰€çœ‹åˆ°çš„ä¾‹å­å…è®¸ä½ å°†ä¿¡æ¯&lt;em>è¾“å…¥åˆ°ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸éœ€è¦å°†ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè€Œ&lt;code>set!&lt;/code>å…è®¸ä½ å°†ä¿¡æ¯&lt;/em>è¾“å‡ºåˆ°ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸éœ€è¦å°†å…¶ä½œä¸ºå‚æ•°è¿”å›ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œå‡è®¾ä½ æ˜¯ä¸€ä¸ªå¿ƒçµæ„Ÿåº”è€…ï¼Œä½†ä½ çš„è¯»å¿ƒèƒ½åŠ›æœ‰ç‚¹å»¶è¿Ÿã€‚ä½ åªæœ‰åœ¨äº†è§£åˆ«äººçš„æƒ³æ³•å¯¹ä½ æœ‰ç”¨çš„æ—¶å€™ï¼Œæ‰èƒ½è¯»æ‡‚ä»–ä»¬çš„æƒ³æ³•ã€‚ä¸è¿‡ï¼Œä¸è¦è§‰å¾—å¤ªç³Ÿç³•ï¼Œä½ ä»ç„¶æ˜¯ä¸€ä¸ªå¿ƒçµæ„Ÿåº”è€…ï¼Œè¿™å¾ˆäº†ä¸èµ·ã€‚æ€»ä¹‹ï¼Œå‡è®¾ä½ æƒ³ç©¿è¿‡ä¸€åº§ç”±å·¨é­”çœ‹å®ˆçš„æ¡¥ï¼Œå¦‚æœä½ ä¸å›ç­”ä»–çš„è°œè¯­ï¼Œä»–å°±ä¼šåƒæ‰ä½ ã€‚ä»–çš„è°œè¯­æ˜¯ &amp;ldquo;æˆ‘æƒ³çš„æ˜¯ 1 å’Œ 2 ä¹‹é—´çš„å“ªä¸ªæ•°å­—ï¼Ÿ&amp;rdquo; åœ¨å·¨é­”åå™¬ä½ çš„æƒ…å†µä¸‹ï¼Œä½ è‡³å°‘å¯ä»¥çŸ¥é“å·¨é­”åˆ°åº•åœ¨æƒ³ä»€ä¹ˆè€Œæ­»ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åˆ›å»ºäº†åŠ¨æ€ var &lt;code>*troll-thought*&lt;/code>æ¥ä¼ è¾¾å·¨é­”çš„æƒ³æ³•ï¼Œä»&lt;code>troll-riddle&lt;/code>å‡½æ•°ä¸­å‡ºæ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def ^:dynamic *troll-thought* nil)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn troll-riddle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [your-answer]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [number &amp;#34;man meat&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (when (thread-bound? #&amp;#39;*troll-thought*)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (set! *troll-thought* number))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (= number your-answer)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;TROLL: You can cross the bridge!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;TROLL: Time to eat you, succulent human!&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(binding [*troll-thought* nil]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (troll-riddle 2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;SUCCULENT HUMAN: Oooooh! The answer was&amp;#34; *troll-thought*))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; TROLL: Time to eat you, succulent human!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; SUCCULENT HUMAN: Oooooh! The answer was man meat
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ åœ¨âŠå¤„ä½¿ç”¨&lt;code>thread-bound?&lt;/code>å‡½æ•°æ¥æ£€æŸ¥ var æ˜¯å¦å·²ç»è¢«ç»‘å®šï¼Œå¦‚æœæ˜¯ï¼Œä½ å°±&lt;code>set! *troll-thought*&lt;/code>åˆ°â‹å¤„çš„å·¨é­”çš„æ€æƒ³ã€‚&lt;/p>
&lt;p>å˜é‡åœ¨ç»‘å®šä¹‹å¤–è¿”å›åˆ°å®ƒçš„åŸå§‹å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">*troll-thought*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œä½ å¿…é¡»å°†&lt;code>#'*troll-thought*&lt;/code>ï¼ˆåŒ…æ‹¬&lt;code>#'ï¼‰ï¼Œè€Œä¸æ˜¯&lt;/code>&lt;em>troll-thought&lt;/em>&lt;code>ï¼Œä¼ é€’ç»™å‡½æ•°&lt;/code>thread-bound?&lt;code>ã€‚è¿™æ˜¯å› ä¸º&lt;/code>thread-bound?`å°† var æœ¬èº«ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯å®ƒæ‰€æŒ‡å‘çš„å€¼ã€‚&lt;/p>
&lt;h4 id="å•çº¿ç¨‹ç»‘å®š">å•çº¿ç¨‹ç»‘å®š&lt;/h4>
&lt;p>å…³äºç»‘å®šçš„æœ€åä¸€ç‚¹è¦æ³¨æ„ï¼šå¦‚æœä½ ä»ä¸€ä¸ªæ‰‹åŠ¨åˆ›å»ºçš„çº¿ç¨‹ä¸­è®¿é—®ä¸€ä¸ªåŠ¨æ€ç»‘å®šçš„ varï¼Œè¯¥ var å°†æ±‚å€¼ä¸ºåŸå§‹å€¼ã€‚å¦‚æœä½ æ˜¯ Clojureï¼ˆå’Œ Javaï¼‰çš„æ–°æ‰‹ï¼Œè¿™ä¸ªç‰¹æ€§ä¸ä¼šç«‹å³å‘ç”Ÿä½œç”¨ï¼›ä½ å¯ä»¥è·³è¿‡è¿™ä¸€èŠ‚ï¼Œä»¥åå†æ¥è®¨è®ºå®ƒã€‚&lt;/p>
&lt;p>å…·æœ‰è®½åˆºæ„å‘³çš„æ˜¯ï¼Œè¿™ç§ç»‘å®šè¡Œä¸ºä½¿æˆ‘ä»¬æ— æ³•åœ¨ REPL ä¸­è½»æ¾åˆ›å»ºä¸€ä¸ªæœ‰è¶£çš„æ¼”ç¤ºï¼Œå› ä¸º REPL ç»‘å®šäº†&lt;code>*out*&lt;/code>ã€‚å°±å¥½åƒä½ åœ¨ REPL ä¸­è¿è¡Œçš„æ‰€æœ‰ä»£ç éƒ½è¢«éšå«åœ°åŒ…è£¹åœ¨ç±»ä¼¼&lt;code>(&lt;/code>binding[&lt;em>out&lt;/em> repl-printer] your-code&lt;code>çš„ä¸œè¥¿ä¸­ã€‚å¦‚æœä½ åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œ&lt;/code>&lt;em>out&lt;/em>`å°±ä¸ä¼šè¢«ç»‘å®šåˆ° REPL æ‰“å°æœºä¸Šã€‚&lt;/p>
&lt;p>ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨äº†ä¸€äº›åŸºæœ¬çš„ Java äº’æ“ä½œã€‚å³ä½¿å®ƒçœ‹èµ·æ¥å¾ˆé™Œç”Ÿï¼Œä¸‹é¢ä»£ç çš„è¦ç‚¹ä¹Ÿåº”è¯¥å¾ˆæ¸…æ¥šï¼Œä½ å°†åœ¨ç¬¬ 12 ç« ä¸­å‡†ç¡®åœ°äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p>
&lt;p>è¿™æ®µä»£ç å‘ REPL æ‰“å°è¾“å‡ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(.write *out* &amp;#34;prints to repl&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; prints to repl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢çš„ä»£ç æ²¡æœ‰æ‰“å°è¾“å‡ºåˆ° REPLï¼Œå› ä¸º&lt;code>*out*&lt;/code>æ²¡æœ‰ç»‘å®šåˆ° REPL æ‰“å°æœºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(.start (Thread. #(.write *out* &amp;#34;prints to standard out&amp;#34;)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨è¿™ä¸ªæ„šè ¢çš„ä»£ç æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [out *out*]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.start
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Thread. #(binding [*out* out]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (.write *out* &amp;#34;prints to repl from thread&amp;#34;)))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨&lt;code>bound-fn&lt;/code>ï¼Œå®ƒå°†æ‰€æœ‰å½“å‰çš„ç»‘å®šå¸¦åˆ°æ–°çš„çº¿ç¨‹ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(.start (Thread. (bound-fn [] (.write *out* &amp;#34;prints to repl from thread&amp;#34;))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>let&lt;/code>ç»‘å®šæ•è·äº†&lt;code>*out*&lt;/code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å­çº¿ç¨‹ä¸­é‡æ–°ç»‘å®šå®ƒï¼Œè¿™æ˜¯å¾ˆå‚»çš„ã€‚é‡ç‚¹æ˜¯ï¼Œç»‘å®šä¸ä¼šè¢«ä¼ é€’åˆ°&lt;em>æ‰‹åŠ¨&lt;/em>åˆ›å»ºçš„çº¿ç¨‹ä¸­ã€‚ç„¶è€Œï¼Œå®ƒä»¬ç¡®å®è¢«ä¼ é€’ç»™äº†æœŸè´§ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ &amp;ldquo;ç»‘å®šä¼ é€’&amp;rdquo;ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ä»æœŸè´§ä¸­æ‰“å°ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¯”å¦‚è¯´ã€‚&lt;/p>
&lt;p>å…³äºåŠ¨æ€ç»‘å®šå°±åˆ°æ­¤ä¸ºæ­¢ã€‚è®©æˆ‘ä»¬æŠŠæ³¨æ„åŠ›è½¬å‘æœ€åä¸€ä¸ª var ä¸»é¢˜ï¼šæ”¹å˜ var çš„&lt;em>æ ¹&lt;/em>ã€‚&lt;/p>
&lt;h3 id="æ”¹å˜å˜é‡æ ¹å€¼">æ”¹å˜å˜é‡æ ¹å€¼&lt;/h3>
&lt;p>å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„ var æ—¶ï¼Œä½ æä¾›çš„åˆå§‹å€¼æ˜¯å®ƒçš„&lt;em>æ ¹&lt;/em>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def power-source &amp;#34;hair&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>&amp;quot;å¤´å‘&amp;quot;&lt;/code>æ˜¯&lt;code>power-source&lt;/code>çš„æ ¹å€¼ã€‚Clojure å…è®¸ä½ ç”¨å‡½æ•°&lt;code>alter-var-root&lt;/code>æ°¸ä¹…åœ°æ”¹å˜è¿™ä¸ªæ ¹å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(alter-var-root #&amp;#39;power-source (fn [_] &amp;#34;7-eleven parking lot&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">power-source
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;7-eleven parking lot&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°±åƒä½¿ç”¨&lt;code>swap!&lt;/code>æ¥æ›´æ–°ä¸€ä¸ªåŸå­æˆ–&lt;code>alter!&lt;/code>æ¥æ›´æ–°ä¸€ä¸ª ref ä¸€æ ·ï¼Œä½ ä½¿ç”¨&lt;code>alter-var-root&lt;/code>å’Œä¸€ä¸ªå‡½æ•°æ¥æ›´æ–°ä¸€ä¸ª var çš„çŠ¶æ€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°åªæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œä¸ä¹‹å‰çš„å€¼æ²¡æœ‰å…³ç³»ï¼Œä¸åƒ&lt;code>alter!&lt;/code>çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨&lt;code>inc&lt;/code>æ¥ä»å½“å‰çš„æ•°å­—è¡ç”Ÿå‡ºä¸€ä¸ªæ–°æ•°å­—ã€‚&lt;/p>
&lt;p>ä½ å‡ ä¹ä¸ä¼šæƒ³è¿™æ ·åšã€‚ä½ å°¤å…¶ä¸æƒ³è¿™æ ·åšæ¥æ‰§è¡Œç®€å•çš„å˜é‡èµ‹å€¼ã€‚å¦‚æœä½ è¿™æ ·åšäº†ï¼Œä½ å°±ä¼šä¸é¡¾ä¸€åˆ‡åœ°æŠŠç»‘å®šçš„å˜é‡åˆ›å»ºä¸ºä¸€ä¸ªå¯å˜çš„å˜é‡ï¼Œè¿™ä¸ Clojure çš„ç†å¿µç›¸æ‚–ï¼›æœ€å¥½æ˜¯ä½¿ç”¨ä½ åœ¨ç¬¬ 5 ç« å­¦åˆ°çš„å‡½æ•°å¼ç¼–ç¨‹æŠ€æœ¯ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥ç”¨&lt;code>with-redefs&lt;/code>æš‚æ—¶æ”¹å˜ä¸€ä¸ª var çš„æ ¹ã€‚è¿™ä¸ç»‘å®šçš„å·¥ä½œåŸç†ç±»ä¼¼ï¼Œåªæ˜¯æ”¹å˜çš„å†…å®¹ä¼šå‡ºç°åœ¨å­çº¿ç¨‹ä¸­ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(with-redefs [*out* *out*]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (doto (Thread. #(println &amp;#34;with redefs allows me to show up in the REPL&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .start
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .join))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>with-redefs&lt;/code>å¯ä»¥ç”¨äºä»»ä½• varï¼Œè€Œä¸ä»…ä»…æ˜¯åŠ¨æ€çš„ã€‚å› ä¸ºå®ƒæœ‰å¦‚æ­¤æ·±è¿œçš„å½±å“ï¼Œä½ åº”è¯¥åªåœ¨æµ‹è¯•æ—¶ä½¿ç”¨å®ƒã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥é‡æ–°å®šä¹‰ä¸€ä¸ªä»ç½‘ç»œè°ƒç”¨ä¸­è¿”å›æ•°æ®çš„å‡½æ•°ï¼Œè¿™æ ·è¯¥å‡½æ•°å°±ä¼šè¿”å›æ¨¡æ‹Ÿæ•°æ®è€Œä¸éœ€è¦å®é™…è¿›è¡Œç½‘ç»œè¯·æ±‚ã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ çŸ¥é“æ‰€æœ‰å…³äº vars çš„çŸ¥è¯†äº†å§! å°½é‡ä¸è¦ç”¨å®ƒä»¬æ¥ä¼¤å®³ä½ è‡ªå·±æˆ–ä½ è®¤è¯†çš„ä»»ä½•äººã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨-pmap-çš„æ— çŠ¶æ€å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§">ä½¿ç”¨ pmap çš„æ— çŠ¶æ€å¹¶å‘æ€§å’Œå¹¶è¡Œæ€§&lt;/h2>
&lt;p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæœ¬ç« çš„é‡ç‚¹æ˜¯é‚£äº›æ—¨åœ¨å‡å°‘å¹¶å‘ç¼–ç¨‹ä¸­å›ºæœ‰é£é™©çš„å·¥å…·ã€‚ä½ å·²ç»äº†è§£äº†å…±äº«è®¿é—®å¯å˜çŠ¶æ€æ‰€å¸¦æ¥çš„å±é™©ï¼Œä»¥åŠ Clojure æ˜¯å¦‚ä½•å®ç°çŠ¶æ€çš„é‡æ–°æ¦‚å¿µåŒ–ï¼Œä»è€Œå¸®åŠ©ä½ å®‰å…¨åœ°ç¼–å†™å¹¶å‘ç¨‹åºã€‚&lt;/p>
&lt;p>ä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ ä¼šæƒ³æŠŠé‚£äº›å®Œå…¨ç‹¬ç«‹çš„ä»»åŠ¡å¹¶å‘åŒ–ã€‚æ²¡æœ‰å¯¹æ˜“å˜çŠ¶æ€çš„å…±äº«è®¿é—®ï¼›å› æ­¤ï¼Œå¹¶å‘è¿è¡Œè¿™äº›ä»»åŠ¡æ²¡æœ‰ä»»ä½•é£é™©ï¼Œä½ ä¹Ÿä¸å¿…è´¹å¿ƒä½¿ç”¨æˆ‘åˆšæ‰è¯´è¿‡çš„ä»»ä½•å·¥å…·ã€‚&lt;/p>
&lt;p>äº‹å®è¯æ˜ï¼ŒClojure è®©ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™ä»£ç æ¥å®ç°æ— çŠ¶æ€å¹¶å‘ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†äº†è§£åˆ°&lt;code>pmap&lt;/code>ï¼Œå®ƒå‡ ä¹å…è´¹ä¸ºä½ æä¾›äº†å¹¶å‘æ€§èƒ½çš„å¥½å¤„ã€‚&lt;/p>
&lt;p>&lt;code>map&lt;/code>æ˜¯å¹¶è¡ŒåŒ–çš„å®Œç¾å€™é€‰è€…ï¼šå½“ä½ ä½¿ç”¨å®ƒæ—¶ï¼Œä½ æ‰€åšçš„åªæ˜¯é€šè¿‡å¯¹ç°æœ‰é›†åˆçš„æ¯ä¸ªå…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä»ç°æœ‰é›†åˆä¸­æ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°é›†åˆã€‚ä¸éœ€è¦ç»´æŠ¤çŠ¶æ€ï¼›æ¯ä¸ªå‡½æ•°çš„åº”ç”¨éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚Clojure é€šè¿‡&lt;code>pmap&lt;/code>ä½¿æ‰§è¡Œå¹¶è¡Œ Map å˜å¾—å®¹æ˜“ã€‚é€šè¿‡&lt;code>pmap&lt;/code>ï¼ŒClojure åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šå¤„ç† Map å‡½æ•°çš„æ¯ä¸ªåº”ç”¨çš„è¿è¡Œã€‚&lt;/p>
&lt;p>ä¸ºäº†æ¯”è¾ƒ&lt;code>map&lt;/code>å’Œ&lt;code>pmap&lt;/code>ï¼Œæˆ‘ä»¬éœ€è¦å¤§é‡çš„ä¾‹å­æ•°æ®ï¼Œä¸ºäº†ç”Ÿæˆè¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨&lt;code>repeatedly&lt;/code>å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ‡’æƒ°åºåˆ—ã€‚æ‡’æƒ°åºåˆ—çš„å…ƒç´ æ˜¯é€šè¿‡è°ƒç”¨ä¼ é€’çš„å‡½æ•°ç”Ÿæˆçš„ï¼Œåƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn always-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(take 5 (repeatedly always-1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 1 1 1 1)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯ä½ å¦‚ä½•åˆ›å»ºä¸€ä¸ª 0 åˆ° 9 ä¹‹é—´çš„éšæœºæ•°çš„æ‡’äººåºåˆ—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(take 5 (repeatedly (partial rand-int 10)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 5 0 3 4)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®©æˆ‘ä»¬ä½¿ç”¨&lt;code>repeatedly&lt;/code>æ¥åˆ›å»ºç¤ºä¾‹æ•°æ®ï¼Œè¯¥æ•°æ®ç”± 3000 ä¸ªéšæœºå­—ç¬¦ä¸²åºåˆ—ç»„æˆï¼Œæ¯ä¸ªå­—ç¬¦ä¸²é•¿ 7000 ä¸ªå­—ç¬¦ã€‚æˆ‘ä»¬å°†æ¯”è¾ƒ&lt;code>map&lt;/code>å’Œ&lt;code>pmap&lt;/code>ï¼Œç”¨å®ƒä»¬åœ¨è¿™é‡Œåˆ›å»ºçš„&lt;code>orc-names&lt;/code>åºåˆ—ä¸Šè¿è¡Œ&lt;code>clojure.string/lowercase&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def alphabet-length 26)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; Vector of chars, A-Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def letters (mapv (comp str char (partial + 65)) (range alphabet-length)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn random-string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Returns a random string of specified length&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [length]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (apply str (take length (repeatedly #(rand-nth letters)))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn random-string-list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [list-length string-length]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (doall (take list-length (repeatedly (partial random-string string-length)))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def orc-names (random-string-list 3000 7000))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› ä¸º&lt;code>map&lt;/code>å’Œ&lt;code>pmap&lt;/code>æ˜¯æ‡’æƒ°çš„ï¼Œæˆ‘ä»¬å¿…é¡»å¼ºè¿«å®ƒä»¬å®ç°ã€‚ä½†æˆ‘ä»¬ä¸å¸Œæœ›å°†ç»“æœæ‰“å°åˆ° REPL ä¸­ï¼Œå› ä¸ºé‚£ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚&lt;code>dorun&lt;/code>å‡½æ•°åšäº†æˆ‘ä»¬éœ€è¦çš„äº‹æƒ…ï¼šå®ƒå®ç°äº†åºåˆ—ï¼Œä½†è¿”å›&lt;code>nil&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time (dorun (map clojure.string/lower-case orc-names)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 270.182 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(time (dorun (pmap clojure.string/lower-case orc-names)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 147.562 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨&lt;code>map&lt;/code>ä¸²è¡Œæ‰§è¡Œçš„æ—¶é—´æ˜¯&lt;code>pmap&lt;/code>çš„ 1.8 å€ï¼Œè€Œä½ æ‰€è¦åšçš„åªæ˜¯å¢åŠ ä¸€ä¸ªé¢å¤–çš„å­—æ¯ ä½ çš„æ€§èƒ½å¯èƒ½ä¼šæ›´å¥½ï¼Œè¿™å–å†³äºä½ çš„è®¡ç®—æœºæœ‰å¤šå°‘ä¸ªå†…æ ¸ï¼›è¿™æ®µä»£ç æ˜¯åœ¨åŒæ ¸æœºå™¨ä¸Šè¿è¡Œçš„ã€‚&lt;/p>
&lt;p>ä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆå¹¶è¡Œç‰ˆæœ¬æ‰€èŠ±çš„æ—¶é—´ä¸æ­£å¥½æ˜¯ä¸²è¡Œç‰ˆæœ¬çš„ä¸€åŠã€‚æ¯•ç«Ÿï¼Œä¸¤ä¸ªæ ¸å¿ƒçš„æ—¶é—´åº”è¯¥åªæœ‰å•æ ¸å¿ƒçš„ä¸€åŠï¼Œä¸æ˜¯å—ï¼ŸåŸå› æ˜¯ï¼Œåœ¨åˆ›å»ºå’Œåè°ƒçº¿ç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œæ€»æ˜¯ä¼šæœ‰ä¸€äº›å¼€é”€ã€‚æœ‰æ—¶ï¼Œäº‹å®ä¸Šï¼Œè¿™ç§å¼€é”€æ‰€èŠ±è´¹çš„æ—¶é—´ä¼šä½¿æ¯ä¸ªå‡½æ•°åº”ç”¨çš„æ—¶é—´ç›¸å½¢è§ç»Œï¼Œ&lt;code>pmap'å®é™…ä¸Šä¼šæ¯”&lt;/code>map&amp;rsquo;èŠ±è´¹æ›´å¤šæ—¶é—´ã€‚å›¾ 10-3 æ˜¾ç¤ºäº†ä½ å¦‚ä½•èƒ½ç›´è§‚åœ°çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/zombie-metaphysics/pmap-small-grain.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 10-3ï¼šå¹¶è¡ŒåŒ–å¼€é”€ä¼šä½¿ä»»åŠ¡æ—¶é—´ç›¸å½¢è§ç»Œï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬å¯¹ 20000 ä¸ªç¼©å†™çš„å…½äººåå­—è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼Œæ¯ä¸ª 300 ä¸ªå­—ç¬¦çš„é•¿åº¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°è¿™ç§æ•ˆæœçš„ä½œç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def orc-name-abbrevs (random-string-list 20000 300))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(time (dorun (map clojure.string/lower-case orc-name-abbrevs)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 78.23 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(time (dorun (pmap clojure.string/lower-case orc-name-abbrevs)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 124.727 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨&lt;code>pmap&lt;/code>å®é™…ä¸Šéœ€è¦ 1.6 å€çš„*æ—¶é—´ã€‚&lt;/p>
&lt;p>è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯å¢åŠ &lt;em>ç²’åº¦&lt;/em>ï¼Œæˆ–è€…è¯´æ¯ä¸ªå¹¶è¡ŒåŒ–ä»»åŠ¡æ‰€åšçš„å·¥ä½œé‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»»åŠ¡æ˜¯å¯¹é›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ åº”ç”¨ Map å‡½æ•°ã€‚ç²’åº¦ä¸æ˜¯ç”¨ä»»ä½•æ ‡å‡†å•ä½æ¥è¡¡é‡çš„ï¼Œä½†ä½ ä¼šè¯´&lt;code>pmap&lt;/code>çš„ç²’åº¦é»˜è®¤æ˜¯ 1ã€‚å°†ç²’åº¦å¢åŠ åˆ° 2 æ„å‘³ç€ä½ å°† Map å‡½æ•°åº”ç”¨äºä¸¤ä¸ªå…ƒç´ ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªï¼Œæ‰€ä»¥ä»»åŠ¡æ‰€åœ¨çš„çº¿ç¨‹æ­£åœ¨åšæ›´å¤šçš„å·¥ä½œã€‚å›¾ 10-4 æ˜¾ç¤ºäº†å¢åŠ ç²’åº¦æ˜¯å¦‚ä½•æé«˜æ€§èƒ½çš„ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/zombie-metaphysics/ppmap.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 10-4ï¼šå¯è§†åŒ–çš„ç²’åº¦ä¸å¹¶è¡ŒåŒ–å¼€é”€çš„å…³ç³»&lt;/p>
&lt;p>ä¸ºäº†åœ¨ Clojure ä¸­å®ç°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨&lt;code>partition-all&lt;/code>ä½¿æ¯ä¸ªçº¿ç¨‹å¯¹å¤šä¸ªå…ƒç´ åº”ç”¨&lt;code>clojure.string/lower-case&lt;/code>ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¸€ä¸ªå…ƒç´ ï¼Œæ¥å¢åŠ ç²’åº¦ã€‚Â &lt;code>partition-all&lt;/code>æ¥æ”¶ä¸€ä¸ª seqï¼Œå¹¶å°†å…¶åˆ†æˆæŒ‡å®šé•¿åº¦çš„ seqã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def numbers [1 2 3 4 5 6 7 8 9 10])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(partition-all 3 numbers)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ((1 2 3) (4 5 6) (7 8 9) (10))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨å‡è®¾ä½ å¼€å§‹æ—¶çš„ä»£ç æ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(pmap inc numbers)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé¢—ç²’å¤§å°æ˜¯ 1ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½å¯¹ä¸€ä¸ªå…ƒç´ åº”ç”¨äº†&lt;code>inc&lt;/code>ã€‚&lt;/p>
&lt;p>ç°åœ¨å‡è®¾ä½ æŠŠä»£ç æ”¹æˆè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(pmap (fn [number-group] (doall (map inc number-group))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (partition-all 3 numbers))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ((2 3 4) (5 6 7) (8 9 10) (11))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæœ‰å‡ ä»¶äº‹è¦åšã€‚é¦–å…ˆï¼Œä½ ç°åœ¨å°†é¢—ç²’å¤§å°å¢åŠ åˆ°äº†ä¸‰ä¸ªï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹ç°åœ¨æ‰§è¡Œäº†ä¸‰ä¸ª&lt;code>inc&lt;/code>å‡½æ•°çš„åº”ç”¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªã€‚ç¬¬äºŒï¼Œæ³¨æ„ä½ å¿…é¡»åœ¨ Map å‡½æ•°ä¸­è°ƒç”¨&lt;code>doall&lt;/code>ã€‚è¿™è¿«ä½¿ç”±&lt;code>(map inc number-group)&lt;/code>è¿”å›çš„æ‡’æƒ°åºåˆ—åœ¨çº¿ç¨‹å†…å®ç°ã€‚ç¬¬ä¸‰ï¼Œæˆ‘ä»¬éœ€è¦å–æ¶ˆå¯¹ç»“æœçš„åˆ†ç»„ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(apply concat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (pmap (fn [number-group] (doall (map inc number-group)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (partition-all 3 numbers)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ  orc åç§°ä½ ase åŒ–çš„ç²’åº¦ï¼Œè¿™æ ·æ¯ä¸ªçº¿ç¨‹åœ¨ 1000 ä¸ªåç§°ä¸Šè¿è¡Œ&lt;code>clojure.string/lower-case&lt;/code>è€Œä¸æ˜¯åªæœ‰ä¸€ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (dorun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (apply concat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (pmap (fn [name] (doall (map clojure.string/lower-case name)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (partition-all 1000 orc-name-abbrevs)))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 44.677 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¹¶è¡Œç‰ˆæœ¬å†æ¬¡èŠ±è´¹äº†è¿‘ä¸€åŠçš„æ—¶é—´ã€‚ä¸ºäº†å¥½ç©ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæŠ€æœ¯æ¦‚æ‹¬ä¸ºä¸€ä¸ªå«åš &amp;ldquo;ppmap &amp;ldquo;çš„å‡½æ•°ï¼Œä»£è¡¨&lt;em>åˆ†åŒºçš„ pmap&lt;/em>ã€‚å®ƒå¯ä»¥æ¥æ”¶ä¸€ä¸ªä»¥ä¸Šçš„é›†åˆï¼Œå°±åƒ&lt;code>map&lt;/code>ä¸€æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn ppmap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Partitioned pmap, for grouping map ops together to make parallel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> overhead worthwhile&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [grain-size f &amp;amp; colls]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (apply concat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (apply pmap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [&amp;amp; pgroups] (doall (apply map f pgroups)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map (partial partition-all grain-size) colls))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(time (dorun (ppmap 1000 clojure.string/lower-case orc-name-abbrevs)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 44.902 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä¸çŸ¥é“ä½ æ€ä¹ˆæƒ³çš„ï¼Œä½†æˆ‘è§‰å¾—è¿™ä¸œè¥¿å°±æ˜¯å¥½ç©ã€‚è¦æƒ³è·å¾—æ›´å¤šçš„ä¹è¶£ï¼Œå¯ä»¥çœ‹çœ‹ clojure.core.reducers åº“ï¼ˆ&lt;em>&lt;a class="link" href="http://clojure.org/reducers/" target="_blank" rel="noopener"
>http://clojure.org/reducers/&lt;/a>&lt;/em>ï¼‰ã€‚Â è¿™ä¸ªåº“æä¾›äº† seq å‡½æ•°çš„æ›¿ä»£å®ç°ï¼Œå¦‚&lt;code>map&lt;/code>å’Œ&lt;code>reduce&lt;/code>ï¼Œé€šå¸¸æ¯”å®ƒä»¬åœ¨&lt;code>clojure.core&lt;/code>ä¸­çš„è¡¨äº²æ›´å¿«ã€‚å…¶ä»£ä»·æ˜¯å®ƒä»¬å¹¶ä¸æ‡’æƒ°ã€‚æ€»çš„æ¥è¯´ï¼Œclojure.core.reducers åº“ä¸ºåˆ›å»ºå’Œä½¿ç”¨&lt;code>ppmap&lt;/code>è¿™æ ·çš„å‡½æ•°æä¾›äº†ä¸€ç§æ›´ç²¾ç»†å’Œå¯ç»„åˆçš„æ–¹å¼ã€‚&lt;/p>
&lt;h2 id="æ‘˜è¦">æ‘˜è¦&lt;/h2>
&lt;p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦åˆ°äº†æ¯”å¤§å¤šæ•°äººæ›´å¤šçš„å…³äºå®‰å…¨å¤„ç†å¹¶å‘ä»»åŠ¡çš„çŸ¥è¯†ã€‚ä½ äº†è§£äº†æ”¯æ’‘ Clojure å¼•ç”¨ç±»å‹çš„å½¢è€Œä¸Šå­¦ã€‚åœ¨ Clojure çš„å½¢è€Œä¸Šå­¦ä¸­ï¼ŒçŠ¶æ€æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„èº«ä»½å€¼ï¼Œè€Œèº«ä»½æ˜¯æŒ‡ç”±æŸä¸ªè¿‡ç¨‹äº§ç”Ÿçš„ä¸€è¿ä¸²å€¼çš„ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼ã€‚å€¼æ˜¯åŸå­æ€§çš„ï¼Œå°±åƒæ•°å­—æ˜¯åŸå­æ€§çš„ä¸€æ ·ã€‚å®ƒä»¬æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯ä»¥å®‰å…¨åœ°å¹¶å‘å·¥ä½œï¼›ä½ ä¸å¿…æ‹…å¿ƒåœ¨ä½ ä½¿ç”¨å®ƒä»¬æ—¶å…¶ä»–çº¿ç¨‹ä¼šæ”¹å˜å®ƒä»¬ã€‚&lt;/p>
&lt;p>åŸå­å¼•ç”¨ç±»å‹å…è®¸ä½ åˆ›å»ºä¸€ä¸ªèº«ä»½ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>swap!&lt;/code>å’Œ&lt;code>reset!&lt;/code>å®‰å…¨åœ°æ›´æ–°å¼•ç”¨æ–°å€¼ã€‚å½“ä½ æƒ³ä½¿ç”¨äº‹åŠ¡è¯­ä¹‰æ›´æ–°å¤šä¸ªèº«ä»½æ—¶ï¼Œref å¼•ç”¨ç±»å‹å¾ˆæ–¹ä¾¿ï¼Œä½ ç”¨&lt;code>alter!&lt;/code>å’Œ&lt;code>commute!&lt;/code>æ›´æ–°å®ƒã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•é€šè¿‡ä½¿ç”¨&lt;code>pmap&lt;/code>å’Œ core.reducers åº“è¿›è¡Œæ— çŠ¶æ€æ•°æ®è½¬æ¢æ¥æé«˜æ€§èƒ½ã€‚å‘œå‘¼!&lt;/p>
&lt;h2 id="ç»ƒä¹ ">ç»ƒä¹ &lt;/h2>
&lt;ol>
&lt;li>
&lt;p>åˆ›å»ºä¸€ä¸ªåˆå§‹å€¼ä¸º 0 çš„åŸå­ï¼Œä½¿ç”¨&lt;code>swap!&lt;/code>å°†å…¶é€’å¢å‡ æ¬¡ï¼Œç„¶åå–æ¶ˆå¼•ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨æœŸè´§æ¥å¹¶è¡Œå¤„ç†ä»*&lt;a class="link" href="http://www.braveclojure.com/random-quote" target="_blank" rel="noopener"
>http://www.braveclojure.com/random-quote&lt;/a>*ä¸‹è½½éšæœºæŠ¥ä»·çš„ä»»åŠ¡ï¼Œä½¿ç”¨&lt;code>(slurp &amp;quot;http://www.braveclojure.com/random-quote&amp;quot;)&lt;/code>ã€‚æœŸè´§åº”è¯¥æ›´æ–°ä¸€ä¸ªåŸå­ï¼ŒæŒ‡çš„æ˜¯æ‰€æœ‰å¼•è¯­çš„æ€»å­—æ•°ã€‚è¯¥å‡½æ•°å°†æŠŠè¦ä¸‹è½½çš„å¼•è¯­æ•°é‡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›åŸå­çš„æœ€ç»ˆå€¼ã€‚è¯·è®°ä½ï¼Œåœ¨è¿”å›åŸå­çš„æœ€ç»ˆå€¼ä¹‹å‰ï¼Œä½ éœ€è¦ç¡®ä¿æ‰€æœ‰çš„æœŸè´§å·²ç»å®Œæˆã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•è°ƒç”¨å®ƒå’Œä¸€ä¸ªç¤ºä¾‹ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(quote-word-count 5)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {&amp;#34;ochre&amp;#34; 8, &amp;#34;smoothie&amp;#34; 2}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åœ¨ä¸€ä¸ªæ¸¸æˆä¸­åˆ›å»ºä¸¤ä¸ªè§’è‰²çš„ä»£è¡¨ã€‚ç¬¬ä¸€ä¸ªè§’è‰²æœ‰ 15 ä¸ªå‘½ä¸­ç‡ï¼Œæ€»å…±æœ‰ 40 ä¸ªã€‚ç¬¬äºŒä¸ªè§’è‰²åœ¨ä»–çš„åº“å­˜ä¸­æœ‰ä¸€ä¸ªæ²»ç–—è¯æ°´ã€‚ä½¿ç”¨å‚ç…§ç‰©å’Œäº¤æ˜“æ¥æ¨¡æ‹Ÿæ²»ç–—è¯æ°´çš„æ¶ˆè€—å’Œç¬¬ä¸€ä¸ªè§’è‰²çš„æ²»ç–—ã€‚&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Chapter9 å¹¶å‘çš„è‰ºæœ¯</title><link>https://example.com/p/chapter9-%E5%B9%B6%E5%8F%91%E7%9A%84%E8%89%BA%E6%9C%AF/</link><pubDate>Sat, 15 Jan 2022 12:30:14 +0800</pubDate><guid>https://example.com/p/chapter9-%E5%B9%B6%E5%8F%91%E7%9A%84%E8%89%BA%E6%9C%AF/</guid><description>&lt;h1 id="å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹çš„ç¥åœ£è‰ºæœ¯">å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹çš„ç¥åœ£è‰ºæœ¯&lt;/h1>
&lt;p>å¦‚æœæˆ‘æ˜¯ä¸€ä¸ªåº„å›­çš„ä¸»äººï¼Œè€Œä½ æ˜¯æˆ‘çš„ç»§æ‰¿äººï¼Œæˆ‘ä¼šåœ¨ä½ çš„ç¬¬ 13 ä¸ªå‘½åæ—¥è®©ä½ åä¸‹æ¥ï¼Œå‘Šè¯‰ä½ ï¼š&amp;ldquo;è®¡ç®—çš„ä¸–ç•Œæ­£åœ¨æ”¹å˜ï¼Œå°å§‘å¨˜ï¼Œä½ å¿…é¡»ä¸ºå¤šæ ¸å¤„ç†å™¨çš„æ–°ä¸–ç•Œåšå¥½å‡†å¤‡ï¼Œä»¥å…ä½ è¢«å®ƒè·µè¸ã€‚&lt;/p>
&lt;p>&amp;ldquo;å¥½å¥½å¬ç€ã€‚è¿‘å¹´æ¥ï¼ŒCPU çš„æ—¶é’Ÿé€Ÿåº¦å‡ ä¹æ²¡æœ‰å¢åŠ ï¼Œä½†åŒæ ¸å’Œå››æ ¸è®¡ç®—æœºå·²ç»å˜å¾—å¾ˆæ™®éã€‚ç‰©ç†å®šå¾‹æ˜¯æ®‹é…·è€Œç»å¯¹çš„ï¼Œå®ƒä»¬è¦æ±‚æé«˜æ—¶é’Ÿé€Ÿåº¦éœ€è¦æˆå€çš„åŠŸç‡ã€‚é¢†åŸŸå†…æœ€å¥½çš„å·¥ç¨‹å¸ˆä¸å¤ªå¯èƒ½å¾ˆå¿«å…‹æœè¿™ä¸€é™åˆ¶ï¼Œå¦‚æœæœ‰çš„è¯ã€‚å› æ­¤ï¼Œä½ å¯ä»¥é¢„æœŸå•å°æœºå™¨ä¸Šçš„å†…æ ¸ä¸æ–­å¢åŠ çš„è¶‹åŠ¿å°†ç»§ç»­ä¸‹å»&amp;ndash;ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½ å°†çŸ¥é“å¦‚ä½•å……åˆ†åˆ©ç”¨ç°ä»£ç¡¬ä»¶çš„æœŸæœ›ä¹Ÿæ˜¯å¦‚æ­¤ã€‚&lt;/p>
&lt;p>&amp;ldquo;åœ¨è¿™ç§æ–°æ¨¡å¼ä¸‹å­¦ä¹ ç¼–ç¨‹å°†æ˜¯æœ‰è¶£å’Œè¿·äººçš„ï¼ŒçœŸçš„ã€‚ä½†è¯·æ³¨æ„ï¼šå®ƒä¹Ÿå……æ»¡äº†å±é™©ã€‚ä½ å¿…é¡»å­¦ä¹ &lt;em>å¹¶å‘å’Œ&lt;/em>å¹¶è¡Œç¼–ç¨‹*ï¼Œè¿™æ˜¯ä¸€é—¨ç¥åœ£çš„è‰ºæœ¯ï¼Œä½¿ä½ çš„åº”ç”¨ç»“æ„å®‰å…¨åœ°ç®¡ç†å¤šä¸ªåŒæ—¶æ‰§è¡Œçš„ä»»åŠ¡ã€‚&lt;/p>
&lt;p>&amp;ldquo;ä½ ä»å¯¹å¹¶å‘å’Œå¹¶è¡Œæ¦‚å¿µçš„æ¦‚è¿°å¼€å§‹å­¦ä¹ è¿™é—¨è‰ºæœ¯ã€‚ç„¶åï¼Œä½ å°†å­¦ä¹ å›°æ‰°æ¯ä¸ªä»ä¸šè€…çš„ä¸‰ä¸ªå°å¦–ç²¾ï¼šå‚è€ƒå•å…ƒã€äº’æ–¥å’ŒçŸ®äººç‹‚æˆ˜å£«ã€‚ä½ è¿˜å°†å­¦ä¹ ä¸‰ç§æœ‰åŠ©äºä½ çš„å·¥å…·ï¼šFutureã€è®¸è¯ºå’Œå»¶è¿Ÿ&amp;rdquo;ã€‚&lt;/p>
&lt;p>ç„¶åæˆ‘ä¼šç”¨é”®ç›˜æ‹æ‹ä½ çš„è‚©è†€ï¼Œç¤ºæ„ä½ å¯ä»¥å¼€å§‹äº†ã€‚&lt;/p>
&lt;h2 id="å¹¶å‘å’Œå¹¶è¡Œçš„æ¦‚å¿µ">å¹¶å‘å’Œå¹¶è¡Œçš„æ¦‚å¿µ&lt;/h2>
&lt;p>å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹åœ¨ç¨‹åºæ‰§è¡Œçš„å„ä¸ªå±‚é¢éƒ½æ¶‰åŠåˆ°å¾ˆå¤šæ··ä¹±çš„ç»†èŠ‚ï¼Œä»ç¡¬ä»¶åˆ°æ“ä½œç³»ç»Ÿï¼Œåˆ°ç¼–ç¨‹è¯­è¨€åº“ï¼Œå†åˆ°ä»ä½ çš„å†…å¿ƒæ¶Œå‡ºçš„ã€è½åœ¨ç¼–è¾‘å™¨ä¸­çš„ä»£ç ã€‚ä½†åœ¨ä½ ä¸ºè¿™äº›ç»†èŠ‚çƒ¦æ¼ä¹‹å‰ï¼Œåœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘å°†ä»‹ç»å›´ç»•å¹¶å‘å’Œå¹¶è¡Œçš„é«˜çº§æ¦‚å¿µã€‚&lt;/p>
&lt;h3 id="ç®¡ç†å¤šä¸ªä»»åŠ¡ä¸åŒæ—¶æ‰§è¡Œä»»åŠ¡">ç®¡ç†å¤šä¸ªä»»åŠ¡ä¸åŒæ—¶æ‰§è¡Œä»»åŠ¡&lt;/h3>
&lt;p>&lt;em>å¹¶å‘&lt;/em>æŒ‡çš„æ˜¯åœ¨åŒä¸€æ—¶é—´ç®¡ç†ä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡ã€‚Â &lt;em>ä»»åŠ¡&lt;/em>åªæ˜¯æ„å‘³ç€ &amp;ldquo;éœ€è¦å®Œæˆçš„äº‹æƒ…&amp;rdquo;ï¼Œå®ƒå¹¶ä¸æ„å‘³ç€ä»»ä½•æœ‰å…³ç¡¬ä»¶æˆ–è½¯ä»¶çš„å®ç°ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ Lady Gaga çš„æ­Œæ›²ã€Šç”µè¯ã€‹æ¥è¯´æ˜å¹¶å‘æ€§ã€‚Gaga å”±é“&lt;/p>
&lt;blockquote>
&lt;p>I cannot text you with a drink in my hand, eh&lt;/p>
&lt;/blockquote>
&lt;p>è¿™é‡Œï¼Œå¥¹åœ¨è§£é‡Šå¥¹åªèƒ½ç®¡ç†ä¸€ä¸ªä»»åŠ¡ï¼ˆå–é…’ï¼‰ã€‚å¥¹æ–­ç„¶æ‹’ç»äº†å¥¹å¯ä»¥å¤„ç†ä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡çš„å»ºè®®ã€‚ç„¶è€Œï¼Œå¦‚æœå¥¹å†³å®šåŒæ—¶å¤„ç†ä»»åŠ¡ï¼Œå¥¹ä¼šå”±æ­Œã€‚&lt;/p>
&lt;blockquote>
&lt;p>I will put down this drink to text you, then put my phone away and continue drinking, eh&lt;/p>
&lt;/blockquote>
&lt;p>åœ¨è¿™ä¸ªå‡è®¾çš„å®‡å®™ä¸­ï¼ŒLady Gaga æ­£åœ¨å¤„ç†ä¸¤ä¸ªä»»åŠ¡ï¼šå–é…’å’Œå‘çŸ­ä¿¡ã€‚ç„¶è€Œï¼Œå¥¹å¹¶æ²¡æœ‰åŒæ—¶æ‰§è¡Œè¿™ä¸¤é¡¹ä»»åŠ¡ã€‚ç›¸åï¼Œå¥¹åœ¨è¿™ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œæˆ–è€…è¯´æ˜¯&lt;em>äº¤é”™&lt;/em>ã€‚è¯·æ³¨æ„ï¼Œåœ¨äº¤é”™è¿‡ç¨‹ä¸­ï¼Œä½ ä¸å¿…åœ¨åˆ‡æ¢ä¹‹å‰å®Œå…¨å®Œæˆä¸€é¡¹ä»»åŠ¡ï¼šGaga å¯ä»¥æ‰“ä¸€ä¸ªå­—ï¼Œæ”¾ä¸‹æ‰‹æœºï¼Œæ‹¿èµ·é¥®æ–™å–ä¸€å£ï¼Œç„¶åæ¢å›æ‰‹æœºï¼Œå†æ‰“ä¸€ä¸ªå­—ã€‚&lt;/p>
&lt;p>&lt;em>å¹³è¡Œæ€§&lt;/em>æŒ‡çš„æ˜¯åŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡ã€‚å¦‚æœåŠ åŠ å¤«äººå¹³è¡Œåœ°æ‰§è¡Œå¥¹çš„ä¸¤é¡¹ä»»åŠ¡ï¼Œå¥¹ä¼šå”±æ­Œã€‚&lt;/p>
&lt;blockquote>
&lt;p>I can text you with one hand while I use the other to drink, eh&lt;/p>
&lt;/blockquote>
&lt;p>å¹³è¡Œæ€§æ˜¯å¹¶å‘æ€§çš„ä¸€ä¸ªå­ç±»ï¼šåœ¨ä½ åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ä¹‹å‰ï¼Œä½ é¦–å…ˆè¦ç®¡ç†å¤šä¸ªä»»åŠ¡ã€‚&lt;/p>
&lt;p>Clojure æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå¯ä»¥è®©ä½ è½»æ¾å®ç°å¹¶è¡ŒåŒ–ã€‚è™½ç„¶ Lady Gaga ç³»ç»Ÿæ˜¯é€šè¿‡åœ¨å¤šåªæ‰‹ä¸ŠåŒæ—¶æ‰§è¡Œä»»åŠ¡æ¥å®ç°å¹¶è¡Œçš„ï¼Œä½†è®¡ç®—æœºç³»ç»Ÿä¸€èˆ¬æ˜¯é€šè¿‡åœ¨å¤šä¸ªå¤„ç†å™¨ä¸ŠåŒæ—¶æ‰§è¡Œä»»åŠ¡æ¥å®ç°å¹¶è¡Œçš„ã€‚&lt;/p>
&lt;p>å°†å¹¶è¡Œæ€§ä¸&lt;em>åˆ†å¸ƒå¼åŒºåˆ†å¼€æ¥æ˜¯å¾ˆé‡è¦çš„ã€‚åˆ†å¸ƒå¼è®¡ç®—æ˜¯å¹¶è¡Œè®¡ç®—çš„ä¸€ä¸ªç‰¹æ®Šç‰ˆæœ¬ï¼Œå¤„ç†å™¨åœ¨ä¸åŒçš„è®¡ç®—æœºä¸­ï¼Œä»»åŠ¡é€šè¿‡ç½‘ç»œåˆ†å¸ƒåˆ°è®¡ç®—æœºä¸Šã€‚è¿™å°±åƒ Lady Gaga é—® BeyoncÃ©ï¼Œ&amp;ldquo;è¯·åœ¨æˆ‘å–é…’æ—¶ç»™è¿™å®¶ä¼™å‘çŸ­ä¿¡&amp;rdquo;ã€‚å°½ç®¡ä½ å¯ä»¥å€ŸåŠ©åº“åœ¨ Clojure ä¸­è¿›è¡Œåˆ†å¸ƒå¼ç¼–ç¨‹ï¼Œä½†æœ¬ä¹¦åªæ¶‰åŠå¹¶è¡Œç¼–ç¨‹ï¼Œåœ¨è¿™é‡Œæˆ‘ç”¨&lt;/em>parallel&lt;em>åªæŒ‡åŒå±…çš„å¤„ç†å™¨ã€‚å¦‚æœä½ å¯¹åˆ†å¸ƒå¼ç¼–ç¨‹æ„Ÿå…´è¶£ï¼Œå¯ä»¥å»çœ‹çœ‹ Kyle Kingsbury çš„&lt;/em>Call Me Maybe&lt;em>ç³»åˆ—ï¼Œç½‘å€æ˜¯&lt;/em>&lt;a class="link" href="https://aphyr.com/" target="_blank" rel="noopener"
>https://aphyr.com/&lt;/a>*ã€‚&lt;/p>
&lt;h3 id="é˜»å¡å’Œå¼‚æ­¥ä»»åŠ¡">é˜»å¡å’Œå¼‚æ­¥ä»»åŠ¡&lt;/h3>
&lt;p>å¹¶å‘ç¼–ç¨‹çš„ä¸»è¦ç”¨ä¾‹ä¹‹ä¸€æ˜¯ç”¨äº&lt;em>é˜»å¡&lt;/em>æ“ä½œã€‚é˜»å¡å®é™…ä¸Šæ˜¯æŒ‡ç­‰å¾…ä¸€ä¸ªæ“ä½œçš„å®Œæˆã€‚ä½ æœ€å¸¸å¬åˆ°çš„æ˜¯ä¸ I/O æ“ä½œæœ‰å…³çš„ï¼Œæ¯”å¦‚è¯»å–æ–‡ä»¶æˆ–ç­‰å¾… HTTP è¯·æ±‚çš„å®Œæˆã€‚è®©æˆ‘ä»¬ç”¨ Lady Gaga å¹¶å‘çš„ä¾‹å­æ¥ç ”ç©¶è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;p>å¦‚æœ Lady Gaga ç»™å¥¹çš„å¯¹è¯è€…å‘çŸ­ä¿¡ï¼Œç„¶åæ‹¿ç€æ‰‹æœºç«™åœ¨é‚£é‡Œï¼Œç›¯ç€å±å¹•ç­‰å¾…å›åº”ï¼Œè€Œä¸å–æ°´ï¼Œé‚£ä¹ˆä½ ä¼šè¯´&lt;em>è¯»ä¸‹ä¸€æ¡çŸ­ä¿¡&lt;/em>æ“ä½œæ˜¯é˜»å¡çš„ï¼Œè¿™äº›ä»»åŠ¡æ˜¯*åŒæ­¥æ‰§è¡Œçš„ã€‚&lt;/p>
&lt;p>ç›¸åï¼Œå¦‚æœå¥¹æŠŠæ‰‹æœºæ”¶èµ·æ¥ï¼Œè¿™æ ·å¥¹å°±å¯ä»¥å–é…’äº†ï¼Œç›´åˆ°æ‰‹æœºå‘å‡ºå“”å“”å£°æˆ–æŒ¯åŠ¨æ¥æé†’å¥¹ï¼Œé‚£ä¹ˆ&lt;em>é˜…è¯»ä¸‹ä¸€æ¡çŸ­ä¿¡&lt;/em>ä»»åŠ¡å°±ä¸æ˜¯é˜»å¡çš„ï¼Œä½ ä¼šè¯´å¥¹æ˜¯åœ¨*å¼‚æ­¥åœ°å¤„ç†è¿™ä¸ªä»»åŠ¡ã€‚&lt;/p>
&lt;h3 id="å¹¶å‘ç¼–ç¨‹å’Œå¹¶è¡Œç¼–ç¨‹">å¹¶å‘ç¼–ç¨‹å’Œå¹¶è¡Œç¼–ç¨‹&lt;/h3>
&lt;p>å¹¶å‘ç¼–ç¨‹å’Œå¹¶è¡Œç¼–ç¨‹æŒ‡çš„æ˜¯å°†ä¸€ä¸ªä»»åŠ¡åˆ†è§£æˆå¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„å­ä»»åŠ¡çš„æŠ€æœ¯ï¼Œä»¥åŠç®¡ç†ç¨‹åºåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡æ—¶äº§ç”Ÿçš„é£é™©ã€‚åœ¨æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘å°†äº¤æ›¿ä½¿ç”¨è¿™ä¸¤ä¸ªæœ¯è¯­ï¼Œå› ä¸ºä¸¤è€…çš„é£é™©å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚&lt;/p>
&lt;p>ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™äº›é£é™©ä»¥åŠ Clojure å¦‚ä½•å¸®åŠ©ä½ é¿å…è¿™äº›é£é™©ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ Clojure ä¸­æ˜¯å¦‚ä½•å®ç°å¹¶å‘å’Œå¹¶è¡Œçš„ã€‚&lt;/p>
&lt;h2 id="clojure-å®ç°jvm-çº¿ç¨‹">Clojure å®ç°ã€‚JVM çº¿ç¨‹&lt;/h2>
&lt;p>æˆ‘ä¸€ç›´åœ¨æŠ½è±¡åœ°ä½¿ç”¨*ä»»åŠ¡è¿™ä¸ªè¯ï¼ŒæŒ‡çš„æ˜¯ä¸€ç³»åˆ—ç›¸å…³çš„æ“ä½œï¼Œè€Œä¸è€ƒè™‘è®¡ç®—æœºå¯èƒ½å¦‚ä½•å®ç°ä»»åŠ¡çš„æ¦‚å¿µã€‚ä¾‹å¦‚ï¼Œå‘çŸ­ä¿¡å°±æ˜¯ä¸€ä¸ªç”±ä¸€ç³»åˆ—ç›¸å…³æ“ä½œç»„æˆçš„ä»»åŠ¡ï¼Œå®ƒä¸å¾€ä½ è„¸ä¸Šå€’é¥®æ–™çš„æ“ä½œå®Œå…¨ä¸åŒã€‚&lt;/p>
&lt;p>åœ¨ Clojure ä¸­ï¼Œä½ å¯ä»¥æŠŠä½ æ­£å¸¸çš„ã€&lt;em>ä¸²è¡Œçš„ä»£ç çœ‹ä½œæ˜¯ä»»åŠ¡çš„åºåˆ—ã€‚ä½ å¯ä»¥é€šè¿‡æŠŠä»»åŠ¡æ”¾åœ¨ JVM çš„&lt;/em>çº¿ç¨‹*ä¸Šæ¥è¡¨ç¤ºä»»åŠ¡å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚&lt;/p>
&lt;h3 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹">ä»€ä¹ˆæ˜¯çº¿ç¨‹&lt;/h3>
&lt;p>æˆ‘å¾ˆé«˜å…´ä½ é—®è¿™ä¸ªé—®é¢˜! ä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸€ä¸ªå­ç¨‹åºã€‚ä¸€ä¸ªç¨‹åºå¯ä»¥æœ‰å¾ˆå¤šçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œè‡ªå·±çš„æŒ‡ä»¤é›†ï¼ŒåŒæ—¶äº«å—å¯¹ç¨‹åºçŠ¶æ€çš„å…±äº«è®¿é—®ã€‚&lt;/p>
&lt;p>ï¼&lt;a class="link" href="https://www.braveclojure.com/assets/images/cftbat/concurrency/alligator.png" target="_blank" rel="noopener"
>&lt;/a>&lt;/p>
&lt;p>çº¿ç¨‹ç®¡ç†åŠŸèƒ½å¯ä»¥å­˜åœ¨äºè®¡ç®—æœºçš„å¤šä¸ªå±‚é¢ã€‚ä¾‹å¦‚ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸é€šå¸¸æä¾›ç³»ç»Ÿè°ƒç”¨æ¥åˆ›å»ºå’Œç®¡ç†çº¿ç¨‹ã€‚JVM æä¾›äº†è‡ªå·±çš„ç‹¬ç«‹äºå¹³å°çš„çº¿ç¨‹ç®¡ç†åŠŸèƒ½ï¼Œç”±äº Clojure ç¨‹åºåœ¨ JVM ä¸­è¿è¡Œï¼Œæ‰€ä»¥å®ƒä»¬ä½¿ç”¨ JVM çº¿ç¨‹ã€‚ä½ å°†åœ¨ç¬¬ 12 ç« ä¸­äº†è§£æ›´å¤šå…³äº JVM çš„ä¿¡æ¯ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥æŠŠçº¿ç¨‹çœ‹ä½œæ˜¯ä¸€ä¸ªå®é™…çš„ã€ç‰©ç†çš„çº¿æ®µï¼Œå®ƒæŠŠä¸€è¿ä¸²çš„æŒ‡ä»¤ä¸²èµ·æ¥ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™äº›æŒ‡ä»¤æ˜¯æ£‰èŠ±ç³–ï¼Œå› ä¸ºæ£‰èŠ±ç³–å¾ˆå¥½åƒã€‚å¤„ç†å™¨æŒ‰é¡ºåºæ‰§è¡Œè¿™äº›æŒ‡ä»¤ã€‚æˆ‘æŠŠè¿™æƒ³è±¡æˆä¸€æ¡é³„é±¼åœ¨åƒè¿™äº›æŒ‡ä»¤ï¼Œå› ä¸ºé³„é±¼å–œæ¬¢åƒæ£‰èŠ±ç³–ï¼ˆè¿™æ˜¯äº‹å®ï¼ï¼‰ã€‚å› æ­¤ï¼Œæ‰§è¡Œä¸€ä¸ªç¨‹åºçœ‹èµ·æ¥å°±åƒä¸€å †æ£‰èŠ±ç³–ä¸²åœ¨ä¸€æ¡çº¿ä¸Šï¼Œä¸€æ¡é³„é±¼æ²¿ç€è¿™æ¡çº¿é€ä¸€åƒæ‰ã€‚å›¾ 9-1 æ˜¾ç¤ºäº†å•æ ¸å¤„ç†å™¨æ‰§è¡Œå•çº¿ç¨‹ç¨‹åºçš„è¿™ä¸ªæ¨¡å‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/concurrency/single-thread.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 9-1ï¼šå•æ ¸å¤„ç†å™¨æ‰§è¡Œä¸€ä¸ªå•çº¿ç¨‹çš„ç¨‹åº&lt;/p>
&lt;p>ä¸€ä¸ªçº¿ç¨‹å¯ä»¥*äº§ç”Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¹¶å‘åœ°æ‰§è¡Œä»»åŠ¡ã€‚åœ¨å•å¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œå¤„ç†å™¨åœ¨çº¿ç¨‹ä¹‹é—´æ¥å›åˆ‡æ¢ï¼ˆäº¤ç»‡ï¼‰ã€‚è¿™é‡Œå°±å¼•å…¥äº†æ½œåœ¨çš„å¹¶å‘æ€§é—®é¢˜ã€‚å°½ç®¡å¤„ç†å™¨æŒ‰é¡ºåºæ‰§è¡Œæ¯ä¸ªçº¿ç¨‹çš„æŒ‡ä»¤ï¼Œä½†å®ƒä¸ä¿è¯ä½•æ—¶åœ¨çº¿ç¨‹ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚&lt;/p>
&lt;p>å›¾ 9-2 æ˜¾ç¤ºäº†ä¸¤ä¸ªçº¿ç¨‹ï¼ŒA å’Œ Bï¼Œä»¥åŠå®ƒä»¬çš„æŒ‡ä»¤å¦‚ä½•æ‰§è¡Œçš„æ—¶é—´çº¿ã€‚æˆ‘å¯¹çº¿ç¨‹ B çš„æŒ‡ä»¤åšäº†é˜´å½±å¤„ç†ï¼Œä»¥å¸®åŠ©åŒºåˆ†å®ƒä»¬ä¸çº¿ç¨‹ A çš„æŒ‡ä»¤ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/concurrency/two-threads-one-processor.png"
loading="lazy"
>&lt;/p>
&lt;p>å•æ ¸å¤„ç†å™¨æ‰§è¡Œä¸¤ä¸ªçº¿ç¨‹&lt;/p>
&lt;p>è¯·æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸€ç§å¯èƒ½çš„æŒ‡ä»¤æ‰§è¡Œé¡ºåºã€‚ä¾‹å¦‚ï¼Œå¤„ç†å™¨ä¹Ÿå¯ä»¥æŒ‰ç…§ A1ã€A2ã€A3ã€B1ã€A4ã€B2ã€B3 çš„é¡ºåºæ‰§è¡ŒæŒ‡ä»¤ã€‚è¿™ä½¿ç¨‹åºå˜å¾—&lt;em>ä¸ç¡®å®š&lt;/em>ã€‚ä½ ä¸èƒ½äº‹å…ˆçŸ¥é“ç»“æœæ˜¯ä»€ä¹ˆï¼Œå› ä¸ºä½ æ— æ³•çŸ¥é“æ‰§è¡Œé¡ºåºï¼Œä¸åŒçš„æ‰§è¡Œé¡ºåºä¼šäº§ç”Ÿä¸åŒçš„ç»“æœã€‚&lt;/p>
&lt;p>è¿™ä¸ªä¾‹å­æ˜¾ç¤ºäº†é€šè¿‡äº¤ç»‡åœ¨å•ä¸ªå¤„ç†å™¨ä¸Šçš„å¹¶å‘æ‰§è¡Œï¼Œè€Œå¤šæ ¸ç³»ç»Ÿä¸ºæ¯ä¸ªæ ¸åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œå…è®¸è®¡ç®—æœºåŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„çº¿ç¨‹ã€‚æ¯ä¸ªæ ¸å¿ƒæŒ‰é¡ºåºæ‰§è¡Œå…¶çº¿ç¨‹çš„æŒ‡ä»¤ï¼Œå¦‚å›¾ 9-3 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/concurrency/two-threads-two-processors.png"
loading="lazy"
>&lt;/p>
&lt;p>ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸¤ä¸ªå¤„ç†å™¨ã€‚&lt;/p>
&lt;p>ä¸å•æ ¸ä¸Šçš„äº¤ç»‡ä¸€æ ·ï¼Œæ•´ä½“æ‰§è¡Œé¡ºåºæ²¡æœ‰ä¿è¯ï¼Œæ‰€ä»¥ç¨‹åºæ˜¯ä¸ç¡®å®šçš„ã€‚å½“ä½ åœ¨ç¨‹åºä¸­åŠ å…¥ç¬¬äºŒä¸ªçº¿ç¨‹æ—¶ï¼Œå®ƒå°±å˜å¾—ä¸ç¡®å®šäº†ï¼Œè¿™ä½¿å¾—ä½ çš„ç¨‹åºæœ‰å¯èƒ½æˆä¸ºä¸‰ç§é—®é¢˜çš„ç‰ºç‰²å“ã€‚&lt;/p>
&lt;h3 id="ä¸‰ä¸ªå°å¦–ç²¾å‚è€ƒå•å…ƒäº’æ–¥å’ŒçŸ®äººç‹‚æˆ˜å£«">ä¸‰ä¸ªå°å¦–ç²¾ã€‚å‚è€ƒå•å…ƒã€äº’æ–¥å’ŒçŸ®äººç‹‚æˆ˜å£«&lt;/h3>
&lt;p>å¹¶å‘ç¼–ç¨‹ä¸­æœ‰ä¸‰ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ï¼Œä¹Ÿè¢«ç§°ä¸º &amp;ldquo;ä¸‰ä¸ªå¹¶å‘å¦–ç²¾&amp;rdquo;ã€‚è¦çŸ¥é“ä¸ºä»€ä¹ˆè¿™äº›æ˜¯å¯æ€•çš„ï¼Œæƒ³è±¡ä¸€ä¸‹å›¾ 9-3 ä¸­çš„ç¨‹åºåŒ…æ‹¬è¡¨ 9-1 ä¸­çš„å‡æŒ‡ä»¤ã€‚&lt;/p>
&lt;ol>
&lt;li>éç¡®å®šç»“æœçš„ç¨‹åºçš„æŒ‡ä»¤&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ID&lt;/th>
&lt;th>Instruction&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>A1&lt;/td>
&lt;td>WRITE &lt;code>X = 0&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>A2&lt;/td>
&lt;td>READ &lt;code>X&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>A3&lt;/td>
&lt;td>WRITE &lt;code>X = X + 1&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>B1&lt;/td>
&lt;td>READ &lt;code>X&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>B2&lt;/td>
&lt;td>WRITE &lt;code>X = X + 1&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>å¦‚æœå¤„ç†å™¨éµå¾ª A1, A2, A3, B1, B2 çš„é¡ºåºï¼Œé‚£ä¹ˆ&lt;code>X&lt;/code>çš„å€¼å°†æ˜¯&lt;code>2&lt;/code>ï¼Œæ­£å¦‚ä½ æ‰€æœŸæœ›çš„ã€‚ä½†æ˜¯å¦‚æœå®ƒéµå¾ª A1, A2, B1, A3, B2 çš„é¡ºåºï¼Œ&lt;code>X'çš„å€¼å°†æ˜¯&lt;/code>1&amp;rsquo;ï¼Œæ­£å¦‚ä½ åœ¨å›¾ 9-4 ä¸­çœ‹åˆ°çš„é‚£æ ·ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/concurrency/reference-cell.png"
loading="lazy"
>&lt;/p>
&lt;p>ä¸¤ä¸ªçº¿ç¨‹ä¸ä¸€ä¸ªå¼•ç”¨å•å…ƒè¿›è¡Œäº¤äº’&lt;/p>
&lt;p>æˆ‘ä»¬æŠŠè¿™ç§°ä¸º&lt;em>å‚è€ƒå•å…ƒ&lt;/em>é—®é¢˜ï¼ˆç¬¬ä¸€ä¸ªå¹¶å‘æ€§å¦–ç²¾ï¼‰ã€‚Â å½“ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥å¯¹åŒä¸€ä¸ªä½ç½®è¿›è¡Œè¯»å†™æ—¶ï¼Œå°±ä¼šå‡ºç°å¼•ç”¨å•å…ƒé—®é¢˜ï¼Œè€Œè¯¥ä½ç½®çš„å€¼å–å†³äºè¯»å†™çš„é¡ºåºã€‚&lt;/p>
&lt;p>ç¬¬äºŒä¸ªå¹¶å‘å¦–ç²¾æ˜¯&lt;em>äº’æ–¥&lt;/em>ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªäººéƒ½è¯•å›¾å‘ä¸€ä¸ªæ–‡ä»¶å†™ä¸€ä¸ªå’’è¯­ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•æ–¹æ³•å¯ä»¥è¦æ±‚å¯¹æ–‡ä»¶è¿›è¡Œç‹¬å æ€§çš„å†™å…¥è®¿é—®ï¼Œé‚£ä¹ˆè¿™ä¸ªå’’è¯­æœ€ç»ˆä¼šå˜æˆä¹±ç ï¼Œå› ä¸ºå†™å…¥æŒ‡ä»¤ä¼šè¢«äº¤é”™ä½¿ç”¨ã€‚è€ƒè™‘ä¸€ä¸‹ä»¥ä¸‹ä¸¤ä¸ªå’’è¯­ã€‚&lt;/p>
&lt;blockquote>
&lt;p>By the power invested in me&lt;br>
by the state of California,&lt;br>
I now pronounce you man and wife
Thunder, lightning, wind, and rain,&lt;br>
a delicious sandwich, I summon again&lt;/p>
&lt;/blockquote>
&lt;p>å¦‚æœä½ æŠŠè¿™äº›å†™åˆ°ä¸€ä¸ªæ²¡æœ‰ç›¸äº’æ’æ–¥çš„æ–‡ä»¶ä¸­ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚&lt;/p>
&lt;blockquote>
&lt;p>By the power invested in me&lt;br>
by Thunder, lightning, wind, and rain,&lt;br>
the state of California,&lt;br>
I now pronounce you a delicious man sandwich, and wife&lt;br>
I summon again&lt;/p>
&lt;/blockquote>
&lt;p>ç¬¬ä¸‰ä¸ªå¹¶å‘å¦–ç²¾å°±æ˜¯æˆ‘æ‰€è¯´çš„&lt;em>çŸ®äººç‹‚æˆ˜å£«&lt;/em>é—®é¢˜ï¼ˆåˆç§°&lt;em>æ­»é”&lt;/em>ï¼‰ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå››ä¸ªç‹‚æš´è€…å›´ååœ¨ä¸€å¼ ç²—ç³™çš„åœ†å½¢æœ¨æ¡Œæ—ï¼Œäº’ç›¸å®‰æ…°ã€‚&amp;ldquo;æˆ‘çŸ¥é“æˆ‘å¯¹æˆ‘çš„å­©å­å¾ˆç–è¿œï¼Œä½†æˆ‘å°±æ˜¯ä¸çŸ¥é“å¦‚ä½•ä¸ä»–ä»¬æ²Ÿé€šï¼Œ&amp;ldquo;ä¸€ä¸ªäººå’†å“®é“ã€‚å…¶ä½™çš„äººå•œé¥®ç€å’–å•¡ï¼Œæœ‰æ„æ— æ„åœ°ç‚¹å¤´ï¼Œä»–ä»¬çš„çœ¼è§’å¤„éƒ½æœ‰æŠ¤ç†çº¹ã€‚&lt;/p>
&lt;p>ç°åœ¨ï¼Œæ¯ä¸ªäººéƒ½çŸ¥é“ï¼ŒçŸ®äººç‹‚æˆ˜å£«ç»“æŸèˆ’é€‚çš„å’–å•¡èšä¼šçš„ä»ªå¼æ˜¯æ‹¿èµ·ä»–ä»¬çš„ &amp;ldquo;å®‰æ…°æ£’&amp;rdquo;ï¼ˆåŒåˆƒæˆ˜æ–§ï¼‰ï¼Œäº’ç›¸æŠ“æŒ å¯¹æ–¹çš„èƒŒéƒ¨ã€‚æ¯å¯¹çŸ®äººä¹‹é—´æ”¾ä¸€æŠŠæˆ˜æ–§ï¼Œå¦‚å›¾ 9-5 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>ä»–ä»¬çš„ä»ªå¼æ˜¯è¿™æ ·è¿›è¡Œçš„ã€‚&lt;/p>
&lt;ol>
&lt;li>æ‹¿èµ·&lt;em>å·¦è¾¹&lt;/em>çš„æˆ˜æ–§ï¼Œå¦‚æœæœ‰çš„è¯ã€‚&lt;/li>
&lt;li>æ‹¿èµ·&lt;em>å³è¾¹&lt;/em>æˆ˜æ–§ï¼Œå¦‚æœæœ‰çš„è¯ã€‚&lt;/li>
&lt;li>ç”¨ä½ çš„ &amp;ldquo;å®‰æ…°æ£’ &amp;ldquo;å¤§åŠ›æŒ¥èˆæ¥å®‰æ…°ä½ çš„é‚»å±…ã€‚&lt;/li>
&lt;li>é‡Šæ”¾ä¸¤æŠŠæˆ˜æ–§ã€‚&lt;/li>
&lt;li>é‡å¤ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/concurrency/deadlock.png"
loading="lazy"
>&lt;/p>
&lt;p>çŸ®äººç‹‚çƒ­è€…åœ¨èˆ’é€‚çš„å’–å•¡èšä¼šä¸­&lt;/p>
&lt;p>æŒ‰ç…§è¿™ä¸ªä»ªå¼ï¼Œæ‰€æœ‰çš„çŸ®äººç‹‚æˆ˜å£«å®Œå…¨æœ‰å¯èƒ½æ‹¿èµ·ä»–ä»¬å·¦è¾¹çš„å®‰æ…°æ£’ï¼Œç„¶åæ— é™æœŸåœ°é˜»æŒ¡ï¼ŒåŒæ—¶ç­‰å¾…ä»–ä»¬å³è¾¹çš„å®‰æ…°æ£’å‡ºç°ï¼Œå¯¼è‡´åƒµå±€ã€‚(é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå¦‚æœä½ æƒ³è¿›ä¸€æ­¥ç ”ç©¶è¿™ç§ç°è±¡ï¼Œå®ƒé€šå¸¸è¢«ç§°ä¸º&lt;em>åƒé¥­çš„å“²å­¦å®¶é—®é¢˜&lt;/em>ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªæ›´æ— èŠçš„åœºæ™¯ï¼‰ã€‚æœ¬ä¹¦æ²¡æœ‰è¯¦ç»†è®¨è®ºæ­»é”ï¼Œä½†äº†è§£è¿™ä¸ªæ¦‚å¿µå’Œæœ¯è¯­æ˜¯å¾ˆå¥½çš„ã€‚&lt;/p>
&lt;p>å¹¶å‘ç¼–ç¨‹æœ‰å®ƒçš„å°å¦–ç²¾ï¼Œä½†æœ‰äº†æ­£ç¡®çš„å·¥å…·ï¼Œå®ƒæ˜¯å¯æ§çš„ï¼Œç”šè‡³æ˜¯æœ‰è¶£çš„ã€‚è®©æˆ‘ä»¬å¼€å§‹çœ‹ä¸€ä¸‹æ­£ç¡®çš„å·¥å…·ã€‚&lt;/p>
&lt;h2 id="futures-delays-and-promises">Futures, Delays, and Promises&lt;/h2>
&lt;p>Futureã€å»¶è¿Ÿå’Œ Promise æ˜¯ç”¨äºå¹¶å‘ç¼–ç¨‹çš„ç®€å•ã€è½»ä¾¿çš„å·¥å…·ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ æ¯ä¸ªå·¥å…·çš„å·¥ä½œåŸç†ï¼Œä»¥åŠå¦‚ä½•ä¸€èµ·ä½¿ç”¨å®ƒä»¬æ¥æŠµå¾¡å¼•ç”¨å•å…ƒçš„å¹¶å‘å¦–ç²¾å’Œäº’æ–¥çš„å¹¶å‘å¦–ç²¾ã€‚ä½ ä¼šå‘ç°ï¼Œè™½ç„¶ç®€å•ï¼Œä½†è¿™äº›å·¥å…·å¯¹æ»¡è¶³ä½ çš„å¹¶å‘éœ€æ±‚æœ‰å¾ˆå¤§å¸®åŠ©ã€‚&lt;/p>
&lt;p>å®ƒä»¬é€šè¿‡ç»™äºˆä½ æ¯”ä¸²è¡Œä»£ç æ›´å¤šçš„çµæ´»æ€§æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å½“ä½ å†™ä¸²è¡Œä»£ç æ—¶ï¼Œä½ æŠŠè¿™ä¸‰ä¸ªäº‹ä»¶ç»‘å®šåœ¨ä¸€èµ·ã€‚&lt;/p>
&lt;ul>
&lt;li>ä»»åŠ¡å®šä¹‰&lt;/li>
&lt;li>ä»»åŠ¡æ‰§è¡Œ&lt;/li>
&lt;li>è¦æ±‚ä»»åŠ¡çš„ç»“æœ&lt;/li>
&lt;/ul>
&lt;p>ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªå‡è®¾çš„ä»£ç ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„ API è°ƒç”¨ä»»åŠ¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(web-api/get :dwarven-beard-waxes)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸€æ—¦ Clojure é‡åˆ°è¿™ä¸ªä»»åŠ¡å®šä¹‰ï¼Œå®ƒå°±ä¼šæ‰§è¡Œå®ƒã€‚å®ƒä¹Ÿéœ€è¦&lt;em>ç°åœ¨&lt;/em>çš„ç»“æœï¼Œé˜»å¡ç›´åˆ° API è°ƒç”¨å®Œæˆã€‚å­¦ä¹ å¹¶å‘ç¼–ç¨‹çš„ä¸€éƒ¨åˆ†æ˜¯å­¦ä¼šè¯†åˆ«ä½•æ—¶ä¸éœ€è¦è¿™äº›æ—¶é—´ä¸Šçš„è”æ¥ã€‚Futureã€å»¶è¿Ÿå’Œ Promise å…è®¸ä½ æŠŠä»»åŠ¡å®šä¹‰ã€ä»»åŠ¡æ‰§è¡Œå’Œè¦æ±‚ç»“æœåˆ†å¼€ã€‚ç»§ç»­å‰è¿›!&lt;/p>
&lt;h3 id="future">Future&lt;/h3>
&lt;p>åœ¨ Clojure ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;em>futures&lt;/em>æ¥å®šä¹‰ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šï¼Œè€Œä¸è¦æ±‚ç«‹å³å¾—åˆ°ç»“æœã€‚ä½ å¯ä»¥ç”¨&lt;code>future&lt;/code>å®æ¥åˆ›å»ºä¸€ä¸ªæœªæ¥ã€‚åœ¨ REPL ä¸­è¯•è¯•è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(future (Thread/sleep 4000)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;I&amp;#39;ll print after 4 seconds&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(println &amp;#34;I&amp;#39;ll print immediately&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>Thread/sleep&lt;/code>å‘Šè¯‰å½“å‰çº¿ç¨‹åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…åç€ä»€ä¹ˆéƒ½ä¸åšã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä½ åœ¨ä½ çš„ REPL ä¸­æ±‚å€¼äº†&lt;code>Thread/sleep&lt;/code>ï¼Œä½ å°±ä¸èƒ½æ±‚å€¼ä»»ä½•å…¶ä»–è¯­å¥ï¼Œç›´åˆ° REPL å®Œæˆç¡çœ ï¼›æ‰§è¡Œä½ çš„ REPL çš„çº¿ç¨‹å°†è¢«é˜»å¡ã€‚ç„¶è€Œï¼Œ&lt;code>future&lt;/code>åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶å°†ä½ ä¼ é€’ç»™å®ƒçš„æ¯ä¸ªè¡¨è¾¾å¼æ”¾åœ¨æ–°çš„çº¿ç¨‹ä¸Šï¼ŒåŒ…æ‹¬&lt;code>Thread/sleep&lt;/code>ï¼Œå…è®¸ REPL çš„çº¿ç¨‹ç»§ç»­è¿è¡Œï¼Œä¸å—é˜»å¡ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥ä½¿ç”¨ future åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šè¿è¡Œä»»åŠ¡ï¼Œç„¶åå¿˜è®°å®ƒä»¬ï¼Œä½†ä½ ç»å¸¸æƒ³ä½¿ç”¨ä»»åŠ¡çš„ç»“æœã€‚&lt;code>future&lt;/code>å‡½æ•°è¿”å›ä¸€ä¸ªå¼•ç”¨å€¼ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥è¯·æ±‚ç»“æœã€‚å‚è€ƒå€¼å°±åƒå¹²æ´—åº—ç»™ä½ çš„ç¥¨æ®ï¼šåœ¨ä»»ä½•æ—¶å€™ä½ éƒ½å¯ä»¥ç”¨å®ƒæ¥è¯·æ±‚ä½ çš„å¹²å‡€è¡£æœï¼Œä½†æ˜¯å¦‚æœä½ çš„è¡£æœè¿˜æ²¡æœ‰æ´—å¹²å‡€ï¼Œä½ å°±å¿…é¡»ç­‰å¾…ã€‚ç±»ä¼¼åœ°ï¼Œä½ å¯ä»¥ä½¿ç”¨å‚è€ƒå€¼æ¥è¯·æ±‚ä¸€ä¸ªæœªæ¥çš„ç»“æœï¼Œä½†æ˜¯å¦‚æœæœªæ¥è¿˜æ²¡æœ‰å®Œæˆè®¡ç®—ç»“æœï¼Œä½ å°±å¿…é¡»ç­‰å¾…ã€‚&lt;/p>
&lt;p>è¯·æ±‚ä¸€ä¸ªæœªæ¥çš„ç»“æœè¢«ç§°ä¸º&lt;em>dereferencing&lt;/em>æœªæ¥ï¼Œä½ å¯ä»¥ç”¨&lt;code>deref&lt;/code>å‡½æ•°æˆ–&lt;code>@&lt;/code>è¯»è€…å®æ¥åšã€‚ä¸€ä¸ª future çš„ç»“æœå€¼æ˜¯å…¶ä¸»ä½“ä¸­æœ€åä¸€ä¸ªè¢«æ±‚å€¼çš„è¡¨è¾¾å¼çš„å€¼ã€‚ä¸€ä¸ª future çš„ä¸»ä½“åªæ‰§è¡Œä¸€æ¬¡ï¼Œå®ƒçš„å€¼è¢«ç¼“å­˜èµ·æ¥ã€‚è¯•è¯•ä¸‹é¢çš„æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [result (future (println &amp;#34;this prints once&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (+ 1 1))]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;deref: &amp;#34; (deref result))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;@: &amp;#34; @result))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;this prints once&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; deref: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; @: 2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯·æ³¨æ„ï¼Œ&amp;ldquo;this prints once &amp;ldquo;è¿™ä¸ªå­—ç¬¦ä¸²ç¡®å®åªæ‰“å°äº†ä¸€æ¬¡ï¼Œå°½ç®¡ä½ å¯¹ future è¿›è¡Œäº†ä¸¤æ¬¡æ¨æ–­ã€‚è¿™è¡¨æ˜ future çš„ä¸»ä½“åªè¿è¡Œäº†ä¸€æ¬¡ï¼Œç»“æœ&lt;code>2&lt;/code>è¢«ç¼“å­˜äº†ã€‚&lt;/p>
&lt;p>å¦‚æœæœªæ¥ç¨‹åºè¿˜æ²¡æœ‰å®Œæˆè¿è¡Œï¼Œè§£æŒ‡æœªæ¥ç¨‹åºå°±ä¼šé˜»å¡ï¼Œå°±åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [result (future (Thread/sleep 3000)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (+ 1 1))]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;The result is: &amp;#34; @result)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;It will be at least 3 seconds before I print&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; The result is: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; It will be at least 3 seconds before I print
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ‰æ—¶ä½ æƒ³ä¸ºä¸€ä¸ªæœªæ¥çš„ç­‰å¾…æ—¶é—´è®¾ç½®ä¸€ä¸ªæ—¶é—´é™åˆ¶ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥ç»™&lt;code>deref&lt;/code>ä¸€ä¸ªç­‰å¾…çš„æ¯«ç§’æ•°ï¼Œä»¥åŠå½“&lt;code>deref&lt;/code>è¶…æ—¶æ—¶è¦è¿”å›çš„å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(deref (future (Thread/sleep 1000) 0) 10 5)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç å‘Šè¯‰&lt;code>deref&lt;/code>ï¼Œå¦‚æœ future åœ¨ 10 æ¯«ç§’å†…æ²¡æœ‰è¿”å›ä¸€ä¸ªå€¼ï¼Œåˆ™è¿”å›å€¼&lt;code>5&lt;/code>ã€‚&lt;/p>
&lt;p>æœ€åï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>realized?&lt;/code>æ¥è¯¢é—®ä¸€ä¸ª futureï¼Œçœ‹çœ‹å®ƒæ˜¯å¦å·²ç»è¿è¡Œå®Œæ¯•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(realized? (future (Thread/sleep 1000)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(let [f (future)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (realized? f))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Future æ˜¯ä¸€ç§ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä½ çš„ç¨‹åºä¸­æ’’ä¸Šä¸€äº›å¹¶å‘æ€§ã€‚&lt;/p>
&lt;p>å°±å…¶æœ¬èº«è€Œè¨€ï¼Œå®ƒä»¬è®©ä½ æœ‰èƒ½åŠ›å°†ä»»åŠ¡è½¬ç§»åˆ°å…¶ä»–çº¿ç¨‹ä¸Šï¼Œè¿™å¯ä»¥ä½¿ä½ çš„ç¨‹åºæ›´æœ‰æ•ˆç‡ã€‚å®ƒä»¬è¿˜å¯ä»¥è®©ä½ çš„ç¨‹åºè¡¨ç°å¾—æ›´åŠ çµæ´»ï¼Œè®©ä½ æ§åˆ¶ä½•æ—¶éœ€è¦ä¸€ä¸ªä»»åŠ¡çš„ç»“æœã€‚&lt;/p>
&lt;p>å½“ä½ è§£é™¤å¯¹ä¸€ä¸ª future çš„å¼•ç”¨æ—¶ï¼Œä½ è¡¨æ˜&lt;em>ç°åœ¨&lt;/em>éœ€è¦è¿™ä¸ªç»“æœï¼Œå¹¶ä¸”åœ¨è·å¾—è¿™ä¸ªç»“æœä¹‹å‰åº”è¯¥åœæ­¢è®¡ç®—ã€‚ä½ ä¼šçœ‹åˆ°è¿™å¦‚ä½•å¸®åŠ©ä½ å¤„ç†ç›¸äº’æ’æ–¥çš„é—®é¢˜ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å¿½ç•¥è¿™ä¸ªç»“æœã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ Future æ¥å¼‚æ­¥å†™å…¥ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¸éœ€è¦è§£é™¤å¯¹ Future çš„å¼•ç”¨æ¥è·å¾—ä»»ä½•è¿”å›å€¼ã€‚&lt;/p>
&lt;p>Future ç»™ä½ å¸¦æ¥çš„çµæ´»æ€§æ˜¯éå¸¸é…·çš„ã€‚Clojure è¿˜å…è®¸ä½ ç”¨å»¶è¿Ÿå’Œ Promise æ¥ç‹¬ç«‹å¤„ç†ä»»åŠ¡å®šä¹‰å’Œè¦æ±‚ç»“æœã€‚&lt;/p>
&lt;h3 id="å»¶è¿Ÿ">å»¶è¿Ÿ&lt;/h3>
&lt;p>&lt;em>å»¶è¿Ÿ&lt;/em>å…è®¸ä½ å®šä¹‰ä¸€ä¸ªä»»åŠ¡ï¼Œè€Œä¸éœ€è¦ç«‹å³æ‰§è¡Œå®ƒæˆ–è¦æ±‚å¾—åˆ°ç»“æœã€‚ä½ å¯ä»¥ä½¿ç”¨&lt;code>delay&lt;/code>åˆ›å»ºä¸€ä¸ªå»¶è¿Ÿã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def jackson-5-delay
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (delay (let [message &amp;#34;Just call my name and I&amp;#39;ll be there&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;First deref:&amp;#34; message)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> message)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ²¡æœ‰ä»»ä½•ä¸œè¥¿è¢«æ‰“å°å‡ºæ¥ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰è¦æ±‚å¯¹&lt;code>let&lt;/code>å½¢å¼è¿›è¡Œæ±‚å€¼ã€‚ä½ å¯ä»¥æ±‚å€¼å»¶è¿Ÿï¼Œå¹¶é€šè¿‡è§£æ„å®ƒæˆ–ä½¿ç”¨&lt;code>force&lt;/code>æ¥è·å¾—å…¶ç»“æœã€‚Â &lt;code>force&lt;/code>çš„è¡Œä¸ºä¸&lt;code>deref&lt;/code>ç›¸åŒï¼Œä½†å®ƒæ›´æ¸…æ¥šåœ°è¡¨è¾¾äº†ä½ æ­£åœ¨ä½¿ä¸€ä¸ªä»»åŠ¡å¼€å§‹ï¼Œè€Œä¸æ˜¯ç­‰å¾…ä¸€ä¸ªä»»åŠ¡å®Œæˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(force jackson-5-delay)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; First deref: Just call my name and I&amp;#39;ll be there
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Just call my name and I&amp;#39;ll be there&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åƒ Future ä¸€æ ·ï¼Œå»¶è¿Ÿåªè¿è¡Œä¸€æ¬¡ï¼Œå…¶ç»“æœè¢«ç¼“å­˜ã€‚åç»­çš„å–æ¶ˆå¼•ç”¨å°†è¿”å› Jackson 5 çš„ä¿¡æ¯ï¼Œè€Œä¸æ‰“å°ä»»ä½•ä¸œè¥¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">@jackson-5-delay
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Just call my name and I&amp;#39;ll be there&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥ä½¿ç”¨å»¶è¿Ÿçš„ä¸€ç§æ–¹å¼æ˜¯åœ¨ä¸€ç»„ç›¸å…³çš„ Future ä¸­çš„ä¸€ä¸ª Future ç¬¬ä¸€æ¬¡å®Œæˆæ—¶å¯åŠ¨ä¸€ä¸ªè¯­å¥ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„åº”ç”¨ç¨‹åºå°†ä¸€ç»„å¤´åƒä¸Šä¼ åˆ°ä¸€ä¸ªå¤´åƒåˆ†äº«ç½‘ç«™ï¼Œå¹¶åœ¨ç¬¬ä¸€å¼ å¤´åƒå®Œæˆåç«‹å³é€šçŸ¥æ‰€æœ‰è€…ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def gimli-headshots [&amp;#34;serious.jpg&amp;#34; &amp;#34;fun.jpg&amp;#34; &amp;#34;playful.jpg&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn email-user
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [email-address]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Sending headshot notification to&amp;#34; email-address))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn upload-document
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Needs to be implemented&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [headshot]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> true)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(let [notify (delay âŠ(email-user &amp;#34;and-my-axe@gmail.com&amp;#34;))]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (doseq [headshot gimli-headshots]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (future (upload-document headshot)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â‹(force notify))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å®šä¹‰äº†ä¸€ä¸ªè¦ä¸Šä¼ å¤´åƒçš„ Vectorï¼ˆ&lt;code>gimli-headshots&lt;/code>ï¼‰å’Œä¸¤ä¸ªå‡½æ•°ï¼ˆ&lt;code>email-user&lt;/code>å’Œ&lt;code>upload-document&lt;/code>ï¼‰æ¥å‡è£…æ‰§è¡Œè¿™ä¸¤ä¸ªæ“ä½œã€‚ç„¶åä½ ç”¨&lt;code>let&lt;/code>å°†&lt;code>notify&lt;/code>ç»‘å®šåˆ°ä¸€ä¸ªå»¶è¿Ÿã€‚å»¶è¿Ÿçš„ä¸»ä½“ï¼Œ&lt;code>(email-user &amp;quot;and-my-axe@gmail.com&amp;quot;)&lt;/code>âŠï¼Œåœ¨åˆ›å»ºå»¶è¿Ÿçš„æ—¶å€™å¹¶æ²¡æœ‰è¢«æ±‚å€¼ã€‚ç›¸åï¼Œå½“ç”±&lt;code>doseq&lt;/code>Form åˆ›å»ºçš„ Future ä¹‹ä¸€ç¬¬ä¸€æ¬¡æ±‚å€¼&lt;code>(force notify)&lt;/code>â‹æ—¶ï¼Œå®ƒå°±è¢«æ±‚å€¼äº†ã€‚å³ä½¿&lt;code>(force notify)&lt;/code>å°†è¢«æ±‚å€¼ä¸‰æ¬¡ï¼Œå»¶è¿Ÿä¸»ä½“åªè¢«æ±‚å€¼ä¸€æ¬¡ã€‚Gimli ä¼šå¾ˆé«˜å…´çŸ¥é“ç¬¬ä¸€å¼ å¤´åƒä»€ä¹ˆæ—¶å€™å¯ç”¨ï¼Œè¿™æ ·ä»–å°±å¯ä»¥å¼€å§‹è°ƒæ•´å®ƒå¹¶åˆ†äº«å®ƒã€‚ä»–ä¹Ÿä¼šæ„Ÿè°¢ä¸è¢«åƒåœ¾é‚®ä»¶ï¼Œè€Œä½ ä¹Ÿä¼šæ„Ÿè°¢ä¸é¢å¯¹ä»–çš„çŸ®äººä¹‹æ€’ã€‚&lt;/p>
&lt;p>è¿™ç§æŠ€æœ¯å¯ä»¥å¸®åŠ©ä½ é¿å…ç›¸äº’æ’æ–¥çš„å¹¶å‘å¦–ç²¾&amp;ndash;ç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ç‰¹å®šèµ„æºçš„é—®é¢˜ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå»¶è¿Ÿå®ˆæŠ¤ç€ç”µå­é‚®ä»¶æœåŠ¡å™¨èµ„æºã€‚å› ä¸ºå»¶è¿Ÿçš„ä¸»ä½“è¢«ä¿è¯åªå‘å°„ä¸€æ¬¡ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç¡®å®šä½ æ°¸è¿œä¸ä¼šé‡åˆ°ä¸¤ä¸ªçº¿ç¨‹å‘é€ç›¸åŒé‚®ä»¶çš„æƒ…å†µã€‚å½“ç„¶ï¼Œæ²¡æœ‰çº¿ç¨‹èƒ½å¤Ÿå†æ¬¡ä½¿ç”¨å»¶è¿Ÿæ¥å‘é€é‚®ä»¶ã€‚å¯¹äºå¤§å¤šæ•°æƒ…å†µæ¥è¯´ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªè¿‡äºæ¿€çƒˆçš„çº¦æŸï¼Œä½†åœ¨åƒè¿™ä¸ªä¾‹å­è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯å®Œç¾çš„ã€‚&lt;/p>
&lt;h3 id="promise">Promise&lt;/h3>
&lt;p>&lt;em>Promise&lt;/em>å…è®¸ä½ è¡¨è¾¾ä½ æœŸæœ›çš„ç»“æœï¼Œè€Œä¸éœ€è¦å®šä¹‰åº”è¯¥äº§ç”Ÿç»“æœçš„ä»»åŠ¡æˆ–è¯¥ä»»åŠ¡åº”è¯¥ä½•æ—¶è¿è¡Œã€‚ä½ ç”¨&lt;code>promise'åˆ›å»ºPromiseï¼Œç”¨&lt;/code>deliver&amp;rsquo;å‘ä»–ä»¬ä¼ é€’ä¸€ä¸ªç»“æœã€‚ä½ é€šè¿‡å–æ¶ˆå¼•ç”¨æ¥è·å¾—ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def my-promise (promise))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(deliver my-promise (+ 1 2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@my-promise
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ª promiseï¼Œç„¶åå‘å®ƒä¼ é€’ä¸€ä¸ªå€¼ã€‚æœ€åï¼Œä½ é€šè¿‡è§£é™¤å¯¹ Promise çš„å¼•ç”¨æ¥è·å¾—è¯¥å€¼ã€‚è§£é™¤å¼•ç”¨æ˜¯ä½ è¡¨è¾¾ä½ æœŸæœ›ä¸€ä¸ªç»“æœçš„æ–¹å¼ï¼Œå¦‚æœä½ è¯•å›¾åœ¨æ²¡æœ‰é¦–å…ˆä¼ é€’ä¸€ä¸ªå€¼çš„æƒ…å†µä¸‹è§£é™¤å¼•ç”¨`my-promise&amp;rsquo;ï¼Œç¨‹åºå°†é˜»å¡ï¼Œç›´åˆ°ä¸€ä¸ª Promise è¢«ä¼ é€’ï¼Œå°±åƒ Future å’Œå»¶è¿Ÿä¸€æ ·ã€‚ä½ åªèƒ½å‘ä¸€ä¸ª Promise ä¼ é€’ä¸€æ¬¡ç»“æœã€‚&lt;/p>
&lt;p>Promise çš„ä¸€ä¸ªç”¨é€”æ˜¯åœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡æ„çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æ­£åœ¨æ”¶é›†æˆåˆ†ä»¥ä½¿ä½ çš„é¹¦é¹‰å¬èµ·æ¥åƒè©¹å§†æ–¯-å„å°”-ç¼æ–¯ã€‚å› ä¸ºè©¹å§†æ–¯-å„å°”-ç¼æ–¯çš„å£°éŸ³æ˜¯ä¸–ç•Œä¸Šæœ€é¡ºç•…çš„ï¼Œæ‰€ä»¥å…¶ä¸­ä¸€ç§æˆåˆ†æ˜¯é¡ºç•…åº¦è¾¾åˆ° 97 ä»¥ä¸Šçš„ä¼˜è´¨ç‰¦ç‰›æ²¹ã€‚ä½ çš„é¢„ç®—æ˜¯ 100 ç¾å…ƒä¸€ç£…ã€‚&lt;/p>
&lt;p>ä½ æ˜¯ä¸€ä¸ªç°ä»£ç¥å¥‡é¸Ÿç±»å­¦è‰ºæœ¯çš„å®è·µè€…ï¼Œå› æ­¤ï¼Œä¸å…¶ç¹çåœ°æµè§ˆæ¯ä¸ªç‰¦ç‰›æ²¹é›¶å”®ç½‘ç«™ï¼Œä¸å¦‚åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œç»™ä½ æä¾›ç¬¬ä¸€ä¸ªç¬¦åˆä½ éœ€æ±‚çš„ç‰¦ç‰›æ²¹çš„ URLã€‚&lt;/p>
&lt;p>ä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€äº›ç‰¦ç‰›æ²¹äº§å“ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°æ¥æ¨¡æ‹Ÿ API è°ƒç”¨ï¼Œå¹¶åˆ›å»ºäº†å¦ä¸€ä¸ªå‡½æ•°æ¥æµ‹è¯•äº§å“æ˜¯å¦æ»¡æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def yak-butter-international
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:store &amp;#34;Yak Butter International&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :price 90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :smoothness 90})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def butter-than-nothing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:store &amp;#34;Butter Than Nothing&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :price 150
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :smoothness 83})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; This is the butter that meets our requirements
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def baby-got-yak
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:store &amp;#34;Baby Got Yak&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :price 94
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :smoothness 99})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn mock-api-call
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [result]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Thread/sleep 1000)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> result)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn satisfactory?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;If the butter meets our criteria, return the butter, else return false&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [butter]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (and (&amp;lt;= (:price butter) 100)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (&amp;gt;= (:smoothness butter) 97)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> butter))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥ API è°ƒç”¨åœ¨è¿”å›ç»“æœå‰ç­‰å¾…ä¸€ç§’é’Ÿï¼Œä»¥æ¨¡æ‹Ÿæ‰§è¡Œå®é™…è°ƒç”¨çš„æ—¶é—´ã€‚&lt;/p>
&lt;p>ä¸ºäº†è¯´æ˜åŒæ­¥æ£€æŸ¥ç½‘ç«™éœ€è¦å¤šé•¿æ—¶é—´ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨&lt;code>some&lt;/code>å¯¹é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ åº”ç”¨&lt;code>satisfactory?&lt;/code>å‡½æ•°ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªçœŸå®çš„ç»“æœï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è¿”å› nilã€‚å½“ä½ åŒæ­¥æ£€æŸ¥æ¯ä¸ªç«™ç‚¹æ—¶ï¼Œæ¯ä¸ªç«™ç‚¹å¯èƒ½éœ€è¦è¶…è¿‡ä¸€ç§’é’Ÿçš„æ—¶é—´æ¥è·å¾—ç»“æœï¼Œæ­£å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time (some (comp satisfactory? mock-api-call)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [yak-butter-international butter-than-nothing baby-got-yak]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 3002.132 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:store &amp;#34;Baby Got Yak&amp;#34;, :smoothness 99, :price 94}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæˆ‘ç”¨&lt;code>comp&lt;/code>æ¥ç»„åˆå‡½æ•°ï¼Œæˆ‘ç”¨&lt;code>time&lt;/code>æ¥æ‰“å°æ±‚å€¼ä¸€ä¸ª Form çš„æ—¶é—´ã€‚ä½ å¯ä»¥ä½¿ç”¨ promise å’Œ futures æ¥åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸Šæ‰§è¡Œæ¯ä¸ªæ£€æŸ¥ã€‚å¦‚æœä½ çš„è®¡ç®—æœºæœ‰å¤šä¸ªæ ¸å¿ƒï¼Œè¿™å¯ä»¥æŠŠæ—¶é—´å‡å°‘åˆ°ä¸€ç§’é’Ÿå·¦å³ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [butter-promise (promise)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (doseq [butter [yak-butter-international butter-than-nothing baby-got-yak]]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (future (if-let [satisfactory-butter (satisfactory? (mock-api-call butter))]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (deliver butter-promise satisfactory-butter))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;And the winner is:&amp;#34; @butter-promise)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 1002.652 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; And the winner is: {:store Baby Got Yak, :smoothness 99, :price 94}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª Promiseï¼Œ&lt;code>butter-promise&lt;/code>ï¼Œç„¶ååˆ›å»ºäº†ä¸‰ä¸ªè®¿é—®è¯¥ Promise çš„ Futureã€‚æ¯ä¸ª Future çš„ä»»åŠ¡æ˜¯æ±‚å€¼ä¸€ä¸ªç‰¦ç‰›é»„æ²¹ç½‘ç«™ï¼Œå¦‚æœè¯¥ç½‘ç«™ä»¤äººæ»¡æ„ï¼Œåˆ™å‘ Promise æä¾›è¯¥ç½‘ç«™çš„æ•°æ®ã€‚æœ€åï¼Œä½ è§£é™¤å¯¹&lt;code>butter-promise&lt;/code>çš„å¼•ç”¨ï¼Œå¯¼è‡´ç¨‹åºé˜»å¡ï¼Œç›´åˆ°ç½‘ç«™æ•°æ®è¢«äº¤ä»˜ã€‚è¿™éœ€è¦ä¸€ç§’é’Ÿè€Œä¸æ˜¯ä¸‰ç§’é’Ÿï¼Œå› ä¸ºç½‘ç«™çš„æ±‚å€¼æ˜¯å¹³è¡Œè¿›è¡Œçš„ã€‚é€šè¿‡å°†å¯¹ç»“æœçš„è¦æ±‚ä¸ç»“æœçš„å®é™…è®¡ç®—æ–¹å¼è„±é’©ï¼Œä½ å¯ä»¥å¹¶è¡Œåœ°è¿›è¡Œå¤šä¸ªè®¡ç®—ï¼Œå¹¶èŠ‚çœä¸€äº›æ—¶é—´ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥æŠŠè¿™çœ‹ä½œæ˜¯ä¸€ç§ä¿æŠ¤è‡ªå·±ä¸å—å‚è€ƒå•å…ƒæ ¼å¹¶å‘æ€§å¦–ç²¾å½±å“çš„æ–¹æ³•ã€‚å› ä¸º Promise åªèƒ½è¢«å†™å…¥ä¸€æ¬¡ï¼Œä½ å¯ä»¥é˜²æ­¢éç¡®å®šæ€§è¯»å†™äº§ç”Ÿçš„é‚£ç§ä¸ä¸€è‡´çš„çŠ¶æ€ã€‚&lt;/p>
&lt;p>ä½ å¯èƒ½æƒ³çŸ¥é“ï¼Œå¦‚æœç‰¦ç‰›æ²¹éƒ½ä¸æ»¡æ„ä¼šæ€ä¹ˆæ ·ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè§£é™¤å¼•ç”¨å°†æ°¸è¿œé˜»å¡ï¼Œå¹¶ç»‘ä½çº¿ç¨‹ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥åŠ å…¥ä¸€ä¸ªè¶…æ—¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(è®© [p (promise)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (deref p 100 &amp;#34;timed out&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°†åˆ›å»ºä¸€ä¸ª Promiseï¼Œ&lt;code>p'ï¼Œå¹¶è¯•å›¾è§£é™¤å¯¹å®ƒçš„å¼•ç”¨ã€‚æ•°å­—100å‘Šè¯‰&lt;/code>deref&lt;code>ç­‰å¾…100æ¯«ç§’ï¼Œå¦‚æœå±Šæ—¶æ²¡æœ‰å¯ç”¨çš„å€¼ï¼Œå°±ä½¿ç”¨è¶…æ—¶å€¼ï¼Œ&lt;/code>&amp;ldquo;timed out&amp;rdquo;`ã€‚&lt;/p>
&lt;p>æˆ‘åº”è¯¥æåˆ°çš„æœ€åä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Promise æ¥æ³¨å†Œå›è°ƒï¼Œå®ç°ä¸ä½ åœ¨ JavaScript ä¸­å¯èƒ½ä¹ æƒ¯çš„ç›¸åŒåŠŸèƒ½ã€‚JavaScript çš„å›è°ƒæ˜¯ä¸€ç§å®šä¹‰ä»£ç çš„æ–¹å¼ï¼Œä¸€æ—¦å…¶ä»–ä»£ç å®Œæˆï¼Œå°±åº”è¯¥å¼‚æ­¥æ‰§è¡Œã€‚ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ Clojure ä¸­åšåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [ferengi-wisdom-promise (promise)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (future (println &amp;#34;Here&amp;#39;s some Ferengi wisdom:&amp;#34; @ferengi-wisdom-promise))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Thread/sleep 100)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (deliver ferengi-wisdom-promise &amp;#34;Whisper your way to success.&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Here&amp;#39;s some Ferengi wisdom: Whisper your way to success.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä¾‹å­åˆ›å»ºäº†ä¸€ä¸ªç«‹å³å¼€å§‹æ‰§è¡Œçš„æœªæ¥ã€‚ç„¶è€Œï¼Œæœªæ¥çš„çº¿ç¨‹æ˜¯é˜»å¡çš„ï¼Œå› ä¸ºå®ƒåœ¨ç­‰å¾…ä¸€ä¸ªå€¼è¢«ä¼ é€’ç»™&lt;code>ferengi-wisdom-promise&lt;/code>ã€‚100 æ¯«ç§’åï¼Œä½ äº¤ä»˜äº†å€¼ï¼Œæœªæ¥ä¸­çš„`println&amp;rsquo;è¯­å¥å¼€å§‹è¿è¡Œã€‚&lt;/p>
&lt;p>Futureã€å»¶è¿Ÿå’Œ Promise æ˜¯åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ç®¡ç†å¹¶å‘æ€§çš„ä¼Ÿå¤§è€Œç®€å•çš„æ–¹æ³•ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªæ›´æœ‰è¶£çš„æ–¹æ³•æ¥æ§åˆ¶ä½ çš„å¹¶å‘åº”ç”¨ç¨‹åºã€‚&lt;/p>
&lt;h3 id="æ»šåŠ¨ä½ è‡ªå·±çš„é˜Ÿåˆ—">æ»šåŠ¨ä½ è‡ªå·±çš„é˜Ÿåˆ—&lt;/h3>
&lt;p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»çœ‹åˆ°äº†ä¸€äº›ç®€å•çš„æ–¹æ³•æ¥ç»“åˆ Futureã€å»¶è¿Ÿå’Œ Promiseï¼Œä½¿ä½ çš„å¹¶å‘ç¨‹åºæ›´åŠ å®‰å…¨ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†ä½¿ç”¨ä¸€ä¸ªå®æ¥ä»¥ä¸€ç§ç¨å¾®å¤æ‚çš„æ–¹å¼ç»“åˆ Future å’Œ Promiseã€‚ä½ å¯èƒ½ä¸ä¸€å®šä¼šç”¨åˆ°è¿™æ®µä»£ç ï¼Œä½†å®ƒä¼šæ›´å¤šåœ°å±•ç¤ºè¿™äº›é€‚åº¦çš„å·¥å…·çš„åŠ›é‡ã€‚è¿™ä¸ªå®éœ€è¦ä½ åœ¨å¤´è„‘ä¸­åŒæ—¶æŒæœ‰è¿è¡Œæ—¶é€»è¾‘å’Œå®æ‰©å±•é€»è¾‘ï¼Œä»¥äº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ï¼›å¦‚æœä½ è¢«å¡ä½äº†ï¼Œå°±è·³è¿‡å‰é¢ã€‚&lt;/p>
&lt;p>ä¸‰ä¸ªå¹¶å‘å¦–ç²¾çš„ä¸€ä¸ªå…±åŒç‰¹ç‚¹æ˜¯ï¼Œå®ƒä»¬éƒ½æ¶‰åŠåˆ°ä»»åŠ¡ä»¥ä¸åè°ƒçš„æ–¹å¼å¹¶å‘åœ°è®¿é—®ä¸€ä¸ªå…±äº«èµ„æº&amp;ndash;å˜é‡ã€æ‰“å°æœºã€çŸ®äººæˆ˜æ–§ã€‚å¦‚æœä½ æƒ³ç¡®ä¿æ¯æ¬¡åªæœ‰ä¸€ä¸ªä»»åŠ¡ä¼šè®¿é—®ä¸€ä¸ªèµ„æºï¼Œä½ å¯ä»¥æŠŠä»»åŠ¡çš„èµ„æºè®¿é—®éƒ¨åˆ†æ”¾åœ¨ä¸€ä¸ªåºåˆ—æ‰§è¡Œçš„é˜Ÿåˆ—ä¸­ã€‚è¿™æœ‰ç‚¹åƒåšè›‹ç³•ï¼šä½ å’Œä¸€ä¸ªæœ‹å‹å¯ä»¥åˆ†åˆ«å–å›åŸæ–™ï¼ˆé¸¡è›‹ã€é¢ç²‰ã€è¾èˆçš„çœ¼ç›ï¼Œç­‰ç­‰ï¼‰ï¼Œä½†æœ‰äº›æ­¥éª¤ä½ å¿…é¡»è¿ç»­æ‰§è¡Œã€‚ä½ å¿…é¡»åœ¨æŠŠé¢ç³Šæ”¾è¿›çƒ¤ç®±ä¹‹å‰å‡†å¤‡å¥½å®ƒã€‚å›¾ 9-6 è¯´æ˜äº†è¿™ä¸ªç­–ç•¥ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/concurrency/enqueue.png"
loading="lazy"
>&lt;/p>
&lt;p>å°†ä»»åŠ¡åˆ†ä¸ºä¸²è¡Œéƒ¨åˆ†å’Œå¹¶å‘éƒ¨åˆ†ï¼Œå¯ä»¥è®©ä½ å®‰å…¨åœ°ä½¿ä½ çš„ä»£ç æ›´æœ‰æ•ˆç‡ã€‚&lt;/p>
&lt;p>ä¸ºäº†å®ç°æ’é˜Ÿå®ï¼Œä½ è¦å‘è‹±å›½äººè‡´æ•¬ï¼Œå› ä¸ºä»–ä»¬å‘æ˜äº†é˜Ÿåˆ—ã€‚ä½ å°†ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥ç¡®ä¿è‹±å›½äººä¹ æƒ¯çš„é—®å€™è¯­ &amp;ldquo;Ello, gov&amp;rsquo;na! Pip Pip! Cheerio!&amp;ldquo;çš„æ­£ç¡®é¡ºåºè¿›è¡Œä¼ é€’ã€‚è¿™ä¸ªæ¼”ç¤ºå°†æ¶‰åŠåˆ°å¤§é‡çš„ &amp;ldquo;ç¡çœ &amp;rdquo;ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ä¸€ä¸ªå®æ¥æ›´ç®€æ´åœ°å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="n">defmacro&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">wait&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Sleep `timeout` seconds before evaluating body&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">do&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Thread&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sleep&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">~@&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç æ‰€åšçš„å°±æ˜¯æ¥å—ä½ ç»™å®ƒçš„ä»»ä½•å½¢å¼ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹å‰æ’å…¥å¯¹&lt;code>Thread/sleep&lt;/code>çš„è°ƒç”¨ï¼Œæ‰€æœ‰è¿™äº›éƒ½è¢«&lt;code>do&lt;/code>åŒ…è£¹èµ·æ¥ã€‚&lt;/p>
&lt;p>æ¸…å• 9-1 ä¸­çš„ä»£ç å°†ä»»åŠ¡åˆ†æˆäº†å¹¶å‘éƒ¨åˆ†å’Œåºåˆ—åŒ–éƒ¨åˆ†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [saying3 (promise)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (future (deliver saying3 (wait 100 &amp;#34;Cheerio!&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @(let [saying2 (promise)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (future (deliver saying2 (wait 400 &amp;#34;Pip pip!&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ @(let [saying1 (promise)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (future (deliver saying1 (wait 200 &amp;#34;&amp;#39;Ello, gov&amp;#39;na!&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println @saying1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> saying1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println @saying2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> saying2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println @saying3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> saying3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>9-1. ä¸€ä¸ª enqueue å®è°ƒç”¨çš„æ‰©å±•&lt;/li>
&lt;/ol>
&lt;p>æ•´ä½“ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªä»»åŠ¡ï¼ˆåœ¨æœ¬ä¾‹ä¸­ï¼Œæ‰“å°é—®å€™è¯­çš„ä¸€éƒ¨åˆ†ï¼‰åˆ›å»ºä¸€ä¸ª Promiseï¼Œä»¥åˆ›å»ºä¸€ä¸ªç›¸åº”çš„æœªæ¥ï¼Œå°†å¹¶å‘è®¡ç®—çš„å€¼äº¤ä»˜ç»™è¯¥ Promiseã€‚è¿™ç¡®ä¿äº†åœ¨ä»»ä½•ä¸€ä¸ª Promise è¢«è§£é™¤å¼•ç”¨ä¹‹å‰ï¼Œæ‰€æœ‰çš„æœªæ¥éƒ½è¢«åˆ›å»ºï¼Œå¹¶ä¸”ç¡®ä¿åºåˆ—åŒ–çš„éƒ¨åˆ†ä»¥æ­£ç¡®çš„é¡ºåºæ‰§è¡Œã€‚é¦–å…ˆæ‰“å°&lt;code>saying1'çš„å€¼-&lt;/code>&amp;quot;&amp;lsquo;Ello, gov&amp;rsquo;na!&amp;quot;-ç„¶åæ˜¯&lt;code>saying2'çš„å€¼ï¼Œæœ€åæ˜¯&lt;/code>saying3&amp;rsquo;ã€‚åœ¨&lt;code>let&lt;/code>å—ä¸­è¿”å›&lt;code>saying1&lt;/code>ï¼Œå¹¶åœ¨âŠå¤„è§£é™¤å¯¹&lt;code>let&lt;/code>å—çš„å¼•ç”¨ï¼Œå¯ä»¥ç¡®ä¿åœ¨ä»£ç ç»§ç»­å¯¹&lt;code>saying2&lt;/code>åšä»»ä½•äº‹æƒ…ä¹‹å‰ï¼Œä½ å·²ç»å®Œå…¨å®Œæˆäº†&lt;code>saying1&lt;/code>ï¼Œè€Œä¸”è¿™ç§æ¨¡å¼åœ¨&lt;code>saying2&lt;/code>å’Œ&lt;code>saying3&lt;/code>ä¸Šé‡å¤ã€‚&lt;/p>
&lt;p>è§£é™¤å¯¹&lt;code>let&lt;/code>å—çš„å¼•ç”¨ä¼¼ä¹å¾ˆå‚»ï¼Œä½†è¿™æ ·åšå¯ä»¥è®©ä½ ç”¨ä¸€ä¸ªå®æ¥æŠ½è±¡è¿™æ®µä»£ç ã€‚ä½ è‚¯å®šæƒ³ä½¿ç”¨å®ï¼Œå› ä¸ºåƒå‰é¢çš„ä¾‹å­é‚£æ ·å†™å‡ºçš„ä»£ç ä¼šè®©ä½ å‘ç–¯ï¼ˆè‹±å›½äººä¼šè¿™ä¹ˆè¯´ï¼‰ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå®çš„å·¥ä½œæ–¹å¼å¦‚æ¸…å• 9-2 æ‰€ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(-&amp;gt; (enqueue âŠsaying â‹(wait 200 &amp;#34;&amp;#39;Ello, gov&amp;#39;na!&amp;#34;) âŒ(println @saying))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â(enqueue saying (wait 400 &amp;#34;Pip pip!&amp;#34;) (println @saying))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (enqueue saying (wait 100 &amp;#34;Cheerio!&amp;#34;) (println @saying)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>è¿™å°±æ˜¯ä½ ä½¿ç”¨ enqueue çš„æ–¹æ³•ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¯¥å®è®©ä½ å‘½åè¢«åˆ›å»ºçš„ PromiseâŠï¼Œå®šä¹‰å¦‚ä½•è·å–ä»·å€¼ä»¥äº¤ä»˜è¯¥ Promiseâ‹ï¼Œå¹¶å®šä¹‰å¦‚ä½•å¤„ç†è¯¥ PromiseâŒã€‚è¿™ä¸ªå®ä¹Ÿå¯ä»¥æŠŠå¦ä¸€ä¸ª&lt;code>enqueue&lt;/code>å®è°ƒç”¨ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æŠŠå®ƒå˜æˆçº¿ç¨‹âã€‚æ¸…å• 9-3 æ˜¾ç¤ºäº†ä½ å¦‚ä½•å®šä¹‰&lt;code>enqueue&lt;/code>å®ã€‚å®šä¹‰å®Œ&lt;code>enqueue&lt;/code>åï¼Œæ¸…å• 9-2 ä¸­çš„ä»£ç å°†æ‰©å±•ä¸ºæ¸…å• 9-1 ä¸­çš„ä»£ç ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰åµŒå¥—çš„&lt;code>let&lt;/code>è¡¨è¾¾å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro enqueue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ ([q concurrent-promise-name concurrent serialized]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ `(let [~concurrent-promise-name (promise)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (future (deliver ~concurrent-promise-name ~concurrent))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (deref ~q)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~serialized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~concurrent-promise-name))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â ([concurrent-promise-name concurrent serialized]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(enqueue (future) ~concurrent-promise-name ~concurrent ~serialized)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>1.enqueue çš„å®ç°&lt;/p>
&lt;p>é¦–å…ˆæ³¨æ„è¿™ä¸ªå®æœ‰ä¸¤ä¸ª aritiesï¼Œä»¥ä¾¿æä¾›ä¸€ä¸ªç¼ºçœå€¼ã€‚ç¬¬ä¸€ä¸ª arity âŠæ˜¯çœŸæ­£çš„å·¥ä½œæ‰€åœ¨ã€‚å®ƒæœ‰å‚æ•°&lt;code>q&lt;/code>ï¼Œè€Œç¬¬äºŒä¸ª arity åˆ™æ²¡æœ‰ã€‚ç¬¬äºŒä¸ª arity âè°ƒç”¨ç¬¬ä¸€ä¸ª arityï¼Œä¸º&lt;code>q&lt;/code>æä¾›äº†&lt;code>(future)&lt;/code>çš„å€¼ï¼›ä½ å°†åœ¨ä¸€åˆ†é’Ÿå†…çœ‹åˆ°åŸå› ã€‚åœ¨â‹ä¸­ï¼Œå®è¿”å›ä¸€ä¸ª Formï¼Œè¯¥ Form åˆ›å»ºäº†ä¸€ä¸ª Promiseï¼Œåœ¨ä¸€ä¸ª future ä¸­ä¼ é€’å®ƒçš„å€¼ï¼Œå–æ¶ˆå¯¹æä¾›ç»™&lt;code>q&lt;/code>çš„ä»»ä½• Form çš„å¼•ç”¨ï¼Œæ±‚å€¼åºåˆ—åŒ–ä»£ç ï¼Œæœ€åè¿”å› Promiseã€‚&lt;code>q&lt;/code>é€šå¸¸æ˜¯ä¸€ä¸ªåµŒå¥—çš„&lt;code>let&lt;/code>è¡¨è¾¾å¼ï¼Œç”±å¦ä¸€ä¸ªå¯¹&lt;code>enqueue&lt;/code>çš„è°ƒç”¨è¿”å›ï¼Œå¦‚æ¸…å• 9-2 æ‰€ç¤ºã€‚å¦‚æœæ²¡æœ‰ä¸º&lt;code>q&lt;/code>æä¾›å€¼ï¼Œå®ä¼šæä¾›ä¸€ä¸ªæœªæ¥ï¼Œè¿™æ ·åœ¨âŒçš„&lt;code>deref&lt;/code>å°±ä¸ä¼šå¼•èµ·å¼‚å¸¸ã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬å·²ç»å†™å¥½äº†&lt;code>enqueue&lt;/code>å®ï¼Œè®©æˆ‘ä»¬è¯•è¯•å®ƒæ˜¯å¦èƒ½å‡å°‘æ‰§è¡Œæ—¶é—´&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time @(-&amp;gt; (enqueue saying (wait 200 &amp;#34;&amp;#39;Ello, gov&amp;#39;na!&amp;#34;) (println @saying))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (enqueue saying (wait 400 &amp;#34;Pip pip!&amp;#34;) (println @saying))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (enqueue saying (wait 100 &amp;#34;Cheerio!&amp;#34;) (println @saying))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#39;Ello, gov&amp;#39;na!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Pip pip!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Cheerio!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 401.635 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¤©å“ª! é—®å€™è¯­æ˜¯æŒ‰ç…§æ­£ç¡®çš„é¡ºåºä¼ é€’çš„ï¼Œä½ å¯ä»¥é€šè¿‡è€—æ—¶çœ‹åˆ°ï¼Œç¡çœ çš„ &amp;ldquo;å·¥ä½œ &amp;ldquo;æ˜¯åŒæ—¶è¿›è¡Œçš„ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>å¯¹äºåƒä½ è¿™æ ·çš„ç¨‹åºå‘˜æ¥è¯´ï¼Œå­¦ä¹ å¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹æŠ€æœ¯å¾ˆé‡è¦ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è®¾è®¡å‡ºåœ¨ç°ä»£ç¡¬ä»¶ä¸Šé«˜æ•ˆè¿è¡Œçš„ç¨‹åºã€‚å¹¶å‘æ˜¯æŒ‡ä¸€ä¸ªç¨‹åºèƒ½å¤Ÿæ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ä»»åŠ¡ï¼Œåœ¨ Clojure ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å°†ä»»åŠ¡æ”¾åœ¨ä¸åŒçš„çº¿ç¨‹ä¸Šæ¥å®ç°ã€‚å½“è®¡ç®—æœºæœ‰ä¸€ä¸ªä»¥ä¸Šçš„ CPU æ—¶ï¼Œç¨‹åºå°±ä¼šå¹¶è¡Œæ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨åŒä¸€æ—¶é—´æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„çº¿ç¨‹ã€‚&lt;/p>
&lt;p>å¹¶å‘ç¼–ç¨‹æŒ‡çš„æ˜¯ç”¨äºç®¡ç†ä¸‰ç§å¹¶å‘é£é™©çš„æŠ€æœ¯ï¼šå¼•ç”¨å•å…ƒã€äº’æ–¥å’Œæ­»é”ã€‚Clojure ä¸ºä½ æä¾›äº†ä¸‰ä¸ªåŸºæœ¬å·¥å…·ï¼Œå¸®åŠ©ä½ å‡è½»è¿™äº›é£é™©ï¼šFutureã€å»¶è¿Ÿå’Œ Promiseã€‚æ¯ä¸ªå·¥å…·éƒ½å¯ä»¥è®©ä½ æŠŠå®šä¹‰ä»»åŠ¡ã€æ‰§è¡Œä»»åŠ¡å’Œè¦æ±‚ä»»åŠ¡ç»“æœè¿™ä¸‰ä¸ªäº‹ä»¶è§£è€¦ã€‚Future è®©ä½ å®šä¹‰ä¸€ä¸ªä»»åŠ¡å¹¶ç«‹å³æ‰§è¡Œå®ƒï¼Œå…è®¸ä½ ç¨åæˆ–æ°¸è¿œä¸è¦æ±‚ç»“æœã€‚Â Future ä¹Ÿä¼šç¼“å­˜å…¶ç»“æœã€‚å»¶è¿Ÿï¼ˆDelayï¼‰è®©ä½ å®šä¹‰ä¸€ä¸ªç¨åæ‰æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä¸”å»¶è¿Ÿçš„ç»“æœä¼šè¢«ç¼“å­˜èµ·æ¥ã€‚è®¸è¯ºè®©ä½ è¡¨è¾¾ä½ éœ€è¦ä¸€ä¸ªç»“æœï¼Œè€Œä¸éœ€è¦çŸ¥é“äº§ç”Ÿè¯¥ç»“æœçš„ä»»åŠ¡ã€‚ä½ åªèƒ½å‘ä¸€ä¸ª Promise ä¼ é€’ä¸€æ¬¡å€¼ã€‚&lt;/p>
&lt;p>åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œä½ å°†æ¢ç´¢å¹¶å‘ç¼–ç¨‹çš„å“²å­¦å±‚é¢ï¼Œå¹¶å­¦ä¹ æ›´å¤æ‚çš„å·¥å…·æ¥ç®¡ç†é£é™©ã€‚&lt;/p>
&lt;h2 id="ç»ƒä¹ ">ç»ƒä¹ &lt;/h2>
&lt;ol>
&lt;li>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œä½¿ç”¨&lt;code>slurp&lt;/code>å‡½æ•°åœ¨ Bing å’Œ Google ä¸Šæœç´¢å®ƒã€‚ä½ çš„å‡½æ•°åº”è¯¥è¿”å›æœç´¢åˆ°çš„ç¬¬ä¸€ä¸ªé¡µé¢çš„ HTMLã€‚&lt;/li>
&lt;li>æ›´æ–°ä½ çš„å‡½æ•°ï¼Œä½¿å…¶æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬è¦ä½¿ç”¨çš„æœç´¢å¼•æ“ã€‚&lt;/li>
&lt;li>åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå°†æœç´¢è¯å’Œæœç´¢å¼•æ“ä½œä¸ºå‚æ•°ï¼Œå¹¶ä»æ¯ä¸ªæœç´¢å¼•æ“çš„ç¬¬ä¸€é¡µæœç´¢ç»“æœä¸­è¿”å›ä¸€ä¸ª URL çš„ Vectorã€‚&lt;/li>
&lt;/ol></description></item><item><title>Chapter8 å®</title><link>https://example.com/p/chapter8-%E5%AE%8F/</link><pubDate>Sat, 15 Jan 2022 12:22:42 +0800</pubDate><guid>https://example.com/p/chapter8-%E5%AE%8F/</guid><description>&lt;h1 id="ç¼–å†™å®">ç¼–å†™å®&lt;/h1>
&lt;p>å½“æˆ‘ 18 å²æ—¶ï¼Œæˆ‘åœ¨æ–°å¢¨è¥¿å“¥å·åœ£è²çš„ä¸€å®¶é…’åº—æ‰¾åˆ°äº†ä¸€ä»½å¤œç­å®¡è®¡å¸ˆçš„å·¥ä½œï¼Œæ¯å‘¨å·¥ä½œå››ä¸ªæ™šä¸Šï¼Œä»æ™šä¸Š 11 ç‚¹åˆ°æ—©ä¸Š 7 ç‚¹ã€‚ç»è¿‡å‡ ä¸ªæœˆçš„è¿™ç§ä¸çœ ä¸ä¼‘çš„å·¥ä½œï¼Œæˆ‘çš„æƒ…ç»ªæœ‰äº†è‡ªå·±çš„å˜åŒ–ã€‚ä¸€å¤©æ™šä¸Šï¼Œå¤§çº¦åœ¨&lt;/p>
&lt;p>å‡Œæ™¨ 3 ç‚¹ï¼Œæˆ‘æ­£åœ¨çœ‹ä¸€ä¸ªä¿¡æ¯å¹¿å‘Šï¼Œè¯¥äº§å“å£°ç§°å¯ä»¥æ¢å¤ç”·äººçš„å¤´å‘ã€‚å½“æˆ‘çœ‹åˆ°ä¸€ä¸ªæ›¾ç»ç§ƒå¤´çš„äººçš„æ•…äº‹æ—¶ï¼Œæˆ‘è¢«çœŸè¯šçš„å–œæ‚¦æ‰€æ·¹æ²¡ã€‚&amp;ldquo;ç»ˆäºæ¥äº†ï¼&amp;ldquo;æˆ‘çš„å¤§è„‘æ¶ŒåŠ¨ç€ã€‚&amp;ldquo;è¿™ä¸ªäººå¾—åˆ°äº†ä»–åº”å¾—çš„çˆ±å’ŒæˆåŠŸ! å¤šä¹ˆä¸å¯æ€è®®çš„äº§å“ï¼Œç»™æ— æœ›çš„äººä»¥å¸Œæœ›ï¼&amp;rdquo;&lt;/p>
&lt;p>ä»é‚£æ—¶èµ·ï¼Œæˆ‘å‘ç°è‡ªå·±ä¸€ç›´åœ¨æƒ³ï¼Œæˆ‘æ˜¯å¦èƒ½ä»¥æŸç§æ–¹å¼é‡æ–°åˆ›é€ å› é•¿æœŸç¡çœ ä¸è¶³è€Œå¼•èµ·çš„æƒ…æ„Ÿæ”¾å¼ƒå’Œå¯¹ç”Ÿå‘½çš„æ¬£èµã€‚ä¹Ÿè®¸æ˜¯æŸç§è¯æ°´&amp;ndash;å–ä¸Šå‡ å£ï¼Œé‡Šæ”¾æˆ‘å†…å¿ƒçš„ç†æŸ¥å¾·-è¥¿è’™æ–¯ï¼Œä½†æ—¶é—´ä¸ä¼šå¤ªé•¿ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/writing-macros/simmons-potion.png"
loading="lazy"
>&lt;/p>
&lt;p>å°±åƒè¯æ°´å¯ä»¥è®©æˆ‘æš‚æ—¶æ”¹å˜æˆ‘çš„åŸºæœ¬æ€§è´¨ä¸€æ ·ï¼Œå®å…è®¸ä½ ä»¥å…¶ä»–è¯­è¨€æ— æ³•å®ç°çš„æ–¹å¼ä¿®æ”¹ Clojureã€‚æœ‰äº†å®ï¼Œä½ å¯ä»¥æ‰©å±• Clojure ä»¥é€‚åº”ä½ çš„é—®é¢˜ç©ºé—´ï¼Œå»ºç«‹èµ·è¯­è¨€ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†å½»åº•ç ”ç©¶å¦‚ä½•ç¼–å†™å®ï¼Œä»åŸºæœ¬çš„ä¾‹å­å¼€å§‹ï¼Œé€æ­¥æé«˜å¤æ‚æ€§ã€‚æœ€åï¼Œä½ å°†æˆ´ä¸Šä½ çš„å‡æƒ³å¸½ï¼Œç”¨å®æ¥éªŒè¯ä½ æƒ³è±¡ä¸­çš„åœ¨çº¿è¯æ°´åº—çš„å®¢æˆ·è®¢å•ã€‚&lt;/p>
&lt;p>åœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ å°†äº†è§£ä½ ç”¨æ¥ç¼–å†™å®çš„æ‰€æœ‰å·¥å…·ï¼šå¼•å·ã€è¯­æ³•å¼•å·ã€è§£å¼•å·ã€è§£å¼•å·æ‹¼æ¥ï¼ˆåˆç§°çš®çº³å¡”å·¥å…·ï¼‰å’Œ gensymã€‚ä½ è¿˜ä¼šäº†è§£åˆ°å¯¹æ¯«æ— æˆ’å¿ƒçš„å®ä½œè€…æ¥è¯´éšè—ç€çš„å±é™©ï¼šåŒé‡æ±‚å€¼ã€å˜é‡æ•è·å’Œå®æ„ŸæŸ“ã€‚&lt;/p>
&lt;h2 id="å®æ˜¯å¿…ä¸å¯å°‘çš„">å®æ˜¯å¿…ä¸å¯å°‘çš„&lt;/h2>
&lt;p>åœ¨ä½ å¼€å§‹ç¼–å†™å®ä¹‹å‰ï¼Œæˆ‘æƒ³å¸®åŠ©ä½ æŠŠå®ƒä»¬æ”¾åœ¨é€‚å½“çš„ç¯å¢ƒä¸­ã€‚æ˜¯çš„ï¼Œå®æ¯”åŒ—æç†Šçš„è„šè¶¾ç”²è¿˜è¦é…·ï¼Œä½†ä½ ä¸åº”è¯¥æŠŠå®çœ‹æˆæ˜¯ä¸€äº›æ·±å¥¥çš„å·¥å…·ï¼Œå½“ä½ æƒ³å¯¹ä½ çš„ä»£ç è¿›è¡Œé¢å¤–çš„èŠ±å“¨å¤„ç†æ—¶ï¼Œå°±æŠŠå®ƒæ‹¿å‡ºæ¥ã€‚äº‹å®ä¸Šï¼Œå®å…è®¸ Clojure ä»ä¸€ä¸ªå¾ˆå°çš„å‡½æ•°å’Œç‰¹æ®Šå½¢å¼çš„æ ¸å¿ƒä¸­è·å¾—å¤§é‡çš„å†…ç½®åŠŸèƒ½ã€‚ä»¥&lt;code>when&lt;/code>ä¸ºä¾‹ã€‚Â &lt;code>when&lt;/code>æœ‰è¿™æ ·çš„ä¸€èˆ¬å½¢å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(when boolean-expression
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expression-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expression-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expression-3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expression-x)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯èƒ½è®¤ä¸º&lt;code>when&lt;/code>æ˜¯ä¸€ä¸ªåƒ&lt;code>if&lt;/code>ä¸€æ ·çš„ç‰¹æ®Šå½¢å¼ã€‚é‚£ä¹ˆä½ çŒœæ€ä¹ˆç€ï¼Ÿå®ƒä¸æ˜¯! åœ¨å¤§å¤šæ•°å…¶ä»–è¯­è¨€ä¸­ï¼Œä½ åªèƒ½ä½¿ç”¨ç‰¹æ®Šçš„å…³é”®å­—æ¥åˆ›å»ºæ¡ä»¶è¡¨è¾¾å¼ï¼Œè€Œæ²¡æœ‰åŠæ³•åˆ›å»ºä½ è‡ªå·±çš„æ¡ä»¶è¿ç®—ç¬¦ã€‚ç„¶è€Œï¼Œ&lt;code>when&lt;/code>å®é™…ä¸Šæ˜¯ä¸€ä¸ªå®ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸ªå®æ‰©å±•ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°&lt;code>when&lt;/code>æ˜¯ç”¨&lt;code>if&lt;/code>å’Œ&lt;code>do&lt;/code>æ¥å®ç°çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(macroexpand &amp;#39;(when boolean-expression
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expression-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expression-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expression-3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (if boolean-expression
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do expression-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expression-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expression-3))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™è¡¨æ˜å®æ˜¯ Clojure å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†&amp;ndash;å®ƒä»¬ç”šè‡³è¢«ç”¨æ¥æä¾›åŸºæœ¬æ“ä½œã€‚å®å¹¶ä¸æ˜¯ä¸ºå¥‡ç‰¹çš„ç‰¹æ®Šæƒ…å†µè€Œä¿ç•™çš„ï¼›ä½ åº”è¯¥æŠŠå†™å®çœ‹ä½œæ˜¯ä½ å·¥å…·åŒ…ä¸­çš„å¦ä¸€ä¸ªå·¥å…·ã€‚å½“ä½ å­¦ä¼šç¼–å†™è‡ªå·±çš„å®æ—¶ï¼Œä½ ä¼šå‘ç°å®ƒä»¬æ˜¯å¦‚ä½•è®©ä½ è¿›ä¸€æ­¥æ‰©å±•è¯­è¨€ï¼Œä½¿å…¶é€‚åˆä½ çš„ç‰¹å®šé—®é¢˜é¢†åŸŸçš„å½¢çŠ¶ã€‚&lt;/p>
&lt;h2 id="è§£å‰–å·¨é›†">è§£å‰–å·¨é›†&lt;/h2>
&lt;p>å·¨é›†å®šä¹‰çœ‹èµ·æ¥å¾ˆåƒå‡½æ•°å®šä¹‰ã€‚å®ƒä»¬æœ‰ä¸€ä¸ªåç§°ï¼Œä¸€ä¸ªå¯é€‰çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œä»¥åŠä¸€ä¸ªä¸»ä½“ã€‚ä¸»ä½“å‡ ä¹æ€»æ˜¯è¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚è¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºå®æ˜¯å°†æ•°æ®ç»“æ„è½¬åŒ–ä¸º Clojure å¯ä»¥æ±‚å€¼çš„å½¢å¼çš„ä¸€ç§æ–¹å¼ï¼Œè€Œ Clojure ä½¿ç”¨åˆ—è¡¨æ¥è¡¨ç¤ºå‡½æ•°è°ƒç”¨ã€ç‰¹æ®Šå½¢å¼è°ƒç”¨å’Œå®è°ƒç”¨ã€‚ä½ å¯ä»¥åœ¨å®ä¸»ä½“ä¸­ä½¿ç”¨ä»»ä½•å‡½æ•°ã€å®æˆ–ç‰¹æ®Šå½¢å¼ï¼Œä½ è°ƒç”¨å®å°±åƒè°ƒç”¨å‡½æ•°æˆ–ç‰¹æ®Šå½¢å¼ä¸€æ ·ã€‚&lt;/p>
&lt;p>ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè¿™é‡Œæœ‰æˆ‘ä»¬çš„è€æœ‹å‹&lt;code>infix&lt;/code>å®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro infix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Use this macro when you pine for the notation of your childhood&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [infixed]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list (second infixed) (first infixed) (last infixed)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå®å°†ä¸€ä¸ªåˆ—è¡¨é‡æ–°æ’åˆ—æˆæ­£ç¡®çš„ infix è®°å·é¡ºåºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(infix (1 + 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡½æ•°å’Œå®ä¹‹é—´çš„ä¸€ä¸ªå…³é”®åŒºåˆ«æ˜¯ï¼Œå‡½æ•°å‚æ•°åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰è¢«å®Œå…¨æ±‚å€¼ï¼Œè€Œå®æ˜¯ä»¥æœªæ±‚å€¼çš„æ•°æ®å½¢å¼æ¥æ”¶å‚æ•°ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªä¾‹å­ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚å¦‚æœä½ è¯•å›¾å•ç‹¬æ±‚å€¼&lt;code>(1+1)&lt;/code>ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ã€‚ç„¶è€Œï¼Œå› ä¸ºä½ åœ¨è¿›è¡Œä¸€ä¸ªå®è°ƒç”¨ï¼Œæœªæ±‚å€¼çš„åˆ—è¡¨&lt;code>(1 + 1)&lt;/code>è¢«ä¼ é€’ç»™&lt;code>infix&lt;/code>ã€‚ç„¶åå®å¯ä»¥ä½¿ç”¨&lt;code>first&lt;/code>ã€&lt;code>second&lt;/code>å’Œ&lt;code>last&lt;/code>æ¥é‡æ–°æ’åˆ—åˆ—è¡¨ï¼Œè¿™æ · Clojure å°±å¯ä»¥æ±‚å€¼å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(macroexpand &amp;#39;(infix (1 + 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 1)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡æ‰©å±•å®ï¼Œä½ å¯ä»¥çœ‹åˆ°&lt;code>infix&lt;/code>å°†&lt;code>(1 + 1)&lt;/code>é‡æ–°æ’åˆ—æˆ&lt;code>(+ 1 1)&lt;/code>ã€‚å¾ˆæ–¹ä¾¿!&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥åœ¨å®å®šä¹‰ä¸­ä½¿ç”¨å‚æ•°é‡æ„ï¼Œå°±åƒä½ å¯ä»¥ä½¿ç”¨å‡½æ•°ä¸€æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro infix-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [[operand1 op operand2]] (list op operand1 operand2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list op operand1 operand2))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è§£æ„å‚æ•°å¯ä»¥è®©ä½ æ ¹æ®åºåˆ—å‚æ•°ä¸­çš„ä½ç½®ç®€æ´åœ°å°†å€¼ä¸ç¬¦å·ç»‘å®šã€‚åœ¨è¿™é‡Œï¼Œ&lt;code>infix-2&lt;/code>å°†ä¸€ä¸ªé¡ºåºæ•°æ®ç»“æ„ä½œä¸ºå‚æ•°ï¼Œå¹¶æŒ‰ä½ç½®è¿›è¡Œè§£æ„ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå€¼è¢«å‘½åä¸º&lt;code>operand1&lt;/code>ï¼Œç¬¬äºŒä¸ªå€¼è¢«å‘½åä¸º&lt;code>op&lt;/code>ï¼Œç¬¬ä¸‰ä¸ªå€¼åœ¨å®ä¸­è¢«å‘½åä¸º&lt;code>operand2&lt;/code>ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥åˆ›å»ºå¤šå±æ€§çš„å®ï¼Œäº‹å®ä¸Šï¼ŒåŸºæœ¬çš„å¸ƒå°”è¿ç®—&lt;code>and&lt;/code>å’Œ&lt;code>or&lt;/code>éƒ½è¢«å®šä¹‰ä¸ºå®ã€‚ä¸‹é¢æ˜¯&lt;code>and&lt;/code>çš„æºä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro and
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Evaluates exprs one at a time, from left to right. If a form
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> returns logical false (nil or false), and returns that value and
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> doesn&amp;#39;t evaluate any of the other expressions, otherwise it returns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> the value of the last expr. (and) returns true.&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:added &amp;#34;1.0&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([] true)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x] x)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([x &amp;amp; next]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(let [and# ~x]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if and# (and ~@next) and#))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­å‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ï¼ŒåŒ…æ‹¬ç¬¦å·å’Œ&lt;code>~@&lt;/code>ï¼Œä½ å¾ˆå¿«å°±ä¼šäº†è§£åˆ°è¿™äº›ã€‚ç°åœ¨é‡è¦çš„æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸‰ä¸ªå®ä½“ï¼šä¸€ä¸ªæ€»æ˜¯è¿”å› &amp;ldquo;true &amp;ldquo;çš„ 0-arity å®ä½“ï¼Œä¸€ä¸ªè¿”å›æ“ä½œæ•°çš„ 1-arity å®ä½“ï¼Œä»¥åŠä¸€ä¸ªé€’å½’è°ƒç”¨è‡ªèº«çš„&lt;em>n&lt;/em>-arity å®ä½“ã€‚è¿™æ˜¯æ­£ç¡®çš„ï¼šå®å¯ä»¥æ˜¯é€’å½’çš„ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä½™çš„å‚æ•°ï¼ˆ&lt;em>n&lt;/em>-arity å®ä¸»ä½“ä¸­çš„&lt;code>&amp;amp; next&lt;/code>ï¼‰ï¼Œå°±åƒå‡½æ•°ä¸€æ ·ã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ å¯¹å®çš„è§£å‰–å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œç°åœ¨æ˜¯æ—¶å€™æŠŠä½ è‡ªå·±ç»‘åœ¨ä½ çš„å¥¥å¾·ä¿®æ–¯å¼æ€ç»´çš„æ¡…æ†ä¸Šï¼Œå­¦ä¹ å†™å®ä½“äº†ã€‚&lt;/p>
&lt;h2 id="ä¸ºæ±‚å€¼å»ºç«‹åˆ—è¡¨">ä¸ºæ±‚å€¼å»ºç«‹åˆ—è¡¨&lt;/h2>
&lt;p>ç¼–å†™å®å°±æ˜¯è¦ä¸º Clojure å»ºç«‹ä¸€ä¸ªåˆ—è¡¨æ¥è¿›è¡Œæ±‚å€¼ï¼Œè¿™éœ€è¦é¢ è¦†ä½ çš„æ­£å¸¸æ€ç»´æ–¹å¼ã€‚é¦–å…ˆï¼Œä½ ç»å¸¸éœ€è¦å¼•ç”¨è¡¨è¾¾å¼ï¼Œä»¥ä¾¿åœ¨ä½ çš„æœ€ç»ˆåˆ—è¡¨ä¸­è·å¾—æœªæ±‚å€¼çš„æ•°æ®ç»“æ„ï¼ˆæˆ‘ä»¬ç¨åä¼šå›åˆ°è¿™ä¸ªé—®é¢˜ï¼‰ã€‚æ›´æ™®éçš„æ˜¯ï¼Œä½ éœ€è¦ç‰¹åˆ«æ³¨æ„&lt;em>ç¬¦å·&lt;/em>å’Œ&lt;em>å€¼&lt;/em>ä¹‹é—´çš„åŒºåˆ«ã€‚&lt;/p>
&lt;h3 id="åŒºåˆ†ç¬¦å·å’Œå€¼">åŒºåˆ†ç¬¦å·å’Œå€¼&lt;/h3>
&lt;p>å‡è®¾ä½ æƒ³åˆ›å»ºä¸€ä¸ªå®ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶åŒæ—¶æ‰“å°å’Œè¿”å›å…¶å€¼ã€‚(è¿™ä¸&lt;code>println'ä¸åŒï¼Œ&lt;/code>println&amp;rsquo;æ€»æ˜¯è¿”å›`nil&amp;rsquo;ã€‚)ä½ å¸Œæœ›ä½ çš„å®èƒ½å¤Ÿè¿”å›ç±»ä¼¼è¿™æ ·çš„åˆ—è¡¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [result expression]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println result)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> result)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ çš„å®çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼Œä½¿ç”¨&lt;code>list&lt;/code>å‡½æ•°æ¥åˆ›å»º Clojure åº”è¯¥æ±‚å€¼çš„åˆ—è¡¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> (defmacro my-print-whoopsie
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [expression]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list let [result expression]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list println result)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> result))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œå¦‚æœä½ å°è¯•è¿™æ ·åšï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸`ä¸èƒ½æ¥å—ä¸€ä¸ªå®çš„å€¼ã€‚#&amp;lsquo;clojure.core/let&amp;rsquo;ã€‚è¿™åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ&lt;/p>
&lt;p>å‘ç”Ÿè¿™ç§æƒ…å†µçš„åŸå› æ˜¯ï¼Œä½ çš„å®ä¸»ä½“è¯•å›¾è·å–&lt;em>ç¬¦å·&lt;/em> &lt;code>let&lt;/code>æ‰€æŒ‡çš„*å€¼ï¼Œè€Œä½ å®é™…æƒ³åšçš„æ˜¯è¿”å›&lt;code>let&lt;/code>ç¬¦å·æœ¬èº«ã€‚è¿˜æœ‰å…¶ä»–çš„é—®é¢˜ï¼šä½ è¯•å›¾è·å¾—&lt;code>result&lt;/code>çš„å€¼ï¼Œè¿™æ˜¯ä¸ç»‘å®šçš„ï¼Œä½ è¯•å›¾è·å¾—&lt;code>println&lt;/code>çš„å€¼ï¼Œè€Œä¸æ˜¯è¿”å›å…¶ç¬¦å·ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•å†™å®æ¥åšä½ æƒ³è¦çš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro my-print
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [expression]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list &amp;#39;let [&amp;#39;result expression]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list &amp;#39;println &amp;#39;result)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;result))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™é‡Œï¼Œä½ é€šè¿‡åœ¨æ¯ä¸ªç¬¦å·å‰åŠ ä¸Šå•å¼•å·&amp;rdquo;&amp;lsquo;&amp;lsquo;æ¥å¼•å‡ºä½ æƒ³ä½œä¸ºä¸€ä¸ªç¬¦å·ä½¿ç”¨ã€‚è¿™å‘Šè¯‰ Clojure&lt;em>å…³é—­&lt;/em>åé¢çš„æ±‚å€¼ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé˜²æ­¢ Clojure è¯•å›¾è§£å†³è¿™äº›ç¬¦å·ï¼Œè€Œåªæ˜¯è¿”å›è¿™äº›ç¬¦å·ã€‚ä½¿ç”¨å¼•å·æ¥å…³é—­æ±‚å€¼çš„èƒ½åŠ›æ˜¯ç¼–å†™å®çš„æ ¸å¿ƒï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç»™è¿™ä¸ªä¸»é¢˜ä¸€ä¸ªç‹¬ç«‹çš„ç« èŠ‚ã€‚&lt;/p>
&lt;h3 id="ç®€å•çš„å¼•å·">ç®€å•çš„å¼•å·&lt;/h3>
&lt;p>ä½ å‡ ä¹æ€»æ˜¯åœ¨ä½ çš„å®ä¸­ä½¿ç”¨å¼•å·æ¥è·å¾—ä¸€ä¸ªæœªæ±‚å€¼çš„ç¬¦å·ã€‚è®©æˆ‘ä»¬ç®€å•åœ°å¤ä¹ ä¸€ä¸‹å¼•å·ï¼Œç„¶åçœ‹çœ‹ä½ å¦‚ä½•åœ¨å®ä¸­ä½¿ç”¨å®ƒã€‚&lt;/p>
&lt;p>é¦–å…ˆï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªæ²¡æœ‰å¼•å·çš„ç®€å•å‡½æ•°è°ƒç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(+ 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæˆ‘ä»¬åœ¨å¼€å¤´åŠ ä¸Š&lt;code>quote&lt;/code>ï¼Œå®ƒå°±ä¼šè¿”å›ä¸€ä¸ªæœªæ±‚å€¼çš„æ•°æ®ç»“æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(quote (+ 1 2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œåœ¨è¿”å›çš„åˆ—è¡¨ä¸­ï¼Œ&lt;code>+&lt;/code>æ˜¯ä¸€ä¸ªç¬¦å·ã€‚å¦‚æœæˆ‘ä»¬æ±‚å€¼è¿™ä¸ªåŠ å·ï¼Œå°±ä¼šäº§ç”ŸåŠ å·å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;lt;core$_PLUS_ clojure.core$_PLUS_@47b36583&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€Œå¦‚æœæˆ‘ä»¬å¼•ç”¨è¿™ä¸ªåŠ å·ï¼Œå®ƒåªæ˜¯äº§ç”ŸåŠ å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(quote +)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; +
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ±‚å€¼ä¸€ä¸ªæœªç»‘å®šçš„ç¬¦å·ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sweating-to-the-oldies
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Unable to resolve symbol: sweating-to-the-oldies in this context
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½†æ˜¯å¼•ç”¨ç¬¦å·ä¼šè¿”å›ä¸€ä¸ªç¬¦å·ï¼Œä¸ç®¡è¿™ä¸ªç¬¦å·æ˜¯å¦æœ‰ä¸€ä¸ªä¸ä¹‹ç›¸å…³çš„å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(quote sweating-to-the-oldies)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; sweating-to-the-oldies
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å•å¼•å·å­—ç¬¦æ˜¯&lt;code>(quote&lt;/code>x&lt;code>)&lt;/code>çš„è¯»è€…å®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#39;(+ 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#39;dr-jekyll-and-richard-simmons
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; dr-jekyll-and-richard-simmons
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥åœ¨&lt;code>when&lt;/code>å®ä¸­çœ‹åˆ°å¼•ç”¨çš„å·¥ä½œã€‚è¿™æ˜¯&lt;code>when&lt;/code>çš„å®é™…æºä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro when
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Evaluates test. If logical true, evaluates body in an implicit do.&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:added &amp;#34;1.0&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [test &amp;amp; body]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list &amp;#39;if test (cons &amp;#39;do body)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œå®çš„å®šä¹‰åŒæ—¶å¼•ç”¨äº†&lt;code>if&lt;/code>å’Œ&lt;code>do&lt;/code>ã€‚è¿™æ˜¯å› ä¸ºä½ æƒ³è®©è¿™äº›ç¬¦å·å‡ºç°åœ¨`when&amp;rsquo;è¿”å›çš„æœ€ç»ˆåˆ—è¡¨ä¸­è¿›è¡Œè®¡ç®—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè¿”å›åˆ—è¡¨çš„ä¾‹å­ï¼Œå®ƒå¯èƒ½æ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(macroexpand &amp;#39;(when (the-cows-come :home)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (call me :pappy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (slap me :silly)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (if (the-cows-come :home)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do (call me :pappy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (slap me :silly)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå†…ç½®å®çš„æºä»£ç çš„ä¾‹å­ï¼Œè¿™æ¬¡æ˜¯å…³äº&lt;code>unless&lt;/code>çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro unless
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Inverted &amp;#39;if&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [test &amp;amp; branches]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (conj (reverse branches) test &amp;#39;if))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŒæ ·ï¼Œä½ å¿…é¡»å¼•ç”¨&lt;code>if&lt;/code>ï¼Œå› ä¸ºä½ æƒ³è®©æœªæ±‚å€¼çš„ç¬¦å·æ”¾åœ¨ç»“æœåˆ—è¡¨ä¸­ï¼Œå°±åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(macroexpand &amp;#39;(unless (done-been slapped? me)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (slap me :silly)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (say &amp;#34;I reckon that&amp;#39;ll learn me&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (if (done-been slapped? me)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (say &amp;#34;I reckon that&amp;#39;ll learn me&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (slap me :silly))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œåœ¨ç¼–å†™å®æ—¶ï¼Œä½ ä¼šä½¿ç”¨è¿™æ ·çš„ç®€å•å¼•å·ï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹ä½ ä¼šä½¿ç”¨æ›´å¼ºå¤§çš„è¯­æ³•å¼•å·ã€‚&lt;/p>
&lt;h3 id="è¯­æ³•å¼•ç”¨">è¯­æ³•å¼•ç”¨&lt;/h3>
&lt;p>åˆ°ç›®å‰ä¸ºæ­¢, ä½ å·²ç»çœ‹åˆ°äº†é€šè¿‡ä½¿ç”¨&lt;code>list&lt;/code>å‡½æ•°æ¥å»ºç«‹åˆ—è¡¨çš„å®ï¼Œä»¥åŠå¯¹åˆ—è¡¨è¿›è¡Œæ“ä½œçš„å‡½æ•°ï¼Œå¦‚&lt;code>first&lt;/code>, &lt;code>second&lt;/code>, &lt;code>last&lt;/code>ï¼Œç­‰ç­‰ã€‚äº‹å®ä¸Šï¼Œä½ å¯ä»¥è¿™æ ·å†™å®ï¼Œç›´åˆ°å¥¶ç‰›å›å®¶ã€‚ä½†æœ‰æ—¶ï¼Œè¿™å°†å¯¼è‡´ç¹çå’Œå†—é•¿çš„ä»£ç ã€‚&lt;/p>
&lt;p>è¯­æ³•å¼•å·è¿”å›æœªæ±‚å€¼çš„æ•°æ®ç»“æ„ï¼Œä¸æ™®é€šå¼•å·ç±»ä¼¼ã€‚ç„¶è€Œï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„åŒºåˆ«ã€‚ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œè¯­æ³•å¼•ç”¨å°†è¿”å›&lt;em>å®Œå…¨åˆæ ¼çš„&lt;/em>ç¬¦å·ï¼ˆå³åŒ…æ‹¬ç¬¦å·çš„å‘½åç©ºé—´ï¼‰ã€‚è®©æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹å¼•å·å’Œè¯­æ³•å¼•å·ã€‚&lt;/p>
&lt;p>å¦‚æœä½ çš„ä»£ç ä¸­ä¸åŒ…æ‹¬åå­—ç©ºé—´ï¼Œé‚£ä¹ˆå¼•ç”¨å°±ä¸åŒ…æ‹¬åå­—ç©ºé—´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#39;+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; +
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å†™å‡ºå‘½åç©ºé—´ï¼Œå®ƒå°†è¢«æ­£å¸¸çš„å¼•ç”¨æ‰€è¿”å›ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#39;clojure.core/+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; clojure.core/+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯­æ³•å¼•å·å°†æ€»æ˜¯åŒ…æ‹¬ç¬¦å·çš„å®Œæ•´å‘½åç©ºé—´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">`+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; clojure.core/+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹ä¸€ä¸ªåˆ—è¡¨çš„å¼•ç”¨ä¼šé€’å½’åœ°å¼•ç”¨æ‰€æœ‰çš„å…ƒç´ ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#39;(+ 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯­æ³•å¼•ç”¨ä¸€ä¸ªåˆ—è¡¨é€’å½’åœ°å¼•ç”¨æ‰€æœ‰çš„å…ƒç´ ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">`(+ 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (clojure.core/+ 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯­æ³•å¼•å·åŒ…æ‹¬åå­—ç©ºé—´çš„åŸå› æ˜¯ä¸ºäº†å¸®åŠ©ä½ é¿å…åå­—çš„ç¢°æ’ï¼Œè¿™ä¸ªè¯é¢˜åœ¨ç¬¬ 6 ç« ä¸­æ¶‰åŠã€‚&lt;/p>
&lt;p>å¼•å·å’Œè¯­æ³•å¼•å·ä¹‹é—´çš„å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œåè€…å…è®¸ä½ ä½¿ç”¨ &amp;ldquo;tilde&amp;rdquo;ï¼Œå³&amp;rdquo;~&amp;quot;ï¼Œæ¥*è§£é™¤å¼•å·çš„å½¢å¼ã€‚è¿™æœ‰ç‚¹åƒæ°ªæ˜ŸçŸ³ï¼šåªè¦è¶…äººåœ¨æ°ªæ˜ŸçŸ³å‘¨å›´ï¼Œä»–çš„èƒ½åŠ›å°±ä¼šæ¶ˆå¤±ã€‚æ¯å½“åœ¨ä¸€ä¸ªè¯­æ³•å¼•å·çš„ Form ä¸­å‡ºç° tildeï¼Œè¯­æ³•å¼•å·è¿”å›æœªæ±‚å€¼çš„ã€å®Œå…¨å‘½åçš„ Form çš„èƒ½åŠ›å°±ä¼šæ¶ˆå¤±ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">`(+ 1 ~(inc 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (clojure.core/+ 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› ä¸ºå®ƒåœ¨ tilde ä¹‹åï¼Œ&lt;code>(inc 1)&lt;/code>è¢«æ±‚å€¼è€Œä¸æ˜¯è¢«å¼•å·ã€‚å¦‚æœæ²¡æœ‰ unquoteï¼Œè¯­æ³•å¼•å·ä¼šè¿”å›æœªæ±‚å€¼çš„å½¢å¼ï¼Œå¹¶å¸¦æœ‰å®Œå…¨é™å®šçš„ç¬¦å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">`(+ 1 (inc 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (clojure.core/+ 1 (clojure.core/inc 1))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ç†Ÿæ‚‰å­—ç¬¦ä¸²æ’å€¼ï¼Œä½ å¯ä»¥ç±»ä¼¼åœ°è€ƒè™‘è¯­æ³•å¼•ç”¨/éå¼•ç”¨çš„é—®é¢˜ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ éƒ½åœ¨åˆ›å»ºä¸€ç§æ¨¡æ¿ï¼Œå°†ä¸€äº›å˜é‡æ”¾åœ¨ä¸€ä¸ªæ›´å¤§çš„é™æ€ç»“æ„ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨ Ruby ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡è¿æ¥æ¥åˆ›å»ºå­—ç¬¦ä¸²&lt;code>&amp;quot;Churn your butter, Jebediah!&amp;quot;&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">name = &amp;#34;Jebediah&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;Churn your butter, &amp;#34; + name + &amp;#34;!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–é€šè¿‡å†…æ’æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#34;Churn your butter, #{name}!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°±åƒå­—ç¬¦ä¸²æ’å€¼å¯ä»¥ä½¿ä»£ç æ›´æ¸…æ™°ã€æ›´ç®€æ´ä¸€æ ·ï¼Œè¯­æ³•å¼•å·å’Œè§£å¼•å·å¯ä»¥ä½¿ä½ æ›´æ¸…æ™°ã€æ›´ç®€æ´åœ°åˆ›å»ºåˆ—è¡¨ã€‚æ¯”è¾ƒä¸€ä¸‹ä½¿ç”¨&lt;code>list&lt;/code>å‡½æ•°å’Œä½¿ç”¨è¯­æ³•å¼•å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(list &amp;#39;+ 1 (inc 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">`(+ 1 ~(inc 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (clojure.core/+ 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¯­æ³•å¼•å·ç‰ˆæœ¬æ›´åŠ ç®€æ´ã€‚è€Œä¸”ï¼Œå®ƒçš„è§†è§‰å½¢å¼æ›´æ¥è¿‘åˆ—è¡¨çš„æœ€ç»ˆå½¢å¼ï¼Œä½¿å…¶æ›´å®¹æ˜“ç†è§£ã€‚&lt;/p>
&lt;h2 id="åœ¨å®ä¸­ä½¿ç”¨è¯­æ³•å¼•è¯­">åœ¨å®ä¸­ä½¿ç”¨è¯­æ³•å¼•è¯­&lt;/h2>
&lt;p>ç°åœ¨ä½ å·²ç»å¾ˆå¥½åœ°æŒæ¡äº†è¯­æ³•å¼•å·çš„å·¥ä½œåŸç†ï¼Œæ¥çœ‹çœ‹&lt;code>code-critic&lt;/code>å®ã€‚ä½ å°†ä½¿ç”¨è¯­æ³•å¼•å·ç¼–å†™ä¸€ä¸ªæ›´ç®€æ´çš„ç‰ˆæœ¬ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro code-critic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Phrases are courtesy Hermes Conrad from Futurama&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [bad good]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list &amp;#39;do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list &amp;#39;println
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Great squid of Madrid, this is bad code:&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list &amp;#39;quote bad))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list &amp;#39;println
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Sweet gorilla of Manila, this is good code:&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list &amp;#39;quote good))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(code-critic (1 + 1) (+ 1 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Great squid of Madrid, this is bad code: (1 + 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Sweet gorilla of Manila, this is good code: (+ 1 1)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»…ä»…æ˜¯çœ‹ç€é‚£äº›ä¹å‘³çš„é‡å¤çš„&lt;code>list&lt;/code>å’Œå•å¼•å·ï¼Œå°±è®©æˆ‘æ„Ÿåˆ°å®³æ€•ã€‚ä½†æ˜¯å¦‚æœä½ ç”¨è¯­æ³•å¼•å·é‡å†™&lt;code>code-critic&lt;/code>ï¼Œä½ å°±å¯ä»¥ä½¿å®ƒå˜å¾—åœ†æ»‘ç®€æ´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro code-critic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Phrases are courtesy Hermes Conrad from Futurama&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [bad good]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(do (println &amp;#34;Great squid of Madrid, this is bad code:&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (quote ~bad))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Sweet gorilla of Manila, this is good code:&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (quote ~good))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æƒ³å¼•ç”¨é™¤ç¬¦å·&lt;code>good&lt;/code>å’Œ&lt;code>bad&lt;/code>ä»¥å¤–çš„æ‰€æœ‰å†…å®¹ã€‚åœ¨åŸæ¥çš„ç‰ˆæœ¬ä¸­ï¼Œä½ å¿…é¡»å•ç‹¬å¼•ç”¨æ¯ä¸€å—ï¼Œå¹¶æ˜ç¡®åœ°æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªä¸æ–¹ä¾¿çš„åˆ—è¡¨ä¸­ï¼Œåªæ˜¯ä¸ºäº†é˜²æ­¢è¿™ä¸¤ä¸ªç¬¦å·è¢«å¼•ç”¨ã€‚æœ‰äº†è¯­æ³•å¼•å·ï¼Œä½ åªéœ€å°†æ•´ä¸ª&lt;code>do&lt;/code>è¡¨è¾¾å¼åŒ…è£¹åœ¨ä¸€ä¸ªå¼•å·ä¸­ï¼Œå¹¶ç®€å•åœ°å–æ¶ˆä½ è¦æ±‚å€¼çš„ä¸¤ä¸ªç¬¦å·çš„å¼•å·ã€‚&lt;/p>
&lt;p>å®çš„ç¼–å†™æ–¹æ³•ä»‹ç»åˆ°æ­¤ç»“æŸ! äº²çˆ±çš„è¥¿è¨æ‘©äºšå’Œä¸œè¨æ‘©äºšçš„ç¥åœ£èŸ’è›‡ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„!&lt;/p>
&lt;p>æ€»è€Œè¨€ä¹‹ï¼Œå®æ¥æ”¶æœªç»æ±‚å€¼çš„ã€ä»»æ„çš„æ•°æ®ç»“æ„ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å› Clojure æ±‚å€¼çš„æ•°æ®ç»“æ„ã€‚åœ¨å®šä¹‰å®çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨å‚æ•°é‡æ„ï¼Œå°±åƒä½ å¯ä»¥ä½¿ç”¨å‡½æ•°å’Œ&lt;code>let&lt;/code>ç»‘å®šä¸€æ ·ã€‚ä½ ä¹Ÿå¯ä»¥ç¼–å†™å¤šå±æ€§å’Œé€’å½’çš„å®ã€‚&lt;/p>
&lt;p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ çš„å®ä¼šè¿”å›åˆ—è¡¨ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨&lt;code>list&lt;/code>å‡½æ•°æˆ–ä½¿ç”¨è¯­æ³•å¼•å·æ¥å»ºç«‹è¦è¿”å›çš„åˆ—è¡¨ã€‚è¯­æ³•å¼•å·é€šå¸¸ä¼šä½¿ä»£ç æ›´æ¸…æ™°ã€æ›´ç®€æ´ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©ä½ åˆ›å»ºä¸€ä¸ªä½ æƒ³è¿”å›çš„æ•°æ®ç»“æ„çš„æ¨¡æ¿ï¼Œæ›´å®¹æ˜“è¿›è¡Œè§†è§‰ä¸Šçš„è§£æã€‚æ— è®ºä½ ä½¿ç”¨è¯­æ³•å¼•å·è¿˜æ˜¯æ™®é€šå¼•å·ï¼Œé‡è¦çš„æ˜¯åœ¨å»ºç«‹ä½ çš„åˆ—è¡¨æ—¶è¦æ¸…æ¥šåœ°äº†è§£ç¬¦å·å’Œå®ƒæ‰€æ±‚å€¼çš„å€¼ä¹‹é—´çš„åŒºåˆ«ã€‚å¦‚æœä½ æƒ³è®©ä½ çš„å®è¿”å›å¤šç§å½¢å¼ä¾› Clojure æ±‚å€¼ï¼Œä¸€å®šè¦ç”¨&lt;code>do&lt;/code>æ¥åŒ…è£…å®ƒä»¬ã€‚&lt;/p>
&lt;h2 id="é‡æ„ä¸€ä¸ªå®å’Œå–æ¶ˆå¼•å·æ‹¼æ¥">é‡æ„ä¸€ä¸ªå®å’Œå–æ¶ˆå¼•å·æ‹¼æ¥&lt;/h2>
&lt;p>ä¸Šä¸€èŠ‚ä¸­çš„ &amp;ldquo;code-critic &amp;ldquo;å®ä»ç„¶éœ€è¦ä¸€äº›æ”¹è¿›ã€‚çœ‹çœ‹è¿™ä¸ªé‡å¤çš„åœ°æ–¹! ä¸¤ä¸ª &amp;ldquo;println &amp;ldquo;çš„è°ƒç”¨å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚è®©æˆ‘ä»¬æŠŠå®ƒæ¸…ç†ä¸€ä¸‹ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆè¿™äº›`println&amp;rsquo;åˆ—è¡¨ã€‚å‡½æ•°æ¯”å®æ›´å®¹æ˜“æ€è€ƒå’Œä½¿ç”¨ï¼Œæ‰€ä»¥æŠŠå®çš„å†…å®¹ç§»åˆ°è¾…åŠ©å‡½æ•°ä¸­é€šå¸¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn criticize-code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [criticism code]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(println ~criticism (quote ~code)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defmacro code-critic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [bad good]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(do ~(criticize-code &amp;#34;Cursed bacteria of Liberia, this is bad code:&amp;#34; bad)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~(criticize-code &amp;#34;Sweet sacred boa of Western and Eastern Samoa, this is good code:&amp;#34; good)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„åˆ°&lt;code>criticize-code&lt;/code>å‡½æ•°å¦‚ä½•è¿”å›ä¸€ä¸ªè¯­æ³•å¼•å·çš„åˆ—è¡¨ã€‚è¿™å°±æ˜¯ä½ å¦‚ä½•å»ºç«‹èµ·å®å°†è¿”å›çš„åˆ—è¡¨ã€‚&lt;/p>
&lt;p>ä¸è¿‡ï¼Œè¿˜æœ‰æ›´å¤šçš„æ”¹è¿›ç©ºé—´ã€‚è¿™æ®µä»£ç ä»ç„¶æœ‰å¤šä¸ªå‡ ä¹ç›¸åŒçš„å‡½æ•°è°ƒç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æƒ³å¯¹ä¸€ä¸ªå€¼çš„é›†åˆåº”ç”¨åŒä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨åƒ&lt;code>map&lt;/code>è¿™æ ·çš„ seq å‡½æ•°æ˜¯æœ‰æ„ä¹‰çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro code-critic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [bad good]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(do ~(map #(apply criticize-code %)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [[&amp;#34;Great squid of Madrid, this is bad code:&amp;#34; bad]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;#34;Sweet gorilla of Manila, this is good code:&amp;#34; good]])))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™çœ‹èµ·æ¥å¥½ä¸€ç‚¹äº†ã€‚ä½ æ­£åœ¨ Map æ¯ä¸ªæ‰¹è¯„/ä»£ç å¯¹ï¼Œå¹¶å°† &amp;ldquo;æ‰¹è¯„-ä»£ç  &amp;ldquo;å‡½æ•°åº”ç”¨äºè¯¥å¯¹ã€‚è®©æˆ‘ä»¬è¯•ç€è¿è¡Œè¿™æ®µä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(code-critic (1 + 1) (+ 1 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; NullPointerException
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å“¦ï¼Œä¸ï¼è¿™æ ¹æœ¬å°±æ²¡æœ‰ç”¨! å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿé—®é¢˜æ˜¯ï¼Œ&lt;code>map&lt;/code>è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒè¿”å›ä¸€ä¸ª&lt;code>println&lt;/code>è¡¨è¾¾å¼çš„åˆ—è¡¨ã€‚æˆ‘ä»¬åªæƒ³å¾—åˆ°æ¯ä¸ª&lt;code>println&lt;/code>è°ƒç”¨çš„ç»“æœï¼Œä½†æ˜¯ç›¸åï¼Œè¿™æ®µä»£ç æŠŠä¸¤ä¸ªç»“æœéƒ½æ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œç„¶åè¯•å›¾æ±‚å€¼è¿™ä¸ªåˆ—è¡¨ã€‚&lt;/p>
&lt;p>æ¢å¥è¯è¯´ï¼Œå½“å®ƒæ±‚å€¼è¿™æ®µä»£ç æ—¶ï¼ŒClojure ä¼šå¾—åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ((clojure.core/println &amp;#34; criticism&amp;#34; &amp;#39; (1 + 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (clojure.core/println &amp;#34;critism&amp;#34; &amp;#39;(+ 1 1)))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæ±‚å€¼ç¬¬ä¸€ä¸ª &amp;ldquo;println &amp;ldquo;çš„è°ƒç”¨ï¼Œç»™æˆ‘ä»¬æä¾›è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (clojure.core/println &amp;#34;criticism&amp;#34; &amp;#39;(+ 1 1))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¹¶åœ¨æ±‚å€¼äº†ç¬¬äºŒä¸ª`println&amp;rsquo;è°ƒç”¨åï¼Œè¿™æ ·åšã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (nil nil))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±æ˜¯å¯¼è‡´å¼‚å¸¸çš„åŸå› ã€‚&lt;code>println&lt;/code>æ±‚å€¼ä¸º&lt;code>nil&lt;/code>ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€åå¾—åˆ°çš„ç»“æœæ˜¯&lt;code>(nil nil)&lt;/code>ã€‚&lt;code>nil&lt;/code>æ˜¯ä¸å¯è°ƒç”¨çš„ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ª&lt;code>NullPointerException&lt;/code>ã€‚&lt;/p>
&lt;p>å¤šä¹ˆä¸æ–¹ä¾¿å•Š ä½†æ°æ°ç›¸åï¼Œæ— å¼•å·æ‹¼æ¥æ­£æ˜¯ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µè€Œå‘æ˜çš„ã€‚å–æ¶ˆå¼•å·æ‹¼æ¥æ˜¯ç”¨&lt;code>~@&lt;/code>æ¥å®Œæˆçš„ã€‚å¦‚æœä½ åªæ˜¯å–æ¶ˆå¼•ç”¨ä¸€ä¸ªåˆ—è¡¨ï¼Œä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">`(+ ~(list 1 2 3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (clojure.core/+ (1 2 3))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œå¦‚æœä½ ä½¿ç”¨ unquote æ‹¼æ¥ï¼Œä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">`(+ ~@(list 1 2 3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (clojure.core/+ 1 2 3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Unquote æ‹¼æ¥å°†ä¸€ä¸ªå¯æ’åºçš„æ•°æ®ç»“æ„è§£å¼€ï¼Œå°†å…¶å†…å®¹ç›´æ¥æ”¾åœ¨åŒ…å›´çš„è¯­æ³•å¼•å·æ•°æ®ç»“æ„ä¸­ã€‚è¿™å°±åƒ&lt;code>~@&lt;/code>æ˜¯ä¸€æŠŠå¤§é”¤å­ï¼Œåé¢çš„ä¸œè¥¿æ˜¯ä¸€ä¸ªçš®çº³å¡”ï¼Œå…¶ç»“æœæ˜¯ä½ æ›¾ç»å‚åŠ è¿‡çš„æœ€å¯æ€•å’Œæœ€æ£’çš„èšä¼šã€‚&lt;/p>
&lt;p>æ€»ä¹‹ï¼Œå¦‚æœä½ åœ¨ä½ çš„ä»£ç æ‰¹è¯„ä¸­ä½¿ç”¨éå¼•å·æ‹¼æ¥ï¼Œé‚£ä¹ˆä¸€åˆ‡éƒ½ä¼šå¾ˆé¡ºåˆ©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro code-critic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [{:keys [good bad]}]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(do ~@(map #(apply criticize-code %)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [[&amp;#34;Sweet lion of Zion, this is bad code:&amp;#34; bad]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;#34;Great cow of Moscow, this is good code:&amp;#34; good]])))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(code-critic (1 + 1) (+ 1 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Sweet lion of Zion, this is bad code: (1 + 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Great cow of Moscow, this is good code: (+ 1 1)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‘œå‘¼! ä½ å·²ç»æˆåŠŸåœ°å°†é‡å¤çš„ä»£ç æå–åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå¹¶ä½¿ä½ çš„å®ä»£ç æ›´åŠ ç®€æ´ã€‚æ¸©å°¼ä¼¯çš„å¯çˆ±è±šé¼ ï¼Œè¿™æ˜¯å¾ˆå¥½çš„ä»£ç !&lt;/p>
&lt;h2 id="éœ€è¦æ³¨æ„çš„äº‹é¡¹">éœ€è¦æ³¨æ„çš„äº‹é¡¹&lt;/h2>
&lt;p>å®æœ‰ä¸€äº›å·å·æ‘¸æ‘¸çš„é—®é¢˜ï¼Œä½ åº”è¯¥æ³¨æ„åˆ°ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†äº†è§£åˆ°ä¸€äº›å®çš„é™·é˜±ä»¥åŠå¦‚ä½•é¿å…å®ƒä»¬ã€‚æˆ‘å¸Œæœ›ä½ è¿˜æ²¡æœ‰æŠŠè‡ªå·±ä»ä½ çš„æ€æƒ³æ¡…æ†ä¸Šè§£ä¸‹æ¥ã€‚&lt;/p>
&lt;h3 id="å˜é‡æ•è·">å˜é‡æ•è·&lt;/h3>
&lt;p>&lt;em>å˜é‡æ•è·&lt;/em>å‘ç”Ÿåœ¨ä¸€ä¸ªå®å¼•å…¥äº†ä¸€ä¸ªç»‘å®šï¼Œè€Œè¿™ä¸ªç»‘å®šå¯¹å®çš„ç”¨æˆ·æ¥è¯´æ˜¯æœªçŸ¥çš„ï¼Œå®ƒä½¿ä¸€ä¸ªç°æœ‰çš„ç»‘å®šé»¯ç„¶å¤±è‰²ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä¸€ä¸ªå®é¡½çš®åœ°å¼•å…¥äº†å®ƒè‡ªå·±çš„&lt;code>let&lt;/code>ç»‘å®šï¼Œè¿™å°±æŠŠä»£ç æä¹±äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def message &amp;#34;Good job!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defmacro with-mischief
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;amp; stuff-to-do]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (concat (list &amp;#39;let [&amp;#39;message &amp;#34;Oh, big deal!&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stuff-to-do))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(with-mischief
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Here&amp;#39;s how I feel about that thing you did: &amp;#34; message))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Here&amp;#39;s how I feel about that thing you did: Oh, big deal!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>println&lt;/code>è°ƒç”¨å¼•ç”¨äº†ç¬¦å·&lt;code>message&lt;/code>ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä¸å­—ç¬¦ä¸²&lt;code>&amp;quot;å¥½æ ·çš„ï¼&amp;quot;&lt;/code>ç»‘å®šã€‚ç„¶è€Œï¼Œ&lt;code>with-mischief&lt;/code>å®ä¸º&lt;code>message&lt;/code>åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç»‘å®šã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼Œè¿™ä¸ªå®æ²¡æœ‰ä½¿ç”¨è¯­æ³•å¼•å·ã€‚è¿™æ ·åšä¼šå¯¼è‡´ä¸€ä¸ªå¼‚å¸¸ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def message &amp;#34;Good job!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defmacro with-mischief
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;amp; stuff-to-do]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(let [message &amp;#34;Oh, big deal!&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~@stuff-to-do))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(with-mischief
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Here&amp;#39;s how I feel about that thing you did: &amp;#34; message))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; Exception: Can&amp;#39;t let qualified name: user/message
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå¼‚å¸¸æ˜¯ä¸ºäº†ä½ è‡ªå·±å¥½ï¼šè¯­æ³•å¼•å·çš„è®¾è®¡æ˜¯ä¸ºäº†é˜²æ­¢ä½ åœ¨å®ä¸­æ„å¤–åœ°æ•æ‰åˆ°å˜é‡ã€‚å¦‚æœä½ æƒ³åœ¨ä½ çš„å®ä¸­å¼•å…¥&lt;code>let&lt;/code>ç»‘å®šï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª&lt;em>gensym&lt;/em>ã€‚&lt;code>gensym&lt;/code>å‡½æ•°åœ¨æ¯æ¬¡è¿ç»­è°ƒç”¨æ—¶äº§ç”Ÿå”¯ä¸€çš„ç¬¦å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(gensym)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; G__655
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(gensym)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; G__658
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªç¬¦å·å‰ç¼€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(gensym &amp;#39;message)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; message4760
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(gensym &amp;#39;message)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; message4763
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯ä½ å¦‚ä½•æ”¹å†™&lt;code>with-mischief&lt;/code>ï¼Œä½¿ä¹‹ä¸é‚£ä¹ˆè°ƒçš®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro without-mischief
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;amp; stuff-to-do]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [macro-message (gensym &amp;#39;message)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(let [~macro-message &amp;#34;Oh, big deal!&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~@stuff-to-do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;I still need to say: &amp;#34; ~macro-message))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(without-mischief
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Here&amp;#39;s how I feel about that thing you did: &amp;#34; message))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Here&amp;#39;s how I feel about that thing you did: Good job!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; I still need to say: Oh, big deal!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä¾‹å­é€šè¿‡ä½¿ç”¨&lt;code>gensym&lt;/code>æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ã€å”¯ä¸€çš„ç¬¦å·ï¼Œç„¶åä¸&lt;code>macro-message&lt;/code>ç»‘å®šï¼Œé¿å…äº†å˜é‡æ•è·ã€‚åœ¨è¯­æ³•å¼•ç”¨çš„&lt;code>let&lt;/code>è¡¨è¾¾å¼ä¸­ï¼Œ&lt;code>macro-message&lt;/code>æ²¡æœ‰è¢«å¼•ç”¨ï¼Œè¢«è§£æä¸º gensym çš„ç¬¦å·ã€‚è¿™ä¸ªæºç ç¬¦å·ä¸&lt;code>stuff-to-do&lt;/code>ä¸­çš„ä»»ä½•ç¬¦å·éƒ½ä¸åŒï¼Œæ‰€ä»¥ä½ å¯ä»¥é¿å…å˜é‡æ•è·ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;em>è‡ªåŠ¨æºç &lt;/em>ã€‚è‡ªåŠ¨æºç æ˜¯ä½¿ç”¨æºç çš„æ›´ç®€æ´å’Œæ–¹ä¾¿çš„æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">`(blarg# blarg#)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(blarg__2869__auto__ blarg__2869__auto__)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">`(let [name# &amp;#34;Larry Potter&amp;#34;] name#)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (clojure.core/let [name__2872__auto__ &amp;#34;Larry Potter&amp;#34;] name__2872__auto__)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ é€šè¿‡åœ¨è¯­æ³•å¼•å·åˆ—è¡¨ä¸­çš„ä¸€ä¸ªç¬¦å·ä¸Šé™„åŠ ä¸€ä¸ªå“ˆå¸Œæ ‡è®°ï¼ˆæˆ–è€…&lt;em>å“ˆå¸Œæ ‡è®°&lt;/em>ï¼Œå¦‚æœä½ ä¸€å®šè¦åšæŒçš„è¯ï¼‰æ¥åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨æºç ã€‚Clojure ä¼šè‡ªåŠ¨ç¡®ä¿ x&lt;code>#&lt;/code>çš„æ¯ä¸ªå®ä¾‹åœ¨åŒä¸€ä¸ªè¯­æ³•å¼•å·åˆ—è¡¨ä¸­è§£æä¸ºç›¸åŒçš„ç¬¦å·ï¼Œy&lt;code>#&lt;/code>çš„æ¯ä¸ªå®ä¾‹ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p>
&lt;p>&lt;code>gensym&lt;/code>å’Œ auto-gensym åœ¨ç¼–å†™å®æ—¶ç»å¸¸ä½¿ç”¨ï¼Œå®ƒä»¬å…è®¸ä½ é¿å…å˜é‡æ•è·ã€‚&lt;/p>
&lt;h3 id="åŒé‡æ±‚å€¼">åŒé‡æ±‚å€¼&lt;/h3>
&lt;p>ç¼–å†™å®æ—¶è¦æ³¨æ„çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯&lt;em>åŒé‡æ±‚å€¼&lt;/em>ï¼Œå½“ä¸€ä¸ªä½œä¸ºå‚æ•°ä¼ é€’ç»™å®çš„è¡¨æ ¼è¢«æ±‚å€¼äº†ä¸æ­¢ä¸€æ¬¡æ—¶ï¼Œå°±ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro report
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [to-try]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(if ~to-try
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (quote ~to-try) &amp;#34;was successful:&amp;#34; ~to-try)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (quote ~to-try) &amp;#34;was not successful:&amp;#34; ~to-try)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; Thread/sleep takes a number of milliseconds to sleep for
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(report (do (Thread/sleep 1000) (+ 1 1)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç æ˜¯ä¸ºäº†æµ‹è¯•å…¶å‚æ•°çš„çœŸå®æ€§ã€‚å¦‚æœå‚æ•°æ˜¯çœŸå®çš„ï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„ï¼›å¦‚æœæ˜¯è™šå‡çš„ï¼Œå®ƒæ˜¯ä¸æˆåŠŸçš„ã€‚è¯¥å®æ‰“å°å‡ºå…¶å‚æ•°æ˜¯å¦æˆåŠŸã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å®é™…ä¸Šä¼šç¡ä¸¤ç§’é’Ÿï¼Œå› ä¸º&lt;code>(Thread/sleep 1000)&lt;/code>è¢«æ±‚å€¼äº†ä¸¤æ¬¡ï¼šä¸€æ¬¡åœ¨&lt;code>if&lt;/code>ä¹‹åï¼Œå¦ä¸€æ¬¡åœ¨&lt;code>println&lt;/code>è¢«è°ƒç”¨æ—¶ã€‚è¿™æ˜¯å› ä¸º&lt;code>(do (Thread/sleep 1000) (+ 1 1))&lt;/code>çš„ä»£ç åœ¨æ•´ä¸ªå®æ‰©å±•ä¸­è¢«é‡å¤ã€‚è¿™å°±åƒä½ å†™çš„ä¸€æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if (do (Thread/sleep 1000) (+ 1 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#39;(do (Thread/sleep 1000) (+ 1 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;was successful:&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do (Thread/sleep 1000) (+ 1 1)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#39;(do (Thread/sleep 1000) (+ 1 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;was not successful:&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do (Thread/sleep 1000) (+ 1 1))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&amp;ldquo;å¤§é—®é¢˜ï¼&amp;ldquo;ä½ å†…å¿ƒçš„ä¾‹å­è¯„è®ºå®¶è¯´ã€‚å¥½å§ï¼Œå¦‚æœä½ çš„ä»£ç æ˜¯åœ¨é“¶è¡Œè´¦æˆ·ä¹‹é—´è½¬è´¦ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•é¿å…è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro report
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [to-try]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(let [result# ~to-try]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if result#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (quote ~to-try) &amp;#34;was successful:&amp;#34; result#)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (quote ~to-try) &amp;#34;was not successful:&amp;#34; result#))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°† &amp;ldquo;to-try &amp;ldquo;æ”¾åœ¨ä¸€ä¸ª &amp;ldquo;let &amp;ldquo;è¡¨è¾¾å¼ä¸­ï¼Œä½ åªéœ€æ±‚å€¼ä¸€æ¬¡è¯¥ä»£ç ï¼Œå¹¶å°†ç»“æœç»‘å®šåˆ°ä¸€ä¸ªè‡ªåŠ¨æ ‡ç¤ºçš„ç¬¦å· &amp;ldquo;result#&amp;ldquo;ä¸Šï¼Œç°åœ¨ä½ å¯ä»¥å¼•ç”¨è¯¥ç¬¦å·è€Œæ— éœ€é‡æ–°æ±‚å€¼ &amp;ldquo;to-try &amp;ldquo;ä»£ç ã€‚&lt;/p>
&lt;h3 id="å®çš„æ‰€æœ‰æ–¹å¼">å®çš„æ‰€æœ‰æ–¹å¼&lt;/h3>
&lt;p>ä½¿ç”¨å®çš„ä¸€ä¸ªå¾®å¦™çš„ç¼ºé™·æ˜¯ï¼Œä½ å¯èƒ½æœ€ç»ˆä¸å¾—ä¸å†™è¶Šæ¥è¶Šå¤šçš„å®æ¥å®Œæˆä»»ä½•äº‹æƒ…ã€‚è¿™æ˜¯ç”±äºå®çš„æ‰©å±•å‘ç”Ÿåœ¨æ±‚å€¼ä¹‹å‰ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³ç”¨&lt;code>report&lt;/code>å®æ¥&lt;code>doseq&lt;/code>ã€‚è€Œä¸æ˜¯å¤šæ¬¡è°ƒç”¨æŠ¥å‘Šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(report (= 1 1))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (= 1 1) was successful: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(report (= 1 2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (= 1 2) was not successful: false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®©æˆ‘ä»¬è¿›è¡Œè¿­ä»£ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(doseq [code [&amp;#39;(= 1 1) &amp;#39;(= 1 2)]]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (report code))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; code was successful: (= 1 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; code was successful: (= 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“æˆ‘ä»¬å•ç‹¬ä¼ é€’å‡½æ•°æ—¶ï¼ŒæŠ¥å‘Šå®å·¥ä½œæ­£å¸¸ï¼Œä½†å½“æˆ‘ä»¬ä½¿ç”¨&lt;code>doseq&lt;/code>å¯¹å¤šä¸ªå‡½æ•°è¿›è¡Œ&lt;code>report&lt;/code>è¿­ä»£æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¯«æ— ä»·å€¼çš„å¤±è´¥ã€‚ä¸‹é¢æ˜¯å…¶ä¸­ä¸€ä¸ª&lt;code>doseq&lt;/code>è¿­ä»£çš„å®æ‰©å±•çš„æ ·å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (clojure.core/println &amp;#39;code &amp;#34;was successful:&amp;#34; code)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (clojure.core/println &amp;#39;code &amp;#34;was not successful:&amp;#34; code))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œ&lt;code>report&lt;/code>åœ¨æ¯ä¸ªè¿­ä»£ä¸­æ¥æ”¶æœªæ±‚å€¼çš„ç¬¦å·&lt;code>code&lt;/code>ï¼›ç„¶è€Œï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒåœ¨æ±‚å€¼æ—¶æ¥æ”¶ä»»ä½•&lt;code>code&lt;/code>è¢«ç»‘å®šçš„å†…å®¹ã€‚ä½†æ˜¯&lt;code>report&lt;/code>åœ¨å®æ‰©å±•æ—¶æ“ä½œï¼Œå°±æ˜¯ä¸èƒ½è®¿é—®è¿™äº›å€¼ã€‚è¿™å°±åƒå®ƒæœ‰ T.Rex çš„æ‰‹è‡‚ï¼Œè¿è¡Œæ—¶çš„å€¼æ°¸è¿œä¸åœ¨å®ƒçš„æŒæ¡ä¹‹ä¸­ã€‚&lt;/p>
&lt;p>ä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å†å†™ä¸€ä¸ªå®ï¼Œåƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro doseq-macro
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [macroname &amp;amp; args]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(do
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~@(map (fn [arg] (list macroname arg)) args)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(doseq-macro report (= 1 1) (= 1 2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (= 1 1) was successful: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (= 1 2) was not successful: false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ é‡åˆ°è¿™ç§æƒ…å†µï¼Œè¯·èŠ±äº›æ—¶é—´é‡æ–°æ€è€ƒä½ çš„æ–¹æ³•ã€‚è¿™å¾ˆå®¹æ˜“ä½¿ä½ è‡ªå·±é™·å…¥å›°å¢ƒï¼Œä½¿ä½ æ— æ³•é€šè¿‡æ™®é€šçš„å‡½æ•°è°ƒç”¨æ¥å®Œæˆä»»ä½•äº‹æƒ…ã€‚ä½ ä¼šè¢«å¡ä½ï¼Œä¸å¾—ä¸å†™æ›´å¤šçš„å®ã€‚å®æ˜¯éå¸¸å¼ºå¤§å’Œä»¤äººæ•¬ç•çš„ï¼Œä½ ä¸åº”è¯¥å®³æ€•ä½¿ç”¨å®ƒä»¬ã€‚å®ƒä»¬æŠŠ Clojure å¤„ç†æ•°æ®çš„è®¾æ–½å˜æˆäº†åˆ›é€ æ–°è¯­è¨€çš„è®¾æ–½ï¼Œè€Œè¿™äº›æ–°è¯­è¨€æ˜¯æ ¹æ®ä½ çš„ç¼–ç¨‹é—®é¢˜æ¥è®¾è®¡çš„ã€‚å¯¹äºæŸäº›ç¨‹åºæ¥è¯´ï¼Œä½ çš„ä»£ç  90%ä»¥ä¸Šéƒ½æ˜¯å®ï¼Œè¿™æ˜¯åˆé€‚çš„ã€‚å°½ç®¡å®ƒä»¬å¾ˆæ£’ï¼Œä½†å®ƒä»¬ä¹Ÿå¢åŠ äº†æ–°çš„ç»„åˆæŒ‘æˆ˜ã€‚å®ƒä»¬åªæ˜¯çœŸæ­£çš„ç›¸äº’ç»„åˆï¼Œæ‰€ä»¥é€šè¿‡ä½¿ç”¨å®ƒä»¬ï¼Œä½ å¯èƒ½ä¼šé”™è¿‡ Clojure ä¸­å…¶ä»–ç±»å‹çš„ç»„åˆï¼ˆå‡½æ•°å¼ã€é¢å‘å¯¹è±¡ï¼‰ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ç°åœ¨å·²ç»æ¶µç›–äº†ç¼–å†™å®çš„æ‰€æœ‰æœºåˆ¶ã€‚æ‹æ‹ä½ çš„èƒŒå§! è¿™æ˜¯ä¸€ä¸ªç›¸å½“å¤§çš„äº¤æ˜“!&lt;/p>
&lt;p>åœ¨æœ¬ç« çš„æœ€åï¼Œç»ˆäºåˆ°äº†æˆ´ä¸Šä½ çš„ä¼ªè£…å¸½ï¼Œåœ¨æœ¬ç« æœ€å¼€å§‹è°ˆåˆ°çš„ç½‘ä¸Šè¯æ°´åº—å·¥ä½œçš„æ—¶å€™äº†ã€‚&lt;/p>
&lt;h2 id="ä¸ºå‹‡æ•¢å’ŒçœŸå®çš„äººè€Œé…¿çš„é…’">ä¸ºå‹‡æ•¢å’ŒçœŸå®çš„äººè€Œé…¿çš„é…’&lt;/h2>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/writing-macros/wizard.png"
loading="lazy"
>&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç« çš„å¼€å¤´ï¼Œæˆ‘é€éœ²äº†ä¸€ä¸ªæ¢¦æƒ³ï¼šæ‰¾åˆ°æŸç§å¯é¥®ç”¨çš„ä¸œè¥¿ï¼Œä¸€æ—¦æ‘„å…¥ï¼Œå°±èƒ½æš‚æ—¶è®©æˆ‘æ‹¥æœ‰ 80 å¹´ä»£å¥èº«å¤§å¸ˆçš„åŠ›é‡å’Œæ°”è´¨ï¼ŒæŠŠæˆ‘ä»æŠ‘åˆ¶å’Œè‡ªæˆ‘æ„è¯†çš„ç‰¢ç¬¼ä¸­è§£æ”¾å‡ºæ¥ã€‚æˆ‘ç›¸ä¿¡æœ‰ä¸€å¤©æŸä¸ªåœ°æ–¹ä¼šæœ‰äººå‘æ˜è¿™æ ·çš„çµä¸¹å¦™è¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦¨ç€æ‰‹å»ºç«‹ä¸€ä¸ªç³»ç»Ÿæ¥é”€å”®è¿™ç§ç¥è¯èˆ¬çš„è¯æ°´ã€‚è®©æˆ‘ä»¬æŠŠè¿™ç§å‡æƒ³çš„æ··åˆç‰©ç§°ä¸º&lt;em>å‹‡æ•¢å’ŒçœŸå®çš„å•¤é…’&lt;/em>ã€‚è¿™ä¸ªåå­—æ˜¯æˆ‘æ— ç¼˜æ— æ•…æƒ³åˆ°çš„ã€‚&lt;/p>
&lt;p>åœ¨è®¢å•çº·è‡³æ²“æ¥ä¹‹å‰ï¼ˆåŒå…³è¯­ï¼å‡»æŒï¼ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€äº›éªŒè¯çš„åœ°æ–¹ã€‚æœ¬èŠ‚å‘ä½ å±•ç¤ºäº†ä¸€ç§åœ¨åŠŸèƒ½ä¸Šè¿›è¡ŒéªŒè¯çš„æ–¹æ³•ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ä½ å°†ç¼–å†™çš„åä¸º &amp;ldquo;if-valid &amp;ldquo;çš„å®æ›´ç®€æ´åœ°ç¼–å†™æ‰§è¡ŒéªŒè¯çš„ä»£ç ã€‚è¿™å°†å¸®åŠ©ä½ äº†è§£ç¼–å†™è‡ªå·±çš„å®çš„å…¸å‹æƒ…å†µã€‚å¦‚æœä½ åªæƒ³çŸ¥é“å®çš„å®šä¹‰ï¼Œå¯ä»¥è·³åˆ°&lt;a class="link" href="https://www.braveclojure.com/writing-macros/#Anchor" target="_blank" rel="noopener"
>&amp;quot;&lt;code>if-valid&lt;/code>&amp;rdquo; ç¬¬ 182 é¡µ&lt;/a>ã€‚&lt;/p>
&lt;h3 id="éªŒè¯å‡½æ•°">éªŒè¯å‡½æ•°&lt;/h3>
&lt;p>ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åªæ‹…å¿ƒéªŒè¯æ¯ä¸ªè®¢å•çš„å§“åå’Œç”µå­é‚®ä»¶ã€‚å¯¹äºæˆ‘ä»¬çš„å•†åº—ï¼Œæˆ‘æƒ³æˆ‘ä»¬å¸Œæœ›è¿™äº›è®¢å•çš„ç»†èŠ‚èƒ½åƒè¿™æ ·è¡¨ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def order-details
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;Mitchard Blimmons&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :email &amp;#34;mitchard.blimmonsgmail.com&amp;#34;})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªç‰¹æ®Šçš„ Map æœ‰ä¸€ä¸ªæ— æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€ï¼ˆç¼ºå°‘&lt;code>@&lt;/code>ç¬¦å·ï¼‰ï¼Œæ‰€ä»¥è¿™æ­£æ˜¯æˆ‘ä»¬çš„éªŒè¯ä»£ç åº”è¯¥æ•æ‰çš„è®¢å•ç±»å‹ ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ç¼–å†™çš„ä»£ç èƒ½äº§ç”Ÿè¿™æ ·çš„ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(validate order-details order-details-validations)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:email [&amp;#34;Your email address doesn&amp;#39;t look like an email address.&amp;#34;]}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œ`validate&amp;rsquo;ï¼Œå…¶ä¸­åŒ…å«éœ€è¦éªŒè¯çš„æ•°æ®å’Œå¦‚ä½•éªŒè¯çš„å®šä¹‰ã€‚ç»“æœåº”è¯¥æ˜¯ä¸€ä¸ª Mapï¼Œå…¶ä¸­æ¯ä¸ªé”®å¯¹åº”ä¸€ä¸ªæ— æ•ˆçš„å­—æ®µï¼Œæ¯ä¸ªå€¼æ˜¯è¯¥å­—æ®µçš„ä¸€ä¸ªæˆ–å¤šä¸ªéªŒè¯ä¿¡æ¯çš„ Vectorã€‚ä¸‹é¢çš„ä¸¤ä¸ªå‡½æ•°å®Œæˆäº†è¿™é¡¹å·¥ä½œã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬å…ˆçœ‹çœ‹&lt;code>order-details-validations&lt;/code>ã€‚ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•è¡¨ç¤ºéªŒè¯ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def order-details-validations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;#34;Please enter a name&amp;#34; not-empty]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :email
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;#34;Please enter an email address&amp;#34; not-empty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Your email address doesn&amp;#39;t look like an email address&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #(or (empty? %) (re-seq #&amp;#34;@&amp;#34; %))]})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ˜¯ä¸€ä¸ª Mapï¼Œæ¯ä¸ªé”®éƒ½ä¸é”™è¯¯ä¿¡æ¯å’ŒéªŒè¯å‡½æ•°å¯¹çš„ Vector ç›¸å…³ã€‚ä¾‹å¦‚ï¼Œ&lt;code>:name&lt;/code>æœ‰ä¸€ä¸ªéªŒè¯å‡½æ•°ï¼Œ&lt;code>not-empty&lt;/code>ï¼›å¦‚æœéªŒè¯å¤±è´¥ï¼Œä½ åº”è¯¥å¾—åˆ°&lt;code>&amp;quot;è¯·è¾“å…¥ä¸€ä¸ªåå­—&amp;quot;&lt;/code>çš„é”™è¯¯ä¿¡æ¯ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å†™å‡º&lt;code>validate'å‡½æ•°ã€‚&lt;/code>validate&lt;code>å‡½æ•°å¯ä»¥åˆ†è§£æˆä¸¤ä¸ªå‡½æ•°ï¼šä¸€ä¸ªæ˜¯å¯¹å•ä¸ªå­—æ®µè¿›è¡ŒéªŒè¯ï¼Œå¦ä¸€ä¸ªæ˜¯å°†è¿™äº›é”™è¯¯ä¿¡æ¯ç´¯ç§¯æˆä¸€ä¸ªæœ€ç»ˆçš„é”™è¯¯ä¿¡æ¯Mapï¼Œå¦‚&lt;/code>{:email [&amp;ldquo;ä½ çš„é‚®ç®±åœ°å€çœ‹èµ·æ¥ä¸åƒé‚®ç®±åœ°å€ã€‚&amp;rdquo;]}&lt;code>ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå«åš&lt;/code>error-messages-for`çš„å‡½æ•°ï¼Œå¯¹ä¸€ä¸ªå•ä¸€çš„å€¼è¿›è¡ŒéªŒè¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn error-messages-for
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Return a seq of error messages&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [to-validate message-validator-pairs]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map first (filter #(not ((second %) to-validate))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (partition 2 message-validator-pairs))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ&lt;code>to-validate&lt;/code>ï¼Œæ˜¯ä½ è¦éªŒè¯çš„å­—æ®µã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼Œ&lt;code>message-validator-pairs&lt;/code>ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰å¶æ•°å…ƒç´ çš„åºåˆ—ã€‚è¿™ä¸ªåºåˆ—è¢«åˆ†ç»„ä¸º&lt;code>(partition 2 message-validator-pairs)'çš„å¯¹ã€‚å¯¹ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ åº”è¯¥æ˜¯ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œå¯¹ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå°±åƒåœ¨&lt;/code>order-details-validations&lt;code>ä¸­å®‰æ’çš„å¯¹ï¼‰ã€‚&lt;/code>error-messages-for&lt;code>å‡½æ•°çš„å·¥ä½œåŸç†æ˜¯è¿‡æ»¤å‡ºæ‰€æœ‰é”™è¯¯ä¿¡æ¯å’ŒéªŒè¯å¯¹ï¼Œå…¶ä¸­éªŒè¯å‡½æ•°åœ¨åº”ç”¨äº&lt;/code>to-validate&lt;code>æ—¶è¿”å›&lt;/code>true&lt;code>ã€‚ç„¶åï¼Œå®ƒä½¿ç”¨&lt;/code>map first`æ¥è·å–æ¯å¯¹å…ƒç´ çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå³é”™è¯¯ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯å®ƒçš„æ“ä½œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(error-messages-for &amp;#34;&amp;#34; [&amp;#34;Please enter a name&amp;#34; not-empty])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Please enter a name&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æˆ‘ä»¬éœ€è¦å°†è¿™äº›é”™è¯¯ä¿¡æ¯ç§¯ç´¯åˆ°ä¸€ä¸ª Map ä¸­ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯å®Œæ•´çš„&lt;code>validate&lt;/code>å‡½æ•°ï¼Œä»¥åŠæˆ‘ä»¬å°†å…¶åº”ç”¨äº&lt;code>order-details&lt;/code>å’Œ&lt;code>order-details-validations&lt;/code>æ—¶çš„è¾“å‡ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn validate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Returns a map with a vector of errors for each key&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [to-validate validations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (reduce (fn [errors validation]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [[fieldname validation-check-groups] validation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value (get to-validate fieldname)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> error-messages (error-messages-for value validation-check-groups)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (empty? error-messages)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> errors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (assoc errors fieldname error-messages))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> validations))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(validate order-details order-details-validations)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:email (&amp;#34;Your email address doesn&amp;#39;t look like an email address&amp;#34;)}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆåŠŸäº†! è¿™ä¸ªå‡½æ•°æ˜¯é€šè¿‡å‡å°‘&lt;code>order-details-validations'å¹¶å°†&lt;/code>order-details&amp;rsquo;çš„æ¯ä¸ªé”®çš„é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å…³è”åˆ°ä¸€ä¸ªæœ€ç»ˆçš„é”™è¯¯ä¿¡æ¯ Mapã€‚&lt;/p>
&lt;h3 id="if-valid">if-valid&lt;/h3>
&lt;p>æœ‰äº†æˆ‘ä»¬çš„éªŒè¯ä»£ç ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°éªŒè¯è®°å½•äº†ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒéªŒè¯ä¼šåƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [errors (validate order-details order-details-validations)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (empty? errors)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println :success)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println :failure errors)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥æ¨¡å¼æ˜¯åšä»¥ä¸‹å·¥ä½œã€‚&lt;/p>
&lt;ol>
&lt;li>éªŒè¯ä¸€æ¡è®°å½•å¹¶å°†ç»“æœç»‘å®šåˆ°&lt;code>errors&lt;/code>ã€‚&lt;/li>
&lt;li>æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•é”™è¯¯&lt;/li>
&lt;li>3.å¦‚æœæœ‰ï¼ŒåšæˆåŠŸçš„äº‹æƒ…ï¼Œè¿™é‡Œ&lt;code>(println :success)&lt;/code>ã€‚&lt;/li>
&lt;li>å¦åˆ™ï¼Œåšå¤±è´¥çš„äº‹æƒ…ï¼Œè¿™é‡Œ&lt;code>(println :failure errors)&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;p>æˆ‘å·²ç»åœ¨å®é™…ç”Ÿäº§çš„ç½‘ç«™ä¸­ä½¿ç”¨äº†è¿™ä¸ªéªŒè¯ä»£ç ã€‚èµ·åˆï¼Œæˆ‘å‘ç°è‡ªå·±ä¸æ–­é‡å¤ä»£ç çš„å¾®å°å˜åŒ–ï¼Œè¿™æ— ç–‘è¡¨æ˜æˆ‘éœ€è¦å¼•å…¥ä¸€ä¸ªæŠ½è±¡ï¼Œä»¥éšè—é‡å¤çš„éƒ¨åˆ†ï¼šåº”ç”¨&lt;code>validate&lt;/code>å‡½æ•°ï¼Œå°†ç»“æœç»‘å®šåˆ°ä¸€äº›ç¬¦å·ï¼Œå¹¶æ£€æŸ¥ç»“æœæ˜¯å¦ä¸ºç©ºã€‚ä¸ºäº†åˆ›å»ºè¿™ç§æŠ½è±¡ï¼Œä½ å¯èƒ½ä¼šæƒ³å†™ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn if-valid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [record validations success-code failure-code]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [errors (validate record validations)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (empty? errors)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> success-code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> failure-code)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œè¿™ä¸ä¼šèµ·ä½œç”¨ï¼Œå› ä¸º&lt;code>success-code&lt;/code>å’Œ&lt;code>failure-code&lt;/code>æ¯æ¬¡éƒ½ä¼šè¢«æ±‚å€¼ã€‚å®ä¼šèµ·ä½œç”¨ï¼Œå› ä¸ºå®å…è®¸ä½ æ§åˆ¶æ±‚å€¼ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨å®çš„æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if-valid order-details order-details-validations errors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (render :success)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (render :failure errors))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå®éšè—äº†é‡å¤çš„ç»†èŠ‚ï¼Œå¸®åŠ©ä½ æ›´ç®€æ´åœ°è¡¨è¾¾ä½ çš„æ„å›¾ã€‚è¿™å°±åƒè¦æ±‚åˆ«äººç»™ä½ å¼€ç“¶å™¨ï¼Œè€Œä¸æ˜¯è¯´ï¼š&amp;ldquo;è¯·ç»™æˆ‘æ‰‹åŠ¨è£…ç½®ï¼Œç”¨äºå»é™¤ç»ç’ƒå®¹å™¨ä¸­æ¶²ä½“çš„ä¸´æ—¶å¯†å°å‰‚ã€‚&amp;rdquo; ä¸‹é¢æ˜¯å®æ–½æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro if-valid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Handle validation more concisely&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [to-validate validations errors-name &amp;amp; then-else]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> `(let [~errors-name (validate ~to-validate ~validations)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (empty? ~errors-name)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~@then-else)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå®éœ€è¦å››ä¸ªå‚æ•°ã€‚Â &lt;code>to-validate&lt;/code>, &lt;code>validations&lt;/code>, &lt;code>errors-name&lt;/code>, å’Œå…¶ä½™å‚æ•°&lt;code>then-else&lt;/code>. åƒè¿™æ ·ä½¿ç”¨&lt;code>errors-name&lt;/code>æ˜¯ä¸€ä¸ªæ–°çš„ç­–ç•¥ã€‚æˆ‘ä»¬æƒ³åœ¨&lt;code>then-else&lt;/code>è¯­å¥ä¸­è®¿é—®&lt;code>validate&lt;/code>å‡½æ•°è¿”å›çš„é”™è¯¯ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦å‘Šè¯‰å®å®ƒåº”è¯¥æŠŠç»“æœç»‘å®šåˆ°ä»€ä¹ˆç¬¦å·ä¸Šã€‚ä¸‹é¢çš„å®æ‰©å±•æ˜¾ç¤ºäº†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> (macroexpand
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;(if-valid order-details order-details-validations my-error-name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println :success)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println :failure my-error-name)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(let*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [my-error-name (user/validate order-details order-details-validations)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (clojure.core/empty? my-error-name)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println :success)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println :failure my-error-name)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯­æ³•å¼•å·æŠ½è±¡äº†ä½ ä¹‹å‰çœ‹åˆ°çš„&lt;code>let/validate/if&lt;/code>æ¨¡å¼çš„ä¸€èˆ¬å½¢å¼ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨ unquote æ‹¼æ¥æ¥è§£å‹&lt;code>if&lt;/code>åˆ†æ”¯ï¼Œè¿™äº›åˆ†æ”¯è¢«æ‰“åŒ…åˆ°&lt;code>then-else&lt;/code>å…¶ä½™å‚æ•°ä¸­ã€‚&lt;/p>
&lt;p>è¿™çœŸæ˜¯å¤ªç®€å•äº†! è¯´äº†è¿™ä¹ˆå¤šå…³äºå®çš„å†…å®¹ï¼Œå¹¶è¯¦ç»†ä»‹ç»äº†å®ƒä»¬çš„æœºåˆ¶ï¼Œæˆ‘æ‰“èµŒä½ ä¸€å®šä»¥ä¸ºä¼šæœ‰æ›´å¤æ‚çš„ä¸œè¥¿ã€‚å¯¹ä¸èµ·ï¼Œæœ‹å‹ã€‚å¦‚æœä½ å¯¹ä½ çš„å¤±æœ›æ„Ÿåˆ°éš¾ä»¥æ¥å—ï¼Œæˆ‘çŸ¥é“æœ‰ä¸€ç§é¥®æ–™å¯ä»¥å¸®åŠ©ä½ ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å­¦ä¼šäº†å¦‚ä½•ç¼–å†™è‡ªå·±çš„å®ã€‚å®çš„å®šä¹‰ä¸å‡½æ•°éå¸¸ç›¸ä¼¼ï¼šå®ƒä»¬æœ‰å‚æ•°ã€æ–‡ä»¶ä¸²å’Œä¸»ä½“ã€‚å®ƒä»¬å¯ä»¥ä½¿ç”¨å‚æ•°é‡æ„å’Œä¼‘æ¯å‚æ•°ï¼Œè€Œä¸”å¯ä»¥æ˜¯é€’å½’çš„ã€‚ä½ çš„å®å‡ ä¹éƒ½ä¼šè¿”å›åˆ—è¡¨ã€‚ä½ æœ‰æ—¶ä¼šä½¿ç”¨&lt;code>list&lt;/code>å’Œ&lt;code>seq&lt;/code>å‡½æ•°æ¥ç¼–å†™ç®€å•çš„å®ï¼Œä½†å¤§å¤šæ•°æ—¶å€™ä½ ä¼šä½¿ç”¨è¯­æ³•å¼•å·ï¼Œï¼Œå®ƒè®©ä½ ä½¿ç”¨å®‰å…¨æ¨¡æ¿æ¥ç¼–å†™å®ã€‚&lt;/p>
&lt;p>å½“ä½ ç¼–å†™å®æ—¶ï¼Œé‡è¦çš„æ˜¯è¦è®°ä½ç¬¦å·å’Œå€¼ä¹‹é—´çš„åŒºåˆ«ï¼šå®åœ¨ä»£ç è¢«æ±‚å€¼ä¹‹å‰è¢«å±•å¼€ï¼Œå› æ­¤ä¸èƒ½è®¿é—®æ±‚å€¼çš„ç»“æœã€‚åŒé‡æ±‚å€¼å’Œå˜é‡æ•è·æ˜¯å¦å¤–ä¸¤ä¸ªå¾®å¦™çš„é™·é˜±ï¼Œä½†ä½ å¯ä»¥é€šè¿‡æ˜æ™ºåœ°ä½¿ç”¨ &amp;ldquo;let &amp;ldquo;è¡¨è¾¾å¼å’Œä»£è¯æ¥é¿å…å®ƒä»¬ã€‚&lt;/p>
&lt;p>å®æ˜¯ä¸€ç§æœ‰è¶£çš„å·¥å…·ï¼Œå¯ä»¥è®©ä½ åœ¨ç¼–ç æ—¶å°‘ä¸€äº›æ‹˜æŸã€‚é€šè¿‡è®©ä½ æ§åˆ¶æ±‚å€¼ï¼Œå®ç»™ä½ ä¸€å®šç¨‹åº¦çš„è‡ªç”±å’Œè¡¨è¾¾ï¼Œè¿™æ˜¯å…¶ä»–è¯­è¨€æ‰€ä¸å…è®¸çš„ã€‚åœ¨ä½ çš„ Clojure æ—…ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šå¬åˆ°æœ‰äººå‘Šè¯«ä½ ä¸è¦ä½¿ç”¨å®ï¼Œè¯´ä»€ä¹ˆ &amp;ldquo;å®æ˜¯é‚ªæ¶çš„ &amp;ldquo;å’Œ &amp;ldquo;ä½ ä¸åº”è¯¥ä½¿ç”¨å®&amp;rdquo;ã€‚ä¸è¦å¬è¿™äº›å‡æ­£ç»çš„äººçš„è¯&amp;ndash;è‡³å°‘åœ¨å¼€å§‹çš„æ—¶å€™ä¸è¦å¬ä»–ä»¬çš„ã€‚èµ°å‡ºå»ï¼Œäº«å—ç¾å¥½çš„æ—¶å…‰ã€‚è¿™æ˜¯ä½ å­¦ä¹ åœ¨å“ªäº›æƒ…å†µä¸‹é€‚åˆä½¿ç”¨å®çš„å”¯ä¸€é€”å¾„ã€‚ä½ ä¼šä»å¦ä¸€ä¸ªè§’åº¦çŸ¥é“å¦‚ä½•æœ‰æŠ€å·§åœ°ã€æ½‡æ´’åœ°ä½¿ç”¨å®ã€‚&lt;/p>
&lt;h2 id="ç»ƒä¹ ">ç»ƒä¹ &lt;/h2>
&lt;ol>
&lt;li>
&lt;p>ç¼–å†™å®&lt;code>when-valid&lt;/code>ï¼Œä½¿å®ƒçš„è¡Œä¸ºä¸&lt;code>when&lt;/code>ç›¸ä¼¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè°ƒç”¨å®ƒçš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(when-valid order-details order-details-validations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(println &amp;#34;It&amp;#39;s a success!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(render :success))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“æ•°æ®æœ‰æ•ˆæ—¶ï¼Œåº”è¯¥æ±‚å€¼&lt;code>println&lt;/code>å’Œ&lt;code>render&lt;/code>å½¢å¼ï¼Œå¦‚æœæ•°æ®æ— æ•ˆï¼Œ&lt;code>when-valid&lt;/code>åº”è¯¥è¿”å›&lt;code>nil&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½ çœ‹åˆ°&lt;code>and&lt;/code>æ˜¯ä½œä¸ºä¸€ä¸ªå®å®ç°çš„ã€‚æŠŠ`or&amp;rsquo;ä½œä¸ºä¸€ä¸ªå®æ¥å®ç°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ç¬¬ 5 ç« ä¸­ï¼Œä½ åˆ›å»ºäº†ä¸€ç³»åˆ—å‡½æ•°ï¼ˆ&lt;code>c-int&lt;/code>, &lt;code>c-str&lt;/code>, &lt;code>c-dex&lt;/code>ï¼‰æ¥è¯»å–ä¸€ä¸ª RPG å­—ç¬¦çš„å±æ€§ã€‚å†™ä¸€ä¸ªå®ï¼Œç”¨ä¸€ä¸ªå®è°ƒç”¨æ¥å®šä¹‰ä»»æ„æ•°é‡çš„å±æ€§æ£€ç´¢å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯ä½ å¦‚ä½•è°ƒç”¨å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>(defattrs c-int :intelligence
c-str :strength
c-dex :dexterity)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Chapter7 ç‚¼é‡‘æœ¯</title><link>https://example.com/p/chapter7-%E7%82%BC%E9%87%91%E6%9C%AF/</link><pubDate>Sat, 15 Jan 2022 12:14:36 +0800</pubDate><guid>https://example.com/p/chapter7-%E7%82%BC%E9%87%91%E6%9C%AF/</guid><description>&lt;h1 id="clojure-ç‚¼é‡‘æœ¯è¯»å–å™¨æ±‚å€¼å™¨å’Œå®">Clojure ç‚¼é‡‘æœ¯ï¼šè¯»å–å™¨ã€æ±‚å€¼å™¨å’Œå®&lt;/h1>
&lt;p>å“²å­¦å®¶ä¹‹çŸ³ï¼Œä¸ç”Ÿå‘½ä¹‹è¯å’Œä¼Ÿå“¥ä¸€æ ·ï¼Œæ˜¯ç‚¼é‡‘æœ¯ä¼ è¯´ä¸­æœ€è‘—åçš„æ ‡æœ¬ä¹‹ä¸€ï¼Œå› å…¶èƒ½å°†é“…è½¬åŒ–ä¸ºé‡‘è€Œå—åˆ°è¿½æ§ã€‚ç„¶è€Œï¼ŒClojure æä¾›äº†ä¸€ç§å·¥å…·ï¼Œä½¿å“²å­¦å®¶çš„çŸ³å¤´çœ‹èµ·æ¥åªæ˜¯ä¸€ä¸ªå°é¥°å“ï¼š*å®ã€‚&lt;/p>
&lt;p>å®å…è®¸ä½ å°†ä»»æ„çš„è¡¨è¾¾å¼è½¬åŒ–ä¸ºæœ‰æ•ˆçš„ Clojureï¼Œå› æ­¤ä½ å¯ä»¥æ‰©å±•è¯­è¨€æœ¬èº«ä»¥æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚è€Œä¸”ï¼Œä½ ç”šè‡³ä¸éœ€è¦æ˜¯ä¸€ä¸ªç©¿é•¿è¢çš„è€å®¶ä¼™æˆ–è€å¤ªå¤ªæ¥ä½¿ç”¨å®ƒä»¬&lt;/p>
&lt;p>ä¸ºäº†è·å¾—è¿™ç§èƒ½åŠ›ï¼Œè¯·è€ƒè™‘è¿™ä¸ªå¾®ä¸è¶³é“çš„å®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro backwards
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [form]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (reverse form))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(backwards (&amp;#34; backwards&amp;#34; &amp;#34; am&amp;#34; &amp;#34;I&amp;#34; str))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;I am backwards&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>backwards&lt;/code>å®å…è®¸ Clojure æˆåŠŸåœ° Eval è¡¨è¾¾å¼&lt;code>(&amp;quot; backwards&amp;quot; &amp;quot; am&amp;quot; &amp;quot;I&amp;quot; str)&lt;/code>ï¼Œå°½ç®¡å®ƒæ²¡æœ‰éµå¾ª Clojure çš„å†…ç½®è¯­æ³•è§„åˆ™ï¼Œè¿™äº›è§„åˆ™è¦æ±‚è¡¨è¾¾å¼çš„æ“ä½œæ•°é¦–å…ˆå‡ºç°ï¼ˆæ›´ä¸ç”¨è¯´è¡¨è¾¾å¼ä¸èƒ½æŒ‰ç›¸åé¡ºåºä¹¦å†™çš„è§„åˆ™ï¼‰ã€‚å¦‚æœæ²¡æœ‰ &amp;ldquo;å‘å&amp;rdquo;ï¼Œè¿™ä¸ªè¡¨è¾¾å¼ä¼šæ¯”å‡ åƒå¹´æ¥çš„ç‚¼é‡‘æœ¯å£«ç”¨ä»–ä»¬çš„ä¸€ç”Ÿæ¥è¿½æ±‚ä¸å¯èƒ½å®ç°çš„é•¿ç”Ÿä¸è€çš„æ–¹æ³•æ›´éš¾å¤±è´¥ã€‚æœ‰äº†`å‘å&amp;rsquo;ï¼Œ*ä½ å°±åˆ›é€ äº†ä½ è‡ªå·±çš„è¯­æ³•ï¼*ä½ æ‰©å±•äº† Clojureï¼Œè¿™æ ·ä½ å°±å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°å†™ä»£ç äº† æˆ‘å‘Šè¯‰ä½ ï¼Œè¿™æ¯”æŠŠé“…å˜æˆé‡‘å­è¦å¥½å¾—å¤š!&lt;/p>
&lt;p>æœ¬ç« ä¸ºä½ æä¾›äº†ç¼–å†™è‡ªå·±çš„å®æ‰€éœ€çš„æ¦‚å¿µåŸºç¡€ï¼Œä½¿ä½ èƒ½å¤Ÿç–¯ç‹‚åœ°ç¼–å†™è‡ªå·±çš„å®ã€‚å®ƒè§£é‡Šäº† Clojure æ±‚å€¼æ¨¡å‹çš„å…ƒç´ ï¼š&lt;em>è¯»å–å™¨&lt;/em>ï¼Œ&lt;em>æ±‚å€¼å™¨&lt;/em>ï¼Œå’Œ&lt;em>å®æ‰©å±•å™¨&lt;/em>ã€‚è¿™å°±åƒ Clojure å…ƒç´ çš„å‘¨æœŸè¡¨ã€‚æƒ³æƒ³å‘¨æœŸè¡¨æ˜¯å¦‚ä½•æ­ç¤ºåŸå­çš„ç‰¹æ€§çš„ï¼šåŒä¸€åˆ—çš„å…ƒç´ è¡Œä¸ºç›¸ä¼¼ï¼Œå› ä¸ºå®ƒä»¬æœ‰ç›¸åŒçš„æ ¸ç”µè·ã€‚å¦‚æœæ²¡æœ‰å…ƒç´ å‘¨æœŸè¡¨åŠå…¶åŸºç¡€ç†è®ºï¼Œæˆ‘ä»¬å°±ä¼šåƒè¿‡å»çš„ç‚¼é‡‘æœ¯å£«ä¸€æ ·ï¼Œéšæ„åœ°æŠŠä¸œè¥¿æ··åœ¨ä¸€èµ·ï¼Œçœ‹çœ‹ä»€ä¹ˆä¸œè¥¿ä¼šçˆ†ç‚¸ã€‚ä½†æ˜¯ï¼Œéšç€å¯¹å…ƒç´ çš„æ·±å…¥äº†è§£ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸ºä»€ä¹ˆä¸œè¥¿ä¼šçˆ†ç‚¸ï¼Œå¹¶å­¦ä¼šå¦‚ä½•æœ‰ç›®çš„åœ°ç‚¸æ¯ä¸œè¥¿ã€‚&lt;/p>
&lt;h2 id="a-overview-of-clojures-evaluation-model">A Overview of Clojure&amp;rsquo;s Evaluation Model&lt;/h2>
&lt;p>Clojureï¼ˆåƒæ‰€æœ‰çš„ Lispsï¼‰æœ‰ä¸€ä¸ªä¸åŒäºå¤§å¤šæ•°å…¶ä»–è¯­è¨€çš„æ±‚å€¼æ¨¡å‹ï¼šå®ƒæœ‰ä¸€ä¸ªä¸¤é˜¶æ®µçš„ç³»ç»Ÿï¼Œå®ƒ&lt;em>è¯»&lt;/em>æ–‡æœ¬æºä»£ç ï¼Œäº§ç”Ÿ Clojure æ•°æ®ç»“æ„ã€‚ç„¶åå¯¹è¿™äº›æ•°æ®ç»“æ„è¿›è¡Œ*æ±‚å€¼ã€‚Clojure éå†æ•°æ®ç»“æ„ï¼Œå¹¶æ ¹æ®æ•°æ®ç»“æ„çš„ç±»å‹æ‰§è¡Œå‡½æ•°åº”ç”¨æˆ– var æŸ¥æ‰¾ç­‰æ“ä½œã€‚ä¾‹å¦‚ï¼Œå½“ Clojure è¯»å–æ–‡æœ¬&lt;code>(+ 1 2)&lt;/code>æ—¶ï¼Œç»“æœæ˜¯ä¸€ä¸ªåˆ—è¡¨æ•°æ®ç»“æ„ï¼Œå…¶ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ª&lt;code>+&lt;/code>ç¬¦å·ï¼Œåé¢æ˜¯æ•°å­— 1 å’Œ 2ã€‚è¿™ä¸ªæ•°æ®ç»“æ„è¢«ä¼ é€’ç»™ Clojure çš„æ±‚å€¼å™¨ï¼Œæ±‚å€¼å™¨æŸ¥æ‰¾&lt;code>+&lt;/code>å¯¹åº”çš„å‡½æ•°ï¼Œå¹¶å°†è¯¥å‡½æ•°åº”ç”¨äº 1 å’Œ 2ã€‚&lt;/p>
&lt;p>åœ¨æºä»£ç ã€æ•°æ®å’Œæ±‚å€¼ä¹‹é—´æœ‰è¿™ç§å…³ç³»çš„è¯­è¨€è¢«ç§°ä¸º&lt;em>homoiconic&lt;/em>ï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœä½ åœ¨æµ´å®¤çš„é•œå­å‰ç†„ç¯è¯´ä¸‰æ¬¡&lt;em>homoiconic&lt;/em>ï¼Œçº¦ç¿°-éº¦å¡é”¡çš„å¹½çµå°±ä¼šå‡ºç°å¹¶ç»™ä½ ä¸€ä¸ªå°æ‹¬å·ï¼‰ã€‚åŒæºè¯­è¨€ä½¿ä½ èƒ½å¤Ÿå°†ä½ çš„ä»£ç ä½œä¸ºä¸€ç»„æ•°æ®ç»“æ„è¿›è¡Œæ¨ç†ï¼Œä½ å¯ä»¥é€šè¿‡ç¨‹åºè¿›è¡Œæ“ä½œã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬åœ¨ç¼–è¯‘çš„åœŸåœ°ä¸Šèµ°ä¸€åœˆã€‚&lt;/p>
&lt;p>ç¼–ç¨‹è¯­è¨€éœ€è¦ä¸€ä¸ªç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨æ¥å°†ä½ å†™çš„ä»£ç ï¼ˆç”± Unicode å­—ç¬¦ç»„æˆï¼‰ç¿»è¯‘æˆå…¶ä»–ä¸œè¥¿ï¼šæœºå™¨æŒ‡ä»¤ã€å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ä»£ç ï¼Œç­‰ç­‰ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæ„å»ºä¸€ä¸ª&lt;em>æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰&lt;/em>ï¼Œè¿™æ˜¯ä¸€ä¸ªä»£è¡¨ä½ çš„ç¨‹åºçš„æ•°æ®ç»“æ„ã€‚ä½ å¯ä»¥æŠŠ AST çœ‹ä½œæ˜¯&lt;em>æ±‚å€¼å™¨&lt;/em>çš„è¾“å…¥ï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªéå†è¯¥æ ‘çš„å‡½æ•°ï¼Œä»¥äº§ç”Ÿæœºå™¨ä»£ç æˆ–å…¶ä»–ä»€ä¹ˆä½œä¸ºå…¶è¾“å‡ºã€‚&lt;/p>
&lt;p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™å¬èµ·æ¥å¾ˆåƒæˆ‘ä¸º Clojure æè¿°çš„é‚£æ ·ã€‚ç„¶è€Œï¼Œåœ¨å¤§å¤šæ•°è¯­è¨€ä¸­ï¼ŒAST çš„æ•°æ®ç»“æ„åœ¨ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯æ— æ³•è®¿é—®çš„ï¼›ç¼–ç¨‹è¯­è¨€ç©ºé—´å’Œç¼–è¯‘å™¨ç©ºé—´æ˜¯æ°¸è¿œåˆ†ç¦»çš„ï¼Œä¸¤è€…æ°¸è¿œä¸ä¼šç›¸é‡ã€‚å›¾ 7-1 æ˜¾ç¤ºäº†åœ¨é Lisp ç¼–ç¨‹è¯­è¨€ä¸­è¡¨è¾¾å¼çš„ç¼–è¯‘è¿‡ç¨‹çš„å¯è§†åŒ–æƒ…å†µã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/read-and-eval/non-lisp-eval.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 7-1ï¼šé Lisp ç¼–ç¨‹è¯­è¨€çš„æ±‚å€¼&lt;/p>
&lt;p>ä½† Clojure æ˜¯ä¸åŒçš„ï¼Œå› ä¸º Clojure æ˜¯ Lispï¼Œè€Œ Lisps æ¯”å·æ¥çš„ tamale æ›´çƒ­ã€‚Lisps æ±‚å€¼çš„æ˜¯æœ¬åœ°æ•°æ®ç»“æ„ï¼Œè€Œä¸æ˜¯æ±‚å€¼è¡¨ç¤ºä¸ºæŸç§æ— æ³•è®¿é—®çš„å†…éƒ¨æ•°æ®ç»“æ„çš„ ASTã€‚Clojure ä»ç„¶æ±‚å€¼æ ‘å½¢ç»“æ„ï¼Œä½†æ ‘æ˜¯ç”¨ Clojure åˆ—è¡¨ç»“æ„çš„ï¼ŒèŠ‚ç‚¹æ˜¯ Clojure å€¼ã€‚&lt;/p>
&lt;p>åˆ—è¡¨æ˜¯æ„å»ºæ ‘å½¢ç»“æ„çš„ç†æƒ³é€‰æ‹©ã€‚åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¢«è§†ä¸ºæ ¹ï¼Œæ¯ä¸ªåç»­å…ƒç´ è¢«è§†ä¸ºä¸€ä¸ªåˆ†æ”¯ã€‚è¦åˆ›å»ºä¸€ä¸ªåµŒå¥—æ ‘ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨åµŒå¥—åˆ—è¡¨ï¼Œå¦‚å›¾ 7-2 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/read-and-eval/trees.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 7-2ï¼šåˆ—è¡¨å¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«å½“ä½œæ ‘æ¥å¤„ç†ã€‚&lt;/p>
&lt;p>é¦–å…ˆï¼ŒClojure çš„&lt;em>è¯»å–å™¨&lt;/em>å°†æ–‡æœ¬&lt;code>(+ 1 (* 6 7))&lt;/code>è½¬æ¢ä¸ºä¸€ä¸ªåµŒå¥—åˆ—è¡¨ã€‚(ä½ å°†åœ¨ä¸‹ä¸€èŠ‚äº†è§£æ›´å¤šå…³äºè¯»å–å™¨çš„ä¿¡æ¯ã€‚)ç„¶åï¼ŒClojure çš„æ±‚å€¼å™¨å°†è¯¥æ•°æ®ä½œä¸ºè¾“å…¥å¹¶äº§ç”Ÿä¸€ä¸ªç»“æœã€‚(å®ƒè¿˜å¯ä»¥ç¼–è¯‘ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰å­—èŠ‚ç ï¼Œä½ ä¼šåœ¨ç¬¬ 12 ç« ä¸­äº†è§£åˆ°ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªå…³æ³¨æ¦‚å¿µå±‚é¢ä¸Šçš„æ±‚å€¼æ¨¡å‹ï¼‰ã€‚&lt;/p>
&lt;p>è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œå›¾ 7-3 æ˜¾ç¤ºäº† Clojure çš„æ±‚å€¼è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ã€‚&lt;/p>
&lt;p>S-è¡¨è¾¾å¼&lt;/p>
&lt;p>åœ¨ä½ çš„ Lisp å†’é™©ä¸­ï¼Œä½ ä¼šé‡åˆ°ä¸€äº›èµ„æºï¼Œå®ƒä»¬è§£é‡Šè¯´ Lisp æ±‚å€¼ S-è¡¨è¾¾å¼ã€‚æˆ‘åœ¨è¿™é‡Œé¿å…ä½¿ç”¨è¿™ä¸ªæœ¯è¯­ï¼Œå› ä¸ºå®ƒæœ‰æ­§ä¹‰ï¼šä½ ä¼šçœ‹åˆ°å®ƒæ—¢æŒ‡è¢«æ±‚å€¼çš„å®é™…æ•°æ®å¯¹è±¡ï¼Œä¹ŸæŒ‡è¡¨ç¤ºè¯¥æ•°æ®çš„æºä»£ç ã€‚å¯¹ Lisp æ±‚å€¼çš„ä¸¤ä¸ªä¸åŒç»„æˆéƒ¨åˆ†ï¼ˆä»£ç å’Œæ•°æ®ï¼‰ä½¿ç”¨åŒä¸€ä¸ªæœ¯è¯­ï¼Œä¼šæ©ç›–é‡è¦çš„ä¸œè¥¿ï¼šä½ çš„æ–‡æœ¬ä»£è¡¨äº†æœ¬åœ°æ•°æ®ç»“æ„ï¼Œè€Œ Lisp æ±‚å€¼æœ¬åœ°æ•°æ®ç»“æ„ï¼Œè¿™æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä»¤äººæ•¬ç•çš„ã€‚å…³äº s-è¡¨è¾¾å¼çš„ç²¾å½©å¤„ç†ï¼Œè¯·æŸ¥çœ‹&lt;a class="link" href="http://www.gigamonkeys.com/book/syntax-and-semantics.html" target="_blank" rel="noopener"
>http://www.gigamonkeys.com/book/syntax-and-semantics.html&lt;/a>ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/read-and-eval/lisp-eval.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 7-3ï¼šClojure ä¸­çš„æ±‚å€¼&lt;/p>
&lt;p>ç„¶è€Œï¼Œæ±‚å€¼å™¨å®é™…ä¸Šå¹¶ä¸å…³å¿ƒå®ƒçš„è¾“å…¥æ¥è‡ªå“ªé‡Œï¼›å®ƒä¸ä¸€å®šè¦æ¥è‡ªè¯»è€…ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ç”¨&lt;code>eval&lt;/code>å°†ä½ çš„ç¨‹åºçš„æ•°æ®ç»“æ„ç›´æ¥å‘é€ç»™ Clojure æ±‚å€¼å™¨ã€‚çœ‹å“ª!&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def addition-list (list + 1 2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(eval addition-list)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±å¯¹äº†ï¼Œå®è´! ä½ çš„ç¨‹åºåˆšåˆšæ±‚å€¼äº†ä¸€ä¸ª Clojure åˆ—è¡¨ã€‚ä½ å¾ˆå¿«å°±ä¼šè¯»åˆ°å…³äº Clojure æ±‚å€¼è§„åˆ™çš„æ‰€æœ‰å†…å®¹ï¼Œä½†ç®€å•åœ°è¯´ï¼Œè¿™æ˜¯å‘ç”Ÿäº†ä»€ä¹ˆï¼šå½“ Clojure æ±‚å€¼åˆ—è¡¨æ—¶ï¼Œå®ƒæŸ¥æ‰¾äº†&lt;code>addition-list&lt;/code>æ‰€æŒ‡çš„åˆ—è¡¨ï¼›ç„¶åå®ƒæŸ¥æ‰¾äº†ä¸&lt;code>+&lt;/code>ç¬¦å·å¯¹åº”çš„å‡½æ•°ï¼›ç„¶åå®ƒç”¨&lt;code>1&lt;/code>å’Œ&lt;code>2&lt;/code>ä½œä¸ºå‚æ•°è°ƒç”¨äº†è¯¥å‡½æ•°ï¼Œè¿”å›&lt;code>3&lt;/code>ã€‚ä½ çš„è¿è¡Œç¨‹åºçš„æ•°æ®ç»“æ„å’Œæ±‚å€¼å™¨çš„æ•°æ®ç»“æ„ç”Ÿæ´»åœ¨åŒä¸€ä¸ªç©ºé—´ï¼Œç»“æœæ˜¯ä½ å¯ä»¥ä½¿ç”¨ Clojure çš„å…¨éƒ¨åŠ›é‡å’Œä½ å†™çš„æ‰€æœ‰ä»£ç æ¥æ„å»ºæ•°æ®ç»“æ„è¿›è¡Œæ±‚å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(eval (concat addition-list [10]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 13
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(eval (list &amp;#39;def &amp;#39;lucky-number (concat addition-list [10])))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;#39;user/lucky-number
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lucky-number
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 13
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å›¾ 7-4 æ˜¾ç¤ºäº†ä½ åœ¨è¿™ä¸¤ä¸ªä¾‹å­ä¸­å‘é€ç»™æ±‚å€¼å™¨çš„åˆ—è¡¨ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/read-and-eval/data-to-eval.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 7-4ï¼šä½ æ±‚å€¼çš„åˆ—è¡¨&lt;/p>
&lt;p>ä½ çš„ç¨‹åºå¯ä»¥ç›´æ¥ä¸è‡ªå·±çš„æ±‚å€¼å™¨å¯¹è¯ï¼Œä½¿ç”¨è‡ªå·±çš„å‡½æ•°å’Œæ•°æ®åœ¨è¿è¡Œä¸­ä¿®æ”¹è‡ªå·± ä½ æ˜¯ä¸æ˜¯å·²ç»è¢«æƒåŠ›å†²æ˜äº†å¤´è„‘ï¼Ÿæˆ‘å¸Œæœ›æ˜¯è¿™æ ·ï¼æˆ‘å¸Œæœ›ä½ èƒ½åšæŒä½ çš„ç†æ™ºã€‚ä¸è¿‡ï¼Œè¯·ä¿æŒä½ çš„ç†æ™ºï¼Œå› ä¸ºè¿˜æœ‰æ›´å¤šçš„ä¸œè¥¿è¦å­¦ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ï¼ŒClojure æ˜¯åŒæºçš„ï¼šå®ƒç”¨åˆ—è¡¨è¡¨ç¤ºæŠ½è±¡çš„è¯­æ³•æ ‘ï¼Œå½“ä½ å†™ Clojure ä»£ç æ—¶ï¼Œä½ å†™çš„æ˜¯åˆ—è¡¨çš„æ–‡æœ¬è¡¨ç¤ºã€‚å› ä¸ºä½ å†™çš„ä»£ç ä»£è¡¨äº†ä½ ä¹ æƒ¯äºæ“ä½œçš„æ•°æ®ç»“æ„ï¼Œè€Œæ±‚å€¼å™¨åˆ™æ¶ˆè€—è¿™äº›æ•°æ®ç»“æ„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“æ¨ç†å‡ºå¦‚ä½•ä»¥ç¼–ç¨‹æ–¹å¼ä¿®æ”¹ä½ çš„ç¨‹åºã€‚&lt;/p>
&lt;p>å®å°±æ˜¯è®©ä½ è½»æ¾è¿›è¡Œè¿™äº›æ“ä½œçš„ä¸œè¥¿ã€‚æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†è¯¦ç»†ä»‹ç»äº† Clojure çš„è¯»å–å™¨å’Œæ±‚å€¼è§„åˆ™ï¼Œè®©ä½ å¯¹å®çš„å·¥ä½œåŸç†æœ‰ä¸€ä¸ªå‡†ç¡®çš„ç†è§£ã€‚&lt;/p>
&lt;h2 id="è¯»å–å™¨">è¯»å–å™¨&lt;/h2>
&lt;p>è¯»å–å™¨å°†ä½ ä¿å­˜åœ¨æ–‡ä»¶ä¸­æˆ–åœ¨ REPL ä¸­è¾“å…¥çš„æ–‡æœ¬æºä»£ç è½¬æ¢ä¸º Clojure æ•°æ®ç»“æ„ã€‚å®ƒå°±åƒäººç±»çš„ Unicode å­—ç¬¦ä¸–ç•Œå’Œ Clojure çš„åˆ—è¡¨ã€Vectorã€Mapã€ç¬¦å·å’Œå…¶ä»–æ•°æ®ç»“æ„ä¸–ç•Œä¹‹é—´çš„ç¿»è¯‘ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†ç›´æ¥ä¸è¯»å–å™¨å™¨äº’åŠ¨ï¼Œå¹¶å­¦ä¹ ä¸€ä¸ªæ–¹ä¾¿çš„åŠŸèƒ½ï¼Œå³&lt;em>è¯»å–å™¨å®&lt;/em>ï¼Œå¦‚ä½•è®©ä½ æ›´ç®€æ´åœ°ç¼–å†™ä»£ç ã€‚&lt;/p>
&lt;h3 id="è¯»å–å™¨-1">è¯»å–å™¨&lt;/h3>
&lt;p>ä¸ºäº†ç†è§£è¯»å–å™¨ï¼Œè®©æˆ‘ä»¬é¦–å…ˆä»”ç»†çœ‹çœ‹ Clojure æ˜¯å¦‚ä½•å¤„ç†ä½ åœ¨ REPL ä¸­è¾“å…¥çš„æ–‡æœ¬çš„ã€‚é¦–å…ˆï¼ŒREPL ä¼šæç¤ºä½ è¾“å…¥æ–‡æœ¬ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">user=&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åä½ è¾“å…¥ä¸€ç‚¹æ–‡æœ¬ã€‚ä¹Ÿè®¸åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">user=&amp;gt; (str &amp;#34;To understand what recursion is,&amp;#34; &amp;#34; you must first understand recursion.&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µæ–‡å­—å®é™…ä¸Šåªæ˜¯ä¸€ä¸² Unicode å­—ç¬¦ï¼Œä½†å®ƒæ˜¯ä¸ºäº†è¡¨ç¤º Clojure æ•°æ®ç»“æ„çš„ç»„åˆã€‚è¿™ç§æ•°æ®ç»“æ„çš„æ–‡æœ¬è¡¨ç¤ºæ³•è¢«ç§°ä¸º&lt;em>è¯»å–å™¨çš„å½¢å¼&lt;/em>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¯¥è¡¨æ ¼ä»£è¡¨äº†ä¸€ä¸ªåˆ—è¡¨æ•°æ®ç»“æ„ï¼Œå…¶ä¸­åˆåŒ…å«äº†ä¸‰ä¸ªè¡¨æ ¼ï¼š&lt;code>str&lt;/code>ç¬¦å·å’Œä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;p>ä¸€æ—¦ä½ åœ¨æç¤ºç¬¦ä¸­è¾“å…¥è¿™äº›å­—ç¬¦å¹¶æŒ‰ä¸‹å›è½¦é”®ï¼Œè¿™äº›æ–‡æœ¬å°±ä¼šè¿›å…¥è¯»å–å™¨ï¼ˆè®°å¾— REPL æ˜¯ read-eval-print-loop çš„ç¼©å†™ï¼‰ã€‚Clojure è¯»å–å­—ç¬¦æµå¹¶åœ¨å†…éƒ¨äº§ç”Ÿç›¸åº”çš„æ•°æ®ç»“æ„ã€‚ç„¶åå®ƒå¯¹æ•°æ®ç»“æ„è¿›è¡Œæ±‚å€¼ï¼Œå¹¶æ‰“å°å‡ºç»“æœçš„æ–‡æœ¬è¡¨ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#34;To understand what recursion is, you must first understand recursion.&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯»å–å’Œæ±‚å€¼æ˜¯ä¸è¿ç»­çš„è¿‡ç¨‹ï¼Œä½ å¯ä»¥ç‹¬ç«‹æ‰§è¡Œã€‚ä¸€ç§ç›´æ¥ä¸è¯»è€…äº’åŠ¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨&lt;code>read-string&lt;/code>å‡½æ•°ã€‚Â &lt;code>read-string&lt;/code>æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶ä½¿ç”¨ Clojure çš„è¯»å–å™¨è¿›è¡Œå¤„ç†ï¼Œè¿”å›ä¸€ä¸ªæ•°æ®ç»“æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(read-string &amp;#34;(+ 1 2)&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(list? (read-string &amp;#34;(+ 1 2)&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(conj (read-string &amp;#34;(+ 1 2)&amp;#34;) :zagglewag)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (:zagglewag + 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>read-string&lt;/code>è¯»å–äº†ä¸€ä¸ªåŒ…å«åŠ å·å’Œæ•°å­— 1 å’Œ 2 çš„åˆ—è¡¨çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚è¿”å›å€¼æ˜¯ä¸€ä¸ªå®é™…çš„åˆ—è¡¨ï¼Œæ­£å¦‚ç¬¬äºŒä¸ªä¾‹å­æ‰€è¯æ˜çš„ã€‚æœ€åä¸€ä¸ªä¾‹å­ä½¿ç”¨&lt;code>conj&lt;/code>åœ¨åˆ—è¡¨ä¸­é¢„ç½®ä¸€ä¸ªå…³é”®å­—ã€‚å¯ç¤ºæ˜¯ï¼Œè¯»å–å™¨å’Œæ±‚å€¼æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚ä½ å¯ä»¥è¯»å–æ–‡æœ¬è€Œä¸å¯¹å…¶è¿›è¡Œæ±‚å€¼ï¼Œä½ å¯ä»¥å°†ç»“æœä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹ç»“æœè¿›è¡Œæ±‚å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(eval (read-string &amp;#34;(+ 1 2)&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨åˆ°ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰ä¾‹å­ä¸­ï¼Œè¯»è€…å½¢å¼å’Œç›¸åº”çš„æ•°æ®ç»“æ„ä¹‹é—´ä¸€ç›´æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚ä¸‹é¢æ˜¯æ›´å¤šç®€å•çš„è¯»å–å™¨å½¢å¼çš„ä¾‹å­ï¼Œå®ƒä»¬ç›´æ¥ Map åˆ°å®ƒä»¬æ‰€ä»£è¡¨çš„æ•°æ®ç»“æ„ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>()&lt;/strong> ä¸€ä¸ªåˆ—è¡¨çš„è¯»å–å½¢å¼&lt;/li>
&lt;li>*&lt;em>str&lt;/em> ä¸€ä¸ªç¬¦å·è¯»å–å™¨å½¢å¼&lt;/li>
&lt;li>&lt;strong>[1 2]&lt;/strong> ä¸€ä¸ª Vector è¯»å–å™¨å½¢å¼ï¼ŒåŒ…å«ä¸¤ä¸ªæ•°å­—è¯»å–å™¨å½¢å¼&lt;/li>
&lt;li>&lt;strong>{:sound &amp;ldquo;hoot&amp;rdquo;}&lt;/strong> ä¸€ä¸ªåŒ…å«å…³é”®å­—è¯»å–å™¨å½¢å¼å’Œå­—ç¬¦ä¸²è¯»å–å™¨å½¢å¼çš„ Map è¯»å–å™¨å½¢å¼&lt;/li>
&lt;/ul>
&lt;p>ç„¶è€Œï¼Œåœ¨å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°æ®ç»“æ„æ—¶ï¼Œè¯»å–å™¨å¯ä»¥é‡‡ç”¨æ›´å¤æ‚çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œè¿˜è®°å¾—åŒ¿åå‡½æ•°å—ï¼Ÿ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(#(+ 1 %) 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¥½å§ï¼Œè¯•è¯•è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(read-string &amp;#34;#(+ 1 %)&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (fn* [p1__423#] (+ 1 p1__423#))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å“‡! è¿™ä¸æ˜¯æˆ‘ä»¬æ‰€ä¹ æƒ¯çš„ä¸€å¯¹ä¸€çš„ Mapã€‚è¯»å–&lt;code>#(+ 1 %)&lt;/code>çš„ç»“æœæ˜¯ä¸€ä¸ªç”±&lt;code>fn*&lt;/code>ç¬¦å·ç»„æˆçš„åˆ—è¡¨ï¼Œä¸€ä¸ªåŒ…å«ä¸€ä¸ªç¬¦å·çš„ Vectorï¼Œå’Œä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚åˆšåˆšå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ&lt;/p>
&lt;h3 id="è¯»è€…å®">è¯»è€…å®&lt;/h3>
&lt;p>æˆ‘æ¥å›ç­”æˆ‘è‡ªå·±çš„é—®é¢˜ï¼šè¯»è€…ä½¿ç”¨äº†ä¸€ä¸ª&lt;em>è¯»è€…å®&lt;/em>æ¥è½¬æ¢&lt;code>#(+ 1 %)&lt;/code>ã€‚è¯»è€…å®æ˜¯ä¸€ç»„å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°æ®ç»“æ„çš„è§„åˆ™ã€‚å®ƒä»¬é€šå¸¸å…è®¸ä½ ä»¥æ›´ç´§å‡‘çš„æ–¹å¼è¡¨ç¤ºæ•°æ®ç»“æ„ï¼Œå› ä¸ºå®ƒä»¬é‡‡ç”¨äº†ä¸€ä¸ªç®€ç•¥çš„è¯»è€…å½¢å¼ï¼Œå¹¶å°†å…¶æ‰©å±•ä¸ºå®Œæ•´çš„å½¢å¼ã€‚å®ƒä»¬ç”±&lt;em>å®å­—ç¬¦&lt;/em>æŒ‡å®šï¼Œå¦‚&lt;code>'&lt;/code>ï¼ˆå•å¼•å·ï¼‰ã€&lt;code>#&lt;/code>å’Œ&lt;code>@&lt;/code>ã€‚å®ƒä»¬ä¹Ÿå®Œå…¨ä¸åŒäºæˆ‘ä»¬åé¢è¦è®²çš„å®ã€‚ä¸ºäº†ä¸æŠŠä¸¤è€…æ··æ·†ï¼Œæˆ‘æ€»æ˜¯ç”¨&lt;em>è¯»è€…å®&lt;/em>è¿™ä¸ªå…¨ç§°æ¥æŒ‡ä»£è¯»è€…å®ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°å¼•ç”¨è¯»è€…å®æ˜¯å¦‚ä½•æ‰©å±•å•å¼•å·å­—ç¬¦çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(read-string &amp;#34;&amp;#39;(a b c)&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (quote (a b c))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“è¯»å–å™¨é‡åˆ°å•å¼•å·æ—¶ï¼Œå®ƒå°†å…¶æ‰©å±•ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯ç¬¦å·&lt;code>quote&lt;/code>ï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯å•å¼•å·åé¢çš„æ•°æ®ç»“æ„ã€‚è¯»å–å™¨çš„&lt;code>deref&lt;/code>å®å¯¹&lt;code>@&lt;/code>å­—ç¬¦çš„ä½œç”¨ä¸æ­¤ç±»ä¼¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(read-string &amp;#34;@var&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (clojure.core/deref var)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯»å–å™¨å®ä¹Ÿå¯ä»¥åšä¸€äº›ç–¯ç‹‚çš„äº‹æƒ…ï¼Œæ¯”å¦‚å¯¼è‡´æ–‡æœ¬è¢«å¿½ç•¥ã€‚åˆ†å·æŒ‡å®šäº†å•è¡Œæ³¨é‡Šçš„è¯»å–å™¨å®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(read-string &amp;#34;; ignore!\n(+ 1 2)&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±æ˜¯è¯»å–å™¨! ä½ å‘å¾®çš„ä¼™ä¼´ï¼Œæ­£åœ¨è¾›è‹¦åœ°å°†æ–‡æœ¬è½¬åŒ–ä¸ºæ•°æ®ç»“æ„ã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ Clojure æ˜¯å¦‚ä½•æ±‚å€¼è¿™äº›æ•°æ®ç»“æ„çš„ã€‚&lt;/p>
&lt;h2 id="æ±‚å€¼å™¨">æ±‚å€¼å™¨&lt;/h2>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/read-and-eval/simple-eval.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 7-5ï¼šï¼ˆ+ 1 2ï¼‰çš„æ•°æ®ç»“æ„&lt;/p>
&lt;p>ä½ å¯ä»¥æŠŠ Clojure çš„æ±‚å€¼å™¨çœ‹ä½œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°æ®ç»“æ„ä½œä¸ºå‚æ•°ï¼Œä½¿ç”¨ä¸æ•°æ®ç»“æ„ç±»å‹ç›¸å¯¹åº”çš„è§„åˆ™å¤„ç†è¯¥æ•°æ®ç»“æ„ï¼Œå¹¶è¿”å›ä¸€ä¸ªç»“æœã€‚è¦æ±‚å€¼ä¸€ä¸ªç¬¦å·ï¼ŒClojure ä¼šæŸ¥æ‰¾è¯¥ç¬¦å·æ‰€æŒ‡çš„å†…å®¹ã€‚è¦æ±‚å€¼ä¸€ä¸ªåˆ—è¡¨ï¼ŒClojure ä¼šæŸ¥çœ‹è¯¥åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è°ƒç”¨ä¸€ä¸ªå‡½æ•°ã€å®æˆ–ç‰¹æ®Šå½¢å¼ã€‚ä»»ä½•å…¶ä»–çš„å€¼ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²ã€æ•°å­—å’Œå…³é”®å­—ï¼‰åªæ˜¯ç®€å•åœ°å¯¹å…¶è¿›è¡Œæ±‚å€¼ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œå‡è®¾ä½ åœ¨ REPL ä¸­è¾“å…¥äº†&lt;code>(+ 1 2)&lt;/code>ã€‚å›¾ 7-5 æ˜¾ç¤ºäº†ä¸€ä¸ªè¢«å‘é€åˆ°æ±‚å€¼å™¨çš„æ•°æ®ç»“æ„å›¾ã€‚&lt;/p>
&lt;p>å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ±‚å€¼å™¨ä»æ±‚å€¼åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ã€‚ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åŠ å·ï¼Œæ±‚å€¼å™¨é€šè¿‡è¿”å›ç›¸åº”çš„å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æ±‚å€¼å™¨å¯¹æ¯ä¸ªæ“ä½œæ•°è¿›è¡Œæ±‚å€¼ã€‚æ“ä½œæ•° 1 å’Œ 2 æ±‚å€¼ä¸ºè‡ªå·±ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯åˆ—è¡¨æˆ–ç¬¦å·ã€‚ç„¶åæ±‚å€¼å™¨ä»¥ 1 å’Œ 2 ä¸ºæ“ä½œæ•°è°ƒç”¨åŠ æ³•å‡½æ•°ï¼Œå¹¶è¿”å›ç»“æœã€‚&lt;/p>
&lt;p>æœ¬èŠ‚çš„å…¶ä½™éƒ¨åˆ†å°†æ›´å…¨é¢åœ°è§£é‡Šæ±‚å€¼å™¨å¯¹æ¯ç§æ•°æ®ç»“æ„çš„è§„åˆ™ã€‚ä¸ºäº†æ˜¾ç¤ºæ±‚å€¼å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬å°†åœ¨ REPL ä¸­è¿è¡Œæ¯ä¸ªä¾‹å­ã€‚è¯·è®°ä½ï¼ŒREPL é¦–å…ˆè¯»å–ä½ çš„æ–‡æœ¬ä»¥è·å¾—ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç„¶åå°†è¯¥æ•°æ®ç»“æ„å‘é€åˆ°æ±‚å€¼å™¨ï¼Œç„¶åå°†ç»“æœæ‰“å°ä¸ºæ–‡æœ¬ã€‚&lt;/p>
&lt;p>æ•°æ®&lt;/p>
&lt;p>æˆ‘åœ¨æœ¬ç« ä¸­å†™åˆ° Clojure å¦‚ä½•æ±‚å€¼æ•°æ®ç»“æ„ï¼Œä½†è¿™æ˜¯ä¸ç²¾ç¡®çš„ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œæ•°æ®ç»“æ„æŒ‡çš„æ˜¯æŸç§é›†åˆï¼Œå¦‚é“¾æ¥åˆ—è¡¨æˆ– B-æ ‘ï¼Œæˆ–å…¶ä»–ä»€ä¹ˆï¼Œä½†æˆ‘ä¹Ÿç”¨è¿™ä¸ªæœ¯è¯­æ¥æŒ‡æ ‡é‡ï¼ˆå•æ•°ï¼Œéé›†åˆï¼‰å€¼ï¼Œå¦‚ç¬¦å·å’Œæ•°å­—ã€‚æˆ‘è€ƒè™‘è¿‡ä½¿ç”¨æ•°æ®å¯¹è±¡è¿™ä¸ªæœ¯è¯­ï¼Œä½†ä¸æƒ³æš—ç¤ºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼Œæˆ–è€…åªä½¿ç”¨æ•°æ®ï¼Œä½†ä¸æƒ³å°†å…¶ä¸æ•°æ®è¿™ä¸ªæ¦‚å¿µæ··æ·†ã€‚æ‰€ä»¥ï¼Œæ•°æ®ç»“æ„å°±æ˜¯è¿™æ ·ï¼Œå¦‚æœä½ è§‰å¾—è¿™å¾ˆå†’çŠ¯ï¼Œæˆ‘ä¼šç»™ä½ ä¸€åƒæ¬¡çš„é“æ­‰ï¼Œæ·±æ€ç†Ÿè™‘åœ°ç»„ç»‡æˆä¸€æ£µ Van Emde Boas æ ‘ã€‚&lt;/p>
&lt;h3 id="è¿™äº›ä¸œè¥¿éƒ½æ˜¯è‡ªå·±æ±‚å€¼çš„">è¿™äº›ä¸œè¥¿éƒ½æ˜¯è‡ªå·±æ±‚å€¼çš„&lt;/h3>
&lt;p>æ¯å½“ Clojure å¯¹ä¸æ˜¯åˆ—è¡¨æˆ–ç¬¦å·çš„æ•°æ®ç»“æ„è¿›è¡Œæ±‚å€¼æ—¶ï¼Œå…¶ç»“æœå°±æ˜¯æ•°æ®ç»“æ„æœ¬èº«ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:huzzah
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; :huzzah
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç©ºçš„åˆ—è¡¨ä¹Ÿä¼šå¯¹è‡ªå·±è¿›è¡Œæ±‚å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç¬¦å·">ç¬¦å·&lt;/h3>
&lt;p>ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½ çš„åŸºæœ¬ä»»åŠ¡ä¹‹ä¸€æ˜¯é€šè¿‡å°†åå­—å’Œå€¼è”ç³»èµ·æ¥æ¥åˆ›å»ºæŠ½è±¡ã€‚ä½ åœ¨ç¬¬ 3 ç« ä¸­é€šè¿‡ä½¿ç”¨&lt;code>def&lt;/code>ã€&lt;code>let&lt;/code>å’Œå‡½æ•°å®šä¹‰å­¦ä¼šäº†å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚Clojure ä½¿ç”¨&lt;em>ç¬¦å·&lt;/em>æ¥å‘½åå‡½æ•°ã€å®ã€æ•°æ®å’Œå…¶ä»–ä»»ä½•ä½ å¯ä»¥ä½¿ç”¨çš„ä¸œè¥¿ï¼Œå¹¶é€šè¿‡&lt;em>è§£æ&lt;/em>æ¥æ±‚å€¼å®ƒä»¬ã€‚ä¸ºäº†è§£æä¸€ä¸ªç¬¦å·ï¼ŒClojure ä¼šéå†ä½ æ‰€åˆ›å»ºçš„ä»»ä½•ç»‘å®šï¼Œç„¶ååœ¨å‘½åç©ºé—´ Map ä¸­æŸ¥æ‰¾è¯¥ç¬¦å·çš„æ¡ç›®ï¼Œè¿™ä¸€ç‚¹ä½ åœ¨ç¬¬ 6 ç« ä¸­äº†è§£è¿‡ã€‚æœ€ç»ˆï¼Œä¸€ä¸ªç¬¦å·è¢«è§£æä¸ºä¸€ä¸ª&lt;em>å€¼&lt;/em>æˆ–ä¸€ä¸ª&lt;em>ç‰¹æ®Šå½¢å¼&lt;/em>&amp;ndash;ä¸€ä¸ªå†…ç½®çš„ Clojure æ“ä½œç¬¦ï¼Œæä¾›åŸºæœ¬çš„è¡Œä¸ºã€‚&lt;/p>
&lt;p>ä¸€èˆ¬æ¥è¯´ï¼ŒClojure é€šè¿‡ä»¥ä¸‹æ–¹å¼è§£æä¸€ä¸ªç¬¦å·ã€‚&lt;/p>
&lt;ol>
&lt;li>æŸ¥è¯¢è¯¥ç¬¦å·æ˜¯å¦å‘½åäº†ä¸€ä¸ªç‰¹æ®Šå½¢å¼ã€‚å¦‚æœå®ƒæ²¡æœ‰â€¦â€¦ã€‚&lt;/li>
&lt;li>æŸ¥è¯¢è¯¥ç¬¦å·æ˜¯å¦å¯¹åº”äºä¸€ä¸ªæœ¬åœ°ç»‘å®šã€‚å¦‚æœä¸æ˜¯çš„è¯ .&lt;/li>
&lt;li>è¯•å›¾æ‰¾åˆ°ç”±&lt;code>def&lt;/code>å¼•å…¥çš„å‘½åç©ºé—´ Mapã€‚å¦‚æœæ²¡æœ‰çš„è¯ . .&lt;/li>
&lt;li>æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸&lt;/li>
&lt;/ol>
&lt;p>è®©æˆ‘ä»¬å…ˆçœ‹çœ‹ä¸€ä¸ªç¬¦å·è§£æåˆ°ä¸€ä¸ªç‰¹æ®Šå½¢å¼ã€‚ç‰¹æ®Šå½¢å¼ï¼Œå¦‚&lt;code>if&lt;/code>ï¼Œæ€»æ˜¯åœ¨ä¸€ä¸ªæ“ä½œçš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼›å®ƒä»¬æ€»æ˜¯ä¸€ä¸ªåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if true :a :b)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; :a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ&lt;code>if&lt;/code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å½¢å¼ï¼Œå®ƒè¢«ä½œä¸ºä¸€ä¸ªæ“ä½œç¬¦ä½¿ç”¨ã€‚å¦‚æœä½ è¯•å›¾å¼•ç”¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¹‹å¤–çš„ç‰¹æ®Šå½¢å¼ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">if
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; CompilerException java.lang.RuntimeException: Unable to resolve symbol: if in this context, compiling:(NO_SOURCE_PATH:0:0)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ±‚å€¼ä¸€äº›æœ¬åœ°ç»‘å®šã€‚æœ¬åœ°ç»‘å®š&lt;em>æ˜¯æŒ‡ä¸€ä¸ªç¬¦å·å’Œä¸€ä¸ªä¸æ˜¯ç”±&lt;code>def&lt;/code>åˆ›å»ºçš„å€¼ä¹‹é—´çš„ä»»ä½•å…³è”ã€‚åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œç¬¦å·&lt;code>x&lt;/code>ç”¨&lt;code>let&lt;/code>ä¸ 5 ç»‘å®šã€‚å½“æ±‚å€¼å™¨è§£æ&lt;code>x&lt;/code>æ—¶ï¼Œå®ƒå°†&lt;/em>ç¬¦å·*&lt;code>x&lt;/code>è§£æä¸º&lt;em>å€¼&lt;/em> 5ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [x 5]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (+ x 3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª&lt;code>x&lt;/code>åˆ° 15 çš„å‘½åç©ºé—´ Mapï¼ŒClojure ä¼šç›¸åº”åœ°è§£å†³å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def x 15)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(+ x 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 18
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>x&lt;/code>è¢« Map åˆ° 15ï¼Œä½†æ˜¯æˆ‘ä»¬ç”¨&lt;code>let&lt;/code>å¼•å…¥äº†&lt;code>x&lt;/code>ä¸ 5 çš„å±€éƒ¨ç»‘å®šã€‚æ‰€ä»¥&lt;code>x&lt;/code>è¢«è§£æä¸º 5ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def x 15)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(è®© [x 5]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (+ x 3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥å¯¹ç»‘å®šè¿›è¡ŒåµŒå¥—ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€è¿‘å®šä¹‰çš„ç»‘å®šå…·æœ‰ä¼˜å…ˆæƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(è®© [x 5]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (è®© [x 6]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (+ x 3)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡½æ•°è¿˜åˆ›å»ºäº†å±€éƒ¨ç»‘å®šï¼Œå°†å‚æ•°ä¸å‡½æ•°ä½“ä¸­çš„å‚æ•°ç»‘å®šã€‚åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>exclaim&lt;/code>è¢« Map åˆ°ä¸€ä¸ªå‡½æ•°ã€‚åœ¨å‡½æ•°ä¸»ä½“ä¸­ï¼Œå‚æ•°å&lt;code>exclamation&lt;/code>è¢«ç»‘å®šåˆ°ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ä¸Šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn exclaim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [exclamation]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str exclamation &amp;#34;!&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(exclaim &amp;#34;Hadoken&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Hadoken!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åï¼Œåœ¨è¿™æœ€åä¸€ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>map&lt;/code>å’Œ&lt;code>inc&lt;/code>éƒ½æŒ‡çš„æ˜¯å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(map inc [1 2 3])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (2 3 4)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ Clojure æ±‚å€¼è¿™æ®µä»£ç æ—¶ï¼Œå®ƒé¦–å…ˆæ±‚å€¼&lt;code>map&lt;/code>ç¬¦å·ï¼ŒæŸ¥æ‰¾ç›¸åº”çš„å‡½æ•°å¹¶å°†å…¶åº”ç”¨äºå‚æ•°ã€‚ç¬¦å·&lt;code>map&lt;/code>æŒ‡çš„æ˜¯ map å‡½æ•°ï¼Œä½†å®ƒä¸åº”è¯¥ä¸å‡½æ•°æœ¬èº«ç›¸æ··æ·†ã€‚&lt;code>map&lt;/code>ç¬¦å·ä»ç„¶æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå°±åƒå­—ç¬¦ä¸²&lt;code>&amp;quot;fried salad&amp;quot;&lt;/code>æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ä¸€æ ·ï¼Œä½†å®ƒä¸å‡½æ•°æœ¬èº«ä¸åŒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(read-string (&amp;#34;+&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; +
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(type (read-string &amp;#34;+&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; clojure.lang.Symbol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(list (read-string &amp;#34;+&amp;#34;) 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œä½ æ­£åœ¨ä¸åŠ å·ï¼Œ&lt;code>+&lt;/code>ï¼Œä½œä¸ºä¸€ä¸ªæ•°æ®ç»“æ„è¿›è¡Œäº¤äº’ã€‚ä½ å¹¶æ²¡æœ‰ä¸å®ƒæ‰€æŒ‡çš„åŠ æ³•å‡½æ•°è¿›è¡Œäº¤äº’ã€‚å¦‚æœä½ æ±‚å€¼å®ƒï¼ŒClojure ä¼šæŸ¥æ‰¾è¯¥å‡½æ•°å¹¶åº”ç”¨å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(eval (list (read-string &amp;#34;+&amp;#34;) 1 2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°±å…¶æœ¬èº«è€Œè¨€ï¼Œç¬¦å·å’Œå®ƒä»¬çš„å‚ç…§ç‰©å®é™…ä¸Šä¸åšä»»ä½•äº‹æƒ…ï¼›Clojure é€šè¿‡æ±‚å€¼åˆ—è¡¨æ‰§è¡Œå·¥ä½œã€‚&lt;/p>
&lt;h3 id="åˆ—è¡¨">åˆ—è¡¨&lt;/h3>
&lt;p>å¦‚æœæ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œå®ƒå°±ä¼šè¢«æ±‚å€¼ä¸ºä¸€ä¸ªç©ºåˆ—è¡¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(eval (read-string &amp;#34;()&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦åˆ™ï¼Œå®ƒè¢«æ±‚å€¼ä¸ºå¯¹åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„*è°ƒç”¨ã€‚æ‰§è¡Œè°ƒç”¨çš„æ–¹å¼å–å†³äºç¬¬ä¸€ä¸ªå…ƒç´ çš„æ€§è´¨ã€‚&lt;/p>
&lt;h4 id="å‡½æ•°è°ƒç”¨">å‡½æ•°è°ƒç”¨&lt;/h4>
&lt;p>å½“æ‰§è¡Œä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¶ï¼Œæ¯ä¸ªæ“ä½œæ•°éƒ½è¢«å®Œå…¨æ±‚å€¼ï¼Œç„¶åä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>+&lt;/code>ç¬¦å·è§£æä¸ºä¸€ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(+ 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Clojure çœ‹åˆ°åˆ—è¡¨çš„å¤´éƒ¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥å®ƒç»§ç»­æ±‚å€¼åˆ—è¡¨ä¸­çš„å…¶ä»–å…ƒç´ ã€‚æ“ä½œæ•° 1 å’Œ 2 éƒ½å¯¹è‡ªå·±è¿›è¡Œæ±‚å€¼ï¼Œåœ¨æ±‚å€¼ä¹‹åï¼ŒClojure å¯¹å®ƒä»¬åº”ç”¨åŠ æ³•å‡½æ•°ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥åµŒå¥—å‡½æ•°è°ƒç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(+ 1 (+ 2 3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å³ä½¿ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒClojure åœ¨è¿™é‡Œä¹Ÿéµå¾ªåŒæ ·çš„è¿‡ç¨‹ï¼šæŸ¥æ‰¾&lt;code>+&lt;/code>ç¬¦å·å¹¶æ±‚å€¼æ¯ä¸ªå‚æ•°ã€‚ä¸ºäº†æ±‚å€¼åˆ—è¡¨&lt;code>(+ 2 3)&lt;/code>ï¼ŒClojure å°†ç¬¬ä¸€ä¸ªæˆå‘˜è§£æä¸ºåŠ æ³•å‡½æ•°å¹¶ç»§ç»­æ±‚å€¼æ¯ä¸ªå‚æ•°ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ±‚å€¼æ˜¯é€’å½’çš„ã€‚&lt;/p>
&lt;h4 id="ç‰¹æ®Šå½¢å¼">ç‰¹æ®Šå½¢å¼&lt;/h4>
&lt;p>ä½ ä¹Ÿå¯ä»¥è°ƒç”¨*ç‰¹æ®Šå½¢å¼ã€‚*ä¸€èˆ¬æ¥è¯´ï¼Œç‰¹æ®Šå½¢å¼æ˜¯ç‰¹æ®Šçš„ï¼Œå› ä¸ºå®ƒä»¬å®ç°äº†ä¸èƒ½ç”¨å‡½æ•°å®ç°çš„æ ¸å¿ƒè¡Œä¸ºã€‚æ¯”å¦‚è¯´&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if true 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œæˆ‘ä»¬è¦æ±‚ Clojure æ±‚å€¼ä¸€ä¸ªä»¥ç¬¦å·&lt;code>if&lt;/code>å¼€å§‹çš„åˆ—è¡¨ã€‚è¿™ä¸ª&lt;code>if&lt;/code>ç¬¦å·è¢«è§£æä¸º&lt;code>if&lt;/code>ç‰¹æ®Šå½¢å¼ï¼ŒClojure ç”¨æ“ä½œæ•°&lt;code>true&lt;/code>ã€&lt;code>1&lt;/code>å’Œ&lt;code>2&lt;/code>è°ƒç”¨è¿™ä¸ªç‰¹æ®Šå½¢å¼ã€‚&lt;/p>
&lt;p>ç‰¹æ®Šå½¢å¼ä¸éµå¾ªä¸æ™®é€šå‡½æ•°ç›¸åŒçš„æ±‚å€¼è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œå½“ä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæ¯ä¸ªæ“ä½œæ•°éƒ½è¢«æ±‚å€¼ã€‚ç„¶è€Œï¼Œå¯¹äº&lt;code>if&lt;/code>ï¼Œä½ ä¸å¸Œæœ›æ¯ä¸ªæ“ä½œæ•°éƒ½è¢«æ±‚å€¼ã€‚ä½ åªå¸Œæœ›æŸäº›æ“ä½œæ•°è¢«æ±‚å€¼ï¼Œè¿™å–å†³äºæ¡ä»¶æ˜¯çœŸè¿˜æ˜¯å‡ã€‚&lt;/p>
&lt;p>å¦ä¸€ä¸ªé‡è¦çš„ç‰¹æ®Šå½¢å¼æ˜¯&lt;code>quote&lt;/code>ã€‚ä½ å·²ç»è§è¿‡è¿™æ ·çš„åˆ—è¡¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#39;(a b c)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ åœ¨&lt;a class="link" href="https://www.braveclojure.com/read-and-eval/#Anchor" target="_blank" rel="noopener"
>&amp;ldquo;è¯»å–å™¨ &amp;ldquo;ç¬¬ 153 é¡µ&lt;/a>ä¸­æ‰€çœ‹åˆ°çš„ï¼Œè¿™å°†è°ƒç”¨ä¸€ä¸ªè¯»å–å™¨å®ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(quote (a b c))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šå¸¸ï¼ŒClojure ä¼šå°è¯•è§£æ&lt;code>a&lt;/code>ç¬¦å·ï¼Œç„¶åè°ƒç”¨å®ƒï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚&lt;code>quote&lt;/code>çš„ç‰¹æ®Šå½¢å¼å‘Šè¯‰æ±‚å€¼å™¨ï¼Œ&amp;ldquo;ä¸å…¶åƒæ­£å¸¸ä¸€æ ·æ±‚å€¼æˆ‘çš„ä¸‹ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä¸å¦‚ç›´æ¥è¿”å›æ•°æ®ç»“æ„æœ¬èº«ã€‚&amp;rdquo; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªç”±ç¬¦å·&lt;code>a&lt;/code>, &lt;code>b&lt;/code>, å’Œ&lt;code>c&lt;/code>ç»„æˆçš„åˆ—è¡¨ã€‚&lt;/p>
&lt;p>&lt;code>def&lt;/code>ã€&lt;code>let&lt;/code>ã€&lt;code>loop&lt;/code>ã€&lt;code>fn&lt;/code>ã€&lt;code>do&lt;/code>å’Œ&lt;code>recur&lt;/code>ä¹Ÿéƒ½æ˜¯ç‰¹æ®Šå½¢å¼ã€‚ä½ å¯ä»¥çœ‹åˆ°ä¸ºä»€ä¹ˆï¼šå®ƒä»¬çš„æ±‚å€¼æ–¹å¼ä¸å‡½æ•°ä¸ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œé€šå¸¸å½“æ±‚å€¼å™¨æ±‚å€¼ä¸€ä¸ªç¬¦å·æ—¶ï¼Œå®ƒä¼šè§£æè¯¥ç¬¦å·ï¼Œä½†æ˜¯&lt;code>def&lt;/code>å’Œ&lt;code>let&lt;/code>æ˜¾ç„¶ä¸æ˜¯è¿™æ ·çš„è¡Œä¸ºã€‚å®ƒä»¬ä¸æ˜¯è§£æç¬¦å·ï¼Œè€Œæ˜¯åœ¨ç¬¦å·å’Œå€¼ä¹‹é—´å»ºç«‹å…³è”ã€‚å› æ­¤ï¼Œæ±‚å€¼å™¨ä»è¯»è€…é‚£é‡Œæ¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®ç»“æ„çš„ç»„åˆï¼Œç„¶åå®ƒå»è§£æç¬¦å·å¹¶è°ƒç”¨æ¯ä¸ªåˆ—è¡¨å¼€å¤´çš„å‡½æ•°æˆ–ç‰¹æ®Šå½¢å¼ã€‚ä½†è¿˜æœ‰æ›´å¤šçš„ä¸œè¥¿! ä½ ä¹Ÿå¯ä»¥åœ¨åˆ—è¡¨çš„å¼€å¤´æ”¾ç½®ä¸€ä¸ª&lt;em>å®&lt;/em>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–ç‰¹æ®Šå½¢å¼ï¼Œè¿™å¯ä»¥ä¸ºä½ æä¾›å·¨å¤§çš„æƒåŠ›ï¼Œè®©ä½ çŸ¥é“å…¶ä½™çš„æ•°æ®ç»“æ„å¦‚ä½•è¢«æ±‚å€¼ã€‚&lt;/p>
&lt;h3 id="å·¨é›†">å·¨é›†&lt;/h3>
&lt;p>å—¯ . . Clojure æ±‚å€¼æ•°æ®ç»“æ„&amp;ndash;ä¸æˆ‘ä»¬åœ¨ Clojure ç¨‹åºä¸­ç¼–å†™å’Œæ“ä½œçš„æ•°æ®ç»“æ„ç›¸åŒã€‚å¦‚æœæˆ‘ä»¬èƒ½ç”¨ Clojure æ¥æ“ä½œ Clojure æ±‚å€¼çš„æ•°æ®ç»“æ„ï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿæ˜¯çš„ï¼Œæ˜¯çš„ï¼Œä¼šçš„ã€‚ä½ çŒœæ€ä¹ˆç€ï¼Ÿä½ å¯ä»¥ç”¨å®æ¥åšè¿™ä»¶äº‹ã€‚ä½ çš„è„‘è¢‹æ˜¯ä¸æ˜¯çˆ†ç‚¸äº†ï¼Ÿæˆ‘çš„å°±æ˜¯è¿™æ ·ã€‚&lt;/p>
&lt;p>ä¸ºäº†äº†è§£å®çš„ä½œç”¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸€äº›ä»£ç ã€‚å‡è®¾æˆ‘ä»¬æƒ³å†™ä¸€ä¸ªå‡½æ•°ï¼Œè®© Clojure è¯»å‡º infix ç¬¦å·ï¼ˆå¦‚&lt;code>1 + 1&lt;/code>ï¼‰ï¼Œè€Œä¸æ˜¯å…¶æ­£å¸¸ç¬¦å·ä¸­çš„è¿ç®—ç¬¦ä¼˜å…ˆï¼ˆ&lt;code>+ 1 1&lt;/code>ï¼‰ã€‚è¿™ä¸ªä¾‹å­ä¸æ˜¯**ä¸€ä¸ªå®ã€‚ç›¸åï¼Œå®ƒåªæ˜¯è¡¨æ˜ä½ å¯ä»¥ç”¨ infix ç¬¦å·å†™ä»£ç ï¼Œç„¶åç”¨ Clojure æ¥è½¬æ¢å®ƒï¼Œä½¿å…¶å®é™…æ‰§è¡Œã€‚é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªä»£è¡¨ infix åŠ æ³•çš„åˆ—è¡¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(read-string &amp;#34;(1 + 1)&amp;#34; )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 + 1)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ è¯•å›¾è®©å®ƒæ±‚å€¼è¿™ä¸ªåˆ—è¡¨ï¼ŒClojure å°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(eval (read-string &amp;#34;(1 + 1)&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ClassCastException java.lang.Long cannot be cast to clojure.lang.IFn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œ&lt;code>read-string&lt;/code>è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œä½ å¯ä»¥ç”¨ Clojure æŠŠè¿™ä¸ªåˆ—è¡¨é‡æ–°ç»„ç»‡æˆå®ƒ&lt;em>å¯ä»¥&lt;/em>æˆåŠŸæ±‚å€¼çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [infix (read-string &amp;#34;(1 + 1)&amp;#34;)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list (second infix) (first infix) (last infix)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 1)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ &lt;code>æ±‚å€¼&lt;/code>è¿™ä¸ªï¼Œå®ƒè¿”å›&lt;code>2&lt;/code>ï¼Œå°±åƒä½ æ‰€æœŸæœ›çš„é‚£æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(eval
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [infix (read-string &amp;#34;(1 + 1)&amp;#34;)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list (second infix) (first infix) (last infix))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å¾ˆé…·ï¼Œä½†å®ƒä¹Ÿå¾ˆç¬¨é‡ã€‚è¿™å°±æ˜¯å®çš„ä½œç”¨ã€‚å®ç»™äº†ä½ ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹æ³•ï¼Œåœ¨ Clojure æ±‚å€¼åˆ—è¡¨ä¹‹å‰å¯¹å…¶è¿›è¡Œæ“ä½œã€‚å®å¾ˆåƒå‡½æ•°ï¼šå®ƒä»¬æ¥å—å‚æ•°å¹¶è¿”å›ä¸€ä¸ªå€¼ï¼Œå°±åƒä¸€ä¸ªå‡½æ•°é‚£æ ·ã€‚å®ƒä»¬åœ¨ Clojure æ•°æ®ç»“æ„ä¸Šå·¥ä½œï¼Œå°±åƒå‡½æ•°é‚£æ ·ã€‚å®ƒä»¬çš„ç‹¬ç‰¹å’Œå¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒä»¬ä¸æ±‚å€¼è¿‡ç¨‹çš„é…åˆã€‚å®ƒä»¬åœ¨è¯»å–å™¨å’Œæ±‚å€¼å™¨ä¹‹é—´æ‰§è¡Œ&amp;ndash;æ‰€ä»¥å®ƒä»¬å¯ä»¥æ“ä½œè¯»å–å™¨åå‡ºçš„æ•°æ®ç»“æ„ï¼Œå¹¶åœ¨å°†å…¶ä¼ é€’ç»™æ±‚å€¼å™¨ä¹‹å‰ä¸è¿™äº›æ•°æ®ç»“æ„è¿›è¡Œè½¬æ¢ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro ignore-last-operand
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [function-call]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (butlast function-call))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ (ignore-last-operand (+ 1 2 10))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; This will not print anything
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(ignore-last-operand (+ 1 2 (println &amp;#34;look at me!!!&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨âŠï¼Œå® &amp;ldquo;ignore-last-operand &amp;ldquo;æ¥æ”¶åˆ—è¡¨&amp;rdquo;(+ 1 2 10) &amp;ldquo;ä½œä¸ºå…¶å‚æ•°ï¼Œ&lt;em>ä¸æ˜¯&lt;/em>å€¼ &amp;ldquo;13&amp;rdquo;ã€‚è¿™ä¸å‡½æ•°è°ƒç”¨æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œå› ä¸ºå‡½æ•°è°ƒç”¨æ€»æ˜¯æ±‚å€¼æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ï¼Œæ‰€ä»¥å‡½æ•°ä¸å¯èƒ½æ¥è§¦åˆ°å®ƒçš„ä¸€ä¸ªæ“ä½œæ•°å¹¶æ”¹å˜æˆ–å¿½ç•¥å®ƒã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå½“ä½ è°ƒç”¨ä¸€ä¸ªå®æ—¶ï¼Œæ“ä½œæ•°æ˜¯&lt;em>ä¸&lt;/em>è¢«æ±‚å€¼çš„ã€‚ç‰¹åˆ«æ˜¯ï¼Œç¬¦å·ä¸è¢«è§£æï¼›å®ƒä»¬è¢«å½“ä½œç¬¦å·ä¼ é€’ã€‚åˆ—è¡¨ä¹Ÿä¸è¢«æ±‚å€¼ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ä½œä¸ºä¸€ä¸ªå‡½æ•°ã€ç‰¹æ®Šå½¢å¼æˆ–å®è¢«è°ƒç”¨ã€‚ç›¸åï¼Œæœªæ±‚å€¼çš„åˆ—è¡¨æ•°æ®ç»“æ„è¢«ä¼ å…¥ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/read-and-eval/whole-shebang.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 7-6: (infix (1 + 2)) çš„å®Œæ•´æ±‚å€¼è¿‡ç¨‹&lt;/p>
&lt;p>å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå‡½æ•°è¿”å›çš„æ•°æ®ç»“æ„æ˜¯&lt;em>ä¸&lt;/em>æ±‚å€¼çš„ï¼Œä½†æ˜¯å®è¿”å›çš„æ•°æ®ç»“æ„æ˜¯&lt;em>æ±‚å€¼çš„ã€‚ç¡®å®šå®çš„è¿”å›å€¼çš„è¿‡ç¨‹è¢«ç§°ä¸º&lt;/em>å®æ‰©å±•*ï¼Œä½ å¯ä»¥ä½¿ç”¨å‡½æ•°&lt;code>macroexpand&lt;/code>æ¥æŸ¥çœ‹å®åœ¨æ±‚å€¼æ•°æ®ç»“æ„ä¹‹å‰è¿”å›ä»€ä¹ˆæ•°æ®ç»“æ„ã€‚æ³¨æ„ï¼Œä½ å¿…é¡»å¼•ç”¨ä½ ä¼ é€’ç»™&lt;code>macroexpand&lt;/code>çš„å½¢å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(macroexpand &amp;#39;(ignore-last-operand (+ 1 2 10)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(macroexpand &amp;#39;(ignore-last-operand (+ 1 2 (println &amp;#34;look at me!!!&amp;#34;))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (+ 1 2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™ä¸¤ç§æ‰©å±•çš„ç»“æœéƒ½æ˜¯åˆ—è¡¨&lt;code>(+ 1 2)&lt;/code>ã€‚å½“è¿™ä¸ªåˆ—è¡¨è¢«æ±‚å€¼æ—¶ï¼Œå°±åƒå‰é¢çš„ä¾‹å­ä¸€æ ·ï¼Œç»“æœæ˜¯&lt;code>3&lt;/code>ã€‚&lt;/p>
&lt;p>ä¸ºäº†å¥½ç©ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåšç®€å• infix ç¬¦å·çš„å®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defmacro infix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [infixed]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (list (second infixed)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (first infixed)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (lastÂ infixed)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(infix (1 + 2))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ€è€ƒè¿™æ•´ä¸ªè¿‡ç¨‹çš„æœ€å¥½æ–¹æ³•æ˜¯æƒ³è±¡åœ¨è¯»å–å’Œæ±‚å€¼ä¹‹é—´çš„ä¸€ä¸ªé˜¶æ®µï¼š&lt;em>å®æ‰©å±•&lt;/em>é˜¶æ®µã€‚å›¾ 7-6 æ˜¾ç¤ºäº†å¦‚ä½•å°†&lt;code>(infix (1 + 2))&lt;/code>çš„æ•´ä¸ªæ±‚å€¼è¿‡ç¨‹å¯è§†åŒ–ã€‚&lt;/p>
&lt;p>è€Œè¿™å°±æ˜¯å®æ˜¯å¦‚ä½•èå…¥æ±‚å€¼è¿‡ç¨‹çš„ã€‚ä½†ä½ ä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢ï¼ŸåŸå› æ˜¯å®å…è®¸ä½ å°†ä»»æ„çš„æ•°æ®ç»“æ„ï¼Œå¦‚&lt;code>(1 + 2)&lt;/code>è½¬åŒ–ä¸º Clojure å¯ä»¥æ±‚å€¼çš„ç»“æ„ï¼Œå³&lt;code>(+ 1 2)&lt;/code>ã€‚è¿™æ„å‘³ç€&lt;em>ä½ å¯ä»¥ä½¿ç”¨ Clojure æ¥æ‰©å±•è‡ªå·±&lt;/em>ï¼Œæ‰€ä»¥ä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°ç¼–å†™ç¨‹åºã€‚æ¢å¥è¯è¯´ï¼Œå®èƒ½å¤Ÿå®ç°&lt;em>å¥æ³•æŠ½è±¡&lt;/em>ã€‚å¥æ³•æŠ½è±¡å¯èƒ½å¬èµ·æ¥æœ‰ç‚¹æŠ½è±¡ï¼ˆå“ˆå“ˆï¼ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹ã€‚&lt;/p>
&lt;h3 id="è¯­æ³•æŠ½è±¡å’Œ---å®">è¯­æ³•æŠ½è±¡å’Œ -&amp;gt; å®&lt;/h3>
&lt;p>é€šå¸¸ï¼ŒClojure ä»£ç ç”±ä¸€å †åµŒå¥—çš„å‡½æ•°è°ƒç”¨ç»„æˆã€‚ä¾‹å¦‚ï¼Œæˆ‘åœ¨æˆ‘çš„ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨äº†ä¸‹é¢è¿™ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn read-resource
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Read a resource into a string&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [path]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (read-string (slurp (clojure.java.io/resource path))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†ç†è§£å‡½æ•°ä½“ï¼Œä½ å¿…é¡»æ‰¾åˆ°æœ€å†…éƒ¨çš„å½¢å¼ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯&lt;code>(clojure.java.io/resource path)&lt;/code>ï¼Œç„¶åä»å³åˆ°å·¦å‘å¤–èµ°ï¼Œçœ‹æ¯ä¸ªå‡½æ•°çš„ç»“æœå¦‚ä½•ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚è¿™ç§ä»å³åˆ°å·¦çš„æµç¨‹ä¸é Lisp ç¨‹åºå‘˜æ‰€ä¹ æƒ¯çš„ç›¸åã€‚å½“ä½ ä¹ æƒ¯äºç”¨ Clojure å†™ä½œæ—¶ï¼Œè¿™ç§ä»£ç ä¼šè¶Šæ¥è¶Šå®¹æ˜“ç†è§£ã€‚ä½†å¦‚æœä½ æƒ³ç¿»è¯‘ Clojure ä»£ç ï¼Œä»¥ä¾¿ä½ èƒ½ä»¥æ›´ç†Ÿæ‚‰çš„ã€ä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹çš„æ–¹å¼æ¥é˜…è¯»å®ƒï¼Œä½ å¯ä»¥ä½¿ç”¨å†…ç½®çš„&lt;code>-&amp;gt;&lt;/code>å®ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸º&lt;em>threading&lt;/em>æˆ–&lt;em>stabby&lt;/em>å®ã€‚å®ƒå¯ä»¥è®©ä½ åƒè¿™æ ·é‡å†™å‰é¢çš„å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn read-resource
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [path]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (-&amp;gt; path
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clojure.java.io/resource
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slurp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> read-string))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥æŠŠè¿™ç†è§£ä¸ºä¸€ä¸ªä»ä¸Šåˆ°ä¸‹çš„æµæ°´çº¿ï¼Œè€Œä¸æ˜¯ä»å†…æ‹¬å·åˆ°å¤–æ‹¬å·ã€‚é¦–å…ˆï¼Œ&lt;code>path&lt;/code>è¢«ä¼ é€’ç»™&lt;code>io/&lt;/code>resource&lt;code>ï¼Œç„¶åç»“æœè¢«ä¼ é€’ç»™&lt;/code>slurp&lt;code>ï¼Œæœ€åç»“æœè¢«ä¼ é€’ç»™&lt;/code>read-string`ã€‚&lt;/p>
&lt;p>è¿™ä¸¤ç§å®šä¹‰ &amp;ldquo;read-resource &amp;ldquo;çš„æ–¹å¼æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚ç„¶è€Œï¼Œç¬¬äºŒç§æ–¹å¼å¯èƒ½æ›´å®¹æ˜“ç†è§£ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä»ä¸Šåˆ°ä¸‹æ¥è¿‘å®ƒï¼Œä¸€ä¸ªæˆ‘ä»¬ä¹ æƒ¯çš„æ–¹å‘ã€‚&lt;code>-&amp;gt;&lt;/code>ä¹Ÿè®©æˆ‘ä»¬çœç•¥äº†æ‹¬å·ï¼Œè¿™æ„å‘³ç€æœ‰æ›´å°‘çš„è§†è§‰å™ªéŸ³éœ€è¦å¤„ç†ã€‚è¿™æ˜¯ä¸€ä¸ª&lt;em>å¥æ³•æŠ½è±¡&lt;/em>ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©ä½ ç”¨ä¸€ç§ä¸åŒäº Clojure å†…ç½®è¯­æ³•çš„è¯­æ³•æ¥å†™ä»£ç ï¼Œä½†å¯¹äºäººç±»çš„æ¶ˆè´¹æ¥è¯´æ˜¯æ¯”è¾ƒå¥½çš„ã€‚èƒœè¿‡ç‚¹çŸ³æˆé‡‘!!!&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>åœ¨æœ¬ç« ä¸­ï¼Œä½ äº†è§£äº† Clojure çš„æ±‚å€¼è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œè¯»å–å™¨å°†æ–‡æœ¬è½¬æ¢ä¸º Clojure æ•°æ®ç»“æ„ã€‚æ¥ä¸‹æ¥ï¼Œå®æ‰©å±•å™¨ç”¨å®æ¥è½¬æ¢è¿™äº›æ•°æ®ç»“æ„ï¼Œå°†ä½ çš„è‡ªå®šä¹‰è¯­æ³•è½¬æ¢ä¸ºè¯­æ³•ä¸Šæœ‰æ•ˆçš„æ•°æ®ç»“æ„ã€‚æœ€åï¼Œè¿™äº›æ•°æ®ç»“æ„è¢«å‘é€åˆ°æ±‚å€¼å™¨ã€‚æ±‚å€¼å™¨æ ¹æ®æ•°æ®ç»“æ„çš„ç±»å‹å¯¹å…¶è¿›è¡Œå¤„ç†ï¼šç¬¦å·è¢«è§£æä¸ºå®ƒä»¬çš„å‚ç…§ç‰©ï¼›åˆ—è¡¨å¯¼è‡´å‡½æ•°ã€å®æˆ–ç‰¹æ®Šå½¢å¼çš„è°ƒç”¨ï¼›å…¶ä»–ä¸€åˆ‡éƒ½è¢«æ±‚å€¼ä¸ºè‡ªèº«ã€‚&lt;/p>
&lt;p>è¿™ä¸ªè¿‡ç¨‹æœ€é…·çš„åœ°æ–¹æ˜¯ï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨ Clojure æ¥æ‰©å±•å®ƒè‡ªå·±çš„è¯­æ³•ã€‚è¿™ä¸ªè¿‡ç¨‹å˜å¾—æ›´åŠ å®¹æ˜“ï¼Œå› ä¸º Clojure æ˜¯åŒæºçš„ï¼šå®ƒçš„æ–‡æœ¬ä»£è¡¨æ•°æ®ç»“æ„ï¼Œè€Œè¿™äº›æ•°æ®ç»“æ„ä»£è¡¨æŠ½è±¡çš„è¯­æ³•æ ‘ï¼Œè®©ä½ æ›´å®¹æ˜“æ¨ç†å‡ºå¦‚ä½•æ„å»ºæ‰©å±•è¯­æ³•çš„å®ã€‚&lt;/p>
&lt;p>æœ‰äº†æ‰€æœ‰è¿™äº›æ–°çš„æ¦‚å¿µï¼Œä½ ç°åœ¨å°±å¯ä»¥åƒæˆ‘æ‰¿è¯ºçš„é‚£æ ·ï¼Œæ•…æ„ç‚¸æ¯ä¸œè¥¿äº†ã€‚ä¸‹ä¸€ç« å°†æ•™ä½ å…³äºç¼–å†™å®çš„ä¸€åˆ‡çŸ¥è¯†ã€‚è¯·æŠ“ç´§ä½ çš„è¢œå­ï¼Œå¦åˆ™å®ƒä»¬å¾ˆå¯èƒ½ä¼šè¢«æ‰“æ‰!&lt;/p>
&lt;h2 id="ç»ƒä¹ ">ç»ƒä¹ &lt;/h2>
&lt;p>è¿™äº›ç»ƒä¹ çš„é‡ç‚¹æ˜¯è¯»å–å™¨å’Œæ±‚å€¼ã€‚ç¬¬ 8 ç« æœ‰å…³äºç¼–å†™å®çš„ç»ƒä¹ ã€‚&lt;/p>
&lt;ol>
&lt;li>ä½¿ç”¨&lt;code>list&lt;/code>å‡½æ•°, å¼•ç”¨, å’Œ&lt;code>read-string&lt;/code>æ¥åˆ›å»ºä¸€ä¸ªåˆ—è¡¨, å½“æ±‚å€¼æ—¶, æ‰“å°å‡ºä½ çš„åå­—å’Œä½ æœ€å–œæ¬¢çš„ç§‘å¹»ç”µå½±.&lt;/li>
&lt;li>åˆ›å»ºä¸€ä¸ª infix å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªç±»ä¼¼&lt;code>(1 + 3 * 4 - 5)&lt;/code>çš„åˆ—è¡¨ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Clojure éœ€è¦çš„åˆ—è¡¨ï¼Œä»¥ä¾¿ä½¿ç”¨è¿ç®—ç¬¦ä¼˜å…ˆè§„åˆ™æ­£ç¡®æ±‚å€¼è¯¥è¡¨è¾¾å¼ã€‚&lt;/li>
&lt;/ol></description></item><item><title>Chapter6 ç»„ç»‡ä½ çš„é¡¹ç›®</title><link>https://example.com/p/chapter6-%E7%BB%84%E7%BB%87%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/</link><pubDate>Fri, 14 Jan 2022 12:40:41 +0800</pubDate><guid>https://example.com/p/chapter6-%E7%BB%84%E7%BB%87%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE/</guid><description>&lt;h1 id="ç»„ç»‡ä½ çš„é¡¹ç›®ä¸€ä¸ªå›¾ä¹¦ç®¡ç†å‘˜çš„æ•…äº‹">ç»„ç»‡ä½ çš„é¡¹ç›®ï¼šä¸€ä¸ªå›¾ä¹¦ç®¡ç†å‘˜çš„æ•…äº‹&lt;/h1>
&lt;p>åœ¨æˆ‘ä»¬æ¯ä¸ªäººå¿ƒä¸­éƒ½ä½ç€ä¸€ä¸ªå« Melvil çš„å›¾ä¹¦ç®¡ç†å‘˜ï¼Œä¸€ä¸ªä»¥ç»„ç»‡è‰ºæœ¯ä¸ºä¹çš„å¥‡å¼‚ç”Ÿç‰©ã€‚æ—¥æ—¥å¤œå¤œï¼ŒMelvil éƒ½æ¸´æœ›ä¸ºä½ çš„ä»£ç åº“å¸¦æ¥ç§©åºã€‚å¹¸è¿çš„æ˜¯ï¼ŒClojure æä¾›äº†ä¸€å¥—å·¥å…·ï¼Œä¸“é—¨ç”¨æ¥å¸®åŠ©è¿™ä¸ªä¾å„’ä¸æ··ä¹±çš„åŠ›é‡ä¸æ–­æ–—äº‰ã€‚&lt;/p>
&lt;p>è¿™äº›å·¥å…·é€šè¿‡å°†ç›¸å…³çš„å‡½æ•°å’Œæ•°æ®åˆ†ç»„æ¥å¸®åŠ©ä½ ç»„ç»‡ä½ çš„ä»£ç ã€‚å®ƒä»¬è¿˜å¯ä»¥é˜²æ­¢åç§°å†²çªï¼Œè¿™æ ·ä½ å°±ä¸ä¼šæ„å¤–åœ°è¦†ç›–åˆ«äººçš„ä»£ç ï¼Œåä¹‹äº¦ç„¶ã€‚åœ¨è¿™ä¸ªå……æ»¡æ‚¬å¿µå’Œç¥ç§˜çš„æ•…äº‹ä¸­ï¼Œè¯·å’Œæˆ‘ä¸€èµ·å­¦ä¹ å¦‚ä½•ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œå¹¶è§£å†³ä¸€ç”Ÿä¸­çš„æŠ¢åŠ«æ¡ˆå§ åœ¨è¿™ä¸ªä¼ å¥‡æ•…äº‹çš„æœ€åï¼Œä½ å°†äº†è§£ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>`def&amp;rsquo;æ˜¯åšä»€ä¹ˆçš„&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä»€ä¹ˆæ˜¯å‘½åç©ºé—´ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‘½åç©ºé—´å’Œæ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„å…³ç³»&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚ä½•ä½¿ç”¨&lt;code>refer&lt;/code>ã€&lt;code>alias&lt;/code>ã€&lt;code>require&lt;/code>ã€&lt;code>use&lt;/code>å’Œ&lt;code>ns&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚ä½•ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæ¥ç»„ç»‡ Clojure é¡¹ç›®&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>æˆ‘å…ˆæ¥ä»‹ç»ä¸€ä¸‹ Clojure çš„ç»„ç»‡ç³»ç»Ÿï¼Œå®ƒçš„å·¥ä½œåŸç†å¾ˆåƒä¸€ä¸ªåº“ã€‚Melvil å…´å¥‹åœ°é¢¤æŠ–ç€!&lt;/p>
&lt;h2 id="ä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªåº“">ä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªåº“&lt;/h2>
&lt;p>ç°å®ä¸–ç•Œä¸­çš„å›¾ä¹¦é¦†å­˜å‚¨å¯¹è±¡çš„é›†åˆï¼Œå¦‚ä¹¦ç±ã€æ‚å¿—å’Œ DVDã€‚ä»–ä»¬ä½¿ç”¨å¯»å€ç³»ç»Ÿï¼Œæ‰€ä»¥å½“ä½ å¾—åˆ°ä¸€ä¸ªç‰©ä½“çš„åœ°å€æ—¶ï¼Œä½ å¯ä»¥å¯¼èˆªåˆ°ç‰©ç†ç©ºé—´å¹¶æ£€ç´¢åˆ°è¯¥ç‰©ä½“ã€‚&lt;/p>
&lt;p>å½“ç„¶ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿç›´æ¥çŸ¥é“ä¸€æœ¬ä¹¦æˆ– DVD çš„åœ°å€æ˜¯ä»€ä¹ˆã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå›¾ä¹¦é¦†è¦è®°å½•ä¸€ä¸ªç‰©ä½“çš„æ ‡é¢˜å’Œå®ƒçš„åœ°å€ä¹‹é—´çš„è”ç³»ï¼Œå¹¶æä¾›å·¥å…·æ¥æœç´¢è¿™äº›è®°å½•ã€‚åœ¨è®¡ç®—æœºä¹‹å‰çš„æ—§æ—¶ä»£ï¼Œå›¾ä¹¦é¦†æä¾›å¡ç‰‡ç›®å½•ï¼Œå³è£…æ»¡çº¸è´¨å¡ç‰‡çš„æŸœå­ï¼Œå…¶ä¸­åŒ…å«æ¯æœ¬ä¹¦çš„æ ‡é¢˜ã€ä½œè€…ã€&amp;ldquo;åœ°å€&amp;rdquo;ï¼ˆæœå¨åè¿›åˆ¶æˆ–å›½ä¼šå›¾ä¹¦é¦†ç¼–å·ï¼‰å’Œå…¶ä»–ä¿¡æ¯ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œè¦æ‰¾åˆ°ã€Šè¾¾èŠ¬å¥‡å¯†ç ã€‹ï¼Œä½ å¯ä»¥ç¿»é˜…ä¹¦åç›®å½•ï¼ˆæŒ‰ä¹¦åæ’åºçš„å¡ç‰‡ï¼‰ï¼Œç›´åˆ°ä½ æ‰¾åˆ°æ­£ç¡®çš„å¡ç‰‡ã€‚åœ¨é‚£å¼ å¡ç‰‡ä¸Šï¼Œä½ ä¼šçœ‹åˆ°åœ°å€&lt;em>813.54&lt;/em>ï¼ˆå¦‚æœå®ƒä½¿ç”¨æœå¨åè¿›åˆ¶ç³»ç»Ÿï¼‰ï¼Œæµè§ˆå›¾ä¹¦é¦†ï¼Œæ‰¾åˆ°&lt;em>è¾¾èŠ¬å¥‡å¯†ç &lt;/em>æ‰€åœ¨çš„ä¹¦æ¶ï¼Œå¹¶å‚ä¸ä½ ä¸€ç”Ÿä¸­çš„æ–‡å­¦å’Œ/æˆ–ä»‡æ¨é˜…è¯»å†’é™©ã€‚&lt;/p>
&lt;p>åœ¨ Clojure ä¸­æƒ³è±¡ä¸€ä¸ªç±»ä¼¼çš„è®¾ç½®æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æˆ‘è®¤ä¸º Clojure æ˜¯å°†å¯¹è±¡ï¼ˆå¦‚æ•°æ®ç»“æ„å’Œå‡½æ•°ï¼‰å­˜å‚¨åœ¨ä¸€ç»„å·¨å¤§çš„ç¼–å·æ¶ä¸Šã€‚æ²¡æœ‰äººèƒ½å¤Ÿç›´æ¥çŸ¥é“ä¸€ä¸ªå¯¹è±¡è¢«å­˜å‚¨åœ¨å“ªä¸ªæ¶å­ä¸Šã€‚ç›¸åï¼Œæˆ‘ä»¬ç»™ Clojure ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå®ƒç”¨æ¥æ£€ç´¢è¯¥å¯¹è±¡ã€‚&lt;/p>
&lt;p>ä¸ºäº†ä½¿ä¹‹æˆåŠŸï¼ŒClojure å¿…é¡»ç»´æŠ¤æˆ‘ä»¬çš„æ ‡è¯†ç¬¦å’Œè´§æ¶åœ°å€ä¹‹é—´çš„å…³è”ã€‚å®ƒé€šè¿‡ä½¿ç”¨&lt;em>namespaces&lt;/em>æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å‘½åç©ºé—´åŒ…å«äº†äººç±»å‹å¥½çš„&lt;em>ç¬¦å·&lt;/em>å’Œä¹¦æ¶åœ°å€çš„å¼•ç”¨ä¹‹é—´çš„ Mapï¼Œè¢«ç§°ä¸º&lt;em>vars&lt;/em>ï¼Œå¾ˆåƒå¡ç‰‡ç›®å½•ã€‚&lt;/p>
&lt;p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œå‘½åç©ºé—´æ˜¯ &amp;ldquo;clojure.lang.Namespace &amp;ldquo;ç±»å‹çš„å¯¹è±¡ï¼Œä½ å¯ä»¥ä¸å®ƒä»¬äº’åŠ¨ï¼Œå°±åƒä½ å¯ä»¥ä¸ Clojure æ•°æ®ç»“æ„äº’åŠ¨ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨&lt;code>*ns*&lt;/code>æ¥å¼•ç”¨å½“å‰çš„å‘½åç©ºé—´ï¼Œä½ å¯ä»¥ç”¨&lt;code>(ns-name *ns*)&lt;/code>æ¥è·å¾—å…¶åç§°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns-name *ns*)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; user
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¾‹å¦‚ï¼Œå½“ä½ å¯åŠ¨ REPL æ—¶ï¼Œä½ åœ¨&lt;code>user&lt;/code>å‘½åç©ºé—´ä¸­ï¼ˆæ­£å¦‚ä½ åœ¨è¿™é‡Œçœ‹åˆ°çš„ï¼‰ã€‚æç¤ºç¬¦æ˜¾ç¤ºå½“å‰åç§°ç©ºé—´ï¼Œä½¿ç”¨&lt;code>user=&amp;gt;&lt;/code>ã€‚&lt;/p>
&lt;p>å½“å‰åå­—ç©ºé—´çš„æ¦‚å¿µæ„å‘³ç€ä½ å¯ä»¥æœ‰å¤šä¸ªåå­—ç©ºé—´ï¼Œäº‹å®ä¸Š Clojure å…è®¸ä½ åˆ›å»ºä»»æ„å¤šçš„åå­—ç©ºé—´ï¼ˆå°½ç®¡ä»æŠ€æœ¯ä¸Šè®²ï¼Œä½ å¯ä»¥åˆ›å»ºçš„åå­—æ•°é‡å¯èƒ½æœ‰ä¸€ä¸ªä¸Šé™ï¼‰ã€‚åœ¨ Clojure ç¨‹åºä¸­ï¼Œä½ æ€»æ˜¯&lt;em>åœ¨&lt;/em>ä¸ªå‘½åç©ºé—´ä¸­ã€‚&lt;/p>
&lt;p>è‡³äºç¬¦å·ï¼Œä½ ä¸€ç›´åœ¨ä½¿ç”¨å®ƒä»¬ï¼Œç”šè‡³æ²¡æœ‰æ„è¯†åˆ°ã€‚ä¾‹å¦‚ï¼Œå½“ä½ å†™&lt;code>(map inc [1 2])&lt;/code>æ—¶ï¼Œ&lt;code>map&lt;/code>å’Œ&lt;code>inc&lt;/code>éƒ½æ˜¯ç¬¦å·ã€‚ç¬¦å·æ˜¯ Clojure ä¸­çš„æ•°æ®ç±»å‹ï¼Œæˆ‘å°†åœ¨ä¸‹ä¸€ç« ä¸­å½»åº•è§£é‡Šå®ƒä»¬ã€‚ç°åœ¨ï¼Œä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œå½“ä½ ç»™ Clojure ä¸€ä¸ªåƒ&lt;code>map&lt;/code>è¿™æ ·çš„ç¬¦å·æ—¶ï¼Œå®ƒä¼šåœ¨å½“å‰å‘½åç©ºé—´ä¸­æ‰¾åˆ°ç›¸åº”çš„ varï¼Œå¾—åˆ°ä¸€ä¸ªæ¶å­ä¸Šçš„åœ°å€ï¼Œå¹¶ä¸ºä½ ä»é‚£ä¸ªæ¶å­ä¸Šæ£€ç´¢ä¸€ä¸ªå¯¹è±¡&amp;ndash;åœ¨è¿™é‡Œï¼Œå°±æ˜¯&lt;code>map&lt;/code>æ‰€æŒ‡çš„é‚£ä¸ªå‡½æ•°ã€‚å¦‚æœä½ æƒ³åªä½¿ç”¨ç¬¦å·æœ¬èº«ï¼Œè€Œä¸æ˜¯å®ƒæ‰€æŒ‡çš„ä¸œè¥¿ï¼Œä½ å¿…é¡»å¼•ç”¨å®ƒã€‚å¼•è¿°ä»»ä½• Clojure çš„å½¢å¼å‘Šè¯‰ Clojure ä¸è¦æ±‚å€¼å®ƒï¼Œè€Œæ˜¯æŠŠå®ƒå½“ä½œæ•°æ®ã€‚æ¥ä¸‹æ¥çš„å‡ ä¸ªä¾‹å­æ˜¾ç¤ºäº†å½“ä½ å¼•ç”¨ä¸€ä¸ª Form æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">âŠ inc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;lt;core$inc clojure.core$inc@30132014&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ &amp;#39;inc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; inc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (map inc [1 2])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â &amp;#39;(map inc [1 2])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (map inc [1 2])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ä½ åœ¨ REPL ä¸­æ±‚å€¼ &lt;code>inc&lt;/code> åœ¨ âŠ å¤„æ—¶ï¼Œå®ƒä¼šæ‰“å°å‡º &lt;code>inc&lt;/code> æ‰€æŒ‡çš„å‡½æ•°çš„æ–‡æœ¬è¡¨è¿°ã€‚æ¥ä¸‹æ¥ï¼Œä½ åœ¨â‹å¼•ç”¨&lt;code>inc&lt;/code>ï¼Œæ‰€ä»¥ç»“æœæ˜¯ç¬¦å·&lt;code>inc&lt;/code>ã€‚ç„¶åï¼Œä½ åœ¨âŒå¤„æ±‚å€¼ä¸€ä¸ªç†Ÿæ‚‰çš„&lt;code>map&lt;/code>åº”ç”¨ç¨‹åºï¼Œå¾—åˆ°ä¸€ä¸ªç†Ÿæ‚‰çš„ç»“æœã€‚ä¹‹åï¼Œä½ åœ¨âå¤„å¼•ç”¨æ•´ä¸ªåˆ—è¡¨æ•°æ®ç»“æ„ï¼Œç»“æœæ˜¯ä¸€ä¸ªæœªæ±‚å€¼çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬&lt;code>map&lt;/code>ç¬¦å·ã€&lt;code>inc&lt;/code>ç¬¦å·å’Œä¸€ä¸ª Vectorã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ çŸ¥é“äº† Clojure çš„ç»„ç»‡ç³»ç»Ÿï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒã€‚&lt;/p>
&lt;h2 id="ç”¨-def-å­˜å‚¨å¯¹è±¡">ç”¨ def å­˜å‚¨å¯¹è±¡&lt;/h2>
&lt;p>Clojure ä¸­ç”¨äºå­˜å‚¨å¯¹è±¡çš„ä¸»è¦å·¥å…·æ˜¯&lt;code>def&lt;/code>ã€‚å…¶ä»–çš„å·¥å…·ï¼Œå¦‚&lt;code>defn&lt;/code>ï¼Œéƒ½æ˜¯ä½¿ç”¨&lt;code>def&lt;/code>ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª def çš„åº”ç”¨å®ä¾‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def great-books [&amp;#34;East of Eden&amp;#34; &amp;#34;The Glass Bead Game&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;#39;user/great-books
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">great-books
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;East of Eden&amp;#34; &amp;#34;The Glass Bead Game&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç å‘Šè¯‰ Clojureã€‚&lt;/p>
&lt;ol>
&lt;li>ç”¨&lt;code>great-books&lt;/code>å’Œ var ä¹‹é—´çš„å…³è”æ›´æ–°å½“å‰å‘½åç©ºé—´çš„ Mapã€‚&lt;/li>
&lt;li>æ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„å­˜å‚¨æ¶ã€‚&lt;/li>
&lt;li>å°†&lt;code>[ã€Šä¼Šç”¸å›­ä¹‹ä¸œã€‹ã€Šç»ç’ƒç æ¸¸æˆã€‹]&lt;/code>å­˜æ”¾åœ¨æ¶å­ä¸Šã€‚&lt;/li>
&lt;li>å°†ä¹¦æ¶çš„åœ°å€å†™åœ¨ var ä¸Šã€‚&lt;/li>
&lt;li>5.è¿”å› varï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`#&amp;lsquo;user/great-books&amp;rsquo;ï¼‰ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º&lt;em>interning&lt;/em>ä¸€ä¸ª varã€‚ ä½ å¯ä»¥ä½¿ç”¨`ns-interns&amp;rsquo;ä¸å‘½åç©ºé—´çš„ç¬¦å·åˆ°å†…å«å˜é‡çš„ Map è¿›è¡Œäº¤äº’ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•è·å¾—ä¸€ä¸ªå†…éƒ¨å˜é‡çš„ Mapã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns-interns *ns*)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {great-books #&amp;#39;user/great-books}.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥ä½¿ç”¨`get&amp;rsquo;å‡½æ•°æ¥è·å–ä¸€ä¸ªç‰¹å®šçš„ varã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(get (ns-interns *ns*) &amp;#39; great-books)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;#39;user/great-books
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡æ±‚å€¼&lt;code>(&lt;/code>ns-map &lt;em>ns&lt;/em>)&lt;code>,&lt;/code>ä½ ä¹Ÿå¯ä»¥å¾—åˆ°å‘½åç©ºé—´åœ¨ç»™å®šä¸€ä¸ªç¬¦å·æ—¶ç”¨æ¥æŸ¥æ‰¾ var çš„å®Œæ•´ Mapã€‚&lt;code>(ns-map *ns*)&lt;/code>ç»™ä½ ä¸€ä¸ªéå¸¸å¤§çš„ Mapï¼Œæˆ‘ä¸ä¼šåœ¨è¿™é‡Œæ‰“å°ï¼Œä½†å¯ä»¥è¯•è¯•&lt;/p>
&lt;p>&lt;code>#'user/great-books'æ˜¯varçš„*è¯»è€…å½¢å¼ã€‚ æˆ‘å°†åœ¨ç¬¬ä¸ƒç« è§£é‡Šæ›´å¤šå…³äºè¯»è€…å½¢å¼ã€‚ç°åœ¨ï¼Œåªéœ€çŸ¥é“ä½ å¯ä»¥ä½¿ç”¨&lt;/code>#&amp;lsquo;&amp;lsquo;æ¥æŠ“å–ä¸åé¢çš„ç¬¦å·å¯¹åº”çš„ varï¼›&lt;code>#'user/great-books'è®©ä½ åœ¨&lt;/code>user&amp;rsquo;å‘½åç©ºé—´ä¸­ä½¿ç”¨ä¸ç¬¦å·&lt;code>great-books'ç›¸å…³çš„varã€‚æˆ‘ä»¬å¯ä»¥&lt;/code>deref&amp;rsquo;å˜é‡æ¥è·å¾—å®ƒä»¬æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(deref #&amp;#39;user/great-books)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;East of Eden&amp;#34; &amp;#34;The Glass Bead Game&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±åƒå‘Šè¯‰ Clojureï¼Œ&amp;ldquo;ä» var ä¸­è·å–ä¹¦æ¶å·ï¼Œå»é‚£ä¸ªä¹¦æ¶å·ï¼ŒæŠ“ä½ä¸Šé¢çš„ä¸œè¥¿ï¼Œç„¶åç»™æˆ‘ï¼&amp;rdquo;&lt;/p>
&lt;p>ä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ åªéœ€è¦ä½¿ç”¨ç¬¦å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">great-books
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;East of Eden&amp;#34; &amp;#34;The Glass Bead Game&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±åƒå‘Šè¯‰ Clojureï¼Œ&amp;ldquo;æ£€ç´¢ä¸ great-books ç›¸å…³çš„ varï¼Œç„¶åå–æ¶ˆé‚£ä¸ªåçš„æ°å…‹é€Š&amp;rdquo;ã€‚&lt;/p>
&lt;p>åˆ°ç›®å‰ä¸ºæ­¢è¿˜ä¸é”™ï¼Œå¯¹å—ï¼Ÿå¥½å§ï¼Œè¯·åšå¥½å‡†å¤‡ï¼Œå› ä¸ºè¿™ä¸ªç”°å›­è¯—èˆ¬çš„ç»„ç»‡å¤©å ‚å³å°†è¢«é¢ è¦† ç”¨åŒæ ·çš„ç¬¦å·å†æ¬¡è°ƒç”¨&lt;code>def&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def great-books [&amp;#34;The Power of Bees&amp;#34; &amp;#34;Journey to Upstairs&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">great-books
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;The Power of Bees&amp;#34; &amp;#34;Journey to Upstairs&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/organization/bee-power.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>var å·²ç»æ›´æ–°äº†æ–°çš„ Vector çš„åœ°å€ã€‚è¿™å°±åƒä½ åœ¨å¡ç‰‡ç›®å½•ä¸­çš„å¡ç‰‡ä¸Šçš„åœ°å€ç”¨äº†ç™½ç¬”ï¼Œç„¶åå†™äº†ä¸€ä¸ªæ–°åœ°å€ã€‚å…¶ç»“æœæ˜¯ï¼Œä½ ä¸èƒ½å†è¦æ±‚ Clojure æ‰¾åˆ°ç¬¬ä¸€ä¸ª Vectorã€‚è¿™è¢«ç§°ä¸º&lt;em>åç§°ç¢°æ’&lt;/em>ã€‚æ··ä¹±! æ— æ”¿åºœçŠ¶æ€!&lt;/p>
&lt;p>ä½ å¯èƒ½åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ç»å†è¿‡è¿™ç§æƒ…å†µã€‚JavaScript åœ¨è¿™æ–¹é¢æ˜¯è‡­åæ˜­è‘—çš„ï¼Œå®ƒä¹Ÿå‘ç”Ÿåœ¨ Ruby ä¸­ã€‚è¿™æ˜¯ä¸ªé—®é¢˜ï¼Œå› ä¸ºä½ å¯èƒ½æ— æ„ä¸­è¦†ç›–äº†ä½ è‡ªå·±çš„ä»£ç ï¼Œè€Œä¸”ä½ ä¹Ÿä¸èƒ½ä¿è¯ç¬¬ä¸‰æ–¹åº“ä¸ä¼šè¦†ç›–ä½ çš„ä»£ç ã€‚Melvil æƒŠæåœ°é€€ç¼©äº†! å¹¸è¿çš„æ˜¯ï¼ŒClojure å…è®¸ä½ åˆ›å»ºä»»æ„å¤šçš„å‘½åç©ºé—´ï¼Œè¿™æ ·ä½ å°±å¯ä»¥é¿å…è¿™äº›ç¢°æ’ã€‚&lt;/p>
&lt;h2 id="åˆ›å»ºå’Œåˆ‡æ¢åˆ°å‘½åç©ºé—´">åˆ›å»ºå’Œåˆ‡æ¢åˆ°å‘½åç©ºé—´&lt;/h2>
&lt;p>Clojure æœ‰ä¸‰ç§åˆ›å»ºå‘½åç©ºé—´çš„å·¥å…·ï¼šå‡½æ•°&lt;code>create-ns&lt;/code>ï¼Œå‡½æ•°&lt;code>in-ns&lt;/code>ï¼Œä»¥åŠå®&lt;code>ns&lt;/code>ã€‚ä½ å°†åœ¨ä½ çš„ Clojure æ–‡ä»¶ä¸­ä¸»è¦ä½¿ç”¨&lt;code>ns&lt;/code>å®ï¼Œä½†æˆ‘å°†æ¨è¿Ÿå‡ é¡µæ¥è§£é‡Šå®ƒï¼Œå› ä¸ºå®ƒç»“åˆäº†è®¸å¤šå·¥å…·ï¼Œè€Œä¸”åœ¨æˆ‘è®¨è®ºå…¶ä»–å·¥å…·ä¹‹åï¼Œå®ƒæ›´å®¹æ˜“ç†è§£ã€‚&lt;/p>
&lt;p>&lt;code>create-ns&lt;/code>æ¥æ”¶ä¸€ä¸ªç¬¦å·ï¼Œå¦‚æœå®ƒä¸å­˜åœ¨ï¼Œå°±ç”¨è¿™ä¸ªåå­—åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œå¹¶è¿”å›è¿™ä¸ªå‘½åç©ºé—´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">user=&amp;gt; (create-ns &amp;#39;cheese.taxonomy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;lt;Namespace cheese.taxonomy&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥ä½¿ç”¨è¿”å›çš„åå­—ç©ºé—´ä½œä¸ºå‡½æ•°è°ƒç”¨çš„å‚æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">user=&amp;gt; (ns-name (create-ns &amp;#39;cheese.taxonomy))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; cheese-taxonomy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨å®è·µä¸­ï¼Œä½ å¯èƒ½æ°¸è¿œä¸ä¼šåœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨&lt;code>create-ns&lt;/code>ï¼Œå› ä¸ºåˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´è€Œä¸ç§»å…¥å®ƒå¹¶ä¸æ˜¯éå¸¸æœ‰ç”¨ã€‚ä½¿ç”¨&lt;code>in-ns&lt;/code>æ›´å¸¸è§ï¼Œå› ä¸ºå¦‚æœå‘½åç©ºé—´ä¸å­˜åœ¨ï¼Œå®ƒä¼šåˆ›å»ºå‘½åç©ºé—´ï¼Œå¹¶**åˆ‡æ¢åˆ°å®ƒï¼Œå¦‚æ¸…å• 6-1 æ‰€ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">user=&amp;gt; (in-ns &amp;#39;cheese.analysis)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;lt;Namespace cheese.analysis&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>6-1. ä½¿ç”¨ in-ns åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´å¹¶åˆ‡æ¢åˆ°è¯¥ç©ºé—´&lt;/li>
&lt;/ol>
&lt;p>æ³¨æ„ä½ çš„ REPL æç¤ºç¬¦ç°åœ¨æ˜¯&lt;code>cheese.analysis&amp;gt;&lt;/code>ï¼Œè¡¨æ˜ä½ ç¡®å®åœ¨ä½ åˆšåˆšåˆ›å»ºçš„æ–°å‘½åç©ºé—´ä¸­ã€‚ç°åœ¨å½“ä½ ä½¿ç”¨&lt;code>def&lt;/code>æ—¶ï¼Œå®ƒå°†åœ¨&lt;code>cheese.analysis&lt;/code>å‘½åç©ºé—´ä¸­å­˜å‚¨å‘½åå¯¹è±¡ã€‚&lt;/p>
&lt;p>ä½†æ˜¯å¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–å‘½åç©ºé—´çš„å‡½æ•°å’Œæ•°æ®æ€ä¹ˆåŠï¼Ÿè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª&lt;em>å®Œå…¨åˆæ ¼çš„&lt;/em>ç¬¦å·ã€‚ä¸€èˆ¬çš„å½¢å¼æ˜¯ namespace&lt;code>/&lt;/code>nameã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; (in-ns &amp;#39;cheese.taxonomy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.taxonomy=&amp;gt; (def cheddars [&amp;#34;mild&amp;#34; &amp;#34;medium&amp;#34; &amp;#34;strong&amp;#34; &amp;#34;sharp&amp;#34; &amp;#34;extra sharp&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.taxonomy=&amp;gt; (in-ns &amp;#39;cheese.analysis)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; cheddars
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Exception: Unable to resolve symbol: cheddars in this context
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ï¼Œ&lt;code>cheese.taxonomy&lt;/code>ï¼Œåœ¨è¯¥å‘½åç©ºé—´ä¸­å®šä¹‰äº†&lt;code>cheddars&lt;/code>ï¼Œç„¶ååˆ‡æ¢å›&lt;code>cheese.analysis&lt;/code>å‘½åç©ºé—´ã€‚å¦‚æœä½ è¯•å›¾åœ¨&lt;code>cheese.analysis&lt;/code>ä¸­å¼•ç”¨&lt;code>cheese.taxonomy&lt;/code>å‘½åç©ºé—´çš„&lt;code>cheddars&lt;/code>ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ï¼Œä½†æ˜¯ä½¿ç”¨å®Œå…¨åˆæ ¼çš„ç¬¦å·å¯ä»¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; cheese.taxonomy/cheddars
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;mild&amp;#34; &amp;#34;medium&amp;#34; &amp;#34;strong&amp;#34; &amp;#34;sharp&amp;#34; &amp;#34;extra sharp&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å…¥è¿™äº›å®Œå…¨åˆæ ¼çš„ç¬¦å·å¾ˆå¿«å°±ä¼šæˆä¸ºä¸€ç§å›°æ‰°ã€‚Â æ¯”å¦‚è¯´ï¼Œæˆ‘æ˜¯ä¸€ä¸ªæä¸è€çƒ¦çš„å­¦è€…ï¼Œä¸“é—¨ç ”ç©¶ç¬¦å·å­¦-au-fromageï¼Œæˆ–è€…ç ”ç©¶ä¸å¥¶é…ªæœ‰å…³çš„ç¬¦å·ã€‚&lt;/p>
&lt;p>çªç„¶é—´ï¼Œå¯èƒ½å‘ç”Ÿçš„æœ€ç³Ÿç³•çš„äº‹æƒ…å‘ç”Ÿäº†ï¼åœ¨å…¨ä¸–ç•ŒèŒƒå›´å†…ï¼Œç¥åœ£çš„å’Œæœ‰å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…éƒ½å‘ç”Ÿäº†ã€‚åœ¨ä¸–ç•Œå„åœ°ï¼Œç¥åœ£çš„ã€å…·æœ‰å†å²æ„ä¹‰çš„å¥¶é…ªéƒ½å¤±è¸ªäº†ã€‚å¨æ–¯åº·æ˜Ÿå·çš„æ ‡å‡†åˆ‡è¾¾å¹²é…ªï¼šä¸è§äº†! å›¾å¦å¡è’™çš„å¤§å¥¶é…ªç½ï¼šè¢«å·äº†! éƒ½çµå¥¶é…ªï¼šè¢«éª—å–çš„å¥¶é…ªæ‰€å–ä»£! è¿™æœ‰å¯èƒ½ä½¿ä¸–ç•Œå› æŸç§åŸå› è€Œé™·å…¥å®Œå…¨çš„æ··ä¹±! è‡ªç„¶ï¼Œä½œä¸ºä¸€ä¸ªæ°å‡ºçš„å¥¶é…ªç ”ç©¶è€…ï¼Œæˆ‘æœ‰è´£ä»»è§£å¼€è¿™ä¸ªè°œå›¢ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘æ­£è¢«å…‰æ˜ä¼šã€å…±æµä¼šå’Œè¶³éƒ¨æ—è¿½æ•ï¼å› ä¸ºæˆ‘æ˜¯ä¸€åå­¦è€…ï¼Œæ‰€ä»¥æˆ‘å¿…é¡»ä¸ºä»–ä»¬æä¾›å¸®åŠ©ã€‚&lt;/p>
&lt;p>å› ä¸ºæˆ‘æ˜¯ä¸€ä¸ªå­¦è€…ï¼Œæˆ‘è¯•å›¾ç”¨æˆ‘çŸ¥é“çš„æœ€å¥½çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªè°œå›¢&amp;ndash;å»å›¾ä¹¦é¦†ç ”ç©¶è¿™ä¸ªç‹—å±ã€‚æˆ‘å¯é çš„åŠ©æ‰‹ Clojure é™ªç€æˆ‘ã€‚å½“æˆ‘ä»¬ä»ä¸€ä¸ªåå­—ç©ºé—´åˆ°å¦ä¸€ä¸ªåå­—ç©ºé—´å¿™å¿™ç¢Œç¢Œæ—¶ï¼Œæˆ‘å–Šç€è®© Clojure æŠŠä¸€ä¸ªåˆä¸€ä¸ªä¸œè¥¿äº¤ç»™æˆ‘ã€‚&lt;/p>
&lt;p>ä½† Clojure æœ‰ç‚¹ç¬¨ï¼Œå¾ˆéš¾å¼„æ¸…æ¥šæˆ‘æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚åœ¨&lt;code>user&lt;/code>å‘½åç©ºé—´ä¸­ï¼Œæˆ‘å¤§å£°è¯´ï¼š&amp;quot;&lt;code>join&lt;/code>! ç»™æˆ‘&lt;code>join'ï¼&amp;quot;--æˆ‘å˜´é‡Œçš„å”¾æ²«æ˜Ÿå­é£äº†å‡ºæ¥ã€‚&amp;quot;&lt;/code>RuntimeException: Unable to resolve symbol: join&lt;code>,&amp;quot; ClojureæŠ±æ€¨ç€å›åº”ã€‚&amp;quot;çœ‹åœ¨å¸ƒé‡Œçš„ä»½ä¸Šï¼ŒæŠŠ&lt;/code>clojure.string/join`äº¤ç»™æˆ‘å§ï¼&amp;rdquo; æˆ‘åé©³é“ï¼ŒClojure å°½èŒå°½è´£åœ°æŠŠæˆ‘è¦æ‰¾çš„å‡½æ•°äº¤ç»™æˆ‘ã€‚&lt;/p>
&lt;p>æˆ‘çš„å£°éŸ³å˜å¾—æ²™å“‘äº†ã€‚æˆ‘éœ€è¦ä¸€äº›æ–¹æ³•æ¥å‘Šè¯‰ Clojure è¦ç»™æˆ‘ä»€ä¹ˆå¯¹è±¡ï¼Œè€Œä¸å¿…æ¯æ¬¡éƒ½ä½¿ç”¨å®Œå…¨åˆæ ¼çš„ç¬¦å·ã€‚&lt;/p>
&lt;p>å¹¸è¿çš„æ˜¯ï¼ŒClojure æä¾›äº† &amp;ldquo;refer &amp;ldquo;å’Œ &amp;ldquo;alias &amp;ldquo;å·¥å…·ï¼Œè®©æˆ‘å¯ä»¥æ›´ç®€æ´åœ°å¯¹å®ƒå¼å«ã€‚&lt;/p>
&lt;h3 id="å¼•ç”¨">å¼•ç”¨&lt;/h3>
&lt;p>&lt;code>refer&lt;/code>ä½¿ä½ èƒ½å¤Ÿç²¾ç»†åœ°æ§åˆ¶ä½ å¦‚ä½•å¼•ç”¨å…¶ä»–å‘½åç©ºé—´çš„å¯¹è±¡ã€‚å¯åŠ¨ä¸€ä¸ªæ–°çš„ REPL ä¼šè¯å¹¶å°è¯•ä»¥ä¸‹æ“ä½œã€‚è¯·è®°ä½ï¼Œåœ¨ REPL ä¸­è¿™æ ·ç©å‘½åç©ºé—´æ˜¯å¯ä»¥çš„ï¼Œä½†ä½ ä¸å¸Œæœ›ä½ çš„ Clojure æ–‡ä»¶çœ‹èµ·æ¥åƒè¿™æ ·ï¼›æ­£ç¡®çš„æ–‡ä»¶ç»“æ„æ–¹å¼åœ¨&lt;a class="link" href="https://www.braveclojure.com/organization/#Anchor" target="_blank" rel="noopener"
>&amp;ldquo;çœŸæ­£çš„é¡¹ç›®ç»„ç»‡ &amp;ldquo;ç¬¬ 133 é¡µ&lt;/a>ä¸­æ¶‰åŠã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">user=&amp;gt; (in-ns &amp;#39;cheese.taxonomy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.taxonomy=&amp;gt; (def cheddars [&amp;#34;mild&amp;#34; &amp;#34;medium&amp;#34; &amp;#34;strong&amp;#34; &amp;#34;sharp&amp;#34; &amp;#34;extra sharp&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.taxonomy=&amp;gt; (def bries [&amp;#34;Wisconsin&amp;#34; &amp;#34;Somerset&amp;#34; &amp;#34;Brie de Meaux&amp;#34; &amp;#34;Brie de Melun&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.taxonomy=&amp;gt; (in-ns &amp;#39;cheese.analysis)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; (clojure.core/refer &amp;#39;cheese.taxonomy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; bries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;Wisconsin&amp;#34; &amp;#34;Somerset&amp;#34; &amp;#34;Brie de Meaux&amp;#34; &amp;#34;Brie de Melun&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; cheddars
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;mild&amp;#34; &amp;#34;medium&amp;#34; &amp;#34;strong&amp;#34; &amp;#34;sharp&amp;#34; &amp;#34;extra sharp&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ª &amp;ldquo;cheese.taxonomy &amp;ldquo;å‘½åç©ºé—´å’Œå…¶ä¸­çš„ä¸¤ä¸ª Vectorã€‚Â &lt;code>cheddars&lt;/code>å’Œ&lt;code>bries&lt;/code>ã€‚ç„¶åå®ƒåˆ›å»ºå¹¶ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ï¼Œç§°ä¸º&lt;code>cheese.analysis&lt;/code>ã€‚ç”¨å‘½åç©ºé—´çš„ç¬¦å·è°ƒç”¨&lt;code>refer&lt;/code>å¯ä»¥è®©ä½ å¼•ç”¨ç›¸åº”çš„å‘½åç©ºé—´çš„å¯¹è±¡ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å®Œå…¨é™å®šçš„ç¬¦å·ã€‚å®ƒé€šè¿‡æ›´æ–°å½“å‰å‘½åç©ºé—´çš„ç¬¦å·/å¯¹è±¡ Map æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚ä½ å¯ä»¥çœ‹åˆ°åƒè¿™æ ·çš„æ–°æ¡ç›®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; (clojure.core/get (clojure.core/ns-map clojure.core/*ns*) &amp;#39;bries)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;#39;cheese.taxonomy/bries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; (clojure.core/get (clojure.core/ns-map clojure.core/*ns*) &amp;#39;cheddars)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;#39;cheese.taxonomy/cheddars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±å¥½åƒ Clojure&lt;/p>
&lt;ol>
&lt;li>åœ¨&lt;code>cheese.taxonomy&lt;/code>å‘½åç©ºé—´ä¸Šè°ƒç”¨&lt;code>ns-interns&lt;/code>ã€‚&lt;/li>
&lt;li>å°†å…¶ä¸å½“å‰å‘½åç©ºé—´çš„&lt;code>ns-map&lt;/code>åˆå¹¶ã€‚&lt;/li>
&lt;li>å°†ç»“æœä½œä¸ºå½“å‰å‘½åç©ºé—´çš„æ–°çš„`ns-map&amp;rsquo;ã€‚&lt;/li>
&lt;/ol>
&lt;p>å½“ä½ è°ƒç”¨&lt;code>refer&lt;/code>æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿‡æ»¤å™¨&lt;code>:only&lt;/code>, &lt;code>:exclude&lt;/code>, å’Œ&lt;code>:rename&lt;/code>ä¼ é€’ç»™å®ƒã€‚æ­£å¦‚åå­—æ‰€æš—ç¤ºçš„ï¼Œ&lt;code>:only&lt;/code>å’Œ&lt;code>:exclude&lt;/code>é™åˆ¶äº†å“ªäº›ç¬¦å·/å˜é‡ Map è¢«åˆå¹¶åˆ°å½“å‰å‘½åç©ºé—´çš„&lt;code>ns-map&lt;/code>ã€‚Â &lt;code>:rename&lt;/code>å…è®¸ä½ ä½¿ç”¨ä¸åŒçš„ç¬¦å·æ¥è¡¨ç¤ºè¢«åˆå¹¶çš„å˜é‡ã€‚å¦‚æœæˆ‘ä»¬å°†å‰é¢çš„ä¾‹å­ä¿®æ”¹ä¸ºä½¿ç”¨&lt;code>:only&lt;/code>ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; (clojure.core/refer &amp;#39;cheese.taxonomy :only [&amp;#39;bries])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; bries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;Wisconsin&amp;#34; &amp;#34;Somerset&amp;#34; &amp;#34;Brie de Meaux&amp;#34; &amp;#34;Brie de Melun&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; cheddars
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; RuntimeException: æ— æ³•è§£å†³ç¬¦å·ï¼šcheddars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯&lt;code>:exclude&lt;/code>çš„æ“ä½œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; (clojure.core/refer &amp;#39;cheese.taxonomy :only [&amp;#39;bries])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; bries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;Wisconsin&amp;#34; &amp;#34;Somerset&amp;#34; &amp;#34;Brie de Meaux&amp;#34; &amp;#34;Brie de Melun&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; cheddars
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; RuntimeException: Unable to resolve symbol: cheddars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åï¼Œä¸€ä¸ª&lt;code>:rename&lt;/code>çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; (clojure.core/refer &amp;#39;cheese.taxonomy :rename {&amp;#39;bries &amp;#39;yummy-bries})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; bries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; RuntimeException: Unable to resolve symbol: bries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; yummy-bries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;Wisconsin&amp;#34; &amp;#34;Somerset&amp;#34; &amp;#34;Brie de Meaux&amp;#34; &amp;#34;Brie de Melun&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œåœ¨è¿™äº›æœ€åçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨&lt;code>clojure.core&lt;/code>ä¸­æ‰€æœ‰å¯¹è±¡çš„å®Œå…¨åˆæ ¼åç§°ï¼Œå¦‚&lt;code>clojure.core/ns-map&lt;/code>å’Œ&lt;code>clojure.core/refer&lt;/code>ã€‚æˆ‘ä»¬ä¸éœ€è¦åœ¨&lt;code>user&lt;/code>å‘½åç©ºé—´ä¸­è¿™æ ·åšã€‚è¿™æ˜¯å› ä¸º REPL åœ¨&lt;code>user&lt;/code>å‘½åç©ºé—´ä¸­è‡ªåŠ¨å¼•ç”¨&lt;code>clojure.core&lt;/code>ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åç©ºé—´æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡æ±‚å€¼&lt;code>(clojure.core/refer-clojure)&lt;/code>æ¥ç®€åŒ–ä½ çš„ç”Ÿæ´»ï¼›è¿™å°†å¼•ç”¨ clojure.core å‘½åç©ºé—´ï¼Œä»ç°åœ¨èµ·æˆ‘å°†ä½¿ç”¨å®ƒã€‚åœ¨ä¾‹å­ä¸­ä½ ä¸ä¼šçœ‹åˆ°&lt;code>clojure.core/refer&lt;/code>ï¼Œè€Œåªä¼šçœ‹åˆ°&lt;code>refer&lt;/code>ã€‚&lt;/p>
&lt;p>å¦ä¸€ä»¶éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œä½ å¯ä»¥å®Œå…¨è‡ªç”±åœ°ç»„ç»‡ä½ çš„å‡½æ•°å’Œæ•°æ®ï¼Œè·¨è¶Šå‘½åç©ºé—´ã€‚è¿™è®©ä½ å¯ä»¥åˆç†åœ°å°†ç›¸å…³çš„å‡½æ•°å’Œæ•°æ®å½’å…¥åŒä¸€å‘½åç©ºé—´ã€‚&lt;/p>
&lt;p>æœ‰æ—¶ä½ å¯èƒ½å¸Œæœ›ä¸€ä¸ªå‡½æ•°åªå¯¹åŒä¸€å‘½åç©ºé—´å†…çš„å…¶ä»–å‡½æ•°æœ‰æ•ˆã€‚Clojure å…è®¸ä½ ä½¿ç”¨&lt;code>defn-&lt;/code>æ¥å®šä¹‰&lt;em>ç§æœ‰&lt;/em>çš„å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in-ns &amp;#39;cheese.analysis)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; Notice the dash after &amp;#34;defn&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn- private-function
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Just an example function that does nothing&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ è¯•å›¾ä»å…¶ä»–å‘½åç©ºé—´è°ƒç”¨è¿™ä¸ªå‡½æ•°æˆ–å¼•ç”¨å®ƒï¼ŒClojure å°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ä½ å¯ä»¥åœ¨æ±‚å€¼âŠå’Œâ‹çš„ä»£ç æ—¶çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; (in-ns &amp;#39;cheese.taxonomy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.taxonomy=&amp;gt; (clojure.core/refer-clojure)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ cheese.taxonomy=&amp;gt; (cheese.analysis/private-function)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ cheese.taxonomy=&amp;gt; (refer &amp;#39;cheese.analysis :only [&amp;#39;private-function])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå³ä½¿ä½ æ˜ç¡®åœ° &amp;ldquo;å¼•ç”¨ &amp;ldquo;è¿™ä¸ªå‡½æ•°ï¼Œä½ ä¹Ÿä¸èƒ½ä½¿ç”¨å…¶ä»–å‘½åç©ºé—´çš„å‡½æ•°ï¼Œå› ä¸ºä½ æŠŠå®ƒå˜æˆäº†ç§æœ‰çš„ã€‚(å¦‚æœä½ æƒ³ç‹¡çŒ¾ä¸€ç‚¹ï¼Œä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ç¥ç§˜çš„è¯­æ³•`@#&amp;lsquo;some/private-var&amp;rsquo;æ¥è®¿é—®ç§æœ‰å˜é‡ï¼Œä½†ä½ å¾ˆå°‘æƒ³è¿™æ ·åš)ã€‚&lt;/p>
&lt;h3 id="alias">alias&lt;/h3>
&lt;p>ä¸&lt;code>refer&lt;/code>ç›¸æ¯”ï¼Œ&lt;code>alias&lt;/code>ç›¸å¯¹ç®€å•ã€‚å®ƒæ‰€åšçš„åªæ˜¯è®©ä½ ç¼©çŸ­ä¸€ä¸ªå‘½åç©ºé—´çš„åç§°ï¼Œä»¥ä¾¿ä½¿ç”¨å®Œå…¨åˆæ ¼çš„ç¬¦å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; (clojure.core/alias &amp;#39;taxonomy &amp;#39;cheese.taxonomy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cheese.analysis=&amp;gt; taxonomy/bries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;Wisconsin&amp;#34; &amp;#34;Somerset&amp;#34; &amp;#34;Brie de Meaux&amp;#34; &amp;#34;Brie de Melun&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç è®©æˆ‘ä»¬ä½¿ç”¨æ¥è‡ª&lt;code>cheese.taxonomy&lt;/code>å‘½åç©ºé—´çš„è°ƒç”¨ç¬¦å·ï¼Œå¹¶ä½¿ç”¨è¾ƒçŸ­çš„åˆ«å&lt;code>taxonomy&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>refer&lt;/code>å’Œ&lt;code>alias&lt;/code>æ˜¯ä½ å¼•ç”¨å½“å‰å‘½åç©ºé—´ä»¥å¤–çš„å¯¹è±¡çš„ä¸¤ä¸ªåŸºæœ¬å·¥å…·! å®ƒä»¬æ˜¯ REPL å¼€å‘çš„å¥½å¸®æ‰‹ã€‚&lt;/p>
&lt;p>ç„¶è€Œï¼Œä½ ä¸å¯èƒ½åœ¨ REPL ä¸­åˆ›å»ºæ•´ä¸ªç¨‹åºã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘å°†ä»‹ç»ä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ï¼Œä»¥ç»„ç»‡ä¸€ä¸ªçœŸæ­£çš„é¡¹ç›®ï¼Œä½¿æºä»£ç åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ç”Ÿå­˜ã€‚&lt;/p>
&lt;h2 id="çœŸæ­£çš„é¡¹ç›®ç»„ç»‡">çœŸæ­£çš„é¡¹ç›®ç»„ç»‡&lt;/h2>
&lt;p>ç°åœ¨æˆ‘å·²ç»ä»‹ç»äº† Clojure ç»„ç»‡ç³»ç»Ÿçš„æ„å»ºæ¨¡å—ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨å®ƒä»¬ã€‚æˆ‘å°†è®¨è®ºæ–‡ä»¶è·¯å¾„å’Œå‘½åç©ºé—´åç§°ä¹‹é—´çš„å…³ç³»ï¼Œè§£é‡Šå¦‚ä½•ç”¨&lt;code>require&lt;/code>å’Œ&lt;code>use&lt;/code>åŠ è½½æ–‡ä»¶ï¼Œå¹¶å±•ç¤ºå¦‚ä½•ä½¿ç”¨&lt;code>ns&lt;/code>æ¥è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´ã€‚&lt;/p>
&lt;h3 id="æ–‡ä»¶è·¯å¾„å’Œå‘½åç©ºé—´åç§°ä¹‹é—´çš„å…³ç³»">æ–‡ä»¶è·¯å¾„å’Œå‘½åç©ºé—´åç§°ä¹‹é—´çš„å…³ç³»&lt;/h3>
&lt;p>ä¸ºäº†ä¸€çŸ³äºŒé¸Ÿï¼ˆæˆ–è€…ç”¨ä¸€é¢—ç§å­å–‚å…»ä¸¤åªé¸Ÿï¼Œè¿™å–å†³äºä½ æ˜¯å¤šä¹ˆçš„å¬‰çš®å£«ï¼‰ï¼Œæˆ‘å°†ä»‹ç»æ›´å¤šå…³äºå‘½åç©ºé—´çš„å†…å®¹ï¼ŒåŒæ—¶æˆ‘ä»¬å°†é€šè¿‡ç»˜åˆ¶å›½é™…å¥¶é…ªå¤§ç›—çš„æŠ¢åŠ«åœ°ç‚¹æ¥æŠ“æ•è¿™ä¸ªè®¨åŒçš„å¤§ç›—ã€‚è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">lein new app the-divine-cheese-code
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™åº”è¯¥åˆ›å»ºä¸€ä¸ªç›®å½•ç»“æ„ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">| .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| doc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| | intro.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| project.clj
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| src
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| | the_divine_cheese_code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| | | core.clj
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| | the_divine_cheese_code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| | | core_test.clj
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ï¼Œæ‰“å¼€&lt;em>src/the_divine_cheese_code/core.clj&lt;/em>ã€‚ä½ åº”è¯¥åœ¨ç¬¬ä¸€è¡Œçœ‹åˆ°è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:gen-class))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>ns&lt;/code>æ˜¯åœ¨ Clojure ä¸­åˆ›å»ºå’Œç®¡ç†å‘½åç©ºé—´çš„ä¸»è¦æ–¹å¼ã€‚æˆ‘å¾ˆå¿«å°±ä¼šå¯¹å®ƒè¿›è¡Œå…¨é¢çš„è§£é‡Šã€‚ä¸è¿‡ç°åœ¨ï¼Œåªéœ€çŸ¥é“è¿™ä¸€è¡Œä¸æˆ‘ä»¬åœ¨æ¸…å• 6-1 ä¸­ä½¿ç”¨çš„&lt;code>in-ns&lt;/code>å‡½æ•°éå¸¸ç›¸ä¼¼ã€‚å¦‚æœä¸€ä¸ªå‘½åç©ºé—´ä¸å­˜åœ¨ï¼Œå®ƒå°±åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œç„¶ååˆ‡æ¢åˆ°å®ƒã€‚æˆ‘åœ¨ç¬¬ 12 ç« ä¹Ÿè¯¦ç»†ä»‹ç»äº†&lt;code>(:gen-class)&lt;/code>ã€‚&lt;/p>
&lt;p>å‘½åç©ºé—´çš„åå­—æ˜¯&lt;code>the-divine-cheese-code.core&lt;/code>ã€‚åœ¨ Clojure ä¸­ï¼Œå‘½åç©ºé—´çš„åç§°å’Œå£°æ˜å‘½åç©ºé—´çš„æ–‡ä»¶è·¯å¾„ä¹‹é—´æœ‰ä¸€ä¸ªä¸€å¯¹ä¸€çš„ Mapï¼Œæ ¹æ®ä»¥ä¸‹çº¦å®šã€‚&lt;/p>
&lt;ul>
&lt;li>å½“ä½ ç”¨&lt;code>lein&lt;/code>åˆ›å»ºä¸€ä¸ªç›®å½•æ—¶ï¼ˆå°±åƒä½ åœ¨è¿™é‡Œåšçš„é‚£æ ·ï¼‰ï¼Œæºä»£ç çš„æ ¹é»˜è®¤ä¸º&lt;em>src&lt;/em>ã€‚&lt;/li>
&lt;li>åç§°ç©ºé—´ä¸­çš„ç ´æŠ˜å·å¯¹åº”äºæ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸‹åˆ’çº¿ã€‚æ‰€ä»¥&lt;code>the-divine-cheese-code&lt;/code>åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è¢« Map ä¸º&lt;em>the_divine_cheese_code&lt;/em>ã€‚&lt;/li>
&lt;li>å‘½åç©ºé—´åç§°ä¸­çš„å¥å·ï¼ˆ&lt;code>.&lt;/code>ï¼‰å‰é¢çš„æˆåˆ†å¯¹åº”äºä¸€ä¸ªç›®å½•ã€‚ä¾‹å¦‚ï¼Œç”±äº&lt;code>the-divine-cheese-code.core&lt;/code>æ˜¯å‘½åç©ºé—´çš„åç§°ï¼Œ&lt;em>the_divine_cheese_code&lt;/em>æ˜¯ä¸€ä¸ªç›®å½•ã€‚&lt;/li>
&lt;li>å‘½åç©ºé—´çš„æœ€åä¸€ä¸ªç»„æˆéƒ¨åˆ†å¯¹åº”äºæ‰©å±•åä¸º*.clj&lt;em>çš„æ–‡ä»¶ï¼›&lt;code>core&lt;/code>è¢« Map åˆ°&lt;/em>core.clj*ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä½ çš„é¡¹ç›®å°†æœ‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œ&lt;code>the-divine-cheese-code.visualization.svg&lt;/code>ã€‚ç°åœ¨ç»§ç»­ä¸ºå®ƒåˆ›å»ºæ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir src/the_divine_cheese_code/visualization
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">touch src/the_divine_cheese_code/visualization/svg.clj
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œæ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„éµå¾ªè¿™äº›æƒ¯ä¾‹ã€‚æœ‰äº†å‘½åç©ºé—´å’Œæ–‡ä»¶ç³»ç»Ÿä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹&lt;code>require&lt;/code>å’Œ&lt;code>use&lt;/code>ã€‚&lt;/p>
&lt;h3 id="è¦æ±‚å’Œä½¿ç”¨å‘½åç©ºé—´">è¦æ±‚å’Œä½¿ç”¨å‘½åç©ºé—´&lt;/h3>
&lt;p>åœ¨&lt;code>the-divine-cheese-code.core&lt;/code>å‘½åç©ºé—´çš„ä»£ç å°†ä½¿ç”¨&lt;code>the-divine-cheese-code.visualization.svg&lt;/code>å‘½åç©ºé—´çš„å‡½æ•°æ¥åˆ›å»º SVG æ ‡è®°ã€‚ä¸ºäº†ä½¿ç”¨&lt;code>svg&lt;/code>çš„å‡½æ•°ï¼Œ&lt;code>core&lt;/code>å°†ä¸å¾—ä¸&lt;em>è¦æ±‚å®ƒã€‚ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨&lt;/em>svg.clj*ä¸­æ·»åŠ ä¸€äº›ä»£ç ã€‚è®©å®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼ˆä½ ä»¥åä¼šæ·»åŠ æ›´å¤šï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn latlng-&amp;gt;point
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Convert lat/lng map to comma-separated string&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [latlng]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str (:lat latlng) &amp;#34;,&amp;#34; (:lng latlng)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn points
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [locations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (clojure.string/join &amp;#34; &amp;#34; (map latlng-&amp;gt;point locations)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å®šä¹‰äº†ä¸¤ä¸ªå‡½æ•°ï¼Œ&lt;code>latlng-&amp;gt;point&lt;/code>å’Œ&lt;code>points&lt;/code>ï¼Œä½ å°†ç”¨å®ƒä»¬æ¥æŠŠä¸€ä¸²ç»çº¬åº¦åæ ‡è½¬æ¢æˆä¸€ä¸²ç‚¹ã€‚Â è¦ä½¿ç”¨&lt;em>core.clj&lt;/em>æ–‡ä»¶ä¸­çš„è¿™æ®µä»£ç ï¼Œä½ å¿…é¡»&lt;code>require&lt;/code>å®ƒã€‚&lt;code>require&lt;/code>æ¥æ”¶ä¸€ä¸ªæŒ‡å®šå‘½åç©ºé—´çš„ç¬¦å·ï¼Œå¹¶ç¡®ä¿è¯¥å‘½åç©ºé—´å­˜åœ¨å¹¶å‡†å¤‡ä½¿ç”¨ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“ä½ è°ƒç”¨&lt;code>(require 'the-divine-cheese&lt;/code>-code.visualization.svg)&lt;code>ï¼ŒClojureè¯»å–å¹¶æ±‚å€¼ç›¸åº”çš„æ–‡ä»¶ã€‚é€šè¿‡æ±‚å€¼è¯¥æ–‡ä»¶ï¼Œå®ƒåˆ›å»ºäº†&lt;/code>the-divine-cheese-code.visualization.svg&lt;code>å‘½åç©ºé—´ï¼Œå¹¶åœ¨è¯¥å‘½åç©ºé—´ä¸­å®šä¹‰äº†å‡½æ•°&lt;/code>latlng-&amp;gt;point&lt;code>å’Œ&lt;/code>points`ã€‚å³ä½¿æ–‡ä»¶&lt;em>svg.clj&lt;/em>åœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸­ï¼ŒClojure åœ¨è¿è¡Œä½ çš„é¡¹ç›®æ—¶ä¹Ÿä¸ä¼šè‡ªåŠ¨æ±‚å€¼å®ƒï¼›ä½ å¿…é¡»æ˜ç¡®å‘Šè¯‰ Clojure ä½ æƒ³ä½¿ç”¨å®ƒã€‚&lt;/p>
&lt;p>åœ¨è¦æ±‚å‘½åç©ºé—´ä¹‹åï¼Œä½ å¯ä»¥&lt;em>å‚è€ƒ&lt;/em>å®ƒï¼Œè¿™æ ·ä½ å°±ä¸å¿…ä½¿ç”¨å®Œå…¨åˆæ ¼çš„åç§°æ¥å¼•ç”¨å‡½æ•°ã€‚ç»§ç»­è¦æ±‚&lt;code>the-divine-cheese-code.visualization.svg&lt;/code>ï¼Œå¹¶æ·»åŠ &lt;code>heists&lt;/code>åºåˆ—ï¼Œä½¿&lt;em>core.clj&lt;/em>ä¸åˆ—è¡¨ç›¸ç¬¦ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; Ensure that the SVG code is evaluated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(require &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; Refer the namespace so that you don&amp;#39;t have to use the
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; fully qualified name to reference svg functions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(refer &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def heists [{:location &amp;#34;Cologne, Germany&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;Archbishop Hildebold&amp;#39;s Cheese Pretzel&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 50.95
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 6.97}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:location &amp;#34;Zurich, Switzerland&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;The Standard Emmental&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 47.37
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 8.55}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:location &amp;#34;Marseille, France&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;Le Fromage de Cosquer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 43.30
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 5.37}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:location &amp;#34;Zurich, Switzerland&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;The Lesser Emmental&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 47.37
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 8.55}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:location &amp;#34;Vatican City&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;The Cheese of Turin&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 41.90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 12.45}])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn -main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;amp; args]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (points heists)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ æœ‰ä¸€è¿ä¸²çš„ heist ä½ç½®å¯ä»¥ä½¿ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>visualization.svg&lt;/code>å‘½åç©ºé—´çš„å‡½æ•°ã€‚&lt;code>main&lt;/code>å‡½æ•°åªæ˜¯å°†&lt;code>points&lt;/code>å‡½æ•°åº”ç”¨äº&lt;code>heists&lt;/code>ã€‚å¦‚æœä½ ç”¨&lt;code>lein run&lt;/code>è¿è¡Œè¯¥é¡¹ç›®ï¼Œä½ åº”è¯¥çœ‹åˆ°è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">50.95,6.97 47.37,8.55 43.3,5.37 47.37,8.55 41.9,12.45
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‡å²! ä½ ç¦»æŠ“åˆ°é‚£ä¸ªå·çªƒå‘é…µä¹³çš„äººåˆè¿‘äº†ä¸€æ­¥! ä½¿ç”¨&lt;code>require&lt;/code>æˆåŠŸåŠ è½½äº†&lt;code>the-divine-cheese-code.visualization.svg&lt;/code>ä»¥ä¾›ä½¿ç”¨ã€‚&lt;/p>
&lt;p>&lt;code>require&lt;/code>çš„ç»†èŠ‚å®é™…ä¸Šæœ‰ç‚¹å¤æ‚ï¼Œä½†ä¸ºäº†å®ç”¨ï¼Œä½ å¯ä»¥è®¤ä¸º&lt;code>require&lt;/code>æ˜¯å‘Šè¯‰ Clojure ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;ol>
&lt;li>å¦‚æœä½ å·²ç»ç”¨è¿™ä¸ªç¬¦å·ï¼ˆ&lt;code>the-divine-cheese-code.visualization.svg&lt;/code>ï¼‰è°ƒç”¨äº†&lt;code>require&lt;/code>ï¼Œåˆ™ä¸åšä»»ä½•äº‹æƒ…ã€‚&lt;/li>
&lt;li>å¦åˆ™ï¼Œä½¿ç”¨&lt;a class="link" href="https://www.braveclojure.com/organization/#Anchor-3" target="_blank" rel="noopener"
>&amp;ldquo;æ–‡ä»¶è·¯å¾„å’Œå‘½åç©ºé—´åç§°ä¹‹é—´çš„å…³ç³» &amp;ldquo;ç¬¬ 133 é¡µ&lt;/a>ä¸­æè¿°çš„è§„åˆ™æ‰¾åˆ°ä¸è¯¥ç¬¦å·å¯¹åº”çš„æ–‡ä»¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒClojure æ‰¾åˆ°&lt;code>src/the_divine_cheese_code/visualization/svg.clj&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;p>è¯»å–å¹¶æ±‚å€¼è¯¥æ–‡ä»¶çš„å†…å®¹ã€‚Clojure å¸Œæœ›è¯¥æ–‡ä»¶å£°æ˜ä¸€ä¸ªä¸å®ƒçš„è·¯å¾„ç›¸å¯¹åº”çš„å‘½åç©ºé—´ï¼ˆæˆ‘ä»¬çš„æ–‡ä»¶å°±æ˜¯å¦‚æ­¤ï¼‰ã€‚&lt;/p>
&lt;p>&lt;code>require&lt;/code>ä¹Ÿå¯ä»¥è®©ä½ åœ¨éœ€è¦ä¸€ä¸ªå‘½åç©ºé—´æ—¶ä½¿ç”¨&lt;code>:as&lt;/code>æˆ–&lt;code>alias&lt;/code>æ¥åˆ«åå®ƒã€‚è¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(require &amp;#39;[the-divine-cheese-code.visualization.svg :as svg] )
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“äºè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(require &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(alias &amp;#39;svg &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨åˆ«åçš„å‘½åç©ºé—´äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(svg/points heists)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;50.95,6.97 47.37,8.55 43.3,5.37 47.37,8.55 41.9,12.45&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Clojure æä¾›äº†å¦ä¸€ç§æ·å¾„ã€‚å‡½æ•°&lt;code>use&lt;/code>ä¸éœ€è¦å•ç‹¬è°ƒç”¨&lt;code>require&lt;/code>å’Œ&lt;code>refer&lt;/code>ï¼Œè€Œæ˜¯åŒæ—¶è°ƒç”¨ã€‚åœ¨ç”Ÿäº§ä»£ç ä¸­ä½¿ç”¨&lt;code>use&lt;/code>æ˜¯ä¸å¯å–çš„ï¼Œä½†å½“ä½ åœ¨ REPL ä¸­åšå®éªŒï¼Œæƒ³å¿«é€Ÿè·å¾—ä¸€äº›å‡½æ•°æ—¶ï¼Œå®ƒå°±å¾ˆæ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼Œè¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(require &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(refer &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“äºè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(use &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥ç”¨&lt;code>use&lt;/code>æ¥åˆ«åä¸€ä¸ªå‘½åç©ºé—´ï¼Œå°±åƒä½ å¯ä»¥ç”¨&lt;code>require&lt;/code>ä¸€æ ·ã€‚è¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(require &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(refer &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(alias &amp;#39;svg &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“äºæ¸…å• 6-2 ä¸­çš„ä»£ç ï¼Œå…¶ä¸­ä¹Ÿæ˜¾ç¤ºäº†å‡½æ•°è°ƒç”¨ä¸­ä½¿ç”¨çš„åˆ«åç©ºé—´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(use &amp;#39;[the-divine-cheese-code.visualization.svg :as svg])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(= svg/points points)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(= svg/latlng-&amp;gt;point latlng-&amp;gt;point)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>6-2. æœ‰æ—¶ï¼Œæ—¢ä½¿ç”¨åˆåˆ«åä¸€ä¸ªå‘½åç©ºé—´æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚&lt;/li>
&lt;/ol>
&lt;p>åœ¨è¿™é‡Œç”¨&lt;code>use&lt;/code>åˆ«åå‘½åç©ºé—´ä¼¼ä¹æ˜¯å¤šä½™çš„ï¼Œå› ä¸º&lt;code>use&lt;/code>å·²ç»å¼•ç”¨äº†å‘½åç©ºé—´ï¼ˆè¿™è®©ä½ å¯ä»¥ç®€å•åœ°è°ƒç”¨&lt;code>points&lt;/code>è€Œä¸æ˜¯&lt;code>svg/points&lt;/code>ï¼‰ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¾ˆæ–¹ä¾¿ï¼Œå› ä¸º&lt;code>use&lt;/code>å’Œ&lt;code>refer&lt;/code>æœ‰ç›¸åŒçš„é€‰é¡¹ï¼ˆ&lt;code>:only&lt;/code>, &lt;code>:exclude&lt;/code>, &lt;code>:as&lt;/code>, å’Œ&lt;code>:rename&lt;/code>ï¼‰ã€‚å½“ä½ è·³è¿‡å¼•ç”¨ä¸€ä¸ªç¬¦å·æ—¶ï¼Œä½ å¯èƒ½æƒ³ç”¨&lt;code>use&lt;/code>æ¥åˆ«åä¸€ä¸ªå‘½åç©ºé—´ã€‚ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(require &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(refer &amp;#39;the-divine-cheese-code.visualization.svg :as :only [&amp;#39;point])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨æ¸…å• 6-3 ä¸­çš„&lt;code>use&lt;/code>å½¢å¼ï¼ˆå…¶ä¸­è¿˜åŒ…æ‹¬å¦‚ä½•è°ƒç”¨å‡½æ•°çš„ä¾‹å­ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(use &amp;#39;[the-divine-cheese-code.visualization.svg :as svg :only [points]])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(refer &amp;#39;the-divine-cheese-code.visualization.svg :as :only [&amp;#39;points])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(= svg/points points)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; We can use the alias to reach latlng-&amp;gt;point
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">svg/latlng-&amp;gt;point
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; This doesn&amp;#39;t throw an exception
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; But we can&amp;#39;t use the bare name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">latlng-&amp;gt;point
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; This does throw an exception!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>åœ¨ä½ ä½¿ç”¨ä¸€ä¸ªå‘½åç©ºé—´åå°†å…¶åˆ«ååŒ–ï¼Œå¯ä»¥è®©ä½ å‚è€ƒä½ æ’é™¤çš„ç¬¦å·ã€‚&lt;/li>
&lt;/ol>
&lt;p>å¦‚æœä½ åœ¨ REPL ä¸­å°è¯•æ¸…å• 6-3ï¼Œå¹¶ä¸”&lt;code>latlng-&amp;gt;point&lt;/code>æ²¡æœ‰æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè¿™æ˜¯å› ä¸ºä½ åœ¨æ¸…å• 6-2 ä¸­å¼•ç”¨äº†&lt;code>latlng-&amp;gt;point&lt;/code>ã€‚ä½ éœ€è¦é‡æ–°å¯åŠ¨ä½ çš„ REPL ä¼šè¯ï¼Œä½¿ä»£ç è¡¨ç°å¾—å¦‚æ¸…å• 6-3 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>è¿™é‡Œçš„å¯ç¤ºæ˜¯ï¼Œ&lt;code>require&lt;/code>å’Œ&lt;code>use&lt;/code>åŠ è½½æ–‡ä»¶ï¼Œå¹¶å¯é€‰æ‹©&lt;code>alias&lt;/code>æˆ–&lt;code>refer&lt;/code>å…¶å‘½åç©ºé—´ã€‚å½“ä½ å†™ Clojure ç¨‹åºå’Œé˜…è¯»åˆ«äººå†™çš„ä»£ç æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°æ›´å¤šçš„&lt;code>require'å’Œ&lt;/code>use&amp;rsquo;çš„å†™æ³•ï¼Œè¿™æ—¶ï¼Œé˜…è¯» Clojure çš„ API æ–‡æ¡£ï¼ˆ&lt;em>&lt;a class="link" href="http://clojure.org/libs/" target="_blank" rel="noopener"
>http://clojure.org/libs/&lt;/a>&lt;/em>ï¼‰æ¥äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆæ˜¯æœ‰æ„ä¹‰çš„ã€‚ç„¶è€Œï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ æ‰€å­¦åˆ°çš„å…³äº&lt;code>require&lt;/code>å’Œ&lt;code>use&lt;/code>çš„å†…å®¹åº”è¯¥èƒ½æ»¡è¶³ä½  95.3%çš„éœ€æ±‚ã€‚&lt;/p>
&lt;h3 id="ns-å®">ï¼ƒï¼ƒï¼ƒNS å®&lt;/h3>
&lt;p>ç°åœ¨æ˜¯æ—¶å€™çœ‹çœ‹&lt;code>ns&lt;/code>å®äº†ã€‚åˆ°ç›®å‰ä¸ºæ­¢æ‰€æ¶‰åŠçš„å·¥å…·&amp;ndash;&lt;code>in-ns&lt;/code>, &lt;code>refer&lt;/code>, &lt;code>alias&lt;/code>, &lt;code>require&lt;/code>, å’Œ &lt;code>use&lt;/code>&amp;ndash;æœ€å¸¸åœ¨ä½ ä½¿ç”¨ REPL æ—¶ä½¿ç”¨ã€‚åœ¨ä½ çš„æºä»£ç æ–‡ä»¶ä¸­ï¼Œä½ é€šå¸¸ä¼šä½¿ç”¨&lt;code>ns&lt;/code>å®ï¼Œå› ä¸ºå®ƒå…è®¸ä½ ç®€æ´åœ°ä½¿ç”¨è¿„ä»Šä¸ºæ­¢æè¿°çš„å·¥å…·ï¼Œå¹¶æä¾›å…¶ä»–æœ‰ç”¨çš„åŠŸèƒ½ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†äº†è§£ä¸€ä¸ª&lt;code>ns&lt;/code>è°ƒç”¨å¦‚ä½•ç»“åˆ&lt;code>require&lt;/code>ã€&lt;code>use&lt;/code>ã€&lt;code>in-ns&lt;/code>ã€&lt;code>alias&lt;/code>å’Œ&lt;code>refer&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>ns&lt;/code>åšçš„ä¸€ä¸ªæœ‰ç”¨çš„ä»»åŠ¡æ˜¯é»˜è®¤å¼•ç”¨&lt;code>clojure.core&lt;/code>å‘½åç©ºé—´ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¯ä»¥ä»&lt;code>the-divine-cheese-code.core&lt;/code>ä¸­è°ƒç”¨&lt;code>println&lt;/code>ï¼Œè€Œä¸ä½¿ç”¨å®Œå…¨é™å®šçš„åç§°&lt;code>clojure.core/println&lt;/code>ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥ç”¨&lt;code>:refer-clojure&lt;/code>æ¥æ§åˆ¶ä»&lt;code>clojure-core&lt;/code>å¼•ç”¨çš„å†…å®¹ï¼Œå®ƒçš„é€‰é¡¹ä¸&lt;code>refer&lt;/code>ç›¸åŒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:refer-clojure :exclude [println])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ åœ¨&lt;em>divine_cheese_code.core.clj&lt;/em>çš„å¼€å¤´è°ƒç”¨è¿™ä¸ªï¼Œä¼šç ´åä½ çš„ä»£ç ï¼Œè¿«ä½¿ä½ åœ¨&lt;code>-main'å‡½æ•°ä¸­ä½¿ç”¨&lt;/code>clojure.core/println&amp;rsquo;ã€‚&lt;/p>
&lt;p>åœ¨&lt;code>ns&lt;/code>ä¸­ï¼Œ&lt;code>(:&lt;/code>refer-clojure)`çš„å½¢å¼è¢«ç§°ä¸º&lt;em>reference&lt;/em>ã€‚è¿™å¯¹ä½ æ¥è¯´å¯èƒ½çœ‹èµ·æ¥å¾ˆå¥‡æ€ªã€‚è¿™ä¸ªå¼•ç”¨æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Ÿä¸€ä¸ªå®ï¼Ÿå®ƒæ˜¯ä»€ä¹ˆï¼Ÿä½ å°†åœ¨ç¬¬ 7 ç« ä¸­äº†è§£æ›´å¤šå…³äºåº•å±‚æœºå™¨çš„çŸ¥è¯†ã€‚ç°åœ¨ï¼Œä½ åªéœ€è¦äº†è§£æ¯ä¸ªå¼•ç”¨å¦‚ä½• Map åˆ°å‡½æ•°è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œå‰é¢çš„ä»£ç å°±ç›¸å½“äºè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in-ns &amp;#39;the-divine-cheese-code.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(refer &amp;#39;clojure.core :exclude [&amp;#39;println])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ &amp;ldquo;ns &amp;ldquo;ä¸­ï¼Œæœ‰å…­ç§å¯èƒ½çš„å¼•ç”¨ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>(:refer-clojure)&lt;/code>.&lt;/li>
&lt;li>&amp;ldquo;(:require)&amp;quot;ã€‚&lt;/li>
&lt;li>&lt;code>(:use)&lt;/code>&lt;/li>
&lt;li>&lt;code>(:import)&lt;/code>&lt;/li>
&lt;li>&lt;code>(:load)&lt;/code>&lt;/li>
&lt;li>&lt;code>(:gen-class)&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;code>(:import)&lt;/code>å’Œ&lt;code>(:gen-class)&lt;/code>å°†åœ¨ç¬¬ 12 ç« ä»‹ç»ã€‚æˆ‘å°†ä¸ä»‹ç»&lt;code>(:load)&lt;/code>ï¼Œå› ä¸ºå®ƒå¾ˆå°‘è¢«ä½¿ç”¨ã€‚&lt;/p>
&lt;p>&lt;code>(:require)&lt;/code>çš„å·¥ä½œæ–¹å¼å¾ˆåƒ&lt;code>require&lt;/code>å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:require the-divine-cheese-code.visualization.svg))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“äºè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in-ns &amp;#39;the-divine-cheese-code.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(require &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œåœ¨ &amp;ldquo;ns &amp;ldquo;å½¢å¼ä¸­ï¼ˆä¸ &amp;ldquo;in-ns &amp;ldquo;å‡½æ•°è°ƒç”¨ä¸åŒï¼‰ï¼Œä½ ä¸éœ€è¦ç”¨&amp;rdquo;&amp;lsquo;&amp;lsquo;æ¥å¼•ç”¨ä½ çš„ç¬¦å·ã€‚åœ¨ &amp;ldquo;ns &amp;ldquo;ä¸­ï¼Œä½ ä»æ¥ä¸éœ€è¦å¼•ç”¨ç¬¦å·ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥&lt;code>alias&lt;/code>ä¸€ä¸ªä½ åœ¨&lt;code>ns&lt;/code>å†…&lt;code>require&lt;/code>çš„åº“ï¼Œå°±åƒä½ è°ƒç”¨å‡½æ•°æ—¶ä¸€æ ·ã€‚è¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:require [the-divine-cheese-code.visualization.svg :as svg])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“äºè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in-ns &amp;#39;the-divine-cheese-code.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(require [&amp;#39;the-divine-cheese-code.visualization.svg :as &amp;#39;svg])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥åœ¨ä¸€ä¸ª&lt;code>(:require)&lt;/code>å¼•ç”¨ä¸­è¦æ±‚å¤šä¸ªåº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚Â è¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:require [the-divine-cheese-code.visualization.svg :as svg])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [clojure.java.browse :as browse]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“äºè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in-ns &amp;#39;the-divine-cheese-code.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(require [&amp;#39;the-divine-cheese-code.visualization.svg :as &amp;#39;svg])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(require [&amp;#39;clojure.java.browse :as &amp;#39;browse])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œ&lt;code>(:require)&lt;/code>å¼•ç”¨å’Œ&lt;code>require&lt;/code>å‡½æ•°ä¹‹é—´çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå¼•ç”¨ä¹Ÿå…è®¸ä½ å¼•ç”¨åå­—ã€‚è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:require [the-divine-cheese-code.visualization.svg :refer [point]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“äºè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in-ns &amp;#39;the-divine-cheese-code.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(require &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(refer &amp;#39;the-divine-cheese-code.visualization.svg :only [&amp;#39;point])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥å¼•ç”¨æ‰€æœ‰çš„ç¬¦å·ï¼ˆæ³¨æ„&lt;code>:all&lt;/code>å…³é”®å­—ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:require [the-divine-cheese-code.visualization.svg :refer :all]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±ç›¸å½“äºè¿™æ ·åšäº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in-ns &amp;#39;the-divine-cheese-code.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(require &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(refer &amp;#39;the-divine-cheese-code.visualization.svg)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ˜¯è¦æ±‚ä»£ç ã€åˆ«åå‘½åç©ºé—´å’Œå¼•ç”¨ç¬¦å·çš„é¦–é€‰æ–¹å¼ã€‚å»ºè®®ä½ ä¸è¦ä½¿ç”¨&lt;code>(:use)&lt;/code>ï¼Œä½†ç”±äºä½ å¾ˆå¯èƒ½ä¼šé‡åˆ°å®ƒï¼Œæ‰€ä»¥çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„å¾ˆå¥½ã€‚ä½ çŸ¥é“è¯¥æ€ä¹ˆåšã€‚è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:use clojure.java.browse))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·åšã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in-ns &amp;#39;the-divine-cheese-code.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(use &amp;#39;clojure.java.browse)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€Œè¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:use [clojure.java browse io])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·åšã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in-ns &amp;#39;the-divine-cheese-code.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(use &amp;#39;clojure.java.browse)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(use &amp;#39;clojure.java.io)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œå½“ä½ åœ¨&lt;code>:use&lt;/code>åé¢åŠ ä¸Šä¸€ä¸ª Vector æ—¶ï¼Œå®ƒæŠŠç¬¬ä¸€ä¸ªç¬¦å·ä½œä¸º&lt;em>base&lt;/em>ï¼Œç„¶åç”¨åé¢çš„æ¯ä¸ªç¬¦å·è°ƒç”¨&lt;code>use&lt;/code>ã€‚&lt;/p>
&lt;p>å“¦ï¼Œæˆ‘çš„å¤©å“ªï¼Œå°±æ˜¯è¿™æ ·! ç°åœ¨ä½ å¯ä»¥åƒä¸“å®¶ä¸€æ ·ä½¿ç”¨&lt;code>ns&lt;/code>äº†! ä½ éœ€è¦è¿™æ ·åšï¼Œè¯¥æ­»çš„ï¼Œå› ä¸ºé‚£ä¸ª&lt;em>voleur des fromages&lt;/em>ï¼ˆä»–ä»¬å¯èƒ½åœ¨æ³•è¯­ä¸­è¿™æ ·è¯´ï¼‰ä»ç„¶åœ¨è‚†æ„å¦„ä¸ºã€‚è¿˜è®°å¾—ä»–/å¥¹å—ï¼Ÿ&lt;/p>
&lt;p>âˆ®âˆ®æŠ“å°å·&lt;/p>
&lt;p>æˆ‘ä»¬ä¸èƒ½è®©è¿™ä¸ªæ å¤ºå¸•å°”é©¬å¹²é…ªçš„äººå¸¦ç€æ›´å¤šçš„å¹²é…ªç¦»å¼€ï¼æ˜¯æ—¶å€™å®Œæˆæ ¹æ®åæ ‡ç”»çº¿çš„å·¥ä½œäº†ã€‚ç°åœ¨æ˜¯æ—¶å€™æ ¹æ®ç›—çªƒæ¡ˆçš„åæ ‡æ¥å®Œæˆç”»çº¿äº†ï¼è¿™è‚¯å®šä¼šå‘ç°ä¸€äº›é—®é¢˜ã€‚è¿™è‚¯å®šä¼šå‘ç°ä¸€äº›é—®é¢˜!&lt;/p>
&lt;p>ä½¿ç”¨æ¯ä¸ªæŠ¢åŠ«æ¡ˆçš„çº¬åº¦åæ ‡ï¼Œä½ å°†åœ¨ä¸€ä¸ª SVG å›¾åƒä¸­è¿æ¥è¿™äº›ç‚¹ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ç”¨ç»™å®šçš„åæ ‡ç”»çº¿ï¼Œç»“æœçœ‹èµ·æ¥å°±ä¸å¯¹äº†ï¼ŒåŸå› æœ‰äºŒã€‚é¦–å…ˆï¼Œçº¬åº¦åæ ‡æ˜¯ç”±å—å‘åŒ—ä¸Šå‡çš„ï¼Œè€Œ SVG çš„ Y åæ ‡æ˜¯ç”±ä¸Šå‘ä¸‹ä¸Šå‡çš„ã€‚æ¢å¥è¯è¯´ï¼Œä½ éœ€è¦ç¿»è½¬åæ ‡ï¼Œå¦åˆ™ç»˜å›¾å°±ä¼šé¢ å€’è¿‡æ¥ã€‚&lt;/p>
&lt;p>ç¬¬äºŒï¼Œç»˜å›¾ä¼šéå¸¸å°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å°†é€šè¿‡å¹³ç§»å’Œç¼©æ”¾æ¥æ”¾å¤§å®ƒã€‚è¿™å°±åƒæŠŠä¸€å¼ çœ‹èµ·æ¥åƒå›¾ 6-1a çš„å›¾å˜æˆå›¾ 6-1bã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/organization/svg-before.png"
loading="lazy"
>
&lt;img src="https://www.braveclojure.com/assets/images/cftbat/organization/svg-after.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 6-1ï¼šé€šè¿‡ç¿»è½¬ã€å¹³ç§»å’Œç¼©æ”¾çº¬åº¦åæ ‡æ¥åˆ¶ä½œä¸€å¼  SVG å›¾ç‰‡ã€‚&lt;/p>
&lt;p>è¯´å®è¯ï¼Œè¿™äº›éƒ½æ˜¯å®Œå…¨éšæ„çš„ï¼Œå®ƒå·²ç»ä¸ä»£ç ç»„ç»‡æ²¡æœ‰ç›´æ¥å…³ç³»äº†ï¼Œä½†æ˜¯å®ƒå¾ˆæœ‰è¶£ï¼Œæˆ‘æƒ³ä½ ä¼šæœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ—¶é—´æ¥æµè§ˆè¿™äº›ä»£ç çš„ ä½¿ä½ çš„&lt;em>svg.clj&lt;/em>æ–‡ä»¶ä¸æ¸…å• 6-4 ä¸€è‡´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.visualization.svg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:require [clojure.string :as s])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:refer-clojure :exclude [min max])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ ï¼ˆdefn comparator-over-maps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [æ¯”è¾ƒ-fn ksï¼½
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [maps]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (zipmap ks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (map (fn [k] (apply comparison-fn (map k maps)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ks))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â (def min (comparator-over-maps clojure.core/min [:lat :lng])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def max (comparator-over-maps clojure.core/max [:lat :lng]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>6-3. æ„å»º Map æ¯”è¾ƒå‡½æ•°&lt;/li>
&lt;/ol>
&lt;p>ä½ åœ¨âŠå¤„å®šä¹‰äº†&lt;code>comparator-over-maps&lt;/code>å‡½æ•°ã€‚è¿™å¯èƒ½æ˜¯æœ€æ£˜æ‰‹çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥è¯·å¿å—ä¸€ä¸‹ã€‚Â &lt;code>comparator-over-maps&lt;/code>æ˜¯ä¸€ä¸ªè¿”å›ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚è¿”å›çš„å‡½æ•°ä½¿ç”¨æ‰€æä¾›çš„æ¯”è¾ƒå‡½æ•°&lt;code>comparison-fn&lt;/code>å¯¹å‚æ•°&lt;code>ks&lt;/code>æä¾›çš„é”®å€¼è¿›è¡Œæ¯”è¾ƒã€‚&lt;/p>
&lt;p>ä½ ä½¿ç”¨&lt;code>comparator-over-map&lt;/code>æ¥æ„é€ &lt;code>min&lt;/code>å’Œ&lt;code>max&lt;/code>å‡½æ•°âï¼Œä½ å°†ç”¨å®ƒä»¬æ¥å¯»æ‰¾æˆ‘ä»¬å›¾å½¢çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’ã€‚ä¸‹é¢æ˜¯`min&amp;rsquo;çš„æ“ä½œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(min [{:a 1 :b 3} {:a 5 :b 0}] )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:a 1 :b 0}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ä½ è°ƒç”¨&lt;code>min&lt;/code>æ—¶ï¼Œå®ƒè°ƒç”¨&lt;code>zipmap&lt;/code>ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯ seqï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ mapã€‚ç¬¬ä¸€ä¸ªåºåˆ—çš„å…ƒç´ æˆä¸ºé”®ï¼Œç¬¬äºŒä¸ªåºåˆ—çš„å…ƒç´ æˆä¸ºå€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(zipmap [:a :b] [1 2])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:a 1 :b 2}ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ ï¼Œ&lt;code>zipmap&lt;/code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯&lt;code>ks&lt;/code>ï¼Œæ‰€ä»¥&lt;code>ks&lt;/code>çš„å…ƒç´ å°†æ˜¯è¿”å› Map çš„é”®ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯åœ¨âŒçš„ Map è°ƒç”¨çš„ç»“æœã€‚é‚£ä¸ª Map è°ƒç”¨å®é™…ä¸Šæ˜¯åœ¨è¿›è¡Œæ¯”è¾ƒã€‚&lt;/p>
&lt;p>æœ€åï¼Œåœ¨âï¼Œä½ ä½¿ç”¨&lt;code>comparator-over-maps&lt;/code>æ¥åˆ›å»ºæ¯”è¾ƒå‡½æ•°ã€‚å¦‚æœä½ æŠŠå›¾çº¸çœ‹ä½œæ˜¯åˆ»åœ¨ä¸€ä¸ªçŸ©å½¢é‡Œï¼Œé‚£ä¹ˆ&lt;code>min&lt;/code>æ˜¯çŸ©å½¢ä¸­æœ€æ¥è¿‘ï¼ˆ0ï¼Œ0ï¼‰çš„è§’ï¼Œ&lt;code>max&lt;/code>æ˜¯ç¦»å®ƒæœ€è¿œçš„è§’ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä»£ç çš„ä¸‹ä¸€éƒ¨åˆ†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> (defn translate-to-00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [locations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [mincoords (min locations)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map #(merge-with - % mincoords) locations)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (defn scale
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [width height locations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [maxcoords (max locations)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ratio {:lat (/ height (:lat maxcoords))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng (/ width (:lng maxcoords))}]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map #(merge-with * % ratio) locations)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>translate-to-00&lt;/code>ï¼Œå®šä¹‰åœ¨ ï¼Œå·¥ä½œåŸç†æ˜¯æ‰¾åˆ°æˆ‘ä»¬ä½ç½®çš„&lt;code>min'ï¼Œç„¶åä»æ¯ä¸ªä½ç½®å‡å»è¿™ä¸ªå€¼ã€‚å®ƒä½¿ç”¨&lt;/code>merge-with`ï¼Œå…¶å·¥ä½œåŸç†å¦‚ä¸‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(merge-with - {:lat 50 :lng 10} {:lat 5 :lng 5})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:lat 45 :lng 5}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæˆ‘ä»¬å®šä¹‰å‡½æ•°&lt;code>scale&lt;/code>ï¼Œå®ƒå°†æ¯ä¸ªç‚¹ä¹˜ä»¥æœ€å¤§ç»çº¬åº¦ä¸æ‰€éœ€é«˜åº¦å’Œå®½åº¦ä¹‹é—´çš„æ¯”ç‡ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯&lt;em>svg.clj&lt;/em>çš„å…¶ä½™ä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn latlng-&amp;gt;point
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Convert lat/lng map to comma-separated string&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [latlng]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str (:lat latlng) &amp;#34;,&amp;#34; (:lng latlng)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn points
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Given a seq of lat/lng maps, return string of points joined by space&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [locations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (s/join &amp;#34; &amp;#34; (map latlng-&amp;gt;point locations)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn line
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [points]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;&amp;lt;polyline points=\&amp;#34;&amp;#34; points &amp;#34;\&amp;#34; /&amp;gt;&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn transform
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Just chains other functions&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [width height locations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (-&amp;gt;&amp;gt; locations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> translate-to-00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (scale width height)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;svg &amp;#39;template&amp;#39;, which also flips the coordinate system&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [width height locations]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;&amp;lt;svg height=\&amp;#34;&amp;#34; height &amp;#34;\&amp;#34; width=\&amp;#34;&amp;#34; width &amp;#34;\&amp;#34;&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ;; These two &amp;lt;g&amp;gt; tags change the coordinate system so that
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ;; 0,0 is in the lower-left corner, instead of SVG&amp;#39;s default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ;; upper-left corner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;&amp;lt;g transform=\&amp;#34;translate(0,&amp;#34; height &amp;#34;)\&amp;#34;&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;&amp;lt;g transform=\&amp;#34;rotate(-90)\&amp;#34;&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (-&amp;gt; (transform width height locations)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> points
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> line)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;&amp;lt;/g&amp;gt;&amp;lt;/g&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;&amp;lt;/svg&amp;gt;&amp;#34;))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œçš„å‡½æ•°éå¸¸ç®€å•æ˜äº†ã€‚å®ƒä»¬åªæ˜¯æ¥æ”¶&lt;code>{:lat x :lng y}&lt;/code>Mapï¼Œå¹¶å¯¹å…¶è¿›è¡Œè½¬æ¢ï¼Œä»¥ä¾¿åˆ›å»ºä¸€ä¸ª SVGã€‚&lt;code>latlng-&amp;gt;point&lt;/code>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ç”¨äºåœ¨ SVG æ ‡è®°ä¸­å®šä¹‰ä¸€ä¸ªç‚¹ã€‚&lt;code>points&lt;/code>å°†&lt;code>lat&lt;/code>/&lt;code>lng&lt;/code>Map çš„åºåˆ—è½¬æ¢ä¸ºä¸€ä¸ªä»¥ç©ºæ ¼åˆ†éš”çš„ç‚¹çš„å­—ç¬¦ä¸²ã€‚Â &lt;code>line&lt;/code>è¿”å›è¿æ¥æ‰€æœ‰ç»™å®šç©ºé—´åˆ†éš”çš„ç‚¹å­—ç¬¦ä¸²çš„ SVG æ ‡è®°ã€‚Â &lt;code>transform&lt;/code>æ¥æ”¶ä¸€ä¸ªä½ç½®åºåˆ—ï¼Œå°†å®ƒä»¬ç¿»è¯‘æˆä»(0, 0)å¼€å§‹çš„ç‚¹ï¼Œå¹¶å°†å®ƒä»¬ç¼©æ”¾åˆ°ç»™å®šçš„å®½åº¦å’Œé«˜åº¦ã€‚æœ€åï¼Œ&lt;code>xml&lt;/code>äº§ç”Ÿæ ‡è®°ï¼Œç”¨ SVG æ˜¾ç¤ºç»™å®šçš„ä½ç½®ã€‚&lt;/p>
&lt;p>æœ‰äº†&lt;em>svg.clj&lt;/em>çš„æ‰€æœ‰ä»£ç ï¼Œç°åœ¨è®©&lt;em>core.clj&lt;/em>çœ‹èµ·æ¥åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns the-divine-cheese-code.core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:require [clojure.java.browse :as browse]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [the-divine-cheese-code.visualization.svg :refer [xml]])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (:gen-class))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def heists [{:location &amp;#34;Cologne, Germany&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;Archbishop Hildebold&amp;#39;s Cheese Pretzel&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 50.95
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 6.97}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:location &amp;#34;Zurich, Switzerland&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;The Standard Emmental&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 47.37
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 8.55}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:location &amp;#34;Marseille, France&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;Le Fromage de Cosquer&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 43.30
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 5.37}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:location &amp;#34;Zurich, Switzerland&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;The Lesser Emmental&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 47.37
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 8.55}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:location &amp;#34;Vatican City&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :cheese-name &amp;#34;The Cheese of Turin&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lat 41.90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :lng 12.45}])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn url
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [filename]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;file:///&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (System/getProperty &amp;#34;user.dir&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;/&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filename))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [contents]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;&amp;lt;style&amp;gt;polyline { fill:none; stroke:#5881d8; stroke-width:3}&amp;lt;/style&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> contents))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn -main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;amp; args]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [filename &amp;#34;map.html&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (-&amp;gt;&amp;gt; heists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (xml 50 100)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (spit filename))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (browse/browse-url (url filename))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæ²¡æœ‰å¤ªå¤æ‚çš„äº‹æƒ…å‘ç”Ÿã€‚åœ¨ &amp;ldquo;main &amp;ldquo;ä¸­ï¼Œä½ ä½¿ç”¨ &amp;ldquo;xml &amp;ldquo;å’Œ &amp;ldquo;template &amp;ldquo;å‡½æ•°å»ºç«‹ç»˜å›¾ï¼Œç”¨ &amp;ldquo;spit &amp;ldquo;å°†ç»˜å›¾å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åç”¨ &amp;ldquo;browse/browse-url &amp;ldquo;æ‰“å¼€å®ƒã€‚ä½ ç°åœ¨åº”è¯¥è¯•è¯•! è¿è¡Œ&lt;code>lein run&lt;/code>ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼å›¾ 6-2 çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;p>å›¾ 6-2: æŠ¢åŠ«æ¨¡å¼çš„æœ€ç»ˆ SVG!&lt;/p>
&lt;p>ç­‰ä¸€ä¸‹ â€¦â€¦è¿™çœ‹èµ·æ¥å¾ˆåƒ â€¦â€¦è¿™çœ‹èµ·æ¥å¾ˆåƒä¸€ä¸ª lambdaã€‚Clojure çš„æ ‡å¿—æ˜¯ä¸€ä¸ª lambda . â€¦â€¦å“¦ï¼Œæˆ‘çš„å¤©å•Š! Clojureï¼Œä¸€ç›´ä»¥æ¥éƒ½æ˜¯ä½ !&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>åœ¨æœ¬ç« ä¸­ä½ å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥æ‹¥æœ‰æ‰€æœ‰ä½ éœ€è¦çš„å·¥å…·æ¥å¼€å§‹ç»„ç»‡ä½ çš„é¡¹ç›®ã€‚ä½ ç°åœ¨çŸ¥é“å‘½åç©ºé—´ç»„ç»‡äº†ç¬¦å·å’Œ vars ä¹‹é—´çš„ Mapï¼Œvars æ˜¯å¯¹ Clojure å¯¹è±¡ï¼ˆæ•°æ®ç»“æ„ã€å‡½æ•°ç­‰ï¼‰çš„å¼•ç”¨ã€‚Â &lt;code>def&lt;/code>å­˜å‚¨ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ç”¨ç¬¦å·å’ŒæŒ‡å‘è¯¥å¯¹è±¡çš„ var ä¹‹é—´çš„ Map æ¥æ›´æ–°å½“å‰å‘½åç©ºé—´ã€‚ä½ å¯ä»¥ç”¨&lt;code>defn-&lt;/code>åˆ›å»ºç§æœ‰å‡½æ•°ã€‚&lt;/p>
&lt;p>Clojure å…è®¸ä½ ç”¨&lt;code>create-ns&lt;/code>åˆ›å»ºå‘½åç©ºé—´ï¼Œä½†é€šå¸¸ä½¿ç”¨&lt;code>in-ns&lt;/code>æ›´æœ‰ç”¨ï¼Œå®ƒä¹Ÿä¼šåˆ‡æ¢åˆ°å‘½åç©ºé—´ã€‚ä½ å¯èƒ½åªåœ¨ REPL ä¸­ä½¿ç”¨è¿™äº›å‡½æ•°ã€‚å½“ä½ åœ¨ REPL ä¸­æ—¶ï¼Œä½ æ€»æ˜¯&lt;em>åœ¨&lt;/em>å½“å‰å‘½åç©ºé—´ä¸­ã€‚å½“ä½ åœ¨æ–‡ä»¶ä¸­è€Œä¸æ˜¯åœ¨ REPL ä¸­å®šä¹‰åå­—ç©ºé—´æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨ &lt;code>ns&lt;/code> å®ï¼Œåå­—ç©ºé—´å’Œå®ƒåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„ä¹‹é—´æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨å®Œå…¨é™å®šçš„åç§°æ¥å¼•ç”¨å…¶ä»–å‘½åç©ºé—´ä¸­çš„å¯¹è±¡ï¼Œå¦‚&lt;code>cheese.taxonomy/cheddars&lt;/code>ã€‚Â &lt;code>refer&lt;/code>å¯ä»¥è®©ä½ ä½¿ç”¨å…¶ä»–å‘½åç©ºé—´çš„åå­—ï¼Œè€Œä¸éœ€è¦å®Œå…¨é™å®šå®ƒä»¬ï¼Œ&lt;code>alias&lt;/code>å¯ä»¥è®©ä½ åœ¨å†™å‡ºå®Œå…¨é™å®šçš„åå­—æ—¶ï¼Œä½¿ç”¨ä¸€ä¸ªæ›´çŸ­çš„åå­—æ¥å‘½åç©ºé—´ã€‚&lt;/p>
&lt;p>&lt;code>require&lt;/code>å’Œ&lt;code>use&lt;/code>ç¡®ä¿ä¸€ä¸ªåå­—ç©ºé—´çš„å­˜åœ¨å¹¶å‡†å¤‡å¥½è¢«ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©è®©ä½ &lt;code>refer&lt;/code>å’Œ&lt;code>alias&lt;/code>ç›¸åº”çš„åå­—ç©ºé—´ã€‚ä½ åº”è¯¥ä½¿ç”¨&lt;code>ns&lt;/code>åœ¨ä½ çš„æºæ–‡ä»¶ä¸­è°ƒç”¨&lt;code>require&lt;/code>å’Œ&lt;code>use&lt;/code>ã€‚*&lt;a class="link" href="https://gist.github.com/ghoseb/287710/" target="_blank" rel="noopener"
>Clojure ns syntax cheat-sheet - GitHub&lt;/a>*æ˜¯ä½¿ç”¨&lt;code>ns&lt;/code>çš„æ‰€æœ‰å˜åŒ–çš„ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒã€‚&lt;/p>
&lt;p>æœ€åï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œåšä¸€ä¸ªä¿—æ°”çš„äººå¹¶ä¸å®¹æ˜“ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/organization/cheese.png"
loading="lazy"
>&lt;/p></description></item><item><title>Chapter5 å‡½æ•°å¼ç¼–ç¨‹</title><link>https://example.com/p/chapter5-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/</link><pubDate>Fri, 14 Jan 2022 10:00:07 +0800</pubDate><guid>https://example.com/p/chapter5-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/</guid><description>&lt;h1 id="å‡½æ•°å¼ç¼–ç¨‹">å‡½æ•°å¼ç¼–ç¨‹&lt;/h1>
&lt;p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»ä¸“æ³¨äºç†Ÿæ‚‰ Clojure æä¾›çš„å·¥å…·ï¼šä¸å¯å˜çš„æ•°æ®ç»“æ„ã€å‡½æ•°ã€æŠ½è±¡ï¼Œç­‰ç­‰ã€‚åœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•æ€è€ƒä½ çš„ç¼–ç¨‹ä»»åŠ¡ï¼Œä»¥æœ€å¥½çš„æ–¹å¼åˆ©ç”¨è¿™äº›å·¥å…·ã€‚ä½ å°†å¼€å§‹æŠŠä½ çš„ç»éªŒæ•´åˆåˆ°ä¸€ä¸ªæ–°çš„å‡½æ•°å¼ç¼–ç¨‹æ€ç»´ä¸­ã€‚&lt;/p>
&lt;p>ä½ å°†å­¦åˆ°çš„æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬ï¼šä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Œä¸ºä»€ä¹ˆå®ƒä»¬å¾ˆæœ‰ç”¨ï¼›å¦‚ä½•ä½¿ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆå®ƒä»¬æ¯”å¯å˜çš„è¡¨äº²æ›´æœ‰ä¼˜åŠ¿ï¼›å¦‚ä½•å°†æ•°æ®å’Œå‡½æ•°åˆ†å¼€ï¼Œç»™ä½ å¸¦æ¥æ›´å¤šçš„åŠ›é‡å’Œçµæ´»æ€§ï¼›ä»¥åŠä¸ºä»€ä¹ˆå¯¹ä¸€å°éƒ¨åˆ†æ•°æ®æŠ½è±¡è¿›è¡Œç¼–ç¨‹ä¼šå¾ˆå¼ºå¤§ã€‚ä¸€æ—¦ä½ æŠŠæ‰€æœ‰è¿™äº›çŸ¥è¯†å¡è¿›ä½ çš„å¤§è„‘ï¼Œä½ å°±ä¼šæœ‰ä¸€ä¸ªå…¨æ–°çš„è§£å†³é—®é¢˜çš„æ–¹æ³•&lt;/p>
&lt;p>åœ¨å­¦ä¹ äº†è¿™äº›ä¸»é¢˜ä¹‹åï¼Œä½ å°†é€šè¿‡ç¼–å†™ä¸€ä¸ªåŸºäºç»ˆç«¯çš„æ¸¸æˆæ¥è¿ç”¨ä½ æ‰€å­¦åˆ°çš„ä¸€åˆ‡ï¼Œè¿™ä¸ªæ¸¸æˆçš„çµæ„Ÿæ¥è‡ªäºç¾å›½å„åœ° Cracker Barrel é¤é¦†ä¸­çš„ä¸€ç§å¤è€è€Œç¥ç§˜çš„æ€ç»´è®­ç»ƒè£…ç½®ã€‚Peg Thing!&lt;/p>
&lt;h2 id="çº¯å‡½æ•°æ˜¯ä»€ä¹ˆå’Œä¸ºä»€ä¹ˆ">çº¯å‡½æ•°ï¼šæ˜¯ä»€ä¹ˆå’Œä¸ºä»€ä¹ˆ&lt;/h2>
&lt;p>é™¤äº† &amp;ldquo;println &amp;ldquo;å’Œ &amp;ldquo;rand&amp;rdquo;ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ æ‰€ä½¿ç”¨çš„æ‰€æœ‰å‡½æ•°éƒ½æ˜¯çº¯å‡½æ•°ã€‚æ˜¯ä»€ä¹ˆä½¿å®ƒä»¬æˆä¸ºçº¯å‡½æ•°ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Ÿå¦‚æœä¸€ä¸ªå‡½æ•°ç¬¦åˆä¸¤ä¸ªæ¡ä»¶ï¼Œå®ƒå°±æ˜¯çº¯å‡½æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>å¦‚æœç»™å‡ºç›¸åŒçš„å‚æ•°ï¼Œå®ƒæ€»æ˜¯è¿”å›ç›¸åŒçš„ç»“æœã€‚è¿™è¢«ç§°ä¸º&lt;em>å¼•ç”¨é€æ˜åº¦&lt;/em>ï¼Œä½ å¯ä»¥æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„ 5 ç¾å…ƒç¼–ç¨‹æœ¯è¯­åˆ—è¡¨ä¸­ã€‚&lt;/li>
&lt;li>å®ƒä¸èƒ½å¼•èµ·ä»»ä½•å‰¯ä½œç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥å‡½æ•°ä¸èƒ½åšå‡ºä»»ä½•åœ¨å‡½æ•°æœ¬èº«ä¹‹å¤–å¯ä»¥è§‚å¯Ÿåˆ°çš„æ”¹å˜&amp;ndash;ä¾‹å¦‚ï¼Œé€šè¿‡æ”¹å˜ä¸€ä¸ªå¤–éƒ¨å¯è®¿é—®çš„å¯æ”¹å˜å¯¹è±¡æˆ–å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™äº›ç‰¹æ€§ä½¿ä½ æ›´å®¹æ˜“æ¨ç†ä½ çš„ç¨‹åºï¼Œå› ä¸ºè¿™äº›å‡½æ•°æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œæ— æ³•å½±å“ä½ ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ã€‚å½“ä½ ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œä½ ä¸å¿…é—®è‡ªå·±ï¼Œ&amp;ldquo;æˆ‘è°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼šç ´åä»€ä¹ˆï¼Ÿ&amp;rdquo; å®ƒä»¬ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼šä½ æ°¸è¿œä¸éœ€è¦ææ¸…æ¥šä¸ºä»€ä¹ˆç»™ä¸€ä¸ªå‡½æ•°ä¼ é€’ç›¸åŒçš„å‚æ•°ä¼šå¯¼è‡´ä¸åŒçš„è¿”å›å€¼ï¼Œå› ä¸ºè¿™æ°¸è¿œä¸ä¼šå‘ç”Ÿã€‚&lt;/p>
&lt;p>çº¯å‡½æ•°å’Œç®—æœ¯ä¸€æ ·ç¨³å®šï¼Œæ²¡æœ‰é—®é¢˜ï¼ˆä½ æœ€åä¸€æ¬¡ä¸ºä¸¤ä¸ªæ•°å­—ç›¸åŠ è€Œçƒ¦æ¼æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿï¼‰ å®ƒä»¬æ˜¯å·¨å¤§çš„å‡½æ•°å°ç –å—ï¼Œä½ å¯ä»¥è‡ªä¿¡åœ°å°†å…¶ä½œä¸ºä½ ç¨‹åºçš„åŸºç¡€ã€‚è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°çœ‹çœ‹å¼•ç”¨é€æ˜æ€§å’Œæ— å‰¯ä½œç”¨ï¼Œçœ‹çœ‹å®ƒä»¬åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å‘æŒ¥ä½œç”¨çš„ã€‚&lt;/p>
&lt;h3 id="çº¯å‡½æ•°æ˜¯å¼•ç”¨é€æ˜çš„">çº¯å‡½æ•°æ˜¯å¼•ç”¨é€æ˜çš„&lt;/h3>
&lt;p>ä¸ºäº†åœ¨è°ƒç”¨ç›¸åŒå‚æ•°æ—¶è¿”å›ç›¸åŒçš„ç»“æœï¼Œçº¯å‡½æ•°åªä¾é  1ï¼‰è‡ªå·±çš„å‚æ•°å’Œ 2ï¼‰ä¸å¯å˜çš„å€¼æ¥å†³å®šå…¶è¿”å›å€¼ã€‚ä¾‹å¦‚ï¼Œæ•°å­¦å‡½æ•°æ˜¯å¼•ç”¨é€æ˜çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä¸€ä¸ªå‡½æ•°ä¾èµ–äºä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å¼•ç”¨é€æ˜çš„ã€‚å­—ç¬¦ä¸²`&amp;rdquo;, Daniel-san &amp;ldquo;æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥ä¸‹é¢çš„å‡½æ•°ä¹Ÿæ˜¯å¼•ç”¨é€æ˜çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">wisdom&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">words&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">str &lt;/span>&lt;span class="nv">words&lt;/span> &lt;span class="s">&amp;#34;, Daniel-san&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">wisdom&lt;/span> &lt;span class="s">&amp;#34;Always bathe on Fridays&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;Always bathe on Fridays, Daniel-san&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸‹é¢çš„å‡½æ•°åœ¨ç›¸åŒçš„å‚æ•°ä¸‹ä¸ä¼šäº§ç”Ÿç›¸åŒçš„ç»“æœï¼›å› æ­¤ï¼Œå®ƒä»¬åœ¨æŒ‡ç§°ä¸Šæ˜¯ä¸é€æ˜çš„ã€‚ä»»ä½•ä¾èµ–éšæœºæ•°ç”Ÿæˆå™¨çš„å‡½æ•°éƒ½ä¸å¯èƒ½æ˜¯æŒ‡ç§°é€æ˜çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">year-end-evaluation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">&amp;gt; &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">rand&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;You get a raise!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Better luck next year!&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ çš„å‡½æ•°ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å‡ºï¼Œå®ƒå°±ä¸æ˜¯å¼•ç”¨é€æ˜çš„ï¼Œå› ä¸ºæ–‡ä»¶çš„å†…å®¹å¯ä»¥æ”¹å˜ã€‚ä¸‹é¢çš„å‡½æ•°&lt;code>analyze-file&lt;/code>ä¸æ˜¯å¼•ç”¨é€æ˜çš„ï¼Œä½†å‡½æ•°&lt;code>analysis&lt;/code>æ˜¯é€æ˜çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">analyze-file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">filename&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">analysis&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">slurp &lt;/span>&lt;span class="nv">filename&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">analysis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">text&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">str &lt;/span>&lt;span class="s">&amp;#34;Character count: &amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">count &lt;/span>&lt;span class="nv">text&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ä½¿ç”¨ä¸€ä¸ªå¼•ç”¨é€æ˜çš„å‡½æ•°æ—¶ï¼Œä½ æ°¸è¿œä¸å¿…è€ƒè™‘å“ªäº›å¯èƒ½çš„å¤–éƒ¨æ¡ä»¶ä¼šå½±å“å‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚æœä½ çš„å‡½æ•°åœ¨å¤šä¸ªåœ°æ–¹è¢«ä½¿ç”¨ï¼Œæˆ–è€…å®ƒè¢«æ·±æ·±åœ°åµŒå¥—åœ¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨é“¾ä¸­ï¼Œè¿™ä¸€ç‚¹å°±ç‰¹åˆ«é‡è¦ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é«˜æ•æ— å¿§åœ°çŸ¥é“ï¼Œå¤–éƒ¨æ¡ä»¶çš„å˜åŒ–ä¸ä¼šå¯¼è‡´ä½ çš„ä»£ç ä¸­æ–­ã€‚&lt;/p>
&lt;p>å¦ä¸€ç§æ€è€ƒæ–¹å¼æ˜¯ï¼Œç°å®åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å¼•ç”¨é€æ˜çš„ã€‚å¦‚æœä½ æŠŠé‡åŠ›çœ‹ä½œä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¼•åŠ›å°±æ˜¯åœ¨ä¸¤ä¸ªç‰©ä½“ä¸Šè°ƒç”¨è¯¥å‡½æ•°çš„è¿”å›å€¼ã€‚å› æ­¤ï¼Œå½“ä½ ä¸‹æ¬¡å‚åŠ ç¼–ç¨‹é¢è¯•æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡æŠŠé¢è¯•å®˜æ¡Œä¸Šçš„ä¸œè¥¿æ‰“æ‰æ¥è¯æ˜ä½ çš„å‡½æ•°å¼ç¼–ç¨‹çŸ¥è¯†ï¼ˆè¿™ä¹Ÿè¯æ˜ä½ çŸ¥é“å¦‚ä½•åœ¨ä¸€ä¸ªé›†åˆä¸Šåº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼‰ã€‚&lt;/p>
&lt;h3 id="çº¯å‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨">çº¯å‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨&lt;/h3>
&lt;p>æ‰§è¡Œå‰¯ä½œç”¨å°±æ˜¯åœ¨ä¸€ä¸ªç»™å®šçš„èŒƒå›´å†…æ”¹å˜ä¸€ä¸ªåå­—å’Œå®ƒçš„å€¼ä¹‹é—´çš„å…³è”ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª JavaScript çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="k">var &lt;/span>&lt;span class="nv">haplessObject&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">emotion&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="s">&amp;#34;Carefree!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var &lt;/span>&lt;span class="nv">evilMutator&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="nv">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">object&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">object.emotion&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="s">&amp;#34;So emo :&amp;#39;(&amp;#34;&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">evilMutator&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">haplessObject&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">haplessObject.emotion&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">//&lt;/span> &lt;span class="nv">=&amp;gt;&lt;/span> &lt;span class="s">&amp;#34;So emo :&amp;#39;(&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶ï¼Œä½ çš„ç¨‹åºå¿…é¡»è¦æœ‰ä¸€äº›å‰¯ä½œç”¨ã€‚å®ƒå†™å…¥ç£ç›˜ï¼Œæ”¹å˜äº†æ–‡ä»¶åå’Œç£ç›˜æ‰‡åŒºé›†åˆä¹‹é—´çš„å…³è”ï¼›å®ƒæ”¹å˜äº†æ˜¾ç¤ºå™¨åƒç´ çš„ RGB å€¼ï¼›ç­‰ç­‰ã€‚å¦åˆ™ï¼Œè¿è¡Œå®ƒå°±æ²¡æœ‰æ„ä¹‰äº†ã€‚&lt;/p>
&lt;p>ç„¶è€Œï¼Œå‰¯ä½œç”¨æ˜¯æ½œåœ¨çš„æœ‰å®³çš„ï¼Œå› ä¸ºå®ƒä»¬å¸¦æ¥äº†å…³äºä½ çš„ä»£ç ä¸­çš„åç§°æ‰€æŒ‡çš„ä¸ç¡®å®šæ€§ã€‚è¿™å°±å¯¼è‡´äº†å¾ˆéš¾è¿½è¸ªä¸ºä»€ä¹ˆä»¥åŠå¦‚ä½•å°†ä¸€ä¸ªåå­—ä¸ä¸€ä¸ªå€¼è”ç³»èµ·æ¥çš„æƒ…å†µï¼Œè¿™å°±ä½¿ç¨‹åºçš„è°ƒè¯•å˜å¾—éå¸¸å›°éš¾ã€‚å½“ä½ è°ƒç”¨ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•°æ—¶ï¼Œä½ åªéœ€è¦è€ƒè™‘è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å…³ç³»ã€‚ä½ ä¸å¿…æ‹…å¿ƒå…¶ä»–å¯èƒ½åœ¨ä½ çš„ç³»ç»Ÿä¸­å‡ºç°çš„å˜åŒ–ã€‚&lt;/p>
&lt;p>å¦ä¸€æ–¹é¢ï¼Œæœ‰å‰¯ä½œç”¨çš„å‡½æ•°ç»™ä½ çš„æ€æƒ³è‘¡è„å¸¦æ¥äº†æ›´å¤šçš„è´Ÿæ‹…ï¼šç°åœ¨ä½ å¿…é¡»æ‹…å¿ƒå½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œä¸–ç•Œæ˜¯å¦‚ä½•å—åˆ°å½±å“çš„ã€‚ä¸ä»…å¦‚æ­¤ï¼Œæ¯ä¸€ä¸ªä¾èµ–äºå‰¯ä½œç”¨å‡½æ•°çš„å‡½æ•°éƒ½ä¼šè¢«è¿™ç§æ‹…å¿§æ‰€æ„ŸæŸ“ï¼›å®ƒä¹Ÿä¼šæˆä¸ºä½ åœ¨æ„å»ºç¨‹åºæ—¶éœ€è¦æ ¼å¤–å°å¿ƒå’Œæ€è€ƒçš„å¦ä¸€ä¸ªç»„ä»¶ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æœ‰ä½¿ç”¨ Ruby æˆ– JavaScript ç­‰è¯­è¨€çš„é‡è¦ç»éªŒï¼Œä½ å¯èƒ½å·²ç»é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«ä¼ æ¥ä¼ å»çš„æ—¶å€™ï¼Œå®ƒçš„å±æ€§ä¸çŸ¥ä¸è§‰åœ°å‘ç”Ÿäº†å˜åŒ–ï¼Œè€Œä½ å´ä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚ç„¶åä½ ä¸å¾—ä¸ä¹°ä¸€å°æ–°çš„ç”µè„‘ï¼Œå› ä¸ºä½ æŠŠä½ çš„ç”µè„‘æ‰”åˆ°äº†çª—å¤–ã€‚å¦‚æœä½ è¯»è¿‡ä»»ä½•å…³äºé¢å‘å¯¹è±¡è®¾è®¡çš„æ–‡ç« ï¼Œä½ å°±ä¼šçŸ¥é“ï¼Œå¾ˆå¤šæ–‡ç« éƒ½æ˜¯å…³äºç®¡ç†çŠ¶æ€å’Œå‡å°‘å‰¯ä½œç”¨çš„ç­–ç•¥ï¼Œæ­£æ˜¯å› ä¸ºè¿™ä¸ªåŸå› ã€‚&lt;/p>
&lt;p>ç”±äºæ‰€æœ‰è¿™äº›åŸå› ï¼Œåœ¨ä½ çš„ä»£ç ä¸­å¯»æ‰¾é™åˆ¶ä½¿ç”¨å‰¯ä½œç”¨çš„æ–¹æ³•æ˜¯ä¸ªå¥½ä¸»æ„ã€‚å¹¸è¿çš„æ˜¯ï¼ŒClojure é€šè¿‡ä¸é—ä½™åŠ›åœ°é™åˆ¶å‰¯ä½œç”¨æ¥ä½¿ä½ çš„å·¥ä½œå˜å¾—æ›´å®¹æ˜“&amp;ndash;å®ƒçš„æ‰€æœ‰æ ¸å¿ƒæ•°æ®ç»“æ„éƒ½æ˜¯ä¸å¯æ”¹å˜çš„ã€‚æ— è®ºä½ å¦‚ä½•åŠªåŠ›ï¼Œä½ éƒ½æ— æ³•åœ¨åŸåœ°æ”¹å˜å®ƒä»¬ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä¸ç†Ÿæ‚‰ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—ä½ æœ€å–œæ¬¢çš„å·¥å…·è¢«å‰¥å¤ºäº†ã€‚ä½ æ€ä¹ˆèƒ½*åšæ²¡æœ‰å‰¯ä½œç”¨çš„äº‹æƒ…å‘¢ï¼Ÿå¥½å§ï¼Œè¿™å°±æ˜¯ä¸‹ä¸€èŠ‚è¦è®²çš„å†…å®¹! è¿™æ®µè¯æ€ä¹ˆæ ·ï¼Œå—¯ï¼Ÿè¯¶ï¼Ÿ&lt;/p>
&lt;h2 id="ä¸ä¸å¯å˜çš„æ•°æ®ç»“æ„å…±å¤„">ä¸ä¸å¯å˜çš„æ•°æ®ç»“æ„å…±å¤„&lt;/h2>
&lt;p>ä¸å¯å˜çš„æ•°æ®ç»“æ„ç¡®ä¿ä½ çš„ä»£ç ä¸ä¼šæœ‰å‰¯ä½œç”¨ã€‚æ­£å¦‚ä½ ç°åœ¨è¡·å¿ƒçŸ¥é“çš„ï¼Œè¿™æ˜¯ä¸€ä»¶å¥½äº‹ã€‚ä½†ä½ å¦‚ä½•åœ¨æ²¡æœ‰å‰¯ä½œç”¨çš„æƒ…å†µä¸‹å®Œæˆä»»ä½•äº‹æƒ…å‘¢ï¼Ÿ&lt;/p>
&lt;h3 id="é€’å½’è€Œä¸æ˜¯-forwhile">é€’å½’è€Œä¸æ˜¯ for/while&lt;/h3>
&lt;p>å¦‚æœä½ æ›¾ç»åœ¨ JavaScript ä¸­å†™è¿‡è¿™æ ·çš„ä¸œè¥¿ï¼Œè¯·ä¸¾æ‰‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="k">var &lt;/span>&lt;span class="nv">wrestlers&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="nv">getAlligatorWrestlers&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var &lt;/span>&lt;span class="nv">totalBites&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var &lt;/span>&lt;span class="nv">l&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="nv">wrestlers.length&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var &lt;/span>&lt;span class="nv">i=0&lt;/span>&lt;span class="c1">; i &amp;lt; l; i++){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">totalBites&lt;/span> &lt;span class="nv">+=&lt;/span> &lt;span class="nv">wrestlers&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nv">.timesBitten&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…è¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="k">var &lt;/span>&lt;span class="nv">allPatients&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="nv">getArkhamPatients&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var &lt;/span>&lt;span class="nv">analyzedPatients&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="p">[]&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var &lt;/span>&lt;span class="nv">l&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="nv">allPatients.length&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">var &lt;/span>&lt;span class="nv">i=0&lt;/span>&lt;span class="c1">; i &amp;lt; l; i++){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">allPatients&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nv">.analyzed&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">analyzedPatients.push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">allPatients&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">i&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="c1">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„è¿™ä¸¤ä¸ªä¾‹å­éƒ½å¯¹å¾ªç¯å˜é‡&lt;code>i&lt;/code>ä»¥åŠå¾ªç¯å¤–çš„ä¸€ä¸ªå˜é‡ï¼ˆç¬¬ä¸€ä¸ªä¾‹å­ä¸­çš„&lt;code>totalBites&lt;/code>å’Œç¬¬äºŒä¸ªä¾‹å­ä¸­çš„&lt;code>analyzedPatients&lt;/code>ï¼‰äº§ç”Ÿäº†å‰¯ä½œç”¨ã€‚ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨å‰¯ä½œç”¨&amp;ndash;æ”¹å˜***å†…éƒ¨çš„å˜é‡&amp;ndash;æ˜¯ç›¸å½“æ— å®³çš„ã€‚ä½ åœ¨åˆ›é€ æ–°çš„å€¼ï¼Œè€Œä¸æ˜¯æ”¹å˜ä½ ä»ç¨‹åºä¸­å…¶ä»–åœ°æ–¹å¾—åˆ°çš„å¯¹è±¡ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/functional-programming/bloodthunder.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>ä½†æ˜¯ Clojure çš„æ ¸å¿ƒæ•°æ®ç»“æ„ç”šè‡³ä¸å…è®¸è¿™äº›æ— å®³çš„å˜å¼‚ã€‚é‚£ä¹ˆï¼Œä½ èƒ½åšä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆï¼Œå¿½ç•¥ä¸€ä¸ªäº‹å®ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨&lt;code>map&lt;/code>å’Œ&lt;code>reduce&lt;/code>æ¥å®Œæˆå‰é¢çš„å·¥ä½œã€‚åœ¨è¿™äº›æƒ…å†µä¸‹&amp;ndash;å¯¹ä¸€äº›é›†åˆè¿›è¡Œè¿­ä»£ä»¥å»ºç«‹ä¸€ä¸ªç»“æœ&amp;ndash;æ›¿ä»£çªå˜çš„å‡½æ•°æ˜¯é€’å½’ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œå»ºç«‹ä¸€ä¸ªæ€»å’Œã€‚Clojure æ²¡æœ‰èµ‹å€¼è¿ç®—ç¬¦ã€‚å¦‚æœä¸åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œä½ å°±æ— æ³•å°†ä¸€ä¸ªæ–°çš„å€¼ä¸ä¸€ä¸ªåå­—è”ç³»èµ·æ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">great-baby-name&lt;/span> &lt;span class="s">&amp;#34;Rosanthony&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">great-baby-name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;Rosanthony&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">great-baby-name&lt;/span> &lt;span class="s">&amp;#34;Bloodthunder&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">great-baby-name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;Bloodthunder&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">great-baby-name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;Rosanthony&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ é¦–å…ˆåœ¨å…¨å±€ä½œç”¨åŸŸä¸­å°† &amp;ldquo;great-baby-name &amp;ldquo;ä¸ &amp;ldquo;Rosanthony &amp;ldquo;ç»‘å®šã€‚æ¥ä¸‹æ¥ï¼Œä½ ç”¨&lt;code>let&lt;/code>å¼•å…¥ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚åœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­ï¼Œä½ å°†&lt;code>great-baby-name&lt;/code>ç»‘å®šåˆ°&lt;code>&amp;quot;Bloodthunder&amp;quot;&lt;/code>ã€‚ä¸€æ—¦ Clojure å®Œæˆäº†å¯¹&lt;code>let&lt;/code>è¡¨è¾¾å¼çš„æ±‚å€¼ï¼Œä½ å°±å›åˆ°äº†å…¨å±€èŒƒå›´ï¼Œ&lt;code>great-baby-name&lt;/code>å†æ¬¡è¢«æ±‚å€¼ä¸º&lt;code>&amp;quot;Rosanthony&amp;quot;&lt;/code>ã€‚&lt;/p>
&lt;p>Clojure è®©ä½ ç”¨é€’å½’æ¥è§£å†³è¿™ä¸ªæ˜æ˜¾çš„é™åˆ¶ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†è§£å†³é€’å½’é—®é¢˜çš„ä¸€èˆ¬æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">sum&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">âŠ&lt;/span> &lt;span class="p">([&lt;/span>&lt;span class="nv">vals&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">sum&lt;/span> &lt;span class="nb">vals &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([&lt;/span>&lt;span class="nb">vals &lt;/span>&lt;span class="nv">accumulating-total&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â‹&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">empty?&lt;/span> &lt;span class="nv">vals&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">accumulating-total&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">sum&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">rest &lt;/span>&lt;span class="nv">vals&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">first &lt;/span>&lt;span class="nv">vals&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">accumulating-total&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªè¦å¤„ç†çš„é›†åˆï¼ˆ&lt;code>vals&lt;/code>ï¼‰å’Œä¸€ä¸ªç´¯åŠ å™¨ï¼ˆ&lt;code>accumulating-total&lt;/code>ï¼‰ï¼Œå®ƒä½¿ç”¨äº† arity é‡è½½ï¼ˆåœ¨ç¬¬ä¸‰ç« æœ‰ä»‹ç»ï¼‰ï¼Œåœ¨âŠä¸º&lt;code>accumulating-total&lt;/code>æä¾›ä¸€ä¸ªé»˜è®¤å€¼&lt;code>0&lt;/code>ã€‚&lt;/p>
&lt;p>åƒæ‰€æœ‰çš„é€’å½’è§£å†³æ–¹æ¡ˆä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°æ ¹æ®ä¸€ä¸ªåŸºæœ¬æ¡ä»¶æ£€æŸ¥å®ƒæ‰€å¤„ç†çš„å‚æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ£€æŸ¥&lt;code>vals&lt;/code>åœ¨â‹æ˜¯å¦ä¸ºç©ºã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å·²ç»å¤„ç†äº†é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å›`ç´¯è®¡-æ€»æ•°&amp;rsquo;ã€‚&lt;/p>
&lt;p>å¦‚æœ&lt;code>vals&lt;/code>ä¸æ˜¯ç©ºçš„ï¼Œæ„å‘³ç€æˆ‘ä»¬è¿˜åœ¨å¤„ç†è¿™ä¸ªåºåˆ—ï¼Œæ‰€ä»¥æˆ‘ä»¬é€’å½’è°ƒç”¨&lt;code>sum&lt;/code>ï¼Œç»™å®ƒä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šç”¨&lt;code>(å…¶ä½™çš„vals)&lt;/code>è¡¨ç¤º vals çš„*å°¾éƒ¨ï¼Œç”¨&lt;code>(+(ç¬¬ä¸€ä¸ªvals)ç´¯åŠ æ€»æ•°)&lt;/code>è¡¨ç¤º&lt;code>vals&lt;/code>çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ç´¯åŠ æ€»æ•°ä¹‹å’Œã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å»ºç«‹äº†&lt;code>ç´¯ç§¯æ€»æ•°&lt;/code>ï¼ŒåŒæ—¶å‡å°‘&lt;code>vals&lt;/code>ï¼Œç›´åˆ°å®ƒè¾¾åˆ°ç©ºé›†åˆçš„åŸºæœ¬æƒ…å†µã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯é€’å½’å‡½æ•°è°ƒç”¨çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬æŠŠå®ƒæ¯æ¬¡é€’å½’çš„æƒ…å†µåˆ†å¼€ï¼Œå°±ä¼šæ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">sum&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">39&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1">; single-arity body calls two-arity body&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">sum&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">39&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">sum&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mi">39&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">sum&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mi">44&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">sum&lt;/span> &lt;span class="p">[]&lt;/span> &lt;span class="mi">45&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">; base case is reached, so return accumulating-total&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 45&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹&lt;code>sum&lt;/code>çš„æ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œå…¶ä¸­&lt;code>vals&lt;/code>å’Œ&lt;code>accumulating-total&lt;/code>è¢«ç»‘å®šåˆ°ä¸åŒçš„å€¼ä¸Šï¼Œæ‰€æœ‰è¿™äº›éƒ½ä¸éœ€è¦æ”¹å˜æœ€åˆä¼ é€’ç»™å‡½æ•°çš„å€¼æˆ–æ‰§è¡Œä»»ä½•å†…éƒ¨å˜å¼‚ã€‚æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä½ å¯ä»¥åœ¨æ²¡æœ‰çªå˜çš„æƒ…å†µä¸‹é¡ºåˆ©å®Œæˆã€‚&lt;/p>
&lt;p>è¯·æ³¨æ„ï¼Œå‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œåœ¨è¿›è¡Œé€’å½’æ—¶ï¼Œä½ ä¸€èˆ¬åº”è¯¥ä½¿ç”¨&lt;code>recur&lt;/code>ã€‚åŸå› æ˜¯ Clojure ä¸æä¾›å°¾éƒ¨è°ƒç”¨çš„ä¼˜åŒ–ï¼Œè¿™ä¸ªè¯é¢˜æˆ‘ä¸ä¼šå†æäº†ï¼ï¼ˆè¯·æŸ¥çœ‹è¿™ä¸ªç½‘å€ï¼‰ã€‚(æŸ¥çœ‹è¿™ä¸ªç½‘å€ä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚&lt;em>&lt;a class="link" href="http://en.wikipedia.org/wiki/Tail_call" target="_blank" rel="noopener"
>http://en.wikipedia.org/wiki/Tail_call&lt;/a>&lt;/em>ï¼‰ã€‚æ‰€ä»¥ä½ å¯ä»¥ç”¨&lt;code>recur&lt;/code>æ¥åšè¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">sum&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([&lt;/span>&lt;span class="nv">vals&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">sum&lt;/span> &lt;span class="nb">vals &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([&lt;/span>&lt;span class="nb">vals &lt;/span>&lt;span class="nv">accumulating-total&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">empty?&lt;/span> &lt;span class="nv">vals&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">accumulating-total&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">recur&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">rest &lt;/span>&lt;span class="nv">vals&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">first &lt;/span>&lt;span class="nv">vals&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">accumulating-total&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ åœ¨ä¸€ä¸ªå°çš„é›†åˆä¸Šè¿›è¡Œé€’å½’æ“ä½œï¼Œä½¿ç”¨&lt;code>recur&lt;/code>å¹¶ä¸é‡è¦ï¼Œä½†å¦‚æœä½ çš„é›†åˆåŒ…å«æ•°åƒæˆ–æ•°ç™¾ä¸‡ä¸ªå€¼ï¼Œä½ è‚¯å®šéœ€è¦ä½¿ç”¨&lt;code>recur&lt;/code>ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šå› ä¸ºå †æ ˆæº¢å‡ºè€Œä½¿ç¨‹åºçˆ†ç‚¸ã€‚&lt;/p>
&lt;p>æœ€åä¸€ä»¶äº‹! ä½ å¯èƒ½ä¼šè¯´ï¼Œ&amp;ldquo;ç­‰ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘æœ€ç»ˆåˆ›é€ äº†æˆåƒä¸Šä¸‡çš„ä¸­é—´å€¼æ€ä¹ˆåŠï¼Ÿè¿™ä¸ä¼šå› ä¸ºåƒåœ¾æ”¶é›†æˆ–å…¶ä»–åŸå› å¯¼è‡´ç¨‹åºå´©æºƒå—ï¼Ÿ&amp;rdquo;&lt;/p>
&lt;p>éå¸¸å¥½çš„é—®é¢˜ï¼Œé¹°çœ¼çš„è¯»è€…! ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚åŸå› æ˜¯ï¼Œåœ¨å¹•åï¼ŒClojure çš„ä¸å¯å˜æ•°æ®ç»“æ„æ˜¯ä½¿ç”¨&lt;em>ç»“æ„å…±äº«&lt;/em>å®ç°çš„ï¼Œè¿™å®Œå…¨è¶…å‡ºäº†æœ¬ä¹¦çš„èŒƒå›´ã€‚è¿™æœ‰ç‚¹åƒ Git! å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œè¯·é˜…è¯»è¿™ç¯‡ä¼Ÿå¤§çš„æ–‡ç« ã€‚&lt;em>&lt;a class="link" href="http://hypirion.com/musings/understanding-persistent-vector-pt-1" target="_blank" rel="noopener"
>http://hypirion.com/musings/understanding-persistent-vector-pt-1&lt;/a>&lt;/em>ã€‚&lt;/p>
&lt;h3 id="å‡½æ•°ç»„åˆè€Œä¸æ˜¯å±æ€§çªå˜">å‡½æ•°ç»„åˆè€Œä¸æ˜¯å±æ€§çªå˜&lt;/h3>
&lt;p>ä½ å¯èƒ½ä¹ æƒ¯äºä½¿ç”¨çªå˜çš„å¦ä¸€ç§æ–¹å¼æ˜¯å»ºç«‹èµ·ä¸€ä¸ªå¯¹è±¡çš„æœ€ç»ˆçŠ¶æ€ã€‚åœ¨ä¸‹é¢çš„ Ruby ä¾‹å­ä¸­ï¼Œ&lt;code>GlamourShotCaption&lt;/code>å¯¹è±¡ä½¿ç”¨çªå˜æ¥æ¸…ç†è¾“å…¥ï¼Œåˆ é™¤å°¾éƒ¨çš„ç©ºæ ¼å¹¶å°†`&amp;ldquo;lol &amp;ldquo;å¤§å†™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">class &lt;/span>&lt;span class="nv">GlamourShotCaption&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">attr_reader&lt;/span> &lt;span class="ss">:text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def &lt;/span>&lt;span class="nv">initialize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">text&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">@&lt;/span>&lt;span class="nv">text&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="nv">text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">clean!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">private&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def &lt;/span>&lt;span class="nv">clean!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">text.trim!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">text.gsub!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">/lol/&lt;/span>, &lt;span class="s">&amp;#34;LOL&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">best&lt;/span> &lt;span class="nb">= &lt;/span>&lt;span class="nv">GlamourShotCaption.new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;My boa constrictor is so sassy lol! &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">best.text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;My boa constrictor is so sassy LOL!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ&lt;code>GlamourShotCaption&lt;/code>ç±»å°è£…äº†å¦‚ä½•æ¸…ç†é­…åŠ›é•œå¤´æ ‡é¢˜çš„çŸ¥è¯†ã€‚åœ¨åˆ›å»º&lt;code>GlamourShotCaption&lt;/code>å¯¹è±¡æ—¶ï¼Œä½ å°†æ–‡æœ¬åˆ†é…ç»™ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå¹¶é€æ­¥æ”¹å˜å®ƒã€‚&lt;/p>
&lt;p>æ¸…å• 5-1 æ˜¾ç¤ºäº†ä½ å¦‚ä½•åœ¨ Clojure ä¸­åšåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">require&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">clojure.string&lt;/span> &lt;span class="ss">:as&lt;/span> &lt;span class="nv">s&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">clean&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">text&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">s/replace&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">s/trim&lt;/span> &lt;span class="nv">text&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="s">&amp;#34;lol&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;LOL&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">clean&lt;/span> &lt;span class="s">&amp;#34;My boa constrictor is so sassy lol! &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;My boa constrictor is so sassy LOL!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>5-1. ä½¿ç”¨å‡½æ•°ç»„åˆæ¥ä¿®æ”¹ä¸€ä¸ªè¿·äººçš„é•œå¤´æ ‡é¢˜&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/functional-programming/glamour-boa.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>åœ¨ç¬¬ä¸€è¡Œï¼Œæˆ‘ä»¬ä½¿ç”¨&lt;code>require&lt;/code>æ¥è®¿é—®å­—ç¬¦ä¸²å‡½æ•°åº“ï¼ˆæˆ‘å°†åœ¨ç¬¬å…­ç« è®¨è®ºè¿™ä¸ªå‡½æ•°å’Œç›¸å…³æ¦‚å¿µï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™æ®µä»£ç å¾ˆç®€å•ã€‚ä¸éœ€è¦å˜å¼‚ã€‚&lt;code>clean&lt;/code>å‡½æ•°çš„å·¥ä½œæ–¹å¼æ˜¯å°†ä¸€ä¸ªä¸å¯å˜çš„å€¼&lt;code>text&lt;/code>ä¼ é€’ç»™ä¸€ä¸ªçº¯å‡½æ•°&lt;code>s/trim&lt;/code>ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼ˆ&lt;code>&amp;quot;æˆ‘çš„èŸ’è›‡çœŸæ—¶é«¦ lol!&amp;quot;&lt;/code>ï¼›å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼å·²ç»è¢«ä¿®å‰ªï¼‰ã€‚ç„¶åï¼Œè¯¥å€¼è¢«ä¼ é€’ç»™çº¯å‡½æ•°&lt;code>s/replace&lt;/code>ï¼Œè¯¥å‡½æ•°è¿”å›å¦ä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼ˆ&amp;ldquo;æˆ‘çš„èŸ’è›‡æ˜¯å¦‚æ­¤çš„æ—¶é«¦ LOLï¼&amp;quot;ï¼‰ã€‚&lt;/p>
&lt;p>åƒè¿™æ ·ç»„åˆå‡½æ•°&amp;ndash;ä½¿ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°&amp;ndash;è¢«ç§°ä¸º&lt;em>å‡½æ•°ç»„åˆ&lt;/em>ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ä¹‹å‰ä½¿ç”¨é€’å½’çš„ä¾‹å­å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œå› ä¸ºé€’å½’ä¸æ–­åœ°å°†ä¸€ä¸ªå‡½æ•°çš„ç»“æœä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼›å®ƒåªæ˜¯ç¢°å·§æ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå‡½æ•°å¼ç¼–ç¨‹é¼“åŠ±ä½ é€šè¿‡ç»„åˆæ›´ç®€å•çš„å‡½æ•°æ¥å»ºç«‹æ›´å¤æ‚çš„å‡½æ•°ã€‚&lt;/p>
&lt;p>è¿™ç§æ¯”è¾ƒä¹Ÿå¼€å§‹æ­ç¤ºäº†é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„ä¸€äº›é™åˆ¶ã€‚åœ¨ OOP ä¸­ï¼Œç±»çš„ä¸»è¦ç›®çš„ä¹‹ä¸€æ˜¯é˜²æ­¢å¯¹ç§æœ‰æ•°æ®è¿›è¡Œä¸å¿…è¦çš„ä¿®æ”¹&amp;ndash;è¿™åœ¨ä¸å¯å˜çš„æ•°æ®ç»“æ„ä¸­æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚ä½ è¿˜å¿…é¡»å°†æ–¹æ³•ä¸ç±»ç´§å¯†ç»“åˆï¼Œä»è€Œé™åˆ¶äº†æ–¹æ³•çš„å¯é‡ç”¨æ€§ã€‚åœ¨ Ruby çš„ä¾‹å­ä¸­ï¼Œä½ å¿…é¡»åšé¢å¤–çš„å·¥ä½œæ¥é‡å¤ä½¿ç”¨&lt;code>clean!&lt;/code>æ–¹æ³•ã€‚åœ¨ Clojure ä¸­ï¼Œ`clean&amp;rsquo;å¯ä»¥å¯¹ä»»ä½•å­—ç¬¦ä¸²èµ·ä½œç”¨ã€‚é€šè¿‡ aï¼‰å°†å‡½æ•°å’Œæ•°æ®è§£è€¦ï¼Œä»¥åŠ bï¼‰æ ¹æ®ä¸€ç»„å°çš„æŠ½è±¡è¿›è¡Œç¼–ç¨‹ï¼Œä½ æœ€ç»ˆä¼šå¾—åˆ°æ›´å¤šå¯é‡ç”¨çš„ã€å¯ç»„åˆçš„ä»£ç ã€‚ä½ è·å¾—äº†åŠ›é‡ï¼Œå´æ²¡æœ‰æŸå¤±ã€‚&lt;/p>
&lt;p>é™¤äº†ç›´æ¥çš„å®é™…é—®é¢˜ä¹‹å¤–ï¼Œä½ å†™é¢å‘å¯¹è±¡çš„ä»£ç å’Œå‡½æ•°å¼ä»£ç çš„æ–¹å¼ä¹‹é—´çš„å·®å¼‚æŒ‡å‘äº†ä¸¤ç§æ€ç»´æ–¹å¼ä¹‹é—´æ›´æ·±å±‚æ¬¡çš„å·®å¼‚ã€‚ç¼–ç¨‹æ˜¯ä¸ºäº†ä½ è‡ªå·±é‚ªæ¶çš„ç›®çš„è€Œæ“çºµæ•°æ®ï¼ˆå°±åƒä½ å¯ä»¥è¯´å®ƒæ˜¯&lt;em>å…³äº&lt;/em>ä»»ä½•ä¸œè¥¿ï¼‰ã€‚åœ¨ OOP ä¸­ï¼Œä½ æŠŠæ•°æ®çœ‹æˆæ˜¯å¯ä»¥ä½“ç°åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­çš„ä¸œè¥¿ï¼Œä½ æˆ³æˆ³ç‚¹ç‚¹ï¼Œç›´åˆ°å®ƒçœ‹èµ·æ¥åˆé€‚ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ çš„åŸå§‹æ•°æ®ä¼šæ°¸è¿œä¸¢å¤±ï¼Œé™¤éä½ éå¸¸å°å¿ƒåœ°ä¿å­˜å®ƒã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä½ è®¤ä¸ºæ•°æ®æ˜¯ä¸å˜çš„ï¼Œä½ ä»ç°æœ‰çš„æ•°æ®ä¸­å¯¼å‡ºæ–°çš„æ•°æ®ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒåŸå§‹æ•°æ®ä»ç„¶å®‰å…¨æ— æ™ã€‚åœ¨å‰é¢çš„ Clojure ä¾‹å­ä¸­ï¼ŒåŸå§‹æ ‡é¢˜ä¸ä¼šè¢«ä¿®æ”¹ã€‚å®ƒæ˜¯å®‰å…¨çš„ï¼Œå°±åƒå½“ä½ æŠŠæ•°å­—åŠ åœ¨ä¸€èµ·æ—¶æ˜¯å®‰å…¨çš„ä¸€æ ·ï¼›å½“ä½ æŠŠ 3 åŠ è¿›å»æ—¶ï¼Œä½ ä¸ä¼šä»¥æŸç§æ–¹å¼æŠŠ 4 å˜æˆ 7ã€‚&lt;/p>
&lt;p>ä¸€æ—¦ä½ æœ‰ä¿¡å¿ƒä½¿ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„æ¥å®Œæˆå·¥ä½œï¼Œä½ ä¼šæ„Ÿåˆ°æ›´åŠ è‡ªä¿¡ï¼Œå› ä¸ºä½ ä¸å¿…æ‹…å¿ƒæœ‰ä»€ä¹ˆè‚®è„çš„ä»£ç ä¼šåœ¨ä½ å®è´µçš„ã€å¯å˜çš„å˜é‡ä¸Šæ²¾ä¸Šæ²¹è…»çš„çˆªå­ã€‚è¿™å°†æ˜¯å¾ˆå¥½çš„!&lt;/p>
&lt;h2 id="ç”¨çº¯å‡½æ•°åšçš„é…·äº‹">ç”¨çº¯å‡½æ•°åšçš„é…·äº‹&lt;/h2>
&lt;p>ä½ å¯ä»¥ä»ç°æœ‰çš„å‡½æ•°ä¸­æ´¾ç”Ÿå‡ºæ–°çš„å‡½æ•°ï¼Œå°±åƒä½ ä»ç°æœ‰çš„æ•°æ®ä¸­æ´¾ç”Ÿå‡ºæ–°çš„æ•°æ®ä¸€æ ·ã€‚ä½ å·²ç»çœ‹åˆ°äº†ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>partial&lt;/code>ï¼Œå®ƒå¯ä»¥åˆ›å»ºæ–°çš„å‡½æ•°ã€‚æœ¬èŠ‚å°†å‘ä½ ä»‹ç»å¦å¤–ä¸¤ä¸ªå‡½æ•°, &lt;code>comp&lt;/code>å’Œ&lt;code>memoize&lt;/code>, å®ƒä»¬ä¾èµ–äºå¼•ç”¨é€æ˜æ€§, ä¸å˜æ€§, æˆ–ä¸¤è€…å…¼æœ‰.&lt;/p>
&lt;h3 id="comp">comp&lt;/h3>
&lt;p>åƒæˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­æ‰€åšçš„é‚£æ ·ï¼Œå¯¹çº¯å‡½æ•°è¿›è¡Œç»„åˆæ€»æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºä½ åªéœ€è¦æ‹…å¿ƒå®ƒä»¬çš„è¾“å…¥/è¾“å‡ºå…³ç³»ã€‚ç»„åˆå‡½æ•°æ˜¯å¦‚æ­¤çš„æ™®éï¼Œä»¥è‡³äº Clojure æä¾›äº†ä¸€ä¸ªå‡½æ•°&lt;code>comp&lt;/code>ï¼Œç”¨äºä»ä»»æ„æ•°é‡çš„å‡½æ•°ç»„åˆä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">((&lt;/span>&lt;span class="nb">comp inc &lt;/span>&lt;span class="nv">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 7&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™é‡Œï¼Œä½ é€šè¿‡ç»„åˆ&lt;code>inc&lt;/code>å’Œ&lt;code>*&lt;/code>å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ç„¶åï¼Œä½ ç«‹å³å°†è¿™ä¸ªå‡½æ•°åº”ç”¨äºå‚æ•°&lt;code>2&lt;/code>å’Œ&lt;code>3&lt;/code>ã€‚è¯¥å‡½æ•°å°†æ•°å­— 2 å’Œ 3 ç›¸ä¹˜ï¼Œç„¶åå°†ç»“æœé€’å¢ã€‚ä½¿ç”¨æ•°å­¦ç¬¦å·ï¼Œä½ ä¼šè¯´ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¯¹å‡½æ•°&lt;em>f&lt;/em>1, &lt;em>f&lt;/em>2, &amp;hellip; &lt;em>f&lt;/em>nï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°&lt;em>g&lt;/em>ï¼Œä½¿å¾—&lt;em>g&lt;/em>(&lt;em>x&lt;/em>1, &lt;em>x&lt;/em>2, &amp;hellip; &lt;em>x&lt;/em>n)ç­‰äº&lt;em>f&lt;/em>1( &lt;em>f&lt;/em>2( &lt;em>f&lt;/em>n(&lt;em>x&lt;/em>1, &lt;em>x&lt;/em>2, &amp;hellip; &lt;em>x&lt;/em>n))ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œç¬¬ä¸€ä¸ªåº”ç”¨çš„å‡½æ•°&amp;ndash;è¿™é‡Œæ˜¾ç¤ºçš„ä»£ç ä¸­çš„&lt;code>*&lt;/code>&amp;ndash;å¯ä»¥æ¥å—ä»»ä½•æ•°é‡çš„å‚æ•°ï¼Œè€Œå…¶ä½™çš„å‡½æ•°å¿…é¡»åªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œè¯´æ˜å¦‚ä½•ä½¿ç”¨&lt;code>comp&lt;/code>æ¥æ£€ç´¢è§’è‰²æ‰®æ¼”æ¸¸æˆä¸­çš„è§’è‰²å±æ€§ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">character&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;Smooches McCutes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">:attributes&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:intelligence&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">:strength&lt;/span> &lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">:dexterity&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">}})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">c-int&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">comp &lt;/span>&lt;span class="ss">:intelligence&lt;/span> &lt;span class="ss">:attributes&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">c-str&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">comp &lt;/span>&lt;span class="ss">:strength&lt;/span> &lt;span class="ss">:attributes&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">c-dex&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">comp &lt;/span>&lt;span class="ss">:dexterity&lt;/span> &lt;span class="ss">:attributes&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">c-int&lt;/span> &lt;span class="nv">character&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">c-str&lt;/span> &lt;span class="nv">character&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">c-dex&lt;/span> &lt;span class="nv">character&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 5&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åˆ›å»ºäº†ä¸‰ä¸ªå‡½æ•°æ¥å¸®åŠ©ä½ æŸ¥è¯¢ä¸€ä¸ªè§’è‰²çš„å±æ€§ã€‚ä½ å¯ä»¥ä¸ä½¿ç”¨&lt;code>comp&lt;/code>ï¼Œè€Œæ˜¯ä¸ºæ¯ä¸ªå±æ€§å†™æˆè¿™æ ·çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">fn &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">c&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="ss">:strength&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="ss">:attributes&lt;/span> &lt;span class="nv">c&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½†&lt;code>comp&lt;/code>æ›´ä¼˜é›…ï¼Œå› ä¸ºå®ƒç”¨æ›´å°‘çš„ä»£ç æ¥è¡¨è¾¾æ›´å¤šçš„æ„æ€ã€‚å½“ä½ çœ‹åˆ° &lt;code>comp&lt;/code>æ—¶ï¼Œä½ ç«‹å³çŸ¥é“æ‰€äº§ç”Ÿçš„å‡½æ•°çš„ç›®çš„æ˜¯ä»¥ä¸€ç§ä¼—æ‰€å‘¨çŸ¥çš„æ–¹å¼ç»„åˆç°æœ‰çš„å‡½æ•°ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³ç»„åˆçš„ä¸€ä¸ªå‡½æ•°éœ€è¦æ¥å—ä¸€ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿä½ æŠŠå®ƒåŒ…åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­ã€‚è¯·çœ‹ä¸‹é¢è¿™ä¸ªç‰‡æ®µï¼Œå®ƒæ ¹æ®ä½ çš„è§’è‰²çš„æ™ºåŠ›å±æ€§æ¥è®¡ç®—å¥¹çš„æ³•æœ¯æ§½çš„æ•°é‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">spell-slots&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">char&lt;/span>&lt;span class="err">ï¼½&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">int &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">/ &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">c-int&lt;/span> &lt;span class="nv">char&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">spell-slots&lt;/span> &lt;span class="nv">character&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 6&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆï¼Œä½ ç”¨æ™ºåŠ›é™¤ä»¥ 2ï¼Œç„¶ååŠ  1ï¼Œç„¶åç”¨&lt;code>int&lt;/code>å‡½æ•°æ¥å–æ•´ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•ç”¨&lt;code>comp&lt;/code>åšåŒæ ·çš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">spell-slots-comp&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">comp int inc &lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">/ &lt;/span>&lt;span class="nv">%&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">c-int&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¦é™¤ä»¥ 2ï¼Œä½ æ‰€è¦åšçš„å°±æ˜¯æŠŠé™¤æ³•åŒ…åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­ã€‚&lt;/p>
&lt;p>Clojure çš„&lt;code>comp&lt;/code>å‡½æ•°å¯ä»¥ç»„æˆä»»ä½•æ•°é‡çš„å‡½æ•°ã€‚ä¸ºäº†äº†è§£å®ƒæ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå®ç°ï¼Œå®ƒåªç»„åˆäº†ä¸¤ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">two-comp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">f&lt;/span> &lt;span class="nv">g&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="nv">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">fn &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="nv">args&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">f&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">apply &lt;/span>&lt;span class="nv">g&lt;/span> &lt;span class="nv">args&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘é¼“åŠ±ä½ æ±‚å€¼è¿™æ®µä»£ç ï¼Œå¹¶ä½¿ç”¨&lt;code>two-comp&lt;/code>æ¥ç»„åˆä¸¤ä¸ªå‡½æ•°! å¦å¤–ï¼Œå°è¯•é‡æ–°å®ç° Clojure çš„&lt;code>comp&lt;/code>å‡½æ•°ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç»„æˆä»»ä½•æ•°é‡çš„å‡½æ•°ã€‚&lt;/p>
&lt;h3 id="è®°å¿†åŒ–">è®°å¿†åŒ–&lt;/h3>
&lt;p>ä½ å¯ä»¥ç”¨çº¯å‡½æ•°åšçš„å¦ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…æ˜¯å¯¹å®ƒä»¬è¿›è¡Œå¤‡å¿˜ï¼Œè¿™æ · Clojure å°±ä¼šè®°ä½æŸä¸ªç‰¹å®šå‡½æ•°è°ƒç”¨çš„ç»“æœã€‚ä½ å¯ä»¥è¿™æ ·åšï¼Œå› ä¸ºæ­£å¦‚ä½ å‰é¢æ‰€å­¦åˆ°çš„ï¼Œçº¯å‡½æ•°åœ¨æŒ‡ä»£ä¸Šæ˜¯é€æ˜çš„ã€‚ä¾‹å¦‚ï¼Œ&lt;code>+&lt;/code>æ˜¯æŒ‡ä»£é€æ˜çš„ã€‚ä½ å¯ä»¥æŠŠ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›¿æ¢ä¸º&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="mi">16&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€Œç¨‹åºä¼šæœ‰ç›¸åŒçš„è¡Œä¸ºã€‚&lt;/p>
&lt;p>Memoization è®©ä½ é€šè¿‡å­˜å‚¨ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°å’Œå‡½æ•°çš„è¿”å›å€¼æ¥åˆ©ç”¨å¼•ç”¨çš„é€æ˜åº¦ã€‚è¿™æ ·ä¸€æ¥ï¼Œä»¥åç”¨ç›¸åŒçš„å‚æ•°è°ƒç”¨è¯¥å‡½æ•°å°±å¯ä»¥ç«‹å³è¿”å›ç»“æœã€‚è¿™å¯¹äºéœ€è¦å¤§é‡æ—¶é—´è¿è¡Œçš„å‡½æ•°ç‰¹åˆ«æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™ä¸ªæ²¡æœ‰å¤‡å¿˜å½•çš„å‡½æ•°ä¸­ï¼Œç»“æœåœ¨ä¸€ç§’é’Ÿåè¢«è¿”å›ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">sleepy-identity&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Returns the given value after 1 second&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">x&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">Thread/sleep&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">sleepy-identity&lt;/span> &lt;span class="s">&amp;#34;Mr. Fantastico&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;Mr. Fantastico&amp;#34; after 1 second&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">sleepy-identity&lt;/span> &lt;span class="s">&amp;#34;Mr. Fantastico&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;Mr. Fantastico&amp;#34; after 1 second&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œå¦‚æœä½ ç”¨&lt;code>memoize&lt;/code>åˆ›å»ºä¸€ä¸ªæ–°çš„ã€è®°å¿†åŒ–çš„&lt;code>sleepy-identity&lt;/code>ç‰ˆæœ¬ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šç­‰å¾…ä¸€ç§’é’Ÿï¼›éšåçš„æ¯ä¸ªå‡½æ•°è°ƒç”¨ä¼šç«‹å³è¿”å›ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">memo-sleepy-identity&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">memoize&lt;/span> &lt;span class="nv">sleepy-identity&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">memo-sleepy-identity&lt;/span> &lt;span class="s">&amp;#34;Mr. Fantastico&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;Mr. Fantastico&amp;#34; after 1 second&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">memo-sleepy-identity&lt;/span> &lt;span class="s">&amp;#34;Mr. Fantastico&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;Mr. Fantastico&amp;#34; immediately&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¾ˆé…·å•Š! ä»è¿™é‡Œå¼€å§‹ï¼Œ&lt;code>memo-sleepy-identity&lt;/code>åœ¨è°ƒç”¨`&amp;ldquo;Mr.Fantastico &amp;ldquo;æ—¶å°†ä¸ä¼šäº§ç”Ÿæœ€åˆçš„ä¸€ç§’é’Ÿçš„è´¹ç”¨ã€‚è¿™ä¸ªå®ç°å¯¹äºé‚£äº›è®¡ç®—å¯†é›†å‹çš„å‡½æ•°æˆ–è€…æå‡ºç½‘ç»œè¯·æ±‚çš„å‡½æ•°å¾ˆæœ‰ç”¨ã€‚&lt;/p>
&lt;h2 id="peg-thing">Peg Thing&lt;/h2>
&lt;p>æ˜¯æ—¶å€™äº†! æ˜¯æ—¶å€™ç”¨ä½ åˆ°ç›®å‰ä¸ºæ­¢æ‰€å­¦åˆ°çš„ä¸€åˆ‡æ¥æ„å»º Peg Thing çš„ç»ˆç«¯å®ç°äº†ï¼šä¸å¯å˜çš„æ•°æ®ç»“æ„ã€æ‡’æƒ°åºåˆ—ã€çº¯å‡½æ•°ã€é€’å½’&amp;ndash;ä¸€åˆ‡ï¼è¿™å°†æœ‰åŠ©äºä½ ç†è§£å¦‚ä½•å°†è¿™äº›æ¦‚å¿µå’ŒæŠ€æœ¯ç»“åˆèµ·æ¥è§£å†³æ›´å¤§çš„é—®é¢˜ã€‚è¿™æ ·åšå°†å¸®åŠ©ä½ ç†è§£å¦‚ä½•ç»“åˆè¿™äº›æ¦‚å¿µå’ŒæŠ€æœ¯æ¥è§£å†³æ›´å¤§çš„é—®é¢˜ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•å¯¹ç©å®¶çš„æ¯ä¸€æ¬¡ç§»åŠ¨æ‰€äº§ç”Ÿçš„å˜åŒ–è¿›è¡Œå»ºæ¨¡ï¼Œè€Œä¸å¿…åƒåœ¨ OOP ä¸­é‚£æ ·å¯¹å¯¹è±¡è¿›è¡Œå˜å¼‚ã€‚&lt;/p>
&lt;p>ä¸ºäº†æ„å»ºæ¸¸æˆï¼Œä½ å°†é¦–å…ˆå­¦ä¹ æ¸¸æˆçš„æœºåˆ¶ä»¥åŠå¦‚ä½•å¯åŠ¨å’Œæ’­æ”¾ç¨‹åºã€‚ç„¶åï¼Œæˆ‘å°†è§£é‡Šä»£ç çš„ç»„ç»‡ã€‚æœ€åï¼Œæˆ‘å°†å¯¹æ¯ä¸ªå‡½æ•°è¿›è¡Œè®²è§£ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥åœ¨*&lt;a class="link" href="https://www.nostarch.com/clojure/" target="_blank" rel="noopener"
>https://www.nostarch.com/clojure/&lt;/a>*æ‰¾åˆ° Peg Thing çš„å®Œæ•´ä»£ç åº“ã€‚&lt;/p>
&lt;h2 id="æ’­æ”¾">æ’­æ”¾&lt;/h2>
&lt;p>å¦‚å‰æ‰€è¿°ï¼ŒPeg Thing æ˜¯åŸºäºä»å¤è‡³ä»Šæµä¼ ä¸‹æ¥çš„ç§˜å¯†æ€ç»´ç£¨ç»ƒå·¥å…·ï¼Œç°åœ¨ç”± Cracker Barrel å‘è¡Œã€‚&lt;/p>
&lt;p>å¦‚æœä½ ä¸ç†Ÿæ‚‰è¿™ä¸ªæ¸¸æˆï¼Œä»¥ä¸‹æ˜¯æ¸¸æˆçš„æœºåˆ¶ã€‚ä½ å¼€å§‹æ—¶æœ‰ä¸€ä¸ªä¸‰è§’å½¢çš„æ£‹ç›˜ï¼Œä¸Šé¢å¸ƒæ»¡äº†é’‰å­çš„å­”ï¼Œå…¶ä¸­ä¸€ä¸ªå­”ç¼ºå°‘ä¸€ä¸ªé’‰å­ï¼Œå¦‚å›¾ 5-1 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/functional-programming/peg-thing-starting.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>å›¾ 5-1ï¼šPeg Thing çš„åˆå§‹è®¾ç½®&lt;/p>
&lt;p>æ¸¸æˆçš„ç›®çš„æ˜¯å°½å¯èƒ½å¤šåœ°ç§»é™¤é’‰å­ã€‚ä½ é€šè¿‡*è·³è¿‡é’‰å­æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚åœ¨å›¾ 5-2 ä¸­ï¼Œå›¾é’‰ A è·³è¿‡å›¾é’‰ B è¿›å…¥ç©ºæ´ï¼Œä½ å°±æŠŠå›¾é’‰ B ä»æ£‹ç›˜ä¸Šç§»èµ°ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="https://www.braveclojure.com/assets/images/cftbat/functional-programming/peg-thing-jumping.png" target="_blank" rel="noopener"
>img&lt;/a>&lt;/p>
&lt;p>å›¾ 5-2ï¼šè·³è¿‡ä¸€ä¸ªé’‰å­ï¼ŒæŠŠå®ƒä»æ£‹ç›˜ä¸Šç§»èµ°ã€‚&lt;/p>
&lt;p>è¦å¯åŠ¨ Peg Thingï¼Œè¯·ä¸‹è½½ä»£ç ï¼Œç„¶ååœ¨&lt;em>pegthing&lt;/em>ç›®å½•ä¸‹çš„ç»ˆç«¯è¿è¡Œ&lt;code>lein run&lt;/code>ã€‚å‡ºç°ä¸€ä¸ªæç¤ºï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Get&lt;/span> &lt;span class="nv">ready&lt;/span> &lt;span class="nv">to&lt;/span> &lt;span class="nv">play&lt;/span> &lt;span class="nv">Peg&lt;/span> &lt;span class="nv">Thing!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">How&lt;/span> &lt;span class="nv">many&lt;/span> &lt;span class="nv">rows?&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ å¯ä»¥è¾“å…¥æ£‹ç›˜çš„è¡Œæ•°ï¼Œä½¿ç”¨&lt;code>5&lt;/code>ä½œä¸ºé»˜è®¤å€¼ã€‚å¦‚æœä½ æƒ³è¦äº”è¡Œï¼Œå°±æŒ‰å›è½¦é”®ï¼ˆå¦åˆ™ï¼Œè¾“å…¥ä¸€ä¸ªæ•°å­—å¹¶æŒ‰å›è½¦é”®ï¼‰ã€‚ç„¶åä½ ä¼šçœ‹åˆ°è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Here&lt;/span>&lt;span class="ss">&amp;#39;s&lt;/span> &lt;span class="nv">your&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="err">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">a0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">b0&lt;/span> &lt;span class="nv">c0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">d0&lt;/span> &lt;span class="nv">e0&lt;/span> &lt;span class="nv">f0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">g0&lt;/span> &lt;span class="nv">h0&lt;/span> &lt;span class="nv">i0&lt;/span> &lt;span class="nv">j0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">k0&lt;/span> &lt;span class="nv">l0&lt;/span> &lt;span class="nv">m0&lt;/span> &lt;span class="nv">n0&lt;/span> &lt;span class="nv">o0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Remove&lt;/span> &lt;span class="nv">which&lt;/span> &lt;span class="nv">peg?&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">e&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¯ä¸ªå­—æ¯ä»£è¡¨æ£‹ç›˜ä¸Šçš„ä¸€ä¸ªä½ç½®ã€‚æ•°å­—&lt;code>0&lt;/code>ï¼ˆåº”è¯¥æ˜¯è“è‰²çš„ï¼Œä½†å¦‚æœä¸æ˜¯ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼‰è¡¨ç¤ºä¸€ä¸ªä½ç½®è¢«å¡«æ»¡ã€‚åœ¨æ¸¸æˆå¼€å§‹ä¹‹å‰ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªé’‰å­æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥æç¤ºè¦æ±‚ä½ è¾“å…¥ç¬¬ä¸€ä¸ªè¦ç§»é™¤çš„é’‰å­çš„ä½ç½®ã€‚é»˜è®¤æ˜¯ä¸­é—´çš„é’‰å­ï¼Œ`e&amp;rsquo;ï¼Œä½†ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªä¸åŒçš„ä½ç½®ã€‚ç§»èµ°æ£‹å­åï¼Œä½ ä¼šçœ‹åˆ°è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Here&lt;/span>&lt;span class="ss">&amp;#39;s&lt;/span> &lt;span class="nv">your&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="err">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">a0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">b0&lt;/span> &lt;span class="nv">c0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">d0&lt;/span> &lt;span class="nv">e-&lt;/span> &lt;span class="nv">f0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">g0&lt;/span> &lt;span class="nv">h0&lt;/span> &lt;span class="nv">i0&lt;/span> &lt;span class="nv">j0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">k0&lt;/span> &lt;span class="nv">l0&lt;/span> &lt;span class="nv">m0&lt;/span> &lt;span class="nv">n0&lt;/span> &lt;span class="nv">o0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Move&lt;/span> &lt;span class="nv">from&lt;/span> &lt;span class="nv">where&lt;/span> &lt;span class="nv">to&lt;/span> &lt;span class="nv">where?&lt;/span> &lt;span class="nv">Enter&lt;/span> &lt;span class="nv">two&lt;/span> &lt;span class="nv">letters&lt;/span>&lt;span class="err">:&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œ&lt;code>e&lt;/code>ä½ç½®ç°åœ¨æœ‰ä¸€ä¸ªç ´æŠ˜å·ï¼Œ&lt;code>-&lt;/code>ï¼ˆåº”è¯¥æ˜¯çº¢è‰²çš„ï¼Œä½†å¦‚æœä¸æ˜¯ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼‰ã€‚è¿™ä¸ªç ´æŠ˜å·è¡¨ç¤ºè¿™ä¸ªä½ç½®æ˜¯ç©ºçš„ã€‚è¦ç§»åŠ¨ï¼Œä½ è¦è¾“å…¥ä½ æƒ³*æ‹¿èµ·çš„æ£‹å­çš„ä½ç½®ï¼Œç„¶åæ˜¯ä½ æƒ³æŠŠå®ƒæ”¾åœ¨çš„ç©ºä½ç½®çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¾“å…¥`le&amp;rsquo;ï¼Œä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Here&lt;/span>&lt;span class="ss">&amp;#39;s&lt;/span> &lt;span class="nv">your&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="err">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">a0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">b0&lt;/span> &lt;span class="nv">c0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">d0&lt;/span> &lt;span class="nv">e0&lt;/span> &lt;span class="nv">f0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">g0&lt;/span> &lt;span class="nv">h-&lt;/span> &lt;span class="nv">i0&lt;/span> &lt;span class="nv">j0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">k0&lt;/span> &lt;span class="nv">l-&lt;/span> &lt;span class="nv">m0&lt;/span> &lt;span class="nv">n0&lt;/span> &lt;span class="nv">o0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Move&lt;/span> &lt;span class="nv">from&lt;/span> &lt;span class="nv">where&lt;/span> &lt;span class="nv">to&lt;/span> &lt;span class="nv">where?&lt;/span> &lt;span class="nv">Enter&lt;/span> &lt;span class="nv">two&lt;/span> &lt;span class="nv">letters&lt;/span>&lt;span class="err">:&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ æŠŠæ£‹å­ä»&lt;code>l&lt;/code>ç§»åˆ°&lt;code>e&lt;/code>ï¼Œè·³è¿‡&lt;code>h&lt;/code>ï¼Œæ ¹æ®å›¾ 5-2 æ‰€ç¤ºçš„è§„åˆ™ç§»èµ°å®ƒçš„æ£‹å­ã€‚æ¸¸æˆç»§ç»­æç¤ºä½ èµ°æ£‹ï¼Œç›´åˆ°æ²¡æœ‰æ£‹å­å¯ç”¨ä¸ºæ­¢ï¼Œè¿™æ—¶å®ƒå°±ä¼šæç¤ºä½ å†æ¬¡ä¸‹æ£‹ã€‚&lt;/p>
&lt;h3 id="ä»£ç ç»„ç»‡">ä»£ç ç»„ç»‡&lt;/h3>
&lt;p>è¯¥ç¨‹åºå¿…é¡»å¤„ç†å››ä¸ªä¸»è¦ä»»åŠ¡ï¼Œæºä»£ç ä¹Ÿç›¸åº”åœ°ç»„ç»‡èµ·æ¥ï¼Œæ¯ä¸ªä»»åŠ¡çš„å‡½æ•°éƒ½å½’ä¸ºä¸€ç»„ã€‚&lt;/p>
&lt;ol>
&lt;li>åˆ›å»ºä¸€ä¸ªæ–°çš„æ£‹ç›˜&lt;/li>
&lt;li>è¿”å›ä¸€ä¸ªå¸¦æœ‰æ£‹æ‰‹è¡ŒåŠ¨ç»“æœçš„æ£‹ç›˜&lt;/li>
&lt;li>ç”¨æ–‡å­—è¡¨ç¤ºæ£‹ç›˜&lt;/li>
&lt;li>å¤„ç†ç”¨æˆ·äº’åŠ¨&lt;/li>
&lt;/ol>
&lt;p>å…³äºç»„ç»‡ç»“æ„è¿˜æœ‰ä¸¤ç‚¹ã€‚é¦–å…ˆï¼Œä»£ç æœ‰ä¸€ä¸ªåŸºæœ¬çš„&lt;em>æ¶æ„&lt;/em>ï¼Œæˆ–æ¦‚å¿µæ€§çš„ç»„ç»‡ï¼Œç”±ä¸¤å±‚ç»„æˆã€‚é¡¶å±‚ç”±å¤„ç†ç”¨æˆ·äº¤äº’çš„å‡½æ•°ç»„æˆã€‚è¿™äº›å‡½æ•°äº§ç”Ÿäº†ç¨‹åºçš„æ‰€æœ‰å‰¯ä½œç”¨ï¼Œæ‰“å°å‡ºæ£‹ç›˜å¹¶ä¸ºç©å®¶çš„äº’åŠ¨æä¾›æç¤ºã€‚è¿™ä¸€å±‚çš„å‡½æ•°ä½¿ç”¨åº•å±‚çš„å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ£‹ç›˜ï¼Œè¿›è¡Œç§»åŠ¨ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–‡æœ¬è¡¨è¿°ï¼Œä½†åº•å±‚çš„å‡½æ•°å®Œå…¨ä¸ä½¿ç”¨é¡¶å±‚çš„å‡½æ•°ã€‚å³ä½¿æ˜¯è¿™ä¹ˆå°çš„ç¨‹åºï¼Œä¸€ä¸ªå°å°çš„æ¶æ„ä¹Ÿæœ‰åŠ©äºä½¿ä»£ç æ›´å®¹æ˜“ç®¡ç†ã€‚&lt;/p>
&lt;p>ç¬¬äºŒï¼Œæˆ‘å°½å¯èƒ½åœ°å°†ä»»åŠ¡åˆ†è§£æˆå°çš„å‡½æ•°ï¼Œä»¥ä¾¿æ¯ä¸ªå‡½æ•°éƒ½åšä¸€ä¸ªå¾®å°çš„ã€å¯ç†è§£çš„ä»»åŠ¡ã€‚å…¶ä¸­ä¸€äº›å‡½æ•°åªè¢«å¦å¤–ä¸€ä¸ªå‡½æ•°ä½¿ç”¨ã€‚æˆ‘å‘ç°è¿™å¾ˆæœ‰å¸®åŠ©ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©æˆ‘ä¸ºæ¯ä¸ªå¾®å°çš„å­ä»»åŠ¡å‘½åï¼Œä½¿æˆ‘èƒ½å¤Ÿæ›´å¥½åœ°è¡¨è¾¾ä»£ç çš„æ„å›¾ã€‚&lt;/p>
&lt;p>ä½†åœ¨æ‰€æœ‰çš„æ¶æ„ä¹‹å‰ï¼Œè¿˜æœ‰è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">ns &lt;/span>&lt;span class="nv">pegthing.core&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">require&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">clojure.set&lt;/span> &lt;span class="ss">:as&lt;/span> &lt;span class="nv">set&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="ss">:gen-class&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">declare &lt;/span>&lt;span class="nv">successful-move&lt;/span> &lt;span class="nv">prompt-move&lt;/span> &lt;span class="nv">game-over&lt;/span> &lt;span class="nv">query-rows&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘å°†åœ¨ç¬¬å…­ç« è¯¦ç»†è§£é‡Šè¿™é‡Œçš„å‡½æ•°ã€‚å¦‚æœä½ å¥½å¥‡è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Œç®€çŸ­çš„è§£é‡Šæ˜¯ï¼š&lt;code>(&lt;/code>require &lt;code>[&lt;/code>clojure&lt;code>.set :as set])&lt;/code>å…è®¸ä½ è½»æ¾ä½¿ç”¨&lt;code>clojure.set&lt;/code>å‘½åç©ºé—´çš„å‡½æ•°ï¼Œ&lt;code>(:gen-class)&lt;/code>å…è®¸ä½ ä»å‘½ä»¤è¡Œè¿è¡Œç¨‹åºï¼Œ&lt;code>(declaration successful-move prompt-move game-over query-rows)&lt;/code>å…è®¸å‡½æ•°åœ¨è¢«å®šä¹‰ä¹‹å‰å¼•ç”¨è¿™äº›åç§°ã€‚å¦‚æœè¿™è¿˜ä¸å¤ªæ˜ç™½ï¼Œç›¸ä¿¡æˆ‘å¾ˆå¿«å°±ä¼šè§£é‡Šã€‚&lt;/p>
&lt;h3 id="åˆ›å»ºæ£‹ç›˜">åˆ›å»ºæ£‹ç›˜&lt;/h3>
&lt;p>ä½ ç”¨æ¥è¡¨ç¤ºæ£‹ç›˜çš„æ•°æ®ç»“æ„åº”è¯¥ä½¿ä½ èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°æ‰“å°æ£‹ç›˜ï¼Œæ£€æŸ¥æ£‹æ‰‹æ˜¯å¦ä¸‹äº†ä¸€æ­¥æœ‰æ•ˆçš„æ£‹ï¼Œå®é™…æ‰§è¡Œä¸€æ­¥æ£‹ï¼Œä»¥åŠæ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸã€‚ä½ å¯ä»¥ç”¨å¾ˆå¤šæ–¹å¼æ¥æ„é€ æ£‹ç›˜ï¼Œä»¥å®ç°è¿™äº›ä»»åŠ¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å°†ç”¨ä¸€ä¸ª Map æ¥è¡¨ç¤ºæ£‹ç›˜ï¼ŒMap ä¸Šæœ‰å¯¹åº”äºæ¯ä¸ªæ£‹ç›˜ä½ç½®çš„æ•°å­—é”®å’ŒåŒ…å«è¯¥ä½ç½®è¿æ¥ä¿¡æ¯çš„å€¼ã€‚è¯¥ Map è¿˜å°†åŒ…å«ä¸€ä¸ª&lt;code>:rows&lt;/code>é”®ï¼Œå­˜å‚¨è¡Œçš„æ€»æ•°ã€‚å›¾ 5-3 æ˜¾ç¤ºäº†ä¸€ä¸ªæœ‰æ¯ä¸ªä½ç½®ç¼–å·çš„æ£‹ç›˜ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/functional-programming/peg-thing-data-structure.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>å›¾ 5-3ï¼šæœ‰ç¼–å·çš„é’‰å­æ¿&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä¸ºè¡¨ç¤ºå®ƒè€Œå»ºç«‹çš„æ•°æ®ç»“æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="mi">3&lt;/span>, &lt;span class="mi">4&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">2&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">9&lt;/span> &lt;span class="mi">5&lt;/span>, &lt;span class="mi">7&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">3&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">6&lt;/span>, &lt;span class="mi">8&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">13&lt;/span> &lt;span class="mi">8&lt;/span>, &lt;span class="mi">11&lt;/span> &lt;span class="mi">7&lt;/span>, &lt;span class="mi">6&lt;/span> &lt;span class="mi">5&lt;/span>, &lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">5&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">14&lt;/span> &lt;span class="mi">9&lt;/span>, &lt;span class="mi">12&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">6&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="mi">10&lt;/span>, &lt;span class="mi">13&lt;/span> &lt;span class="mi">9&lt;/span>, &lt;span class="mi">4&lt;/span> &lt;span class="mi">5&lt;/span>, &lt;span class="mi">1&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">7&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">9&lt;/span> &lt;span class="mi">8&lt;/span>, &lt;span class="mi">2&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">8&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">9&lt;/span>, &lt;span class="mi">3&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">9&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="mi">8&lt;/span>, &lt;span class="mi">2&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">10&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">8&lt;/span> &lt;span class="mi">9&lt;/span>, &lt;span class="mi">3&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">11&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">13&lt;/span> &lt;span class="mi">12&lt;/span>, &lt;span class="mi">4&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">12&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">14&lt;/span> &lt;span class="mi">13&lt;/span>, &lt;span class="mi">5&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">13&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="mi">14&lt;/span>, &lt;span class="mi">11&lt;/span> &lt;span class="mi">12&lt;/span>, &lt;span class="mi">6&lt;/span> &lt;span class="mi">9&lt;/span>, &lt;span class="mi">4&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">14&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">12&lt;/span> &lt;span class="mi">13&lt;/span>, &lt;span class="mi">5&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">15&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">13&lt;/span> &lt;span class="mi">14&lt;/span>, &lt;span class="mi">6&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">}}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">:rows&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆåœ¨ä½ ç©æ¸¸æˆçš„æ—¶å€™ï¼Œæ¯ä¸ªä½ç½®éƒ½ç”¨å­—æ¯è¡¨ç¤ºï¼Œè€Œåœ¨è¿™é‡Œï¼Œä½ç½®å´ç”¨æ•°å­—è¡¨ç¤ºã€‚ä½¿ç”¨æ•°å­—ä½œä¸ºå†…éƒ¨è¡¨ç¤ºï¼Œå¯ä»¥è®©ä½ åœ¨éªŒè¯å’Œä¸‹æ£‹æ—¶åˆ©ç”¨æ£‹ç›˜å¸ƒå±€çš„ä¸€äº›æ•°å­¦ç‰¹æ€§ã€‚å¦ä¸€æ–¹é¢ï¼Œå­—æ¯åˆ™æ›´é€‚åˆäºæ˜¾ç¤ºï¼Œå› ä¸ºå®ƒä»¬åªå ç”¨ä¸€ä¸ªå­—ç¬¦ç©ºé—´ã€‚ä¸€äº›è½¬æ¢å‡½æ•°åœ¨&lt;a class="link" href="https://www.braveclojure.com/functional-programming/#Anchor-19" target="_blank" rel="noopener"
>ç¬¬ 120 é¡µçš„ &amp;ldquo;æ¸²æŸ“å’Œæ‰“å°æ£‹ç›˜&amp;rdquo;&lt;/a>ä¸­æœ‰æ‰€ä»‹ç»ã€‚&lt;/p>
&lt;p>åœ¨æ•°æ®ç»“æ„ä¸­ï¼Œæ¯ä¸ªä½ç½®éƒ½ä¸ä¸€ä¸ª Map ç›¸å…³è”ï¼Œå…¶å†…å®¹æ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>, &lt;span class="ss">:connection&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="mi">3&lt;/span>, &lt;span class="mi">4&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}}&lt;/span>&lt;span class="nv">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>pegged &amp;ldquo;çš„å«ä¹‰å¾ˆæ¸…æ¥šï¼›å®ƒè¡¨ç¤ºè¯¥ä½ç½®æ˜¯å¦æœ‰ä¸€ä¸ªé’‰å­ã€‚`:connections&amp;rsquo;å°±æ¯”è¾ƒéšè”½äº†ã€‚å®ƒæ˜¯ä¸€ä¸ª Mapï¼Œæ¯ä¸ªé”®æ ‡è¯†ä¸€ä¸ª&lt;em>åˆæ³•çš„ç›®çš„åœ°ï¼Œæ¯ä¸ªå€¼ä»£è¡¨&lt;/em>å°†è¢«&lt;em>è·³è¿‡çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œä½ç½® 1 çš„æ£‹å­å¯ä»¥&lt;/em>è·³åˆ°*ä½ç½® 6ï¼Œ&lt;em>è¶Šè¿‡&lt;/em>ä½ç½® 3ã€‚è¿™å¯èƒ½çœ‹èµ·æ¥å¾ˆè½åï¼Œä½†å½“ä½ çœ‹åˆ°æ£‹æ­¥éªŒè¯æ˜¯å¦‚ä½•å®ç°çš„æ—¶å€™ï¼Œä½ å°±ä¼šæ˜ç™½å…¶ä¸­çš„é“ç†ã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ å·²ç»çœ‹åˆ°äº†ä»£è¡¨æ£‹ç›˜çš„æœ€ç»ˆ Map åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æ¢ç´¢åœ¨ç¨‹åºä¸­å®é™…å»ºç«‹è¿™ä¸ª Map çš„å‡½æ•°äº†ã€‚ä½ ä¸ä¼šç®€å•åœ°å¼€å§‹éšæ„åœ°åˆ†é…å¯å˜çŠ¶æ€æ¥è¡¨ç¤ºæ¯ä¸ªä½ç½®ä»¥åŠå®ƒæ˜¯å¦è¢«é’‰ä½ã€‚ç›¸åï¼Œä½ å°†ä½¿ç”¨åµŒå¥—çš„é€’å½’å‡½æ•°è°ƒç”¨æ¥é€ä¸ªå»ºç«‹æœ€ç»ˆçš„æ£‹ç›˜ä½ç½®ã€‚è¿™ç±»ä¼¼äºä½ ä¹‹å‰åˆ›å»ºé­…åŠ›é•œå¤´æ ‡é¢˜çš„æ–¹å¼ï¼Œé€šè¿‡å°†å‚æ•°ä¼ é€’ç»™ä¸€è¿ä¸²çš„å‡½æ•°ï¼Œä»è¾“å…¥ä¸­è·å¾—æ–°çš„æ•°æ®ï¼Œä»è€Œå¾—åˆ°æœ€ç»ˆç»“æœã€‚&lt;/p>
&lt;p>æœ¬èŠ‚ä»£ç ä¸­çš„å‰å‡ ä¸ªè¡¨è¾¾å¼æ˜¯å…³äºä¸‰è§’å½¢æ•°çš„ã€‚ä¸‰è§’å½¢æ•°æ˜¯ç”±å‰&lt;em>n&lt;/em>ä¸ªè‡ªç„¶æ•°ç›¸åŠ äº§ç”Ÿçš„ã€‚ç¬¬ä¸€ä¸ªä¸‰è§’æ•°æ˜¯ 1ï¼Œç¬¬äºŒä¸ªæ˜¯ 3ï¼ˆ1+2ï¼‰ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ 6ï¼ˆ1+2+3ï¼‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™äº›æ•°å­—å¾ˆå¥½åœ°ä¸æ£‹ç›˜ä¸Šæ¯ä¸€è¡Œæœ«å°¾çš„ä½ç½®æ•°å­—ç›¸ä¸€è‡´ï¼Œè¿™å°†æˆä¸ºä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å±æ€§ã€‚é¦–å…ˆï¼Œä½ å®šä¹‰äº†å‡½æ•°&lt;code>tri*&lt;/code>ï¼Œå®ƒå¯ä»¥åˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢æ•°å­—çš„æ‡’æ•£åºåˆ—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">tri*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Generates æƒ°æ€§åºåˆ—uence of triangular numbers&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">tri*&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([&lt;/span>&lt;span class="nv">sum&lt;/span> &lt;span class="nv">n&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">new-sum&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="nv">sum&lt;/span> &lt;span class="nv">n&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">cons &lt;/span>&lt;span class="nv">new-sum&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">lazy-seq&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">tri*&lt;/span> &lt;span class="nv">new-sum&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="nv">n&lt;/span>&lt;span class="p">)))))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¿«é€Ÿå›é¡¾ä¸€ä¸‹å·¥ä½œåŸç†ï¼Œè°ƒç”¨æ²¡æœ‰å‚æ•°çš„&lt;code>tri*&lt;/code>ä¼šé€’å½’è°ƒç”¨&lt;code>(tri* 0 1)&lt;/code>ã€‚è¿™å°†è¿”å›ä¸€ä¸ªæ‡’æƒ°åˆ—è¡¨ï¼Œå…¶å…ƒç´ æ˜¯ &amp;ldquo;new-sum&amp;rdquo;ï¼Œåœ¨æœ¬ä¾‹ä¸­å®ƒçš„å€¼ä¸º &amp;ldquo;1&amp;rdquo;ã€‚æ‡’æƒ°åˆ—è¡¨åŒ…æ‹¬ä¸€ä¸ªé…æ–¹ï¼Œç”¨äºåœ¨è¯·æ±‚æ—¶ç”Ÿæˆåˆ—è¡¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚ç¬¬å››ç« æ‰€è¿°ã€‚&lt;/p>
&lt;p>ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼è°ƒç”¨&lt;code>tri*&lt;/code>ï¼Œå®é™…ä¸Šæ˜¯åˆ›å»ºæ‡’æƒ°åºåˆ—å¹¶å°†å…¶ç»‘å®šåˆ°&lt;code>tri&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">tri&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">tri*&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥éªŒè¯å®ƒæ˜¯å¦çœŸçš„æœ‰æ•ˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">take &lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="nv">tri&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; (1 3 6 10 15)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥çš„å‡ ä¸ªå‡½æ•°å¯¹ä¸‰è§’å½¢æ•°çš„åºåˆ—è¿›è¡Œæ“ä½œã€‚&lt;code>triangular?&lt;/code>æ‰¾å‡ºå®ƒçš„å‚æ•°æ˜¯å¦åœ¨&lt;code>tri&lt;/code>æ‡’æƒ°åºåˆ—ä¸­ã€‚å®ƒé€šè¿‡ä½¿ç”¨&lt;code>take-while&lt;/code>åˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢æ•°åˆ—ï¼Œå…¶æœ€åä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå°äºæˆ–ç­‰äºå‚æ•°çš„ä¸‰è§’å½¢æ•°ã€‚ç„¶åå®ƒå°†æœ€åä¸€ä¸ªå…ƒç´ ä¸å‚æ•°è¿›è¡Œæ¯”è¾ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">triangular?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Is the number triangular? e.g. 1, 3, 6, 10, 15, etc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">n&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">= &lt;/span>&lt;span class="nv">n&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">last &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">take-while &lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">&amp;gt;= &lt;/span>&lt;span class="nv">n&lt;/span> &lt;span class="nv">%&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">tri&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">triangular?&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">triangular?&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥æ˜¯&lt;code>row-tri&lt;/code>ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªè¡Œå·ï¼Œå¹¶ç»™å‡ºè¯¥è¡Œæœ«å°¾çš„ä¸‰è§’å½¢æ•°å­—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">row-tri&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;The triangular number at the end of row n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">n&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">last &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">take &lt;/span>&lt;span class="nv">n&lt;/span> &lt;span class="nv">tri&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">row-tri&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">row-tri&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">row-tri&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 6&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åï¼Œè¿˜æœ‰&lt;code>row-num&lt;/code>ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ£‹ç›˜ä½ç½®ï¼Œå¹¶è¿”å›å®ƒæ‰€å±çš„è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">row-num&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Returns row number the position belongs to: pos 1 in row 1,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> positions 2 and 3 in row 2, etc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">count &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">take-while &lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">&amp;gt; &lt;/span>&lt;span class="nv">pos&lt;/span> &lt;span class="nv">%&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">tri&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">row-num&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">row-num&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹‹åæ˜¯&lt;code>connect&lt;/code>ï¼Œå®ƒè¢«ç”¨æ¥åœ¨ä¸¤ä¸ªä½ç½®ä¹‹é—´å®é™…å½¢æˆç›¸äº’è¿æ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">connect&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Form a mutual connection between two positions&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span> &lt;span class="nv">neighbor&lt;/span> &lt;span class="nv">destination&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">&amp;lt;= &lt;/span>&lt;span class="nv">destination&lt;/span> &lt;span class="nv">max-pos&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">reduce &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">new-board&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">p1&lt;/span> &lt;span class="nv">p2&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">assoc-in&lt;/span> &lt;span class="nv">new-board&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">p1&lt;/span> &lt;span class="ss">:connections&lt;/span> &lt;span class="nv">p2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">neighbor&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">board&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[[&lt;/span>&lt;span class="nv">pos&lt;/span> &lt;span class="nv">destination&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">destination&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">board&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">connect&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="mi">15&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {1 {:connections {4 2}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>connect&lt;/code>åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯æ£€æŸ¥ç›®çš„åœ°æ˜¯å¦çœŸçš„æ˜¯æ£‹ç›˜ä¸Šçš„ä¸€ä¸ªä½ç½®ï¼Œç¡®è®¤å®ƒæ˜¯å¦å°äºæ£‹ç›˜çš„æœ€å¤§ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰äº”è¡Œï¼Œæœ€å¤§ä½ç½®æ˜¯ 15ã€‚ç„¶è€Œï¼Œå½“æ¸¸æˆæ£‹ç›˜è¢«åˆ›å»ºæ—¶ï¼Œ&lt;code>connect&lt;/code>å‡½æ•°å°†è¢«è°ƒç”¨ï¼Œå‚æ•°ä¸º&lt;code>(connect {} 15 7 16 22)&lt;/code>ã€‚&lt;code>connect&lt;/code>å¼€å¤´çš„&lt;code>if&lt;/code>è¯­å¥ç¡®ä¿ä½ çš„ç¨‹åºä¸å…è®¸è¿™ç§ç¦»è°±çš„è¿æ¥ï¼Œå½“ä½ è¦æ±‚å®ƒåšä¸€äº›æ„šè ¢çš„äº‹æƒ…æ—¶ï¼Œå®ƒåªæ˜¯è¿”å›æœªä¿®æ”¹çš„æ£‹ç›˜ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œ&lt;code>connect&lt;/code>é€šè¿‡&lt;code>reduce&lt;/code>ä½¿ç”¨é€’å½’ï¼Œé€æ­¥å»ºç«‹èµ·æ£‹ç›˜çš„æœ€ç»ˆçŠ¶æ€ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ æ­£åœ¨å‡å°‘åµŒå¥— Vector&lt;code>[[1 4] [4 1]]ã€‚è¿™å°±æ˜¯å…è®¸ä½ è¿”å›ä¸€ä¸ªæ›´æ–°çš„æ£‹ç›˜ï¼Œ&lt;/code>pos&amp;rsquo;å’Œ`destination&amp;rsquo;ï¼ˆ1 å’Œ 4ï¼‰åœ¨å®ƒä»¬çš„è¿æ¥ä¸­éƒ½æŒ‡å‘å¯¹æ–¹ã€‚&lt;/p>
&lt;p>ä¼ ç»™&lt;code>reduce&lt;/code>çš„åŒ¿åå‡½æ•°ä½¿ç”¨äº†ä¸€ä¸ªä½ ä»¥å‰æ²¡æœ‰è§è¿‡çš„å‡½æ•°&lt;code>assoc-in&lt;/code>ã€‚å‡½æ•°&lt;code>get-in&lt;/code>å¯ä»¥è®©ä½ åœ¨åµŒå¥—çš„ Map ä¸­æŸ¥æ‰¾å€¼ï¼Œè€Œ&lt;code>assoc-in&lt;/code>å¯ä»¥è®©ä½ åœ¨æŒ‡å®šçš„åµŒå¥—ä¸­è¿”å›ä¸€ä¸ªå¸¦æœ‰ç»™å®šå€¼çš„æ–° Mapã€‚ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">assoc-in&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="ss">:cookie&lt;/span> &lt;span class="ss">:monster&lt;/span> &lt;span class="ss">:vocals&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="s">&amp;#34;Finntroll&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {:cookie {:monster {:vocals &amp;#34;Finntroll&amp;#34;}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">get-in&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:cookie&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:monster&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:vocals&lt;/span> &lt;span class="s">&amp;#34;Finntroll&amp;#34;&lt;/span>&lt;span class="p">}}}&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="ss">:cookie&lt;/span> &lt;span class="ss">:monster&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {:vocals &amp;#34;Finntroll&amp;#34;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">assoc-in&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="ss">:connections&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {1 {:connections {4 2}}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œæ–°çš„ã€åµŒå¥—çš„ Map è¢«åˆ›å»ºï¼Œä»¥é€‚åº”æ‰€æœ‰æä¾›çš„é”®ã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªè¿æ¥ä¸¤ä¸ªä½ç½®çš„æ–¹æ³•ï¼Œä½†ç¨‹åºé¦–å…ˆåº”è¯¥å¦‚ä½•é€‰æ‹©ä¸¤ä¸ªä½ç½®æ¥è¿æ¥å‘¢ï¼Ÿè¿™ç”±&lt;code>connect-right&lt;/code>ã€&lt;code>connect-down-left&lt;/code>å’Œ&lt;code>connect-down-right&lt;/code>æ¥å¤„ç†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">connect-right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">neighbor&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="nv">pos&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">destination&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="nv">neighbor&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">if-not &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">or &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">triangular?&lt;/span> &lt;span class="nv">neighbor&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">triangular?&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">connect&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span> &lt;span class="nv">neighbor&lt;/span> &lt;span class="nv">destination&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">board&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">connect-down-left&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">row&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">row-num&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">neighbor&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="nv">row&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">destination&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="nv">row&lt;/span> &lt;span class="nv">neighbor&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">connect&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span> &lt;span class="nv">neighbor&lt;/span> &lt;span class="nv">destination&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">connect-down-right&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">row&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">row-num&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">neighbor&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="nv">row&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">destination&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="nv">row&lt;/span> &lt;span class="nv">neighbor&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">connect&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span> &lt;span class="nv">neighbor&lt;/span> &lt;span class="nv">destination&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™äº›å‡½æ•°åˆ†åˆ«å–äº†æ£‹ç›˜çš„æœ€å¤§ä½ç½®å’Œä¸€ä¸ªæ£‹ç›˜çš„ä½ç½®ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªå°çš„ä¸‰è§’å½¢æ•°å­¦æ¥è®¡ç®—å‡ºå“ªäº›æ•°å­—è¦é€å…¥&lt;code>connect&lt;/code>ã€‚ä¾‹å¦‚ï¼Œ&lt;code>connect-down-left&lt;/code>å°†è¯•å›¾è¿æ¥ä½ç½® 1 å’Œä½ç½® 4ã€‚å¦‚æœä½ æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰å®šä¹‰&lt;code>connect-left&lt;/code>ã€&lt;code>connect-up-left&lt;/code>å’Œ&lt;code>connect-up-right&lt;/code>å‡½æ•°ï¼ŒåŸå› æ˜¯ç°æœ‰çš„å‡½æ•°å®é™…ä¸Šæ¶µç›–äº†è¿™äº›æƒ…å†µã€‚&lt;code>connect&lt;/code>è¿”å›ä¸€ä¸ªå»ºç«‹äº†ç›¸äº’è¿æ¥çš„æ£‹ç›˜ï¼›å½“ 4&lt;em>å‘å³&lt;/em>è¿æ¥åˆ° 6 æ—¶ï¼Œ6&lt;em>å‘å·¦&lt;/em>è¿æ¥åˆ° 4ã€‚ ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">connect-down-left&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="mi">15&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {1 {:connections {4 2}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}}}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">connect-down-right&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="mi">15&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {3 {:connections {10 6}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">10&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">}}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>connect&lt;/code>-down-left&lt;code>æ¥æ”¶ä¸€ä¸ªæœ€å¤§ä½ç½®ä¸º15çš„ç©ºæ£‹ç›˜ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ£‹ç›˜ï¼Œè¯¥æ£‹ç›˜ä¸Šæœ‰1å’Œå®ƒä¸‹é¢åŠå·¦è¾¹çš„ä½ç½®ä¹‹é—´çš„ç›¸äº’è¿æ¥ã€‚&lt;/code>connect&lt;code>-down-right&lt;/code>åšäº†ç±»ä¼¼çš„äº‹æƒ…ï¼Œè¿”å›ä¸€ä¸ªç”± 3 å’Œå®ƒä¸‹é¢åŠå³è¾¹çš„ä½ç½®ä¹‹é—´çš„ç›¸äº’è¿æ¥ç»„æˆçš„æ£‹ç›˜ã€‚&lt;/p>
&lt;p>ä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œ`add-pos&amp;rsquo;ï¼Œå¾ˆæœ‰è¶£ï¼Œå› ä¸ºå®ƒå®é™…ä¸Šæ˜¯åœ¨ä¸€ä¸ª&lt;em>å‡½æ•°&lt;/em>çš„ Vector ä¸Šè¿›è¡Œè¿˜åŸï¼Œä¾æ¬¡åº”ç”¨æ¯ä¸ªå‡½æ•°æ¥å»ºç«‹ç»“æœçš„æ£‹ç›˜ã€‚ä½†å®ƒé¦–å…ˆæ›´æ–°æ£‹ç›˜ï¼Œä»¥è¡¨ç¤ºä¸€ä¸ªæ£‹å­åœ¨ç»™å®šçš„ä½ç½®ä¸Šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">add-pos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Pegs the position and performs connections&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">pegged-board&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">assoc-in&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">pos&lt;/span> &lt;span class="ss">:pegged&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">true&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">reduce &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">new-board&lt;/span> &lt;span class="nv">connection-creation-fn&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">connection-creation-fn&lt;/span> &lt;span class="nv">new-board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">pegged-board&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">connect-right&lt;/span> &lt;span class="nv">connect-down-left&lt;/span> &lt;span class="nv">connect-down-right&lt;/span>&lt;span class="p">])))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">add-pos&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="mi">15&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="mi">3&lt;/span>, &lt;span class="mi">4&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}&lt;/span>, &lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">6&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">}}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°±åƒè¿™ä¸ªå‡½æ•°é¦–å…ˆåœ¨&lt;code>pegged-board&lt;/code>ç»‘å®šä¸­è¯´ï¼š&amp;ldquo;åœ¨æ£‹ç›˜çš„ X ä½ç½®æ·»åŠ ä¸€ä¸ªé’‰å­ã€‚&amp;rdquo; ç„¶åï¼Œåœ¨ &amp;ldquo;reduce &amp;ldquo;ä¸­ï¼Œå®ƒè¯´ï¼š&amp;ldquo;åœ¨ X çš„ä½ç½®ä¸Šé‡‡å–æ–°é’‰å­çš„æ£‹ç›˜ï¼Œå¹¶å°è¯•å°† X çš„ä½ç½®è¿æ¥åˆ°ä¸€ä¸ªåˆæ³•çš„ã€å‘å³çš„ä½ç½®ã€‚å–è¯¥æ“ä½œäº§ç”Ÿçš„æ£‹ç›˜ï¼Œå¹¶å°è¯•å°†ä½ç½® X è¿æ¥åˆ°ä¸€ä¸ªåˆæ³•çš„ã€å‘å·¦ä¸‹æ–¹çš„ä½ç½®ã€‚æœ€åï¼Œå–è¯¥*æ“ä½œäº§ç”Ÿçš„æ£‹ç›˜ï¼Œå¹¶å°è¯•å°†ä½ç½® X è¿æ¥åˆ°åˆæ³•çš„å³ä¸‹ä½ç½®ã€‚è¿”å›æ‰€å¾—åˆ°çš„æ£‹ç›˜&amp;rdquo;ã€‚&lt;/p>
&lt;p>åƒè¿™æ ·å¯¹å‡½æ•°è¿›è¡Œè¿˜åŸæ˜¯ç»„æˆå‡½æ•°çš„å¦ä¸€ç§æ–¹å¼ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œä¸‹é¢æ˜¯æ¸…å• 5-1ï¼ˆ&lt;a class="link" href="https://www.braveclojure.com/functional-programming/#Anchor-20" target="_blank" rel="noopener"
>ç¬¬ 103 é¡µ&lt;/a>ï¼‰ä¸­å®šä¹‰&lt;code>clean&lt;/code>å‡½æ•°çš„å¦ä¸€ç§æ–¹å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">clean&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">text&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">reduce &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">string&lt;/span> &lt;span class="nv">string-fn&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">string-fn&lt;/span> &lt;span class="nv">string&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">text&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">s/trim&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">s/replace&lt;/span> &lt;span class="nv">%&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="s">&amp;#34;lol&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;LOL&amp;#34;&lt;/span>&lt;span class="p">)]))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå¯¹&lt;code>clean&lt;/code>çš„é‡æ–°å®šä¹‰å‡å°‘äº†ä¸€ä¸ªå‡½æ•° Vectorï¼Œå°†ç¬¬ä¸€ä¸ªå‡½æ•°&lt;code>s/trim&lt;/code>åº”ç”¨äºåˆå§‹å­—ç¬¦ä¸²ï¼Œç„¶åå°†ä¸‹ä¸€ä¸ªå‡½æ•°ï¼ŒåŒ¿åå‡½æ•°&lt;code>#(s/replace % #&amp;quot;lol&amp;quot; &amp;quot;LOL&amp;quot;)&lt;/code>ï¼Œåº”ç”¨äºç»“æœã€‚&lt;/p>
&lt;p>å¯¹ä¸€ä¸ªå‡½æ•°é›†åˆè¿›è¡Œç¼©å‡å¹¶ä¸æ˜¯ä¸€ä¸ªä½ ç»å¸¸ä½¿ç”¨çš„æŠ€æœ¯ï¼Œä½†å®ƒå¶å°”ä¼šå¾ˆæœ‰ç”¨ï¼Œè€Œä¸”å®ƒæ˜¾ç¤ºäº†å‡½æ•°å¼ç¼–ç¨‹çš„å¤šå‡½æ•°æ€§ã€‚&lt;/p>
&lt;p>æœ€åä¸€ä¸ªåˆ›å»ºæ£‹ç›˜çš„å‡½æ•°æ˜¯&lt;code>new-board&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">new-board&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Creates a new board with the given number of rows&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">rows&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">initial-board&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:rows&lt;/span> &lt;span class="nv">rows&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">max-pos&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">row-tri&lt;/span> &lt;span class="nv">rows&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">reduce &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">add-pos&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">max-pos&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">initial-board&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">range &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="nv">max-pos&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç é¦–å…ˆåˆ›å»ºäº†åˆå§‹çš„ã€ç©ºçš„æ£‹ç›˜ï¼Œå¹¶å¾—åˆ°äº†æœ€å¤§çš„ä½ç½®ã€‚å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯ 5 è¡Œï¼Œæœ€å¤§ä½ç½®å°†æ˜¯ 15ã€‚æ¥ä¸‹æ¥ï¼Œè¯¥å‡½æ•°ä½¿ç”¨&lt;code>(range 1 (inc max-pos))&lt;/code>å¾—åˆ°ä¸€ä¸ªä» 1 åˆ° 15 çš„æ•°å­—åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯æ£‹ç›˜çš„ä½ç½®ã€‚æœ€åï¼Œå®ƒå¯¹ä½ç½®åˆ—è¡¨è¿›è¡Œè¿˜åŸã€‚ç¼©å‡çš„æ¯ä¸€æ¬¡è¿­ä»£éƒ½ä¼šè°ƒç”¨&lt;code>(add-pos board max-pos pos)&lt;/code>ï¼Œæ­£å¦‚ä½ å‰é¢æ‰€çœ‹åˆ°çš„ï¼Œå®ƒè·å–ä¸€ä¸ªç°æœ‰çš„æ£‹ç›˜ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ£‹ç›˜ï¼Œå¹¶æ·»åŠ ä½ç½®ã€‚&lt;/p>
&lt;h3 id="ç§»åŠ¨å›¾é’‰">ç§»åŠ¨å›¾é’‰&lt;/h3>
&lt;p>ä¸‹ä¸€èŠ‚ä»£ç å°†éªŒè¯å¹¶æ‰§è¡Œé’‰å­çš„ç§»åŠ¨ã€‚è®¸å¤šå‡½æ•°ï¼ˆ&lt;code>pegged?&lt;/code>, &lt;code>remove-peg&lt;/code>, &lt;code>place-peg&lt;/code>, &lt;code>move-peg&lt;/code>ï¼‰éƒ½æ˜¯ç®€å•çš„ã€ä¸è¨€è‡ªæ˜çš„å•è¡Œä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">pegged?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Does the position have a peg in it?&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">get-in&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">pos&lt;/span> &lt;span class="ss">:pegged&lt;/span>&lt;span class="p">]))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">remove-peg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Take the peg at given position out of the board&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">assoc-in&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">pos&lt;/span> &lt;span class="ss">:pegged&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">false&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">place-peg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Put a peg in the board at given position&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">assoc-in&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">pos&lt;/span> &lt;span class="ss">:pegged&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">true&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">move-peg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Take peg out of p1 and place it in p2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">p1&lt;/span> &lt;span class="nv">p2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">place-peg&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">remove-peg&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">p1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">p2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ¥æ¬£èµä¸€ä¸‹è¿™æ®µä»£ç æ˜¯å¤šä¹ˆçš„æ•´æ´ã€‚åœ¨é¢å‘å¯¹è±¡çš„ç¨‹åºä¸­ï¼Œä½ é€šå¸¸ä¼šåœ¨è¿™é‡Œè¿›è¡Œçªå˜ï¼›æ¯•ç«Ÿï¼Œä½ è¿˜èƒ½å¦‚ä½•æ”¹å˜æ£‹ç›˜ï¼Ÿç„¶è€Œï¼Œè¿™äº›éƒ½æ˜¯çº¯å‡½æ•°ï¼Œè€Œä¸”å®ƒä»¬å¾ˆå¥½åœ°å®Œæˆäº†å·¥ä½œã€‚æˆ‘è¿˜å–œæ¬¢ä½ ä¸éœ€è¦ç±»çš„å¼€é”€æ¥ä½¿ç”¨è¿™äº›å°å®¶ä¼™ã€‚è¿™æ ·çš„ç¼–ç¨‹æ„Ÿè§‰æ›´è½»æ¾ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥æ˜¯&lt;code>valid-moves&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">valid-moves&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Return a map of all valid moves for pos, where the key is the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> destination and the value is the jumped position&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">into &lt;/span>&lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">filter &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn &lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="nv">destination&lt;/span> &lt;span class="nv">jumped&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">and &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">not &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">pegged?&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">destination&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">pegged?&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">jumped&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">get-in&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">pos&lt;/span> &lt;span class="ss">:connections&lt;/span>&lt;span class="p">]))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç æµè§ˆäº†ç»™å®šä½ç½®çš„æ¯ä¸ªè¿æ¥ï¼Œå¹¶æµ‹è¯•ç›®çš„åœ°ä½ç½®æ˜¯å¦ä¸ºç©ºï¼Œè·³è½¬çš„ä½ç½®æ˜¯å¦æœ‰é’‰å­ã€‚ä¸ºäº†çœ‹åˆ°è¿™ä¸ªåŠ¨ä½œï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª 4 å·ä½ç½®ä¸ºç©ºçš„æ£‹ç›˜ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">my-board&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">assoc-in&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">new-board&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="ss">:pegged&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">false&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å›¾ 5-4 æ˜¾ç¤ºäº†è¿™ä¸ªæ£‹ç›˜çš„æ ·å­ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/functional-programming/peg-thing-valid-moves.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>å›¾ 5-4ï¼š4 å·ä½ç½®ä¸ºç©ºçš„é’‰å­æ¿&lt;/p>
&lt;p>è€ƒè™‘åˆ°è¿™ä¸ªæ£‹ç›˜ï¼Œ1ã€6ã€11 å’Œ 13 ä½æœ‰æœ‰æ•ˆçš„æ£‹æ­¥ï¼Œä½†å…¶ä»–ä½ç½®éƒ½æ²¡æœ‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">valid-moves&lt;/span> &lt;span class="nv">my-board&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">; =&amp;gt; {4 2}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">valid-moves&lt;/span> &lt;span class="nv">my-board&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">; =&amp;gt; {4 5}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">valid-moves&lt;/span> &lt;span class="nv">my-board&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">; =&amp;gt; {4 7}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">valid-moves&lt;/span> &lt;span class="nv">my-board&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">; =&amp;gt; {}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">valid-moves&lt;/span> &lt;span class="nv">my-board&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">; =&amp;gt; {}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆ&lt;code>valid-moves&lt;/code>ä¼šè¿”å›ä¸€ä¸ª Map è€Œä¸æ˜¯ä¸€ä¸ªé›†åˆæˆ– Vectorã€‚åŸå› æ˜¯ï¼Œè¿”å› Map å…è®¸ä½ è½»æ¾åœ°æŸ¥æ‰¾ç›®æ ‡ä½ç½®ï¼Œä»¥æ£€æŸ¥ç‰¹å®šçš„æ£‹æ­¥æ˜¯å¦æœ‰æ•ˆï¼Œè¿™å°±æ˜¯&lt;code>valid-move?&lt;/code>ï¼ˆä¸‹ä¸€ä¸ªå‡½æ•°ï¼‰çš„ä½œç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">valid-move?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Return jumped position if the move from p1 to p2 is valid, nil
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> otherwise&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">p1&lt;/span> &lt;span class="nv">p2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">get &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">valid-moves&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">p1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">p2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">valid-move?&lt;/span> &lt;span class="nv">my-board&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">; =&amp;gt; nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">valid-move?&lt;/span> &lt;span class="nv">my-board&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">; =&amp;gt; 2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œ&lt;code>valid-move?&lt;/code>ä» Map ä¸ŠæŸ¥æ‰¾ç›®æ ‡ä½ç½®ï¼Œç„¶åè¿”å›å°†è¢«è·³è¿‡çš„é’‰å­çš„ä½ç½®ã€‚è¿™æ˜¯è®©&lt;code>valid-moves&lt;/code>è¿”å› Map çš„å¦ä¸€ä¸ªå¾ˆå¥½çš„å¥½å¤„ï¼Œå› ä¸ºä» Map ä¸­è·å–çš„è·³è·ƒä½ç½®æ­£æ˜¯æˆ‘ä»¬æƒ³è¦ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå‡½æ•°&lt;code>make-move&lt;/code>çš„ä¸œè¥¿ã€‚å½“ä½ èŠ±æ—¶é—´æ„å»ºä¸€ä¸ªä¸°å¯Œçš„æ•°æ®ç»“æ„æ—¶ï¼Œæ‰§è¡Œæœ‰ç”¨çš„æ“ä½œä¼šæ›´å®¹æ˜“ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">make-move&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Move peg from p1 to p2, removing jumped peg&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">p1&lt;/span> &lt;span class="nv">p2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">if-let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">jumped&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">valid-move?&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">p1&lt;/span> &lt;span class="nv">p2&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">move-peg&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">remove-peg&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">jumped&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">p1&lt;/span> &lt;span class="nv">p2&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>if-let&lt;/code>æ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹å¼ï¼Œè¡¨ç¤º &amp;ldquo;å¦‚æœä¸€ä¸ªè¡¨è¾¾å¼æ±‚å€¼ä¸ºä¸€ä¸ªçœŸå®çš„å€¼ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸ªå€¼ç»‘å®šåˆ°ä¸€ä¸ªåå­—ä¸Šï¼Œå°±åƒæˆ‘åœ¨&lt;code>let&lt;/code>è¡¨è¾¾å¼ä¸­ä¸€æ ·ã€‚å¦åˆ™ï¼Œå¦‚æœæˆ‘æä¾›äº†ä¸€ä¸ª &amp;ldquo;else &amp;ldquo;å­å¥ï¼Œå°±æ‰§è¡Œè¯¥ &amp;ldquo;else &amp;ldquo;å­å¥ï¼›å¦‚æœæˆ‘æ²¡æœ‰æä¾› &amp;ldquo;else &amp;ldquo;å­å¥ï¼Œå°±è¿”å› &amp;ldquo;nil&amp;rdquo;ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµ‹è¯•è¡¨è¾¾å¼æ˜¯&lt;code>(valid-move? board p1 p2)&lt;/code>ï¼Œå¦‚æœç»“æœæ˜¯çœŸå®çš„ï¼Œä½ è¦æŠŠç»“æœåˆ†é…ç»™&lt;code>jumped&lt;/code>è¿™ä¸ªåå­—ã€‚è¿™å°†ç”¨äºè°ƒç”¨&lt;code>move-peg&lt;/code>ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªæ–°æ£‹ç›˜ã€‚ä½ æ²¡æœ‰æä¾› &amp;ldquo;else &amp;ldquo;å­å¥ï¼Œæ‰€ä»¥å¦‚æœç§»åŠ¨æ— æ•ˆï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼ä¸º &amp;ldquo;nil&amp;rdquo;ã€‚&lt;/p>
&lt;p>æœ€åï¼Œå‡½æ•°`can-move? æ˜¯ç”¨æ¥ç¡®å®šæ¸¸æˆæ˜¯å¦ç»“æŸçš„ï¼Œæ–¹æ³•æ˜¯æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ‰æ£‹æ­¥çš„é’‰å­ä½ç½®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">can-move?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Do any of the pegged positions have valid moves?&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">some &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">comp &lt;/span>&lt;span class="nv">not-empty&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">partial &lt;/span>&lt;span class="nv">valid-moves&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">map first &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">filter &lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">get &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">second &lt;/span>&lt;span class="nv">%&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ss">:pegged&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‡½æ•°åç§°æœ«å°¾çš„é—®å·è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ª&lt;em>è°“è¯å‡½æ•°&lt;/em>ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸ºäº†åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚&lt;em>è°“è¯&lt;/em>å–è‡ªè°“è¯é€»è¾‘ï¼Œå®ƒå…³æ³¨çš„æ˜¯ç¡®å®šä¸€ä¸ªè¯­å¥æ˜¯çœŸè¿˜æ˜¯å‡ã€‚(ä½ å·²ç»çœ‹åˆ°äº†ä¸€äº›å†…ç½®çš„è°“è¯å‡½æ•°ï¼Œå¦‚&lt;code>empty?&lt;/code>å’Œ&lt;code>every?&lt;/code>ã€‚)&lt;/p>
&lt;p>&lt;code>can-move?&lt;/code>çš„å·¥ä½œåŸç†æ˜¯é€šè¿‡&lt;code>(map first (filter #(get (second %) :pegged) board))&lt;/code>è·å¾—ä¸€ä¸ªæ‰€æœ‰æŒ‚ç‚¹çš„åºåˆ—ã€‚ä½ å¯ä»¥å°†å…¶è¿›ä¸€æ­¥åˆ†è§£ä¸º&lt;code>filter'å’Œ&lt;/code>map&amp;rsquo;çš„å‡½æ•°è°ƒç”¨ï¼šå› ä¸º&lt;code>filter'æ˜¯ä¸€ä¸ªseqå‡½æ•°ï¼Œå®ƒå°†&lt;/code>board&amp;rsquo;ï¼Œä¸€ä¸ª Mapï¼Œè½¬æ¢æˆä¸€ä¸ªä¸¤å…ƒç´  Vector çš„ seqï¼ˆä¹Ÿç§°ä¸º&lt;em>tuples&lt;/em>ï¼‰ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:connection&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="mi">3&lt;/span>, &lt;span class="mi">4&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}&lt;/span>, &lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:connections&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">9&lt;/span> &lt;span class="mi">5&lt;/span>, &lt;span class="mi">7&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">}&lt;/span>, &lt;span class="ss">:pegged&lt;/span> &lt;span class="nv">true&lt;/span>&lt;span class="p">}])&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªä½ç½®å·ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯è¯¥ä½ç½®çš„ä¿¡æ¯ã€‚&lt;code>filter&lt;/code>ç„¶åå°†åŒ¿åå‡½æ•°&lt;code>#(get (second %) :pegged)&lt;/code>åº”ç”¨äºè¿™äº›å…ƒç»„ä¸­çš„æ¯ä¸€ä¸ªï¼Œè¿‡æ»¤æ‰é‚£äº›ä½ç½®ä¿¡æ¯è¡¨æ˜è¯¥ä½ç½®ç›®å‰æ²¡æœ‰æŒ‚ç‚¹çš„å…ƒç»„ã€‚æœ€åï¼Œç»“æœè¢«ä¼ é€’ç»™&lt;code>map&lt;/code>ï¼Œå®ƒåœ¨æ¯ä¸ªå…ƒç»„ä¸Šè°ƒç”¨&lt;code>first&lt;/code>ï¼Œåªä»å…ƒç»„ä¸­æŠ“å–ä½ç½®å·ã€‚&lt;/p>
&lt;p>å½“ä½ å¾—åˆ°ä¸€è¿ä¸²çš„é’‰å­ä½ç½®å·ç åï¼Œä½ å¯¹æ¯ä¸ªä½ç½®è°ƒç”¨ä¸€ä¸ªè°“è¯å‡½æ•°ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªè¿”å›çœŸå€¼çš„ä½ç½®ã€‚è¿™ä¸ªè°“è¯å‡½æ•°æ˜¯ç”¨&lt;code>(&lt;/code>comp not-empty (&lt;code>partial valid-moves board))&lt;/code>åˆ›å»ºçš„ã€‚æˆ‘ä»¬çš„æƒ³æ³•æ˜¯é¦–å…ˆè¿”å›ä¸€ä¸ªä½ç½®çš„æ‰€æœ‰æœ‰æ•ˆæ£‹æ­¥çš„ Mapï¼Œç„¶åæµ‹è¯•è¯¥ Map æ˜¯å¦ä¸ºç©ºã€‚&lt;/p>
&lt;p>é¦–å…ˆï¼Œè¡¨è¾¾å¼&lt;code>(partial valid-moves board)&lt;/code>ä»&lt;code>valid-moves&lt;/code>æ´¾ç”Ÿå‡ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°&lt;code>board&lt;/code>ç”¨&lt;code>partial&lt;/code>å¡«å…¥ï¼ˆå› ä¸ºä½ æ¯æ¬¡è°ƒç”¨&lt;code>valid-moves&lt;/code>æ—¶ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªæ£‹ç›˜ï¼‰ã€‚è¿™ä¸ªæ–°å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªä½ç½®ï¼Œå¹¶è¿”å›å®ƒåœ¨å½“å‰æ£‹ç›˜ä¸Šçš„æ‰€æœ‰æœ‰æ•ˆæ£‹æ­¥çš„ Mapã€‚&lt;/p>
&lt;p>ç¬¬äºŒï¼Œä½ ç”¨&lt;code>comp&lt;/code>å°†è¿™ä¸ªå‡½æ•°ä¸&lt;code>not-empty&lt;/code>ç»„æˆã€‚è¿™ä¸ªå‡½æ•°æ˜¯è‡ªè¿°çš„ï¼›å¦‚æœç»™å®šçš„é›†åˆæ˜¯ç©ºçš„ï¼Œå®ƒè¿”å› &amp;ldquo;true&amp;rdquo;ï¼Œå¦åˆ™è¿”å› &amp;ldquo;false&amp;rdquo;ã€‚&lt;/p>
&lt;p>è¿™æ®µä»£ç æœ€æœ‰è¶£çš„åœ°æ–¹åœ¨äºï¼Œä½ åœ¨ä½¿ç”¨ä¸€ä¸ªå‡½æ•°é“¾æ¥æ¨å¯¼ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç±»ä¼¼äºä½ ä½¿ç”¨å‡½æ•°é“¾æ¥æ¨å¯¼æ–°çš„æ•°æ®ã€‚åœ¨ç¬¬ä¸‰ç« ä¸­ï¼Œä½ äº†è§£åˆ° Clojure å°†å‡½æ•°è§†ä¸ºæ•°æ®ï¼Œå› ä¸ºå‡½æ•°å¯ä»¥æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°å¹¶è¿”å›ã€‚å¸Œæœ›è¿™èƒ½è¯´æ˜ä¸ºä»€ä¹ˆè¿™ä¸ªå‡½æ•°æ˜¯æœ‰è¶£å’Œæœ‰ç”¨çš„ã€‚&lt;/p>
&lt;h3 id="æ¸²æŸ“å’Œæ‰“å°æ£‹ç›˜">æ¸²æŸ“å’Œæ‰“å°æ£‹ç›˜&lt;/h3>
&lt;p>åœ¨æ£‹ç›˜è¡¨ç¤ºå’Œæ‰“å°éƒ¨åˆ†çš„å‰å‡ ä¸ªè¡¨è¾¾å¼åªæ˜¯å®šä¹‰å¸¸æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">alpha-start&lt;/span> &lt;span class="mi">97&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">alpha-end&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">letters&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">map &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">comp str &lt;/span>&lt;span class="nv">char&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">range &lt;/span>&lt;span class="nv">alpha-start&lt;/span> &lt;span class="nv">alpha-end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">pos-chars&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç»‘å®š &amp;ldquo;alpha-start &amp;ldquo;å’Œ &amp;ldquo;alpha-end &amp;ldquo;ä¸ºå­—æ¯&lt;em>a&lt;/em>åˆ°&lt;em>z&lt;/em>è®¾å®šäº†æ•°å€¼çš„å¼€å§‹å’Œç»“æŸã€‚æˆ‘ä»¬ç”¨è¿™äº›æ¥å»ºç«‹ä¸€ä¸ª &amp;ldquo;å­—æ¯ &amp;ldquo;çš„åºåˆ—ã€‚&lt;code>char&lt;/code>ï¼Œå½“åº”ç”¨äºä¸€ä¸ªæ•´æ•°æ—¶ï¼Œè¿”å›è¯¥æ•´æ•°å¯¹åº”çš„å­—ç¬¦ï¼Œ&lt;code>str&lt;/code>å°†&lt;code>char&lt;/code>å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚&lt;code>pos-chars&lt;/code>è¢«å‡½æ•°&lt;code>row-padding&lt;/code>ä½¿ç”¨ï¼Œä»¥ç¡®å®šåœ¨æ¯ä¸€è¡Œçš„å¼€å¤´å¢åŠ å¤šå°‘é—´è·ã€‚æ¥ä¸‹æ¥çš„å‡ ä¸ªå®šä¹‰ï¼Œ&lt;code>ansi-styles&lt;/code>ï¼Œ&lt;code>ansi&lt;/code>ï¼Œå’Œ&lt;code>colorize&lt;/code>å‘ç»ˆç«¯è¾“å‡ºå½©è‰²æ–‡æœ¬ã€‚&lt;/p>
&lt;p>å‡½æ•°&lt;code>render-pos&lt;/code>, &lt;code>row-positions&lt;/code>, &lt;code>row-padding&lt;/code>, å’Œ&lt;code>render-row&lt;/code>åˆ›å»ºå­—ç¬¦ä¸²æ¥è¡¨ç¤ºæ£‹ç›˜ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">render-pos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">pos&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">str &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">nth &lt;/span>&lt;span class="nv">letters&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">dec &lt;/span>&lt;span class="nv">pos&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">get-in&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">pos&lt;/span> &lt;span class="ss">:pegged&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">colorize&lt;/span> &lt;span class="s">&amp;#34;0&amp;#34;&lt;/span> &lt;span class="ss">:blue&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">colorize&lt;/span> &lt;span class="s">&amp;#34;-&amp;#34;&lt;/span> &lt;span class="ss">:red&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">row-positions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Return all positions in the given row&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">row-num&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">range &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">or &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">row-tri&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">dec &lt;/span>&lt;span class="nv">row-num&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">row-tri&lt;/span> &lt;span class="nv">row-num&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">row-padding&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;String of spaces to add to the beginning of a row to center it&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">row-num&lt;/span> &lt;span class="nv">rows&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">pad-length&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">/ &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">* &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">- &lt;/span>&lt;span class="nv">rows&lt;/span> &lt;span class="nv">row-num&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nv">pos-chars&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">apply str &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">take &lt;/span>&lt;span class="nv">pad-length&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">repeat &lt;/span>&lt;span class="s">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">render-row&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span> &lt;span class="nv">row-num&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">str &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">row-padding&lt;/span> &lt;span class="nv">row-num&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="ss">:rows&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">clojure.string/join&lt;/span> &lt;span class="s">&amp;#34; &amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">map &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">partial &lt;/span>&lt;span class="nv">render-pos&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">row-positions&lt;/span> &lt;span class="nv">row-num&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ä»ä¸‹å¾€ä¸Šçœ‹ï¼Œä½ å¯ä»¥çœ‹åˆ°&lt;code>render-row&lt;/code>è°ƒç”¨å®ƒä¸Šé¢çš„æ¯ä¸ªå‡½æ•°æ¥è¿”å›ç»™å®šè¡Œçš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚æ³¨æ„è¡¨è¾¾å¼&lt;code>(map (partial render-pos board) (row-positions row-num))&lt;/code>ã€‚è¿™å±•ç¤ºäº†éƒ¨åˆ†å‡½æ•°çš„ä¸€ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹ï¼Œå³å¤šæ¬¡åº”ç”¨åŒä¸€å‡½æ•°ï¼Œå¹¶å¡«å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œå°±åƒå‰é¢å±•ç¤ºçš„&lt;code>can-move?&lt;/code>å‡½æ•°ä¸€æ ·ã€‚&lt;/p>
&lt;p>è¿˜è¯·æ³¨æ„ï¼Œ`render-pos&amp;rsquo;ä½¿ç”¨å­—æ¯è€Œä¸æ˜¯æ•°å­—æ¥æ ‡è¯†æ¯ä¸ªä½ç½®ã€‚è¿™åœ¨æ£‹ç›˜æ˜¾ç¤ºæ—¶èŠ‚çœäº†ä¸€ç‚¹ç©ºé—´ï¼Œå› ä¸ºå®ƒå…è®¸æ¯ä¸ªä½ç½®åªæœ‰ä¸€ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºä¸€ä¸ªäº”è¡Œæ£‹ç›˜ã€‚&lt;/p>
&lt;p>æœ€åï¼Œ&lt;code>print-board&lt;/code>åªæ˜¯ç”¨&lt;code>doseq&lt;/code>éå†æ¯ä¸€è¡Œçš„ç¼–å·ï¼Œæ‰“å°è¯¥è¡Œçš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">print-board&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">doseq &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">row-num&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">range &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ss">:rows&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">)))]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">render-row&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="nv">row-num&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ä½ æƒ³å¯¹ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ è¿›è¡Œå‰¯ä½œç”¨çš„æ“ä½œï¼ˆæ¯”å¦‚æ‰“å°åˆ°ç»ˆç«¯ï¼‰æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>doseq&lt;/code>ã€‚ç´§è·Ÿåœ¨åå­—&lt;code>doseq&lt;/code>åé¢çš„ Vector æè¿°äº†å¦‚ä½•å°†ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ é€ä¸€ç»‘å®šåˆ°ä¸€ä¸ªåå­—ä¸Šï¼Œä»¥ä¾¿ä½ å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œæ“ä½œã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ è¦æŠŠæ•°å­— 1 åˆ° 5ï¼ˆå‡è®¾æœ‰äº”è¡Œï¼‰åˆ†é…ç»™&lt;code>row-num&lt;/code>è¿™ä¸ªåå­—ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æ‰“å°æ¯ä¸€è¡Œã€‚&lt;/p>
&lt;p>è™½ç„¶æ‰“å°æ£‹ç›˜åœ¨æŠ€æœ¯ä¸Šå±äº&lt;em>äº¤äº’&lt;/em>ï¼Œä½†æˆ‘æƒ³åœ¨è¿™é‡Œç”¨æ¸²æŸ“å‡½æ•°æ¥å±•ç¤ºå®ƒã€‚å½“æˆ‘ç¬¬ä¸€æ¬¡å¼€å§‹å†™è¿™ä¸ªæ¸¸æˆæ—¶ï¼Œ&lt;code>print-board&lt;/code>å‡½æ•°ä¹Ÿç”Ÿæˆäº†æ£‹ç›˜çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ç„¶è€Œï¼Œç°åœ¨&lt;code>print-board&lt;/code>å°†æ‰€æœ‰çš„æ¸²æŸ“å·¥ä½œæ¨è¿Ÿåˆ°çº¯å‡½æ•°ï¼Œè¿™ä½¿å¾—ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œå¹¶å‡å°‘äº†æˆ‘ä»¬ä¸çº¯å‡½æ•°çš„è¡¨é¢ç§¯ã€‚&lt;/p>
&lt;h3 id="ç©å®¶äº’åŠ¨">ç©å®¶äº’åŠ¨&lt;/h3>
&lt;p>ä¸‹ä¸€ä¸ªå‡½æ•°é›†åˆå¤„ç†ç©å®¶äº’åŠ¨ã€‚é¦–å…ˆï¼Œæœ‰&lt;code>letter-&amp;gt;pos&lt;/code>ï¼Œå®ƒå°†å­—æ¯ï¼ˆè¿™æ˜¯ç©å®¶æ˜¾ç¤ºå’Œè¯†åˆ«ä½ç½®çš„æ–¹å¼ï¼‰è½¬æ¢ä¸ºç›¸åº”çš„ä½ç½®ç¼–å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">letter-&amp;gt;pos&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Converts a letter string to the corresponding position number&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">letter&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">- &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">first &lt;/span>&lt;span class="nv">letter&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="nv">alpha-start&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥ï¼Œè¾…åŠ©å‡½æ•°&lt;code>get-input&lt;/code>å…è®¸ä½ è¯»å–å’Œæ¸…ç†ç©å®¶çš„è¾“å…¥ã€‚ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœç©å®¶æ²¡æœ‰è¾“å…¥ä»»ä½•ä¸œè¥¿å°±æŒ‰ä¸‹å›è½¦é”®ï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ªå€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">get-input&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Waits for user to enter text and hit enter, then cleans the input&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">get-input&lt;/span> &lt;span class="nv">nil&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([&lt;/span>&lt;span class="nv">default&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">input&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">clojure.string/trim&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">read-line&lt;/span>&lt;span class="p">))]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">empty?&lt;/span> &lt;span class="nv">input&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">clojure.string/lower-case&lt;/span> &lt;span class="nv">input&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>characters-as-strings&lt;/code>ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå°çš„è¾…åŠ©å‡½æ•°ï¼Œè¢«&lt;code>prompt-move&lt;/code>ç”¨æ¥æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›ä¸€ä¸ªå­—æ¯é›†åˆï¼Œæ‰€æœ‰éå­—æ¯çš„è¾“å…¥éƒ½è¢«ä¸¢å¼ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">characters-as-strings&lt;/span> &lt;span class="s">&amp;#34;a b&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; (&amp;#34;a&amp;#34; &amp;#34;b&amp;#34;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">characters-as-strings&lt;/span> &lt;span class="s">&amp;#34;a cb&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; (&amp;#34;a&amp;#34; &amp;#34;c&amp;#34; &amp;#34;b&amp;#34;)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥ï¼Œ&lt;code>prompt-move&lt;/code>è¯»å–ç©å®¶çš„è¾“å…¥ï¼Œå¹¶å¯¹å…¶é‡‡å–è¡ŒåŠ¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">prompt-move&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;\nHere&amp;#39;s your board:&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">print-board&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Move from where to where? Enter two letters:&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">input&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">map &lt;/span>&lt;span class="nv">letter-&amp;gt;pos&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">characters-as-strings&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">get-input&lt;/span>&lt;span class="p">)))]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">if-let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">new-board&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">make-move&lt;/span>&lt;span class="err">âŠ&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">first &lt;/span>&lt;span class="nv">input&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">second &lt;/span>&lt;span class="nv">input&lt;/span>&lt;span class="p">))]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">user-entered-valid-move&lt;/span> &lt;span class="nv">new-board&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">user-entered-invalid-move&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨âŠï¼Œå¦‚æœæ£‹æ‰‹çš„æ£‹æ­¥æ— æ•ˆï¼Œ&lt;code>make-move&lt;/code>è¿”å›&lt;code>nil&lt;/code>ï¼Œä½ ç”¨&lt;code>user-entered-invalid-move&lt;/code>å‡½æ•°æ¥é€šçŸ¥å¥¹çš„é”™è¯¯ã€‚ä½ å°†æœªç»ä¿®æ”¹çš„æ£‹ç›˜ä¼ é€’ç»™&lt;code>user-entered-invalid-move&lt;/code>ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ç”¨æ£‹ç›˜å†æ¬¡æç¤ºæ£‹æ‰‹ã€‚ä¸‹é¢æ˜¯å‡½æ•°çš„å®šä¹‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">user-entered-invalid-move&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Handles the next step after a user has entered an invalid move&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;\n!!! That was an invalid move :(\n&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">prompt-move&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œå¦‚æœè¿™æ­¥æ£‹æ˜¯æœ‰æ•ˆçš„ï¼Œ&amp;ldquo;new-board &amp;ldquo;å°†è¢«ä¼ é€’ç»™ &amp;ldquo;user-entered-valid-move&amp;rdquo;ï¼Œå¦‚æœè¿˜æœ‰æ£‹æ­¥è¦èµ°ï¼Œå®ƒå°†æ§åˆ¶æƒäº¤è¿˜ç»™ &amp;ldquo;prompt-move&amp;rdquo;ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">user-entered-valid-move&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Handles the next step after a user has entered a valid move&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">can-move?&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">prompt-move&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">game-over&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨æˆ‘ä»¬çš„æ£‹ç›˜åˆ›å»ºå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°é€’å½’æ˜¯å¦‚ä½•ä½¿ç”¨ä¸å¯å˜çš„æ•°æ®ç»“æ„æ¥å»ºç«‹ä¸€ä¸ªå€¼çš„ã€‚åŒæ ·çš„äº‹æƒ…ä¹Ÿå‘ç”Ÿåœ¨è¿™é‡Œï¼Œåªæ˜¯å®ƒæ¶‰åŠä¸¤ä¸ªç›¸äº’é€’å½’çš„å‡½æ•°å’Œä¸€äº›ç”¨æˆ·è¾“å…¥ã€‚æ²¡æœ‰çœ‹åˆ°å¯å˜çš„å±æ€§!&lt;/p>
&lt;p>æ¸¸æˆç»“æŸåä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè¿™å°±æ˜¯æ‰€å‘ç”Ÿçš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">game-over&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Announce the game is over and prompt to play again&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">remaining-pegs&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">count &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">filter &lt;/span>&lt;span class="ss">:pegged&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">vals &lt;/span>&lt;span class="nv">board&lt;/span>&lt;span class="p">)))]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Game over! You had&amp;#34;&lt;/span> &lt;span class="nv">remaining-pegs&lt;/span> &lt;span class="s">&amp;#34;pegs left:&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">print-board&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Play again? y/n [y]&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">input&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">get-input&lt;/span> &lt;span class="s">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">= &lt;/span>&lt;span class="s">&amp;#34;y&amp;#34;&lt;/span> &lt;span class="nv">input&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">prompt-rows&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Bye!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">System/exit&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">))))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œå‘ç”Ÿçš„æ‰€æœ‰äº‹æƒ…æ˜¯ï¼Œæ¸¸æˆå‘Šè¯‰ä½ ä½ çš„è¡¨ç°ï¼Œæ‰“å°å‡ºæœ€åçš„æ£‹ç›˜ï¼Œå¹¶æç¤ºä½ å†ç©ä¸€æ¬¡ã€‚å¦‚æœä½ é€‰æ‹©&lt;em>y&lt;/em>ï¼Œæ¸¸æˆå°±ä¼šè°ƒç”¨&lt;code>prompt-rows&lt;/code>ï¼Œè¿™å°±ç»™æˆ‘ä»¬å¸¦æ¥äº†æœ€åä¸€ç»„å‡½æ•°ï¼Œç”¨æ¥å¼€å§‹æ–°çš„æ¸¸æˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">prompt-empty-peg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">board&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Here&amp;#39;s your board:&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">print-board&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Remove which peg? [e]&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">prompt-move&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">remove-peg&lt;/span> &lt;span class="nv">board&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">letter-&amp;gt;pos&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">get-input&lt;/span> &lt;span class="s">&amp;#34;e&amp;#34;&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">prompt-rows&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;How many rows? [5]&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">rows&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">Integer.&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">get-input&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">board&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">new-board&lt;/span> &lt;span class="nv">rows&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">prompt-empty-peg&lt;/span> &lt;span class="nv">board&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä½¿ç”¨&lt;code>prompt-rows&lt;/code>å¼€å§‹æ¸¸æˆï¼Œè®©ç©å®¶è¾“å…¥è¦åŒ…æ‹¬å¤šå°‘è¡Œã€‚ç„¶åä½ æŠŠæ§åˆ¶æƒäº¤ç»™&lt;code>prompt-empty-peg&lt;/code>ï¼Œè¿™æ ·ç©å®¶å°±å¯ä»¥å‘Šè¯‰æ¸¸æˆè¦å…ˆç§»é™¤å“ªä¸ªé’‰å­ã€‚ä»è¿™é‡Œå¼€å§‹ï¼Œç¨‹åºæç¤ºä½ èµ°æ£‹ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•æ£‹æ­¥ã€‚&lt;/p>
&lt;p>å°½ç®¡è¿™ä¸ªç¨‹åºçš„æ‰€æœ‰å‰¯ä½œç”¨éƒ½æ˜¯ç›¸å¯¹æ— å®³çš„ï¼ˆä½ æ‰€åšçš„åªæ˜¯æç¤ºå’Œæ‰“å°ï¼‰ï¼Œä½†åƒè¿™æ ·å°†å®ƒä»¬å°å­˜åœ¨è‡ªå·±çš„å‡½æ•°ä¸­æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æœ€ä½³å®è·µã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ èƒ½ç¡®å®šå“ªäº›å‡½æ•°æ˜¯é€æ˜çš„ã€æ— å‰¯ä½œç”¨çš„ï¼Œå¹¶å°†è¿™äº›å‡½æ•°æ”¾åœ¨è‡ªå·±çš„å‡½æ•°ä¸­ï¼Œä½ å°†ä»å‡½æ•°å¼ç¼–ç¨‹ä¸­è·å¾—æ›´å¤šçš„å¥½å¤„ã€‚è¿™äº›å‡½æ•°ä¸å¯èƒ½åœ¨ä½ çš„ç¨‹åºçš„ä¸ç›¸å…³éƒ¨åˆ†å¼•èµ·å¥‡æ€ªçš„é”™è¯¯ã€‚å®ƒä»¬æ›´å®¹æ˜“åœ¨ REPL ä¸­æµ‹è¯•å’Œå¼€å‘ï¼Œå› ä¸ºå®ƒä»¬åªä¾èµ–äºä½ ä¼ é€’ç»™å®ƒä»¬çš„å‚æ•°ï¼Œè€Œä¸æ˜¯ä¸€äº›å¤æ‚çš„éšè—çŠ¶æ€å¯¹è±¡ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>çº¯å‡½æ•°åœ¨æœ¬è´¨ä¸Šæ˜¯é€æ˜çš„ï¼Œå¹¶ä¸”æ²¡æœ‰å‰¯ä½œç”¨ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¾ˆå®¹æ˜“è¢«æ¨ç†ã€‚ä¸ºäº†ä» Clojure ä¸­è·å¾—æœ€å¤§çš„æ”¶ç›Šï¼Œè¯·å°½é‡å‡å°‘ä¸çº¯å‡½æ•°çš„ä½¿ç”¨ã€‚åœ¨ä¸€ä¸ªä¸å¯å˜çš„ä¸–ç•Œé‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨é€’å½’è€Œä¸æ˜¯&lt;code>for&lt;/code>/&lt;code>while&lt;/code>å¾ªç¯ï¼Œä½¿ç”¨å‡½æ•°ç»„åˆè€Œä¸æ˜¯è¿ç»­çš„çªå˜ã€‚çº¯å‡½æ•°å…è®¸å¼ºå¤§çš„æŠ€æœ¯ï¼Œå¦‚å‡½æ•°ç»„åˆå‡½æ•°å’Œå¤‡å¿˜åŒ–ã€‚å®ƒä»¬ä¹Ÿæ˜¯è¶…çº§æœ‰è¶£çš„!&lt;/p>
&lt;h2 id="ç»ƒä¹ ">ç»ƒä¹ &lt;/h2>
&lt;p>å‘å±•å‡½æ•°å¼ç¼–ç¨‹æŠ€èƒ½çš„æœ€å¥½æ–¹æ³•ä¹‹ä¸€æ˜¯å°è¯•å®ç°ç°æœ‰çš„å‡½æ•°ã€‚ä¸ºæ­¤ï¼Œä¸‹é¢çš„å¤§å¤šæ•°ç»ƒä¹ éƒ½å»ºè®®ä½ å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œä½†ä¸è¦æ­¢æ­¥äºæ­¤ï¼›é€šè¿‡ Clojure å°æŠ„ï¼ˆ&lt;em>&lt;a class="link" href="http://clojure.org/cheatsheet/" target="_blank" rel="noopener"
>http://clojure.org/cheatsheet/&lt;/a>&lt;/em>ï¼‰ï¼Œå¯ä»¥æŒ‘é€‰æ›´å¤šçš„å‡½æ•°&lt;/p>
&lt;ol>
&lt;li>ä½ ç”¨&lt;code>(comp :intelligence :attribute)&lt;/code>åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°æ¥è¿”å›ä¸€ä¸ªè§’è‰²çš„æ™ºåŠ›ã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œ&lt;code>attr&lt;/code>ï¼Œä½ å¯ä»¥åƒ&lt;code>(attr :intelligence)&lt;/code>é‚£æ ·è°ƒç”¨å®ƒï¼ŒåšåŒæ ·çš„äº‹æƒ…ã€‚&lt;/li>
&lt;li>å®ç°&lt;code>comp&lt;/code>å‡½æ•°ã€‚&lt;/li>
&lt;li>å®ç°&lt;code>assoc-in&lt;/code>å‡½æ•°ã€‚æç¤ºï¼šä½¿ç”¨&lt;code>assoc&lt;/code>å‡½æ•°å¹¶å°†å…¶å‚æ•°å®šä¹‰ä¸º&lt;code>[m [k &amp;amp; ks] v]&lt;/code>ã€‚&lt;/li>
&lt;li>æŸ¥é˜…å¹¶ä½¿ç”¨&lt;code>update-in&lt;/code>å‡½æ•°ã€‚&lt;/li>
&lt;li>å®ç° &amp;ldquo;update-in&amp;rdquo;ã€‚&lt;/li>
&lt;/ol></description></item><item><title>Chapter4 æ·±å…¥ç ”ç©¶æ ¸å¿ƒå‡½æ•°</title><link>https://example.com/p/chapter4-%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6%E6%A0%B8%E5%BF%83%E5%87%BD%E6%95%B0/</link><pubDate>Thu, 13 Jan 2022 17:39:28 +0800</pubDate><guid>https://example.com/p/chapter4-%E6%B7%B1%E5%85%A5%E7%A0%94%E7%A9%B6%E6%A0%B8%E5%BF%83%E5%87%BD%E6%95%B0/</guid><description>&lt;h1 id="æ ¸å¿ƒå‡½æ•°çš„æ·±å…¥ç ”ç©¶">æ ¸å¿ƒå‡½æ•°çš„æ·±å…¥ç ”ç©¶&lt;/h1>
&lt;p>å¦‚æœä½ åƒæˆ‘ä¸€æ ·æ˜¯ç„¦è™‘çš„ã€ä»¥é’å°‘å¹´ä¸ºä¸­å¿ƒçš„å‡†è‚¥çš‚å‰§*ã€Šå¸è¡€é¬¼æ—¥è®°ã€‹*çš„è¶…çº§ç²‰ä¸ï¼Œä½ ä¸€å®šè®°å¾—ä¸»è§’åŸƒç³å¨œå¼€å§‹è´¨ç–‘å¥¹è‹ç™½çš„ã€ç¥ç§˜çš„æš—æ‹è€…çš„è¡Œä¸ºçš„é‚£ä¸€é›†ã€‚&amp;ldquo;ä¸ºä»€ä¹ˆå½“æˆ‘çš„è†ç›–è¢«åˆ®ä¼¤æ—¶ï¼Œä»–ç«‹åˆ»æ¶ˆå¤±å¾—æ— å½±æ— è¸ªï¼Ÿ&amp;ldquo;å’Œ &amp;ldquo;ä¸ºä»€ä¹ˆå½“æˆ‘çš„æ‰‹æŒ‡è¢«åˆ’ç ´æ—¶ï¼Œä»–çš„è„¸å˜æˆäº†ä¸€ä¸ªæ€ªå¼‚çš„æ­»äº¡é¢å…·ï¼Ÿ&amp;ldquo;ç­‰ç­‰ã€‚&lt;/p>
&lt;p>å¦‚æœä½ å·²ç»å¼€å§‹æŠŠç© Clojure çš„æ ¸å¿ƒå‡½æ•°ï¼Œä½ å¯èƒ½ä¹Ÿä¼šé—®è‡ªå·±ç±»ä¼¼çš„é—®é¢˜ã€‚&amp;ldquo;ä¸ºä»€ä¹ˆ&lt;code>map&lt;/code>ä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œè€Œæˆ‘ç»™å®ƒçš„æ˜¯ä¸€ä¸ª Vectorï¼Ÿ&amp;ldquo;å’Œ &amp;ldquo;ä¸ºä»€ä¹ˆ&lt;code>reduce&lt;/code>ä¼šæŠŠæˆ‘çš„ map å½“æˆä¸€ä¸ª Vectorï¼Ÿ&amp;ldquo;ç­‰ç­‰ã€‚(ä¸è¿‡ï¼Œæœ‰äº† Clojureï¼Œä½ è‡³å°‘å¯ä»¥å…äºæ€è€ƒä½œä¸ºä¸€ä¸ª 17 å²å­©å­çš„æ·±åˆ»çš„å­˜åœ¨ææƒ§ï¼Œç›´åˆ°æ°¸è¿œï¼‰ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£åˆ° Clojure çš„æ·±é‚ƒã€é»‘æš—ã€å—œè¡€ã€è¶…è‡ªç„¶çš„&lt;em>cough&lt;/em>ï¼Œæˆ‘çš„æ„æ€æ˜¯ï¼Œåœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£åˆ° Clojure çš„&lt;em>æŠ½è±¡çš„åŸºæœ¬æ¦‚å¿µä»¥åŠåºåˆ—å’Œé›†åˆçš„æŠ½è±¡&lt;/em>ã€‚ä½ è¿˜ä¼šäº†è§£åˆ°&lt;em>ç–¯ç‹‚çš„åºåˆ—&lt;/em>ã€‚è¿™å°†ä¸ºä½ æä¾›æ‰€éœ€çš„åŸºç¡€ï¼Œä½¿ä½ èƒ½å¤Ÿé˜…è¯»ä½ ä»¥å‰æ²¡æœ‰ä½¿ç”¨è¿‡çš„å‡½æ•°çš„æ–‡æ¡£ï¼Œå¹¶ç†è§£å½“ä½ è¯•ç€ä½¿ç”¨å®ƒä»¬æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/core-functions-in-depth/sparkly.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œä½ å°†è·å¾—æ›´å¤šå…³äºä½ æœ€éœ€è¦ä½¿ç”¨çš„å‡½æ•°çš„ç»éªŒã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ç”¨å‡½æ•°&lt;code>map&lt;/code>ã€&lt;code>reduce&lt;/code>ã€&lt;code>into&lt;/code>ã€&lt;code>conj&lt;/code>ã€&lt;code>concat&lt;/code>ã€&lt;code>some&lt;/code>ã€&lt;code>filter&lt;/code>ã€&lt;code>take&lt;/code>ã€&lt;code>drop&lt;/code>ã€&lt;code>sort&lt;/code>ã€&lt;code>sort-by&lt;/code>å’Œ&lt;code>identity&lt;/code>æ¥å¤„ç†åˆ—è¡¨ã€Vectorã€Map å’Œ Setã€‚ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ç”¨&lt;code>apply&lt;/code>ã€&lt;code>partial&lt;/code>å’Œ&lt;code>complement&lt;/code>åˆ›å»ºæ–°çš„å‡½æ•°ã€‚æ‰€æœ‰è¿™äº›ä¿¡æ¯å°†å¸®åŠ©ä½ äº†è§£å¦‚ä½•ä»¥ Clojure çš„æ–¹å¼åšäº‹ï¼Œå®ƒå°†ä¸ºä½ ç¼–å†™è‡ªå·±çš„ä»£ç ä»¥åŠé˜…è¯»å’Œå­¦ä¹ ä»–äººçš„é¡¹ç›®æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚&lt;/p>
&lt;p>æœ€åï¼Œä½ å°†å­¦ä¼šå¦‚ä½•è§£æå’ŒæŸ¥è¯¢ CSV ä¸­çš„å¸è¡€é¬¼æ•°æ®ï¼Œä»¥ç¡®å®šåœ¨ä½ çš„å®¶ä¹¡æ½œä¼ç€å“ªäº›è¯ºæ–¯è´¹æ‹‰å›¾ã€‚&lt;/p>
&lt;h2 id="ä»ç¼–ç¨‹åˆ°æŠ½è±¡">ä»ç¼–ç¨‹åˆ°æŠ½è±¡&lt;/h2>
&lt;p>ä¸ºäº†ç†è§£ä»ç¼–ç¨‹åˆ°æŠ½è±¡ï¼Œè®©æˆ‘ä»¬æŠŠ Clojure ä¸ä¸€ç§æ²¡æœ‰è€ƒè™‘åˆ°è¿™ä¸ªåŸåˆ™çš„è¯­è¨€è¿›è¡Œæ¯”è¾ƒã€‚Emacs Lispï¼ˆelispï¼‰ã€‚åœ¨ elisp ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>mapcar&lt;/code>å‡½æ•°æ¥å¯¼å‡ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œè¿™ä¸ä½ åœ¨ Clojure ä¸­ä½¿ç”¨&lt;code>map&lt;/code>çš„æ–¹å¼ç›¸ä¼¼ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³åœ¨ elisp ä¸­ Map ä¸€ä¸ªå“ˆå¸Œ Mapï¼ˆç±»ä¼¼äº Clojure çš„ map æ•°æ®ç»“æ„ï¼‰ï¼Œä½ éœ€è¦ä½¿ç”¨&lt;code>maphash&lt;/code>å‡½æ•°ï¼Œè€Œåœ¨ Clojure ä¸­ä½ ä»ç„¶å¯ä»¥åªä½¿ç”¨&lt;code>map&lt;/code>ã€‚æ¢å¥è¯è¯´ï¼Œelisp ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„ã€é’ˆå¯¹æ•°æ®ç»“æ„çš„å‡½æ•°æ¥å®ç°&lt;em>map&lt;/em>æ“ä½œï¼Œè€Œ Clojure åªä½¿ç”¨ä¸€ä¸ªã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ Clojure ä¸­å¯¹ map è°ƒç”¨&lt;code>reduce&lt;/code>ï¼Œè€Œ elisp å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå‡½æ•°æ¥å‡å°‘æ•£åˆ— mapã€‚&lt;/p>
&lt;p>åŸå› æ˜¯ Clojure åœ¨&lt;em>åºåˆ—æŠ½è±¡&lt;/em>æ–¹é¢å®šä¹‰äº†&lt;code>map&lt;/code>å’Œ&lt;code>reduce&lt;/code>å‡½æ•°ï¼Œè€Œä¸æ˜¯åœ¨å…·ä½“çš„æ•°æ®ç»“æ„æ–¹é¢ã€‚åªè¦æ•°æ®ç»“æ„å“åº”æ ¸å¿ƒåºåˆ—æ“ä½œï¼ˆå‡½æ•°&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>å’Œ&lt;code>cons&lt;/code>ï¼Œæˆ‘ä»¬ç¨åä¼šä»”ç»†ç ”ç©¶ï¼‰ï¼Œå®ƒå°±èƒ½ä¸&lt;code>map&lt;/code>ã€&lt;code>reduce&lt;/code>ä»¥åŠå…¶ä»–å¤§é‡çš„åºåˆ—å‡½æ•°å…è´¹å·¥ä½œã€‚è¿™å°±æ˜¯ Clojurists æ‰€è¯´çš„æŠ½è±¡ç¼–ç¨‹ï¼Œä¹Ÿæ˜¯ Clojure å“²å­¦çš„ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ã€‚&lt;/p>
&lt;p>æˆ‘è®¤ä¸ºæŠ½è±¡æ˜¯æ“ä½œçš„å‘½åé›†åˆã€‚å¦‚æœä½ èƒ½åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œä¸€ä¸ªæŠ½è±¡çš„æ‰€æœ‰æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯è¯¥æŠ½è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚æˆ‘ç”šè‡³åœ¨ç¼–ç¨‹ä¹‹å¤–ä¹Ÿæ˜¯è¿™æ ·æƒ³çš„ã€‚ä¾‹å¦‚ï¼Œ&lt;em>ç”µæ± &lt;/em>æŠ½è±¡åŒ…æ‹¬ &amp;ldquo;å°†å¯¼ç”µä»‹è´¨è¿æ¥åˆ°å…¶é˜³æå’Œé˜´æ &amp;ldquo;çš„æ“ä½œï¼Œè€Œè¯¥æ“ä½œçš„è¾“å‡ºæ˜¯&lt;em>ç”µæµ&lt;/em>ã€‚ç”µæ± æ˜¯ç”¨é”‚è¿˜æ˜¯ç”¨åœŸè±†åšçš„å¹¶ä¸é‡è¦ã€‚åªè¦å®ƒå¯¹å®šä¹‰&lt;em>ç”µæ± &lt;/em>çš„ä¸€ç³»åˆ—æ“ä½œåšå‡ºååº”ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç”µæ± ã€‚&lt;/p>
&lt;p>åŒæ ·åœ°ï¼Œ&lt;code>map&lt;/code>å¹¶ä¸å…³å¿ƒåˆ—è¡¨ã€Vectorã€Set å’Œ Map æ˜¯å¦‚ä½•å®ç°çš„ã€‚å®ƒåªå…³å¿ƒå®ƒæ˜¯å¦èƒ½å¯¹å®ƒä»¬è¿›è¡Œåºåˆ—æ“ä½œã€‚è®©æˆ‘ä»¬çœ‹çœ‹&lt;code>map&lt;/code>æ˜¯å¦‚ä½•åœ¨åºåˆ—æŠ½è±¡ä¸­å®šä¹‰çš„ï¼Œè¿™æ ·ä½ å°±èƒ½ç†è§£ä¸€èˆ¬çš„æŠ½è±¡ç¼–ç¨‹ã€‚&lt;/p>
&lt;h3 id="æŠŠåˆ—è¡¨vectorset-å’Œ-map-å½“ä½œåºåˆ—å¯¹å¾…">æŠŠåˆ—è¡¨ã€Vectorã€Set å’Œ Map å½“ä½œåºåˆ—å¯¹å¾…&lt;/h3>
&lt;p>å¦‚æœä½ æŠŠ&lt;code>map&lt;/code>æ“ä½œç‹¬ç«‹äºä»»ä½•ç¼–ç¨‹è¯­è¨€ï¼Œç”šè‡³æ˜¯ç¼–ç¨‹ï¼Œå®ƒçš„åŸºæœ¬è¡Œä¸ºæ˜¯ç”¨ä¸€ä¸ªå‡½æ•°&lt;em>Æ’&lt;/em>ä»ç°æœ‰çš„åºåˆ—&lt;em>x&lt;/em>å¯¼å‡ºä¸€ä¸ªæ–°çš„åºåˆ—&lt;em>y&lt;/em>ï¼Œè¿™æ · y1 = Æ’(x1), y2 = Æ’(x2), . . . yn = Æ’(xn)ã€‚å›¾ 4-1 è¯´æ˜äº†ä½ å¦‚ä½•å°†åº”ç”¨äºåºåˆ—çš„ Map å¯è§†åŒ–ã€‚&lt;/p>
&lt;p>! &lt;a class="link" href="https://www.braveclojure.com/assets/images/cftbat/core-functions-in-depth/mapping.png" target="_blank" rel="noopener"
>img&lt;/a>&lt;/p>
&lt;p>å›¾ 4-1ï¼šMap çš„å¯è§†åŒ–&lt;/p>
&lt;p>æœ¯è¯­&lt;em>åºåˆ—&lt;/em>åœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ä»¥çº¿æ€§é¡ºåºç»„ç»‡çš„å…ƒç´ é›†åˆï¼Œè€Œä¸æ˜¯æ— åºé›†åˆæˆ–èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰å‰åå…³ç³»çš„å›¾ã€‚å›¾ 4-2 æ˜¾ç¤ºäº†ä½ å¦‚ä½•å°†ä¸€ä¸ªåºåˆ—å¯è§†åŒ–ï¼Œä¸ä¸Šè¿°å…¶ä»–ä¸¤ä¸ªé›†åˆå½¢æˆå¯¹æ¯”ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/core-functions-in-depth/collections.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>å›¾ 4-2ï¼šåºåˆ—å’Œéåºåˆ—é›†åˆ&lt;/p>
&lt;p>åœ¨è¿™ä¸ªå…³äº Map å’Œåºåˆ—çš„æè¿°ä¸­ï¼Œæ²¡æœ‰æåˆ°åˆ—è¡¨ã€Vector æˆ–å…¶ä»–å…·ä½“çš„æ•°æ®ç»“æ„ã€‚Clojure çš„è®¾è®¡æ˜¯è®©æˆ‘ä»¬å°½å¯èƒ½åœ°ç”¨è¿™ç§æŠ½è±¡çš„æœ¯è¯­æ¥æ€è€ƒå’Œç¼–ç¨‹ï¼Œå®ƒé€šè¿‡ç”¨æ•°æ®ç»“æ„çš„æŠ½è±¡æ¥å®ç°å‡½æ•°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>map&lt;/code>æ˜¯æ ¹æ®åºåˆ—æŠ½è±¡æ¥å®šä¹‰çš„ã€‚åœ¨å¯¹è¯ä¸­ï¼Œä½ ä¼šè¯´&lt;code>map&lt;/code>ã€&lt;code>reduce&lt;/code>å’Œå…¶ä»–åºåˆ—å‡½æ•°&lt;em>å–ä¸€ä¸ªåºåˆ—&lt;/em>æˆ–ç”šè‡³&lt;em>å–ä¸€ä¸ª seq&lt;/em>ã€‚äº‹å®ä¸Šï¼ŒClojurists é€šå¸¸ä½¿ç”¨&lt;em>seq&lt;/em>è€Œä¸æ˜¯&lt;em>sequence&lt;/em>ï¼Œä½¿ç”¨&lt;em>seq å‡½æ•°&lt;/em>å’Œ&lt;em>seq åº“&lt;/em>ç­‰æœ¯è¯­æ¥æŒ‡ä»£æ‰§è¡Œé¡ºåºæ“ä½œçš„å‡½æ•°ã€‚æ— è®ºä½ ä½¿ç”¨&lt;em>sequence&lt;/em>è¿˜æ˜¯&lt;em>seq&lt;/em>ï¼Œä½ éƒ½è¡¨æ˜æœ‰å…³çš„æ•°æ®ç»“æ„å°†è¢«è§†ä¸ºä¸€ä¸ªåºåˆ—ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä»€ä¹ˆæœ€çœŸå®çš„å¿ƒæ€å¹¶ä¸é‡è¦ã€‚&lt;/p>
&lt;p>å¦‚æœæ ¸å¿ƒåºåˆ—å‡½æ•° &amp;ldquo;first&amp;rdquo;ã€&amp;ldquo;rest &amp;ldquo;å’Œ &amp;ldquo;cons &amp;ldquo;åœ¨ä¸€ä¸ªæ•°æ®ç»“æ„ä¸Šå·¥ä½œï¼Œä½ å¯ä»¥è¯´è¿™ä¸ªæ•°æ®ç»“æ„&lt;em>å®ç°äº†&lt;/em>åºåˆ—çš„æŠ½è±¡ã€‚åˆ—è¡¨ã€Vectorã€Set å’Œ Map éƒ½å®ç°äº†åºåˆ—æŠ½è±¡ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½å¯ä»¥ç”¨&lt;code>map&lt;/code>ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn titleize
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [topic]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str topic &amp;#34; for the Brave and True&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(map titleize [&amp;#34;Hamsters&amp;#34; &amp;#34;Ragnarok&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Hamsters for the Brave and True&amp;#34; &amp;#34;Ragnarok for the Brave and True&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(map titleize &amp;#39;(&amp;#34;Empathy&amp;#34; &amp;#34;Decorating&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Empathy for the Brave and True&amp;#34; &amp;#34;Decorating for the Brave and True&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(map titleize #{&amp;#34;Elbows&amp;#34; &amp;#34;Soap Carving&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Elbows for the Brave and True&amp;#34; &amp;#34;Soap Carving for the Brave and True&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(map #(titleize (second %)) {:uncomfortable-thing &amp;#34;Winking&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Winking for the Brave and True&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‰ä¸¤ä¸ªä¾‹å­è¡¨æ˜&lt;code>map&lt;/code>å¯¹ Vector å’Œåˆ—è¡¨çš„å·¥ä½œæ–¹å¼æ˜¯ç›¸åŒçš„ã€‚ç¬¬ä¸‰ä¸ªä¾‹å­æ˜¾ç¤º&lt;code>map&lt;/code>å¯ä»¥ä¸æœªæ’åºçš„é›†åˆä¸€èµ·å·¥ä½œã€‚åœ¨ç¬¬å››ä¸ªä¾‹å­ä¸­ï¼Œä½ å¿…é¡»åœ¨åŒ¿åå‡½æ•°çš„å‚æ•°ä¸Šè°ƒç”¨&lt;code>second&lt;/code>ï¼Œç„¶åå†å°†å…¶æ ‡é¢˜åŒ–ï¼Œå› ä¸ºå‚æ•°æ˜¯ä¸€ä¸ª mapã€‚æˆ‘å°†å¾ˆå¿«è§£é‡ŠåŸå› ï¼Œä½†é¦–å…ˆè®©æˆ‘ä»¬çœ‹çœ‹å®šä¹‰åºåˆ—æŠ½è±¡çš„ä¸‰ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;h3 id="first-rest-and-cons">first, rest, and cons&lt;/h3>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/core-functions-in-depth/hamster.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å¿«é€Ÿè¿‚å›åˆ° JavaScript ä¸­ï¼Œå®ç°ä¸€ä¸ªé“¾è¡¨å’Œä¸‰ä¸ªæ ¸å¿ƒå‡½æ•°ã€‚&lt;code>first&lt;/code>,&lt;code>rest&lt;/code>, å’Œ&lt;code>cons&lt;/code>ã€‚åœ¨è¿™ä¸‰ä¸ªæ ¸å¿ƒå‡½æ•°å®ç°ä¹‹åï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•ç”¨å®ƒä»¬æ¥æ„å»º&lt;code>map&lt;/code>ã€‚&lt;/p>
&lt;p>é‡ç‚¹æ˜¯è¦ç†è§£ Clojure ä¸­çš„ seq æŠ½è±¡å’Œé“¾æ¥åˆ—è¡¨çš„å…·ä½“å®ç°ä¹‹é—´çš„åŒºåˆ«ã€‚å¦‚ä½•å®ç°ä¸€ä¸ªç‰¹å®šçš„æ•°æ®ç»“æ„å¹¶ä¸é‡è¦ï¼šå½“æ¶‰åŠåˆ°åœ¨ä¸€ä¸ªæ•°æ®ç»“æ„ä¸Šä½¿ç”¨ seq å‡½æ•°æ—¶ï¼ŒClojure æ‰€é—®çš„æ˜¯ &amp;ldquo;æˆ‘å¯ä»¥&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>å’Œ&lt;code>cons&lt;/code>å—ï¼Ÿ&amp;rdquo; å¦‚æœç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä½ å°±å¯ä»¥åœ¨è¯¥æ•°æ®ç»“æ„ä¸Šä½¿ç”¨ seq åº“ã€‚&lt;/p>
&lt;p>åœ¨ä¸€ä¸ªé“¾æ¥åˆ—è¡¨ä¸­ï¼ŒèŠ‚ç‚¹æ˜¯ä»¥çº¿æ€§é¡ºåºé“¾æ¥çš„ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•åœ¨ JavaScript ä¸­åˆ›å»ºä¸€ä¸ªã€‚åœ¨è¿™ä¸ªç‰‡æ®µä¸­ï¼Œ&lt;code>next&lt;/code>æ˜¯ç©ºçš„ï¼Œå› ä¸ºå®ƒæ˜¯åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">var node3 = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &amp;#34;last&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next: null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œ&lt;code>node2&lt;/code>çš„&lt;code>next&lt;/code>æŒ‡å‘&lt;code>node3&lt;/code>ï¼Œè€Œ&lt;code>node1&lt;/code>çš„&lt;code>next&lt;/code>æŒ‡å‘&lt;code>node2&lt;/code>ï¼›è¿™å°±æ˜¯ &amp;ldquo;é“¾è¡¨ &amp;ldquo;ä¸­çš„ &amp;ldquo;é“¾æ¥&amp;rdquo;ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">var node2 = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &amp;#34;middle&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next: node3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var node1 = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &amp;#34;first&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next: node2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»å›¾å½¢ä¸Šçœ‹ï¼Œä½ å¯ä»¥å¦‚å›¾ 4-3 æ‰€ç¤ºè¡¨ç¤ºè¿™ä¸ªåˆ—è¡¨ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/core-functions-in-depth/linked-list.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>å›¾ 4-3: ä¸€ä¸ªé“¾æ¥åˆ—è¡¨&lt;/p>
&lt;p>ä½ å¯ä»¥åœ¨ä¸€ä¸ªé“¾è¡¨ä¸Šæ‰§è¡Œä¸‰ä¸ªæ ¸å¿ƒå‡½æ•°ã€‚&lt;code>first&lt;/code>, &lt;code>rest&lt;/code>, å’Œ&lt;code>cons&lt;/code>. &lt;code>first&lt;/code>è¿”å›è¯·æ±‚çš„èŠ‚ç‚¹çš„å€¼ï¼Œ&lt;code>rest&lt;/code>è¿”å›è¯·æ±‚çš„èŠ‚ç‚¹ä¹‹åçš„å‰©ä½™å€¼ï¼Œ&lt;code>cons&lt;/code>åœ¨åˆ—è¡¨çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªå…·æœ‰ç»™å®šå€¼çš„æ–°èŠ‚ç‚¹ã€‚åœ¨è¿™äº›å®ç°ä¹‹åï¼Œä½ å¯ä»¥åœ¨å®ƒä»¬ä¹‹ä¸Šå®ç°&lt;code>map&lt;/code>ã€&lt;code>reduce&lt;/code>ã€&lt;code>filter&lt;/code>å’Œå…¶ä»– seq å‡½æ•°ã€‚&lt;/p>
&lt;p>ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†æˆ‘ä»¬å¦‚ä½•ç”¨æˆ‘ä»¬çš„ JavaScript ä¾‹å­å®ç°å’Œä½¿ç”¨&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>å’Œ&lt;code>cons&lt;/code>ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥è¿”å›ç‰¹å®šçš„èŠ‚ç‚¹å¹¶å¯¼å‡ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ã€‚è¯·æ³¨æ„ï¼Œ&lt;code>first&lt;/code>å’Œ&lt;code>rest&lt;/code>çš„å‚æ•°è¢«å‘½åä¸º&lt;em>node&lt;/em>ã€‚è¿™å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°å›°æƒ‘ï¼Œå› ä¸ºä½ å¯èƒ½ä¼šè¯´ï¼š&amp;ldquo;æˆ‘ä¸æ˜¯åœ¨è·å–ä¸€ä¸ª&lt;em>åˆ—è¡¨&lt;/em>çš„ç¬¬ä¸€ä¸ªå…ƒç´ å—ï¼Ÿ&amp;rdquo; å¥½å§ï¼Œä½ ä¸€æ¬¡å¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œæ˜¯ä¸€ä¸ªèŠ‚ç‚¹ä¸€ä¸ªèŠ‚ç‚¹åœ°æ“ä½œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">var first = function(node) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return node.value;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var rest = function(node) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return node.next;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var cons = function(newValue, node) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: newValue,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next: node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">first(node1);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; &amp;#34;first&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">first(rest(node1));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; &amp;#34;middle&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">first(rest(rest(node1)));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; &amp;#34;last&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var node0 = cons(&amp;#34;new first&amp;#34;, node1);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">first(node0);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; &amp;#34;new first&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">first(rest(node0));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; &amp;#34;first&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚å‰æ‰€è¿°ï¼Œä½ å¯ä»¥ç”¨&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>å’Œ&lt;code>cons&lt;/code>æ¥å®ç°&lt;code>map&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">var map = function (list, transform) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (list === null) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return null;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return cons(transform(first(list)), map(rest(list), transform));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‡½æ•°è½¬æ¢äº† list çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶ååœ¨ list çš„å…¶ä½™éƒ¨åˆ†å†æ¬¡è°ƒç”¨è‡ªå·±ï¼Œç›´åˆ°åˆ°è¾¾ç»“å°¾ï¼ˆä¸€ä¸ªç©ºå€¼ï¼‰ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„è¿è¡Œæƒ…å†µ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å¯¹ä»¥ &lt;code>node1&lt;/code> å¼€å§‹çš„åˆ—è¡¨è¿›è¡Œ Mapï¼Œè¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œå­—ç¬¦ä¸² &lt;code>&amp;quot; mapped!&amp;quot;&lt;/code> è¢«é™„åŠ åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ä¸Šã€‚ç„¶åä½ ç”¨&lt;code>first&lt;/code>æ¥è¿”å›ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">first(
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> map(node1, function (val) { return val + &amp;#34; mapped!&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; &amp;#34;first mapped!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæœ‰ä»¶å¾ˆé…·çš„äº‹ï¼šå› ä¸º&lt;code>map&lt;/code>æ˜¯å®Œå…¨ç”¨&lt;code>cons&lt;/code>ã€&lt;code>first&lt;/code>å’Œ&lt;code>rest&lt;/code>å®ç°çš„ï¼Œä½ å®é™…ä¸Šå¯ä»¥æŠŠä»»ä½•æ•°æ®ç»“æ„ä¼ ç»™å®ƒï¼Œåªè¦&lt;code>cons&lt;/code>ã€&lt;code>first&lt;/code>å’Œ&lt;code>rest&lt;/code>å¯¹è¯¥æ•°æ®ç»“æ„èµ·ä½œç”¨ï¼Œå®ƒå°±èƒ½å·¥ä½œã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯å®ƒä»¬å¯¹ä¸€ä¸ªæ•°ç»„çš„ä½œç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">var first = function (array) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return array[0];
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var rest = function (array) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var sliced = array.slice(1, array.length);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (sliced.length == 0) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return null;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return sliced;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var cons = function (newValue, array) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return [newValue].concat(array);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var list = [&amp;#34;Transylvania&amp;#34;, &amp;#34;Forks, WA&amp;#34;];
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">map(list, function (val) { return val + &amp;#34; mapped!&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// =&amp;gt; [&amp;#34;Transylvania mapped!&amp;#34;, &amp;#34;Forks, WA mapped!&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä»£ç ç‰‡æ®µç”¨ JavaScript çš„æ•°ç»„å‡½æ•°å®šä¹‰äº†&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>å’Œ&lt;code>cons&lt;/code>ã€‚åŒæ—¶ï¼Œ&lt;code>map&lt;/code>ç»§ç»­å¼•ç”¨åä¸º&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>å’Œ&lt;code>cons&lt;/code>çš„å‡½æ•°ï¼Œæ‰€ä»¥ç°åœ¨å®ƒåœ¨&lt;code>array&lt;/code>ä¸Šå·¥ä½œã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ èƒ½å®ç°&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>å’Œ&lt;code>cons&lt;/code>ï¼Œä½ å°±èƒ½å…è´¹å¾—åˆ°&lt;code>map&lt;/code>å’Œå‰é¢æåˆ°çš„å¤§é‡å…¶ä»–å‡½æ•°ã€‚&lt;/p>
&lt;h3 id="é€šè¿‡ä¸­é—´å±‚æŠ½è±¡">é€šè¿‡ä¸­é—´å±‚æŠ½è±¡&lt;/h3>
&lt;p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ å¯èƒ½ä¼šåå¯¹æˆ‘åªæ˜¯åœ¨è¸¢çš®çƒï¼Œå› ä¸ºæˆ‘ä»¬ä»ç„¶é¢ä¸´ç€åƒ&lt;code>first&lt;/code>è¿™æ ·çš„å‡½æ•°å¦‚ä½•èƒ½å¤Ÿä¸ä¸åŒçš„æ•°æ®ç»“æ„ä¸€èµ·å·¥ä½œçš„é—®é¢˜ã€‚Clojure ä½¿ç”¨ä¸¤ç§å½¢å¼çš„æŒ‡ç¤ºæ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œ&lt;em>ä¸­é—´å±‚&lt;/em>æ˜¯ä¸€ä¸ªé€šç”¨æœ¯è¯­ï¼ŒæŒ‡çš„æ˜¯ä¸€ç§è¯­è¨€æ‰€é‡‡ç”¨çš„æœºåˆ¶ï¼Œè¿™æ ·ä¸€ä¸ªåå­—å¯ä»¥æœ‰å¤šç§ç›¸å…³çš„å«ä¹‰ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&amp;ldquo;first &amp;ldquo;è¿™ä¸ªåå­—æœ‰å¤šç§æ•°æ®ç»“æ„çš„å«ä¹‰ã€‚æ–¹å‘æ€§æ˜¯ä½¿æŠ½è±¡åŒ–æˆä¸ºå¯èƒ½çš„åŸå› ã€‚&lt;/p>
&lt;p>&lt;em>å¤šæ€&lt;/em>æ˜¯ Clojure æä¾›ä¸­é—´å±‚çš„ä¸€ç§æ–¹å¼ã€‚æˆ‘ä¸æƒ³åœ¨ç»†èŠ‚ä¸Šè¿·å¤±æ–¹å‘ï¼Œä½†åŸºæœ¬ä¸Šï¼Œå¤šæ€å‡½æ•°æ ¹æ®æä¾›çš„å‚æ•°ç±»å‹åˆ†é…ç»™ä¸åŒçš„å‡½æ•°ä½“ã€‚(è¿™ä¸å¤šæ€å‡½æ•°æ ¹æ®ä½ æä¾›çš„å‚æ•°æ•°é‡æ´¾å‘åˆ°ä¸åŒçš„å‡½æ•°ä½“å¹¶æ— å¤ªå¤§åŒºåˆ«ï¼‰ã€‚&lt;/p>
&lt;p>æ³¨æ„ Clojure æœ‰ä¸¤ç§ç»“æ„æ¥å®šä¹‰å¤šæ€åˆ†å‘ï¼šä¸»æœºå¹³å°çš„æ¥å£ç»“æ„å’Œå¹³å°ç‹¬ç«‹çš„åè®®ã€‚ä½†åœ¨ä½ åˆšå¼€å§‹çš„æ—¶å€™ï¼Œæ²¡æœ‰å¿…è¦äº†è§£è¿™äº›ä¸œè¥¿æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆ‘å°†åœ¨ç¬¬ 13 ç« ä»‹ç»åè®®ã€‚&lt;/p>
&lt;p>å½“æ¶‰åŠåˆ°åºåˆ—æ—¶ï¼ŒClojure ä¹Ÿé€šè¿‡åšä¸€ç§è½»é‡çº§çš„ç±»å‹è½¬æ¢æ¥åˆ›é€ ä¸­é—´å±‚ï¼Œäº§ç”Ÿä¸€ç§æ•°æ®ç»“æ„ï¼Œä¸æŠ½è±¡çš„å‡½æ•°ä¸€èµ·å·¥ä½œã€‚æ¯å½“ Clojure æœŸæœ›ä¸€ä¸ªåºåˆ—&amp;ndash;ä¾‹å¦‚ï¼Œå½“ä½ è°ƒç”¨&lt;code>map&lt;/code>ã€&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>æˆ–&lt;code>cons&lt;/code>æ—¶ï¼Œå®ƒå°±ä¼šè°ƒç”¨ç›¸å…³æ•°æ®ç»“æ„ä¸Šçš„&lt;code>seq&lt;/code>å‡½æ•°ï¼Œä»¥è·å¾—ä¸€ä¸ªå…è®¸&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>å’Œ&lt;code>cons&lt;/code>çš„æ•°æ®ç»“æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(seq &amp;#39;(1 2 3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(seq [1 2 3])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(seq #{1 2 3})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(seq {:name &amp;#34;Bill Compton&amp;#34; :occupation &amp;#34;Dead mopey guy&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ([:name &amp;#34;Bill Compton&amp;#34;] [:occupation &amp;#34;Dead mopey guy&amp;#34;])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæœ‰ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„ç»†èŠ‚ã€‚é¦–å…ˆï¼Œ&lt;code>seq&lt;/code>æ€»æ˜¯è¿”å›ä¸€ä¸ªçœ‹èµ·æ¥åƒåˆ—è¡¨çš„å€¼ï¼›ä½ ä¼šæŠŠè¿™ä¸ªå€¼ç§°ä¸º&lt;em>sequence&lt;/em>æˆ–&lt;em>seq&lt;/em>ã€‚ç¬¬äºŒï¼ŒMap çš„ seq ç”±ä¸¤ä¸ªå…ƒç´ çš„é”®å€¼ Vector ç»„æˆã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ&lt;code>map&lt;/code>æŠŠä½ çš„ Map å½“ä½œ Vector åˆ—è¡¨çš„åŸå› ! ä½ å¯ä»¥åœ¨ &amp;ldquo;Bill Compton &amp;ldquo;çš„ä¾‹å­ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘æƒ³ç‰¹åˆ«æŒ‡å‡ºè¿™ä¸ªä¾‹å­ï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯ä»¤äººæƒŠè®¶å’Œå›°æƒ‘çš„ã€‚åœ¨æˆ‘åˆšå¼€å§‹ä½¿ç”¨ Clojure çš„æ—¶å€™å°±æ˜¯è¿™æ ·ã€‚äº†è§£è¿™äº›åº•å±‚æœºåˆ¶å°†ä½¿ä½ ä¸è‡³äºåƒè¯•å›¾ä¿ç•™äººæ€§çš„ç”·æ€§å¸è¡€é¬¼é‚£æ ·ï¼Œç»å¸¸è¡¨ç°å‡ºæŒ«æŠ˜æ„Ÿå’Œæ™®éçš„æ‹–æ²“æ„Ÿã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨&lt;code>into&lt;/code>å°† seq è½¬æ¢å› Mapï¼Œå°†ç»“æœç²˜åˆ°ä¸€ä¸ªç©ºçš„ Map ä¸­ï¼ˆåé¢ä½ ä¼šä»”ç»†çœ‹&lt;code>into&lt;/code>ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(into {} (seq {:a 1 :b 2 :c 3})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:a 1, :c 3, :b 2}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥ï¼ŒClojure çš„åºåˆ—å‡½æ•°åœ¨å…¶å‚æ•°ä¸Šä½¿ç”¨&lt;code>seq&lt;/code>ã€‚åºåˆ—å‡½æ•°æ˜¯æ ¹æ®åºåˆ—æŠ½è±¡å®šä¹‰çš„ï¼Œä½¿ç”¨&lt;code>first&lt;/code>ã€&lt;code>rest&lt;/code>å’Œ&lt;code>cons&lt;/code>ã€‚åªè¦ä¸€ä¸ªæ•°æ®ç»“æ„å®ç°äº†åºåˆ—æŠ½è±¡ï¼Œå®ƒå°±å¯ä»¥ä½¿ç”¨å¹¿æ³›çš„ seq åº“ï¼Œå…¶ä¸­åŒ…æ‹¬è¯¸å¦‚&lt;code>reduce&lt;/code>ã€&lt;code>filter&lt;/code>ã€&lt;code>distinct&lt;/code>ã€&lt;code>group-by&lt;/code>ç­‰è¶…çº§æ˜æ˜Ÿå‡½æ•°ã€‚&lt;/p>
&lt;p>è¿™é‡Œçš„å¯ç¤ºæ˜¯ï¼ŒæŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨æˆ‘ä»¬èƒ½å¯¹ä¸€ä¸ªæ•°æ®ç»“æ„åšä»€ä¹ˆï¼Œå¹¶å°½å¯èƒ½åœ°å¿½ç•¥å®ƒçš„å®ç°ï¼Œæ˜¯éå¸¸æœ‰åŠ›çš„ã€‚å®ç°æœ¬èº«å¹¶ä¸é‡è¦ã€‚å®ƒä»¬åªæ˜¯è¾¾åˆ°ç›®çš„çš„ä¸€ç§æ‰‹æ®µã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒæŠ½è±¡ç¼–ç¨‹å¯ä»¥è®©ä½ åœ¨ä¸åŒçš„æ•°æ®ç»“æ„ä¸Šä½¿ç”¨å‡½æ•°åº“ï¼Œä¸ç®¡è¿™äº›æ•°æ®ç»“æ„æ˜¯å¦‚ä½•å®ç°çš„ã€‚&lt;/p>
&lt;h2 id="seq-å‡½æ•°çš„ä¾‹å­">Seq å‡½æ•°çš„ä¾‹å­&lt;/h2>
&lt;p>Clojure çš„ seq åº“ä¸­æœ‰å¾ˆå¤šæœ‰ç”¨çš„å‡½æ•°ï¼Œä½ ä¼šç»å¸¸ç”¨åˆ°ã€‚ç°åœ¨ä½ å·²ç»å¯¹ Clojure çš„åºåˆ—æŠ½è±¡æœ‰äº†æ›´æ·±çš„äº†è§£ï¼Œè®©æˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹è¿™äº›å‡½æ•°ã€‚å¦‚æœä½ æ˜¯ Lisp å’Œå‡½æ•°å¼ç¼–ç¨‹çš„æ–°æ‰‹ï¼Œè¿™äº›ä¾‹å­å°†æ˜¯ä»¤äººæƒŠè®¶å’Œæ„‰å¿«çš„ã€‚&lt;/p>
&lt;h3 id="map">Map&lt;/h3>
&lt;p>ä½ ç°åœ¨å·²ç»çœ‹è¿‡å¾ˆå¤š&lt;code>map&lt;/code>çš„ä¾‹å­äº†ï¼Œä½†æ˜¯è¿™ä¸€èŠ‚å±•ç¤ºäº†&lt;code>map&lt;/code>åšäº†ä¸¤ä¸ªæ–°çš„ä»»åŠ¡ï¼šæŠŠå¤šä¸ªé›†åˆä½œä¸ºå‚æ•°ï¼Œä»¥åŠæŠŠä¸€ä¸ªå‡½æ•°é›†åˆä½œä¸ºå‚æ•°ã€‚å®ƒè¿˜å¼ºè°ƒäº†ä¸€ä¸ªå¸¸è§çš„&lt;code>map&lt;/code>æ¨¡å¼ï¼šä½¿ç”¨å…³é”®å­—ä½œä¸º Map å‡½æ•°ã€‚&lt;/p>
&lt;p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åªçœ‹åˆ°äº†&lt;code>map&lt;/code>åœ¨ä¸€ä¸ªé›†åˆä¸Šæ“ä½œçš„ä¾‹å­ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œè¿™ä¸ªé›†åˆæ˜¯ Vector&lt;code>[1 2 3]&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(map inc [1 2 3])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (2 3 4)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œä½ ä¹Ÿå¯ä»¥ç»™&lt;code>map&lt;/code>å¤šä¸ªé›†åˆã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(map str [&amp;#34;a&amp;#34; &amp;#34;b&amp;#34; &amp;#34;c&amp;#34;] [&amp;#34;A&amp;#34; &amp;#34;B&amp;#34; &amp;#34;C&amp;#34;] )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;aA&amp;#34; &amp;#34;bB&amp;#34; &amp;#34;cC&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±å¥½åƒ&lt;code>map&lt;/code>åšäº†ä»¥ä¸‹çš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(list (str &amp;#34;a&amp;#34; &amp;#34;A&amp;#34;) (str &amp;#34;b&amp;#34; &amp;#34;B&amp;#34;) (str &amp;#34;c&amp;#34; &amp;#34;C&amp;#34;))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/core-functions-in-depth/vampire-diary.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>å½“ä½ ä¼ é€’ç»™&lt;code>map&lt;/code>å¤šä¸ªé›†åˆæ—¶ï¼Œç¬¬ä¸€ä¸ªé›†åˆçš„å…ƒç´ ï¼ˆ&lt;code>[&amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot;]&lt;/code>ï¼‰å°†ä½œä¸º Map å‡½æ•°ï¼ˆ&lt;code>str&lt;/code>ï¼‰çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ï¼Œç¬¬äºŒä¸ªé›†åˆçš„å…ƒç´ ï¼ˆ&lt;code>[&amp;quot;A&amp;quot; &amp;quot;B&amp;quot; &amp;quot;C&amp;quot;&lt;/code>ï¼‰å°†ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ï¼Œä»¥æ­¤ç±»æ¨ã€‚åªè¦ç¡®ä¿ä½ çš„ Map å‡½æ•°å¯ä»¥æ¥å—çš„å‚æ•°æ•°é‡ä¸ä½ ä¼ é€’ç»™&lt;code>map&lt;/code>çš„é›†åˆæ•°é‡ç›¸ç­‰ã€‚&lt;/p>
&lt;p>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚æœä½ æ˜¯ä¸€ä¸ªè¯•å›¾æŠ‘åˆ¶äººç±»æ¶ˆè´¹çš„å¸è¡€é¬¼ï¼Œä½ å¯ä»¥å¦‚ä½•ä½¿ç”¨è¿™ç§èƒ½åŠ›ã€‚ä½ æœ‰ä¸¤ä¸ª Vectorï¼Œä¸€ä¸ªä»£è¡¨äººç±»æ‘„å…¥çš„å‡æ•°ï¼Œå¦ä¸€ä¸ªä»£è¡¨è¿‡å»å››å¤©çš„å°åŠ¨ç‰©æ‘„å…¥é‡ã€‚&lt;code>unify-diet-data&lt;/code> å‡½æ•°è·å–äººç±»å’ŒåŠ¨ç‰©çš„å•æ—¥æ•°æ®ï¼Œå¹¶å°†ä¸¤è€…ç»Ÿä¸€ä¸ºä¸€å¼  Mapã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def human-consumption [8.1 7.3 6.6 5.0])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def critter-consumption [0.0 0.2 0.3 1.1])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn unify-diet-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [human critter]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:human human
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :critter critter})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(map unify-diet-data human-consumption critter-consumption)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ({:human 8.1, :critter 0.0}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:human 7.3, :critter 0.2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:human 6.6, :critter 0.3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:human 5.0, :critter 1.1})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¥½æ ·çš„ï¼ŒæŠŠäººè£æ‰äº†!&lt;/p>
&lt;p>ä½ å¯ä»¥ç”¨&lt;code>map&lt;/code>åšçš„å¦ä¸€ä»¶æœ‰è¶£çš„äº‹æ˜¯æŠŠä¸€ä¸ªå‡½æ•°é›†åˆä¼ ç»™å®ƒã€‚å¦‚æœä½ æƒ³å¯¹ä¸åŒçš„æ•°å­—é›†åˆè¿›è¡Œä¸€ç³»åˆ—çš„è®¡ç®—ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°±åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def sum #(reduce + %))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def avg #(/ (sum %) (count %)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn stats
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [numbers]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map #(% numbers) [sum count avg]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(stats [3 4 10])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (17 3 17/3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(stats [80 1 44 13 6])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (144 5 144/5)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>stats&lt;/code>å‡½æ•°éå†äº†ä¸€ä¸ªå‡½æ•°çš„ Vectorï¼Œå°†æ¯ä¸ªå‡½æ•°åº”ç”¨äº&lt;code>numbers&lt;/code>ã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼ŒClojurists ç»å¸¸ä½¿ç”¨&lt;code>map&lt;/code>ä» map æ•°æ®ç»“æ„çš„é›†åˆä¸­æ£€ç´¢ä¸ä¸€ä¸ªå…³é”®è¯ç›¸å…³çš„å€¼ã€‚å› ä¸ºå…³é”®å­—å¯ä»¥ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œä½ å¯ä»¥ç®€æ´åœ°åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def identities
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [{:alias &amp;#34;Batman&amp;#34; :real &amp;#34;Bruce Wayne&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:alias &amp;#34;Spider-Man&amp;#34; :real &amp;#34;Peter Parker&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:alias &amp;#34;Santa&amp;#34; :real &amp;#34;Your mom&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:alias &amp;#34;Easter Bunny&amp;#34; :real &amp;#34;Your dad&amp;#34;}])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(map :real identities)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Bruce Wayne&amp;#34; &amp;#34;Peter Parker&amp;#34; &amp;#34;Your mom&amp;#34; &amp;#34;Your dad&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>(å¦‚æœä½ æ˜¯äº”å²ï¼Œé‚£ä¹ˆæˆ‘æ·±è¡¨æ­‰æ„ï¼‰ã€‚&lt;/p>
&lt;h3 id="reduce">reduce&lt;/h3>
&lt;p>ç¬¬ 3 ç« å±•ç¤ºäº†&lt;code>reduce&lt;/code>å¦‚ä½•å¤„ç†åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ æ¥ç”Ÿæˆä¸€ä¸ªç»“æœã€‚æœ¬èŠ‚å±•ç¤ºäº†å…¶ä»–ä¸€äº›å¯èƒ½ä¸ç»å¸¸ä½¿ç”¨çš„ä½¿ç”¨æ–¹æ³•ã€‚&lt;/p>
&lt;p>ç¬¬ä¸€ç§ç”¨æ³•æ˜¯è½¬æ¢ä¸€ä¸ª Map çš„å€¼ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ Mapï¼Œå…¶é”®å€¼ç›¸åŒï¼Œä½†æ•°å€¼æ›´æ–°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(reduce (fn [new-map [key val]]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (assoc new-map key (inc val)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:max 30 :min 10})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:max 31, :min 11}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>reduce&lt;/code>å°†å‚æ•°&lt;code>{:max 30 :min 10}&lt;/code>è§†ä¸ºä¸€ä¸ª Vector åºåˆ—ï¼Œå¦‚&lt;code>([:max 30] [:min 10])&lt;/code>ã€‚ç„¶åï¼Œå®ƒä»ä¸€ä¸ªç©º Mapï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰å¼€å§‹ï¼Œç”¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ªåŒ¿åå‡½æ•°æ¥å»ºç«‹å®ƒã€‚å°±åƒ&lt;code>reduce&lt;/code>è¿™æ ·åšï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(assoc (assoc {} :max (inc 30))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :min (inc 10))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡½æ•°&lt;code>assoc&lt;/code>éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼šä¸€ä¸ª Mapï¼Œä¸€ä¸ªé”®ï¼Œå’Œä¸€ä¸ªå€¼ã€‚å®ƒé€šè¿‡&lt;em>å…³è”&lt;/em>ç»™å®šçš„é”®å’Œç»™å®šçš„å€¼ï¼Œä»ä½ ç»™å®ƒçš„ Map ä¸­æ´¾ç”Ÿå‡ºä¸€ä¸ªæ–°çš„ Mapã€‚ä¾‹å¦‚ï¼Œ&lt;code>(assoc {:a 1} :b 2)&lt;/code>å°†è¿”å›&lt;code>{:a 1 :b 2}&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;code>reduce&lt;/code> çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯æ ¹æ®é”®å€¼ä» Map ä¸­è¿‡æ»¤å‡ºæ¥ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒåŒ¿åå‡½æ•°æ£€æŸ¥ä¸€ä¸ªé”®å€¼å¯¹çš„å€¼æ˜¯å¦å¤§äº 4ï¼Œå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆè¿™ä¸ªé”®å€¼å¯¹å°±è¢«è¿‡æ»¤æ‰äº†ã€‚åœ¨ Map&lt;code>{:human 4.1 :critter 3.9}&lt;/code>ä¸­ï¼Œ3.9 å°äº 4ï¼Œæ‰€ä»¥&lt;code>:critter&lt;/code>é”®å’Œå®ƒçš„ 3.9 å€¼è¢«è¿‡æ»¤æ‰äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(reduce (fn [new-map [key val]]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (&amp;gt; val 4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (assoc new-map key val)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> new-map))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:human 4.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :critter 3.9})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:human 4.1}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œçš„å¯ç¤ºæ˜¯ï¼Œ&lt;code>reduce&lt;/code>æ˜¯ä¸€ä¸ªæ¯”æœ€åˆçœ‹èµ·æ¥æ›´çµæ´»çš„å‡½æ•°ã€‚æ¯å½“ä½ æƒ³ä»ä¸€ä¸ªåºåˆ—ä¸­å¾—åˆ°ä¸€ä¸ªæ–°çš„å€¼æ—¶ï¼Œ&lt;code>reduce&lt;/code>é€šå¸¸èƒ½å¤Ÿæ»¡è¶³ä½ çš„éœ€è¦ã€‚å¦‚æœä½ æƒ³åšä¸€ä¸ªçœŸæ­£èƒ½è®©ä½ çš„å¤´å‘å€’ç«–çš„ç»ƒä¹ ï¼Œè¯•ç€ç”¨&lt;code>reduce&lt;/code>å®ç°&lt;code>map&lt;/code>ï¼Œç„¶ååœ¨æœ¬ç« åé¢çš„å†…å®¹ä¸­å¯¹&lt;code>filter&lt;/code>å’Œ&lt;code>some&lt;/code>åšåŒæ ·çš„ç»ƒä¹ ã€‚&lt;/p>
&lt;h3 id="take-drop-take-while-and-drop-while">take, drop, take-while, and drop-while&lt;/h3>
&lt;p>&lt;code>take&lt;/code>å’Œ&lt;code>drop&lt;/code>éƒ½æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªåºåˆ—ã€‚&lt;code>take&lt;/code>è¿”å›åºåˆ—çš„å‰ n ä¸ªå…ƒç´ ï¼Œè€Œ&lt;code>drop&lt;/code>è¿”å›é™¤å»å‰ n ä¸ªå…ƒç´ çš„åºåˆ—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(take 3 [1 2 3 4 5 6 7 8 9 10])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(drop 3 [1 2 3 4 5 6 7 8 9 10])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (4 5 6 7 8 9 10)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®ƒä»¬çš„è¡¨äº²&lt;code>take-while&lt;/code>å’Œ&lt;code>drop-while&lt;/code>æ›´æœ‰è¶£ä¸€äº›ã€‚æ¯ä¸€ä¸ªéƒ½éœ€è¦ä¸€ä¸ª&lt;em>è°“è¯å‡½æ•°&lt;/em>ï¼ˆä¸€ä¸ªå…¶è¿”å›å€¼ä¸ºçœŸæˆ–å‡çš„å‡½æ•°ï¼‰æ¥å†³å®šå®ƒä½•æ—¶åº”è¯¥åœæ­¢å–èˆã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ª Vectorï¼Œä»£è¡¨ä½  &amp;ldquo;é£Ÿç‰© &amp;ldquo;æ—¥è®°ä¸­çš„æ¡ç›®ã€‚æ¯ä¸ªæ¡ç›®éƒ½æœ‰æœˆä»½å’Œæ—¥æœŸï¼Œä»¥åŠä½ åƒäº†ä»€ä¹ˆã€‚ä¸ºäº†ä¿ç•™ç©ºé—´ï¼Œæˆ‘ä»¬å°†åªåŒ…æ‹¬å‡ ä¸ªæ¡ç›®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def food-journal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [{:month 1 :day 1 :human 5.3 :critter 2.3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 1 :day 2 :human 5.1 :critter 2.0}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 2 :day 1 :human 4.9 :critter 2.1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 2 :day 2 :human 5.0 :critter 2.5}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 3 :day 1 :human 4.2 :critter 3.3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 3 :day 2 :human 4.0 :critter 3.8}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 4 :day 1 :human 3.7 :critter 3.9}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 4 :day 2 :human 3.7 :critter 3.6}])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨&lt;code>take-while&lt;/code>ï¼Œä½ å¯ä»¥åªæ£€ç´¢ä¸€æœˆå’ŒäºŒæœˆçš„æ•°æ®ã€‚&lt;code>take-while&lt;/code>éå†ç»™å®šçš„åºåˆ—ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯&lt;code>food-journal&lt;/code>ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ åº”ç”¨è°“è¯å‡½æ•°ã€‚&lt;/p>
&lt;p>è¿™ä¸ªä¾‹å­ä½¿ç”¨åŒ¿åå‡½æ•°&lt;code>#(&amp;lt; (:month %) 3)&lt;/code>æ¥æµ‹è¯•æ—¥è®°æ¡ç›®çš„æœˆä»½æ˜¯å¦è¶…å‡ºèŒƒå›´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(take-while #(&amp;lt; (:month %) 3) food-journal)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ({:month 1 :day 1 :human 5.3 :critter 2.3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 1 :day 2 :human 5.1 :critter 2.0}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 2 :day 1 :human 4.9 :critter 2.1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 2 :day 2 :human 5.0 :critter 2.5})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“&lt;code>take-while&lt;/code>åˆ°è¾¾ç¬¬ä¸€ä¸ª March æ¡ç›®æ—¶ï¼ŒåŒ¿åå‡½æ•°è¿”å›&lt;code>false&lt;/code>ï¼Œè€Œ&lt;code>take-while&lt;/code>è¿”å›å®ƒåœ¨è¿™ä¹‹å‰æµ‹è¯•çš„æ¯ä¸ªå…ƒç´ çš„åºåˆ—ã€‚&lt;/p>
&lt;p>åŒæ ·çš„æƒ³æ³•ä¹Ÿé€‚ç”¨äº&lt;code>drop-while&lt;/code>ï¼Œåªæ˜¯å®ƒä¸€ç›´åœ¨ä¸¢å¼ƒå…ƒç´ ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªæµ‹è¯•ä¸ºçœŸã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(drop-while #(&amp;lt; (:month %) 3) food-journal)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ({:month 3 :day 1 :human 4.2 :critter 3.3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 3 :day 2 :human 4.0 :critter 3.8}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 4 :day 1 :human 3.7 :critter 3.9}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 4 :day 2 :human 3.7 :critter 3.6})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡åŒæ—¶ä½¿ç”¨&lt;code>take-while&lt;/code>å’Œ&lt;code>drop-while&lt;/code>ï¼Œä½ å¯ä»¥åªè·å¾— 2 æœˆå’Œ 3 æœˆçš„æ•°æ®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(take-while #(&amp;lt; (:month %) 4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (drop-while #(&amp;lt; (:month %) 2) food-journal))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ({:month 2 :day 1 :human 4.9 :critter 2.1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 2 :day 2 :human 5.0 :critter 2.5}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 3 :day 1 :human 4.2 :critter 3.3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 3 :day 2 :human 4.0 :critter 3.8})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä¾‹å­ä½¿ç”¨ &amp;ldquo;drop-while &amp;ldquo;å»æ‰ 1 æœˆä»½çš„æ¡ç›®ï¼Œç„¶åå¯¹ç»“æœä½¿ç”¨ &amp;ldquo;take-while &amp;ldquo;ç»§ç»­å–æ¡ç›®ï¼Œç›´åˆ°åˆ°è¾¾ 4 æœˆä»½çš„ç¬¬ä¸€ä¸ªæ¡ç›®ã€‚&lt;/p>
&lt;h3 id="filter-å’Œ-some">Filter å’Œ Some&lt;/h3>
&lt;p>ä½¿ç”¨&lt;code>filter&lt;/code>æ¥è¿”å›ä¸€ä¸ªåºåˆ—ä¸­å¯¹ä¸€ä¸ªè°“è¯å‡½æ•°ä¸ºçœŸçš„æ‰€æœ‰å…ƒç´ ã€‚è¿™é‡Œæ˜¯äººç±»æ¶ˆè´¹å°‘äº 5 å‡çš„æ—¥è®°æ¡ç›®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(filter #(&amp;lt; (:human %) 5) food-journal)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ({:month 2 :day 1 :human 4.9 :critter 2.1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 3 :day 1 :human 4.2 :critter 3.3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 3 :day 2 :human 4.0 :critter 3.8}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 4 :day 1 :human 3.7 :critter 3.9}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 4 :day 2 :human 3.7 :critter 3.6})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸åœ¨å‰é¢çš„ &amp;ldquo;take-while &amp;ldquo;å’Œ &amp;ldquo;drop-while &amp;ldquo;ä¾‹å­ä¸­ä½¿ç”¨&lt;code>filter&lt;/code>ã€‚äº‹å®ä¸Šï¼Œ&lt;code>filter&lt;/code>ä¹Ÿå¯ä»¥ç”¨äºæ­¤ã€‚è¿™é‡Œæˆ‘ä»¬è¦æŠ“å– 1 æœˆå’Œ 2 æœˆçš„æ•°æ®ï¼Œå°±åƒåœ¨&lt;code>take-while&lt;/code>ä¾‹å­ä¸­ä¸€æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(filter #(&amp;lt; (:month %) 3) food-journal)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ({:month 1 :day 1 :human 5.3 :critter 2.3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 1 :day 2 :human 5.1 :critter 2.0}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 2 :day 1 :human 4.9 :critter 2.1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:month 2 :day 2 :human 5.0 :critter 2.5})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ç§ç”¨æ³•å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯&lt;code>filter&lt;/code>æœ€ç»ˆä¼šå¤„ç†ä½ çš„æ‰€æœ‰æ•°æ®ï¼Œè¿™å¹¶ä¸æ€»æ˜¯å¿…è¦çš„ã€‚å› ä¸ºé£Ÿç‰©æ—¥è®°å·²ç»æŒ‰æ—¥æœŸæ’åºï¼Œæˆ‘ä»¬çŸ¥é“&lt;code>take-while&lt;/code>ä¼šè¿”å›æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œè€Œä¸éœ€è¦æ£€æŸ¥ä»»ä½•æˆ‘ä»¬ä¸éœ€è¦çš„æ•°æ®ã€‚å› æ­¤ï¼Œ&lt;code>take-while&lt;/code>å¯ä»¥æ›´æœ‰æ•ˆç‡ã€‚&lt;/p>
&lt;p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ æƒ³çŸ¥é“ä¸€ä¸ªé›†åˆæ˜¯å¦åŒ…å«å¯¹ä¸€ä¸ªè°“è¯å‡½æ•°æµ‹è¯•ä¸ºçœŸçš„ä»»ä½•å€¼ã€‚&lt;code>some&lt;/code>å‡½æ•°å°±æ˜¯è¿™æ ·åšçš„ï¼Œå®ƒè¿”å›ç”±ä¸€ä¸ªè°“è¯å‡½æ•°è¿”å›çš„ç¬¬ä¸€ä¸ªçœŸå€¼ï¼ˆä»»ä½•ä¸æ˜¯&lt;code>false&lt;/code>æˆ–&lt;code>nil&lt;/code>çš„å€¼ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(some #(&amp;gt; (:critter %) 5) food-journal)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(some #(&amp;gt; (:critter %) 3) food-journal)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ æ²¡æœ‰ä»»ä½•é£Ÿç‰©æ—¥è®°æ¡ç›®æ˜¾ç¤ºä½ ä»å°åŠ¨ç‰©æ¥æºä¸­æ¶ˆè€—äº†è¶…è¿‡ 5 å‡çš„é£Ÿç‰©ï¼Œä½†æ˜¯ä½ è‡³å°‘æœ‰ä¸€æ¡æ˜¾ç¤ºä½ æ¶ˆè€—äº†è¶…è¿‡ 3 å‡çš„é£Ÿç‰©ã€‚è¯·æ³¨æ„ï¼Œç¬¬äºŒä¸ªä¾‹å­ä¸­çš„è¿”å›å€¼æ˜¯&lt;code>true&lt;/code>ï¼Œè€Œä¸æ˜¯äº§ç”ŸçœŸå€¼çš„å®é™…æ¡ç›®ã€‚åŸå› æ˜¯åŒ¿åå‡½æ•°&lt;code>#(&amp;gt; (:critter %) 3)&lt;/code>è¿”å›&lt;code>true&lt;/code>æˆ–&lt;code>false&lt;/code>ã€‚ä¸‹é¢æ˜¯ä½ å¦‚ä½•è¿”å›è¯¥æ¡ç›®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(some #(and (&amp;gt; (:critter %) 3) %) food-journal)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:month 3 :day 1 :human 4.2 :critter 3.3}ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œä¸€ä¸ªç¨æœ‰ä¸åŒçš„åŒ¿åå‡½æ•°ä½¿ç”¨&lt;code>and&lt;/code>é¦–å…ˆæ£€æŸ¥æ¡ä»¶&lt;code>(&amp;gt; (:critter %) 3)&lt;/code>æ˜¯å¦ä¸ºçœŸï¼Œç„¶ååœ¨æ¡ä»¶ç¡®å®ä¸ºçœŸæ—¶è¿”å›æ¡ç›®ã€‚&lt;/p>
&lt;h3 id="sort-and-sort-by">sort and sort-by&lt;/h3>
&lt;p>ä½ å¯ä»¥ç”¨&lt;code>sort&lt;/code>å°†å…ƒç´ æŒ‰å‡åºæ’åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(sort [3 1 2])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 2 3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ çš„æ’åºéœ€æ±‚æ›´å¤æ‚ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>sort-by&lt;/code>ï¼Œå®ƒå…è®¸ä½ å°†ä¸€ä¸ªå‡½æ•°ï¼ˆæœ‰æ—¶ç§°ä¸º&lt;em>é”®å‡½æ•°&lt;/em>ï¼‰åº”ç”¨äºä¸€ä¸ªåºåˆ—çš„å…ƒç´ ï¼Œå¹¶ä½¿ç”¨å®ƒè¿”å›çš„å€¼æ¥å†³å®šæ’åºé¡ºåºã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå–è‡ª*&lt;a class="link" href="http://clojuredocs.org/" target="_blank" rel="noopener"
>http://clojuredocs.org/&lt;/a>*ï¼Œ&lt;code>count&lt;/code>æ˜¯å…³é”®å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(sort-by count [&amp;#34;aaa&amp;#34; &amp;#34;c&amp;#34; &amp;#34;bb&amp;#34;] )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;c&amp;#34; &amp;#34;bb&amp;#34; &amp;#34;aaa&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ä½¿ç”¨&lt;code>sort&lt;/code>è¿›è¡Œæ’åºï¼Œå…ƒç´ å°†æŒ‰å­—æ¯é¡ºåºè¿›è¡Œæ’åºï¼Œè¿”å›&lt;code>(&amp;quot;aaa&amp;quot; &amp;quot;bb&amp;quot; &amp;quot;c&amp;quot;)&lt;/code>ã€‚ç›¸åï¼Œç»“æœæ˜¯&lt;code>(&amp;quot;c&amp;quot; &amp;quot;bb&amp;quot; &amp;quot;aaa&amp;quot;)&lt;/code>ï¼Œå› ä¸ºä½ æ˜¯æŒ‰&lt;code>count&lt;/code>æ’åºï¼Œè€Œ&lt;code>&amp;quot;c &amp;quot;çš„è®¡æ•°æ˜¯1ï¼Œ&lt;/code>&amp;ldquo;bb &amp;ldquo;æ˜¯ 2ï¼Œ`&amp;ldquo;aaa &amp;ldquo;æ˜¯ 3ã€‚&lt;/p>
&lt;h3 id="concat">Concat&lt;/h3>
&lt;p>æœ€å, &lt;code>concat&lt;/code>ç®€å•åœ°å°†ä¸€ä¸ªåºåˆ—çš„æˆå‘˜é™„åŠ åˆ°å¦ä¸€ä¸ªåºåˆ—çš„æœ«å°¾:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(concat [1 2] [3 4])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 2 3 4)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æƒ°æ€§åºåˆ—">æƒ°æ€§åºåˆ—&lt;/h2>
&lt;p>æ­£å¦‚ä½ ä¹‹å‰çœ‹åˆ°çš„ï¼Œ&lt;code>map&lt;/code>é¦–å…ˆåœ¨ä½ ä¼ é€’ç»™å®ƒçš„é›†åˆä¸Šè°ƒç”¨&lt;code>seq&lt;/code>ã€‚ä½†è¿™å¹¶ä¸æ˜¯æ•…äº‹çš„å…¨éƒ¨ã€‚è®¸å¤šå‡½æ•°ï¼ŒåŒ…æ‹¬&lt;code>map&lt;/code>å’Œ&lt;code>filter&lt;/code>ï¼Œéƒ½è¿”å›ä¸€ä¸ª&lt;em>æƒ°æ€§åºåˆ—&lt;/em>ã€‚æƒ°æ€§åºåˆ— æ˜¯ä¸€ä¸ª seqï¼Œå®ƒçš„æˆå‘˜åœ¨ä½ è¯•å›¾è®¿é—®å®ƒä»¬æ—¶æ‰è¢«è®¡ç®—ã€‚è®¡ç®—ä¸€ä¸ª seq çš„æˆå‘˜è¢«ç§°ä¸º&lt;em>å®ç°&lt;/em>seqã€‚å°†è®¡ç®—æ¨è¿Ÿåˆ°éœ€è¦çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ä½ çš„ç¨‹åºæ›´æœ‰æ•ˆç‡ï¼Œè€Œä¸”å®ƒè¿˜æœ‰ä¸€ä¸ªä»¤äººæƒŠè®¶çš„å¥½å¤„ï¼Œå°±æ˜¯å…è®¸ä½ æ„å»ºæ— ç©·çš„åºåˆ—ã€‚&lt;/p>
&lt;h3 id="æ¼”ç¤ºæƒ°æ€§åºåˆ—çš„æ•ˆç‡">æ¼”ç¤ºæƒ°æ€§åºåˆ—çš„æ•ˆç‡&lt;/h3>
&lt;p>ä¸ºäº†çœ‹åˆ°æƒ°æ€§åºåˆ—çš„ä½œç”¨ï¼Œå‡è£…ä½ æ˜¯ä¸€ä¸ªç°ä»£ä»»åŠ¡ç»„çš„æˆå‘˜ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†è¯†åˆ«å¸è¡€é¬¼ã€‚ä½ çš„æƒ…æŠ¥äººå‘˜å‘Šè¯‰ä½ ï¼Œåœ¨ä½ çš„åŸå¸‚é‡Œåªæœ‰ä¸€ä¸ªæ´»è·ƒçš„å¸è¡€é¬¼ï¼Œè€Œä¸”ä»–ä»¬å·²ç»å¸®åŠ©ä½ æŠŠå«Œç–‘äººçš„åå•ç¼©å°åˆ°ä¸€ç™¾ä¸‡äººã€‚ä½ çš„è€æ¿ç»™äº†ä½ ä¸€ä»½ä¸€ç™¾ä¸‡ä¸ªç¤¾ä¼šå®‰å…¨å·ç çš„åå•ï¼Œå¹¶å–Šé“ï¼š&amp;ldquo;æå®šå®ƒï¼Œéº¦å…‹è²æ–¯ç»´å¥‡ï¼&amp;rdquo;&lt;/p>
&lt;p>å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œä½ æ‹¥æœ‰ä¸€å° Vampmatic 3000 è®¡ç®—æœºï¼Œè¿™æ˜¯ç”¨äºè¯†åˆ«å¸è¡€é¬¼çš„æœ€å…ˆè¿›çš„è®¾å¤‡ã€‚ç”±äºè¿™ç§çŒæ€å¸è¡€é¬¼çš„æŠ€æœ¯çš„æºä»£ç æ˜¯ä¸“æœ‰çš„ï¼Œæˆ‘æŠŠå®ƒå­˜æ ¹å‡ºæ¥ï¼Œæ¨¡æ‹Ÿæ‰§è¡Œè¿™é¡¹ä»»åŠ¡æ‰€éœ€çš„æ—¶é—´ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªå¸è¡€é¬¼æ•°æ®åº“çš„å­é›†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def vampire-database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {0 {:makes-blood-puns? false, :has-pulse? true :name &amp;#34;McFishwich&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1 {:makes-blood-puns? false, :has-pulse? true :name &amp;#34;McMackson&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2 {:makes-blood-puns? true, :has-pulse? false :name &amp;#34;Damon Salvatore&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3 {:makes-blood-puns? true, :has-pulse? true :name &amp;#34;Mickey Mouse&amp;#34;}})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn vampire-related-details
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [social-security-number]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Thread/sleep 1000)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (get vampire-database social-security-number))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn vampire?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [record]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (and (:makes-blood-puns? record)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (not (:has-pulse? record))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> record))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn identify-vampire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [social-security-numbers]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (first (filter vampire?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map vampire-related-details social-security-numbers))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>vampire-related-details&lt;/code>ï¼Œå®ƒéœ€è¦ä¸€ç§’é’Ÿä»æ•°æ®åº“ä¸­æŸ¥æ‰¾ä¸€ä¸ªæ¡ç›®ã€‚æ¥ä¸‹æ¥ï¼Œä½ æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>vampire?&lt;/code>ï¼Œå¦‚æœå®ƒé€šè¿‡äº†å¸è¡€é¬¼æµ‹è¯•ï¼Œå°±è¿”å›ä¸€æ¡è®°å½•ï¼›å¦åˆ™ï¼Œå°±è¿”å›&lt;code>false&lt;/code>ã€‚æœ€åï¼Œ&lt;code>identify-vampire&lt;/code>å°†ç¤¾ä¼šå®‰å…¨å·ç  Map åˆ°æ•°æ®åº“è®°å½•ï¼Œç„¶åè¿”å›ç¬¬ä¸€æ¡è¡¨æ˜æœ‰å¸è¡€é¬¼çš„è®°å½•ã€‚&lt;/p>
&lt;p>ä¸ºäº†æ˜¾ç¤ºè¿è¡Œè¿™äº›å‡½æ•°éœ€è¦å¤šå°‘æ—¶é—´ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>time&lt;/code>æ“ä½œã€‚å½“ä½ ä½¿ç”¨&lt;code>time&lt;/code>æ—¶ï¼Œä½ çš„ä»£ç çš„è¡Œä¸ºä¸ä½ ä¸ä½¿ç”¨&lt;code>time&lt;/code>æ—¶å®Œå…¨ä¸€æ ·ï¼Œä½†æœ‰ä¸€ä¸ªä¾‹å¤–ï¼šä¼šæ‰“å°å‡ºä¸€ä»½ç»è¿‡æ—¶é—´çš„æŠ¥å‘Šã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time (vampire-related-details 0))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 1001.042 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:name &amp;#34;McFishwich&amp;#34;, :makes-blood-puns? false, :has-pulse? true}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªæ‰“å°è¡ŒæŠ¥å‘Šäº†ç»™å®šæ“ä½œæ‰€èŠ±è´¹çš„æ—¶é—´&amp;ndash;æœ¬ä¾‹æ˜¯ 1,001.042 æ¯«ç§’ã€‚ç¬¬äºŒè¡Œæ˜¯è¿”å›å€¼ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯ä½ çš„æ•°æ®åº“è®°å½•ã€‚è¿”å›å€¼ä¸æ²¡æœ‰ä½¿ç”¨&lt;code>time&lt;/code>çš„æƒ…å†µä¸‹å®Œå…¨ç›¸åŒã€‚&lt;/p>
&lt;p>ä¸€ä¸ªä¸ç¬¨çš„&lt;code>map&lt;/code>çš„å®ç°é¦–å…ˆè¦å¯¹&lt;code>social-security-numbers&lt;/code>çš„æ¯ä¸ªæˆå‘˜åº”ç”¨&lt;code>vampire-&lt;/code>related-details&lt;code>ï¼Œç„¶åå†æŠŠç»“æœä¼ ç»™&lt;/code>filter`ã€‚å› ä¸ºä½ æœ‰ä¸€ç™¾ä¸‡ä¸ªå«Œç–‘äººï¼Œè¿™å°†éœ€è¦ä¸€ç™¾ä¸‡ç§’ï¼Œä¹Ÿå°±æ˜¯ 12 å¤©ï¼Œåˆ°é‚£æ—¶ä½ çš„ä¸€åŠåŸå¸‚éƒ½ä¼šæ­»æ‰ï¼&amp;quot;ã€‚å½“ç„¶ï¼Œå¦‚æœç»“æœæ˜¯å”¯ä¸€çš„å¸è¡€é¬¼æ˜¯è®°å½•ä¸­çš„æœ€åä¸€ä¸ªå«Œç–‘äººï¼Œç”¨æ‡’äººç‰ˆæœ¬è¿˜æ˜¯ä¼šèŠ±é‚£ä¹ˆå¤šæ—¶é—´ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æœºä¼šï¼Œå®ƒä¸ä¼šã€‚&lt;/p>
&lt;p>å› ä¸º&lt;code>map&lt;/code>æ˜¯æƒ°æ€§çš„ï¼Œåœ¨ä½ è¯•å›¾è®¿é—® Map çš„å…ƒç´ ä¹‹å‰ï¼Œå®ƒå®é™…ä¸Šå¹¶æ²¡æœ‰å°†&lt;code>å¸è¡€é¬¼ç›¸å…³çš„ç»†èŠ‚&lt;/code>åº”ç”¨äºç¤¾ä¼šå®‰å…¨å·ç ã€‚äº‹å®ä¸Šï¼Œ&lt;code>map&lt;/code>å‡ ä¹ç«‹åˆ»å°±ä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚&lt;/p>
&lt;p>ç¬¬ä¸€ä¸ªæ‰“å°è¡ŒæŠ¥å‘Šäº†ç»™å®šæ“ä½œæ‰€èŠ±è´¹çš„æ—¶é—´&amp;ndash;æœ¬ä¾‹ä¸­æ˜¯ 1,001.042 æ¯«ç§’ã€‚ç¬¬äºŒè¡Œæ˜¯è¿”å›å€¼ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ä½ çš„æ•°æ®åº“è®°å½•ã€‚è¿”å›å€¼ä¸æ²¡æœ‰ä½¿ç”¨&lt;code>time&lt;/code>çš„æƒ…å†µä¸‹å®Œå…¨ç›¸åŒã€‚&lt;/p>
&lt;p>ä¸€ä¸ªä¸ç¬¨çš„&lt;code>map&lt;/code>çš„å®ç°é¦–å…ˆè¦å¯¹&lt;code>social-security-numbers&lt;/code>çš„æ¯ä¸ªæˆå‘˜åº”ç”¨&lt;code>vampire-&lt;/code>related-details&lt;code>ï¼Œç„¶åå†æŠŠç»“æœä¼ ç»™&lt;/code>filter`ã€‚å› ä¸ºä½ æœ‰ä¸€ç™¾ä¸‡ä¸ªå«Œç–‘äººï¼Œè¿™å°†éœ€è¦ä¸€ç™¾ä¸‡ç§’ï¼Œä¹Ÿå°±æ˜¯ 12 å¤©ï¼Œåˆ°é‚£æ—¶ä½ çš„ä¸€åŠåŸå¸‚éƒ½ä¼šæ­»æ‰ï¼&amp;quot;ã€‚å½“ç„¶ï¼Œå¦‚æœç»“æœæ˜¯å”¯ä¸€çš„å¸è¡€é¬¼æ˜¯è®°å½•ä¸­çš„æœ€åä¸€ä¸ªå«Œç–‘äººï¼Œç”¨æ‡’äººç‰ˆæœ¬è¿˜æ˜¯ä¼šèŠ±é‚£ä¹ˆå¤šæ—¶é—´ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æœºä¼šï¼Œå®ƒä¸ä¼šã€‚&lt;/p>
&lt;p>å› ä¸º&lt;code>map&lt;/code>æ˜¯æƒ°æ€§çš„ï¼Œåœ¨ä½ è¯•å›¾è®¿é—® Map çš„å…ƒç´ ä¹‹å‰ï¼Œå®ƒå®é™…ä¸Šå¹¶æ²¡æœ‰å°†&lt;code>å¸è¡€é¬¼ç›¸å…³çš„ç»†èŠ‚&lt;/code>åº”ç”¨äºç¤¾ä¼šå®‰å…¨å·ç ã€‚äº‹å®ä¸Šï¼Œ&lt;code>map&lt;/code>å‡ ä¹é©¬ä¸Šå°±ä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time (def mapped-details (map vampire-related-details (range 0 1000000))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 0.049 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;#39;user/mapped-details
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>range&lt;/code>è¿”å›ä¸€ä¸ªç”± 0 åˆ° 999,999 çš„æ•´æ•°ç»„æˆçš„æƒ°æ€§åºåˆ—ã€‚ç„¶åï¼Œ&lt;code>map&lt;/code>è¿”å›ä¸€ä¸ªä¸åç§°&lt;code>mapped-details&lt;/code>ç›¸å…³çš„æƒ°æ€§åºåˆ—ã€‚å› ä¸º&lt;code>map&lt;/code>å®é™…ä¸Šæ²¡æœ‰å¯¹&lt;code>range&lt;/code>è¿”å›çš„ä»»ä½•å…ƒç´ åº”ç”¨&lt;code>vampire-related-details&lt;/code>ï¼Œæ•´ä¸ªæ“ä½œå‡ ä¹æ²¡æœ‰èŠ±è´¹ä»»ä½•æ—¶é—´ï¼Œå½“ç„¶ï¼Œå°‘äº 12 å¤©ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥è®¤ä¸ºæ‡’äººåºåˆ—æ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆçš„ï¼šä¸€ä¸ªå…³äºå¦‚ä½•å®ç°åºåˆ—å…ƒç´ çš„é…æ–¹å’Œåˆ°ç›®å‰ä¸ºæ­¢å·²ç»å®ç°çš„å…ƒç´ ã€‚å½“ä½ ä½¿ç”¨&lt;code>map&lt;/code>æ—¶ï¼Œå®ƒè¿”å›çš„æ‡’äººåºåˆ—ä¸åŒ…æ‹¬ä»»ä½•å·²å®ç°çš„å…ƒç´ ï¼Œä½†å®ƒç¡®å®æœ‰ç”Ÿæˆå…¶å…ƒç´ çš„é…æ–¹ã€‚æ¯å½“ä½ è¯•å›¾è®¿é—®ä¸€ä¸ªæœªå®ç°çš„å…ƒç´ æ—¶ï¼Œæ‡’äººåºåˆ—å°†ä½¿ç”¨å®ƒçš„é…æ–¹æ¥ç”Ÿæˆæ‰€è¯·æ±‚çš„å…ƒç´ ã€‚&lt;/p>
&lt;p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œ&lt;code>mapped-details&lt;/code>æ˜¯æœªå®ç°çš„ã€‚ä¸€æ—¦ä½ è¯•å›¾è®¿é—®&lt;code>mapped-details&lt;/code>çš„ä¸€ä¸ªæˆå‘˜ï¼Œå®ƒå°†ä½¿ç”¨å®ƒçš„é…æ–¹æ¥ç”Ÿæˆä½ æ‰€è¯·æ±‚çš„å…ƒç´ ï¼Œä½ å°†äº§ç”Ÿæ¯ç§’é’Ÿçš„æ•°æ®åº“æŸ¥è¯¢è´¹ç”¨ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>range&lt;/code>è¿”å›ä¸€ä¸ªç”± 0 åˆ° 999,999 çš„æ•´æ•°ç»„æˆçš„æƒ°æ€§åºåˆ—ã€‚ç„¶åï¼Œ&lt;code>map&lt;/code>è¿”å›ä¸€ä¸ªä¸&lt;code>mapped-details&lt;/code>åç§°ç›¸å…³çš„æƒ°æ€§åºåˆ—ã€‚å› ä¸º&lt;code>map&lt;/code>å®é™…ä¸Šæ²¡æœ‰å¯¹&lt;code>range&lt;/code>è¿”å›çš„ä»»ä½•å…ƒç´ åº”ç”¨&lt;code>vampire-related-details&lt;/code>ï¼Œæ•´ä¸ªæ“ä½œå‡ ä¹æ²¡æœ‰èŠ±è´¹ä»»ä½•æ—¶é—´ï¼Œå½“ç„¶ï¼Œå°‘äº 12 å¤©ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥è®¤ä¸ºæ‡’äººåºåˆ—ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ªå…³äºå¦‚ä½•å®ç°åºåˆ—å…ƒç´ çš„é…æ–¹å’Œåˆ°ç›®å‰ä¸ºæ­¢å·²ç»å®ç°çš„å…ƒç´ ã€‚å½“ä½ ä½¿ç”¨&lt;code>map&lt;/code>æ—¶ï¼Œå®ƒè¿”å›çš„æƒ°æ€§åºåˆ—ä¸åŒ…æ‹¬ä»»ä½•å·²å®ç°çš„å…ƒç´ ï¼Œä½†å®ƒç¡®å®æœ‰ç”Ÿæˆå…¶å…ƒç´ çš„é…æ–¹ã€‚æ¯å½“ä½ è¯•å›¾è®¿é—®ä¸€ä¸ªæœªå®ç°çš„å…ƒç´ æ—¶ï¼Œæ‡’äººåºåˆ—å°†ä½¿ç”¨å®ƒçš„é…æ–¹æ¥ç”Ÿæˆæ‰€è¯·æ±‚çš„å…ƒç´ ã€‚&lt;/p>
&lt;p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œ&lt;code>mapped-details&lt;/code>æ˜¯æœªå®ç°çš„ã€‚ä¸€æ—¦ä½ è¯•å›¾è®¿é—®&lt;code>mapped-details&lt;/code>çš„ä¸€ä¸ªæˆå‘˜ï¼Œå®ƒå°†ä½¿ç”¨å®ƒçš„é…æ–¹æ¥ç”Ÿæˆä½ æ‰€è¯·æ±‚çš„å…ƒç´ ï¼Œä½ å°†äº§ç”Ÿæ¯ç§’é’Ÿçš„æ•°æ®åº“æŸ¥è¯¢è´¹ç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time (first mapped-details))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 32030.767 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:name &amp;#34;McFishwich&amp;#34;, :makes-blood-puns? false, :has-pulse? true}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªæ“ä½œèŠ±äº†å¤§çº¦ 32 ç§’ã€‚è¿™æ¯”ä¸€ç™¾ä¸‡ç§’å¥½å¾—å¤šï¼Œä½†è¿˜æ˜¯æ¯”æˆ‘ä»¬é¢„æœŸçš„å¤šäº† 31 ç§’ã€‚æ¯•ç«Ÿï¼Œä½ åªæ˜¯è¯•å›¾è®¿é—®ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å®ƒåº”è¯¥åªèŠ±ä¸€ç§’é’Ÿã€‚&lt;/p>
&lt;p>èŠ±äº† 32 ç§’çš„åŸå› æ˜¯ Clojure&lt;em>chunks&lt;/em>å®ƒçš„æƒ°æ€§åºåˆ—ï¼Œè¿™åªæ˜¯æ„å‘³ç€æ¯å½“ Clojure è¦å®ç°ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå®ƒä¹Ÿä¼šé¢„å…ˆå®ç°ä¸€äº›ä¸‹ä¸€ä¸ªå…ƒç´ çš„å®ç°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ åªæƒ³è¦&lt;code>mapped-details&lt;/code>çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä½† Clojure ç»§ç»­å‰è¿›ï¼Œä¹Ÿå‡†å¤‡äº†åé¢çš„ 31 ä¸ªå…ƒç´ ã€‚Clojure è¿™æ ·åšæ˜¯å› ä¸ºå®ƒå‡ ä¹æ€»æ˜¯èƒ½å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚&lt;/p>
&lt;p>å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œæƒ°æ€§çš„ seq å…ƒç´ åªéœ€è¦å®ç°ä¸€æ¬¡ã€‚å†æ¬¡è®¿é—®&lt;code>mapped-details&lt;/code>çš„ç¬¬ä¸€ä¸ªå…ƒç´ å‡ ä¹ä¸éœ€è¦æ—¶é—´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time (first mapped-details))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Elapsed time: 0.022 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:name &amp;#34;McFishwich&amp;#34;, :makes-blood-puns? false, :has-pulse? true}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ‰äº†è¿™äº›æ–°å‘ç°çš„çŸ¥è¯†ï¼Œä½ å°±å¯ä»¥æœ‰æ•ˆåœ°æŒ–æ˜å¸è¡€é¬¼æ•°æ®åº“ï¼Œæ‰¾åˆ°å¸¦ç ç‰™çš„ç½ªé­ç¥¸é¦–ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(time (identify-vampire (range 0 1000000)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;Elapsed time: 32019.912 msecs&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:name &amp;#34;Damon Salvatore&amp;#34;, :makes-blood-puns? true, :has-pulse? false}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å“¦ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¾¾è’™ä¼šåšå‡ºé‚£äº›ä»¤äººæ¯›éª¨æ‚šç„¶çš„åŒå…³è¯­çš„åŸå› ã€‚&lt;/p>
&lt;h3 id="æ— ç©·åºåˆ—">æ— ç©·åºåˆ—&lt;/h3>
&lt;p>æƒ°æ€§åºåˆ— ç»™ä½ çš„ä¸€ä¸ªå¾ˆé…·ã€å¾ˆæœ‰ç”¨çš„èƒ½åŠ›æ˜¯æ„å»ºæ— ç©·åºåˆ—çš„èƒ½åŠ›ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åªå¤„ç†è¿‡ä» Vector æˆ–åˆ—è¡¨ä¸­ç”Ÿæˆçš„æƒ°æ€§åºåˆ—ï¼Œè¿™äº›åºåˆ—æ˜¯ç»ˆæ­¢çš„ã€‚ç„¶è€Œï¼ŒClojure è‡ªå¸¦äº†ä¸€äº›å‡½æ•°æ¥åˆ›å»ºæ— ç©·åºåˆ—ã€‚åˆ›å»ºæ— ç©·åºåˆ—çš„ä¸€ä¸ªç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨&lt;code>repeat&lt;/code>ï¼Œå®ƒåˆ›å»ºä¸€ä¸ªåºåˆ—ï¼Œå…¶æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä½ ä¼ é€’çš„å‚æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(concat (take 8 (repeat &amp;#34;na&amp;#34;)) [&amp;#34;Batman!&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;na&amp;#34; &amp;#34;na&amp;#34; &amp;#34;na&amp;#34; &amp;#34;na&amp;#34; &amp;#34;na&amp;#34; &amp;#34;na&amp;#34; &amp;#34;na&amp;#34; &amp;#34;na&amp;#34; &amp;#34;Batman!&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªæ— ç©·çš„åºåˆ—ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å­—ç¬¦ä¸² &amp;ldquo;na&amp;rdquo;ï¼Œç„¶åç”¨å®ƒæ¥æ„å»ºä¸€ä¸ªå¯èƒ½å¼•èµ·æˆ–ä¸å¼•èµ·æ€€æ—§æƒ…ç»ªçš„åºåˆ—ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code>repeatedly&lt;/code>ï¼Œå®ƒå°†è°ƒç”¨æä¾›çš„å‡½æ•°æ¥ç”Ÿæˆåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(take 3 (repeatedly (fn [] (rand-int 10))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 4 0)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œç”±&lt;code>repeatedly&lt;/code>è¿”å›çš„æƒ°æ€§åºåˆ—é€šè¿‡è°ƒç”¨åŒ¿åå‡½æ•°&lt;code>(fn [] (rand-int 10))&lt;/code>ç”Ÿæˆæ¯ä¸ªæ–°å…ƒç´ ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ª 0 åˆ° 9 ä¹‹é—´çš„éšæœºæ•´æ•°ã€‚å¦‚æœä½ åœ¨ä½ çš„ REPL ä¸­è¿è¡Œè¿™ä¸ªï¼Œä½ çš„ç»“æœå¾ˆå¯èƒ½ä¸æ­¤ä¸åŒã€‚&lt;/p>
&lt;p>æƒ°æ€§åºåˆ— çš„é…æ–¹ä¸éœ€è¦æŒ‡å®šä¸€ä¸ªç«¯ç‚¹ã€‚åƒ&lt;code>first&lt;/code>å’Œ&lt;code>take&lt;/code>è¿™æ ·çš„å‡½æ•°å®ç°äº†æƒ°æ€§åºåˆ—ï¼Œå®ƒä»¬æ²¡æœ‰åŠæ³•çŸ¥é“åºåˆ—çš„ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Œå¦‚æœåºåˆ—ä¸€ç›´æä¾›å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä¼šä¸€ç›´å–èµ°å®ƒä»¬ã€‚å¦‚æœä½ æ„å»ºä½ è‡ªå·±çš„æ— ç©·åºåˆ—ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn even-numbers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([] (even-numbers 0))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([n] (cons n (lazy-seq (even-numbers (+ n 2))))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(take 10 (even-numbers))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (0 2 4 6 8 10 12 14 16 18)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä¾‹å­æœ‰ç‚¹ä»¤äººè´¹è§£ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†é€’å½’ã€‚è®°ä½&lt;code>cons&lt;/code>è¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œå¹¶å°†ä¸€ä¸ªå…ƒç´ è¿½åŠ åˆ°ç»™å®šçš„åˆ—è¡¨ä¸­ï¼Œä¼šæœ‰æ‰€å¸®åŠ©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(cons 0 &amp;#39;(2 4 6))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (0 2 4 6)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>(é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒLisp ç¨‹åºå‘˜åœ¨ä½¿ç”¨&lt;code>cons&lt;/code>å‡½æ•°æ—¶ç§°å®ƒä¸º&lt;em>consing&lt;/em>)ã€‚&lt;/p>
&lt;p>åœ¨ &amp;ldquo;å¶æ•° &amp;ldquo;ä¸­ï¼Œä½ æ˜¯åœ¨å¯¹ä¸€ä¸ªæƒ°æ€§åˆ—è¡¨è¿›è¡Œ consingï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªå…³äºä¸‹ä¸€ä¸ªå…ƒç´ çš„é…æ–¹ï¼ˆä¸€ä¸ªå‡½æ•°ï¼‰ï¼ˆè€Œä¸æ˜¯å¯¹ä¸€ä¸ªå®Œå…¨å®ç°çš„åˆ—è¡¨è¿›è¡Œ consingï¼‰ã€‚&lt;/p>
&lt;p>è¿™å°±æ¶µç›–äº†æƒ°æ€§åºåˆ—! ç°åœ¨ä½ çŸ¥é“äº†å…³äºåºåˆ—æŠ½è±¡çš„æ‰€æœ‰çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥è½¬å‘é›†åˆæŠ½è±¡äº†ã€‚&lt;/p>
&lt;h2 id="é›†åˆæŠ½è±¡">é›†åˆæŠ½è±¡&lt;/h2>
&lt;p>é›†åˆçš„æŠ½è±¡ä¸åºåˆ—çš„æŠ½è±¡å¯†åˆ‡ç›¸å…³ã€‚æ‰€æœ‰ Clojure çš„æ ¸å¿ƒæ•°æ®ç»“æ„&amp;ndash;Vectorã€Mapã€åˆ—è¡¨å’Œé›†åˆ&amp;ndash;éƒ½å‚ä¸äº†è¿™ä¸¤ä¸ªæŠ½è±¡ã€‚&lt;/p>
&lt;p>åºåˆ—æŠ½è±¡æ˜¯å…³äºå¯¹æˆå‘˜çš„å•ç‹¬æ“ä½œï¼Œè€Œé›†åˆæŠ½è±¡æ˜¯å…³äºæ•°æ®ç»“æ„çš„æ•´ä½“ã€‚ä¾‹å¦‚ï¼Œé›†åˆå‡½æ•° &lt;code>count&lt;/code>, &lt;code>empty?&lt;/code>, å’Œ &lt;code>every?&lt;/code> ä¸æ˜¯å…³äºä»»ä½•å•ç‹¬çš„å…ƒç´ ï¼›å®ƒä»¬æ˜¯å…³äºæ•´ä½“çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(empty?[])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(empty? [&amp;#34;no!&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®é™…ä¸Šï¼Œä½ å¾ˆå°‘ä¼šæœ‰æ„è¯†çš„è¯´ï¼š&amp;ldquo;å¥½çš„ï¼Œè‡ªå·±ï¼&amp;quot;ã€‚ä½ ç°åœ¨æ˜¯åœ¨å’Œæ•´ä¸ªé›†åˆä¸€èµ·å·¥ä½œã€‚ä»é›†åˆæŠ½è±¡çš„è§’åº¦æ¥è€ƒè™‘ï¼&amp;rdquo; å°½ç®¡å¦‚æ­¤ï¼Œäº†è§£è¿™äº›ä½œä¸ºä½ æ‰€ä½¿ç”¨çš„å‡½æ•°å’Œæ•°æ®ç»“æ„åŸºç¡€çš„æ¦‚å¿µè¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬æ¥ç ”ç©¶ä¸¤ä¸ªå¸¸è§çš„é›†åˆå‡½æ•°&amp;ndash;&lt;code>into&lt;/code>å’Œ&lt;code>conj&lt;/code>ï¼Œå®ƒä»¬çš„ç›¸ä¼¼æ€§å¯èƒ½ä¼šè®©äººæœ‰ç‚¹å›°æƒ‘ã€‚&lt;/p>
&lt;h3 id="into">into&lt;/h3>
&lt;p>æœ€é‡è¦çš„é›†åˆå‡½æ•°ä¹‹ä¸€æ˜¯&lt;code>into&lt;/code>ã€‚æ­£å¦‚ä½ ç°åœ¨æ‰€çŸ¥ï¼Œè®¸å¤š seq å‡½æ•°è¿”å›ä¸€ä¸ª seqï¼Œè€Œä¸æ˜¯åŸå§‹æ•°æ®ç»“æ„ã€‚ä½ å¯èƒ½æƒ³æŠŠè¿”å›å€¼è½¬æ¢æˆåŸå§‹å€¼, &lt;code>into&lt;/code>è®©ä½ åšåˆ°è¿™ä¸€ç‚¹:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(map identity {:sunlight-reaction &amp;#34;Glitter!&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ([:sunlight-reaction &amp;#34;Glitter!&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(into {} (map identity {:sunlight-reaction &amp;#34;Glitter!&amp;#34;}))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:sunlight-reaction &amp;#34;Glitter!&amp;#34;}.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™é‡Œï¼Œ&lt;code>map&lt;/code>å‡½æ•°åœ¨å¾—åˆ°ä¸€ä¸ª map æ•°æ®ç»“æ„åè¿”å›ä¸€ä¸ªé¡ºåºæ•°æ®ç»“æ„ï¼Œå¹¶å°† seq è½¬æ¢å› mapã€‚&lt;/p>
&lt;p>è¿™ä¹Ÿé€‚ç”¨äºå…¶ä»–æ•°æ®ç»“æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(map identity [:garlic :sesame-oil :fried-eggs])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (:garlic :sesame-oil :fried-eggs)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(into [] (map identity [:garlic :sesame-oil :fried-eggs]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [:garlic :sesame-oil :fried-eggs]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œåœ¨ç¬¬ä¸€è¡Œï¼Œ&lt;code>map&lt;/code>è¿”å›ä¸€ä¸ªåºåˆ—ï¼Œæˆ‘ä»¬åœ¨ç¬¬äºŒè¡Œä½¿ç”¨&lt;code>into&lt;/code>å°†ç»“æœè½¬æ¢ä¸ºä¸€ä¸ª Vectorã€‚&lt;/p>
&lt;p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªæœ‰ä¸¤ä¸ªç›¸åŒæ¡ç›®çš„ Vector å¼€å§‹ï¼Œ&lt;code>map&lt;/code>æŠŠå®ƒè½¬æ¢ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œç„¶åæˆ‘ä»¬ç”¨&lt;code>into&lt;/code>æŠŠå€¼ç²˜åˆ°ä¸€ä¸ªé›†åˆä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(map identity [:garlic-clove :garlic-clove])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (:garlic-clove :garlic-clove)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(into #{} (map identity [:garlic-clove :garlic-clove]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #{:garlic-clove}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› ä¸ºé›†åˆåªåŒ…å«å”¯ä¸€çš„å€¼ï¼Œæ‰€ä»¥é›†åˆä¸­æœ€ç»ˆåªæœ‰ä¸€ä¸ªå€¼ã€‚&lt;/p>
&lt;p>&lt;code>into&lt;/code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ä¸€å®šæ˜¯ç©ºçš„ã€‚è¿™é‡Œï¼Œç¬¬ä¸€ä¸ªä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨&lt;code>into&lt;/code>å‘ Map æ·»åŠ å…ƒç´ ï¼Œç¬¬äºŒä¸ªä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•å‘ Vector æ·»åŠ å…ƒç´ ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(into {:favorite-emotion &amp;#34;gloomy&amp;#34;} [[:sunlight-reaction &amp;#34;Glitter!&amp;#34;]])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:favorite-emotion &amp;#34;gloomy&amp;#34; :sunlight-reaction &amp;#34;Glitter!&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(into [&amp;#34;cherry&amp;#34;] &amp;#39;(&amp;#34;pine&amp;#34; &amp;#34;spruce&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;cherry&amp;#34; &amp;#34;pine&amp;#34; &amp;#34;spruce&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶ï¼Œä¸¤ä¸ªå‚æ•°ä¹Ÿå¯ä»¥æ˜¯åŒä¸€ç±»å‹ã€‚åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä¸¤ä¸ªå‚æ•°éƒ½æ˜¯ Mapï¼Œè€Œä¹‹å‰æ‰€æœ‰çš„ä¾‹å­éƒ½æœ‰ä¸åŒç±»å‹çš„å‚æ•°ã€‚å®ƒçš„å·¥ä½œåŸç†å’Œä½ æ‰€æœŸæœ›çš„ä¸€æ ·ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Mapï¼Œå°†ç¬¬äºŒä¸ª Map çš„å…ƒç´ æ·»åŠ åˆ°ç¬¬ä¸€ä¸ª Map ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(into {:favorite-animal &amp;#34;kitty&amp;#34;} {:least-favorite-smell &amp;#34;dog&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :relationship-with-teenager &amp;#34;creepy&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:favorite-animal &amp;#34;kitty&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :relationship-with-teenager &amp;#34;creepy&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :least-favorite-smell &amp;#34;dog&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœ&lt;code>into&lt;/code>åœ¨æ±‚èŒé¢è¯•ä¸­è¢«è¦æ±‚æè¿°å®ƒçš„ä¼˜åŠ¿ï¼Œå®ƒä¼šè¯´ï¼š&amp;ldquo;æˆ‘å¾ˆæ“…é•¿å¤„ç†ä¸¤ä¸ªé›†åˆï¼Œå¹¶å°†ç¬¬äºŒä¸ªé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªé›†åˆä¸­ã€‚&amp;rdquo;&lt;/p>
&lt;h3 id="conj">conj&lt;/h3>
&lt;p>&lt;code>conj&lt;/code>ä¹Ÿæ˜¯å‘ä¸€ä¸ªé›†åˆæ·»åŠ å…ƒç´ ï¼Œä½†å®ƒçš„æ–¹å¼ç•¥æœ‰ä¸åŒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(conj [0] [1])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [0 [1]]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‘œå‘œå‘œ! çœ‹èµ·æ¥å®ƒæŠŠæ•´ä¸ª Vector&lt;code>[1]&lt;/code>æ·»åŠ åˆ°&lt;code>[0]&lt;/code>ã€‚ä¸&lt;code>into&lt;/code>æ¯”è¾ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(into [0] [1])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [0 1]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯æˆ‘ä»¬å¦‚ä½•ç”¨&lt;code>conj&lt;/code>åšåŒæ ·çš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(conj [0] 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [0 1]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œæ•°å­— 1 æ˜¯ä½œä¸ºæ ‡é‡ï¼ˆå•æ•°ï¼Œéé›†åˆï¼‰å€¼ä¼ é€’çš„ï¼Œè€Œ&lt;code>into&lt;/code>çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªé›†åˆã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥æä¾›å°½å¯èƒ½å¤šçš„å…ƒç´ ä¸&lt;code>conj&lt;/code>ä¸€èµ·æ·»åŠ ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ åˆ°å…¶ä»–é›†åˆä¸­ï¼Œå¦‚ mapã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(conj [0] 1 2 3 4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [0 1 2 3 4]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(conj {:time &amp;#34;midnight&amp;#34;} [:place &amp;#34;ye olde cemetarium&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:place &amp;#34;ye olde cemetarium&amp;#34; :time &amp;#34;midnight&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>conj&lt;/code>å’Œ&lt;code>into&lt;/code>å¦‚æ­¤ç›¸ä¼¼ï¼Œä½ ç”šè‡³å¯ä»¥ç”¨&lt;code>into&lt;/code>æ¥å®šä¹‰&lt;code>conj&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn my-conj
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [target &amp;amp; additions]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (into target additions))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(my-conj [0] 1 2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [0 1 2 3]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åŠŸèƒ½å‡½æ•°">åŠŸèƒ½å‡½æ•°&lt;/h2>
&lt;p>å­¦ä¹ åˆ©ç”¨ Clojure çš„æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°å’Œè¿”å›å‡½æ•°ä½œä¸ºå€¼çš„èƒ½åŠ›æ˜¯éå¸¸æœ‰è¶£çš„ï¼Œå³ä½¿å®ƒéœ€è¦ä¸€äº›é€‚åº”ã€‚&lt;/p>
&lt;p>Clojure çš„ä¸¤ä¸ªå‡½æ•°ï¼Œ&lt;code>apply&lt;/code>å’Œ&lt;code>partial&lt;/code>ï¼Œå¯èƒ½çœ‹èµ·æ¥ç‰¹åˆ«å¥‡æ€ªï¼Œå› ä¸ºå®ƒä»¬éƒ½&lt;em>æ¥å—&lt;/em>å’Œ&lt;em>è¿”å›&lt;/em>å‡½æ•°ã€‚è®©æˆ‘ä»¬æ¥è§£å¼€å®ƒä»¬çš„ç–‘æƒ‘ã€‚&lt;/p>
&lt;h3 id="apply">Apply&lt;/h3>
&lt;p>&lt;code>apply&lt;/code> ä¼šå±•å¼€ä¸€ä¸ªåºåˆ—ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è¢«ä¼ é€’ç»™ä¸€ä¸ªæœŸæœ›æœ‰å…¶ä½™å‚æ•°çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œ&lt;code>max&lt;/code>æ¥å—ä»»ä½•æ•°é‡çš„å‚æ•°ï¼Œå¹¶è¿”å›æ‰€æœ‰å‚æ•°ä¸­æœ€å¤§çš„ä¸€ä¸ªã€‚è¿™é‡Œæ˜¯ä½ å¦‚ä½•æ‰¾åˆ°æœ€å¤§çš„æ•°å­—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(max 0 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½†å¦‚æœä½ æƒ³æ‰¾åˆ°ä¸€ä¸ª Vector çš„æœ€å¤§å…ƒç´ ï¼Œæ€ä¹ˆåŠï¼Ÿä½ ä¸èƒ½åªæŠŠ Vector ä¼ ç»™&lt;code>max&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(max [0 1 2])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [0 1 2]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ä¼šè¿”å› Vector ä¸­æœ€å¤§çš„å…ƒç´ ï¼Œå› ä¸º&lt;code>max&lt;/code>è¿”å›æ‰€æœ‰ä¼ é€’ç»™å®ƒçš„å‚æ•°ä¸­æœ€å¤§çš„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åªæ˜¯ä¼ é€’ç»™å®ƒä¸€ä¸ªåŒ…å«æ‰€æœ‰ä½ æƒ³æ¯”è¾ƒçš„æ•°å­—çš„ Vectorï¼Œè€Œä¸æ˜¯æŠŠæ•°å­—ä½œä¸ºå•ç‹¬çš„å‚æ•°ä¼ é€’è¿›å»ã€‚&lt;code>apply&lt;/code>æ˜¯è¿™ç§æƒ…å†µçš„å®Œç¾é€‰æ‹©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(apply max [0 1 2])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ä½¿ç”¨&lt;code>apply&lt;/code>ï¼Œå°±åƒä½ è°ƒç”¨&lt;code>(max 0 1 2)&lt;/code>ä¸€æ ·ã€‚ä½ ç»å¸¸ä¼šåƒè¿™æ ·ä½¿ç”¨&lt;code>apply&lt;/code>ï¼Œå¯¹ä¸€ä¸ªé›†åˆçš„å…ƒç´ è¿›è¡Œåˆ†è§£ï¼Œä½¿å®ƒä»¬ä½œä¸ºå•ç‹¬çš„å‚æ•°è¢«ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;p>è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰æ˜¯å¦‚ä½•ç”¨ &amp;ldquo;into &amp;ldquo;æ¥å®šä¹‰ &amp;ldquo;conj &amp;ldquo;çš„å—ï¼Ÿé‚£ä¹ˆï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨&lt;code>apply&lt;/code>åœ¨&lt;code>conj&lt;/code>çš„åŸºç¡€ä¸Šå®šä¹‰&lt;code>into&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn my-into
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [target additions]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (apply conj target additions))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(my-into [0] [1 2 3])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [0 1 2 3]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹&lt;code>my-into&lt;/code>çš„è°ƒç”¨ç›¸å½“äºè°ƒç”¨&lt;code>(conj [0] 1 2 3)&lt;/code>ã€‚&lt;/p>
&lt;h3 id="partial">Partial&lt;/h3>
&lt;p>&lt;code>partial&lt;/code>æ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä»»æ„æ•°é‡çš„å‚æ•°ã€‚ç„¶åå®ƒè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚å½“ä½ è°ƒç”¨è¿”å›çš„å‡½æ•°æ—¶ï¼Œå®ƒç”¨ä½ æä¾›çš„åŸå‚æ•°å’Œæ–°å‚æ•°ä¸€èµ·è°ƒç”¨åŸå‡½æ•°ã€‚&lt;/p>
&lt;p>è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def add10 (partial + 10))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(add10 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 13
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(add10 5)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def add-missing-elements
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (partial conj [&amp;#34;water&amp;#34; &amp;#34;earth&amp;#34; &amp;#34;air&amp;#34;]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(add-missing-elements &amp;#34;unobtainium&amp;#34; &amp;#34;adamantium&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;water&amp;#34; &amp;#34;earth&amp;#34; &amp;#34;air&amp;#34; &amp;#34;unobtainium&amp;#34; &amp;#34;adamantium&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥å½“ä½ è°ƒç”¨&lt;code>add10&lt;/code>æ—¶ï¼Œå®ƒä¼šè°ƒç”¨åŸå§‹å‡½æ•°å’Œå‚æ•°&lt;code>ï¼ˆ+ 10ï¼‰&lt;/code>ï¼Œå¹¶é™„åŠ ä½ è°ƒç”¨&lt;code>add10&lt;/code>çš„ä»»ä½•å‚æ•°ã€‚ä¸ºäº†å¸®åŠ©æ¾„æ¸…&lt;code>partial&lt;/code>çš„å·¥ä½œåŸç†ï¼Œä¸‹é¢æ¼”ç¤ºäº†å¦‚ä½•å®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn my-partial
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [partialized-fn &amp;amp; args]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [&amp;amp; more-args]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (apply partialized-fn (into args more-args))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def add20 (my-partial + 20))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(add20 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 23
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>add20&lt;/code>çš„å€¼æ˜¯ç”±&lt;code>my-partial&lt;/code>è¿”å›çš„åŒ¿åå‡½æ•°ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°æ˜¯è¿™æ ·å®šä¹‰çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(fn [&amp;amp; more-args]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (apply + (into [20] more-args)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸€èˆ¬æ¥è¯´ï¼Œå½“ä½ å‘ç°ä½ åœ¨è®¸å¤šä¸åŒçš„æƒ…å†µä¸‹é‡å¤ç›¸åŒçš„å‡½æ•°å’Œå‚æ•°ç»„åˆæ—¶ï¼Œä½ ä¼šæƒ³ä½¿ç”¨ partialã€‚è¿™ä¸ªç©å…·ä¾‹å­æ˜¾ç¤ºäº†ä½ å¦‚ä½•ä½¿ç”¨&lt;code>partial&lt;/code>æ¥ä¸“é—¨åŒ–ä¸€ä¸ªè®°å½•å™¨ï¼Œåˆ›å»ºä¸€ä¸ª&lt;code>warn&lt;/code>å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn lousy-logger
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [log-level message]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (condp = log-level
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :warn (clojure.string/lower-case message)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :emergency (clojure.string/upper-case message)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def warn (partial lousy-logger :warn))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(warn &amp;#34;Red light ahead&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;red light ahead&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™é‡Œè°ƒç”¨&lt;code>(warning &amp;quot;Red light ahead&amp;quot;)&lt;/code>ä¸è°ƒç”¨&lt;code>(lousy-logger :warning &amp;quot;Red light ahead&amp;quot;)&lt;/code>æ˜¯ç›¸åŒçš„ã€‚&lt;/p>
&lt;h3 id="complement">Complement&lt;/h3>
&lt;p>æ—©äº›æ—¶å€™ï¼Œä½ åˆ›å»ºäº†&lt;code>è¯†åˆ«å¸è¡€é¬¼&lt;/code>å‡½æ•°ï¼Œä»¥ä¾¿åœ¨ä¸€ç™¾ä¸‡äººä¸­æ‰¾åˆ°ä¸€ä¸ªå¸è¡€é¬¼ã€‚å¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥å¯»æ‰¾æ‰€æœ‰çš„äººç±»å‘¢ï¼Ÿä¹Ÿè®¸ä½ æƒ³ç»™ä»–ä»¬å‘é€æ„Ÿè°¢å¡ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰æˆä¸ºä¸æ­»çš„æ å¤ºè€…ã€‚è¿™é‡Œæ˜¯ä½ å¯ä»¥åšçš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn identify-humans
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [social-security-numbers]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (filter #(not (vampire? %))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map vampire-related-details social-security-numbers)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœ‹çœ‹&lt;code>filter&lt;/code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ&lt;code>#(not (vampire? %))&lt;/code>ã€‚æƒ³è¦å¾—åˆ°ä¸€ä¸ªå¸ƒå°”å‡½æ•°çš„&lt;em>complement&lt;/em>ï¼ˆå¦å®šï¼‰æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>complement&lt;/code>ï¼Œç”¨äºæ­¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def not-vampire? (complement vampire?))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn identify-humans
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [social-security-numbers]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (filter not-vampire?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map vampire-related-details social-security-numbers)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯ä½ å¦‚ä½•å®ç° &amp;ldquo;complement&amp;quot;çš„æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn my-complement
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [fun]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (fn [&amp;amp; args]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (not (apply fun args))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def my-pos? (complement neg?))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(my-pos? 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(my-pos? -1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œ&lt;code>complement&lt;/code>æ˜¯ä¸€ä¸ªä¸èµ·çœ¼çš„å‡½æ•°ã€‚å®ƒåªåšä¸€ä»¶å°äº‹ï¼Œè€Œä¸”åšå¾—å¾ˆå¥½ã€‚&lt;code>complement&lt;/code>ä½¿åˆ›å»ºä¸€ä¸ª&lt;code>ä¸å¸è¡€&lt;/code>çš„å‡½æ•°å˜å¾—å¾®ä¸è¶³é“ï¼Œè€Œä¸”ä»»ä½•é˜…è¯»ä»£ç çš„äººéƒ½èƒ½ç†è§£ä»£ç çš„æ„å›¾ã€‚&lt;/p>
&lt;p>è¿™ä¸ä¼šä¸ºä½ æä¾›æ•°å…†å­—èŠ‚çš„æ•°æ®çš„ MapReduce æˆ–ç±»ä¼¼çš„ä¸œè¥¿ï¼Œä½†å®ƒç¡®å®è¯æ˜äº†é«˜é˜¶å‡½æ•°çš„åŠ›é‡ã€‚å®ƒä»¬å…è®¸ä½ ä»¥ä¸€ç§åœ¨æŸäº›è¯­è¨€ä¸­ä¸å¯èƒ½å®ç°çš„æ–¹å¼å»ºç«‹èµ·å®ç”¨å‡½æ•°åº“ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™äº›å®ç”¨å‡½æ•°ä½¿ä½ çš„ç”Ÿæ´»å˜å¾—æ›´åŠ è½»æ¾ã€‚&lt;/p>
&lt;h2 id="ä¸ºåç››é¡¿å·ç¦å…‹æ–¯è­¦å¯Ÿå±€fwpdç¼–å†™ä¸€ä¸ªå¤æ‚çš„å¸è¡€é¬¼æ•°æ®åˆ†æç¨‹åº">ä¸ºåç››é¡¿å·ç¦å…‹æ–¯è­¦å¯Ÿå±€ï¼ˆFWPDï¼‰ç¼–å†™ä¸€ä¸ªå¤æ‚çš„å¸è¡€é¬¼æ•°æ®åˆ†æç¨‹åº&lt;/h2>
&lt;p>ä¸ºäº†æŠŠæ‰€æœ‰çš„äº‹æƒ…è”ç³»èµ·æ¥ï¼Œè®©æˆ‘ä»¬ä¸ºåç››é¡¿å·ç¦å…‹æ–¯è­¦å¯Ÿå±€ï¼ˆFWPDï¼‰ç¼–å†™ä¸€ä¸ªå¤æ‚çš„å¸è¡€é¬¼æ•°æ®åˆ†æç¨‹åºçš„é›å½¢ã€‚&lt;/p>
&lt;p>FWPD æœ‰ä¸€ä¸ªèŠ±å“¨çš„æ–°æ•°æ®åº“æŠ€æœ¯ï¼Œå«åš&lt;em>CSV&lt;/em> &lt;em>ï¼ˆé€—å·-**åˆ†éš”çš„&lt;/em>å€¼ï¼‰&lt;em>ã€‚ä½ çš„å·¥ä½œæ˜¯è§£æè¿™ä¸ªæœ€å…ˆè¿›çš„ CSVï¼Œå¹¶åˆ†æå®ƒæ˜¯å¦æœ‰æ½œåœ¨çš„å¸è¡€é¬¼ã€‚æˆ‘ä»¬å°†é€šè¿‡è¿‡æ»¤æ¯ä¸ªå«Œç–‘äººçš„&lt;/em>é—ªå…‰æŒ‡æ•°*æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¿™æ˜¯ä¸€ä¸ªç”±æŸä¸ªå°‘å¥³å¼€å‘çš„å¯¹å«Œç–‘äººçš„å¸è¡€é¬¼æ€§çš„ 0-10 é¢„æµ‹ã€‚ç»§ç»­å¹¶ä¸ºä½ çš„å·¥å…·åˆ›å»ºä¸€ä¸ªæ–°çš„ Leiningen é¡¹ç›®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">lein new app fwpd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨æ–°çš„&lt;em>fwpd&lt;/em>ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º&lt;em>suspects.csv&lt;/em>çš„æ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Edward Cullen,10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bella Swan,0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Charlie Swan,0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Jacob Black,3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Carlisle Cullen,6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æ˜¯æ—¶å€™é€šè¿‡å»ºç«‹&lt;em>fwpd/src/fwpd/core.clj&lt;/em>æ–‡ä»¶æ¥å¼„è„ä½ çš„æ‰‹äº†ã€‚æˆ‘å»ºè®®ä½ å¯åŠ¨ä¸€ä¸ªæ–°çš„ REPL ä¼šè¯ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è¾¹èµ°è¾¹è¯•ã€‚åœ¨ Emacs ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ‰“å¼€&lt;em>fwpd/**src/fwpd/core.clj&lt;/em>å¹¶è¿è¡Œ&lt;strong>M-x&lt;/strong> cider-restart æ¥å®ç°ã€‚ä¸€æ—¦ REPL å¯åŠ¨ï¼Œåˆ é™¤&lt;em>core.clj&lt;/em>çš„å†…å®¹ï¼Œç„¶ååŠ å…¥ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(ns fwpd.core)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def filename &amp;#34;suspects.csv&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€è¡Œå»ºç«‹äº†å‘½åç©ºé—´ï¼Œç¬¬äºŒè¡Œåªæ˜¯ä½¿ä½ åˆ›å»ºçš„ CSV æ›´å®¹æ˜“è¢«å¼•ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡ç¼–è¯‘ä½ çš„æ–‡ä»¶ï¼ˆEmacs ä¸­çš„&lt;strong>C-c C-k&lt;/strong>ï¼‰å¹¶è¿è¡Œä»¥ä¸‹ç¨‹åºï¼Œåœ¨ä½ çš„ REPL ä¸­åšä¸€ä¸ªå¿«é€Ÿçš„ç†æ™ºæ£€æŸ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(slurp filename)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Edward Cullen,10\nBella Swan,0\nCharlie Swan,0\nJacob Black, 3\nCarlisle Cullen, 6&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœ&lt;code>slurp&lt;/code>å‡½æ•°æ²¡æœ‰è¿”å›å‰é¢çš„å­—ç¬¦ä¸²ï¼Œè¯•ç€åœ¨&lt;em>core.clj&lt;/em>æ‰“å¼€çš„æƒ…å†µä¸‹é‡æ–°å¯åŠ¨ä½ çš„ REPL ä¼šè¯ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œåœ¨&lt;em>core.clj&lt;/em>ä¸­æ·»åŠ è¿™ä¸ªå†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">âŠ (def vamp-keys [:name :glitter-index])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ (defn str-&amp;gt;int
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [str]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Integer. str))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ (def conversions {:name identity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :glitter-index str-&amp;gt;int})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â (defn convert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [vamp-key value]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ((get conversions vamp-key) value))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€ç»ˆï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸²çœ‹èµ·æ¥åƒ&lt;code>{:name &amp;quot;Edward Cullen&amp;quot; :glitter-index 10}&lt;/code>çš„ Mapï¼Œå‰é¢çš„å®šä¹‰å¯ä»¥å¸®åŠ©ä½ è¾¾åˆ°ç›®çš„ã€‚é¦–å…ˆï¼Œ&lt;code>vamp-keys&lt;/code>âŠæ˜¯ä¸€ä¸ªé”®çš„ Vectorï¼Œä½ å¾ˆå¿«ä¼šç”¨å®ƒæ¥åˆ›å»ºå¸è¡€é¬¼ Mapã€‚æ¥ä¸‹æ¥ï¼Œå‡½æ•°&lt;code>str-&amp;gt;int&lt;/code>â‹å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°ã€‚Map&lt;code>conversions&lt;/code>âŒå°†ä¸€ä¸ªè½¬æ¢å‡½æ•°ä¸æ¯ä¸ªå¸è¡€é¬¼é”®ç›¸å…³è”ã€‚ä½ æ ¹æœ¬ä¸éœ€è¦è½¬æ¢åå­—ï¼Œæ‰€ä»¥å®ƒçš„è½¬æ¢å‡½æ•°æ˜¯&lt;code>identity&lt;/code>ï¼Œå®ƒåªæ˜¯è¿”å›ä¼ é€’ç»™å®ƒçš„å‚æ•°ã€‚ç† ç† ç”Ÿè¾‰çš„ç´¢å¼•è¢«è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œæ‰€ä»¥å®ƒçš„è½¬æ¢å‡½æ•°æ˜¯&lt;code>str-&amp;gt;int&lt;/code>ã€‚æœ€åï¼Œ&lt;code>convert&lt;/code>å‡½æ•°âæ¥æ”¶ä¸€ä¸ª vamp é”®å’Œä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›è½¬æ¢åçš„å€¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(convert :glitter-index &amp;#34;3&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æŠŠè¿™ä¸ªæ·»åŠ åˆ°ä½ çš„æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn parse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Convert a CSV into rows of columns&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [string]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map #(clojure.string/split % #&amp;#34;,&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (clojure.string/split string #&amp;#34;\n&amp;#34;)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>parse&lt;/code>å‡½æ•°æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé¦–å…ˆåœ¨æ¢è¡Œç¬¦ä¸Šè¿›è¡Œåˆ†å‰²ï¼Œåˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²çš„åºåˆ—ã€‚æ¥ä¸‹æ¥ï¼Œå®ƒå¯¹å­—ç¬¦ä¸²åºåˆ—è¿›è¡Œ Mapï¼Œåœ¨é€—å·å­—ç¬¦ä¸Šåˆ†å‰²æ¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¯•ç€åœ¨ä½ çš„ CSV ä¸Šè¿è¡Œ&lt;code>parse&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(parse (slurp filename))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; ([&amp;#34;Edward Cullen&amp;#34; &amp;#34;10&amp;#34;] [&amp;#34;Bella Swan&amp;#34; &amp;#34;0&amp;#34;] [&amp;#34;Charlie Swan&amp;#34; &amp;#34;0&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;#34;Jacob Black&amp;#34; &amp;#34;3&amp;#34;] [&amp;#34;Carlisle Cullen&amp;#34; &amp;#34;6&amp;#34;])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥çš„ä»£ç å°† Vector åºåˆ—ä¸ä½ çš„å¸è¡€é¬¼é’¥åŒ™ç»“åˆèµ·æ¥ï¼Œåˆ›å»º Mapã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn mapify
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Return a seq of maps like {:name \&amp;#34;Edward Cullen\&amp;#34; :glitter-index 10}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [rows]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map (fn [unmapped-row]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (reduce (fn [row-map [vamp-key value]]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (assoc row-map vamp-key (convert vamp-key value)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map vector vamp-keys unmapped-row)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rows))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œ&lt;code>map&lt;/code>é€šè¿‡ä½¿ç”¨&lt;code>reduce&lt;/code>å°†æ¯ä¸€è¡Œ Vector å¦‚&lt;code>[&amp;quot;Bella Swan&amp;quot; 0]&lt;/code>è½¬åŒ–ä¸ºä¸€ä¸ª Mapï¼Œå…¶æ–¹å¼ä¸ä¸Šé¢&amp;rdquo;&lt;code>reduce&lt;/code>&amp;ldquo;ä¸­çš„ç¬¬ä¸€ä¸ªä¾‹å­ç›¸ä¼¼ã€‚é¦–å…ˆï¼Œ&lt;code>map&lt;/code>åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹åºåˆ—ï¼Œå¦‚&lt;code>([:name &amp;quot;Bella Swan&amp;quot;] [:glitter-index 0])&lt;/code>ã€‚ç„¶åï¼Œ&amp;ldquo;reduce &amp;ldquo;é€šè¿‡å°†ä¸€ä¸ª vamp é”®å’Œä¸€ä¸ªè½¬æ¢åçš„ vamp å€¼å…³è”åˆ° &amp;ldquo;row-map &amp;ldquo;æ¥å»ºç«‹ä¸€ä¸ª Mapã€‚ä¸‹é¢æ˜¯ç¬¬ä¸€è¡Œçš„ Mapã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(first (mapify (parse (slurp filename))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:glitter-index 10, :name &amp;#34;Edward Cullen&amp;#34; }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åï¼Œæ·»åŠ è¿™ä¸ª&lt;code>glitter-filter&lt;/code>å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn glitter-filter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [minimum-glitter records]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (filter #(&amp;gt;= (:glitter-index %) minimum-glitter) records))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™éœ€è¦å®Œå…¨ Map çš„å¸è¡€é¬¼è®°å½•ï¼Œå¹¶è¿‡æ»¤æ‰é‚£äº›&lt;code>:glitter-index&lt;/code>å°äºæ‰€æä¾›çš„&lt;code>minimum-glitter&lt;/code>çš„è®°å½•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(glitter-filter 3 (mapify (parse (slurp filename))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">({:name &amp;#34;Edward Cullen&amp;#34;, :glitter-index 10}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;Jacob Black&amp;#34;, :glitter-index 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;Carlisle Cullen&amp;#34;, :glitter-index 6})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Et voilÃ ! ä½ ç°åœ¨ç¦»å®ç°ä½ çš„æ¢¦æƒ³åˆè¿‘äº†ä¸€æ­¥ï¼Œå³æˆä¸ºä¸€åçŒæ€è¶…è‡ªç„¶ç”Ÿç‰©çš„ä¹‰åŠ¡è­¦å‘˜ã€‚ä½ æœ€å¥½å»å›´æ•é‚£äº›ç²—ç•¥çš„äººç‰©!&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>åœ¨æœ¬ç« ä¸­ï¼Œä½ äº†è§£åˆ° Clojure å¼ºè°ƒå¯¹æŠ½è±¡çš„ç¼–ç¨‹ã€‚åºåˆ—æŠ½è±¡å¤„ç†çš„æ˜¯å¯¹åºåˆ—ä¸­å„ä¸ªå…ƒç´ çš„æ“ä½œï¼Œè€Œ seq å‡½æ•°é€šå¸¸å°†å…¶å‚æ•°è½¬æ¢ä¸º seqï¼Œå¹¶è¿”å›ä¸€ä¸ªæƒ°æ€§çš„ seqã€‚æƒ°æ€§æ±‚å€¼é€šè¿‡å°†è®¡ç®—æ¨è¿Ÿåˆ°éœ€è¦æ—¶å†è¿›è¡Œï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ä½ æ‰€å­¦åˆ°çš„å¦ä¸€ä¸ªæŠ½è±¡ï¼Œå³é›†åˆæŠ½è±¡ï¼Œå¤„ç†çš„æ˜¯æ•´ä¸ªæ•°æ®ç»“æ„ã€‚æœ€åï¼Œä½ å­¦åˆ°çš„æœ€é‡è¦çš„ä¸œè¥¿æ˜¯ï¼Œä½ ä¸åº”è¯¥ç›¸ä¿¡é‚£äº›åœ¨é˜³å…‰ä¸‹é—ªå…‰çš„äººã€‚&lt;/p>
&lt;h2 id="ç»ƒä¹ ">ç»ƒä¹ &lt;/h2>
&lt;p>ä½ ç°åœ¨æ‹¥æœ‰çš„å¸è¡€é¬¼åˆ†æç¨‹åºå·²ç»é¢†å…ˆäºå¸‚åœºä¸Šçš„ä»»ä½•å…¶ä»–ç¨‹åºå‡ åå¹´äº†ã€‚ä½†ä½ æ€æ ·æ‰èƒ½ä½¿å®ƒå˜å¾—æ›´å¥½å‘¢ï¼Ÿæˆ‘å»ºè®®å°è¯•ä»¥ä¸‹å‡ ç‚¹ã€‚&lt;/p>
&lt;ol>
&lt;li>æŠŠä½ çš„é—ªå…‰è¿‡æ»¤å™¨çš„ç»“æœå˜æˆä¸€ä¸ªåå­—çš„åˆ—è¡¨ã€‚&lt;/li>
&lt;li>å†™ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>append&lt;/code>ï¼Œå®ƒå°†æŠŠä¸€ä¸ªæ–°çš„å«Œç–‘äººè¿½åŠ åˆ°ä½ çš„å«Œç–‘äººåˆ—è¡¨ä¸­ã€‚&lt;/li>
&lt;li>å†™ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>validate&lt;/code>ï¼Œå®ƒå°†åœ¨ä½ &lt;code>append&lt;/code>æ—¶æ£€æŸ¥&lt;code>:name&lt;/code>å’Œ&lt;code>:glitter-index&lt;/code>æ˜¯å¦å­˜åœ¨ã€‚&lt;code>validate&lt;/code>å‡½æ•°åº”è¯¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªç±»ä¼¼äº&lt;code>conversions&lt;/code>çš„éªŒè¯å‡½æ•°çš„å…³é”®è¯ Mapï¼Œä»¥åŠè¦éªŒè¯çš„è®°å½•ã€‚&lt;/li>
&lt;li>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä½ çš„ Map åˆ—è¡¨è½¬æ¢ä¸º CSV å­—ç¬¦ä¸²ã€‚ä½ éœ€è¦ä½¿ç”¨&lt;code>clojure.string/join&lt;/code>å‡½æ•°ã€‚&lt;/li>
&lt;/ol>
&lt;p>ç¥ä½ å¥½è¿ï¼ŒMcFishwich!&lt;/p></description></item><item><title>Chapter3 é€Ÿæˆç­</title><link>https://example.com/p/chapter3-%E9%80%9F%E6%88%90%E7%8F%AD/</link><pubDate>Thu, 13 Jan 2022 11:12:19 +0800</pubDate><guid>https://example.com/p/chapter3-%E9%80%9F%E6%88%90%E7%8F%AD/</guid><description>&lt;h1 id="åšäº‹æƒ…clojure-é€Ÿæˆç­">åšäº‹æƒ…ï¼šClojure é€Ÿæˆç­&lt;/h1>
&lt;p>æ˜¯æ—¶å€™å­¦ä¹ å¦‚ä½•ç”¨ Clojure çœŸæ­£åœ°&lt;em>åšäº‹&lt;/em>äº†! è¯¥æ­»çš„! å°½ç®¡ä½ æ— ç–‘å·²ç»å¬è¯´è¿‡ Clojure ä»¤äººæ•¬ç•çš„å¹¶å‘æ”¯æŒå’Œå…¶ä»–äº†ä¸èµ·çš„åŠŸèƒ½ï¼Œä½† Clojure æœ€çªå‡ºçš„ç‰¹ç‚¹æ˜¯å®ƒæ˜¯ä¸€ç§ Lisp è¯­è¨€ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†æ¢ç´¢æ„æˆè¿™ä¸ª Lisp æ ¸å¿ƒçš„å…ƒç´ ï¼šè¯­æ³•ã€å‡½æ•°å’Œæ•°æ®ã€‚å®ƒä»¬å°†å…±åŒä¸ºä½ åœ¨ Clojure ä¸­è¡¨ç¤ºå’Œè§£å†³é—®é¢˜æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚&lt;/p>
&lt;p>åœ¨æ‰“ä¸‹è¿™ä¸ªåŸºç¡€ä¹‹åï¼Œä½ å°†èƒ½å¤Ÿç¼–å†™ä¸€äº›è¶…çº§é‡è¦çš„ä»£ç ã€‚åœ¨æœ€åä¸€èŠ‚ä¸­ï¼Œä½ å°†é€šè¿‡åˆ›å»ºä¸€ä¸ªéœæ¯”ç‰¹äººçš„æ¨¡å‹ï¼Œå¹¶ç¼–å†™ä¸€ä¸ªå‡½æ•°å°†å…¶æ‰“åœ¨ä¸€ä¸ªéšæœºçš„ä½ç½®ä¸Šï¼Œä»è€Œå°†ä¸€åˆ‡è”ç³»èµ·æ¥ã€‚è¶…çº§! é‡è¦çš„!&lt;/p>
&lt;p>å½“ä½ é˜…è¯»æœ¬ç« æ—¶ï¼Œæˆ‘å»ºè®®ä½ åœ¨ REPL ä¸­è¾“å…¥ä¾‹å­å¹¶è¿è¡Œå®ƒä»¬ã€‚ç”¨ä¸€ç§æ–°çš„è¯­è¨€ç¼–ç¨‹æ˜¯ä¸€ç§æŠ€èƒ½ï¼Œå°±åƒçº¦å¾·å°”èˆæˆ–èŠ±æ ·æ¸¸æ³³ä¸€æ ·ï¼Œä½ å¿…é¡»é€šè¿‡ç»ƒä¹ æ¥å­¦ä¹ å®ƒã€‚ è¯·ç•™æ„å®ƒ!&lt;/p>
&lt;h2 id="è¯­æ³•">è¯­æ³•&lt;/h2>
&lt;p>Clojure çš„è¯­æ³•å¾ˆç®€å•ã€‚åƒæ‰€æœ‰çš„ Lisp ä¸€æ ·ï¼Œå®ƒé‡‡ç”¨äº†ç»Ÿä¸€çš„ç»“æ„ã€å°‘é‡çš„ç‰¹æ®Šè¿ç®—ç¬¦ï¼Œä»¥åŠä»è—åœ¨éº»çœç†å·¥å­¦é™¢ä¸‹é¢çš„å°æ‹¬å·çŸ¿äº•ä¸­ä¸æ–­æä¾›çš„å°æ‹¬å·ï¼ŒLisp å°±æ˜¯åœ¨é‚£é‡Œè¯ç”Ÿçš„ã€‚&lt;/p>
&lt;h3 id="form">Form&lt;/h3>
&lt;p>æ‰€æœ‰çš„ Clojure ä»£ç éƒ½æ˜¯ä»¥ç»Ÿä¸€ç»“æ„ç¼–å†™çš„ã€‚Clojure å¯ä»¥è¯†åˆ«ä¸¤ç§ç»“æ„ã€‚&lt;/p>
&lt;ul>
&lt;li>æ•°æ®ç»“æ„çš„å­—é¢è¡¨ç¤ºï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€Map å’Œ Vectorï¼‰&lt;/li>
&lt;li>æ“ä½œ&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬ä½¿ç”¨æœ¯è¯­&lt;em>form&lt;/em>æ¥æŒ‡ä»£æœ‰æ•ˆçš„ä»£ç ã€‚æˆ‘æœ‰æ—¶ä¹Ÿä¼šç”¨&lt;em>è¡¨è¾¾å¼&lt;/em>æ¥æŒ‡ä»£ Clojure Formã€‚ä½†ä¸è¦å¤ªçº ç»“äºæœ¯è¯­ã€‚Clojure &lt;em>æ±‚å€¼&lt;/em>æ¯ä¸€ä¸ª Formï¼Œä»¥äº§ç”Ÿä¸€ä¸ªå€¼ã€‚è¿™äº›å­—é¢æ„ä¹‰çš„è¡¨è¾¾éƒ½æ˜¯æœ‰æ•ˆçš„ Formã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;a string&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[&amp;#34;a&amp;#34; &amp;#34;vector&amp;#34; &amp;#34;of&amp;#34; &amp;#34;strings&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶ï¼Œä½ çš„ä»£ç å¾ˆå°‘åŒ…å«è‡ªç”±æµ®åŠ¨çš„å­—ç¬¦ï¼Œå› ä¸ºå®ƒä»¬æœ¬èº«å®é™…ä¸Šå¹¶ä¸åšä»€ä¹ˆã€‚ç›¸åï¼Œä½ ä¼šåœ¨æ“ä½œä¸­ä½¿ç”¨å­—é¢ç¬¦å·ã€‚æ“ä½œæ˜¯ä½ &lt;em>åšäº‹æƒ…&lt;/em>çš„æ–¹å¼ã€‚æ‰€æœ‰æ“ä½œçš„ Form éƒ½æ˜¯ï¼š&lt;em>å¼€æ‹¬å·&lt;/em>ï¼Œ&lt;em>æ“ä½œç¬¦&lt;/em>ï¼Œ&lt;em>æ“ä½œæ•°&lt;/em>ï¼Œ&lt;em>é—­æ‹¬å·&lt;/em>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(operator operand1 operand2 ... operandn)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯·æ³¨æ„ï¼Œè¿™é‡Œæ²¡æœ‰é€—å·ã€‚Clojure ä½¿ç”¨ç©ºæ ¼æ¥åˆ†éš”æ“ä½œæ•°ï¼Œå®ƒå°†é€—å·è§†ä¸ºç©ºæ ¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›æ“ä½œçš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(+ 1 2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(str &amp;#34;It was the panda &amp;#34; &amp;#34;in the library &amp;#34; &amp;#34;with a dust buster&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;It was the panda in the library with a dust buster&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/do-things/panda.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>åœ¨ç¬¬ä¸€ä¸ªæ“ä½œä¸­ï¼Œè¿ç®—ç¬¦&lt;code>+&lt;/code>å°†æ“ä½œæ•°&lt;code>1&lt;/code>ã€&lt;code>2&lt;/code>å’Œ&lt;code>3&lt;/code>ç›¸åŠ ã€‚åœ¨ç¬¬äºŒä¸ªæ“ä½œä¸­ï¼Œè¿ç®—ç¬¦&lt;code>str&lt;/code>å°†ä¸‰ä¸ªå­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸¤ç§ Form éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¸æ˜¯ Form çš„ä¸œè¥¿ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä¸€ä¸ªç»“æŸçš„å°æ‹¬å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Clojure çš„ç»“æ„ç»Ÿä¸€æ€§å¯èƒ½ä¸ä½ æ‰€ä¹ æƒ¯çš„ä¸åŒã€‚åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œä¸åŒçš„æ“ä½œå¯èƒ½æœ‰ä¸åŒçš„ç»“æ„ï¼Œè¿™å–å†³äºæ“ä½œç¬¦å’Œæ“ä½œæ•°ã€‚ä¾‹å¦‚ï¼ŒJavaScript é‡‡ç”¨çš„æ˜¯ ä¸­ç¼€ç¬¦å·ã€ç‚¹è¿ç®—ç¬¦å’Œå°æ‹¬å·çš„å¤§æ‚çƒ©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1 + 2 + 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;It was the panda &amp;#34;.concat(&amp;#34;in the library &amp;#34;, &amp;#34;with a dust buster&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒClojure çš„ç»“æ„æ˜¯éå¸¸ç®€å•å’Œä¸€è‡´çš„ã€‚æ— è®ºä½ ä½¿ç”¨å“ªç§è¿ç®—ç¬¦ï¼Œæˆ–å¯¹å“ªç§æ•°æ®è¿›è¡Œæ“ä½œï¼Œå…¶ç»“æ„éƒ½æ˜¯ä¸€æ ·çš„ã€‚&lt;/p>
&lt;h3 id="æ§åˆ¶æµ">æ§åˆ¶æµ&lt;/h3>
&lt;p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‰ä¸ªåŸºæœ¬çš„æ§åˆ¶æµæ“ä½œç¬¦ã€‚&lt;code>if&lt;/code>, &lt;code>do&lt;/code>, å’Œ&lt;code>when&lt;/code>ã€‚åœ¨æœ¬ä¹¦ä¸­ï¼Œä½ ä¼šé‡åˆ°æ›´å¤šçš„æ“ä½œï¼Œä½†è¿™äº›æ“ä½œå¯ä»¥è®©ä½ å¼€å§‹ã€‚&lt;/p>
&lt;h4 id="if">if&lt;/h4>
&lt;p>è¿™æ˜¯ä¸€ä¸ª &lt;code>if&lt;/code> è¡¨è¾¾å¼çš„ä¸€èˆ¬ç»“æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if boolean-form
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> then-form
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> optional-else-form)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¸ƒå°” Form åªæ˜¯ä¸€ä¸ªæ±‚å€¼ä¸ºçœŸæˆ–å‡çš„ Formã€‚ä½ ä¼šåœ¨ä¸‹ä¸€èŠ‚ä¸­äº†è§£åˆ°é€»è¾‘çœŸå’Œé€»è¾‘å‡ã€‚ä¸‹é¢æ˜¯å‡ ä¸ª&lt;code>if&lt;/code>çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;By Zeus&amp;#39;s hammer!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;By Aquaman&amp;#39;s trident!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;By Zeus&amp;#39;s hammer!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(if false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;By Zeus&amp;#39;s hammer!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;By Aquaman&amp;#39;s trident!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;By Aquaman&amp;#39;s trident!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€ä¸ªä¾‹å­è¿”å› &amp;ldquo;By Zeus&amp;rsquo;s hammer!&amp;quot;ï¼Œå› ä¸ºå…¶å¸ƒå°” Form æ±‚å€¼ä¸º &lt;code>true&lt;/code>ï¼Œæ˜¯ä¸€ä¸ªçœŸå€¼ï¼›ç¬¬äºŒä¸ªä¾‹å­è¿”å› &amp;ldquo;By Aquaman&amp;rsquo;s trident!&amp;quot;ï¼Œå› ä¸ºå…¶å¸ƒå°” Form &amp;ldquo;false&amp;rdquo;ï¼Œæ±‚å€¼ä¸ºä¸€ä¸ªå‡å€¼ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥çœç•¥&lt;code>else&lt;/code>åˆ†æ”¯ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œå¹¶ä¸”å¸ƒå°”è¡¨è¾¾å¼æ˜¯å‡çš„ï¼ŒClojure ä¼šè¿”å›&lt;code>nil&lt;/code>ï¼Œå°±åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;By Odin&amp;#39;s Elbow!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„&lt;code>if&lt;/code>ä½¿ç”¨æ“ä½œæ•°ä½ç½®å°†æ“ä½œæ•°ä¸&lt;code>then&lt;/code>å’Œ&lt;code>else&lt;/code>åˆ†æ”¯è”ç³»èµ·æ¥ï¼šç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯&lt;code>then&lt;/code>åˆ†æ”¯ï¼Œç¬¬äºŒä¸ªæ“ä½œæ•°æ˜¯ï¼ˆå¯é€‰ï¼‰&lt;code>else&lt;/code>åˆ†æ”¯ã€‚å› æ­¤ï¼Œæ¯ä¸ªåˆ†æ”¯åªèƒ½æœ‰ä¸€ç§ Formã€‚è¿™ä¸å¤§å¤šæ•°è¯­è¨€ä¸åŒã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ Ruby ä¸­è¿™æ ·å†™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">if true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> doer.do_thing(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> doer.do_thing(2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">else
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> other_doer.do_thing(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> other_doer.do_thing(2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†ç»•è¿‡è¿™ä¸ªæ˜æ˜¾çš„é™åˆ¶ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>do&lt;/code>æ“ä½œç¬¦ã€‚&lt;/p>
&lt;h4 id="do">do&lt;/h4>
&lt;p>&lt;code>do&lt;/code>æ“ä½œç¬¦å¯ä»¥è®©ä½ åœ¨æ‹¬å·ä¸­&lt;em>åŒ…è£¹&lt;/em>èµ·å¤šä¸ª Formï¼Œå¹¶è¿è¡Œå…¶ä¸­çš„æ¯ä¸€ä¸ªã€‚åœ¨ä½ çš„ REPL ä¸­å°è¯•ä»¥ä¸‹æ“ä½œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do (println &amp;#34;Success!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;By Zeus&amp;#39;s hammer!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do (println &amp;#34;Failure!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;By Aquaman&amp;#39;s trident!&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Success!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;By Zeus&amp;#39;s hammer!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªæ“ä½œç¬¦è®©ä½ åœ¨&lt;code>if&lt;/code>è¡¨è¾¾å¼çš„æ¯ä¸ªåˆ†æ”¯ä¸­åšå¤šä»¶äº‹æƒ…ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šå‘ç”Ÿä¸¤ä»¶äº‹ã€‚&lt;code>Success!&lt;/code>è¢«æ‰“å°åœ¨ REPL ä¸­ï¼Œ&lt;code>By Zeus's hammer!&lt;/code>è¢«ä½œä¸ºæ•´ä¸ª&lt;code>if&lt;/code>è¡¨è¾¾å¼çš„å€¼è¿”å›ã€‚&lt;/p>
&lt;h4 id="when">when&lt;/h4>
&lt;p>&lt;code>when&lt;/code>æ“ä½œç¬¦å°±åƒ&lt;code>if&lt;/code>å’Œ&lt;code>do&lt;/code>çš„ç»„åˆï¼Œä½†æ²¡æœ‰&lt;code>else&lt;/code>åˆ†æ”¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(when true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println &amp;#34;Success!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;abra cadabra&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Success!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;abra cadabra&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ æƒ³åœ¨æŸä¸ªæ¡ä»¶ä¸ºçœŸæ—¶åšå¤šä»¶äº‹ï¼Œè€Œä½ æ€»æ˜¯æƒ³åœ¨æ¡ä»¶ä¸ºå‡æ—¶è¿”å›&lt;code>nil&lt;/code>ï¼Œè¯·ä½¿ç”¨&lt;code>when&lt;/code>ã€‚&lt;/p>
&lt;h4 id="nil-true-false-truthiness-equality-and-boolean-expressions">nil, true, false, Truthiness, Equality, and Boolean Expressions&lt;/h4>
&lt;p>Clojure æœ‰&lt;code>true&lt;/code>å’Œ&lt;code>false&lt;/code>ã€‚&lt;code>nil&lt;/code>åœ¨ Clojure ä¸­ç”¨æ¥è¡¨ç¤º&lt;em>æ²¡æœ‰å€¼&lt;/em>ã€‚ä½ å¯ä»¥ç”¨&lt;code>nil?&lt;/code>å‡½æ•°æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º&lt;code>nil&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(nil? 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(nil? nil)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>nil&lt;/code>å’Œ&lt;code>false&lt;/code>éƒ½æ˜¯ç”¨æ¥è¡¨ç¤ºé€»è¾‘ä¸Šçš„è™šå‡æ€§ï¼Œè€Œæ‰€æœ‰å…¶ä»–çš„å€¼éƒ½æ˜¯é€»è¾‘ä¸Šçš„çœŸå®æ€§ã€‚&lt;em>Truthy&lt;/em>å’Œ&lt;em>falsey&lt;/em>æŒ‡çš„æ˜¯åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸­å¦‚ä½•å¤„ç†ä¸€ä¸ªå€¼ï¼Œæ¯”å¦‚ä¼ é€’ç»™&lt;code>if&lt;/code>çš„ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if &amp;#34;bears eat beets&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;bears beets Battlestar Galactica&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;bears beets Battlestar Galactica&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(if nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;This won&amp;#39;t be the result because nil is falsey&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;nil is falsey&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;nil is falsey&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œå­—ç¬¦ä¸²&lt;code>bears eat beets&lt;/code>è¢«è®¤ä¸ºæ˜¯&lt;code>true&lt;/code>ï¼Œæ‰€ä»¥&lt;code>if&lt;/code>è¡¨è¾¾å¼æ±‚å€¼ä¸º bears beets Battlestar Galactica`ã€‚ç¬¬äºŒä¸ªä¾‹å­æ˜¾ç¤ºä¸€ä¸ª nil æ˜¯å‡çš„ã€‚&lt;/p>
&lt;p>Clojure çš„ç­‰äºè¿ç®—ç¬¦æ˜¯&lt;code>=&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(= 1 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(= nil nil)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(= 1 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä»–ä¸€äº›è¯­è¨€è¦æ±‚ä½ åœ¨æ¯”è¾ƒä¸åŒç±»å‹çš„å€¼æ—¶ä½¿ç”¨ä¸åŒçš„è¿ç®—ç¬¦ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¸å¾—ä¸ä½¿ç”¨æŸç§ä¸“é—¨ä¸ºå­—ç¬¦ä¸²åˆ¶ä½œçš„ç‰¹æ®Šå­—ç¬¦ä¸²ç­‰äºè¿ç®—ç¬¦ã€‚ä½†åœ¨ä½¿ç”¨ Clojure çš„å†…ç½®æ•°æ®ç»“æ„æ—¶ï¼Œä½ ä¸éœ€è¦åƒè¿™æ ·å¥‡æ€ªæˆ–ç¹ççš„ä¸œè¥¿æ¥æµ‹è¯•ç­‰äºã€‚&lt;/p>
&lt;p>Clojure ä½¿ç”¨å¸ƒå°”è¿ç®—ç¬¦&lt;code>or&lt;/code>å’Œ&lt;code>and&lt;/code>ã€‚&lt;code>or&lt;/code>è¿”å›ç¬¬ä¸€ä¸ªçœŸå€¼æˆ–æœ€åä¸€ä¸ªå€¼ã€‚&lt;code>and&lt;/code>è¿”å›ç¬¬ä¸€ä¸ª false çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰ false çš„å€¼ï¼Œåˆ™è¿”å›æœ€åä¸€ä¸ª true çš„å€¼ã€‚è®©æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹&lt;code>or&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(or false nil :large_I_mean_venti :why_cant_I_just_say_large)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; :large_I_mean_venti
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(or (= 0 1) (= &amp;#34;yes&amp;#34; &amp;#34;no&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(or nil)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œè¿”å›å€¼æ˜¯&lt;code>:large_I_mean_venti&lt;/code>ï¼Œå› ä¸ºå®ƒæ˜¯ç¬¬ä¸€ä¸ªçœŸå€¼ã€‚ç¬¬äºŒä¸ªä¾‹å­æ²¡æœ‰çœŸå€¼ï¼Œæ‰€ä»¥&lt;code>or&lt;/code>è¿”å›æœ€åä¸€ä¸ªå€¼ï¼Œå³&lt;code>false&lt;/code>ã€‚åœ¨æœ€åä¸€ä¸ªä¾‹å­ä¸­ï¼ŒåŒæ ·æ²¡æœ‰çœŸå€¼å­˜åœ¨ï¼Œ&lt;code>or&lt;/code>è¿”å›æœ€åä¸€ä¸ªå€¼ï¼Œå³&lt;code>nil&lt;/code>ã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹&lt;code>and&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(and :free_wifi :hot_coffee)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; :hot_coffee
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(and :feelin_super_cool nil false)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>and&lt;/code>è¿”å›æœ€åä¸€ä¸ªçœŸå€¼ï¼Œ&lt;code>:hot_coffee&lt;/code>ã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­, &lt;code>and&lt;/code>è¿”å›&lt;code>nil&lt;/code>, è¿™æ˜¯ç¬¬ä¸€ä¸ª false çš„å€¼.&lt;/p>
&lt;h3 id="ç”¨-def-å‘½å">ç”¨ def å‘½å&lt;/h3>
&lt;p>åœ¨ Clojure ä¸­, ä½ å¯ä»¥ä½¿ç”¨&lt;code>def&lt;/code>å°†ä¸€ä¸ªåå­—ä¸ä¸€ä¸ªå€¼ç»‘å®šèµ·æ¥:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def failed-protagonist-names
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;#34;Larry Potter&amp;#34; &amp;#34;Doreen the Explorer&amp;#34; &amp;#34;The Incredible Bulk&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">failed-protagonist-names
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;Larry Potter&amp;#34; &amp;#34;Doreen the Explorer&amp;#34; &amp;#34;The Incredible Bulk&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/do-things/larry-potter.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ æŠŠåå­—&lt;code>failed-protagonist-names&lt;/code>ç»‘å®šåˆ°ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå­—ç¬¦ä¸²çš„ Vectorï¼ˆä½ å°†åœ¨&lt;a class="link" href="https://www.braveclojure.com/do-things/#Anchor-3" target="_blank" rel="noopener"
>&amp;ldquo;Vector &amp;ldquo;ç¬¬ 45 é¡µ&lt;/a>ä¸­äº†è§£ Vectorï¼‰ã€‚&lt;/p>
&lt;p>è¯·æ³¨æ„ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ &amp;ldquo;ç»‘å®š&amp;quot;ä¸€è¯ï¼Œè€Œåœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œä½ ä¼šè¯´ä½ æ˜¯åœ¨ç»™ä¸€ä¸ª&lt;em>å˜é‡&lt;/em>èµ‹å€¼ã€‚é‚£äº›å…¶ä»–è¯­è¨€é€šå¸¸é¼“åŠ±ä½ å¯¹åŒä¸€ä¸ªå˜é‡è¿›è¡Œå¤šæ¬¡èµ‹å€¼ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œåœ¨ Ruby ä¸­ï¼Œä½ å¯ä»¥å¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œå¤šæ¬¡èµ‹å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">severity = :mild
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">error_message = &amp;#34;OH GOD! IT&amp;#39;S A DISASTER! WE&amp;#39;RE &amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">if severity == :mild
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> error_message = error_message + &amp;#34;MILDLY INCONVENIENCED!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">else
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> error_message = error_message + &amp;#34;DOOOOOOOMED!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯èƒ½æƒ³åœ¨ Clojure ä¸­åšç±»ä¼¼çš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def severity :mild)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def error-message &amp;#34;OH GOD! IT&amp;#39;S A DISASTER! WE&amp;#39;RE &amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(if (= severity :mild)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (def error-message (str error-message &amp;#34;MILDLY INCONVENIENCED!&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (def error-message (str error-message &amp;#34;DOOOOOOOMED!&amp;#34;)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶è€Œï¼Œåƒè¿™æ ·æ”¹å˜ä¸åå­—ç›¸å…³çš„å€¼ä¼šä½¿ä½ æ›´éš¾ç†è§£ä½ çš„ç¨‹åºçš„è¡Œä¸ºï¼Œå› ä¸ºæ›´éš¾çŸ¥é“å“ªä¸ªå€¼æ˜¯ä¸åå­—ç›¸å…³çš„ï¼Œæˆ–è€…ä¸ºä»€ä¹ˆè¿™ä¸ªå€¼å¯èƒ½å·²ç»æ”¹å˜äº†ã€‚Clojure æœ‰ä¸€å¥—å¤„ç†å˜åŒ–çš„å·¥å…·ï¼Œä½ ä¼šåœ¨ç¬¬ 10 ç« ä¸­äº†è§£åˆ°ã€‚éšç€ä½ å¯¹ Clojure çš„å­¦ä¹ ï¼Œä½ ä¼šå‘ç°ä½ å¾ˆå°‘éœ€è¦æ”¹å˜ä¸€ä¸ªåå­—/å€¼çš„å…³è”ã€‚ä¸‹é¢æ˜¯ä½ å†™å‰é¢ä»£ç çš„ä¸€ç§æ–¹å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn error-message
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [severity]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;OH GOD! IT&amp;#39;S A DISASTER! WE&amp;#39;RE &amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (= severity :mild)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;MILDLY INCONVENIENCED!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;DOOOOOOOMED!&amp;#34;)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(error-message :mild)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;OH GOD! IT&amp;#39;S A DISASTER! WE&amp;#39;RE MILDLY INCONVENIENCED!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>error-message&lt;/code>ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œ&lt;code>severity&lt;/code>ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å†³å®šè¿”å›å“ªä¸ªå­—ç¬¦ä¸²ã€‚ç„¶åä½ ç”¨&lt;code>:mild&lt;/code>ä½œä¸ºä¸¥é‡ç¨‹åº¦æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ä½ å°†åœ¨&lt;a class="link" href="https://www.braveclojure.com/do-things/#Anchor-4" target="_blank" rel="noopener"
>&amp;ldquo;å‡½æ•° &amp;ldquo;ç¬¬ 48 é¡µ&lt;/a>ä¸­å­¦ä¹ æ‰€æœ‰å…³äºåˆ›å»ºå‡½æ•°çš„çŸ¥è¯†ï¼›ä¸æ­¤åŒæ—¶ï¼Œä½ åº”è¯¥æŠŠ&lt;code>def&lt;/code>å½“ä½œå®šä¹‰å¸¸é‡ã€‚åœ¨æ¥ä¸‹æ¥çš„å‡ ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•é€šè¿‡æ¥å—å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼æ¥å¤„ç†è¿™ä¸ªæ˜æ˜¾çš„é™åˆ¶ã€‚&lt;/p>
&lt;h2 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„&lt;/h2>
&lt;p>Clojure å¸¦æœ‰å°‘é‡çš„æ•°æ®ç»“æ„ï¼Œä½ åœ¨å¤§å¤šæ•°æ—¶å€™éƒ½ä¼šç”¨åˆ°ã€‚å¦‚æœä½ æ¥è‡ªé¢å‘å¯¹è±¡çš„èƒŒæ™¯ï¼Œä½ ä¼šæƒŠè®¶äºä½ å¯ä»¥ç”¨è¿™é‡Œä»‹ç»çš„çœ‹ä¼¼åŸºæœ¬çš„ç±»å‹åšå¾ˆå¤šäº‹æƒ…ã€‚&lt;/p>
&lt;p>Clojure çš„æ‰€æœ‰æ•°æ®ç»“æ„éƒ½æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œè¿™æ„å‘³ç€ä½ ä¸èƒ½åœ¨åŸåœ°æ”¹å˜å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œåœ¨ Ruby ä¸­ï¼Œä½ å¯ä»¥åšä»¥ä¸‹äº‹æƒ…æ¥é‡æ–°åˆ†é…ç´¢å¼•ä¸º 0 çš„å¤±è´¥ä¸»è§’çš„åå­—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">failed_protagonist_names = [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Larry Potter&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Doreen the Explorer&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;The Incredible Bulk&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">failed_protagonist_names[0] = &amp;#34;Gary Potter&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">failed_protagonist_names
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># =&amp;gt; [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># &amp;#34;Gary Potter&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># &amp;#34;Doreen the Explorer&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># &amp;#34;The Incredible Bulk&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Clojure æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„ä¸œè¥¿ã€‚ä½ ä¼šåœ¨ç¬¬ 10 ç« ä¸­äº†è§£åˆ°æ›´å¤šå…³äº Clojure è¿™æ ·å®ç°çš„åŸå› ï¼Œä½†ç°åœ¨åªå­¦ä¹ å¦‚ä½•åšäº‹æƒ…ï¼Œè€Œä¸è€ƒè™‘æ‰€æœ‰çš„å“²å­¦é—®é¢˜ï¼Œè¿™å¾ˆæœ‰è¶£ã€‚ä¸å¤šè¯´äº†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ Clojure ä¸­çš„æ•°å­—ã€‚&lt;/p>
&lt;h3 id="number">Number&lt;/h3>
&lt;p>Clojure æœ‰ç›¸å½“å¤æ‚çš„ Number æ”¯æŒã€‚æˆ‘ä¸ä¼šèŠ±å¤ªå¤šæ—¶é—´çº ç¼ äºæ— èŠçš„æŠ€æœ¯ç»†èŠ‚ï¼ˆæ¯”å¦‚å¼ºåˆ¶å’Œä¼ æŸ“ï¼‰ï¼Œå› ä¸ºé‚£ä¼šå¦¨ç¢&lt;em>åšäº‹æƒ…&lt;/em>ã€‚å¦‚æœä½ å¯¹è¿™äº›æ¯ç‡¥çš„ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œè¯·æŸ¥çœ‹*&lt;a class="link" href="http://clojure.org/data_structures#Data%20Structures-Numbers" target="_blank" rel="noopener"
>http://clojure.org/data_structures#Data%20Structures-Numbers&lt;/a>*çš„æ–‡æ¡£ã€‚å¯ä»¥è¯´ï¼ŒClojure ä¼šå¾ˆé«˜å…´åœ°å¤„ç†ä½ æ‰”ç»™å®ƒçš„æ‰€æœ‰ä¸œè¥¿ã€‚&lt;/p>
&lt;p>åœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ•´æ•°å’Œæµ®ç‚¹æ•°ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨åˆ†æ•°ï¼ŒClojure å¯ä»¥ç›´æ¥è¡¨ç¤ºè¿™äº›åˆ†æ•°ã€‚ä¸‹é¢åˆ†åˆ«æ˜¯ä¸€ä¸ªæ•´æ•°ã€ä¸€ä¸ªæµ®ç‚¹æ•°å’Œä¸€ä¸ªåˆ†æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">93
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1/5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å­—ç¬¦ä¸²">å­—ç¬¦ä¸²&lt;/h3>
&lt;p>å­—ç¬¦ä¸²ä»£è¡¨æ–‡æœ¬ã€‚è¿™ä¸ªåå­—æ¥è‡ªäºå¤ä»£è…“å°¼åŸºäººï¼Œä»–ä»¬åœ¨ä¸€æ¬¡æ¶‰åŠçº±çº¿çš„äº‹æ•…åï¼Œæœ‰ä¸€å¤©å‘æ˜äº†å­—æ¯è¡¨ã€‚ä¸‹é¢æ˜¯ä¸€äº›å­—ç¬¦ä¸²å­—é¢çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#34;Lord Voldemort&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;\&amp;#34;He who must not be named\&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;\&amp;#34;Great cow of Moscow!\&amp;#34; - Hermes Conrad&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/do-things/wookie.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>æ³¨æ„ï¼ŒClojure åªå…è®¸ç”¨åŒå¼•å·æ¥åˆ’åˆ†å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œ&amp;lsquo;Lord Voldemort&amp;rsquo; å°±ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å­—ç¬¦ä¸²ã€‚è¿˜è¦æ³¨æ„ï¼ŒClojure æ²¡æœ‰å­—ç¬¦ä¸²æ’å€¼ã€‚å®ƒåªå…è®¸é€šè¿‡&lt;code>str&lt;/code>å‡½æ•°è¿›è¡Œæ‹¼æ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def name &amp;#34;Chewbacca&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(str &amp;#34;\&amp;#34;Uggllglglglglglll\&amp;#34; - &amp;#34; name)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Uggllglglglglglll&amp;#34; - Chewbacca
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="map">Map&lt;/h3>
&lt;p>Map ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„å­—å…¸æˆ–å“ˆå¸Œå€¼ã€‚å®ƒä»¬æ˜¯ä¸€ç§å°†ä¸€äº›å€¼ä¸å¦ä¸€äº›å€¼è”ç³»èµ·æ¥çš„æ–¹å¼ã€‚Clojure ä¸­çš„ä¸¤ç§ Map æ˜¯å“ˆå¸Œ Map å’Œæ’åº Mapã€‚æˆ‘å°†åªä»‹ç»æ›´åŸºæœ¬çš„å“ˆå¸Œ Mapã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ Map å­—é¢çš„ä¸€äº›ä¾‹å­ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç©º Mapã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>:first-name&lt;/code>å’Œ&lt;code>:last-name&lt;/code>æ˜¯å…³é”®å­—ï¼ˆæˆ‘å°†åœ¨ä¸‹ä¸€èŠ‚ä»‹ç»è¿™äº›ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{:first-name &amp;#34;Charlie&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :last-name &amp;#34;McFishwich&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæˆ‘ä»¬æŠŠ&lt;code>&amp;quot;string-key&amp;quot;&lt;/code>å’Œ&lt;code>+&lt;/code>å‡½æ•°è”ç³»èµ·æ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{&amp;#34;string-key&amp;#34; +}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Map å¯ä»¥è¢«åµŒå¥—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{:name {:first &amp;#34;John&amp;#34; :middle &amp;#34;Jacob&amp;#34; :last &amp;#34;Jingleheimerschmidt&amp;#34;}}.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼ŒMap çš„å€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹&amp;ndash;å­—ç¬¦ä¸²ã€æ•°å­—ã€Mapã€Vectorï¼Œç”šè‡³å‡½æ•°ã€‚Clojure å¹¶ä¸å…³å¿ƒè¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;p>é™¤äº†ä½¿ç”¨ map å­—é¢ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨&lt;code>hash-map&lt;/code>å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ª mapã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(hash-map :a 1 :b 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:a 1 :b 2}.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥ç”¨&lt;code>get&lt;/code>å‡½æ•°åœ¨ Map ä¸­æŸ¥è¯¢æ•°å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(get {:a 0 :b 1} :b)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(get {:a 0 :b {:c &amp;#34;ho hum&amp;#34;}} :b)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:c &amp;#34;ho hum&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸¤ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‘&lt;code>get&lt;/code>è¯¢é—®ç»™å®š Map ä¸­&lt;code>:b&lt;/code>é”®çš„å€¼&amp;ndash;åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œå®ƒè¿”å›&lt;code>1&lt;/code>ï¼Œè€Œåœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œå®ƒè¿”å›åµŒå¥— Map&lt;code>{:c &amp;quot;ho hum&amp;quot;}&lt;/code>ã€‚&lt;/p>
&lt;p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä½ çš„é”®ï¼Œ&lt;code>get&lt;/code>å°†è¿”å›&lt;code>nil&lt;/code>ï¼Œæˆ–è€…ä½ å¯ä»¥ç»™å®ƒä¸€ä¸ªé»˜è®¤å€¼ï¼Œä¾‹å¦‚&lt;code>&amp;quot;unicornsï¼Ÿ&amp;quot;&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(get {:a 0 :b 1} :c)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(get {:a 0 :b 1} :c &amp;#34;unicorns?&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;unicorns?&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>get-in&lt;/code>å‡½æ•°å¯ä»¥è®©ä½ åœ¨åµŒå¥— Map ä¸­æŸ¥è¯¢æ•°å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(get-in {:a 0 :b {:c &amp;#34;ho hum&amp;#34;}} [:b :c])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;ho hum&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦ä¸€ç§åœ¨ Map ä¸­æŸ¥è¯¢æ•°å€¼çš„æ–¹æ³•æ˜¯æŠŠ Map å½“ä½œä¸€ä¸ªä»¥é”®ä¸ºå‚æ•°çš„å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">({:name &amp;#34;The Human Coffeepot&amp;#34;} :name)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;The Human Coffeepot&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥ç”¨ Map åšçš„å¦ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…æ˜¯æŠŠ Keywords ä½œä¸ºå‡½æ•°æ¥æŸ¥è¯¢å®ƒä»¬çš„å€¼ï¼Œè¿™å°±å¼•å‡ºäº†ä¸‹ä¸€ä¸ªä¸»é¢˜ï¼ŒKeywordsã€‚&lt;/p>
&lt;h3 id="keywords">Keywords&lt;/h3>
&lt;p>äº†è§£ Clojure å…³é”®å­—çš„æœ€å¥½æ–¹æ³•æ˜¯çœ‹å®ƒä»¬æ˜¯å¦‚ä½•è¢«ä½¿ç”¨çš„ã€‚æ­£å¦‚ä½ åœ¨ä¸Šä¸€èŠ‚ä¸­æ‰€çœ‹åˆ°çš„ï¼Œå®ƒä»¬ä¸»è¦æ˜¯ä½œä¸º Map ä¸­çš„é”®æ¥ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€äº› Keywords çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">:a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:rumplestiltsken
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:34
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:_?
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Keywords å¯ä»¥ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œåœ¨æ•°æ®ç»“æ„ä¸­æŸ¥æ‰¾ç›¸åº”çš„å€¼ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ª Map ä¸­æŸ¥æ‰¾&lt;code>:a&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(:a {:a 1 :b 2 :c 3})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ç›¸å½“äºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(get {:a 1 :b 2 :c 3} :a)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå’Œ&lt;code>get&lt;/code>ä¸€æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(:d {:a 1 :b 2 :c 3} &amp;#34;No gnome knows homes like Noah knows&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;No gnome knows homes like Noah knows&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨å…³é”®å­—ä½œä¸ºä¸€ä¸ªå‡½æ•°æ˜¯ä»¤äººæ„‰å¿«çš„ç®€æ´ï¼ŒReal Clojurists ä¸€ç›´åœ¨è¿™æ ·åšã€‚ä½ ä¹Ÿåº”è¯¥è¿™æ ·åš!&lt;/p>
&lt;h3 id="vector">Vector&lt;/h3>
&lt;p>Vector ç±»ä¼¼äºæ•°ç»„, å®ƒæ˜¯ä¸€ä¸ªä»¥ 0 ä¸ºç´¢å¼•çš„ Setã€‚ä¾‹å¦‚, ä¸‹é¢æ˜¯ä¸€ä¸ª Vector çš„å­—é¢æ„æ€:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[3 2 1]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæˆ‘ä»¬è¦è¿”å›ä¸€ä¸ª Vector çš„ç¬¬ 0 ä¸ªå…ƒç´ ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(get [3 2 1] 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªæŒ‰ç´¢å¼•è·å–çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(get [&amp;#34;a&amp;#34; {:name &amp;#34;Pugsley Winterbottom&amp;#34;} &amp;#34;c&amp;#34;] 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; {:name &amp;#34;Pugsley Winterbottom&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒVector å…ƒç´ å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œè€Œä¸”ä½ å¯ä»¥æ··åˆç±»å‹ã€‚è¿˜æ³¨æ„åˆ°æˆ‘ä»¬ä½¿ç”¨çš„&lt;code>get&lt;/code>å‡½æ•°ä¸æˆ‘ä»¬åœ¨ Map ä¸­æŸ¥æ‰¾æ•°å€¼æ—¶ä½¿ç”¨çš„ç›¸åŒã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥ç”¨&lt;code>vector&lt;/code>å‡½æ•°æ¥åˆ›å»º Vectorã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(vector &amp;#34;creepy&amp;#34; &amp;#34;full&amp;#34; &amp;#34;moon&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;creepy&amp;#34; &amp;#34;full&amp;#34; &amp;#34;moon&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥ä½¿ç”¨&lt;code>conj&lt;/code>å‡½æ•°æ¥æ·»åŠ é¢å¤–çš„å…ƒç´ åˆ° Vector ä¸­ã€‚å…ƒç´ è¢«æ·»åŠ åˆ° Vector çš„&lt;em>å°¾éƒ¨&lt;/em>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(conj [1 2 3] 4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [1 2 3 4]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Vector ä¸æ˜¯å­˜å‚¨åºåˆ—çš„å”¯ä¸€æ–¹æ³•ï¼›Clojure è¿˜æœ‰&lt;em>åˆ—è¡¨&lt;/em>ã€‚&lt;/p>
&lt;h3 id="åˆ—è¡¨">åˆ—è¡¨&lt;/h3>
&lt;p>åˆ—è¡¨ ä¸ Vector ç±»ä¼¼ï¼Œå®ƒä»¬éƒ½æ˜¯æ•°å€¼çš„çº¿æ€§ Setã€‚ä½†ä¹Ÿæœ‰ä¸€äº›åŒºåˆ«ã€‚ä¾‹å¦‚ï¼Œä½ ä¸èƒ½ç”¨&lt;code>get&lt;/code>æ£€ç´¢åˆ—è¡¨å…ƒç´ ã€‚è¦å†™ä¸€ä¸ªåˆ—è¡¨çš„å­—é¢æ„æ€, åªéœ€å°†å…ƒç´ æ’å…¥æ‹¬å·å†…, å¹¶åœ¨å¼€å¤´ä½¿ç”¨å•å¼•å·:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#39;(1 2 3 4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 2 3 4)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œå½“ REPL æ‰“å°å‡ºåˆ—è¡¨æ—¶ï¼Œå®ƒä¸åŒ…æ‹¬å•å¼•å·ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ç¬¬ 7 ç« ä¸­å†æ¥è®¨è®ºä¸ºä»€ä¹ˆä¼šè¿™æ ·ã€‚å¦‚æœä½ æƒ³ä»ä¸€ä¸ªåˆ—è¡¨ä¸­æ£€ç´¢ä¸€ä¸ªå…ƒç´ ï¼Œä½ å¯ä»¥ä½¿ç”¨ &lt;code>nth&lt;/code> å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(nth &amp;#39;(:a :b :c) 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; :a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(nth &amp;#39;(:a :b :c) 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; :c
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘åœ¨æœ¬ä¹¦ä¸­æ²¡æœ‰è¯¦ç»†ä»‹ç»æ€§èƒ½ï¼Œå› ä¸ºæˆ‘è®¤ä¸ºåªæœ‰ä½ ç†Ÿæ‚‰ä¸€ç§è¯­è¨€ä¹‹åå†å…³æ³¨å®ƒæ‰æ˜¯æœ‰ç”¨çš„ã€‚ç„¶è€Œï¼ŒçŸ¥é“ä½¿ç”¨&lt;code>nth&lt;/code>ä»åˆ—è¡¨ä¸­æ£€ç´¢ä¸€ä¸ªå…ƒç´ æ¯”ä½¿ç”¨&lt;code>get&lt;/code>ä» Vector ä¸­æ£€ç´¢ä¸€ä¸ªå…ƒç´ è¦æ…¢ä¸€äº›æ˜¯å¾ˆå¥½çš„ã€‚è¿™æ˜¯å› ä¸º Clojure å¿…é¡»éå†ä¸€ä¸ªåˆ—è¡¨ä¸­çš„æ‰€æœ‰&lt;em>n&lt;/em>ä¸ªå…ƒç´ æ‰èƒ½åˆ°è¾¾&lt;em>n&lt;/em>ä¸ªï¼Œè€Œé€šè¿‡ç´¢å¼•è®¿é—®ä¸€ä¸ª Vector å…ƒç´ æœ€å¤šåªéœ€è¦å‡ è·³ã€‚&lt;/p>
&lt;p>åˆ—è¡¨å€¼å¯ä»¥æœ‰ä»»ä½•ç±»å‹ï¼Œä½ å¯ä»¥ç”¨&lt;code>list&lt;/code>å‡½æ•°åˆ›å»ºåˆ—è¡¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(list 1 &amp;#34;two&amp;#34; {3 4})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 &amp;#34;äºŒ&amp;#34; {3 4})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…ƒç´ è¢«æ·»åŠ åˆ°ä¸€ä¸ªåˆ—è¡¨çš„&lt;em>å¼€å¤´&lt;/em>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(conj &amp;#39;(1 2 3) 4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (4 1 2 3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨åˆ—è¡¨ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ Vectorï¼Ÿä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œå¦‚æœä½ éœ€è¦å¾ˆå®¹æ˜“åœ°æŠŠé¡¹ç›®æ·»åŠ åˆ°ä¸€ä¸ªåºåˆ—çš„å¼€å¤´ï¼Œæˆ–è€…ä½ æ­£åœ¨å†™ä¸€ä¸ªå®ï¼Œä½ åº”è¯¥ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨ã€‚å¦åˆ™ï¼Œä½ åº”è¯¥ä½¿ç”¨ Vectorã€‚éšç€ä½ å­¦ä¹ çš„æ·±å…¥ï¼Œä½ ä¼šå¯¹ä½•æ—¶ä½¿ç”¨å“ªç§æ–¹æ³•æœ‰å¾ˆå¥½çš„æ„Ÿè§‰ã€‚&lt;/p>
&lt;h3 id="set">Set&lt;/h3>
&lt;p>Set æ˜¯å”¯ä¸€å€¼çš„é›†åˆã€‚Clojure æœ‰ä¸¤ç§ç±»å‹çš„ Setï¼šå“ˆå¸Œ Set å’Œæ’åº Setã€‚æˆ‘å°†ä¸“æ³¨äºå“ˆå¸Œ Setï¼Œå› ä¸ºå®ƒä»¬æ›´ç»å¸¸è¢«ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå“ˆå¸Œ Set çš„æ–‡å­—ç¬¦å·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#{&amp;#34;kurt vonnegut&amp;#34; 20 :icicle}.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥ç”¨&lt;code>hash-set&lt;/code>æ¥åˆ›å»ºä¸€ä¸ª Set:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(hash-set 1 1 2 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #{1 2}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œä¸€ä¸ªå€¼çš„å¤šä¸ªå®ä¾‹åœ¨ Set ä¸­æˆä¸ºä¸€ä¸ªå”¯ä¸€çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åªå‰©ä¸‹ä¸€ä¸ª&lt;code>1&lt;/code>å’Œä¸€ä¸ª&lt;code>2&lt;/code>ã€‚å¦‚æœä½ è¯•å›¾å°†ä¸€ä¸ªå€¼æ·»åŠ åˆ°ä¸€ä¸ªå·²ç»åŒ…å«è¯¥å€¼çš„ Set ä¸­ï¼ˆæ¯”å¦‚ä¸‹é¢ä»£ç ä¸­çš„&lt;code>:b&lt;/code>ï¼‰ï¼Œå®ƒä»ç„¶åªæœ‰ä¸€ä¸ªè¯¥å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">( conj #{:a :b} :b)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #{:a :b}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨&lt;code>set&lt;/code>å‡½æ•°ä»ç°æœ‰çš„ Vector å’Œåˆ—è¡¨ä¸­åˆ›å»º Setã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(set [3 3 3 4 4])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #{3 4}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥ä½¿ç”¨&lt;code>contains?&lt;/code>å‡½æ•°æ¥æ£€æŸ¥ Set çš„æˆå‘˜èµ„æ ¼ï¼Œé€šè¿‡ä½¿ç”¨&lt;code>get&lt;/code>ï¼Œæˆ–é€šè¿‡ä½¿ç”¨å…³é”®å­—ä½œä¸ºå‡½æ•°ï¼Œä»¥ Set ä¸ºå‚æ•°ã€‚&lt;code>contains?&lt;/code>è¿”å›&lt;code>true&lt;/code>æˆ–&lt;code>false&lt;/code>ï¼Œè€Œ&lt;code>get&lt;/code>å’Œå…³é”®å­—æŸ¥æ‰¾å°†è¿”å›å­˜åœ¨çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›&lt;code>nil&lt;/code>ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨&lt;code>contains?&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(contains? #{:a :b} :a)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(contains? #{:a :b} 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(contains? #{nil} nil)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä½¿ç”¨å…³é”®å­—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(:a #{:a :b})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; :a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæ˜¯ä½ å¦‚ä½•ä½¿ç”¨&lt;code>get&lt;/code>çš„æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(get #{:a :b} :a)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; :a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(get #{:a nil} nil)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(get #{:a :b} &amp;#34;kurt vonnegut&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; nil
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œä½¿ç”¨&lt;code>get&lt;/code>æ¥æµ‹è¯•ä¸€ä¸ª Set æ˜¯å¦åŒ…å«&lt;code>nil&lt;/code>ï¼Œå°†æ€»æ˜¯è¿”å›&lt;code>nil&lt;/code>ï¼Œè¿™ä»¤äººå›°æƒ‘ã€‚å½“ä½ ä¸“é—¨æµ‹è¯• Set æˆå‘˜æ—¶ï¼Œ&lt;code>contains?&lt;/code>å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚&lt;/p>
&lt;h3 id="ç®€å•æ€§">ç®€å•æ€§&lt;/h3>
&lt;p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¯¹æ•°æ®ç»“æ„çš„å¤„ç†å¹¶ä¸åŒ…æ‹¬å¯¹å¦‚ä½•åˆ›å»ºæ–°ç±»å‹æˆ–ç±»çš„æè¿°ã€‚åŸå› æ˜¯ Clojure å¯¹ç®€å•æ€§çš„å¼ºè°ƒé¼“åŠ±ä½ é¦–å…ˆå»æ¥è§¦å†…ç½®çš„æ•°æ®ç»“æ„ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æ¥è‡ªé¢å‘å¯¹è±¡çš„èƒŒæ™¯ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºè¿™ç§æ–¹æ³•å¾ˆå¥‡æ€ªè€Œä¸”è½åã€‚ç„¶è€Œï¼Œä½ ä¼šå‘ç°ï¼Œä½ çš„æ•°æ®ä¸ä¸€å®šéè¦å’Œä¸€ä¸ªç±»ç´§å¯†åœ°æ†ç»‘åœ¨ä¸€èµ·ï¼Œæ‰æ˜¯æœ‰ç”¨å’Œå¯ç†è§£çš„ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªè¢« Clojurists å–œçˆ±çš„å¯“è¨€æ•…äº‹ï¼Œæš—ç¤ºäº† Clojure çš„å“²å­¦ã€‚&lt;/p>
&lt;blockquote>
&lt;p>è®© 100 ä¸ªå‡½æ•°æ“ä½œä¸€ä¸ªæ•°æ®ç»“æ„æ¯”è®© 10 ä¸ªå‡½æ•°æ“ä½œ 10 ä¸ªæ•°æ®ç»“æ„è¦å¥½ã€‚
-Alan Perlis&lt;/p>
&lt;/blockquote>
&lt;p>åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œä½ ä¼šäº†è§£åˆ°æ›´å¤šå…³äº Clojure å“²å­¦çš„è¿™ä¸ªæ–¹é¢ã€‚ç°åœ¨ï¼Œè¯·ç•™æ„ä½ é€šè¿‡åšæŒä½¿ç”¨åŸºæœ¬æ•°æ®ç»“æ„æ¥è·å¾—ä»£ç é‡ç”¨æ€§çš„æ–¹æ³•ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬çš„ Clojure æ•°æ®ç»“æ„å…¥é—¨è¯¾ç¨‹åˆ°æ­¤ç»“æŸã€‚ç°åœ¨ï¼Œæ˜¯æ—¶å€™æ·±å…¥åˆ°å‡½æ•°ä¸­å»ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨è¿™äº›æ•°æ®ç»“æ„äº†&lt;/p>
&lt;h2 id="å‡½æ•°">å‡½æ•°&lt;/h2>
&lt;p>äººä»¬ä¸º Lisp ç–¯ç‹‚çš„åŸå› ä¹‹ä¸€æ˜¯ï¼Œè¿™äº›è¯­è¨€å¯ä»¥è®©ä½ å»ºç«‹èµ·è¡Œä¸ºå¤æ‚çš„ç¨‹åºï¼Œä½†ä¸»è¦çš„æ„ä»¶&amp;ndash;å‡½æ•°&amp;ndash;å´æ˜¯å¦‚æ­¤ç®€å•ã€‚æœ¬èŠ‚é€šè¿‡è§£é‡Šä»¥ä¸‹å†…å®¹ï¼Œè®©ä½ å¼€å§‹äº†è§£ Lisp å‡½æ•°çš„ç¾ä¸½å’Œä¼˜é›…ã€‚&lt;/p>
&lt;ul>
&lt;li>è°ƒç”¨å‡½æ•°&lt;/li>
&lt;li>å‡½æ•°ä¸å®å’Œç‰¹æ®Š Form æœ‰ä»€ä¹ˆä¸åŒ&lt;/li>
&lt;li>å®šä¹‰å‡½æ•°&lt;/li>
&lt;li>åŒ¿åå‡½æ•°&lt;/li>
&lt;li>è¿”å›å‡½æ•°&lt;/li>
&lt;/ul>
&lt;h3 id="è°ƒç”¨å‡½æ•°">è°ƒç”¨å‡½æ•°&lt;/h3>
&lt;p>ç°åœ¨ä½ å·²ç»çœ‹åˆ°äº†è®¸å¤šå‡½æ•°è°ƒç”¨çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(+ 1 2 3 4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(* 1 2 3 4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(first [1 2 3 4])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯·è®°ä½ï¼Œæ‰€æœ‰çš„ Clojure æ“ä½œéƒ½æœ‰ç›¸åŒçš„è¯­æ³•ï¼šå¼€æ‹¬å·ã€æ“ä½œç¬¦ã€æ“ä½œæ•°ã€é—­æ‹¬å·ã€‚&lt;em>å‡½æ•°**è°ƒç”¨&lt;/em>åªæ˜¯æ“ä½œçš„å¦ä¸€ä¸ªæœ¯è¯­ï¼Œå…¶ä¸­è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–ä¸€ä¸ª&lt;em>å‡½æ•°**è¡¨è¾¾å¼&lt;/em>ï¼ˆä¸€ä¸ªè¿”å›å‡½æ•°çš„è¡¨è¾¾å¼ï¼‰ã€‚&lt;/p>
&lt;p>è¿™å¯ä»¥è®©ä½ å†™å‡ºä¸€äº›ç›¸å½“æœ‰è¶£çš„ä»£ç ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œå®ƒè¿”å›&lt;code>+&lt;/code>ï¼ˆåŠ æ³•ï¼‰å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(or + -)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; #&amp;lt;core$_PLUS_ clojure.core$_PLUS_@76dace31&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥è¿”å›å€¼æ˜¯åŠ æ³•å‡½æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚å› ä¸º&lt;code>or&lt;/code>çš„è¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªçœŸå€¼ï¼Œè€Œè¿™é‡Œçš„åŠ æ³•å‡½æ•°æ˜¯çœŸå€¼ï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯åŠ æ³•å‡½æ•°ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ä½¿ç”¨è¿™ä¸ªè¡¨è¾¾å¼ä½œä¸ºè¿ç®—ç¬¦ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">((or + -) 1 2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› ä¸º&lt;code>(or + -)&lt;/code>è¿”å›&lt;code>+&lt;/code>ï¼Œè¿™ä¸ªè¡¨è¾¾å¼è¢«æ±‚å€¼ä¸º&lt;code>1&lt;/code>ã€&lt;code>2&lt;/code>å’Œ&lt;code>3&lt;/code>ä¹‹å’Œï¼Œè¿”å›&lt;code>6&lt;/code>ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯å‡ ä¸ªæœ‰æ•ˆçš„å‡½æ•°è°ƒç”¨ï¼Œå®ƒä»¬éƒ½è¿”å›&lt;code>6&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">((and (= 1 1) +) 1 2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">((first [+ 0]) 1 2 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>and&lt;/code>çš„è¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªå‡å€¼æˆ–æœ€åä¸€ä¸ªçœŸå€¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>+&lt;/code>è¢«è¿”å›ï¼Œå› ä¸ºå®ƒæ˜¯æœ€åä¸€ä¸ªçœŸå€¼ï¼Œç„¶åè¢«åº”ç”¨äºå‚æ•°&lt;code>1 2 3&lt;/code>ï¼Œè¿”å›&lt;code>6&lt;/code>ã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>first&lt;/code>çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåºåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯&lt;code>+&lt;/code>ã€‚&lt;/p>
&lt;p>ç„¶è€Œï¼Œè¿™äº›éƒ½ä¸æ˜¯æœ‰æ•ˆçš„å‡½æ•°è°ƒç”¨ï¼Œå› ä¸ºæ•°å­—å’Œå­—ç¬¦ä¸²éƒ½ä¸æ˜¯å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(1 2 3 4)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(&amp;#34;test&amp;#34; 1 2 3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ åœ¨ REPL ä¸­è¿è¡Œè¿™äº›ï¼Œä½ ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ClassCastException java.lang.String cannot be cast to clojure.lang.IFn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user/eval728 (NO_SOURCE_FILE:1)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ä½ ç»§ç»­ä½¿ç”¨ Clojure æ—¶ï¼Œä½ å¯èƒ½ä¼šå¤šæ¬¡çœ‹åˆ°è¿™ä¸ªé”™è¯¯ï¼š&lt;em>&lt;!-- raw HTML omitted --> cannot be cast to clojure.lang.IFn&lt;/em> ã€‚åªæ˜¯æ„å‘³ç€ä½ è¯•å›¾å°†æŸä¸ªä¸œè¥¿ä½œä¸ºä¸€ä¸ªå‡½æ•°ä½¿ç”¨ï¼Œè€Œå®ƒå¹¶ä¸æ˜¯ã€‚&lt;/p>
&lt;p>å‡½æ•°çš„çµæ´»æ€§å¹¶æ²¡æœ‰éšç€å‡½æ•°è¡¨è¾¾å¼çš„å‡ºç°è€Œç»“æŸ! åœ¨è¯­æ³•ä¸Šï¼Œå‡½æ•°å¯ä»¥æ¥å—ä»»ä½•è¡¨è¾¾å¼ä½œä¸ºå‚æ•°&amp;ndash;åŒ…æ‹¬&lt;em>å…¶ä»–å‡½æ•°&lt;/em>ã€‚å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°è¢«ç§°ä¸º&lt;em>é«˜é˜¶å‡½æ•°&lt;/em>ã€‚å…·æœ‰é«˜é˜¶å‡½æ•°çš„ç¼–ç¨‹è¯­è¨€è¢«ç§°ä¸ºæ”¯æŒ&lt;em>å‡½æ•°ä¸€ç­‰å…¬æ°‘&lt;/em>ï¼Œå› ä¸ºä½ å¯ä»¥åƒå¯¹å¾…æ•°å­—å’Œ Vector ç­‰æ›´ç†Ÿæ‚‰çš„æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå°†å‡½æ•°ä½œä¸ºå€¼æ¥å¤„ç†ã€‚&lt;/p>
&lt;p>ä»¥&lt;code>map&lt;/code>å‡½æ•°ï¼ˆä¸è¦ä¸ map æ•°æ®ç»“æ„æ··æ·†ï¼‰ä¸ºä¾‹ã€‚&lt;code>map&lt;/code>é€šè¿‡å¯¹ä¸€ä¸ªé›†åˆçš„æ¯ä¸ªæˆå‘˜åº”ç”¨ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ã€‚è¿™é‡Œï¼Œ&lt;code>inc&lt;/code>å‡½æ•°å°†ä¸€ä¸ªæ•°å­—å¢åŠ  1ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(inc 1.1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 2.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(map inc [0 1 2 3])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 2 3 4)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>(æ³¨æ„&lt;code>map&lt;/code>å¹¶ä¸è¿”å›ä¸€ä¸ª Vectorï¼Œå°½ç®¡æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª Vector ä½œä¸ºå‚æ•°ã€‚ä½ å°†åœ¨ç¬¬å››ç« ä¸­äº†è§£åŸå› ã€‚ç°åœ¨ï¼Œè¯·ç›¸ä¿¡è¿™æ˜¯å¥½çš„ï¼Œä¹Ÿæ˜¯é¢„æœŸçš„ï¼‰ã€‚&lt;/p>
&lt;p>Clojure å¯¹ä¸€ç­‰å…¬æ°‘å‡½æ•°çš„æ”¯æŒä½¿ä½ èƒ½å¤Ÿå»ºç«‹æ¯”æ²¡æœ‰ä¸€ç­‰å…¬æ°‘å‡½æ•°çš„è¯­è¨€æ›´å¼ºå¤§çš„æŠ½è±¡æ¦‚å¿µã€‚é‚£äº›ä¸ç†Ÿæ‚‰è¿™ç§ç¼–ç¨‹æ–¹å¼çš„äººè®¤ä¸ºå‡½æ•°å…è®¸ä½ å¯¹æ•°æ®å®ä¾‹è¿›è¡Œæ³›åŒ–æ“ä½œã€‚ä¾‹å¦‚ï¼Œ&lt;code>+&lt;/code>å‡½æ•°å¯¹ä»»ä½•ç‰¹å®šæ•°å­—çš„åŠ æ³•è¿›è¡Œäº†æŠ½è±¡ã€‚&lt;/p>
&lt;p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒClojureï¼ˆä»¥åŠæ‰€æœ‰ Lispï¼‰å…è®¸ä½ åˆ›å»ºæ³›åŒ–è¿›ç¨‹çš„å‡½æ•°ã€‚&lt;code>map&lt;/code>å…è®¸ä½ é€šè¿‡åœ¨ä»»ä½•é›†åˆä¸Šåº”ç”¨ä¸€ä¸ªå‡½æ•°&amp;ndash;ä»»ä½•å‡½æ•°&amp;ndash;æ¥æ¦‚æ‹¬è½¬æ¢ä¸€ä¸ªé›†åˆçš„è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>ä½ éœ€è¦çŸ¥é“çš„å…³äºå‡½æ•°è°ƒç”¨çš„æœ€åä¸€ä¸ªç»†èŠ‚æ˜¯ï¼ŒClojure åœ¨å°†æ‰€æœ‰å‡½æ•°å‚æ•°ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œä¼šé€’å½’åœ°æ±‚å€¼è¿™äº›å‚æ•°ã€‚ä¸‹é¢æ˜¯ Clojure å¦‚ä½•æ±‚å€¼ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯å‡½æ•°è°ƒç”¨çš„å‡½æ•°è°ƒç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(+ (inc 199) (/ 100 (- 7 2)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(+ 200 (/ 100 (- 7 2))) ; evaluated &amp;#34;(inc 199)&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(+ 200 (/ 100 5)) ; evaluated (- 7 2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(+ 200 20) ; evaluated (/ 100 5)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">220 ; final evaluation
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡½æ•°è°ƒç”¨å¯åŠ¨äº†æ±‚å€¼è¿‡ç¨‹ï¼Œåœ¨åº”ç”¨&lt;code>+&lt;/code>å‡½æ•°ä¹‹å‰ï¼Œæ‰€æœ‰çš„å­ Form éƒ½è¢«æ±‚å€¼äº†ã€‚&lt;/p>
&lt;h3 id="å‡½æ•°è°ƒç”¨å®è°ƒç”¨å’Œç‰¹æ®Š-form">å‡½æ•°è°ƒç”¨ã€å®è°ƒç”¨å’Œç‰¹æ®Š Form&lt;/h3>
&lt;p>åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œä½ äº†è§£åˆ°å‡½æ•°è°ƒç”¨æ˜¯ä»¥å‡½æ•°è¡¨è¾¾å¼ä¸ºæ“ä½œç¬¦çš„è¡¨è¾¾å¼ã€‚å¦å¤–ä¸¤ç§è¡¨è¾¾å¼æ˜¯&lt;em>å®è°ƒç”¨&lt;/em>å’Œ&lt;em>ç‰¹æ®Š Form&lt;/em>ã€‚ä½ å·²ç»çœ‹åˆ°äº†å‡ ç§ç‰¹æ®Š Formï¼š&lt;code>def&lt;/code> å’Œ&lt;code>if&lt;/code>è¡¨è¾¾å¼ã€‚&lt;/p>
&lt;p>ä½ å°†åœ¨ç¬¬ 7 ç« ä¸­å­¦ä¹ å…³äºå®è°ƒç”¨å’Œç‰¹æ®Š Form çš„æ‰€æœ‰çŸ¥è¯†ã€‚ç°åœ¨ï¼Œä½¿ç‰¹æ®Š Form &amp;ldquo;ç‰¹æ®Š&amp;quot;çš„ä¸»è¦ç‰¹å¾æ˜¯ï¼Œä¸å‡½æ•°è°ƒç”¨ä¸åŒï¼Œå®ƒä»¬ä¸æ±‚å€¼æ‰€æœ‰çš„æ“ä½œæ•°ã€‚&lt;/p>
&lt;p>ä»¥ &amp;ldquo;if &amp;ldquo;ä¸ºä¾‹ã€‚è¿™æ˜¯å®ƒçš„ä¸€èˆ¬ç»“æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if boolean-form
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> then-form
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> optional-else-form)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æƒ³è±¡ä¸€ä¸‹ä½ æœ‰ä¸€ä¸ªè¿™æ ·çš„&lt;code>if&lt;/code>è¯­å¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(if good-mood
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (tweet walking-on-sunshine-lyrics)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (tweet mopey-country-song-lyrics))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ˜¾ç„¶ï¼Œåœ¨è¿™æ ·çš„&lt;code>if&lt;/code>è¡¨è¾¾ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ› Clojure åªæ±‚å€¼ä¸¤ä¸ªåˆ†æ”¯ä¸­çš„ä¸€ä¸ªã€‚å¦‚æœ Clojure åŒæ—¶æ±‚å€¼ä¸¤ä¸ª&lt;code>tweet&lt;/code>å‡½æ•°è°ƒç”¨ï¼Œä½ çš„ Twitter ç²‰ä¸ä»¬æœ€ç»ˆä¼šéå¸¸å›°æƒ‘ã€‚&lt;/p>
&lt;p>å¦ä¸€ä¸ªåŒºåˆ«äºç‰¹æ®Š Form çš„ç‰¹å¾æ˜¯ï¼Œä½ ä¸èƒ½æŠŠå®ƒä»¬ä½œä¸ºå‡½æ•°çš„å‚æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç‰¹æ®Š Form å®ç°äº† Clojure çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œåªæ˜¯ä¸èƒ½ç”¨å‡½æ•°å®ç°ã€‚Clojure åªæœ‰å°‘é‡çš„ç‰¹æ®Š Formï¼Œè€Œå¦‚æ­¤ä¸°å¯Œçš„è¯­è¨€æ˜¯ç”¨å¦‚æ­¤å°çš„ä¸€ç»„æ„å»ºå—æ¥å®ç°çš„ï¼Œè¿™æ˜¯å¾ˆä»¤äººæƒŠè®¶çš„ã€‚&lt;/p>
&lt;p>å®ä¸ç‰¹æ®Š Form ç±»ä¼¼ï¼Œå®ƒä»¬å¯¹æ“ä½œæ•°çš„æ±‚å€¼ä¸å‡½æ•°è°ƒç”¨ä¸åŒï¼Œè€Œä¸”å®ƒä»¬ä¹Ÿä¸èƒ½ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚ä½†è¿™æ®µå¼¯è·¯å·²ç»èµ°å¾—å¤Ÿé•¿äº†ï¼›ç°åœ¨æ˜¯å­¦ä¹ å¦‚ä½•å®šä¹‰å‡½æ•°çš„æ—¶å€™äº†!&lt;/p>
&lt;h3 id="å®šä¹‰å‡½æ•°">å®šä¹‰å‡½æ•°&lt;/h3>
&lt;p>å‡½æ•°çš„å®šä¹‰ç”±äº”ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>defn&lt;/code>&lt;/li>
&lt;li>å‡½æ•°å&lt;/li>
&lt;li>æè¿°è¯¥å‡½æ•°çš„ docstring(å¯é€‰)&lt;/li>
&lt;li>æ‹¬å·ä¸­åˆ—å‡ºçš„å‚æ•°&lt;/li>
&lt;li>å‡½æ•°ä½“&lt;/li>
&lt;/ul>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªå‡½æ•°å®šä¹‰çš„ä¾‹å­å’Œå‡½æ•°çš„è°ƒç”¨ç¤ºä¾‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">âŠ (defn too-enthusiastic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â‹ &amp;#34;Return a cheer that might be a bit too enthusiastic&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŒ [name]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â (str &amp;#34;OH. MY. GOD! &amp;#34; name &amp;#34; YOU ARE MOST DEFINITELY LIKE THE BEST &amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;MAN SLASH WOMAN EVER I LOVE YOU AND WE SHOULD RUN AWAY SOMEWHERE&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(too-enthusiastic &amp;#34;Zelda&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;OH. MY. GOD! Zelda YOU ARE MOST DEFINITELY LIKE THE BEST MAN SLASH WOMAN EVER I LOVE YOU AND WE SHOULD RUN AWAY SOMEWHERE&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨âŠå¤„ï¼Œ&lt;code>too-enthusiastic&lt;/code>æ˜¯å‡½æ•°çš„åç§°ï¼Œåœ¨â‹å¤„æœ‰ä¸€ä¸ªæè¿°æ€§çš„ docstringã€‚å‚æ•° &amp;ldquo;name &amp;ldquo;åœ¨âŒå¤„ç»™å‡ºï¼Œå‡½æ•°ä½“åœ¨âå¤„æ¥å—å‚æ•°ï¼Œå¹¶åšäº†å®ƒæ‰€æè¿°çš„äº‹æƒ…&amp;ndash;è¿”å›ä¸€ä¸ªå¯èƒ½æœ‰ç‚¹è¿‡äºçƒ­æƒ…çš„æ¬¢å‘¼ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬æ›´æ·±å…¥åœ°äº†è§£ docstringã€å‚æ•°å’Œå‡½æ•°ä½“ã€‚&lt;/p>
&lt;h4 id="docstring">docstring&lt;/h4>
&lt;p>docstring*æ˜¯ä¸€ç§æè¿°å’Œè®°å½•ä½ çš„ä»£ç çš„æœ‰ç”¨æ–¹æ³•ã€‚ä½ å¯ä»¥åœ¨ REPL ä¸­ç”¨ &lt;code>(doc&lt;/code>fn-name&lt;code>)&lt;/code>æŸ¥çœ‹ä¸€ä¸ªå‡½æ•°çš„ docstringï¼Œä¾‹å¦‚ &lt;code>(doc map)&lt;/code>ã€‚å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªå·¥å…·ä¸ºä½ çš„ä»£ç ç”Ÿæˆæ–‡æ¡£ï¼Œé‚£ä¹ˆ docstring ä¹Ÿä¼šå‘æŒ¥ä½œç”¨ã€‚&lt;/p>
&lt;h4 id="å‚æ•°å’Œ-arity">å‚æ•°å’Œ Arity&lt;/h4>
&lt;p>Clojure å‡½æ•°å¯ä»¥ç”¨é›¶ä¸ªæˆ–å¤šä¸ªå‚æ•°æ¥å®šä¹‰ã€‚ä½ ä¼ é€’ç»™å‡½æ•°çš„å€¼è¢«ç§°ä¸º&lt;em>arguments&lt;/em>ï¼Œå‚æ•°å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚å‚æ•°çš„æ•°é‡å°±æ˜¯å‡½æ•°çš„ç‰¹æ€§ã€‚ä¸‹é¢æ˜¯ä¸€äº›å…·æœ‰ä¸åŒæ€§è´¨çš„å‡½æ•°å®šä¹‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn no-params
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;I take no parameters!&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn one-param
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [x]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;I take one parameter: &amp;#34; x))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn two-params
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [x y]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;Two parameters! That&amp;#39;s nothing! Pah! I will smoosh them &amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;together to spite you! &amp;#34; x y))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œ&lt;code>no-params&lt;/code>æ˜¯ä¸€ä¸ª 0-arity å‡½æ•°ï¼Œ&lt;code>one-param&lt;/code>æ˜¯ 1-arityï¼Œ&lt;code>two-params&lt;/code>æ˜¯ 2-arityã€‚&lt;/p>
&lt;p>å‡½æ•°ä¹Ÿæ”¯æŒ &lt;em>å‚æ•°é‡è½½&lt;/em>ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ä¸åŒçš„å‡½æ•°ä½“æ ¹æ®ä¸åŒçš„å‚æ•°æ¥è¿è¡Œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¤šä¹‰æ€§å‡½æ•°å®šä¹‰çš„ä¸€èˆ¬æ–¹å¼ã€‚è¯·æ³¨æ„ï¼Œæ¯ä¸ªæ•°ä½å®šä¹‰éƒ½è¢«æ‹¬åœ¨æ‹¬å·é‡Œï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå‚æ•°åˆ—è¡¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn multi-arity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ;; 3-arity arguments and body
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([first-arg second-arg third-arg]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do-things first-arg second-arg third-arg))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ;; 2-arity arguments and body
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([first-arg second-arg]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do-things first-arg second-arg))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ;; 1-arity arguments and body
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([first-arg]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (do-things first-arg)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡½æ•°å‚æ•°é‡è½½æ˜¯ä¸ºå‚æ•°æä¾›é»˜è®¤å€¼çš„ä¸€ç§æ–¹æ³•ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ&lt;code>&amp;quot;karate&amp;quot;&lt;/code>æ˜¯&lt;code>chop-type&lt;/code>å‚æ•°çš„é»˜è®¤å‚æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn x-chop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Describe the kind of chop you&amp;#39;re inflicting on someone&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([name chop-type]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;I &amp;#34; chop-type &amp;#34; chop &amp;#34; name &amp;#34;! Take that!&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([name]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (x-chop name &amp;#34;karate&amp;#34;)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ç”¨ä¸¤ä¸ªå‚æ•°è°ƒç”¨&lt;code>x-chop&lt;/code>ï¼Œè¯¥å‡½æ•°çš„å·¥ä½œåŸç†å’Œå®ƒä¸æ˜¯ä¸€ä¸ªå¤šä¹‰æ€§å‡½æ•°æ—¶ä¸€æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(x-chop &amp;#34;Kanye West&amp;#34; &amp;#34;slap&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;I slap chop Kanye West! Take that!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/do-things/kanye.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>å¦‚æœä½ è°ƒç”¨&lt;code>x-chop&lt;/code>æ—¶åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œ&lt;code>x-chop&lt;/code>å®é™…ä¸Šä¼šåœ¨æä¾›ç¬¬äºŒä¸ªå‚æ•°&lt;code>karate&lt;/code>æ—¶è°ƒç”¨è‡ªå·±ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(x-chop &amp;#34;Kanye East&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;I karate chop Kanye East! Take that!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åƒè¿™æ ·ç”¨å‡½æ•°æœ¬èº«æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¯èƒ½æ˜¾å¾—ä¸å¯»å¸¸ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£å°±å¥½äº†! ä½ æ­£åœ¨å­¦ä¹ ä¸€ç§æ–°çš„æ–¹æ³•æ¥åšäº‹!&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥è®©æ¯ç§å‡½æ•°åšä¸€äº›å®Œå…¨ä¸ç›¸å…³çš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn weird-arity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Destiny dressed you this morning, my friend, and now Fear is
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> trying to pull off your pants. If you give up, if you give in,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> you&amp;#39;re gonna end up naked with Fear just standing there laughing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at your dangling unmentionables! - the Tick&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ([number]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (inc number)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>0-arity ä¸»ä½“è¿”å›ä¸€ä¸ªæ˜æ™ºçš„å¼•å·ï¼Œ1-arity ä¸»ä½“å¢åŠ ä¸€ä¸ªæ•°å­—ã€‚æœ€æœ‰å¯èƒ½çš„æ˜¯ï¼Œä½ ä¸ä¼šæƒ³å†™ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªå®Œå…¨ä¸ç›¸å…³çš„å‡½æ•°ä½“ä¼šè®©äººå›°æƒ‘ã€‚&lt;/p>
&lt;p>Clojure è¿˜å…è®¸ä½ é€šè¿‡åŒ…æ‹¬ä¸€ä¸ª&lt;em>å¯å˜å‚æ•°&lt;/em>æ¥å®šä¹‰å‡½æ•°ï¼Œå°±åƒ &amp;ldquo;æŠŠè¿™äº›å‚æ•°çš„å…¶ä½™éƒ¨åˆ†æ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œåç§°å¦‚ä¸‹&amp;rdquo;ã€‚å¯å˜å‚æ•°ç”¨å®‰åŸ¹å·ï¼ˆ&lt;code>&amp;amp;&lt;/code>ï¼‰è¡¨ç¤ºï¼Œå¦‚âŠæ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/do-things/old-man.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn codger-communication
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [whippersnapper]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;Get off my lawn, &amp;#34; whippersnapper &amp;#34;!!!&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn codger
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ [&amp;amp; whippersnappers]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (map codger-communication whippersnappers))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(codger &amp;#34;Billy&amp;#34; &amp;#34;Anne-Marie&amp;#34; &amp;#34;The Incredible Bulk&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Get off my lawn, Billy!!!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Get off my lawn, Anne-Marie!!!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Get off my lawn, The Incredible Bulk!!!&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå½“ä½ ä¸ºå˜é‡æ€§è´¨çš„å‡½æ•°æä¾›å‚æ•°æ—¶ï¼Œå‚æ•°è¢«å½“ä½œä¸€ä¸ªåˆ—è¡¨æ¥å¤„ç†ã€‚ä½ å¯ä»¥æŠŠå¯å˜å‚æ•°å’Œæ™®é€šå‚æ•°æ··åœ¨ä¸€èµ·ï¼Œä½†å¯å˜å‚æ•°å¿…é¡»æ”¾åœ¨æœ€åã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn favorite-things
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [name &amp;amp; things]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (str &amp;#34;Hi, &amp;#34; name &amp;#34;, here are my favorite things: &amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (clojure.string/join &amp;#34;, &amp;#34; things)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(favorite-things &amp;#34;Doreen&amp;#34; &amp;#34;gum&amp;#34; &amp;#34;shoes&amp;#34; &amp;#34;kara-te&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Hi, Doreen, here are my favorite things: gum, shoes, kara-te&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åï¼ŒClojure æœ‰ä¸€ç§æ›´å¤æ‚çš„å®šä¹‰å‚æ•°çš„æ–¹æ³•ï¼Œå«åš&lt;em>è§£æ„&lt;/em>ï¼Œè¿™å€¼å¾—æœ‰è‡ªå·±çš„å°èŠ‚ã€‚&lt;/p>
&lt;h4 id="è§£æ„">è§£æ„&lt;/h4>
&lt;p>è§£æ„çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨ä¸€ä¸ªé›†åˆä¸­ç®€æ´åœ°å°†åå­—ä¸å€¼ç»‘å®šã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªåŸºæœ¬çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">;; Return the first element of a collection
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn my-first
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [[first-thing]] ; Notice that first-thing is within a vector
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> first-thing)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(my-first [&amp;#34;oven&amp;#34; &amp;#34;bike&amp;#34; &amp;#34;war-axe&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;oven&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œ&lt;code>my-first&lt;/code>å‡½æ•°å°†ç¬¦å·&lt;code>first-thing&lt;/code>ä¸ä½œä¸ºå‚æ•°ä¼ å…¥çš„ Vector ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ è”ç³»èµ·æ¥ã€‚ä½ å‘Šè¯‰&lt;code>my-first&lt;/code>è¿™æ ·åšï¼Œå°±æ˜¯æŠŠç¬¦å·&lt;code>first-thing&lt;/code>æ”¾åœ¨ä¸€ä¸ª Vector ä¸­ã€‚&lt;/p>
&lt;p>Vector å°±åƒä¸€ä¸ªå·¨å¤§çš„ç‰Œå­ï¼Œå¯¹ Clojure è¯´ï¼š&amp;ldquo;å˜¿ï¼è¿™ä¸ªå‡½æ•°å°†æ”¶åˆ°ä¸€ä¸ªåˆ—è¡¨æˆ– Vector ä½œä¸ºå‚æ•°ã€‚è®©æˆ‘çš„ç”Ÿæ´»æ›´è½»æ¾ï¼Œä¸ºæˆ‘æ‹†å¼€å‚æ•°çš„ç»“æ„ï¼Œå¹¶å°†æœ‰æ„ä¹‰çš„åå­—ä¸å‚æ•°çš„ä¸åŒéƒ¨åˆ†è”ç³»èµ·æ¥ï¼&amp;rdquo; å½“å¯¹ä¸€ä¸ª Vector æˆ–åˆ—è¡¨è¿›è¡Œè§£æ„æ—¶ï¼Œä½ å¯ä»¥éšæ„å‘½åä½ æƒ³è¦çš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å‚æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn chooser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [[first-choice second-choice &amp;amp; unimportant-choices]]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str &amp;#34;Your first choice is: &amp;#34; first-choice))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str &amp;#34;Your second choice is: &amp;#34; second-choice))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str &amp;#34;We&amp;#39;re ignoring the rest of your choices. &amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Here they are in case you need to cry over them: &amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (clojure.string/join &amp;#34;, &amp;#34; unimportant-choices))))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(chooser [&amp;#34;Marmalade&amp;#34;, &amp;#34;Handsome Jack&amp;#34;, &amp;#34;Pigpen&amp;#34;, &amp;#34;Aquaman&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Your first choice is: Marmalade
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Your second choice is: Handsome Jack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; We&amp;#39;re ignoring the rest of your choices. Here they are in case \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> you need to cry over them: Pigpen, Aquaman
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œå…¶ä½™çš„å‚æ•°&lt;code>unimportant``-choices&lt;/code>å¤„ç†ç”¨æˆ·åœ¨ç¬¬ä¸€å’Œç¬¬äºŒé€‰æ‹©ä¹‹åçš„ä»»ä½•æ•°é‡çš„é¢å¤–é€‰æ‹©ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥å¯¹ Map è¿›è¡Œå»ç»“æ„åŒ–ã€‚å°±åƒä½ å‘Šè¯‰ Clojure é€šè¿‡æä¾›ä¸€ä¸ª Vector ä½œä¸ºå‚æ•°æ¥è§£é™¤ Vector æˆ–åˆ—è¡¨çš„ç»“æ„ä¸€æ ·ï¼Œä½ å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ª Map ä½œä¸ºå‚æ•°æ¥è§£é™¤ Map çš„ç»“æ„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn announce-treasure-location
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">âŠ [{lat :lat lng :lng}]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str &amp;#34;Treasure lat: &amp;#34; lat))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str &amp;#34;Treasure lng: &amp;#34; lng)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(announce-treasure-location {:lat 28.22 :lng 81.33})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Treasure lat: 28.22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; Treasure lng: 81.33
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°çœ‹çœ‹âŠçš„é‚£ä¸€è¡Œã€‚è¿™å°±åƒå‘Šè¯‰ Clojureï¼Œ&amp;ldquo;å“Ÿï¼Clojure! ä¸ºæˆ‘åšä¸€ä»¶äº‹ï¼ŒæŠŠ&lt;code>lat&lt;/code>è¿™ä¸ªåå­—ä¸é”®&lt;code>:lat&lt;/code>å¯¹åº”çš„å€¼è”ç³»èµ·æ¥ã€‚å¯¹&lt;code>lng&lt;/code>å’Œ&lt;code>:lng&lt;/code>åšåŒæ ·çš„äº‹æƒ…ï¼Œå¥½å—ï¼Ÿ&amp;rdquo;&lt;/p>
&lt;p>æˆ‘ä»¬ç»å¸¸æƒ³ç›´æ¥æŠŠå…³é”®è¯ä» Map ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªæ›´çŸ­çš„è¯­æ³•ã€‚è¿™å’Œå‰é¢çš„ä¾‹å­æœ‰ç›¸åŒçš„ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn announce-treasure-location
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [{:keys [lat lng]}] ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str &amp;#34;Treasure lat: &amp;#34; lat))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str &amp;#34;Treasure lng: &amp;#34; lng)))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨&lt;code>:as&lt;/code>å…³é”®å­—ä¿ç•™å¯¹åŸå§‹ Map å‚æ•°çš„è®¿é—®ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒåŸå§‹ Map æ˜¯ç”¨&lt;code>treasure-location&lt;/code>æ¥è®¿é—®çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn receive-treasure-location
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [{:keys [lat lng] :as treasure-location}]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str &amp;#34;Treasure lat: &amp;#34; lat))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (println (str &amp;#34;Treasure lng: &amp;#34; lng))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ;; One would assume that this would put in new coordinates for your ship
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (steer-ship! treasure-location))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸€èˆ¬æ¥è¯´ï¼Œä½ å¯ä»¥æŠŠè§£æ„çœ‹ä½œæ˜¯æŒ‡ç¤º Clojure å¦‚ä½•å°†åå­—ä¸åˆ—è¡¨ã€Mapã€é›†åˆæˆ– Vector ä¸­çš„å€¼è”ç³»èµ·æ¥ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å‡½æ•°ä¸­çœŸæ­£èµ·ä½œç”¨çš„éƒ¨åˆ†ï¼šå‡½æ•°ä½“!&lt;/p>
&lt;h4 id="å‡½æ•°ä½“">å‡½æ•°ä½“&lt;/h4>
&lt;p>å‡½æ•°ä¸»ä½“å¯ä»¥åŒ…å«ä»»ä½• Form çš„ Formã€‚Clojure ä¼šè‡ªåŠ¨è¿”å›æœ€åæ±‚å€¼çš„ Formã€‚è¿™ä¸ªå‡½æ•°ä½“åªåŒ…å«ä¸‰ç§ Formï¼Œå½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒä¼šåå‡ºæœ€åä¸€ç§ Formï¼Œ&lt;code>&amp;quot;joe&amp;quot;&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn illustrative-function
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> []
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (+ 1 304)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 30
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;joe&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(exstrative-function)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;joe&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå‡½æ•°ä½“ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ª&lt;code>if&lt;/code>è¡¨è¾¾å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn number-comment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [x]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (&amp;gt; x 6)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Oh my gosh! What a big number!&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;That number&amp;#39;s OK, I guess&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(number-comment 5)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;That number&amp;#39;s OK, I guess&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(number-comment 7)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;Oh my gosh! What a big number!&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="æ‰€æœ‰å‡½æ•°éƒ½æ˜¯å¹³ç­‰çš„">æ‰€æœ‰å‡½æ•°éƒ½æ˜¯å¹³ç­‰çš„&lt;/h4>
&lt;p>æœ€åè¯´æ˜ä¸€ä¸‹ï¼šClojure æ²¡æœ‰ç‰¹æƒå‡½æ•°ã€‚&lt;code>+&lt;/code>åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>-&lt;/code>åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œ&lt;code>inc&lt;/code>å’Œ&lt;code>map&lt;/code>ä¹Ÿåªæ˜¯å‡½æ•°ã€‚å®ƒä»¬å¹¶ä¸æ¯”ä½ è‡ªå·±å®šä¹‰çš„å‡½æ•°å¥½ã€‚æ‰€ä»¥ï¼Œä¸è¦è®©ä»–ä»¬ç»™ä½ ä»»ä½•å£å®!&lt;/p>
&lt;p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªäº‹å®æœ‰åŠ©äºè¯æ˜ Clojure çš„åº•å±‚ç®€å•æ€§ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼ŒClojure æ˜¯éå¸¸æ„šè ¢çš„ã€‚å½“ä½ è¿›è¡Œå‡½æ•°è°ƒç”¨æ—¶ï¼ŒClojure åªæ˜¯è¯´ï¼Œ&amp;quot;&lt;code>map&lt;/code>ï¼Ÿå½“ç„¶ï¼Œä¸ç®¡æ€æ ·! æˆ‘åªæ˜¯åº”ç”¨è¿™ä¸ªå¹¶ç»§ç»­å‰è¿›&amp;rdquo;ã€‚å®ƒå¹¶ä¸å…³å¿ƒè¿™ä¸ªå‡½æ•°æ˜¯ä»€ä¹ˆï¼Œæˆ–è€…å®ƒæ¥è‡ªå“ªé‡Œï¼›å®ƒå¯¹æ‰€æœ‰çš„å‡½æ•°éƒ½ä¸€è§†åŒä»ã€‚åœ¨å®ƒçš„æ ¸å¿ƒï¼ŒClojure å¹¶ä¸å…³å¿ƒåŠ æ³•ã€ä¹˜æ³•æˆ– Map çš„é—®é¢˜ã€‚å®ƒåªå…³å¿ƒå‡½æ•°çš„åº”ç”¨ã€‚&lt;/p>
&lt;p>å½“ä½ ç»§ç»­ç”¨ Clojure ç¼–ç¨‹æ—¶ï¼Œä½ ä¼šå‘ç°è¿™ç§ç®€å•æ€§æ˜¯å¾ˆç†æƒ³çš„ã€‚ä½ ä¸å¿…ä¸ºå¤„ç†ä¸åŒçš„å‡½æ•°è€Œæ‹…å¿ƒç‰¹æ®Šçš„è§„åˆ™æˆ–è¯­æ³•ã€‚å®ƒä»¬çš„å·¥ä½œåŸç†éƒ½æ˜¯ä¸€æ ·çš„!&lt;/p>
&lt;h3 id="åŒ¿åå‡½æ•°">åŒ¿åå‡½æ•°&lt;/h3>
&lt;p>åœ¨ Clojure ä¸­ï¼Œå‡½æ•°ä¸éœ€è¦æœ‰åå­—ã€‚äº‹å®ä¸Šï¼Œä½ ä¼šä¸€ç›´ä½¿ç”¨&lt;em>åŒ¿åå‡½æ•°&lt;/em>ã€‚å¤šä¹ˆç¥ç§˜å•Š! ä½ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼åˆ›å»ºåŒ¿åå‡½æ•°ã€‚ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨&lt;code>fn&lt;/code>Formã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(fn [param-list]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function body)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœ‹èµ·æ¥å¾ˆåƒ&lt;code>defn&lt;/code>ï¼Œä¸æ˜¯å—ï¼Ÿè®©æˆ‘ä»¬è¯•ä¸€è¯•å‡ ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(map (fn [name] (str &amp;#34;Hi, &amp;#34; name))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;#34;Darth Vader&amp;#34; &amp;#34;Mr. Magoo&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Hi, Darth Vader&amp;#34; &amp;#34;Hi, Mr. Magoo&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">((fn [x] (* x 3)) 8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å¯ä»¥ç”¨å¤„ç†&lt;code>fn&lt;/code>çš„æ–¹å¼æ¥å¤„ç†&lt;code>defn&lt;/code>ï¼Œè¿™å‡ ä¹æ˜¯ç›¸åŒçš„ã€‚å‚æ•°åˆ—è¡¨å’Œå‡½æ•°ä½“çš„å·¥ä½œåŸç†å®Œå…¨ç›¸åŒã€‚ä½ å¯ä»¥ä½¿ç”¨å‚æ•°è§£æ„ï¼Œå¯å˜å‚æ•°ï¼Œç­‰ç­‰ã€‚ä½ ç”šè‡³å¯ä»¥å°†ä½ çš„åŒ¿åå‡½æ•°ä¸ä¸€ä¸ªåå­—è”ç³»èµ·æ¥ï¼Œè¿™ä¸åº”è¯¥æ˜¯ä¸€ä¸ªæƒŠå–œï¼ˆå¦‚æœè¿™ç¡®å®æ˜¯ä¸€ä¸ªæƒŠå–œï¼Œé‚£ä¹ˆ &amp;hellip; &amp;hellip; æƒŠå–œï¼ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def my-special-multiplier (fn [x] (* x 3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(my-special-multiplier 12)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 36
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Clojure è¿˜æä¾›äº†å¦ä¸€ç§æ›´ç´§å‡‘çš„æ–¹å¼æ¥åˆ›å»ºåŒ¿åå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°çš„æ ·å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#(* % 3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å“‡ï¼Œè¿™çœ‹èµ·æ¥å¾ˆå¥‡æ€ªã€‚æ¥å§ï¼Œåº”ç”¨è¿™ä¸ªçœ‹èµ·æ¥å¾ˆå¥‡æ€ªçš„å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(#(* % 3) 8)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªå°†åŒ¿åå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ map çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(map #(str &amp;#34;Hi, &amp;#34; %)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;#34;Darth Vader&amp;#34; &amp;#34;Mr. Magoo&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Hi, Darth Vader&amp;#34; &amp;#34;Hi, Mr. Magoo&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ç§çœ‹èµ·æ¥å¾ˆå¥‡æ€ªçš„åŒ¿åå‡½æ•°çš„ç¼–å†™æ–¹å¼æ˜¯ç”±ä¸€ä¸ªå«åš&lt;em>reader**macros&lt;/em>çš„å‡½æ•°å®ç°çš„ã€‚ä½ ä¼šåœ¨ç¬¬ 7 ç« ä¸­äº†è§£åˆ°è¿™äº›ã€‚ç°åœ¨ï¼Œåªå­¦ä¹ å¦‚ä½•ä½¿ç”¨è¿™äº›åŒ¿åå‡½æ•°å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§è¯­æ³•è‚¯å®šæ›´ç´§å‡‘ï¼Œä½†ä¹Ÿæœ‰ç‚¹å¥‡æ€ªã€‚è®©æˆ‘ä»¬æŠŠå®ƒåˆ†è§£ä¸€ä¸‹ã€‚è¿™ç§åŒ¿åå‡½æ•°çœ‹èµ·æ¥å¾ˆåƒå‡½æ•°è°ƒç”¨ï¼Œåªæ˜¯å®ƒå‰é¢æœ‰ä¸€ä¸ªå“ˆå¸Œæ ‡è®°ï¼Œ&lt;code>#&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">;; Function call
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(* 8 3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">;; Anonymous function
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#(* % 3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ç§ç›¸ä¼¼æ€§ä½¿ä½ èƒ½æ›´å¿«åœ°çœ‹åˆ°åº”ç”¨è¿™ä¸ªåŒ¿åå‡½æ•°æ—¶å°†å‘ç”Ÿä»€ä¹ˆã€‚&amp;ldquo;å“¦ï¼Œ&amp;ldquo;ä½ å¯ä»¥å¯¹è‡ªå·±è¯´ï¼Œ&amp;ldquo;è¿™æ˜¯è¦æŠŠå®ƒçš„å‚æ•°ä¹˜ä»¥ 3&amp;rdquo;ã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†ï¼Œç™¾åˆ†å·&lt;code>%&lt;/code>ï¼Œè¡¨ç¤ºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚å¦‚æœä½ çš„åŒ¿åå‡½æ•°éœ€è¦å¤šä¸ªå‚æ•°ï¼Œä½ å¯ä»¥åƒè¿™æ ·åŒºåˆ†å®ƒä»¬ã€‚&lt;code>%1&lt;/code>, &lt;code>%2&lt;/code>, &lt;code>%3&lt;/code>, ä»¥æ­¤ç±»æ¨ã€‚&lt;code>%&lt;/code>ç›¸å½“äº&lt;code>%1&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(#(str %1 &amp;#34; and &amp;#34; %2) &amp;#34;cornbread&amp;#34; &amp;#34;butter beans&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; &amp;#34;cornbread and butter beans&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¹Ÿå¯ä»¥ç”¨&lt;code>%&amp;amp;&lt;/code>ä¼ é€’å…¶ä½™å‚æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(#(identity %&amp;amp;) 1 &amp;#34;blarg&amp;#34; :yip)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (1 &amp;#34;blarg&amp;#34; :yip)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å°†èº«ä»½å‡½æ•°åº”ç”¨äºå…¶ä½™å‚æ•°ã€‚Identity è¿”å›å®ƒæ‰€ç»™çš„å‚æ•°è€Œä¸æ”¹å˜å®ƒã€‚å¯å˜å‚æ•°æ˜¯ä»¥åˆ—è¡¨ Form å­˜å‚¨çš„ï¼Œæ‰€ä»¥å‡½æ•°åº”ç”¨è¿”å›æ‰€æœ‰å‚æ•°çš„åˆ—è¡¨ã€‚&lt;/p>
&lt;p>å¦‚æœä½ éœ€è¦å†™ä¸€ä¸ªç®€å•çš„åŒ¿åå‡½æ•°ï¼Œä½¿ç”¨è¿™ç§é£æ ¼æ˜¯æœ€å¥½çš„ï¼Œå› ä¸ºå®ƒåœ¨è§†è§‰ä¸Šå¾ˆç´§å‡‘ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ è¦å†™ä¸€ä¸ªæ›´é•¿ã€æ›´å¤æ‚çš„å‡½æ•°ï¼Œå®ƒå¾ˆå®¹æ˜“å˜å¾—ä¸å¯è¯»ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œè¯·ä½¿ç”¨&lt;code>fn&lt;/code>ã€‚&lt;/p>
&lt;h3 id="è¿”å›å‡½æ•°">è¿”å›å‡½æ•°&lt;/h3>
&lt;p>ç°åœ¨ä½ å·²ç»çœ‹åˆ°ï¼Œå‡½æ•°å¯ä»¥è¿”å›å…¶ä»–å‡½æ•°ã€‚è¿”å›çš„å‡½æ•°æ˜¯&lt;em>closures&lt;/em>ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥è®¿é—®å‡½æ•°åˆ›å»ºæ—¶çš„ä½œç”¨åŸŸå†…çš„æ‰€æœ‰å˜é‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn inc-maker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Create a custom incrementor&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [inc-by]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #(+ % inc-by))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def inc3 (inc-maker 3))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(inc3 7)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œ&lt;code>inc-by&lt;/code>åœ¨ä½œç”¨åŸŸå†…ï¼Œæ‰€ä»¥å³ä½¿è¿”å›çš„å‡½æ•°åœ¨&lt;code>inc-maker&lt;/code>ä¹‹å¤–ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è®¿é—®å®ƒã€‚&lt;/p>
&lt;h2 id="æŠŠè¿™ä¸€åˆ‡æ”¾åˆ°ä¸€èµ·">æŠŠè¿™ä¸€åˆ‡æ”¾åˆ°ä¸€èµ·&lt;/h2>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/do-things/model-hobbit.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>å¥½äº†! æ˜¯æ—¶å€™æŠŠä½ æ–°å‘ç°çš„çŸ¥è¯†ç”¨äºä¸€ä¸ªå´‡é«˜çš„ç›®çš„äº†ï¼šæ‰“å€’éœæ¯”ç‰¹äºº! è¦æ‰“ä¸€ä¸ªéœæ¯”ç‰¹äººï¼Œä½ é¦–å…ˆè¦å»ºç«‹å®ƒçš„èº«ä½“éƒ¨ä½æ¨¡å‹ã€‚æ¯ä¸ªèº«ä½“éƒ¨ä½éƒ½å°†åŒ…æ‹¬å…¶ç›¸å¯¹å¤§å°ï¼Œä»¥è¡¨æ˜è¯¥éƒ¨ä½è¢«å‡»ä¸­çš„å¯èƒ½æ€§æœ‰å¤šå¤§ã€‚ä¸ºäº†é¿å…é‡å¤ï¼Œéœæ¯”ç‰¹äººçš„æ¨¡å‹å°†åªåŒ…æ‹¬&lt;em>å·¦è„š&lt;/em>ï¼Œ&lt;em>å·¦è€³&lt;/em>çš„æ¡ç›®ï¼Œä»¥æ­¤ç±»æ¨ã€‚å› æ­¤ï¼Œä½ éœ€è¦ä¸€ä¸ªå‡½æ•°æ¥å®Œå…¨å¯¹ç§°è¯¥æ¨¡å‹ï¼Œåˆ›å»º&lt;em>å³è„š&lt;/em>ï¼Œ&lt;em>å³è€³&lt;/em>ï¼Œç­‰ç­‰ã€‚æœ€åï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¿­ä»£èº«ä½“å„éƒ¨åˆ†ï¼Œå¹¶éšæœºé€‰æ‹©å‡»ä¸­çš„éƒ¨åˆ†ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œä½ å°†äº†è§£åˆ°ä¸€äº›æ–°çš„ Clojure å·¥å…·ã€‚&lt;code>let&lt;/code>è¡¨è¾¾å¼ï¼Œå¾ªç¯ï¼Œå’Œæ­£åˆ™è¡¨è¾¾å¼ã€‚æœ‰è¶£!&lt;/p>
&lt;h3 id="å¤å°”çš„ä¸‹ä¸€ä¸ªé¡¶çº§æ¨¡å‹">å¤å°”çš„ä¸‹ä¸€ä¸ªé¡¶çº§æ¨¡å‹&lt;/h3>
&lt;p>å¯¹äºæˆ‘ä»¬çš„éœæ¯”ç‰¹äººæ¨¡å‹ï¼Œæˆ‘ä»¬å°†é¿å¼€éœæ¯”ç‰¹äººçš„ç‰¹å¾ï¼Œå¦‚æ´»æ³¼å’Œè°ƒçš®ï¼Œåªå…³æ³¨éœæ¯”ç‰¹äººçš„å°èº«æ¿ã€‚ä¸‹é¢æ˜¯éœæ¯”ç‰¹äººçš„æ¨¡å‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def asym-hobbit-body-parts [{:name &amp;#34;head&amp;#34; :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-eye&amp;#34; :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-ear&amp;#34; :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;mouth&amp;#34; :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;nose&amp;#34; :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;neck&amp;#34; :size 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-shoulder&amp;#34; :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-upper-arm&amp;#34; :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;chest&amp;#34; :size 10}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;back&amp;#34; :size 10}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-forearm&amp;#34; :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;abdomen&amp;#34; :size 6}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-kidney&amp;#34; :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-hand&amp;#34; :size 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-knee&amp;#34; :size 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-thigh&amp;#34; :size 4}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-lower-leg&amp;#34; :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-achilles&amp;#34; :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-foot&amp;#34; :size 2}])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ˜¯ä¸€ä¸ª Map çš„ Vectorã€‚æ¯ä¸ª Map éƒ½æœ‰èº«ä½“éƒ¨ä½çš„åç§°å’Œèº«ä½“éƒ¨ä½çš„ç›¸å¯¹å¤§å°ã€‚(æˆ‘çŸ¥é“åªæœ‰åŠ¨æ¼«äººç‰©çš„çœ¼ç›æ˜¯å¤´éƒ¨çš„ä¸‰åˆ†ä¹‹ä¸€å¤§å°ï¼Œä½†å°±è¿™æ ·å§ï¼Œå¥½å—ï¼Ÿ)&lt;/p>
&lt;p>æ˜æ˜¾ç¼ºå°‘çš„æ˜¯éœæ¯”ç‰¹äººçš„å³ä¾§ã€‚è®©æˆ‘ä»¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¸…å• 3-1 æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ä½ çœ‹åˆ°çš„æœ€å¤æ‚çš„ä»£ç ï¼Œå®ƒå¼•å…¥äº†ä¸€äº›æ–°çš„æƒ³æ³•ã€‚ä½†æ˜¯ä¸è¦æ‹…å¿ƒï¼Œå› ä¸ºæˆ‘ä»¬å°†è¯¦ç»†åœ°ç ”ç©¶å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(defn matching-part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [part]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name (clojure.string/replace (:name part) #&amp;#34;^left-&amp;#34; &amp;#34;right-&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> :size (:size part)})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(defn symmetrize-body-parts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;Expects a seq of maps that have a :name and :size&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [asym-body-parts]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (loop [remaining-asym-parts asym-body-parts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> final-body-parts []]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (if (empty? remaining-asym-parts)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> final-body-parts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (let [[part &amp;amp; remaining] remaining-asym-parts]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (recur remaining
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (into final-body-parts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (set [part (matching-part part)])))))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>3-1. åŒ¹é…-éƒ¨åˆ†å’Œå¯¹ç§°-èº«ä½“-éƒ¨åˆ†çš„å‡½æ•°&lt;/li>
&lt;/ol>
&lt;p>å½“æˆ‘ä»¬å¯¹&lt;code>asym-hobbit-body-parts&lt;/code>è°ƒç”¨å‡½æ•°&lt;code>symmetriz-body-parts&lt;/code>æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªå®Œå…¨å¯¹ç§°çš„éœæ¯”ç‰¹äººã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(symmetrize-body-parts asym-hobbit-body-parts)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [{:name &amp;#34;head&amp;#34;, :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-eye&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-eye&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-ear&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-ear&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;mouth&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;nose&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;neck&amp;#34;, :size 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-shoulder&amp;#34;, :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-shoulder&amp;#34;, :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-upper-arm&amp;#34;, :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-upper-arm&amp;#34;, :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;chest&amp;#34;, :size 10}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;back&amp;#34;, :size 10}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-forearm&amp;#34;, :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-forearm&amp;#34;, :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;abdomen&amp;#34;, :size 6}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-kidney&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-kidney&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-hand&amp;#34;, :size 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-hand&amp;#34;, :size 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-knee&amp;#34;, :size 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-knee&amp;#34;, :size 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-thigh&amp;#34;, :size 4}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-thigh&amp;#34;, :size 4}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-lower-leg&amp;#34;, :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-lower-leg&amp;#34;, :size 3}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-achilles&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-achilles&amp;#34;, :size 1}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;left-foot&amp;#34;, :size 2}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {:name &amp;#34;right-foot&amp;#34;, :size 2}]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™æ®µä»£ç !&lt;/p>
&lt;h3 id="let">let&lt;/h3>
&lt;p>åœ¨æ¸…å• 3-1 çš„å¤§é‡ç–¯ç‹‚ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ç»“æ„&lt;code>(let ...)&lt;/code>çš„ Formã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥å»ºç«‹å¯¹&lt;code>let&lt;/code>çš„ç†è§£ï¼Œå½“æˆ‘ä»¬ç†Ÿæ‚‰äº†æ‰€æœ‰çš„éƒ¨åˆ†åï¼Œå†æ¥æ£€æŸ¥ç¨‹åºä¸­çš„å®Œæ•´ä¾‹å­ã€‚&lt;/p>
&lt;p>&lt;code>let&lt;/code>å°†åå­—ä¸å€¼ç»‘å®šã€‚ä½ å¯ä»¥è®¤ä¸º&lt;code>let&lt;/code>æ˜¯&lt;em>let&lt;/em> &lt;em>it&lt;/em> &lt;em>be&lt;/em>çš„ç¼©å†™ï¼Œè¿™ä¹Ÿæ˜¯æŠ«å¤´å£«ä¹é˜Ÿå…³äºç¼–ç¨‹çš„ä¸€é¦–ä¼˜ç¾çš„æ­Œæ›²ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [x 3]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> x)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(def dalmatian-list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [&amp;#34;Pongo&amp;#34; &amp;#34;Perdita&amp;#34; &amp;#34;Puppy 1&amp;#34; &amp;#34;Puppy 2&amp;#34;])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(let [dalmatians (take 2 dalmatian-list)]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dalmatians)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; (&amp;#34;Pongo&amp;#34; &amp;#34;Perdita&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä½ å°†åå­—&lt;code>x&lt;/code>ä¸å€¼&lt;code>3&lt;/code>ç»‘å®šã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œä½ æŠŠåå­—&lt;code>dalmatians&lt;/code>ç»‘å®šåˆ°è¡¨è¾¾å¼&lt;code>(å–2&lt;/code>dalmatian&lt;code>-list)&lt;/code>çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯åˆ—è¡¨&lt;code>(&amp;quot;Pongo&amp;quot; &amp;quot;Perdita&amp;quot;)&lt;/code>ã€‚&lt;code>let&lt;/code>è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def x 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(let [x 1] x)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œï¼Œä½ é¦–å…ˆä½¿ç”¨&lt;code>def&lt;/code>å°†åå­—&lt;code>x&lt;/code>ç»‘å®šåˆ°å€¼&lt;code>0&lt;/code>ä¸Šã€‚ç„¶åï¼Œ&lt;code>let&lt;/code>åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­ï¼Œåå­—&lt;code>x&lt;/code>è¢«ç»‘å®šåˆ°å€¼&lt;code>1&lt;/code>ä¸Šã€‚æˆ‘è®¤ä¸ºä½œç”¨åŸŸå–å†³äºä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ &amp;ldquo;è¯·æ¸…ç†è¿™äº›çƒŸå¤´ &amp;ldquo;è¿™å¥è¯ä¸­ï¼Œ&lt;em>çƒŸå¤´&lt;/em>çš„å«ä¹‰æ˜¯ä¸åŒçš„ï¼Œè¿™å–å†³äºä½ æ˜¯åœ¨äº§ç§‘ç—…æˆ¿å·¥ä½œè¿˜æ˜¯åœ¨é¦™çƒŸåˆ¶é€ å•†å¤§ä¼šçš„ç›‘ç®¡äººå‘˜å·¥ä½œã€‚åœ¨è¿™ä¸ªä»£ç ç‰‡æ®µä¸­ï¼Œä½ åœ¨è¯´ï¼š&amp;ldquo;æˆ‘å¸Œæœ›&lt;code>x&lt;/code>åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­æ˜¯&lt;code>0&lt;/code>ï¼Œä½†åœ¨è¿™ä¸ª&lt;code>let&lt;/code>è¡¨è¾¾å¼çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå®ƒåº”è¯¥æ˜¯&lt;code>1&lt;/code>ã€‚&amp;rdquo;&lt;/p>
&lt;p>ä½ å¯ä»¥åœ¨ä½ çš„&lt;code>let&lt;/code>ç»‘å®šä¸­å¼•ç”¨ç°æœ‰çš„ç»‘å®šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(def x 0)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(let [x (inc x)] x)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>(inc x)&lt;/code>ä¸­çš„&lt;code>x&lt;/code>æ˜¯æŒ‡ç”±&lt;code>(def x 0)&lt;/code>åˆ›å»ºçš„ç»‘å®šã€‚ç»“æœæ˜¯&lt;code>1&lt;/code>ï¼Œç„¶ååœ¨&lt;code>let&lt;/code>åˆ›å»ºçš„æ–°ä½œç”¨åŸŸä¸­ä¸åç§°&lt;code>x&lt;/code>ç»‘å®šã€‚åœ¨&lt;code>let&lt;/code>Form çš„ä½œç”¨åŸŸå†…ï¼Œ&lt;code>x&lt;/code>æŒ‡çš„æ˜¯&lt;code>1&lt;/code>ï¼Œè€Œä¸æ˜¯&lt;code>0&lt;/code>ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥åœ¨&lt;code>let&lt;/code>ä¸­ä½¿ç”¨å¯å˜å‚æ•°ï¼Œå°±åƒä½ åœ¨å‡½æ•°ä¸­ä¸€æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [[Pongo &amp;amp; dalmatians] dalmatian-list] [Pongo dalmatians])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [Pongo dalmatians])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [&amp;#34;Pongo&amp;#34; (&amp;#34;Perdita&amp;#34; &amp;#34;Puppy 1&amp;#34; &amp;#34;Puppy 2&amp;#34;) ]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„ï¼Œ&lt;code>let&lt;/code>Form çš„å€¼æ˜¯å…¶ä¸»ä½“ä¸­æœ€åè¢«æ±‚å€¼çš„ Formã€‚&lt;code>let&lt;/code>Form éµå¾ªæ‰€æœ‰åœ¨&lt;a class="link" href="https://www.braveclojure.com/do-things/#Anchor" target="_blank" rel="noopener"
>&amp;ldquo;è°ƒç”¨å‡½æ•°&amp;quot;ç¬¬ 48 é¡µ&lt;/a>ä¸­ä»‹ç»çš„ææ„è§„åˆ™ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code>[pongo &amp;amp; dalmatians]&lt;/code>è§£æ„äº†&lt;code>dalmatian-list&lt;/code>ï¼Œå°†å­—ç¬¦ä¸²&lt;code>&amp;quot;Pongo &amp;quot;ç»‘å®šåˆ°åç§°&lt;/code>pongo&lt;code>ä¸Šï¼Œå°†å…¶ä½™çš„dalmatiansåˆ—è¡¨ç»‘å®šåˆ°&lt;/code>dalmatians&lt;code>ä¸Šã€‚Vector&lt;/code>[pongo dalmatians]&lt;code>æ˜¯&lt;/code>let&lt;code>çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒæ˜¯&lt;/code>let`Form çš„å€¼ã€‚&lt;/p>
&lt;p>&lt;code>let&lt;/code>Form æœ‰ä¸¤ä¸ªä¸»è¦ç”¨é€”ã€‚é¦–å…ˆï¼Œå®ƒä»¬é€šè¿‡å…è®¸ä½ å¯¹äº‹ç‰©è¿›è¡Œå‘½åã€‚å…¶æ¬¡ï¼Œå®ƒä»¬å…è®¸ä½ åªæ±‚å€¼ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶é‡å¤ä½¿ç”¨å…¶ç»“æœã€‚å½“ä½ éœ€è¦é‡å¤ä½¿ç”¨ä¸€ä¸ªæ˜‚è´µçš„å‡½æ•°è°ƒç”¨çš„ç»“æœæ—¶ï¼Œè¿™ä¸€ç‚¹ç‰¹åˆ«é‡è¦ï¼Œæ¯”å¦‚ç½‘ç»œ API è°ƒç”¨ã€‚å½“è¡¨è¾¾å¼æœ‰å‰¯ä½œç”¨æ—¶ï¼Œè¿™ä¹Ÿå¾ˆé‡è¦ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬å†çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„å¯¹ç§°å‡½æ•°ä¸­çš„&lt;code>let&lt;/code>Formï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½æ˜ç™½åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(let [[part &amp;amp; remaining] remaining-asym-parts])
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (recur remaining
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (in into final-body-parts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (set [part (matching-part part part)]))))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ®µä»£ç å‘Šè¯‰ Clojureï¼Œ&amp;ldquo;åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸã€‚åœ¨å®ƒé‡Œé¢ï¼Œå°†&lt;code>part&lt;/code>ä¸&lt;code>remaining-asym-parts&lt;/code>çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸å…³è”ã€‚å°†&lt;code>remaining&lt;/code>ä¸&lt;code>remaining-asym-parts&lt;/code>ä¸­çš„å…¶ä»–å…ƒç´ è”ç³»èµ·æ¥&amp;rdquo;ã€‚&lt;/p>
&lt;p>è‡³äº&lt;code>let&lt;/code>è¡¨è¾¾å¼çš„ä¸»ä½“ï¼Œä½ å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­äº†è§£åˆ°&lt;code>recur&lt;/code>çš„å«ä¹‰ã€‚å‡½æ•°è°ƒç”¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(in into final-body-parts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (set [part (matching-part part part)] ))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆå‘Šè¯‰ Clojure, &amp;ldquo;ä½¿ç”¨&lt;code>set&lt;/code>å‡½æ•°åˆ›å»ºä¸€ä¸ªç”±&lt;code>part&lt;/code>å’Œå®ƒçš„åŒ¹é…éƒ¨åˆ†ç»„æˆçš„é›†åˆã€‚ç„¶åä½¿ç”¨å‡½æ•°&lt;code>into&lt;/code>å°†è¯¥é›†åˆçš„å…ƒç´ æ·»åŠ åˆ° Vector&lt;code>final-body-parts&lt;/code>ä¸­&amp;rdquo;ã€‚ä½ åœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ªé›†åˆï¼Œä»¥ç¡®ä¿ä½ å‘&lt;code>final-body-parts&lt;/code>æ·»åŠ å”¯ä¸€çš„å…ƒç´ ï¼Œå› ä¸º&lt;code>part&lt;/code>å’Œ&lt;code>(matching-part part)&lt;/code>æœ‰æ—¶æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œæ­£å¦‚ä½ å°†åœ¨æ¥ä¸‹æ¥çš„æ­£åˆ™è¡¨è¾¾å¼éƒ¨åˆ†çœ‹åˆ°çš„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€åŒ–çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(into [] (set [:a :a]))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">; =&amp;gt; [:a]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆï¼Œ&lt;code>(set [:a :a])&lt;/code>è¿”å›é›†åˆ&lt;code>#{:a}&lt;/code>ï¼Œå› ä¸ºé›†åˆä¸åŒ…å«é‡å¤çš„å…ƒç´ ã€‚ç„¶å&lt;code>(into [] #{:a})&lt;/code>è¿”å› Vector&lt;code>[:a]&lt;/code>ã€‚&lt;/p>
&lt;p>å›åˆ°&lt;code>let&lt;/code>ï¼šæ³¨æ„&lt;code>part&lt;/code>åœ¨&lt;code>let&lt;/code>çš„ä¸»ä½“ä¸­è¢«å¤šæ¬¡ä½¿ç”¨ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨åŸæ¥çš„è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨&lt;code>part&lt;/code>å’Œ&lt;code>remaining&lt;/code>çš„åå­—ï¼Œé‚£å°†æ˜¯ä¸€ä¸ªæ··ä¹±çš„å±€é¢! ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">(recur (rest remaining-asym-parts)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (in into final-body-parts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (set [(first remaining-asym-parts) (matching-part (first remaining-asym-parts)) ]))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥ï¼Œ&lt;code>let&lt;/code>æ˜¯ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥ä¸ºå€¼å¼•å…¥æœ¬åœ°åç§°ï¼Œè¿™æœ‰åŠ©äºç®€åŒ–ä»£ç ã€‚&lt;/p>
&lt;h3 id="å¾ªç¯">å¾ªç¯&lt;/h3>
&lt;p>åœ¨æˆ‘ä»¬çš„&lt;code>symmetrize-body-parts&lt;/code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†&lt;code>loop&lt;/code>ï¼Œå®ƒæä¾›äº†å¦ä¸€ç§åœ¨ Clojure ä¸­è¿›è¡Œé€’å½’çš„æ–¹æ³•ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">loop &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">iteration&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">str &lt;/span>&lt;span class="s">&amp;#34;Iteration &amp;#34;&lt;/span> &lt;span class="nv">iteration&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">&amp;gt; &lt;/span>&lt;span class="nv">iteration&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Goodbye!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">recur&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="nv">iteration&lt;/span>&lt;span class="p">))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Goodbye!&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¬¬ä¸€è¡Œï¼Œ&lt;code>loop [iteration 0]&lt;/code>ï¼Œå¼€å§‹äº†å¾ªç¯å¹¶å¼•å…¥äº†ä¸€ä¸ªåˆå§‹å€¼çš„ç»‘å®šã€‚åœ¨å¾ªç¯çš„ç¬¬ä¸€æ¬¡ä¼ é€’ä¸­ï¼Œ&lt;code>iteration&lt;/code>çš„å€¼ä¸º 0.æ¥ä¸‹æ¥ï¼Œå®ƒæ‰“å°ä¸€ä¸ªçŸ­æ¶ˆæ¯ã€‚ç„¶åï¼Œå®ƒæ£€æŸ¥&lt;code>iteration&lt;/code>çš„å€¼ã€‚å¦‚æœè¯¥å€¼å¤§äº 3ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™è¯´å†è§äº†ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°± &amp;ldquo;é‡æ¥&amp;rdquo;ã€‚è¿™å°±å¥½æ¯”&lt;code>loop&lt;/code>åˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå…¶å‚æ•°åä¸º&lt;code>iteration&lt;/code>ï¼Œè€Œ&lt;code>recur&lt;/code>å…è®¸ä½ ä»å…¶å†…éƒ¨è°ƒç”¨è¯¥å‡½æ•°ï¼Œä¼ é€’å‚æ•°&lt;code>(inc iteration)&lt;/code>ã€‚&lt;/p>
&lt;p>äº‹å®ä¸Šï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å®šä¹‰æ¥å®ŒæˆåŒæ ·çš„äº‹æƒ…ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">recursive-printer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">recursive-printer&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([&lt;/span>&lt;span class="nv">iteration&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="nv">iteration&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">&amp;gt; &lt;/span>&lt;span class="nv">iteration&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Goodbye!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">recursive-printer&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">inc &lt;/span>&lt;span class="nv">iteration&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">recursive-printer&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Iteration 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; Goodbye!&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½†æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™æ˜¯ä¸ªæ¯”è¾ƒå•°å—¦çš„æ–¹æ³•ã€‚è€Œä¸”ï¼Œ&lt;code>loop&lt;/code>æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚åœ¨æˆ‘ä»¬çš„å¯¹ç§°åŒ–å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨&lt;code>loop&lt;/code>éå†ä¸å¯¹ç§°çš„èº«ä½“éƒ¨ä½åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚&lt;/p>
&lt;h3 id="æ­£åˆ™è¡¨è¾¾å¼">æ­£åˆ™è¡¨è¾¾å¼&lt;/h3>
&lt;p>&lt;em>æ­£åˆ™è¡¨è¾¾å¼&lt;/em>æ˜¯å¯¹æ–‡æœ¬è¿›è¡Œæ¨¡å¼åŒ¹é…çš„å·¥å…·ã€‚æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡å­—ç¬¦å·æ˜¯å°†è¡¨è¾¾å¼æ”¾åœ¨å“ˆå¸Œæ ‡è®°åçš„å¼•å·ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#&amp;#34;regular-expression&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨æ¸…å• 3-1 ä¸­çš„å‡½æ•°&lt;code>matching-part&lt;/code>ä¸­ï¼Œ&lt;code>clojure.string/replace&lt;/code>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼&lt;code>#&amp;quot;^left-&amp;quot;&lt;/code>æ¥åŒ¹é…ä»¥&lt;code>&amp;quot;left-&amp;quot;&lt;/code>å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œä»¥ä¾¿ç”¨&lt;code>&amp;quot;right-&amp;quot;&lt;/code>æ›¿æ¢&lt;code>&amp;quot;left-&amp;quot;&lt;/code>ã€‚å¡ç‰¹ï¼Œ&lt;code>^&lt;/code>ï¼Œæ˜¯æ­£åˆ™è¡¨è¾¾å¼å‘å‡ºçš„ä¿¡å·ï¼Œå³åªæœ‰å½“æ–‡æœ¬&lt;code>&amp;quot;left-&amp;quot;&lt;/code>ä½äºå­—ç¬¦ä¸²çš„å¼€å¤´æ—¶ï¼Œå®ƒæ‰ä¼šåŒ¹é…ï¼Œè¿™å°±ç¡®ä¿äº†åƒ&lt;code>&amp;quot;cleft-chin&amp;quot;&lt;/code>è¿™æ ·çš„å­—ç¬¦ä¸²ä¸ä¼šåŒ¹é…ã€‚ä½ å¯ä»¥ç”¨&lt;code>re-find&lt;/code>æ¥æµ‹è¯•ï¼Œå®ƒæ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸æ­£åˆ™è¡¨è¾¾å¼æè¿°çš„æ¨¡å¼ç›¸åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œåˆ™è¿”å›åŒ¹é…çš„æ–‡æœ¬æˆ–&lt;code>nil&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">re-find &lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="s">&amp;#34;^left-&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;left-eye&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; &amp;#34;left-&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">re-find &lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="s">&amp;#34;^left-&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;cleft-chin&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">re-find &lt;/span>&lt;span class="o">#&lt;/span>&lt;span class="s">&amp;#34;^left-&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;wongleblart&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; nil&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹é¢æ˜¯å‡ ä¸ª&lt;code>matching-part&lt;/code>çš„ä¾‹å­ï¼Œä½¿ç”¨ä¸€ä¸ªé‡è¯å°†&lt;code>&amp;quot;left-&amp;quot;&lt;/code>æ›¿æ¢ä¸º&lt;code>&amp;quot;right-&amp;quot;&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">matching-part&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">part&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">clojure.string/replace&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="nv">part&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="s">&amp;#34;^left-&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;right-&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">:size&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="ss">:size&lt;/span> &lt;span class="nv">part&lt;/span>&lt;span class="p">)})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">matching-part&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-eye&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {:name &amp;#34;right-eye&amp;#34; :size 1}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">matching-part&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;head&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {:name &amp;#34;head&amp;#34; :size 3}]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯·æ³¨æ„ï¼Œåç§° &amp;ldquo;head&amp;rdquo; æ˜¯åŸæ ·è¿”å›çš„ã€‚&lt;/p>
&lt;h3 id="å¯¹ç§°å™¨">å¯¹ç§°å™¨&lt;/h3>
&lt;p>ç°åœ¨è®©æˆ‘ä»¬å›åˆ°å®Œæ•´çš„å¯¹ç§°å™¨ï¼Œå¯¹å…¶è¿›è¡Œæ›´è¯¦ç»†çš„åˆ†æã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">asym-hobbit-body-parts&lt;/span> &lt;span class="p">[{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;head&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-eye&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-ear&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;mouth&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;nose&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;neck&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-shoulder&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-upper-arm&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;chest&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;back&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-forearm&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;abdomen&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-kidney&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-hand&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-knee&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-thigh&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-lower-leg&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-achilles&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="s">&amp;#34;left-foot&amp;#34;&lt;/span> &lt;span class="ss">:size&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">matching-part&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">part&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">clojure.string/replace&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="ss">:name&lt;/span> &lt;span class="nv">part&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">#&lt;/span>&lt;span class="s">&amp;#34;^left-&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;right-&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">:size&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="ss">:size&lt;/span> &lt;span class="nv">part&lt;/span>&lt;span class="p">)})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">âŠ&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">symmetrize-body-parts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Expects a seq of maps that have a :name and :size&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">asym-body-parts&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â‹&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">loop &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">remaining-asym-parts&lt;/span> &lt;span class="nv">asym-body-parts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">final-body-parts&lt;/span> &lt;span class="p">[]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">âŒ&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">empty?&lt;/span> &lt;span class="nv">remaining-asym-parts&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">final-body-parts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="nv">part&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="nv">remaining&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">remaining-asym-parts&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">recur&lt;/span> &lt;span class="nv">remaining&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">into &lt;/span>&lt;span class="nv">final-body-parts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">set &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">part&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">matching-part&lt;/span> &lt;span class="nv">part&lt;/span>&lt;span class="p">)])))))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>symmetriz-body-parts&lt;/code>å‡½æ•°ï¼ˆä»âŠå¼€å§‹ï¼‰é‡‡ç”¨äº†å‡½æ•°å¼ç¼–ç¨‹ä¸­å¸¸è§çš„ä¸€èˆ¬ç­–ç•¥ã€‚ç»™å®šä¸€ä¸ªåºåˆ—ï¼ˆåœ¨æœ¬ä¾‹ä¸­ï¼Œæ˜¯ä¸€ä¸ªèº«ä½“éƒ¨ä½åŠå…¶å°ºå¯¸çš„ Vectorï¼‰ï¼Œè¯¥å‡½æ•°è¿ç»­åœ°å°†è¯¥åºåˆ—åˆ†å‰²æˆ&lt;em>head&lt;/em>å’Œ&lt;em>tail&lt;/em>ã€‚ç„¶åï¼Œå®ƒå¤„ç†å¤´éƒ¨ï¼Œå°†å…¶æ·»åŠ åˆ°æŸä¸ªç»“æœä¸­ï¼Œå¹¶ä½¿ç”¨é€’å½’æ¥ç»§ç»­å¤„ç†å°¾éƒ¨çš„è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬åœ¨â‹å¤„å¼€å§‹å¾ªç¯å¤„ç†ä¸»ä½“éƒ¨åˆ†ã€‚åºåˆ—çš„å°¾éƒ¨å°†è¢«ç»‘å®šåˆ°&lt;code>remaining-asym-parts&lt;/code>ã€‚æœ€åˆï¼Œå®ƒè¢«ç»‘å®šåˆ°ä¼ é€’ç»™å‡½æ•°çš„å®Œæ•´åºåˆ—ï¼š&lt;code>asym-body-parts&lt;/code>ã€‚æˆ‘ä»¬è¿˜åˆ›å»ºäº†ä¸€ä¸ªç»“æœåºåˆ—ï¼Œ&lt;code>final-body-parts&lt;/code>ï¼›å®ƒçš„åˆå§‹å€¼æ˜¯ä¸€ä¸ªç©º Vectorã€‚&lt;/p>
&lt;p>å¦‚æœ&lt;code>remaining-asym-parts&lt;/code>åœ¨âŒå¤„æ˜¯ç©ºçš„ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å·²ç»å¤„ç†äº†æ•´ä¸ªåºåˆ—ï¼Œå¯ä»¥è¿”å›ç»“æœï¼Œ&lt;code>final-body-parts&lt;/code>ã€‚å¦åˆ™ï¼Œåœ¨âï¼Œæˆ‘ä»¬å°†åˆ—è¡¨åˆ†æˆ&lt;code>head&lt;/code>ï¼Œ&lt;code>part&lt;/code>ï¼Œå’Œ&lt;code>tail&lt;/code>ï¼Œ&lt;code>remaining&lt;/code>ã€‚&lt;/p>
&lt;p>åœ¨âå¤„ï¼Œæˆ‘ä»¬ç”¨&lt;code>remaining&lt;/code>è¿›è¡Œå¾ªç¯ï¼Œè¿™ä¸ªåˆ—è¡¨åœ¨å¾ªç¯çš„æ¯ä¸€æ¬¡è¿­ä»£ä¸­éƒ½ä¼šç¼©çŸ­ä¸€ä¸ªå…ƒç´ ï¼Œè¿˜æœ‰&lt;code>(in)&lt;/code>è¡¨è¾¾å¼ï¼Œå®ƒå»ºç«‹äº†å¯¹ç§°çš„èº«ä½“éƒ¨åˆ†çš„ Vectorã€‚&lt;/p>
&lt;p>å¦‚æœä½ æ˜¯è¿™ç§ç¼–ç¨‹çš„æ–°æ‰‹ï¼Œè¿™æ®µä»£ç å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ¥è§£å†³ã€‚è¯·åšæŒä¸‹å»! ä¸€æ—¦ä½ ç†è§£äº†æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ï¼Œä½ ä¼šè§‰å¾—è‡ªå·±åƒä¸ªç™¾ä¸‡å¯Œç¿!&lt;/p>
&lt;h3 id="ç”¨-reduce-æ¥ç¼–å†™æ›´å¥½çš„å¯¹ç§°å™¨">ç”¨ reduce æ¥ç¼–å†™æ›´å¥½çš„å¯¹ç§°å™¨&lt;/h3>
&lt;p>å¤„ç†åºåˆ—çš„æ¯ä¸ªå…ƒç´ å¹¶è¿”å›ä¸€ä¸ªç»“æœçš„æ¨¡å¼éå¸¸æ™®éï¼Œä»¥è‡³äºæœ‰ä¸€ä¸ªå†…ç½®çš„å‡½æ•°å«åš&lt;code>reduce&lt;/code>ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">;; sum with reduce&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">reduce + &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 10&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°±åƒå‘Šè¯‰ Clojure è¿™æ ·åšã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>reduce&lt;/code>å‡½æ•°æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å·¥ä½œã€‚&lt;/p>
&lt;ol>
&lt;li>å°†ç»™å®šçš„å‡½æ•°åº”ç”¨äºä¸€ä¸ªåºåˆ—çš„å‰ä¸¤ä¸ªå…ƒç´ ã€‚è¿™å°±æ˜¯&lt;code>(+ 1 2)&lt;/code>çš„ç”±æ¥ã€‚&lt;/li>
&lt;li>å°†ç»™å®šçš„å‡½æ•°åº”ç”¨äºç»“æœå’Œåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ­¥éª¤ 1 çš„ç»“æœæ˜¯&lt;code>3&lt;/code>ï¼Œåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ ä¹Ÿæ˜¯&lt;code>3&lt;/code>ã€‚æ‰€ä»¥æœ€åçš„ç»“æœæ˜¯&lt;code>(+3 3)&lt;/code>ã€‚&lt;/li>
&lt;li>å¯¹åºåˆ—ä¸­å‰©ä¸‹çš„æ¯ä¸ªå…ƒç´ é‡å¤ç¬¬ 2 æ­¥ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;code>reduce&lt;/code>ä¹Ÿéœ€è¦ä¸€ä¸ªå¯é€‰çš„åˆå§‹å€¼ã€‚è¿™é‡Œçš„åˆå§‹å€¼æ˜¯&lt;code>15&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">reduce + &lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ æä¾›äº†ä¸€ä¸ªåˆå§‹å€¼ï¼Œ&lt;code>reduce&lt;/code>å°±ä¼šå¼€å§‹å¯¹åˆå§‹å€¼å’Œåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ åº”ç”¨ç»™å®šçš„å‡½æ•°ï¼Œè€Œä¸æ˜¯åºåˆ—çš„å‰ä¸¤ä¸ªå…ƒç´ ã€‚&lt;/p>
&lt;p>éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œåœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œ&lt;code>reduce&lt;/code>æ¥æ”¶ä¸€ä¸ªå…ƒç´ çš„é›†åˆï¼Œ&lt;code>[1 2 3 4]&lt;/code>ï¼Œå¹¶è¿”å›ä¸€ä¸ªå•ä¸€çš„æ•°å­—ã€‚è™½ç„¶ç¨‹åºå‘˜ç»å¸¸è¿™æ ·ä½¿ç”¨&lt;code>reduce&lt;/code>ï¼Œä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code>reduce&lt;/code>æ¥è¿”å›ä¸€ä¸ªæ¯”ä½ å¼€å§‹æ—¶æ›´å¤§çš„é›†åˆï¼Œå°±åƒæˆ‘ä»¬åœ¨&lt;code>symmetrize&lt;/code>-body-parts&lt;code>ä¸­å°è¯•åšçš„é‚£æ ·ã€‚&lt;/code>reduce&lt;code>æŠ½è±¡äº† &amp;quot;å¤„ç†ä¸€ä¸ªé›†åˆå¹¶å»ºç«‹ä¸€ä¸ªç»“æœ &amp;quot;çš„ä»»åŠ¡ï¼Œå®ƒå¯¹è¿”å›çš„ç»“æœç±»å‹æ˜¯ä¸ç¡®å®šçš„ã€‚ä¸ºäº†è¿›ä¸€æ­¥äº†è§£&lt;/code>reduce`çš„å·¥ä½œåŸç†ï¼Œè¿™é‡Œæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å®ç°å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">my-reduce&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([&lt;/span>&lt;span class="nv">f&lt;/span> &lt;span class="nv">initial&lt;/span> &lt;span class="nv">coll&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">loop &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">result&lt;/span> &lt;span class="nv">initial&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">remaining&lt;/span> &lt;span class="nv">coll&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">empty?&lt;/span> &lt;span class="nv">remaining&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">recur&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">f&lt;/span> &lt;span class="nv">result&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">first &lt;/span>&lt;span class="nv">remaining&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">rest &lt;/span>&lt;span class="nv">remaining&lt;/span>&lt;span class="p">)))))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">([&lt;/span>&lt;span class="nv">f&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">head&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="nv">tail&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">my-reduce&lt;/span> &lt;span class="nv">f&lt;/span> &lt;span class="nv">head&lt;/span> &lt;span class="nv">tail&lt;/span>&lt;span class="p">)))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å¯ä»¥é‡æ–°å®ç°æˆ‘ä»¬çš„å¯¹ç§°å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">better-symmetrize-body-parts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;Expects a seq of maps that have a :name and :size&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">asym-body-parts&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">reduce &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">final-body-parts&lt;/span> &lt;span class="nv">part&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">into &lt;/span>&lt;span class="nv">final-body-parts&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">set &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">part&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">matching-part&lt;/span> &lt;span class="nv">part&lt;/span>&lt;span class="p">)])))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">asym-body-parts&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœŸæ£’! ä½¿ç”¨&lt;code>reduce&lt;/code>çš„ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„å¥½å¤„æ˜¯ï¼Œä½ å†™çš„ä»£ç æ€»ä½“ä¸Šæ›´å°‘ã€‚ä½ ä¼ é€’ç»™&lt;code>reduce&lt;/code>çš„åŒ¿åå‡½æ•°åªä¸“æ³¨äºå¤„ç†ä¸€ä¸ªå…ƒç´ å’Œå»ºç«‹ä¸€ä¸ªç»“æœã€‚åŸå› æ˜¯&lt;code>reduce&lt;/code>å¤„ç†äº†åº•å±‚çš„æœºåˆ¶ï¼Œå³è·Ÿè¸ªå“ªäº›å…ƒç´ å·²ç»è¢«å¤„ç†ï¼Œå¹¶å†³å®šæ˜¯å¦è¿”å›ä¸€ä¸ªæœ€ç»ˆç»“æœæˆ–é€’å½’ã€‚&lt;/p>
&lt;p>ä½¿ç”¨&lt;code>reduce&lt;/code>ä¹Ÿæ›´æœ‰è¡¨ç°åŠ›ã€‚å¦‚æœä½ çš„ä»£ç çš„è¯»è€…é‡åˆ° &amp;ldquo;loop&amp;rdquo;ï¼Œå¦‚æœä¸é˜…è¯»æ‰€æœ‰çš„ä»£ç ï¼Œä»–ä»¬å°†ä¸èƒ½ç¡®å®šè¿™ä¸ªå¾ªç¯åˆ°åº•åœ¨åšä»€ä¹ˆã€‚ä½†æ˜¯å¦‚æœä»–ä»¬çœ‹åˆ°&lt;code>reduce&lt;/code>ï¼Œä»–ä»¬ä¼šç«‹å³çŸ¥é“ä»£ç çš„ç›®çš„æ˜¯å¤„ç†ä¸€ä¸ªé›†åˆçš„å…ƒç´ ä»¥å»ºç«‹ä¸€ä¸ªç»“æœã€‚&lt;/p>
&lt;p>æœ€åï¼Œé€šè¿‡å°† &amp;ldquo;reduce &amp;ldquo;è¿‡ç¨‹æŠ½è±¡ä¸ºä¸€ä¸ªä»¥å¦ä¸€ä¸ªå‡½æ•°ä¸ºå‚æ•°çš„å‡½æ•°ï¼Œä½ çš„ç¨‹åºå˜å¾—æ›´æœ‰å¯å¡‘æ€§ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°†&lt;code>reduce&lt;/code>å‡½æ•°ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚ä½ è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªæ›´é€šç”¨çš„ &amp;ldquo;å¯¹ç§°ä½“-éƒ¨ä»¶ &amp;ldquo;ç‰ˆæœ¬ï¼Œä¾‹å¦‚ &amp;ldquo;æ‰©å±•ä½“-éƒ¨ä»¶&amp;rdquo;ã€‚é™¤äº†èº«ä½“éƒ¨ä½çš„åˆ—è¡¨å¤–ï¼Œå®ƒè¿˜å¯ä»¥æ¥å—ä¸€ä¸ª&lt;em>æ‰©å±•å™¨&lt;/em>å‡½æ•°ï¼Œå¹¶è®©ä½ çš„æ¨¡å‹ä¸ä»…ä»…æ˜¯éœæ¯”ç‰¹äººã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æœ‰ä¸€ä¸ªèœ˜è››æ‰©å±•å™¨ï¼Œå¯ä»¥å¢åŠ çœ¼ç›å’Œè…¿çš„æ•°é‡ã€‚æˆ‘ä¼šè®©ä½ è‡ªå·±æ¥å†™ï¼Œå› ä¸ºæˆ‘æ˜¯é‚ªæ¶çš„ã€‚&lt;/p>
&lt;h3 id="éœæ¯”ç‰¹äººçš„æš´åŠ›">éœæ¯”ç‰¹äººçš„æš´åŠ›&lt;/h3>
&lt;p>æˆ‘çš„è¯ï¼Œè¿™çœŸæ˜¯ä¸ºå‹‡æ•¢å’ŒçœŸå®çš„äººå‡†å¤‡çš„ Clojure! ä¸ºäº†ç»™ä½ çš„å·¥ä½œç”»ä¸Šå¥å·ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå‡½æ•°å¯ä»¥ç¡®å®šéœæ¯”ç‰¹äººçš„å“ªä¸ªéƒ¨åˆ†è¢«å‡»ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">hit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nv">asym-body-parts&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">let &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">sym-parts&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">âŠ&lt;/span>&lt;span class="nv">better-symmetrize-body-parts&lt;/span> &lt;span class="nv">asym-body-parts&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">â‹&lt;/span>&lt;span class="nv">body-part-size-sum&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">reduce + &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">map &lt;/span>&lt;span class="ss">:size&lt;/span> &lt;span class="nv">sym-parts&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">target&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">rand &lt;/span>&lt;span class="nv">body-part-size-sum&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">âŒ&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">loop &lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="nv">part&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="nv">remaining&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nv">sym-parts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">accumulated-size&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="ss">:size&lt;/span> &lt;span class="nv">part&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">if &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">&amp;gt; &lt;/span>&lt;span class="nv">accumulated-size&lt;/span> &lt;span class="nv">target&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">part&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">recur&lt;/span> &lt;span class="nv">remaining&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="nv">accumulated-size&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="ss">:size&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">first &lt;/span>&lt;span class="nv">remaining&lt;/span>&lt;span class="p">))))))))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>hit&lt;/code>çš„å·¥ä½œåŸç†æ˜¯å–ä¸€ä¸ªä¸å¯¹ç§°çš„èº«ä½“éƒ¨ä½çš„ Vectorï¼Œåœ¨âŠå¤„å¯¹ç§°ï¼Œç„¶ååœ¨â‹å¤„å°†å„éƒ¨ä½çš„å¤§å°ç›¸åŠ ã€‚ä¸€æ—¦æˆ‘ä»¬å°†è¿™äº›å°ºå¯¸ç›¸åŠ ï¼Œå°±å¥½åƒä» 1 åˆ°&lt;code>èº«ä½“éƒ¨ä½å°ºå¯¸ä¹‹å’Œ&lt;/code>çš„æ¯ä¸ªæ•°å­—éƒ½å¯¹åº”äºä¸€ä¸ªèº«ä½“éƒ¨ä½ï¼›1 å¯èƒ½å¯¹åº”äºå·¦çœ¼ï¼Œè€Œ 2ã€3ã€4 å¯èƒ½å¯¹åº”äºå¤´éƒ¨ã€‚è¿™ä½¿å¾—å½“ä½ å‡»ä¸­ä¸€ä¸ªèº«ä½“éƒ¨ä½æ—¶ï¼ˆé€šè¿‡åœ¨è¿™ä¸ªèŒƒå›´å†…é€‰æ‹©ä¸€ä¸ªéšæœºæ•°å­—ï¼‰ï¼Œç‰¹å®šèº«ä½“éƒ¨ä½è¢«å‡»ä¸­çš„å¯èƒ½æ€§å°†å–å†³äºèº«ä½“éƒ¨ä½çš„å¤§å°ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/do-things/hobbit-hit-line.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>å›¾ 3-1ï¼šèº«ä½“éƒ¨ä½ä¸æ•°å­—çš„èŒƒå›´ç›¸å¯¹åº”ï¼Œå¦‚æœç›®æ ‡åœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œå°±ä¼šè¢«å‡»ä¸­ã€‚&lt;/p>
&lt;p>æœ€åï¼Œè¿™äº›æ•°å­—ä¸­çš„ä¸€ä¸ªè¢«éšæœºé€‰æ‹©ï¼Œç„¶åæˆ‘ä»¬åœ¨âŒå¤„ä½¿ç”¨&lt;code>loop&lt;/code>æ¥å¯»æ‰¾å¹¶è¿”å›ä¸è¯¥æ•°å­—å¯¹åº”çš„èº«ä½“éƒ¨ä½ã€‚å¾ªç¯æ˜¯é€šè¿‡è·Ÿè¸ªæˆ‘ä»¬å·²ç»æ£€æŸ¥è¿‡çš„éƒ¨åˆ†çš„ç´¯è®¡å¤§å°ï¼Œå¹¶æ£€æŸ¥ç´¯è®¡å¤§å°æ˜¯å¦å¤§äºç›®æ ‡å€¼æ¥å®ç°çš„ã€‚æˆ‘æŠŠè¿™ä¸ªè¿‡ç¨‹æƒ³è±¡æˆç”¨ä¸€æ’ç¼–å·çš„æ§½æ¥æ’åˆ—èº«ä½“éƒ¨ä½ã€‚åœ¨æˆ‘æ’å®Œä¸€ä¸ªèº«ä½“éƒ¨ä½åï¼Œæˆ‘é—®è‡ªå·±ï¼š&amp;ldquo;æˆ‘å·²ç»è¾¾åˆ°ç›®æ ‡äº†å—ï¼Ÿ&amp;rdquo; å¦‚æœæˆ‘è¾¾åˆ°äº†ï¼Œè¿™æ„å‘³ç€æˆ‘åˆšåˆšæ’å¥½çš„èº«ä½“éƒ¨ä½å°±æ˜¯è¢«å‡»ä¸­çš„é‚£ä¸ªéƒ¨ä½ã€‚å¦åˆ™ï¼Œæˆ‘å°±ç»§ç»­æ’æŸ¥è¿™äº›éƒ¨ä½ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„é›¶ä»¶æ¸…å•æ˜¯&lt;em>å¤´&lt;/em>ã€&lt;em>å·¦çœ¼&lt;/em>å’Œ&lt;em>å·¦æ‰‹&lt;/em>ï¼Œå¦‚å›¾ 3-1ã€‚åœ¨å–å®Œç¬¬ä¸€ä¸ªéƒ¨åˆ†ï¼Œå³å¤´éƒ¨åï¼Œç´¯è®¡å¤§å°ä¸º 3ã€‚å½“ç´¯è®¡å¤§å°è¶…è¿‡ç›®æ ‡æ—¶ï¼Œèº«ä½“éƒ¨åˆ†å°±è¢«å‡»ä¸­ï¼Œæ‰€ä»¥å¦‚æœç›®æ ‡å°äº 3ï¼Œé‚£ä¹ˆå¤´éƒ¨å°±è¢«å‡»ä¸­äº†ã€‚å¦åˆ™ï¼Œä½ å–ä¸‹ä¸‹ä¸€ä¸ªéƒ¨åˆ†ï¼Œå³å·¦çœ¼ï¼Œå¹¶å°†ç´¯ç§¯å¤§å°å¢åŠ åˆ° 4ï¼Œå¦‚æœç›®æ ‡å¤§äºæˆ–ç­‰äº 3 ä¸”å°äº 4ï¼Œåˆ™äº§ç”Ÿä¸€ä¸ªå‘½ä¸­ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä¸€äº›&lt;code>hit&lt;/code>å‡½æ•°çš„è¿è¡Œæ ·æœ¬ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">hit&lt;/span> &lt;span class="nv">asym-hobbit-body-parts&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {:name &amp;#34;right-upper-arm&amp;#34;, :size 3}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">hit&lt;/span> &lt;span class="nv">asym-hobbit-body-parts&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {:name &amp;#34;chest&amp;#34;, :size 10}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">hit&lt;/span> &lt;span class="nv">asym-hobbit-body-parts&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; {:name &amp;#34;left-eye&amp;#34;, :size 1}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å“¦ï¼Œæˆ‘çš„ä¸Šå¸ï¼Œé‚£ä¸ªå¯æ€œçš„éœæ¯”ç‰¹äººï¼ä½ è¿™ä¸ªæ€ªç‰©ï¼&amp;quot;ã€‚ä½ è¿™ä¸ªæ€ªç‰©!&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>æœ¬ç« è®©ä½ å¯¹å¦‚ä½•åœ¨ Clojure ä¸­&lt;em>åšäº‹&lt;/em>æœ‰äº†ä¸€ä¸ªæ—‹é£å¼çš„äº†è§£ã€‚ä½ ç°åœ¨çŸ¥é“äº†å¦‚ä½•ç”¨å­—ç¬¦ä¸²ã€æ•°å­—ã€Mapã€å…³é”®å­—ã€Vectorã€åˆ—è¡¨å’Œ Set æ¥è¡¨ç¤ºä¿¡æ¯ï¼Œä»¥åŠå¦‚ä½•ç”¨&lt;code>def&lt;/code>å’Œ&lt;code>let&lt;/code>æ¥å‘½åè¿™äº›è¡¨è¾¾å¼ã€‚ä½ å·²ç»äº†è§£äº†å‡½æ•°çš„çµæ´»æ€§ä»¥åŠå¦‚ä½•åˆ›å»ºä½ è‡ªå·±çš„å‡½æ•°ã€‚æ­¤å¤–ï¼Œä½ è¿˜äº†è§£äº† Clojure çš„ç®€å•å“²å­¦ï¼ŒåŒ…æ‹¬å…¶ç»Ÿä¸€çš„è¯­æ³•å’Œå¼ºè°ƒåœ¨åŸå§‹æ•°æ®ç±»å‹ä¸Šä½¿ç”¨å¤§å‹å‡½æ•°åº“ã€‚&lt;/p>
&lt;p>ç¬¬ 4 ç« å°†å¸¦ä½ è¯¦ç»†æ¢ç©¶ Clojure çš„æ ¸å¿ƒå‡½æ•°ï¼Œç¬¬ 5 ç« è§£é‡Šäº†å‡½æ•°å¼ç¼–ç¨‹çš„æ€ç»´æ¨¡å¼ã€‚æœ¬ç« å‘ä½ å±•ç¤ºäº†å¦‚ä½•ç¼–å†™ Clojure ä»£ç &amp;ndash;æ¥ä¸‹æ¥çš„ä¸¤ç« å°†å‘ä½ å±•ç¤ºå¦‚ä½•æ›´å¥½çš„ç¼–å†™ Clojureã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘å»ºè®®ä½ å¼€å§‹å†™ä»£ç ï¼Œæˆ‘çš„æ¯ä¸€æ ¹çº¤ç»´éƒ½æ˜¯è¿™æ ·ã€‚æ²¡æœ‰æ¯”è¿™æ›´å¥½çš„æ–¹æ³•æ¥å·©å›ºä½ çš„ Clojure çŸ¥è¯†äº†ã€‚Clojure Cheat Sheetï¼ˆ&lt;em>&lt;a class="link" href="http://clojure.org/api/cheatsheet" target="_blank" rel="noopener"
>http://clojure.org/api/cheatsheet&lt;/a>&lt;/em>ï¼‰æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒèµ„æ–™ï¼Œå®ƒåˆ—å‡ºäº†æ‰€æœ‰åœ¨æœ¬ç« ä¸­æ¶‰åŠçš„æ•°æ®ç»“æ„ä¸Šæ“ä½œçš„å†…ç½®å‡½æ•°ã€‚&lt;/p>
&lt;p>ä¸‹é¢çš„ç»ƒä¹ ä¼šè®©ä½ çš„å¤§è„‘éå¸¸å…´å¥‹ã€‚å¦‚æœä½ æƒ³æ›´å¤šåœ°æµ‹è¯•ä½ çš„æ–°æŠ€èƒ½ï¼Œå¯ä»¥åœ¨*&lt;a class="link" href="http://www.projecteuler.net/" target="_blank" rel="noopener"
>http://www.projecteuler.net/&lt;/a>&lt;em>å°è¯•ä¸€äº› Project Euler æŒ‘æˆ˜ã€‚ä½ è¿˜å¯ä»¥çœ‹çœ‹ 4Clojureï¼ˆ&lt;/em>&lt;a class="link" href="http://www.4clojure.com/problems/" target="_blank" rel="noopener"
>http://www.4clojure.com/problems/&lt;/a>*ï¼‰ï¼Œè¿™æ˜¯ä¸€å¥—åœ¨çº¿çš„ Clojure é—®é¢˜ï¼Œæ—¨åœ¨æµ‹è¯•ä½ çš„çŸ¥è¯†ã€‚å†™ç‚¹ä»€ä¹ˆå§!&lt;/p>
&lt;h2 id="ç»ƒä¹ ">ç»ƒä¹ &lt;/h2>
&lt;p>è¿™äº›ç»ƒä¹ æ˜¯ä¸ºäº†æµ‹è¯•ä½ çš„ Clojure çŸ¥è¯†å’Œå­¦ä¹ æ›´å¤šçš„ Clojure å‡½æ•°ï¼Œæ˜¯ä¸€ç§æœ‰è¶£çš„æ–¹å¼ã€‚å‰ä¸‰ä¸ªå¯ä»¥åªç”¨æœ¬ç« ä»‹ç»çš„ä¿¡æ¯æ¥å®Œæˆï¼Œä½†åä¸‰ä¸ªéœ€è¦ä½ ä½¿ç”¨åˆ°ç›®å‰ä¸ºæ­¢è¿˜æ²¡æœ‰æ¶‰åŠçš„å‡½æ•°ã€‚å¦‚æœä½ çœŸçš„å¾ˆæƒ³å†™æ›´å¤šçš„ä»£ç å¹¶æ¢ç´¢ Clojure çš„æ ‡å‡†åº“ï¼Œé‚£ä¹ˆå°±å»è§£å†³åä¸‰ä¸ªé—®é¢˜ã€‚å¦‚æœä½ è§‰å¾—è¿™äº›ç»ƒä¹ å¤ªéš¾äº†ï¼Œå¯ä»¥åœ¨è¯»å®Œç¬¬ 4 ç« å’Œç¬¬ 5 ç« åå†æ¥çœ‹çœ‹ï¼Œä½ ä¼šå‘ç°å®ƒä»¬è¦å®¹æ˜“å¾—å¤šã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ä½¿ç”¨&lt;code>str&lt;/code>, &lt;code>vector&lt;/code>, &lt;code>list&lt;/code>, &lt;code>hash-map&lt;/code>, å’Œ&lt;code>hash-set&lt;/code>å‡½æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªæ•°å­—ï¼Œå¹¶å‘å…¶æ·»åŠ  100ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å†™ä¸€ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dec-maker&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ï¼Œå…¶å·¥ä½œåŸç†ä¸å‡½æ•°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">inc-maker&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é™¤äº†ç”¨å‡æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">def &lt;/span>&lt;span class="nv">dec9&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">dec-maker&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">dec9&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å†™ä¸€ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">mapset&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">map
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é™¤äº†è¿”å›å€¼æ˜¯ä¸€ä¸ªé›†åˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">mapset&lt;/span> &lt;span class="nb">inc &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; #{2 3}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åˆ›å»ºä¸€ä¸ªç±»ä¼¼äº&lt;code>symmetriz-body-parts&lt;/code>çš„å‡½æ•°ï¼Œåªæ˜¯å®ƒå¿…é¡»ä¸å…·æœ‰å¾„å‘å¯¹ç§°æ€§çš„å¥‡æ€ªçš„å¤ªç©ºå¤–æ˜Ÿäººä¸€èµ·å·¥ä½œã€‚ä»–ä»¬æ²¡æœ‰ä¸¤åªçœ¼ç›ã€èƒ³è†Šã€è…¿ç­‰ç­‰ï¼Œè€Œæ˜¯æœ‰äº”åªã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå°†&lt;code>symmetriz-body-parts&lt;/code>å’Œä½ åœ¨ç»ƒä¹  5 ä¸­åˆ›å»ºçš„å‡½æ•°é€šç”¨åŒ–ã€‚è¿™ä¸ªæ–°çš„å‡½æ•°åº”è¯¥æ¥å—ä¸€ä¸ªèº«ä½“éƒ¨ä½çš„é›†åˆï¼Œä»¥åŠè¦å¢åŠ çš„åŒ¹é…èº«ä½“éƒ¨ä½çš„æ•°é‡ã€‚å¦‚æœä½ å¯¹ Lisp è¯­è¨€å’Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯å®Œå…¨é™Œç”Ÿçš„ï¼Œé‚£ä¹ˆå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å¯èƒ½å¹¶ä¸æ˜æ˜¾ã€‚å¦‚æœä½ è¢«å¡ä½äº†ï¼Œåªéœ€è½¬åˆ°ä¸‹ä¸€ç« ï¼Œä»¥åå†é‡æ¸©è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Chapter2 å¦‚ä½•ä½¿ç”¨ Emacs</title><link>https://example.com/p/chapter2-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-emacs/</link><pubDate>Thu, 13 Jan 2022 10:43:56 +0800</pubDate><guid>https://example.com/p/chapter2-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-emacs/</guid><description>&lt;h1 id="å¦‚ä½•ä½¿ç”¨-emacsä¸€ä¸ªä¼˜ç§€çš„-clojure-ç¼–è¾‘å™¨">å¦‚ä½•ä½¿ç”¨ Emacsï¼Œä¸€ä¸ªä¼˜ç§€çš„ Clojure ç¼–è¾‘å™¨&lt;/h1>
&lt;p>åœ¨ä½ æŒæ¡ Clojure çš„è¿‡ç¨‹ä¸­ï¼Œä½ çš„ç¼–è¾‘å™¨å°†æ˜¯ä½ æœ€äº²å¯†çš„ç›Ÿå‹ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½¿ç”¨ Emacsï¼Œä½†ä½ å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•ä½ æƒ³è¦çš„ç¼–è¾‘å™¨ã€‚å¦‚æœä½ ä¸éµå¾ªæœ¬ç« ä¸­å…³äº Emacs çš„è¯¦å°½è¯´æ˜ï¼Œæˆ–è€…ä½ é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„ç¼–è¾‘å™¨ï¼Œé‚£ä¹ˆè‡³å°‘å€¼å¾—æŠ•å…¥ä¸€äº›æ—¶é—´æ¥è®¾ç½®ä½ çš„ç¼–è¾‘å™¨ï¼Œä»¥ä¾¿ä¸ REPL ä¸€èµ·å·¥ä½œã€‚æˆ‘æ¨èçš„ä¸¤ä¸ªåœ¨ç¤¾åŒºä¸­å—åˆ°å¥½è¯„çš„æ›¿ä»£å“æ˜¯&lt;a class="link" href="https://cursive-ide.com/" target="_blank" rel="noopener"
>Cursive&lt;/a>å’Œ&lt;a class="link" href="https://sekao.net/nightcode/" target="_blank" rel="noopener"
>Nightcode&lt;/a>ã€‚&lt;/p>
&lt;p>æˆ‘æ¨è Emacs çš„åŸå› æ˜¯ï¼Œå®ƒæä¾›äº†ä¸ Clojure REPL çš„ç´§å¯†é›†æˆï¼Œè¿™ä½¿ä½ å¯ä»¥åœ¨å†™ä½œæ—¶ç«‹å³å°è¯•ä½ çš„ä»£ç ã€‚è¿™ç§ç´§å¯†çš„åé¦ˆå›è·¯åœ¨å­¦ä¹  Clojure å’Œä»¥åç¼–å†™çœŸæ­£çš„ Clojure ç¨‹åºæ—¶éƒ½å¾ˆæœ‰ç”¨ã€‚Emacs ä¹Ÿå¾ˆé€‚åˆä¸ä»»ä½• Lisp æ–¹è¨€ä¸€èµ·å·¥ä½œï¼›äº‹å®ä¸Šï¼ŒEmacs æ˜¯ç”¨ä¸€ç§å«åš Emacs Lispï¼ˆelispï¼‰çš„ Lisp æ–¹è¨€ç¼–å†™çš„ã€‚&lt;/p>
&lt;p>åœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ çš„ Emacs è®¾ç½®å°†çœ‹èµ·æ¥åƒå›¾ 2-1ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/emacs-final.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-1: ä½¿ç”¨ Clojure çš„å…¸å‹ Emacs è®¾ç½®ï¼šä¸€è¾¹æ˜¯ä»£ç ï¼Œå¦ä¸€è¾¹æ˜¯ REPLã€‚&lt;/p>
&lt;p>ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½ å°†ä»å®‰è£… Emacs å¼€å§‹ï¼Œè®¾ç½®ä¸€ä¸ªé€‚åˆæ–°äººçš„ Emacs é…ç½®ã€‚ç„¶åä½ å°†å­¦ä¹ åŸºç¡€çŸ¥è¯†ï¼šå¦‚ä½•æ‰“å¼€ã€ç¼–è¾‘å’Œä¿å­˜æ–‡ä»¶ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨åŸºæœ¬çš„é”®ç»‘å®šä¸ Emacs è¿›è¡Œäº¤äº’ã€‚æœ€åï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å®é™…ç¼–è¾‘ Clojure ä»£ç å¹¶ä¸ REPL è¿›è¡Œäº¤äº’ã€‚&lt;/p>
&lt;h2 id="å®‰è£…">å®‰è£…&lt;/h2>
&lt;p>ä½ åº”è¯¥ä½¿ç”¨ Emacs çš„æœ€æ–°ä¸»è¦ç‰ˆæœ¬ï¼Œå³ Emacs 24ï¼Œç”¨äºä½ å·¥ä½œçš„å¹³å°ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>OS X&lt;/strong>ä»*&lt;a class="link" href="http://emacsformacosx.com/" target="_blank" rel="noopener"
>http://emacsformacosx.com&lt;/a>*å®‰è£… vanilla Emacs ä½œä¸ºä¸€ä¸ª Mac åº”ç”¨ç¨‹åºã€‚å…¶ä»–é€‰é¡¹ï¼Œå¦‚ Aquamacsï¼Œåº”è¯¥æ˜¯ä¸ºäº†ä½¿ Emacs æ›´ &amp;ldquo;åƒ Mac&amp;rdquo;ï¼Œä½†ä»é•¿è¿œæ¥çœ‹æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå®ƒä»¬çš„è®¾ç½®ä¸æ ‡å‡† Emacs æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œä»¥è‡³äºå¾ˆéš¾ä½¿ç”¨ Emacs æ‰‹å†Œæˆ–è·Ÿéšæ•™ç¨‹ã€‚&lt;/li>
&lt;li>&lt;strong>Ubuntu&lt;/strong>æŒ‰ç…§*&lt;a class="link" href="https://launchpad.net/~cassou/&amp;#43;archive/emacs" target="_blank" rel="noopener"
>https://launchpad.net/~cassou/+archive/emacs&lt;/a>*ä¸Šçš„è¯´æ˜ã€‚&lt;/li>
&lt;li>&lt;strong>Windows&lt;/strong>ä½ å¯ä»¥åœ¨*&lt;a class="link" href="http://ftp.gnu.org/gnu/emacs/windows/" target="_blank" rel="noopener"
>Index of /gnu/emacs/windows&lt;/a>&lt;em>æ‰¾åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚åœ¨ä½ ä¸‹è½½å¹¶è§£å‹æœ€æ–°ç‰ˆæœ¬åï¼Œä½ å¯ä»¥åœ¨&lt;/em>bin\runemacs.exe*ä¸‹è¿è¡Œ Emacs å¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/li>
&lt;/ul>
&lt;p>å®‰è£…å®Œ Emacs åï¼Œæ‰“å¼€å®ƒã€‚ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼å›¾ 2-2 çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/emacs-fresh.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-2ï¼šå½“ä½ ç¬¬ä¸€æ¬¡æ‰“å¼€ Emacs æ—¶æ˜¾ç¤ºçš„å±å¹•&lt;/p>
&lt;p>æ¬¢è¿æ¥åˆ° Emacs çš„å´‡æ‹œï¼ä½ å·²ç»ä½¿ Richard Stallman æˆä¸ºäº† Emacs çš„ä¸€å‘˜ã€‚ä½ è®© Richard Stallman æ„Ÿåˆ°éª„å‚²!&lt;/p>
&lt;h2 id="é…ç½®">é…ç½®&lt;/h2>
&lt;p>æˆ‘åˆ›å»ºäº†ä¸€ä¸ªåº“ï¼Œé‡Œé¢æœ‰ä¸º Clojure é…ç½® Emacs æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¯åœ¨&lt;a class="link" href="https://github.com/flyingmachine/emacs-for-clojure/archive/book1.zip" target="_blank" rel="noopener"
>https://github.com/flyingmachine/emacs-for-clojure/archive/book1.zip&lt;/a>ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šè¿™äº›å·¥å…·ä¸€ç›´åœ¨æ›´æ–°ï¼Œæ‰€ä»¥å¦‚æœä¸‹é¢çš„è¯´æ˜å¯¹ä½ ä¸èµ·ä½œç”¨ï¼Œæˆ–è€…ä½ æƒ³ä½¿ç”¨æœ€æ–°çš„é…ç½®ï¼Œè¯·é˜…è¯»&lt;a class="link" href="https://github.com/flyingmachine/emacs-for-clojure/" target="_blank" rel="noopener"
>GitHub - flyingmachine/emacs-for-clojure&lt;/a>ä¸Šçš„è¯´æ˜ã€‚&lt;/p>
&lt;p>æŒ‰ä»¥ä¸‹æ­¥éª¤åˆ é™¤ä½ ç°æœ‰çš„ Emacs é…ç½®å¹¶å®‰è£…å¯¹ Clojure å‹å¥½çš„é…ç½®ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å…³é—­ Emacsã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤*~/.emacs&lt;em>æˆ–&lt;/em>~/.emacs.d*ï¼Œå¦‚æœå®ƒä»¬å­˜åœ¨çš„è¯ã€‚(Windows ç”¨æˆ·ï¼Œä½ çš„ Emacs æ–‡ä»¶å¯èƒ½åœ¨&lt;em>C:\Users\your_user_name\AppData\Roaming*ã€‚å› æ­¤ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥åˆ é™¤&lt;/em>C:\Users\jason\AppData\Roaming.emacs.d*ï¼‰ã€‚è¿™æ˜¯ Emacs å¯»æ‰¾é…ç½®æ–‡ä»¶çš„åœ°æ–¹ï¼Œåˆ é™¤è¿™äº›æ–‡ä»¶å’Œç›®å½•å°†ç¡®ä¿ä½ ä»ä¸€ä¸ªå¹²å‡€çš„åœ°æ–¹å¼€å§‹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;ol start="3">
&lt;li>ä¸‹è½½ä¸Šé¢åˆ—å‡ºçš„ Emacs é…ç½®å‹ç¼©æ–‡ä»¶å¹¶è§£å‹ã€‚å…¶å†…å®¹åº”è¯¥æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œ&lt;em>emacs-for-clojure-book1&lt;/em>ã€‚è¿è¡Œ mv path/to/emacs-for-clojure-book1 ~/.emacs.dã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>æ‰“å¼€ Emacsã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>å½“ä½ æ‰“å¼€ Emacs æ—¶ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°å¤§é‡çš„æ´»åŠ¨ï¼Œå› ä¸º Emacs æ­£åœ¨ä¸‹è½½ä¸€å †æœ‰ç”¨çš„è½¯ä»¶åŒ…ã€‚ä¸€æ—¦è¿™äº›æ´»åŠ¨åœæ­¢ï¼Œç»§ç»­å‰è¿›ï¼Œé€€å‡º Emacsï¼Œç„¶åå†æ‰“å¼€å®ƒã€‚(å¦‚æœä½ æ²¡æœ‰çœ‹åˆ°ä»»ä½•æ´»åŠ¨ï¼Œé‚£ä¹Ÿæ²¡å…³ç³»ï¼é€€å‡ºå¹¶é‡æ–°å¯åŠ¨ Emacsã€‚é€€å‡ºå¹¶é‡æ–°å¯åŠ¨ Emacs åªæ˜¯ä¸ºäº†å¥½ç©ï¼‰ã€‚åœ¨ä½ è¿™æ ·åšä¹‹åï¼Œä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªåƒå›¾ 2-3 é‚£æ ·çš„çª—å£ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/emacs-configged.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-3ï¼šEmacs åœ¨å®‰è£…äº†ä½ å¯çˆ±çš„æ–°é…ç½®åçš„æ ·å­&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬å·²ç»è®¾ç½®å¥½äº†ä¸€åˆ‡ï¼Œè®©æˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Emacs!&lt;/p>
&lt;h2 id="emacs-é€ƒé€¸èˆ±å£">Emacs é€ƒé€¸èˆ±å£&lt;/h2>
&lt;p>åœ¨æˆ‘ä»¬è¿›å…¥æœ‰è¶£çš„ä¸œè¥¿ä¹‹å‰ï¼Œä½ éœ€è¦çŸ¥é“ä¸€ä¸ªé‡è¦çš„ Emacs é”®ç»‘å®šï¼šctrl-Gã€‚è¿™ä¸ªé”®ç»‘å®šå¯ä»¥é€€å‡ºä½ è¯•å›¾è¿è¡Œçš„ä»»ä½• Emacs å‘½ä»¤ã€‚æ‰€ä»¥ï¼Œå¦‚æœäº‹æƒ…è¿›å±•ä¸é¡ºåˆ©ï¼ŒæŒ‰ä½ ctrlï¼ŒæŒ‰ Gï¼Œç„¶åå†è¯•ä¸€æ¬¡ã€‚å®ƒä¸ä¼šå…³é—­ Emacsï¼Œä¹Ÿä¸ä¼šä½¿ä½ å¤±å»ä»»ä½•å·¥ä½œï¼›å®ƒåªæ˜¯å–æ¶ˆä½ å½“å‰çš„è¡ŒåŠ¨ã€‚&lt;/p>
&lt;h2 id="emacs-ç¼“å†²åŒº">Emacs ç¼“å†²åŒº&lt;/h2>
&lt;p>æ‰€æœ‰çš„ç¼–è¾‘éƒ½å‘ç”Ÿåœ¨ Emacs çš„*ç¼“å†²åŒºä¸­ã€‚å½“ä½ ç¬¬ä¸€æ¬¡å¯åŠ¨ Emacs æ—¶ï¼Œä¸€ä¸ªåä¸º &amp;ldquo;&lt;em>scratch&lt;/em>&amp;ldquo;çš„ç¼“å†²åŒºè¢«æ‰“å¼€ã€‚Emacs æ€»æ˜¯åœ¨çª—å£çš„åº•éƒ¨æ˜¾ç¤ºå½“å‰ç¼“å†²åŒºçš„åç§°ï¼Œå¦‚å›¾ 2-4 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/emacs-buffer-name.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-4ï¼šEmacs ä¼šä¸€ç›´æ˜¾ç¤ºå½“å‰ç¼“å†²åŒºçš„åç§°ã€‚&lt;/p>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;code>*scratch*&lt;/code>ç¼“å†²åŒºå¤„ç†æ‹¬å·å’Œç¼©è¿›çš„æ–¹å¼å¯¹ Lisp å¼€å‘æ¥è¯´æ˜¯æœ€ç†æƒ³çš„ï¼Œä½†å¯¹ç¼–å†™çº¯æ–‡æœ¬å´å¾ˆä¸æ–¹ä¾¿ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸å‘ç”Ÿæ„å¤–çš„æƒ…å†µä¸‹è¿›è¡Œæ¸¸æˆã€‚è¦åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºï¼Œè¯·è¿™æ ·åšã€‚&lt;/p>
&lt;ol>
&lt;li>æŒ‰ä½ ctrl é”®å¹¶æŒ‰ä¸‹ X é”®ã€‚&lt;/li>
&lt;li>2.æ¾å¼€ ctrl é”®ã€‚&lt;/li>
&lt;li>æŒ‰ B é”®ã€‚&lt;/li>
&lt;/ol>
&lt;p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ›´ç´§å‡‘çš„æ ¼å¼æ¥è¡¨è¾¾åŒæ ·çš„åºåˆ—ã€‚Â &lt;strong>C-x b&lt;/strong>ã€‚&lt;/p>
&lt;p>æ‰§è¡Œè¿™ä¸ªæŒ‰é”®åºåˆ—åï¼Œä½ ä¼šåœ¨åº”ç”¨ç¨‹åºçš„åº•éƒ¨çœ‹åˆ°ä¸€ä¸ªæç¤ºï¼Œå¦‚å›¾ 2-5 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/emacs-buffer-prompt.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-5: è¿·ä½ ç¼“å†²åŒºæ˜¯ Emacs æç¤ºä½ è¾“å…¥çš„åœ°æ–¹ã€‚&lt;/p>
&lt;p>è¿™ä¸ªåŒºåŸŸè¢«ç§°ä¸º&lt;em>minibuffer&lt;/em>ï¼Œå®ƒæ˜¯ Emacs æç¤ºä½ è¾“å…¥çš„åœ°æ–¹ã€‚ç°åœ¨å®ƒæ­£åœ¨æç¤ºæˆ‘ä»¬è¾“å…¥ä¸€ä¸ªç¼“å†²åŒºçš„åç§°ã€‚ä½ å¯ä»¥è¾“å…¥ä¸€ä¸ªå·²ç»æ‰“å¼€çš„ç¼“å†²åŒºçš„åç§°ï¼Œä¹Ÿå¯ä»¥è¾“å…¥ä¸€ä¸ªæ–°çš„ç¼“å†²åŒºåç§°ã€‚è¾“å…¥ emacs-fun-timesï¼Œç„¶åæŒ‰å›è½¦é”®ã€‚ç°åœ¨ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªå®Œå…¨ç©ºç™½çš„ç¼“å†²åŒºï¼Œå¯ä»¥ç›´æ¥å¼€å§‹è¾“å…¥ã€‚ä½ ä¼šå‘ç°ï¼ŒæŒ‰é”®çš„å·¥ä½œæ–¹å¼ä¸ä½ æ‰€æœŸæœ›çš„å·®ä¸å¤šã€‚å­—ç¬¦åœ¨ä½ è¾“å…¥æ—¶å‡ºç°ã€‚ä¸Šã€ä¸‹ã€å·¦ã€å³æ–¹å‘é”®ä¼šåƒä½ æ‰€æœŸæœ›çš„é‚£æ ·ç§»åŠ¨ä½ ï¼Œè€Œå›è½¦é”®ä¼šåˆ›å»ºä¸€ä¸ªæ–°è¡Œã€‚&lt;/p>
&lt;p>ä½ è¿˜ä¼šæ³¨æ„åˆ°ï¼Œä½ ä¸ä¼šçªç„¶é•¿å‡ºæµ“å¯†çš„ Unix èƒ¡é¡»æˆ–ç©¿ä¸Š Birkenstocksï¼ˆé™¤éä½ ä¸€å¼€å§‹å°±æœ‰ï¼‰ã€‚è¿™åº”è¯¥æœ‰åŠ©äºç¼“è§£ä½ å¯¹ä½¿ç”¨ Emacs çš„ä»»ä½•ææƒ§æ„Ÿã€‚å½“ä½ ç©å¤Ÿäº†ä¹‹åï¼Œç»§ç»­å‰è¿›ï¼Œé€šè¿‡è¾“å…¥&lt;strong>C-x k enter&lt;/strong>æ¥æ€æ­»**çš„ç¼“å†²åŒºã€‚(è¿™å¯èƒ½ä¼šè®©äººåƒæƒŠï¼Œä½† Emacs å®é™…ä¸Šæ˜¯å¾ˆæš´åŠ›çš„ï¼Œå®ƒå……åˆ†ä½¿ç”¨äº†&lt;em>æ€&lt;/em>è¿™ä¸ªè¯ï¼‰ã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ å·²ç»æ€æ­»äº†&lt;code>emacs-fun-times&lt;/code>ç¼“å†²åŒºï¼Œä½ åº”è¯¥å›åˆ°&lt;code>*scratch*&lt;/code>ç¼“å†²åŒºã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½ å¯ä»¥ç”¨&lt;strong>C-x b&lt;/strong>åˆ›å»ºä»»æ„å¤šçš„æ–°ç¼“å†²åŒºã€‚ä½ ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„å‘½ä»¤åœ¨ç¼“å†²åŒºä¹‹é—´å¿«é€Ÿåˆ‡æ¢ã€‚å½“ä½ ä»¥è¿™ç§æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºæ—¶ï¼Œå®ƒåªå­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´åˆ°ä½ æŠŠå®ƒä¿å­˜ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼›ç¼“å†²åŒºä¸ä¸€å®šæœ‰æ–‡ä»¶æ”¯æŒï¼Œåˆ›å»ºä¸€ä¸ªç¼“å†²åŒºä¹Ÿä¸ä¸€å®šä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚è®©æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹å…³äºæ–‡ä»¶çš„å·¥ä½œã€‚&lt;/p>
&lt;h2 id="ä¸æ–‡ä»¶ä¸€èµ·å·¥ä½œ">ä¸æ–‡ä»¶ä¸€èµ·å·¥ä½œ&lt;/h2>
&lt;p>åœ¨ Emacs ä¸­æ‰“å¼€æ–‡ä»¶çš„é”®ä½æ˜¯&lt;strong>C-x C-f&lt;/strong>ã€‚æ³¨æ„ï¼Œå½“ä½ æŒ‰ä¸‹ X å’Œ F æ—¶ï¼Œä½ éœ€è¦æŒ‰ä½ ctrlã€‚å¯¼èˆªåˆ°*~/.emacs.d/customizations/ui.el*ï¼Œå®ƒå¯ä»¥è‡ªå®šä¹‰ Emacs çš„å¤–è§‚å’Œä½ ä¸å®ƒçš„äº’åŠ¨æ–¹å¼ã€‚Emacs åœ¨ä¸€ä¸ªä¸æ–‡ä»¶åç›¸åŒçš„æ–°ç¼“å†²åŒºä¸­æ‰“å¼€æ–‡ä»¶ã€‚è®©æˆ‘ä»¬è½¬åˆ°ç¬¬ 37 è¡Œï¼Œå»æ‰å‰é¢çš„åˆ†å·ï¼Œå–æ¶ˆæ³¨é‡Šã€‚å®ƒå°†çœ‹èµ·æ¥åƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">setq&lt;/span> &lt;span class="nv">initial-frame-alist&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nf">top&lt;/span> &lt;span class="k">. &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">left &lt;/span>&lt;span class="k">. &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">width&lt;/span> &lt;span class="k">. &lt;/span>&lt;span class="mi">120&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">height&lt;/span> &lt;span class="k">. &lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæ”¹å˜ &amp;ldquo;width &amp;ldquo;å’Œ &amp;ldquo;height &amp;ldquo;çš„å€¼ï¼Œå®ƒä»¬ä¸ºæ´»åŠ¨çª—å£è®¾ç½®&lt;em>å­—ç¬¦&lt;/em>çš„å°ºå¯¸ã€‚é€šè¿‡æ”¹å˜è¿™äº›å€¼ï¼Œä½ å¯ä»¥è®¾ç½® Emacs çª—å£åœ¨æ¯æ¬¡å¯åŠ¨æ—¶ä»¥æŸç§å°ºå¯¸æ‰“å¼€ã€‚ä¸€å¼€å§‹å¯ä»¥è¯•è¯•å°ä¸€ç‚¹çš„ï¼Œæ¯”å¦‚ 80 å’Œ 20ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nf">setq&lt;/span> &lt;span class="nv">initial-frame-alist&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nf">top&lt;/span> &lt;span class="k">. &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">left &lt;/span>&lt;span class="k">. &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">width&lt;/span> &lt;span class="k">. &lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">height&lt;/span> &lt;span class="k">. &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ç”¨ä¸‹é¢çš„é”®ç»‘å®šæ¥ä¿å­˜ä½ çš„æ–‡ä»¶ã€‚Â &lt;strong>C-x C-s&lt;/strong>ã€‚ä½ åº”è¯¥åœ¨ Emacs çš„åº•éƒ¨å¾—åˆ°ä¸€ä¸ªä¿¡æ¯ï¼Œå¦‚&lt;code>å†™äº†/Users/snuffleupagus/&lt;/code>.emacs.d/customizations/ui.el`ã€‚ä½ ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ä½ åœ¨å…¶ä»–åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„é”®ç»‘å®šæ¥ä¿å­˜ä½ çš„ç¼“å†²åŒºï¼ˆä¾‹å¦‚ï¼Œctrl-S æˆ– cmd-Sï¼‰ã€‚ä½ ä¸‹è½½çš„ Emacs é…ç½®åº”è¯¥å…è®¸è¿™æ ·åšï¼Œä½†å¦‚æœä¸å…è®¸ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚&lt;/p>
&lt;p>ä¿å­˜æ–‡ä»¶åï¼Œé€€å‡º Emacs å¹¶å†æ¬¡å¯åŠ¨å®ƒã€‚æˆ‘æ•¢æ‰“èµŒï¼Œå®ƒéå¸¸å°! è¯·çœ‹æˆ‘åœ¨å›¾ 2-6 ä¸­çš„ä¾‹å­ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/tinemacs.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-6ï¼šä½ å¯ä»¥é…ç½® Emacsï¼Œä½¿å…¶åœ¨æ¯æ¬¡æ‰“å¼€æ—¶éƒ½è®¾ç½®é«˜åº¦å’Œå®½åº¦ã€‚&lt;/p>
&lt;p>åŒæ ·çš„è¿‡ç¨‹è¦è¿›è¡Œå‡ æ¬¡ï¼Œç›´åˆ° Emacs ä»¥ä½ å–œæ¬¢çš„å°ºå¯¸å¼€å§‹ã€‚æˆ–è€…å†æŠŠè¿™å‡ è¡Œæ³¨é‡Šæ‰å°±å¯ä»¥äº†ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒEmacs å°†ä»¥å…¶é»˜è®¤çš„å®½åº¦å’Œé«˜åº¦æ‰“å¼€ï¼‰ã€‚å¦‚æœä½ å®Œæˆäº†å¯¹&lt;em>ui.el&lt;/em>çš„ç¼–è¾‘ï¼Œä½ å¯ä»¥ç”¨&lt;strong>C-x k&lt;/strong>å…³é—­å…¶ç¼“å†²åŒºã€‚æ— è®ºå¦‚ä½•ï¼Œä½ å·²ç»å®Œæˆäº†åœ¨ Emacs ä¸­ä¿å­˜ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„å·¥ä½œ å¦‚æœå‘ç”Ÿäº†ä¸€äº›ç–¯ç‹‚çš„äº‹æƒ…ï¼Œä½ å¯ä»¥æŒ‰ç…§&lt;a class="link" href="https://www.braveclojure.com/basic-emacs/#Anchor" target="_blank" rel="noopener"
>ç¬¬ 13 é¡µçš„ &amp;ldquo;é…ç½®&amp;rdquo;&lt;/a>ä¸­çš„æŒ‡ç¤ºæ¥ä½¿ Emacs é‡æ–°å·¥ä½œã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œåªéœ€ä½¿ç”¨&lt;strong>C-x C-f&lt;/strong>å¹¶åœ¨è¿·ä½ ç¼“å†²åŒºä¸­è¾“å…¥æ–°æ–‡ä»¶çš„è·¯å¾„ã€‚ä¸€æ—¦ä½ ä¿å­˜äº†ç¼“å†²åŒºï¼ŒEmacs å°±ä¼šæŒ‰ç…§ä½ è¾“å…¥çš„è·¯å¾„ç”¨ç¼“å†²åŒºçš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ã€‚&lt;/p>
&lt;ol>
&lt;li>åœ¨ Emacs ä¸­ï¼Œç¼–è¾‘æ˜¯åœ¨ç¼“å†²åŒº*.*ä¸­è¿›è¡Œçš„ã€‚&lt;/li>
&lt;li>è¦åˆ‡æ¢åˆ°ä¸€ä¸ªç¼“å†²åŒºï¼Œä½¿ç”¨&lt;strong>C-x b&lt;/strong>å¹¶åœ¨ minibuffer*.*ä¸­è¾“å…¥ç¼“å†²åŒºçš„åç§°ã€‚&lt;/li>
&lt;li>è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œä½¿ç”¨&lt;strong>C-x b&lt;/strong>å¹¶è¾“å…¥ä¸€ä¸ªæ–°çš„ç¼“å†²åŒºåç§°ã€‚&lt;/li>
&lt;li>è¦æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨&lt;strong>C-x C-f&lt;/strong>å¹¶å¯¼èˆªåˆ°è¯¥æ–‡ä»¶ã€‚&lt;/li>
&lt;li>
&lt;ol start="5">
&lt;li>è¦å°†ç¼“å†²åŒºä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨&lt;strong>C-x C-s&lt;/strong>ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>è¦åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œä½¿ç”¨&lt;strong>C-x C-f&lt;/strong>å¹¶è¾“å…¥æ–°æ–‡ä»¶çš„è·¯å¾„ã€‚å½“ä½ ä¿å­˜ç¼“å†²åŒºæ—¶ï¼ŒEmacs å°†åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºæ–‡ä»¶ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="é”®ç»‘å®šå’Œæ¨¡å¼">é”®ç»‘å®šå’Œæ¨¡å¼&lt;/h2>
&lt;p>ä½ å·²ç»èµ°äº†å¾ˆé•¿ä¸€æ®µè·¯äº†! ä½ ç°åœ¨å¯ä»¥åƒä¸€ä¸ªéå¸¸åŸºæœ¬çš„ç¼–è¾‘å™¨ä¸€æ ·ä½¿ç”¨ Emacsã€‚å¦‚æœä½ éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ Emacsï¼Œæˆ–è€…è¢«è¿«ä¸ Emacs ä¹¦å‘†å­é…å¯¹ï¼Œè¿™åº”è¯¥èƒ½å¸®åŠ©ä½ åº¦è¿‡éš¾å…³ã€‚&lt;/p>
&lt;p>ç„¶è€Œï¼Œè¦æƒ³çœŸæ­£æœ‰æˆæ•ˆï¼Œäº†è§£ä¸€äº›å…³äºé”®ç»‘å®šçš„*å…³é”®ç»†èŠ‚å¯¹ä½ æ¥è¯´æ˜¯å¾ˆæœ‰ç”¨çš„ï¼ˆå“ˆå“ˆï¼ï¼‰ã€‚ç„¶åæˆ‘å°†ä»‹ç» Emacs æ¨¡å¼ã€‚ä¹‹åï¼Œæˆ‘å°†ä»‹ç»ä¸€äº›æ ¸å¿ƒæœ¯è¯­ï¼Œå¹¶ä»‹ç»ä¸€äº›è¶…çº§æœ‰ç”¨çš„é”®ç»‘å®šã€‚&lt;/p>
&lt;h3 id="emacs-æ˜¯ä¸€ä¸ª-lisp-è§£é‡Šå™¨">Emacs æ˜¯ä¸€ä¸ª Lisp è§£é‡Šå™¨&lt;/h3>
&lt;p>æœ¯è¯­&lt;em>é”®ç»‘å®š&lt;/em>æºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼šEmacs å°†&lt;em>é”®å‡»æ‰“&lt;/em>ç»‘å®šåˆ°&lt;em>å‘½ä»¤&lt;/em>ä¸Šï¼Œè€Œè¿™äº›å‘½ä»¤åªæ˜¯ elisp å‡½æ•°ï¼ˆæˆ‘å°†äº¤æ›¿ä½¿ç”¨&lt;em>å‘½ä»¤&lt;/em>å’Œ&lt;em>å‡½æ•°&lt;/em>ï¼‰ã€‚ä¾‹å¦‚ï¼Œ&lt;strong>C-x b&lt;/strong>è¢«ç»‘å®šåˆ°å‡½æ•°&lt;code>switch-to-buffer&lt;/code>ã€‚åŒæ ·åœ°ï¼Œ&lt;strong>C-x C-s&lt;/strong>ä¸&lt;code>save-file&lt;/code>ç»‘å®šã€‚&lt;/p>
&lt;p>ä½† Emacs ç”šè‡³æ¯”è¿™æ›´è¿›ä¸€æ­¥ã€‚ç”šè‡³åƒ&lt;strong>f&lt;/strong>å’Œ&lt;strong>a&lt;/strong>è¿™æ ·ç®€å•çš„æŒ‰é”®ä¹Ÿè¢«ç»‘å®šåˆ°ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ &amp;ldquo;self-insert-command&amp;rdquo;ï¼Œæ˜¯å‘ä½ æ­£åœ¨ç¼–è¾‘çš„ç¼“å†²åŒºæ·»åŠ å­—ç¬¦çš„å‘½ä»¤ã€‚&lt;/p>
&lt;p>ä» Emacs çš„è§’åº¦æ¥çœ‹ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯å¹³ç­‰çš„ï¼Œä½ å¯ä»¥é‡æ–°å®šä¹‰æ‰€æœ‰çš„å‡½æ•°ï¼Œç”šè‡³åƒ&lt;code>save-file&lt;/code>è¿™æ ·çš„æ ¸å¿ƒå‡½æ•°ã€‚ä½ å¯èƒ½ä¸ä¼š&lt;em>æƒ³è¦&lt;/em>é‡æ–°å®šä¹‰æ ¸å¿ƒå‡½æ•°ï¼Œä½†ä½ å¯ä»¥ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é‡æ–°å®šä¹‰å‡½æ•°ï¼Œå› ä¸ºå°±å…¶æ ¸å¿ƒè€Œè¨€ï¼ŒEmacs åªæ˜¯ä¸€ä¸ª Lisp è§£é‡Šå™¨ï¼Œæ°å¥½åŠ è½½äº†ä»£ç ç¼–è¾‘åŠŸèƒ½ã€‚Emacs çš„å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯ç”¨ elisp ç¼–å†™çš„ï¼Œæ‰€ä»¥ä» Emacs çš„è§’åº¦æ¥çœ‹ï¼Œ&lt;code>save-file&lt;/code>åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±åƒ&lt;code>switch-to-buffer&lt;/code>å’Œä½ èƒ½è¿è¡Œçš„å‡ ä¹æ‰€æœ‰å…¶ä»–å‘½ä»¤ä¸€æ ·ã€‚ä¸ä»…å¦‚æ­¤ï¼Œä½ åˆ›å»ºçš„ä»»ä½•å‡½æ•°éƒ½è¢«å½“ä½œå†…ç½®å‡½æ•°æ¥å¯¹å¾…ã€‚ä½ ç”šè‡³å¯ä»¥ç”¨ Emacs æ¥æ‰§è¡Œ elispï¼Œåœ¨å®ƒè¿è¡Œæ—¶ä¿®æ”¹ Emacsã€‚&lt;/p>
&lt;p>ä½¿ç”¨å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ä¿®æ”¹ Emacs çš„è‡ªç”±æ˜¯ Emacs å¦‚æ­¤çµæ´»çš„åŸå› ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåƒæˆ‘è¿™æ ·çš„äººå¯¹å®ƒå¦‚æ­¤ç–¯ç‹‚ã€‚æ˜¯çš„ï¼Œå®ƒæœ‰å¾ˆå¤šè¡¨é¢ä¸Šçš„å¤æ‚æ€§ï¼Œå¯èƒ½éœ€è¦èŠ±æ—¶é—´å»å­¦ä¹ ã€‚ä½† Emacs çš„åº•å±‚æ˜¯ Lisp çš„ä¼˜é›…ç®€æ´ï¼Œä»¥åŠéšä¹‹è€Œæ¥çš„æ— é™çš„å¯ä¿®è¡¥æ€§ã€‚è¿™ç§å¯ä¿®è¡¥æ€§å¹¶ä¸å±€é™äºåˆ›å»ºå’Œé‡æ–°å®šä¹‰å‡½æ•°ã€‚ä½ è¿˜å¯ä»¥åˆ›å»ºã€é‡æ–°å®šä¹‰å’Œåˆ é™¤é”®ç»‘å®šã€‚ä»æ¦‚å¿µä¸Šè®²ï¼ŒæŒ‰é”®ç»‘å®šåªæ˜¯ä¸€ä¸ªæŸ¥è¯¢è¡¨ä¸­çš„æ¡ç›®ï¼Œå®ƒå°†æŒ‰é”®ä¸å‡½æ•°è”ç³»èµ·æ¥ï¼Œè€Œè¿™ä¸ªæŸ¥è¯¢è¡¨æ˜¯å®Œå…¨å¯ä¿®æ”¹çš„ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;strong>M-x&lt;/strong>å‡½æ•°åç§°æ¥è¿è¡Œå‘½ä»¤ï¼Œè€Œä¸éœ€è¦ç‰¹å®šçš„é”®ç»‘å®šï¼ˆä¾‹å¦‚ï¼Œ&lt;strong>M-x&lt;/strong> save-bufferï¼‰ã€‚Â &lt;em>M&lt;/em>ä»£è¡¨&lt;em>meta&lt;/em>ï¼Œè¿™æ˜¯ä¸€ä¸ªç°ä»£é”®ç›˜ä¸å…·å¤‡çš„é”®ï¼Œä½†åœ¨ Windows å’Œ Linux ä¸Šè¢« Map åˆ° altï¼Œåœ¨ Mac ä¸Šåˆ™æ˜¯ optionã€‚Â &lt;strong>M-x&lt;/strong>è¿è¡Œ&lt;code>smex&lt;/code>å‘½ä»¤ï¼Œå®ƒæç¤ºä½ è¦è¿è¡Œçš„å¦ä¸€ä¸ªå‘½ä»¤çš„åç§°ã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ å·²ç»äº†è§£äº†é”®çš„ç»‘å®šå’ŒåŠŸèƒ½ï¼Œä½ å°†èƒ½å¤Ÿç†è§£ä»€ä¹ˆæ˜¯æ¨¡å¼ä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚&lt;/p>
&lt;h3 id="æ¨¡å¼">æ¨¡å¼&lt;/h3>
&lt;p>Emacs çš„&lt;em>æ¨¡å¼&lt;/em>æ˜¯ä¸€ä¸ªé”®ç»‘å®šå’ŒåŠŸèƒ½çš„é›†åˆï¼Œå®ƒè¢«æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œå¸®åŠ©ä½ åœ¨ç¼–è¾‘ä¸åŒç±»å‹çš„æ–‡ä»¶æ—¶æé«˜å·¥ä½œæ•ˆç‡ã€‚(æ¨¡å¼ä¹Ÿå¯ä»¥åšä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚å‘Šè¯‰ Emacs å¦‚ä½•åšè¯­æ³•é«˜äº®ï¼Œä½†è¿™æ˜¯æ¬¡è¦çš„ï¼Œæˆ‘ä¸ä¼šåœ¨è¿™é‡Œä»‹ç»ã€‚)&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œå½“ä½ åœ¨ç¼–è¾‘ä¸€ä¸ª Clojure æ–‡ä»¶æ—¶ï¼Œä½ ä¼šæƒ³åŠ è½½ Clojure æ¨¡å¼ã€‚ç°åœ¨æˆ‘æ­£åœ¨å†™ä¸€ä¸ª Markdown æ–‡ä»¶å¹¶ä½¿ç”¨ Markdown æ¨¡å¼ï¼Œå®ƒæœ‰å¾ˆå¤šä¸“é—¨ç”¨äº Markdown å·¥ä½œçš„æœ‰ç”¨çš„é”®ç»‘å®šã€‚åœ¨ç¼–è¾‘ Clojure æ—¶ï¼Œæœ€å¥½æœ‰ä¸€å¥— Clojure ä¸“ç”¨çš„é”®ç»‘å®šï¼Œæ¯”å¦‚&lt;strong>C-c C-k&lt;/strong>å°†å½“å‰çš„ç¼“å†²åŒºåŠ è½½åˆ° REPL ä¸­å¹¶è¿›è¡Œç¼–è¯‘ã€‚&lt;/p>
&lt;p>æ¨¡å¼æœ‰ä¸¤ç§ç±»å‹ã€‚Â &lt;em>ä¸»è¦&lt;/em>æ¨¡å¼å’Œ&lt;em>æ¬¡è¦&lt;/em>æ¨¡å¼ã€‚Markdown æ¨¡å¼å’Œ Clojure æ¨¡å¼æ˜¯ä¸»è¦æ¨¡å¼ã€‚ä¸»è¦æ¨¡å¼é€šå¸¸åœ¨ä½ æ‰“å¼€æ–‡ä»¶æ—¶ç”± Emacs è®¾ç½®ï¼Œä½†ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿è¡Œç›¸å…³çš„ Emacs å‘½ä»¤æ˜ç¡®åœ°è®¾ç½®æ¨¡å¼ï¼Œä¾‹å¦‚ç”¨&lt;strong>M-x&lt;/strong> clojure-mode æˆ–&lt;strong>M-x&lt;/strong> major-modeã€‚æ¯æ¬¡åªæœ‰ä¸€ç§ä¸»è¦æ¨¡å¼æ˜¯æ¿€æ´»çš„ã€‚&lt;/p>
&lt;p>ä¸»è¦æ¨¡å¼æ˜¯é’ˆå¯¹æŸç§æ–‡ä»¶ç±»å‹æˆ–è¯­è¨€çš„ Emacsï¼Œè€Œæ¬¡è¦æ¨¡å¼é€šå¸¸æä¾›å¯¹å„ç§æ–‡ä»¶ç±»å‹éƒ½æœ‰ç”¨çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œabbrev æ¨¡å¼ &amp;ldquo;æ ¹æ®é¢„å…ˆå®šä¹‰çš„ç¼©å†™å®šä¹‰è‡ªåŠ¨å±•å¼€æ–‡æœ¬&amp;rdquo;ï¼ˆæ ¹æ® Emacs æ‰‹å†Œ&lt;a class="link" href="https://www.braveclojure.com/basic-emacs/#footnote-5680-1" target="_blank" rel="noopener"
>1.&lt;/a>ï¼‰ã€‚ä½ å¯ä»¥åŒæ—¶æ¿€æ´»å¤šä¸ªæ¬¡è¦æ¨¡å¼ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥åœ¨*æ¨¡å¼è¡Œä¸­çœ‹åˆ°å“ªäº›æ¨¡å¼å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œå¦‚å›¾ 2-7 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/emacs-mode-line.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-7ï¼šæ¨¡å¼è¡Œæ˜¾ç¤ºå“ªäº›æ¨¡å¼æ˜¯æ´»åŠ¨çš„ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œ Emacs æ²¡æœ‰ä¸ºå®ƒåŠ è½½ä¸€ä¸ªä¸»è¦æ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¨¡å¼å¾ˆæœ‰å¯èƒ½å­˜åœ¨ã€‚ä½ åªéœ€è¦ä¸‹è½½å®ƒçš„è½¯ä»¶åŒ…ã€‚è¯´åˆ°è¿™ä¸ª &amp;hellip; .&lt;/p>
&lt;h3 id="å®‰è£…è½¯ä»¶åŒ…">å®‰è£…è½¯ä»¶åŒ…&lt;/h3>
&lt;p>è®¸å¤šæ¨¡å¼éƒ½æ˜¯ä»¥&lt;em>åŒ…&lt;/em>çš„å½¢å¼å‘å¸ƒçš„ï¼Œè¿™åªæ˜¯å­˜å‚¨åœ¨åŒ…ä»“åº“ä¸­çš„ elisp æ–‡ä»¶çš„æ†ç»‘ã€‚ä½ åœ¨æœ¬ç« å¼€å§‹æ—¶å®‰è£…çš„ Emacs 24ï¼Œä½¿æµè§ˆå’Œå®‰è£…è½¯ä»¶åŒ…å˜å¾—éå¸¸å®¹æ˜“ã€‚Â &lt;strong>M-x&lt;/strong> package-list-packages ä¼šæ˜¾ç¤ºå‡ ä¹æ‰€æœ‰å¯ç”¨çš„è½¯ä»¶åŒ…ï¼›åªè¦ç¡®ä¿ä½ å…ˆè¿è¡Œ&lt;strong>M-x&lt;/strong> package-refresh-contents å°±èƒ½å¾—åˆ°æœ€æ–°çš„åˆ—è¡¨ã€‚ä½ å¯ä»¥ç”¨&lt;strong>M-x&lt;/strong> package-install æ¥å®‰è£…è½¯ä»¶åŒ…ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡åŠ è½½ä½ è‡ªå·±çš„ elisp æ–‡ä»¶æˆ–ä½ åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„æ–‡ä»¶æ¥å®šåˆ¶ Emacsã€‚Emacs åˆå­¦è€…æŒ‡å—ã€‹ï¼ˆè§*&lt;a class="link" href="http://www.masteringemacs.org/articles/2010/10/04/beginners-guide-to-emacs/" target="_blank" rel="noopener"
>http://www.masteringemacs.org/articles/2010/10/04/beginners-guide-to-emacs/&lt;/a>*ï¼‰åœ¨æ–‡ç« åº•éƒ¨çš„ &amp;ldquo;åŠ è½½æ–°åŒ… &amp;ldquo;ä¸€èŠ‚ä¸­å¯¹å¦‚ä½•åŠ è½½è‡ªå®šä¹‰æ–‡ä»¶æœ‰å¾ˆå¥½çš„æè¿°ã€‚&lt;/p>
&lt;h2 id="æ ¸å¿ƒç¼–è¾‘æœ¯è¯­å’Œé”®ç»‘å®š">æ ¸å¿ƒç¼–è¾‘æœ¯è¯­å’Œé”®ç»‘å®š&lt;/h2>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/pirate.png"
loading="lazy"
>&lt;/p>
&lt;p>å¦‚æœä½ åªæƒ³æŠŠ Emacs å½“åšä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨æ¥ä½¿ç”¨ï¼Œä½ å¯ä»¥å®Œå…¨è·³è¿‡è¿™ä¸€èŠ‚ï¼ä½†ä½ å°†ä¼šé”™è¿‡å¾ˆå¤šä¸œè¥¿ã€‚ä½†ä½ å°†ä¼šé”™è¿‡ä¸€äº›å¥½ä¸œè¥¿ã€‚åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç» Emacs çš„å…³é”®æœ¯è¯­ï¼›å¦‚ä½•é€‰æ‹©ã€å‰ªåˆ‡ã€å¤åˆ¶å’Œç²˜è´´æ–‡æœ¬ï¼›å¦‚ä½•é€‰æ‹©ã€å‰ªåˆ‡ã€å¤åˆ¶å’Œç²˜è´´æ–‡æœ¬ï¼ˆçœ‹åˆ°æˆ‘åšäº†ä»€ä¹ˆå—ï¼Ÿ å“ˆå“ˆå“ˆï¼ï¼‰ï¼›ä»¥åŠå¦‚ä½•æœ‰æ•ˆåœ°åœ¨ç¼“å†²åŒºå†…ç§»åŠ¨ã€‚&lt;/p>
&lt;p>è¦æƒ³å¼€å§‹ï¼Œè¯·åœ¨ Emacs ä¸­æ‰“å¼€ä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œå¹¶å°†å…¶å‘½åä¸º&lt;em>jack-handy&lt;/em>ã€‚ç„¶åè¾“å…¥ä»¥ä¸‹æ°å…‹-æ±‰è¿ªçš„è¯­å½•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">If&lt;/span> &lt;span class="nv">you&lt;/span> &lt;span class="nv">were&lt;/span> &lt;span class="nv">a&lt;/span> &lt;span class="nv">pirate&lt;/span>, &lt;span class="nv">you&lt;/span> &lt;span class="nv">know&lt;/span> &lt;span class="nv">what&lt;/span> &lt;span class="nv">would&lt;/span> &lt;span class="nv">be&lt;/span> &lt;span class="nv">the&lt;/span> &lt;span class="nv">one&lt;/span> &lt;span class="nv">thing&lt;/span> &lt;span class="nv">that&lt;/span> &lt;span class="nv">would&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">really&lt;/span> &lt;span class="nv">make&lt;/span> &lt;span class="nv">you&lt;/span> &lt;span class="nv">mad?&lt;/span> &lt;span class="nv">Treasure&lt;/span> &lt;span class="nv">chests&lt;/span> &lt;span class="nv">with&lt;/span> &lt;span class="nv">no&lt;/span> &lt;span class="nv">handles.&lt;/span> &lt;span class="nv">How&lt;/span> &lt;span class="nv">the&lt;/span> &lt;span class="nv">hell&lt;/span> &lt;span class="nv">are&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">you&lt;/span> &lt;span class="nv">supposed&lt;/span> &lt;span class="nv">to&lt;/span> &lt;span class="nv">carry&lt;/span> &lt;span class="nv">it?!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">The&lt;/span> &lt;span class="nv">face&lt;/span> &lt;span class="nv">of&lt;/span> &lt;span class="nv">a&lt;/span> &lt;span class="nv">child&lt;/span> &lt;span class="nv">can&lt;/span> &lt;span class="nv">say&lt;/span> &lt;span class="nv">it&lt;/span> &lt;span class="nv">all&lt;/span>, &lt;span class="nv">especially&lt;/span> &lt;span class="nv">the&lt;/span> &lt;span class="nv">mouth&lt;/span> &lt;span class="nv">part&lt;/span> &lt;span class="nv">of&lt;/span> &lt;span class="nv">the&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">face.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">To&lt;/span> &lt;span class="nv">me&lt;/span>, &lt;span class="nv">boxing&lt;/span> &lt;span class="nv">is&lt;/span> &lt;span class="nv">like&lt;/span> &lt;span class="nv">a&lt;/span> &lt;span class="nv">ballet&lt;/span>, &lt;span class="nv">except&lt;/span> &lt;span class="nv">there&lt;/span>&lt;span class="ss">&amp;#39;s&lt;/span> &lt;span class="nv">no&lt;/span> &lt;span class="nv">music&lt;/span>, &lt;span class="nv">no&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">choreography&lt;/span>, &lt;span class="nb">and &lt;/span>&lt;span class="nv">the&lt;/span> &lt;span class="nv">dancers&lt;/span> &lt;span class="nv">hit&lt;/span> &lt;span class="nv">each&lt;/span> &lt;span class="nv">other.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨è¿™ä¸ªä¾‹å­æ¥è¯•éªŒæœ¬èŠ‚ä¸­çš„å¯¼èˆªå’Œç¼–è¾‘ã€‚&lt;/p>
&lt;h3 id="ç‚¹">ç‚¹&lt;/h3>
&lt;p>å¦‚æœä½ ä¸€ç›´åœ¨å…³æ³¨ï¼Œä½ åº”è¯¥åœ¨ä½ çš„ Emacs ç¼“å†²åŒºçœ‹åˆ°ä¸€ä¸ªæ©˜çº¢è‰²çš„çŸ©å½¢ã€‚è¿™å°±æ˜¯&lt;em>æ¸¸æ ‡&lt;/em>ï¼Œå®ƒæ˜¯&lt;em>ç‚¹&lt;/em>çš„å›¾å½¢è¡¨ç¤ºã€‚ç‚¹æ˜¯æ‰€æœ‰é­”æ³•å‘ç”Ÿçš„åœ°æ–¹ï¼šä½ åœ¨ç‚¹ä¸Šæ’å…¥æ–‡æœ¬ï¼Œå¤§å¤šæ•°ç¼–è¾‘å‘½ä»¤éƒ½æ˜¯ä¸ç‚¹æœ‰å…³çš„ã€‚å³ä½¿ä½ çš„å…‰æ ‡çœ‹èµ·æ¥æ˜¯åœ¨ä¸€ä¸ªå­—ç¬¦çš„ä¸Šé¢ï¼Œä½†ç‚¹å®é™…ä¸Šæ˜¯ä½äºè¯¥å­—ç¬¦å’Œå‰ä¸€ä¸ªå­—ç¬¦ä¹‹é—´ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼ŒæŠŠä½ çš„å…‰æ ‡æ”¾åœ¨&lt;em>If you were a pirate&lt;/em>ä¸­çš„&lt;em>f&lt;/em>ä¸Šã€‚ç‚¹å°±ä½äº&lt;em>I&lt;/em>å’Œ&lt;em>f&lt;/em>ä¹‹é—´ã€‚ç°åœ¨ï¼Œå¦‚æœä½ ä½¿ç”¨&lt;strong>C-k&lt;/strong>ï¼Œä»å­—æ¯&lt;em>f&lt;/em>å¼€å§‹çš„æ‰€æœ‰æ–‡å­—å°†æ¶ˆå¤±ã€‚Â &lt;strong>C-k&lt;/strong>è¿è¡Œå‘½ä»¤&lt;code>kill-line&lt;/code>ï¼Œå®ƒ*æ€äº†å½“å‰è¡Œä¸­ä»ç‚¹å¼€å§‹çš„æ‰€æœ‰æ–‡å­—ï¼ˆæˆ‘å°†åœ¨åé¢è®²åˆ°æ›´å¤šçš„æ€æˆ®ï¼‰ã€‚ç”¨**C-/**æ’¤é”€è¿™ä¸€æ”¹å˜ã€‚å¦å¤–ï¼Œå°è¯•ç”¨æ­£å¸¸çš„æ“ä½œç³»ç»Ÿçš„é”®ç»‘å®šæ¥æ’¤æ¶ˆï¼›è¿™ä¹Ÿåº”è¯¥æ˜¯æœ‰æ•ˆçš„ã€‚&lt;/p>
&lt;h2 id="ç§»åŠ¨">ç§»åŠ¨&lt;/h2>
&lt;p>ä½ å¯ä»¥åƒå…¶ä»–ç¼–è¾‘å™¨ä¸€æ ·ç”¨æ–¹å‘é”®æ¥ç§»åŠ¨ç‚¹ï¼Œä½†è®¸å¤šé”®çš„ç»‘å®šå¯ä»¥è®©ä½ æ›´æœ‰æ•ˆåœ°è¿›è¡Œå¯¼èˆªï¼Œå¦‚è¡¨ 2-1 æ‰€ç¤ºã€‚&lt;/p>
&lt;ol>
&lt;li>è¡¨ 2-1: æ–‡æœ¬å¯¼èˆªçš„é”®ä½ç»‘å®š&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å…³é”®å­—&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>C-a&lt;/strong>&lt;/td>
&lt;td>ç§»åŠ¨åˆ°è¡Œé¦–ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-m&lt;/strong>&lt;/td>
&lt;td>ç§»åŠ¨åˆ°è¯¥è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-e&lt;/strong>&lt;/td>
&lt;td>ç§»åŠ¨åˆ°è¡Œå°¾ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-f&lt;/strong>&lt;/td>
&lt;td>å‘å‰ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>*&lt;em>C-b&lt;/em> *å‘åç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-f&lt;/strong>&lt;/td>
&lt;td>å‘å‰ç§»åŠ¨ä¸€ä¸ªå­—ï¼ˆæˆ‘ç»å¸¸ç”¨è¿™ä¸ªï¼‰ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-b&lt;/strong>&lt;/td>
&lt;td>å‘åç§»åŠ¨ä¸€ä¸ªå­—ï¼ˆæˆ‘ä¹Ÿç»å¸¸ç”¨è¿™ä¸ªï¼‰ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-s&lt;/strong>&lt;/td>
&lt;td>Regex æœç´¢å½“å‰ç¼“å†²åŒºå†…çš„æ–‡æœ¬ï¼Œå¹¶ç§»åŠ¨åˆ°å®ƒã€‚å†æŒ‰ä¸€æ¬¡&lt;strong>C-s&lt;/strong>ï¼Œç§»åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-r&lt;/strong>&lt;/td>
&lt;td>ä¸&lt;strong>C-s&lt;/strong>ç›¸åŒï¼Œä½†ä»¥åå‘æ–¹å¼æœç´¢ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-&amp;lt;&lt;/strong>&lt;/td>
&lt;td>ç§»åˆ°ç¼“å†²åŒºçš„å¼€å¤´ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-&amp;gt;&lt;/strong>&lt;/td>
&lt;td>ç§»åŠ¨åˆ°ç¼“å†²åŒºçš„æœ«ç«¯ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-g g&lt;/strong>&lt;/td>
&lt;td>è½¬åˆ°è¯¥è¡Œã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>æ¥å§ï¼Œåœ¨ä½ çš„***ç¼“å†²åŒºé‡Œè¯•è¯•è¿™äº›é”®çš„ç»‘å®š!&lt;/p>
&lt;h3 id="å¸¦åŒºåŸŸçš„é€‰æ‹©">å¸¦åŒºåŸŸçš„é€‰æ‹©&lt;/h3>
&lt;p>åœ¨ Emacs ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸&lt;em>é€‰æ‹©&lt;/em>æ–‡æœ¬ã€‚æˆ‘ä»¬åˆ›å»º&lt;em>åŒºåŸŸ&lt;/em>ï¼Œå¹¶é€šè¿‡ç”¨&lt;strong>C-spc&lt;/strong>ï¼ˆctrl-spacebarï¼‰è®¾ç½®*æ ‡è®°æ¥å®ç°ã€‚ç„¶åï¼Œå½“ä½ ç§»åŠ¨ç‚¹æ—¶ï¼Œæ ‡è®°å’Œç‚¹ä¹‹é—´çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯åŒºåŸŸã€‚è¿™ä¸ shift é€‰æ‹©æ–‡æœ¬çš„åŸºæœ¬ç›®çš„éå¸¸ç›¸ä¼¼ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼Œåœ¨ä½ çš„****ç¼“å†²åŒºé‡Œåšä»¥ä¸‹äº‹æƒ…ã€‚&lt;/p>
&lt;ol>
&lt;li>è½¬åˆ°æ–‡ä»¶çš„å¼€å¤´ã€‚&lt;/li>
&lt;li>ä½¿ç”¨&lt;strong>C-spc&lt;/strong>ã€‚&lt;/li>
&lt;li>ä½¿ç”¨&lt;strong>M-f&lt;/strong>ä¸¤æ¬¡ã€‚ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªé«˜äº®çš„åŒºåŸŸï¼ŒåŒ…æ‹¬&lt;em>If you&lt;/em>ã€‚&lt;/li>
&lt;li>
&lt;ol start="4">
&lt;li>æŒ‰é€€æ ¼é”®ã€‚è¿™å°†ä¼šåˆ é™¤&lt;em>å¦‚æœä½ &lt;/em>ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>ä½¿ç”¨æ ‡è®°è€Œä¸æ˜¯ Shift é€‰æ‹©æ–‡æœ¬çš„ä¸€ä¸ªå¾ˆé…·çš„äº‹æƒ…æ˜¯ï¼Œä½ å¯ä»¥åœ¨è®¾ç½®æ ‡è®°åè‡ªç”±ä½¿ç”¨ Emacs çš„æ‰€æœ‰ç§»åŠ¨å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªæ ‡è®°ï¼Œç„¶åç”¨&lt;strong>C-s&lt;/strong>æ¥æœç´¢ç¼“å†²åŒºå†…å‡ ç™¾è¡Œçš„ä¸€äº›æ–‡æœ¬ã€‚è¿™æ ·åšå°†åˆ›å»ºä¸€ä¸ªéå¸¸å¤§çš„åŒºåŸŸï¼Œè€Œä½ å°±ä¸å¿…ç´§å¼ åœ°æŒ‰ä½ Shift é”®äº†ã€‚&lt;/p>
&lt;p>åŒºåŸŸè¿˜å¯ä»¥è®©ä½ æŠŠä¸€ä¸ªæ“ä½œé™åˆ¶åœ¨ç¼“å†²åŒºçš„æœ‰é™åŒºåŸŸå†…ã€‚è¯•è¯•è¿™ä¸ªã€‚&lt;/p>
&lt;ol>
&lt;li>åˆ›å»ºä¸€ä¸ªåŒºåŸŸï¼ŒåŒ…æ‹¬&lt;em>å­©å­çš„è„¸å¯ä»¥è¯´æ˜ä¸€åˆ‡&lt;/em>ã€‚&lt;/li>
&lt;li>
&lt;ol start="2">
&lt;li>ä½¿ç”¨&lt;strong>M-x&lt;/strong>æ›¿æ¢å­—ç¬¦ä¸²ï¼Œç”¨&lt;em>head&lt;/em>æ›¿æ¢&lt;em>face&lt;/em>ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>è¿™å°†åœ¨å½“å‰åŒºåŸŸå†…è¿›è¡Œæ›¿æ¢ï¼Œè€Œä¸æ˜¯åœ¨ç‚¹ä¹‹åçš„æ•´ä¸ªç¼“å†²åŒºå†…è¿›è¡Œæ›¿æ¢ï¼Œè¿™æ˜¯é»˜è®¤è¡Œä¸ºã€‚&lt;/p>
&lt;h3 id="æ€æˆ®å’Œæ€æˆ®ç¯">æ€æˆ®å’Œæ€æˆ®ç¯&lt;/h3>
&lt;p>åœ¨å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥&lt;em>åˆ‡å‰²&lt;/em>æ–‡æœ¬ï¼Œè¿™åªæ˜¯è½»å¾®çš„æš´åŠ›ã€‚æˆ‘ä»¬è¿˜å¯ä»¥&lt;em>å¤åˆ¶&lt;/em>å’Œ&lt;em>ç²˜è´´&lt;/em>ã€‚å‰ªåˆ‡å’Œå¤åˆ¶å°†é€‰æ‹©çš„å†…å®¹æ·»åŠ åˆ°å‰ªè´´æ¿ä¸Šï¼Œè€Œç²˜è´´åˆ™å°†å‰ªè´´æ¿ä¸Šçš„å†…å®¹å¤åˆ¶åˆ°å½“å‰çš„åº”ç”¨ç¨‹åºä¸­ã€‚åœ¨ Emacs ä¸­ï¼Œæˆ‘ä»¬é‡‡å–æ€äººçš„æ–¹æ³•ï¼Œ&lt;em>æ€&lt;/em>åŒºåŸŸï¼ŒæŠŠå®ƒä»¬åŠ å…¥åˆ°&lt;em>æ€åœˆ&lt;/em>ã€‚å½“ä½ çŸ¥é“ä½ æ­£åœ¨æµªè´¹æ•°åƒå­—èŠ‚çš„æ–‡æœ¬æ—¶ï¼Œä½ ä¸è§‰å¾—&lt;em>å‹‡æ•¢&lt;/em>å’Œ&lt;em>åšå¼º&lt;/em>å—ï¼Ÿç„¶åæˆ‘ä»¬å¯ä»¥&lt;em>yank&lt;/em>ï¼Œåœ¨ç‚¹ä¸Šæ’å…¥æœ€è¿‘æ€æ­»çš„æ–‡æœ¬ã€‚æˆ‘ä»¬è¿˜å¯ä»¥&lt;em>å¤åˆ¶&lt;/em>æ–‡æœ¬åˆ°æ€æˆ®ç¯ï¼Œè€Œä¸éœ€è¦çœŸæ­£æ€æ­»å®ƒã€‚&lt;/p>
&lt;p>ä¸ºä»€ä¹ˆè¦ç”¨è¿™äº›ç—…æ€çš„æœ¯è¯­å‘¢ï¼Ÿå—¯ï¼Œé¦–å…ˆï¼Œå½“ä½ å¬åˆ°æœ‰äººåœ¨ Emacs ä¸­è°ˆè®ºæ€æ­»ä¸œè¥¿æ—¶ï¼Œä½ ä¸ä¼šæ„Ÿåˆ°å®³æ€•ã€‚ä½†æ›´é‡è¦çš„æ˜¯ï¼ŒEmacs å…è®¸ä½ åšä¸€äº›å…¸å‹çš„å‰ªåˆ‡/å¤åˆ¶/ç²˜è´´å‰ªè´´æ¿åŠŸèƒ½é›†æ‰€ä¸èƒ½åšçš„å·¥ä½œã€‚&lt;/p>
&lt;p>Emacs åœ¨æ€æˆ®ç¯ä¸Šå­˜å‚¨äº†å¤šä¸ªæ–‡æœ¬å—ï¼Œä½ å¯ä»¥å¾ªç¯ä½¿ç”¨å®ƒä»¬ã€‚è¿™å¾ˆé…·ï¼Œå› ä¸ºä½ å¯ä»¥é€šè¿‡å¾ªç¯æ¥æ‰¾å›ä½ å¾ˆä¹…ä¹‹å‰æ€æ­»çš„æ–‡æœ¬ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªåŠŸèƒ½çš„å®é™…åº”ç”¨ã€‚&lt;/p>
&lt;ol>
&lt;li>åœ¨ç¬¬ä¸€è¡Œçš„&lt;em>Treasure&lt;/em>è¿™ä¸ªè¯ä¸Šåˆ›å»ºä¸€ä¸ªåŒºåŸŸã€‚&lt;/li>
&lt;li>2.ä½¿ç”¨&lt;strong>M-w&lt;/strong>ï¼Œå®ƒä¸ &amp;ldquo;æ€æ­»-å¾ªç¯-ä¿å­˜ &amp;ldquo;å‘½ä»¤ç»‘å®šã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ&lt;strong>M-w&lt;/strong>å°±åƒå¤åˆ¶ä¸€æ ·ã€‚å®ƒå°†è¯¥åŒºåŸŸæ·»åŠ åˆ°æ€æˆ®ç¯ä¸­ï¼Œè€Œä¸ä»ä½ çš„ç¼“å†²åŒºä¸­åˆ é™¤å®ƒã€‚&lt;/li>
&lt;li>å°†æŒ‡é’ˆç§»åˆ°æœ€åä¸€è¡Œçš„&lt;em>choreography&lt;/em>å­—æ ·ä¸Šã€‚&lt;/li>
&lt;li>ä½¿ç”¨&lt;strong>M-d&lt;/strong>ï¼Œå®ƒä¸&lt;code>kill-word&lt;/code>å‘½ä»¤ç»‘å®šã€‚è¿™å°†æŠŠ&lt;em>choreogra**phy&lt;/em>æ·»åŠ åˆ°æ€æˆ®ç¯ä¸­ï¼Œå¹¶å°†å…¶ä»ä½ çš„ç¼“å†²åŒºä¸­åˆ é™¤ã€‚&lt;/li>
&lt;li>ä½¿ç”¨&lt;strong>C-y&lt;/strong>ã€‚è¿™å°†æŠŠä½ åˆšåˆšæ€æ­»çš„æ–‡å­—&lt;em>choreogra&lt;/em>phy*ï¼Œæ’å…¥åˆ°ç‚¹çš„ä½ç½®ã€‚&lt;/li>
&lt;li>ä½¿ç”¨&lt;strong>M-y&lt;/strong>ã€‚è¿™å°†åˆ é™¤&lt;em>choreography&lt;/em>ï¼Œå¹¶æ‹‰å‡ºæ€æˆ®ç¯ä¸Šçš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œ&lt;em>Treasure&lt;/em>ã€‚&lt;/li>
&lt;/ol>
&lt;p>ä½ å¯ä»¥åœ¨è¡¨ 2-2 ä¸­çœ‹åˆ°ä¸€äº›æœ‰ç”¨çš„æ€æˆ®/æ‹‰æ‰¯é”®çš„ç»‘å®šã€‚&lt;/p>
&lt;ol>
&lt;li>è¡¨ 2-2ï¼šæ€æˆ®å’Œæ‹‰æ‰¯çš„é”®ä½ç»‘å®š æ–‡æœ¬&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å…³é”®å­—&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>C-w&lt;/strong>&lt;/td>
&lt;td>æ€æˆ®åŒºåŸŸã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-w&lt;/strong>&lt;/td>
&lt;td>å¤åˆ¶åŒºåŸŸåˆ°æ€æˆ®ç¯ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-y&lt;/strong>&lt;/td>
&lt;td>ç»åˆ‘ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-y&lt;/strong>&lt;/td>
&lt;td>åœ¨æ‹‰åŠ¨åå¾ªç¯ä½¿ç”¨æ€ä¼¤ç¯ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-d&lt;/strong>&lt;/td>
&lt;td>æ€å­—ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-k&lt;/strong>&lt;/td>
&lt;td>æ€è¡Œã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="ç¼–è¾‘å’Œå¸®åŠ©">ç¼–è¾‘å’Œå¸®åŠ©&lt;/h3>
&lt;p>è¡¨ 2-3 æ˜¾ç¤ºäº†ä¸€äº›é¢å¤–çš„ã€æœ‰ç”¨çš„ç¼–è¾‘é”®ç»‘å®šï¼Œä½ åº”è¯¥çŸ¥é“å¦‚ä½•å¤„ç†é—´è·å’Œæ‰©å±•æ–‡æœ¬ã€‚&lt;/p>
&lt;ol>
&lt;li>è¡¨ 2-3ï¼šå…¶ä»–æœ‰ç”¨çš„ç¼–è¾‘é”®ç»‘å®šæ–¹å¼&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å…³é”®å­—&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>*&lt;em>Tab&lt;/em>&lt;/td>
&lt;td>ç¼©è¿›è¡Œã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-j&lt;/strong>&lt;/td>
&lt;td>æ–°è¡Œå’Œç¼©è¿›ï¼Œç›¸å½“äºå›è½¦åçš„ tabã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-/&lt;/strong>&lt;/td>
&lt;td>å¬‰çš®å£«æ‰©å±•ï¼›å¾ªç¯æµè§ˆç‚¹ä¹‹å‰çš„æ–‡æœ¬å¯èƒ½çš„æ‰©å±•æ–¹å¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>*&lt;em>M-*&lt;/em>&lt;/td>
&lt;td>åˆ é™¤ç‚¹å‘¨å›´çš„æ‰€æœ‰ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ã€‚(æˆ‘ç»å¸¸ä½¿ç”¨è¿™ä¸ªã€‚)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Emacs ä¹Ÿæœ‰å¾ˆå¥½çš„å†…ç½®å¸®åŠ©ã€‚è¡¨ 2-4 ä¸­æ˜¾ç¤ºçš„ä¸¤ä¸ªé”®ç»‘å®šå°†ä¸ºä½ æä¾›è‰¯å¥½çš„æœåŠ¡ã€‚&lt;/p>
&lt;ol>
&lt;li>è¡¨ 2-4ï¼šå†…ç½®å¸®åŠ©çš„é”®ä½ç»‘å®š&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å…³é”®å­—&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>C-h k&lt;/strong> &lt;strong>é”®ç»‘å®š&lt;/strong> è¯´æ˜ä¸è¯¥é”®ç»‘å®šçš„åŠŸèƒ½ã€‚ä¸ºäº†ä½¿å…¶å‘æŒ¥ä½œç”¨ï¼Œä½ åœ¨è¾“å…¥&lt;strong>C-h k&lt;/strong>åå®é™…æ‰§è¡ŒæŒ‰é”®åºåˆ—ã€‚&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-h f&lt;/strong> *æè¿°åŠŸèƒ½ã€‚&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>å¸®åŠ©æ–‡æœ¬å‡ºç°åœ¨ä¸€ä¸ªæ–°çš„*çª—å£ä¸­ï¼Œè¿™ä¸ªæ¦‚å¿µæˆ‘å°†åœ¨æœ¬ç« åé¢ä»‹ç»ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‰&lt;strong>C-x o q&lt;/strong>å…³é—­å¸®åŠ©çª—å£ã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨-emacs-ä¸-clojure">ä½¿ç”¨ Emacs ä¸ Clojure&lt;/h2>
&lt;p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•ä½¿ç”¨ Emacs æ¥æœ‰æ•ˆåœ°å¼€å‘ä¸€ä¸ª Clojure åº”ç”¨ç¨‹åºã€‚ä½ å°†å­¦ä¹ å¦‚ä½•å¯åŠ¨ä¸€ä¸ªä¸ Emacs ç›¸è¿çš„ REPL è¿›ç¨‹ï¼Œä»¥åŠå¦‚ä½•ä¸ Emacs çª—å£ä¸€èµ·å·¥ä½œã€‚ç„¶åï¼Œæˆ‘å°†ä»‹ç»å¤§é‡æœ‰ç”¨çš„é”®ç»‘å®šï¼Œç”¨äºæ±‚å€¼è¡¨è¾¾å¼ã€ç¼–è¯‘æ–‡ä»¶å’Œæ‰§è¡Œå…¶ä»–æ–¹ä¾¿çš„ä»»åŠ¡ã€‚æœ€åï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•å¤„ç† Clojure çš„é”™è¯¯ï¼Œå¹¶ä»‹ç» Paredit çš„ä¸€äº›åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ç§å¯é€‰çš„æ¬¡è¦æ¨¡å¼ï¼Œå¯¹ç¼–å†™å’Œç¼–è¾‘ Lisp é£æ ¼è¯­è¨€çš„ä»£ç å¾ˆæœ‰ç”¨ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³å¼€å§‹é’»ç ” Clojure ä»£ç ï¼Œè¯·åŠ¡å¿…è·³è¿‡å‰é¢çš„å†…å®¹ï¼ä½ å¯ä»¥åœ¨ä»¥åå†å›æ¥ã€‚ä½ å¯ä»¥ç¨åå†å›æ¥ã€‚&lt;/p>
&lt;h3 id="å¼€å¯ä½ çš„-repl">å¼€å¯ä½ çš„ REPL&lt;/h3>
&lt;p>æ­£å¦‚ä½ åœ¨ç¬¬ 1 ç« ä¸­æ‰€å­¦åˆ°çš„ï¼ŒREPL å…è®¸ä½ äº¤äº’åœ°ç¼–å†™å’Œè¿è¡Œ Clojure ä»£ç ã€‚REPL æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Clojure ç¨‹åºï¼Œå®ƒç»™ä½ ä¸€ä¸ªæç¤ºï¼Œç„¶åè¯»å–ä½ çš„è¾“å…¥ï¼Œæ±‚å€¼å®ƒï¼Œæ‰“å°ç»“æœï¼Œå¹¶å¾ªç¯è¿”å›åˆ°æç¤ºã€‚åœ¨ç¬¬ 1 ç« ä¸­ï¼Œä½ åœ¨ç»ˆç«¯çª—å£ç”¨&lt;code>lein repl&lt;/code>å¯åŠ¨äº† REPLã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†ç›´æ¥åœ¨ Clojure ä¸­å¯åŠ¨ä¸€ä¸ª REPLã€‚&lt;/p>
&lt;p>ä¸ºäº†å°† Emacs è¿æ¥åˆ° REPLï¼Œä½ å°†ä½¿ç”¨ Emacs è½¯ä»¶åŒ… CIDERï¼Œå¯åœ¨*[GitHub - clojure-emacs/cider: The Clojure Interactive Development Environment that Rocks for Emacs]ï¼ˆ&lt;a class="link" href="https://github.com/clojure-emacs/cider/" target="_blank" rel="noopener"
>https://github.com/clojure-emacs/cider/&lt;/a>ï¼‰*ã€‚å¦‚æœä½ æŒ‰ç…§æœ¬ç« å‰é¢çš„é…ç½®è¯´æ˜ï¼Œä½ åº”è¯¥å·²ç»å®‰è£…äº†å®ƒï¼Œä½†ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿è¡Œ&lt;strong>M-x&lt;/strong>åŒ…-å®‰è£…ï¼Œè¾“å…¥ ciderï¼Œç„¶åæŒ‰å›è½¦é”®æ¥å®‰è£…å®ƒã€‚&lt;/p>
&lt;p>CIDER å…è®¸ä½ åœ¨ Emacs ä¸­å¯åŠ¨ä¸€ä¸ª REPLï¼Œå¹¶ä¸ºä½ æä¾›é”®ç»‘å®šï¼Œä½¿ä½ èƒ½æ›´æœ‰æ•ˆåœ°ä¸ REPL è¿›è¡Œäº¤äº’ã€‚ç°åœ¨å°±å»å¯åŠ¨ä¸€ä¸ª REPL ä¼šè¯å§ã€‚ä½¿ç”¨ Emacsï¼Œæ‰“å¼€&lt;em>clojure-noob/**src/clojure_noob/core.clj&lt;/em>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ä½ åœ¨ç¬¬ä¸€ç« ä¸­åˆ›å»ºçš„ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨&lt;strong>M-x&lt;/strong> cider-jack-inã€‚è¿™å°†å¯åŠ¨ REPL å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å†²åŒºï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥ä¸å®ƒè¿›è¡Œäº¤äº’ã€‚ç»è¿‡çŸ­æš‚çš„ç­‰å¾…ï¼ˆåº”è¯¥ä¸åˆ°ä¸€åˆ†é’Ÿï¼‰ï¼Œä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼å›¾ 2-8 çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/cider-jack-in.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-8ï¼šè¿è¡Œ M-x cider-jack-in åä½ çš„ Emacs åº”è¯¥æ˜¯è¿™æ ·çš„&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªçª—å£ï¼šæˆ‘ä»¬çš„&lt;em>core.clj&lt;/em>æ–‡ä»¶åœ¨å·¦è¾¹æ‰“å¼€ï¼ŒREPL åœ¨å³è¾¹è¿è¡Œã€‚å¦‚æœä½ ä»æ¥æ²¡æœ‰è§è¿‡ Emacs åƒè¿™æ ·åˆ†æˆä¸¤åŠï¼Œä¸è¦æ‹…å¿ƒï¼æˆ‘å°†è®²è¿° Emacs æ˜¯å¦‚ä½•åšåˆ°çš„ã€‚æˆ‘ä¸€ä¼šå„¿ä¼šè®²åˆ° Emacs æ˜¯å¦‚ä½•åˆ†å‰²çª—å£çš„ã€‚åŒæ—¶ï¼Œåœ¨ REPL ä¸­å°è¯•æ±‚å€¼ä¸€äº›ä»£ç ã€‚é”®å…¥ä»¥ä¸‹åŠ ç²—çš„è¡Œã€‚å½“ä½ æŒ‰ä¸‹å›è½¦é”®æ—¶ï¼Œä½ åº”è¯¥çœ‹åˆ°æ‰“å°åœ¨ REPL ä¸­çš„ç»“æœï¼Œæ˜¾ç¤ºåœ¨æ¯ä¸€è¡Œä»£ç çš„åé¢ã€‚è¿™æ—¶ä¸è¦æ‹…å¿ƒä»£ç ï¼Œæˆ‘å°†åœ¨ä¸‹ä¸€ç« ä¸­ä»‹ç»æ‰€æœ‰è¿™äº›åŠŸèƒ½ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">map inc &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; (2 3 4 5)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">reduce + &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="mi">6&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 111&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›¸å½“æ¼‚äº®! ä½ å¯ä»¥åƒåœ¨ç¬¬ä¸€ç« ä¸­ä½¿ç”¨&lt;code>lein repl&lt;/code>é‚£æ ·ä½¿ç”¨è¿™ä¸ª REPLã€‚ä½ è¿˜å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ï¼Œä½†åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•åœ¨åˆ†å± Emacs ä¸­å·¥ä½œã€‚&lt;/p>
&lt;p>###æ’æ›²ã€‚Emacs çš„çª—å£å’Œæ¡†æ¶&lt;/p>
&lt;p>è®©æˆ‘ä»¬ç»•é“æ¥è°ˆè°ˆ Emacs æ˜¯å¦‚ä½•å¤„ç†æ¡†æ¶å’Œçª—å£çš„ï¼Œå¹¶è®¨è®ºä¸€äº›ä¸çª—å£æœ‰å…³çš„æœ‰ç”¨çš„é”®ç»‘å®šæ–¹æ³•ã€‚å¦‚æœä½ å·²ç»ç†Ÿæ‚‰äº† Emacs çš„çª—å£ï¼Œè¯·éšæ„è·³è¿‡è¿™ä¸€éƒ¨åˆ†ã€‚&lt;/p>
&lt;p>Emacs æ˜¯åœ¨ 1802 å¹´å·¦å³å‘æ˜çš„ï¼Œæ‰€ä»¥å®ƒä½¿ç”¨çš„æœ¯è¯­ä¸ä½ ä¹ æƒ¯çš„ç•¥æœ‰ä¸åŒã€‚ä½ é€šå¸¸æ‰€è¯´çš„&lt;em>çª—å£&lt;/em>ï¼ŒEmacs ç§°ä¹‹ä¸º&lt;em>æ¡†æ¶&lt;/em>ï¼Œè€Œæ¡†æ¶å¯ä»¥åˆ†å‰²æˆå¤šä¸ª&lt;em>çª—å£&lt;/em>ã€‚åˆ†å‰²æˆå¤šä¸ªçª—å£å…è®¸ä½ ä¸€æ¬¡æŸ¥çœ‹å¤šä¸ªç¼“å†²åŒºã€‚ä½ åœ¨è¿è¡Œ&lt;code>cider-jack-in&lt;/code>æ—¶å·²ç»çœ‹åˆ°äº†è¿™ç§æƒ…å†µï¼ˆè§å›¾ 2-9ï¼‰ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/emacs-windows.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-9ï¼šåœ¨ Emacs ä¸­ï¼Œä¸€ä¸ªæ¡†æ¶åŒ…å«æœ‰çª—å£ã€‚&lt;/p>
&lt;p>è¡¨ 2-5 æ˜¾ç¤ºäº†ç”¨äºå¤„ç†æ¡†æ¶å’Œçª—å£çš„å‡ ä¸ªé”®çš„ç»‘å®šæƒ…å†µã€‚&lt;/p>
&lt;ol>
&lt;li>è¡¨ 2-5: Emacs çª—å£çš„é”®ä½ç»‘å®š&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å…³é”®å­—&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>C-x o&lt;/strong>&lt;/td>
&lt;td>å°†å…‰æ ‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçª—å£ã€‚ç°åœ¨è¯•è¯•è¿™ä¸ªï¼Œåœ¨ä½ çš„ Clojure æ–‡ä»¶å’Œ REPL ä¹‹é—´åˆ‡æ¢ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-x 1&lt;/strong>&lt;/td>
&lt;td>åˆ é™¤æ‰€æœ‰å…¶ä»–çª—å£ï¼Œæ¡†æ¶ä¸­åªç•™ä¸‹å½“å‰çª—å£ã€‚è¿™ä¸ä¼šå…³é—­ä½ çš„ç¼“å†²åŒºï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ä½ å¤±å»ä»»ä½•å·¥ä½œã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-x 2&lt;/strong>&lt;/td>
&lt;td>åˆ†å‰²æ¡†æ¶çš„ä¸Šæ–¹å’Œä¸‹æ–¹ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-x 3&lt;/strong>&lt;/td>
&lt;td>å¹¶æ’åˆ†å‰²æ¡†æ¶ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-x 0&lt;/strong>&lt;/td>
&lt;td>åˆ é™¤å½“å‰çª—å£ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>æˆ‘é¼“åŠ±ä½ è¯•è¯• Emacs çš„çª—å£é”®ç»‘å®šã€‚ä¾‹å¦‚ï¼ŒæŠŠä½ çš„å…‰æ ‡æ”¾åœ¨å·¦è¾¹çš„çª—å£ï¼Œä¹Ÿå°±æ˜¯æœ‰ Clojure æ–‡ä»¶çš„é‚£ä¸ªï¼Œç„¶åä½¿ç”¨&lt;strong>C-x 1&lt;/strong>ã€‚å¦ä¸€ä¸ªçª—å£åº”è¯¥æ¶ˆå¤±ï¼Œè€Œä½ åº”è¯¥åªçœ‹åˆ° Clojure ä»£ç ã€‚ç„¶ååšä»¥ä¸‹å·¥ä½œã€‚&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨&lt;strong>C-x 3&lt;/strong>å°†çª—å£å†æ¬¡å¹¶æ’åˆ†å¼€ã€‚&lt;/li>
&lt;li>ä½¿ç”¨&lt;strong>C-x o&lt;/strong>æ¥åˆ‡æ¢åˆ°å³è¾¹çš„çª—å£ã€‚&lt;/li>
&lt;li>ä½¿ç”¨&lt;strong>C-x b&lt;/strong> &lt;em>cider-repl&lt;/em>æ¥åˆ‡æ¢åˆ°å³è¾¹çª—å£çš„ CIDER ç¼“å†²åŒºã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸€æ—¦ä½ åšäº†ä¸€äº›å®éªŒï¼Œè®¾ç½® Emacsï¼Œä½¿å®ƒåŒ…å«ä¸¤ä¸ªå¹¶æ’çš„çª—å£ï¼Œå·¦è¾¹æ˜¯ Clojure ä»£ç ï¼Œå³è¾¹æ˜¯ CIDER ç¼“å†²åŒºï¼Œå°±åƒå‰é¢çš„å›¾ç‰‡ä¸€æ ·ã€‚å¦‚æœä½ æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äºçª—å£å’Œæ¡†æ¶çš„çŸ¥è¯†ï¼ŒEmacs æ‰‹å†Œä¸­æœ‰å¤§é‡çš„ä¿¡æ¯ï¼šè§*&lt;a class="link" href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Windows.html#Windows" target="_blank" rel="noopener"
>http://www.gnu.org/software/emacs/manual/html_node/elisp/Windows.html#Windows&lt;/a>*ã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ å¯ä»¥æµè§ˆ Emacs çª—å£äº†ï¼Œæ˜¯æ—¶å€™å­¦ä¹ ä¸€äº› Clojure å¼€å‘çš„é”®ç»‘å®šäº†&lt;/p>
&lt;p>###æœ‰ç”¨çš„é”®ç»‘å®šçš„ä¸°å¯Œå†…å®¹&lt;/p>
&lt;p>ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½å­¦ä¹ ä¸€äº›æŒ‰é”®ç»‘å®šï¼Œå®ƒä»¬å°†æ­ç¤ºåœ¨ Clojure é¡¹ç›®ä¸­ä½¿ç”¨ Emacs çš„çœŸæ­£åŠ›é‡ã€‚è¿™äº›å‘½ä»¤å°†ä½¿ä½ åªéœ€æŒ‰ä¸‹å‡ ä¸ªç®€å•çš„é”®å°±èƒ½æ±‚å€¼ã€è°ƒæ•´ã€ç¼–è¯‘å’Œè¿è¡Œä»£ç ã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚ä½•å¿«é€Ÿæ±‚å€¼ä¸€ä¸ªè¡¨è¾¾å¼ã€‚&lt;/p>
&lt;p>åœ¨&lt;em>core.clj&lt;/em>çš„åº•éƒ¨ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Cleanliness is next to godliness&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½¿ç”¨&lt;strong>C-e&lt;/strong>å¯¼èˆªåˆ°è¡Œå°¾ï¼Œç„¶åä½¿ç”¨&lt;strong>C-x C-e&lt;/strong>.æ–‡æœ¬&lt;code>Cleanliness is next to godliness&lt;/code>åº”è¯¥å‡ºç°åœ¨ CIDER ç¼“å†²åŒºï¼Œå¦‚å›¾ 2-10 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/cider-eval-last-expression.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-10ï¼šåœ¨ REPL ä¸­ä»å¦ä¸€ä¸ªç¼“å†²åŒºå³æ—¶æ±‚å€¼ä»£ç &lt;/p>
&lt;p>ç»‘å®šé”®&lt;strong>C-x C-e&lt;/strong>è¿è¡Œ&lt;code>cider-eval-last-expression&lt;/code>å‘½ä»¤ã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥å‘½ä»¤å°†ç´§æ¥åœ¨ç‚¹ä¹‹å‰çš„è¡¨è¾¾å¼å‘é€åˆ° REPLï¼Œç„¶åç”± REPL æ±‚å€¼è¯¥è¡¨è¾¾å¼ã€‚ä½ ä¹Ÿå¯ä»¥è¯•è¯•&lt;strong>C-u C-x C-e&lt;/strong>ï¼Œå®ƒæ‰“å°å‡ºç‚¹ä¹‹åçš„æ±‚å€¼ç»“æœã€‚&lt;/p>
&lt;p>ç°åœ¨è®©æˆ‘ä»¬è¯•ç€è¿è¡Œæˆ‘ä»¬åœ¨ç¬¬ä¸€ç« ä¸­å†™çš„&lt;code>-main&lt;/code>å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®©å…¨ä¸–ç•Œéƒ½çŸ¥é“æˆ‘ä»¬æ˜¯å°èŒ¶å£¶ã€‚&lt;/p>
&lt;p>åœ¨&lt;em>core.clj&lt;/em>çš„ç¼“å†²åŒºä¸­ï¼Œä½¿ç”¨&lt;strong>C-c M-n M-n&lt;/strong>ã€‚è¿™ä¸ªé”®ç»‘å®šå°†å‘½åç©ºé—´è®¾ç½®ä¸ºä½ å½“å‰æ–‡ä»¶é¡¶éƒ¨åˆ—å‡ºçš„å‘½åç©ºé—´ï¼Œæ‰€ä»¥å³è¾¹çª—å£çš„æç¤ºç°åœ¨åº”è¯¥æ˜¯&lt;code>clojure-noob.core&amp;gt;&lt;/code>ã€‚æˆ‘è¿˜æ²¡æœ‰è¯¦ç»†ä»‹ç»å‘½åç©ºé—´ï¼Œä½†ç°åœ¨åªè¦çŸ¥é“å‘½åç©ºé—´æ˜¯ä¸€ç§ç»„ç»‡æœºåˆ¶ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿé¿å…å‘½åå†²çªå°±è¶³å¤Ÿäº†ã€‚æ¥ä¸‹æ¥ï¼Œåœ¨æç¤ºç¬¦ä¸‹è¾“å…¥ï¼ˆ-mainï¼‰ã€‚REPL åº”è¯¥æ‰“å°å‡º &amp;ldquo;I&amp;rsquo;m a little teapot!&amp;ldquo;å¤šä¹ˆä»¤äººæ¿€åŠ¨å•Š&lt;/p>
&lt;p>ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°å¹¶è¿è¡Œå®ƒã€‚åœ¨&lt;em>core.clj&lt;/em>çš„åº•éƒ¨ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">train&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Choo choo!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®Œæˆåï¼Œä¿å­˜ä½ çš„æ–‡ä»¶å¹¶ä½¿ç”¨&lt;strong>C-c C-k&lt;/strong>åœ¨ REPL ä¼šè¯ä¸­ç¼–è¯‘ä½ çš„å½“å‰æ–‡ä»¶ã€‚(ç°åœ¨ï¼Œå¦‚æœä½ åœ¨ REPL ä¸­è¿è¡Œ &lt;code>(train)&lt;/code>ï¼Œå®ƒå°†å›æ˜¾ &lt;code>Choo choo!&lt;/code>ã€‚&lt;/p>
&lt;p>å½“ä½ è¿˜åœ¨ REPL ä¸­æ—¶ï¼Œè¯•è¯•&lt;strong>C-â†‘&lt;/strong>ï¼ˆctrl åŠ å‘ä¸Šç®­å¤´é”®ï¼‰ã€‚Â &lt;strong>C-â†‘&lt;/strong>å’Œ&lt;strong>C-â†“&lt;/strong>å¾ªç¯æµè§ˆä½ çš„ REPL å†å²ï¼Œå…¶ä¸­åŒ…æ‹¬ä½ è¦æ±‚ REPL æ±‚å€¼çš„æ‰€æœ‰ Clojure è¡¨è¾¾å¼ã€‚&lt;/p>
&lt;p>Mac ç”¨æˆ·æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒOS X å°†&lt;strong>C-â†‘&lt;/strong>ã€&lt;strong>C-â†“&lt;/strong>ã€&lt;strong>C-â†&lt;/strong>å’Œ&lt;strong>C-â†’&lt;/strong>Map ä¸ºä»»åŠ¡æ§åˆ¶å‘½ä»¤ã€‚ä½ å¯ä»¥é€šè¿‡æ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œç„¶åè¿›å…¥ Keyboard4Shortcuts4Mission Control æ¥æ”¹å˜ä½ çš„ Mac é”®ç»‘å®šã€‚&lt;/p>
&lt;p>æœ€åï¼Œè¯•è¯•è¿™ä¸ªã€‚&lt;/p>
&lt;ol>
&lt;li>åœ¨ REPL æç¤ºç¬¦ä¸‹è¾“å…¥ï¼ˆ-mainï¼‰ã€‚æ³¨æ„æ²¡æœ‰ç»“å°¾çš„æ‹¬å·ã€‚&lt;/li>
&lt;li>æŒ‰&lt;strong>C-enter&lt;/strong>ã€‚&lt;/li>
&lt;/ol>
&lt;p>CIDER åº”è¯¥å…³é—­å°æ‹¬å·å¹¶æ±‚å€¼è¡¨è¾¾å¼ã€‚è¿™åªæ˜¯ CIDER ä¸ºå¤„ç†è¿™ä¹ˆå¤šå°æ‹¬å·è€Œæä¾›çš„ä¸€ä¸ªå¾ˆå¥½çš„å°ä¾¿åˆ©ã€‚&lt;/p>
&lt;p>CIDER è¿˜æœ‰ä¸€äº›é”®çš„ç»‘å®šï¼Œåœ¨ä½ å­¦ä¹  Clojure çš„æ—¶å€™éå¸¸å¥½ã€‚æŒ‰&lt;strong>C-c C-d C-d&lt;/strong>å°†æ˜¾ç¤ºè¯¥ç¬¦å·ä¸‹çš„æ–‡æ¡£ï¼Œè¿™å¯ä»¥å¤§å¤§èŠ‚çœæ—¶é—´ã€‚å½“ä½ çœ‹å®Œæ–‡æ¡£åï¼ŒæŒ‰&lt;strong>q&lt;/strong>æ¥å…³é—­æ–‡æ¡£ç¼“å†²åŒºã€‚ç»‘å®šçš„é”®**M-.&lt;strong>å°†å¯¼èˆªåˆ°ç‚¹ä¸‹ç¬¦å·çš„æºä»£ç ï¼Œè€Œ&lt;/strong>M-,**å°†ä½¿ä½ å›åˆ°åŸæ¥çš„ç¼“å†²åŒºå’Œä½ç½®ã€‚æœ€åï¼Œ&lt;strong>C-c C-d C-a&lt;/strong>å¯ä»¥è®©ä½ åœ¨å‡½æ•°åå’Œæ–‡æ¡£ä¸­æœç´¢ä»»æ„çš„æ–‡æœ¬ã€‚å½“ä½ ä¸èƒ½å®Œå…¨è®°ä½ä¸€ä¸ªå‡½æ•°çš„åå­—æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•æ¥å¯»æ‰¾å®ƒã€‚&lt;/p>
&lt;p>CIDER READMEï¼ˆ&lt;em>&lt;a class="link" href="https://github.com/clojure-emacs/cider/" target="_blank" rel="noopener"
>GitHub - clojure-emacs/cider: The Clojure Interactive Development Environment that Rocks for Emacs&lt;/a>&lt;/em>)æœ‰ä¸€ä¸ªå…¨é¢çš„é”®ç»‘å®šåˆ—è¡¨ï¼Œä½ å¯ä»¥æ…¢æ…¢å­¦ä¹ ï¼Œä½†ç°åœ¨ï¼Œè¡¨ 2-6 å’Œ 2-7 åŒ…å«äº†æˆ‘ä»¬åˆšåˆšç»å†çš„é”®ç»‘å®šçš„æ€»ç»“ã€‚&lt;/p>
&lt;ol>
&lt;li>è¡¨ 2-6ï¼šClojure ç¼“å†²åŒºçš„é”®ç»‘å®šæƒ…å†µ&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>é”®å€¼&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>C-c M-n M-n&lt;/strong>&lt;/td>
&lt;td>åˆ‡æ¢åˆ°å½“å‰ç¼“å†²åŒºçš„å‘½åç©ºé—´ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-x C-e&lt;/strong>&lt;/td>
&lt;td>æ±‚å€¼ç´§é‚»ç‚¹çš„è¡¨è¾¾å¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-c C-k&lt;/strong>&lt;/td>
&lt;td>ç¼–è¯‘å½“å‰ç¼“å†²åŒºã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-c C-d C-d&lt;/strong>&lt;/td>
&lt;td>æ˜¾ç¤ºç‚¹ä¸‹ç¬¦å·çš„æ–‡æ¡£ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-. å’Œ M-,&lt;/strong>&lt;/td>
&lt;td>æµè§ˆåˆ°è¯¥ç‚¹ä¸‹çš„ç¬¦å·çš„æºä»£ç ï¼Œå¹¶è¿”å›åˆ°åŸæ¥çš„ç¼“å†²åŒºã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-c C-d C-a&lt;/strong>&lt;/td>
&lt;td>Apropros æœç´¢ï¼›åœ¨å‡½æ•°åå’Œæ–‡æ¡£ä¸­æŸ¥æ‰¾ä»»æ„æ–‡æœ¬ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ol>
&lt;li>è¡¨ 2-7: CIDER ç¼“å†²åŒºçš„é”®ç»‘å®šæ–¹å¼&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å…³é”®å­—&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>**C-&lt;strong>&lt;strong>â†‘&lt;/strong>&lt;/strong>, C-**&lt;strong>â†“&lt;/strong>&lt;/td>
&lt;td>å¾ªç¯æµè§ˆ REPL å†å²ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>C-enter&lt;/strong>&lt;/td>
&lt;td>å…³é—­åœ†æ‹¬å·å¹¶æ±‚å€¼ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="å¦‚ä½•å¤„ç†é”™è¯¯">å¦‚ä½•å¤„ç†é”™è¯¯&lt;/h3>
&lt;p>åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œä½ å°†å†™ä¸€äº›æœ‰é”™è¯¯çš„ä»£ç ï¼Œè¿™æ ·ä½ å°±å¯ä»¥çœ‹åˆ° Emacs æ˜¯å¦‚ä½•ååº”çš„ï¼Œä»¥åŠä½ å¦‚ä½•ä»é”™è¯¯ä¸­æ¢å¤å¹¶ç»§ç»­ä½ çš„å¿«ä¹ä¹‹è·¯ã€‚ä½ å°†åœ¨ REPL ç¼“å†²åŒºå’Œ &lt;em>core.clj&lt;/em> ç¼“å†²åŒºä¸­è¿›è¡Œè¿™é¡¹å·¥ä½œã€‚è®©æˆ‘ä»¬ä» REPL å¼€å§‹ã€‚åœ¨æç¤ºç¬¦ä¸‹ï¼Œè¾“å…¥(map)å¹¶æŒ‰å›è½¦ã€‚ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼å›¾ 2-11 çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/basic-emacs/cider-error.png"
loading="lazy"
>&lt;/p>
&lt;p>å›¾ 2-11ï¼šè¿™å°±æ˜¯åœ¨ REPL ä¸­è¿è¡Œåä»£ç æ—¶å‘ç”Ÿçš„æƒ…å†µã€‚&lt;/p>
&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œåœ¨æ²¡æœ‰å‚æ•°çš„æƒ…å†µä¸‹è°ƒç”¨&lt;code>map&lt;/code>ä¼šä½¿ Clojure å¤±å»ç†æ™º&amp;ndash;å®ƒåœ¨ä½ çš„ REPL ç¼“å†²åŒºä¸­æ˜¾ç¤ºä¸€ä¸ª`ArityException&amp;rsquo;é”™è¯¯ä¿¡æ¯ï¼Œå¹¶åœ¨ä½ çš„å·¦è¾¹çª—å£ä¸­å¡«æ»¡æ–‡æœ¬ï¼Œçœ‹èµ·æ¥åƒä¸€ä¸ªç–¯å­çš„å‘“è¯­ã€‚è¿™äº›å‘“è¯­å°±æ˜¯&lt;em>å †æ ˆè·Ÿè¸ª&lt;/em>ï¼Œå®ƒæ˜¾ç¤ºäº†å®é™…æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ï¼Œä»¥åŠå“ªä¸ªå‡½æ•°è°ƒç”¨äº†&lt;em>é‚£ä¸ª&lt;/em>å‡½æ•°ï¼Œæ²¿ç€å‡½æ•°è°ƒç”¨çš„å †æ ˆã€‚&lt;/p>
&lt;p>Clojure çš„å †æ ˆè·Ÿè¸ªåœ¨ä½ åˆšå¼€å§‹çš„æ—¶å€™å¯èƒ½å¾ˆéš¾è§£è¯»ï¼Œä½†ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œä½ ä¼šå­¦ä¼šä»å…¶ä¸­è·å¾—æœ‰ç”¨çš„ä¿¡æ¯ã€‚CIDER é€šè¿‡å…è®¸ä½ è¿‡æ»¤å †æ ˆç—•è¿¹æ¥å¸®ä½ ä¸€æŠŠï¼Œè¿™å¯ä»¥å‡å°‘å™ªéŸ³ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å°†å¼‚å¸¸çš„åŸå› é”å®šã€‚&lt;code>*cider-error*&lt;/code>ç¼“å†²åŒºçš„ç¬¬ 2 è¡Œæœ‰ Clojureã€Javaã€REPLã€Toolingã€Duplicates å’Œ All ç­‰è¿‡æ»¤å™¨ã€‚ä½ å¯ä»¥ç‚¹å‡»æ¯ä¸ªé€‰é¡¹æ¥æ¿€æ´»è¯¥è¿‡æ»¤å™¨ã€‚ä½ ä¹Ÿå¯ä»¥ç‚¹å‡»æ¯ä¸ªå †æ ˆè·Ÿè¸ªè¡Œæ¥è·³åˆ°ç›¸åº”çš„æºä»£ç ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯å¦‚ä½•å…³é—­å·¦è¾¹çª—å£ä¸­çš„å †æ ˆè·Ÿè¸ªã€‚&lt;/p>
&lt;ol>
&lt;li>ä½¿ç”¨&lt;strong>C-x o&lt;/strong>æ¥åˆ‡æ¢åˆ°çª—å£ã€‚&lt;/li>
&lt;li>æŒ‰&lt;strong>q&lt;/strong>å…³é—­å †æ ˆè·Ÿè¸ªï¼Œå›åˆ° CIDERã€‚&lt;/li>
&lt;/ol>
&lt;p>å¦‚æœä½ æƒ³å†æ¬¡æŸ¥çœ‹é”™è¯¯ï¼Œä½ å¯ä»¥åˆ‡æ¢åˆ°&lt;code>*cider-error*&lt;/code>ç¼“å†²åŒºã€‚ä½ ä¹Ÿå¯ä»¥åœ¨å°è¯•ç¼–è¯‘æ–‡ä»¶æ—¶å¾—åˆ°é”™è¯¯ä¿¡æ¯ã€‚è¦çœ‹è¿™ä¸ªï¼Œè¯·åˆ°&lt;em>core.clj&lt;/em>ç¼“å†²åŒºï¼Œå†™ä¸€äº›æœ‰é”™è¯¯çš„ä»£ç ï¼Œç„¶åè¿›è¡Œç¼–è¯‘ã€‚&lt;/p>
&lt;ol>
&lt;li>åœ¨ç»“å°¾å¤„æ·»åŠ &lt;code>(map)&lt;/code>ã€‚&lt;/li>
&lt;li>ä½¿ç”¨&lt;strong>C-c C-k&lt;/strong>è¿›è¡Œç¼–è¯‘ã€‚&lt;/li>
&lt;/ol>
&lt;p>ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ª&lt;code>*cider-error*&lt;/code>ç¼“å†²åŒºï¼Œç±»ä¼¼äºä½ ä¹‹å‰çœ‹åˆ°çš„é‚£ä¸ªã€‚åŒæ ·ï¼ŒæŒ‰&lt;strong>q&lt;/strong>å…³é—­å †æ ˆè·Ÿè¸ªã€‚&lt;/p>
&lt;h3 id="paredit">Paredit&lt;/h3>
&lt;p>åœ¨ Clojure ç¼“å†²åŒºä¸­å†™ä»£ç æ—¶ï¼Œä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ä¸€äº›æ„å¤–çš„äº‹æƒ…å‘ç”Ÿã€‚ä¾‹å¦‚ï¼Œæ¯å½“ä½ è¾“å…¥ä¸€ä¸ªå·¦æ‹¬å·ï¼Œä¸€ä¸ªå³æ‹¬å·å°±ä¼šç«‹å³è¢«æ’å…¥ã€‚&lt;/p>
&lt;p>è¿™è¦å½’åŠŸäº&lt;em>paredit-mode&lt;/em>ï¼Œè¿™æ˜¯ä¸€ç§æ¬¡è¦çš„æ¨¡å¼ï¼Œå®ƒå°† Lisp çš„å¤§é‡å°æ‹¬å·ä»ä¸€ç§è´£ä»»å˜æˆäº†ä¸€ç§èµ„äº§ã€‚Paredit ç¡®ä¿æ‰€æœ‰çš„å°æ‹¬å·ã€åŒå¼•å·å’Œå¤§æ‹¬å·éƒ½æ˜¯å°é—­çš„ï¼Œä»è€Œå‡è½»äº†ä½ é‚£å¯æ¶çš„è´Ÿæ‹…ã€‚&lt;/p>
&lt;p>Paredit è¿˜æä¾›äº†é”®ç»‘å®šåŠŸèƒ½ï¼Œä»¥è½»æ¾æµè§ˆå’Œæ”¹å˜æ‰€æœ‰è¿™äº›æ‹¬å·æ‰€åˆ›å»ºçš„ç»“æ„ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘å°†ä»‹ç»æœ€æœ‰ç”¨çš„é”®ç»‘å®šï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨*&lt;a class="link" href="https://github.com/georgek/paredit-cheatsheet/blob/master/paredit-cheatsheet.pdf" target="_blank" rel="noopener"
>https://github.com/georgek/paredit-cheatsheet/blob/master/paredit-cheatsheet.pdf&lt;/a>*ï¼ˆåœ¨éª—å±€ä¸­ï¼Œçº¢è‰²ç®¡å­ä»£è¡¨ç‚¹ï¼‰æŸ¥çœ‹å…¨é¢çš„éª—å±€è¡¨ã€‚&lt;/p>
&lt;p>ç„¶è€Œï¼Œå¦‚æœä½ ä¸ä¹ æƒ¯ï¼Œparedit æœ‰æ—¶ä¼šå¾ˆçƒ¦äººã€‚æˆ‘è®¤ä¸ºèŠ±ç‚¹æ—¶é—´æ¥å­¦ä¹ å®ƒæ˜¯éå¸¸å€¼å¾—çš„ï¼Œä½†ä½ å¯ä»¥éšæ—¶ç”¨&lt;strong>M-x&lt;/strong> paredit-mode æ¥ç¦ç”¨å®ƒï¼Œå®ƒå¯ä»¥åˆ‡æ¢è¯¥æ¨¡å¼çš„å¼€å¯å’Œå…³é—­ã€‚&lt;/p>
&lt;p>ä¸‹é¢çš„éƒ¨åˆ†å‘ä½ å±•ç¤ºäº†æœ€æœ‰ç”¨çš„é”®ç»‘å®šã€‚&lt;/p>
&lt;h4 id="wrapping-å’Œ-slurping">Wrapping å’Œ Slurping&lt;/h4>
&lt;p>&lt;em>Wrapping&lt;/em>ç”¨å°æ‹¬å·åŒ…å›´ç‚¹ä¹‹åçš„è¡¨è¾¾å¼ã€‚Â &lt;em>Slurping&lt;/em>å°†ç»“æŸçš„å°æ‹¬å·ç§»åˆ°å³è¾¹åŒ…æ‹¬ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ç”¨è¿™ä¸ªå¼€å§‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€Œæˆ‘ä»¬æƒ³å¾—åˆ°è¿™ä¸ªç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">* &lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å¯ä»¥æŠŠ&lt;code>2&lt;/code>åŒ…èµ·æ¥ï¼ŒåŠ ä¸€ä¸ªæ˜Ÿå·ï¼Œç„¶åå†æŠŠ&lt;code>3&lt;/code>æºœèµ°ã€‚é¦–å…ˆï¼Œæ”¾ç½®ç‚¹ï¼Œè¿™é‡Œè¡¨ç¤ºä¸ºä¸€ä¸ªå‚ç›´çš„ç®¡é“ï¼Œ&lt;code>|&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="err">|&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åè¾“å…¥&lt;strong>M-(&lt;/strong>ï¼Œä¸&lt;em>paredit-wrap-round&lt;/em>ç»‘å®šï¼Œå¾—åˆ°è¿™ä¸ªç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">|&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŠ ä¸Šæ˜Ÿå·å’Œç©ºæ ¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">* &lt;/span>&lt;span class="err">|&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¦åœ¨ &amp;ldquo;3 &amp;ldquo;ä¸Šå•§å•§ç§°å¥‡ï¼Œè¯·æŒ‰&lt;strong>C-â†’&lt;/strong>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">* &lt;/span>&lt;span class="err">|&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°å¢åŠ å’Œæ‰©å±•æ‹¬å·ï¼Œè€Œä¸å¿…æµªè´¹å®è´µçš„æ—¶é—´æŒ‰ä½æ–¹å‘é”®æ¥ç§»åŠ¨ç‚¹ã€‚&lt;/p>
&lt;h4 id="barfing">Barfing&lt;/h4>
&lt;p>å‡è®¾åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œä½ ä¸å°å¿ƒåäº†å››æ¡ã€‚è¦è§£å¼€å®ƒï¼ˆä¹Ÿè¢«ç§°ä¸º&lt;em>barfing&lt;/em>ï¼‰ï¼Œå°†ä½ çš„å…‰æ ‡ï¼ˆ&lt;code>|&lt;/code>ï¼‰æ”¾åœ¨æ‹¬å·å†…çš„ä»»ä½•åœ°æ–¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">|&lt;/span>&lt;span class="nb">* &lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åä½¿ç”¨&lt;strong>C-â†&lt;/strong>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">|&lt;/span>&lt;span class="nb">* &lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Ta-da! ç°åœ¨ä½ çŸ¥é“å¦‚ä½•éšæ„æ‰©å±•å’Œæ”¶ç¼©æ‹¬å·äº†ã€‚&lt;/p>
&lt;h4 id="å¯¼èˆª">å¯¼èˆª&lt;/h4>
&lt;p>åœ¨ç”¨ Lisp æ–¹è¨€å†™ä½œæ—¶ï¼Œä½ ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„è¡¨è¾¾å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="nb">map &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">comp &lt;/span>&lt;span class="nv">record&lt;/span> &lt;span class="nv">first&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">d/q&lt;/span> &lt;span class="o">&amp;#39;&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="ss">:find&lt;/span> &lt;span class="nv">?post&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">:in&lt;/span> &lt;span class="nv">$&lt;/span> &lt;span class="nv">?search&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">:where&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[(&lt;/span>&lt;span class="nf">fulltext&lt;/span> &lt;span class="nv">$&lt;/span> &lt;span class="ss">:post/content&lt;/span> &lt;span class="nv">?search&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[[&lt;/span>&lt;span class="nv">?post&lt;/span> &lt;span class="nv">?content&lt;/span>&lt;span class="p">]]]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">db/db&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="ss">:q&lt;/span> &lt;span class="nv">params&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äºè¿™ç§è¡¨è¾¾å¼ï¼Œå¿«é€Ÿä»ä¸€ä¸ªå­è¡¨è¾¾å¼è·³åˆ°ä¸‹ä¸€ä¸ªå­è¡¨è¾¾å¼æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å¦‚æœä½ æŠŠ point æ”¾åœ¨å¼€å¤´çš„å°æ‹¬å·ä¹‹å‰ï¼Œ&lt;strong>C-M-f&lt;/strong>ä¼šæŠŠä½ å¸¦åˆ°ç»“æŸçš„å°æ‹¬å·ã€‚åŒæ ·ï¼Œå¦‚æœ point ç´§è·Ÿåœ¨é—­åˆå°æ‹¬å·ä¹‹åï¼Œ&lt;strong>C-M-b&lt;/strong>å°†å¸¦ä½ åˆ°å¼€å¤´å°æ‹¬å·ã€‚&lt;/p>
&lt;p>è¡¨ 2-8 æ€»ç»“äº†ä½ åˆšåˆšå­¦åˆ°çš„ Paredit é”®çš„ç»‘å®šã€‚&lt;/p>
&lt;ol>
&lt;li>è¡¨ 2-8ï¼šParedit é”®çš„ç»‘å®šæ–¹å¼&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å…³é”®å­—&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>M-x&lt;/strong> paredit-mode&lt;/td>
&lt;td>åˆ‡æ¢ paredit æ¨¡å¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>M-(&lt;/strong>&lt;/td>
&lt;td>æ‹¬å·å†…ç‚¹åçš„è¡¨è¾¾å¼(paredit-wrap-round)ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>**C-**â†’&lt;/td>
&lt;td>Slurp;å°†ç»“æŸçš„å°æ‹¬å·å‘å³ç§»åŠ¨ï¼Œä»¥åŒ…æ‹¬ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>**C-**â†&lt;/td>
&lt;td>Barfï¼›å°†æ‹¬å·å‘å·¦ç§»åŠ¨ï¼Œæ’é™¤æœ€åä¸€ä¸ªè¡¨è¾¾å¼ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>*&lt;em>C-M-f&lt;/em>,*&lt;em>C-M-b&lt;/em>&lt;/td>
&lt;td>ç§»åŠ¨åˆ°å¼€å¤´/ç»“å°¾å°æ‹¬å·ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="ç»§ç»­å­¦ä¹ ">ç»§ç»­å­¦ä¹ &lt;/h2>
&lt;p>Emacs æ˜¯å†å²æœ€æ‚ ä¹…çš„ç¼–è¾‘å™¨ä¹‹ä¸€ï¼Œå®ƒçš„è¿½éšè€…å¯¹å®ƒçš„çƒ­æƒ…å¾€å¾€æ¥è¿‘ç‹‚çƒ­ã€‚ä¸€å¼€å§‹ä½¿ç”¨å®ƒå¯èƒ½ä¼šå¾ˆåˆ«æ‰­ï¼Œä½†åšæŒä¸‹å»ï¼Œä½ ä¼šåœ¨ä¸€ç”Ÿä¸­å¾—åˆ°å……åˆ†çš„å›æŠ¥ã€‚&lt;/p>
&lt;p>æ¯å½“æˆ‘æ‰“å¼€ Emacs æ—¶ï¼Œæˆ‘éƒ½ä¼šæ„Ÿåˆ°å—åˆ°é¼“èˆã€‚å°±åƒä¸€ä¸ªå·¥åŒ è¿›å…¥ä»–çš„å·¥ä½œå®¤ä¸€æ ·ï¼Œæˆ‘æ„Ÿåˆ°ä¸€ä¸ªå¯èƒ½æ€§çš„é¢†åŸŸåœ¨æˆ‘é¢å‰æ‰“å¼€ã€‚æˆ‘æ„Ÿåˆ°è¿™ä¸ªç¯å¢ƒçš„èˆ’é€‚ï¼Œå®ƒéšç€æ—¶é—´çš„æ¨ç§»å·²ç»å‘å±•åˆ°å®Œå…¨é€‚åˆæˆ‘&amp;ndash;å„ç§å„æ ·çš„åŒ…å’Œé”®ç»‘å®šï¼Œå¸®åŠ©æˆ‘æ—¥å¤ä¸€æ—¥åœ°æŠŠæƒ³æ³•å˜æˆç°å®ã€‚&lt;/p>
&lt;p>åœ¨ä½ ç»§ç»­ä½ çš„ Emacs ä¹‹æ—…æ—¶ï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ã€‚&lt;/p>
&lt;ul>
&lt;li>Emacs æ‰‹å†Œ&lt;em>æä¾›äº†ä¼˜ç§€ã€å…¨é¢çš„æŒ‡å¯¼ã€‚æ¯å¤©æ—©ä¸ŠèŠ±ç‚¹æ—¶é—´çœ‹çœ‹å®ƒå§! ä¸‹è½½ PDFï¼Œåœ¨æ—…é€”ä¸­é˜…è¯»ã€‚&lt;/em>&lt;a class="link" href="http://www.gnu.org/software/emacs/manual/html_node/emacs/index.html#Top" target="_blank" rel="noopener"
>http://www.gnu.org/software/emacs/manual/html_node/emacs/index.html#Top&lt;/a>*ã€‚&lt;/li>
&lt;li>*ã€ŠEmacs å‚è€ƒå¡ã€‹*æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å°æŠ„ã€‚Â &lt;em>&lt;a class="link" href="http://www.ic.unicamp.br/~helio/disciplinas/MC102/Emacs_Reference_Card.pdf" target="_blank" rel="noopener"
>http://www.ic.unicamp.br/~helio/disciplinas/MC102/Emacs_Reference_Card.pdf&lt;/a>&lt;/em>ã€‚&lt;/li>
&lt;li>Mickey Petersen çš„&lt;em>Mastering Emacs&lt;/em>æ˜¯æœ€å¥½çš„ Emacs èµ„æºä¹‹ä¸€ã€‚ä»é˜…è¯»æŒ‡å—å¼€å§‹ã€‚Â &lt;em>&lt;a class="link" href="http://www.masteringemacs.org/reading-guide/" target="_blank" rel="noopener"
>é˜…è¯»æŒ‡å—-æŒæ¡ Emacs&lt;/a>&lt;/em> ã€‚&lt;/li>
&lt;li>å¯¹äºæ›´æ³¨é‡è§†è§‰æ•ˆæœçš„äººï¼Œæˆ‘æ¨èæ‰‹ç»˜çš„ã€Šå¦‚ä½•å­¦ä¹  Emacsã€‹ã€‚Emacs 24 æˆ–æ›´é«˜ç‰ˆæœ¬çš„åˆå­¦è€…æŒ‡å—&amp;rdquo;ï¼Œä½œè€… Sacha Chuaã€‚Â &lt;em>&lt;a class="link" href="http://sachachua.com/blog/wp-content/uploads/2013/05/How-to-Learn-Emacs8.png" target="_blank" rel="noopener"
>http://sachachua.com/blog/wp-content/uploads/2013/05/How-to-Learn-Emacs8.png&lt;/a>&lt;/em>ã€‚&lt;/li>
&lt;li>åªè¦æŒ‰&lt;strong>C-h t&lt;/strong>å°±å¯ä»¥çœ‹åˆ°å†…ç½®çš„æ•™ç¨‹ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="æ‘˜è¦">æ‘˜è¦&lt;/h2>
&lt;p>å‘œå‘¼! ä½ å·²ç»è¦†ç›–äº†å¾ˆå¤šåœ°æ–¹ã€‚ä½ ç°åœ¨çŸ¥é“äº† Emacs ä½œä¸ºä¸€ä¸ª Lisp è§£é‡Šå™¨çš„çœŸæ­£æ€§è´¨ã€‚ç»‘å®šé”®æ˜¯æ‰§è¡Œ elisp å‡½æ•°çš„å¿«æ·æ–¹å¼ï¼Œè€Œæ¨¡å¼æ˜¯ç»‘å®šé”®å’Œå‡½æ•°çš„é›†åˆã€‚ä½ å­¦ä¼šäº†å¦‚ä½•ä»¥è‡ªå·±çš„æ–¹å¼ä¸ Emacs äº’åŠ¨ï¼Œå¹¶æŒæ¡äº†ç¼“å†²åŒºã€çª—å£ã€åŒºåŸŸã€æ€æˆ®å’Œæ‹‰åŠ¨ã€‚æœ€åï¼Œä½ å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨ CIDER å’Œ paredit è½»æ¾åœ°ä¸ Clojure å·¥ä½œã€‚&lt;/p>
&lt;p>æœ‰äº†è¿™äº›æ¥ä¹‹ä¸æ˜“çš„ Emacs çŸ¥è¯†ï¼Œç°åœ¨æ˜¯æ—¶å€™å¼€å§‹è®¤çœŸå­¦ä¹  Clojure äº†&lt;/p>
&lt;p>&lt;a class="link" href="https://www.braveclojure.com/basic-emacs/#footnote-5680-1-backlink" target="_blank" rel="noopener"
>1&lt;/a> &lt;em>&lt;a class="link" href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Minor-Modes.html" target="_blank" rel="noopener"
>http://www.gnu.org/software/emacs/manual/html_node/emacs/Minor-Modes.html&lt;/a>&lt;/em>ã€‚&lt;/p></description></item><item><title>Chapter1 æ„å»ºã€è¿è¡Œå’Œ REPL</title><link>https://example.com/p/chapter1-%E6%9E%84%E5%BB%BA%E8%BF%90%E8%A1%8C%E5%92%8C-repl/</link><pubDate>Thu, 13 Jan 2022 10:26:48 +0800</pubDate><guid>https://example.com/p/chapter1-%E6%9E%84%E5%BB%BA%E8%BF%90%E8%A1%8C%E5%92%8C-repl/</guid><description>&lt;h1 id="æ„å»ºè¿è¡Œå’Œ-repl">æ„å»ºã€è¿è¡Œå’Œ REPL&lt;/h1>
&lt;p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†é¢„å…ˆæŠ•å…¥å°‘é‡æ—¶é—´æ¥ç†Ÿæ‚‰å»ºç«‹å’Œè¿è¡Œ Clojure ç¨‹åºçš„å¿«é€Ÿã€å‚»ç“œå¼æ–¹æ³•ã€‚è®©ä¸€ä¸ªçœŸæ­£çš„ç¨‹åºè¿è¡Œèµ·æ¥æ„Ÿè§‰å¾ˆå¥½ã€‚è¾¾åˆ°äº†è¿™ä¸ªé‡Œç¨‹ç¢‘ï¼Œä½ å°±å¯ä»¥è‡ªç”±åœ°è¿›è¡Œå®éªŒï¼Œåˆ†äº«ä½ çš„å·¥ä½œï¼Œå¹¶å‘é‚£äº›ä»åœ¨ä½¿ç”¨ä¸Šä¸ªä¸–çºªçš„è¯­è¨€çš„åŒäº‹å¹¸ç¾ä¹ç¥¸ã€‚è¿™å°†æœ‰åŠ©äºä¿æŒä½ çš„ç§¯ææ€§!&lt;/p>
&lt;p>ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨*Read-Eval-Print Loopï¼ˆREPLï¼‰*åœ¨ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Clojure è¿›ç¨‹ä¸­å³æ—¶è¿è¡Œä»£ç ï¼Œè¿™ä½¿ä½ èƒ½å¤Ÿå¿«é€Ÿæµ‹è¯•ä½ å¯¹è¯­è¨€çš„ç†è§£å¹¶æ›´æœ‰æ•ˆåœ°å­¦ä¹ ã€‚&lt;/p>
&lt;p>ä½†é¦–å…ˆï¼Œæˆ‘å°†ç®€è¦åœ°ä»‹ç» Clojureã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä»‹ç» Leiningenï¼Œè¿™æ˜¯ Clojure äº‹å®ä¸Šçš„æ ‡å‡†æ„å»ºå·¥å…·ã€‚åœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ å°†çŸ¥é“å¦‚ä½•åšä»¥ä¸‹äº‹æƒ…ã€‚&lt;/p>
&lt;ul>
&lt;li>ç”¨ Leiningen åˆ›å»ºä¸€ä¸ªæ–°çš„ Clojure é¡¹ç›®&lt;/li>
&lt;li>æ„å»ºè¯¥é¡¹ç›®ä»¥åˆ›å»ºä¸€ä¸ªå¯æ‰§è¡Œçš„ JAR æ–‡ä»¶&lt;/li>
&lt;li>æ‰§è¡Œ JAR æ–‡ä»¶&lt;/li>
&lt;li>åœ¨ Clojure REPL ä¸­æ‰§è¡Œä»£ç &lt;/li>
&lt;/ul>
&lt;h2 id="ç¬¬ä¸€é‡è¦çš„äº‹-ä»€ä¹ˆæ˜¯-clojure">ç¬¬ä¸€é‡è¦çš„äº‹: ä»€ä¹ˆæ˜¯ Clojure&lt;/h2>
&lt;p>Clojure æ˜¯ç”± Rich Hickey åœ¨ä¸€åº§ç¥è¯èˆ¬çš„ç«å±±ä¸­é“¸é€ çš„ã€‚ä»–ä½¿ç”¨ Lispã€å‡½æ•°å¼ç¼–ç¨‹å’Œä»–è‡ªå·±çš„ä¸€ç»ºå²è¯—èˆ¬çš„å¤´å‘çš„åˆé‡‘ï¼Œåˆ›é€ äº†ä¸€ç§ä»¤äººæ„‰å¿«è€Œå¼ºå¤§çš„è¯­è¨€ã€‚å®ƒçš„ Lisp é—äº§ä½¿ä½ æœ‰èƒ½åŠ›å†™å‡ºæ¯”å¤§å¤šæ•°é Lisp è¯­è¨€æ›´æœ‰è¡¨ç°åŠ›çš„ä»£ç ï¼Œè€Œå®ƒå¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç‹¬ç‰¹ç†è§£å°†ä½¿ä½ ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜çš„æ€ç»´æ›´æ•é”ã€‚æ­¤å¤–ï¼ŒClojure ä¸ºä½ æä¾›äº†æ›´å¥½çš„å·¥å…·æ¥å¤„ç†å¤æ‚çš„é¢†åŸŸï¼ˆå¦‚å¹¶å‘ç¼–ç¨‹ï¼‰ï¼Œè¿™äº›é¢†åŸŸåœ¨ä¼ ç»Ÿä¸Šè¢«è®¤ä¸ºä¼šä½¿å¼€å‘äººå‘˜é™·å…¥å¤šå¹´çš„æ²»ç–—ä¸­ã€‚&lt;/p>
&lt;p>ä¸è¿‡ï¼Œåœ¨è°ˆè®º Clojure æ—¶ï¼Œé‡è¦çš„æ˜¯è¦ç‰¢è®° Clojure è¯­è¨€å’Œ Clojure ç¼–è¯‘å™¨ä¹‹é—´çš„åŒºåˆ«ã€‚Clojure è¯­è¨€æ˜¯ä¸€ç§å¼ºè°ƒå‡½æ•°çš„ Lisp æ–¹è¨€ï¼Œå…¶è¯­æ³•å’Œè¯­ä¹‰ä¸ä»»ä½•å®ç°éƒ½æ— å…³ã€‚ç¼–è¯‘å™¨æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„ JAR æ–‡ä»¶ï¼Œ&lt;em>clojure.jar&lt;/em>ï¼Œå®ƒæ¥æ”¶ç”¨ Clojure è¯­è¨€ç¼–å†™çš„ä»£ç å¹¶å°†å…¶ç¼–è¯‘ä¸º Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰å­—èŠ‚ç ã€‚ä½ ä¼šçœ‹åˆ°&lt;em>Clojure&lt;/em>è¢«ç”¨æ¥æŒ‡ä»£è¯­è¨€å’Œç¼–è¯‘å™¨ï¼Œå¦‚æœä½ ä¸çŸ¥é“å®ƒä»¬æ˜¯ç‹¬ç«‹çš„ä¸œè¥¿ï¼Œå°±ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚ä½†ç°åœ¨ä½ æ„è¯†åˆ°äº†ï¼Œä½ å°±ä¼šå¥½èµ·æ¥ã€‚&lt;/p>
&lt;p>è¿™ç§åŒºåˆ†æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºä¸å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€å¦‚ Rubyã€Pythonã€C å’Œå…¶ä»–è®¸å¤šè¯­è¨€ä¸åŒï¼ŒClojure æ˜¯ä¸€ç§&lt;em>æ‰˜ç®¡è¯­è¨€&lt;/em>ã€‚Clojure ç¨‹åºåœ¨ JVM ä¸­æ‰§è¡Œï¼Œå¹¶ä¾èµ– JVM çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¦‚çº¿ç¨‹å’Œåƒåœ¾æ”¶é›†ã€‚Clojure è¿˜é’ˆå¯¹ JavaScript å’Œå¾®è½¯çš„é€šç”¨è¯­è¨€è¿è¡Œæ—¶ï¼ˆCLRï¼‰ï¼Œä½†æœ¬ä¹¦åªå…³æ³¨ JVM çš„å®ç°ã€‚&lt;/p>
&lt;p>ç¨åæˆ‘ä»¬å°†æ›´å¤šåœ°æ¢è®¨ Clojure å’Œ JVM ä¹‹é—´çš„å…³ç³»ï¼Œä½†ç°åœ¨ä½ éœ€è¦äº†è§£çš„ä¸»è¦æ¦‚å¿µæ˜¯è¿™äº›ã€‚&lt;/p>
&lt;ul>
&lt;li>JVM è¿›ç¨‹æ‰§è¡Œ Java å­—èŠ‚ç ã€‚&lt;/li>
&lt;li>é€šå¸¸æƒ…å†µä¸‹ï¼ŒJava ç¼–è¯‘å™¨ä» Java æºä»£ç ä¸­äº§ç”Ÿ Java å­—èŠ‚ç ã€‚&lt;/li>
&lt;li>JAR æ–‡ä»¶æ˜¯ Java å­—èŠ‚ç çš„é›†åˆã€‚&lt;/li>
&lt;li>Java ç¨‹åºé€šå¸¸ä»¥ JAR æ–‡ä»¶åˆ†å‘ã€‚&lt;/li>
&lt;li>Java ç¨‹åº&lt;em>clojure.jar&lt;/em> è¯»å– Clojure æºä»£ç å¹¶äº§ç”Ÿ Java å­—èŠ‚ç ã€‚&lt;/li>
&lt;li>ç„¶åï¼Œè¯¥ Java å­—èŠ‚ç ç”±å·²ç»è¿è¡Œ&lt;em>clojure.jar&lt;/em>çš„ JVM è¿›ç¨‹æ‰§è¡Œã€‚&lt;/li>
&lt;/ul>
&lt;p>Clojure æŒç»­åœ¨å‘å±•ã€‚æˆªè‡³ç›®å‰ï¼ŒClojure çš„ç‰ˆæœ¬ä¸º 1.9.0ï¼Œå¼€å‘å·¥ä½œä»åœ¨è¿›è¡Œä¸­ã€‚å¦‚æœä½ åœ¨é¥è¿œçš„æœªæ¥è¯»åˆ°è¿™æœ¬ä¹¦ï¼Œå¹¶ä¸” Clojure æœ‰æ›´é«˜çš„ç‰ˆæœ¬å·ï¼Œä¸è¦æ‹…å¿ƒï¼è¿™æœ¬ä¹¦æ¶µç›–äº† Clojure çš„æ‰€æœ‰å†…å®¹ã€‚æœ¬ä¹¦æ¶µç›–äº† Clojure çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™äº›çŸ¥è¯†åœ¨ä¸åŒçš„ç‰ˆæœ¬ä¸­åº”è¯¥ä¸ä¼šæ”¹å˜ã€‚æ²¡æœ‰å¿…è¦è®©ä½ çš„æœºå™¨äººç®¡å®¶æŠŠè¿™æœ¬ä¹¦é€€å›ç»™ä¹¦åº—ã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ çŸ¥é“ä»€ä¹ˆæ˜¯ Clojure äº†ï¼Œè®©æˆ‘ä»¬æ¥å®é™…æ„å»ºä¸€ä¸ªè¯¥æ­»çš„ Clojure ç¨‹åºå§!&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">lein&lt;/span> &lt;span class="k">new &lt;/span>&lt;span class="nv">app&lt;/span> &lt;span class="nv">clojure-noob&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‘½ä»¤åº”è¯¥åˆ›å»ºä¸€ä¸ªä¸æ­¤ç›¸ä¼¼çš„ç›®å½•ç»“æ„ï¼ˆå¦‚æœæœ‰ä¸€äº›å·®å¼‚ä¹Ÿæ²¡å…³ç³»ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="err">|&lt;/span> &lt;span class="nv">.gitignore&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">|&lt;/span> &lt;span class="nv">doc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">|&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nv">intro.md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">âŠ&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nv">project.clj&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">|&lt;/span> &lt;span class="nv">README.md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â‹&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nv">resources&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">|&lt;/span> &lt;span class="nv">src&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">|&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nv">clojure_noob&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">âŒ&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nv">core.clj&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nv">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">|&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nv">clojure_noob&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">|&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="err">|&lt;/span> &lt;span class="nv">core_test.clj&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªé¡¹ç›®éª¨æ¶æœ¬èº«å¹¶ä¸ç‰¹åˆ«ï¼Œä¹Ÿä¸åƒ Clojure é‚£æ ·ã€‚å®ƒåªæ˜¯ Leiningen ä½¿ç”¨çš„ä¸€ç§æƒ¯ä¾‹ã€‚ä½ å°†ä½¿ç”¨ Leiningen æ¥æ„å»ºå’Œè¿è¡Œ Clojure åº”ç”¨ç¨‹åºï¼ŒLeiningen å¸Œæœ›ä½ çš„åº”ç”¨ç¨‹åºæœ‰è¿™ç§ç»“æ„ã€‚ç¬¬ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ–‡ä»¶æ˜¯ä½äºâŠçš„&lt;em>project.clj&lt;/em>ï¼Œå®ƒæ˜¯ Leiningen çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚å®ƒå¯ä»¥å¸®åŠ© Leiningen å›ç­”è¿™æ ·çš„é—®é¢˜ï¼š&amp;ldquo;è¿™ä¸ªé¡¹ç›®æœ‰ä»€ä¹ˆä¾èµ–ï¼Ÿ&amp;ldquo;å’Œ &amp;ldquo;å½“è¿™ä¸ª Clojure ç¨‹åºè¿è¡Œæ—¶ï¼Œä»€ä¹ˆå‡½æ•°åº”è¯¥å…ˆè¿è¡Œï¼Ÿ&amp;rdquo; ä¸€èˆ¬æ¥è¯´ï¼Œä½ ä¼šæŠŠä½ çš„æºä»£ç ä¿å­˜åœ¨&lt;em>src/&amp;lt;project_name&amp;gt;&lt;/em>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½äºâŒçš„&lt;em>src/clojure_noob/core.clj&lt;/em>æ–‡ä»¶å°±æ˜¯ä½ è¦å†™ä¸€æ®µæ—¶é—´çš„ Clojure ä»£ç çš„åœ°æ–¹ã€‚ä½äºâçš„&lt;em>test&lt;/em>ç›®å½•æ˜¾ç„¶åŒ…å«äº†æµ‹è¯•ï¼Œè€Œä½äºâ‹çš„&lt;em>resources&lt;/em>æ˜¯ä½ å­˜å‚¨å›¾ç‰‡ç­‰èµ„äº§çš„åœ°æ–¹ã€‚&lt;/p>
&lt;h3 id="è¿è¡Œ-clojure-é¡¹ç›®">è¿è¡Œ Clojure é¡¹ç›®&lt;/h3>
&lt;p>ç°åœ¨è®©æˆ‘ä»¬æ¥å®é™…è¿è¡Œè¿™ä¸ªé¡¹ç›®ã€‚åœ¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€&lt;em>src/clojure_noob/core.clj&lt;/em>ã€‚ä½ åº”è¯¥çœ‹åˆ°è¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="err">âŠ&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">ns &lt;/span>&lt;span class="nv">clojure-noob.core&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="ss">:gen-class&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">â‹&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">defn &lt;/span>&lt;span class="nv">-main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;I don&amp;#39;t do a whole lot...yet.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="nv">args&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">âŒ&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;Hello, World!&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>âŠå¤„çš„è¡Œå£°æ˜äº†ä¸€ä¸ªå‘½åç©ºé—´ï¼Œä½ ç°åœ¨ä¸éœ€è¦æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ã€‚â‹å¤„çš„&lt;code>-main'å‡½æ•°æ˜¯ä½ çš„ç¨‹åºçš„*å…¥å£ï¼Œè¿™ä¸ªè¯é¢˜å°†åœ¨é™„å½•Aä¸­ä»‹ç»ã€‚ç°åœ¨ï¼Œå°†âŒå¤„çš„&lt;/code>&amp;ldquo;Hello, World!&amp;quot;&lt;code>æ”¹ä¸º&lt;/code>&amp;ldquo;I&amp;rsquo;m a little teapot!&amp;quot;&lt;code>ã€‚å…¨è¡Œåº”è¯¥æ˜¯&lt;/code>(println &amp;ldquo;I&amp;rsquo;m a little teapot!&amp;rdquo;))`ã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„ç»ˆç«¯å¯¼èˆªåˆ°&lt;em>clojure_noob&lt;/em>ç›®å½•ï¼Œç„¶åè¾“å…¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">lein&lt;/span> &lt;span class="nv">run&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://www.braveclojure.com/assets/images/cftbat/getting-started/teapot.png"
loading="lazy"
>&lt;/p>
&lt;p>ä½ åº”è¯¥çœ‹åˆ°è¾“å‡º&lt;code>&amp;quot;I'm a little teapot!&amp;quot;&lt;/code>æ­å–œä½ ï¼Œå°èŒ¶å£¶ï¼Œä½ ç¼–å†™å¹¶æ‰§è¡Œäº†ä¸€ä¸ªç¨‹åºï¼&amp;quot;ã€‚&lt;/p>
&lt;p>å½“ä½ é˜…è¯»æœ¬ä¹¦æ—¶ï¼Œä½ ä¼šäº†è§£åˆ°æ›´å¤šå…³äºç¨‹åºä¸­å®é™…å‘ç”Ÿçš„äº‹æƒ…ï¼Œä½†ç°åœ¨ä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>-main&lt;/code>ï¼Œå½“ä½ åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ&lt;code>lein run&lt;/code>æ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¿è¡Œã€‚&lt;/p>
&lt;h3 id="æ„å»º-clojure-é¡¹ç›®">æ„å»º Clojure é¡¹ç›®&lt;/h3>
&lt;p>ä½¿ç”¨&lt;code>lein run&lt;/code>å¯¹äºå°è¯•ä½ çš„ä»£ç æ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³ä¸æ²¡æœ‰å®‰è£… Leiningen çš„äººåˆ†äº«ä½ çš„å·¥ä½œï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œä»»ä½•å®‰è£…äº† Java çš„äººï¼ˆåŸºæœ¬ä¸Šå°±æ˜¯æ‰€æœ‰äººï¼‰éƒ½å¯ä»¥æ‰§è¡Œã€‚è¦åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ï¼Œè¯·è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">lein&lt;/span> &lt;span class="nv">uberjar&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‘½ä»¤åˆ›å»ºäº†&lt;em>target/uberjar/clojure-noob-0.1.0**-SNAPSHOT-standalone.jar&lt;/em>æ–‡ä»¶ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œè¿™ä¸ªå‘½ä»¤ä½¿ Java æ‰§è¡Œå®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">java&lt;/span> &lt;span class="nv">-jar&lt;/span> &lt;span class="nv">target/uberjar/clojure-noob-0.1.0-SNAPSHOT-standalone.jar&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœ‹çœ‹è¿™ä¸ª! æ–‡ä»¶&lt;em>target/uberjar/clojure-noob-0.1.0-SNAPSHOT**-standalone.jar&lt;/em>æ˜¯ä½ çš„ Clojure ç¨‹åºï¼Œä½ å¯ä»¥åœ¨å‡ ä¹ä»»ä½•å¹³å°ä¸Šå‘å¸ƒå’Œè¿è¡Œã€‚&lt;/p>
&lt;p>ç°åœ¨ä½ å·²ç»æŒæ¡äº†æ„å»ºã€è¿è¡Œå’Œåˆ†å‘ï¼ˆéå¸¸ï¼‰åŸºæœ¬çš„ Clojure ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰åŸºæœ¬ç»†èŠ‚ã€‚åœ¨åé¢çš„ç« èŠ‚ä¸­ï¼Œä½ ä¼šäº†è§£åˆ°æ›´å¤šçš„ç»†èŠ‚ï¼Œå½“ä½ è¿è¡Œå‰é¢çš„å‘½ä»¤æ—¶ï¼ŒLeiningen åœ¨åšä»€ä¹ˆï¼Œå¯¹ Clojure ä¸ JVM çš„å…³ç³»ä»¥åŠä½ å¦‚ä½•è¿è¡Œç”Ÿäº§ä»£ç æœ‰äº†å®Œæ•´çš„äº†è§£ã€‚&lt;/p>
&lt;p>åœ¨æˆ‘ä»¬è¿›å…¥ç¬¬äºŒç« ï¼Œè®¨è®º Emacs çš„ç¥å¥‡å’Œè£è€€ä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦ä¸€ä¸ªé‡è¦çš„å·¥å…·ï¼šREPLã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨-repl">ä½¿ç”¨ REPL&lt;/h3>
&lt;p>REPL æ˜¯ä¸€ä¸ªç”¨äºè¯•éªŒä»£ç çš„å·¥å…·ã€‚å®ƒå…è®¸ä½ ä¸æ­£åœ¨è¿è¡Œçš„ç¨‹åºè¿›è¡Œäº¤äº’ï¼Œå¹¶å¿«é€Ÿå°è¯•å„ç§æƒ³æ³•ã€‚å®ƒé€šè¿‡å‘ä½ æä¾›ä¸€ä¸ªæç¤ºï¼Œè®©ä½ è¾“å…¥ä»£ç æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚ç„¶åï¼Œå®ƒ&lt;em>è¯»å–&lt;/em>ä½ çš„è¾“å…¥ï¼Œ&lt;em>æ±‚å€¼&lt;/em>å®ƒï¼Œ&lt;em>æ‰“å°&lt;/em>ç»“æœï¼Œå¹¶&lt;em>å¾ªç¯&lt;/em>ï¼Œå†æ¬¡å‘ä½ æä¾›æç¤ºã€‚&lt;/p>
&lt;p>è¿™ä¸ªè¿‡ç¨‹å®ç°äº†ä¸€ä¸ªå¿«é€Ÿçš„åé¦ˆå¾ªç¯ï¼Œè¿™åœ¨å¤§å¤šæ•°å…¶ä»–è¯­è¨€ä¸­æ˜¯ä¸å¯èƒ½çš„ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½ ç»å¸¸ä½¿ç”¨å®ƒï¼Œå› ä¸ºä½ èƒ½å¤Ÿåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å¿«é€Ÿæ£€æŸ¥ä½ å¯¹ Clojure çš„ç†è§£ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒREPL å¼€å‘æ˜¯ Lisp ä½“éªŒçš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨å®ƒï¼Œä½ å°±çœŸçš„é”™è¿‡äº†ã€‚&lt;/p>
&lt;p>è¦å¯åŠ¨ä¸€ä¸ª REPLï¼Œè¯·è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">lein&lt;/span> &lt;span class="nv">repl&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºåº”è¯¥æ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">nREPL&lt;/span> &lt;span class="nv">server&lt;/span> &lt;span class="nv">started&lt;/span> &lt;span class="nv">on&lt;/span> &lt;span class="nv">port&lt;/span> &lt;span class="mi">28925&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">REPL-y&lt;/span> &lt;span class="mf">0.1&lt;/span>&lt;span class="nv">.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Clojure&lt;/span> &lt;span class="mf">1.9&lt;/span>&lt;span class="nv">.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">Exit&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="nv">Control+D&lt;/span> &lt;span class="nb">or &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">exit&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nb">or &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">quit&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Commands&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">user/help&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">Docs&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">doc &lt;/span>&lt;span class="nv">function-name-here&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">find-doc &lt;/span>&lt;span class="s">&amp;#34;part-of-name-here&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">Source&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">source&lt;/span> &lt;span class="nv">function-name-here&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">user/sourcery&lt;/span> &lt;span class="nv">function-name-here&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">Javadoc&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">javadoc&lt;/span> &lt;span class="nv">java-object-or-class-here&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Examples&lt;/span> &lt;span class="nv">from&lt;/span> &lt;span class="nv">clojuredocs.org&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nv">clojuredocs&lt;/span> &lt;span class="nb">or &lt;/span>&lt;span class="nv">cdoc&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">user/clojuredocs&lt;/span> &lt;span class="nv">name-here&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nf">user/clojuredocs&lt;/span> &lt;span class="s">&amp;#34;ns-here&amp;#34;&lt;/span> &lt;span class="s">&amp;#34;name-here&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">clojure-noob.core=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åä¸€è¡Œï¼Œ&lt;code>clojure-noob.core=&amp;gt;&lt;/code>ï¼Œå‘Šè¯‰ä½ ï¼Œä½ åœ¨&lt;code>clojure -noob.core&lt;/code>å‘½åç©ºé—´ä¸­ã€‚ä½ å°†åœ¨åé¢å­¦ä¹ å‘½åç©ºé—´ï¼Œä½†ç°åœ¨æ³¨æ„åˆ°å‘½åç©ºé—´åŸºæœ¬ä¸Šä¸ä½ çš„&lt;em>src/&lt;strong>clojure_noob&lt;/strong>/core.clj&lt;/em>æ–‡ä»¶çš„åç§°ä¸€è‡´ã€‚å¦å¤–ï¼Œæ³¨æ„åˆ° REPL æ˜¾ç¤ºçš„ç‰ˆæœ¬æ˜¯&lt;em>Clojure 1.9.0&lt;/em>ï¼Œä½†å¦‚å‰æ‰€è¿°ï¼Œæ— è®ºä½ ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬ï¼Œä¸€åˆ‡éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚&lt;/p>
&lt;p>è¯¥æç¤ºè¿˜è¡¨æ˜ä½ çš„ä»£ç åœ¨ REPL ä¸­è¢«åŠ è½½ï¼Œä½ å¯ä»¥æ‰§è¡Œè¢«å®šä¹‰çš„å‡½æ•°ã€‚ç°åœ¨åªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œ&lt;code>-main&lt;/code>ï¼Œè¢«å®šä¹‰äº†ã€‚ç°åœ¨å°±å»æ‰§è¡Œå®ƒå§ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">clojure-noob.core=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nf">-main&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">I&lt;/span>&lt;span class="ss">&amp;#39;m&lt;/span> &lt;span class="nv">a&lt;/span> &lt;span class="nv">little&lt;/span> &lt;span class="nv">teapot!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">nil&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¹²å¾—å¥½! ä½ åˆšåˆšä½¿ç”¨ REPL æ±‚å€¼äº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚è¯•è¯•å‡ ä¸ªæ›´åŸºæœ¬çš„ Clojure å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">clojure-noob.core=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">clojure-noob.core=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">* &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">clojure-noob.core=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">first &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>çœŸæ£’! ä½ åŠ äº†ä¸€äº›æ•°å­—ï¼Œä¹˜äº†ä¸€äº›æ•°å­—ï¼Œå¹¶ä»ä¸€ä¸ª Vector ä¸­å–å‡ºäº†ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ä½ è¿˜ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°äº†å¥‡æ€ªçš„ Lisp è¯­æ³•! æ‰€æœ‰çš„ Lispï¼ŒåŒ…æ‹¬ Clojureï¼Œéƒ½é‡‡ç”¨&lt;em>å‰ç¼€ç¬¦å·&lt;/em>ï¼Œè¿™æ„å‘³ç€è¿ç®—ç¬¦åœ¨è¡¨è¾¾å¼ä¸­æ€»æ˜¯æ’åœ¨ç¬¬ä¸€ä½ã€‚å¦‚æœä½ ä¸ç¡®å®šè¿™æ„å‘³ç€ä»€ä¹ˆï¼Œä¸è¦æ‹…å¿ƒã€‚ä½ å¾ˆå¿«å°±ä¼šäº†è§£åˆ° Clojure çš„æ‰€æœ‰è¯­æ³•ã€‚&lt;/p>
&lt;p>ä»æ¦‚å¿µä¸Šè®²ï¼ŒREPL ç±»ä¼¼äº SSHã€‚å°±åƒä½ å¯ä»¥ä½¿ç”¨ SSH ä¸è¿œç¨‹æœåŠ¡å™¨äº¤äº’ä¸€æ ·ï¼ŒClojure REPL å…è®¸ä½ ä¸æ­£åœ¨è¿è¡Œçš„ Clojure è¿›ç¨‹äº¤äº’ã€‚è¿™é¡¹åŠŸèƒ½å¯ä»¥éå¸¸å¼ºå¤§ï¼Œå› ä¸ºä½ ç”šè‡³å¯ä»¥å°† REPL é™„åŠ åˆ°ä¸€ä¸ªå®æ—¶ç”Ÿäº§çš„åº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨å®ƒè¿è¡Œæ—¶ä¿®æ”¹ä½ çš„ç¨‹åºã€‚ä¸è¿‡ç°åœ¨ï¼Œä½ å°†ä½¿ç”¨ REPL æ¥å»ºç«‹ä½ å¯¹ Clojure è¯­æ³•å’Œè¯­ä¹‰çš„äº†è§£ã€‚&lt;/p>
&lt;p>è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼šä»Šåï¼Œæœ¬ä¹¦å°†ä»‹ç»æ²¡æœ‰ REPL æç¤ºçš„ä»£ç ï¼Œä½†è¯·å°è¯•ä¸€ä¸‹è¿™äº›ä»£ç ! ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-clojure" data-lang="clojure">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="k">do &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">println &lt;/span>&lt;span class="s">&amp;#34;no prompt here!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nb">+ &lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; no prompt here!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">; =&amp;gt; 4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ä½ çœ‹åˆ°è¿™æ ·çš„ä»£ç ç‰‡æ®µæ—¶ï¼Œä»¥&lt;code>ï¼›=&amp;gt;&lt;/code>å¼€å¤´çš„è¡Œè¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„ä»£ç çš„è¾“å‡ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”è¯¥æ‰“å°å‡º&lt;code>è¿™é‡Œæ²¡æœ‰æç¤º'çš„æ–‡å­—ï¼Œä»£ç çš„è¿”å›å€¼æ˜¯&lt;/code>4&amp;rsquo;ã€‚&lt;/p>
&lt;h2 id="clojure-ç¼–è¾‘å™¨">Clojure ç¼–è¾‘å™¨&lt;/h2>
&lt;p>åˆ°æ­¤ä¸ºæ­¢ï¼Œä½ åº”è¯¥å·²ç»å…·å¤‡äº†å¼€å§‹å­¦ä¹  Clojure è¯­è¨€æ‰€éœ€çš„åŸºæœ¬çŸ¥è¯†ï¼Œè€Œä¸éœ€è¦å¯¹ç¼–è¾‘å™¨æˆ–é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰å¤§è´¹å‘¨ç« ã€‚ä½†å¦‚æœä½ ç¡®å®æƒ³è¦ä¸€ä¸ªå…³äºå¼ºå¤§ç¼–è¾‘å™¨çš„å¥½æ•™ç¨‹ï¼Œç¬¬ 2 ç« æ¶‰åŠ Emacsï¼Œè¿™æ˜¯ Clojurists ä¸­æœ€å—æ¬¢è¿çš„ç¼–è¾‘å™¨ã€‚ä½ ç»å¯¹ä¸éœ€è¦åœ¨ Clojure å¼€å‘ä¸­ä½¿ç”¨ Emacsï¼Œä½† Emacs æä¾›äº†ä¸ Clojure REPL çš„ç´§å¯†é›†æˆï¼Œéå¸¸é€‚åˆç¼–å†™ Lisp ä»£ç ã€‚ç„¶è€Œï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œä½ è¦ä½¿ç”¨é€‚åˆä½ çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;p>å¦‚æœ Emacs ä¸æ˜¯ä½ çš„é‚£æ¯èŒ¶ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä¸º Clojure å¼€å‘è®¾ç½®å…¶ä»–æ–‡æœ¬ç¼–è¾‘å™¨å’Œ IDE çš„èµ„æºã€‚&lt;/p>
&lt;ul>
&lt;li>è¿™ä¸ª YouTube è§†é¢‘å°†å‘Šè¯‰ä½ å¦‚ä½•ä¸º Clojure å¼€å‘è®¾ç½® Sublime Text 2ã€‚Â  &lt;em>&lt;a class="link" href="http://www.youtube.com/watch?v=wBl0rYXQdGg/" target="_blank" rel="noopener"
>- YouTube&lt;/a>&lt;/em>ã€‚&lt;/li>
&lt;li>Vim æœ‰å¾ˆå¥½çš„å·¥å…·ç”¨äº Clojure å¼€å‘ã€‚è¿™ç¯‡æ–‡ç« æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚Â &lt;em>&lt;a class="link" href="http://mybuddymichael.com/writings/writing-clojure-with-vim-in-2013.html" target="_blank" rel="noopener"
>Writing Clojure With Vim In 2013 - mybuddymichael.com&lt;/a>&lt;/em>ã€‚&lt;/li>
&lt;li>Counterclockwise æ˜¯ä¸€ä¸ªå¼ºçƒˆæ¨èçš„ Eclipse æ’ä»¶ã€‚&lt;em>&lt;a class="link" href="https://github.com/laurentpetit/ccw/wiki/GoogleCodeHome" target="_blank" rel="noopener"
>GoogleCodeHome - ccw-ide/ccw Wiki - GitHub&lt;/a>&lt;/em>ã€‚&lt;/li>
&lt;li>Cursive Clojure æ˜¯æ¨èç»™é‚£äº›ä½¿ç”¨ IntelliJ çš„ IDEï¼š &lt;em>&lt;a class="link" href="https://cursiveclojure.com/" target="_blank" rel="noopener"
>https://cursiveclojure.com/&lt;/a>&lt;/em>ã€‚&lt;/li>
&lt;li>Nightcode æ˜¯ä¸€ä¸ªç”¨ Clojure ç¼–å†™çš„ç®€å•ã€å…è´¹çš„ IDEã€‚Â &lt;em>&lt;a class="link" href="https://github.com/oakes/Nightcode/" target="_blank" rel="noopener"
>GitHub - oakes/Nightcode: An IDE for Clojure&lt;/a>&lt;/em>ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>æˆ‘çœŸä¸ºä½ æ„Ÿåˆ°éª„å‚²ï¼Œå°èŒ¶å£¶ã€‚ä½ å·²ç»è¿è¡Œäº†ä½ çš„ç¬¬ä¸€ä¸ª Clojure ç¨‹åº! ä¸ä»…å¦‚æ­¤ï¼Œä½ è¿˜ç†Ÿæ‚‰äº† REPLï¼Œè¿™æ˜¯å¼€å‘ Clojure è½¯ä»¶çš„æœ€é‡è¦å·¥å…·ä¹‹ä¸€ã€‚å¤ªç¥å¥‡äº†! è¿™è®©æˆ‘æƒ³èµ·äº†æˆ‘ä¸ªäººè‹±é›„ä¹‹ä¸€çš„ã€ŠLong Liveã€‹ä¸­çš„ä¸æœ½åå¥ã€‚&lt;/p>
&lt;blockquote>
&lt;p>You held your head like a hero&lt;br>
On a history book page&lt;br>
It was the end of a decade&lt;br>
But the start of an age&lt;br>
â€”Taylor Swift&lt;/p>
&lt;/blockquote>
&lt;p>å¥½æ ·çš„!&lt;/p></description></item><item><title>Introduction ç®€ä»‹</title><link>https://example.com/p/introduction-%E7%AE%80%E4%BB%8B/</link><pubDate>Thu, 13 Jan 2022 10:11:25 +0800</pubDate><guid>https://example.com/p/introduction-%E7%AE%80%E4%BB%8B/</guid><description>&lt;h1 id="ç®€ä»‹">ç®€ä»‹&lt;/h1>
&lt;p>åœ¨ä½ çš„å†…å¿ƒæ·±å¤„ï¼Œä½ ä¸€ç›´éƒ½çŸ¥é“ä½ æ³¨å®šè¦å­¦ä¹  Clojureã€‚Â æ¯å½“ä½ é«˜ä¸¾ç€é”®ç›˜ï¼Œä¸ºä¸€ä¸ªéš¾ä»¥ç†è§£çš„ç±»å±‚æ¬¡ç»“æ„è€Œç—›è‹¦åœ°å“­æ³£æ—¶ï¼›æ¯å½“ä½ æ™šä¸Šèººåœ¨åºŠä¸Šï¼Œä¸ºä¸€ä¸ªçªå˜å¼•èµ·çš„æµ·æ£®å ¡è™«è€Œå“­æ³£æ‰°ä¹±ä½ çš„äº²äººæ—¶ï¼›æ¯å½“ä¸€ä¸ªç«èµ›æ¡ä»¶ä½¿ä½ æ‹”æ‰æ›´å¤šä½ ä¸æ–­å‡å°‘çš„å¤´å‘æ—¶ï¼Œä½ çš„æŸä¸ªç§˜å¯†éƒ¨åˆ†å·²ç»çŸ¥é“&lt;em>ä¸€å®šæœ‰ä¸€ä¸ªæ›´å¥½çš„åŠæ³•&lt;/em>ã€‚&lt;/p>
&lt;p>ç°åœ¨ï¼Œç»ˆäºï¼Œä½ é¢å‰çš„æ•™å­¦ææ–™å°†ä½¿ä½ ä¸ä½ æ¸´æœ›å·²ä¹…çš„ç¼–ç¨‹è¯­è¨€ç»“åˆèµ·æ¥ã€‚&lt;/p>
&lt;h2 id="å­¦ä¹ ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ç©¿è¶Šå››ä¸ªè¿·å®«çš„æ—…ç¨‹">å­¦ä¹ ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼šç©¿è¶Šå››ä¸ªè¿·å®«çš„æ—…ç¨‹&lt;/h2>
&lt;p>ä¸ºäº†æœ€å¤§é™åº¦åœ°å‘æŒ¥ Clojure çš„ä½œç”¨ï¼Œä½ éœ€è¦åœ¨æ¯ä¸ªå­¦ä¹ æ–°è¯­è¨€çš„ç¨‹åºå‘˜é¢ä¸´çš„å››ä¸ªè¿·å®«ä¸­æ‰¾åˆ°è‡ªå·±çš„è·¯ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å·¥å…·ä¹‹æ—&lt;/strong> å‹å¥½è€Œé«˜æ•ˆçš„ç¼–ç¨‹ç¯å¢ƒä½¿ä½ èƒ½å¤Ÿè½»æ¾åœ°å°è¯•ä½ çš„æƒ³æ³•ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•è®¾ç½®ä½ çš„ç¯å¢ƒã€‚&lt;/li>
&lt;li>&lt;strong>è¯­è¨€ä¹‹å±±&lt;/strong> éšç€ä½ çš„æ”€ç™»ï¼Œä½ å°†è·å¾— Clojure çš„è¯­æ³•ã€è¯­ä¹‰å’Œæ•°æ®ç»“æ„æ–¹é¢çš„çŸ¥è¯†ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨æœ€å¼ºå¤§çš„ç¼–ç¨‹å·¥å…·ä¹‹ä¸€&amp;ndash;å®ï¼Œå¹¶å­¦ä¹ å¦‚ä½•åˆ©ç”¨ Clojure çš„å¹¶å‘ç»“æ„æ¥ç®€åŒ–ä½ çš„ç”Ÿæ´»ã€‚&lt;/li>
&lt;li>&lt;strong>ç¥å™¨ä¹‹æ´&lt;/strong> åœ¨å®ƒçš„æ·±å¤„ï¼Œä½ å°†å­¦ä¼šæ„å»ºã€è¿è¡Œå’Œå‘å¸ƒä½ è‡ªå·±çš„ç¨‹åºï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ä»£ç åº“ã€‚ä½ è¿˜å°†å­¦ä¹  Clojure ä¸ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰çš„å…³ç³»ã€‚&lt;/li>
&lt;li>&lt;strong>å¿ƒæ€äº‘å ¡&lt;/strong> åœ¨å…¶ç¨€è–„çš„ç©ºæ°”ä¸­ï¼Œä½ å°†äº†è§£ Lisp å’Œå‡½æ•°å¼ç¼–ç¨‹çš„åŸå› å’Œæ–¹æ³•ã€‚ä½ å°†äº†è§£æ¸—é€åœ¨ Clojure ä¸­çš„ç®€å•å“²å­¦ï¼Œä»¥åŠå¦‚ä½•åƒ Clojurist ä¸€æ ·è§£å†³é—®é¢˜ã€‚&lt;/li>
&lt;/ul>
&lt;p>åˆ«æé”™äº†ï¼Œä½ è¦å·¥ä½œã€‚ä½†è¿™æœ¬ä¹¦ä¼šè®©ä½ æ„Ÿè§‰åˆ°å·¥ä½œæ˜¯ä»¤äººæŒ¯å¥‹çš„ï¼Œè€Œä¸æ˜¯ç–²æƒ«çš„ã€‚è¿™æ˜¯å› ä¸ºæœ¬ä¹¦éµå¾ªä¸‰ä¸ªå‡†åˆ™ã€‚&lt;/p>
&lt;ul>
&lt;li>å®ƒé‡‡å–äº†ç”œç‚¹ä¼˜å…ˆçš„æ–¹æ³•ï¼Œç»™ä½ æä¾›äº†ä½ éœ€è¦çš„å¼€å‘å·¥å…·å’Œè¯­è¨€ç»†èŠ‚ï¼Œä»¥ä¾¿ç«‹å³å¼€å§‹ç©çœŸæ­£çš„ç¨‹åºã€‚&lt;/li>
&lt;li>å®ƒå‡å®šä½ å¯¹ JVMã€å‡½æ•°å¼ç¼–ç¨‹æˆ– Lisp æ²¡æœ‰ç»éªŒã€‚å®ƒè¯¦ç»†åœ°æ¶µç›–äº†è¿™äº›ä¸»é¢˜ï¼Œæ‰€ä»¥å½“ä½ æ„å»ºå’Œè¿è¡Œ Clojure ç¨‹åºæ—¶ï¼Œä½ ä¼šå¯¹ä½ æ­£åœ¨åšçš„äº‹æƒ…æ„Ÿåˆ°è‡ªä¿¡ã€‚&lt;/li>
&lt;li>å®ƒé¿å¼€äº† &lt;em>çœŸå®ä¸–ç•Œ&lt;/em> çš„ä¾‹å­ï¼Œè€Œé€‰æ‹©äº†æ›´æœ‰è¶£çš„ç»ƒä¹ ï¼Œå¦‚ &lt;em>æ”»å‡»éœæ¯”ç‰¹äºº&lt;/em> å’Œ &lt;em>è¿½è¸ªé—ªäº®çš„å¸è¡€é¬¼&lt;/em> ã€‚&lt;/li>
&lt;/ul>
&lt;p>åˆ°æœ€åï¼Œä½ å°†èƒ½å¤Ÿä½¿ç”¨ Clojure&amp;ndash;ç°å­˜çš„æœ€ä»¤äººå…´å¥‹å’Œæœ€æœ‰è¶£çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€!&lt;/p>
&lt;h2 id="æœ¬ä¹¦æ˜¯å¦‚ä½•ç»„ç»‡çš„">æœ¬ä¹¦æ˜¯å¦‚ä½•ç»„ç»‡çš„&lt;/h2>
&lt;p>æœ¬ä¹¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œä»¥ä¾¿æ›´å¥½åœ°æŒ‡å¯¼ä½ å®Œæˆä½ çš„å‹‡æ•¢æ¢ç´¢ï¼Œå‹‡æ•¢çš„åˆå‡ºèŒ…åºçš„ Clojuristã€‚&lt;/p>
&lt;h3 id="ç¬¬ä¸€éƒ¨åˆ†ç¯å¢ƒè®¾ç½®">ç¬¬ä¸€éƒ¨åˆ†ï¼šç¯å¢ƒè®¾ç½®&lt;/h3>
&lt;p>ä¸ºäº†ä¿æŒåŠ¨åŠ›å’Œé«˜æ•ˆå­¦ä¹ ï¼Œä½ éœ€è¦å®é™…å†™ä»£ç å’Œæ„å»ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™äº›ç« èŠ‚å°†å¸¦é¢†ä½ å¿«é€Ÿæµè§ˆä½ æ‰€éœ€è¦çš„å·¥å…·ï¼Œä»¥ä¾¿è½»æ¾åœ°ç¼–å†™ç¨‹åºã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥ä¸“æ³¨äºå­¦ä¹  Clojureï¼Œè€Œä¸æ˜¯æ‘†å¼„ä½ çš„ç¯å¢ƒã€‚&lt;/p>
&lt;p>ç¬¬ 1 ç« ï¼šæ„å»ºã€è¿è¡Œå’Œ REPL&lt;/p>
&lt;p>è®©ä¸€ä¸ªçœŸæ­£çš„ç¨‹åºè¿è¡Œèµ·æ¥ï¼Œæœ‰ä¸€ç§å¼ºå¤§çš„æ¿€åŠ±ä½œç”¨ã€‚ä¸€æ—¦ä½ èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å°±å¯ä»¥è‡ªç”±åœ°è¿›è¡Œå®éªŒï¼Œè€Œä¸”ä½ å¯ä»¥çœŸæ­£åœ°åˆ†äº«ä½ çš„å·¥ä½œ&lt;/p>
&lt;p>åœ¨è¿™çŸ­çŸ­çš„ä¸€ç« ä¸­ï¼Œä½ å°†æŠ•å…¥å°‘é‡æ—¶é—´æ¥ç†Ÿæ‚‰å»ºç«‹å’Œè¿è¡Œ Clojure ç¨‹åºçš„å¿«é€Ÿæ–¹æ³•ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•åœ¨ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Clojure è¿›ç¨‹ä¸­ä½¿ç”¨ read-eval-print å¾ªç¯ï¼ˆREPLï¼‰æ¥å®éªŒä»£ç ã€‚è¿™å°†æ”¶ç´§ä½ çš„åé¦ˆå›è·¯ï¼Œå¸®åŠ©ä½ æ›´æœ‰æ•ˆåœ°å­¦ä¹ ã€‚&lt;/p>
&lt;p>ç¬¬äºŒç« ï¼šå¦‚ä½•ä½¿ç”¨ Emacsï¼Œä¸€ä¸ªä¼˜ç§€çš„ Clojure ç¼–è¾‘å™¨&lt;/p>
&lt;p>å¿«é€Ÿçš„åé¦ˆå›è·¯å¯¹å­¦ä¹ è‡³å…³é‡è¦ã€‚åœ¨è¿™ä¸€ç« ä¸­ï¼Œæˆ‘ä»å¤´å¼€å§‹ä»‹ç» Emacsï¼Œä»¥ä¿è¯ä½ æœ‰ä¸€ä¸ªé«˜æ•ˆçš„ Emacs/Clojure å·¥ä½œæµç¨‹ã€‚&lt;/p>
&lt;h3 id="ç¬¬äºŒéƒ¨åˆ†è¯­è¨€åŸºç¡€">ç¬¬äºŒéƒ¨åˆ†ï¼šè¯­è¨€åŸºç¡€&lt;/h3>
&lt;p>è¿™äº›ç« èŠ‚ä¸ºä½ ç»§ç»­å­¦ä¹  Clojure å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚ä½ å°†ä»å­¦ä¹  Clojure çš„åŸºç¡€çŸ¥è¯†ï¼ˆè¯­æ³•ã€è¯­ä¹‰å’Œæ•°æ®ç»“æ„ï¼‰å¼€å§‹ï¼Œè¿™æ ·ä½ å°±å¯ä»¥&lt;em>åšäº‹æƒ…ã€‚ç„¶åï¼Œä½ å°†é€€ä¸€æ­¥è¯¦ç»†ç ”ç©¶ Clojure æœ€å¸¸ç”¨çš„å‡½æ•°ï¼Œå¹¶å­¦ä¹ å¦‚ä½•ä½¿ç”¨&lt;/em>å‡½æ•°å¼ç¼–ç¨‹*çš„æ€ç»´æ–¹å¼æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚&lt;/p>
&lt;p>ç¬¬ä¸‰ç« ï¼šåšäº‹æƒ…ï¼šClojure é€Ÿæˆç­&lt;/p>
&lt;p>åœ¨è¿™é‡Œï¼Œä½ å°†å¼€å§‹çœŸæ­£æ·±å…¥äº†è§£ Clojureã€‚è¿™ä¹Ÿæ˜¯ä½ éœ€è¦å…³é—­çª—æˆ·çš„åœ°æ–¹ï¼Œå› ä¸ºä½ ä¼šå¼€å§‹å¤§å–Šï¼š&amp;quot;&lt;em>HOLY MOLEY THAT&amp;rsquo;S SPIFFY!&lt;/em>&amp;quot;ï¼Œè€Œä¸”ç›´åˆ°ä½ è¯»å®Œæœ¬ä¹¦çš„ç´¢å¼•æ‰ä¼šåœæ­¢ã€‚&lt;/p>
&lt;p>æ¯«æ— ç–‘é—®ï¼Œä½ å·²ç»å¬è¯´è¿‡ Clojure ä»¤äººæ•¬ç•çš„å¹¶å‘æ”¯æŒå’Œå…¶ä»–äº†ä¸èµ·çš„åŠŸèƒ½ï¼Œä½† Clojure æœ€çªå‡ºçš„ç‰¹ç‚¹æ˜¯å®ƒæ˜¯ä¸€ç§ Lispã€‚ä½ å°†æ¢ç´¢è¿™ä¸ª Lisp æ ¸å¿ƒï¼Œå®ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå‡½æ•°å’Œæ•°æ®ã€‚&lt;/p>
&lt;p>ç¬¬ 4 ç« ï¼šæ·±å…¥æ¢è®¨æ ¸å¿ƒå‡½æ•°&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£ Clojure çš„å‡ ä¸ªåŸºæœ¬æ¦‚å¿µã€‚è¿™å°†ä¸ºä½ æä¾›æ‰€éœ€çš„åŸºç¡€ï¼Œä½¿ä½ èƒ½å¤Ÿé˜…è¯»ä½ ä»¥å‰æ²¡æœ‰ä½¿ç”¨è¿‡çš„å‡½æ•°çš„æ–‡æ¡£ï¼Œå¹¶ç†è§£å½“ä½ å°è¯•å®ƒä»¬æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p>
&lt;p>ä½ è¿˜ä¼šçœ‹åˆ°ä½ æœ€éœ€è¦çš„å‡½æ•°çš„ä½¿ç”¨ä¾‹å­ã€‚è¿™å°†ä¸ºä½ ç¼–å†™è‡ªå·±çš„ä»£ç ä»¥åŠé˜…è¯»å’Œå­¦ä¹ å…¶ä»–äººçš„é¡¹ç›®æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚è¿˜è®°å¾—æˆ‘æ˜¯å¦‚ä½•æåˆ°è¿½è¸ªé—ªé—ªå‘å…‰çš„å¸è¡€é¬¼çš„å—ï¼Ÿä½ ä¼šåœ¨è¿™ä¸€ç« ä¸­åšåˆ°è¿™ä¸€ç‚¹ï¼ˆé™¤éä½ å·²ç»åœ¨ä¸šä½™æ—¶é—´åšåˆ°äº†ï¼‰ã€‚&lt;/p>
&lt;p>ç¬¬äº”ç« ï¼šå‡½æ•°å¼ç¼–ç¨‹&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†æŠŠä½ åœ¨å‡½æ•°å’Œæ•°æ®ç»“æ„æ–¹é¢çš„å…·ä½“ç»éªŒä¸ä¸€ç§æ–°çš„æ€ç»´æ–¹å¼ç»“åˆèµ·æ¥ï¼šå‡½æ•°å¼ç¼–ç¨‹æ€ç»´æ–¹å¼ã€‚ä½ å°†é€šè¿‡æ„å»ºå¸­å·å…¨å›½çš„æœ€çƒ­é—¨çš„æ–°æ¸¸æˆæ¥ç‚«è€€ä½ çš„çŸ¥è¯†ã€‚Peg Thing!&lt;/p>
&lt;p>ç¬¬ 6 ç« ï¼šç»„ç»‡ä½ çš„é¡¹ç›®ï¼šä¸€ä¸ªå›¾ä¹¦ç®¡ç†å‘˜çš„æ•…äº‹&lt;/p>
&lt;p>æœ¬ç« è§£é‡Šäº†ä»€ä¹ˆæ˜¯å‘½åç©ºé—´ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥ç»„ç»‡ä½ çš„ä»£ç ã€‚æˆ‘ä¸æƒ³é€éœ²å¤ªå¤šï¼Œä½†å®ƒä¹Ÿæ¶‰åŠåˆ°ä¸€ä¸ªå›½é™…å¥¶é…ªå¤§ç›—ã€‚&lt;/p>
&lt;p>ç¬¬ 7 ç« ï¼šClojure ç‚¼é‡‘æœ¯ï¼šè¯»å–ã€æ±‚å€¼å’Œå®&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†é€€ä¸€æ­¥æè¿° Clojure å¦‚ä½•è¿è¡Œä½ çš„ä»£ç ã€‚è¿™å°†ç»™ä½ ä¸€ä¸ªæ¦‚å¿µæ€§çš„ç»“æ„ï¼Œä½ éœ€è¦çœŸæ­£ç†è§£ Clojure æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠå®ƒä¸å…¶ä»–é Lisp è¯­è¨€æœ‰ä»€ä¹ˆä¸åŒã€‚æœ‰äº†è¿™ä¸ªç»“æ„ï¼Œæˆ‘å°†ä»‹ç»å®ï¼Œè¿™æ˜¯ç°æœ‰çš„æœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ã€‚&lt;/p>
&lt;p>ç¬¬ 8 ç« ï¼šç¼–å†™å®&lt;/p>
&lt;p>è¿™ä¸€ç« å½»åº•ç ”ç©¶äº†å¦‚ä½•ç¼–å†™å®ï¼Œä»åŸºæœ¬çš„ä¾‹å­å¼€å§‹ï¼Œå¹¶åœ¨å¤æ‚ç¨‹åº¦ä¸Šæœ‰æ‰€æé«˜ã€‚æœ€åï¼Œä½ å°†æˆ´ä¸Šä½ çš„å‡æƒ³å¸½ï¼Œå‡è£…ä½ ç»è¥ä¸€å®¶ç½‘ä¸Šè¯æ°´åº—ï¼Œå¹¶ä½¿ç”¨å®æ¥éªŒè¯å®¢æˆ·çš„è®¢å•ã€‚&lt;/p>
&lt;h3 id="ç¬¬ä¸‰éƒ¨åˆ†é«˜çº§ä¸»é¢˜">ç¬¬ä¸‰éƒ¨åˆ†ï¼šé«˜çº§ä¸»é¢˜&lt;/h3>
&lt;p>è¿™äº›ç« èŠ‚æ¶µç›–äº† Clojure çš„é¢å¤–æœ‰è¶£çš„ä¸»é¢˜ï¼šå¹¶å‘ã€Java äº’æ“ä½œå’ŒæŠ½è±¡ã€‚å°½ç®¡ä½ å¯ä»¥åœ¨ä¸äº†è§£è¿™äº›å·¥å…·å’Œæ¦‚å¿µçš„æƒ…å†µä¸‹ç¼–å†™ç¨‹åºï¼Œä½†å®ƒä»¬åœ¨æ™ºåŠ›ä¸Šæ˜¯æœ‰ä»·å€¼çš„ï¼Œå¹¶èƒ½ç»™ä½ ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜å¸¦æ¥å·¨å¤§çš„åŠ›é‡ã€‚äººä»¬è¯´å­¦ä¹  Clojure ä¼šè®©ä½ æˆä¸ºä¸€ä¸ªæ›´å¥½çš„ç¨‹åºå‘˜ï¼ŒåŸå› ä¹‹ä¸€å°±æ˜¯å®ƒè®©è¿™äº›ç« èŠ‚ä¸­æ¶‰åŠçš„æ¦‚å¿µå˜å¾—æ˜“äºç†è§£å’Œå®é™…ä½¿ç”¨ã€‚&lt;/p>
&lt;p>ç¬¬ 9 ç« ï¼šå¹¶å‘å’Œå¹¶è¡Œç¼–ç¨‹çš„ç¥åœ£è‰ºæœ¯&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†äº†è§£ä»€ä¹ˆæ˜¯å¹¶å‘å’Œå¹¶è¡Œï¼Œä»¥åŠå®ƒä»¬ä¸ºä»€ä¹ˆé‡è¦ã€‚ä½ å°†äº†è§£åœ¨ç¼–å†™å¹¶è¡Œç¨‹åºæ—¶é¢ä¸´çš„æŒ‘æˆ˜ï¼Œä»¥åŠ Clojure çš„è®¾è®¡å¦‚ä½•å¸®åŠ©ç¼“è§£è¿™äº›æŒ‘æˆ˜ã€‚ä½ å°†ä½¿ç”¨æœŸè´§ã€å»¶è¿Ÿå’Œæ‰¿è¯ºæ¥å®‰å…¨åœ°ç¼–å†™å¹¶è¡Œç¨‹åºã€‚&lt;/p>
&lt;p>ç¬¬ 10 ç« ï¼šClojure å½¢è€Œä¸Šå­¦ï¼šåŸå­ã€Refsã€Vars å’Œæ‹¥æŠ±åƒµå°¸&lt;/p>
&lt;p>æœ¬ç« è¯¦ç»†ä»‹ç»äº† Clojure ç®¡ç†çŠ¶æ€çš„æ–¹æ³•ä»¥åŠå¦‚ä½•ç®€åŒ–å¹¶å‘ç¼–ç¨‹ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨åŸå­ã€å‚è€ƒæ•°å’Œå˜é‡è¿™ä¸‰ç§ç®¡ç†çŠ¶æ€çš„ç»“æ„ï¼Œå¹¶å­¦ä¹ å¦‚ä½•ç”¨&lt;code>pmap&lt;/code>è¿›è¡Œæ— çŠ¶æ€çš„å¹¶è¡Œè®¡ç®—ã€‚è¿˜ä¼šæœ‰æŠ±æŠ±çš„åƒµå°¸ã€‚&lt;/p>
&lt;p>ç¬¬ 11 ç« ï¼šç”¨ core.async æŒæ¡å¹¶å‘&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç« ä¸­ï¼Œä½ å°†æ€è€ƒå®‡å®™ä¸­çš„ä¸€åˆ‡æ˜¯ä¸€å°çƒ­ç‹—å”®å–æœºçš„æƒ³æ³•ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä¸ºç‹¬ç«‹è¿è¡Œçš„è¿›ç¨‹ç³»ç»Ÿå»ºæ¨¡ï¼Œè¿™äº›è¿›ç¨‹é€šè¿‡ä½¿ç”¨ core.async åº“çš„é€šé“ç›¸äº’é€šä¿¡ã€‚&lt;/p>
&lt;p>ç¬¬ 12 ç« ï¼šä¸ JVM ä¸€èµ·å·¥ä½œ&lt;/p>
&lt;p>è¿™ä¸€ç« å°±åƒä¸€æœ¬çŸ­è¯­ä¹¦å’Œ Java å¤§é™†çš„æ–‡åŒ–ä»‹ç»ä¹‹é—´çš„äº¤å‰ã€‚å®ƒå‘ä½ æ¦‚è¿°äº†ä»€ä¹ˆæ˜¯ JVMï¼Œå®ƒå¦‚ä½•è¿è¡Œç¨‹åºï¼Œä»¥åŠå¦‚ä½•ä¸ºå®ƒç¼–è¯‘ç¨‹åºã€‚å®ƒè¿˜å‘ä½ ç®€è¦ä»‹ç»äº†å¸¸ç”¨çš„ Java ç±»å’Œæ–¹æ³•ï¼Œå¹¶è§£é‡Šäº†å¦‚ä½•åœ¨ Clojure ä¸­ä¸å®ƒä»¬è¿›è¡Œäº¤äº’ã€‚ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜å‘ä½ å±•ç¤ºäº†å¦‚ä½•æ€è€ƒå’Œç†è§£ Javaï¼Œä»¥ä¾¿ä½ èƒ½å°†ä»»ä½• Java åº“çº³å…¥ä½ çš„ Clojure ç¨‹åºä¸­ã€‚&lt;/p>
&lt;p>ç¬¬ 13 ç« ï¼šç”¨å¤šé‡æ–¹æ³•ã€åè®®å’Œè®°å½•åˆ›å»ºå’Œæ‰©å±•æŠ½è±¡æ¦‚å¿µ&lt;/p>
&lt;p>åœ¨ç¬¬ 4 ç« ä¸­ï¼Œä½ äº†è§£åˆ° Clojure æ˜¯ä»¥æŠ½è±¡çš„æ–¹å¼ç¼–å†™çš„ã€‚æœ¬ç« æ˜¯å¯¹åˆ›å»ºå’Œå®ç°ä½ è‡ªå·±çš„æŠ½è±¡çš„ä¸–ç•Œçš„ä»‹ç»ã€‚ä½ å°†å­¦ä¹ å¤šé‡æ–¹æ³•ã€åè®®å’Œè®°å½•çš„åŸºç¡€çŸ¥è¯†ã€‚&lt;/p>
&lt;p>é™„å½• Aï¼šç”¨ Leiningen æ„å»ºå’Œå¼€å‘&lt;/p>
&lt;p>æœ¬é™„å½•é˜æ˜äº†ä½¿ç”¨ Leiningen çš„ä¸€äº›ç»†å¾®ä¹‹å¤„ï¼Œæ¯”å¦‚ä»€ä¹ˆæ˜¯ Mavenï¼Œå¦‚ä½•è®¡ç®—å‡º Java åº“çš„ç‰ˆæœ¬å·ï¼Œä»¥ä¾¿ä½ èƒ½ä½¿ç”¨å®ƒä»¬ã€‚&lt;/p>
&lt;p>é™„å½• Bï¼šBootï¼ŒèŠ±å“¨çš„ Clojure æ„å»ºæ¡†æ¶&lt;/p>
&lt;p>Boot æ˜¯ Leiningen çš„ä¸€ä¸ªæ›¿ä»£å“ï¼Œå®ƒæä¾›äº†ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æœ‰ä¸€ä¸ªé¢å¤–çš„å¥½å¤„ï¼Œå³å®ƒæ›´å®¹æ˜“æ‰©å±•å’Œç¼–å†™å¯ç»„åˆçš„ä»»åŠ¡ã€‚æœ¬é™„å½•è§£é‡Šäº† Boot çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶æŒ‡å¯¼ä½ ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ã€‚&lt;/p>
&lt;h2 id="ä»£ç ">ä»£ç &lt;/h2>
&lt;p>ä½ å¯ä»¥åœ¨*&lt;a class="link" href="http://www.nostarch.com/clojure/" target="_blank" rel="noopener"
>http://www.nostarch.com/clojure/&lt;/a>*ä¸‹è½½è¯¥ä¹¦çš„æ‰€æœ‰æºä»£ç ã€‚è¿™äº›ä»£ç æ˜¯æŒ‰ç« èŠ‚ç»„ç»‡çš„ã€‚&lt;/p>
&lt;p>ç¬¬ 1 ç« æè¿°äº†è¿è¡Œ Clojure ä»£ç çš„ä¸åŒæ–¹å¼ï¼ŒåŒ…æ‹¬å¦‚ä½•ä½¿ç”¨ REPLã€‚æˆ‘å»ºè®®å½“ä½ é‡åˆ°å¤§å¤šæ•°ä¾‹å­æ—¶ï¼Œåœ¨ REPL ä¸­è¿è¡Œå®ƒä»¬ï¼Œç‰¹åˆ«æ˜¯ç¬¬ 3 ç« åˆ°ç¬¬ 8 ç« ã€‚è¿™å°†æœ‰åŠ©äºä½ ä¹ æƒ¯äºç¼–å†™å’Œç†è§£ Lisp ä»£ç ï¼Œå¹¶èƒ½å¸®åŠ©ä½ ä¿ç•™ä½ æ‰€å­¦çš„ä¸€åˆ‡ã€‚ä½†æ˜¯å¯¹äºé‚£äº›å¾ˆé•¿çš„ä¾‹å­ï¼Œæœ€å¥½æŠŠä½ çš„ä»£ç å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨ REPL ä¸­è¿è¡Œä½ å†™çš„ä»£ç ã€‚&lt;/p>
&lt;h2 id="æ—…ç¨‹å¼€å§‹äº†">æ—…ç¨‹å¼€å§‹äº†&lt;/h2>
&lt;p>ä½ å‡†å¤‡å¥½äº†å—ï¼Œå‹‡æ•¢çš„è¯»è€…ï¼Ÿä½ å‡†å¤‡å¥½è¿æ¥ä½ çœŸæ­£çš„å‘½è¿äº†å—ï¼Ÿå¸¦ä¸Šä½ æœ€å¥½çš„ä¸€å¯¹å°æ‹¬å·ï¼šä½ å³å°†è¸ä¸Šä¸€ç”Ÿçš„æ—…ç¨‹!&lt;/p></description></item><item><title>Acknowledgments è‡´è°¢</title><link>https://example.com/p/acknowledgments-%E8%87%B4%E8%B0%A2/</link><pubDate>Thu, 13 Jan 2022 10:06:10 +0800</pubDate><guid>https://example.com/p/acknowledgments-%E8%87%B4%E8%B0%A2/</guid><description>&lt;h1 id="è‡´è°¢">è‡´è°¢&lt;/h1>
&lt;p>æœ‰å¾ˆå¤šäººå¸®åŠ©æˆ‘è¯ç”Ÿäº†è¿™ä¸ªå¥‡æ€ªçš„å©´å„¿ï¼Œæˆ‘å¯¹ä»–ä»¬çš„æ”¯æŒæ„Ÿåˆ°æ„Ÿæ¿€ã€‚&lt;/p>
&lt;p>é¦–å…ˆï¼Œæ„Ÿè°¢æˆ‘çš„å¦»å­æ°è¥¿ï¼Œå¥¹ä¸ºè¿™æœ¬ä¹¦ç»˜åˆ¶äº†æ’å›¾ï¼Œä½¿å®ƒå…·æœ‰æˆ‘æ‰€å¸Œæœ›çš„è§†è§‰ç‰¹æ€§ã€‚ä¹Ÿæ„Ÿè°¢ä½ çš„æ”¯æŒï¼Œæ„Ÿè°¢ä½ åœ¨æˆ‘å¤„äºç–¯ç‹‚çš„ä½œå®¶æ¨¡å¼æ—¶å®¹å¿æˆ‘ã€‚(é™„æ³¨ï¼šé€šè¿‡ä¸€æœ¬ç¼–ç¨‹ä¹¦çš„å°é¢æ„Ÿè°¢æˆ‘çš„å¦»å­ï¼Œæ„Ÿè§‰å¾ˆå¥‡æ€ªã€‚ï¼‰&lt;/p>
&lt;p>æ„Ÿè°¢æˆ‘åœ¨éº¦è‚¯é”¡çš„æœ‹å‹å’ŒåŒäº‹ï¼Œä»–ä»¬é˜…è¯»äº†æ—©æœŸçš„ä¿®è®¢ç¨¿å¹¶é¼“åŠ±æˆ‘ç»§ç»­å†™ä½œã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯ Pat Shaughnessyã€Alex Rothenbergã€Thomas Newtonã€Jalil Fanaianã€Chris Parkerã€Mark Daggettã€Christian Lilleyï¼Œä»¥åŠ Mike Morrealeã€‚ä½ ä»¬éƒ½å¤ªä¼Ÿå¤§äº†ï¼›è¯·æ¬åˆ° Durhamã€‚&lt;/p>
&lt;p>æ„Ÿè°¢æˆ‘çš„æœ‹å‹å¸ƒé‡Œå¥‡ç‰¹-å¸Œå‹’ï¼ˆBridget Hillyerï¼‰ä¸€ç›´ä»¥æ¥çš„æ”¯æŒã€‚æˆ‘æ€»æ˜¯è§‰å¾—ä½ æ˜¯æˆ‘çš„åç›¾ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ„ä¹‰é‡å¤§ã€‚ä¹Ÿæ„Ÿè°¢æˆ‘çš„æœ‹å‹ä¹”-æ°å…‹é€Šï¼Œæ„Ÿè°¢ä»–é˜…è¯»ã€å¬æˆ‘å–‹å–‹ä¸ä¼‘ã€å¹¶ä¸ºæˆ‘æä¾›åé¦ˆï¼Œå¹¶æ„Ÿè°¢ä»–åœ¨æˆ‘é¢å‰å¯¹å…¶ä»–äººå¤§è°ˆè¿™æœ¬ä¹¦ï¼Œè®©æˆ‘æ„Ÿè§‰å¾ˆé…·ã€‚Alan Dipertï¼Œæœ‹å‹ï¼ŒæŠ€æœ¯è¯„è®ºå‘˜ï¼Œç°åœ¨çš„åŒäº‹ï¼Œæˆ‘å‘ä½ è¡¨ç¤ºä¸‡åˆ†æ„Ÿè°¢ï¼Œæ„Ÿè°¢ä½ å‡ºè‰²çš„æŠ€æœ¯ç¼–è¾‘ï¼Œæ„Ÿè°¢ä½ é¦–å…ˆå°†æˆ‘å¼•å…¥ Clojureã€‚&lt;/p>
&lt;p>æˆ‘ä¸çŸ¥é“æ˜¯å¦æ¯ä¸ªä½œå®¶éƒ½ä¼šä¸æ–­åœ°é—®è‡ªå·±ï¼š&amp;ldquo;æˆ‘åˆ°åº•ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿæ˜¯å¦æœ‰äººä¼šè¯»å®ƒï¼Ÿ&amp;ldquo;ä½†æˆ‘è‚¯å®šä¼šè¿™æ ·åšã€‚å› æ­¤ï¼Œæˆ‘æƒ³æ„Ÿè°¢æ‰€æœ‰åœ¨è¿™æœ¬ä¹¦çš„æœ€åˆç½‘ç»œç‰ˆæœ¬ç¼–å†™è¿‡ç¨‹ä¸­å†™ä¿¡ç»™æˆ‘å¹¶å»ºè®®è¿›è¡Œç¼–è¾‘çš„å‹å¥½äººå£«ã€‚è¿™äº›ç§¯æçš„åé¦ˆä½¿æˆ‘æ„Ÿåˆ°æœ‰ä¿¡å¿ƒï¼Œæˆ‘æ­£åœ¨åšä¸€ä»¶æœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚åŒæ ·åœ°ï¼Œæ„Ÿè°¢æ‰€æœ‰è´­ä¹° Leanpub ç‰ˆæœ¬çš„äºº&lt;/p>
&lt;p>éå¸¸æ„Ÿè°¢ Clojure ç¤¾åŒºé¢†å¯¼äºº Eric Normandã€David Nolen å’Œ Alex Miller å¯¹æœ¬ä¹¦çš„ç§¯æå®£ä¼ ã€‚åœ¨ä¸‹ä¸€å±Š Conj å¤§ä¼šä¸Šè§!&lt;/p>
&lt;p>æœ€åï¼Œè¦æ„Ÿè°¢ No Starch å‡ºç‰ˆç¤¾çš„å„ä½åŒä»ï¼Œæ„Ÿè°¢ä½ ä»¬å¯¹æœ¬ä¹¦çš„å¸®åŠ©ï¼Œä½¿ä¹‹æˆä¸ºæˆ‘æ— æ¯”è‡ªè±ªçš„ä½œå“ã€‚æ„Ÿè°¢ä½ ä»¬çš„é«˜æ ‡å‡†ã€‚æ„Ÿè°¢ä½ ä»¬ä¸æ–­åœ°ä¿ƒä½¿æœ¬ä¹¦æ›´åŠ æ¸…æ™°ï¼Œç”šè‡³æå‡ºç¬‘è¯ã€‚(Seph çš„ &amp;ldquo;èœ¡çƒ &amp;ldquo;ç¼–è¾‘ä»ç„¶è®©æˆ‘å¼€æ€€å¤§ç¬‘ã€‚) Seph Kramer, Riley Hoffman, Hayley Baker, Alison Law, Tyler Ortman, Anne Marie Walker: è°¢è°¢ä½ ä»¬!&lt;/p></description></item><item><title>Foreword å‰è¨€</title><link>https://example.com/p/foreword-%E5%89%8D%E8%A8%80/</link><pubDate>Thu, 13 Jan 2022 10:04:46 +0800</pubDate><guid>https://example.com/p/foreword-%E5%89%8D%E8%A8%80/</guid><description>&lt;h1 id="å‰è¨€">å‰è¨€&lt;/h1>
&lt;p>å½“ä½ é˜…è¯»è¿™æœ¬æç¬‘çš„ä¹¦æ—¶ï¼Œä½ ä¼šåœ¨æŸä¸ªæ—¶åˆ»ç»å†ä¸€ä¸ªéå¸¸ä¸¥è‚ƒçš„æ—¶åˆ»ã€‚åœ¨äº†è§£äº†ä¸€äº› Clojure ä¹‹åï¼Œç¼–ç¨‹å˜å¾—æ›´åŠ æœ‰è¶£ã€‚è¿™ä¹Ÿæ˜¯ä½ åœ¨è¿™æœ¬ä¹¦ä¸Šçš„æŠ•èµ„ï¼ŒåŒ…æ‹¬é‡‘é’±å’Œæ—¶é—´ï¼Œå¾—åˆ°å›æŠ¥çš„æ—¶åˆ»&amp;ndash;æœ‰è¶£ã€‚&lt;/p>
&lt;p>å¹½é»˜ä¸ä¸¥è‚ƒæ€§æœ‰ä¸€å®šçš„å…³ç³»ã€‚å¯¹ä¸¥è‚ƒçš„äº‹æƒ…å¼€ç©ç¬‘æ˜¯åˆé€‚çš„ï¼Œä½†åªæœ‰åœ¨é€‚å½“çš„æ—¶é—´è¿‡å»ä¹‹åã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘æƒ³èµ·æˆ‘æœ€å–œæ¬¢çš„å”å”çš„æœ€åä¸€å¥è¯æ—¶ï¼Œæˆ‘èŠ±äº†å¾ˆå¤šå¹´æ‰èƒ½å¤Ÿç ´æ¶•ä¸ºç¬‘ã€‚&amp;ldquo;æ‹¿ç€æˆ‘çš„å•¤é…’&amp;rdquo;ã€‚&lt;/p>
&lt;p>è¿™æœ¬ä¹¦çš„å·¥ä½œæ–¹å¼æ­£å¥½ç›¸åã€‚å®ƒåœ¨ä¸¥è‚ƒäº‹ä»¶å‘ç”Ÿä¹‹å‰ï¼Œç”šè‡³åœ¨ä¸¥è‚ƒäº‹ä»¶å‘ç”ŸæœŸé—´ï¼Œé€‚æ—¶åœ°æŒ‡å‡ºäº†çœŸæ­£æœ‰è¶£çš„äº‹æƒ…&amp;ndash;é‚£ä¸€åˆ»ä½ æ„è¯†åˆ°ä½ å› ä¸º Clojure è€Œæ›´å–œæ¬¢ç¼–ç¨‹ã€‚å®ƒåœ¨åšåˆ°è¿™ä¸€ç‚¹çš„åŒæ—¶ï¼Œå¹¶æ²¡æœ‰æ©ç›–ä½ å°†è¦å­¦ä¹ çš„ Clojure ç¼–ç¨‹çš„æ·±å±‚æŠ€æœ¯å±‚é¢ã€‚&lt;/p>
&lt;p>è¿™ç§æ–¹æ³•ä»¤äººè€³ç›®ä¸€æ–°ï¼Œå› ä¸ºæˆ‘è¯»è¿‡çš„å¤§å¤šæ•°ç¼–ç¨‹ä¹¦ç±éƒ½æ¯”éª†é©¼çš„å±è¿˜å¹²ã€‚æˆ‘ä»¬å¾ˆå¹¸è¿ï¼Œä¸¹å°¼å°”æ˜¯ä¸€ä½å‡ºè‰²çš„ç¨‹åºå‘˜å’Œä½œå®¶ï¼Œä»–çš„å¦»å­æ°æ–¯æ˜¯ä¸€ä½åŒæ ·å‡ºè‰²çš„æ’å›¾ç”»å®¶ã€‚æˆ‘ä»¬ç‰¹åˆ«å¹¸è¿çš„æ˜¯ï¼Œä»–ä»¬ä¸¤ä¸ªéƒ½ç–¯äº†ï¼Œå†³å®šåœ¨å®Œå…¨ç›¸åŒçš„æ—¶é—´å†™ä¸€æœ¬ä¹¦ã€‚&lt;/p>
&lt;p>Clojure æ˜¯æœ¬ä¹¦çš„ä¸»é¢˜ï¼Œä½†åœ¨æŸç§ç¨‹åº¦ä¸Šå®ƒ&amp;ndash;æˆ–è€…è¯´å®ƒçš„åˆ›é€ è€… Rich Hickey&amp;ndash;ä¹Ÿæ˜¯ä½œè€…ä¹‹ä¸€ï¼Œå› ä¸º Clojure æ˜¯æœ‰å²ä»¥æ¥æœ€ä¼˜é›…çš„ç¼–ç¨‹è¯­è¨€ã€‚å°±åƒæ—©åˆé¤çš„æ¦‚å¿µä¸€æ ·ï¼ŒClojure æ˜¯å¦‚æ­¤çš„ä¼˜é›…ï¼Œä»¥è‡³äºå¦‚æœä¸ä»¥æŸç§æ–¹å¼æé«˜ä»–ä»¬çš„æ°´å¹³ï¼Œå°±å¾ˆéš¾å‘Šè¯‰åˆ«äººå…³äºå®ƒçš„ä»»ä½•äº‹æƒ…ã€‚&lt;/p>
&lt;p>ä¼˜é›…æ˜¯ç¼–ç¨‹è¯­è¨€å®¶æ—ä¸­è®¸å¤š Lisp æ–¹è¨€ç»å¸¸è¢«èµ‹äºˆçš„å“è´¨ï¼ŒClojure å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚æ‰€æœ‰çš„ Lisp éƒ½æ˜¯ç”±æ•°å­¦å®¶ John McCarthy åœ¨ 1958 å¹´åšå‡ºçš„ä¸€ç³»åˆ—ç®€å•è€Œç¾ä¸½çš„å‘ç°æ¼”å˜è€Œæ¥ã€‚&lt;/p>
&lt;p>è‡ª 1958 å¹´ä»¥æ¥ï¼Œå‡ºç°äº†è®¸å¤š Lisp æ–¹è¨€ å’Œ Lisp ä¹¦ç±ã€‚è¿˜æœ‰æ›´å¤šçš„ Lisp æ–¹è¨€ å’Œä¹¦ç±å³å°†é—®ä¸–ã€‚ä½œä¸ºè¿‡å»å’Œæœªæ¥çš„ç¥å™¨ï¼Œæ¯ä¸€ç§éƒ½é€‚åˆå®ƒä»¬çš„ä½œè€…åœ¨å„è‡ªçš„æ—¶ä»£æ‰€é¢ä¸´çš„ç‹¬ç‰¹çš„çº¦æŸå’Œæ¬²æœ›çš„ç»„åˆã€‚&lt;/p>
&lt;p>æˆ‘å‘ç° Clojureï¼Œä»¥åŠè¿™æœ¬å…³äºå®ƒçš„ç‰¹æ®Šä¹¦ç±ï¼Œç‰¹åˆ«é€‚åˆç°åœ¨ã€‚æˆ‘å¸Œæœ›ä½ ä¹Ÿä¼šè¿™æ ·ã€‚&lt;/p>
&lt;p>Alan Dipert&lt;/p></description></item><item><title>Thrfit å…¥é—¨</title><link>https://example.com/p/thrfit-%E5%85%A5%E9%97%A8/</link><pubDate>Thu, 06 Jan 2022 10:41:45 +0800</pubDate><guid>https://example.com/p/thrfit-%E5%85%A5%E9%97%A8/</guid><description>&lt;blockquote>
&lt;p>æœ¬æ–‡ä¸»è¦ä»‹ç» Thrift çš„ IDL åŸºæœ¬è¯­æ³•ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="idl">IDL&lt;/h2>
&lt;p>Thrift é‡‡ç”¨ IDLï¼ˆInterface Definition Languageï¼‰æ¥å®šä¹‰é€šç”¨çš„æœåŠ¡æ¥å£ï¼Œç„¶åé€šè¿‡ Thrift æä¾›çš„ç¼–è¯‘å™¨ï¼Œå¯ä»¥å°†æœåŠ¡æ¥å£ç¼–è¯‘æˆä¸åŒè¯­è¨€ç¼–å†™çš„ä»£ç ï¼Œé€šè¿‡è¿™ä¸ªæ–¹å¼æ¥å®ç°è·¨è¯­è¨€çš„åŠŸèƒ½ã€‚&lt;/p>
&lt;h2 id="åŸºæœ¬ç±»å‹">åŸºæœ¬ç±»å‹&lt;/h2>
&lt;p>&lt;code>thrift&lt;/code>åŸºæœ¬æ”¯æŒæ‰€æœ‰çš„ Java åŸºæœ¬ç±»å‹ä»¥åŠå¼•ç”¨ç±»å‹ã€‚&lt;/p>
&lt;ul>
&lt;li>bool
&lt;ul>
&lt;li>å¸ƒå°”å€¼ï¼Œå¯¹åº” java ä¸­çš„ boolean&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>byte
&lt;ul>
&lt;li>æœ‰ç¬¦å·å­—èŠ‚ï¼Œå¯¹åº” java ä¸­çš„ byte&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>i16
&lt;ul>
&lt;li>16 ä½æœ‰ç¬¦å·æ•´å‹ï¼Œå¯¹åº” java ä¸­çš„ short&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>i32
&lt;ul>
&lt;li>32 ä½æœ‰ç¬¦å·æ•´å‹ï¼Œå¯¹åº” java ä¸­çš„ int&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>i64
&lt;ul>
&lt;li>64 ä½æœ‰ç¬¦å·æ•´å‹ï¼Œå¯¹åº” java ä¸­çš„ long&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>double
&lt;ul>
&lt;li>64 ä½æµ®ç‚¹å‹ï¼Œå¯¹åº” java ä¸­çš„ double&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>string
&lt;ul>
&lt;li>å­—ç¬¦ä¸²ï¼Œå¯¹åº” java ä¸­çš„ String&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>binary
&lt;ul>
&lt;li>å¯¹åº” java ä¸­çš„ byte[]&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="struct-ç»“æ„ä½“">struct ç»“æ„ä½“&lt;/h2>
&lt;p>struct æœ‰ä»¥ä¸‹çš„ä¸€äº›çº¦æŸï¼š&lt;/p>
&lt;ol>
&lt;li>struct ä¸èƒ½ç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥åµŒå¥—ï¼Œä¸èƒ½åµŒå¥—è‡ªå·±ã€‚&lt;/li>
&lt;li>å…¶æˆå‘˜éƒ½æ˜¯æœ‰æ˜ç¡®çš„ç±»å‹&lt;/li>
&lt;li>æˆå‘˜éƒ½æ˜¯è¢«æ­£æ•´æ•°ç¼–å·è¿‡çš„ï¼Œå…¶ä¸­çš„ç¼–å·ä¸èƒ½é‡å¤ï¼Œä¸ºäº†åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ç¼–ç ä½¿ç”¨ã€‚&lt;/li>
&lt;li>æˆå‘˜åˆ†éš”ç¬¦å¯ä»¥æ˜¯é€—å·ï¼ˆ,ï¼‰æˆ–è€…åˆ†å·ï¼ˆ;ï¼‰ï¼Œè€Œä¸”å¯ä»¥æ··ç”¨ã€‚&lt;/li>
&lt;li>å­—æ®µä¼šæœ‰æœ‰ optional å’Œ required ä¹‹åˆ†ã€‚ä½†æ˜¯å¦‚æœä¸æŒ‡å®šåˆ™ä¸ºæ— ç±»å‹â€“å¯ä»¥ä¸å¡«å……è¯¥å€¼ï¼Œä½†æ˜¯åœ¨åºåˆ—åŒ–ä¼ è¾“çš„æ—¶å€™ä¹Ÿä¼šåºåˆ—åŒ–è¿›å»ï¼Œoptional æ˜¯ä¸å¡«å……åˆ™ä¸åºåˆ—åŒ–ï¼Œrequired æ˜¯å¿…é¡»å¡«å……ä¹Ÿå¿…é¡»åºåˆ—åŒ–ã€‚&lt;/li>
&lt;li>æ¯ä¸ªå­—æ®µå¯ä»¥è®¾ç½®é»˜è®¤å€¼ã€‚&lt;/li>
&lt;li>åŒä¸€ä¸ªæ–‡ä»¶å¯ä»¥å®šä¹‰å¤šä¸ª structï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨ä¸åŒçš„æ–‡ä»¶ï¼Œè¿›è¡Œ include å¼•å…¥ã€‚&lt;/li>
&lt;/ol>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-thrift" data-lang="thrift">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">struct&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">User&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">required&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">// è¯¥å­—æ®µå€¼å¿…é¡»å¡«å†™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">optional&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">i32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">// é»˜è®¤å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">bool&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">gender&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">// é»˜è®¤ä¸ºoptional
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœ required æ ‡è¯†çš„åŸŸæ²¡æœ‰èµ‹å€¼ï¼ŒThrift å°†ç»™äºˆæç¤ºï¼›&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¦‚æœ optional æ ‡è¯†çš„åŸŸæ²¡æœ‰èµ‹å€¼ï¼Œè¯¥åŸŸå°†ä¸ä¼šè¢«åºåˆ—åŒ–ä¼ è¾“ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœæŸä¸ª optional æ ‡è¯†åŸŸæœ‰ç¼ºçœå€¼è€Œç”¨æˆ·æ²¡æœ‰é‡æ–°èµ‹å€¼ï¼Œåˆ™è¯¥åŸŸçš„å€¼ä¸€ç›´ä¸ºç¼ºçœå€¼ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœæŸä¸ª optional æ ‡è¯†åŸŸæœ‰ç¼ºçœå€¼æˆ–è€…ç”¨æˆ·å·²ç»é‡æ–°èµ‹å€¼ï¼Œè€Œä¸è®¾ç½®å®ƒçš„__isset ä¸º trueï¼Œä¹Ÿä¸ä¼šè¢«åºåˆ—åŒ–ä¼ è¾“ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="container-å®¹å™¨">container å®¹å™¨&lt;/h2>
&lt;p>æœ‰ä¸‰ç§å¯ç”¨çš„å®¹å™¨ç±»å‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>list&amp;lt;t&amp;gt;&lt;/code>
&lt;ul>
&lt;li>å…ƒç´ ç±»å‹ä¸º t çš„æœ‰åºåˆ—è¡¨ï¼Œå…è®¸é‡å¤ã€‚ç±»ä¼¼äº java ä¸­çš„ ArrayListã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>set&amp;lt;t&amp;gt;&lt;/code>
&lt;ul>
&lt;li>å…ƒç´ ç±»å‹ä¸º t çš„æ— åºè¡¨ï¼Œä¸å…è®¸é‡å¤ã€‚ç±»ä¼¼äº java ä¸­çš„ HashSetã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>map&amp;lt;t, t&amp;gt;&lt;/code>
&lt;ul>
&lt;li>é”®ç±»å‹ä¸º tï¼Œå€¼ç±»å‹ä¸º t çš„é”®å€¼å¯¹ï¼Œé”®ä¸å…è®¸é‡å¤ã€‚ç±»ä¼¼äº java ä¸­çš„ HashMapã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">struct Test {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1: map&amp;lt;string, User&amp;gt; usermap,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2: set&amp;lt;i32&amp;gt; intset,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3: list&amp;lt;double&amp;gt; doublelist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="enum-æšä¸¾">enum æšä¸¾&lt;/h2>
&lt;p>enum ç±»å‹æœ‰å¦‚ä¸‹çº¦æŸï¼š&lt;/p>
&lt;ol>
&lt;li>ç¼–è¯‘å™¨é»˜è®¤ä» 0 å¼€å§‹èµ‹å€¼ã€‚&lt;/li>
&lt;li>å¯ä»¥èµ‹äºˆæŸä¸ªå¸¸é‡ä¸ºæŸä¸ªæ•´æ•°ã€‚&lt;/li>
&lt;li>å…è®¸å¸¸é‡æ˜¯ 16 è¿›åˆ¶æ•´æ•°ã€‚&lt;/li>
&lt;li>æœ«å°¾æ²¡æœ‰åˆ†å·ã€‚&lt;/li>
&lt;li>ç»™å¸¸é‡èµ‹ç¼ºçœå€¼çš„æ—¶å€™ï¼Œä½¿ç”¨å¸¸é‡å…¨ç¨‹ã€‚&lt;/li>
&lt;/ol>
&lt;p>Thrift ä¸æ”¯æŒæšä¸¾ç±»åµŒå¥—ï¼Œæšä¸¾å¸¸é‡å¿…é¡»æ˜¯ 32 ä½æ­£æ•´æ•°ã€‚&lt;/p>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">enum HTTPStatus {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OK = 200,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> NOT_FOUND = 404
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="const-å¸¸é‡">const å¸¸é‡&lt;/h2>
&lt;p>åœ¨å˜é‡å‰åŠ  constã€‚&lt;/p>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const i32 age = 28;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="typedef-ç±»å‹å®šä¹‰">typedef ç±»å‹å®šä¹‰&lt;/h2>
&lt;p>Thrift æ”¯æŒç±»ä¼¼ C/C++çš„ç±»å‹å®šä¹‰ã€‚&lt;/p>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">typedef i32 myInt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">typedef i64 myNumber
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç±»å‹å®šä¹‰çš„æœ«å°¾æ²¡æœ‰é€—å·ã€‚&lt;/p>
&lt;h2 id="exception-å¼‚å¸¸">exception å¼‚å¸¸&lt;/h2>
&lt;p>å¼‚å¸¸åœ¨è¯­æ³•å’ŒåŠŸèƒ½ä¸Šç±»ä¼¼äºç»“æ„ä½“ï¼Œå·®åˆ«æ˜¯å¼‚å¸¸ä½¿ç”¨å…³é”®å­— exceptionï¼Œè€Œä¸”å¼‚å¸¸æ˜¯ç»§æ‰¿æ¯ç§è¯­è¨€çš„åŸºç¡€å¼‚å¸¸ç±»ã€‚&lt;/p>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">exception MyException {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1: i32 errCode,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2: string errMsg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="service-æœåŠ¡">service æœåŠ¡&lt;/h2>
&lt;p>æœåŠ¡çš„å®šä¹‰æ–¹æ³•åœ¨è¯­ä¹‰ä¸Šç­‰åŒäºé¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„æ¥å£ã€‚&lt;/p>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">service HelloService {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> i32 sayInt(1:i32 param)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> string sayString(1:string param)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bool sayBoolean(1:bool param)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> void sayVoid()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="namespace-å‘½åç©ºé—´">namespace å‘½åç©ºé—´&lt;/h2>
&lt;p>Thrift ä¸­çš„å‘½åç©ºé—´ç±»ä¼¼äº C++ä¸­çš„ namespace å’Œ java ä¸­çš„ packageï¼Œå®ƒä»¬æä¾›äº†ä¸€ç§ç»„ç»‡ï¼ˆéš”ç¦»ï¼‰ä»£ç çš„ç®€ä¾¿æ–¹å¼ã€‚&lt;/p>
&lt;p>åå­—ç©ºé—´ä¹Ÿå¯ä»¥ç”¨äºè§£å†³ç±»å‹å®šä¹‰ä¸­çš„åå­—å†²çªã€‚&lt;/p>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">namespace java com.example.test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace py example
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace go example
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="include-å¼•ç”¨">include å¼•ç”¨&lt;/h2>
&lt;p>ä¸ºäº†ä¾¿äºç®¡ç†ã€é‡ç”¨å’Œæé«˜æ¨¡å—æ€§/ç»„ç»‡æ€§ï¼Œæˆ‘ä»¬å¸¸å¸¸åˆ†å‰² Thrift å®šä¹‰åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;p>Thrift å…è®¸æ–‡ä»¶åŒ…å«å…¶å®ƒ thrift æ–‡ä»¶ï¼Œç”¨æˆ·éœ€è¦ä½¿ç”¨ thrift æ–‡ä»¶åä½œä¸ºå‰ç¼€è®¿é—®è¢«åŒ…å«çš„å¯¹è±¡ã€‚&lt;/p>
&lt;p>Thrift æ–‡ä»¶åè¦ç”¨åŒå¼•å·åŒ…å«ï¼Œæœ«å°¾æ²¡æœ‰é€—å·æˆ–è€…åˆ†å·ã€‚&lt;/p>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">include &amp;#34;test.thrift&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">include &amp;#34;../test.thrift&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ³¨é‡Š">æ³¨é‡Š&lt;/h2>
&lt;p>æ”¯æŒå¤šè¡Œå’Œå•è¡Œé£æ ¼ã€‚&lt;/p>
&lt;p>ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">/**
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * This is a multi-line comment.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * Just like in C.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // C++/Java style single-line comments work just as well.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚è€ƒèµ„æ–™&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="http://thrift.apache.org/docs/types" target="_blank" rel="noopener"
>Thrift Types&lt;/a>&lt;/li>
&lt;li>[Thrift IDL åŸºæœ¬è¯­æ³•](&lt;a class="link" href="http://1csh1.github.io/2017/02/21/Thrift" target="_blank" rel="noopener"
>http://1csh1.github.io/2017/02/21/Thrift&lt;/a> IDL åŸºæœ¬è¯­æ³•/)&lt;/li>
&lt;li>&lt;a class="link" href="https://juejin.im/post/5baf11e35188255c8c0ca80e" target="_blank" rel="noopener"
>Thrift IDL å¿«é€Ÿå…¥é—¨&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>ä¿®å¤ Vscode Git Cannot Use Api Proposal ScmValidation</title><link>https://example.com/p/%E4%BF%AE%E5%A4%8D-vscode-git-cannot-use-api-proposal-scmvalidation/</link><pubDate>Thu, 06 Jan 2022 10:29:52 +0800</pubDate><guid>https://example.com/p/%E4%BF%AE%E5%A4%8D-vscode-git-cannot-use-api-proposal-scmvalidation/</guid><description>&lt;h1 id="é—®é¢˜è¡¨ç°">é—®é¢˜è¡¨ç°&lt;/h1>
&lt;p>æŸå¤©ï¼Œæˆ‘çš„ vscode çš„ git ç®¡ç†å‡ºç°äº†é—®é¢˜ã€‚&lt;/p>
&lt;p>&lt;img src="https://user-images.githubusercontent.com/32930147/147309938-88f840c8-c1f3-4a03-91b2-7115c63506c4.png"
loading="lazy"
alt="CleanShot 2021-12-24 at 10 44 48@2x"
>&lt;/p>
&lt;p>ç±»ä¼¼è¿™ä¸ªæ ·å­ã€‚&lt;/p>
&lt;h1 id="è§£å†³æ–¹å¼">è§£å†³æ–¹å¼&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@builtin @id:vscode.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://user-images.githubusercontent.com/6726799/147344845-edb99b92-8e53-48ad-8df6-0ece3d9a3da9.png"
loading="lazy"
alt="image"
>&lt;/p>
&lt;p>ç›´æ¥å¸è½½äº†ã€‚&lt;/p>
&lt;h1 id="å‡ºç°åŸå› ">å‡ºç°åŸå› &lt;/h1>
&lt;p>åº”è¯¥æ˜¯æŸä¸ªå…¬å¸çš„æ’ä»¶ç»™æˆ‘è‡ªåŠ¨è£…ä¸Šå¯¼è‡´çš„&lt;/p></description></item><item><title>Gavin Wood: Web3 å»ä¸­å¿ƒåŒ–æŠ€æœ¯æ˜¯ç»´æŠ¤è‡ªç”±æ°‘ä¸»çš„å”¯ä¸€å¸Œæœ›</title><link>https://example.com/p/gavin-wood-web3-%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E6%8A%80%E6%9C%AF%E6%98%AF%E7%BB%B4%E6%8A%A4%E8%87%AA%E7%94%B1%E6%B0%91%E4%B8%BB%E7%9A%84%E5%94%AF%E4%B8%80%E5%B8%8C%E6%9C%9B/</link><pubDate>Wed, 05 Jan 2022 10:20:39 +0800</pubDate><guid>https://example.com/p/gavin-wood-web3-%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E6%8A%80%E6%9C%AF%E6%98%AF%E7%BB%B4%E6%8A%A4%E8%87%AA%E7%94%B1%E6%B0%91%E4%B8%BB%E7%9A%84%E5%94%AF%E4%B8%80%E5%B8%8C%E6%9C%9B/</guid><description>&lt;blockquote>
&lt;p>&lt;strong>Gavin Wood&lt;/strong> åœ¨ 2014 å¹´åˆ›é€ äº† Web3ï¼ˆæœ€åˆæ˜¯ Web 3.0ï¼‰è¿™ä¸ªè¯ã€‚å½“æ—¶ï¼Œä»–åˆšå¼€å§‹å¸®åŠ©å¼€å‘ä»¥å¤ªåŠï¼Œè¿™æ˜¯ä¸€ç§åœ¨çŸ¥ååº¦å’Œå¸‚åœºè§„æ¨¡ä¸Šä»…æ¬¡äºæ¯”ç‰¹å¸çš„åŠ å¯†è´§å¸ã€‚å¦‚ä»Šï¼Œä»–ç»è¥ç€æ”¯æŒå»ä¸­å¿ƒåŒ–æŠ€æœ¯é¡¹ç›®çš„ Web3 åŸºé‡‘ä¼šï¼Œä»¥åŠä¸“æ³¨äºä¸º Web3 æ„å»ºåŒºå—é“¾åŸºç¡€è®¾æ–½çš„å…¬å¸ Parity Technologiesã€‚å±…ä½åœ¨ç‘å£«çš„ Gavin ä¸Šå‘¨é€šè¿‡è§†é¢‘ä¸æˆ‘è®¨è®ºäº† Web 2.0 å‡ºé”™çš„åœ°æ–¹ã€ä»–å¯¹æœªæ¥çš„å±•æœ›ï¼Œä»¥åŠä¸ºä»€ä¹ˆæˆ‘ä»¬éƒ½éœ€è¦æ›´å°‘çš„ä¿¡ä»»ã€‚ä»¥ä¸‹é‡‡è®¿æ˜¯æˆ‘ä»¬è°ˆè¯çš„è®°å½•çš„æ•´ç†ç‰ˆã€‚&lt;/p>
&lt;/blockquote>
&lt;hr>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šæ®æˆ‘æ‰€çŸ¥ï¼ŒWeb3 æœ€åŸºæœ¬çš„æƒ³æ³•æ˜¯å½“å‰çš„ Web2.0 ä¸å¥½ã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬è®¨è®º Web3 ä¼šå¸¦æ¥ä»€ä¹ˆä¹‹å‰ï¼Œä½ ä¼šæ€ä¹ˆæè¿°ç°åœ¨çš„é—®é¢˜ï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šæˆ‘è®¤ä¸º Web 2.0 çš„æ¨¡å‹ä¸äº’è”ç½‘å‡ºç°ä¹‹å‰çš„ç¤¾ä¼šæ¨¡å‹éå¸¸ç›¸ä¼¼ã€‚å¦‚æœä½ å›åˆ° 500 å¹´å‰ï¼Œäººä»¬åŸºæœ¬ä¸Šåªåœ¨ä»–ä»¬çš„å°æ‘åº„å’Œä¹¡é•‡ï¼Œå¹¶ä¸ä»–ä»¬è®¤è¯†çš„äººè¿›è¡Œäº¤æ˜“ã€‚ä»å¹¿ä¹‰ä¸Šè®²ï¼Œä»–ä»¬ä¾é ç¤¾ä¼šç»“æ„æ¥ç¡®ä¿ä»–ä»¬çš„æœŸæœ›æ˜¯å¯ä¿¡çš„ï¼Œå¹¶ä¸”å¾ˆå¯èƒ½ä¼šçœŸæ­£å‘ç”Ÿï¼Œæ¯”å¦‚ï¼Œè¿™äº›è‹¹æœæ²¡æœ‰è…çƒ‚ï¼Œæˆ–è€…è¿™ä¸ªé©¬è¹„é“åœ¨ä¸‰å‘¨åä¸ä¼šç ´è£‚ã€‚&lt;/p>
&lt;p>è¿™ç§æœºåˆ¶è¿è¡Œå¾ˆå¥½ï¼Œå› ä¸ºåœ¨åŸé•‡ä¹‹é—´ç§»åŠ¨æ—¢å›°éš¾åˆè€—æ—¶ä¸”æˆæœ¬é«˜æ˜‚ã€‚æ‰€ä»¥ä½ æœ‰ç›¸å½“é«˜çš„å¯ä¿¡åº¦ï¼Œå°±ä¼šæœ‰äººç•™ä¸‹æ¥ï¼Œä»–ä»¬å¹¶ä¸æƒ³è¢«æµæ”¾ã€‚&lt;/p>
&lt;p>ä½†æ˜¯éšç€ç¤¾ä¼šå˜å¾—æ›´å¤§è§„æ¨¡ï¼Œæˆ‘ä»¬æœ‰äº†åŸå¸‚ã€å›½å®¶å’Œå›½é™…ç»„ç»‡ï¼Œæˆ‘ä»¬å¼€å§‹å…³æ³¨è¿™ç§å¥‡æ€ªçš„å“ç‰Œå£°èª‰é—®é¢˜ã€‚æˆ‘ä»¬åˆ›å»ºäº†è¿™äº›å¼ºå¤§ä½†å—ç›‘ç®¡çš„æœºæ„ï¼Œç›‘ç®¡æœºæ„åŸåˆ™ä¸Šç¡®ä¿æ»¡è¶³æˆ‘ä»¬çš„æœŸæœ›ã€‚æƒ³è¦åœ¨ç‰¹å®šè¡Œä¸šå¼€å±•ä¸šåŠ¡ï¼Œä½ å¿…é¡»æ»¡è¶³æŸäº›æ³•å®šè¦æ±‚ã€‚&lt;/p>
&lt;p>è¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼ŒåŸå› æœ‰å‡ ä¸ªã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯ï¼Œå»ç›‘ç®¡æ–°å…´äº§ä¸šéå¸¸å›°éš¾ã€‚æ”¿åºœçš„è¡ŒåŠ¨æ˜¯æ¯”è¾ƒç¼“æ…¢çš„ï¼Œéœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½èµ¶ä¸Šã€‚å¦ä¸€ä¸ªæ˜¯ç›‘ç®¡æœºæ„ä¸å®Œå–„ã€‚å°¤å…¶æ˜¯å½“ä»–ä»¬ä¸è¡Œä¸šå¯†åˆ‡åˆä½œæ—¶ï¼Œè¡Œä¸šå’Œç›‘ç®¡æœºæ„ä¹‹é—´é€šå¸¸ä¼šå­˜åœ¨ä¸€äº›æ—‹è½¬é—¨å…³ç³»ã€‚&lt;/p>
&lt;p>å¦ä¸€ä¸ªæ˜¯ç›‘ç®¡æœºæ„çš„æ”¯æŒåŠ›åº¦éå¸¸æœ‰é™ï¼Œä¹Ÿå°±æ˜¯æ”¿åºœæŠ•å…¥å¤šå°‘èµ„é‡‘ã€‚å› æ­¤ï¼Œç›‘ç®¡å°†æ˜¯ä¸å®Œæ•´çš„ã€‚ä»–ä»¬èƒ½å¤Ÿç›‘ç®¡æœ€å¤§çš„ç½ªçŠ¯ï¼Œä½†ä»–ä»¬æ— æ³•åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¿æŒçœŸæ­£å¼ºå¤§çš„å½±å“åŠ›ã€‚å½“ç„¶ï¼Œç›‘ç®¡æœºæ„å’Œæ³•å¾‹å› å¸æ³•ç®¡è¾–åŒºè€Œå¼‚ã€‚å¦‚æœä½ å»æ¬§ç›Ÿçš„æŸä¸ªåœ°æ–¹ï¼Œé‚£ä¹ˆ xx æ´»åŠ¨å°±å¯ä»¥äº†ï¼›å¦‚æœä½ å»åˆ«çš„åœ°æ–¹ï¼Œé‚£å°±ä¸è¡Œäº†ã€‚éšç€æˆ‘ä»¬æˆä¸ºä¸€ä¸ªéå¸¸å›½é™…åŒ–çš„ç¤¾ä¼šï¼Œè¿™å®é™…ä¸Šæ„å‘³ç€ä½ çš„æœŸæœ›ä»æœªå¾—åˆ°æ»¡è¶³ã€‚&lt;/p>
&lt;p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦è¶…è¶Šè¿™ä¸€ç‚¹ã€‚ä½†ä¸å¹¸çš„æ˜¯ï¼ŒWeb 2.0 ä»ç„¶å­˜åœ¨äºè¿™ç§éå¸¸ä¸­å¿ƒåŒ–çš„æ¨¡å‹ä¸­ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šæˆ‘ä»¬çœŸçš„åœ¨è°ˆè®ºæŠ€æœ¯çš„å¤±è´¥å—ï¼Ÿè¿˜æ˜¯æˆ‘ä»¬åœ¨è°ˆè®ºæ²»ç†ã€ç›‘ç®¡å’Œç«äº‰æ”¿ç­–çš„å¤±è´¥ï¼Ÿå› ä¸ºå¬èµ·æ¥ä½ æ˜¯åœ¨è¯´ï¼šè¿™æ˜¯ç›‘ç®¡çš„å¤±è´¥ï¼Œä½†ç­”æ¡ˆå´ä¸æ˜¯æ›´å¥½çš„ç›‘ç®¡ï¼Œè€Œæ˜¯éœ€è¦æœ‰ä¸€ä¸ªæ–°çš„æŠ€æœ¯å±‚ï¼Œå› ä¸ºç›‘ç®¡å¤±è´¥æ˜¯ä¸å¯é¿å…çš„ã€‚æˆ‘æ˜¯å¦æ­£ç¡®æè¿°äº†æ‚¨çš„è§‚ç‚¹ï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šæ˜¯çš„ï¼Œè¿™ä¸ªæ¨¡å‹åäº†ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šé‚£ä¹ˆè®©æˆ‘ä»¬æ¥è°ˆè°ˆåº”è¯¥ç”¨ä»€ä¹ˆæ¥ä»£æ›¿å®ƒã€‚æˆ‘ä»¬ä¸€ç›´åœ¨è®¨è®ºä¸ºä»€ä¹ˆ Web 2.0 ä¸èµ·ä½œç”¨ã€‚ä½ å¯¹ Web3 çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šLess trust, more truthã€‚æ›´å°‘çš„ä¿¡ä»»ï¼Œæ›´å¤šçš„äº‹å®ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šâ€œless trustâ€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šæˆ‘å¯¹ä¿¡ä»»æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å«ä¹‰ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¿¡ä»°ã€‚è¿™æ˜¯ä¸€ç§ä¿¡å¿µï¼ˆfaithï¼‰ï¼Œå³æŸäº›äº‹æƒ…ä¼šå‘ç”Ÿçš„ä¿¡ä»°ï¼Œä¸–ç•Œä¼šä»¥æŸç§æ–¹å¼è¿è½¬ï¼Œè€Œæ²¡æœ‰ä»»ä½•çœŸå®çš„è¯æ®æˆ–ç†æ€§çš„è®ºæ®æ¥è¯´æ˜ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³è¦çš„æ›´å°‘çš„ä¿¡ä»»ï¼Œæˆ‘ä»¬æƒ³è¦æ›´å¤šçš„äº‹å®çœŸç›¸ã€‚æˆ‘çœŸæ­£æƒ³è¡¨è¾¾çš„æ„æ€æ˜¯åœ¨ Web3 ä¸‹æ›´åŠ å¯ä»¥ç›¸ä¿¡æˆ‘ä»¬çš„æœŸæœ›ä¼šå¾—åˆ°æ»¡è¶³ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šè¿™å¬èµ·æ¥åƒæ˜¯åœ¨è¯´â€œå‡å°‘ç›²ç›®ä¿¡ä»°ï¼Œå¢åŠ ä¿¡èª‰çš„å¯ä¿¡åº¦â€ã€‚&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šå¯ä»¥è¯´æ˜¯ï¼Œä¹Ÿå¯ä»¥è¯´ä¸æ˜¯ã€‚æˆ‘è®¤ä¸ºä¿¡ä»»æœ¬èº«å®é™…ä¸Šå›´ç»•ç€åäº‹ã€‚ä¿¡ä»»æ„å‘³ç€ä½ å°†æŸç§æƒåŠ›æˆäºˆå…¶ä»–äººæˆ–æŸä¸ªç»„ç»‡ï¼Œä»–ä»¬å°†èƒ½å¤Ÿä»¥æŸç§ä»»æ„æ–¹å¼ä½¿ç”¨è¯¥æƒåŠ›ã€‚ä¸€æ—¦å®ƒæˆä¸ºå¯ä¿¡çš„ä¿¡ä»»ï¼Œå®ƒå°±ä¸å†æ˜¯çœŸæ­£çš„ä¿¡ä»»ã€‚å®ƒä¼šæœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œä¸€ä¸ªåŸºæœ¬åŸç†ï¼Œä¸€ä¸ªè®ºç‚¹ï¼Œä¸€ä¸ªé€»è¾‘æœºåˆ¶ã€‚æ— è®ºå¦‚ä½•ï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™ä¸æ˜¯ä¿¡ä»»ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šå·²ç»å†™åˆ° Web3 å°†æ‰“ç ´åƒ Google å’Œ Facebook è¿™æ ·çš„å„æ–­ä¼ä¸šå¹³å°ã€‚ä½ èƒ½è§£é‡Šä¸€ä¸‹å®ƒå°†å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å—ï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šæ˜¯çš„ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªåˆä¹é€»è¾‘çš„æ”¹è¿›ã€‚è€Œä¸”æˆ‘è®¤ä¸ºåœ¨æ›´å¤§çš„è®¡åˆ’ä¸­ï¼Œè¿™æ˜¯ä¸å¯é¿å…çš„ã€‚è¦ä¹ˆè¿™æ˜¯ä¸å¯é¿å…çš„ï¼Œè¦ä¹ˆç¤¾ä¼šæ­£åœ¨èµ°å‘è¡°è½ã€‚ä½†å°±å…·ä½“è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆéš¾å›ç­”çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>åœ¨æŠ€æœ¯æ–¹é¢ï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆï¼Ÿæˆ‘ä»¬æœ‰å¯†ç å­¦ã€‚åœ¨åŸºæœ¬å±‚é¢ä¸Šï¼Œå¯†ç å­¦å…è®¸æˆ‘ä¸æˆ‘çš„æœ‹å‹éšç§çš„äº¤è°ˆï¼Œå³ä½¿åœ¨å…¬å¼€çš„æ²Ÿé€šæ¸ é“æˆ–é€šè¿‡ç¬¬ä¸‰æ–¹ï¼Œæˆ‘ä»ç„¶æœ‰è‰¯å¥½çš„æœŸæœ›ï¼Œå¯ä¿¡çš„æœŸæœ›ã€‚è¿™å°†æ˜¯ç§å¯†çš„ï¼Œå°±å¥½åƒæˆ‘ä»¬åœ¨ç”°é‡é‡Œäº’ç›¸èŠå¤©ï¼Œå¯ä»¥çœ‹åˆ°å‘¨å›´æ²¡æœ‰äººã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šä»…ä»¥åŠ å¯†é€šä¿¡ä¸ºä¾‹ï¼Œç›®å‰çœ‹æ¥ä¸ä¼ä¸šå„æ–­éå¸¸ç›¸ä¼¼ã€‚å°±åƒï¼ŒWhatsApp æä¾›åŠ å¯†é€šä¿¡ã€‚å…³äºè¿™åœ¨å¤šå¤§ç¨‹åº¦ä¸ŠçœŸæ­£æ»¡è¶³äº†ä½ å¯¹éšç§çš„æ¸´æœ›å­˜åœ¨ä¸€äº›äº‰è®®ï¼Œä½†æˆ‘ä»ç„¶è®¤ä¸ºè¿™æ˜¯åŠ å¯†é€šä¿¡çš„ä¸€ä¸ªä¾‹å­ï¼Œå®ƒç”±ä¸–ç•Œä¸Šæœ€å¼ºå¤§çš„å…¬å¸ä¹‹ä¸€æ§åˆ¶ï¼Œæ‹¥æœ‰æ•°åäº¿ç”¨æˆ·ã€‚&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šè¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…ï¼Œä»è¡¨é¢ä¸Šçœ‹ï¼Œæ˜¯è¿™æ ·çš„ã€‚ä½†æ˜¯æœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯ï¼Œå¦‚æœ WhatsApp åœ¨ä»–ä»¬çš„æœåŠ¡ä¸­å¼•å…¥äº†ä¸€ä¸ªå…è®¸ä»–ä»¬è§£å¯†æ‰€æœ‰å¯¹è¯çš„å¯†é’¥æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬æ€ä¹ˆçŸ¥é“å®ƒä¸å­˜åœ¨ï¼Ÿä½ å¿…é¡»ä¿¡ä»»ã€‚æˆ‘ä»¬çœ‹ä¸åˆ°ä»£ç ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°ä»–ä»¬çš„æœåŠ¡æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°ä»–ä»¬çš„å¯†é’¥ç»“æ„ã€‚æ‰€ä»¥æˆ‘ä»¬èƒ½åšçš„åªæœ‰ç›²ç›®ç›¸ä¿¡ä»–ä»¬è¯´çš„æ˜¯çœŸçš„ã€‚ç°åœ¨ä»–ä»¬è¯´å®è¯ä¹Ÿè®¸æ˜¯å› ä¸ºä»–ä»¬å®³æ€•å¦‚æœä¸è¿™æ ·åšï¼Œä»–ä»¬çš„å£°èª‰ä¼šå—åˆ°å¾ˆå¤§çš„æ‰“å‡»ã€‚ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘ä»¬ä»æ–¯è¯ºç™»çš„ä¸€äº›å¯ç¤ºä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæœ‰æ—¶å…¬å¸æ²¡æœ‰æœºä¼šè¯´å®è¯ã€‚æœ‰æ—¶ï¼Œå®‰å…¨æœåŠ¡å¯ä»¥åœ¨ä»–ä»¬çš„åå°å®‰è£…ä¸€ä¸ªç›’å­ï¼Œç„¶åä»–ä»¬è¢«å‘ŠçŸ¥ï¼Œâ€œä½ ä¸éœ€è¦çœ‹è¿™ä¸ªç›’å­ï¼Œä½ ä¸èƒ½å¯¹è¿™ä¸ªç›’å­è¯´æˆ–åšä»»ä½•äº‹æƒ…ï¼Œä½ åªèƒ½å®‰é™çš„åç€ã€‚â€&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šå¬èµ·æ¥å¼€æºè½¯ä»¶å¯ä»¥å®ç°ä½ æ‰€è¯´çš„ï¼Œä½†ä½ å¹¶ä¸æ˜¯åœ¨æè¿°å¼€æºè½¯ä»¶ã€‚å½“æˆ‘ä»¬è°ˆè®º Web3 æ—¶ï¼Œæˆ‘ä»¬è°ˆè®ºçš„æ˜¯åŒºå—é“¾ï¼Œè¿™æ˜¯ä¸€ç§å®Œå…¨ä¸åŒçš„äº’è”ç½‘æ¶æ„æ–¹å¼ã€‚é‚£ä¹ˆï¼Œä»æŠ€æœ¯ä¸Šè®²ï¼Œä½ å¦‚ä½•å®ç°è¿™ç§å¯¹ä¿¡ä»»çš„ä¾èµ–å‘¢ï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šæˆ‘è®¤ä¸ºä¸€å®šç¨‹åº¦çš„ truth æ˜¯å¿…è¦çš„ã€‚æˆ‘çš„æ„æ€æ˜¯å¼€æ”¾ã€é€æ˜ã€‚åŒºå—é“¾æŠ€æœ¯åŒæ—¶ä½¿ç”¨å¯†ç å­¦å’ŒæŸäº›åšå¼ˆè®ºç»æµå­¦æ¥æä¾›æœåŠ¡ã€‚æˆ‘ä»¬éœ€è¦äº†è§£ç½‘ç»œçš„èŠ‚ç‚¹åŸºç¡€è®¾æ–½ï¼Œå®ƒçœŸçš„æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼Ÿè¿˜æ˜¯å®é™…ä¸Šç”±åˆ¶é€ å’Œé”€å”®ç¡¬ä»¶çš„å…¬å¸ä»ä¸€ä¸ªæ•°æ®ä¸­å¿ƒè¿è¡Œï¼Ÿæ–°èŠ‚ç‚¹ä¸Šçº¿ä¹‹å‰éœ€è¦è¿›è¡Œå’¨è¯¢å—ï¼Ÿç»†èŠ‚å†³å®šäº†å®ƒæ˜¯å¦æ˜¯ä¼ªè£…çš„ Web 2.0ï¼Œè¿˜æ˜¯å¦çœŸæ­£åˆæ³•åœ°å¼€æ”¾ã€é€æ˜ã€å»ä¸­å¿ƒåŒ–ã€ç‚¹å¯¹ç‚¹ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šè®©æˆ‘ä»¬æ·±å…¥æ¢è®¨ä¸‹â€œå»ä¸­å¿ƒåŒ–â€çš„æ¦‚å¿µã€‚äº’è”ç½‘å·²ç»å»ä¸­å¿ƒåŒ–äº†ï¼Œå¯¹å§ï¼ŸInternet åè®®ä¸å½’å…¬å¸æ‰€æœ‰ã€‚è™½ç„¶åœ¨å®é™…å±‚é¢ä¸Šï¼Œäººä»¬å€¾å‘äºé€šè¿‡ä¸­å¿ƒåŒ–çš„å¹³å°æ¥å¼•å¯¼ä»–ä»¬çš„è¡Œä¸ºï¼Œä½†ä»–ä»¬ä¸ä¸€å®šå¿…é¡»è¿™æ ·åšã€‚ä½ ä¸å¿…åœ¨ Facebook ä¸Šå‘æ¶ˆæ¯ï¼Œå®ƒåªæ˜¯å¾ˆæ–¹ä¾¿ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬è°ˆè®ºä¸­å¿ƒåŒ–å’Œå»ä¸­å¿ƒåŒ–æ—¶ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šä»æœ¬è´¨ä¸Šè®²ï¼Œè¿™æ„å‘³ç€æˆ‘ä¸ªäººå¯ä»¥åƒä¸–ç•Œä¸Šä»»ä½•å…¶ä»–äººä¸€æ ·è½»æ¾åœ°æˆä¸ºè¿™é¡¹æ•´ä½“æœåŠ¡çš„æä¾›è€…æˆ–å…±åŒæä¾›è€…ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šè¿™æœ‰å¤šç°å®ï¼Ÿåœ¨æˆ‘çœ‹æ¥ï¼Œåªæœ‰ä¸€å°éƒ¨åˆ†å…·æœ‰é«˜æŠ€æœ¯ç´ å…»çš„äººå¯ä»¥åšåˆ°ã€‚åœ¨è¿™ç§è¯­å¢ƒä¸‹ï¼Œè¿™å¬èµ·æ¥ä¼šå‡ºç°ä¸€ç§ä¸åŒçš„ä¸­å¿ƒåŒ–ã€‚&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šå¦‚æœä½ ä¸åŒå…¶çƒ¦åœ°æ•™è‚²è‡ªå·±ï¼Œé‚£ä¹ˆæ‹¥æœ‰å¯ä»¥æ‰§è¡Œçš„æƒåˆ©æˆ–è‡ªç”±ä¸ç”±äºç¼ºä¹æ’ä»–æ€§å›¢ä½“çš„åŒ…å®¹æ€§è€Œæ— æ³•åœ¨éå¸¸åŸºæœ¬å’ŒåŸºç¡€çš„å±‚é¢ä¸ŠåšæŸäº‹ä¹‹é—´å­˜åœ¨å¾ˆå¤§å·®å¼‚ã€‚å¦‚æœæˆ‘å¯¹å…è´¹æä¾›çš„ææ–™è¿›è¡Œäº†å……åˆ†çš„æ•™è‚²ï¼Œå¹¶ä¸”è¿™å°±æ˜¯æˆä¸ºè¯¥æœåŠ¡çš„å…±åŒæä¾›è€…æ‰€éœ€çš„å…¨éƒ¨å†…å®¹ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯å…è´¹æœåŠ¡ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šæˆ‘ä¸Šè¿‡æ³•å­¦é™¢ï¼Œæˆ‘å¯ä»¥è¯´ï¼Œçœ‹ï¼Œä»»ä½•äººéƒ½å¯ä»¥å­¦ä¹ æ³•å¾‹ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¿›å…¥æ³•å­¦é™¢ï¼Œç„¶åä¸ºå¾‹å¸ˆå­¦ä¹ ã€‚ä½†å®é™…ä¸Šï¼Œè‡³å°‘åœ¨ç¾å›½ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿›å…¥é—¨æ§›éå¸¸é«˜çš„å…¬ä¼šï¼Œæœ€æ˜¾ç€çš„æ˜¯æˆæœ¬ã€‚å³ä½¿è¿›å…¥æ³•å¾‹è¡Œä¸šçš„é—¨æ§›é«˜äºç¼–ç¨‹ï¼Œè¿™å¹¶ä¸ä¸€å®šæ„å‘³ç€ä½ çš„è¡Œä¸šçš„è¿›å…¥é—¨æ§›ä¸é«˜ã€‚æˆ‘ç†è§£ä½ æ‰€æç»˜çš„åŒºåˆ«ï¼Œä½†æˆ‘æƒ³çŸ¥é“è¿™æ˜¯å¦æœ‰ç‚¹å¤©çœŸï¼Œè®¤ä¸ºæ¯ä¸ªäººéƒ½å¯ä»¥é€‰æ‹©æˆä¸ºä¸€åä¸“ä¸šçš„ Web3 ç¨‹åºå‘˜ï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šåŸåˆ™ä¸Šï¼Œè¿™ä¸æˆä¸ºä¸€å Web3 ç¨‹åºå‘˜æ— å…³ã€‚æ‚¨åº”è¯¥èƒ½å¤Ÿäº«å—è¯„ä¼°æŸäº›äº‹ç‰©çš„å¤§éƒ¨åˆ†èƒ½åŠ›ï¼Œè€Œæ— éœ€æˆä¸ºæ·±å…¥çš„æ ¸å¿ƒå¼€å‘äººå‘˜ã€‚ä½†æ˜¯ä¸–ç•Œä¸Šçš„ç¨‹åºå‘˜æ¯”å¾‹å¸ˆå¤šå¾—å¤šã€‚è¿™æ˜¯æœ‰å……åˆ†ç†ç”±çš„ã€‚ä¸ºæœºå™¨ç¼–ç¨‹å®é™…ä¸Šåªéœ€è¦äº†è§£ä¸€ç§ç›¸å½“å®¹æ˜“å­¦ä¹ çš„è¯­è¨€ã€‚ä½ å¯ä»¥åœ¨å°åº¦çš„ä¸€ä¸ªå°æ‘åº„é‡Œï¼Œç¢°å·§æœ‰äº’è”ç½‘ï¼Œä½ å¯ä»¥åœ¨ä¸€å‘¨å†…å­¦ä¹  JavaScriptã€‚ä½†ä½ ä¸èƒ½ç”¨ç¾å›½æ³•å¾‹åšåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;p>æˆ‘ä¸ä¼šè¯•å›¾è¯´æœä½ ç›¸ä¿¡ä¸–ç•Œä¸Šæ¯ä¸ªäººéƒ½å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä½†å…³é”®æ˜¯ï¼Œèƒ½åšåˆ°è¿™ä¸€ç‚¹çš„äººè¶Šå¤šï¼Œé—¨æ§›å°±è¶Šä½ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šè¿™æ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ã€‚é˜…è¯»æœ¬æ–‡çš„äººå¯èƒ½ä¼šæƒ³ï¼Œâ€œæˆ‘ä¼šåœ¨ Web3 ä¸–ç•Œä¸­åšä»€ä¹ˆï¼Ÿâ€ ä½ èƒ½å‹¾å‹’å‡ºå®ƒçš„æ ·å­å—ï¼ŸæŸä¸€ç§æ´»åŠ¨æˆ–åº”ç”¨ç¨‹åºç•Œé¢æˆ–äº¤æ˜“ï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šæˆ‘è®¤ä¸ºæœ€åˆçš„ Web3 åº”ç”¨ç¨‹åºå¯èƒ½æ˜¯å¯¹ Web 2.0 åº”ç”¨ç¨‹åºçš„å°è¿­ä»£ã€‚ä½†æ˜¯ Web3 å¸¦æ¥çš„ Web 2.0 æ— æ³•è½»æ¾æœåŠ¡çš„ä¸€ä»¶äº‹æ˜¯è´¢åŠ¡ä¹‰åŠ¡æˆ–ç»æµä¸Šå¼ºå¤§çš„åº”ç”¨ç¨‹åºã€‚è¿™æ˜¯ç‚¹å¯¹ç‚¹æ–¹å¼çš„ä¸ªäººå¯ä»¥åœ¨ä»–ä»¬ä¹‹é—´è·å¾—ç»æµæœåŠ¡çš„åœ°æ–¹ã€‚&lt;/p>
&lt;p>è¿™ä¸æ˜¯å…³äºæ±‡æ¬¾æœ¬èº«ï¼Œè€Œæ˜¯å…³äºå‘é€éå¸¸ç¨€æœ‰ã€éå¸¸å›°éš¾æˆ–åœ¨æŸäº›æ–¹é¢éå¸¸æ˜‚è´µçš„ä¸œè¥¿ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œä¾‹å¦‚ï¼Œçº¦ä¼šåº”ç”¨ç¨‹åºå¯ä»¥å‘é€è™šæ‹Ÿé²œèŠ±ï¼Œä½†æ— è®ºä½ æ”¯ä»˜å¤šå°‘é’±ï¼Œæˆ‘ä»¬æ¯å¤©åªèƒ½å‘é€ä¸€æŸè™šæ‹Ÿé²œèŠ±ã€‚å› æ­¤ï¼Œå¦‚æœä½ æ¯å¤©å‘åŒä¸€ä¸ªäººé€ä¸€æŸé²œèŠ±æ˜¯ä¸€ä¸ªéå¸¸å¼ºçƒˆçš„ä¿¡å·ï¼Œè¡¨æ˜ä»–ä»¬å–œæ¬¢ä½ ã€‚è¿™å°±æ˜¯é‡ç‚¹ï¼Œä½ ä¸èƒ½ä»˜é’±é€æ›´å¤šçš„èŠ±ã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šæˆ‘è§‰å¾— Tinder å¯ä»¥æ·»åŠ è¯¥åŠŸèƒ½ã€‚&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šå¯¹ï¼Œä»–ä»¬å¯ä»¥ï¼Œä½ æ¯å¤©åªèƒ½åšä¸€æ¬¡ã€‚ä½†ä»–ä»¬æ˜¯ä¸€å®¶ä»¥åˆ©æ¶¦ä¸ºåŠ¨æœºçš„å…¬å¸ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦æ”¯ä»˜è¶³å¤Ÿçš„ Tinder è´¹ç”¨ï¼Œä½ å°±å¯ä»¥å‘é€ä»»æ„æ•°é‡çš„æ˜Ÿæ˜Ÿã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šä½†æ˜¯ï¼Œå»ºç«‹åœ¨ Web3 ä¸Šçš„å…¬å¸æ˜¯å¦ä»ç„¶æ‹¥æœ‰ä¸ Web 2.0 å…¬å¸ç›¸åŒçš„å¸‚åœºæ¿€åŠ±ï¼Ÿæˆ‘å¾ˆéš¾æƒ³è±¡å†å²ä¸Šçš„æŠ€æœ¯å‘å±•ä¸å…è®¸æ”¿æ²»æˆ–ç»æµæƒåŠ›æ›´åŠ ä¸­å¿ƒã€‚é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦æœŸæœ›è¿™ä¸ªåŸºäºåŒºå—é“¾çš„å»ä¸­å¿ƒåŒ– Web3 æ‰“ç ´å¸¸è§„å‘¢ï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šæˆ‘ä»å°å°±å–œæ¬¢æŠ€æœ¯ã€‚æˆ‘åœ¨å…«å²çš„æ—¶å€™å­¦ä¼šäº†ç¼–ç ã€‚æˆ‘ä»æ¥æ²¡æœ‰è§è¿‡ä¸€ç§æŠ€æœ¯å¯ä»¥é™åˆ¶ä¸€ä¸ªäººçš„æƒåŠ›ã€‚æ­£å¦‚ä½ æ‰€è¯´ï¼Œæˆ‘èƒ½æƒ³åˆ°çš„æ¯ä¸€é¡¹æŠ€æœ¯éƒ½æœ‰åŠ©äºè®©ç”¨æˆ·å˜å¾—æ›´å¼ºå¤§ã€‚ä»–ä»¬å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ã€‚ä»–ä»¬å¯ä»¥æ›´å¯Œæœ‰ï¼Œä»–ä»¬å¯ä»¥æ›´å¿«ã€æ›´å¥½åœ°æˆ–å‘æ›´å¤šäººæä¾›ä»–ä»¬æä¾›çš„æœåŠ¡ã€‚åŒºå—é“¾ä¸ä¼šé‚£æ ·åšï¼Œè¿™æ˜¯æ ¹æœ¬çš„ä¸åŒã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ç§ç¤¾ä¼šç»“æ„ï¼Œè¿™æ˜¯ä¸€å¥—è§„åˆ™ã€‚è€Œè¿™äº›è§„åˆ™å”¯ä¸€çš„ä½œç”¨å°±æ˜¯åœ¨ç³»ç»Ÿå†…æ²¡æœ‰äººæ‹¥æœ‰ä»»æ„æƒåŠ›ã€‚ä½ å¯ä»¥ç›¸å½“ç¡®å®šï¼Œç‰¹åˆ«æ˜¯å¦‚æœä½ æ˜¯ä¸€åç¨‹åºå‘˜ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŸ¥çœ‹ä»£ç å¹¶çŸ¥é“å®ƒåœ¨åšæ­£ç¡®çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥åˆç†åœ°ç¡®å®šï¼Œå› ä¸ºæœ‰è¿™ä¹ˆå¤šäººåœ¨è¿™ç§æœŸæœ›çš„æ”¯æŒä¸‹åŠ å…¥äº†ç½‘ç»œã€‚å¦‚æœè¿™ä¸ªæœŸæœ›æ²¡æœ‰å¾—åˆ°æ»¡è¶³ï¼Œä»–ä»¬å°±ä¼šç¦»å¼€ç½‘ç»œã€‚&lt;/p>
&lt;p>&lt;strong>WIRED&lt;/strong>ï¼šå¾ˆå¤šäººéƒ½è¢«åŠ å¯†è¡Œä¸šæ‰€å¸å¼•ï¼Œå› ä¸ºä»–ä»¬å°†å…¶è§†ä¸ºæ¨ç¿»ç°æœ‰æ”¿æ²»ç§©åºæˆ–ä¸­å¤®é“¶è¡ŒæƒåŠ›çš„ä¸€ç§æ–¹å¼ã€‚ä½†æ˜¯ä½ å·²ç»å»ºè®® Web3 æ”¯æŒè‡ªç”±çš„æˆ˜åç§©åºã€‚ä½ æ€ä¹ˆçœ‹å®ƒè¿™æ ·åšï¼Ÿ&lt;/p>
&lt;p>&lt;strong>Gavin Wood&lt;/strong>ï¼šæˆ‘è®¤ä¸ºç”±äºæŠ€æœ¯å…è®¸çš„æƒåŠ›é›†ä¸­ï¼Œæˆ‘ä»¬æ‰€æ‹¥æœ‰çš„æœåŠ¡å’ŒæœŸæœ›æ­£å—åˆ°å¨èƒã€‚è¿™åªæ˜¯ä¸€ä¸ªäº‹å®ã€‚åœ¨ Facebook å’Œè°·æ­Œä¹‹å‰ï¼Œå‡ ä¹æ²¡æœ‰ä»€ä¹ˆä¸œè¥¿èƒ½è®©è¿™ä¹ˆå°‘çš„äººæ‹¥æœ‰è¿™ç§çº§åˆ«çš„æƒåŠ›ã€‚å¹¶ä¸æ˜¯è¯´æˆ‘ä¸è®¤ä¸º Facebook å’Œ Google ä»¥åŠæ‰€æœ‰å…¶ä»–å…¬å¸éƒ½åº”è¯¥è¢«å–ä»£ï¼Œè¿™å¹¶ä¸æ˜¯ Web3 çš„ç—‡ç»“æ‰€åœ¨ã€‚å¯¹æˆ‘æ¥è¯´ï¼ŒWeb3 å®é™…ä¸Šæ›´åƒæ˜¯ä¸€åœºæ›´å¤§çš„ç¤¾ä¼šæ”¿æ²»è¿åŠ¨ï¼Œå®ƒæ­£åœ¨ä»ä»»æ„æƒå¨è½¬å‘ä¸€ä¸ªæ›´åŠ ç†æ€§çš„è‡ªç”±æ¨¡å‹ã€‚è¿™æ˜¯æˆ‘èƒ½çœ‹åˆ°çš„ä¿æŠ¤è‡ªç”±ä¸–ç•Œçš„å”¯ä¸€æ–¹å¼ï¼Œè¿™æ˜¯æˆ‘ä»¬è¿‡å» 70 å¹´æ¥äº«å—çš„ç”Ÿæ´»ã€‚è¿™æ˜¯æˆ‘ä»¬èƒ½å¤Ÿè®©å®ƒåœ¨æœªæ¥ 70 å¹´ç»§ç»­è¿è¡Œçš„å”¯ä¸€æ–¹æ³•ã€‚ä½†ç›®å‰ï¼Œæˆ‘è®¤ä¸ºæˆ‘ä»¬æ­£åœ¨æœç€ä¸€ä¸ªå®Œå…¨ä¸åŒçš„æ–¹å‘ã€‚&lt;/p></description></item><item><title>Openfaas Workshop Lab11</title><link>https://example.com/p/openfaas-workshop-lab11/</link><pubDate>Tue, 04 Jan 2022 13:44:15 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab11/</guid><description>&lt;h1 id="lab-11---é«˜çº§å‡½æ•°---ä½¿ç”¨-hmac-çš„ä¿¡ä»»">Lab 11 - é«˜çº§å‡½æ•° - ä½¿ç”¨ HMAC çš„ä¿¡ä»»&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="å‰è¨€">å‰è¨€&lt;/h2>
&lt;p>ç”¨äºå¾®æœåŠ¡çš„ä¼ ç»Ÿè®¤è¯ç­–ç•¥ä¸å‡½æ•°çš„å·¥ä½œåŸç†å®Œå…¨ç›¸åŒã€‚åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä½¿ç”¨å…±äº«ç§˜å¯†å’ŒåŸºäºå“ˆå¸Œçš„æ¶ˆæ¯éªŒè¯ç ï¼ˆHMACï¼‰çš„å‡ ç§å¯ç”¨æ–¹æ³•ä¹‹ä¸€ã€‚æœ‰å…³å…¶ä»–è®¤è¯ç­–ç•¥å’Œæƒ³æ³•ï¼Œè¯·å‚è§ã€‚&lt;a class="link" href="https://github.com/openfaas-incubator/openfaas-function-auth/blob/master/README.md" target="_blank" rel="noopener"
>openfaas-function-auth&lt;/a>&lt;/p>
&lt;p>è¿™ç»ä¸æ˜¯ä¸€ä¸ªå¹¿æ³›çš„æ¸…å•ï¼Œå®‰å…¨å’Œè®¤è¯æ˜¯ä¸€ä¸ªå¤æ‚çš„é¢†åŸŸï¼Œæœ€å¥½ç•™ç»™ä¸“å®¶ä½¿ç”¨ç»è¿‡è¯•éªŒçš„æ–¹æ³•ã€‚&lt;/p>
&lt;h2 id="å‡†å¤‡å¥½ä½ çš„ç¯å¢ƒ">å‡†å¤‡å¥½ä½ çš„ç¯å¢ƒ&lt;/h2>
&lt;p>åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir -p lab11&lt;span class="se">\`&lt;/span>bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> lab11
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿè¦ç¡®ä¿ä½ çš„&lt;code>faas-cli'ç‰ˆæœ¬æ˜¯&lt;/code>0.7.4&amp;rsquo;æˆ–ä»¥ä¸Šï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä»€ä¹ˆæ˜¯-hmac">ä»€ä¹ˆæ˜¯ HMAC&lt;/h2>
&lt;p>å¦‚æœæ²¡æœ‰ä»»ä½•å½¢å¼çš„è®¤è¯æˆ–ä¿¡ä»»ï¼Œæˆ‘ä»¬çš„å‡½æ•°å¯èƒ½ä¼šæš´éœ²ç»™ä»»ä½•èƒ½çŒœåˆ°å…¶ URL çš„äººã€‚å¦‚æœæˆ‘ä»¬çš„å‡½æ•°å¯ä»¥åœ¨äº’è”ç½‘æˆ–æœ¬åœ°ç½‘ç»œä¸Šè®¿é—®ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯èƒ½è¢«åçš„è¡Œä¸ºè€…è°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°ä¼šå¯¹ä»»ä½•è¯·æ±‚åšå‡ºå“åº”ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶å¯¹å‡½æ•°çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŸºäºå“ˆå¸Œçš„æ¶ˆæ¯éªŒè¯ç ï¼ˆHMACï¼‰æ¥éªŒè¯ä¿¡æ¯çš„æ¥æºã€‚&lt;/p>
&lt;p>æ¥è‡ª[alexellis/hmac]ï¼ˆ&lt;a class="link" href="https://github.com/alexellis/hmac" target="_blank" rel="noopener"
>https://github.com/alexellis/hmac&lt;/a>ï¼‰ã€‚&lt;/p>
&lt;blockquote>
&lt;p>HMAC ä½¿ç”¨å‘é€æ–¹/æ¥æ”¶æ–¹æå‰å…±äº«çš„å¯¹ç§°å¯†é’¥ã€‚å‘é€æ–¹åœ¨æƒ³è¦ä¼ è¾“ä¿¡æ¯æ—¶å°†äº§ç”Ÿä¸€ä¸ªå“ˆå¸Œå€¼&amp;ndash;è¯¥æ•°æ®ä¸æœ‰æ•ˆè½½è·ä¸€èµ·å‘é€ã€‚ç„¶åï¼Œæ”¶ä»¶äººå°†ç”¨å…±äº«å¯†é’¥ç­¾ç½²æœ‰æ•ˆè½½è·ï¼Œå¦‚æœå“ˆå¸Œå€¼åŒ¹é…ï¼Œåˆ™å‡å®šæœ‰æ•ˆè½½è·æ¥è‡ªå‘ä»¶äººã€‚&lt;/p>
&lt;/blockquote>
&lt;p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é¿å…æˆ‘ä»¬çš„å‡½æ•°è¢«æ— æ•ˆçš„ç”šè‡³æ˜¯å±é™©çš„ä¿¡æ¯æ‰€è°ƒç”¨ã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨-hmac">ä½¿ç”¨ HMAC&lt;/h2>
&lt;p>æˆ‘ä»¬å°†ä½¿ç”¨ faas-cli æä¾›çš„&lt;code>--sign&lt;/code>æ ‡å¿—æ¥åŒ…å«ä¸€ä¸ªå¤´ï¼Œå…¶ä¸­åŒ…å«ä½¿ç”¨æˆ‘ä»¬ç”¨&lt;code>--key&lt;/code>æ ‡å¿—æä¾›çš„å…±äº«å¯†é’¥åˆ›å»ºçš„æ•£åˆ—ä¿¡æ¯ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„: &lt;code>--sign&lt;/code>å’Œ&lt;code>--key&lt;/code>å¿…é¡»åŒæ—¶å­˜åœ¨ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>è®©æˆ‘ä»¬é¦–å…ˆé€šè¿‡éƒ¨ç½²&lt;code>-env&lt;/code>å‡½æ•°æ¥æ£€æŸ¥è¯¥æ ‡å¿—çš„ä½œç”¨ï¼Œè¯¥å‡½æ•°å°†æ‰“å°å‡½æ•°ä¸­å¯è®¿é—®çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">faas-cli deploy --name env --fprocess&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;env&amp;#34;&lt;/span> --image&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;function/alpine:new&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>è°ƒç”¨ä¸å¸¦&lt;code>--sign&lt;/code>æ ‡å¿—çš„å‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ echo &amp;#34;The message&amp;#34; | faas-cli invoke env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HOSTNAME=d2c1a2cb20c2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fprocess=env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HOME=/root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_X_Call_Id=b84947c6-2970-4fcf-ba3b-66dde6943999
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_X_Forwarded_For=10.255.0.2:34974
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_X_Forwarded_Host=127.0.0.1:8080
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Content_Length=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Accept_Encoding=gzip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Content_Type=text/plain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_User_Agent=Go-http-client/1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_X_Start_Time=1538725657952768349
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>å†æ¬¡è°ƒç”¨è¯¥å‡½æ•°ï¼Œä½†è¿™æ¬¡æœ‰&lt;code>--sign&lt;/code>æ ‡å¿—ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ echo -n &amp;#34;The message&amp;#34; | faas-cli invoke env --sign=HMAC --key=cookie
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HOSTNAME=d2c1a2cb20c2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fprocess=env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HOME=/root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_User_Agent=Go-http-client/1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Content_Length=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Accept_Encoding=gzip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Hmac=sha1=9239edfe20185eafd7a5513c303b03d207d22f64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬çœ‹åˆ°&lt;code>HMAC&lt;/code>è¢«ä½œä¸ºç¯å¢ƒå˜é‡&lt;code>Http_Hmac&lt;/code>æä¾›ã€‚ç”Ÿæˆçš„å€¼æ˜¯ç”¨é’¥åŒ™&lt;code>cookie&lt;/code>ç­¾ååçš„&lt;code>æ¶ˆæ¯&lt;/code>çš„å“ˆå¸Œå€¼ï¼Œç„¶åç”¨æ•£åˆ—æ–¹æ³•&lt;code>sha1&lt;/code>è¿›è¡Œé¢„å¤„ç†ã€‚&lt;/p>
&lt;h2 id="hmac-åœ¨è¡ŒåŠ¨">HMAC åœ¨è¡ŒåŠ¨&lt;/h2>
&lt;p>ä¸ºäº†æˆ‘ä»¬çš„ç›®çš„ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ Python 3 å‡½æ•°ã€‚è®©æˆ‘ä»¬æŠŠå®ƒå«åš&lt;code>hmac-protected&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">faas-cli new --lang python3 hmac-protected --prefix&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;your-docker-username&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ·»åŠ &lt;code>payload-secret&lt;/code>ï¼Œå®ƒå°†ä½œä¸ºå“ˆå¸Œæœ‰æ•ˆè½½è·çš„å¯†é’¥ã€‚&lt;/p>
&lt;p>åƒæˆ‘ä»¬åœ¨&lt;a class="link" href="https://github.com/openfaas/workshop/blob/master/lab10.md" target="_blank" rel="noopener"
>lab10&lt;/a>ä¸­é‚£æ ·åˆ›å»º&lt;code>payload-secret&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> -n &lt;span class="s2">&amp;#34;&amp;lt;your-secret&amp;gt;&amp;#34;&lt;/span> ! &lt;span class="p">|&lt;/span> faas-cli secret create payload-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šè®°ä½ä½ æ”¾åœ¨&amp;quot;&lt;!-- raw HTML omitted -->&amp;ldquo;ä½ç½®çš„å­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æˆ‘ä»¬çš„ &lt;code>hmac-protected.yml&lt;/code>åº”è¯¥çœ‹èµ·æ¥åƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://127.0.0.1:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hmac-protected&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./hmac-protected&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">&amp;lt;your-docker-username&amp;gt;/hmac-protected:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">secrets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">payload-secret&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢&lt;code>handler.py&lt;/code>çš„å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">hmac&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">hashlib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">validateHMAC&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">message&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">secret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">hash&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># GitHub and the sign flag prefix the hash with &amp;#34;sha1=&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">receivedHash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">getHash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">hash&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Hash message with secret&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">expectedMAC&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">hmac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">secret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">encode&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">encode&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">hashlib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sha1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">createdHash&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">expectedMAC&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hexdigest&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">receivedHash&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">createdHash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">getHash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">hash&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="s2">&amp;#34;sha1=&amp;#34;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">hash&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">hash&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">hash&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">:]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># We receive the hashed message in form of a header&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">messageMAC&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Http_Hmac&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Read secret from inside the container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/var/openfaas/secrets/payload-secret&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;r&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">secretContent&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">payloadSecret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">secretContent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Function to validate the HMAC&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">validateHMAC&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">payloadSecret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">messageMAC&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;Successfully validated: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">req&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;HMAC validation failed.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æºä»£ç ä¹Ÿå¯åœ¨&lt;a class="link" href="./hmac-protected/hmac-protected/handler.py" >hmac-protected/hmac-protected/handler.py&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>é€šè¿‡ä½¿ç”¨&lt;code>faas-cli up&lt;/code>åœ¨ä¸€ä¸ªå‘½ä»¤ä¸­æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli up -f ./hmac-protected.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è°ƒç”¨å‡½æ•°">è°ƒç”¨å‡½æ•°&lt;/h3>
&lt;p>æˆ‘ä»¬å°†é€šè¿‡å‘é€ä¸¤ä¸ªå€¼æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ­£å¸¸çš„è¯·æ±‚ä¿¡æ¯&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸€ä¸ªåŒ…å«åŒä¸€æ¶ˆæ¯çš„å“ˆå¸Œå€¼çš„å¤´ï¼Œå½“ç”¨&lt;code>--key&lt;/code>æ ‡å¿—çš„å€¼ç­¾åæ—¶&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>åœ¨æ”¶åˆ°è¯·æ±‚åï¼Œè¯¥å‡½æ•°å°†ä½¿ç”¨&lt;code>payload-secret&lt;/code>ä»¥ä¸å‘é€è€…ç›¸åŒçš„æ–¹å¼ç­¾ç½²è¯·æ±‚ä¿¡æ¯ã€‚è¿™å°†åˆ›å»ºç¬¬äºŒä¸ª HMACï¼Œå¹¶ä¸ä¼ è¾“çš„å¤´ä¿¡æ¯ &lt;code>Http-Hmac&lt;/code>è¿›è¡Œæ¯”è¾ƒã€‚&lt;/p>
&lt;p>è¿™é‡Œæˆ‘ä»¬æ¯”è¾ƒç”Ÿæˆå’Œæ¥æ”¶çš„å“ˆå¸Œå€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Function to validate the HMAC&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">validateHMAC&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">payloadKey&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">receivedHMAC&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;Successfully validated: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">req&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;HMAC validation failed.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ç”¨æ ‡å¿—æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> -n &lt;span class="s2">&amp;#34;This is a message&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke hmac-protected --sign hmac --key&lt;span class="o">=&lt;/span>&amp;lt;your-secret&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ£€æŸ¥å“åº”å¹¶ç¡®è®¤å®ƒä¸æ‰€ä¼ è¾¾çš„ä¿¡æ¯ç›¸ç¬¦ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å¾—åˆ°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">Successfully validated: This is a message
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ç”¨é”™è¯¯çš„&lt;code>--key&lt;/code>è°ƒç”¨å‡½æ•°ï¼Œæ£€æŸ¥å¤±è´¥ä¿¡æ¯ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> -n &lt;span class="s2">&amp;#34;This is a message&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke hmac-protected --sign hmac --key&lt;span class="o">=&lt;/span>wrongkey
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HMAC validation failed.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½œä¸ºåç»­ä»»åŠ¡ï¼Œä½ å¯ä»¥åº”ç”¨ HMAC æ¥ä¿æŠ¤ä½ åœ¨&lt;a class="link" href="https://github.com/openfaas/workshop/blob/master/lab5.md" target="_blank" rel="noopener"
>å®éªŒå®¤ 5&lt;/a>çš„&lt;code>issue-bot&lt;/code>ä¸Šçš„ç«¯ç‚¹ã€‚&lt;/p>
&lt;p>ä½ å·²ç»å®Œæˆäº†å®éªŒï¼Œå¯ä»¥è¿”å›åˆ°&lt;a class="link" href="./README.md" >ä¸»é¡µ&lt;/a>ã€‚&lt;/p></description></item><item><title>Openfaas Workshop Lab10</title><link>https://example.com/p/openfaas-workshop-lab10/</link><pubDate>Tue, 04 Jan 2022 13:44:12 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab10/</guid><description>&lt;h1 id="lab-10---é«˜çº§å‡½æ•°---ç§˜å¯†">Lab 10 - é«˜çº§å‡½æ•° - ç§˜å¯†&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>åœ¨å¼€å§‹æœ¬å®éªŒå®¤ä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚ç”±äºæœ¬å®éªŒå®¤æ˜¯å»ºç«‹åœ¨å…ˆå‰çš„å®éªŒå®¤åŸºç¡€ä¸Šçš„ï¼Œå› æ­¤è¯·å¤åˆ¶ lab5ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ cp -r lab5 lab10\
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;amp;&amp;amp; cd lab10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä½¿ç”¨ç§˜å¯†">ä½¿ç”¨ç§˜å¯†&lt;/h2>
&lt;p>&lt;a class="link" href="./lab5.md" >å®éªŒå®¤ 5&lt;/a>ç ”ç©¶äº†&lt;code>issue-bot&lt;/code>å¦‚ä½•ä»ç¯å¢ƒå˜é‡ï¼ˆ&lt;code>auth_token&lt;/code>ï¼‰è·å¾— GitHub çš„*ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨&lt;strong>æœºå¯†&lt;/strong>æ¥å­˜å‚¨æ•æ„Ÿä¿¡æ¯ã€‚&lt;/p>
&lt;p>æ¥è‡ª Docker æ–‡æ¡£ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&amp;hellip; ç§˜å¯†æ˜¯ä¸€å›¢æ•°æ®ï¼Œå¦‚å¯†ç ã€SSH ç§é’¥ã€SSL è¯ä¹¦æˆ–å…¶ä»–æ•°æ®ï¼Œä¸åº”é€šè¿‡ç½‘ç»œä¼ è¾“æˆ–æœªç»åŠ å¯†å­˜å‚¨åœ¨ Docker æ–‡ä»¶æˆ–åº”ç”¨ç¨‹åºçš„æºä»£ç ä¸­ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>è¿™æ˜¯ä¸€ä¸ªæ¯”ç¯å¢ƒå˜é‡æ›´å®‰å…¨çš„é€‰æ‹©ã€‚ç¯å¢ƒå˜é‡æ›´å®¹æ˜“ä½¿ç”¨ï¼Œä½†æœ€é€‚åˆäºéä¿å¯†çš„é…ç½®é¡¹ç›®ã€‚ ä¼¼ä¹å¾ˆé€‚åˆç”¨äºå­˜å‚¨&lt;code>auth_token&lt;/code>å€¼ã€‚&lt;/p>
&lt;p>è¯·å‚é˜…&lt;a class="link" href="https://docs.openfaas.com/reference/secrets/" target="_blank" rel="noopener"
>docs&lt;/a>ä¸­å…³äºç§˜å¯†çš„æ›´å¤šä¿¡æ¯å’Œå®ƒçš„è®¾è®¡ã€‚&lt;/p>
&lt;h3 id="åˆ›å»ºä¸€ä¸ªç§˜å¯†">åˆ›å»ºä¸€ä¸ªç§˜å¯†&lt;/h3>
&lt;blockquote>
&lt;p>ç§˜å¯†åç§°å¿…é¡»éµå¾ª DNS-1123 æƒ¯ä¾‹ï¼Œç”±å°å†™å­—æ¯æ•°å­—å­—ç¬¦æˆ–&amp;rsquo;-&amp;lsquo;ç»„æˆï¼Œå¹¶ä¸”å¿…é¡»ä»¥ä¸€ä¸ªå­—æ¯æ•°å­—å­—ç¬¦å¼€å§‹å’Œç»“æŸ&lt;/p>
&lt;/blockquote>
&lt;p>ä»ä¸€ä¸ªç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">echo -n &amp;lt;auth_token&amp;gt; | faas-cli secret create auth-token
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµ‹è¯•ç§˜å¯†æ˜¯å¦è¢«åˆ›å»ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli secret ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šè¯·è®°ä½ï¼Œ&lt;code>-g&lt;/code>æ ‡å¿—å¯ä»¥åœ¨ç½‘å…³ä¹‹é—´è½»æ¾åˆ‡æ¢ã€‚ è¿™ä¹Ÿé€‚ç”¨äºç§˜å¯†ã€‚&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">kubectl get secret auth-token -n openfaas-fn -o json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šå¦‚æœä½ åœ¨è¿œç¨‹ç½‘å…³ä¸Šéƒ¨ç½²ä½ çš„å‡½æ•°ï¼Œç¡®ä¿ä½ åœ¨ä½ ç”¨äºç½‘å…³çš„è™šæ‹Ÿæœºä¸Šåˆ›å»ºä½ çš„ç§˜å¯†ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å½“ç§˜å¯†è¢«å‡½æ•°æŒ‚è½½æ—¶ï¼Œå®ƒå°†ä»¥æ–‡ä»¶å½¢å¼å‡ºç°åœ¨&lt;code>/var/openfaas/secrets/auth-token&lt;/code>ä¸‹ã€‚è¿™å¯ä»¥ç”±&lt;code>handler.py&lt;/code>è¯»å–ï¼Œä»¥è·å¾— GitHub çš„&lt;em>ä¸ªäººè®¿é—®ä»¤ç‰Œ&lt;/em>ã€‚&lt;/p>
&lt;h3 id="æ›´æ–°-issue-botyml">æ›´æ–° issue-bot.yml&lt;/h3>
&lt;p>ç”¨ä¸€ä¸ªæŒ‡ä»¤å–ä»£å¯¹&lt;code>env.yml&lt;/code>çš„å¼•ç”¨ï¼Œä½¿&lt;code>auth-token&lt;/code>çš„ç§˜å¯†å¯¹å‡½æ•°å¯ç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://127.0.0.1:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">issue-bot&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./issue-bot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">&amp;lt;your-username&amp;gt;/issue-bot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">write_debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway_hostname&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;gateway.openfaas&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">positive_threshold&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0.25&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">secrets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">auth-token&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ›´æ–°issue-botå‡½æ•°">æ›´æ–°&lt;code>issue-bot&lt;/code>å‡½æ•°&lt;/h3>
&lt;p>å‡½æ•°å¤„ç†ç¨‹åºéœ€è¦æ”¹å˜ï¼Œä»¥ä½¿å…¶è¯»å–&lt;code>auth-token&lt;/code>ç§˜å¯†ï¼Œè€Œä¸æ˜¯ç¯å¢ƒå˜é‡ã€‚ è¿™åªæ˜¯ä¸€ä¸ªå•è¡Œçš„æ”¹åŠ¨ï¼Œåœ¨è¿™é‡Œã€‚&lt;/p>
&lt;p>python
g = Github(os.getenv(&amp;ldquo;auth_token&amp;rdquo;))&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">è¢«æ›¿æ¢ä¸º
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">with open(&amp;#34;/var/openfaas/secrets/auth-token&amp;#34;, &amp;#34;r&amp;#34;) as authToken:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> g = Github(authToken.read())
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>å®Œæ•´çš„æºä»£ç å¯åœ¨&lt;a class="link" href="./issue-bot-secrets/bot-handler/handler.py" >issue-bot-secrets/bot-handler/handler.py&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>æ„å»ºå’Œéƒ¨ç½²&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ CLI æ¥æ„å»ºå’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli up -f issue-bot.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨è½¬åˆ°&lt;a class="link" href="lab11.md" >Lab 11&lt;/a>ã€‚&lt;/p></description></item><item><title>Openfaas Workshop Lab9</title><link>https://example.com/p/openfaas-workshop-lab9/</link><pubDate>Tue, 04 Jan 2022 13:44:09 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab9/</guid><description>&lt;h1 id="lab-9---é«˜çº§å‡½æ•°---è‡ªåŠ¨ç¼©æ”¾">Lab 9 - é«˜çº§å‡½æ•° - è‡ªåŠ¨ç¼©æ”¾&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="è‡ªåŠ¨ç¼©æ”¾å‡½æ•°çš„åº”ç”¨">è‡ªåŠ¨ç¼©æ”¾å‡½æ•°çš„åº”ç”¨&lt;/h2>
&lt;p>æ­£å¦‚&lt;a class="link" href="http://docs.openfaas.com/architecture/autoscaling/" target="_blank" rel="noopener"
>æ–‡æ¡£&lt;/a>ä¸­æè¿°çš„é‚£æ ·ï¼ŒOpenFaaS å¸¦æœ‰è‡ªåŠ¨æ‰©å±•å‡½æ•°ã€‚åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹è‡ªåŠ¨æ‰©å±•æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚&lt;/p>
&lt;h3 id="å‰ææ¡ä»¶">å‰ææ¡ä»¶&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>åœ¨å®Œæˆäº†&lt;a class="link" href="./lab1.md" >Lab 1&lt;/a>ä¸­å¯¹ OpenFaaS çš„è®¾ç½®åï¼Œä½ å°†æ‹¥æœ‰è§¦å‘è‡ªåŠ¨æ‰©å±•æ‰€éœ€çš„ä¸€åˆ‡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¤šä¸ªå·¥å…·å¯ä»¥ç”¨æ¥åˆ›å»ºè¶³å¤Ÿçš„æµé‡æ¥è§¦å‘è‡ªåŠ¨æ‰©å±• - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`curl&amp;rsquo;å°†è¢«ä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“åœ¨ Mac å’Œ Linux ä¸Šä½¿ç”¨ï¼Œå¹¶åœ¨ Windows ä¸Šä¸ Git Bash æ‰“åŒ…ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="è‡ªåŠ¨æ‰©å±•çš„èƒŒæ™¯">è‡ªåŠ¨æ‰©å±•çš„èƒŒæ™¯&lt;/h3>
&lt;p>å¼€ç®±å³ç”¨çš„ OpenFaaS æ˜¯è¿™æ ·é…ç½®çš„ï¼Œå®ƒå°†æ ¹æ® Prometheus æµ‹é‡çš„ &lt;code>æ¯ç§’è¯·æ±‚&lt;/code>æŒ‡æ ‡è¿›è¡Œè‡ªåŠ¨æ‰©å±•ã€‚ è¿™ä¸ªæŒ‡æ ‡æ˜¯åœ¨æµé‡é€šè¿‡ API ç½‘å…³çš„æ—¶å€™æ•è·çš„ã€‚å¦‚æœè¶…è¿‡äº†å®šä¹‰çš„ &lt;code>æ¯ç§’è¯·æ±‚&lt;/code>çš„é˜ˆå€¼ï¼ŒAlertManager å°±ä¼šå¯åŠ¨ã€‚è¿™ä¸ªé˜ˆå€¼åº”è¯¥è¢«é‡æ–°é…ç½®ä¸ºé€‚åˆç”Ÿäº§ä½¿ç”¨çš„æ°´å¹³ï¼Œå› ä¸ºåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸ºäº†æ¼”ç¤ºï¼Œå®ƒè¢«è®¾ç½®ä¸ºä¸€ä¸ªä½å€¼ã€‚&lt;/p>
&lt;blockquote>
&lt;p>åœ¨&lt;a class="link" href="http://docs.openfaas.com/architecture/autoscaling/" target="_blank" rel="noopener"
>æ–‡æ¡£ç½‘ç«™&lt;/a>ä¸­æ‰¾åˆ°æ›´å¤šå…³äºè‡ªåŠ¨ç¼©æ”¾çš„ä¿¡æ¯ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ¯æ¬¡è­¦æŠ¥è¢« AlertManager è§¦å‘æ—¶ï¼ŒAPI ç½‘å…³å°†æŠŠä½ çš„å‡½æ•°çš„ä¸€å®šæ•°é‡çš„å‰¯æœ¬æ·»åŠ åˆ°é›†ç¾¤ä¸­ã€‚OpenFaaS æœ‰ä¸¤ä¸ªé…ç½®é€‰é¡¹ï¼Œå…è®¸æŒ‡å®šå¤åˆ¶çš„èµ·å§‹/æœ€ä½æ•°é‡ï¼Œä¹Ÿå…è®¸åœæ­¢å¤åˆ¶çš„æœ€å¤§æ•°é‡ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é€šè¿‡è®¾ç½®&lt;code>com.openfaas.scale.min&lt;/code>æ¥æ§åˆ¶å‡½æ•°çš„æœ€å°å¤åˆ¶é‡ï¼Œç›®å‰é»˜è®¤å€¼ä¸º&lt;code>1&lt;/code>ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é€šè¿‡è®¾ç½®&lt;code>com.openfaas.scale.max&lt;/code>æ¥æ§åˆ¶ä¸€ä¸ªå‡½æ•°å¯ä»¥äº§ç”Ÿçš„æœ€å¤§å¤åˆ¶é‡ï¼Œç›®å‰é»˜è®¤å€¼æ˜¯&lt;code>20&lt;/code>ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„: å¦‚æœä½ æŠŠ&lt;code>com.openfaas.scale.min&lt;/code>å’Œ&lt;code>com.openfaas.scale.max&lt;/code>è®¾ç½®æˆç›¸åŒçš„å€¼ï¼Œä½ å°±ä¼šç¦ç”¨è‡ªåŠ¨ç¼©æ”¾å‡½æ•°ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="æŸ¥çœ‹-prometheus">æŸ¥çœ‹ Prometheus&lt;/h3>
&lt;p>ä½ éœ€è¦è¿è¡Œè¿™ä¸ªç«¯å£è½¬å‘å‘½ä»¤ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨&lt;code>http://127.0.0.1:9090&lt;/code>è®¿é—® Prometheusã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">kubectl port-forward deployment/prometheus 9090:9090 -n openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æ·»åŠ ä¸€ä¸ªæ‰€æœ‰æˆåŠŸè°ƒç”¨éƒ¨ç½²çš„å‡½æ•°çš„å›¾ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œ&lt;code>rate( gateway_function_invocation_total{code=&amp;quot;200&amp;quot;} [20s])&lt;/code>ä½œä¸ºæŸ¥è¯¢æ¥å®ç°ã€‚å¯¼è‡´ä¸€ä¸ªçœ‹èµ·æ¥åƒè¿™æ ·çš„é¡µé¢ã€‚&lt;/p>
&lt;p>&lt;img src="https://example.com/../../screenshot/prometheus_graph.png"
loading="lazy"
>&lt;/p>
&lt;p>ç»§ç»­æ‰“å¼€ä¸€ä¸ªæ–°çš„æ ‡ç­¾ï¼Œåœ¨å…¶ä¸­ä½¿ç”¨&lt;code>http://127.0.0.1:9090/alerts&lt;/code>å¯¼èˆªåˆ°è­¦æŠ¥éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªé¡µé¢ä¸Šï¼Œä½ ä»¥åå¯ä»¥çœ‹åˆ°ä»€ä¹ˆæ—¶å€™è¶…è¿‡äº† &lt;code>æ¯ç§’è¯·æ±‚&lt;/code> çš„é˜ˆå€¼ã€‚&lt;/p>
&lt;p>&lt;img src="https://example.com/../../screenshot/prometheus_alerts.png"
loading="lazy"
>&lt;/p>
&lt;h3 id="è§¦å‘ç¼©æ”¾çš„-go-å‡½æ•°">è§¦å‘ç¼©æ”¾çš„ Go å‡½æ•°&lt;/h3>
&lt;p>é¦–å…ˆæ˜¯ Alex Ellis çš„ &lt;code>echo-fn&lt;/code>å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ git clone https://github.com/alexellis/echo-fn &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> echo-fn &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> faas-cli template store pull golang-http &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> faas-cli deploy &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --label com.openfaas.scale.max&lt;span class="o">=&lt;/span>&lt;span class="m">10&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --label com.openfaas.scale.min&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æ£€æŸ¥ç”¨æˆ·ç•Œé¢ï¼Œçœ‹ä»€ä¹ˆæ—¶å€™ &lt;code>go-echo&lt;/code>å‡½æ•°ä» &lt;code>ä¸å‡†å¤‡&lt;/code>å˜æˆ &lt;code>å‡†å¤‡&lt;/code>ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨&lt;code>faas-cli describe go-echo&lt;/code>æ¥æ£€æŸ¥ã€‚&lt;/p>
&lt;p>ä½¿ç”¨è¿™ä¸ªè„šæœ¬åå¤è°ƒç”¨ &lt;code>go-echo&lt;/code> å‡½æ•°ï¼Œç›´åˆ°ä½ çœ‹åˆ°å¤åˆ¶æ•°ä» 1 å˜æˆ 5ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä½ å¯ä»¥åœ¨ Prometheus ä¸­é€šè¿‡æ·»åŠ `gateway_service_count&amp;rsquo;çš„å›¾è¡¨æˆ–åœ¨é€‰æ‹©è¯¥å‡½æ•°çš„æƒ…å†µä¸‹æŸ¥çœ‹ API ç½‘å…³æ¥ç›‘æ§è¿™ä¸ªå€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ &lt;span class="k">for&lt;/span> i in &lt;span class="o">{&lt;/span>0..10000&lt;span class="o">}&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -n &lt;span class="s2">&amp;#34;Post &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke go-echo &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> echo&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šå¦‚æœä½ åœ¨ Kubernetes ä¸Šè¿è¡Œï¼Œä½¿ç”¨&lt;code>$OPENFAAS_URL&lt;/code>è€Œä¸æ˜¯&lt;code>http://127.0.0.1:8080&lt;/code>ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="ç›‘æ§è­¦æŠ¥">ç›‘æ§è­¦æŠ¥&lt;/h3>
&lt;p>ç°åœ¨ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¹‹å‰åˆ›å»ºçš„å›¾è¡¨ä¸­ï¼Œ&lt;code>go-echo&lt;/code>å‡½æ•°çš„è°ƒç”¨é‡æœ‰æ‰€å¢åŠ ã€‚ç§»åŠ¨åˆ°ä½ æ‰“å¼€è­¦æŠ¥é¡µé¢çš„æ ‡ç­¾ã€‚ä¸€æ®µæ—¶é—´åï¼Œä½ åº”è¯¥å¼€å§‹çœ‹åˆ° &lt;code>APIHighInvocationRate&lt;/code>çš„çŠ¶æ€ï¼ˆå’Œé¢œè‰²ï¼‰å˜ä¸º &amp;ldquo;å¾…å®š&amp;rdquo;ï¼Œç„¶åå†æ¬¡å˜ä¸º &amp;ldquo;å‘å°„&amp;rdquo;ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code>$ faas-cli list&lt;/code>æˆ–é€šè¿‡&lt;a class="link" href="http://127.0.0.1:8080" target="_blank" rel="noopener"
>ui&lt;/a>çœ‹åˆ°è‡ªåŠ¨ç¼©æ”¾çš„æƒ…å†µã€‚&lt;/p>
&lt;p>&lt;img src="https://example.com/../../screenshot/prometheus_firing.png"
loading="lazy"
>&lt;/p>
&lt;p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨&lt;code>$ docker service ps go-echo&lt;/code>æ¥éªŒè¯&lt;code>go-echo&lt;/code>çš„æ–°å‰¯æœ¬æ˜¯å¦å·²ç»å¯åŠ¨ã€‚&lt;/p>
&lt;p>ç°åœ¨åœæ­¢ bash è„šæœ¬ï¼Œä½ ä¼šçœ‹åˆ°å¤åˆ¶çš„æ•°é‡åœ¨å‡ ç§’é’Ÿåå›åˆ° 1 ä¸ªå¤åˆ¶ã€‚&lt;/p>
&lt;h3 id="ç–‘éš¾è§£ç­”">ç–‘éš¾è§£ç­”&lt;/h3>
&lt;p>å¦‚æœä½ è®¤ä¸ºä½ çš„è‡ªåŠ¨æ‰©å±•æ²¡æœ‰è¢«è§¦å‘ï¼Œé‚£ä¹ˆè¯·æ£€æŸ¥ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;ul>
&lt;li>æ™®ç½—ç±³ä¿®æ–¯ä¸­çš„è­¦æŠ¥é¡µé¢ - è¿™åº”è¯¥æ˜¯çº¢è‰²/ç²‰è‰²çš„ï¼Œå¹¶æ˜¾ç¤º &lt;code>FIRING&lt;/code> - å³åœ¨&lt;a class="link" href="http://127.0.0.1:9090/alerts" target="_blank" rel="noopener"
>http://127.0.0.1:9090/alerts&lt;/a>ã€‚&lt;/li>
&lt;li>æ£€æŸ¥æ ¸å¿ƒæœåŠ¡çš„æ—¥å¿—ï¼Œå³ç½‘å…³ã€Prometheus / AlertManagerã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸ºäº†è·å¾—æ ¸å¿ƒæœåŠ¡çš„æ—¥å¿—ï¼Œè¿è¡Œ&lt;code>docker service ls&lt;/code>ï¼Œç„¶å&lt;code>docker service logs &amp;lt;service-name&amp;gt;&lt;/code>ã€‚&lt;/p>
&lt;h3 id="è´Ÿè½½æµ‹è¯•å¯é€‰">è´Ÿè½½æµ‹è¯•(å¯é€‰)&lt;/h3>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å—æ§ç¯å¢ƒä¸­åº”ç”¨ç§‘å­¦æ–¹æ³•å’Œå·¥å…·ä¸åœ¨ä½ è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿è¡Œæ‹’ç»æœåŠ¡æ”»å‡»æ˜¯æœ‰åŒºåˆ«çš„ã€‚ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸é€‚åˆåšè´Ÿè½½æµ‹è¯•ï¼Œå› ä¸ºä¸€èˆ¬æ¥è¯´ï¼Œä½ æ˜¯åœ¨ Windows æˆ– Mac ä¸»æœºä¸Šçš„ Linux è™šæ‹Ÿæœºä¸­è¿è¡Œ OpenFaaSï¼Œè€Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå•èŠ‚ç‚¹ã€‚è¿™å¹¶ä¸ä»£è¡¨ç”Ÿäº§éƒ¨ç½²ã€‚&lt;/p>
&lt;p>è¯·çœ‹&lt;a class="link" href="https://docs.openfaas.com/architecture/performance/" target="_blank" rel="noopener"
>æ„å»ºä¸€ä¸ªåˆé€‚çš„æ€§èƒ½æµ‹è¯•&lt;/a>çš„æ–‡æ¡£ã€‚&lt;/p>
&lt;p>å¦‚æœ&lt;code>curl&lt;/code>æ²¡æœ‰ä¸ºä½ çš„æµ‹è¯•äº§ç”Ÿè¶³å¤Ÿçš„æµé‡ï¼Œæˆ–è€…ä½ æƒ³è·å¾—ä¸€äº›å…³äºäº‹æƒ…å¦‚ä½•åˆ†è§£çš„ç»Ÿè®¡æ•°æ®ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¯•è¯•&lt;code>hey&lt;/code>å·¥å…·ã€‚&lt;code>hey&lt;/code>å¯ä»¥é€šè¿‡æ¯ç§’çš„è¯·æ±‚æˆ–ç»™å®šçš„æŒç»­æ—¶é—´äº§ç”Ÿç»“æ„åŒ–çš„è´Ÿè½½ã€‚&lt;/p>
&lt;p>è¿™é‡Œæœ‰ä¸€ä¸ªåœ¨ 1GHz çš„ 2016 å¹´ 12 è‹±å¯¸ MacBook ä¸Šè¿è¡Œçš„ä¾‹å­ï¼Œå¸¦æœ‰ Docker Desktopã€‚è¿™æ˜¯ä¸€å°éå¸¸ä½åŠŸç‡çš„è®¡ç®—æœºï¼Œæ­£å¦‚æ‰€æè¿°çš„ï¼Œä¸ä»£è¡¨ç”Ÿäº§æ€§èƒ½ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ hey -z&lt;span class="o">=&lt;/span>30s -q &lt;span class="m">5&lt;/span> -c &lt;span class="m">2&lt;/span> -m POST -d&lt;span class="o">=&lt;/span>Test http://127.0.0.1:8080/function/go-echo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Summary:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Total: 30.0203 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Slowest: 0.0967 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Fastest: 0.0057 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Average: 0.0135 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Requests/sec: 9.9932
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Total data: &lt;span class="m">1200&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Size/request: &lt;span class="m">4&lt;/span> bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Response &lt;span class="nb">time&lt;/span> histogram:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.006 &lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.015 &lt;span class="o">[&lt;/span>244&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.024 &lt;span class="o">[&lt;/span>38&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>â– â– â– â– â– â– 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.033 &lt;span class="o">[&lt;/span>10&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>â– â– 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.042 &lt;span class="o">[&lt;/span>4&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>â– 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.051 &lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.060 &lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.069 &lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.078 &lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.088 &lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.097 &lt;span class="o">[&lt;/span>2&lt;span class="o">]&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Latency distribution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 10% in 0.0089 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 25% in 0.0101 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 50% in 0.0118 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 75% in 0.0139 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 90% in 0.0173 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 95% in 0.0265 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 99% in 0.0428 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Details &lt;span class="o">(&lt;/span>average, fastest, slowest&lt;span class="o">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DNS+dialup: 0.0000 secs, 0.0057 secs, 0.0967 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DNS-lookup: 0.0000 secs, 0.0000 secs, 0.0000 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> req write: 0.0001 secs, 0.0000 secs, 0.0016 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resp wait: 0.0131 secs, 0.0056 secs, 0.0936 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resp read: 0.0001 secs, 0.0000 secs, 0.0013 secs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status code distribution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>200&lt;span class="o">]&lt;/span> &lt;span class="m">300&lt;/span> responses
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šæ¨¡æ‹Ÿäº†ä¸¤ä¸ªæ´»è·ƒçš„ç”¨æˆ·&lt;code>-c&lt;/code>ï¼Œæ¯ç§’ 5 ä¸ªè¯·æ±‚&lt;code>-q&lt;/code>ï¼ŒæŒç»­æ—¶é—´&lt;code>-z&lt;/code>ä¸º 30 ç§’ã€‚&lt;/p>
&lt;p>è¦ä½¿ç”¨&lt;code>hey&lt;/code>ï¼Œä½ å¿…é¡»åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå®‰è£… Golangã€‚&lt;/p>
&lt;p>ä¹Ÿè¯·å‚è§ã€‚&lt;a class="link" href="https://github.com/rakyll/hey" target="_blank" rel="noopener"
>hey on GitHub&lt;/a>&lt;/p>
&lt;h3 id="å°è¯•ä»é›¶å¼€å§‹æ‰©å±•">å°è¯•ä»é›¶å¼€å§‹æ‰©å±•&lt;/h3>
&lt;p>å¦‚æœä½ æŠŠä½ çš„å‡½æ•°è§„æ¨¡ç¼©å°åˆ° 0 ä¸ªå‰¯æœ¬ï¼Œä½ ä»ç„¶å¯ä»¥è°ƒç”¨å®ƒã€‚è¯¥è°ƒç”¨å°†è§¦å‘ç½‘å…³å°†å‡½æ•°ç¼©æ”¾åˆ°ä¸€ä¸ªéé›¶å€¼ã€‚&lt;/p>
&lt;p>ç”¨ä¸‹é¢çš„å‘½ä»¤è¯•è¯•å§ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">kubectl scale deployment --replicas=0 nodeinfo -n openfaas-fn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰“å¼€ OpenFaaS ç”¨æˆ·ç•Œé¢ï¼Œæ£€æŸ¥ nodeinfo æ˜¯å¦æœ‰ 0 ä¸ªå‰¯æœ¬ï¼Œæˆ–è€…é€šè¿‡`kubectl get deployment nodeinfo -n openfaas-fn&amp;rsquo;ã€‚&lt;/p>
&lt;p>ç°åœ¨è°ƒç”¨è¯¥å‡½æ•°å¹¶æ£€æŸ¥å®ƒæ˜¯å¦æ‰©å±•åˆ° 1 ä¸ªå‰¯æœ¬ã€‚&lt;/p>
&lt;p>ç°åœ¨è½¬åˆ°&lt;a class="link" href="lab10.md" >Lab 10&lt;/a>ã€‚&lt;/p></description></item><item><title>Openfaas Workshop Lab8</title><link>https://example.com/p/openfaas-workshop-lab8/</link><pubDate>Tue, 04 Jan 2022 13:44:05 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab8/</guid><description>&lt;h1 id="lab-8---é«˜çº§å‡½æ•°---è¶…æ—¶">Lab 8 - é«˜çº§å‡½æ•° - è¶…æ—¶&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ mkdir -p lab8 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;amp;&amp;amp; cd lab8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ç”¨read_timeoutæ‰©å±•è¶…æ—¶æ—¶é—´">ç”¨&lt;code>read_timeout&lt;/code>æ‰©å±•è¶…æ—¶æ—¶é—´&lt;/h2>
&lt;p>&lt;em>timeout&lt;/em>å¯¹åº”äºä¸€ä¸ªå‡½æ•°å¯ä»¥è¿è¡Œå¤šé•¿æ—¶é—´ï¼Œç›´åˆ°è¢«æ‰§è¡Œã€‚å®ƒå¯¹é˜²æ­¢åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è¯¯æ“ä½œå¾ˆé‡è¦ã€‚&lt;/p>
&lt;p>æœ‰å‡ ä¸ªåœ°æ–¹å¯ä»¥ä¸ºä½ çš„å‡½æ•°é…ç½®è¶…æ—¶ï¼Œåœ¨æ¯ä¸ªåœ°æ–¹éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥å®Œæˆã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å‡½æ•°è¶…æ—¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>read_timeout&lt;/code> - å…è®¸å‡½æ•°é€šè¿‡ HTTP è¯»å–ä¸€ä¸ªè¯·æ±‚çš„æ—¶é—´&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>write_timeout&lt;/code> - å…è®¸å‡½æ•°åœ¨ HTTP ä¸Šå†™ä¸€ä¸ªå“åº”çš„æ—¶é—´&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>exec_timeout&lt;/code> - ä¸€ä¸ªå‡½æ•°åœ¨è¢«ç»ˆæ­¢å‰å¯ä»¥è¿è¡Œçš„æœ€å¤§æ—¶é—´ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>API ç½‘å…³çš„é»˜è®¤æ—¶é—´æ˜¯ 20 ç§’ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹åœ¨ä¸€ä¸ªå‡½æ•°ä¸Šè®¾ç½®ä¸€ä¸ªæ›´çŸ­çš„è¶…æ—¶æ—¶é—´ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli new --lang python3 sleep-for --prefix=&amp;#34;&amp;lt;your-docker-username-here&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¾‘&lt;code>handler.py&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;handle a request to the function
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Args:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> req (str): request body
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sleep_duration&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sleep_duration&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;10&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">preSleep&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Starting to sleep for &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">sleep_duration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sleep_duration&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># Sleep for a number of seconds&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">postSleep&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Finished the sleep&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">preSleep&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">postSleep&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ç¼–è¾‘&lt;code>sleep-for.yml&lt;/code>æ–‡ä»¶ï¼Œæ·»åŠ è¿™äº›ç¯å¢ƒå˜é‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://127.0.0.1:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">sleep-for&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./sleep-for&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">&amp;lt;your-docker-username-here&amp;gt;/sleep-for:0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">sleep_duration&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">read_timeout&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;5s&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">write_timeout&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;5s&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">exec_timeout&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;5s&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ CLI æ¥æ„å»ºã€æ¨é€ã€éƒ¨ç½²å’Œè°ƒç”¨è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke sleep-for
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server returned unexpected status code: &lt;span class="m">502&lt;/span> -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ åº”è¯¥çœ‹åˆ°å®ƒæ²¡æœ‰æ‰“å°æ¶ˆæ¯å°±ç»ˆæ­¢äº†ï¼Œå› ä¸º&lt;code>sleep_duration&lt;/code>æ¯”è¶…æ—¶å€¼é«˜ã€‚&lt;/p>
&lt;p>ç°åœ¨æŠŠ&lt;code>sleep_duration&lt;/code>è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒä½çš„æ•°å­—ï¼Œå¦‚&lt;code>2&lt;/code>ï¼Œç„¶åå†æ¬¡è¿è¡Œ&lt;code>faas-cli deploy&lt;/code>ã€‚åœ¨ç¼–è¾‘å‡½æ•°çš„ YAML æ–‡ä»¶æ—¶ï¼Œä½ ä¸éœ€è¦é‡å»ºè¿™ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke sleep-for
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Starting to sleep &lt;span class="k">for&lt;/span> &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Finished the sleep
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>API ç½‘å…³&lt;/li>
&lt;/ul>
&lt;p>è¦ä¸ºä½ çš„å‡½æ•°è®¾ç½®è¶…å‡ºé»˜è®¤é™åˆ¶çš„æ‰©å±•è¶…æ—¶ï¼Œè¯·éµå¾ªä»¥ä¸‹æ•™ç¨‹ã€‚&lt;a class="link" href="https://docs.openfaas.com/tutorials/expanded-timeouts/" target="_blank" rel="noopener"
>æ‰©å±•çš„è¶…æ—¶&lt;/a>&lt;/p>
&lt;p>ç°åœ¨è½¬åˆ°&lt;a class="link" href="lab9.md" >å®éªŒå®¤ 9&lt;/a>&lt;/p></description></item><item><title>Openfaas Workshop Lab7</title><link>https://example.com/p/openfaas-workshop-lab7/</link><pubDate>Tue, 04 Jan 2022 13:44:02 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab7/</guid><description>&lt;h1 id="å®éªŒ-7--å¼‚æ­¥å‡½æ•°">å®éªŒ 7&amp;ndash;å¼‚æ­¥å‡½æ•°&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ mkdir -p lab7 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;amp;&amp;amp; cd lab7
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åŒæ­¥ä¸å¼‚æ­¥åœ°è°ƒç”¨ä¸€ä¸ªå‡½æ•°">åŒæ­¥ä¸å¼‚æ­¥åœ°è°ƒç”¨ä¸€ä¸ªå‡½æ•°&lt;/h2>
&lt;p>å½“ä½ åŒæ­¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¸€ä¸ªè¿æ¥ä¼šé€šè¿‡ç½‘å…³è¿æ¥åˆ°ä½ çš„å‡½æ•°ï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­ä¿æŒå¼€æ”¾ã€‚åŒæ­¥è°ƒç”¨æ˜¯*é˜»å¡çš„ï¼Œæ‰€ä»¥ä½ åº”è¯¥çœ‹åˆ°ä½ çš„å®¢æˆ·ç«¯æš‚åœï¼Œå˜å¾—ä¸æ´»è·ƒï¼Œç›´åˆ°è¯¥å‡½æ•°å®Œæˆå…¶ä»»åŠ¡ã€‚&lt;/p>
&lt;ul>
&lt;li>ç½‘å…³ä½¿ç”¨çš„è·¯ç”±æ˜¯ã€‚&lt;code>/function/&amp;lt;function_name&amp;gt;&lt;/code>ã€‚&lt;/li>
&lt;li>ä½ å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°å®ƒå®Œæˆ&lt;/li>
&lt;li>ä½ åœ¨è°ƒç”¨åå¾—åˆ°ç»“æœ&lt;/li>
&lt;li>ä½ çŸ¥é“å®ƒæ˜¯é€šè¿‡è¿˜æ˜¯å¤±è´¥&lt;/li>
&lt;/ul>
&lt;p>å¼‚æ­¥ä»»åŠ¡ä»¥ç±»ä¼¼çš„æ–¹å¼è¿è¡Œï¼Œä½†æœ‰ä¸€äº›åŒºåˆ«ã€‚&lt;/p>
&lt;ul>
&lt;li>ç½‘å…³ä½¿ç”¨ä¸åŒçš„è·¯ç”±ï¼š&lt;code>/async-function/&amp;lt;function_name&amp;gt;&lt;/code>ã€‚&lt;/li>
&lt;li>å®¢æˆ·ç«¯ä»ç½‘å…³å¾—åˆ°ä¸€ä¸ªç«‹å³çš„&lt;em>202 æ¥å—&lt;/em>çš„å“åº”ã€‚&lt;/li>
&lt;li>è¯¥å‡½æ•°ç¨åä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—å·¥ä½œå™¨æ¥è°ƒç”¨&lt;/li>
&lt;li>é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æœè¢«ä¸¢å¼ƒ&lt;/li>
&lt;/ul>
&lt;p>è®©æˆ‘ä»¬è¯•ä¸€è¯•å¿«é€Ÿæ¼”ç¤ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli new --lang dockerfile long-task --prefix=&amp;#34;&amp;lt;your-docker-username-here&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¾‘&lt;code>long-task/Dockerfile&lt;/code>å¹¶å°† fprocess æ”¹ä¸º&lt;code>sleep 1&lt;/code>ã€‚&lt;/p>
&lt;p>ç°åœ¨æ„å»ºã€éƒ¨ç½²å¹¶åŒæ­¥è°ƒç”¨ä½ çš„å‡½æ•° 10 æ¬¡ï¼Œåƒè¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨å¼‚æ­¥è°ƒç”¨è¯¥å‡½æ•° 10 æ¬¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;&amp;#34; | faas-cli invoke long-task --async
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ è§‚å¯Ÿåˆ°äº†ä»€ä¹ˆï¼Ÿç¬¬ä¸€ä¸ªä¾‹å­åº”è¯¥èŠ±äº† 10 ç§’ï¼Œè€Œç¬¬äºŒä¸ªä¾‹å­ä¼šåœ¨ä¸€ç§’æˆ–æ›´çŸ­çš„æ—¶é—´å†…è¿”å›åˆ°ä½ çš„æç¤ºã€‚è¿™é¡¹å·¥ä½œä»ç„¶éœ€è¦ 10x1 ç§’æ¥å®Œæˆï¼Œä½†ç°åœ¨è¦æ”¾åœ¨é˜Ÿåˆ—ä¸­å»¶è¿Ÿæ‰§è¡Œã€‚&lt;/p>
&lt;p>å¼‚æ­¥å‡½æ•°è°ƒç”¨éå¸¸é€‚ç”¨äºé‚£äº›å¯ä»¥æ¨è¿Ÿåˆ°ä»¥åæ‰§è¡Œçš„ä»»åŠ¡ï¼Œæˆ–è€…ä½ ä¸éœ€è¦å®¢æˆ·ç«¯ä¸Šçš„ç»“æœã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯åœ¨æ¥æ”¶ GitHub çš„ webhooks æ—¶&amp;ndash;å¯èƒ½æœ‰ä¸€ä¸ªæœ€å¤§çš„å¤„ç†æ—¶é—´ï¼ŒGitHub ä¼šå…è®¸ä½ çš„è¿æ¥ä¿æŒå¼€æ”¾ï¼Œä¸€ä¸ªå¼‚æ­¥è°ƒç”¨æ¥å—å·¥ä½œå¹¶ç«‹å³è¿”å›ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="æŸ¥çœ‹é˜Ÿåˆ—å·¥ä½œè€…çš„æ—¥å¿—">æŸ¥çœ‹é˜Ÿåˆ—å·¥ä½œè€…çš„æ—¥å¿—&lt;/h2>
&lt;p>OpenFaaS çš„é»˜è®¤æ ˆä½¿ç”¨ NATS æµæ¥æ’é˜Ÿå’Œå»¶è¿Ÿæ‰§è¡Œã€‚ä½ å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ—¥å¿—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">kubectl logs deployment/queue-worker -n openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä½¿ç”¨ä¸€ä¸ªx-callback-urlä¸-requirebin">ä½¿ç”¨ä¸€ä¸ª`X-Callback-Url&amp;rsquo;ä¸ requirebin&lt;/h2>
&lt;p>å¦‚æœä½ éœ€è¦ä¸€ä¸ªå¼‚æ­¥è°ƒç”¨çš„å‡½æ•°çš„ç»“æœï¼Œä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ã€‚&lt;/p>
&lt;ul>
&lt;li>æ”¹å˜å®ƒçš„ä»£ç ï¼Œç”¨å®ƒçš„ç»“æœé€šçŸ¥ä¸€ä¸ªç«¯ç‚¹æˆ–æ¶ˆæ¯ç³»ç»Ÿ&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸ªé€‰é¡¹å¯èƒ½ä¸æ˜¯åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½é€‚ç”¨ï¼Œå¹¶ä¸”éœ€è¦ç¼–å†™é¢å¤–çš„ä»£ç ã€‚&lt;/p>
&lt;ul>
&lt;li>åˆ©ç”¨å›è°ƒçš„å†…ç½®è¡Œä¸º&lt;/li>
&lt;/ul>
&lt;p>å†…ç½®çš„å›è°ƒå…è®¸å¯¹ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨æä¾›ä¸€ä¸ª URLï¼Œé˜Ÿåˆ—å·¥ä½œå™¨å°†è‡ªåŠ¨æŠ¥å‘Šå‡½æ•°çš„æˆåŠŸæˆ–å¤±è´¥ï¼Œä»¥åŠç»“æœã€‚
ä¸€äº›é¢å¤–çš„è¯·æ±‚å¤´è¢«å‘é€åˆ°å›è°ƒï¼Œå®Œæ•´çš„åˆ—è¡¨è§&lt;a class="link" href="https://docs.openfaas.com/reference/async/#callback-request-headers" target="_blank" rel="noopener"
>å›è°ƒè¯·æ±‚å¤´&lt;/a>&lt;/p>
&lt;p>å‰å¾€ requestbin å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code>bin&lt;/code> &amp;ndash;è¿™å°†æ˜¯å…¬å…±äº’è”ç½‘ä¸Šçš„ä¸€ä¸ª URLï¼Œå¯ä»¥æ¥æ”¶ä½ çš„å‡½æ•°çš„ç»“æœã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä¸ºäº†è¿™ä¸ªå®éªŒå®¤çš„ç›®çš„ï¼Œä¸€å®šè¦å–æ¶ˆå‹¾é€‰ &lt;code>ç§æœ‰&lt;/code> å¤é€‰æ¡†ï¼Œè¿™å°†ä½¿ä½ ä¸éœ€è¦ç™»å½•ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a class="link" href="https://requestbin.com/" target="_blank" rel="noopener"
>https://requestbin.com/&lt;/a>&lt;/p>
&lt;p>ç°åœ¨å¤åˆ¶ &amp;ldquo;Bin URL &amp;ldquo;å¹¶å°†å…¶ç²˜è´´åœ¨ä¸‹é¢ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚(&lt;code>http://requestbin.com/r/1i7i1we1&lt;/code>)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">echo -n &amp;#34;LaterIsBetter&amp;#34; | faas-cli invoke figlet --async --header &amp;#34;X-Callback-Url http://requestbin.com/r/1i7i1we1&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨åˆ·æ–° requestbin ç«™ç‚¹ä¸Šçš„é¡µé¢ï¼Œä½ å°†çœ‹åˆ°æ¥è‡ª &lt;code>figlet&lt;/code> çš„ç»“æœã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"> _ _ ___ ____ _ _
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| | __ _| |_ ___ _ _|_ _|___| __ ) ___| |_| |_ ___ _ __
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| | / _` | __/ _ \ &amp;#39;__| |/ __| _ \ / _ \ __| __/ _ \ &amp;#39;__|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| |__| (_| | || __/ | | |\__ \ |_) | __/ |_| || __/ |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">|_____\__,_|\__\___|_| |___|___/____/ \___|\__|\__\___|_|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>å»ºè®®ï¼šä¹Ÿå¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªå‡½æ•°ä½œä¸º &lt;code>X-Callback-Url&lt;/code> &amp;ndash;è¿™å¯¹äºåœ¨å¼‚æ­¥å·¥ä½œè´Ÿè½½è¢«å¤„ç†æ—¶é€šè¿‡ Slack æˆ– Email é€šçŸ¥è‡ªå·±æ˜¯éå¸¸å¥½çš„ã€‚è¦ç”¨ç»“æœè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œå°†&lt;code>X-Callback-Url&lt;/code>è®¾ç½®ä¸º&lt;code>http://gateway:8080/function/&amp;lt;function_name&amp;gt;&lt;/code>ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ç°åœ¨è¿›å…¥&lt;a class="link" href="lab8.md" >å®éªŒå®¤ 8&lt;/a>&lt;/p></description></item><item><title>Openfaas Workshop Lab6</title><link>https://example.com/p/openfaas-workshop-lab6/</link><pubDate>Tue, 04 Jan 2022 13:43:59 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab6/</guid><description>&lt;h1 id="å®éªŒ-6--ä½ çš„å‡½æ•°çš„-html">å®éªŒ 6&amp;ndash;ä½ çš„å‡½æ•°çš„ HTML&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ mkdir -p lab6\
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;amp;&amp;amp; cd lab6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä»ä¸€ä¸ªå‡½æ•°ä¸­ç”Ÿæˆå¹¶è¿”å›åŸºæœ¬çš„-html">ä»ä¸€ä¸ªå‡½æ•°ä¸­ç”Ÿæˆå¹¶è¿”å›åŸºæœ¬çš„ HTML&lt;/h2>
&lt;p>å‡½æ•°å¯ä»¥è¿”å› HTMLï¼Œå¹¶å°†&lt;code>Content-Type&lt;/code>è®¾ç½®ä¸º&lt;code>text/html&lt;/code>ã€‚å› æ­¤ï¼Œå‡½æ•°è¿”å›çš„ HTML å¯ä»¥é€šè¿‡æµè§ˆå™¨è¿›è¡Œæ¸²æŸ“ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œç”Ÿæˆå¹¶è¿”å›ä¸€ä¸ªåŸºæœ¬çš„ HTMLã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli new --lang python3 show-html --prefix=&amp;#34;&amp;lt;your-docker-username-here&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¾‘&lt;code>handler.py&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;handle a request to the function
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Args:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> req (str): request body
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">html&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;html&amp;gt;&amp;lt;h2&amp;gt;Hi, from your function!&amp;lt;/h2&amp;gt;&amp;lt;/html&amp;gt;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°†è¿”å› HTML ç»™è°ƒç”¨è€…ã€‚ è¿˜æœ‰ä¸€ä»¶äº‹æˆ‘ä»¬åº”è¯¥åšçš„æ˜¯è®¾ç½®å“åº”çš„&lt;code>Content-Type'ã€‚æˆ‘ä»¬100%ç¡®å®šè¿™ä¸ªå‡½æ•°å°†è¿”å›ä¸€ä¸ªHTMLï¼Œæ‰€ä»¥&lt;/code>Content-Type&lt;code>åº”è¯¥æ€»æ˜¯&lt;/code>text/html&lt;code>ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨&lt;/code>show-html.yml&lt;code>æ–‡ä»¶ä¸­çš„&lt;/code>environment`éƒ¨åˆ†æ¥è®¾ç½®ã€‚&lt;/p>
&lt;p>ç¼–è¾‘&lt;code>show-html.yml&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://127.0.0.1:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">show-html&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./show-html&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">&amp;lt;your-docker-username-here&amp;gt;/show-html&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">content_type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">text/html&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>environment&lt;/code>ä¸­çš„&lt;code>content_type&lt;/code>é”®å°†è®¾ç½®å“åº”çš„&lt;code>Content-Type&lt;/code>ã€‚&lt;/p>
&lt;p>ç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli up -f show-html.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œä»¥ä¸‹ç¨‹åºä»¥è·å¾—å‡½æ•°çš„ URLã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli describe -f show-html.yml show-html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">URL: http://127.0.0.1:8080/function/show-html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>HTML åº”è¯¥è¢«æ­£ç¡®æ¸²æŸ“ã€‚&lt;/p>
&lt;h2 id="ä»ç£ç›˜ä¸Šè¯»å–å¹¶è¿”å›ä¸€ä¸ªé™æ€çš„-html-æ–‡ä»¶">ä»ç£ç›˜ä¸Šè¯»å–å¹¶è¿”å›ä¸€ä¸ªé™æ€çš„ HTML æ–‡ä»¶&lt;/h2>
&lt;p>ä¸€èˆ¬æ¥è¯´ï¼Œå½“ä½ æä¾› HTML æœåŠ¡æ—¶ï¼Œä½ æœ‰ä¸€ä¸ªé™æ€çš„ HTML æ–‡ä»¶åœ¨å‰é¢ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬å¦‚ä½•åœ¨å‡½æ•°ä¸­æ‰“åŒ… HTML æ–‡ä»¶ï¼Œå¹¶ä» HTML æ–‡ä»¶ä¸­æä¾›å†…å®¹ã€‚&lt;/p>
&lt;p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ã€‚&lt;/p>
&lt;p>åˆ›å»ºä¸€ä¸ªåä¸º&lt;code>html&lt;/code>çš„ç›®å½•ï¼Œå¹¶æ”¾ç½®ä¸€ä¸ªåä¸º&lt;code>new.html&lt;/code>çš„æ–‡ä»¶ï¼Œä½¿å…¶ç»“æ„çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ show-html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ __init__.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ handler.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”‚ â””â”€â”€ new.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ requirements.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ show-html.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Edit &lt;code>new.html&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;en&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;UTF-8&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>OpenFaaS&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Here&amp;#39;s a new page!&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æŠŠä½ çš„&lt;code>handler.py&lt;/code>æ”¹ä¸ºä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;handle a request to the function
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Args:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> req (str): request body
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dirname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="vm">__file__&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;html&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;new.html&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">html&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli up -f show-html.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè®¿é—®&lt;a class="link" href="http://127.0.0.1:8080/function/show-html" target="_blank" rel="noopener"
>http://127.0.0.1:8080/function/show-html&lt;/a>ã€‚ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ª &lt;code>è¿™é‡Œæœ‰ä¸€ä¸ªæ–°çš„é¡µé¢ï¼&lt;/code> åœ¨æµè§ˆå™¨ä¸­å‘ˆç°çš„ HTML é¡µé¢ã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬è¦ä¸ºè¿™ä¸ªå‡½æ•°çš„ URL æ·»åŠ ä¸€ä¸ªè·¯å¾„ã€‚&lt;/p>
&lt;p>åœ¨&lt;code>html&lt;/code>æ–‡ä»¶å¤¹ä¸­æ·»åŠ æ–°çš„&lt;code>list.html&lt;/code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;en&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;UTF-8&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>OpenFaaS&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>This is a list!&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>One&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Two&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Three&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†ä½ çš„&lt;code>handler.py&lt;/code>ç¼–è¾‘æˆä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">environ&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Http_Path&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pathArr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pageName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pathArr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dirname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="vm">__file__&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;html&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pageName&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;.html&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">html&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli up -f show-html.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨åœ¨&lt;a class="link" href="http://127.0.0.1:8080/function/show-html/new" target="_blank" rel="noopener"
>http://127.0.0.1:8080/function/show-html/new&lt;/a> æˆ– &lt;a class="link" href="http://127.0.0.1:8080/function/show-html/list" target="_blank" rel="noopener"
>http://127.0.0.1:8080/function/show-html/list&lt;/a> ä¸Šæ‰“å¼€ä½ çš„ç½‘é¡µã€‚
è¿™å°†è¾“å‡ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Here&amp;#39;s a new page!&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>and&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>This is a list!&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>One&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Two&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Three&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="è¯»å–æŸ¥è¯¢å­—ç¬¦ä¸²å¹¶è¿”å›ä¸åŒçš„-html">è¯»å–æŸ¥è¯¢å­—ç¬¦ä¸²å¹¶è¿”å›ä¸åŒçš„ HTML&lt;/h2>
&lt;p>ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•é€šè¿‡å‡½æ•°æ¥æä¾› HTMLï¼Œè®©æˆ‘ä»¬åŠ¨æ€åœ°æ”¹å˜é€šè¿‡æŸ¥è¯¢å­—ç¬¦ä¸²æä¾›çš„ HTMLã€‚æ­£å¦‚æˆ‘ä»¬åœ¨&lt;a class="link" href="./lab4.md" >å®éªŒå®¤ 4&lt;/a>ä¸­å­¦åˆ°çš„ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡ä¸€ä¸ªå«åš&lt;code>Http_Query&lt;/code>çš„ç¯å¢ƒå˜é‡æ¥æ£€ç´¢ã€‚å‡è®¾æˆ‘ä»¬åšäº†ä¸€ä¸ªçœ‹èµ·æ¥åƒè¿™æ ·çš„æŸ¥è¯¢ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="http://127.0.0.1:8080/function/show-html?action=new" target="_blank" rel="noopener"
>http://127.0.0.1:8080/function/show-html?action=new&lt;/a>&lt;/p>
&lt;p>æŸ¥è¯¢å­—ç¬¦ä¸²æ˜¯&lt;code>action=new&lt;/code>ï¼Œå› æ­¤&lt;code>Http_Query&lt;/code>çš„å€¼å°†æ˜¯&lt;code>action=new&lt;/code>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code>urllib.parse&lt;/code>åŒ…ä¸­çš„&lt;code>parse_qs&lt;/code>å‡½æ•°ï¼Œè½»æ¾è§£æè¿™ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬çš„å‡½æ•°çš„ç›®å½•ç»“æ„çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ show-html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ __init__.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ handler.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”‚ â”œâ”€â”€ list.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”‚ â””â”€â”€ new.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ requirements.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ show-html.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ”¹å˜ä½ çš„&lt;code>handler.py&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">urllib.parse&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">parse_qs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;handle a request to the function
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Args:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> req (str): request body
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">query&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">environ&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;Http_Query&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">params&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">parse_qs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">action&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">params&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;action&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dirname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="vm">__file__&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dirname&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;html&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">action&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;.html&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">html&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli up -f show-html.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œé¦–å…ˆè®¿é—®ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="http://127.0.0.1:8080/function/show-html?action=new" target="_blank" rel="noopener"
>http://127.0.0.1:8080/function/show-html?action=new&lt;/a>&lt;/p>
&lt;p>ä½ åº”è¯¥çœ‹åˆ° &lt;code>è¿™é‡Œæœ‰ä¸€ä¸ªæ–°çš„é¡µé¢ï¼&lt;/code>å°±åƒä½ åœ¨ä¸Šä¸€èŠ‚çœ‹åˆ°çš„é‚£æ ·ã€‚ç°åœ¨è®¿é—®ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="http://127.0.0.1:8080/function/show-html?action=list" target="_blank" rel="noopener"
>http://127.0.0.1:8080/function/show-html?action=list&lt;/a>&lt;/p>
&lt;p>ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ªæ˜¾ç¤ºåˆ—è¡¨çš„ HTMLã€‚&lt;/p>
&lt;h2 id="ä¸å…¶ä»–å‡½æ•°åä½œ">ä¸å…¶ä»–å‡½æ•°åä½œ&lt;/h2>
&lt;p>æœ€åï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åˆ©ç”¨ JavaScript å’Œ Ajax çš„ä¼˜åŠ¿ï¼Œä» HTML å‡½æ•°ä¸­ä¸å¦ä¸€ä¸ªå‡½æ•°ï¼ˆä¾‹å¦‚&lt;em>figlet&lt;/em>å‡½æ•°ï¼‰åä½œã€‚&lt;/p>
&lt;p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªåä¸º&lt;code>figlet.html&lt;/code>çš„ HTML æ–‡ä»¶ã€‚æ‰€ä»¥ç°åœ¨çš„ç»“æ„åº”è¯¥æ˜¯è¿™æ ·çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ show-html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ __init__.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ handler.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”‚ â”œâ”€â”€ figlet.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”‚ â”œâ”€â”€ list.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”‚ â””â”€â”€ new.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ requirements.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ show-html.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¼–è¾‘&lt;code>figlet.html&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;en&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#39;UTF-8&amp;#39;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>OpenFaaS&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://code.jquery.com/jquery-3.3.1.min.js&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">integrity&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">crossorigin&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;anonymous&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">result&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">font-family&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;Roboto Mono&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">monospace&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Figlet&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Text: &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">button&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;generate&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Generate&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">button&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">textarea&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;result&amp;#34;&lt;/span> &lt;span class="na">cols&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;80&amp;#34;&lt;/span> &lt;span class="na">rows&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;10&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">textarea&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text/javascript&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Generate button click
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#generate&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">on&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;click&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Execute ajax request
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ajax&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s1">&amp;#39;./figlet&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s1">&amp;#39;POST&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#text&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">done&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ajax success
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.result&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">fail&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ajax failure
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.result&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ä¸å¤ªäº†è§£ JavaScriptï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚è¿™ä¸ªé¡µé¢æ‰€åšçš„å°±æ˜¯ã€‚&lt;/p>
&lt;ul>
&lt;li>åœ¨ &lt;code>input&lt;/code>ä¸­è¾“å…¥æ–‡å­—
*æŒ‰ä¸‹ &lt;code>ç”Ÿæˆ&lt;/code>æŒ‰é’®&lt;/li>
&lt;li>åˆ›å»ºä¸€ä¸ª Ajax è¯·æ±‚åˆ°&lt;em>figlet&lt;/em>å‡½æ•°ç«¯ç‚¹ï¼ˆ&lt;code>/function/figlet&lt;/code>ï¼‰ã€‚&lt;/li>
&lt;li>å°†ç»“æœåº”ç”¨åˆ° &lt;code>textarea&lt;/code> ä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ²¡æœ‰å¿…è¦æ”¹å˜&lt;code>handler.py&lt;/code>ï¼Œå› ä¸ºå®ƒå¯ä»¥åŠ¨æ€åœ°æä¾›ä¸Šä¸€èŠ‚ä¸­çš„ HTMLã€‚å°½ç®¡æ²¡æœ‰æ”¹å˜&lt;code>handler.py&lt;/code>ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦æ„å»ºå’Œæ¨é€å‡½æ•°é•œåƒï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°å®¹å™¨ä¸­æ‰“åŒ…æ–°çš„&lt;code>figlet.html&lt;/code>ã€‚&lt;/p>
&lt;p>ç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¿™ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli up -f show-html.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ¬èŠ‚å‡è®¾ä½ å·²ç»éƒ¨ç½²äº†&lt;a class="link" href="./lab2.md" >å®éªŒå®¤ 2&lt;/a>ä¸­çš„&lt;em>figlet&lt;/em>å‡½æ•°ã€‚&lt;/p>
&lt;p>æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œé¦–å…ˆè®¿é—®ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="http://127.0.0.1:8080/function/show-html?action=figlet" target="_blank" rel="noopener"
>http://127.0.0.1:8080/function/show-html?action=figlet&lt;/a>&lt;/p>
&lt;p>ä½ åº”è¯¥çœ‹åˆ° &lt;code>Figlet&lt;/code> é¡µé¢ï¼Œå¹¶ä¸”åº”è¯¥çœ‹åˆ°ä¸€ä¸ªè¾“å…¥ã€‚è¾“å…¥ä»»ä½•ä½ æƒ³è¾“å…¥çš„æ–‡æœ¬ï¼Œç„¶åç‚¹å‡» &lt;code>ç”Ÿæˆ&lt;/code> æŒ‰é’®ã€‚å¦‚æœè¯·æ±‚æˆåŠŸï¼Œ&lt;code>textarea&lt;/code> åº”è¯¥åŒ…å«ä½ åœ¨ &lt;code>input&lt;/code> ä¸­è¾“å…¥çš„ figletã€‚è¿™æ˜¯ä¸€ä¸ªå¾®ä¸è¶³é“çš„ä¾‹å­ï¼Œä½†é€šè¿‡ä½¿ç”¨è¿™ç§æŠ€æœ¯ï¼Œä½ ç”šè‡³å¯ä»¥ç”¨å‡½æ•°åˆ›å»ºå¼ºå¤§çš„ SPAï¼ˆå•é¡µåº”ç”¨ç¨‹åºï¼‰ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ï¼Œä½ å­¦åˆ°äº†å¦‚ä½•ä»ä½ çš„å‡½æ•°ä¸­æä¾› HTMLï¼Œå¹¶è®¾ç½®å“åº”çš„&lt;code>Content-Type&lt;/code>ã€‚æ­¤å¤–ï¼Œä½ è¿˜å­¦ä¼šäº†å¦‚ä½•ç”¨ HTML+JavaScript è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œä»¥åŠç”¨å‡½æ•°åˆ›å»ºåŠ¨æ€é¡µé¢ã€‚&lt;/p>
&lt;p>ç°åœ¨è¿›å…¥&lt;a class="link" href="lab7.md" >å®éªŒå®¤ 7&lt;/a>&lt;/p></description></item><item><title>Openfaas Workshop Lab5</title><link>https://example.com/p/openfaas-workshop-lab5/</link><pubDate>Tue, 04 Jan 2022 13:43:56 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab5/</guid><description>&lt;h1 id="lab-5---åˆ›å»ºä¸€ä¸ª-github-æœºå™¨äºº">Lab 5 - åˆ›å»ºä¸€ä¸ª GitHub æœºå™¨äºº&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ mkdir -p lab5&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> lab5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å°†ä½¿ç”¨ OpenFaaS çš„å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåä¸º &lt;code>issue-bot&lt;/code>çš„ GitHub æœºå™¨äººã€‚&lt;/p>
&lt;p>é—®é¢˜æœºå™¨äººçš„å·¥ä½œæ˜¯é€šè¿‡åˆ†æ &lt;code>æè¿°&lt;/code> å­—æ®µçš„æƒ…ç»ªæ¥åˆ†æµæ–°çš„é—®é¢˜ï¼Œç„¶åå®ƒå°†åº”ç”¨ä¸€ä¸ª&lt;em>ç§¯æ&lt;/em>æˆ–&lt;em>å®¡æŸ¥&lt;/em>çš„æ ‡ç­¾ã€‚è¿™å°†æœ‰åŠ©äºç»´æŠ¤è€…åœ¨ç¹å¿™çš„å·¥ä½œä¸­ï¼Œå¯ä»¥ä¼˜å…ˆè€ƒè™‘å“ªäº›é—®é¢˜éœ€è¦é¦–å…ˆå¤„ç†ã€‚&lt;/p>
&lt;p>é—®é¢˜æœºå™¨äººçš„å›¾ç¤º](./diagram/issue-bot.png)&lt;/p>
&lt;h2 id="è·å–ä¸€ä¸ª-github-è´¦æˆ·">è·å–ä¸€ä¸ª GitHub è´¦æˆ·&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>æ³¨å†Œä¸€ä¸ª&lt;a class="link" href="https://github.com" target="_blank" rel="noopener"
>GitHub è´¦æˆ·&lt;/a>ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰ä¸€ä¸ªè´¦æˆ·ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œå¹¶å°†å…¶ç§°ä¸º&lt;em>bot-test&lt;/em>ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>æ³¨æ„ï¼šæˆ‘ä»¬å°†åªä½¿ç”¨è¿™ä¸ªä»“åº“ä½œä¸ºåˆ›å»ºé—®é¢˜çš„æµ‹è¯•åœºæ‰€ã€‚ä½ ä¸éœ€è¦åœ¨é‚£é‡Œæäº¤ä»»ä½•ä»£ç ã€‚&lt;/p>
&lt;h2 id="å»ºç«‹ä¸€ä¸ªå¸¦æœ‰å…¥å£çš„éš§é“">å»ºç«‹ä¸€ä¸ªå¸¦æœ‰å…¥å£çš„éš§é“&lt;/h2>
&lt;p>ä½ éœ€è¦æ¥æ”¶æ¥è‡ª GitHub çš„ webhooksã€‚å¹¸è¿çš„æ˜¯ï¼Œinlets è®©è¿™ä¸€åˆ‡å˜å¾—éå¸¸å¿«é€Ÿå’Œç®€å•ã€‚å®ƒå¯ä»¥æŒ‰æœˆæˆ–æŒ‰å¹´è®¢é˜…ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸ç¡®å®šæ˜¯å¦å…¨å¹´éƒ½éœ€è¦å®ƒï¼Œä½ å¯ä»¥åªä»˜ä¸€ä¸ªæœˆçš„é’±ã€‚&lt;/p>
&lt;p>inlets æœ‰ä¸€ä¸ªå«åš inlets-operator çš„ Kubernetes é›†æˆã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®¾ç½® LoadBalancers æˆ–å¸¦æœ‰ TLS çš„ Ingressã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯ä¸ºä½ åˆ›å»ºä¸€ä¸ªäº‘è™šæ‹Ÿæœºï¼Œå¹¶åœ¨é‚£é‡Œè¿è¡Œä¸€ä¸ªéš§é“æœåŠ¡å™¨ï¼Œç„¶åä¸ºä½ è¿è¡Œä¸€ä¸ªéš§é“å®¢æˆ·ç«¯ä½œä¸ºä¸€ä¸ª Podï¼Œä½ å°±å¯ä»¥è·å¾—ä¼ å…¥æµé‡ã€‚&lt;/p>
&lt;p>åœ¨ä½ å–œæ¬¢çš„äº‘æä¾›å•†ï¼ˆå¦‚ DigitalOceanï¼‰çš„ API é¡µé¢ä¸‹åˆ›å»ºä¸€ä¸ªå†™å…¥è®¿é—®ä»¤ç‰Œï¼Œç„¶åå°†å†…å®¹ä¿å­˜åˆ°&lt;code>digital-ocean-api-token.txt&lt;/code>ã€‚&lt;/p>
&lt;p>è®¾ç½®å®Œè®¢é˜…åï¼Œå°†ä½ çš„å¯†é’¥ä¿å­˜åˆ°&lt;code>$HOME/.inlets/LICENSE&lt;/code>ï¼Œç„¶åè¿è¡Œä»¥ä¸‹ç¨‹åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">arkade install inlets-operator &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --provider digitalocean &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --region lon1 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --token-file &lt;span class="nv">$HOME&lt;/span>/digital-ocean-api-token.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°†éƒ¨ç½² inlets-operatorï¼Œå¹¶æŒ‡ç¤ºå®ƒåœ¨ DigitalOcean ä¸Šä¸ºä½ çš„éš§é“æœåŠ¡å™¨é…ç½®æ–°çš„ä¸»æœºåˆ°ä¼¦æ•¦åœ°åŒºã€‚å…¶ä»–ä¾›åº”å•†å’Œåœ°åŒºä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œ&lt;a class="link" href="https://docs.inlets.dev/reference/inlets-operator/" target="_blank" rel="noopener"
>æ›´å¤šä¿¡æ¯è¯·è§æ–‡æ¡£&lt;/a>ã€‚&lt;/p>
&lt;h2 id="ç”¨ç½‘å…³çš„å…¬å…±-ip-ç™»å½•ä½ çš„ç½‘å…³">ç”¨ç½‘å…³çš„å…¬å…± IP ç™»å½•ä½ çš„ç½‘å…³&lt;/h2>
&lt;p>ç”¨ä¿¡æ¯æ£€ç´¢ä½ çš„ç½‘å…³å¯†ç ï¼Œä»ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">arkade info openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>LoadBalancer çš„å…¬å…± IP å¤§çº¦éœ€è¦ 10-30 ç§’æ‰èƒ½å‡ºç°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">kubectl get svc -n openfaas gateway-external
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gateway-external LoadBalancer 10.96.29.46 &amp;lt;pending&amp;gt; 8080:32278/TCP 5h56m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gateway-external LoadBalancer 10.96.29.46 165.227.233.227 8080:32278/TCP 5h56m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæŠŠå®ƒä¿å­˜åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OPENFAAS_URL&lt;/span>&lt;span class="o">=&lt;/span>http://165.227.233.227:8080
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨ç»™ä½ çš„å¯†ç ç™»å½•åˆ°å…¬å…± IPã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$PASSWORD&lt;/span> &lt;span class="p">|&lt;/span> faas-cli login --password-stdin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åæµ‹è¯•è¿œç¨‹ URLï¼Œå¦‚&lt;a class="link" href="http://165.227.233.227:8080" target="_blank" rel="noopener"
>http://165.227.233.227:8080&lt;/a>&lt;/p>
&lt;p>ä½ å¯ä»¥é€šè¿‡è®¾ç½®&lt;code>OPENFAAS_URL&lt;/code>ç¯å¢ƒå˜é‡æˆ–ä½¿ç”¨&lt;code>--gateway&lt;/code>æ ‡å¿—æ¥å¯¹è¿œç¨‹ç½‘å…³è¿è¡Œå‘½ä»¤ã€‚&lt;/p>
&lt;p>å¦‚æœä½ æƒ³ç”¨ TLS è¯ä¹¦å’Œè‡ªå®šä¹‰åŸŸåæ¥æš´éœ² OpenFaaSï¼Œä½ å¯ä»¥æŒ‰ç…§è¿™äº›è¯´æ˜æ¥ä»£æ›¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">arkade install ingress-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arkade install cert-manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arkade install openfaas
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arkade install openfaas-ingress &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --email web@example.com &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --domain openfaas.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶ååˆ›å»ºä¸€ä¸ª DNS A è®°å½•ï¼ŒæŒ‡å‘ ingress-nginx çš„ IP åœ°å€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">kubectl get svc ingress-nginx-controller
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx-controller LoadBalancer 10.96.179.20 &amp;lt;pending&amp;gt; 80:30319/TCP,443:31591/TCP 20s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx-controller LoadBalancer 10.96.179.20 209.97.135.63 80:30319/TCP,443:31591/TCP 52s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ å¯ä»¥ä¸º&lt;code>https://openfaas.example.com&lt;/code>æä¾›ä¸€ä¸ªè‡ªå®šä¹‰çš„ TLS è®°å½•ã€‚&lt;/p>
&lt;h2 id="åˆ›å»ºä¸€ä¸ª-webhook-æ¥æ”¶å™¨issue-bot">åˆ›å»ºä¸€ä¸ª webhook æ¥æ”¶å™¨&lt;code>issue-bot&lt;/code>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OPENFAAS_PREFIX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;docker.io/your-username&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ faas-cli new --lang python3 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> issue-bot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ç¼–è¾‘è¯¥å‡½æ•°çš„ YAML æ–‡ä»¶&lt;code>issue-bot.yml&lt;/code>å¹¶æ·»åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡&lt;code>write_debug: true&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://127.0.0.1:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">issue-bot&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./issue-bot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">docker.io/your-username/issue-bot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">write_debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ï¼Œä½¿ç”¨&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">faas-cli up -f ./issue-bot.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä»-github-æ¥æ”¶-webhooks">ä» GitHub æ¥æ”¶ webhooks&lt;/h2>
&lt;p>é‡æ–°ç™»å½• GitHub å¹¶å¯¼èˆªåˆ°ä½ çš„ä»“åº“&lt;em>bot-tester&lt;/em>ã€‚&lt;/p>
&lt;p>ç‚¹å‡» &lt;em>è®¾ç½®&lt;/em> -&amp;gt; &lt;em>Webhooks&lt;/em> -&amp;gt; &lt;em>æ·»åŠ  Webhook&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://example.com/../../screenshot/add_github_webhook.png"
loading="lazy"
alt="æ·»åŠ ç½‘ç»œé’©å­"
>&lt;/p>
&lt;p>ç°åœ¨è¾“å…¥ä½ ä» inlets æˆ–ä½ çš„è‡ªå®šä¹‰åŸŸä¸­å¾—åˆ°çš„ URLï¼Œåœ¨æœ€ååŠ ä¸Š&lt;code>/function/issue-bot&lt;/code>ï¼Œä¾‹å¦‚ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">https://openfaas.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://example.com/../../screenshot/issue-bot-webhook.png"
loading="lazy"
alt="æ·»åŠ webhook"
>&lt;/p>
&lt;p>å¯¹äº&lt;em>Content-type&lt;/em>é€‰æ‹©ã€‚&lt;em>application/json&lt;/em>&lt;/p>
&lt;p>æš‚æ—¶å°†&lt;em>Secret&lt;/em>ç•™ç©ºã€‚&lt;/p>
&lt;p>å¹¶é€‰æ‹© &lt;code>è®©æˆ‘é€‰æ‹©ä¸ªåˆ«äº‹ä»¶&lt;/code>&lt;/p>
&lt;p>å¯¹äºäº‹ä»¶é€‰æ‹©&lt;strong>äº‹ä»¶&lt;/strong>å’Œ&lt;strong>äº‹ä»¶è¯„è®º&lt;/strong>ã€‚&lt;/p>
&lt;p>ï¼&lt;a class="link" href="../../screenshot/WebhookEventsSettings.png" >è®¾ç½®äº‹ä»¶&lt;/a>&lt;/p>
&lt;h2 id="æ£€æŸ¥å®ƒæ˜¯å¦æœ‰æ•ˆ">æ£€æŸ¥å®ƒæ˜¯å¦æœ‰æ•ˆ&lt;/h2>
&lt;p>ç°åœ¨å» GitHubï¼Œåˆ›å»ºä¸€ä¸ªæ–°é—®é¢˜ã€‚åœ¨æ ‡é¢˜å’Œæè¿°ä¸­è¾“å…¥ &lt;code>test&lt;/code>ã€‚&lt;/p>
&lt;p>æ£€æŸ¥è¯¥å‡½æ•°è¢«è°ƒç”¨äº†å¤šå°‘æ¬¡&amp;ndash;è¿™ä¸ªæ•°å­—è‡³å°‘åº”è¯¥æ˜¯&lt;code>1&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ faas-cli list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Function Invocations
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">issue-bot &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¯æ¬¡ä½ åˆ›å»ºä¸€ä¸ªé—®é¢˜ï¼Œç”±äº GitHub çš„ API è°ƒç”¨äº†è¯¥å‡½æ•°ï¼Œè®¡æ•°ä¼šå¢åŠ ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é€šè¿‡è¾“å…¥&lt;code>docker service logs -f issue-bot&lt;/code>ï¼ˆæˆ–&lt;code>kubectl logs deployment/issue-bot -n openfaas-fn&lt;/code>ï¼‰çœ‹åˆ°é€šè¿‡ GitHub å‘é€çš„æœ‰æ•ˆè½½è·ã€‚&lt;/p>
&lt;p>GitHub çš„ Webhooks é¡µé¢ä¹Ÿä¼šåœ¨ &lt;code>Recent Deliveries&lt;/code>ä¸‹æ˜¾ç¤ºæ¯æ¡å‘é€çš„æ¶ˆæ¯ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œé‡æ”¾ä¸€æ¡æ¶ˆæ¯ï¼Œçœ‹çœ‹ä½ çš„å‡½æ•°è¿”å›çš„å“åº”ã€‚&lt;/p>
&lt;p>&lt;img src="https://example.com/../../screenshot/github_replay.png"
loading="lazy"
alt="Replaying an event"
>&lt;/p>
&lt;h3 id="éƒ¨ç½²-sentimentanalysis-å‡½æ•°">éƒ¨ç½² SentimentAnalysis å‡½æ•°&lt;/h3>
&lt;p>ä¸ºäº†ä½¿ç”¨è¿™ä¸ª issue-bot å‡½æ•°ï¼Œä½ å°†éœ€è¦é¦–å…ˆéƒ¨ç½² SentimentAnalysis å‡½æ•°ã€‚
è¿™æ˜¯ä¸€ä¸ª python å‡½æ•°ï¼Œä¸ºé€šè¿‡ TextBlob é¡¹ç›®è¾“å…¥çš„æ¯ä¸ªå¥å­æä¾›æ­£/è´Ÿï¼ˆææ€§-1.0-1.0ï¼‰å’Œä¸»è§‚æ€§çš„è¯„çº§ã€‚&lt;/p>
&lt;p>å¦‚æœä½ åœ¨&lt;a class="link" href="./lab4.md" >Lab 4&lt;/a>ä¸­æ²¡æœ‰è¿™æ ·åšï¼Œä½ å¯ä»¥ä»&lt;strong>å‡½æ•°å•†åº—&lt;/strong>éƒ¨ç½² &lt;code>SentimentAnalysis&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> -n &lt;span class="s2">&amp;#34;I am really excited to participate in the OpenFaaS workshop.&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke sentimentanalysis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Polarity: 0.375 Subjectivity: 0.75
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> -n &lt;span class="s2">&amp;#34;The hotel was clean, but the area was terrible&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke sentimentanalysis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Polarity: -0.316666666667 Subjectivity: 0.85
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ›´æ–°issue-botå‡½æ•°">æ›´æ–°&lt;code>issue-bot&lt;/code>å‡½æ•°&lt;/h3>
&lt;p>æ‰“å¼€&lt;code>issue-bot/handler.py&lt;/code>ï¼Œç”¨è¿™æ®µä»£ç æ›¿æ¢æ¨¡æ¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">requests&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">json&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">os&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">sys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">event_header&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Http_X_Github_Event&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">event_header&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;issues&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Unable to handle X-GitHub-Event: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">event_header&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gateway_hostname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;gateway_hostname&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;gateway.openfaas&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">payload&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;action&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;opened&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#sentimentanalysis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;http://&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">gateway_hostname&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;:8080/function/sentimentanalysis&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;issue&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;issue&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;body&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Error with sentimentanalysis, expected: &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">, got: &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨ HTTP/HTTPs çš„è¯·æ±‚æ¨¡å—æ›´æ–°ä½ çš„&lt;code>requirements.txt&lt;/code>æ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">requests
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨&lt;code>issue-bot.yml&lt;/code>æ–‡ä»¶ä¸­æ·»åŠ &lt;code>gateway_hostname&lt;/code>ç¯å¢ƒå˜é‡ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸º&lt;code>gateway.openfaas&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environment:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gateway_hostname: &amp;#34;gateway.openfaas&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šé¢ä»£ç ä¸­çš„ä¸‹é¢ä¸€è¡Œå°† GitHub é—®é¢˜çš„æ ‡é¢˜å’Œæ­£æ–‡ä½œä¸ºæ–‡æœ¬å‘å¸ƒç»™&lt;code>sentimentanalysis&lt;/code>å‡½æ•°ã€‚å“åº”å°†æ˜¯ JSON æ ¼å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;http://&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">gateway_hostname&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;:8080/function/sentimentanalysis&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;issue&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;issue&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;body&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>æ„å»ºå’Œéƒ¨ç½²&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ CLI æ¥æ„å»ºå’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli up -f issue-bot.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨åœ¨&lt;code>bot-test&lt;/code>ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªæ–°é—®é¢˜ã€‚GitHub å°†é€šè¿‡æˆ‘ä»¬ä¹‹å‰é…ç½®çš„ Inlets éš§é“å‘ä½ çš„å‡½æ•°å‘é€ä¸€ä¸ª JSON æœ‰æ•ˆè½½è·ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥åœ¨ GitHub ä¸Šç›´æ¥æŸ¥çœ‹è¯·æ±‚/å“åº”&amp;ndash;å¯¼èˆªåˆ°&lt;em>Settings&lt;/em> -&amp;gt; &lt;em>Webhook&lt;/em>ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://example.com/../../screenshot/WebhookResponse.png"
loading="lazy"
>&lt;/p>
&lt;h2 id="å›å¤åˆ°-github">å›å¤åˆ° GitHub&lt;/h2>
&lt;p>ä¸‹ä¸€æ­¥æ˜¯è®©æˆ‘ä»¬è´´ä¸Š &lt;code>æ­£é¢&lt;/code> æˆ– &lt;code>è¯„è®º&lt;/code> çš„æ ‡ç­¾ï¼Œä½†ç”±äºè¿™ä¸ªåŠ¨ä½œæ¶‰åŠåˆ°å‘ä»“åº“å†™å…¥å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦ä» GitHub è·å¾—ä¸€ä¸ª&lt;em>ä¸ªäººè®¿é—®ä»¤ç‰Œ&lt;/em>ã€‚&lt;/p>
&lt;h3 id="ä¸º-github-åˆ›å»ºä¸€ä¸ªä¸ªäººè®¿é—®ä»¤ç‰Œ">ä¸º GitHub åˆ›å»ºä¸€ä¸ªä¸ªäººè®¿é—®ä»¤ç‰Œ&lt;/h3>
&lt;p>è¿›å…¥ä½ çš„&lt;em>GitHub é…ç½®æ–‡ä»¶&lt;/em> -&amp;gt; &lt;em>è®¾ç½®/å¼€å‘è€…è®¾ç½®&lt;/em> -&amp;gt; &lt;em>ä¸ªäººè®¿é—®ä»¤ç‰Œ&lt;/em>ï¼Œç„¶åç‚¹å‡»&lt;em>ç”Ÿæˆæ–°ä»¤ç‰Œ&lt;/em>ã€‚&lt;/p>
&lt;p>&lt;img src="https://example.com/../../screenshot/PersonalAccessTokens.png"
loading="lazy"
>&lt;/p>
&lt;p>å‹¾é€‰ &lt;code>repo&lt;/code>çš„æ–¹æ¡†ï¼Œå…è®¸è®¿é—®ä½ çš„å­˜å‚¨åº“&lt;/p>
&lt;p>&lt;img src="https://example.com/../../screenshot/NewPAT.png"
loading="lazy"
>&lt;/p>
&lt;p>ç‚¹å‡»é¡µé¢åº•éƒ¨çš„ &lt;code>Generate Token&lt;/code>æŒ‰é’®&lt;/p>
&lt;p>åœ¨ä½ çš„&lt;code>issue-bot.yml&lt;/code>æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º&lt;code>env.yml&lt;/code>çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">auth_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">&amp;lt;auth_token_value&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨ GitHub ä¸Šçš„ä»¤ç‰Œæ›´æ–°&lt;code>auth_token&lt;/code>å˜é‡ã€‚&lt;/p>
&lt;p>ç°åœ¨æ›´æ–°ä½ çš„ issue-bot.yml æ–‡ä»¶ï¼Œå‘Šè¯‰å®ƒä½¿ç”¨&lt;code>env.yml&lt;/code>æ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://127.0.0.1:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">issue-bot&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./issue-bot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">&amp;lt;your-username&amp;gt;/issue-bot&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">write_debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway_hostname&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;gateway.openfaas&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">positive_threshold&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0.25&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment_file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">env.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;code>positive_threshold&lt;/code>ç¯å¢ƒå˜é‡ç”¨äºå¾®è°ƒä¸€ä¸ªé—®é¢˜æ˜¯å¦è·å¾—&lt;code>positive&lt;/code>æˆ–&lt;code>review&lt;/code>æ ‡ç­¾ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä»»ä½•æ•æ„Ÿä¿¡æ¯éƒ½ä¼šè¢«æ”¾åœ¨ä¸€ä¸ªå¤–éƒ¨æ–‡ä»¶ä¸­ï¼ˆå³&lt;code>env.yml&lt;/code>ï¼‰ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥è¢«åŒ…å«åœ¨&lt;code>.gitignore&lt;/code>æ–‡ä»¶ä¸­ï¼Œè¿™å°†æœ‰åŠ©äºé˜²æ­¢è¿™äº›ä¿¡æ¯è¢«å­˜å‚¨åœ¨å…¬å…±çš„ Git ä»“åº“ä¸­ã€‚&lt;/p>
&lt;p>OpenFaaS ä¹Ÿæ”¯æŒä½¿ç”¨åŸç”Ÿçš„ Docker å’Œ Kubernetes çš„ç§˜å¯†ï¼Œè¯¦æƒ…è¯·è§&lt;a class="link" href="lab10.md" >Lab 10&lt;/a>&lt;/p>
&lt;h3 id="é€šè¿‡-github-çš„-api-åº”ç”¨æ ‡ç­¾">é€šè¿‡ GitHub çš„ API åº”ç”¨æ ‡ç­¾&lt;/h3>
&lt;p>ä½ å¯ä»¥ä½¿ç”¨ API æ¥æ‰§è¡Œè®¸å¤šä¸åŒçš„ä»»åŠ¡ï¼Œ&lt;a class="link" href="https://github.com/PyGithub/PyGithub" target="_blank" rel="noopener"
>æ–‡æ¡£åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°&lt;/a>ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ª Python ä»£ç çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥åº”ç”¨æ ‡ç­¾ï¼Œä½†ä½ å…ˆä¸è¦æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„å‡½æ•°ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">issue_number&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">repo_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;alexellis/issue_bot&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">auth_token&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;xyz&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">g&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Github&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">auth_token&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">repo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">g&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_repo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">repo_name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">issue&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">repo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_issue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">issue_number&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªç”¨äº GitHub çš„åº“æ˜¯ç”±ç¤¾åŒºæä¾›çš„ï¼Œä¸æ˜¯å®˜æ–¹çš„ï¼Œä½†ä¼¼ä¹å¾ˆå—æ¬¢è¿ã€‚å®ƒå¯ä»¥é€šè¿‡æˆ‘ä»¬çš„&lt;code>requirements.txt&lt;/code>æ–‡ä»¶ä»&lt;code>pip&lt;/code>è°ƒå…¥ã€‚&lt;/p>
&lt;h2 id="å®Œæˆå‡½æ•°">å®Œæˆå‡½æ•°&lt;/h2>
&lt;ul>
&lt;li>æ›´æ–°ä½ çš„&lt;code>issue-bot/requirements.txt&lt;/code>æ–‡ä»¶ï¼Œä¸º&lt;code>PyGithub&lt;/code>æ·»åŠ ä¸€è¡Œå†…å®¹&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">requests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PyGithub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>æ‰“å¼€&lt;code>issue-bot/handler.py&lt;/code>ï¼Œå°†ä»£ç æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">requests&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">json&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">os&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">sys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">github&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Github&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">event_header&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Http_X_Github_Event&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">event_header&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;issues&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Unable to handle X-GitHub-Event: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">event_header&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gateway_hostname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;gateway_hostname&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;gateway.openfaas&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">payload&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;action&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;opened&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Action not supported: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;action&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Call sentimentanalysis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;http://&amp;#39;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">gateway_hostname&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;:8080/function/sentimentanalysis&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;issue&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;issue&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;body&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Error with sentimentanalysis, expected: &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">, got: &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Read the positive_threshold from configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">positive_threshold&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;positive_threshold&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;0.2&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">polarity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">()[&lt;/span>&lt;span class="s1">&amp;#39;polarity&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Call back to GitHub to apply a label&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apply_label&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">polarity&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;issue&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;number&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;repository&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;full_name&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">positive_threshold&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;Repo: &lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">, issue: &lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">, polarity: &lt;/span>&lt;span class="si">%f&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;repository&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;full_name&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">payload&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;issue&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;number&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">polarity&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">apply_label&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">polarity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">issue_number&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">repo&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">positive_threshold&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">g&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Github&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;auth_token&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">repo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">g&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_repo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">repo&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">issue&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">repo&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_issue&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">issue_number&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">has_label_positive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">has_label_review&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">label&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">issue&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">labels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">label&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;positive&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">has_label_positive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">label&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;review&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">has_label_review&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">polarity&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">positive_threshold&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">has_label_positive&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">issue&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_labels&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;positive&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">has_label_review&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">issue&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_labels&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;review&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æºä»£ç ä¹Ÿå¯åœ¨&lt;a class="link" href="./issue-bot/bot-handler/handler.py" >issue-bot/bot-handler/handler.py&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>æ„å»ºå’Œéƒ¨ç½²&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ CLI æ¥æ„å»ºå’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli up -f issue-bot.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨é€šè¿‡åœ¨&lt;code>bot-test&lt;/code>ä»“åº“ä¸­åˆ›å»ºä¸€äº›æ–°çš„é—®é¢˜æ¥è¯•è¯•ã€‚æ£€æŸ¥ &lt;code>æ­£é¢&lt;/code>å’Œ &lt;code>è¯„è®º&lt;/code>æ ‡ç­¾æ˜¯å¦è¢«æ­£ç¡®åº”ç”¨ï¼Œå¦‚æœä½ ä¸ç¡®å®šä¿¡æ¯æ˜¯å¦è¢«ä¼ é€’æˆ–æ€€ç–‘æœ‰é”™è¯¯è¢«æŠ›å‡ºï¼Œè¯·æŸ¥é˜… GitHub Webhooks é¡µé¢ã€‚&lt;/p>
&lt;p>&lt;img src="https://example.com/../../screenshot/bot_label_applied.png"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šå¦‚æœæ ‡ç­¾æ²¡æœ‰ç«‹å³å‡ºç°ï¼Œè¯·å…ˆå°è¯•åˆ·æ–°é¡µé¢ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="ç”¨-hmac-éªŒè¯æœ‰æ•ˆè½½è·">ç”¨ HMAC éªŒè¯æœ‰æ•ˆè½½è·&lt;/h2>
&lt;p>åœ¨&lt;a class="link" href="lab11.md" >Lab 11&lt;/a>ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•é€šè¿‡ä½¿ç”¨ HMAC ä¿æŠ¤æ— æœåŠ¡å™¨å‡½æ•°ä¸è¢«ç¯¡æ”¹ã€‚&lt;/p>
&lt;p>ç°åœ¨è½¬åˆ°&lt;a class="link" href="lab6.md" >Lab 6&lt;/a>ã€‚&lt;/p></description></item><item><title>Blockchain æ•°æ®ç»“æ„åˆ†æ</title><link>https://example.com/p/blockchain-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/</link><pubDate>Tue, 04 Jan 2022 10:04:05 +0800</pubDate><guid>https://example.com/p/blockchain-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90/</guid><description>&lt;h1 id="åŒºå—">åŒºå—&lt;/h1>
&lt;p>æƒ³è¦äº†è§£åŒºå—åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæœ€ç®€å•å¿«æ·çš„æ–¹æ³•å°±æ˜¯åˆ†æå®ƒçš„æ•°æ®ç»“æ„ï¼Œä»¥ bitcoin ç§çš„åŒºå—ä¸ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;hash&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;00000000000000000018b0a6ae560fa33c469b6528bc9e0fb0c669319a186c33&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;confirmations&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1009&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;strippedsize&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">956228&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;size&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1112639&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;weight&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3981323&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;height&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">514095&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">536870912&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;versionHex&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;20000000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;merkleroot&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;5f8f8e053fd4c0c3175c10ac5189c15e6ba218909319850936fe54934dcbfeac&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;tx&amp;#34;&lt;/span>&lt;span class="p">:[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€ &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>ã€€ã€€&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1521380124&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;mediantime&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1521377506&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;nonce&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3001236454&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;bits&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;17514a49&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;difficulty&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3462542391191.563&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;chainwork&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0000000000000000000000000000000000000000014d2b41a340e60b72292430&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;previousblockhash&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;000000000000000000481ab128418847dc25db4dafec464baa5a33e66490990b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ã€€ã€€&lt;span class="nt">&amp;#34;nextblockhash&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0000000000000000000c74966205813839ad1c6d55d75f95c9c5f821db9c3510&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ª Block çš„ç»“æ„ä½“ä¸­ï¼Œpreviousblockhash å’Œ merkleroot æ˜¯ä¸¤ä¸ªæœ€é‡è¦çš„å­—æ®µï¼›å‰è€…æ˜¯ä¸€ä¸ªå“ˆå¸ŒæŒ‡é’ˆï¼Œå®ƒå…¶å®æ˜¯å‰ä¸€ä¸ª Block çš„å“ˆå¸Œï¼Œé€šè¿‡ previousblockhash æˆ‘ä»¬èƒ½é€’å½’åœ°æ‰¾åˆ°å…¨éƒ¨çš„ Blockï¼Œä¹Ÿå°±æ˜¯æ•´æ¡ä¸»é“¾ï¼Œåè€…æ˜¯ä¸€ä¸ª Merkle æ ‘çš„æ ¹ï¼ŒMerkle æ ‘ä¸­åŒ…å«æ•´ä¸ª Block ä¸­çš„å…¨éƒ¨äº¤æ˜“ï¼Œé€šè¿‡ä¿å­˜ merklerootï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯å½“å‰ Block ä¸­ä»»æ„äº¤æ˜“éƒ½ä¸ä¼šè¢«ä¿®æ”¹ã€‚
Ethereum çš„åŒºå—é“¾æ¨¡å‹è™½ç„¶ä¸ Bitcoin æœ‰éå¸¸å¤§çš„ä¸åŒï¼Œä½†æ˜¯å®ƒçš„ Block ç»“æ„ä¸­ä¹Ÿæœ‰ç€ç±»ä¼¼çš„ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;jsonrpc&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;2.0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;result&amp;#34;&lt;/span>&lt;span class="p">:{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;author&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x00d8ae40d9a06d0e7a2877b62e32eb959afbe16d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;difficulty&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x785042b0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;extraData&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x414952412f7630&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gasLimit&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x47b784&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gasUsed&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x44218a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hash&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x4de91e4af8d135e061d50ddd6d0d6f4119cd0f7062ebe8ff2d79c5af0e8344b9&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logsBloom&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;miner&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x00d8ae40d9a06d0e7a2877b62e32eb959afbe16d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mixHash&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0xb8155224974967443d8b83e484402fb6e1e18ff69a8fc5acdda32f2bcc6dd443&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nonce&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0xad14fb6803147c7c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;number&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x2000f1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;parentHash&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x31919e2bf29306778f50bbc376bd490a7d056ddfd5b1f615752e79f32c7f1a38&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;receiptsRoot&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0xa2a7af5e3b9e1bbb6252ba82a09302321b8f0eea7ec8e3bb977401e4f473e672&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sealFields&amp;#34;&lt;/span>&lt;span class="p">:[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;0xa0b8155224974967443d8b83e484402fb6e1e18ff69a8fc5acdda32f2bcc6dd443&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;0x88ad14fb6803147c7c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sha3Uncles&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;size&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x276&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stateRoot&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x87e7e54cf229003014f453d64f0344e2ba4fc7ee3b95c7dd2642cca389fa1efe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timestamp&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x5a10968a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;totalDifficulty&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0x1804de0c47ffe1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;transactions&amp;#34;&lt;/span>&lt;span class="p">:[&lt;/span>&lt;span class="err">...&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;transactionsRoot&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;0xc2091b032961ca23cf8323ea827e8956fe6dda9e68d75bcfaa8b910035397e35&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uncles&amp;#34;&lt;/span>&lt;span class="p">:[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>parentHash å’Œ transactionsRoot åˆ†åˆ«å¯¹åº”ç€ Bitcoin ä¸­ previousblockhash å’Œ merklerootï¼Œè¿™ä¸¤è€…åœ¨æ•´ä¸ªåŒºå—é“¾ç½‘ç»œä¸­æ˜¯éå¸¸é‡è¦çš„ã€‚&lt;/p>
&lt;h1 id="å“ˆå¸ŒæŒ‡é’ˆ">å“ˆå¸ŒæŒ‡é’ˆ&lt;/h1>
&lt;p>Block ç»“æ„ä½“ä¸­çš„å“ˆå¸ŒæŒ‡é’ˆåœ¨åŒºå—é“¾ä¸­æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œå®ƒä¸ä»…èƒ½å¤Ÿè¿æ¥ä¸åŒçš„åŒºå—ï¼Œè¿˜èƒ½å¤Ÿå¯¹ Block è¿›è¡ŒéªŒè¯ï¼Œä¿è¯ Block ä¸­çš„æ•°æ®ä¸ä¼šè¢«å…¶ä»–æ¶æ„èŠ‚ç‚¹ç¯¡æ”¹ã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201041009607.png"
loading="lazy"
>&lt;/p>
&lt;p>é™¤äº†ç¬¬ä¸€ä¸ª Blockï¼Œæ¯ä¸€ä¸ª Block ä¸­çš„ prev_hash éƒ½æ˜¯å‰ä¸€ä¸ª Block çš„å“ˆå¸Œï¼Œå¦‚æœæŸä¸€ä¸ªèŠ‚ç‚¹æƒ³è¦ä¿®æ”¹ä¸»é“¾ä¸Š Block çš„äº¤æ˜“ï¼Œå°±ä¼šæ”¹å˜å½“å‰ Block çš„å“ˆå¸Œï¼Œåé¢çš„ Block å°±æ²¡æœ‰åŠæ³•é€šè¿‡ prev_hash æ‰¾åˆ°å‰é¢çš„é“¾ï¼Œæ‰€ä»¥å½“å‰èŠ‚ç‚¹ç¯¡æ”¹äº¤æ˜“çš„è¡Œä¸ºå°±ä¼šè¢«å…¶ä»–èŠ‚ç‚¹å‘ç°ã€‚&lt;/p>
&lt;h1 id="merkle-tree">Merkle Tree&lt;/h1>
&lt;p>å¦ä¸€ä¸ªå­—æ®µ merkleroot å…¶å®å°±æ˜¯ä¸€ä¸ª Merkle æ ‘ çš„æ ¹èŠ‚ç‚¹ï¼Œå®ƒå…¶å®æ˜¯ä¸€ç§ä½¿ç”¨å“ˆå¸ŒæŒ‡é’ˆè¿æ¥çš„æ•°æ®ç»“æ„ï¼›è™½ç„¶ Merkle æ ‘æœ‰å¶èŠ‚ç‚¹å’Œéå¶èŠ‚ç‚¹ï¼Œä½†æ˜¯å®ƒåªæœ‰å¶èŠ‚ç‚¹ä¼šå­˜å‚¨æ•°æ®ï¼Œæ‰€æœ‰çš„éå¶ç»“ç‚¹éƒ½æ˜¯ç”¨äºéªŒè¯æ•°æ®å®Œæ•´æ€§çš„å“ˆå¸Œã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202201041010801.png"
loading="lazy"
>&lt;/p>
&lt;p>æ¯ä¸€ä¸ª Block ä¸­çš„å…¨éƒ¨äº¤æ˜“éƒ½æ˜¯å­˜å‚¨åœ¨è¿™ä¸ª Merkle æ ‘ä¸­å¹¶å°† merkleroot ä¿å­˜åœ¨ Block çš„ç»“æ„ä½“ä¸­ï¼Œä¿è¯å½“å‰ Block ä¸­ä»»æ„äº¤æ˜“çš„ç¯¡æ”¹éƒ½èƒ½è¢«ç«‹åˆ»å‘ç°ã€‚&lt;/p>
&lt;h1 id="æ€»ç»“">æ€»ç»“&lt;/h1>
&lt;p>prev_hash å’Œ merkleroot åˆ†åˆ«é€šè¿‡ã€æŒ‡é’ˆã€çš„æ–¹å¼ä¿è¯æ‰€æœ‰çš„ Block å’Œäº¤æ˜“éƒ½æ˜¯è¿æ¥èµ·æ¥çš„ï¼Œæœ€ç»ˆä¿è¯ Block å’Œäº¤æ˜“ä¸ä¼šè¢«æ¶æ„èŠ‚ç‚¹æˆ–æ”»å‡»è€…ç¯¡æ”¹ï¼Œå‡ ä¹å…¨éƒ¨çš„åŒºå—é“¾é¡¹ç›®éƒ½ä¼šä½¿ç”¨ç±»ä¼¼æ–¹å¼è¿æ¥ä¸åŒçš„ Block å’Œäº¤æ˜“ï¼Œè¿™å¯ä»¥è¯´æ˜¯åŒºå—é“¾é¡¹ç›®çš„åŸºç¡€è®¾æ–½å’Œæ ‡é…äº†ã€‚&lt;/p></description></item><item><title>è½»æœåŠ¡ nodejs åŠ©åŠ›çˆ¬è™« web3</title><link>https://example.com/p/%E8%BD%BB%E6%9C%8D%E5%8A%A1-nodejs-%E5%8A%A9%E5%8A%9B%E7%88%AC%E8%99%AB-web3/</link><pubDate>Mon, 20 Dec 2021 09:58:58 +0800</pubDate><guid>https://example.com/p/%E8%BD%BB%E6%9C%8D%E5%8A%A1-nodejs-%E5%8A%A9%E5%8A%9B%E7%88%AC%E8%99%AB-web3/</guid><description>&lt;p>å‘¨æœ«çš„æ—¶å€™ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„å°é¡¹ç›®ï¼Œç”¨æ¥æŠ“å– web3 çš„æ–‡ç« ï¼Œç„¶åå­˜åˆ°æœ¬åœ°ã€‚æœ€åé€‰å–äº†å…¬å¸å¯¹å¤–çš„è½»æœåŠ¡ï¼š&lt;a class="link" href="https://qingfuwu.cn/docs/nodejs/" target="_blank" rel="noopener"
>https://qingfuwu.cn/docs/nodejs/&lt;/a>&lt;/p>
&lt;p>æ•´é¡¹ç›®ç”¨åˆ°äº†ä¸¤ä¸ªåº“&lt;/p>
&lt;ul>
&lt;li>axiosï¼šç”¨æ¥åš http è¯·æ±‚&lt;/li>
&lt;li>cheerioï¼šç”¨æ¥è§£æ html&lt;/li>
&lt;/ul>
&lt;h1 id="è§‚å¯Ÿç›®æ ‡ç½‘é¡µçš„æ ¼å¼">è§‚å¯Ÿç›®æ ‡ç½‘é¡µçš„æ ¼å¼&lt;/h1>
&lt;p>æˆ‘ä»¬ä»¥å·´æ¯”ç‰¹ä¸ºä¾‹ï¼š&lt;a class="link" href="https://www.8btc.com/web3.0" target="_blank" rel="noopener"
>https://www.8btc.com/web3.0&lt;/a>ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œå®šä½åˆ°æ­£æ–‡çš„ divï¼Œå¯ä»¥å‘ç°æ˜¯ article-listã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202112201024700.png"
loading="lazy"
>&lt;/p>
&lt;p>å³é”®å¤åˆ¶ä¸€ä¸‹ selectorï¼Œç„¶ååœ¨ä»£ç ä¸­è¿™æ ·å®ç°å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;h1 id="æŠ“å–ç½‘é¡µä¿¡æ¯">æŠ“å–ç½‘é¡µä¿¡æ¯&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">cheerio&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;cheerio&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="k">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">axios&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;axios&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="k">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">axios&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;https://www.8btc.com/web3.0&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">headers&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="s1">&amp;#39;User-Agent&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36&amp;#39;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})).&lt;/span>&lt;span class="nx">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">$&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cheerio&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#news &amp;gt; div.articles-list&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.article-info&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">each&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">elem&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">href&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">elem&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&amp;gt; a&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">attr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;href&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">elem&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&amp;gt; a &amp;gt; h3&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">text&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">desc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">elem&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&amp;gt; div &amp;gt; p&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">text&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">href&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="sb">`https://www.8btc.com&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">href&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">desc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ä¿å­˜æ•°æ®åˆ°è½»æœåŠ¡çš„æ•°æ®ç®¡ç†ä¸­">ä¿å­˜æ•°æ®åˆ°è½»æœåŠ¡çš„æ•°æ®ç®¡ç†ä¸­&lt;/h1>
&lt;p>åœ¨è½»æœåŠ¡ä¸­åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œç„¶åæ–°å¢å‡ åˆ—ã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202112201027520.png"
loading="lazy"
>&lt;/p>
&lt;p>ç„¶åè°ƒç”¨å†…ç½®çš„ inspirecloud.db è¿›è¡Œæ“ä½œæ•°æ®åº“ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">inspirecloud&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">db&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">table&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;web3&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">item&lt;/span> &lt;span class="k">of&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">one&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">where&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">title&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">findOne&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">one&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">one&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb"> å·²ç»å­˜åœ¨`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="è®¾ç½®å®šæ—¶ä»»åŠ¡">è®¾ç½®å®šæ—¶ä»»åŠ¡&lt;/h1>
&lt;p>æœ€åæˆ‘ä»¬æŠŠä»£ç è¡¥å……å®Œæ•´ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * @param params è°ƒç”¨å‚æ•°ï¼ŒHTTP è¯·æ±‚ä¸‹ä¸ºè¯·æ±‚ä½“
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * @param context è°ƒç”¨ä¸Šä¸‹æ–‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * @return å‡½æ•°çš„è¿”å›æ•°æ®ï¼ŒHTTP åœºæ™¯ä¸‹ä¼šä½œä¸º Response Body
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * å®Œæ•´ä¿¡æ¯å¯å‚è€ƒï¼š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * https://qingfuwu.cn/docs/cloud-function/basic.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">cheerio&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;cheerio&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="k">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">axios&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;axios&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="k">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">axios&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;https://www.8btc.com/web3.0&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">headers&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="s1">&amp;#39;User-Agent&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36&amp;#39;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})).&lt;/span>&lt;span class="nx">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">$&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cheerio&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#news &amp;gt; div.articles-list&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.article-info&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">each&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">elem&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">href&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">elem&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&amp;gt; a&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">attr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;href&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">elem&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&amp;gt; a &amp;gt; h3&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">text&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">desc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">elem&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&amp;gt; div &amp;gt; p&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">text&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">href&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="sb">`https://www.8btc.com&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">href&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">desc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">list&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">inspirecloud&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">db&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">table&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;web3&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">item&lt;/span> &lt;span class="k">of&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">one&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">where&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">title&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">item&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">title&lt;/span> &lt;span class="p">}).&lt;/span>&lt;span class="nx">findOne&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">one&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">one&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb"> å·²ç»å­˜åœ¨`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">table&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exports&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">params&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">params&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">test&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Hello World!&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨å·¦ä¾§çš„å®šæ—¶ä»»åŠ¡ä¸­å»åˆ›å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©æ‰§è¡Œä¸€æ¬¡å³å¯ã€‚&lt;/p>
&lt;p>&lt;img src="https://raw.githubusercontent.com/zhenfeng-zhu/pic-go/main/202112201029440.png"
loading="lazy"
>&lt;/p></description></item><item><title>Crystal Roadmap</title><link>https://example.com/p/crystal-roadmap/</link><pubDate>Thu, 28 Oct 2021 10:11:41 +0800</pubDate><guid>https://example.com/p/crystal-roadmap/</guid><description>&lt;p>This roadmap defines the things that we want to have in the language and plan to do.&lt;/p>
&lt;h2 id="language">Language&lt;/h2>
&lt;p>Stuff that has to do with the language syntax, semantic and runtime.&lt;/p>
&lt;h3 id="concurrency">Concurrency&lt;/h3>
&lt;p>Finalize multithreading support, so fibers can run on multiple threads.&lt;/p>
&lt;h3 id="windows-support">Windows support&lt;/h3>
&lt;p>Finalize support for Windows platform. The compiler already works, but some stdlib features like concurrency support are still missing.
Ongoing efforts on &lt;a class="link" href="https://github.com/crystal-lang/crystal/pull/5430" target="_blank" rel="noopener"
>#5430&lt;/a>.&lt;/p>
&lt;h3 id="type-system-review">Type system review&lt;/h3>
&lt;p>Make a review and possible formalisation of Crystal&amp;rsquo;s type system, with a strong emphasis on generics, type restrictions and the meta-model in general.&lt;/p>
&lt;h3 id="macros-review">Macros review&lt;/h3>
&lt;p>Review the macros intermediate language, to allow for more expressiveness and to provide the compilers with hints with regards to reusing previous runs for incremental compilation.&lt;/p>
&lt;h3 id="exceptions-review">Exceptions review&lt;/h3>
&lt;p>Review the exception layout and hierarchy to allow developers to catch more specific errors, and get more information on what exactly went wrong via variables inside the exception.&lt;/p>
&lt;h3 id="incremental-compilation">Incremental compilation&lt;/h3>
&lt;p>Allow the compiler to re-use information from previous compilations, by defining dependencies between files/modules and only reprocessing changed ones. This feature also opens the door for better IDE integration and tooling.&lt;/p>
&lt;h2 id="standard-library">Standard library&lt;/h2>
&lt;p>Implement the missing or review the existing following modules from the standard library:&lt;/p>
&lt;ul>
&lt;li>TLS library&lt;/li>
&lt;li>File, FileUtils&lt;/li>
&lt;li>HTTP/2 &lt;a class="link" href="https://github.com/crystal-lang/crystal/issues/2125" target="_blank" rel="noopener"
>#2125&lt;/a>&lt;/li>
&lt;li>XML&lt;/li>
&lt;li>Test mocks&lt;/li>
&lt;/ul>
&lt;h2 id="tools">Tools&lt;/h2>
&lt;p>Improvements or developments on either built-in or external tools for the language.&lt;/p>
&lt;h3 id="documentation">Documentation&lt;/h3>
&lt;p>Improve not only the documentation itself, but the docs generator as well. Add support for links between documents from different packages, alternate READMEs for the docs, better searching options, and easier docs hosting options.&lt;/p>
&lt;h3 id="shards">Shards&lt;/h3>
&lt;p>Improve Crystal&amp;rsquo;s dependency manager for better dependencies version resolution, provide further metadata on the project, support registering executable tasks, better handling of transitive dependencies, and more. Implement centralised discovery of Crystal shards, sorted by category, and including support for the latest versions of the language, as reported by a CI.&lt;/p>
&lt;h3 id="playground">Playground&lt;/h3>
&lt;p>Improve Crystal&amp;rsquo;s playground by adding shards&amp;rsquo; workbooks to explore the usage of the project&amp;rsquo;s registered dependencies, and other features to discuss.&lt;/p>
&lt;h3 id="ide-support">IDE support&lt;/h3>
&lt;p>Make use of Crystal&amp;rsquo;s compile-time type information to develop better IDE tools, such as in-place documentation, autocomplete or refactoring tools.&lt;/p></description></item><item><title>Crystal 1.2 ç‰ˆæœ¬æ›´æ–°è¯´æ˜</title><link>https://example.com/p/crystal-1.2-%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E8%AF%B4%E6%98%8E/</link><pubDate>Sun, 17 Oct 2021 23:08:51 +0800</pubDate><guid>https://example.com/p/crystal-1.2-%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%E8%AF%B4%E6%98%8E/</guid><description>&lt;h1 id="crystal-120-å‘å¸ƒ">Crystal 1.2.0 å‘å¸ƒ&lt;/h1>
&lt;p>æˆ‘ä»¬æ­£åœ¨å‘å¸ƒä¸€ä¸ªåŒ…å«å¤šä¸ªé”™è¯¯ä¿®å¤å’Œæ”¹è¿›çš„æ–°ç‰ˆæœ¬ã€‚ä¸‹é¢æˆ‘ä»¬åˆ—å‡ºäº†æœ€é‡è¦æˆ–æœ€æœ‰è¶£çš„å˜åŒ–ï¼Œä½†æ²¡æœ‰æåˆ°å‡ ä¸ªé”™è¯¯ä¿®æ­£ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·è®¿é—®å‘è¡Œè¯´æ˜ã€‚é‡å¤§æ›´æ”¹æ ‡æœ‰ âš ï¸ã€‚&lt;/p>
&lt;h2 id="ç»Ÿè®¡æ•°æ®">ç»Ÿè®¡æ•°æ®&lt;/h2>
&lt;p>åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬åŒ…å«äº†è‡ª 1.1.1 ç‰ˆæœ¬ä»¥æ¥ 32 ä½è´¡çŒ®è€…çš„ 181 ä¸ª PRã€‚æˆ‘ä»¬æ„Ÿè°¢ä¸ºæ”¹è¿›è¯­è¨€åŠå…¶æ ‡å‡†åº“æ‰€åšçš„æ‰€æœ‰åŠªåŠ›ï¼â¤ï¸&lt;/p>
&lt;h2 id="å¹³å°æ”¯æŒ">å¹³å°æ”¯æŒ&lt;/h2>
&lt;p>æ­£å¦‚åœ¨ 1.2 çš„ä¸Šä¸€ç¯‡åšå®¢æ–‡ç« ä¸­æåˆ°çš„ï¼Œæˆ‘ä»¬å†³å®šé™ä½å¯¹ 32 ä½ x86 æ¶æ„çš„æ”¯æŒã€‚ä½†æ˜¯æˆ‘ä»¬ç¡®å®æœ‰ä¸€äº›å¥½æ¶ˆæ¯è¦åˆ†äº«ï¼&lt;/p>
&lt;p>æˆ‘ä»¬åœ¨åŸç”Ÿ Windows æ”¯æŒæ–¹é¢å–å¾—äº†è¿›å±•ï¼Œåœ¨æ­¤ç‰ˆæœ¬ä¸­åŒ…æ‹¬å¥—æ¥å­—å®ç°ï¼ˆ#11205ã€#11137ã€#10605ã€#10605ï¼‰ã€‚&lt;/p>
&lt;p>ä¸ Windows ç›¸å…³ï¼Œä¹Ÿä¸ ARM64 æ¶æ„ç›¸å…³ï¼Œæˆ‘ä»¬ä¿®å¤äº†ä¸€ä¸ªé‡è¦çš„ä»£ç ç”Ÿæˆé”™è¯¯ã€‚æˆ‘ä»¬ç°åœ¨å¤„äºå°† aarch64 å¹³å°æå‡åˆ° Tier 1 çš„æ¡ä»¶ï¼Œé¢„è®¡å¾ˆå¿«å°±ä¼šæ”¯æŒã€‚è¿™ä¹Ÿä¸å¸¦æœ‰ M1 èŠ¯ç‰‡ç»„çš„ macOS ç›¸å…³ï¼šä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œæˆ‘ä»¬åŒ…å«ä¸€ä¸ªé€‚ç”¨äº x86 å’Œ M1 mac çš„é€šç”¨ macOS åŒ…ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å‘ç° Windows å’Œ M1 çš„ mac ä¸Šå‡ºç°çš„ä¸¤ä¸ªé”™è¯¯æ¥è‡ª LLVM 11 å’Œ 12ã€‚æˆ‘ä»¬é¢„è®¡è¯¥ä¿®å¤å°†éšæœ€è¿‘å‘å¸ƒçš„ LLVM 13 ä¸€èµ·æä¾›ã€‚Crystal 1.2.0 ä¸ LLVM 12 å…¼å®¹ï¼Œå°½ç®¡æˆ‘ä»¬å»ºè®®ä¸è¦ä½¿ç”¨ LLVM 11 å’Œ 12.&lt;/p>
&lt;h2 id="è¯­è¨€å˜åŒ–">è¯­è¨€å˜åŒ–&lt;/h2>
&lt;p>ç°åœ¨å¯ä»¥å°†æ³›å‹ç±»çš„å­ç±»åˆ†é…ç»™çˆ¶ç±»çš„å®ä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-crystal" data-lang="crystal">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Foo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nc">T&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Bar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nc">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">Foo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Foo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Bar&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿä¸æ³›å‹ç±»æœ‰å…³ï¼Œæœ‰äº›æƒ…å†µä¸‹ç¼–è¯‘å™¨æ²¡æœ‰æ­£ç¡®æ›¿æ¢æ³›å‹å‚æ•°ï¼ˆ#11166ã€#11067ã€‚&lt;/p>
&lt;p>ä¸ºæ”¯æŒ ThinLTO æ±‡ç¼–è¢«ä¸¢å¼ƒï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰åœ¨ crystal 0.25 ä¸‹å¯ç”¨ã€‚&lt;/p>
&lt;h2 id="å®">å®&lt;/h2>
&lt;p>å¯ä»¥åœ¨ for å¾ªç¯ä¸­æ·»åŠ ä¸‹åˆ’çº¿æ¥å¿½ç•¥å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œmap çš„ key è¢«å¿½ç•¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-crystal" data-lang="crystal">&lt;span class="line">&lt;span class="cl">&lt;span class="si">{%&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="si">%}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">p&lt;/span> &lt;span class="si">{{&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="si">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="si">{%&lt;/span> &lt;span class="k">end&lt;/span> &lt;span class="si">%}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–°çš„ file_exists?å®æ–¹æ³•æ¥æ£€æŸ¥æ–‡ä»¶çš„å­˜åœ¨ï¼ˆ#10540ï¼‰ï¼Œ#is_a?ç°åœ¨å¯ä»¥è¯†åˆ« AST èŠ‚ç‚¹å±‚æ¬¡ç»“æ„ï¼ˆ#11062ï¼‰ã€‚&lt;/p>
&lt;h2 id="æ ‡å‡†åº“">æ ‡å‡†åº“&lt;/h2>
&lt;p>âš ï¸ æˆ‘ä»¬æ­£åœ¨å»¶ç»­ 1.1.0 ç‰ˆæœ¬å¼€å§‹çš„è¶‹åŠ¿ï¼Œå¸®åŠ©è·å¾—æ›´å¥½çš„é”™è¯¯ä¿¡æ¯å’Œæ–‡æ¡£ï¼šå¯¹ä¸€äº›æ–¹æ³•ä½¿ç”¨é¢„æœŸç±»å‹è¿›è¡Œäº†æ³¨é‡Šã€‚æ·»åŠ æ³¨é‡Šå¯èƒ½ä¼šåœ¨ç‰¹å®šæƒ…å†µä¸‹ç ´åç°æœ‰ä»£ç ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨é‡åˆ°è¿™ç§æƒ…å†µï¼Œè¯·ç«‹å³å‘Šè¯‰æˆ‘ä»¬ã€‚&lt;/p>
&lt;h3 id="æ•°å€¼ç±»å‹">æ•°å€¼ç±»å‹&lt;/h3>
&lt;p>æ•°å€¼ç±»å‹çš„ä¸»è¦æ”¹è¿›æ˜¯æ”¯æŒ 128 ä½æ•´æ•°ï¼ˆ#11206 å’Œ#11245ï¼‰æ‰€é‡‡å–çš„æ­¥éª¤ã€‚&lt;/p>
&lt;p>ä½œä¸ºå¾®å°çš„æ”¹è¿›ï¼Œç°åœ¨å¯ä»¥è°ƒæ•´ Int#to_s è¾“å‡ºçš„ç²¾åº¦ï¼›é€šè¿‡æ–°æ–¹æ³•#next_float å’Œ#prev_float è¿­ä»£å¯è¡¨ç¤ºçš„æµ®ç‚¹æ•°é›†ï¼›å¯¹ BigDecimal ä½¿ç”¨è´ŸæŒ‡æ•°ï¼›å¹¶è®¡ç®—ä¸€ä¸ªæ•°çš„æ•´æ•°å¹³æ–¹æ ¹ã€‚&lt;/p>
&lt;h3 id="é›†åˆ">é›†åˆ&lt;/h3>
&lt;p>å¯å˜é›†åˆç°åœ¨åŒ…å«ä¸€ä¸ª Indexable::Mutable(T)æ¨¡å—ï¼Œå®ƒæå¤§åœ°æ‰©å±•äº†å¯¹æŸäº›é›†åˆï¼ˆä¾‹å¦‚ BitArray å’Œ ï¼‰çš„æ“ä½œé›† Dequeã€‚ä»¥ä¸‹ç°åœ¨æœ‰æ•ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-crystal" data-lang="crystal">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ba&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">BitArray&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># ba is BitArray[0000000000]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ba&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1"># ba is BitArray[1000000000]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ba&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rotate!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># ba is BitArray[0100000000]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­¤å¤–ï¼ŒIndexable::Mutable(T)æ‰©å±•ä¸ºåŒ…æ‹¬ç¨³å®šå’Œä¸ç¨³å®šçš„æ’åºæ–¹æ³•ï¼ˆ#11254ã€#11029ã€#10163ï¼‰ã€‚é»˜è®¤ sort æ“ä½œç°åœ¨è°ƒç”¨ç¨³å®šç®—æ³•ã€‚&lt;/p>
&lt;p>âš ï¸ ä½œä¸ºä¸€é¡¹é‡å¤§æ›´æ”¹ï¼ŒArray#product å·²å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ–°çš„æ³›å‹å’Œæ›´å¥½å‘½åçš„ Indexable#cartesian_product.&lt;/p>
&lt;p>å¦å¤–ä¸¤ä¸ªå€¼å¾—ä¸€æçš„è´¡çŒ®ï¼šå¯æšä¸¾å¯¹è±¡é…å¤‡äº†å°†å®ƒä»¬ä¸ç»™å®šè°“è¯ï¼ˆEnumerable#tally_byï¼‰ç›¸åŒ¹é…çš„æ–¹æ³•ï¼›å’Œæ–¹æ³• Array#transpose, Enumerable#reject, å’Œ Enumerable#to_h ç°åœ¨ä½¿ç”¨å…ƒç»„ã€‚&lt;/p>
&lt;h3 id="æ–‡ä»¶">æ–‡ä»¶&lt;/h3>
&lt;p>âš ï¸ è¯¥æ–¹æ³• IO#write_utf8 å·²è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ›´å…·æè¿°æ€§çš„ name IO#write_stringï¼Œå› ä¸ºæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥ç¼–å†™å„ç§ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå…·ä½“å–å†³äº IO çš„é…ç½®ã€‚æˆ‘ä»¬è¿˜ä¿®å¤äº†ä¸€äº›ä¸ä½¿ç”¨ IO#write è€Œä¸æ˜¯ IO#write_string å°†æ–‡æœ¬é™„åŠ åˆ° IO ç›¸å…³çš„é”™è¯¯ã€‚&lt;/p>
&lt;h3 id="ç½‘ç»œ">ç½‘ç»œ&lt;/h3>
&lt;p>âš ï¸ ä¸ºäº†æé«˜ STDLIB çš„å®‰å…¨æ€§ï¼ŒURI.encode è¢«å¼ƒç”¨ URI.encode_path å’Œ URI.encode_path_segment ã€‚&lt;/p>
&lt;p>ç°åœ¨æ”¯æŒä» websockets ( #10854 ) ä¸­çš„ URI è·å–åŸºæœ¬èº«ä»½éªŒè¯ï¼Œå¹¶æ­£ç¡®å¤„ç† cookie ( #10564 )çš„ max-age å’Œ expires ã€‚&lt;/p>
&lt;h3 id="æ–‡æœ¬">æ–‡æœ¬&lt;/h3>
&lt;p>âš ï¸String#unsafe_byte_at å·²è¢«å¼ƒç”¨ï¼Œå› ä¸º String å·²ç»æœ‰ä¸€ä¸ª#to_unsafe æ–¹æ³•ã€‚&lt;/p>
&lt;p>Crystal ç°åœ¨æ”¯æŒ Unicode 14.0.0ã€‚&lt;/p>
&lt;h3 id="åºåˆ—åŒ–">åºåˆ—åŒ–&lt;/h3>
&lt;p>æœ‰ä¸€ç§æ–°æ–¹æ³• XML::Node#namespace_definition å¯ä»¥è·å–èŠ‚ç‚¹çš„æ˜ç¡®å®šä¹‰çš„ XML å‘½åç©ºé—´ï¼ŒURI ç°åœ¨å¯ä»¥å°† URI åºåˆ—åŒ–ä¸º JSON å’Œ YAMLã€‚&lt;/p>
&lt;h2 id="å·¥å…·æ–°çš„æ–‡æ¡£ç”Ÿæˆå™¨">å·¥å…·ï¼šæ–°çš„æ–‡æ¡£ç”Ÿæˆå™¨&lt;/h2>
&lt;p>API æ–‡æ¡£ç°åœ¨ä½¿ç”¨ markd æ¥å‘ˆç° Markdown ( #11040 )ã€‚è¿™å°±è§£å†³äº†å†…éƒ¨æ¸²æŸ“å™¨å®ç°å¸¦æ¥çš„ç¼ºç‚¹ã€‚&lt;/p>
&lt;h2 id="åŸºç¡€è®¾æ–½">åŸºç¡€è®¾æ–½&lt;/h2>
&lt;p>ç°åœ¨å¯ä»¥ make install äº†ã€‚&lt;/p></description></item><item><title>å¦‚ä½•ç†è§£å¯è§‚æµ‹æ€§</title><link>https://example.com/p/%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/</link><pubDate>Fri, 15 Oct 2021 09:45:38 +0800</pubDate><guid>https://example.com/p/%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/</guid><description>&lt;h1 id="å¯è§‚æµ‹æ€§">å¯è§‚æµ‹æ€§&lt;/h1>
&lt;h2 id="å¯è§‚æµ‹æ€§--ç›‘æ§">å¯è§‚æµ‹æ€§ â‰  ç›‘æ§&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>æ ¸å¿ƒä¸åŒ&lt;/p>
&lt;ul>
&lt;li>ç›‘æ§ä»¥è¿ç»´ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡å„é¡¹æŒ‡æ ‡æ¥å®šä¹‰æ•´ä½“çš„è¿è¡ŒçŠ¶æ€ã€å¤±è´¥æƒ…å†µã€‚&lt;/li>
&lt;li>è§‚æµ‹åˆ™ä»¥å¼€å‘ä¸ºæ ¸å¿ƒï¼Œé™¤äº†ç›‘æ§ï¼Œå®ƒè¿˜ä¼šå¯¹ç³»ç»Ÿè¿›è¡Œåˆ†æã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ç»´åº¦ä¸åŒ&lt;/p>
&lt;ul>
&lt;li>ç›‘æ§æ˜¯ä»å¤–å›´çš„è§’åº¦ï¼Œé€šè¿‡å„ç§æŒ‡æ ‡ï¼ˆæœºå™¨ CPUã€è´Ÿè½½ã€ç½‘ç»œç­‰ç»´åº¦ï¼‰æ¥åˆ¤æ–­æ•´ä¸ªç³»ç»Ÿçš„æ‰§è¡Œæƒ…å†µã€‚&lt;/li>
&lt;li>å¯è§‚æµ‹æ€§åˆ™åœ¨ä¸Šè¿°å¤–éƒ¨æŒ‡æ ‡åŸºç¡€ä¸Šï¼Œä»¥åº”ç”¨å†…çš„å„ä¸ªç»´åº¦æ¥å±•å¼€æ¨æµ‹ï¼Œé€šè¿‡äºŒè€…çš„æ•°æ®ç»“åˆæ¥çœŸå®çš„ååº”åº”ç”¨çš„è¿è¡Œæƒ…å†µã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>å±•ç°çš„ä¿¡æ¯ä¸åŒ&lt;/p>
&lt;ul>
&lt;li>æœ‰äº›ç³»ç»Ÿåœ¨æ­£å¸¸è¿è¡Œæ—¶ååˆ†ç¨³å®šï¼Œä½†æ˜¯ä¸€åˆ°é«˜å¹¶å‘å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæ­¤æ—¶ç›‘æ§åªèƒ½æ±‡æŠ¥é—®é¢˜å‡ºç°çš„çŠ¶å†µï¼Œè€Œå¯è§‚æµ‹æ€§å¯ä»¥å¾ˆå¥½çš„é€šè¿‡å›¾å½¢åŒ–çš„æ–¹å¼å‘ŠçŸ¥æˆ‘ä»¬é—®é¢˜çš„åŸå› ï¼Œä¸ç”¨æˆ‘ä»¬é€šè¿‡ç»éªŒæ¥çŒœæµ‹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>å¯è§‚æµ‹æ€§æ‰“ç ´äº†å¼€å‘å’Œè¿ç»´çš„åŸæœ‰é—®é¢˜è§£å†³æ–¹å¼ï¼Œä¸å†æ˜¯è¿ç»´å‘ç°é—®é¢˜å¼€å‘è§£å†³ï¼Œè€Œæ˜¯ä»¥å¼€å‘ä¸ºä¸­å¿ƒã€‚&lt;/p>
&lt;h2 id="ç›‘æ§æ•°æ®æ¥æº">ç›‘æ§æ•°æ®æ¥æº&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>ç«¯ä¸Šè®¿é—®&lt;/p>
&lt;ol>
&lt;li>ç”¨æˆ·ä½“éªŒç›‘æ§
&lt;ol>
&lt;li>web é¡µé¢çš„ç™½å±æ—¶é—´&lt;/li>
&lt;li>dom å…ƒç´ /èµ„æºåŠ è½½è€—æ—¶&lt;/li>
&lt;li>æ–‡æ¡£ç½‘ç»œè€—æ—¶&lt;/li>
&lt;li>app å¡é¡¿ç‡&lt;/li>
&lt;li>å´©æºƒç‡&lt;/li>
&lt;li>çƒ­å¯åŠ¨åŠ è½½æ—¶é•¿&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>æ—¥å¿—&lt;/li>
&lt;li>ç«¯åˆ°ç«¯
&lt;ol>
&lt;li>ç”¨æˆ·ç«¯åˆ°åç«¯çš„è¯·æ±‚çŠ¶å†µï¼Œè®¿é—®é‡ã€æˆåŠŸç‡ã€å“åº”æ—¶é—´ç­‰ã€‚&lt;/li>
&lt;li>è¿˜éœ€è¦ç«¯ä¸Šæ‰€å¤„çš„åœ°åŒºã€ç½‘ç»œç¯å¢ƒã€å“åº”çŠ¶æ€ç &lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>å¯ç”¨ç‡
&lt;ol>
&lt;li>è®¿é—®æ˜¯å¦å¯ç”¨ã€å“åº”è€—æ—¶é•¿çŸ­çš„ä¸€äº›æŒ‡æ ‡å’Œ cdnã€dns ç­‰å…¬å…±èµ„æºæœ‰å…³ç³»ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>åº”ç”¨ç¨‹åº&lt;/p>
&lt;ol>
&lt;li>æ‰§è¡Œæƒ…å†µ&lt;/li>
&lt;li>èµ„æºæ¶ˆè€—&lt;/li>
&lt;li>vm æŒ‡æ ‡ç›‘æ§&lt;/li>
&lt;li>å®¹é‡&lt;/li>
&lt;li>æœåŠ¡å…³ç³»&lt;/li>
&lt;li>åº”ç”¨æ—¥å¿—&lt;/li>
&lt;li>å¥åº·æƒ…å†µ&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>ä¸šåŠ¡ç›‘æ§&lt;/p>
&lt;ol>
&lt;li>ä¸šåŠ¡æŒ‡æ ‡èƒ½å¾ˆå¥½çš„ä½“ç°å‡ºç³»ç»Ÿæ˜¯å¦ç¨³å®šï¼Œä»»ä½•ç³»ç»Ÿå¦‚æœå‡ºç°äº†é—®é¢˜ï¼Œæœ€å…ˆå—å½±å“çš„è‚¯å®šæ˜¯ä¸šåŠ¡æŒ‡æ ‡ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>åŸºç¡€è®¾æ–½&lt;/p>
&lt;ol>
&lt;li>èµ„æºåˆ©ç”¨
&lt;ol>
&lt;li>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œåƒ IO ä½¿ç”¨ç‡ã€cpu åˆ©ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€ç£ç›˜ä½¿ç”¨ç‡ã€ç½‘ç»œä½¿ç”¨ç‡ç­‰ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>é€šä¿¡æƒ…å†µ
&lt;ol>
&lt;li>ä¸»æœºä¹‹é—´çš„ç½‘ç»œæƒ…å†µã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h2 id="å¯è§‚æµ‹æ€§çš„æ ¸å¿ƒæ¦‚å¿µ">å¯è§‚æµ‹æ€§çš„æ ¸å¿ƒæ¦‚å¿µ&lt;/h2>
&lt;h3 id="--æ—¥å¿—logging">- æ—¥å¿—ï¼ˆLoggingï¼‰&lt;/h3>
&lt;p>æ—¥å¿—çš„ä¸€èˆ¬æè¿°æ˜¯ï¼šåœ¨ç‰¹å®šæ—¶é—´å‘ç”Ÿçš„äº‹ä»¶ï¼Œè¢«ä»¥ç»“æ„åŒ–çš„å½¢å¼è®°å½•å¹¶äº§ç”Ÿçš„æ–‡æœ¬æ•°æ®ã€‚&lt;/p>
&lt;ol>
&lt;li>æ—¥å¿—çš„åŠŸèƒ½&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>ä¾¿äºè°ƒè¯•&lt;/li>
&lt;li>å¿«é€Ÿå®šä½é—®é¢˜&lt;/li>
&lt;li>é«˜åº¦å®šåˆ¶åŒ–&lt;/li>
&lt;li>ä¿¡æ¯åŸ‹ç‚¹&lt;/li>
&lt;li>è¿½è¸ªæ•°æ®å˜åŒ–&lt;/li>
&lt;li>æ•°æ®åˆ†æ&lt;/li>
&lt;/ul>
&lt;ol start="2">
&lt;li>æ—¥å¿—çº§åˆ«&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>debug&lt;/li>
&lt;li>info&lt;/li>
&lt;li>warning&lt;/li>
&lt;li>error&lt;/li>
&lt;/ul>
&lt;ol start="3">
&lt;li>æ—¥å¿—å¸¸è§æ¥æº&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>ç»ˆç«¯&lt;/li>
&lt;li>ç½‘å…³
&lt;ul>
&lt;li>è®¿é—®æ—¥å¿—ï¼šå½“æœåŠ¡åˆ°è¾¾ç½‘å…³ä¹‹åï¼Œå°±ä¼šå½¢æˆä¸€æ¡æ—¥å¿—ã€‚&lt;/li>
&lt;li>é”™è¯¯æ—¥å¿—ï¼šç½‘å…³æ‰§è¡Œæ—¶å‡ºäº†é—®é¢˜&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>åº”ç”¨å±‚
&lt;ul>
&lt;li>å®¹å™¨å¯åŠ¨æ—¥å¿—&lt;/li>
&lt;li>è¯·æ±‚è®¿é—®æ—¥å¿—&lt;/li>
&lt;li>æ™®é€šæ—¥å¿—&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ç»„ä»¶å±‚
&lt;ul>
&lt;li>mysql å’Œ redis ç­‰&lt;/li>
&lt;li>åº”ç”¨è¿è¡Œæ—¶çš„æ—¥å¿—&lt;/li>
&lt;li>æ…¢æŸ¥è¯¢&lt;/li>
&lt;li>å®¡è®¡&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>åŸºç¡€å±‚
&lt;ul>
&lt;li>åå‘è¿ç»´çš„æ—¥å¿—&lt;/li>
&lt;li>ç³»ç»Ÿæ—¥å¿—å’Œ linux æ“ä½œæ—¥å¿—ç­‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;ol start="4">
&lt;li>å¦‚ä½•å†™å¥½æ—¥å¿—&lt;/li>
&lt;/ol>
&lt;p>å¯»æ‰¾ç¼–å†™ä½ç½® =&amp;gt; ç¼–å†™æ—¥å¿— =&amp;gt; ä¸Šçº¿ =&amp;gt; æ—¥å¿— review =&amp;gt; å®šæœŸä¿®æ”¹&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é€‰æ‹©ä¸€ä¸ªå¸¸ç”¨çš„æ—¥å¿—æ¡†æ¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¼–å†™æ–¹å¼ä»å¦‚ä¸‹å‡ ä¸ªæ–¹é¢è€ƒè™‘&lt;/p>
&lt;ul>
&lt;li>æ—¥å¿—å¼€å‘æ—¶
&lt;ul>
&lt;li>æ—¥å¿—ç¼–å†™ä½ç½®&lt;/li>
&lt;li>å†™å…¥æ€§èƒ½&lt;/li>
&lt;li>å ä½ç¬¦&lt;/li>
&lt;li>å¯è¯»æ€§&lt;/li>
&lt;li>å…³é”®ä¿¡æ¯éšè”½&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¼€å‘å®Œæˆå
&lt;ul>
&lt;li>å‡å°‘ä»£ç ä½ç½®ä¿¡æ¯çš„è¾“å‡º&lt;/li>
&lt;li>æ–‡ä»¶åˆ†ç±»&lt;/li>
&lt;li>æ—¥å¿— review&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ç¼–å†™ä½ç½®&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„ç¼–å†™æ—¥å¿—çš„ä½ç½®ï¼š&lt;/p>
&lt;ol>
&lt;li>ç³»ç»Ÿ/åº”ç”¨å¯åŠ¨å’Œå‚æ•°å˜æ›´ï¼šå½“ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œå°†ç›¸å…³çš„å‚æ•°ä¿¡æ¯è¿›è¡Œæ‰“å°&lt;/li>
&lt;li>å…³é”®æ“ä½œèŠ‚ç‚¹&lt;/li>
&lt;li>å¤§å‹ä»»åŠ¡è¿›åº¦ä¸ŠæŠ¥ï¼šé˜²æ­¢å› ä¸ºé•¿æ—¶é—´æ²¡æœ‰å¤„ç†è€Œæ— æ³•å¾—çŸ¥ç¨‹åºçš„æ‰§è¡ŒçŠ¶æ€&lt;/li>
&lt;li>å¼‚å¸¸&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>å†™å…¥æ€§èƒ½&lt;/li>
&lt;/ul>
&lt;p>æ—¥å¿—çš„å†™å…¥æ€§èƒ½å—å¦‚ä¸‹å‡ ä¸ªå› ç´ å½±å“ï¼š&lt;/p>
&lt;ol>
&lt;li>æ—¥å¿—ç¼–å†™ä½ç½®ï¼Œå¦‚æœæ˜¯åœ¨ for å¾ªç¯ä¸­æ‰“å°ï¼Œéœ€è¦è€ƒè™‘ä¸€ä¸‹æ˜¯å¦æœ‰å¿…è¦&lt;/li>
&lt;li>æ—¥å¿—æ•°é‡ï¼šå¤§é‡çš„å†™æ—¥å¿—è´¨é‡ä¼šé™ä½ï¼Œè€Œä¸”è¿‡å¤šæ—¥å¿—ä¹Ÿä¼šå½±å“ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡&lt;/li>
&lt;li>æ—¥å¿—ç¼–å†™ç­‰çº§ï¼šä¸æ­£ç¡®çš„ç­‰çº§ï¼Œä¼šè®©æˆ‘ä»¬æŸ¥é—®é¢˜æ—¶é—´å¢åŠ &lt;/li>
&lt;li>æ—¥å¿—çš„è¾“å‡ºçº§åˆ«ï¼šçº¿ä¸Šä¸å»ºè®® debug æ¨¡å¼ã€‚&lt;/li>
&lt;li>æ— ç”¨è¾“å‡ºå‚æ•°ï¼šå¤§å­—æ®µã€æ— ç”¨å­—æ®µå¯ä»¥ä¸ç”¨è¾“å‡º&lt;/li>
&lt;/ol>
&lt;p>å¥½çš„æ—¥å¿—ä¸€å®šæ˜¯ä¾¿äºä½ å»æ’æŸ¥é—®é¢˜çš„ï¼Œåœ¨ç¼–å†™æ—¥å¿—çš„æ—¶å€™ä¸€å®šè¦æ€è€ƒè¿™ä¸ªæ—¥å¿—å¯ä»¥å¸®ä½ åšä»€ä¹ˆã€‚&lt;/p>
&lt;ul>
&lt;li>å ä½ç¬¦&lt;/li>
&lt;/ul>
&lt;p>æ—¥å¿—çš„ç¼–å†™å°½å¯èƒ½çš„é€‰æ‹©åŸºäºå ä½ç¬¦çš„ç¼–å†™æ–¹å¼ï¼š&lt;/p>
&lt;ol>
&lt;li>èŠ‚çº¦æ€§èƒ½ï¼Œåœ¨ç”Ÿæˆé«˜çº§åˆ«çš„æ—¥å¿—æ—¶ï¼Œä½çº§åˆ«çš„æ—¥å¿—ä¼šä¸åœçš„å åŠ å­—ç¬¦ä¸²è€Œå ç”¨è¿‡å¤šçš„å†…å­˜å’Œ CPUã€‚&lt;/li>
&lt;li>ä¾¿äºç¼–å†™ã€‚å…ˆç¡®å®šæ—¥å¿—æ‰€è¦è¡¨è¾¾çš„å†…å®¹ï¼Œå†ç¡®è®¤æ‰€éœ€è¦ç¼–å†™çš„å‚æ•°ï¼Œè¿™æ ·å†™æ—¥å¿—çš„æ—¶å€™ç›®çš„ä¼šæ›´åŠ æ˜ç¡®ã€‚&lt;/li>
&lt;li>ä¾¿äºæŸ¥çœ‹ã€‚æ›´æ–¹ä¾¿çš„æŸ¥çœ‹æ—¥å¿—æƒ³è¡¨è¾¾çš„æ„æ€ï¼Œè€Œä¸è¢«å‚æ•°æ‰“ä¹±ã€‚&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>å¯è¯»æ€§&lt;/li>
&lt;/ul>
&lt;p>ä¸€äº›å®¹æ˜“é—æ¼çš„ä¿¡æ¯ï¼Œä¹‹åè¦åŠ ä¸Šï¼š&lt;/p>
&lt;ol>
&lt;li>ä¼šè¯æ ‡è¯†ï¼šå½“å‰æ“ä½œçš„ç”¨æˆ·å’Œå½“å‰è¯·æ±‚ç›¸å…³çš„ä¿¡æ¯&lt;/li>
&lt;li>è¯·æ±‚æ ‡è¯†ï¼šæ¯ä¸ªè¯·æ±‚éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œä¸€èˆ¬ä¼šé…åˆé“¾è·¯è¿½è¸ªç³»ç»Ÿä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥è·¨æœåŠ¡è¿½è¸ª&lt;/li>
&lt;li>å‚æ•°ä¿¡æ¯&lt;/li>
&lt;li>å‘ç”Ÿæ•°æ®çš„ç»“æœ&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>å…³é”®ä¿¡æ¯éšè”½&lt;/li>
&lt;/ul>
&lt;p>æŠŠä¸€äº›å…³é”®çš„ä¿¡æ¯æ¨¡ç³Šæ‰&lt;/p>
&lt;ul>
&lt;li>å‡å°‘ä»£ç ä½ç½®ä¿¡æ¯çš„è¾“å‡º&lt;/li>
&lt;/ul>
&lt;p>æå‡æ•ˆç‡&lt;/p>
&lt;ul>
&lt;li>æ–‡ä»¶åˆ†ç±»&lt;/li>
&lt;/ul>
&lt;p>æŠŠä¸åŒä¸šåŠ¡é€»è¾‘æŒ‰ä¸åŒçš„æ–‡ä»¶æ¥åˆ†ç±»ï¼Œä¸ä¼šè¢«å¹²æ‰°&lt;/p>
&lt;ul>
&lt;li>æ—¥å¿— review&lt;/li>
&lt;/ul>
&lt;p>æ¯ä¸€æ¬¡åŠŸèƒ½ä¸Šçº¿æ—¶ï¼Œå‡ºäº†å¯¹åŠŸèƒ½è¿›è¡Œå›æ‰«ï¼Œä¹Ÿè¦ç¡®è®¤æ—¥å¿—çš„å†…å®¹è¾“å‡ºæƒ…å†µæ˜¯ä¸æ˜¯ç¬¦åˆé¢„æœŸ&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ—¥å¿—ç®¡ç†&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ—¥å¿—æ ¼å¼&lt;/p>
&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>ç³»ç»Ÿä¹‹é—´çš„æ ¼å¼åº”è¯¥ä¿æŒä¸€è‡´&lt;/li>
&lt;li>ä¸ç¼–å†™å¤šè¡Œæ—¥å¿—å†…å®¹&lt;/li>
&lt;li>ä¸é€‚ç”¨æ—¥å¿—ä¸­çš„å¸¸è§å†…å®¹æ¥åˆ†å‰²ï¼Œæ¯”å¦‚ç©ºæ ¼ç­‰ã€‚&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>æ—¥å¿—å½’æ¡£&lt;/li>
&lt;/ul>
&lt;p>ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯æŒ‰å°æ—¶æˆ–è€…æ—¥æœŸæ¥å½’æ¡£ï¼Œæ¯å¤©ç”Ÿæˆä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œæ–¹ä¾¿ç®¡ç†å’ŒæŸ¥çœ‹&lt;/p>
&lt;h3 id="--åº¦é‡metrics">- åº¦é‡ï¼ˆMetricsï¼‰&lt;/h3>
&lt;p>ç»Ÿè®¡æŒ‡æ ‡ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ã€‚å®ƒæ˜¯ä¸€ç§å¯ç´¯åŠ çš„èšåˆçš„æ•°å€¼ç»“æœï¼Œå…·æœ‰åŸå­æ€§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å„ç§æ•°å­¦è®¡ç®—æ–¹å¼æ¥è·å–ä¸€æ®µæ—¶é—´å†…çš„æ•°å€¼ã€‚&lt;/p>
&lt;h3 id="--è¿½è¸ªtracing">- è¿½è¸ªï¼ˆTracingï¼‰&lt;/h3>
&lt;p>é“¾è·¯è¿½è¸ªæ˜¯å°†é“¾è·¯çš„å®Œæ•´è¡Œä¸ºä¿¡æ¯è¿›è¡Œè®°å½•ï¼Œç„¶åé€šè¿‡å¯è§†åŒ–çš„å½¢å¼å±•ç°å‡ºæ¥&lt;/p>
&lt;p>æˆ‘ä»¬ä¸€èˆ¬å°†æ•°æ®çš„æ¥æºåˆ†ä¸º 2 ä¸ªçº§åˆ«ï¼š&lt;/p>
&lt;ol>
&lt;li>è¯·æ±‚çº§åˆ«ï¼šæ•°æ®æ¥æºäºçœŸå®çš„è¯·æ±‚ï¼Œæ¯”å¦‚ä¸€æ¬¡ http è°ƒç”¨ã€rpc è°ƒç”¨ç­‰&lt;/li>
&lt;li>èšåˆçº§åˆ«ï¼šçœŸå®çš„è¯·æ±‚æŒ‡æ ‡ï¼Œæˆ–æ˜¯ç³»ç»Ÿçš„ä¸€äº›å‚æ•°æ•°æ®èšåˆï¼Œæ¯”å¦‚ qpsã€cpu ä½¿ç”¨ç‡&lt;/li>
&lt;/ol></description></item><item><title>å¦‚ä½•ä»é›¶å¼€å§‹å†™ä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨</title><link>https://example.com/p/%E5%A6%82%E4%BD%95%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8/</link><pubDate>Fri, 23 Jul 2021 09:33:18 +0800</pubDate><guid>https://example.com/p/%E5%A6%82%E4%BD%95%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8/</guid><description>&lt;p>æˆ‘ä»¬å¸¸è§çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨æœ‰ Hugoã€Hexo ç­‰ï¼Œç¨‹åºå‘˜ä»¬ç»å¸¸ä¼šä½¿ç”¨ç±»ä¼¼çš„å·¥å…·å»å°†è‡ªå·±çš„æ’­å®¢æ‰˜ç®¡åˆ° github pagesã€‚å‰æ®µæ—¶é—´ç ”ç©¶äº†ä¸€ä¸‹å®ç°çš„æ–¹å¼ï¼Œç”¨ Elixir ç®€å•å®ç°äº†ä¸€ä¸ªç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>ä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨çš„å·¥ä½œæµç¨‹é€šå¸¸æœ‰å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p>
&lt;ol>
&lt;li>è¯»å–æºæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯ markdown æ ¼å¼çš„ã€‚&lt;/li>
&lt;li>æ¨¡æ¿å¼•æ“çš„æ¸²æŸ“&lt;/li>
&lt;li>ç”Ÿæˆç›®æ ‡æ–‡ä»¶&lt;/li>
&lt;/ol>
&lt;p>æ¥ä¸‹æ¥ä¼šä»æ¯ä¸ªæ­¥éª¤æ¥è¿›è¡Œç®€å•ä»‹ç»ã€‚&lt;/p>
&lt;p>æœ€ç»ˆç‰ˆæœ¬çš„è¯·å‚è€ƒï¼š&lt;a class="link" href="https://github.com/zhenfeng-zhu/ego" target="_blank" rel="noopener"
>https://github.com/zhenfeng-zhu/ego&lt;/a>ï¼Œ æ¬¢è¿ pr å’Œ issueã€‚&lt;/p>
&lt;h1 id="æç®€-mvp-ç‰ˆæœ¬ä»‹ç»">æç®€ MVP ç‰ˆæœ¬ä»‹ç»&lt;/h1>
&lt;h2 id="åˆå§‹åŒ–">åˆå§‹åŒ–&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mix&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">ego&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ mix.exs ä¸­æ·»åŠ ä¾èµ–&lt;/p>
&lt;ul>
&lt;li>earmark æ˜¯å°† markdown è½¬æ¢ä¸º htmlã€‚&lt;/li>
&lt;li>plug_cowboy æ˜¯æä¾›æœ¬åœ°é¢„è§ˆ html æ–‡ä»¶çš„ serverã€‚&lt;/li>
&lt;li>json æ˜¯ä¸€ä¸ª json è§£æåº“&lt;/li>
&lt;li>æŒ‡å®šä»¥ escript çš„æ–¹å¼å¯åŠ¨&lt;/li>
&lt;/ul>
&lt;h2 id="è§£æ-markdown-æ–‡ä»¶">è§£æ markdown æ–‡ä»¶&lt;/h2>
&lt;p>å°†ä¸€ä¸ª markdown æ–‡ä»¶è½¬ä¸º html ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œé¦–å…ˆè¯»å–ï¼Œç„¶åè°ƒç”¨ Earmark.as_html!å‡½æ•°ï¼Œå°±èƒ½å°† markdown è½¬æ¢ä¸º html äº†ã€‚&lt;/p>
&lt;p>eg.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">def&lt;/span> &lt;span class="n">gen_blogs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="nc">File&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read!&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="nc">Earmark&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">as_html!&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´è¿›ä¸€æ­¥çš„æˆ‘ä»¬è®¤ä¸º markdown çš„åšå®¢æºæ–‡ä»¶éƒ½åœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹é¢ï¼Œå³&lt;code>{current_dir()}/contents/&lt;/code>ã€‚å¦‚æœè¦è·å–åˆ°æ‰€æœ‰çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ wildcard å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">def&lt;/span> &lt;span class="n">blog_files&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">Path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wildcard&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="n">current_dir&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/contents/*.md&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› æ­¤å°±å¯ä»¥æ‰¹é‡å¯¹ç›®å½•ä¸‹çš„æ‰€æœ‰ markdown æ–‡ä»¶è¿›è¡Œè½¬æ¢ã€‚&lt;/p>
&lt;p>eg.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl">&lt;span class="n">blog_files&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="nc">Enum&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">each&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">gen_blogs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ¨¡æ¿å¼•æ“æ¸²æŸ“">æ¨¡æ¿å¼•æ“æ¸²æŸ“&lt;/h2>
&lt;p>æ—¢ç„¶ç”¨äº† elixirï¼Œé‚£å°±å¾—ä½¿ç”¨ eex æ¥è¿›è¡Œæ¸²æŸ“äº†ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å†™ä¸€ä¸ªæœ€ç®€å•çš„ eex æ¨¡æ¿æ–‡ä»¶ï¼Œeg&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">article&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;markdown-body&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="err">&amp;lt;&lt;/span>%= @content %&amp;gt;&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">article&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šè¿°çš„æ¨¡æ¿æ–‡ä»¶ä¸­ï¼Œcontent æ˜¯ markdown ç”Ÿæˆçš„ htmlã€‚&lt;/p>
&lt;p>æ¸²æŸ“ eex ä¹Ÿæ˜¯å¾ˆç®€å•ï¼Œeg&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">def&lt;/span> &lt;span class="n">blog_layout&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="n">current_dir&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/layouts/blog.eex&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">def&lt;/span> &lt;span class="n">eval_blog&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_title&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">EEx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">eval_file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">blog_layout&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">assigns&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="ss">content&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ç”Ÿæˆç›®æ ‡æ–‡ä»¶">ç”Ÿæˆç›®æ ‡æ–‡ä»¶&lt;/h2>
&lt;p>éœ€è¦å°†ä¸Šè¿°çš„æ–‡ä»¶ç”Ÿæˆåˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å…ˆç”Ÿæˆåˆ° public ç›®å½•ä¸‹é¢ã€‚&lt;/p>
&lt;p>Elixir çš„å†™å…¥å‡½æ•°ä¹Ÿæ˜¯ç‰¹åˆ«å¥½ç”¨ï¼Œåªéœ€è¦æŠŠ string å†™å…¥åˆ°ç›®æ ‡æ–‡ä»¶å³å¯ï¼Œeg&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">def&lt;/span> &lt;span class="n">write_to&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">get_title&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">File&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="n">static_dir&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">.html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ä¸€äº›ä¼˜åŒ–">ä¸€äº›ä¼˜åŒ–&lt;/h1>
&lt;h2 id="ç”Ÿæˆç›®å½•æ–‡ä»¶">ç”Ÿæˆç›®å½•æ–‡ä»¶&lt;/h2>
&lt;p>ç”Ÿæˆ index ç›®å½•æ–‡ä»¶å’Œç”Ÿæˆ blog çš„æµç¨‹ç±»ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦è§£ææ¯ä¸ª markdown çš„æ–‡ä»¶åï¼Œç„¶åå¡«å……åˆ° index çš„ layout ä¸­å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">article&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;markdown-body&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>%= for item &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">-&lt;/span> &lt;span class="err">@&lt;/span>&lt;span class="na">list&lt;/span> &lt;span class="na">do&lt;/span> &lt;span class="err">%&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&amp;lt;%= item[:href] %&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;lt;&lt;/span>%= item[:title] %&amp;gt; &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">&amp;lt;&lt;/span>% end %&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">article&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ³¨æ„åœ¨ç”Ÿæˆç›®å½•çš„æ—¶å€™ï¼Œä¸€å®šè¦æŒ‡å®šç›®æ ‡åšå®¢çš„åœ°å€ï¼Œå› æ­¤è¦å¯¹ç›®å½•åŠ ä¸€ä¸ª&lt;code>&amp;lt;a href&amp;gt; &amp;lt;/a&amp;gt;&lt;/code>çš„æ ‡ç­¾ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">def&lt;/span> &lt;span class="n">gen_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">blogs&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">blogs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="nc">Enum&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">get_title&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">build_title_with_href&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">eval_index&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">write_to&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;index&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">def&lt;/span> &lt;span class="n">build_title_with_href&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">%{&lt;/span>&lt;span class="ss">:title&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">title&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">:href&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">get_href&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">def&lt;/span> &lt;span class="n">get_href&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="nc">EgoConfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">domain&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">.html&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">def&lt;/span> &lt;span class="n">eval_index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">titles&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">EEx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">eval_file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">index_layout&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">assigns&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="ss">t&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;zzf-blog&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">list&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">titles&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åŠ é€Ÿæ„å»º">åŠ é€Ÿæ„å»º&lt;/h2>
&lt;p>ä¸Šé¢çš„æ„å»ºæµç¨‹æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜ï¼Œå°±æ˜¯æ¯ä¸ªæ–‡ä»¶çš„ç”Ÿæˆéƒ½æ˜¯ä¸²è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥åŠ é€Ÿä¸€ä¸‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">Task&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">start_link&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">blog_files&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">gen_index&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">blog_files&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="nc">Enum&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nc">Task&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">async&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">gen_blogs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">end&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="nc">Task&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">await_many&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="nc">IO&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">inspect&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®©ç”Ÿæˆ index çš„æ—¶å€™åœ¨åå°æ‰§è¡Œï¼ŒåŒæ—¶ç”Ÿæˆ blog çš„æ—¶å€™ï¼Œå¼€å¯ async æ¨¡å¼ï¼Œå¹¶ await ä¸€ä¸‹ã€‚&lt;/p>
&lt;h2 id="æœ¬åœ°é¢„è§ˆ">æœ¬åœ°é¢„è§ˆ&lt;/h2>
&lt;p>ç®€å•ä½¿ç”¨ plug æ¥åšæœ¬åœ°é¢„è§ˆ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">defmodule&lt;/span> &lt;span class="nc">MyPlug&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">use&lt;/span> &lt;span class="nc">Plug.Router&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nc">Plug.Conn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ss">:match&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">plug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ss">:dispatch&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">get&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">put_resp_content_type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;text/html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">send_file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;public/index.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">get&lt;/span> &lt;span class="s2">&amp;#34;/:file&amp;#34;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">put_resp_content_type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;text/html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">|&amp;gt;&lt;/span> &lt;span class="n">send_file&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;public/&lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">get&lt;/span> &lt;span class="s2">&amp;#34;favicon.ico&amp;#34;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">send_resp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">conn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">404&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;not found&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">match&lt;/span> &lt;span class="n">_&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">send_resp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">conn&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">404&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;not found&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡è®¿é—®åŸŸåï¼Œå¯ä»¥è¿›åˆ° index æ–‡ä»¶ï¼Œå½“ç‚¹å‡»ç›®å½•çš„æ—¶å€™ï¼Œå°±è®¿é—®ç›®æ ‡åšå®¢æ–‡ä»¶ã€‚&lt;/p>
&lt;h2 id="ç¾åŒ–">ç¾åŒ–&lt;/h2>
&lt;ol>
&lt;li>æ·»åŠ ä»£ç é«˜äº®ï¼Œ&lt;/li>
&lt;/ol>
&lt;p>åœ¨ head ä¸­å¼•å…¥ highlight.js å³å¯ã€‚&lt;/p>
&lt;p>eg.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;stylesheet&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/styles/default.min.css&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/highlight.min.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hljs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">highlightAll&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>å±…ä¸­å±•ç¤º&lt;/li>
&lt;/ol>
&lt;p>åœ¨ layout æ–‡ä»¶ä¸­åŠ ä¸Šå¦‚ä¸‹ css æ ·å¼å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;viewport&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;width=device-width, initial-scale=1&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">markdown-body&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">box-sizing&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">border-box&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">min-width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">max-width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">980&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">margin&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="kc">auto&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">45&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">@&lt;/span>&lt;span class="k">media&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nt">max-width&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nt">767px&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">markdown-body&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="kt">px&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶">æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶&lt;/h2>
&lt;p>é€šè¿‡ escript æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶&lt;/p>
&lt;p>å‚è€ƒ &lt;a class="link" href="https://elixirschool.com/zh-hans/lessons/advanced/escripts/" target="_blank" rel="noopener"
>https://elixirschool.com/zh-hans/lessons/advanced/escripts/&lt;/a>&lt;/p>
&lt;h2 id="ä¸°å¯Œå‘½ä»¤è¡Œ">ä¸°å¯Œå‘½ä»¤è¡Œ&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-elixir" data-lang="elixir">&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">defp&lt;/span> &lt;span class="n">parse_args&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="n">hd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;server&amp;#34;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">start_server&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;build&amp;#34;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">Mark&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">convert&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;new&amp;#34;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gen_template&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ego server å¯åŠ¨æœ¬åœ°é¢„è§ˆæ¨¡å¼&lt;/p>
&lt;p>ego build å°±å°†æœ¬åœ°çš„åšå®¢ç”Ÿæˆ html æ–‡ä»¶&lt;/p>
&lt;p>ego new site xxx ç”Ÿæˆé™æ€ç«™ç‚¹&lt;/p>
&lt;h1 id="æ›´å¤š">æ›´å¤š&lt;/h1>
&lt;p>elixir å†™èµ·æ¥å¾ˆä¸æ»‘ï¼Œä¸€ä¸ªæœ€ç»ˆç‰ˆæœ¬çš„è¯·å‚è€ƒï¼š&lt;a class="link" href="https://github.com/zhenfeng-zhu/ego" target="_blank" rel="noopener"
>https://github.com/zhenfeng-zhu/ego&lt;/a>ï¼Œæ¬¢è¿ pr å’Œ issueã€‚&lt;/p>
&lt;p>å¦å¤–ä¹Ÿç»™ elixir-ls æäº†ä¸€ä¸ª prï¼Œå¤§å®¶å¿«å» conversation å‘€ï¼Œå°½å¿«è®© merge äº†ï¼š&lt;a class="link" href="https://github.com/elixir-lsp/elixir-ls/pull/574" target="_blank" rel="noopener"
>https://github.com/elixir-lsp/elixir-ls/pull/574&lt;/a>&lt;/p></description></item><item><title>Openfaas Workshop Lab2</title><link>https://example.com/p/openfaas-workshop-lab2/</link><pubDate>Tue, 30 Mar 2021 09:57:01 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab2/</guid><description>&lt;h1 id="å®éªŒå®¤-2--æµ‹è¯•ä¸œè¥¿">å®éªŒå®¤ 2&amp;ndash;æµ‹è¯•ä¸œè¥¿&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ mkdir -p lab2 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> lab2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä½¿ç”¨-ui-é—¨æˆ·">ä½¿ç”¨ UI é—¨æˆ·&lt;/h2>
&lt;p>ç°åœ¨ä½ å¯ä»¥æµ‹è¯•ä¸€ä¸‹ OpenFaaS çš„ç”¨æˆ·ç•Œé¢äº†ã€‚&lt;/p>
&lt;p>å¦‚æœä½ å·²ç»è®¾ç½®äº†ä¸€ä¸ª&lt;code>$OPENFAAS_URL&lt;/code>ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°è¿™ä¸ª URLï¼Œç„¶åç‚¹å‡»å®ƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="nv">$OPENFAAS_URL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http://127.0.0.1:31112
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ æ²¡æœ‰è®¾ç½®&amp;quot;$OPENFAAS_URL&amp;quot;ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹æ˜¯è¿™æ ·çš„ã€‚&lt;a class="link" href="http://127.0.0.1:8080" target="_blank" rel="noopener"
>http://127.0.0.1:8080&lt;/a>.&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥éƒ¨ç½²ä¸€äº›æ ·æœ¬å‡½æ•°ï¼Œç„¶åç”¨å®ƒä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli deploy -f https://raw.githubusercontent.com/openfaas/faas/master/stack.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://example.com/../../screenshot/markdown_portal.png"
loading="lazy"
>&lt;/p>
&lt;p>ä½ å¯ä»¥åœ¨ç”¨æˆ·ç•Œé¢ä¸­è¯•ç”¨å®ƒä»¬ï¼Œæ¯”å¦‚å°† Markdown ä»£ç è½¬æ¢ä¸º HTML çš„ Markdown å‡½æ•°ã€‚&lt;/p>
&lt;p>åœ¨&lt;em>Request&lt;/em>å­—æ®µä¸­é”®å…¥ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## The **OpenFaaS** _workshop_&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ç‚¹å‡»&lt;em>Invoke&lt;/em>ï¼Œçœ‹åˆ°å“åº”å‡ºç°åœ¨å±å¹•çš„ä¸‹åŠéƒ¨åˆ†ã€‚&lt;/p>
&lt;p>å³ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&amp;lt;h2&amp;gt;The &amp;lt;strong&amp;gt;OpenFaaS&amp;lt;/strong&amp;gt; &amp;lt;em&amp;gt;workshop&amp;lt;/em&amp;gt;&amp;lt;/h2&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ å°†çœ‹åˆ°ä»¥ä¸‹å­—æ®µæ˜¾ç¤ºã€‚&lt;/p>
&lt;ul>
&lt;li>çŠ¶æ€ - è¯¥å‡½æ•°æ˜¯å¦å‡†å¤‡å¥½è¿è¡Œã€‚åœ¨çŠ¶æ€æ˜¾ç¤ºå‡†å¤‡å¥½ä¹‹å‰ï¼Œä½ å°†ä¸èƒ½ä»ç”¨æˆ·ç•Œé¢è°ƒç”¨è¯¥å‡½æ•°ã€‚&lt;/li>
&lt;li>Replicas - åœ¨é›†ç¾¤ä¸­è¿è¡Œçš„å‡½æ•°çš„å‰¯æœ¬æ•°é‡&lt;/li>
&lt;li>é•œåƒ - å‘å¸ƒåœ¨ Docker Hub æˆ– Docker èµ„æºåº“ä¸­çš„ Docker å›¾åƒåç§°å’Œç‰ˆæœ¬&lt;/li>
&lt;li>è°ƒç”¨æ¬¡æ•° - è¿™æ˜¾ç¤ºäº†è¯¥å‡½æ•°è¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œæ¯ 5 ç§’æ›´æ–°ä¸€æ¬¡&lt;/li>
&lt;/ul>
&lt;p>ç‚¹å‡»&lt;em>Invoke&lt;/em>è‹¥å¹²æ¬¡ï¼Œçœ‹åˆ°&lt;em>Invocation count&lt;/em>çš„å¢åŠ ã€‚&lt;/p>
&lt;h2 id="é€šè¿‡å‡½æ•°åº“è¿›è¡Œéƒ¨ç½²">é€šè¿‡å‡½æ•°åº“è¿›è¡Œéƒ¨ç½²&lt;/h2>
&lt;p>ä½ å¯ä»¥ä» OpenFaaS å•†åº—ä¸­éƒ¨ç½²ä¸€ä¸ªå‡½æ•°ã€‚è¯¥å•†åº—æ˜¯ä¸€ä¸ªç”±ç¤¾åŒºç»´æŠ¤çš„å…è´¹å‡½æ•°é›†åˆã€‚&lt;/p>
&lt;p>&lt;em>ç‚¹å‡» éƒ¨ç½²æ–°çš„å‡½æ•°&lt;/em>
&lt;em>ç‚¹å‡» from store&lt;/em>&lt;/p>
&lt;ul>
&lt;li>ç‚¹å‡» &lt;em>Figlet&lt;/em> æˆ–åœ¨æœç´¢æ ä¸­è¾“å…¥ &lt;em>figlet&lt;/em> ï¼Œç„¶åç‚¹å‡» &lt;em>Deploy&lt;/em> ã€‚&lt;/li>
&lt;/ul>
&lt;p>Figlet å‡½æ•°ç°åœ¨å°†å‡ºç°åœ¨ä½ å·¦è¾¹çš„å‡½æ•°åˆ—è¡¨ä¸­ã€‚ç»™å®ƒä¸€ç‚¹æ—¶é—´ä» Docker Hub ä¸‹è½½ï¼Œç„¶åè¾“å…¥ä¸€äº›æ–‡æœ¬ï¼Œåƒæˆ‘ä»¬å¯¹ Markdown å‡½æ•°æ‰€åšçš„é‚£æ ·ï¼Œç‚¹å‡» Invokeã€‚&lt;/p>
&lt;p>ä½ ä¼šçœ‹åˆ°ä¸€ä¸ª ASCII ç çš„æ ‡å¿—ï¼Œåƒè¿™æ ·ç”Ÿæˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl"> _ ___ ___ _ __
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ &lt;span class="p">|&lt;/span>/ _ &lt;span class="se">\ &lt;/span>/ _ &lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span>/ /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>/ /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span> / /_
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>_&lt;span class="p">|&lt;/span>&lt;span class="se">\_&lt;/span>__/ &lt;span class="se">\_&lt;/span>__/_/&lt;span class="o">(&lt;/span>_&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="äº†è§£-cli-çš„æƒ…å†µ">äº†è§£ CLI çš„æƒ…å†µ&lt;/h2>
&lt;p>ä½ ç°åœ¨å¯ä»¥æµ‹è¯•ä¸€ä¸‹ CLI äº†ï¼Œä½†é¦–å…ˆè¦æ³¨æ„ä¸€ä¸‹å¤‡ç”¨ç½‘å…³çš„ URLã€‚&lt;/p>
&lt;p>å¦‚æœä½ çš„&lt;em>ç½‘å…³æ²¡æœ‰&lt;/em>éƒ¨ç½²åœ¨&lt;a class="link" href="http://127.0.0.1:8080" target="_blank" rel="noopener"
>http://127.0.0.1:8080&lt;/a>ï¼Œé‚£ä¹ˆä½ å°†éœ€è¦æŒ‡å®šæ›¿ä»£ä½ç½®ã€‚æœ‰å‡ ç§æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;ol>
&lt;li>è®¾ç½®ç¯å¢ƒå˜é‡&lt;code>OPENFAAS_URL&lt;/code>ï¼Œ&lt;code>faas-cli&lt;/code>å°†æŒ‡å‘å½“å‰ shell ä¼šè¯ä¸­çš„é‚£ä¸ªç«¯ç‚¹ã€‚ä¾‹å¦‚ï¼š&lt;code>export OPENFAAS_URL http://openfaas.endpoint.com:8080&lt;/code>ã€‚å¦‚æœä½ æ˜¯æŒ‰ç…§ Kubernetes çš„æŒ‡ç¤ºï¼Œè¿™å·²ç»åœ¨&lt;a class="link" href="./lab1.md" >Lab 1&lt;/a>ä¸­è®¾ç½®å¥½äº†ã€‚&lt;/li>
&lt;li>ç”¨ &lt;code>g&lt;/code>æˆ–&lt;code>--gateway&lt;/code>æ ‡å¿—åœ¨çº¿æŒ‡å®šæ­£ç¡®çš„ç«¯ç‚¹ï¼š &lt;code>faas deploy --gateway http://openfaas.endpoint.com:8080&lt;/code>ã€‚&lt;/li>
&lt;li>åœ¨ä½ çš„éƒ¨ç½² YAML æ–‡ä»¶ä¸­ï¼Œæ”¹å˜&lt;code>gateway:&lt;/code>å¯¹è±¡åœ¨&lt;code>provider:&lt;/code>ä¸‹æŒ‡å®šçš„å€¼ã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="åˆ—å‡ºå·²éƒ¨ç½²çš„å‡½æ•°">åˆ—å‡ºå·²éƒ¨ç½²çš„å‡½æ•°&lt;/h3>
&lt;p>è¿™å°†æ˜¾ç¤ºè¿™äº›å‡½æ•°ï¼Œä½ æœ‰å¤šå°‘ä¸ªå‰¯æœ¬å’Œè°ƒç”¨æ¬¡æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ åº”è¯¥çœ‹åˆ°&lt;em>markdown&lt;/em>å‡½æ•°æ˜¯ &lt;code>markdown&lt;/code>ï¼Œ&lt;em>figlet&lt;/em>å‡½æ•°ä¹Ÿè¢«åˆ—å‡ºæ¥äº†ï¼Œè¿˜æœ‰ä½ è°ƒç”¨äº†å¤šå°‘æ¬¡ã€‚&lt;/p>
&lt;p>ç°åœ¨è¯•è¯•ä½¿ç”¨ verbose æ ‡å¿—&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli list --verbose
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli list -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ å¯ä»¥çœ‹åˆ° Docker é•œåƒä»¥åŠå‡½æ•°çš„åç§°ã€‚&lt;/p>
&lt;h3 id="è°ƒç”¨ä¸€ä¸ªå‡½æ•°">è°ƒç”¨ä¸€ä¸ªå‡½æ•°&lt;/h3>
&lt;p>ä»ä½ åœ¨&lt;code>faas-cli list&lt;/code>ä¸Šçœ‹åˆ°çš„å‡½æ•°ä¸­æŒ‘é€‰ä¸€ä¸ªï¼Œæ¯”å¦‚&lt;code>markdown&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli invoke markdown
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ ä¼šè¢«è¦æ±‚è¾“å…¥ä¸€äº›æ–‡æœ¬ã€‚å®Œæˆåç‚¹å‡» Control + Dã€‚&lt;/p>
&lt;p>æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå¦‚&lt;code>echo&lt;/code>æˆ–&lt;code>curl&lt;/code>ä½œä¸º&lt;code>invoke&lt;/code>å‘½ä»¤çš„è¾“å…¥ï¼Œè¯¥å‘½ä»¤é€šè¿‡ä½¿ç”¨ç®¡é“å·¥ä½œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;# Hi&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke markdown
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl -sLS https://raw.githubusercontent.com/openfaas/faas/master/README.md&lt;span class="se">\ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span> faas-cli invoke markdown
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ç›‘æµ‹ä»ªè¡¨æ¿">ç›‘æµ‹ä»ªè¡¨æ¿&lt;/h2>
&lt;p>OpenFaaS ä½¿ç”¨ Prometheus è‡ªåŠ¨è·Ÿè¸ªä½ çš„å‡½æ•°çš„æŒ‡æ ‡ã€‚è¿™äº›æŒ‡æ ‡å¯ä»¥é€šè¿‡å…è´¹çš„å¼€æºå·¥å…·å˜æˆä¸€ä¸ªæœ‰ç”¨çš„ä»ªè¡¨ç›˜ï¼Œæ¯”å¦‚&lt;a class="link" href="https://grafana.com" target="_blank" rel="noopener"
>Grafana&lt;/a>ã€‚&lt;/p>
&lt;p>åœ¨ OpenFaaS Kubernetes å‘½åç©ºé—´è¿è¡Œ Grafanaã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">kubectl -n openfaas run &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--image&lt;span class="o">=&lt;/span>stefanprodan/faas-grafana:4.6.3 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--port&lt;span class="o">=&lt;/span>&lt;span class="m">3000&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>grafana
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨ NodePort æš´éœ² Grafanaã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">kubectl -n openfaas expose pod grafana &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--type&lt;span class="o">=&lt;/span>NodePort &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--name&lt;span class="o">=&lt;/span>grafana
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰¾åˆ° Grafana èŠ‚ç‚¹çš„ç«¯å£åœ°å€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GRAFANA_PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>kubectl -n openfaas get svc grafana -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;{.spec.ports[0].nodePort}&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GRAFANA_URL&lt;/span>&lt;span class="o">=&lt;/span>http://IP_ADDRESS:&lt;span class="nv">$GRAFANA_PORT&lt;/span>/dashboard/db/openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­&lt;code>IP_ADDRESS&lt;/code>æ˜¯ä½ åœ¨ Kubernetes çš„å¯¹åº” IPã€‚&lt;/p>
&lt;p>æˆ–è€…ä½ å¯ä»¥è¿è¡Œè¿™ä¸ªç«¯å£è½¬å‘å‘½ä»¤ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨&lt;code>http://127.0.0.1:3000&lt;/code>ä¸Šè®¿é—® Grafanaã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">kubectl port-forward pod/grafana 3000:3000 -n openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Kubernetes 1.17 æˆ–æ›´æ—©çš„ç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨&lt;code>deploy/grafana&lt;/code>è€Œä¸æ˜¯ä¸Šé¢å‘½ä»¤ä¸­çš„&lt;code>pod/&lt;/code>ã€‚&lt;/p>
&lt;p>æœåŠ¡åˆ›å»ºåï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ Grafanaï¼Œç”¨ç”¨æˆ·å&lt;code>admin&lt;/code>å¯†ç &lt;code>admin&lt;/code>ç™»å½•ï¼Œå¹¶å¯¼èˆªåˆ°é¢„å…ˆåˆ¶ä½œçš„ OpenFaaS ä»ªè¡¨æ¿&lt;code>$GRAFANA_URL&lt;/code>ã€‚&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;em>å›¾ï¼šä½¿ç”¨ Grafana çš„ OpenFaaS ä»ªè¡¨æ¿çš„ä¾‹å­&lt;/em>ã€‚&lt;/p>
&lt;p>ç°åœ¨è½¬åˆ°&lt;a class="link" href="./lab3.md" >å®éªŒå®¤ 3&lt;/a>&lt;/p></description></item><item><title>Openfaas Workshop Lab1b</title><link>https://example.com/p/openfaas-workshop-lab1b/</link><pubDate>Tue, 30 Mar 2021 09:55:20 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab1b/</guid><description>&lt;h1 id="lab-1---ç”¨-kubernetes-è®¾ç½®-openfaas">Lab 1 - ç”¨ Kubernetes è®¾ç½® OpenFaaS&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;/p>
&lt;h2 id="å®‰è£…æœ€æ–°çš„-kubectl">å®‰è£…æœ€æ–°çš„ &lt;code>kubectl&lt;/code>&lt;/h2>
&lt;p>ä½¿ç”¨ä¸‹é¢çš„è¯´æ˜æˆ–&lt;a class="link" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡æ¡£&lt;/a>ä¸ºä½ çš„æ“ä½œç³»ç»Ÿå®‰è£…&lt;code>kubectl&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>Linux&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">VER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -LO https://storage.googleapis.com/kubernetes-release/release/&lt;span class="nv">$VER&lt;/span>/bin/linux/amd64/kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv kubectl /usr/local/bin/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>MacOS&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">VER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -LO https://storage.googleapis.com/kubernetes-release/release/&lt;span class="nv">$VER&lt;/span>/bin/darwin/amd64/kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv kubectl /usr/local/bin/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Windows&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">VER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -LO https://storage.googleapis.com/kubernetes-release/release/&lt;span class="nv">$VER&lt;/span>/bin/windows/amd64/kubectl.exe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +x kubectl.exe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p &lt;span class="nv">$HOME&lt;/span>/bin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv kubectl &lt;span class="nv">$HOME&lt;/span>/bin/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="è®¾ç½®ä¸€ä¸ª-kubernetes-é›†ç¾¤">è®¾ç½®ä¸€ä¸ª Kubernetes é›†ç¾¤&lt;/h2>
&lt;p>ä½ å¯ä»¥åœ¨ä½¿ç”¨ Kubernetes çš„åŒæ—¶æŒ‰ç…§å®éªŒè¿›è¡Œæ“ä½œï¼Œä½†ä½ å¯èƒ½éœ€è¦æ²¿é€”åšä¸€äº›å°æ”¹åŠ¨ã€‚ç½‘å…³çš„æœåŠ¡åœ°å€ä»&lt;code>http://gateway:8080&lt;/code>æ”¹ä¸º&lt;code>http://gateway.openfaas:8080&lt;/code>ã€‚è¿™äº›å·®å¼‚å·²ç»å°½å¯èƒ½åœ°è¢«è®°å½•ä¸‹æ¥ï¼Œæ¯ä¸ªå®éªŒå®¤éƒ½æä¾›äº†æ›¿ä»£æ–¹æ¡ˆã€‚&lt;/p>
&lt;h3 id="åœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šåˆ›å»ºä¸€ä¸ªæœ¬åœ°é›†ç¾¤">åœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šåˆ›å»ºä¸€ä¸ªæœ¬åœ°é›†ç¾¤&lt;/h3>
&lt;h4 id="_k3s-ä½¿ç”¨-k3d_">&lt;em>k3s ä½¿ç”¨ k3d&lt;/em>&lt;/h4>
&lt;p>å¦‚æœä½ çš„ç”µè„‘ä¸Šæœ‰ Dockerï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ Rancher å®éªŒå®¤æ‰˜ç®¡çš„&lt;code>k3d&lt;/code>å·¥å…·ã€‚å®ƒå®‰è£…äº†ä¸€ä¸ªè½»é‡çº§çš„ Kubernetes ç‰ˆæœ¬ï¼Œå«åš&lt;code>k3s&lt;/code>ï¼Œå¹¶åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨ä»»ä½•æœ‰ Docker çš„ç”µè„‘ä¸Šè¿è¡Œã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/rancher/k3d" target="_blank" rel="noopener"
>å®‰è£… k3d&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯åŠ¨ä¸€ä¸ªé›†ç¾¤&lt;/p>
&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>&lt;code>k3d cluster create CLUSTER_NAME&lt;/code>åˆ›å»ºä¸€ä¸ªæ–°çš„å•èŠ‚ç‚¹é›†ç¾¤ï¼ˆ=1 ä¸ªè¿è¡Œ k3s çš„å®¹å™¨+1 ä¸ªè´Ÿè½½å‡è¡¡å™¨å®¹å™¨ï¼‰&lt;/li>
&lt;li>2.kubectl çš„ä¸Šä¸‹æ–‡ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä½ å¯ä»¥ç”¨&lt;code>kubectl config get-contexts&lt;/code>æ¥æ£€æŸ¥ã€‚&lt;/li>
&lt;li>æ‰§è¡Œä¸€äº›å‘½ä»¤ï¼Œå¦‚&lt;code>kubectl get pods --all-namespaces&lt;/code>ã€‚
å¦‚æœä½ æƒ³åˆ é™¤é»˜è®¤é›†ç¾¤&lt;code>k3d cluster delete CLUSTER_NAME&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;h4 id="_docker-for-mac_">&lt;em>Docker for Mac&lt;/em>&lt;/h4>
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.docker.com/v17.12/docker-for-mac/install/" target="_blank" rel="noopener"
>å®‰è£… Docker for Mac&lt;/a>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>è¯·æ³¨æ„ï¼ŒKubernetes ä»…åœ¨ Docker for Mac 17.12 CE åŠä»¥ä¸Šç‰ˆæœ¬ä¸­å¯ç”¨ã€‚&lt;/p>
&lt;/blockquote>
&lt;h4 id="_ä½¿ç”¨-minikube_">&lt;em>ä½¿ç”¨ Minikube&lt;/em>&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>è¦å®‰è£… Minikubeï¼Œè¯·æ ¹æ®ä½ çš„å¹³å°ä»&lt;a class="link" href="https://github.com/kubernetes/minikube/releases" target="_blank" rel="noopener"
>æœ€æ–°ç‰ˆæœ¬&lt;/a>ä¸‹è½½é€‚å½“çš„å®‰è£…ç¨‹åºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç°åœ¨è¿è¡Œ Minikube&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">minikube start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>minikube è™šæ‹Ÿæœºé€šè¿‡ä¸€ä¸ªä»…é™ä¸»æœºçš„ IP åœ°å€æš´éœ²ç»™ä¸»æœºç³»ç»Ÿã€‚ç”¨&lt;code>minikube ip&lt;/code>æ£€æŸ¥è¿™ä¸ª IPã€‚
è¿™æ˜¯ä½ ä»¥åå°†ç”¨äºç½‘å…³ URL çš„ IPã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šMinikube è¿˜éœ€è¦ä¸€ä¸ª Hypervisorï¼Œå¦‚ VirtualBox æˆ– Hyperkitï¼ˆåœ¨ MacOS ä¸Šï¼‰ã€‚æŒ‰ç…§ minikube çš„è¯´æ˜å’Œæ–‡ä»¶&lt;/p>
&lt;/blockquote>
&lt;h3 id="åœ¨äº‘ä¸Šåˆ›å»ºä¸€ä¸ªè¿œç¨‹é›†ç¾¤">åœ¨äº‘ä¸Šåˆ›å»ºä¸€ä¸ªè¿œç¨‹é›†ç¾¤&lt;/h3>
&lt;p>ä½ å¯ä»¥åœ¨äº‘ç«¯åˆ›å»ºä¸€ä¸ªè¿œç¨‹é›†ç¾¤ï¼Œäº«å—ä¸æœ¬åœ°å¼€å‘ä¸€æ ·çš„ä½“éªŒï¼ŒåŒæ—¶èŠ‚çœ RAM/CPU å’Œç”µæ± ã€‚è¿è¡Œä¸€ä¸ªé›†ç¾¤ 1-2 å¤©çš„è´¹ç”¨æ˜¯æœ€ä½çš„ã€‚&lt;/p>
&lt;h4 id="_åœ¨-digitalocean-çš„-kubernetes-æœåŠ¡ä¸Šè¿è¡Œ_">&lt;em>åœ¨ DigitalOcean çš„ Kubernetes æœåŠ¡ä¸Šè¿è¡Œ&lt;/em>&lt;/h4>
&lt;p>ä½ å¯ä»¥ä½¿ç”¨å…è´¹ç‚¹æ•°é€šè¿‡ DigitalOcean çš„ç”¨æˆ·ç•Œé¢åˆ›å»ºä¸€ä¸ªé›†ç¾¤ã€‚&lt;/p>
&lt;p>ç„¶å DigitalOcean çš„ä»ªè¡¨æ¿å°†æŒ‡å¯¼ä½ å¦‚ä½•é…ç½®ä½ çš„&lt;code>kubectl&lt;/code>å’Œ&lt;code>KUBECONFIG&lt;/code>æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨å®éªŒå®¤ä¸­ä½¿ç”¨ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://m.do.co/c/8d4e75e9886f" target="_blank" rel="noopener"
>ç”³è¯·ä½ çš„å…è´¹ç‚¹æ•°&amp;ndash;30 å¤©å†…æœ‰ 50 ç¾å…ƒçš„ç‚¹æ•°ã€‚&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>å³ä½¿ä½ å·²ç»ç”³è¯·äº†å…è´¹å­¦åˆ†ï¼Œä¸€ä¸ª 2-3 ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ 24-48 å°æ—¶çš„è¿è¡Œè´¹ç”¨ä¹Ÿæ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ã€‚&lt;/p>
&lt;p>&lt;em>ç‚¹å‡»ä»ªè¡¨æ¿å·¦ä¾§é¢æ¿ä¸Šçš„ Kubernetes&lt;/em>ï¼Œç„¶åç‚¹å‡» &lt;code>å¯ç”¨æœ‰é™è®¿é—®&lt;/code>&lt;/p>
&lt;p>_ä¸€æ—¦ç™»å½•ï¼Œç‚¹å‡» Kubernetes_èœå•é¡¹å¹¶åˆ›å»ºä¸€ä¸ªé›†ç¾¤ã€‚&lt;/p>
&lt;p>å»ºè®®ä½¿ç”¨æœ€æ–°çš„ Kubernetes ç‰ˆæœ¬ï¼Œå¹¶é€‰æ‹©ç¦»ä½ æœ€è¿‘çš„æ•°æ®ä¸­å¿ƒåŒºåŸŸï¼Œä»¥å°½é‡å‡å°‘å»¶æ—¶ã€‚&lt;/p>
&lt;ul>
&lt;li>åœ¨ &lt;code>æ·»åŠ èŠ‚ç‚¹æ± &lt;/code>ä¸‹&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ 2 ä¸ª 4GB / 2vCPU&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šå¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥åœ¨ä»¥åæ·»åŠ æ›´å¤šçš„å®¹é‡&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>ä¸‹è½½&lt;a class="link" href="https://github.com/digitalocean/doctl#installing-doctl" target="_blank" rel="noopener"
>doctl&lt;/a>CLI å¹¶æŠŠå®ƒæ”¾åœ¨ä½ çš„è·¯å¾„ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨æ‚¨çš„ DigitalOcean ä»ªè¡¨æ¿ä¸Šåˆ›å»ºä¸€ä¸ª&lt;a class="link" href="https://cloud.digitalocean.com/account/api/tokens/new" target="_blank" rel="noopener"
>API å¯†é’¥&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>è¿½è¸ªæ‚¨çš„ API å¯†é’¥ï¼ˆå°†å…¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼‰ã€‚&lt;/p>
&lt;ul>
&lt;li>è®¤è¯ CLI&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">doctl auth init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç²˜è´´ä½ çš„ API å¯†é’¥&lt;/p>
&lt;ul>
&lt;li>ç°åœ¨è·å¾—é›†ç¾¤çš„åç§°ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ doctl k8s cluster list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GUID workshop-lon1 nyc1 1.13.5-do.1 provisioning workshop-lon1-1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ä¿å­˜ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä½¿&lt;code>kubectl&lt;/code>æŒ‡å‘æ–°é›†ç¾¤ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">doctl k8s cluster kubeconfig save workshop-lon1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ éœ€è¦åˆ‡æ¢ä½ çš„ Kubernetes ä¸Šä¸‹æ–‡ä»¥æŒ‡å‘æ–°çš„é›†ç¾¤ã€‚&lt;/p>
&lt;p>ç”¨&lt;code>kubectl config get-contexts&lt;/code>æ‰¾åˆ°é›†ç¾¤åç§°ï¼Œå¦‚æœå®ƒæ²¡æœ‰çªå‡ºæ˜¾ç¤ºï¼Œåˆ™è¾“å…¥&lt;code>kubectl config set-context &amp;lt;context-name&amp;gt;&lt;/code>ã€‚&lt;/p>
&lt;h4 id="_åœ¨-gkeè°·æ­Œ-kubernetes-å¼•æ“ä¸Šè¿è¡Œ_">&lt;em>åœ¨ GKEï¼ˆè°·æ­Œ Kubernetes å¼•æ“ï¼‰ä¸Šè¿è¡Œ&lt;/em>&lt;/h4>
&lt;p>ç™»å½•åˆ°è°·æ­Œäº‘ï¼Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸ºå…¶å¯ç”¨è®¡è´¹ã€‚å¦‚æœä½ æ²¡æœ‰è´¦æˆ·ï¼Œä½ å¯ä»¥&lt;a class="link" href="https://cloud.google.com/free/" target="_blank" rel="noopener"
>åœ¨è¿™é‡Œ&lt;/a>æ³¨å†Œï¼Œè·å¾—å…è´¹ç‚¹æ•°ã€‚&lt;/p>
&lt;p>å®‰è£…&lt;a class="link" href="https://cloud.google.com/sdk/docs" target="_blank" rel="noopener"
>Google Cloud SDK&lt;/a> - è¿™å°†ä½¿&lt;code>gcloud&lt;/code>å’Œ&lt;code>kubectl&lt;/code>å‘½ä»¤å¯ç”¨ã€‚
å¯¹äº Windowsï¼Œè¯·æŒ‰ç…§&lt;a class="link" href="https://cloud.google.com/sdk/docs/#windows" target="_blank" rel="noopener"
>æ–‡æ¡£&lt;/a>ä¸­çš„è¯´æ˜ã€‚&lt;/p>
&lt;p>å®‰è£… gcloud å‘½ä»¤è¡Œå·¥å…·åï¼Œç”¨&lt;code>gcloud init&lt;/code>é…ç½®ä½ çš„é¡¹ç›®ï¼Œå¹¶è®¾ç½®é»˜è®¤é¡¹ç›®ã€è®¡ç®—åŒºåŸŸå’ŒåŒºåŸŸï¼ˆç”¨ä½ è‡ªå·±çš„é¡¹ç›®æ›¿æ¢&lt;code>PROJECT_ID&lt;/code>ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">gcloud config &lt;span class="nb">set&lt;/span> project PROJECT_ID
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud config &lt;span class="nb">set&lt;/span> compute/region us-central1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud config &lt;span class="nb">set&lt;/span> compute/zone us-central1-a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ç”¨ Kubernetes æœåŠ¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">gcloud services &lt;span class="nb">enable&lt;/span> container.googleapis.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£… kubectlã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">gcloud components install kubectl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºä¸€ä¸ª Kubernetes é›†ç¾¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ gcloud container clusters create openfaas &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--zone&lt;span class="o">=&lt;/span>us-central1-a &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--num-nodes&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--machine-type&lt;span class="o">=&lt;/span>n1-standard-2 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--disk-size&lt;span class="o">=&lt;/span>&lt;span class="m">30&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--no-enable-cloud-logging
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸º &lt;code>kubectl&lt;/code>è®¾ç½®å‡­è¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">gcloud container clusters get-credentials openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºä¸€ä¸ªé›†ç¾¤ç®¡ç†å‘˜è§’è‰²ç»‘å®š:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ kubectl create clusterrolebinding &lt;span class="s2">&amp;#34;cluster-admin-&lt;/span>&lt;span class="k">$(&lt;/span>whoami&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--clusterrole&lt;span class="o">=&lt;/span>cluster-admin &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--user&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>gcloud config get-value core/account&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨éªŒè¯&lt;code>kubectl&lt;/code>å·²ç»é…ç½®åˆ° GKE é›†ç¾¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gke-name-default-pool-eceef152-qjmt Ready &amp;lt;none&amp;gt; 1h v1.10.7-gke.2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="éƒ¨ç½²-openfaas">éƒ¨ç½² OpenFaaS&lt;/h2>
&lt;p>éƒ¨ç½² OpenFaaS çš„è¯´æ˜ä¼šæ—¶å¸¸æ”¹å˜ï¼Œå› ä¸ºæˆ‘ä»¬åŠªåŠ›ä½¿å…¶æ›´åŠ ç®€å•ã€‚&lt;/p>
&lt;h3 id="å®‰è£…-openfaas">å®‰è£… OpenFaaS&lt;/h3>
&lt;p>æœ‰ä¸‰ç§æ–¹å¼æ¥å®‰è£… OpenFaaSï¼Œä½ å¯ä»¥é€‰æ‹©å¯¹ä½ å’Œä½ çš„å›¢é˜Ÿæœ‰æ„ä¹‰çš„æ–¹å¼ã€‚åœ¨è¿™ä¸ªç ”è®¨ä¼šä¸Šï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®˜æ–¹çš„å®‰è£…ç¨‹åº&lt;code>arkade&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>arkadeåº”ç”¨å®‰è£…&lt;/code> - arkade ä½¿ç”¨å…¶å®˜æ–¹èˆµæ‰‹å›¾å®‰è£… OpenFaaSã€‚å®ƒè¿˜å¯ä»¥é€šè¿‡ç”¨æˆ·å‹å¥½çš„ CLI æä¾›å…¶ä»–è½¯ä»¶ï¼Œå¦‚&lt;code>cert-manager&lt;/code>å’Œ&lt;code>nginx-ingress&lt;/code>ã€‚è¿™æ˜¯æœ€ç®€å•å’Œæœ€å¿«é€Ÿçš„æ–¹å¼æ¥å¯åŠ¨å’Œè¿è¡Œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>èˆµæ‰‹å›¾ - ç†æ™ºçš„é»˜è®¤å€¼ï¼Œæ˜“äºé€šè¿‡ YAML æˆ– CLI æ ‡å¿—è¿›è¡Œé…ç½®ã€‚å®‰å…¨é€‰é¡¹ï¼Œå¦‚ &lt;code>Helm æ¨¡æ¿&lt;/code>æˆ– &lt;code>Helm 3&lt;/code>ï¼Œä¹Ÿé€‚ç”¨äºé‚£äº›åœ¨é™åˆ¶æ€§ç¯å¢ƒä¸­å·¥ä½œçš„äººã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ™®é€š YAML æ–‡ä»¶ - ç¡¬ç¼–ç çš„è®¾ç½®/å€¼ã€‚åƒ Kustomize è¿™æ ·çš„å·¥å…·å¯ä»¥æä¾›è‡ªå®šä¹‰è®¾ç½®&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="ç”¨arkadeå®‰è£…">ç”¨&lt;code>arkade&lt;/code>å®‰è£…&lt;/h4>
&lt;ul>
&lt;li>è·å– arkade&lt;/li>
&lt;/ul>
&lt;p>å¯¹äº MacOS / Linux:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># MacOS users may need to run &amp;#34;bash&amp;#34; first if this command fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -SLsf https://dl.get-arkade.dev/ &lt;span class="p">|&lt;/span> sudo sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äº Windowsã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl -SLsf https://dl.get-arkade.dev/ &lt;span class="p">|&lt;/span> sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>å®‰è£… OpenFaaS åº”ç”¨ç¨‹åº&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æä¾› LoadBalancers çš„ç®¡ç†äº‘ Kubernetes æœåŠ¡ï¼Œé‚£ä¹ˆè¿è¡Œä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">arkade install openfaas --load-balancer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼š&lt;code>--load-balancer&lt;/code>æ ‡å¿—çš„é»˜è®¤å€¼æ˜¯&lt;code>false&lt;/code>ï¼Œæ‰€ä»¥é€šè¿‡è¯¥æ ‡å¿—ï¼Œå®‰è£…å°†å‘ä½ çš„äº‘æä¾›å•†è¯·æ±‚ä¸€ä¸ªã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æœ¬åœ° Kubernetes é›†ç¾¤æˆ–è™šæ‹Ÿæœºï¼Œé‚£ä¹ˆè¯·è¿è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">arkade install openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨åé¢çš„å®éªŒå®¤ä¸­ï¼Œæˆ‘ä»¬å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Kubernetes Ingress è®¾ç½®ä¸€ä¸ªå¸¦æœ‰ TLS çš„è‡ªå®šä¹‰åŸŸã€‚&lt;/p>
&lt;h4 id="æˆ–è€…ç”¨-helm-å®‰è£…é«˜çº§">æˆ–è€…ç”¨ helm å®‰è£…ï¼ˆé«˜çº§ï¼‰&lt;/h4>
&lt;p>å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;a class="link" href="https://github.com/openfaas/faas-netes/blob/master/chart/openfaas/README.md" target="_blank" rel="noopener"
>helm chart&lt;/a>çš„è¯´æ˜æ¥å®‰è£… OpenFaaSã€‚&lt;/p>
&lt;h3 id="ç™»å½•ä½ çš„-openfaas-ç½‘å…³">ç™»å½•ä½ çš„ OpenFaaS ç½‘å…³&lt;/h3>
&lt;ul>
&lt;li>æ£€æŸ¥ç½‘å…³æ˜¯å¦å‡†å¤‡å¥½äº†&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">kubectl rollout status -n openfaas deploy/gateway
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ ä½¿ç”¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œè™šæ‹Ÿæœºï¼Œæˆ–ä»»ä½•å…¶ä»–ç±»å‹çš„ Kubernetes åˆ†å¸ƒï¼Œè¯·è¿è¡Œä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">kubectl port-forward svc/gateway -n openfaas 8080:8080
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‘½ä»¤å°†æ‰“å¼€ä¸€ä¸ªä» Kubernetes é›†ç¾¤åˆ°æœ¬åœ°è®¡ç®—æœºçš„éš§é“ï¼Œè¿™æ ·ä½ å°±å¯ä»¥è®¿é—® OpenFaaS ç½‘å…³ã€‚è¿˜æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥è®¿é—® OpenFaaSï¼Œä½†è¿™å·²ç»è¶…å‡ºäº†æœ¬æ¬¡ç ”è®¨ä¼šçš„èŒƒå›´ã€‚&lt;/p>
&lt;p>ä½ çš„ç½‘å…³ URL æ˜¯ã€‚&lt;code>http://127.0.0.1:8080&lt;/code>&lt;/p>
&lt;p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç®¡ç†äº‘ Kubernetes æœåŠ¡ï¼Œé‚£ä¹ˆä»ä¸‹é¢çš„å‘½ä»¤ä¸­çš„&lt;code>EXTERNAL-IP&lt;/code>å­—æ®µä¸­è·å– LoadBalancer çš„ IP åœ°å€æˆ– DNS æ¡ç›®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">kubectl get svc -o wide gateway-external -n openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ çš„ URL å°†æ˜¯ä¸Šé¢çš„ IP æˆ– DNS æ¡ç›®ï¼Œç«¯å£ä¸º&lt;code>8080&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>ç™»å½•ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OPENFAAS_URL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1"># Populate as above&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This command retrieves your password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>kubectl get secret -n openfaas basic-auth -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;{.data.basic-auth-password}&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> base64 --decode&lt;span class="p">;&lt;/span> &lt;span class="nb">echo&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This command logs in and saves a file to ~/.openfaas/config.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> -n &lt;span class="nv">$PASSWORD&lt;/span> &lt;span class="p">|&lt;/span> faas-cli login --username admin --password-stdin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>æ£€æŸ¥&lt;code>faas-cli list&lt;/code>æ˜¯å¦å·¥ä½œã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ°¸ä¹…ä¿å­˜ä½ çš„-openfaas-url">æ°¸ä¹…ä¿å­˜ä½ çš„ OpenFaaS URL&lt;/h3>
&lt;p>ç¼–è¾‘&lt;code>~/.bashrc&lt;/code>æˆ–&lt;code>~/.bash_profile&lt;/code>&amp;ndash;å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒã€‚&lt;/p>
&lt;p>ç°åœ¨æ·»åŠ ä»¥ä¸‹å†…å®¹&amp;ndash;æŒ‰ç…§ä½ ä¸Šé¢çœ‹åˆ°çš„ URL è¿›è¡Œä¿®æ”¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OPENFAAS_URL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1"># populate as above&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨è½¬åˆ°&lt;a class="link" href="lab2.md" >å®éªŒå®¤ 2&lt;/a>&lt;/p></description></item><item><title>Openfaas Workshop Lab1</title><link>https://example.com/p/openfaas-workshop-lab1/</link><pubDate>Tue, 30 Mar 2021 09:54:25 +0800</pubDate><guid>https://example.com/p/openfaas-workshop-lab1/</guid><description>&lt;h1 id="lab-1---ä¸º-openfaas-åšå‡†å¤‡">Lab 1 - ä¸º OpenFaaS åšå‡†å¤‡&lt;/h1>
&lt;!-- raw HTML omitted -->
&lt;p>OpenFaaS éœ€è¦ä¸€ä¸ª&lt;a class="link" href="https://kubernetes.io" target="_blank" rel="noopener"
>Kubernetes&lt;/a>é›†ç¾¤æ¥è¿è¡Œã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤æˆ–å¤šèŠ‚ç‚¹é›†ç¾¤ï¼Œä¸ç®¡æ˜¯åœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿˜æ˜¯åœ¨äº‘ç«¯ã€‚&lt;/p>
&lt;p>ä»»ä½• OpenFaaS å‡½æ•°çš„åŸºæœ¬åŸä»¶éƒ½æ˜¯ä¸€ä¸ª Docker é•œåƒï¼Œå®ƒæ˜¯ä½¿ç”¨&lt;code>faas-cli&lt;/code>å·¥å…·é“¾æ„å»ºçš„ã€‚&lt;/p>
&lt;h2 id="å‰ææ¡ä»¶">å‰ææ¡ä»¶&lt;/h2>
&lt;p>è®©æˆ‘ä»¬æ¥å®‰è£… Dockerã€OpenFaaS CLI ä»¥åŠè®¾ç½® Kubernetesã€‚&lt;/p>
&lt;h3 id="docker">Docker&lt;/h3>
&lt;p>é€‚ç”¨äº Mac&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://store.docker.com/editions/community/docker-ce-desktop-mac" target="_blank" rel="noopener"
>Docker CE for Mac Edge Edition&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>é€‚ç”¨äº Windows&lt;/p>
&lt;ul>
&lt;li>ä»…ä½¿ç”¨ Windows 10 Pro æˆ–ä¼ä¸šç‰ˆ&lt;/li>
&lt;li>å®‰è£…&lt;a class="link" href="https://store.docker.com/editions/community/docker-ce-desktop-windows" target="_blank" rel="noopener"
>Docker CE for Windows&lt;/a>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>è¯·ç¡®ä¿é€šè¿‡ä½¿ç”¨ Windows ä»»åŠ¡æ é€šçŸ¥åŒºçš„ Docker èœå•æ¥ä½¿ç”¨&lt;strong>Linux&lt;/strong>å®¹å™¨çš„ Docker å®ˆæŠ¤ç¨‹åºã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>å®‰è£…&lt;a class="link" href="https://git-scm.com/downloads" target="_blank" rel="noopener"
>Git Bash&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>å½“ä½ å®‰è£… git bash æ—¶ï¼Œé€‰æ‹©ä»¥ä¸‹é€‰é¡¹ã€‚&lt;code>install UNIX commands&lt;/code>å’Œ&lt;code>use true-type font&lt;/code>ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šè¯·åœ¨æ‰€æœ‰æ­¥éª¤ä¸­ä½¿ç”¨&lt;em>Git Bash&lt;/em>ï¼šä¸è¦è¯•å›¾ä½¿ç”¨&lt;em>PowerShell&lt;/em>ã€&lt;em>WSL&lt;/em>æˆ–&lt;em>Bash for Windows&lt;/em>ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>Linux - Ubuntu æˆ– Debian&lt;/p>
&lt;ul>
&lt;li>Docker CE for Linux&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ä½ å¯ä»¥ä»[Docker Store]ï¼ˆ&lt;a class="link" href="https://store.docker.com" target="_blank" rel="noopener"
>https://store.docker.com&lt;/a>ï¼‰å®‰è£… Docker CEã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ³¨æ„ï¼šä½œä¸ºæœ€åçš„æ‰‹æ®µï¼Œå¦‚æœä½ æœ‰ä¸€å°ä¸å…¼å®¹çš„ PCï¼Œä½ å¯ä»¥åœ¨&lt;a class="link" href="https://labs.play-with-docker.com/" target="_blank" rel="noopener"
>https://labs.play-with-docker.com/&lt;/a>ä¸Šé¢ä½“éªŒã€‚&lt;/p>
&lt;h3 id="openfaas-cli">OpenFaaS CLI&lt;/h3>
&lt;p>ä½ å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„ bash è„šæœ¬æ¥å®‰è£… OpenFaaS CLIï¼Œ&lt;code>brew&lt;/code>ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œä½†å¯èƒ½ä¼šè½åä¸€åˆ°ä¸¤ä¸ªç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>åœ¨ MacOS æˆ– Linux ä¸‹ï¼Œåœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹ç¨‹åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># MacOS users may need to run &amp;#34;bash&amp;#34; first if this command fails&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl -sLSf https://cli.openfaas.com &lt;span class="p">|&lt;/span> sudo sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äº Windowsï¼Œåœ¨&lt;em>Git Bash&lt;/em>ä¸­è¿è¡Œè¿™ä¸ªã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl -sLSf https://cli.openfaas.com &lt;span class="p">|&lt;/span> sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œä½ å¯ä»¥ä»&lt;a class="link" href="https://github.com/openfaas/faas-cli/releases" target="_blank" rel="noopener"
>releases page&lt;/a>æ‰‹åŠ¨ä¸‹è½½æœ€æ–°çš„&lt;code>faas-cli.exe&lt;/code>ã€‚ä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨æœ¬åœ°ç›®å½•æˆ–&lt;code>C:\Windows\&lt;/code>è·¯å¾„ä¸­ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ä»å‘½ä»¤æç¤ºç¬¦ä¸­è·å¾—ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æˆ‘ä»¬å°†ä½¿ç”¨&lt;code>faas-cli&lt;/code>æ¥æ­å»ºæ–°çš„å‡½æ•°ï¼Œæ„å»ºã€éƒ¨ç½²å’Œè°ƒç”¨å‡½æ•°ã€‚ä½ å¯ä»¥é€šè¿‡&lt;code>faas-cli --help&lt;/code>æ‰¾åˆ° cli çš„å¯ç”¨å‘½ä»¤ã€‚&lt;/p>
&lt;p>æµ‹è¯• &lt;code>faas-cli&lt;/code>ã€‚æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ– Git Bash çª—å£ï¼Œé”®å…¥&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli &lt;span class="nb">help&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">faas-cli version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é…ç½®-docker-hub">é…ç½® Docker Hub&lt;/h2>
&lt;p>æ³¨å†Œä¸€ä¸ª Docker Hub è´¦æˆ·ã€‚&lt;a class="link" href="https://hub.docker.com" target="_blank" rel="noopener"
>Docker Hub&lt;/a>å…è®¸ä½ åœ¨äº’è”ç½‘ä¸Šå‘å¸ƒä½ çš„ Docker é•œåƒï¼Œä»¥ä¾¿åœ¨å¤šèŠ‚ç‚¹é›†ç¾¤ä¸Šä½¿ç”¨æˆ–ä¸æ›´å¹¿æ³›çš„ç¤¾åŒºåˆ†äº«ã€‚æˆ‘ä»¬å°†åœ¨ç ”è®¨ä¼šæœŸé—´ä½¿ç”¨ Docker Hub æ¥å‘å¸ƒæˆ‘ä»¬çš„å‡½æ•°ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥åœ¨è¿™é‡Œæ³¨å†Œã€‚&lt;a class="link" href="https://hub.docker.com" target="_blank" rel="noopener"
>Docker Hub&lt;/a>&lt;/p>
&lt;p>æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ– Git Bash çª—å£ï¼Œç”¨ä½ ä¸Šé¢æ³¨å†Œçš„ç”¨æˆ·åç™»å½• Docker Hubã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker login
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šæ¥è‡ªç¤¾åŒºçš„æç¤º&amp;ndash;å¦‚æœä½ åœ¨ Windows æœºå™¨ä¸Šè¯•å›¾è¿è¡Œè¿™ä¸ªå‘½ä»¤æ—¶é‡åˆ°é”™è¯¯ï¼Œé‚£ä¹ˆç‚¹å‡»ä»»åŠ¡æ ä¸­çš„ Docker for Windows å›¾æ ‡ï¼Œåœ¨é‚£é‡Œç™»å½• Dockerï¼Œè€Œä¸æ˜¯ &lt;code>ç™»å½•/åˆ›å»º Docker ID&lt;/code>ã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>ä¸ºæ–°é•œåƒè®¾ç½®ä½ çš„ OpenFaaS å‰ç¼€&lt;/li>
&lt;/ul>
&lt;p>OpenFaaS é•œåƒå­˜å‚¨åœ¨ Docker æ³¨å†Œè¡¨æˆ– Docker Hub ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œä½¿ä½ çš„ç”¨æˆ·åè‡ªåŠ¨æ·»åŠ åˆ°ä½ åˆ›å»ºçš„æ–°å‡½æ•°ä¸­ã€‚è¿™å°†åœ¨ç ”è®¨ä¼šè¿‡ç¨‹ä¸­ä¸ºä½ èŠ‚çœä¸€äº›æ—¶é—´ã€‚&lt;/p>
&lt;p>ç¼–è¾‘&lt;code>~/.bashrc&lt;/code>æˆ–&lt;code>~/.bash_profile&lt;/code>&amp;ndash;å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒã€‚&lt;/p>
&lt;p>ç°åœ¨æ·»åŠ ä»¥ä¸‹å†…å®¹&amp;ndash;æŒ‰ç…§ä½ ä¸Šé¢çœ‹åˆ°çš„ URL è¿›è¡Œä¿®æ”¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OPENFAAS_PREFIX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1"># Populate with your Docker Hub username&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤">è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤&lt;/h3>
&lt;p>å®éªŒå®¤ä½¿ç”¨ Kubernetesï¼ŒSwarm å·²ç»ä¸å†è¢« OpenFaaS ç¤¾åŒºæ”¯æŒã€‚æœ‰äº›å®éªŒå®¤å¯ä»¥ç”¨äº faasdï¼Œä½†ä½ å¯èƒ½éœ€è¦æ”¹å˜å‘½ä»¤ï¼Œè€Œä¸”å½“ä½¿ç”¨ faasd çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æä¾›å¯¹è¯¥å®éªŒå®¤çš„æ”¯æŒã€‚&lt;/p>
&lt;ul>
&lt;li>Kubernetesã€‚&lt;a class="link" href="./lab1b.md" >Lab 1b&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Openfaas Workshop</title><link>https://example.com/p/openfaas-workshop/</link><pubDate>Tue, 30 Mar 2021 09:53:12 +0800</pubDate><guid>https://example.com/p/openfaas-workshop/</guid><description>&lt;h1 id="openfaas-workshop">openfaas-workshop&lt;/h1>
&lt;p>è¿™æ˜¯ä¸€ä¸ªè‡ªå®šè¿›åº¦çš„ç ”è®¨ä¼šï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨ OpenFaaS æ„å»ºã€éƒ¨ç½²å’Œè¿è¡Œæ— æœåŠ¡å™¨å‡½æ•°ã€‚&lt;/p>
&lt;p>&lt;img src="https://github.com/openfaas/media/raw/master/OpenFaaS_Magnet_3_1_png.png"
loading="lazy"
>&lt;/p>
&lt;p>åœ¨è¿™ä¸ªå·¥ä½œåŠä¸­ï¼Œä½ å°†é¦–å…ˆæŠŠ OpenFaaS éƒ¨ç½²åˆ°ä½ çš„ç¬”è®°æœ¬ç”µè„‘æˆ–ä½¿ç”¨ Docker for Mac æˆ– Windows çš„è¿œç¨‹é›†ç¾¤ã€‚ç„¶åä½ å°†å¯¹ OpenFaaS çš„ç”¨æˆ·ç•Œé¢ã€CLI å’Œå‡½æ•°å•†åº—è¿›è¡Œæµ‹è¯•ã€‚åœ¨ç”¨ Python æ„å»ºã€éƒ¨ç½²å’Œè°ƒç”¨ä½ è‡ªå·±çš„æ— æœåŠ¡å™¨å‡½æ•°ä¹‹åï¼Œä½ å°†ç»§ç»­å­¦ä¹ ä»¥ä¸‹å†…å®¹ï¼šç”¨ pip ç®¡ç†ä¾èµ–å…³ç³»ï¼Œé€šè¿‡å®‰å…¨ç§˜å¯†å¤„ç† API ä»¤ç‰Œï¼Œç”¨ Prometheus ç›‘æ§å‡½æ•°ï¼Œå¼‚æ­¥è°ƒç”¨å‡½æ•°ä»¥åŠå°†å‡½æ•°è¿æ¥èµ·æ¥åˆ›å»ºåº”ç”¨ç¨‹åºã€‚å®éªŒçš„é«˜æ½®æ˜¯è®©ä½ åˆ›å»ºè‡ªå·±çš„ GitHub æœºå™¨äººï¼Œå¯ä»¥è‡ªåŠ¨å“åº”é—®é¢˜ã€‚åŒæ ·çš„æ–¹æ³•å¯ä»¥é€šè¿‡ IFTTT.com è¿æ¥åˆ°åœ¨çº¿äº‹ä»¶æµ&amp;ndash;è¿™å°†ä½¿ä½ èƒ½å¤Ÿå»ºç«‹æœºå™¨äººã€è‡ªåŠ¨å›å¤å™¨ä»¥åŠä¸ç¤¾äº¤åª’ä½“å’Œç‰©è”ç½‘è®¾å¤‡çš„é›†æˆã€‚&lt;/p>
&lt;p>æœ€åï¼Œå®éªŒå®¤æ¶µç›–äº†æ›´å¤šçš„é«˜çº§ä¸»é¢˜ï¼Œå¹¶ç»™å‡ºäº†è¿›ä¸€æ­¥å­¦ä¹ çš„å»ºè®®ã€‚&lt;/p>
&lt;p>&lt;strong>è¯‘æ–‡&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="./translations/ja" >æ—¥æœ¬èª&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="./translations/cn" >ç®€ä½“ä¸­æ–‡&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="å…è´¹å­¦ä¹ ä½œä¸º-github-èµåŠ©å•†è¡¨ç¤ºæ„Ÿè°¢">å…è´¹å­¦ä¹ ï¼Œä½œä¸º GitHub èµåŠ©å•†è¡¨ç¤ºæ„Ÿè°¢&lt;/h2>
&lt;p>OpenFaaS è¿åŒè¿™äº›ææ–™éƒ½æ˜¯å…è´¹æä¾›çš„ï¼Œéœ€è¦æ—¶é—´å’Œç²¾åŠ›æ¥ç»´æŠ¤ã€‚&lt;/p>
&lt;ul>
&lt;li>æˆä¸º&lt;a class="link" href="https://github.com/sponsor/openfaas" target="_blank" rel="noopener"
>OpenFaaS on GitHub&lt;/a>çš„èµåŠ©å•†ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="è¦æ±‚">è¦æ±‚&lt;/h2>
&lt;p>æˆ‘ä»¬åœ¨&lt;a class="link" href="./lab1.md" >Lab 1&lt;/a>ä¸­è®²è§£äº†å¦‚ä½•å®‰è£…è¿™äº›éœ€æ±‚ã€‚è¯·åœ¨å‚åŠ è®²å¸ˆæŒ‡å¯¼çš„ç ”è®¨ä¼šä¹‹å‰åš&lt;a class="link" href="./lab1.md" >Lab 1&lt;/a>ã€‚&lt;/p>
&lt;ul>
&lt;li>å‡½æ•°å°†ç”¨ Python è¯­è¨€ç¼–å†™ï¼Œæ‰€ä»¥æœ‰ç¼–ç¨‹æˆ–è„šæœ¬ç»éªŒè€…ä¼˜å…ˆã€‚&lt;/li>
&lt;li>å®‰è£…æ¨èçš„ä»£ç ç¼–è¾‘å™¨/IDE &lt;a class="link" href="https://code.visualstudio.com/download" target="_blank" rel="noopener"
>VSCode&lt;/a>&lt;/li>
&lt;li>å¯¹äº Windowsï¼Œå®‰è£…&lt;a class="link" href="https://git-scm.com/downloads" target="_blank" rel="noopener"
>Git Bash&lt;/a>&lt;/li>
&lt;li>é¦–é€‰çš„æ“ä½œç³»ç»Ÿã€‚MacOS, Windows 10 Pro/Enterprise, Ubuntu Linux&lt;/li>
&lt;/ul>
&lt;p>Dockerã€‚&lt;/p>
&lt;ul>
&lt;li>Docker CE for &lt;a class="link" href="https://store.docker.com/editions/community/docker-ce-desktop-mac" target="_blank" rel="noopener"
>Mac&lt;/a>/&lt;a class="link" href="https://store.docker.com/editions/community/docker-ce-desktop-windows" target="_blank" rel="noopener"
>Windows&lt;/a> &lt;strong>è¾¹ç¼˜ç‰ˆ&lt;/strong>ã€‚&lt;/li>
&lt;li>Docker CE for Linux&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šä½œä¸ºæœ€åçš„æ‰‹æ®µï¼Œå¦‚æœä½ æœ‰ä¸€å°ä¸å…¼å®¹çš„ PCï¼Œä½ å¯ä»¥åœ¨&lt;a class="link" href="https://labs.play-with-docker.com/" target="_blank" rel="noopener"
>https://labs.play-with-docker.com/&lt;/a> ä¸Šè¿è¡Œè¯¥ç ”è®¨ä¼šã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="æ•™å‘˜æŒ‡å¯¼çš„ç ”è®¨ä¼š">æ•™å‘˜æŒ‡å¯¼çš„ç ”è®¨ä¼š&lt;/h2>
&lt;p>å¦‚æœä½ æ­£åœ¨å‚åŠ ä¸€ä¸ªç”±æ•™å¸ˆæŒ‡å¯¼çš„ç ”è®¨ä¼šï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åˆ†äº«ä¸€ä¸ªé“¾æ¥ï¼Œä»¥åŠ å…¥ OpenFaaS Slack ç¤¾åŒºã€‚ä½¿ç”¨ç ”è®¨ä¼šçš„æŒ‡å®šé¢‘é“æ¥è®¨è®ºè¯„è®ºã€é—®é¢˜å’Œå»ºè®®ã€‚&lt;/p>
&lt;h2 id="æŒ‘é€‰ä½ çš„è½¨é“">æŒ‘é€‰ä½ çš„è½¨é“&lt;/h2>
&lt;p>åœ¨å®éªŒå®¤ 1 ä¸­ï¼Œä½ å°†é€‰æ‹©ä½ çš„è½¨é“ï¼Œç„¶ååœ¨æ•´ä¸ªå®éªŒå®¤ä¸­æ³¨æ„ä½ çš„è½¨é“çš„å®¹å™¨åè°ƒå™¨æ‰€éœ€çš„ä»»ä½•ç‰¹æ®Šå‘½ä»¤ã€‚&lt;/p>
&lt;h3 id="kubernetes">Kubernetes&lt;/h3>
&lt;p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ OpenFaaS å­¦ä¹  Kubernetes ä¸Šçš„ Serverlessã€‚&lt;/p>
&lt;p>OpenFaaS ç¤¾åŒºçš„å»ºè®®æ˜¯ï¼Œä½ åœ¨ç”Ÿäº§ä¸­è¿è¡Œ Kubernetesï¼Œä½†ä½ èƒ½çš„æ‰€æœ‰çŸ¥è¯†éƒ½æ˜¯å¯ä»¥è½¬ç§»çš„ï¼Œå‡½æ•°ä¹Ÿä¸å¿…é‡æ–°æ„å»ºã€‚&lt;/p>
&lt;h2 id="lab-1---prepare-for-openfaaslab1md">&lt;a class="link" href="./lab1.md" >Lab 1 - Prepare for OpenFaaS&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>å®‰è£…å‰ææ¡ä»¶&lt;/li>
&lt;li>ç”¨ Kubernetes å»ºç«‹ä¸€ä¸ªå•èŠ‚ç‚¹é›†ç¾¤&lt;/li>
&lt;li>Docker Hub è´¦æˆ·&lt;/li>
&lt;li>OpenFaaS CLI&lt;/li>
&lt;li>éƒ¨ç½² OpenFaaS&lt;/li>
&lt;/ul>
&lt;h2 id="lab-2---test-things-outlab2md">&lt;a class="link" href="./lab2.md" >Lab 2 - Test things out&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>ä½¿ç”¨ UI é—¨æˆ·&lt;/li>
&lt;li>é€šè¿‡å‡½æ•°å•†åº—è¿›è¡Œéƒ¨ç½²&lt;/li>
&lt;li>äº†è§£ CLI çš„æƒ…å†µ&lt;/li>
&lt;li>ç”¨ Prometheus æŸ¥æ‰¾æŒ‡æ ‡&lt;/li>
&lt;/ul>
&lt;h2 id="lab-3---introduction-to-functionslab3md">&lt;a class="link" href="./lab3.md" >Lab 3 - Introduction to Functions&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>æ¶æ„æˆ–ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°&lt;/li>
&lt;li>å»ºç«‹ astronaut-finder å‡½æ•°&lt;/li>
&lt;li>ç”¨&lt;code>pip&lt;/code>æ·»åŠ ä¾èµ–&lt;/li>
&lt;li>æ•…éšœæ’é™¤ï¼šæ‰¾åˆ°å®¹å™¨çš„æ—¥å¿—&lt;/li>
&lt;li>æ•…éšœæ’é™¤ï¼šç”¨&lt;code>write_debug&lt;/code>è¿›è¡Œç²—ç•¥è¾“å‡º&lt;/li>
&lt;li>ä½¿ç”¨è‡ªå®šä¹‰å’Œç¬¬ä¸‰æ–¹è¯­è¨€æ¨¡æ¿&lt;/li>
&lt;li>ä½¿ç”¨æ¨¡æ¿å•†åº—å‘ç°ç¤¾åŒºæ¨¡æ¿&lt;/li>
&lt;/ul>
&lt;h2 id="lab-4---go-deeper-with-functionslab4md">&lt;a class="link" href="./lab4.md" >Lab 4 - Go deeper with functions&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="lab4.md#inject-configuration-through-environmental-variables" >é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥é…ç½®&lt;/a>
*åœ¨éƒ¨ç½²æ—¶ä½¿ç”¨ yaml
&lt;ul>
&lt;li>åŠ¨æ€åœ°ä½¿ç”¨ HTTP ä¸Šä¸‹æ–‡&amp;ndash;æŸ¥è¯¢å­—ç¬¦ä¸²/å¤´ä¿¡æ¯ç­‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å®‰å…¨æ€§ï¼šåªè¯»çš„æ–‡ä»¶ç³»ç»Ÿ&lt;/li>
&lt;li>&lt;a class="link" href="lab4.md#making-use-of-logging" >åˆ©ç”¨æ—¥å¿—&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="lab4.md#creat-workflows" >åˆ›å»ºå·¥ä½œæµ&lt;/a>
&lt;ul>
&lt;li>åœ¨å®¢æˆ·ç«¯ä¸²è”å‡½æ•°
*ä»å¦ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="lab-5---create-a-github-botlab5md">&lt;a class="link" href="./lab5.md" >Lab 5 - Create a GitHub bot&lt;/a>&lt;/h2>
&lt;blockquote>
&lt;p>å»ºç«‹ &lt;code>issue-bot&lt;/code>&amp;ndash;GitHub é—®é¢˜çš„è‡ªåŠ¨å›å¤è€…&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>è·å¾—ä¸€ä¸ª GitHub è´¦æˆ·&lt;/li>
&lt;li>ç”¨ ngrok å»ºç«‹ä¸€ä¸ªéš§é“&lt;/li>
&lt;li>åˆ›å»ºä¸€ä¸ª webhook æ¥æ”¶å™¨&lt;code>issue-bot&lt;/code>ã€‚&lt;/li>
&lt;li>æ¥æ”¶æ¥è‡ª GitHub çš„ webhooks&lt;/li>
&lt;li>éƒ¨ç½² SentimentAnalysis å‡½æ•°&lt;/li>
&lt;li>é€šè¿‡ GitHub çš„ API åº”ç”¨æ ‡ç­¾&lt;/li>
&lt;li>å®Œæˆå‡½æ•°&lt;/li>
&lt;/ul>
&lt;h2 id="lab-6---html-for-your-functionslab6md">&lt;a class="link" href="./lab6.md" >Lab 6 - HTML for your functions&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>ä»ä¸€ä¸ªå‡½æ•°ç”Ÿæˆå¹¶è¿”å›åŸºæœ¬çš„ HTML&lt;/li>
&lt;li>ä»ç£ç›˜è¯»å–å¹¶è¿”å›ä¸€ä¸ªé™æ€ HTML æ–‡ä»¶&lt;/li>
&lt;li>ä¸å…¶ä»–å‡½æ•°åä½œ&lt;/li>
&lt;/ul>
&lt;h2 id="lab-7---asynchronous-functionslab7md">&lt;a class="link" href="./lab7.md" >Lab 7 - Asynchronous Functions&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>åŒæ­¥åœ°ä¸å¼‚æ­¥åœ°è°ƒç”¨ä¸€ä¸ªå‡½æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŸ¥çœ‹é˜Ÿåˆ—å·¥ä½œè€…çš„æ—¥å¿—&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ requestbin å’Œ ngrok ä¸­ä½¿ç”¨&lt;code>X-Callback-Url&lt;/code>ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="lab-8---advanced-feature---timeoutslab8md">&lt;a class="link" href="./lab8.md" >Lab 8 - Advanced Feature - Timeouts&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>ç”¨&lt;code>read_timeout&lt;/code>è°ƒæ•´è¶…æ—¶æ—¶é—´&lt;/li>
&lt;li>é€‚åº”æ›´é•¿çš„è¿è¡Œå‡½æ•°&lt;/li>
&lt;/ul>
&lt;h2 id="lab-9---advanced-feature---auto-scalinglab9md">&lt;a class="link" href="./lab9.md" >Lab 9 - Advanced Feature - Auto-scaling&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>æŸ¥çœ‹è‡ªåŠ¨ç¼©æ”¾çš„æ“ä½œ
&lt;ul>
&lt;li>å…³äºæœ€å°å’Œæœ€å¤§å¤åˆ¶çš„ä¸€äº›è§è§£&lt;/li>
&lt;li>å‘ç°å¹¶è®¿é—®æœ¬åœ° Prometheus&lt;/li>
&lt;li>æ‰§è¡Œå’Œæ™®ç½—ç±³ä¿®æ–¯æŸ¥è¯¢&lt;/li>
&lt;li>ä½¿ç”¨ curl è°ƒç”¨ä¸€ä¸ªå‡½æ•°&lt;/li>
&lt;li>è§‚å¯Ÿè‡ªåŠ¨ç¼©æ”¾çš„å¯åŠ¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="lab-10---advanced-feature---secretslab10md">&lt;a class="link" href="./lab10.md" >Lab 10 - Advanced Feature - Secrets&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>è°ƒæ•´ issue-bot ä»¥ä½¿ç”¨ä¸€ä¸ªç§˜å¯†
&lt;ul>
&lt;li>ç”¨ faas-cli åˆ›å»ºä¸€ä¸ª Kubernetes ç§˜å¯†&lt;/li>
&lt;li>åœ¨å‡½æ•°ä¸­è®¿é—®ç§˜å¯†&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="lab-11---advanced-feature---trust-with-hmaclab11md">&lt;a class="link" href="./lab11.md" >Lab 11 - Advanced feature - Trust with HMAC&lt;/a>&lt;/h2>
&lt;ul>
&lt;li>ä½¿ç”¨ HMAC å¯¹å‡½æ•°åº”ç”¨ä¿¡ä»»&lt;/li>
&lt;/ul>
&lt;p>ä½ å¯ä»¥ä»ç¬¬ä¸€ä¸ªå®éªŒå®¤&lt;a class="link" href="lab1.md" >Lab 1&lt;/a>å¼€å§‹ã€‚&lt;/p>
&lt;h2 id="æ‹†è§£æ¸…ç†">æ‹†è§£/æ¸…ç†&lt;/h2>
&lt;p>ä½ å¯ä»¥æ‰¾åˆ°å¦‚ä½•åœæ­¢å’Œåˆ é™¤ OpenFaaS&lt;a class="link" href="https://docs.openfaas.com/deployment/troubleshooting/#uninstall-openfaas" target="_blank" rel="noopener"
>è¿™é‡Œ&lt;/a>&lt;/p>
&lt;h2 id="æ¥ä¸‹æ¥çš„æ­¥éª¤">æ¥ä¸‹æ¥çš„æ­¥éª¤&lt;/h2>
&lt;p>å¦‚æœä½ åœ¨ä¸€ä¸ªæ•™å¸ˆæŒ‡å¯¼çš„ç ”è®¨ä¼šä¸Šï¼Œå¹¶ä¸”å·²ç»å®Œæˆäº†å®éªŒï¼Œä½ å¯èƒ½æƒ³å›åˆ°å®éªŒå®¤ï¼Œç¼–è¾‘/ä¿®æ”¹ä»£ç å’Œå€¼ï¼Œæˆ–è€…è¿›è¡Œä¸€äº›ä½ è‡ªå·±çš„å®éªŒã€‚&lt;/p>
&lt;p>ä»¥ä¸‹æ˜¯ä¸€äº›åç»­ä»»åŠ¡/ä¸»é¢˜çš„æƒ³æ³•ã€‚&lt;/p>
&lt;h3 id="openfaas-äº‘">OpenFaaS äº‘&lt;/h3>
&lt;p>è¯•è¯• OpenFaaS çš„å¤šç”¨æˆ·ç®¡ç†ä½“éªŒ&amp;ndash;åœ¨ç¤¾åŒºé›†ç¾¤ä¸Šï¼Œæˆ–è€…é€šè¿‡æ‰˜ç®¡ä½ è‡ªå·±çš„ OpenFaaS äº‘ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.openfaas.com/openfaas-cloud/intro/" target="_blank" rel="noopener"
>Docs: OpenFaaS Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="tls">TLS&lt;/h3>
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.openfaas.com/reference/ssl/kubernetes-with-cert-manager/" target="_blank" rel="noopener"
>ç”¨ Kubernetes Ingress åœ¨ä½ çš„ç½‘å…³ä¸Šå¯ç”¨ HTTPS&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="cicd">CI/CD&lt;/h3>
&lt;p>è®¾ç½® Jenkinsã€Google Cloud Build æˆ– GitLabï¼Œä½¿ç”¨ OpenFaaS CLI æ„å»ºå’Œéƒ¨ç½²ä½ è‡ªå·±çš„å‡½æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.openfaas.com/reference/cicd/intro/" target="_blank" rel="noopener"
>CI/CD ä»‹ç»&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="å­˜å‚¨æ•°æ®åº“">å­˜å‚¨/æ•°æ®åº“&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://blog.alexellis.io/openfaas-storage-for-your-functions/" target="_blank" rel="noopener"
>ç”¨ Minio å°è¯•å¼€æºå¯¹è±¡å­˜å‚¨&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://blog.alexellis.io/serverless-databases-with-openfaas-and-mongo/" target="_blank" rel="noopener"
>å°è¯•ç”¨ Mongo å­˜å‚¨æ•°æ®çš„ OpenFaaS&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="ä»ªå™¨ä»ªè¡¨ç›‘æ§">ä»ªå™¨ä»ªè¡¨/ç›‘æ§&lt;/h3>
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.openfaas.com/architecture/metrics/#monitoring-functions" target="_blank" rel="noopener"
>æ¢ç´¢ Prometheus ä¸­å¯ç”¨çš„æŒ‡æ ‡&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="å…¶ä»–åšæ–‡å’Œæ•™ç¨‹">å…¶ä»–åšæ–‡å’Œæ•™ç¨‹&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.openfaas.com/blog/" target="_blank" rel="noopener"
>OpenFaaS åšå®¢ä¸Šçš„æ•™ç¨‹&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://github.com/openfaas/faas/blob/master/community.md" target="_blank" rel="noopener"
>ç¤¾åŒºåšå®¢æ–‡ç« &lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="é™„å½•">é™„å½•&lt;/h3>
&lt;p>&lt;a class="link" href="./appendix.md" >é™„å½•&lt;/a>åŒ…å«ä¸€äº›é¢å¤–çš„å†…å®¹ã€‚&lt;/p>
&lt;h2 id="acknowledgements">Acknowledgements&lt;/h2>
&lt;p>æ„Ÿè°¢@iyovcheva, @BurtonR, @johnmccabe, @laurentgrangeau, @stefanprodan, @kenfdev, @templum &amp;amp; @rgee0 å¯¹å®éªŒå®¤çš„è´¡çŒ®ã€æµ‹è¯•å’Œç¿»è¯‘ã€‚&lt;/p></description></item><item><title>Streaming 101</title><link>https://example.com/p/streaming-101/</link><pubDate>Fri, 26 Mar 2021 14:11:29 +0800</pubDate><guid>https://example.com/p/streaming-101/</guid><description>&lt;blockquote>
&lt;p>æœ‰æ•ˆçš„å¤æ‚ç³»ç»Ÿæ€»æ˜¯ä»ç®€å•&lt;/p>
&lt;/blockquote></description></item><item><title>K3d With Openfaas</title><link>https://example.com/p/k3d-with-openfaas/</link><pubDate>Wed, 10 Mar 2021 20:09:11 +0800</pubDate><guid>https://example.com/p/k3d-with-openfaas/</guid><description>&lt;h1 id="openfaas">openfaas&lt;/h1>
&lt;p>&lt;a class="link" href="https://github.com/openfaas/workshop/blob/master/lab1b.md" target="_blank" rel="noopener"
>https://github.com/openfaas/workshop/blob/master/lab1b.md&lt;/a>&lt;/p>
&lt;h2 id="å®‰è£…-docker">å®‰è£… docker&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">brew install homebrew/cask/docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®‰è£…å•èŠ‚ç‚¹-k8s">å®‰è£…å•èŠ‚ç‚¹ K8S&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">brew install k3d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é…ç½®å•èŠ‚ç‚¹ K8S é›†ç¾¤&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">k3d cluster create CLUSTER_NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k3d kubeconfig merge CLUSTER_NAME --kubeconfig-switch-context
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl get pods --all-namespaces
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®‰è£…-arkade">å®‰è£… arkade&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">curl -SLsf https://dl.get-arkade.dev/ | sudo sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®‰è£…-openfaas-å®¢æˆ·ç«¯-faas-cli">å®‰è£… openfaas å®¢æˆ·ç«¯ faas-cli&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">brew install faas-cli
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®‰è£…-openfaas-server-ç«¯">å®‰è£… openfaas server ç«¯&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">arkade install openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é…ç½® openfaas çš„ ui ç•Œé¢&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">kubectl rollout status -n openfaas deploy/gateway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl port-forward svc/gateway -n openfaas 8080:8080
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·å°±å¯ä»¥åœ¨æµè§ˆå™¨é‡Œè¾“å…¥ 127.0.0.1:8080 è¿›å…¥åˆ° openfaas çš„ ui ç•Œé¢äº†ã€‚&lt;/p>
&lt;p>ä½†æ˜¯å½“ä½ æ‰“å¼€é¡µé¢çš„æ—¶å€™ï¼Œè¦è¾“å…¥å¯†ç ï¼Œé‚£å°±éœ€è¦ä¸‹é¢çš„æ“ä½œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"># This command retrieves your password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PASSWORD=$(kubectl get secret -n openfaas basic-auth -o jsonpath=&amp;#34;{.data.basic-auth-password}&amp;#34; | base64 --decode; echo)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># This command logs in and saves a file to ~/.openfaas/config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo -n $PASSWORD | faas-cli login --username admin --password-stdin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼Œæ‹¿åˆ°å¯†ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">echo $(kubectl get secret -n openfaas basic-auth -o jsonpath=&amp;#34;{.data.basic-auth-password}&amp;#34; | base64 --decode; echo)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨æˆ·åæ˜¯ adminï¼Œå¯†ç è¾“å…¥åˆ°æµè§ˆå™¨é‡Œå³å¯ã€‚&lt;/p></description></item><item><title>æ¢ä¸€ç§æ–¹å¼æ€è€ƒ</title><link>https://example.com/p/%E6%8D%A2%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%80%9D%E8%80%83/</link><pubDate>Sat, 27 Feb 2021 12:16:48 +0800</pubDate><guid>https://example.com/p/%E6%8D%A2%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%80%9D%E8%80%83/</guid><description>&lt;ul>
&lt;li>é¢å‘å¯¹è±¡ä¸æ˜¯è®¾è®¡ä»£ç çš„å”¯ä¸€æ–¹æ³•&lt;/li>
&lt;li>å‡½æ•°å¼ç¼–ç¨‹ä¸ä¸€å®šæ˜¯å¤æ‚å’Œçº¯æ•°å­¦çš„&lt;/li>
&lt;li>ç¼–ç¨‹çš„åŸºç¡€ä¸æ˜¯èµ‹å€¼ã€if è¯­å¥å’Œå¾ªç¯&lt;/li>
&lt;li>å¹¶å‘ä¸ä¸€å®šéœ€è¦é”ã€ä¿¡å·é‡ã€ç›‘è§†å™¨ç­‰ç±»ä¼¼çš„ä¸œè¥¿&lt;/li>
&lt;li>è¿›ç¨‹ä¸å¿…æ¶ˆè€—å¤§é‡çš„èµ„æº&lt;/li>
&lt;li>å…ƒç¼–ç¨‹ä¸åªæ˜¯è¯­è¨€çš„é™„å±å“&lt;/li>
&lt;li>å³ä½¿ç¼–ç¨‹æ˜¯ä½ çš„å·¥ä½œï¼Œä¹Ÿåº”è¯¥æ˜¯å……æ»¡ä¹è¶£çš„&lt;/li>
&lt;/ul></description></item><item><title>å°ç™½éƒ½èƒ½å¿«é€Ÿä¸Šæ‰‹çš„ Vim é…ç½®</title><link>https://example.com/p/%E5%B0%8F%E7%99%BD%E9%83%BD%E8%83%BD%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E7%9A%84-vim-%E9%85%8D%E7%BD%AE/</link><pubDate>Sat, 20 Feb 2021 09:56:31 +0800</pubDate><guid>https://example.com/p/%E5%B0%8F%E7%99%BD%E9%83%BD%E8%83%BD%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E7%9A%84-vim-%E9%85%8D%E7%BD%AE/</guid><description>&lt;h1 id="é¦–å…ˆæŠŠæ‰€æœ‰çš„-vim-ç›¸å…³çš„éƒ½åˆ é™¤">é¦–å…ˆæŠŠæ‰€æœ‰çš„ vim ç›¸å…³çš„éƒ½åˆ é™¤&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">cd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf .vim*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="åˆ›å»ºè‡ªå·±çš„vimrc">åˆ›å»ºè‡ªå·±çš„.vimrc&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">vim .vimrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ä¸€äº›åŸºæœ¬çš„è®¾ç½®">ä¸€äº›åŸºæœ¬çš„è®¾ç½®&lt;/h1>
&lt;p>åœ¨.vimrc ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;#34; basic set
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set number
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set noswapfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set encoding=utf-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set fileencodings=utf-8,gb18030
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set backspace=eol,start,indent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set laststatus=2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set colorcolumn=80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set cursorline
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set linebreak
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set autoindent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set ignorecase
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set smartcase
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set ruler
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set diffopt+=internal,indent-heuristic,algorithm:patience
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set showcmd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set clipboard^=unnamed,unnamedplus
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set showmode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set mouse=a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set tabstop=2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set shiftwidth=4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set expandtab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set softtabstop=2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set showmatch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set incsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set nobackup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set autoread
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set wildmenu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set wildmode=longest:list,full
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set nofoldenable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">filetype plugin indent on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">syntax on
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ‰äº†ä¸Šé¢çš„è®¾ç½®ï¼Œä¼šè®©ä½ çš„ vim æ›´å¥½ç”¨ä¸€äº›ã€‚&lt;/p>
&lt;p>æ¯ä¸ªå‚æ•°çš„å«ä¹‰ï¼Œå¯ä»¥çœ‹ä¸‹é˜®ä¸€å³°å†™çš„&lt;a class="link" href="https://www.ruanyifeng.com/blog/2018/09/vimrc.html" target="_blank" rel="noopener"
>vim é…ç½®å…¥é—¨&lt;/a>&lt;/p>
&lt;h1 id="å®‰è£…-vim-plug">å®‰è£… vim-plug&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘æ˜¯ç”¨ vim-plug æ¥ç®¡ç† vim çš„æ’ä»¶é…ç½®çš„ï¼Œç”¨èµ·æ¥æ¯”è¾ƒç®€å•ã€‚&lt;/p>
&lt;p>å®ƒçš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼ŒæŠŠ github çš„ vim é…ç½® clone ä¸‹æ¥ï¼Œç„¶ååŠ è½½ã€‚&lt;/p>
&lt;h1 id="å®‰è£…ä¸€äº›æ’ä»¶">å®‰è£…ä¸€äº›æ’ä»¶&lt;/h1>
&lt;p>åœ¨.vimrc ä¸­ç»§ç»­æ·»åŠ ä¸‹é¢çš„ä»£ç &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;#34; Plugs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">call plug#begin()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;luochen1990/rainbow&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;jiangmiao/auto-pairs&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;mechatroner/rainbow_csv&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;liuchengxu/space-vim-theme&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;lvht/mru&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;preservim/tagbar&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;preservim/nerdtree&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;Xuyuanp/nerdtree-git-plugin&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;ryanoasis/vim-devicons&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;liuchengxu/nerdtree-dash&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;fatih/vim-go&amp;#39;, { &amp;#39;do&amp;#39;: &amp;#39;:GoUpdateBinaries&amp;#39; }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;godlygeek/tabular&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;plasticboy/vim-markdown&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;liuchengxu/eleline.vim&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Plug &amp;#39;tpope/vim-fugitive&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">call plug#end()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™äº›æ˜¯æˆ‘æ¯”è¾ƒå¸¸ç”¨çš„æ’ä»¶&lt;/p>
&lt;ul>
&lt;li>rainbow æ˜¯ä¸€ä¸ªæ¯ä¸ªæ‹¬å·éƒ½ç”¨ä¸åŒé¢œè‰²åŒºåˆ†ï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§&lt;/li>
&lt;li>auto-pairs æ˜¯è‡ªåŠ¨è¡¥å…¨æ‹¬å·&lt;/li>
&lt;li>rainbow_csv æ˜¯æ‰“å¼€ csv æ–‡ä»¶æ›´å¥½çœ‹ä¸€äº›çš„æ’ä»¶&lt;/li>
&lt;li>space-vim-theme æ˜¯ vim çš„ä¸€ä¸ªä¸»é¢˜&lt;/li>
&lt;li>mru æ˜¯æœ€è¿‘æœ€å¸¸ä½¿ç”¨çš„æ–‡ä»¶&lt;/li>
&lt;li>tagbar æ˜¾ç¤ºä»£ç ç»“æ„çš„&lt;/li>
&lt;li>nerdtree + nerdtree-git-plugin + vim-devicons + nerdtree-dash è¿™å‡ ä¸ªæ­é…èµ·æ¥ï¼Œå±•ç¤ºä¸€ä¸ªæ›´å¥½çœ‹çš„æ–‡ä»¶ç›®å½•&lt;/li>
&lt;li>vim-go å†™ go å¿…å¤‡&lt;/li>
&lt;li>tabular + vim-markdown å†™ markdown å¿…å¤‡çš„&lt;/li>
&lt;li>eleline çŠ¶æ€æ æ›´å¥½çœ‹ä¸€äº›&lt;/li>
&lt;li>vim-fugitive vim çš„ git æ’ä»¶&lt;/li>
&lt;/ul>
&lt;h1 id="æ’ä»¶çš„è‡ªå®šä¹‰è®¾ç½®">æ’ä»¶çš„è‡ªå®šä¹‰è®¾ç½®&lt;/h1>
&lt;p>å®‰è£…äº†è¿™ä¹ˆå¤šæ’ä»¶ï¼Œä¸€èˆ¬å¯èƒ½ä¼šè‡ªå®šä¹‰ä¸€ä¸‹ï¼Œæœ‰äº›æ’ä»¶éƒ½æä¾›äº†ä¸€äº›å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ let g:xxx çš„æ–¹å¼å»è‡ªå®šä¹‰&lt;/p>
&lt;p>è¿™äº›è®¾ç½®ä¹Ÿæ˜¯åœ¨ vimrc ä¸­ï¼Œè¦åœ¨æ’ä»¶å®‰è£…çš„ä¸‹é¢&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;#34; plug settings
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">let g:rainbow_active=1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="keymap-çš„è®¾ç½®">keymap çš„è®¾ç½®&lt;/h1>
&lt;p>æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€äº›å¿«æ·é”®åŠ å¿«æ“ä½œã€‚&lt;/p>
&lt;p>vim æœ‰ä¸€ä¸ª leader é”®ï¼Œè¿™ä¸ªé”®çš„ä½œç”¨æ˜¯æŒ‰ä¸‹ä¹‹åï¼Œå†æŒ‰åˆ«çš„é”®ï¼Œè§¦å‘ä¸€äº›å‘½ä»¤ã€‚ ä¹‹æ‰€ä»¥æœ‰è¿™ä¸ª leader é”®ï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢ç”¨æˆ·è‡ªå·±çš„å¿«æ·é”®ï¼Œè¦†ç›–äº†é»˜è®¤çš„ã€‚ vim é»˜è®¤çš„ leader é”®æ˜¯|,ä¹Ÿå°±æ˜¯ enter ä¸Šé¢é‚£ä¸ªä¸­ç«–çº¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;#34; key map
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nnoremap &amp;lt;silent&amp;gt; &amp;lt;c-m&amp;gt; :Mru&amp;lt;cr&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nnoremap &amp;lt;silent&amp;gt; &amp;lt;c-p&amp;gt; :call fzf#Open()&amp;lt;cr&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nnoremap &amp;lt;silent&amp;gt; &amp;lt;leader&amp;gt;t :TagbarToggle&amp;lt;cr&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nnoremap &amp;lt;silent&amp;gt; &amp;lt;leader&amp;gt;e :NERDTreeToggle&amp;lt;cr&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nnoremap &amp;lt;silent&amp;gt; &amp;lt;leader&amp;gt;f :NERDTreeFind&amp;lt;cr&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nnoremap &amp;lt;silent&amp;gt; &amp;lt;leader&amp;gt;c :call lv#Term()&amp;lt;cr&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="å¦‚æœä½ æƒ³å’Œæˆ‘çš„ä¸€æ ·">å¦‚æœä½ æƒ³å’Œæˆ‘çš„ä¸€æ ·&lt;/h1>
&lt;p>å‚è€ƒè¿™ä¸ª github é¡¹ç›®ï¼š&lt;a class="link" href="https://github.com/zhenfeng-zhu/vim" target="_blank" rel="noopener"
>https://github.com/zhenfeng-zhu/vim&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git clone --recursive https://github.com/zhenfeng-zhu/vim.git ~/.vim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s ~/.vim/init.vim ~/.vimrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åå°±å¯ä»¥æ„‰å¿«çš„è‡ªå·±å®šåˆ¶äº†ã€‚&lt;/p></description></item><item><title>Github Action è‡ªåŠ¨éƒ¨ç½² blog</title><link>https://example.com/p/github-action-%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2-blog/</link><pubDate>Thu, 18 Feb 2021 13:20:11 +0800</pubDate><guid>https://example.com/p/github-action-%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2-blog/</guid><description>&lt;p>ä¹‹å‰æˆ‘é‡‡ç”¨çš„æ–¹å¼æ˜¯ä¸¤ä¸ª github repo çš„æ–¹å¼ï¼š&lt;/p>
&lt;p>ä¸€ä¸ªå« hugo-blogï¼Œç”¨äºå­˜æ”¾ blog çš„æºæ–‡ä»¶&lt;/p>
&lt;p>ä¸€ä¸ªå« zhenfeng-zhu.github.ioï¼Œç”¨äºå­˜æ”¾ç”Ÿæˆä¹‹åçš„æ–‡ä»¶&lt;/p>
&lt;p>ç„¶åé€šè¿‡å†™ä¸€ä¸ª shell è„šæœ¬ï¼Œå°†ç”Ÿæˆä¹‹åçš„æ–‡ä»¶æ¨å‘ zhenfeng-zhu.github.io ä»“åº“ä¸­ï¼ŒåŒæ—¶å°† blog çš„æºæ–‡ä»¶ä¹Ÿåšäº†ä¸€ä¸ª backupã€‚åæ¥ä½¿ç”¨äº†ä¸€ä¸ª github action çš„æ–¹å¼ï¼Œ
å°±ä¸ç”¨åœ¨ä¸¤ä¸ªä»“åº“ä¸­è¿›è¡ŒæŠ˜è…¾ï¼Œä¸€åˆ‡éƒ½ç”± github action æ¥åšäº†ã€‚&lt;/p>
&lt;h1 id="æ–¹æ¡ˆ">æ–¹æ¡ˆ&lt;/h1>
&lt;h2 id="è®¾ç½®-workflow">è®¾ç½® workflow&lt;/h2>
&lt;p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª.github/workflows/gh-pages.yml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">main &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Set a branch to deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-18.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Fetch Hugo themes (true OR recursive)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">fetch-depth&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Fetch all history for .GitInfo and .Lastmod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;latest&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># extended: true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo --minify&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">github_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./public&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬çœ‹ä¸‹è¿™ä¸ª workflow çš„æ­¥éª¤ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>name å°±æ˜¯ github pages&lt;/p>
&lt;/li>
&lt;li>
&lt;p>on çš„æ„æ€ä»£è¡¨ï¼Œæ˜¯ä»€ä¹ˆè¡Œä¸ºä¼šè§¦å‘è¿™ä¸ª action çš„æ„å»ºã€‚
è¿™é‡Œæˆ‘ä»¬è®¾ç½®çš„æ˜¯å½“ push åˆ° main åˆ†æ”¯çš„æ—¶å€™è¿›è¡Œæ„å»ºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>jobs å°±æ˜¯å…·ä½“çš„å·¥ä½œï¼Œè¿™é‡ŒæŒ‡å®šäº†å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p>
&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>é¦–å…ˆæ˜¯åœ¨ Ubuntu 18.04 ä¸‹è¿›è¡Œæ„å»º&lt;/li>
&lt;li>è¿™äº›æ­¥éª¤éƒ½æ˜¯ç”¨çš„ actions/checkout@v2 æ¨¡æ¿è¿›è¡Œï¼Œæ‹‰å– submodulesã€‚&lt;/li>
&lt;li>setup hugoï¼šé‡‡ç”¨çš„æ˜¯ peaceiris/actions-hugo@v2 æ¨¡æ¿&lt;/li>
&lt;li>buildï¼šç®€å•çš„ hugo å‘½ä»¤&lt;/li>
&lt;li>deployï¼šé‡‡ç”¨ peaceiris/actions-gh-pages@v3 æ–¹å¼ï¼ŒæŠŠè‡ªå·±çš„ github token ä¹Ÿé…ç½®ä¸Šã€‚å…·ä½“å¯ä»¥ç‚¹è¿›å»çœ‹ä¸‹è¿™ä¸ªæ­¥éª¤åšäº†ä»€ä¹ˆæ“ä½œã€‚&lt;/li>
&lt;/ul>
&lt;p>ç„¶åæŠŠåšå®¢çš„æºæ–‡ä»¶ï¼Œæ”¾åœ¨ main åˆ†æ”¯é‡Œï¼Œå½“æˆ‘ä»¬ push ä¹‹åï¼Œå°±ä¼šå‘ç°å‡ºç°äº†ä¸€ä¸ª gh-pages åˆ†æ”¯ã€‚&lt;/p>
&lt;h2 id="è®¾ç½®-github-pages">è®¾ç½® github pages&lt;/h2>
&lt;p>æ‰“å¼€è¯¥ repo çš„ settingsï¼Œé€‰åˆ° GitHub Pagesã€‚&lt;/p>
&lt;p>æˆ‘ä»¬é€‰æ‹©åˆ†æ”¯æ˜¯ gh-pages å³å¯ã€‚&lt;/p></description></item><item><title>ç¼–ç¨‹è¯­è¨€çš„ä¸–ç•Œè§‚</title><link>https://example.com/p/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%9A%84%E4%B8%96%E7%95%8C%E8%A7%82/</link><pubDate>Thu, 18 Feb 2021 13:05:31 +0800</pubDate><guid>https://example.com/p/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%9A%84%E4%B8%96%E7%95%8C%E8%A7%82/</guid><description>&lt;h1 id="elixir">Elixir&lt;/h1>
&lt;ul>
&lt;li>everything is a process.&lt;/li>
&lt;li>process are strongly isolated.&lt;/li>
&lt;li>process creation and destruction is a lightweight operation.&lt;/li>
&lt;li>message passing is the only way for processes to interact.&lt;/li>
&lt;li>processes have unique names.&lt;/li>
&lt;li>if you know the name of a process you can send it a message.&lt;/li>
&lt;li>processes share no resources.&lt;/li>
&lt;li>error handling is non-local.&lt;/li>
&lt;li>processes do what they are supposed to do or fail.&lt;/li>
&lt;/ul>
&lt;h1 id="go">Go&lt;/h1>
&lt;ul>
&lt;li>simple, poetic, pithy&lt;/li>
&lt;li>don&amp;rsquo;t communicate by sharing memory, share memory by communicating&lt;/li>
&lt;li>concurrency is not parallelism&lt;/li>
&lt;li>channels orchestrate; mutexes serialize&lt;/li>
&lt;li>the bigger the interface, the weaker the abstraction&lt;/li>
&lt;li>make the zero value useful&lt;/li>
&lt;li>interface{} says nothing&lt;/li>
&lt;li>gofmt&amp;rsquo;s style is no one&amp;rsquo;s favorite, yet gofmt is everyone&amp;rsquo;s favorite&lt;/li>
&lt;li>A little copying is better than a little dependency&lt;/li>
&lt;/ul></description></item><item><title>å¦‚ä½•å»ºç«‹æŒ‡æ ‡ä½“ç³»</title><link>https://example.com/p/%E5%A6%82%E4%BD%95%E5%BB%BA%E7%AB%8B%E6%8C%87%E6%A0%87%E4%BD%93%E7%B3%BB/</link><pubDate>Thu, 18 Feb 2021 12:48:34 +0800</pubDate><guid>https://example.com/p/%E5%A6%82%E4%BD%95%E5%BB%BA%E7%AB%8B%E6%8C%87%E6%A0%87%E4%BD%93%E7%B3%BB/</guid><description>&lt;h1 id="ä»€ä¹ˆæ˜¯æŒ‡æ ‡ä½“ç³»">ä»€ä¹ˆæ˜¯æŒ‡æ ‡ä½“ç³»&lt;/h1>
&lt;p>æŒ‡æ ‡ä½“ç³»æ˜¯åœ¨ä¸šåŠ¡çš„ä¸åŒé˜¶æ®µï¼Œåˆ†æå¸ˆç‰µå¤´ä¸ä¸šåŠ¡æ–¹ååŠ©ï¼Œåˆ¶å®šä¸€å¥—èƒ½ä»å„ä¸ªç»´åº¦åæ˜ ä¸šåŠ¡çŠ¶å†µçš„å¾…å®æ–½æ¡†æ¶ã€‚&lt;/p>
&lt;h1 id="å…³é”®ç‚¹">å…³é”®ç‚¹&lt;/h1>
&lt;ul>
&lt;li>åœ¨ä¸šåŠ¡çš„å‰æœŸã€ä¸­æœŸå’ŒåæœŸï¼ŒæŒ‡æ ‡ä½“ç³»æ˜¯ä¸ä¸€æ ·çš„&lt;/li>
&lt;li>ä¸€å®šæ˜¯ç”±åˆ†æå¸ˆç‰µå¤´ä¸ä¸šåŠ¡æ–¹ååŠ©ï¼Œè€Œä¸æ˜¯é—­é—¨é€ è½¦&lt;/li>
&lt;li>ä»å„ä¸ªç»´åº¦å»ååº”ä¸šåŠ¡çš„æ ¸å¿ƒçŠ¶å†µï¼ŒæŒ‡æ ‡æœ‰å¾ˆå¤šç»´åº¦&lt;/li>
&lt;li>æœ€åå°±æ˜¯ä¸€ä¸ªå¤§çš„å®æ–½æ¡†æ¶ï¼Œä¸€å®šè¦å®æ–½ï¼Œå¦åˆ™å°±æ˜¯æµªè´¹å¤§å®¶çš„æ—¶é—´&lt;/li>
&lt;/ul>
&lt;h1 id="æŒ‡æ ‡é€‰å–çš„å‡ ä¸ªåŸåˆ™">æŒ‡æ ‡é€‰å–çš„å‡ ä¸ªåŸåˆ™&lt;/h1>
&lt;ul>
&lt;li>æ ¹æœ¬æ€§ï¼šå¯¹äºæ ¸å¿ƒæ•°æ®ä¸€å®šè¦ç†è§£åˆ°ä½å’Œå‡†ç¡®ï¼Œå¦‚æœè¿™é‡Œé”™äº†ï¼Œåé¢åŸºæœ¬å°±ä¸ç”¨çœ‹ã€‚&lt;/li>
&lt;li>å¯ç†è§£æ€§ï¼šæ‰€æœ‰æŒ‡æ ‡è¦é…ä¸Šä¸šåŠ¡è§£é‡Š&lt;/li>
&lt;li>ç»“æ„æ€§ï¼šèƒ½å¤Ÿå……åˆ†ä»å„ç»´åº¦å¯¹ä¸šåŠ¡è¿›è¡Œè§£è¯»ï¼Œæ–¹ä¾¿å½’å› ã€‚&lt;/li>
&lt;/ul>
&lt;h1 id="å»ºç«‹æ­¥éª¤">å»ºç«‹æ­¥éª¤&lt;/h1>
&lt;ol>
&lt;li>
&lt;p>ç†æ¸…ä¸šåŠ¡é˜¶æ®µå’Œæ–¹å‘
æˆ‘ä»¬éœ€è¦çŸ¥é“å½“å‰äº§å“æˆ–è€…ä¸šåŠ¡å¤„äºä»€ä¹ˆé˜¶æ®µï¼Œå…·ä½“çš„ä¸šåŠ¡æ–¹å‘æ˜¯ä»€ä¹ˆã€‚ä¸€èˆ¬éƒ½æ˜¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š
ç¬¬ä¸€é˜¶æ®µï¼šä¸šåŠ¡å‰æœŸã€‚åœ¨ä¸šåŠ¡çš„å‰æœŸæ›´å¤šçš„æ˜¯æƒ³è¦å¿«é€Ÿæ¨å‡ºæ¥ï¼Œæœ‰æ›´å¤šäººå»ä½¿ç”¨æˆ‘ä»¬çš„äº§å“ã€‚æ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬çš„æŒ‡æ ‡ä½“ç³»åº”è¯¥æ›´å¤šçš„å›´ç»•ç”¨æˆ·é‡æå‡åšå„ç§ç»´åº¦çš„æ‹†è§£
ç¬¬äºŒé˜¶æ®µï¼šä¸šåŠ¡ä¸­æœŸï¼ˆå¿«é€Ÿå‘å±•æœŸï¼‰ã€‚åœ¨ä¸šåŠ¡ä¸­æœŸï¼Œé™¤äº†å…³æ³¨ç›˜å­çš„å¤§å°ï¼Œè¿˜è¦çœ‹äº§å“çš„å¥åº·åº¦ã€‚
ç¬¬ä¸‰é˜¶æ®µï¼šä¸šåŠ¡åæœŸï¼ˆæˆç†ŸæœŸï¼‰ã€‚ä¸»è¦çœ‹å˜ç°èƒ½åŠ›ä»¥åŠå¸‚åœºä»½é¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¡®å®šæ ¸å¿ƒæŒ‡æ ‡
æ‰¾æ ¸å¿ƒæŒ‡æ ‡ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹å„¿ã€‚
åªèƒ½å¤šèŠ±æ—¶é—´å»è€ƒè™‘è¿™ä¸ªäº‹å„¿ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŒ‡æ ‡æ ¸å¿ƒç»´åº¦æ‹†è§£
æ ¸å¿ƒæŒ‡æ ‡çš„æ³¢åŠ¨å¿…ç„¶æ˜¯ç”±æŸç§ç»´åº¦çš„æ³¢åŠ¨å¼•èµ·ï¼Œæ‰€ä»¥ç›‘æ§æ ¸å¿ƒæŒ‡æ ‡æŒ‡æ ‡ï¼Œæœ¬è´¨æ˜¯ç›‘æ§æ ¸å¿ƒç»´åº¦ã€‚
é€šç”¨çš„æ‹†è§£æ–¹æ³•æ˜¯å…ˆå¯¹æ ¸å¿ƒæŒ‡æ ‡è¿›è¡Œå…¬å¼è®¡ç®—ï¼Œå†æŒ‰ç…§ä¸šåŠ¡è·¯å¾„æˆ–è€…ä¸šåŠ¡æ¨¡å—å»æ‹†è§£ã€‚
æ ¸å¿ƒæŒ‡æ ‡çš„æ‹†è§£ï¼Œéœ€è¦å¤šå’Œä¸šåŠ¡æ–¹è¿›è¡Œæ²Ÿé€šï¼ŒæŠŠèƒ½å¤Ÿè€ƒè™‘çš„æ¨¡å—éƒ½è€ƒè™‘è¿›å»ï¼ŒåŸºæœ¬ä¸Šå°±èƒ½æ¯”è¾ƒå…¨é¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŒ‡æ ‡å®£è´¯ã€å­˜æ¡£å’Œè½åœ°
å®£è´¯ï¼šå®é™…ä¸Šæ­å»ºå·æŒ‡æ ‡ä½“ç³»ä¹‹åï¼Œè¦å½“é¢è§¦è¾¾æ‰€æœ‰ç›¸å…³çš„ä¸šåŠ¡æ¥å£äººã€‚
å­˜æ¡£ï¼šåŒæ—¶å¯¹æŒ‡æ ‡çš„å£å¾„å’Œä¸šåŠ¡é€»è¾‘è¿›è¡Œè¯¦ç»†çš„æè¿°å­˜æ¡£ï¼Œä¹Ÿå°±æ˜¯æŒ‡æ ‡å£å¾„å½’æ¡£
è½åœ°ï¼šè½åœ°å°±æ˜¯å»ºç«‹æ ¸å¿ƒæŒ‡æ ‡çš„ç›¸å…³æŠ¥è¡¨ï¼Œå®é™…å·¥ä½œä¸­ï¼ŒæŠ¥è¡¨ä¼šåœ¨åŸ‹ç‚¹å‰å»ºå¥½ï¼Œè¿™æ ·ä¸€æ—¦ç‰ˆæœ¬ä¸Šçº¿å°±èƒ½ç«‹åˆ»çœ‹åˆ°æ•°æ®ï¼Œè¿™æ ·å„æ–¹çš„é…åˆåº¦å°±ä¼šå¾ˆé«˜ã€‚&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>ä¸šåŠ¡ä»£ç çš„æˆé•¿æœºä¼š</title><link>https://example.com/p/%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E7%9A%84%E6%88%90%E9%95%BF%E6%9C%BA%E4%BC%9A/</link><pubDate>Wed, 17 Feb 2021 17:45:40 +0800</pubDate><guid>https://example.com/p/%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E7%9A%84%E6%88%90%E9%95%BF%E6%9C%BA%E4%BC%9A/</guid><description>&lt;p>å¯¹äºå¤§éƒ¨åˆ†å…¬å¸è€Œè¨€ï¼Œèƒ½å¤Ÿå†™åº•å±‚ä»£ç æˆ–è€…ä¸­é—´ä»¶ä»£ç çš„äººæ€»æ˜¯æœ‰é™çš„ï¼Œå†™ä¸šåŠ¡ä»£ç ä¼šé¢ä¸´æ›´é«˜çš„å¤æ‚åº¦ã€‚è¿™é‡Œåˆ†ä¸‰ä¸ªå±‚æ¬¡æ¥çœ‹å…¶ä¸­çš„æœºä¼šï¼š&lt;/p>
&lt;ul>
&lt;li>ç¬¬ä¸€ä¸ªå±‚æ¬¡ï¼Œè®©ä»£ç å†™çš„ä¸ä¸€æ ·ã€‚å¯ä»ä»£ç è§„èŒƒã€å¯è¯»æ€§ã€å¯æ‰©å±•æ€§ç­‰è§’åº¦ç€æ‰‹ï¼Œè¿™ä¹Ÿæ˜¯ç¨‹åºå‘˜çš„åŸºæœ¬åŠŸã€‚&lt;/li>
&lt;li>ç¬¬äºŒä¸ªå±‚æ¬¡ï¼Œè€ƒè™‘ä¸šåŠ¡é—®é¢˜å’ŒæŠ€æœ¯é—®é¢˜çš„åŒ¹é…ã€‚å¯ä»å†™ä¸šåŠ¡ä»£ç ä¸­ç†è§£éœ€æ±‚ï¼Œå¹¶åšå¥½åˆ†æè®¾è®¡ã€‚è¢«åŠ¨æ¥æ”¶éœ€æ±‚å’Œå®ç°æ¥å£ï¼Œç¡®å®æˆé•¿ç©ºé—´ä¸å¤§ã€‚&lt;/li>
&lt;li>ç¬¬ä¸‰ä¸ªå±‚æ¬¡ï¼Œæ€»ç»“ç›¸å…³æ–¹æ³•ä½“ç³»ï¼Œæˆä¸ºä¸šåŠ¡åŠæŠ€æœ¯åŒæ–™ä¸“å®¶ã€‚&lt;/li>
&lt;/ul></description></item><item><title>unix å“²å­¦</title><link>https://example.com/p/unix-%E5%93%B2%E5%AD%A6/</link><pubDate>Wed, 17 Feb 2021 16:46:52 +0800</pubDate><guid>https://example.com/p/unix-%E5%93%B2%E5%AD%A6/</guid><description>&lt;ol>
&lt;li>è®©æ¯ä¸ªç¨‹åºéƒ½åšå¥½ä¸€ä»¶äº‹ã€‚è¦åšä¸€ä»¶æ–°çš„å·¥ä½œï¼Œå†™ä¸€ä¸ªæ–°ç¨‹åºï¼Œè€Œä¸æ˜¯é€šè¿‡æ·»åŠ â€œåŠŸèƒ½â€è®©è€ç¨‹åºå¤æ‚åŒ–ã€‚&lt;/li>
&lt;li>æœŸå¾…æ¯ä¸ªç¨‹åºçš„è¾“å‡ºæˆä¸ºå¦ä¸€ä¸ªç¨‹åºçš„è¾“å…¥ã€‚ä¸è¦å°†æ— å…³ä¿¡æ¯æ··å…¥è¾“å‡ºã€‚é¿å…ä½¿ç”¨ä¸¥æ ¼çš„åˆ—æ•°æ®æˆ–äºŒè¿›åˆ¶è¾“å…¥æ ¼å¼ã€‚ä¸è¦åšæŒäº¤äº’å¼è¾“å…¥ã€‚&lt;/li>
&lt;li>è®¾è®¡å’Œæ„å»ºè½¯ä»¶ï¼Œç”šè‡³æ˜¯æ“ä½œç³»ç»Ÿï¼Œè¦å°½æ—©å°è¯•ï¼Œæœ€å¥½åœ¨å‡ å‘¨å†…å®Œæˆã€‚ä¸è¦çŠ¹è±«ï¼Œæ‰”æ‰ç¬¨æ‹™çš„éƒ¨åˆ†ï¼Œé‡å»ºå®ƒä»¬ã€‚&lt;/li>
&lt;li>ä¼˜å…ˆä½¿ç”¨å·¥å…·æ¥å‡è½»ç¼–ç¨‹ä»»åŠ¡ï¼Œå³ä½¿å¿…é¡»æ›²çº¿æ•‘å›½ç¼–å†™å·¥å…·ï¼Œä¸”åœ¨ç”¨å®Œåå¾ˆå¯èƒ½è¦æ‰”æ‰å¤§éƒ¨åˆ†ã€‚&lt;/li>
&lt;/ol></description></item><item><title>Web å‰ç«¯æ€§èƒ½ä¼˜åŒ–</title><link>https://example.com/p/web-%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</link><pubDate>Fri, 20 Nov 2020 16:01:49 +0800</pubDate><guid>https://example.com/p/web-%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</guid><description>&lt;p>ä¸€èˆ¬æ¥è¯´ web å‰ç«¯æ˜¯æŒ‡ç½‘ç«™ä¸šåŠ¡é€»è¾‘ä¹‹å‰çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼šæµè§ˆå™¨åŠ è½½ã€ç½‘ç«™è§†å›¾æ¨¡å‹ã€å›¾ç‰‡æœåŠ¡ã€CDN æœåŠ¡ç­‰ç­‰ã€‚web å‰ç«¯ä¼˜åŒ–ä¸»è¦ä»å¦‚ä¸‹ä¸‰ä¸ªæ–¹é¢å…¥æ‰‹ï¼š&lt;/p>
&lt;h2 id="æµè§ˆå™¨è®¿é—®ä¼˜åŒ–">æµè§ˆå™¨è®¿é—®ä¼˜åŒ–&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>å‡å°‘ http è¯·æ±‚&lt;/strong>&lt;/p>
&lt;p>http åè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦å»ºç«‹é€šä¿¡é“¾è·¯è¿›è¡Œä¼ è¾“ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œä¸€èˆ¬æ¯ä¸ªè¯·æ±‚éƒ½ä¼šåˆ†é…ä¸€ä¸ªçº¿ç¨‹å»å¤„ç†ã€‚&lt;/p>
&lt;p>å‡å°‘ http è¯·æ±‚çš„ä¸»è¦æ‰‹æ®µæ˜¯&lt;strong>åˆå¹¶ CSS&lt;/strong>ã€&lt;strong>åˆå¹¶ js&lt;/strong>ã€&lt;strong>åˆå¹¶å›¾ç‰‡&lt;/strong>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜&lt;/strong>&lt;/p>
&lt;p>cssã€jsã€Logoã€å›¾æ ‡ç­‰é™æ€èµ„æºæ–‡ä»¶æ›´æ–°é¢‘ç‡è¾ƒä½ï¼Œå¯ä»¥å°†è¿™äº›æ–‡ä»¶ç¼“å­˜åœ¨æµè§ˆå™¨ä¸­ã€‚&lt;/p>
&lt;p>åœ¨æ›´æ–° js ç­‰æ–‡ä»¶çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¸æ˜¯å°†æ–‡ä»¶å†…å®¹æ›´æ–°ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œç„¶åæ›´æ–° html çš„å¼•ç”¨ã€‚&lt;/p>
&lt;p>æ›´æ–°é™æ€èµ„æºçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è¦é€é‡æ›´æ–°ï¼Œä»¥é¿å…ç”¨æˆ·æµè§ˆå™¨çš„å¤§é‡ç¼“å­˜å¤±æ•ˆï¼Œé€ æˆæœåŠ¡å™¨è´Ÿè½½å¢åŠ ã€ç½‘ç»œå µå¡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å¯ç”¨å‹ç¼©&lt;/strong>&lt;/p>
&lt;p>åœ¨æœåŠ¡å™¨å¯¹æ–‡ä»¶å‹ç¼©ï¼Œç„¶ååœ¨æµè§ˆå™¨ç«¯è§£å‹ç¼©ï¼Œå¯ä»¥å‡å°‘é€šä¿¡ä¼ è¾“çš„æ•°æ®é‡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>CSS æ”¾åœ¨é¡µé¢æœ€ä¸Šé¢ï¼Œjs æ”¾åœ¨é¡µé¢æœ€ä¸‹é¢&lt;/strong>&lt;/p>
&lt;p>æµè§ˆå™¨ä¼šåœ¨ä¸‹è½½å®Œå…¨éƒ¨ CSS ä¹‹åæ‰å¯¹æ•´ä¸ªé¡µé¢è¿›è¡Œæ¸²æŸ“ï¼Œè€Œæµè§ˆå™¨æ˜¯åœ¨åŠ è½½ js ä¹‹åå°±ç«‹å³æ‰§è¡Œï¼Œæœ‰å¯èƒ½ä¼šé˜»å¡æ•´ä¸ªé¡µé¢ã€‚å› æ­¤æœ€å¥½çš„åšæ³•å°±æ˜¯æŠŠ CSS æ”¾åœ¨æœ€ä¸Šé¢ï¼Œjs æ”¾åœ¨æœ€ä¸‹é¢ã€‚ä½†æ˜¯å¦‚æœæ˜¯é¡µé¢è§£æçš„æ—¶å€™å°±ç”¨åˆ° jsï¼Œä¹Ÿæ˜¯è¦ç›¸åº”çš„ js æ”¾åœ¨ä¸Šé¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å‡å°‘ cookie ä¼ è¾“&lt;/strong>&lt;/p>
&lt;p>cookie ä¼šåŒ…å«åœ¨æ¯æ¬¡è¯·æ±‚å’Œå“åº”ä¸­ï¼Œå¤ªå¤§çš„ cookie ä¼šå½±å“æ•°æ®ä¼ è¾“ï¼Œéœ€è¦æ…é‡è€ƒè™‘å“ªäº›æ•°æ®å†™å…¥ cookie ä¸­ã€‚&lt;/p>
&lt;p>å¯¹äºæŸäº›é™æ€èµ„æºçš„è®¿é—®ï¼Œå¦‚ css å’Œ js ç­‰ï¼Œå‘é€ cookie æ²¡æ„ä¹‰ï¼Œå¯ä»¥è€ƒè™‘é™æ€èµ„æºä½¿ç”¨ç‹¬ç«‹åŸŸåè®¿é—®ï¼Œé¿å…è¯·æ±‚é™æ€èµ„æºæ—¶å‘é€ cookieã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="cdn-åŠ é€Ÿ">CDN åŠ é€Ÿ&lt;/h2>
&lt;p>CDNï¼ˆcontent distribute networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œï¼‰çš„æœ¬è´¨ä»ç„¶æ˜¯ä¸€ä¸ªç¼“å­˜ã€‚å°†ç¼“å­˜æ”¾åœ¨ç¦»ç”¨æˆ·æœ€è¿‘çš„åœ°æ–¹ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ä»¥æœ€å¿«çš„é€Ÿåº¦è·å–æ•°æ®ã€‚&lt;/p>
&lt;p>CDN ç¼“å­˜çš„ä¸€èˆ¬æ˜¯é™æ€èµ„æºï¼Œå¦‚å›¾ç‰‡ã€æ–‡ä»¶ã€CSSã€jsã€é™æ€ç½‘é¡µç­‰ã€‚&lt;/p>
&lt;h2 id="åå‘ä»£ç†">åå‘ä»£ç†&lt;/h2>
&lt;p>åå‘ä»£ç†æœåŠ¡å™¨ä½äºç½‘ç«™ä¸­å¿ƒæœºæˆ¿çš„ä¸€ä¾§ï¼Œä»£ç†ç½‘ç«™ web æœåŠ¡å™¨æ¥æ”¶ http è¯·æ±‚ã€‚&lt;/p>
&lt;p>åå‘ä»£ç†å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿æŠ¤ç½‘ç«™å®‰å…¨ï¼Œæ¥è‡ªäº’è”ç½‘çš„è®¿é—®è¯·æ±‚å¿…é¡»ç»è¿‡ä»£ç†æœåŠ¡å™¨ï¼Œç›¸å½“äºåœ¨ web æœåŠ¡å™¨å’Œæ”»å‡»ä¹‹é—´åŠ äº†ä¸€ä¸ªå±éšœã€‚&lt;/p>
&lt;p>åå‘ä»£ç†ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ç¼“å­˜ï¼Œé™æ€èµ„æºè¢«ç¼“å­˜åœ¨åå‘ä»£ç†æœåŠ¡å™¨ï¼Œå½“ç”¨æˆ·è®¿é—®æ—¶ï¼Œå¯ä»¥ä»åå‘ä»£ç†æœåŠ¡å™¨ä¸Šè¿”å›ã€‚æœ‰äº›ç½‘ç«™ä¹Ÿä¼šå°†éƒ¨åˆ†åŠ¨æ€å†…å®¹ç¼“å­˜åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡å†…éƒ¨é€šçŸ¥æœºåˆ¶ï¼Œæ›´æ–°ç¼“å­˜ã€‚&lt;/p>
&lt;p>åå‘ä»£ç†ä¹Ÿå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ã€‚&lt;/p>
&lt;h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å&lt;/h2>
&lt;p>å¯ä»¥å‘ç°ï¼Œåœ¨ web å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ï¼Œæåˆ°æœ€å¤šçš„å°±æ˜¯ç¼“å­˜ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>ç½‘ç«™æ€§èƒ½ä¼˜åŒ–ç¬¬ä¸€å®šå¾‹ï¼šä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ç¼“å­˜ï¼&lt;/strong>&lt;/p>
&lt;/blockquote></description></item><item><title>å¤§å‹ç½‘ç«™å‘å±•å†ç¨‹</title><link>https://example.com/p/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B/</link><pubDate>Fri, 20 Nov 2020 16:00:59 +0800</pubDate><guid>https://example.com/p/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B/</guid><description>&lt;p>å‰å‡ å¤©è·Ÿä¸€ä¸ªæœ‹å‹èŠäº†ä¸€äº›å…³äºç½‘ç«™ç¼“å­˜åˆ†å¸ƒå¼çš„ä¸€äº›ä¸œè¥¿ï¼Œå‘ç°è‡ªå·±çš„çŸ¥è¯†è¿˜æ˜¯å¤ªè¿‡è´«ç˜ ã€‚ç†è®º+åè®®ï¼Œè¿™æ˜¯ç°åœ¨æˆ‘äºŸå¾…åŠ å¼ºçš„ã€‚è¿™ä¸ªå‘¨æœ«ä¹°äº†ä¸¤æœ¬å…³äºåˆ†å¸ƒå¼ç½‘ç«™çš„ä¹¦ï¼Œæœ¬ç€å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œä¾¿æœ‰äº†è¿™æ ·ä¸€ç³»åˆ—çš„æ–‡ç« ã€‚å¸Œæœ›ä¸€åŒåˆ†äº«ï¼Œä¹Ÿè¯·å¤šæŒ‡æ•™ã€‚&lt;/p>
&lt;blockquote>
&lt;p>code less, play more!&lt;/p>
&lt;/blockquote>
&lt;h2 id="å‰è¨€">å‰è¨€&lt;/h2>
&lt;p>è¿™ä¸ªä¸–ç•Œä¸Šæ²¡æœ‰å“ªä¸ªç½‘ç«™ä»è¯ç”Ÿèµ·å°±æ˜¯å¤§å‹ç½‘ç«™ï¼›ä¹Ÿæ²¡æœ‰å“ªä¸ªç½‘ç«™ç¬¬ä¸€æ¬¡å‘å¸ƒçš„æ—¶å€™å°±æ‹¥æœ‰åºå¤§çš„ç”¨æˆ·ï¼Œé«˜å¹¶å‘çš„è®¿é—®ï¼Œæµ·é‡çš„æ•°æ®ï¼›å¤§å‹ç½‘ç«™éƒ½æ˜¯ä»å°å‹ç½‘ç«™å‘å±•è€Œæ¥ã€‚ç½‘ç«™çš„ä»·å€¼åœ¨äºå®ƒèƒ½ç»™ç”¨æˆ·æä¾›ä»€ä¹ˆå®¶å®…ï¼Œåœ¨äºç½‘ç«™èƒ½åšä»€ä¹ˆï¼Œè€Œä¸åœ¨äºå®ƒæ˜¯æ€ä¹ˆåšçš„ï¼Œæ‰€ä»¥ç½‘ç«™åœ¨å°çš„æ—¶å€™å°±å»è¿½æ±‚ç½‘ç«™çš„æ¶æ„æ˜¯èˆæœ¬é€æœ«ï¼Œå¾—ä¸å¿å¤±çš„ã€‚å°å‹ç½‘ç«™æœ€éœ€è¦åšçš„å°±æ˜¯ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„æœåŠ¡æ¥åˆ›é€ ä»·å€¼ï¼Œå¾—åˆ°ç”¨æˆ·è®¤å¯ï¼Œæ´»ä¸‹å»ï¼Œé‡è›®ç”Ÿé•¿ã€‚&lt;/p>
&lt;h2 id="å¤§å‹ç½‘ç«™è½¯ä»¶ç³»ç»Ÿçš„ç‰¹ç‚¹">å¤§å‹ç½‘ç«™è½¯ä»¶ç³»ç»Ÿçš„ç‰¹ç‚¹&lt;/h2>
&lt;ul>
&lt;li>é«˜å¹¶å‘ï¼Œå¤§æµé‡&lt;/li>
&lt;li>é«˜å¯ç”¨&lt;/li>
&lt;li>æµ·é‡æ•°æ®&lt;/li>
&lt;li>ç”¨æˆ·åˆ†å¸ƒå¹¿æ³›ï¼Œç½‘ç»œæƒ…å†µå¤æ‚&lt;/li>
&lt;li>å®‰å…¨ç¯å¢ƒæ¶åŠ£&lt;/li>
&lt;li>éœ€æ±‚å¿«é€Ÿå˜æ›´ï¼Œå‘å¸ƒå¹³é¢‘ç¹&lt;/li>
&lt;li>æ¸è¿›å¼å‘å±•&lt;/li>
&lt;/ul>
&lt;h3 id="å¤§å‹ç½‘ç«™çš„å‘å±•å†ç¨‹">å¤§å‹ç½‘ç«™çš„å‘å±•å†ç¨‹&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>åˆå§‹é˜¶æ®µçš„ç½‘ç«™æ¶æ„&lt;/strong>&lt;/p>
&lt;p>æœ€å¼€å§‹æ²¡æœ‰å¤šå°‘äººè®¿é—®ï¼Œæ‰€ä»¥åº”ç”¨ç¨‹åºï¼Œæ•°æ®åº“ï¼Œæ–‡ä»¶éƒ½åœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®æœåŠ¡åˆ†ç¦»&lt;/strong>&lt;/p>
&lt;p>åº”ç”¨å’Œæ•°æ®åˆ†ç¦»ä¹‹åï¼Œä¸€èˆ¬éœ€è¦ä¸‰å°æœåŠ¡å™¨ã€‚åº”ç”¨æœåŠ¡å™¨ï¼Œæ–‡ä»¶æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨ï¼Œè¿™ä¸‰ç§æœåŠ¡å™¨å¯¹äºç¡¬ä»¶è¦æ±‚å„ä¸ç›¸åŒã€‚&lt;/p>
&lt;ul>
&lt;li>åº”ç”¨æœåŠ¡å™¨ï¼šæ›´å¼ºå¤§çš„ CPU&lt;/li>
&lt;li>æ•°æ®åº“æœåŠ¡å™¨ï¼šæ›´å¿«é€Ÿçš„ç£ç›˜å’Œæ›´å¤§çš„å†…å­˜&lt;/li>
&lt;li>æ–‡ä»¶æœåŠ¡å™¨ï¼šå®¹é‡æ›´å¤§çš„ç¡¬ç›˜&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨ç¼“å­˜æ”¹å–„æ€§èƒ½&lt;/strong>&lt;/p>
&lt;p>ç½‘ç«™çš„è®¿é—®ä¹Ÿéµå¾ªäºŒå…«å®šå¾‹ï¼š80%çš„ä¸šåŠ¡é›†ä¸­åœ¨ 20%çš„æ•°æ®ä¸Šã€‚å› æ­¤å¯ä»¥æŠŠè¿™ä¸€å°éƒ¨åˆ†æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå‡å°‘æ•°æ®åº“çš„è®¿é—®å‹åŠ›ã€‚&lt;/p>
&lt;p>ç½‘ç«™çš„ç¼“å­˜å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>æœ¬åœ°ç¼“å­˜ï¼šç¼“å­˜åœ¨åº”ç”¨æœåŠ¡å™¨ä¸Šã€‚æœ¬åœ°ç¼“å­˜è®¿é—®é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å—åˆ¶äºå†…å­˜é™åˆ¶ï¼Œç¼“å­˜æ•°é‡æœ‰é™ï¼Œè€Œä¸”ä¹Ÿä¼šå‡ºç°å’Œåº”ç”¨ç¨‹åºäº‰æŠ¢å†…å­˜çš„æƒ…å†µã€‚&lt;/li>
&lt;li>è¿œç¨‹åˆ†å¸ƒå¼ç¼“å­˜ï¼šä»¥é›†ç¾¤çš„æ–¹å¼ï¼Œç¼“å­˜åœ¨å¤§å†…å­˜çš„ä¸“ç”¨ç¼“å­˜æœåŠ¡å™¨ã€‚å¯ä»¥åœ¨ç†è®ºä¸Šåšåˆ°ä¸å—å†…å­˜å®¹é‡é™åˆ¶ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨åº”ç”¨æœåŠ¡å™¨é›†ç¾¤æé«˜å¹¶å‘èƒ½åŠ›&lt;/strong>&lt;/p>
&lt;p>å½“ä¸€å°æœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›å’Œå­˜å‚¨ç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼Œä¸è¦ä¼å›¾æ›´æ¢æ›´å¼ºå¤§çš„æœåŠ¡å™¨ã€‚å¯¹äºå¤§å‹ç½‘ç«™æ¥è¯´ï¼Œä¸ç®¡å¤šä¹ˆå¼ºå¤§çš„æœåŠ¡å™¨ï¼Œéƒ½æ»¡è¶³ä¸äº†ç½‘ç«™æŒç»­å¢é•¿çš„ä¸šåŠ¡éœ€æ±‚ã€‚æ­¤æ—¶å°±å¯ä»¥è€ƒè™‘é›†ç¾¤çš„æ–¹å¼ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡è°ƒåº¦æœåŠ¡å™¨ï¼Œå¯ä»¥å°†æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚åˆ†å‘åˆ°åº”ç”¨æœåŠ¡å™¨é›†ç¾¤ä¸­çš„ä»»ä½•ä¸€å°æœåŠ¡å™¨ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ•°æ®åº“è¯»å†™åˆ†ç¦»&lt;/strong>&lt;/p>
&lt;p>ä½¿ç”¨ç¼“å­˜åï¼Œå¤§éƒ¨åˆ†çš„æ•°æ®è¯»æ“ä½œè®¿é—®éƒ½å¯ä»¥ä¸é€šè¿‡æ•°æ®åº“å®Œæˆï¼Œä½†æ˜¯ä»æœ‰éƒ¨åˆ†è¯»æ“ä½œï¼ˆå¦‚ç¼“å­˜è¿‡æœŸï¼Œç¼“å­˜ä¸å‘½ä¸­ï¼‰å’Œå…¨éƒ¨çš„å†™æ“ä½œéœ€è¦è®¿é—®æ•°æ®åº“ã€‚&lt;/p>
&lt;p>ç›®å‰å¤§éƒ¨åˆ†æ•°æ®åº“éƒ½æä¾›ä¸»ä»çƒ­å¤‡çš„åŠŸèƒ½ï¼Œåœ¨å†™æ•°æ®çš„æ—¶å€™ï¼Œè®¿é—®ä¸»åº“ï¼Œä¸»åº“é€šè¿‡ä¸»ä»å¤åˆ¶æœºåˆ¶å°†æ•°æ®æ›´æ–°åŒæ­¥è‡³ä»æ•°æ®åº“ï¼Œåœ¨è¯»çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡ä»æ•°æ®åº“è·å–æ•°æ®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨åå‘ä»£ç†å’Œ CDN åŠ é€Ÿç½‘ç«™å“åº”&lt;/strong>&lt;/p>
&lt;p>åœ¨ã€Šweb æ€§èƒ½æƒå¨æŒ‡å—ã€‹ä¸­æœ‰è®²åˆ°ï¼Œç½‘ç«™æ€§èƒ½çš„ç“¶é¢ˆï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æµªè´¹åœ¨ TCP çš„æ¡æ‰‹å’Œä¼ è¾“ä¸Šã€‚å› æ­¤å¯ä»¥é€šè¿‡ CDN å’Œåå‘ä»£ç†çš„æ–¹å¼æ¥åŠ å¿«å“åº”ã€‚&lt;/p>
&lt;p>CDN å’Œåå‘ä»£ç†çš„æœ¬è´¨éƒ½æ˜¯é€šè¿‡ç¼“å­˜ï¼Œä¸åŒçš„ä¸»è¦æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>CDN éƒ¨ç½²åœ¨æœåŠ¡å™¨å™¨ä¸Šçš„æœºæˆ¿ï¼Œç”¨æˆ·åœ¨è¯·æ±‚æ—¶ï¼Œä»è·ç¦»è‡ªå·±æœ€è¿‘çš„æœºæˆ¿è·å–æ•°æ®ã€‚&lt;/li>
&lt;li>åå‘ä»£ç†æ˜¯éƒ¨ç½²åœ¨ä¸­å¿ƒæœºæˆ¿ï¼Œç”¨æˆ·è¯·æ±‚åˆ°è¾¾ä¸­å¿ƒæœºæˆ¿ä¹‹åï¼Œé¦–å…ˆè®¿é—®çš„æœåŠ¡å™¨æ˜¯åå‘ä»£ç†çš„æ‹‚å»å…¶ï¼Œå¦‚æœåå‘ä»£ç†æœåŠ¡å™¨ä¸­ç¼“å­˜ç€ç”¨æˆ·è¯·æ±‚çš„é¢èµ„æºï¼Œå°±å°†å…¶è¿”å›ç»™ç”¨æˆ·ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå’Œåˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿ&lt;/strong>&lt;/p>
&lt;p>éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œä¾æ—§ä¸èƒ½æ»¡è¶³çš„æ—¶å€™ï¼Œå°±é‡‡ç”¨åˆ†å¸ƒå¼çš„æ–‡ä»¶å’Œåˆ†å¸ƒå¼çš„æ•°æ®åº“ç³»ç»Ÿã€‚&lt;/p>
&lt;p>åˆ†å¸ƒå¼æ•°æ®åº“æ˜¯æ•°æ®åº“æ‹†åˆ†çš„æœ€åæ‰‹æ®µï¼Œåªç”¨åœ¨å•è¡¨æ•°æ®è§„æ¨¡ç‰¹åˆ«åºå¤§çš„æ—¶å€™æ‰ä½¿ç”¨ã€‚æ›´å¸¸ç”¨çš„æ‹†åˆ†æ‰‹æ®µæ˜¯ä¸šåŠ¡åˆ†åº“ï¼Œå°†ä¸åŒçš„ä¸šåŠ¡æ•°æ®å­˜å‚¨åœ¨ä¸åŒçš„æ•°æ®åº“ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä½¿ç”¨ NoSQL å’Œæœç´¢å¼•æ“&lt;/strong>&lt;/p>
&lt;p>å¯¹æ•°æ®æ£€ç´¢å’Œå­˜å‚¨è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œå°±å¯ä»¥é‡‡ç”¨ä¸€äº›éå…³ç³»å‹æ•°æ®åº“å¦‚ HBase å’Œéæ•°æ®åº“æŸ¥è¯¢æŠ€æœ¯å¦‚ ElasticSearch ç­‰ç­‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä¸šåŠ¡æ‹†åˆ†&lt;/strong>&lt;/p>
&lt;p>ä¸šåŠ¡åœºæ™¯å¤æ‚çš„æ—¶å€™ï¼Œä¸€èˆ¬è®²æ•´ä¸ªç½‘ç«™ä¸šåŠ¡åˆ†ä¸ºä¸åŒçš„äº§å“çº¿ï¼Œå¦‚é¦–é¡µï¼Œè®¢å•ï¼Œä¹°å®¶ï¼Œå–å®¶ç­‰ç­‰ã€‚&lt;/p>
&lt;p>æŠ€æœ¯ä¸Šä¹Ÿä¼šæ ¹æ®äº§å“çº¿åˆ’åˆ†ï¼Œå°†ä¸€ä¸ªç½‘ç«™åˆ†ä¸ºè®¸å¤šä¸åŒçš„åº”ç”¨ï¼Œæ¯ä¸ªåº”ç”¨ç‹¬ç«‹éƒ¨ç½²ç»´æŠ¤ï¼Œåº”ç”¨ä¹‹é—´å¯ä»¥é€šè¿‡ä¸€ä¸ªè¶…é“¾æ¥å»ºç«‹è”ç³»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œæ•°æ®åˆ†å‘ï¼Œå½“ç„¶æœ€å¤šçš„è¿˜æ˜¯é€šè¿‡è®¿é—®åŒä¸€ä¸ªæ•°æ®å­˜å‚¨ç³»ç»Ÿæ¥æ„æˆä¸€ä¸ªå…³è”çš„å®Œæ•´ç³»ç»Ÿã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åˆ†å¸ƒå¼æœåŠ¡&lt;/strong>&lt;/p>
&lt;p>éšç€ä¸šåŠ¡è¶Šæ‹†è¶Šå°ï¼Œå­˜å‚¨è¶Šæ¥è¶Šå¤§ï¼Œç»´æŠ¤è¶Šæ¥è¶Šå›°éš¾ã€‚æ­¤æ—¶å°±å¯ä»¥å°†ç›¸åŒä¸šåŠ¡æ“ä½œçš„æå–å‡ºæ¥ï¼Œç‹¬ç«‹éƒ¨ç½²ã€‚åº”ç”¨ç³»ç»Ÿåªéœ€è¦ç®¡ç†ç”¨æˆ·ç•Œé¢ï¼Œé€šè¿‡åˆ†å¸ƒå¼æœåŠ¡è°ƒç”¨å…±åŒçš„ä¸šåŠ¡æœåŠ¡å®Œæˆå…·ä½“çš„ä¸šåŠ¡æ“ä½œã€‚ä¹Ÿå°±æ˜¯æœ€è¿‘æ¦‚å¿µè¶Šæ¥è¶Šç«çš„â€”â€”å¾®æœåŠ¡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>äº‘è®¡ç®—&lt;/strong>&lt;/p>
&lt;p>å¤§å‹ç½‘ç«™æ¶æ„è§£å†³äº†æµ·é‡æ•°æ®åº“ç®¡ç†å’Œé«˜å¹¶å‘äº‹åŠ¡å¤„ç†ï¼Œå¯ä»¥å°†è¿™äº›è§£å†³æ–¹æ¡ˆåº”ç”¨åˆ°ç½‘ç«™è‡ªèº«ä»¥å¤–çš„ä¸šåŠ¡ä¸Šã€‚ç°åœ¨åƒé˜¿é‡Œäº‘ï¼Œäºšé©¬é€Šç­‰äº‘è®¡ç®—å¹³å°ï¼Œå°†è®¡ç®—ä½œä¸ºä¸€ç§åŸºç¡€èµ„æºå‡ºå”®ï¼Œä¸­å°ç½‘ç«™ä¸éœ€è¦å…³ç³»æŠ€æœ¯æ¶æ„ç­‰é—®é¢˜ï¼Œåªéœ€è¦æŒ‰éœ€ä»˜è´¹ï¼Œå°±å¯ä»¥ä½¿ç½‘ç«™éšç€ä¸šåŠ¡çš„å¢é•¿è·å¾—æ›´å¤§çš„å­˜å‚¨å’Œè®¡ç®—èµ„æºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æœªæ¥&lt;/strong>&lt;/p>
&lt;p>æœªæ¥è¿˜èƒ½å˜æˆä»€ä¹ˆæ ·å­ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šï¼Œä¹Ÿè®¸ä»¥åéƒ½ä¸æ˜¯å¼€å‘äººå‘˜æ¥ç»´æŠ¤äº†ï¼Œæ‰€æœ‰çš„è¿™äº›éƒ½æ˜¯ AI æ¥å®Œæˆï¼Œç¨‹åºå‘˜è¦åšçš„å°±æ˜¯å¦‚ä½•å®Œå–„ AIã€‚ä¹Ÿè®¸ AI å‘å±•åˆ°æœ€åï¼Œäººç±»éƒ½ä¸éœ€è¦å­˜åœ¨äº†å§ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="ç»“è¯­">ç»“è¯­&lt;/h2>
&lt;p>ç½‘ç«™çš„æŠ€æœ¯æ˜¯ä¸ºä¸šåŠ¡è€Œå­˜åœ¨çš„ï¼Œé™¤æ­¤ä»¥å¤–æ¯«æ— æ„ä¹‰ã€‚åœ¨æŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡ä¸­ï¼Œè„±ç¦»ä¸šåŠ¡å‘å±•å®é™…ï¼Œä¸€å‘³çš„è¿½æ±‚æ–°æŠ€æœ¯ï¼Œå¯èƒ½ä¼šæŠŠæŠ€æœ¯å‘å±•å¼•å…¥ä¸€ä¸ªæ­ªè·¯ã€‚&lt;/p>
&lt;p>æŠ€æœ¯æ˜¯ç”¨æ¥è§£å†³ä¸šåŠ¡çš„é—®é¢˜ï¼Œè€ŒæŠ€æœ¯ä¸å¯èƒ½å°†æ‰€æœ‰é—®é¢˜éƒ½è§£å†³æ‰ï¼Œæ¶‰åŠä¸šåŠ¡è‡ªèº«çš„é—®é¢˜ï¼Œè¿˜æ˜¯è¦é€šè¿‡ä¸šåŠ¡æ‰‹æ®µå»è§£å†³ã€‚&lt;/p></description></item><item><title>Geth ç§é“¾</title><link>https://example.com/p/geth-%E7%A7%81%E9%93%BE/</link><pubDate>Fri, 20 Nov 2020 15:59:22 +0800</pubDate><guid>https://example.com/p/geth-%E7%A7%81%E9%93%BE/</guid><description>&lt;p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« &lt;a class="link" href="https://github.com/zhenfeng-zhu/articles/issues/1" target="_blank" rel="noopener"
>ã€ŠGeth å…¥é—¨ã€‹&lt;/a>ä¸­ï¼Œä¸»è¦è®²äº†å¼€å‘ç¯å¢ƒä¸‹ä»¥å¤ªåŠ geth å®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚ä»Šå¤©ç®€å•è¯´ä¸‹ç§é“¾çš„é…ç½®ã€‚&lt;/p>
&lt;h2 id="genesisjson">genesis.json&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;chainId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;homesteadBlock&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;eip155Block&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;eip158Block&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;coinbase&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0x0000000000000000000000000000000000000000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;difficulty&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0x40000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;extraData&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gasLimit&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0xffffffff&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nonce&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0x0000000000000042&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mixhash&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0x0000000000000000000000000000000000000000000000000000000000000000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;parentHash&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0x0000000000000000000000000000000000000000000000000000000000000000&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timestamp&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0x00&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alloc&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å‚æ•°&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>nonce&lt;/td>
&lt;td>nonce å°±æ˜¯ä¸€ä¸ª 64 ä½éšæœºæ•°ï¼Œç”¨äºæŒ–çŸ¿&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mixhash&lt;/td>
&lt;td>ä¸ nonce é…åˆç”¨äºæŒ–çŸ¿ï¼Œç”±ä¸Šä¸€ä¸ªåŒºå—çš„ä¸€éƒ¨åˆ†ç”Ÿæˆçš„ hash&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>difficulty&lt;/td>
&lt;td>è®¾ç½®å½“å‰åŒºå—çš„éš¾åº¦ï¼Œå¦‚æœéš¾åº¦è¿‡å¤§ï¼Œcpu æŒ–çŸ¿å°±å¾ˆéš¾ï¼Œè¿™é‡Œè®¾ç½®è¾ƒå°éš¾åº¦&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>alloc&lt;/td>
&lt;td>ç”¨æ¥é¢„ç½®è´¦å·ä»¥åŠè´¦å·çš„ä»¥å¤ªå¸æ•°é‡ï¼Œå› ä¸ºç§æœ‰é“¾æŒ–çŸ¿æ¯”è¾ƒå®¹æ˜“ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦é¢„ç½®æœ‰å¸çš„è´¦å·ï¼Œéœ€è¦çš„æ—¶å€™è‡ªå·±åˆ›å»ºå³å¯ä»¥&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>coinbase&lt;/td>
&lt;td>çŸ¿å·¥çš„è´¦å·ï¼Œéšä¾¿å¡«&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>timestamp&lt;/td>
&lt;td>è®¾ç½®åˆ›ä¸–å—çš„æ—¶é—´æˆ³&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>parentHash&lt;/td>
&lt;td>ä¸Šä¸€ä¸ªåŒºå—çš„ hash å€¼ï¼Œå› ä¸ºæ˜¯åˆ›ä¸–å—ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼æ˜¯ 0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>extraData&lt;/td>
&lt;td>é™„åŠ ä¿¡æ¯ï¼Œéšä¾¿å¡«ï¼Œå¯ä»¥å¡«ä½ çš„ä¸ªæ€§ä¿¡æ¯&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gasLimit&lt;/td>
&lt;td>è¯¥å€¼è®¾ç½®å¯¹ GAS çš„æ¶ˆè€—æ€»é‡é™åˆ¶ï¼Œç”¨æ¥é™åˆ¶åŒºå—èƒ½åŒ…å«çš„äº¤æ˜“ä¿¡æ¯æ€»å’Œï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ç§æœ‰é“¾ï¼Œæ‰€ä»¥å¡«æœ€å¤§ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>config&lt;/td>
&lt;td>Fatal: failed to write genesis block: genesis has no chain configuration ï¼šè¿™ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œå°±æ˜¯è¯´ï¼Œä½ çš„ json æ–‡ä»¶ä¸­ï¼Œç¼ºå°‘ config éƒ¨åˆ†ã€‚çœ‹åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦æŠŠ geth é€€å›åˆ° v1.5 ç‰ˆæœ¬ï¼Œè€Œæ˜¯éœ€è¦åŠ ä¸Š config éƒ¨åˆ†ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="åˆ›å»ºåˆ›ä¸–åŒºå—">åˆ›å»ºåˆ›ä¸–åŒºå—&lt;/h2>
&lt;p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºåˆ›ä¸–åŒºå—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">geth --datadir &amp;#34;./&amp;#34; init genesis.json
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°åœ¨å½“å‰ç›®å½•æ–°å¢äº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼š&lt;/p>
&lt;ul>
&lt;li>geth ä¸­ä¿å­˜çš„æ˜¯åŒºå—é“¾çš„ç›¸å…³æ•°æ®&lt;/li>
&lt;li>keystore ä¸­ä¿å­˜çš„æ˜¯è¯¥é“¾æ¡ä¸­çš„ç”¨æˆ·ä¿¡æ¯&lt;/li>
&lt;/ul>
&lt;h2 id="å¯åŠ¨ç§é“¾">å¯åŠ¨ç§é“¾&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">geth --datadir &amp;#34;./&amp;#34; --nodiscover console 2&amp;gt;&amp;gt;geth.log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>--datadir&lt;/code>ï¼šä»£è¡¨ä»¥å¤ªåŠç§é“¾çš„åˆ›ä¸–åŒºå—çš„åœ°å€&lt;/li>
&lt;li>&lt;code>--nodiscover&lt;/code>ï¼šç§é“¾ä¸è¦è®©å…¬é“¾ä¸Šçš„èŠ‚ç‚¹å‘ç°&lt;/li>
&lt;/ul>
&lt;p>ä¹Ÿå¯å°†æ­¤å‘½ä»¤å†™å…¥ä¸€ä¸ª shell æ–‡ä»¶ä¸­ï¼Œæ¯æ¬¡å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œè„šæœ¬å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;p>è¾“å…¥æ­¤å‘½ä»¤åï¼Œå°±å¯ä»¥è¿›å…¥åˆ° geth çš„æ§åˆ¶å°ä¸­äº†ï¼Œåœ¨è¿™é‡Œå¯ä»¥è¿›è¡ŒæŒ–çŸ¿ï¼Œæ™ºèƒ½åˆçº¦çš„ç¼–å†™ã€‚&lt;/p></description></item><item><title>Geth</title><link>https://example.com/p/geth/</link><pubDate>Fri, 20 Nov 2020 10:07:39 +0800</pubDate><guid>https://example.com/p/geth/</guid><description>&lt;h2 id="geth-ç®€ä»‹">Geth ç®€ä»‹&lt;/h2>
&lt;p>&lt;strong>go-ethereum&lt;/strong>&lt;/p>
&lt;p>go-ethereum å®¢æˆ·ç«¯é€šå¸¸è¢«ç§°ä¸º gethï¼Œå®ƒæ˜¯ä¸ªå‘½ä»¤è¡Œç•Œé¢ï¼Œæ‰§è¡Œåœ¨ Go ä¸Šå®ç°çš„å®Œæ•´ä»¥å¤ªåŠèŠ‚ç‚¹ã€‚é€šè¿‡å®‰è£…å’Œè¿è¡Œ gethï¼Œå¯ä»¥å‚ä¸åˆ°ä»¥å¤ªåŠå‰å°å®æ—¶ç½‘ç»œå¹¶è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p>
&lt;ul>
&lt;li>æŒ–æ˜çœŸçš„ä»¥å¤ªå¸&lt;/li>
&lt;li>åœ¨ä¸åŒåœ°å€é—´è½¬ç§»èµ„é‡‘&lt;/li>
&lt;li>åˆ›å»ºåˆçº¦ï¼Œå‘é€äº¤æ˜“&lt;/li>
&lt;li>æ¢ç´¢åŒºå—å†å²&lt;/li>
&lt;li>åŠå¾ˆå¤šå…¶ä»–&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ç½‘ç«™: &lt;a class="link" href="http://ethereum.github.io/go-ethereum/" target="_blank" rel="noopener"
>http://ethereum.github.io/go-ethereum/&lt;/a>
Github: &lt;a class="link" href="https://github.com/ethereum/go-ethereum" target="_blank" rel="noopener"
>https://github.com/ethereum/go-ethereum&lt;/a>
ç»´åŸºç™¾ç§‘: &lt;a class="link" href="https://github.com/ethereum/go-ethereum/wiki/geth" target="_blank" rel="noopener"
>https://github.com/ethereum/go-ethereum/wiki/geth&lt;/a>
Gitter: &lt;a class="link" href="https://gitter.im/ethereum/go-ethereum" target="_blank" rel="noopener"
>https://gitter.im/ethereum/go-ethereum&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h2 id="mac-ä¸‹å®‰è£…-geth">mac ä¸‹å®‰è£… geth&lt;/h2>
&lt;ol>
&lt;li>é¦–å…ˆå®‰è£… homebrewï¼Œ&lt;/li>
&lt;li>ä½¿ç”¨ brew å®‰è£…å³å¯ã€‚åœ¨å®‰è£… geth çš„æ—¶å€™ï¼Œä¼šå°† go ä¹Ÿå®‰è£…ä¸Šã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">brew tap ethereum/ethereum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">brew install ethereum
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>
&lt;p>åœ¨å‘½ä»¤è¡Œè¾“å…¥ geth â€”helpï¼Œå¦‚æœå‡ºç°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">zhuzhenengdeMBP:blog zhuzhenfeng$ geth --help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> geth - the go-ethereum &lt;span class="nb">command&lt;/span> line interface
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Copyright 2013-2017 The go-ethereum Authors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USAGE:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> geth &lt;span class="o">[&lt;/span>options&lt;span class="o">]&lt;/span> &lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> options&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>arguments...&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">VERSION:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1.7.3-unstable-eea996e4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯æ˜å®‰è£…æˆåŠŸã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="ä½¿ç”¨-geth">ä½¿ç”¨ Geth&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œä»¥å¼€å‘çš„æ–¹å¼å¯åŠ¨ geth&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">geth --datadir â€œ~/Documents/github/ethfans/ethdevâ€ --dev
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&amp;ndash;datadir æ˜¯æŒ‡å®š geth çš„å¼€å‘ç›®å½•ï¼Œå¼•å·çš„è·¯å¾„å¯ä»¥éšä¾¿è®¾ç½®&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿›å…¥ geth çš„æ§åˆ¶å°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">geth --dev console 2&amp;gt;&amp;gt;file_to_log_output
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥å‘½ä»¤ä¼šå°†åœ¨ console ä¸­æ‰§è¡Œçš„å‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ªæ–‡æœ¬ä¿å­˜åœ¨ file_to_log_output æ–‡ä»¶ä¸­ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å†æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼ŒæŸ¥çœ‹æ‰“å°å‡ºæ¥çš„æ—¥å¿—&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">tail -f file_to_log_output
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>åˆ‡æ¢åˆ° geth æ§åˆ¶å°ç»ˆç«¯ï¼Œgeth æœ‰å¦‚ä¸‹å¸¸ç”¨çš„å‘½ä»¤&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>eth.accounts&lt;/code>&lt;/p>
&lt;p>æŸ¥çœ‹æœ‰ä»€ä¹ˆè´¦æˆ·&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>personal.newAccount('å¯†ç ')&lt;/code>&lt;/p>
&lt;p>åˆ›å»ºä¸€ä¸ªè´¦æˆ·&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>user1=eth.accounts[0]&lt;/code>&lt;/p>
&lt;p>å¯ä»¥æŠŠè´¦æˆ·èµ‹å€¼ç»™æŸä¸€ä¸ªå˜é‡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>eth.getBalance(user1)&lt;/code>&lt;/p>
&lt;p>è·å–æŸä¸€è´¦æˆ·çš„ä½™é¢&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>miner.start()&lt;/code>&lt;/p>
&lt;p>å¯åŠ¨æŒ–çŸ¿ç¨‹åº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>miner.stop()&lt;/code>&lt;/p>
&lt;p>åœæ­¢æŒ–çŸ¿ç¨‹åº&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>eth.sendTransaction({from: user1,to: user2,value: web3.toWei(3,&amp;quot;ether&amp;quot;)})&lt;/code>&lt;/p>
&lt;p>ä» user1 å‘ user2 è½¬ä»¥å¤ªå¸&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>personal.unlockAccount(user1, 'å¯†ç ')&lt;/code>&lt;/p>
&lt;p>è§£é”è´¦æˆ·&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ä»¥å¤ªåŠå¯åŠ¨æŒ–çŸ¿ç¨‹åºçš„æ—¶å€™ï¼Œå¤´ç»“ç‚¹ä¼šäº§ç”Ÿä»¥å¤ªå¸ï¼Œåœ¨è¿›è¡Œè½¬è´¦æ“ä½œä¹‹åï¼Œå¿…é¡»è¿›è¡ŒæŒ–çŸ¿æ‰ä¼šä½¿äº¤æ˜“æˆåŠŸã€‚&lt;/p></description></item><item><title>hive å¸¸ç”¨å‡½æ•°</title><link>https://example.com/p/hive-%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/</link><pubDate>Thu, 16 Apr 2020 17:59:03 +0800</pubDate><guid>https://example.com/p/hive-%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/</guid><description>&lt;h1 id="json-å­—ç¬¦ä¸²å¤„ç†">json å­—ç¬¦ä¸²å¤„ç†&lt;/h1>
&lt;ul>
&lt;li>get_json_object&lt;/li>
&lt;li>lateral_view&lt;/li>
&lt;li>explode&lt;/li>
&lt;li>substr&lt;/li>
&lt;li>json_tuple&lt;/li>
&lt;/ul>
&lt;h2 id="get_json_object">get_json_object&lt;/h2>
&lt;p>get_json_object(string json_string, string path)&lt;/p>
&lt;p>è§£æ json å­—ç¬¦ä¸² json_stringï¼Œè¿”å› path æŒ‡å®šçš„å†…å®¹ã€‚å¦‚æœè¾“å…¥çš„ json å­—ç¬¦ä¸²æ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¹ˆè¿”å› nullã€‚&lt;/p>
&lt;p>path å°±æ˜¯ &amp;lsquo;$.å­—æ®µå&amp;rsquo;ã€‚&lt;/p>
&lt;p>å¦‚æœè¯¥å­—æ®µçš„ value ä¹Ÿæ˜¯ jsonï¼Œå°±å¯ä»¥ä¸€ç›´ç‚¹ä¸‹å»ã€‚&lt;/p>
&lt;p>å¦‚æœè¯¥å­—æ®µçš„ value æ˜¯æ•°ç»„ï¼Œå°±å¯ä»¥ç”¨ &amp;lsquo;$.å­—æ®µå[0]&amp;rsquo;ï¼Œç±»ä¼¼è¿™æ ·ä¸‹æ ‡çš„å½¢å¼å»è®¿é—®ã€‚&lt;/p>
&lt;h2 id="explode">explode&lt;/h2>
&lt;p>explode(array)&lt;/p>
&lt;p>ç»å¸¸å’Œ lateral view ä¸€èµ·ä½¿ç”¨ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ æ‹†åˆ†æˆå¤šè¡Œæ˜¾ç¤ºã€‚&lt;/p>
&lt;h2 id="substr">substr&lt;/h2>
&lt;p>substr(string A, int start, int len)&lt;/p>
&lt;p>è¿”å›å­—ç¬¦ä¸² A ä» start ä½ç½®å¼€å§‹ï¼Œé•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²&lt;/p>
&lt;h2 id="json_tuple">json_tuple&lt;/h2>
&lt;p>json_tuple(string json_string, col1, col2, &amp;hellip;)&lt;/p>
&lt;p>ç»å¸¸å’Œ lateral view ä¸€èµ·ä½¿ç”¨ï¼ŒåŒæ—¶è§£æå¤šä¸ª json å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªå­—æ®µã€‚&lt;/p>
&lt;h1 id="parse_url-regexp_replace-regexp_extract">parse_url, regexp_replace, regexp_extract&lt;/h1>
&lt;h2 id="parse_url">parse_url&lt;/h2>
&lt;p>parse_url(string urlString, string partToExtract, string keyToExtract)&lt;/p>
&lt;p>è¿”å› url ä¸­çš„æŒ‡å®šéƒ¨åˆ†ï¼Œå¦‚ hostï¼Œpathï¼Œquery ç­‰ç­‰ã€‚&lt;/p>
&lt;p>partToExtract æ˜¯ä¸ªæšä¸¾å€¼ï¼šHOST, PATH, QUERY, REF, PROTOCOL, AUTHORITY, FILE, and USERINFOã€‚&lt;/p>
&lt;h2 id="regex_replace">regex_replace&lt;/h2>
&lt;p>regex_extract(string a, string b, string c)&lt;/p>
&lt;p>å°†å­—ç¬¦ä¸² a ä¸­ç¬¦åˆæ­£åœ¨è¡¨è¾¾å¼ b çš„éƒ¨åˆ†æ›¿æ¢ä¸º c&lt;/p>
&lt;h1 id="json_to_struct">json_to_struct&lt;/h1>
&lt;p>json_to_struct(json, &amp;lsquo;array æˆ–è€… map ç­‰&amp;rsquo;)&lt;/p>
&lt;h1 id="union_map">union_map&lt;/h1>
&lt;p>union_map(map(k, v))&lt;/p>
&lt;h1 id="lateral-view">lateral view&lt;/h1>
&lt;h1 id="from_unix_time">from_unix_time&lt;/h1>
&lt;p>from_unix_time(unix æ—¶é—´æˆ³, &amp;lsquo;yyyyMMddHH&amp;rsquo;)&lt;/p>
&lt;h1 id="row_number">row_number&lt;/h1>
&lt;p>row_number() over (partition by å­—æ®µ a order by è®¡ç®—é¡¹ b desc ) rank&lt;/p>
&lt;p>hive ä¸­çš„åˆ†ç»„å’Œç»„å†…æ’åº&lt;/p>
&lt;ul>
&lt;li>rank æ˜¯æ’åºçš„åˆ«å&lt;/li>
&lt;li>partition byï¼š ç±»ä¼¼äº hive çš„å»ºè¡¨ï¼Œåˆ†åŒºçš„æ„æ€&lt;/li>
&lt;li>order byï¼š æ’åºï¼Œé»˜è®¤æ˜¯å‡åºï¼ŒåŠ  desc é™åº&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸ªæ„æ€å°±æ˜¯æŒ‰å­—æ®µ a åˆ†åŒºï¼Œå¯¹è®¡ç®—é¡¹ b è¿›è¡Œé™åºæ’åˆ—&lt;/p>
&lt;p>è¿™ä¸ªæ˜¯ç»å¸¸ç”¨åˆ°è®¡ç®—åˆ†åŒºä¸­çš„æ’åºé—®é¢˜ã€‚&lt;/p>
&lt;h1 id="coalesce">coalesce&lt;/h1>
&lt;p>éç©ºæŸ¥æ‰¾å‡½æ•°&lt;/p>
&lt;p>coalesce(v1, v2, v3, &amp;hellip;)&lt;/p>
&lt;p>è¿”å›å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºå€¼ï¼Œå¦‚æœæ‰€æœ‰å€¼éƒ½æ˜¯ NULLï¼Œè¿”å› NULL&lt;/p></description></item><item><title>mysql çš„å­¦ä¹ </title><link>https://example.com/p/mysql-%E7%9A%84%E5%AD%A6%E4%B9%A0/</link><pubDate>Thu, 16 Apr 2020 17:34:30 +0800</pubDate><guid>https://example.com/p/mysql-%E7%9A%84%E5%AD%A6%E4%B9%A0/</guid><description>&lt;h1 id="sql-æ¡ä»¶è¯­å¥">SQL æ¡ä»¶è¯­å¥&lt;/h1>
&lt;h2 id="if">IF&lt;/h2>
&lt;p>if(exp1, exp2, exp3)&lt;/p>
&lt;p>exp1 æ˜¯æ¡ä»¶ï¼Œæ¡ä»¶ä¸º true çš„è¯ï¼Œæ˜¯ exp2ï¼Œå¦åˆ™æ˜¯ exp3&lt;/p>
&lt;h2 id="case-when">case when&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">case&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">åˆ—å&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">when&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">æ¡ä»¶&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">then&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">ç»“æœ&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">å…¶ä»–ç»“æœ&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">åˆ«å&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ifnull">IFNULL&lt;/h2>
&lt;p>IFNULL(exp1, exp2)&lt;/p>
&lt;p>åœ¨ exp1 çš„å€¼ä¸ä¸º null çš„æƒ…å†µä¸‹ï¼Œè¿”å› exp1ï¼Œå¦‚æœ exp1 ä½ nullï¼Œè¿”å› exp2 çš„å€¼ã€‚&lt;/p></description></item><item><title>clickhouse</title><link>https://example.com/p/clickhouse/</link><pubDate>Sat, 12 Oct 2019 06:48:01 +0000</pubDate><guid>https://example.com/p/clickhouse/</guid><description>&lt;h1 id="clickhouse">ClickHouse&lt;/h1>
&lt;p>ClickHouse æ˜¯ä¸€ä¸ªç”¨äºè”æœºåˆ†æï¼ˆOnline Analytical Processingï¼šOLAPï¼‰çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS)ã€‚é€šè¿‡ä½¿ç”¨ OLAP å·¥å…·ï¼Œç”¨æˆ·èƒ½å¤Ÿä»å¤šä¸ªè§’åº¦äº¤äº’åœ°åˆ†æå¤šç»´æ•°æ®ã€‚&lt;/p>
&lt;p>OLAP ç”±ä¸‰ä¸ªåŸºæœ¬çš„åˆ†ææ“ä½œç»„æˆï¼šä¸Šå·ï¼ˆroll-upï¼‰ã€é’»å–ï¼ˆdrill-downï¼‰ã€åˆ‡ç‰‡ï¼ˆslicingï¼‰å’Œåˆ‡å—ï¼ˆdicingï¼‰ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä¸Šå·ï¼ˆroll-upï¼‰ï¼šæ¶‰åŠå¯ä»¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç»´åº¦ä¸­ç´¯ç§¯å’Œè®¡ç®—çš„æ•°æ®çš„èšåˆã€‚ä¾‹å¦‚ï¼Œæ‰€æœ‰çš„é”€å”®åŠäº‹å¤„æ±‡æ€»åˆ°é”€å”®éƒ¨é—¨ï¼Œä»¥é¢„æµ‹é”€å”®è¶‹åŠ¿ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é’»å–ï¼ˆdrill-downï¼‰ï¼šæ˜¯ä¸€ç§å…è®¸ç”¨æˆ·æµè§ˆè¯¦ç»†ä¿¡æ¯çš„æŠ€æœ¯ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥æŸ¥çœ‹ç»„æˆä¸€ä¸ªåœ°åŒºé”€å”®é¢çš„å•ä¸ªäº§å“çš„é”€å”®é¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ‡ç‰‡ï¼ˆslicingï¼‰å’Œåˆ‡å—ï¼ˆdicingï¼‰ï¼šç”¨æˆ·å¯ä»¥ä» OLAP å¤šç»´æ•°æ®é›†ä¸­å–å‡ºï¼ˆåˆ‡ç‰‡ï¼‰ä¸€ç»„ç‰¹å®šçš„æ•°æ®ï¼Œå¹¶ä»ä¸åŒçš„è§’åº¦æŸ¥çœ‹ï¼ˆåˆ‡å—ï¼‰åˆ‡ç‰‡ã€‚è¿™äº›è§’åº¦æœ‰æ—¶è¢«ç§°ä¸ºç»´åº¦ï¼ˆä¾‹å¦‚æŒ‰é”€å”®äººå‘˜ã€æŒ‰æ—¥æœŸã€æŒ‰å®¢æˆ·ã€æŒ‰äº§å“æˆ–æŒ‰åœ°åŒºæŸ¥çœ‹ç›¸åŒçš„é”€å”®æƒ…å†µç­‰ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ä¼ ç»Ÿè¡Œå¼æ•°æ®åº“ä¸­ï¼Œå¤„äºåŒä¸€è¡Œä¸­çš„æ•°æ®æ€»æ˜¯è¢«ç‰©ç†çš„å­˜åœ¨ä¸€èµ·ã€‚åˆ—å¼æ•°æ®åº“æ€»æ˜¯å°†åŒä¸€åˆ—çš„æ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ï¼Œä¸åŒåˆ—çš„æ•°æ®åˆ†å¼€å­˜å‚¨ã€‚&lt;/p>
&lt;p>è¡Œå¼æ•°æ®åº“ï¼šmysqlï¼Œpg&lt;/p>
&lt;p>åˆ—å¼æ•°æ®åº“ï¼šverticaï¼Œdruid&lt;/p>
&lt;h2 id="olap-çš„å…³é”®ç‰¹å¾">OLAP çš„å…³é”®ç‰¹å¾&lt;/h2>
&lt;ul>
&lt;li>å¤§å¤šæ˜¯è¯»è¯·æ±‚&lt;/li>
&lt;li>æ•°æ®æ€»æ˜¯ä»¥ç›¸å½“å¤§çš„æ‰¹ï¼ˆ&amp;gt;1000wï¼‰è¿›è¡Œå†™å…¥&lt;/li>
&lt;li>ä¸ä¿®æ”¹å·²ç»æ·»åŠ çš„æ•°æ®&lt;/li>
&lt;li>æ¯æ¬¡æŸ¥è¯¢éƒ½ä»æ•°æ®åº“ä¸­è¯»å–å¤§é‡çš„è¡Œï¼Œä½†æ˜¯åŒæ—¶åˆä»…éœ€è¦å°‘é‡çš„åˆ—&lt;/li>
&lt;li>å®½è¡¨ï¼Œå³æ¯ä¸ªè¡¨åŒ…å«å¤§é‡çš„åˆ—&lt;/li>
&lt;li>è¾ƒå°‘çš„æŸ¥è¯¢ï¼ˆé€šå¸¸æ¯å°æœåŠ¡å™¨æ¯ç§’æ•°ç™¾ä¸ªæŸ¥è¯¢æˆ–æ›´å°‘ï¼‰&lt;/li>
&lt;li>å¯¹äºç®€å•çš„æŸ¥è¯¢ï¼Œå…è®¸å»¶è¿Ÿå¤§çº¦ 50ms&lt;/li>
&lt;li>åˆ—ä¸­çš„æ•°æ®ç›¸å¯¹è¾ƒå°ï¼šæ•°å­—å’ŒçŸ­å­—ç¬¦ä¸²&lt;/li>
&lt;li>å¤„ç†å•ä¸ªæŸ¥è¯¢æ—¶éœ€è¦é«˜ååé‡ï¼ˆæ¯ä¸ªæœåŠ¡å™¨æ¯ç§’é«˜è¾¾æ•°åäº¿è¡Œï¼‰&lt;/li>
&lt;li>äº‹åŠ¡ä¸æ˜¯å¿…é¡»çš„&lt;/li>
&lt;li>å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä½&lt;/li>
&lt;li>æ¯ä¸€ä¸ªæŸ¥è¯¢é™¤äº†ä¸€ä¸ªå¤§è¡¨å¤–éƒ½å¾ˆå°&lt;/li>
&lt;li>æŸ¥è¯¢ç»“æœæ˜æ˜¾å°äºæ•°æ®æºï¼Œæ¢å¥è¯è¯´ï¼Œæ•°æ®è¢«è¿‡æ»¤æˆ–è€…èšåˆä¹‹åèƒ½å¤Ÿè¢«æ”¾åœ¨å•å°æœåŠ¡å™¨çš„å†…å­˜ä¸­&lt;/li>
&lt;/ul>
&lt;h2 id="åˆ—å¼æ•°æ®åº“æ›´é€‚åˆ-olap-åœºæ™¯">åˆ—å¼æ•°æ®åº“æ›´é€‚åˆ OLAP åœºæ™¯&lt;/h2>
&lt;h3 id="inputoutput">Input/Output&lt;/h3>
&lt;ol>
&lt;li>åˆ†æç±»çš„æŸ¥è¯¢ï¼Œé€šå¸¸åªéœ€è¦è¯»å–è¡¨çš„ä¸€å°éƒ¨åˆ†åˆ—ã€‚&lt;/li>
&lt;li>æ•°æ®æ€»æ˜¯æ‰“åŒ…æˆæ‰¹é‡è¯»å–ï¼Œåˆ—å‹ç¼©æ›´å®¹æ˜“&lt;/li>
&lt;li>IO é™ä½äº†&lt;/li>
&lt;/ol>
&lt;h3 id="cpu">CPU&lt;/h3>
&lt;p>ç”±äºæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢éœ€è¦å¤„ç†å¤§é‡çš„è¡Œï¼Œå› æ­¤åœ¨æ•´ä¸ª Vector ä¸Šæ‰§è¡Œæ‰€æœ‰æ“ä½œå°†æ¯”åœ¨æ¯ä¸€è¡Œä¸Šæ‰§è¡Œæ‰€æœ‰æ“ä½œæ›´åŠ é«˜æ•ˆã€‚åŒæ—¶è¿™å°†æœ‰åŠ©äºå®ç°ä¸€ä¸ªå‡ ä¹æ²¡æœ‰è°ƒç”¨æˆæœ¬çš„æŸ¥è¯¢å¼•æ“ã€‚&lt;/p>
&lt;ol>
&lt;li>Vector å¼•æ“&lt;/li>
&lt;li>ä»£ç ç”Ÿæˆ&lt;/li>
&lt;/ol>
&lt;p>ä¸ºäº†æé«˜ CPU æ•ˆç‡ï¼ŒæŸ¥è¯¢è¯­è¨€å¿…é¡»æ˜¯å£°æ˜å‹çš„(SQL æˆ– MDX)ï¼Œ æˆ–è€…è‡³å°‘ä¸€ä¸ª Vector(Jï¼ŒK)ã€‚ æŸ¥è¯¢åº”è¯¥åªåŒ…å«éšå¼å¾ªç¯ï¼Œå…è®¸è¿›è¡Œä¼˜åŒ–ã€‚&lt;/p>
&lt;h1 id="clickhouse-çš„ç‹¬ç‰¹åŠŸèƒ½">clickhouse çš„ç‹¬ç‰¹åŠŸèƒ½&lt;/h1>
&lt;h2 id="çœŸæ­£çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ">çœŸæ­£çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ&lt;/h2></description></item><item><title>æ¯æ—¥å­¦ä¹  2</title><link>https://example.com/p/%E6%AF%8F%E6%97%A5%E5%AD%A6%E4%B9%A0-2/</link><pubDate>Sun, 29 Sep 2019 02:19:03 +0000</pubDate><guid>https://example.com/p/%E6%AF%8F%E6%97%A5%E5%AD%A6%E4%B9%A0-2/</guid><description>&lt;p>&lt;a class="link" href="https://mubu.com/doc/oHlgG0FSu0" target="_blank" rel="noopener"
>https://mubu.com/doc/oHlgG0FSu0&lt;/a>&lt;/p></description></item><item><title>æ¯æ—¥å­¦ä¹ -2019-09-24</title><link>https://example.com/p/%E6%AF%8F%E6%97%A5%E5%AD%A6%E4%B9%A0-2019-09-24/</link><pubDate>Sun, 29 Sep 2019 02:17:46 +0000</pubDate><guid>https://example.com/p/%E6%AF%8F%E6%97%A5%E5%AD%A6%E4%B9%A0-2019-09-24/</guid><description>&lt;h1 id="å¼€è¨€è‹±è¯­">å¼€è¨€è‹±è¯­&lt;/h1>
&lt;h1 id="æå®¢æ—¶é—´">æå®¢æ—¶é—´&lt;/h1>
&lt;h2 id="ç¼–è¯‘åŸç†ä¹‹ç¾">ç¼–è¯‘åŸç†ä¹‹ç¾&lt;/h2>
&lt;h3 id="è¯­ä¹‰åˆ†æä¸‹å¦‚ä½•åšä¸Šä¸‹æ–‡ç›¸å…³æƒ…å†µçš„å¤„ç†">è¯­ä¹‰åˆ†æï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•åšä¸Šä¸‹æ–‡ç›¸å…³æƒ…å†µçš„å¤„ç†&lt;/h3>
&lt;ul>
&lt;li>è¯­ä¹‰åˆ†æçš„æœ¬è´¨ï¼Œå°±æ˜¯é’ˆå¯¹ä¸Šä¸‹æ–‡ç›¸å…³çš„æƒ…å†µåšå¤„ç†ã€‚
&lt;ul>
&lt;li>å¼•ç”¨æ¶ˆè§£ï¼šä¸åŒä½œç”¨åŸŸé‡Œå¯èƒ½æœ‰ç›¸åŒåç§°çš„å˜é‡ï¼Œå¿…é¡»æ‰¾åˆ°æ­£ç¡®çš„é‚£ä¸ªï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å¼•ç”¨æ¶ˆè§£ã€‚
&lt;ul>
&lt;li>å‡½æ•°å¼•ç”¨æ¶ˆè§£&lt;/li>
&lt;li>å‘½åç©ºé—´å¼•ç”¨æ¶ˆè§£&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å·¦å€¼å’Œå³å€¼
&lt;ul>
&lt;li>å·¦å€¼å–çš„æ˜¯å˜é‡çš„åœ°å€æˆ–è€…è¯´æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè·å¾—åœ°å€ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ–°å€¼å†™è¿›å»ã€‚&lt;/li>
&lt;li>å³å€¼å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å€¼ã€‚&lt;/li>
&lt;li>ä¸æ˜¯æ‰€æœ‰çš„è¡¨è¾¾å¼éƒ½èƒ½ç”Ÿæˆä¸€ä¸ªåˆæ ¼çš„å·¦å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å±æ€§è®¡ç®—
&lt;ul>
&lt;li>ä¸Šä¸‹æ–‡åˆ†ææˆ–è€…è¯´è¯­ä¹‰åˆ†æçš„ä¸€ç§ç®—æ³•ã€‚&lt;/li>
&lt;li>å±æ€§æ–‡æ³•çš„ä¸»è¦æ€è·¯æ˜¯è®¡ç®—æœºç§‘å­¦çš„é‡è¦å¼€æ‹“è€…ï¼Œæ˜¯åœ¨ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•çš„åŸºç¡€ä¸Šåšäº†ä¸€äº›å¢å¼ºï¼Œä½¿ä¹‹å¯ä»¥è®¡ç®—å±æ€§å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>è¿‡ç¨‹
&lt;ul>
&lt;li>ç±»å‹å’Œä½œç”¨åŸŸè§£æ&lt;/li>
&lt;li>ç±»å‹çš„æ¶ˆè§£&lt;/li>
&lt;li>å¼•ç”¨çš„æ¶ˆè§£å’Œ S å±æ€§çš„ç±»å‹æ¨å¯¼&lt;/li>
&lt;li>åšç±»å‹æ£€æŸ¥&lt;/li>
&lt;li>åšä¸€äº›è¯­ä¹‰åˆæ³•æ€§æ£€æŸ¥&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="è¶£è°ˆ-linux-æ“ä½œç³»ç»Ÿ">è¶£è°ˆ Linux æ“ä½œç³»ç»Ÿ&lt;/h2>
&lt;h3 id="namespace-æŠ€æœ¯å†…éƒ¨åˆ›ä¸šå…¬å¸åº”è¯¥ç‹¬ç«‹è¿è¥">Namespace æŠ€æœ¯ï¼šå†…éƒ¨åˆ›ä¸šå…¬å¸åº”è¯¥ç‹¬ç«‹è¿è¥&lt;/h3>
&lt;p>ä¸ºäº†éš”ç¦»ä¸åŒç±»å‹çš„èµ„æºï¼ŒLinux å†…æ ¸é‡Œé¢æœ‰å¦‚ä¸‹å‡ ç§ä¸åŒç±»å‹çš„ namespaceï¼š&lt;/p>
&lt;ul>
&lt;li>UTSï¼Œè¡¨ç¤ºä¸åŒçš„ namespace å¯ä»¥é…ç½®ä¸åŒçš„ hostname&lt;/li>
&lt;li>Userï¼Œå¯ä»¥é…ç½®ä¸åŒçš„ç”¨æˆ·å’Œç»„&lt;/li>
&lt;li>Mountï¼Œæ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹æ˜¯éš”ç¦»çš„&lt;/li>
&lt;li>PIDï¼Œæœ‰å®Œå…¨ç‹¬ç«‹çš„ pid&lt;/li>
&lt;li>Networkï¼Œæœ‰ç‹¬ç«‹çš„ç½‘ç»œåè®®æ ˆ&lt;/li>
&lt;/ul></description></item><item><title>tmux</title><link>https://example.com/p/tmux/</link><pubDate>Wed, 28 Aug 2019 12:03:46 +0000</pubDate><guid>https://example.com/p/tmux/</guid><description>&lt;p>æŠ˜è…¾ä¸€ä¸‹ tmux&lt;/p>
&lt;h1 id="å®‰è£…">å®‰è£…&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">brew install tmux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="æ¦‚å¿µ">æ¦‚å¿µ&lt;/h1>
&lt;ul>
&lt;li>sessionï¼šç†è§£ä¸ºä¸€ä¸ªä¼šè¯ï¼ŒæŒä¹…ä¿å­˜å·¥ä½œçŠ¶æ€ã€‚&lt;/li>
&lt;li>windowï¼šå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å¸¸è¯´çš„ tab é¡µã€‚&lt;/li>
&lt;li>paneï¼šä¸€ä¸ª window è¢«åˆ†æˆè‹¥å¹²ä¸ª paneï¼Œç†è§£ä¸º iterm çš„åˆ†å±ã€‚&lt;/li>
&lt;/ul>
&lt;h1 id="session">session&lt;/h1>
&lt;p>æ–°å»º&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">tmux new -s your-session-name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ–­å¼€&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">tmux detach
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¢å¤&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">tmux attach-session -t your-session-name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æˆ–è€…
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmux a -t your-session-name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…³é—­&lt;/p>
&lt;ul>
&lt;li>kill-server&lt;/li>
&lt;li>kill-session&lt;/li>
&lt;li>kill-window&lt;/li>
&lt;li>kill-pane&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">tmux kill-session -t your-session-name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmux kill-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">tmux list-session
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmux ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="tmux-çš„åŸºç¡€é…ç½®">tmux çš„åŸºç¡€é…ç½®&lt;/h1>
&lt;p>&lt;code>prefix&lt;/code> æ˜¯ tmux çš„å‰ç¼€é”®ï¼Œé»˜è®¤æ˜¯ ctrl+b ã€‚åªæœ‰æŒ‰ä¸‹å‰ç¼€é”®ï¼Œæ‰ä¼šæ¿€æ´» tmuxï¼Œç„¶åå†æŒ‰å…¶ä»–çš„é”®è¿›è¡Œ tmux æ“ä½œã€‚è¿™æ ·å¯ä»¥é¿å…ä¸å…¶ä»–åº”ç”¨çš„å¿«æ·é”®è¿›è¡Œå†²çªã€‚&lt;/p>
&lt;h2 id="é…ç½®å‰ç¼€">é…ç½®å‰ç¼€&lt;/h2>
&lt;p>éœ€è¦å» tmux.conf ä¸­å»é…ç½®&lt;/p>
&lt;h2 id="åˆ†å±">åˆ†å±&lt;/h2>
&lt;p>æ°´å¹³åˆ†å±ï¼šprefix+&amp;quot;ï¼Œå‰ç¼€é”®åŠ å¼•å·
å‚ç›´åˆ†å±ï¼šprefix+%ï¼Œå‰ç¼€é”®åŠ ç™¾åˆ†å·&lt;/p></description></item><item><title>crystal å¼€å‘ç¯å¢ƒ</title><link>https://example.com/p/crystal-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</link><pubDate>Tue, 27 Aug 2019 14:03:12 +0000</pubDate><guid>https://example.com/p/crystal-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</guid><description>&lt;p>çªç„¶ææ˜ç™½äº† crystal çš„ vscode æ’ä»¶çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ï¼Œè®°å½•ä¸€ä¸‹ã€‚&lt;/p>
&lt;h1 id="å®‰è£…-crystal">å®‰è£… crystal&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">brew install crystal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="å®‰è£…-vscode-æ’ä»¶">å®‰è£… vscode æ’ä»¶&lt;/h1>
&lt;p>&lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=faustinoaq.crystal-lang" target="_blank" rel="noopener"
>https://marketplace.visualstudio.com/items?itemName=faustinoaq.crystal-lang&lt;/a>&lt;/p>
&lt;h1 id="å®‰è£…-scry">å®‰è£… scry&lt;/h1>
&lt;p>scry æ˜¯ crystal çš„ language server çš„ client å·¥å…·ï¼Œåœ¨æœ¬åœ°å®‰è£… scry å°±å¯ä»¥åšåˆ°ä»£ç è·³è½¬äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ git clone https://github.com/crystal-lang-tools/scry.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cd scry
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ shards build -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dependencies are satisfied
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Building: scry
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">crystal build -o /Users/lucas/Documents/demos/crystal/scry/bin/scry src/scry.cr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>/Users/lucas/Documents/demos/crystal/scry/bin/scry å°±æ˜¯ç¼–è¯‘å‡ºæ¥çš„äºŒè¿›åˆ¶çš„è·¯å¾„&lt;/p>
&lt;h1 id="é…ç½®æ’ä»¶">é…ç½®æ’ä»¶&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.compiler&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="s2">&amp;#34;crystal&amp;#34;&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.server&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="s2">&amp;#34;/Users/lucas/Documents/demos/crystal/scry/bin/scry&amp;#34;&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.maxNumberOfProblems&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.mainFile&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="s2">&amp;#34;${workspaceRoot}/src/main.cr&amp;#34;&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.processesLimit&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.hover&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.problems&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="s2">&amp;#34;build&amp;#34;&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.implementations&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.completion&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crystal-lang.logLevel&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŠŠä¸Šé¢çš„é…ç½®åŠ åˆ° vscode çš„ settings æ–‡ä»¶ä¸­ï¼Œå°±å¯ä»¥æ„‰å¿«çš„å¼€å‘å•¦ã€‚&lt;/p></description></item><item><title>crystal ç®€ä»‹</title><link>https://example.com/p/crystal-%E7%AE%80%E4%BB%8B/</link><pubDate>Tue, 27 Aug 2019 02:14:18 +0000</pubDate><guid>https://example.com/p/crystal-%E7%AE%80%E4%BB%8B/</guid><description>&lt;p>å…³æ³¨ crystal ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œçœ‹åˆ°å¤šçº¿ç¨‹çš„ pr å·²ç»æäº†ï¼Œä»Šå¤©ç®€å•å†™ä¸€ä¸‹ã€‚&lt;/p>
&lt;blockquote>
&lt;p>Fast as C, Slick as Ruby&lt;/p>
&lt;/blockquote>
&lt;h1 id="è¯­æ³•">è¯­æ³•&lt;/h1>
&lt;p>crystal çš„è¯­æ³•å’Œ Ruby æ¯”è¾ƒç±»ä¼¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># A very basic HTTP server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">require&lt;/span> &lt;span class="s2">&amp;#34;http/server&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">server&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">HTTP&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="no">Server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">new&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">context&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">content_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;text/plain&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">context&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">print&lt;/span> &lt;span class="s2">&amp;#34;Hello world, got &lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">puts&lt;/span> &lt;span class="s2">&amp;#34;Listening on http://127.0.0.1:8080&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8080&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ç±»å‹ç³»ç»Ÿ">ç±»å‹ç³»ç»Ÿ&lt;/h1>
&lt;p>crystal çš„ä¸€å¤§å–ç‚¹å°±æ˜¯é™æ€ç±»å‹ç³»ç»Ÿï¼Œä½†æ˜¯å†™èµ·æ¥åˆå’Œè„šæœ¬è¯­è¨€ç±»ä¼¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">shout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Notice that both Int32 and String respond_to `to_s`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">to_s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">upcase&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">foo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">ENV&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;FOO&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">typeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">foo&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># =&amp;gt; (Int32 | String)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">typeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">shout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">foo&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># =&amp;gt; String&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ç©ºå¼•ç”¨æ£€æŸ¥">ç©ºå¼•ç”¨æ£€æŸ¥&lt;/h1>
&lt;p>crystal å¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™æ£€æŸ¥ç©ºå¼•ç”¨ï¼Œé¿å…å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nb">rand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">my_string&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hello world&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">puts&lt;/span> &lt;span class="n">my_string&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">upcase&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœè¿è¡Œä¸Šè¿°çš„ä»£ç ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ crystal hello_world.cr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Error in hello_world.cr:5: undefined method &lt;span class="s1">&amp;#39;upcase&amp;#39;&lt;/span> &lt;span class="k">for&lt;/span> Nil &lt;span class="o">(&lt;/span>compile-time &lt;span class="nb">type&lt;/span> is &lt;span class="o">(&lt;/span>String &lt;span class="p">|&lt;/span> Nil&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">puts my_string.upcase
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="å®">å®&lt;/h1>
&lt;p>å¦ä¸€ä¸ªé‡è¦çš„ç‰¹æ€§æ˜¯å®ã€‚é€šè¿‡å®ï¼Œå¯ä»¥å®ç°å‘ ruby é‚£ä¹ˆå¼ºå¤§çš„å…ƒç¼–ç¨‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Object&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">has_instance_var?&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">name&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">Bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{&lt;/span> &lt;span class="vi">@type&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">instance_vars&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">map&lt;/span> &lt;span class="o">&amp;amp;.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">stringify&lt;/span> &lt;span class="p">}}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">includes?&lt;/span> &lt;span class="nb">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">person&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">Person&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">new&lt;/span> &lt;span class="s2">&amp;#34;John&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">person&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">has_instance_var?&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#=&amp;gt; true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">person&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">has_instance_var?&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;birthday&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#=&amp;gt; false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="å¹¶å‘">å¹¶å‘&lt;/h1>
&lt;p>crystal çš„å¹¶å‘æ˜¯é€šè¿‡ç»¿è‰²çº¿ç¨‹å®ç°çš„ï¼Œå³ fibersã€‚å’Œ Go çš„å¹¶å‘æ¨¡å¼å¾ˆåƒï¼Œä¹Ÿæ˜¯åŸºäº channel çš„ CSP æ¨¡å‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="n">channel&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">Channel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="no">Int32&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">new&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total_lines&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">files&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">Dir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">glob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;*.txt&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">files&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">each&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="o">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spawn&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lines&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">File&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lines&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">channel&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">send&lt;/span> &lt;span class="n">lines&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">files&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">times&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">total_lines&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">channel&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">receive&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">puts&lt;/span> &lt;span class="n">total_lines&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="c-ç»‘å®š">C ç»‘å®š&lt;/h1>
&lt;p>C è¯­è¨€ä¸€èˆ¬ç”¨æ¥å®ç°æ¯”è¾ƒåº•å±‚çš„ç³»ç»Ÿï¼Œè€Œä¸” C çš„ç”Ÿæ€ä¸°å¯Œï¼Œä¸€èˆ¬ç°ä»£è¯­è¨€éƒ½ä¼šæä¾› C ç»‘å®šï¼Œæ¥å¤ç”¨ C çš„ç”Ÿæ€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Fragment of the BigInt implementation that uses GMP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">@&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="no">Link&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;gmp&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">lib&lt;/span> &lt;span class="no">LibGMP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">alias&lt;/span> &lt;span class="no">Int&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">LibC&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="no">Int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">alias&lt;/span> &lt;span class="no">ULong&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">LibC&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="no">ULong&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">struct&lt;/span> &lt;span class="no">MPZ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_mp_alloc&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">Int32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_mp_size&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">Int32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_mp_d&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">ULong&lt;/span>&lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fun&lt;/span> &lt;span class="n">init_set_str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">__gmpz_init_set_str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rop&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">MPZ&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">str&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">UInt8&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">base&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">Int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">Int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fun&lt;/span> &lt;span class="n">cmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">__gmpz_cmp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">op1&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">MPZ&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">op2&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">MPZ&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">Int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">struct&lt;/span> &lt;span class="no">BigInt&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="no">Int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">initialize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="nb">String&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">base&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">err&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="no">LibGMP&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">init_set_str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">out&lt;/span> &lt;span class="vi">@mpz&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">base&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">raise&lt;/span> &lt;span class="no">ArgumentError&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;invalid BigInt: &lt;/span>&lt;span class="si">#{&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">&amp;lt;=&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">other&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="no">BigInt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="no">LibGMP&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cmp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mpz&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">other&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ä¾èµ–ç®¡ç†">ä¾èµ–ç®¡ç†&lt;/h1>
&lt;p>ä»»ä½•ä¸€ä¸ªåå·¥ç¨‹æ€§çš„è¯­è¨€ï¼Œéƒ½ä¼šæä¾›ä¸€ä¸ªåŒ…ç®¡ç†ç³»ç»Ÿã€‚crystal çš„åŒ…ç®¡ç†æ˜¯ shardsï¼Œå…¶å®å’Œ go module ç±»ä¼¼ã€‚è¿™ç§é¡¹ç›®çº§åˆ«çš„åŒ…ç®¡ç†å…¶å®æ›´ä¸ºå®ç”¨ä¸€äº›ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ go çš„ä»»ä½•ä¸€ä¸ªé¡¹ç›®ï¼Œå…¶å®éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªåŒ…ï¼Œcrystal è¿˜æ˜¯ä¼šæœ‰ä¸€äº›é™åˆ¶çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">my&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">project&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ss">version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ss">license&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="no">MIT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ss">crystal&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ss">dependencies&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">mysql&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">github&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">crystal&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lang&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">crystal&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ss">version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>socket</title><link>https://example.com/p/socket/</link><pubDate>Mon, 26 Aug 2019 06:54:14 +0000</pubDate><guid>https://example.com/p/socket/</guid><description>&lt;h1 id="socket">Socket&lt;/h1>
&lt;h1 id="ç½‘ç»œæ¨¡å‹">ç½‘ç»œæ¨¡å‹&lt;/h1>
&lt;h2 id="osi-ä¸ƒå±‚æ¨¡å‹">osi ä¸ƒå±‚æ¨¡å‹&lt;/h2>
&lt;ul>
&lt;li>åº”ç”¨å±‚&lt;/li>
&lt;li>è¡¨ç¤ºå±‚&lt;/li>
&lt;li>ä¼šè¯å±‚&lt;/li>
&lt;li>ä¼ è¾“å±‚&lt;/li>
&lt;li>ç½‘ç»œå±‚&lt;/li>
&lt;li>æ•°æ®é“¾è·¯å±‚&lt;/li>
&lt;li>ç‰©ç†å±‚&lt;/li>
&lt;/ul>
&lt;h2 id="å¯¹åº”çš„-tcpip-å°±æ˜¯">å¯¹åº”çš„ tcpip å°±æ˜¯&lt;/h2>
&lt;ul>
&lt;li>åº”ç”¨å±‚
&lt;ul>
&lt;li>dns&lt;/li>
&lt;li>http&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä¼ è¾“å±‚
&lt;ul>
&lt;li>icmp&lt;/li>
&lt;li>tcp&lt;/li>
&lt;li>udp&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ip å±‚
&lt;ul>
&lt;li>ipv4&lt;/li>
&lt;li>ipv6&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>mac å±‚
&lt;ul>
&lt;li>arp&lt;/li>
&lt;li>vlan&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ç‰©ç†å±‚
&lt;ul>
&lt;li>Ethernet&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h1 id="ä¸ºä»€ä¹ˆè¦åˆ†å±‚">ä¸ºä»€ä¹ˆè¦åˆ†å±‚&lt;/h1>
&lt;p>å› ä¸ºç½‘ç»œç¯å¢ƒè¿‡äºå¤æ‚ï¼Œä¸æ˜¯ä¸€ä¸ªèƒ½å¤Ÿé›†ä¸­æ§åˆ¶çš„ä½“ç³»ã€‚å…¨çƒçš„æœåŠ¡å™¨å’Œè®¾å¤‡å„æœ‰å„çš„ä½“ç³»ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡åŒä¸€å¥—ç½‘ç»œåè®®æ ˆåˆ‡åˆ†æˆå¤šä¸ªå±‚æ¬¡å’Œç»„åˆï¼Œæ¥æ»¡è¶³ä¸åŒè®¾å¤‡ä¹‹é—´çš„é€šä¿¡éœ€æ±‚ã€‚&lt;/p>
&lt;p>äºŒå±‚åˆ°å››å±‚ï¼Œå³ macã€ip å’Œä¼ è¾“ç­‰å±‚éƒ½æ˜¯ Linux å†…æ ¸ä¸­å¤„ç†ã€‚åº”ç”¨å±‚çš„å¦‚æµè§ˆå™¨ã€Nginx å’Œ Tomcat ç­‰éƒ½æ˜¯ç”¨æˆ·æ€çš„ã€‚&lt;/p>
&lt;p>ä¼ è¾“å±‚çš„ tcp å’Œ udp é‡Œéƒ½æœ‰ç«¯å£çš„æ¦‚å¿µï¼Œä¸åŒåº”ç”¨ç›‘å¬ä¸åŒçš„æ®µå³å¯ã€‚&lt;/p>
&lt;p>åº”ç”¨å±‚å’Œå†…æ ¸çš„äº’é€šæœºåˆ¶ï¼Œå°±æ˜¯é€šè¿‡ socket ç³»ç»Ÿè°ƒç”¨ã€‚å…¶å® socket å“ªä¸€å±‚éƒ½ä¸å±äºï¼Œå®ƒæ˜¯å±äºæ“ä½œç³»ç»Ÿçš„æ¦‚å¿µï¼Œè€Œä¸æ˜¯ç½‘ç»œåˆ†å±‚çš„æ¦‚å¿µã€‚å› ä¸ºæ“ä½œç³»ç»ŸæŠŠäºŒå±‚åˆ°å››å±‚çš„å¤„ç†ä»£ç åœ¨å†…æ ¸é‡Œï¼Œåº”ç”¨å±‚çš„å¤„ç†ä»£ç è®©åº”ç”¨è‡ªå·±åšï¼Œä¸¤è€…éœ€è¦è·¨å†…æ ¸æ€å’Œç”¨æˆ·æ€è¿›è¡Œé€šä¿¡ï¼Œè¿™ä¸ªå°±æ˜¯ socketã€‚&lt;/p>
&lt;h1 id="tcp-å’Œ-udp-çš„åŒºåˆ«">TCP å’Œ UDP çš„åŒºåˆ«&lt;/h1>
&lt;ul>
&lt;li>tcp æ˜¯é¢å‘è¿æ¥çš„ï¼Œudp æ˜¯é¢å‘æ— è¿æ¥çš„&lt;/li>
&lt;li>tcp æä¾›å¯é äº¤ä»˜ï¼Œæ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€å¹¶ä¸”æŒ‰åºåˆ°è¾¾ã€‚udp ä¸æä¾›å¯é äº¤ä»˜ï¼Œå¯èƒ½ä¸¢å¤±ï¼Œä¸æŒ‰é¡ºåºã€‚&lt;/li>
&lt;li>tcp æ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œå‘é€çš„æ˜¯ä¸€ä¸ªæµï¼Œæ— å¤´æ— å°¾ã€‚udp æ˜¯æ•°æ®æŠ¥æ–‡çš„ï¼Œä¸€ä¸ªä¸€ä¸ªå‘é€ã€‚&lt;/li>
&lt;li>tcp å¯ä»¥æä¾›æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œå¯ä»¥é˜²æ­¢å¯¹ç«¯è¢«å‹å®ï¼Œä¹Ÿé˜²æ­¢ç½‘ç»œè¢«å‹å®ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ‰€è°“çš„è¿æ¥ï¼ŒæŒ‡ä¸¤ç«¯çš„æ•°æ®ç»“æ„çŠ¶æ€çš„ååŒï¼Œä¸¤è¾¹çŠ¶æ€å¯¹çš„ä¸Šï¼Œç¬¦åˆ tcp åè®®çš„è§„åˆ™ï¼Œå°±è®¤ä¸ºè¿æ¥æ˜¯å­˜åœ¨çš„ï¼Œå¦åˆ™å°±æ˜¯æ–­æ‰çš„ã€‚&lt;/strong>&lt;/p>
&lt;p>&lt;strong>æ‰€è°“çš„å»ºç«‹è¿æ¥ï¼Œå…¶å®æ˜¯ä¸ºäº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç»´æŠ¤è¿æ¥ï¼Œè€Œå»ºç«‹ä¸€å®šçš„æ•°æ®ç»“æ„æ¥ç»´æŠ¤åŒæ–¹äº¤äº’çš„çŠ¶æ€ã€‚å¹¶ç”¨è¿™æ ·çš„æ•°æ®ç»“æ„æ¥ä¿è¯é¢å‘è¿æ¥çš„ç‰¹æ€§ã€‚tcp æ— æ³•å·¦å³ä¸­é—´çš„ä»»ä½•é€šè·¯ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆè™šæ‹Ÿçš„è¿æ¥ã€‚&lt;/strong>&lt;/p>
&lt;p>&lt;strong>æ‰€è°“çš„å¯é ï¼Œä¹Ÿæ˜¯ä¸¤ç«¯çš„æ•°æ®ç»“æ„åšçš„äº‹æƒ…ã€‚ä¸ä¸¢å¤±å…¶å®æ˜¯æ•°æ®ç»“æ„åœ¨â€œç‚¹åâ€ï¼Œé¡ºåºåˆ°è¾¾æ˜¯æ•°æ®ç»“æ„åœ¨â€œæ’åºâ€ï¼Œé¢å‘æ•°æ®æµå…¶å®æ˜¯æ•°æ®ç»“æ„å°†é›¶æ•£çš„åŒ…ï¼ŒæŒ‰ç…§é¡ºåºææˆä¸€ä¸ªæµå‘ç»™åº”ç”¨å±‚ã€‚&lt;/strong>&lt;/p>
&lt;p>&lt;strong>æ‰€è°“çš„æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œå…¶å®å°±æ˜¯æ ¹æ®æ”¶åˆ°çš„å¯¹ç«¯çš„ç½‘ç»œåŒ…ï¼Œè°ƒæ•´ä¸¤ç«¯çš„æ•°æ®ç»“æ„çŠ¶æ€ã€‚&lt;/strong>&lt;/p>
&lt;h1 id="socket-å‡½æ•°">socket å‡½æ•°&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c" data-lang="c">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">socket&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">domain&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">protocol&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>socket å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ª socket æ–‡ä»¶æè¿°ç¬¦ã€‚&lt;/p>
&lt;ul>
&lt;li>domain
&lt;ul>
&lt;li>ä½¿ç”¨ä»€ä¹ˆ ip å±‚çš„åè®®ã€‚AF_INET æ ‡è¯† ipv4ï¼ŒAF_INET6 æ ‡è¯† ipv6ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>type
&lt;ul>
&lt;li>socket çš„ç±»å‹ã€‚&lt;/li>
&lt;li>SOCK_STREAMï¼Œtcp æµçš„&lt;/li>
&lt;li>SOCK_DGRAMï¼Œudp æŠ¥æ–‡çš„&lt;/li>
&lt;li>SOCK_RAWï¼Œå¯ä»¥ç›´æ¥æ“ä½œ ip å±‚ï¼Œæˆ–é tcp å’Œ udp ç±»å‹çš„&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>protocol
&lt;ul>
&lt;li>åè®®&lt;/li>
&lt;li>IPPROTO_TCP, IPPROTO_UDP&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://example.com/Users/lucas/Documents/Nutstore/assets/997e39e5574252ada22220e4b3646dda.png"
loading="lazy"
alt="img"
>&lt;/p></description></item><item><title>go è¿›é˜¶</title><link>https://example.com/p/go-%E8%BF%9B%E9%98%B6/</link><pubDate>Mon, 26 Aug 2019 06:53:32 +0000</pubDate><guid>https://example.com/p/go-%E8%BF%9B%E9%98%B6/</guid><description>&lt;h1 id="diagnostics">Diagnostics&lt;/h1>
&lt;p>go æä¾›äº†ä¸€ç³»åˆ—è¯Šæ–­é€»è¾‘å’Œæ€§èƒ½é—®é¢˜çš„å·¥å…·ã€‚&lt;/p>
&lt;ul>
&lt;li>profiling åˆ†æ&lt;/li>
&lt;li>tracing è·Ÿè¸ª&lt;/li>
&lt;li>debuging è°ƒè¯•&lt;/li>
&lt;li>è¿è¡Œæ—¶ç»Ÿè®¡ä¿¡æ¯å’Œäº‹ä»¶&lt;/li>
&lt;/ul>
&lt;h2 id="profiling">Profiling&lt;/h2>
&lt;p>profiling ä¿¡æ¯å¯ä»¥åœ¨ go test æˆ–è€… net/http/pprof åŒ…çš„æ—¶å€™ä½¿ç”¨ã€‚&lt;/p>
&lt;p>runtime/pprof åŒ…æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>cpu
&lt;ul>
&lt;li>ä¸»åŠ¨æ¶ˆè´¹ cpu å‘¨æœŸæ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œä¸åŒ…æ‹¬ç¡çœ æˆ–è€… io ç­‰å¾…&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>heap
&lt;ul>
&lt;li>æŠ¥å‘Šå†…å­˜åˆ†é…é‡‡æ ·ï¼›&lt;/li>
&lt;li>å½“å‰æˆ–å†å²å†…å­˜ä½¿ç”¨çŠ¶å†µ&lt;/li>
&lt;li>æ£€æµ‹å†…å­˜æ³„éœ²&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>threadcreate
&lt;ul>
&lt;li>æŠ¥å‘Šåˆ›å»ºæ–°çš„ç³»ç»Ÿçº¿ç¨‹&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>goroutine
&lt;ul>
&lt;li>å½“å‰æ‰€æœ‰åç¨‹çš„å †æ ˆè·Ÿè¸ª&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>block
&lt;ul>
&lt;li>æ˜¾ç¤º goroutine é˜»å¡ç­‰å¾…åŒæ­¥åŸè¯­çš„ä½ç½®ã€‚&lt;/li>
&lt;li>é»˜è®¤ä¸å¼€å¯ï¼Œä½¿ç”¨ runtime.SetBlockProfileRate å¯ç”¨&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>mutex
&lt;ul>
&lt;li>æŠ¥å‘Šé”ç«äº‰ã€‚&lt;/li>
&lt;li>å¦‚æœè®¤ä¸ºè‡ªå·±çš„ç¨‹åºå› ä¸ºäº’æ–¥é”å¯¼è‡´ cpu ä¸èƒ½å……åˆ†åˆ©ç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨è¿™ä¸ªã€‚&lt;/li>
&lt;li>é»˜è®¤ä¹Ÿæ˜¯ä¸å¼€å¯ï¼Œä½¿ç”¨ runtime.SetMutexProfileFraction å¯ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>å…¶ä»–å¯ç”¨çš„çš„æ€§èƒ½åˆ†æå·¥å…·&lt;/p>
&lt;p>Linux ä½¿ç”¨&lt;a class="link" href="https://perf.wiki.kernel.org/index.php/Tutorial%ef%bc%8cperf" target="_blank" rel="noopener"
>https://perf.wiki.kernel.org/index.php/Tutorialï¼Œperf&lt;/a> å¯ä»¥åˆ†æ cgo/SWIG ä»£ç å’Œç³»ç»Ÿå†…æ ¸ã€‚&lt;/p>
&lt;p>mac ä¸Šä½¿ç”¨ &lt;a class="link" href="https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/" target="_blank" rel="noopener"
>https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/&lt;/a> å°±è¶³å¤Ÿäº†ã€‚&lt;/p>
&lt;p>åˆ†æçº¿ä¸Šå¤„äºç”Ÿäº§çŠ¶æ€æœåŠ¡&lt;/p>
&lt;p>åœ¨ç”Ÿäº§ä¸Šåˆ†æç¨‹åºä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å¼€å¯æŸäº›æŒ‡æ ‡ä¼šå¢åŠ æˆæœ¬ã€‚&lt;/p>
&lt;p>å¯è§†åŒ–åˆ†ææ•°æ®&lt;/p>
&lt;p>go æä¾›äº†å¾ˆå¤šå¯è§†åŒ–çš„å·¥å…·ï¼Œå‚è€ƒ&lt;a class="link" href="https://blog.golang.org/profiling-go-programs" target="_blank" rel="noopener"
>https://blog.golang.org/profiling-go-programs&lt;/a>&lt;/p>
&lt;p>ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„ profil æ–‡ä»¶ï¼šå‚è€ƒ&lt;a class="link" href="https://golang.org/pkg/runtime/pprof/#Profile" target="_blank" rel="noopener"
>https://golang.org/pkg/runtime/pprof/#Profile&lt;/a>&lt;/p>
&lt;p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹ pprof ç¨‹åºç›‘å¬çš„ç«¯å£å’Œè·¯å¾„ï¼Œå‚è€ƒï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http/pprof&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mux&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewServeMux&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mux&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/custom_debug_path/profile&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">pprof&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Profile&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ListenAndServe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:7777&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">mux&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>mysql</title><link>https://example.com/p/mysql/</link><pubDate>Sat, 01 Dec 2018 15:54:53 +0000</pubDate><guid>https://example.com/p/mysql/</guid><description>&lt;h2 id="mysql-åŸºæœ¬æ¶æ„">MySQL åŸºæœ¬æ¶æ„&lt;/h2>
&lt;p>å®¢æˆ·ç«¯&lt;/p>
&lt;p>server å±‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è¿æ¥å™¨ï¼šç®¡ç†è¿æ¥ï¼Œæƒé™éªŒè¯&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŸ¥è¯¢ç¼“å­˜ï¼šå‘½ä¸­è§„åˆ™ï¼Œç›´æ¥è¿”å›ç»“æœ 8.0 ä¹‹åå…¨éƒ¨åˆ é™¤äº†è¿™ä¸ªæ¨¡å—&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ†æå™¨ï¼šè¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¼˜åŒ–å™¨ï¼šæ‰§è¡Œè®¡åˆ’ç”Ÿæˆï¼Œç´¢å¼•é€‰æ‹©&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰§è¡Œå™¨ï¼šæ“ä½œå¼•æ“ï¼Œè¿”å›ç»“æœ&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å­˜å‚¨å¼•æ“ï¼šå­˜å‚¨æ•°æ®ï¼Œæä¾›è¯»å†™æ¥å£&lt;/p>
&lt;p>æ•°æ®åº“ä¸­çš„é•¿è¿æ¥æŒ‡è¿æ¥æˆåŠŸä¹‹åï¼Œå¦‚æœå®¢æˆ·ç«¯æŒç»­æœ‰è¯·æ±‚ï¼Œåˆ™ä¸€ç›´ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥ã€‚çŸ­è¿æ¥æ˜¯æŒ‡æ¯æ¬¡æ‰§è¡Œå®Œå¾ˆå°‘çš„å‡ æ¬¡æŸ¥è¯¢ä¹‹åå°±æ–­å¼€è¿æ¥ï¼Œä¸‹æ¬¡å†é‡æ–°å»ºç«‹ã€‚&lt;/p>
&lt;p>å¦‚æœå…¨éƒ¨ä½¿ç”¨é•¿è¿æ¥ï¼Œä¼šå¯¼è‡´ mysql å†…å­˜æ¶¨çš„å¾ˆå¿«ï¼Œå¯èƒ½å‡ºç° OOMï¼Œå› æ­¤è¦å®šæœŸæ–­å¼€é•¿è¿æ¥ï¼Œæˆ–è€…åœ¨æ‰§è¡Œä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ“ä½œä¹‹åï¼Œæ‰§è¡Œ mysql_reset_connection é‡ç½®ä¸€ä¸‹ã€‚&lt;/p>
&lt;h2 id="æ—¥å¿—ç³»ç»Ÿ">æ—¥å¿—ç³»ç»Ÿ&lt;/h2>
&lt;h3 id="redo-log-é‡åšæ—¥å¿—">redo log é‡åšæ—¥å¿—&lt;/h3>
&lt;p>redo log æ˜¯ innodb å¼•æ“ç‰¹æœ‰çš„ã€‚ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æŸä¸ªæ•°æ®é¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹ã€‚å¾ªç¯å†™å…¥ã€‚&lt;/p>
&lt;p>WAL æŠ€æœ¯ï¼šWrite-Ahead Loggingï¼šå…³é”®ç‚¹å°±æ˜¯å…ˆå†™æ—¥å¿—ï¼Œå†å†™ç£ç›˜ã€‚å½“ä¸€æ¡è®°å½•æ›´æ–°æ—¶ï¼Œå…ˆæŠŠè®°å½•å†™åˆ° redolog ä¸­ï¼Œæ›´æ–°åˆ°å†…å­˜ï¼Œè¿™æ—¶è¿™ä¸ªæ›´æ–°æ“ä½œå°±æˆåŠŸäº†ã€‚ç„¶å innodb å¼•æ“å°±ä¼šåœ¨é€‚å½“çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªæ“ä½œè®°å½•æ›´æ–°åˆ°ç£ç›˜ä¸­ã€‚å› æ­¤åœ¨æ•°æ®åº“å¼‚å¸¸é‡å¯çš„æ—¶å€™ï¼Œä¹‹å‰çš„æäº¤çš„è®°å½•ä¸ä¼šä¸¢å¤±ã€‚&lt;/p>
&lt;h3 id="binlog-å½’æ¡£æ—¥å¿—">binlog å½’æ¡£æ—¥å¿—&lt;/h3>
&lt;p>binlog æ˜¯ server å±‚å®ç°çš„ï¼Œæ‰€æœ‰çš„å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ã€‚binlog æ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯è¿™ä¸ªè¯­å¥çš„åŸå§‹é€»è¾‘ã€‚binlog æ˜¯å†™åˆ°ä¸€å®šå¤§å°åï¼Œåˆ‡æ¢ä¸‹ä¸€ä¸ªï¼Œä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—ã€‚&lt;/p>
&lt;p>å› æ­¤ä¸€ä¸ª update æ“ä½œå°±æ˜¯ï¼š&lt;/p>
&lt;p>æ‰¾åˆ°è¯¥è¡Œ&lt;/p>
&lt;p>åˆ¤æ–­æ•°æ®é¡µæ˜¯å¦åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœæ˜¯è¿”å›è¡Œæ•°æ®ï¼Œå¦åˆ™ä»ç£ç›˜è¯»å…¥åˆ°å†…å­˜ä¸­ã€‚&lt;/p>
&lt;p>å°†å€¼è¿›è¡Œæ›´æ–°ï¼Œå†™å…¥æ–°è¡Œ&lt;/p>
&lt;p>æ–°è¡Œæ›´æ–°åˆ°å†…å­˜&lt;/p>
&lt;p>å†™å…¥ redologï¼Œå¤„äº prepare é˜¶æ®µ&lt;/p>
&lt;p>å†™å…¥ binlog&lt;/p>
&lt;p>æäº¤äº‹åŠ¡ï¼Œå¤„äº commit é˜¶æ®µã€‚&lt;/p>
&lt;p>è¿™ä¸ªå°±æ˜¯ä¸¤é˜¶æ®µæäº¤ã€‚&lt;/p>
&lt;h2 id="äº‹åŠ¡éš”ç¦»">äº‹åŠ¡éš”ç¦»&lt;/h2>
&lt;p>Isolationï¼šéš”ç¦»æ€§&lt;/p>
&lt;p>è„è¯»ï¼Œå¹»è¯»ï¼Œä¸å¯é‡å¤è¯»&lt;/p>
&lt;p>éš”ç¦»çš„è¶Šä¸¥å®ï¼Œæ•ˆç‡è¶Šä½ã€‚&lt;/p>
&lt;p>SQL çš„æ ‡å‡†éš”ç¦»çº§åˆ«ï¼š&lt;/p>
&lt;p>è¯»æœªæäº¤ï¼šä¸€ä¸ªäº‹åŠ¡æ²¡æäº¤çš„æ—¶å€™ï¼Œå®ƒåšçš„å˜æ›´å°±èƒ½è¢«åˆ«çš„äº‹åŠ¡çœ‹åˆ°&lt;/p>
&lt;p>è¯»æäº¤ï¼šä¸€ä¸ªäº‹åŠ¡æäº¤ä¹‹åï¼Œåšçš„å˜æ›´æ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°&lt;/p>
&lt;p>å¯é‡å¤è¯»ï¼šä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œæ—¶çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ—¶ä¸€è‡´çš„ã€‚&lt;/p>
&lt;p>ä¸²è¡ŒåŒ–ï¼šé¡¾åæ€ä¹‰ï¼Œå¯¹äºåŒä¸€è¡Œè®°å½•ï¼Œå†™ä¼šåŠ å†™é”ï¼Œè¯»ä¹Ÿä¼šåŠ è¯»é”ã€‚å½“è¯»å†™é”å†²çªæ—¶ï¼Œåè®¿é—®çš„äº‹åŠ¡ï¼Œå¿…é¡»ç­‰å‰ä¸€ä¸ªäº‹åŠ¡å®Œæˆã€‚&lt;/p>
&lt;p>åœ¨å®ç°çš„æ—¶å€™ï¼Œæ•°æ®åº“ä¼šåˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œè®¿é—®çš„æ—¶å€™ä»¥è§†å›¾çš„é€»è¾‘ç»“æœä¸ºå‡†ã€‚&lt;/p>
&lt;ul>
&lt;li>å¯é‡å¤è¯»ï¼Œè¿™ä¸ªè§†å›¾æ˜¯åœ¨äº‹åŠ¡å¯åŠ¨æ—¶åˆ›å»ºï¼Œæ•´ä¸ªäº‹åŠ¡å­˜åœ¨æœŸé—´éƒ½ç”¨è¿™ä¸ªè§†å›¾ã€‚&lt;/li>
&lt;li>è¯»æäº¤ï¼Œè¿™ä¸ªè§†å›¾åœ¨æ¯ä¸ª sql è¯­å¥å¼€å§‹æ‰§è¡Œçš„æ—¶å€™åˆ›å»º&lt;/li>
&lt;li>è¯»æœªæäº¤ç›´æ¥è¿”å›è®°å½•çš„æœ€æ–°å€¼ï¼Œæ²¡æœ‰è§†å›¾çš„æ¦‚å¿µã€‚&lt;/li>
&lt;li>ä¸²è¡ŒåŒ–æ˜¯ç”¨åŠ é”çš„æ–¹å¼ã€‚&lt;/li>
&lt;/ul>
&lt;p>mysql åœ¨æ¯æ¡è®°å½•æ›´æ–°çš„æ—¶å€™ï¼Œéƒ½ä¼šè®°å½•ä¸€æ¡å›æ»šæ“ä½œï¼Œè®°å½•ä¸Šçš„æœ€æ–°å€¼éƒ½å¯ä»¥é€šè¿‡å›æ»šæ“ä½œï¼Œå¾—åˆ°å‰ä¸€ä¸ªçŠ¶æ€çš„å€¼ã€‚å½“æ²¡æœ‰äº‹åŠ¡éœ€è¦ç”¨åˆ°å›æ»šæ—¥å¿—æ—¶ï¼Œå°±ä¼šè¢«åˆ é™¤ã€‚æ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨é•¿äº‹åŠ¡ï¼Œè¿™æ ·ä¼šå ç”¨å­˜å‚¨ç©ºé—´å’Œé”ã€‚&lt;/p>
&lt;p>mysql å¯åŠ¨äº‹åŠ¡çš„æ–¹å¼&lt;/p>
&lt;ul>
&lt;li>æ˜¾å¼å¯åŠ¨ï¼šbegin æˆ–è€… start transactionã€‚é…å¥—çš„æäº¤è¯­å¥æ˜¯ commitï¼Œå›æ»šè¯­å¥æ˜¯ rollbackã€‚&lt;/li>
&lt;li>set autocommit=0 è¿™ä¸ªå‘½ä»¤ä¼šå°†è¿™ä¸ªçº¿ç¨‹çš„è‡ªåŠ¨æäº¤å…³é—­ã€‚æ„å‘³ç€å¦‚æœåªæ‰§è¡Œä¸€ä¸ª select è¯­å¥ï¼Œäº‹åŠ¡å°±å¯åŠ¨äº†ï¼Œè€Œä¸”ä¸ä¼šè‡ªåŠ¨å…³é—­ï¼Œé™¤éä¸»åŠ¨æ‰§è¡Œ commit æˆ–è€… rollbackï¼Œæˆ–è€…æ–­å¼€è¿æ¥ã€‚&lt;/li>
&lt;/ul>
&lt;p>å› æ­¤ä¸€èˆ¬ set autocommit=1ï¼Œæ‰“å¼€æ˜¾ç¤ºå¯åŠ¨çš„æ¨¡å¼ã€‚&lt;/p></description></item><item><title>graphql</title><link>https://example.com/p/graphql/</link><pubDate>Thu, 08 Nov 2018 18:28:13 +0000</pubDate><guid>https://example.com/p/graphql/</guid><description>&lt;p>graphql ç»å¸¸è¢«è®¤ä¸ºæ˜¯èšç„¦äºå‰ç«¯çš„æŠ€æœ¯ã€‚&lt;/p>
&lt;h1 id="æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ&lt;/h1>
&lt;h2 id="sdlschema-definition-languageæ¨¡å¼å®šä¹‰è¯­è¨€">SDLï¼šschema definition languageï¼ˆæ¨¡å¼å®šä¹‰è¯­è¨€ï¼‰&lt;/h2>
&lt;p>å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Person&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>: &lt;span class="kt">String&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">age&lt;/span>: &lt;span class="kt">Int&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªç±»å‹æœ‰ä¸¤ä¸ªå­—æ®µï¼Œname å’Œ ageï¼Œä»–ä»¬çš„ç±»å‹æ˜¯ String å’Œ Intã€‚ï¼çš„æ„æ€ä»£è¡¨ä»–ä»¬æ˜¯å¿…éœ€çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Post&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>: &lt;span class="kt">String&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">author&lt;/span>: &lt;span class="kt">Person&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥çš„ Post ä¹Ÿæœ‰ä¸¤ä¸ªå­—æ®µï¼Œå…¶ä¸­ Person ä¹Ÿæ˜¯å¯ä»¥ä½œä¸ºä¸€ä¸ªç±»å‹ã€‚&lt;/p>
&lt;p>ä¹Ÿå¯ä»¥è¿™æ ·ï¼Œåœ¨ Person ä¸­æ·»åŠ ä¸€ä¸ª postï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Person&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>: &lt;span class="kt">String&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">age&lt;/span>: &lt;span class="kt">Int&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">posts&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">Post&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é€šè¿‡-query-è·å–æ•°æ®">é€šè¿‡ Query è·å–æ•°æ®&lt;/h2>
&lt;h3 id="åŸºæœ¬æŸ¥è¯¢">åŸºæœ¬æŸ¥è¯¢&lt;/h3>
&lt;p>å®¢æˆ·ç«¯å‘é€ä¸‹é¢çš„æ•°æ®ç»™æœåŠ¡å™¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">allPersons&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>allPersons æ˜¯æ ¹å­—æ®µï¼ˆroot fieldï¼‰ï¼Œå®ƒä¸‹é¢çš„æˆä¸ºæŸ¥è¯¢çš„ payloadï¼Œè¿™é‡Œä»…åŒ…å«äº†ä¸€ä¸ª nameã€‚&lt;/p>
&lt;p>æœåŠ¡å™¨è¿”å›çš„ç»“æœä¼šæ˜¯è¿™æ ·çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;allPersons&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Johnny&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Sarah&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Alice&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°åªè¿”å›äº† name å­—æ®µï¼Œage å­—æ®µæ˜¯ä¸ä¼šè¿”å›çš„ã€‚&lt;/p>
&lt;p>å¦‚æœä½¿ç”¨å¦‚ä¸‹çš„ payload å°±ä¼šè¿”å›ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">allPersons&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">age&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿˜å¯ä»¥æŸ¥è¯¢ posts ä¸­çš„ titleï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> allPersons {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> age
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> posts {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> title
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¸¦å‚æ•°æŸ¥è¯¢">å¸¦å‚æ•°æŸ¥è¯¢&lt;/h3>
&lt;p>åœ¨ graphql ä¸­æ¯ä¸ªå­—æ®µéƒ½æœ‰ 0 æˆ–è€…æ›´å¤šä¸ªå‚æ•°ã€‚æ¯”å¦‚ allPerson æœ‰ä¸€ä¸ª last å‚æ•°ï¼Œåªè¿”å›æœ€åä¸¤ä¸ªäººçš„ä¿¡æ¯ï¼Œè¿™é‡Œå°±æ˜¯æŸ¥è¯¢çš„è¯­å¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> allPersons(last: 2) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é€šè¿‡-mutation-å†™æ•°æ®">é€šè¿‡ Mutation å†™æ•°æ®&lt;/h2>
&lt;ul>
&lt;li>åˆ›å»º&lt;/li>
&lt;li>æ›´æ–°&lt;/li>
&lt;li>åˆ é™¤&lt;/li>
&lt;/ul>
&lt;p>mutation å’Œ query ç±»ä¼¼ï¼Œåªæ˜¯éœ€è¦åŠ ä¸Š mutation å…³é”®å­—ã€‚å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">mutation&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">createPerson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Bob&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">age&lt;/span>: &lt;span class="kt">36&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">age&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>mutation ä¹Ÿæœ‰ä¸€ä¸ªæ ¹å­—æ®µï¼Œå« createPersonã€‚æˆ‘ä»¬çŸ¥é“è¿™ä¸ªå­—æ®µæœ‰ä¸¤ä¸ªå‚æ•° name å’Œ ageã€‚è¿”å›å€¼ä¼šåƒè¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;createPerson&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Bob&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">36&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>graphql ä¼šç»™æ¯ä¸ªè®°å½•æ–°å¢ä¸€ä¸ªå”¯ä¸€çš„ ID å­—æ®µï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·è®¾ç½® Person ç±»å‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Person&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">id&lt;/span>: &lt;span class="kt">ID&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>: &lt;span class="kt">String&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">age&lt;/span>: &lt;span class="kt">Int&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åå½“ä¸€ä¸ªæ–°çš„ Person å¯¹è±¡åˆ›å»ºæ—¶ï¼Œå°±å¯ä»¥è®¿é—®åˆ° idã€‚&lt;/p>
&lt;h2 id="é€šè¿‡è®¢é˜…å®æ—¶æ›´æ–°">é€šè¿‡è®¢é˜…å®æ—¶æ›´æ–°&lt;/h2>
&lt;p>graphql æä¾›äº†å®æ—¶è®¢é˜…æ›´æ–°ã€‚&lt;/p>
&lt;p>å½“å®¢æˆ·ç«¯è®¢é˜…ä¸€ä¸ªäº‹ä»¶çš„æ—¶å€™ï¼Œå°†ä¼šä¿æŒä¸€ä¸ªå’ŒæœåŠ¡å™¨çš„ç¨³å®šè¿æ¥ï¼Œå½“æœ‰å˜åŒ–æ—¶ä¼šå‘Šè¯‰å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">subscription&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newPerson&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">age&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› æ­¤å½“æœ‰ä¸ªç”¨æˆ·åˆ›å»ºæˆ–è€…ä¿®æ”¹æ—¶éƒ½ä¼šå‘Šè¯‰å®¢æˆ·ç«¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;newPerson&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;Jane&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;age&amp;#34;: 23
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®šä¹‰ä¸€ä¸ªæ¨¡å¼">å®šä¹‰ä¸€ä¸ªæ¨¡å¼&lt;/h2>
&lt;p>æœ‰å‡ ä¸ªç‰¹æ®Šçš„æ ¹ç±»å‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Query&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Mutation&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Subscription&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">...&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>API çš„æ ¹å­—æ®µéƒ½æ˜¯åœ¨ä¸Šé¢è¿™ä¸‰ä¸ªä¹‹ä¸‹ï¼Œå¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Query&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">allPersons&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">Person&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>allPersons ä¹Ÿå¯ä»¥æœ‰å‚æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Query&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">allPersons&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">last&lt;/span>: &lt;span class="kt">Int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">Person&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç±»ä¼¼çš„ mutation ä¹Ÿæ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Mutation&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">createPerson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>: &lt;span class="kt">String&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">age&lt;/span>: &lt;span class="kt">Int&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Person&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è®¢é˜…ä¹Ÿæ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Subscription&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newPerson&lt;/span>: &lt;span class="kt">Person&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·å°±æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Query&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">allPersons&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">last&lt;/span>: &lt;span class="kt">Int&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">Person&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Mutation&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">createPerson&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>: &lt;span class="kt">String&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">age&lt;/span>: &lt;span class="kt">Int&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Person&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Subscription&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">newPerson&lt;/span>: &lt;span class="kt">Person&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Person&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>: &lt;span class="kt">String&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">age&lt;/span>: &lt;span class="kt">Int&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">posts&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">Post&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Post&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>: &lt;span class="kt">String&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">author&lt;/span>: &lt;span class="kt">Person&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ¶æ„å›¾">æ¶æ„å›¾&lt;/h2>
&lt;p>graphql ç›´è¿æ•°æ®åº“&lt;/p>
&lt;p>&lt;img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fx0v777rc9j30lr0573yq.jpg"
loading="lazy"
>&lt;/p>
&lt;p>graphql è¿æ¥å±‚è¿æ¥å¤šä¸ªæœåŠ¡&lt;/p>
&lt;p>&lt;img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fx0v7pe3qkj30p60j2t9u.jpg"
loading="lazy"
>&lt;/p>
&lt;p>graphql æ··è¿æ•°æ®åº“å’ŒæœåŠ¡&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fx0v867hy3j30k30jrwff.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="è§£æå‡½æ•°">è§£æå‡½æ•°&lt;/h2>
&lt;p>æ¯ä¸ªå­—æ®µå…¶å®éƒ½æœ‰ä¸€ä¸ªè§£æå™¨ï¼Œå« resolverã€‚&lt;/p>
&lt;p>å½“æœåŠ¡å™¨æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œä¼šè°ƒç”¨å­—æ®µçš„ resolver å‡½æ•°ï¼Œä¸€æ—¦ resolver å‡½æ•°æœ‰è¿”å›ï¼ŒæœåŠ¡å™¨å°±ä¼šæŠŠæ•°æ®åŒ…è£…æˆè¦è¿”å›çš„å­—æ®µã€‚&lt;/p>
&lt;p>æœ‰è¿™æ ·ä¸€ä¸ªç±»å‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Query&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">author&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>: &lt;span class="kt">ID&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Author&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Author&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">posts&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">Post&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">type&lt;/span> &lt;span class="nx">Post&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>: &lt;span class="kt">String&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">content&lt;/span>: &lt;span class="kt">String&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“æ‰§è¡Œä¸€ä¸ª query çš„æ—¶å€™ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">query&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">author&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;abc&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">posts&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">content&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¼šä»¥å¦‚ä¸‹çš„æ–¹å¼æ‰§è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Query&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">author&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">root&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;abc&amp;#39;&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nx">author&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Author&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">posts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">author&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nx">posts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="nx">each&lt;/span> &lt;span class="nx">post&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="nx">posts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Post&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">post&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nx">title&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Post&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">content&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">post&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="nx">content&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="å®æˆ˜">å®æˆ˜&lt;/h1></description></item><item><title>go-best-practice</title><link>https://example.com/p/go-best-practice/</link><pubDate>Wed, 07 Nov 2018 17:16:07 +0000</pubDate><guid>https://example.com/p/go-best-practice/</guid><description>&lt;ul>
&lt;li>çŸ­å˜é‡åç§°åœ¨å£°æ˜å’Œä¸Šæ¬¡ä½¿ç”¨ä¹‹é—´çš„è·ç¦»å¾ˆçŸ­æ—¶æ•ˆæœå¾ˆå¥½ã€‚&lt;/li>
&lt;li>é•¿å˜é‡åç§°éœ€è¦è¯æ˜è‡ªå·±çš„åˆç†æ€§; åç§°è¶Šé•¿ï¼Œéœ€è¦æä¾›çš„ä»·å€¼è¶Šé«˜ã€‚å†—é•¿çš„åç§°ä¸é¡µé¢ä¸Šçš„é‡é‡ç›¸æ¯”ï¼Œä¿¡å·é‡è¾ƒå°ã€‚&lt;/li>
&lt;li>è¯·å‹¿åœ¨å˜é‡åç§°ä¸­åŒ…å«ç±»å‹åç§°ã€‚&lt;/li>
&lt;li>å¸¸é‡åº”è¯¥æè¿°å®ƒä»¬æŒæœ‰çš„å€¼ï¼Œè€Œä¸æ˜¯è¯¥å¦‚ä½•ä½¿ç”¨ã€‚&lt;/li>
&lt;li>å¯¹äºå¾ªç¯å’Œåˆ†æ”¯ä½¿ç”¨å•å­—æ¯å˜é‡ï¼Œå‚æ•°å’Œè¿”å›å€¼ä½¿ç”¨å•ä¸ªå­—ï¼Œå‡½æ•°å’ŒåŒ…çº§åˆ«å£°æ˜ä½¿ç”¨å¤šä¸ªå•è¯&lt;/li>
&lt;li>æ–¹æ³•ã€æ¥å£å’ŒåŒ…ä½¿ç”¨å•ä¸ªè¯ã€‚&lt;/li>
&lt;li>è¯·è®°ä½ï¼ŒåŒ…çš„åç§°æ˜¯è°ƒç”¨è€…ç”¨æ¥å¼•ç”¨åç§°çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¦å¥½å¥½åˆ©ç”¨è¿™ä¸€ç‚¹ã€‚&lt;/li>
&lt;/ul>
&lt;p>å˜é‡çš„åç§°åº”æè¿°å…¶å†…å®¹ï¼Œè€Œä¸æ˜¯å†…å®¹çš„ç±»å‹ã€‚&lt;/p>
&lt;p>å…¸å‹é”™è¯¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var usersMap map[string]*User
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœ&lt;code>users&lt;/code>çš„æè¿°æ€§éƒ½ä¸å¤Ÿç”¨ï¼Œé‚£ä¹ˆ&lt;code>usersMap&lt;/code>ä¹Ÿä¸ä¼šã€‚&lt;/p>
&lt;p>&lt;strong>å£°æ˜å˜é‡ä½†æ²¡æœ‰åˆå§‹åŒ–æ—¶ï¼Œè¯·ä½¿ç”¨ varã€‚&lt;/strong>&lt;/p>
&lt;p>&lt;strong>åœ¨å£°æ˜å’Œåˆå§‹åŒ–æ—¶ï¼Œä½¿ç”¨:=ã€‚&lt;/strong>&lt;/p>
&lt;h4 id="å…³äºå˜é‡å’Œå¸¸é‡çš„æ³¨é‡Šåº”æè¿°å…¶å†…å®¹è€Œéå…¶ç›®çš„">å…³äºå˜é‡å’Œå¸¸é‡çš„æ³¨é‡Šåº”æè¿°å…¶å†…å®¹è€Œéå…¶ç›®çš„&lt;/h4>
&lt;ul>
&lt;li>ä»»ä½•æ—¢ä¸æ˜æ˜¾ä¹Ÿä¸ç®€çŸ­çš„å…¬å…±åŠŸèƒ½å¿…é¡»äºˆä»¥æ³¨é‡Šã€‚&lt;/li>
&lt;li>æ— è®ºé•¿åº¦æˆ–å¤æ‚ç¨‹åº¦å¦‚ä½•ï¼Œå¯¹åº“ä¸­çš„ä»»ä½•å‡½æ•°éƒ½å¿…é¡»è¿›è¡Œæ³¨é‡Š&lt;/li>
&lt;/ul>
&lt;p>åœ¨ç¼–å†™å‡½æ•°ä¹‹å‰ï¼Œè¯·ç¼–å†™æè¿°å‡½æ•°çš„æ³¨é‡Šã€‚ å¦‚æœä½ å‘ç°å¾ˆéš¾å†™å‡ºæ³¨é‡Šï¼Œé‚£ä¹ˆè¿™å°±è¡¨æ˜ä½ å°†è¦ç¼–å†™çš„ä»£ç å¾ˆéš¾ç†è§£ã€‚&lt;/p>
&lt;p>ä»¥åŒ…æ‰€æä¾›çš„å†…å®¹æ¥å‘½åï¼Œè€Œä¸æ˜¯å®ƒåŒ…å«çš„å†…å®¹ã€‚&lt;/p>
&lt;h4 id="é¿å…ä½¿ç”¨ç±»ä¼¼basecommonæˆ–utilçš„åŒ…åç§°">é¿å…ä½¿ç”¨ç±»ä¼¼&lt;code>base&lt;/code>ï¼Œ&lt;code>common&lt;/code>æˆ–&lt;code>util&lt;/code>çš„åŒ…åç§°&lt;/h4>
&lt;h4 id="å°½æ—©returnè€Œä¸æ˜¯æ·±åº¦åµŒå¥—">å°½æ—©&lt;code>return&lt;/code>è€Œä¸æ˜¯æ·±åº¦åµŒå¥—&lt;/h4>
&lt;h4 id="ä½¿ç”¨internalåŒ…æ¥å‡å°‘å…¬å…±-api">ä½¿ç”¨&lt;code>internal&lt;/code>åŒ…æ¥å‡å°‘å…¬å…± API&lt;/h4>
&lt;h4 id="ä¸é¼“åŠ±ä½¿ç”¨nilä½œä¸ºå‚æ•°">ä¸é¼“åŠ±ä½¿ç”¨&lt;code>nil&lt;/code>ä½œä¸ºå‚æ•°&lt;/h4>
&lt;h4 id="é¦–é€‰å¯å˜å‚æ•°å‡½æ•°è€Œétå‚æ•°">é¦–é€‰å¯å˜å‚æ•°å‡½æ•°è€Œé&lt;code>[]T&lt;/code>å‚æ•°&lt;/h4>
&lt;h4 id="é€šè¿‡æ¶ˆé™¤é”™è¯¯æ¥æ¶ˆé™¤é”™è¯¯å¤„ç†">é€šè¿‡æ¶ˆé™¤é”™è¯¯æ¥æ¶ˆé™¤é”™è¯¯å¤„ç†&lt;/h4>
&lt;h4 id="ä½¿ç”¨githubcompkgerrorsåŒ…è£…errors">ä½¿ç”¨&lt;code>github.com/pkg/errors&lt;/code>åŒ…è£…&lt;code>errors&lt;/code>&lt;/h4>
&lt;h4 id="æ°¸è¿œä¸è¦å¯åŠ¨ä¸€ä¸ªåœæ­¢ä¸äº†çš„-goroutine">æ°¸è¿œä¸è¦å¯åŠ¨ä¸€ä¸ªåœæ­¢ä¸äº†çš„ goroutine&lt;/h4></description></item><item><title>kubernetes</title><link>https://example.com/p/kubernetes/</link><pubDate>Mon, 08 Oct 2018 15:29:21 +0000</pubDate><guid>https://example.com/p/kubernetes/</guid><description>&lt;h3 id="docker">docker&lt;/h3>
&lt;p>åˆ©ç”¨ Linux çš„ cgroups å’Œ namespaceï¼Œæ„å»ºä¸€ä¸ªæ²™ç®±è¿è¡Œç¯å¢ƒã€‚&lt;/p>
&lt;h3 id="docker-é•œåƒ">docker é•œåƒ&lt;/h3>
&lt;p>å…¶å®å°±æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè¿™ä¸ªå‹ç¼©åŒ…æ˜¯ç”±ä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æ–‡ä»¶ç›®å½•æ„æˆï¼ŒåŒ…å«äº†è¿™ä¸ªåº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„æ‰€æœ‰ä¾èµ–ï¼Œæ‰€ä»¥æœ¬åœ°å¼€å‘ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒæ˜¯ä¸€æ ·çš„ã€‚&lt;/p>
&lt;p>è§£å†³äº†åº”ç”¨æ‰“åŒ…çš„æ ¹æœ¬æ€§é—®é¢˜ã€‚&lt;/p>
&lt;h3 id="å®¹å™¨ç¼–æ’">å®¹å™¨ç¼–æ’&lt;/h3>
&lt;p>å¯¹ Docker å®¹å™¨çš„ä¸€ç³»åˆ—å®šä¹‰ã€é…ç½®å’Œåˆ›å»ºåŠ¨ä½œçš„ç®¡ç†&lt;/p>
&lt;blockquote>
&lt;p>å®¹å™¨æœ¬èº«æ²¡æœ‰ä»·å€¼ï¼Œæœ‰ä»·å€¼çš„æ˜¯â€œå®¹å™¨ç¼–æ’â€ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="åŸç†">åŸç†&lt;/h3>
&lt;p>å®¹å™¨æŠ€æœ¯çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå°±æ˜¯é€šè¿‡çº¦æŸå’Œä¿®æ”¹è¿›ç¨‹çš„åŠ¨æ€è¡¨ç°ï¼Œä»è€Œä¸ºå…¶åˆ›é€ ä¸€ä¸ªâ€œè¾¹ç•Œâ€ã€‚&lt;/p>
&lt;p>åœ¨åˆ›å»ºä¸€ä¸ªå®¹å™¨è¿›ç¨‹çš„æ—¶å€™ï¼ŒæŒ‡å®šäº†è¿™ä¸ªè¿›ç¨‹æ‰€éœ€è¦å¯åŠ¨çš„ä¸€ç»„ Namespace å‚æ•°ï¼Œè¿™æ ·å®¹å™¨å°±åªèƒ½çœ‹åˆ°å½“å‰ Namespace æ‰€é™å®šçš„èµ„æºã€æ–‡ä»¶ã€è®¾å¤‡ã€çŠ¶æ€æˆ–é…ç½®ã€‚&lt;/p>
&lt;p>Cgroups ä¸»è¦ä½œç”¨æ˜¯ä¸ºä¸€ä¸ªè¿›ç¨‹ç»„è®¾ç½®èµ„æºä¸Šé™ï¼Œå¦‚ CPUã€å†…å­˜ã€ç£ç›˜å’Œå¸¦å®½ç­‰ã€‚ä¹Ÿå¯ä»¥è®¾ç½®è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œå®¡è®¡ï¼ŒæŒ‚èµ·ï¼Œé‡å¯ç­‰ã€‚&lt;/p>
&lt;p>å› æ­¤ï¼Œä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Docker å®¹å™¨ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå¯ç”¨äº†å¤šä¸ª Namespace çš„åº”ç”¨è¿›ç¨‹ï¼Œè€Œè¿™ä¸ªè¿›ç¨‹èƒ½å¤Ÿä½¿ç”¨çš„èµ„æºæ˜¯ç”± Cgroups æ¥é™åˆ¶ã€‚&lt;/p>
&lt;p>æŒ‚è½½åœ¨å®¹å™¨æ ¹ç›®å½•ä¸Šï¼Œç”¨æ¥ä¸ºå®¹å™¨è¿›ç¨‹æä¾›éš”ç¦»åæ‰§è¡Œç¯å¢ƒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œå°±æ˜¯å®¹å™¨é•œåƒï¼Œrootfsã€‚&lt;/p>
&lt;ul>
&lt;li>å¯åŠ¨ Namespace é…ç½®&lt;/li>
&lt;li>è®¾ç½® Cgroups å‚æ•°&lt;/li>
&lt;li>åˆ‡æ¢è¿›ç¨‹æ ¹ç›®å½• rootf&lt;/li>
&lt;/ul>
&lt;p>docker é•œåƒè®¾è®¡æ—¶ï¼Œå¼•å…¥äº†å±‚ï¼ˆlayerï¼‰ï¼Œç”¨æˆ·åˆ¶ä½œé•œåƒçš„æ¯ä¸€æ­¥æ“ä½œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå±‚ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¢é‡çš„ rootfsã€‚AuFSï¼Œæ‰€ä»¥å°±æœ‰äº†å…±äº«å±‚ï¼Œé•œåƒä¸ç”¨é‚£ä¹ˆå¤§ã€‚&lt;/p>
&lt;p>ä¸€ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥é€‰æ‹©åŠ å…¥åˆ°æŸä¸ªè¿›ç¨‹å·²æœ‰çš„ Namespace å½“ä¸­ï¼Œä»è€Œè¾¾åˆ°è¿›å…¥è¿™ä¸ªè¿›ç¨‹æ‰€åœ¨çš„å®¹å™¨çš„ç›®çš„ï¼Œè¿™æ­£æ˜¯ docker exec çš„å®ç°åŸç†ã€‚&lt;/p>
&lt;p>volume æœºåˆ¶ï¼Œå…è®¸ä½ å°†å®¿ä¸»æœºä¸ŠæŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶ï¼ŒæŒ‚è½½åˆ°å®¹å™¨é‡Œé¢è¿›è¡Œè¯»å–å’Œä¿®æ”¹æ“ä½œã€‚&lt;/p>
&lt;h3 id="ä¸»è¦ä¾èµ–-linux-ä¾èµ–ä¸‰å¤§æŠ€æœ¯">ä¸»è¦ä¾èµ– Linux ä¾èµ–ä¸‰å¤§æŠ€æœ¯&lt;/h3>
&lt;ul>
&lt;li>Namespace&lt;/li>
&lt;li>Cgroups&lt;/li>
&lt;li>rootfs&lt;/li>
&lt;/ul>
&lt;h3 id="å’Œè™šæ‹Ÿæœºæ¯”è¾ƒ">å’Œè™šæ‹Ÿæœºæ¯”è¾ƒ&lt;/h3>
&lt;p>è™šæ‹Ÿæœºæ˜¯é€šè¿‡ç¡¬ä»¶è™šæ‹ŸåŒ–åŠŸèƒ½ï¼Œæ¨¡æ‹Ÿä¸€å¥—æ“ä½œç³»ç»Ÿæ‰€éœ€è¦çš„å„ç§ç¡¬ä»¶ï¼Œå¦‚ CPUã€å†…å­˜ã€IO è®¾å¤‡ç­‰ï¼Œç„¶åå®‰è£…ä¸€ä¸ªæ–°çš„æ“ä½œç³»ç»Ÿã€‚&lt;/p>
&lt;p>docker æ˜¯åˆ©ç”¨ Linux çš„ Namespace åŸç†ï¼Œå¸®åŠ©ç”¨æˆ·å¯åŠ¨çš„è¿˜æ˜¯ç³»ç»Ÿçš„åº”ç”¨è¿›ç¨‹ï¼Œåªæ˜¯åŠ äº†ä¸€äº›å‚æ•°ï¼Œé™åˆ¶å…¶èƒ½çœ‹åˆ°çš„èµ„æºã€‚å› æ­¤ç›¸å¯¹äºè™šæ‹Ÿæœºèµ„æºæ¶ˆè€—æ›´å°ï¼Œè€Œä¸”è½»é‡çº§ï¼Œæ•æ·é«˜æ€§èƒ½ã€‚&lt;/p>
&lt;p>ä¸è¿‡ç¼ºç‚¹å°±æ˜¯éš”ç¦»ä¸å½»åº•ï¼Œå¤šä¸ªå®¹å™¨è¿›ç¨‹å…¬ç”¨å®¿ä¸»æœºæ“ä½œç³»ç»Ÿå†…æ ¸ã€‚æœ‰äº›èµ„æºå’Œå¯¹è±¡ä¸å¯ä»¥è¢« Namespace åŒ–çš„ï¼Œå¦‚æ—¶é—´ã€‚&lt;/p>
&lt;p>kubernetes è¦è§£å†³çš„é—®é¢˜&lt;/p>
&lt;p>ç¼–æ’ï¼Ÿè°ƒåº¦ï¼Ÿå®¹å™¨äº‘ï¼Ÿé›†ç¾¤ç®¡ç†ï¼Ÿ&lt;/p>
&lt;p>&lt;img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fw117whrc6j31hc0u0gq5.jpg"
loading="lazy"
>&lt;/p>
&lt;ul>
&lt;li>master
&lt;ul>
&lt;li>kube-apiserverï¼šAPI æœåŠ¡&lt;/li>
&lt;li>kube-schedulerï¼šè°ƒåº¦&lt;/li>
&lt;li>kube-controller-managerï¼šç¼–æ’&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>node
&lt;ul>
&lt;li>kubeletï¼šåŒå®¹å™¨è¿è¡Œæ—¶æ‰“äº¤é“ã€‚ä¾èµ–äº CRIï¼ˆcontainer runtime interface å®¹å™¨è¿è¡Œæ¥å£ï¼‰è¿œç¨‹è°ƒç”¨æ¥å£ï¼Œè¿™ä¸ªæ¥å£å®šä¹‰äº†å®¹å™¨è¿è¡Œæ—¶çš„å„é¡¹æ ¸å¿ƒæ“ä½œã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>etcd&lt;/li>
&lt;/ul>
&lt;p>è¿è¡Œåœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸­çš„å„ç§ä»»åŠ¡ä¹‹é—´ï¼Œå®é™…å­˜åœ¨å„ç§å„æ ·çš„å…³ç³»ã€‚è¿™äº›å…³ç³»çš„å¤„ç†ï¼Œæ‰æ˜¯ä½œä¸šç¼–æ’å’Œç®¡ç†ç³»ç»Ÿæœ€å›°éš¾çš„åœ°æ–¹ã€‚&lt;/p>
&lt;p>sudo&lt;/p>
&lt;ul>
&lt;li>é¦–å…ˆï¼Œé€šè¿‡ä¸€ä¸ªç¼–æ’å¯¹è±¡ï¼Œå¦‚ podï¼Œjob æˆ– cronjob ç­‰ï¼Œæ¥æè¿°ä½ è¯•å›¾ç®¡ç†çš„åº”ç”¨ï¼›&lt;/li>
&lt;li>ç„¶åï¼Œå†ä¸ºå®ƒå®šä¹‰ä¸€äº›æœåŠ¡å¯¹è±¡ï¼Œå¦‚ serviceï¼Œsecretï¼Œautoscaler ç­‰ã€‚è¿™äº›å¯¹è±¡ï¼Œä¼šè´Ÿè´£å…·ä½“çš„å¹³å°çº§åŠŸèƒ½ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™ç§ä½¿ç”¨æ–¹æ³•ï¼Œå°±æ˜¯æ‰€è°“çš„â€œå£°æ˜å¼ APIâ€ã€‚è¿™ç§ API å¯¹åº”çš„ç¼–æ’å¯¹è±¡å’ŒæœåŠ¡å¯¹è±¡ï¼Œéƒ½æ˜¯ k8s é¡¹ç›®ä¸­çš„ API å¯¹è±¡ã€‚&lt;/p>
&lt;h2 id="ç®€å•ä½¿ç”¨">ç®€å•ä½¿ç”¨&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">kubectl create -f æˆ‘çš„é…ç½®æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>pod å°±æ˜¯ k8s ä¸–ç•Œä¸­çš„åº”ç”¨ï¼Œè€Œä¸€ä¸ªåº”ç”¨å¯ä»¥ç”±å¤šä¸ªå®¹å™¨ç»„æˆã€‚&lt;/p>
&lt;p>ä½¿ç”¨ä¸€ä¸ª API å¯¹è±¡ç®¡ç†å¦ä¸€ä¸ª API å¯¹è±¡çš„æ–¹æ³•ï¼Œå«æ§åˆ¶å™¨æ¨¡å¼ã€‚&lt;/p>
&lt;p>æ¯ä¸ª API å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª metadata å­—æ®µï¼Œè¿™ä¸ªå­—æ®µæ˜¯ API å¯¹è±¡çš„æ ‡è¯†ï¼Œå³å…ƒæ•°æ®ã€‚ä¸»è¦ç”¨åˆ°çš„æ˜¯ labelsï¼Œspec.selector.matchLabels å°±æ˜¯ k8s è¿‡æ»¤çš„è§„åˆ™ã€‚ä¸ labels åŒå±‚çº§çš„æ˜¯ annotationsï¼Œè¿™æ˜¯ç”± k8s æ‰€æ„Ÿå…´è¶£çš„ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ã€‚&lt;/p>
&lt;p>ä¸€ä¸ª k8s çš„ API å¯¹è±¡éƒ½æœ‰ metadata å’Œ spec ä¸¤ä¸ªéƒ¨åˆ†ã€‚å‰è€…æ”¾çš„æ˜¯å¯¹è±¡çš„å…ƒæ•°æ®ï¼Œå¯¹æ‰€æœ‰ API å¯¹è±¡æ¥è®²ï¼Œè¿™éƒ¨åˆ†çš„å­—æ®µå’Œæ ¼å¼åŸºæœ¬ä¸€æ ·ï¼›è€Œåè€…å­˜æ”¾çš„æ˜¯å±äºè¿™ä¸ªå¯¹è±¡ç‹¬æœ‰çš„å®šä¹‰ï¼Œç”¨æ¥æè¿°å®ƒæ‰€è¦è¡¨è¾¾çš„åŠŸèƒ½ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ kubectl create -f nginx-deployment.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get pods -l app=nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment-67594d6bf6-9gdvr 1/1 Running 0 10m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx-deployment-67594d6bf6-v6j7w 1/1 Running 0 10m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl describe pod nginx-deployment-67594d6bf6-9gdvr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: nginx-deployment-67594d6bf6-9gdvr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Priority: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PriorityClassName: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Node: node-1/10.168.0.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Start Time: Thu, 16 Aug 2018 08:48:42 +0000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: app=nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pod-template-hash=2315082692
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status: Running
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 10.32.0.23
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Controlled By: ReplicaSet/nginx-deployment-67594d6bf6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Reason Age From Message
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---- ------ ---- ---- -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal Scheduled 1m default-scheduler Successfully assigned default/nginx-deployment-67594d6bf6-9gdvr to node-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal Pulling 25s kubelet, node-1 pulling image &amp;#34;nginx:1.7.9&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal Pulled 17s kubelet, node-1 Successfully pulled image &amp;#34;nginx:1.7.9&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal Created 17s kubelet, node-1 Created container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal Started 17s kubelet, node-1 Started container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl apply -f nginx-deployment.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># ä¿®æ”¹ nginx-deployment.yaml çš„å†…å®¹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl apply -f nginx-deployment.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨å‘½ä»¤è¡Œä¸­ï¼Œæ‰€æœ‰ key-value æ ¼å¼çš„å‚æ•°ï¼Œéƒ½ä½¿ç”¨â€œ=â€œè€Œä¸æ˜¯â€ï¼šâ€œè¡¨ç¤ºã€‚&lt;/p>
&lt;p>åœ¨ k8s æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹ API å¯¹è±¡çš„æ‰€æœ‰é‡è¦æ“ä½œï¼Œéƒ½ä¼šè¢«è®°å½•åœ¨è¿™ä¸ªå¯¹è±¡çš„ events ä¸­ã€‚&lt;/p>
&lt;p>åœ¨çº¿ä¸šåŠ¡&lt;/p>
&lt;p>Deployment&lt;/p>
&lt;p>StatefunSet&lt;/p>
&lt;p>DaemonSet&lt;/p>
&lt;p>ç¦»çº¿ä¸šåŠ¡&lt;/p>
&lt;p>Job&lt;/p>
&lt;p>restartPolicy åœ¨ job å¯¹è±¡é‡Œåªè¢«å…è®¸è®¾ç½®ä¸º never å’Œ onFailureï¼›è€Œåœ¨ Deployment å¯¹è±¡ä¸­ï¼Œåªè¢«å…è®¸è®¾ç½®ä¸º alwaysã€‚&lt;/p>
&lt;h3 id="å£°æ˜å¼-api-å’Œ-kubernetes-ç¼–ç¨‹èŒƒå¼">å£°æ˜å¼ API å’Œ Kubernetes ç¼–ç¨‹èŒƒå¼&lt;/h3>
&lt;p>åˆ›å»ºä¸€ä¸ªä¸¤ä¸ª Nginx å®¹å™¨çš„æ­¥éª¤ï¼š&lt;/p>
&lt;p>é¦–å…ˆå†™ä¸€ä¸ª Deployment çš„ yaml æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apps/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx-deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replicas&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åä½¿ç”¨ kubectl create å‘½ä»¤åœ¨ Kubernetes ä¸­åˆ›å»ºä¸€ä¸ª Deployment å¯¹è±¡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">kubectl create -f nginx.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·ä¸¤ä¸ª Nginx pod å°±è¿è¡Œèµ·æ¥äº†ã€‚&lt;/p>
&lt;p>å¦‚æœè¦æ›´æ–°çš„è¯ï¼Œåªéœ€è¦ä¿®æ”¹ yaml æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ kubectl apply å‘½ä»¤æ›´æ–°ï¼Œè§¦å‘äº†æ»šåŠ¨æ›´æ–°ã€‚&lt;/p>
&lt;p>è¿™ä¸ª apply å‘½ä»¤å°±æ˜¯å£°æ˜å¼ APIã€‚&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fwzjwny2o8j31hc0u0abg.jpg"
loading="lazy"
>&lt;/p>
&lt;p>istio é¡¹ç›®ä¸­ï¼Œæœ€æ ¹æœ¬çš„ç»„ä»¶æ˜¯è¿è¡Œåœ¨æ¯ä¸ª pod é‡Œçš„ envoy å®¹å™¨ã€‚è¿™ä¸ªä»£ç†æœåŠ¡ä»¥ sidecar å®¹å™¨çš„æ–¹å¼ï¼ŒæŠŠæ•´ä¸ª pod çš„è¿›å‡ºæµé‡æ¥ç®¡ä¸‹æ¥ã€‚istio çš„æ§åˆ¶å±‚çš„ pilot ç»„ä»¶ï¼Œé€šè¿‡è°ƒç”¨æ¯ä¸ª envoy çš„ APIï¼Œå®ç°å¾®æœåŠ¡çš„æ²»ç†ã€‚&lt;/p>
&lt;p>åˆ©ç”¨ Kubernetes çš„ Admission Controlï¼Œä¹Ÿå«ï¼šInitializerï¼Œå…ˆåˆ›å»ºä¸€ä¸ª Podï¼Œç„¶å istio å°±æ˜¯åœ¨ pod çš„ yaml ç»™ Kubernetes ä¹‹åï¼Œè‡ªåŠ¨åŠ ä¸Š envoy çš„é…ç½®ã€‚&lt;/p>
&lt;ul>
&lt;li>æ‰€è°“çš„å£°æ˜å¼ï¼ŒæŒ‡çš„å°±æ˜¯æˆ‘åªéœ€è¦æäº¤ä¸€ä¸ªå®šä¹‰å¥½çš„ API å¯¹è±¡æ¥å£°æ˜æˆ‘æ‰€æœŸæœ›çš„çŠ¶æ€æ˜¯ä»€ä¹ˆæ ·å­ã€‚&lt;/li>
&lt;li>å…¶æ¬¡ï¼Œå£°æ˜å¼ API å…è®¸æœ‰å¤šä¸ª API å†™ç«¯ï¼Œä»¥ PATCH çš„æ–¹å¼å¯¹ API å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ— éœ€å…³å¿ƒåŸå§‹çš„ YAML æ–‡ä»¶çš„å†…å®¹ã€‚&lt;/li>
&lt;li>æœ€åï¼ŒKubernetes åŸºäºå¯¹ API å¯¹è±¡çš„å¢åˆ æ”¹æŸ¥ï¼Œåœ¨æ— éœ€å¤–ç•Œå¹²é¢„çš„æƒ…å†µä¸‹ï¼Œå®Œæˆå¯¹å®é™…çŠ¶æ€å’ŒæœŸæœ›çŠ¶æ€çš„è°ƒè°ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä¸ª API å¯¹è±¡åœ¨ etcd ä¸­å®Œæ•´è·¯å¾„æ˜¯ç”±ï¼šgroupï¼ˆAPI ç»„ï¼‰ï¼Œversionï¼ˆAPI ç‰ˆæœ¬ï¼‰å’Œ Resourceï¼ˆAPI èµ„æºç±»å‹ï¼‰ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆçš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">batch/v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">CronJob&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>batch æ˜¯ç»„ï¼Œv2 æ˜¯ç‰ˆæœ¬ï¼ŒCronJob æ˜¯ç±»å‹ã€‚&lt;/p>
&lt;p>å¯¹äºæ ¸å¿ƒ API å¯¹è±¡ï¼šPodï¼ŒNode ç­‰ï¼Œä¸éœ€è¦ group çš„ã€‚éæ ¸å¿ƒå¯¹è±¡æ˜¯éœ€è¦ç»„ã€‚&lt;/p>
&lt;p>åŒ¹é…è§„åˆ™å°±æ˜¯ï¼š&lt;/p>
&lt;p>/apis/batch/v2/CronJob&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é¦–å…ˆ yaml æ–‡ä»¶è¢«æäº¤ç»™äº† APIServer&lt;/p>
&lt;p>è¿‡æ»¤ï¼Œæˆæƒï¼Œè¶…æ—¶å¤„ç†æˆ–å®¡è®¡ç­‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿›å…¥è·¯ç”±æµç¨‹&lt;/p>
&lt;p>æ ¹æ® yamlï¼ŒæŒ‰ç…§åŒ¹é…è§„åˆ™å»æ‰¾&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ ¹æ®å®šä¹‰ï¼ŒæŒ‰ç…§ yaml ä¸­çš„å­—æ®µï¼Œåˆ›å»ºä¸€ä¸ªå¯¹è±¡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿›è¡Œ Amission å’Œ Validationã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŠŠéªŒè¯è¿‡çš„å¯¹è±¡ï¼Œåºåˆ—åŒ–å­˜åˆ° etcd ä¸­&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="rbac">RBAC&lt;/h3>
&lt;p>åŸºäºè§’è‰²çš„æ§åˆ¶&lt;/p>
&lt;p>roleï¼šè§’è‰²ï¼Œä¸€ç»„è§„åˆ™ï¼Œå®šä¹‰ Kubernetes API å¯¹è±¡çš„æ“ä½œæƒé™&lt;/p>
&lt;p>subjectï¼šè¢«ä½œç”¨è€…ï¼Œå¯ä»¥æ˜¯äººï¼Œä¹Ÿå¯ä»¥æ˜¯æœºå™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯ Kubernetes å®šä¹‰çš„ç”¨æˆ·&lt;/p>
&lt;p>rolebindingï¼šå®šä¹‰è¢«ä½œç”¨è€…å’Œè§’è‰²çš„ç»‘å®šå…³ç³»&lt;/p>
&lt;p>ServiceAccountï¼Œä¼šè¢«è‡ªåŠ¨åˆ›å»ºåˆ†é…ä¸€ä¸ª secret å¯¹è±¡ã€‚&lt;/p>
&lt;p>æ‰€è°“è§’è‰²å°±æ˜¯ä¸€ç»„æƒé™è§„åˆ™åˆ—è¡¨ï¼Œè€Œæˆ‘ä»¬åˆ†é…è¿™äº›æƒé™çš„æ–¹å¼ï¼Œå°±æ˜¯é€šè¿‡åˆ›å»º rolebinding å¯¹è±¡ï¼Œå°†è¢«ä½œç”¨è€…å’Œæƒé™åˆ—è¡¨è¿›è¡Œç»‘å®šã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œä¸ä¹‹å¯¹åº”çš„ ClusterRole å’Œ ClusterRoleBindingï¼Œåˆ™æ˜¯ Kubernetes é›†ç¾¤çº§åˆ«çš„ Role å’Œ RoleBindingï¼Œå®ƒä»¬çš„ä½œç”¨èŒƒå›´ä¸å— Namespace é™åˆ¶ã€‚&lt;/p>
&lt;p>å°½ç®¡è¢«ä½œç”¨è€…æœ‰å¾ˆå¤šç§ï¼ˆå¦‚ Userã€Groupï¼‰ï¼Œä½†åœ¨æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ€æ™®éçš„è¿˜æ˜¯ ServiceAccountã€‚&lt;/p>
&lt;h3 id="ç½‘ç»œæ¨¡å‹">ç½‘ç»œæ¨¡å‹&lt;/h3>
&lt;p>Veth Pair å¸¸å¸¸è¢«ç”¨ä½œè¿æ¥ä¸åŒ Network Namespace çš„ç½‘çº¿ã€‚veth pair è™šæ‹Ÿè®¾å¤‡ã€‚æ€»æ˜¯ä»¥ä¸¤å¼ è™šæ‹Ÿç½‘å¡å½¢å¼æˆå¯¹å‡ºç°ã€‚å¹¶ä¸”ï¼Œä»ä¸€ä¸ªç½‘å¡ä¸­å‘å‡ºçš„æ•°æ®åŒ…ï¼Œå¯ä»¥ç›´æ¥å‡ºç°åœ¨å¦ä¸€å¼ ç½‘å¡ä¸Šï¼Œå“ªæ€•è¿™ä¸¤ä¸ªç½‘å¡åœ¨ä¸åŒçš„ network Namespace é‡Œã€‚&lt;/p>
&lt;p>ä¸€æ—¦ä¸€å¼ è™šæ‹Ÿç½‘å¡è¢«æ’åœ¨ç½‘æ¡¥ä¸Šï¼Œä»–å°±ä¼šå˜æˆè¯¥ç½‘æ¡¥çš„ä»è®¾å¤‡ã€‚ä»è®¾å¤‡ä¼šé™çº§æˆä¸ºç½‘æ¡¥çš„ä¸€ä¸ªç«¯å£ï¼Œä¸èƒ½å¤„ç†æ•°æ®åŒ…ï¼Œåªèƒ½æ¥æ”¶æµå…¥çš„æ•°æ®åŒ…äº¤ç»™å¯¹åº”çš„ç½‘æ¡¥ã€‚&lt;/p>
&lt;p>ä¸¤ä¸ªå®¹å™¨çš„è™šæ‹Ÿç½‘å¡éƒ½æ’åœ¨å®¿ä¸»æœºçš„ä¸€ä¸ªç½‘æ¡¥ä¸Šï¼Œè¿™ä¸ªç½‘æ¡¥å°±æ‰®æ¼”ä¸€ä¸ªäº¤æ¢æœºçš„è§’è‰²ã€‚å½“ä¸¤ä¸ªå®¹å™¨è¿›è¡Œç½‘ç»œäº¤äº’æ—¶ï¼Œä»ä¸€ä¸ªå®¹å™¨çš„å‘å‡ºè¯·æ±‚åˆ°å®¿ä¸»æœºï¼Œç”±äº Veth Pair çš„æœºåˆ¶ï¼Œå¦ä¸€ä¸ªå®¹å™¨å°±çœ‹åˆ°æœ‰æ•°æ®æµå…¥ã€‚&lt;/p>
&lt;p>å› æ­¤é»˜è®¤æƒ…å†µä¸‹ï¼Œè¢«é™åˆ¶åœ¨ network Namespace çš„å®¹å™¨è¿›ç¨‹ï¼Œå®é™…å°±æ˜¯é€šè¿‡ veth pair è®¾å¤‡+å®¿ä¸»æœºç½‘æ¡¥çš„æ–¹å¼ï¼Œå®ç°äº†è·Ÿå…¶ä»–å®¹å™¨çš„æ•°æ®äº¤æ¢ã€‚&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fwzjwayfppj31bn0rngn5.jpg"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>è·¨ä¸»é€šä¿¡ï¼Œéœ€è¦æœ‰ä¸€ä¸ªé›†ç¾¤å…¬ç”¨çš„ç½‘æ¡¥ï¼Œæ‰€æœ‰å®¹å™¨éƒ½è¿æ¥åˆ°è¯¥ç½‘æ¡¥ä¸Šï¼Œå°±å¯ä»¥ç›¸äº’é€šä¿¡ï¼Œè¿™å°±æ˜¯ overlay networkï¼ˆè¦†ç›–ç½‘ç»œï¼‰&lt;/p></description></item><item><title>watchdog</title><link>https://example.com/p/watchdog/</link><pubDate>Thu, 06 Sep 2018 16:23:57 +0000</pubDate><guid>https://example.com/p/watchdog/</guid><description>&lt;p>&lt;strong>ç›‘è§†å™¨&lt;/strong>&lt;/p>
&lt;p>ç›‘è§†å™¨æä¾›äº†ä¸€ä¸ªå¤–éƒ¨ä¸–ç•Œå’Œå‡½æ•°ä¹‹é—´çš„éæ‰˜ç®¡çš„é€šç”¨æ¥å£ã€‚å®ƒçš„å·¥ä½œæ˜¯æ”¶é›†ä» API ç½‘å…³æ¥çš„ HTTP è¯·æ±‚ï¼Œç„¶åè°ƒç”¨ç¨‹åºã€‚ç›‘è§†å™¨æ˜¯ä¸€ä¸ªå°å‹çš„ Golang æœåŠ¡â€”â€”ä¸‹å›¾å±•ç¤ºäº†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fuzw3rkue0j30k00bamy2.jpg"
loading="lazy"
>&lt;/p>
&lt;blockquote>
&lt;p>ä¸Šå›¾ï¼šä¸€ä¸ªå°å‹çš„ web æœåŠ¡ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªä¼ å…¥çš„ HTTP è¯·æ±‚åˆ†é…æ‰€éœ€è¦çš„è¿›ç¨‹ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ¯ä¸ªå‡½æ•°éƒ½éœ€è¦åµŒå…¥è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¹¶å°†å…¶ä½œä¸º&lt;code>ENTRYPOINT&lt;/code> æˆ– &lt;code>CMD&lt;/code>ï¼Œå®é™…ä¸Šæ˜¯æŠŠå®ƒä½œä¸ºå®¹å™¨çš„åˆå§‹åŒ–è¿›ç¨‹ã€‚ä¸€æ—¦ä½ çš„è¿›ç¨‹è¢«åˆ›å»ºåˆ†æ”¯ï¼Œç›‘è§†å™¨å°±ä¼šé€šè¿‡&lt;code>stdin&lt;/code> ä¼ é€’ HTTP è¯·æ±‚å¹¶ä»&lt;code>stdout&lt;/code>ä¸­è¯»å– HTTP å“åº”ã€‚è¿™æ„å‘³ç€ä½ çš„ç¨‹åºæ— éœ€çŸ¥é“ web å’Œ HTTP çš„ä»»ä½•ä¿¡æ¯ã€‚&lt;/p>
&lt;h2 id="è½»æ¾åˆ›å»ºæ–°å‡½æ•°">&lt;strong>è½»æ¾åˆ›å»ºæ–°å‡½æ•°&lt;/strong>&lt;/h2>
&lt;p>&lt;strong>ä» CLI åˆ›å»ºä¸€ä¸ªå‡½æ•°&lt;/strong>&lt;/p>
&lt;p>åˆ›å»ºå‡½æ•°æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ FaaS CLI å’Œæ¨¡æ¿ã€‚CLI æŠ½è±¡äº†æ‰€æœ‰ Docker çš„çŸ¥è¯†ï¼Œä½¿å¾—ä½ åªéœ€è¦ç¼–å†™æ‰€æ”¯æŒè¯­è¨€çš„ handler æ–‡ä»¶å³å¯ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://link.zhihu.com/?target=https%3A//blog.alexellis.io/first-faas-python-function/" target="_blank" rel="noopener"
>ä½ çš„ç¬¬ä¸€ä¸ªä½¿ç”¨ OpenFaaS çš„æ— æœåŠ¡å™¨ Python å‡½æ•°&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://link.zhihu.com/?target=https%3A//github.com/openfaas/faas-cli" target="_blank" rel="noopener"
>é˜…è¯»æœ‰å…³ FaaS CLI çš„æ•™ç¨‹&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="æ·±å…¥ç ”ç©¶">&lt;strong>æ·±å…¥ç ”ç©¶&lt;/strong>&lt;/h2>
&lt;p>&lt;strong>Package your function æ‰“åŒ…ä½ çš„å‡½æ•°&lt;/strong>&lt;/p>
&lt;p>å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ CLI æˆ–è€…ç°æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶æˆ–é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•å»æ‰“åŒ…å‡½æ•°ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æˆ–è€…ä¸€ä¸ªæ–°çš„ Docker é•œåƒä½œä¸ºåŸºç¡€é•œåƒ &lt;code>FROM&lt;/code>&lt;/li>
&lt;li>é€šè¿‡&lt;code>curl&lt;/code> æˆ– &lt;code>ADD https://&lt;/code>ä» &lt;a class="link" href="https://link.zhihu.com/?target=https%3A//github.com/openfaas/faas/releases" target="_blank" rel="noopener"
>Releases é¡µé¢&lt;/a> æ·»åŠ  fwatchdog äºŒè¿›åˆ¶æ–‡ä»¶&lt;/li>
&lt;li>ä¸ºæ¯ä¸ªä½ è¦è¿è¡Œçš„å‡½æ•°è®¾ç½® &lt;code>fprocess&lt;/code>(å‡½æ•°è¿›ç¨‹) ç¯å¢ƒå˜é‡&lt;/li>
&lt;li>Expose port 8080&lt;/li>
&lt;li>æš´éœ²ç«¯å£ 8080&lt;/li>
&lt;li>Set the &lt;code>CMD&lt;/code> to &lt;code>fwatchdog&lt;/code>&lt;/li>
&lt;li>è®¾ç½® &lt;code>CMD&lt;/code>ä¸º&lt;code>fwatchdog&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä¸ª&lt;code>echo&lt;/code>å‡½æ•°çš„ç¤ºä¾‹ Dockerfileï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">FROM alpine:3.7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ADD https://github.com/openfaas/faas/releases/download/0.8.0/fwatchdog /usr/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RUN chmod +x /usr/bin/fwatchdog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Define your binary here
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ENV fprocess=&amp;#34;/bin/cat&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CMD [&amp;#34;fwatchdog&amp;#34;]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Implementing a Docker healthcheck å®ç°ä¸€ä¸ª Docker å¥åº·æ£€æŸ¥&lt;/strong>&lt;/p>
&lt;p>Docke çš„å¥åº·æ£€æŸ¥ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†æ˜¯å®ƒæ˜¯æœ€ä½³å®è·µã€‚è¿™ä¼šç¡®ä¿ç›‘è§†å™¨å·²ç»åœ¨ API ç½‘å…³è½¬å‘è¯·æ±‚ä¹‹å‰å‡†å¤‡å¥½æ¥æ”¶è¯·æ±‚ã€‚å¦‚æœå‡½æ•°æˆ–è€…ç›‘è§†å™¨é‡åˆ°ä¸€ä¸ªä¸å¯æ¢å¤çš„é—®é¢˜ï¼ŒSwarm ä¹Ÿä¼šé‡å¯å®¹å™¨ã€‚&lt;/p>
&lt;p>Here is an example of the &lt;code>echo&lt;/code> function implementing a healthcheck with a 5-second checking interval.&lt;/p>
&lt;p>ä¸‹é¢æ˜¯å®ç°äº†ä¸€ä¸ªå…·æœ‰ 5 ç§’é—´éš”çš„å¥åº·æ£€æŸ¥çš„&lt;code>echo&lt;/code>å‡½æ•°ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">FROM functions/alpine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ENV fprocess=&amp;#34;cat /etc/hostname&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HEALTHCHECK --interval=5s CMD [ -e /tmp/.lock ] || exit 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›‘è§†å™¨è¿›ç¨‹æ—©å¯åŠ¨å†…éƒ¨ Golang HTTP æœåŠ¡çš„æ—¶å€™ä¼šåœ¨ &lt;code>/tmp/&lt;/code>ä¸‹é¢åˆ›å»ºä¸€ä¸ª.lock æ–‡ä»¶ã€‚&lt;code>[ -e file_name ]&lt;/code>shell å‘½ä»¤å¯ä»¥æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚åœ¨ Windows å®¹å™¨ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åˆæ³•çš„è·¯å¾„ï¼Œæ‰€ä»¥ä½ å¯èƒ½éœ€è¦è®¾ç½®&lt;code>suppress_lock&lt;/code> ç¯å¢ƒå˜é‡ã€‚&lt;/p>
&lt;p>æœ‰å…³å¥åº·æ£€æŸ¥ï¼Œè¯·é˜…è¯»æˆ‘çš„ Docker Swarm æ•™ç¨‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://link.zhihu.com/?target=http%3A//blog.alexellis.io/test-drive-healthcheck/" target="_blank" rel="noopener"
>10 åˆ†é’Ÿå†…è¯•ç”¨ Docker çš„å¥åº·æ£€æŸ¥&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ç¯å¢ƒå˜é‡é‡è½½:&lt;/strong>&lt;/p>
&lt;p>ç›‘è§†å™¨å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ¥é…ç½®ï¼Œä½ å¿…é¡»å§‹ç»ˆæŒ‡å®šä¸€ä¸ª&lt;code>fprocess&lt;/code> å˜é‡&lt;/p>
&lt;h2 id="é«˜çº§è°ƒæ•´">&lt;strong>é«˜çº§/è°ƒæ•´&lt;/strong>&lt;/h2>
&lt;h2 id="æ–°å­ç›‘è§†å™¨å’Œ-http-æ¨¡å¼">&lt;strong>(æ–°)â€”â€”å­ç›‘è§†å™¨å’Œ HTTP æ¨¡å¼&lt;/strong>&lt;/h2>
&lt;ul>
&lt;li>éƒ¨åˆ†çš„ç›‘è§†å™¨&lt;/li>
&lt;/ul>
&lt;p>ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹åˆ†æ”¯å…·æœ‰è¿›ç¨‹éš”ç¦»ï¼Œå¯ç§»æ¤å’Œç®€å•çš„ä¼˜ç‚¹ã€‚ä»»ä½•è¿›ç¨‹éƒ½å¯ä»¥åœ¨æ²¡æœ‰ä»»ä½•é™„åŠ ä»£ç çš„æƒ…å†µä¸‹å˜æˆä¸€ä¸ªå‡½æ•°ã€‚of-watchdog å¯å’Œ HTTP æ¨¡å¼æ˜¯ä¸€ç§ä¼˜åŒ–ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ‰€æœ‰è¯·æ±‚ä¹‹é—´ç»´æŠ¤ä¸€ä¸ªå•ä¸€çš„è¿›ç¨‹ã€‚&lt;/p>
&lt;p>æ–°ç‰ˆæœ¬çš„ç›‘è§†å™¨æ­£åœ¨&lt;a class="link" href="https://link.zhihu.com/?target=https%3A//github.com/openfaas-incubator/of-watchdog" target="_blank" rel="noopener"
>openfaas-incubator/of-watchdog&lt;/a>ä¸Šæµ‹è¯•ã€‚&lt;/p>
&lt;p>è¿™ç§é‡å†™ä¸»è¦æ˜¯ç”Ÿæˆä¸€ä¸ªå¯ä»¥æŒç»­ç»´æŠ¤çš„ç»“æ„ã€‚å®ƒå°†ä¼šæ›¿ä»£ç°æœ‰çš„ç›‘è§†å™¨ï¼Œä¹Ÿä¼šæœ‰äºŒè¿›åˆ¶çš„é‡Šæ”¾ç‰ˆã€‚&lt;/p>
&lt;h2 id="ä½¿ç”¨-http-å¤´">&lt;strong>ä½¿ç”¨ HTTP å¤´&lt;/strong>&lt;/h2>
&lt;p>HTTP çš„å¤´å’Œå…¶ä»–è¯·æ±‚ä¿¡æ¯ä»¥ä¸‹é¢çš„æ ¼å¼æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">X-Forwarded-By`å¤´å˜æˆäº†`Http_X_Forwarded_By
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;code>Http_Method&lt;/code> - GET/POST etc&lt;/li>
&lt;li>&lt;code>Http_Method&lt;/code> - GET/POST ç­‰ç­‰&lt;/li>
&lt;li>&lt;code>Http_Query&lt;/code> - QueryString value&lt;/li>
&lt;li>&lt;code>Http_Query&lt;/code> - æŸ¥è¯¢å­—ç¬¦ä¸²çš„å€¼&lt;/li>
&lt;li>&lt;code>Http_ContentLength&lt;/code> - gives the total content-length of the incoming HTTP request received by the watchdog.&lt;/li>
&lt;li>&lt;code>Http_ContentLength&lt;/code> - ç›‘è§†å™¨æ”¶åˆ°çš„ HTTP è¯·æ±‚çš„å†…å®¹é•¿åº¦ã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡&lt;code>cgi_headers&lt;/code> ç¯å¢ƒå˜é‡å¯ç”¨è¯¥è¡Œä¸ºã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä»¥ä¸‹æ˜¯å¸¦æœ‰é™„åŠ å¤´å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²çš„ POST è¯·æ±‚çš„ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">$ cgi_headers=true fprocess=env ./watchdog &amp;amp;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2017/06/23 17:02:58 Writing lock-file to: /tmp/.lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl &amp;#34;localhost:8080?q=serverless&amp;amp;page=1&amp;#34; -X POST -H X-Forwarded-By:http://my.vpn.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ å† Linux ç³»ç»Ÿä¸‹è®¾ç½®äº†&lt;code>fprocess&lt;/code> åˆ° &lt;code>env&lt;/code>ä¸­ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Http_User_Agent=curl/7.43.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Accept=*/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_X_Forwarded_By=http://my.vpn.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Method=POST
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Query=q=serverless&amp;amp;page=1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code>GET&lt;/code>è¯·æ±‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">curl &amp;#34;localhost:8080?action=quote&amp;amp;qty=1&amp;amp;productId=105&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›‘è§†å™¨çš„è¾“å‡ºå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Http_User_Agent=curl/7.43.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Accept=*/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Method=GET
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Http_Query=action=quote&amp;amp;qty=1&amp;amp;productId=105
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨å°±å¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨ HTTP çŠ¶æ€æ¥åšå†³ç­–äº†ã€‚&lt;/p>
&lt;h2 id="http-æ–¹æ³•">&lt;strong>HTTP æ–¹æ³•&lt;/strong>&lt;/h2>
&lt;p>ç›‘è§†å™¨æ”¯æŒçš„ HTTP æ–¹æ³•æœ‰ï¼š&lt;/p>
&lt;p>å¸¦æœ‰è¯·æ±‚ä½“çš„ï¼š&lt;/p>
&lt;ul>
&lt;li>POST, PUT, DELETE, UPDATE&lt;/li>
&lt;/ul>
&lt;p>ä¸å¸¦è¯·æ±‚ä½“çš„ï¼š&lt;/p>
&lt;ul>
&lt;li>GET&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>API ç½‘å…³ç°åœ¨æ”¯æŒå‡½æ•°çš„ POST è·¯ç”±ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="è¯·æ±‚å“åº”çš„å†…å®¹ç±»å‹">&lt;strong>è¯·æ±‚å“åº”çš„å†…å®¹ç±»å‹&lt;/strong>&lt;/h2>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç›‘è§†å™¨ä¼šåŒ¹é…å®¢æˆ·ç«¯çš„&amp;quot;Content-Type&amp;quot;ã€‚&lt;/p>
&lt;ul>
&lt;li>å¦‚æœå®¢æˆ·ç«¯å‘é€ Content-Type ä¸º &lt;code>application/json&lt;/code> çš„ json å½¢å¼çš„ post è¯·æ±‚ï¼Œå°†ä¼šåœ¨å“åº”çš„æ—¶å€™è‡ªåŠ¨åŒ¹é…ã€‚&lt;/li>
&lt;li>å¦‚æœå®¢æˆ·ç«¯å‘é€ Content-Type ä¸º &lt;code>text/plain&lt;/code> çš„ json å½¢å¼çš„ post è¯·æ±‚ï¼Œå“åº”ä¹Ÿä¼šè‡ªåŠ¨åŒ¹é…ã€‚&lt;/li>
&lt;/ul>
&lt;p>è‹¥è¦é‡è½½æ‰€æœ‰å“åº”çš„ Content-Type ï¼Œéœ€è¦è®¾ç½®&lt;code>content_type&lt;/code> ç¯å¢ƒå˜é‡ã€‚&lt;/p>
&lt;h2 id="i-dont-want-to-use-the-watchdog">&lt;strong>I don&amp;rsquo;t want to use the watchdog&lt;/strong>&lt;/h2>
&lt;h2 id="æˆ‘ä¸æƒ³ä½¿ç”¨ç›‘è§†å™¨">&lt;strong>æˆ‘ä¸æƒ³ä½¿ç”¨ç›‘è§†å™¨&lt;/strong>&lt;/h2>
&lt;p>è¿™ç§æ¡ˆä¾‹æ˜¯ OpenFaaS æ‰€ä¸æ”¯æŒçš„ï¼Œä½†æ˜¯å¦‚æœä½ çš„å®¹å™¨ç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼Œé‚£ä¹ˆ OpenFaaS çš„ç½‘å…³å’Œå…¶ä»–å·¥å…·ä¹Ÿä¼šç®¡ç†å’Œä¼¸ç¼©æœåŠ¡ã€‚&lt;/p>
&lt;p>ä½ éœ€è¦æä¾›ä¸€ä¸ªé”æ–‡ä»¶ &lt;code>/tmp/.lock&lt;/code>ï¼Œä»¥ä¾¿ä¸šåŠ¡æµç¨‹ç³»ç»Ÿå¯ä»¥åœ¨å®¹å™¨ä¸­è¿è¡Œå¥åº·æ£€æŸ¥ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ swarmï¼Œé‚£ä¹ˆè¯·ç¡®ä¿åœ¨ Dockerfile ä¸­æä¾›&lt;code>HEALTHCHECK&lt;/code>æŒ‡ä»¤â€”â€”åœ¨ &lt;code>faas&lt;/code>å­˜å‚¨åº“ä¸­æœ‰ç¤ºä¾‹ã€‚&lt;/p>
&lt;ul>
&lt;li>åœ¨ HTTP ä¹‹ä¸Šæš´éœ² TCP ç«¯å£ 8080&lt;/li>
&lt;li>åˆ›å»º&lt;code>/tmp/.lock&lt;/code> æ–‡ä»¶ï¼Œæˆ–è€…åœ¨å“åº”æ“ä½œ tempdir ç³»ç»Ÿè°ƒç”¨çš„ä»»ä½•ä½ç½®ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="è°ƒæ•´è‡ªåŠ¨ä¼¸ç¼©">&lt;strong>è°ƒæ•´è‡ªåŠ¨ä¼¸ç¼©&lt;/strong>&lt;/h2>
&lt;p>è‡ªåŠ¨ä¼¸ç¼©å¼ä» 1 ä¸ªå‰¯æœ¬å¼€å§‹ï¼Œä»¥ 5 ä¸ªä½ä¸€ä¸ªå•ä½è¿›è¡Œå‡çº§ï¼š&lt;/p>
&lt;ul>
&lt;li>1-&amp;gt;5&lt;/li>
&lt;li>5-&amp;gt;10&lt;/li>
&lt;li>10-&amp;gt;15&lt;/li>
&lt;li>15-&amp;gt;20&lt;/li>
&lt;/ul>
&lt;p>ä½ å¯ä»¥é€šè¿‡æ ‡ç­¾æ¥è¦†ç›–ä¸€ä¸ªå‡½æ•° minimum å’Œ maximum ã€‚&lt;/p>
&lt;p>å¦‚æœè¦åœ¨ 2 åˆ° 15 ä¹‹é—´çš„è¯ï¼Œè¯·åœ¨éƒ¨ç½²çš„æ—¶å€™é…ç½®ä»¥ä¸‹æ ‡ç­¾ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">com.openfaas.scale.min: &amp;#34;2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com.openfaas.scale.max: &amp;#34;15&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™äº›æ ‡ç­¾æ˜¯å¯é€‰çš„&lt;/p>
&lt;p>&lt;strong>ç¦ç”¨è‡ªåŠ¨ä¼¸ç¼©&lt;/strong>&lt;/p>
&lt;p>å¦‚æœè¦ç¦ç”¨æŸä¸ªå‡½æ•°çš„è‡ªåŠ¨ä¼¸ç¼©ï¼Œå°†æœ€å°å’Œæœ€å¤§çš„å‰¯æœ¬æ•°è®¾ç½®ä¸ºç›¸åŒçš„å€¼ï¼Œå³â€œ1â€ã€‚&lt;/p>
&lt;p>åŒæ ·ä¹Ÿå¯ä»¥åˆ é™¤ AlertManagerã€‚&lt;/p></description></item><item><title>queue-worker</title><link>https://example.com/p/queue-worker/</link><pubDate>Thu, 06 Sep 2018 16:23:12 +0000</pubDate><guid>https://example.com/p/queue-worker/</guid><description>&lt;h1 id="queue-worker-æºç åˆ†æ">queue-worker æºç åˆ†æ&lt;/h1>
&lt;h2 id="å¼‚æ­¥å‡½æ•°å’ŒåŒæ­¥å‡½æ•°">&lt;strong>å¼‚æ­¥å‡½æ•°å’ŒåŒæ­¥å‡½æ•°&lt;/strong>&lt;/h2>
&lt;p>åœ¨ OpenFaaS ä¸­åŒæ­¥è°ƒç”¨å‡½æ•°æ—¶ï¼Œå°†ä¼šè¿æ¥åˆ°ç½‘å…³ï¼Œç›´åˆ°å‡½æ•°æˆåŠŸè¿”å›æ‰ä¼šå…³é—­è¿æ¥ã€‚åŒæ­¥è°ƒç”¨æ˜¯é˜»å¡çš„ã€‚&lt;/p>
&lt;ul>
&lt;li>ç½‘å…³çš„è·¯ç”±æ˜¯ï¼š&lt;code>/function/&amp;lt;function_name&amp;gt;&lt;/code>&lt;/li>
&lt;li>å¿…é¡»ç­‰å¾…&lt;/li>
&lt;li>åœ¨ç»“æŸçš„æ—¶å€™å¾—åˆ°ç»“æœ&lt;/li>
&lt;li>æ˜ç¡®çŸ¥é“æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥&lt;/li>
&lt;/ul>
&lt;p>å¼‚æ­¥å‡½æ•°ä¼šæœ‰ä¸€äº›å·®å¼‚ï¼š&lt;/p>
&lt;ul>
&lt;li>ç½‘å…³çš„è·¯ç”±æ˜¯ï¼š&lt;code>/async-function/&amp;lt;function_name&amp;gt;&lt;/code>&lt;/li>
&lt;li>å®¢æˆ·ç«¯è·å¾— 202 çš„å³æ—¶å“åº”ç &lt;/li>
&lt;li>ä» queue-worker ä¸­è°ƒç”¨å‡½æ•°&lt;/li>
&lt;li>é»˜è®¤æƒ…å†µä¸‹ï¼Œç»“æœæ˜¯è¢«ä¸¢å¼ƒçš„ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="æŸ¥çœ‹-queue-worker-çš„æ—¥å¿—">&lt;strong>æŸ¥çœ‹ queue-worker çš„æ—¥å¿—&lt;/strong>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">docker service logs -f func_queue-worker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åˆ©ç”¨-requestbin-å’Œ-x-callback-url-è·å–å¼‚æ­¥å‡½æ•°çš„ç»“æœ">&lt;strong>åˆ©ç”¨ requestbin å’Œ X-Callback-Url è·å–å¼‚æ­¥å‡½æ•°çš„ç»“æœ&lt;/strong>&lt;/h2>
&lt;p>å¦‚æœéœ€è¦è·å¾—å¼‚æ­¥å‡½æ•°çš„ç»“æœï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š&lt;/p>
&lt;ul>
&lt;li>æ›´æ”¹ä»£ç ï¼Œå°†ç»“æœè¿”å›ç»™ç«¯ç‚¹æˆ–è€…æ¶ˆæ¯ç³»ç»Ÿ&lt;/li>
&lt;li>åˆ©ç”¨å†…ç½®çš„å›è°ƒ
å†…ç½®çš„å›è°ƒå°†ä¼šå…è®¸å‡½æ•°æä¾›ä¸€ä¸ª urlï¼Œqueue-worker ä¼šæŠ¥å‘Šå‡½æ•°çš„æˆåŠŸæˆ–å¤±è´¥ã€‚
requestbin ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ binï¼Œè¿™æ˜¯äº’è”ç½‘çš„ä¸€ä¸ª url åœ°å€ï¼Œå¯ä»¥ä»è¿™é‡Œè·å–å‡½æ•°çš„ç»“æœã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fuzvzbcz2vj30k00b3aar.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fuzvztfu66j30k00b2757.jpg"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fuzw08o8w3j30k00b1aay.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="æºç åˆ†æ">&lt;strong>æºç åˆ†æ&lt;/strong>&lt;/h2>
&lt;h2 id="ä¾èµ–é¡¹">&lt;strong>ä¾èµ–é¡¹&lt;/strong>&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">github.com/nats-io/go-nats-streaming
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com/nats-io/go-nats
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com/openfaas/faas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>go-nats å’Œ go-nats-streaming æ˜¯ nats å’Œ nats-streaming çš„ go ç‰ˆæœ¬çš„å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;p>faas è¿™ä¸ªä¾èµ–å…¶å®æ˜¯åªç”¨åˆ°äº† queue åŒ…ä¸‹é¢çš„ types.go æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯å®šä¹‰äº†å¼‚æ­¥è¯·æ±‚çš„ Request ç»“æ„ä½“å’Œä¸€ä¸ª CanQueueRequests æ¥å£ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package queue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import &amp;#34;net/url&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import &amp;#34;net/http&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// Request for asynchronous processing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type Request struct {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Header http.Header
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Body []byte
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Method string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> QueryString string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Function string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CallbackURL *url.URL `json:&amp;#34;CallbackUrl&amp;#34;`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// CanQueueRequests can take on asynchronous requests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type CanQueueRequests interface {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Queue(req *Request) error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥æ˜ç™½ä½œè€…çš„è®¾è®¡æ€è·¯ï¼Œåªè¦æ˜¯å®ç°äº†è¿™ä¸ª CanQueueRequests æ¥å£ï¼Œå°±å¯ä»¥ä½œä¸ºä¸€ä¸ª queue-workerã€‚&lt;/p>
&lt;h2 id="æ¥å£å®ç°ç±»-natsqueue">&lt;strong>æ¥å£å®ç°ç±» NatsQueue&lt;/strong>&lt;/h2>
&lt;p>æ¥å£çš„å®ç°ç±» NatsQueue æ˜¯åœ¨ handler åŒ…é‡Œã€‚å®ƒçš„å±æ€§éƒ½æ˜¯ nats ä¸­å¸¸ç”¨åˆ°çš„ï¼ŒåŒ…æ‹¬ clientIdï¼ŒclusterIdï¼Œurlï¼Œè¿æ¥ï¼Œä¸»é¢˜ç­‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// NatsQueue queue for work
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type NatsQueue struct {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nc stan.Conn // natsçš„è¿æ¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ClientID string // natsçš„clientId
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ClusterID string // natsçš„clusterId
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> NATSURL string // natsçš„URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Topic string // ä¸»é¢˜
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®ƒçš„ queue æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä¸»è¦åšäº†ä¸¤ä»¶äº‹å„¿ï¼š&lt;/p>
&lt;ol>
&lt;li>è§£æä¼ å…¥çš„ Request å¯¹è±¡ï¼Œå¹¶è½¬ä¸º json å¯¹è±¡ out&lt;/li>
&lt;li>å°† out å‘å¸ƒåˆ°é˜Ÿåˆ—é‡Œ&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// Queue request for processing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func (q *NatsQueue) Queue(req *queue.Request) error {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var err error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt.Printf(&amp;#34;NatsQueue - submitting request: %s.\n&amp;#34;, req.Function)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> out, err := json.Marshal(req)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> err = q.nc.Publish(q.Topic, out)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return err
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>go è¯­è¨€æ²¡æœ‰æ„é€ æ–¹æ³•ï¼Œæ‰€ä»¥ NatsQueue è¿˜ç”¨äºåˆ›å»º NatsQueue çš„å®ä¾‹çš„æ–¹æ³•ï¼Œè¿™é‡Œå°±æˆä¸ºå·¥å‚æ–¹æ³•ã€‚è¿™ä¸ªå·¥å‚æ–¹æ³•ä¸»è¦å°±æ˜¯ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ç¯å¢ƒå˜é‡çš„å€¼ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª nats çš„è¿æ¥ï¼Œç›¸å½“äºç»™ NatsQueue çš„å¯¹è±¡çš„æ¯ä¸ªå±æ€§è¿›è¡Œèµ‹å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func CreateNatsQueue(address string, port int, clientConfig NatsConfig) (*NatsQueue, error) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> queue1 := NatsQueue{}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var err error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> natsURL := fmt.Sprintf(&amp;#34;nats://%s:%d&amp;#34;, address, port)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;Opening connection to %s\n&amp;#34;, natsURL)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clientID := clientConfig.GetClientID()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterID := &amp;#34;faas-cluster&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nc, err := stan.Connect(clusterID, clientID, stan.NatsURL(natsURL))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> queue1.nc = nc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return &amp;amp;queue1, err
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ª CreateNatsQueue æ–¹æ³•æ˜¯ Gateway é¡¹ç›®ä¸­è¿›è¡Œè°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Gateway é¡¹ç›®çš„ main.go ä¸­æ‰¾åˆ°ï¼Œå¦‚æœ Gateway çš„é…ç½®å¼€å¯äº†å¼‚æ­¥å‡½æ•°æ”¯æŒï¼Œå°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ª NatsQueue å¯¹è±¡ï¼Œç„¶åæŠŠå‡½æ•°æ”¾åˆ°é˜Ÿåˆ—ä¸­ï¼Œè¿™é‡Œå°±ä¸æ·±å…¥è®²è§£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">if config.UseNATS() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(&amp;#34;Async enabled: Using NATS Streaming.&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> natsQueue, queueErr := natsHandler.CreateNatsQueue(*config.NATSAddress, *config.NATSPort, natsHandler.DefaultNatsConfig{})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if queueErr != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(queueErr)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.QueuedProxy = handlers.MakeQueuedProxy(metricsOptions, true, natsQueue)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.AsyncReport = handlers.MakeAsyncReport(metricsOptions)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ°è¿™é‡Œï¼Œæˆ‘ç›¸ä¿¡è¯»è€…ä¹Ÿäº†è§£åˆ°ï¼ŒGateway å…¶å®å°±æ˜¯ä¸€ä¸ªå‘å¸ƒè€…ï¼Œå°†å¼‚æ­¥è¯·æ±‚æ‰”åˆ°é˜Ÿåˆ—é‡Œã€‚æ¥ä¸‹æ¥è‚¯å®šè¦æœ‰ä¸€ä¸ªè®¢é˜…è€…å°†è¯·æ±‚æ¶ˆè´¹å¤„ç†ã€‚&lt;/p>
&lt;h2 id="è®¢é˜…è€…å¤„ç†">&lt;strong>è®¢é˜…è€…å¤„ç†&lt;/strong>&lt;/h2>
&lt;p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œnats streaming çš„è®¢é˜…è€…è®¢é˜…åˆ°æ¶ˆæ¯ä¹‹åï¼Œä¼šæŠŠæ¶ˆæ¯æ‰”ç»™ä¸€ä¸ªå›è°ƒå‡½æ•°å»å¤„ç†ã€‚queue-worker çš„è®¢é˜…è€…å®ç°ä¹Ÿæ˜¯è¿™æ ·ï¼Œå®ƒçš„å®ç°å¹¶ä¸å¤æ‚ï¼Œæ‰€æœ‰é€»è¾‘éƒ½åœ¨ main.go çš„ä¸­ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å…ˆçœ‹å›è°ƒå‡½æ•° mcb éƒ½åšäº†ä»€ä¹ˆï¼š&lt;/p>
&lt;ol>
&lt;li>é¦–å…ˆå½“ç„¶æ˜¯å°†æ¶ˆæ¯ä½“ååºåˆ—åŒ–æˆä¸Šé¢è¯´åˆ°çš„ç”¨äºå¼‚æ­¥å¤„ç†çš„ Request å¯¹è±¡ã€‚&lt;/li>
&lt;li>æ„é€  http è¯·æ±‚çš„ url å’Œ querystringï¼Œurl çš„æ ¼å¼å¦‚ä¸‹ï¼š
functionURL := fmt.Sprintf(&amp;ldquo;http://%s%s:8080/%s&amp;rdquo;, req.Function, config.FunctionSuffix, queryString)&lt;/li>
&lt;li>è®¾ç½® http çš„ headerï¼Œå¹¶ä»¥ post çš„å½¢å¼å‘ functionURL å‘èµ·è¯·æ±‚ã€‚&lt;/li>
&lt;li>å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œè®¾ç½®è¿”å›çŠ¶æ€ç ä¸º&lt;code>http.StatusServiceUnavailable&lt;/code>ï¼Œå¹¶åˆ†åˆ«å¤„ç† CallbackURL æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚&lt;/li>
&lt;li>å¦‚æœè¯·æ±‚æˆåŠŸï¼ŒåŒæ ·ä¹Ÿæ˜¯è¦åˆ†åˆ«å¤„ç† CallbackURL æ˜¯å¦å­˜åœ¨çš„æƒ…å†µã€‚&lt;/li>
&lt;/ol>
&lt;p>å½“ç„¶åœ¨è¿™ä¸ª callback ä¸­ä¼šæ ¹æ®ä¸€äº›ç¯å¢ƒå˜é‡çš„å­˜åœ¨ï¼Œé€‰æ‹©æ˜¯å¦æ‰“å°æ—¥å¿—å‡ºæ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">mcb := func(msg *stan.Msg) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> i++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> printMsg(msg, i)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> started := time.Now()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> req := queue.Request{}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> unmarshalErr := json.Unmarshal(msg.Data, &amp;amp;req)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if unmarshalErr != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;Unmarshal error: %s with data %s&amp;#34;, unmarshalErr, msg.Data)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt.Printf(&amp;#34;Request for %s.\n&amp;#34;, req.Function)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if config.DebugPrintBody {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt.Println(string(req.Body))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> queryString := &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if len(req.QueryString) &amp;gt; 0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> queryString = fmt.Sprintf(&amp;#34;?%s&amp;#34;, strings.TrimLeft(req.QueryString, &amp;#34;?&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> functionURL := fmt.Sprintf(&amp;#34;http://%s%s:8080/%s&amp;#34;, req.Function, config.FunctionSuffix, queryString)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> request, err := http.NewRequest(http.MethodPost, functionURL, bytes.NewReader(req.Body))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> defer request.Body.Close()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> copyHeaders(request.Header, &amp;amp;req.Header)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res, err := client.Do(request)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var status int
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var functionResult []byte
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status = http.StatusServiceUnavailable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeTaken := time.Since(started).Seconds()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if req.CallbackURL != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;Callback to: %s\n&amp;#34;, req.CallbackURL.String())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resultStatusCode, resultErr := postResult(&amp;amp;client, res, functionResult, req.CallbackURL.String())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if resultErr != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(resultErr)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;Posted result: %d&amp;#34;, resultStatusCode)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> statusCode, reportErr := postReport(&amp;amp;client, req.Function, status, timeTaken, config.GatewayAddress)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if reportErr != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(reportErr)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;Posting report - %d\n&amp;#34;, statusCode)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if res.Body != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> defer res.Body.Close()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resData, err := ioutil.ReadAll(res.Body)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> functionResult = resData
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if config.WriteDebug {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt.Println(string(functionResult))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt.Printf(&amp;#34;Wrote %d Bytes\n&amp;#34;, len(string(functionResult)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeTaken := time.Since(started).Seconds()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt.Println(res.Status)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if req.CallbackURL != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;Callback to: %s\n&amp;#34;, req.CallbackURL.String())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resultStatusCode, resultErr := postResult(&amp;amp;client, res, functionResult, req.CallbackURL.String())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if resultErr != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(resultErr)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;Posted result: %d&amp;#34;, resultStatusCode)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> statusCode, reportErr := postReport(&amp;amp;client, req.Function, res.StatusCode, timeTaken, config.GatewayAddress)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if reportErr != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(reportErr)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;Posting report - %d\n&amp;#34;, statusCode)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>postResult&lt;/code>å‡½æ•°æ˜¯ç”¨æ¥å¤„ç† callbackURL å­˜åœ¨çš„æƒ…å†µï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­å°†ç»“æœï¼Œä»¥ post è¯·æ±‚è°ƒç”¨ callbackURL å‘é€å‡ºå»ã€‚&lt;/p>
&lt;p>&lt;code>postReport&lt;/code>å‡½æ•°ç”¨æ¥å¤„ç† callbackURL ä¸å­˜åœ¨çš„æƒ…å†µï¼Œè¿™é‡Œæ˜¯å°†ç»“æœå‘åˆ° Gateway ç½‘å…³çš„&lt;code>&amp;quot;http://&amp;quot; + gatewayAddress + &amp;quot;:8088/system/async-report&amp;quot;&lt;/code>ä¸­ï¼Œæˆ‘ä»¬ä¹‹åå°±å¯ä»¥ä»è¿™ä¸ª url é‡ŒæŸ¥è¯¢å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œç»“æœäº†ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">&lt;strong>æ€»ç»“&lt;/strong>&lt;/h2>
&lt;p>æœ¬æ–‡ä¸»è¦åˆ†æäº† NATS Streaming ç‰ˆæœ¬çš„ queue worker çš„å®ç°ï¼Œé€šè¿‡åˆ†ææºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ° OpenFaaS åœ¨æ¶æ„çš„è®¾è®¡å¾ˆæœ‰è€ƒç©¶ï¼Œå……åˆ†çš„è€ƒè™‘åˆ°äº†å¯æ‰©å±•æ€§ï¼Œé€šè¿‡å®šä¹‰æ¥å£è§„èŒƒï¼Œä½¿å¾—å¼€å‘è€…å¾ˆå®¹æ˜“å®ç°è‡ªå®šä¹‰ã€‚&lt;/p></description></item><item><title>åŒºå—é“¾å­¦ä¹ ç¬”è®°</title><link>https://example.com/p/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link><pubDate>Thu, 23 Aug 2018 15:14:02 +0000</pubDate><guid>https://example.com/p/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid><description>&lt;blockquote>
&lt;p>æœ¬æ–‡æ˜¯é˜…è¯»&lt;a class="link" href="http://www.netkiller.cn/blockchain/ch01s10.html" target="_blank" rel="noopener"
>http://www.netkiller.cn/blockchain/ch01s10.html&lt;/a> ä¸Šçš„ä¸€äº›ç¬”è®°ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="ç†è§£åŒºå—é“¾çš„åˆ†å¸ƒå¼è®°è´¦">ç†è§£åŒºå—é“¾çš„åˆ†å¸ƒå¼è®°è´¦&lt;/h2>
&lt;p>&lt;a class="link" href="http://www.netkiller.cn/blockchain/ch01s10.html" target="_blank" rel="noopener"
>http://www.netkiller.cn/blockchain/ch01s10.html&lt;/a>&lt;/p>
&lt;p>åŒºå—é“¾ä¸­æåˆ°çš„è´¦æœ¬ï¼Œè®°è´¦ç­‰è¯æ±‡æ˜¯å’Œä¼šè®¡æ— å…³çš„è¯æ±‡ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä¼ ç»Ÿç†è§£çš„è´¦æœ¬æ˜¯ä¸€ä¸ªäºŒç»´çš„è¡¨æ ¼ï¼Œè®°å½•äº†æŸå¹´æŸæœˆæŸæ—¥çš„è´¹ç”¨ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ—¶é—´&lt;/th>
&lt;th>ç”¨é€”&lt;/th>
&lt;th>é‡‘é¢&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>2018-08-23&lt;/td>
&lt;td>å€Ÿ&lt;/td>
&lt;td>100&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2018-08-22&lt;/td>
&lt;td>è¿˜&lt;/td>
&lt;td>200&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2018-08-21&lt;/td>
&lt;td>å€Ÿ&lt;/td>
&lt;td>50&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2018-08-20&lt;/td>
&lt;td>è¿˜&lt;/td>
&lt;td>1000&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>å¦‚æœè´¦ç›®æ¯”è¾ƒå¤šï¼Œå¯ä»¥æ‹†è´¦ï¼Œå°†ä¸åŒåˆ†ç±»çš„è´¦ç›®æ”¾åœ¨ç‰¹å®šçš„è´¦æœ¬ä¸­ï¼Œè€Œä¸”äºŒç»´è¡¨æ ¼è¿˜å¯ä»¥è®¾ç½®ç´¢å¼•ç­‰ï¼Œå¿«é€Ÿæ‰¾åˆ°ä¸€ç¬”äº¤æ˜“ã€‚&lt;/p>
&lt;p>ä½†æ˜¯åŒºå—é“¾çš„è®°è´¦å½¢å¼æ˜¯ï¼š&lt;/p>
&lt;p>&lt;img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fujnyii772j30ku08twex.jpg"
loading="lazy"
>&lt;/p>
&lt;p>å¯ä»¥å‘ç°ï¼ŒåŒºå—é“¾çš„è¿™ç§è®°è´¦æ–¹å¼æ˜¯åšäº†è¡Œåˆ—çŸ©é˜µè½¬æ¢ï¼ŒèŠ‚ç‚¹ä¹‹é—´æ”¶å°¾ç›¸äº’è¿æ¥ï¼Œæˆä¸ºé“¾å¼ç»“æ„ï¼Œæ‰€æœ‰çš„è´¦ç›®éƒ½åœ¨ä¸€æ¡é“¾ä¸Šã€‚&lt;/p>
&lt;p>&lt;strong>æ‰€è°“åˆ†å¸ƒå¼è®°è´¦ï¼Œå…¶å®å°±æ˜¯ä¸Šè¿°é“¾çŠ¶çš„æ•°æ®ç»“æ„ä¿å­˜åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šï¼Œå½¢æˆåˆ†å¸ƒå¼é›†ç¾¤ã€‚&lt;/strong>&lt;/p>
&lt;p>ä¹‹æ‰€ä»¥é‡‡ç”¨åŒºå—é“¾æ¥åšåˆ†å¸ƒå¼è®°è´¦ï¼Œä¸»è¦æ˜¯åŒºå—é“¾æœ‰å¦‚ä¸‹å¥½å¤„ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å»ä¸­å¿ƒåŒ–&lt;/p>
&lt;p>ä¼ ç»Ÿçš„æ•°æ®åº“å­˜å‚¨æ˜¯ä¸­å¿ƒåŒ–çš„ï¼Œé€šè¿‡æš´éœ² ip åœ°å€å’Œç«¯å£å·æä¾›æœåŠ¡ï¼Œåæ¥åˆ†å¸ƒå¼è¿›ç¾¤åŒ–ä¹‹åï¼Œå‡ºç°äº†ä¸»ä¸»ä»æ¶æ„ç­‰ã€‚&lt;/p>
&lt;p>ä¸æ•°æ®åº“ç›¸æ¯”ï¼ŒåŒºå—é“¾æ˜¯å¤šä¸»æ¶æ„ï¼Œè€Œä¸”å®ç°æ›´ä¸ºå¤æ‚ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¹‹é—´ä¸æ˜¯ç®€å•çš„äºŒè¿›åˆ¶æ—¥å¿—åŒæ­¥ï¼Œè€Œæ˜¯è¦é€šè¿‡åŠ å¯†æŠ€æœ¯ï¼ŒèŠ‚ç‚¹è¾¾æˆå…±è¯†ä¹‹åæ‰å­˜å‚¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯è¿½æº¯&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰å…¨&lt;/p>
&lt;p>å®‰å…¨åˆ†ä¸ºå¾ˆå¤šå±‚ï¼ŒåŒºå—é“¾åªèƒ½åšåˆ°å­˜å‚¨å±‚çš„å®‰å…¨ã€‚&lt;/p>
&lt;p>åŒºå—é“¾æ— æ³•è§£å†³ç”¨æˆ·å±‚ï¼Œåº”ç”¨å±‚ï¼Œé€»è¾‘å±‚ç­‰å®‰å…¨é—®é¢˜ï¼Œä»–åªèƒ½ä¿è¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„åŒºå—ä¸è¢«ä¿®æ”¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸å¯ç¯¡æ”¹&lt;/p>
&lt;p>å¾ˆå¤šäººè®¤ä¸ºåŒºå—é“¾æ•°æ®ä¸€æ—¦åˆ›å»ºä¹‹åå°±ä¸èƒ½ä¿®æ”¹ï¼Œæ‰€ä»¥é‡‡ç”¨åŒºå—é“¾æŠ€æœ¯å¾ˆå®‰å…¨ã€‚å…¶å®ä¸ç„¶ï¼Œæ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œä½†æ˜¯ä¸èƒ½ç¯¡æ”¹ã€‚&lt;/p>
&lt;p>æ’°æ”¹æ˜¯æŒ‡éæ³•ä¿®æ”¹åŒºå—é“¾æ•°æ®ï¼Œè€Œä¿®æ”¹åˆ™æ˜¯åˆæ³•å˜æ›´æ•°æ®ã€‚&lt;/p>
&lt;p>é€šå¸¸æ’°æ”¹åŒºå—é“¾æ•°æ®å¤šæŒ‡æ•°æ®å­˜å‚¨å±‚é¢çš„ä¿®æ”¹ã€‚è€Œä¿®æ”¹åˆ™æ˜¯é€šè¿‡åˆçº¦æä¾›çš„ä¿®æ”¹å‡½æ•°å˜æ›´åŒºå—é“¾é‡Œé¢çš„æ•°æ®ã€‚&lt;/p>
&lt;p>å¤šæ•°åŒºå—é“¾å¹³å°æ²¡æœ‰ç”¨æˆ·è®¤è¯æƒé™ç®¡ç†æ¨¡å—ã€‚æ‰€ä»¥æ— æ³•æ§åˆ¶åŒºå—ä¸­çš„å“ªäº›æ•°æ®èƒ½è¢«ä¿®æ”¹ï¼Œå“ªäº›ä¸èƒ½ä¿®æ”¹ï¼Œå“ªäº›ç”¨æˆ·å¯ä»¥ä¿®æ”¹ç­‰ç­‰ã€‚å³ä½¿æœ‰äº›åŒºå—é“¾å¹³å°å…·å¤‡æƒé™æ§åˆ¶ï¼Œé¢—ç²’åº¦ä¹Ÿæ— æ³•è¾¾åˆ°ç›®å‰çš„æ•°æ®åº“æ§åˆ¶çš„é‚£ä¹ˆç»†ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>é‡‡ç”¨åŒºå—é“¾ä½œä¸ºè´¦æœ¬çš„æ—¶å€™ï¼Œä¼šé¢ä¸´å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä¸èƒ½å»ºç«‹ç´¢å¼•ï¼Œæ— æ³•å¿«é€Ÿæœç´¢å‡ºåŒºå—ä¸­çš„æ•°æ®ï¼Œå¿…é¡»ä¾èµ–åŒºå—é“¾ä»¥å¤–çš„æŠ€æœ¯ï¼Œå¦‚æœç´¢å¼•æ“ï¼Œæ•°æ®åº“ç­‰ã€‚ä¾‹å¦‚ï¼›etherscan.io å°±æ˜¯æŠŠä»¥å¤ªåŠä¸Šçš„åŒºå—é‡æ–°å…¥åº“ï¼Œå€ŸåŠ©æ•°æ®åº“å®ç°æ•°æ®æ£€ç´¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åŒºå—é“¾åªèƒ½é¡ºåºæ£€ç´¢ï¼Œè¿ç®—æˆæœ¬é«˜ã€‚ä¾‹å¦‚åœ¨ä¸­å¿ƒåŒ–è´¦æœ¬ä¸­æ±‡æ€»æ±‚å’Œæ“ä½œï¼ŒåŒºå—é“¾å¿…é¡»ä»å¤´å‘åéå†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰€æœ‰è´¦ç›®å‡åœ¨ä¸€æ¡é“¾ä¸Šï¼Œä¸åŒçš„åˆ†ç±»æ··åœ¨ä¸€èµ·ï¼Œå½¼æ­¤ç›¸è¿ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ— æ³•å½’æ¡£ã€‚&lt;/p>
&lt;p>ä¼ ç»Ÿçš„æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥å½’æ¡£ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ï¼Œè€Œè¿™äº›å½’æ¡£çš„æ•°æ®åŸºæœ¬éƒ½æ˜¯å†·æ•°æ®ï¼Œä¸ä¼šå†è¢«æŸ¥è¯¢ï¼Œå½’æ¡£æ•°æ®çš„å¤‡ä»½åˆ°å­˜å‚¨ä»‹è´¨ä¸Šçš„è§£å†³æ–¹æ¡ˆä¹Ÿæœ‰å¾ˆå¤šã€‚&lt;/p>
&lt;p>ä½†æ˜¯åŒºå—é“¾çš„æ•°æ®éƒ½æ˜¯çƒ­æ•°æ®ï¼Œä»»ä½•æ–°å¢çš„èŠ‚ç‚¹éƒ½å¿…é¡»ä» 0 å¼€å§‹åŒæ­¥ï¼Œå¹¶ä¸”ä¿è¯åŒæ­¥åˆ°æœ€æ–°åŒºå—ï¼Œå¦åˆ™å¯èƒ½æ— æ³•å®Œæˆäº¤æ˜“ï¼Œæ•°æ®ä¼šä¸€ç›´è†¨èƒ€ä¸‹å»ã€‚&lt;/p>
&lt;p>è™½ç„¶æœ‰ç®—æ³•èƒ½å¤Ÿå‡å°‘åŒæ­¥çš„é‡ï¼Œä½†æ˜¯ç°é˜¶æ®µçš„ä½“éªŒä»ç„¶ä¸å¥½ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ²¡æœ‰äº‹åŠ¡å¤„ç†ã€‚&lt;/p>
&lt;p>å› ä¸ºåŒºå—é“¾æ˜¯é¦–å°¾ç›¸è¿çš„é“¾å¼ç»“æ„ï¼Œæ‰€ä»¥åªèƒ½åœ¨å°¾éƒ¨åŠ åŒºå—ï¼Œæ— æ³•ä¿®æ”¹ä¸­é—´çš„åŒºå—ã€‚å‡è®¾æœ‰ä¸ªåŒºå—å›æ»šï¼Œè¯¥åŒºå—çš„ hash äº§ç”Ÿå˜åŒ–ï¼Œåé¢çš„åŒºå—éƒ½è¦ä½œåºŸã€‚&lt;/p>
&lt;p>æ‰€ä»¥å½“å¹¶å‘æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°æ··ä¹±ã€‚å› æ­¤æˆ‘ä»¬è¦åœ¨åº”ç”¨å±‚åšä¸€äº›å¤„ç†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ€§èƒ½é—®é¢˜&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç”±äºæ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œæ— æ³•é¢„æµ‹ä½•æ—¶å®Œæˆã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>äº¤æ˜“å®¹æ˜“é˜»å¡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>gas è´¹ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="åŒºå—é“¾è½åœ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ">åŒºå—é“¾è½åœ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ&lt;/h2>
&lt;p>å¦‚æœè¦åœ¨ä¼ä¸šä¸­è½åœ°åŒºå—é“¾ï¼Œå°å°æœ‰å¦‚ä¸‹è§£å†³æ–¹æ¡ˆï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è§£å†³æ€§èƒ½é—®é¢˜&lt;/p>
&lt;p>ç›®å‰åŒºå—é“¾åªé€‚åˆåš&lt;strong>ä½é¢‘é«˜ä»·å€¼ä¸šåŠ¡&lt;/strong>ã€‚&lt;/p>
&lt;p>è¯»å–æ€§èƒ½é€šå¸¸æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å†™å…¥å®é™…ä¸Šæ— è®ºä½ ç”¨å¤šå°‘ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹éƒ½ä¸èƒ½æå‡ï¼Œå› ä¸ºå†™å…¥åŒºå—éœ€è¦åšå…±è¯†ç®—æ³•ï¼Œè¿™æ­¥æ“ä½œï¼Œä¼šåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šè¿›è¡Œï¼ŒåŒæ—¶è¿˜éœ€è¦åŠ å¯†è¿ç®—ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯ CPU å¯†é›†å‹æ“ä½œã€‚&lt;/p>
&lt;p>æ–¹æ¡ˆï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æŠ€æœ¯å¼‚æ­¥å†™å…¥ï¼Œå°†éœ€è¦å†™å…¥çš„åŒºå—æ”¾å…¥é˜Ÿåˆ—ï¼Œå¼‚æ­¥å®Œæˆä¸Šé“¾æ“ä½œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¹¶è¡Œå†™å…¥ï¼Œæˆ‘ä»¬å¯ä»¥å»ºè®¾å¤šä¸ªåŒºå—é“¾å¹³å°ã€‚å¤šä¸ªå¹³å°åŒæ—¶æœåŠ¡äºä¸šåŠ¡ã€‚&lt;/p>
&lt;p>ä¸ºäº†è¾¾åˆ°å»ä¸­å¿ƒåŒ–å¹¶è¡Œå†™å…¥ï¼Œæˆ‘ä»¬å°†åœ¨å®¢æˆ·ç«¯é€šè¿‡ç®—æ³•ï¼ŒåŒ¹é…æœåŠ¡å™¨ã€‚å› ä¸ºå¦‚æœåœ¨å¹³å°å‰é¢å¢åŠ è´Ÿè½½å‡è¡¡ï¼ŒåŠ å› ä¸ºè¿™æ ·åˆå›åˆ°äº†ä¸­å¿ƒåŒ–ç³»ç»Ÿã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æº¯æºé¢—ç²’åº¦&lt;/p>
&lt;p>å¯¹äºæ‰€è¦è¢«æº¯æºçš„ç‰©å“æˆ–è€…äº¤æ˜“æ¥è®²ï¼Œæœ‰å››ç§æƒ…å†µï¼Œä½é¢‘ä½ä»·å€¼ï¼Œä½é¢‘é«˜ä»·å€¼ï¼Œé«˜é¢‘é«˜ä»·å€¼ï¼Œé«˜é¢‘ä½ä»·å€¼ ã€‚&lt;/p>
&lt;p>å¯¹äºä½é¢‘é«˜ä»·å€¼å’Œé«˜é¢‘é«˜ä»·å€¼çš„ä¸šåŠ¡ï¼Œå°½é‡åšåˆ°æœ€å°é¢—ç²’åº¦ã€‚&lt;/p>
&lt;p>å¯¹äºä½é¢‘ä½ä»·å€¼å’Œé«˜é¢‘ä½ä»·å€¼çš„ä¸šåŠ¡ï¼Œå¯ä»¥é¢—ç²’åº¦æ›´ç²—ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å’Œä¼ ç»Ÿæ•°æ®åº“äº’è¡¥&lt;/p>
&lt;p>åŒºå—é“¾æŠ€æœ¯æœ¬èº«æ˜¯ä¸€ç§è¿½æ±‚åˆ†å¸ƒä¸€è‡´æ€§çš„æ•°æ®åº“ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬éƒ½çŸ¥é“ CAP ç†è®ºã€‚CAP ç†è®ºæ˜¯æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œ Consistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€ Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼Œä¸‰è€…ä¸å¯å¾—å…¼ã€‚å¤§å¤šæ•°åŒºå—é“¾ï¼Œæ”¾å¼ƒäº†ä¸€äº›å¯ç”¨æ€§ï¼Œåå‘äº†ä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™ã€‚&lt;/p>
&lt;p>åŒºå—é“¾å¹¶éèƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œè™½ç„¶ä»–ä¹Ÿç®—æ˜¯ä¸€ç§æ•°æ®åº“ï¼Œå®ƒèƒ½è§£å†³é—®é¢˜ååˆ†æœ‰é™ï¼Œå®ƒçš„æ•°æ®ç®¡ç†å’ŒæŸ¥è¯¢èƒ½åŠ›è¿˜æ‰“ä¸åˆ° NoSQL çš„æ°´å¹³ï¼Œæ›´åˆ«æ SQL çš„å¤æ‚åº”ç”¨ã€‚æ‰€ä»¥åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼ŒåŒºå—é“¾ä¸èƒ½æ›¿ä»£ä¼ ç»Ÿæ•°æ®åº“ï¼Œåªèƒ½äº’è¡¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é“¾ä¸Šé“¾ä¸‹æ•°æ®ä¸€è‡´æ€§é—®é¢˜&lt;/p>
&lt;p>æ—¢ç„¶åŒºå—é“¾æ›¿ä»£ä¸äº†ä¼ ç»Ÿæ•°æ®åº“ï¼Œé‚£ä¹ˆå¿…ç„¶è¦åœ¨é¡¹ç›®ä¸­åŒæ—¶ä½¿ç”¨ä¸¤ç§æŠ€æœ¯ã€‚è¿™æ ·é—®é¢˜æ¥äº†ï¼Œä¼šæœ‰ä¸¤ä»½æ•°æ®ï¼Œä¸€ä»½å­˜å‚¨åœ¨é“¾ä¸‹ï¼Œå³ä¼ ç»Ÿæ•°æ®åº“ï¼Œå¦å¤–ä¸€éƒ¨åˆ†æ•°æ®ä¸Šé“¾ï¼Œè¿™æ ·å°±æœ‰ä¸¤ä»½é‡å¤çš„æ•°æ®ï¼Œé‚£ä¹ˆæ€æ ·ä¿è¯ä»–ä»¬çš„ä¸€è‡´æ€§å‘¢ï¼Ÿ&lt;/p>
&lt;p>åŒºå—é“¾å’Œæ¯”ç‰¹å¸ç½‘ç»œä¸åŒï¼Œæ¯”ç‰¹å¸æ˜¯åœ¨é“¾ä¸Šäº§ç”Ÿçš„ï¼Œå®ƒä¸åŒºå—é“¾å¯†å¸ƒå¯åˆ†ï¼Œæ˜¯ä¸€ä½“çš„ï¼Œæ‰€ä»¥å®ƒçš„æ•°æ®å®‰å…¨æ€§æ˜¯è‡ªé—­ç¯çš„ã€‚è€Œæˆ‘ä»¬çš„é“¾ä¸‹æ•°æ®å¹¶ä¸æ˜¯åœ¨åŒºå—é“¾ä¸­äº§ç”Ÿçš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä¸Šé“¾çš„æ—¶å€™ï¼Œå°½é‡é‡‡ç”¨å¦‚ä¸‹çš„æ–¹æ¡ˆï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸¤ç«¯éƒ½åšä¸€æ¬¡å“ˆå¸Œï¼Œå¯å¿«é€Ÿå¯¹æ¯”æ•°æ®æ˜¯å¦ä¸€è‡´&lt;/li>
&lt;li>ä»¥é“¾ä¸Šæ•°æ®ä¸ºå‡†ï¼Œå› ä¸ºæ•°æ®åº“çš„æ•°æ®æ›´å®¹æ˜“è¢«ç¯¡æ”¹&lt;/li>
&lt;li>å‰ç«¯ä¸šåŠ¡èµ°é“¾ï¼Œåç«¯ä¸šåŠ¡èµ°æ•°æ®åº“ï¼Œå› ä¸ºå‰å°ä¸šåŠ¡æ˜¯ä¸ºç”¨æˆ·æä¾›æœåŠ¡ï¼Œæ‰€ä»¥è¦èµ°é“¾ä¸Šæ•°æ®ï¼Œè€Œåå°æ˜¯å¯ä»¥ç®¡ç†çš„ï¼Œèµ°æ•°æ®åº“å³å¯ã€‚&lt;/li>
&lt;li>å…±äº«æ•°æ®ä¸Šé“¾ï¼Œç§æœ‰æ•°æ®ä¸ä¸Šé“¾ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="åŒºå—é“¾çš„ç›¸å…³æŠ€æœ¯">åŒºå—é“¾çš„ç›¸å…³æŠ€æœ¯&lt;/h2>
&lt;p>åŒºå—é“¾çš„æŠ€æœ¯æ¨¡å‹è‡ªä¸‹è€Œä¸Šåˆ†ä¸ºï¼›æ•°æ®å±‚ï¼Œç½‘è·¯å±‚ï¼Œå…±è¯†å±‚ï¼Œæ¿€åŠ±å±‚ï¼Œåˆçº¦å±‚ä»¥åŠåº”ç”¨å±‚ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ•°æ®å±‚ï¼Œå°è£…äº†åº•å±‚æ•°æ®åŒºå—çš„é“¾å¼ç»“æ„ï¼Œä»¥åŠç›¸å…³çš„éå¯¹ç§°å…¬ç§é’¥æ•°æ®åŠ å¯†æŠ€æœ¯å’Œæ—¶é—´æˆ³ç­‰æŠ€æœ¯ï¼Œè¿™æ˜¯æ•´ä¸ªåŒºå—é“¾æŠ€æœ¯ä¸­æœ€åº•å±‚çš„æ•°æ®ç»“æ„ã€‚&lt;/p>
&lt;p>è¿™äº›æŠ€æœ¯æ˜¯æ„å»ºå…¨çƒé‡‘èç³»ç»Ÿçš„åŸºç¡€ï¼Œæ•°åå¹´çš„ä½¿ç”¨è¯æ˜äº†å®ƒéå¸¸å®‰å…¨çš„å¯é æ€§ã€‚è€ŒåŒºå—é“¾ï¼Œæ­£å¼å·§å¦™åœ°æŠŠè¿™äº›æŠ€æœ¯ç»“åˆåœ¨äº†ä¸€èµ·ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç½‘ç»œå±‚ï¼ŒåŒ…æ‹¬ P2P ç»„ç½‘æœºåˆ¶ã€æ•°æ®ä¼ æ’­æœºåˆ¶å’Œæ•°æ®éªŒè¯æœºåˆ¶ç­‰ã€‚&lt;/p>
&lt;p>P2P ç»„ç½‘æŠ€æœ¯æ—©æœŸåº”ç”¨åœ¨ BT è¿™ç±» P2P ä¸‹è½½è½¯ä»¶ä¸­ï¼Œè¿™å°±æ„å‘³ç€åŒºå—é“¾å…·æœ‰è‡ªåŠ¨ç»„ç½‘åŠŸèƒ½ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å…±è¯†å±‚ï¼Œå°è£…äº†ç½‘ç»œèŠ‚ç‚¹çš„å„ç±»å…±è¯†æœºåˆ¶ç®—æ³•ã€‚å…±è¯†æœºåˆ¶ç®—æ³•æ˜¯åŒºå—é“¾çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå› ä¸ºè¿™å†³å®šäº†åˆ°åº•æ˜¯è°æ¥è¿›è¡Œè®°è´¦ï¼Œè€Œè®°è´¦å†³å®šæ–¹å¼å°†ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿçš„å®‰å…¨æ€§å’Œå¯é æ€§ã€‚&lt;/p>
&lt;p>æ•°æ®å±‚ã€ç½‘ç»œå±‚ã€å…±è¯†å±‚æ˜¯æ„å»ºåŒºå—é“¾æŠ€æœ¯çš„å¿…è¦å…ƒç´ ï¼Œç¼ºå°‘ä»»ä½•ä¸€å±‚éƒ½å°†ä¸èƒ½ç§°ä¹‹ä¸ºçœŸæ­£æ„ä¹‰ä¸Šçš„åŒºå—é“¾æŠ€æœ¯ã€‚&lt;/p>
&lt;p>ç›®å‰å·²ç»å‡ºç°äº†åä½™ç§å…±è¯†æœºåˆ¶ç®—æ³•ï¼Œå…¶ä¸­æ¯”è¾ƒæœ€ä¸ºçŸ¥åçš„æœ‰å·¥ä½œé‡è¯æ˜æœºåˆ¶ï¼ˆPoWï¼ŒProof of Workï¼‰ã€æƒç›Šè¯æ˜æœºåˆ¶ï¼ˆPoSï¼ŒProof ofStakeï¼‰ã€è‚¡ä»½æˆæƒè¯æ˜æœºåˆ¶ï¼ˆDPoSï¼ŒDelegated ProofofStakeï¼‰ç­‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¿€åŠ±å±‚ï¼Œå°†ç»æµå› ç´ é›†æˆåˆ°åŒºå—é“¾æŠ€æœ¯ä½“ç³»ä¸­æ¥ï¼ŒåŒ…æ‹¬ç»æµæ¿€åŠ±çš„å‘è¡Œæœºåˆ¶å’Œåˆ†é…æœºåˆ¶ç­‰ï¼Œä¸»è¦å‡ºç°åœ¨å…¬æœ‰é“¾å½“ä¸­ã€‚&lt;/p>
&lt;p>åœ¨å…¬æœ‰é“¾ä¸­å¿…é¡»æ¿€åŠ±éµå®ˆè§„åˆ™å‚ä¸è®°è´¦çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”æƒ©ç½šä¸éµå®ˆè§„åˆ™çš„èŠ‚ç‚¹ï¼Œæ‰èƒ½è®©æ•´ä¸ªç³»ç»Ÿæœç€è‰¯æ€§å¾ªç¯çš„æ–¹å‘å‘å±•ã€‚è€Œåœ¨ç§æœ‰é“¾å½“ä¸­ï¼Œåˆ™ä¸ä¸€å®šéœ€è¦è¿›è¡Œæ¿€åŠ±ï¼Œå› ä¸ºå‚ä¸è®°è´¦çš„èŠ‚ç‚¹å¾€å¾€æ˜¯åœ¨é“¾å¤–å®Œæˆäº†åšå¼ˆï¼Œé€šè¿‡å¼ºåˆ¶åŠ›æˆ–è‡ªæ„¿æ¥è¦æ±‚å‚ä¸è®°è´¦ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆçº¦å±‚ï¼Œå°è£…å„ç±»è„šæœ¬ã€ç®—æ³•å’Œæ™ºèƒ½åˆçº¦ï¼Œæ˜¯åŒºå—é“¾å¯ç¼–ç¨‹ç‰¹æ€§çš„åŸºç¡€ã€‚&lt;/p>
&lt;p>æ¯”ç‰¹å¸æœ¬èº«å°±å…·æœ‰ç®€å•è„šæœ¬çš„ç¼–å†™åŠŸèƒ½ï¼Œè€Œä»¥å¤ªåŠæå¤§çš„å¼ºåŒ–äº†ç¼–ç¨‹è¯­è¨€åè®®ï¼Œç†è®ºä¸Šå¯ä»¥ç¼–å†™å®ç°ä»»ä½•åŠŸèƒ½çš„åº”ç”¨ã€‚å¦‚æœæŠŠæ¯”ç‰¹å¸çœ‹æˆæ˜¯å…¨çƒè´¦æœ¬çš„è¯ï¼Œä»¥å¤ªåŠå¯ä»¥çœ‹ä½œæ˜¯ä¸€å°â€œå…¨çƒè®¡ç®—æœºâ€ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ å’Œæ‰§è¡Œä»»æ„çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ç¨‹åºçš„æœ‰æ•ˆæ‰§è¡Œèƒ½å¾—åˆ°ä¿è¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åº”ç”¨å±‚ï¼Œå°è£…äº†åŒºå—é“¾çš„å„ç§åº”ç”¨åœºæ™¯å’Œæ¡ˆä¾‹ï¼Œæ¯”å¦‚æ­å»ºåœ¨ä»¥å¤ªåŠä¸Šçš„å„ç±»åŒºå—é“¾åº”ç”¨å³éƒ¨ç½²åœ¨åº”ç”¨å±‚ï¼Œè€Œæœªæ¥çš„å¯ç¼–ç¨‹é‡‘èå’Œå¯ç¼–ç¨‹ç¤¾ä¼šä¹Ÿå°†ä¼šæ˜¯æ­å»ºåœ¨åº”ç”¨å±‚ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å…±è¯†ç®—æ³•&lt;/p>
&lt;ul>
&lt;li>pow&lt;/li>
&lt;li>pos&lt;/li>
&lt;li>dpos&lt;/li>
&lt;li>poa&lt;/li>
&lt;li>pbft&lt;/li>
&lt;li>raft&lt;/li>
&lt;/ul>
&lt;p>HD Wallet&lt;/p>
&lt;p>BIP32 å®šä¹‰ Hierarchical Deterministic wallet (ç®€ç§° &amp;ldquo;HD Wallet&amp;rdquo;)ï¼Œæ˜¯ä¸€ä¸ªç³»ç»Ÿå¯ä»¥ä»å•ä¸ª seed äº§ç”Ÿæ ‘çŠ¶ç»“æ„å‚¨å­˜å¤šç»„ keypairsï¼ˆç§é’¥å’Œå…¬é’¥ï¼‰ã€‚&lt;/p>
&lt;p>BIP39 å®šä¹‰é’±åŒ…åŠ©è®°è¯å’Œ seed ç”Ÿæˆè§„åˆ™ï¼Œä¸€èˆ¬ç”± 12 -24 ä¸ªå•å­—ç»„æˆï¼Œç§°ä¸º mnemonicã€‚&lt;/p>
&lt;p>BIP44 åŸºäº BIP32 çš„ç³»ç»Ÿï¼Œèµ‹äºˆæ ‘çŠ¶ç»“æ„ä¸­çš„å„å±‚ç‰¹æ®Šçš„æ„ä¹‰ã€‚è®©åŒä¸€ä¸ª seed å¯ä»¥æ”¯æ´å¤šå¸ç§ã€å¤šå¸æˆ·ç­‰ ã€‚&lt;/p>
&lt;p>ä½¿ç”¨åŠ©è®°è¯ç”Ÿæˆç¡®å®šæ€§é’±åŒ…ã€‚&lt;/p>
&lt;p>HD Wallet é‡‡ç”¨ 2048 ä¸ªå•è¯ï¼Œæˆ–è€…æ±‰å­—ä½œä¸ºåŠ©è®°è¯ï¼Œè¿™äº›è¯åº“å¯¹å¤–å…¬å¼€ï¼Œå¾ˆå¤šé’±åŒ…ä»…ä»…ä½¿ç”¨ path ç¬¬ä¸€ä¸ªåœ°å€å¹¶ä¸”æ²¡æœ‰åŠ å¯†ã€‚å¦‚æœä½ çŸ¥é“æŸä¸ªç”¨æˆ·çš„åŠ©è®°è¯ä¸­çš„ 11 å„è¯çš„æ’åˆ—é¡ºåºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç©·ä¸¾æ–¹æ³•ï¼Œç®—å‡ºæ‰€æœ‰åœ°å€çš„ç§é’¥ï¼Œå¦‚æœç¢°å·§æ‰¾åˆ°äº†å·²ç»åœ¨ä½¿ç”¨çš„åœ°å€ã€‚å°±å¯ä»¥å°†é‡Œé¢çš„ ETH å…¨éƒ¨è½¬èµ°ã€‚&lt;/p>
&lt;h2 id="ä»¥å¤ªåŠå¸¸ç”¨æ“ä½œ">ä»¥å¤ªåŠå¸¸ç”¨æ“ä½œ&lt;/h2>
&lt;p>è®¡ç®— gas è´¹ç”¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var estimateGas = eth.estimateGas({from:eth.accounts[1], to: eth.accounts[2], value: web3.toWei(1)})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var cost = estimateGas * gasPrice
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è§£é”è´¦æˆ·&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">personal.unlockAccount(eth.accounts[3], &amp;#34;12345678&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è½¬è´¦&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var txnHash = eth.sendTransaction({from: eth.accounts[3], to: eth.accounts[5], value: eth.getBalance(eth.accounts[3]) - cost, gas: estimateGas})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹äº¤æ˜“ç»†èŠ‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">web3.eth.getTransaction(txnHash)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è·å–ä½™é¢&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">eth.getBalance(eth.accounts[3])
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>keystore æ–‡ä»¶&lt;/p>
&lt;p>ä»¥å¤ªåŠçš„æ¯ä¸ªå¤–éƒ¨è´¦æˆ·éƒ½æ˜¯ç”±ä¸€å¯¹å¯†é’¥ï¼ˆä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥ï¼‰å®šä¹‰çš„ã€‚è´¦æˆ·ä»¥åœ°å€ä¸ºç´¢å¼•ï¼Œåœ°å€ç”±å…¬é’¥è¡ç”Ÿè€Œæ¥ï¼Œå–å…¬é’¥çš„æœ€å 20 ä¸ªå­—èŠ‚ã€‚&lt;/p>
&lt;p>æ¯å¯¹ç§é’¥ /åœ°å€éƒ½ç¼–ç åœ¨ä¸€ä¸ªé’¥åŒ™æ–‡ä»¶é‡Œï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ keystore æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶æ˜¯ JSON æ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å’Œæµè§ˆã€‚é’¥åŒ™æ–‡ä»¶çš„å…³é”®éƒ¨åˆ†â€”â€”è´¦æˆ·ç§é’¥ï¼Œé€šå¸¸ç”¨ä½ åˆ›å»ºå¸æˆ·æ—¶è®¾ç½®çš„å¯†ç è¿›è¡ŒåŠ å¯†ã€‚å¦‚æœä½ ä¸¢å¤±äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å°±ä¸¢å¤±äº†ç§é’¥ï¼Œæ„å‘³ç€ä½ å¤±å»äº†ç­¾ç½²äº¤æ˜“çš„èƒ½åŠ›ï¼Œæ„å‘³ç€ä½ çš„èµ„é‡‘è¢«æ°¸ä¹…çš„é”å®šåœ¨äº†ä½ çš„è´¦æˆ·é‡Œã€‚&lt;/p>
&lt;p>æ‰¹é‡è½¬è´¦&lt;/p>
&lt;p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦å°† Token å‘é€åˆ°å¤šä¸ªåœ°å€ä¸Šå»ã€‚é€šå¸¸çš„åšæ³•å°±æ˜¯ä½¿ç”¨ web.js å†™ä¸€ä¸ªå¾ªç¯ç¨‹åºï¼Œä½†æ˜¯å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°è¿™ç§åšæ³•å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œå¸¸ä¼šå‘ç”Ÿè½¬è´¦å¤±è´¥æƒ…å†µã€‚&lt;/p>
&lt;p>ç»è¿‡åˆ†æé€ æˆå‘é€å¤±è´¥åŸå› æ˜¯ï¼Œé¢‘ç‡å¤ªé«˜ï¼Œå› ä¸º web.js æ˜¯å¼‚æ­¥æ“ä½œï¼Œå½“å‰ç¨‹åºè¿˜æœªå®Œæˆäº¤æ˜“ï¼Œäº¤æ˜“å°šæœªç¡®è®¤çš„æƒ…å†µä¸‹ç¬¬äºŒç¬”äº¤æ˜“å‘é€å‡ºå»ï¼Œè¿™æ—¶å°±ä¼šå‡ºé”™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">web3.eth.getTransactionCount(from).then(function(nonce){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // é—®é¢˜å°±å‡ºåœ¨ nonce ï¼Œ nonce å¦‚åŒæ•°æ®åº“ä¸­çš„åºåˆ—ä¸»é”®ï¼Œå¦‚æœä¸Šä¸€ä¸ªäº¤æ˜“æ²¡æœ‰å®Œæˆï¼Œä¸‹ä¸€ä¸ªäº¤æ˜“å–å¾— nonce + 1 åä¸ä¸Šä¸€ä¸ª pending çš„äº¤æ˜“ç›¸åŒï¼Œäº§ç”Ÿå†²çª
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€å¥½çš„è§£æ–¹æ¡ˆæ˜¯åœ¨åˆçº¦ä¸­å®ç°æ‰¹é‡è½¬è´¦åŠŸèƒ½ï¼Œè¿™æ ·éœ€è¦ä¸€ä¸ªäº¤æ˜“ txhash å®Œæˆå¤šæ¯”äº¤æ˜“ã€‚&lt;/p>
&lt;p>å¦‚æœä½ çš„ Token å·²ç»åœ¨ä½¿ç”¨äº†ï¼Œä¸”æ²¡æœ‰æ‰¹é‡è½¬è´¦çš„åŠŸèƒ½æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨å†™ä¸€ä¸ª Token ç»§æ‰¿åŸæ¥çš„ Tokenï¼Œåœ¨æ–°çš„ Token ä¸­å®ç°æ‰¹é‡è½¬è´¦åŠŸèƒ½ã€‚&lt;/p>
&lt;p>ä»£å¸å…‘æ¢&lt;/p>
&lt;p>å…‘æ¢ä»£å¸é€šå¸¸æ˜¯æŒ‡ä½¿ç”¨ ETH æˆ–è€…å…¶ä»–å¸å…‘æ¢ Tokenã€‚é€šå¸¸æ˜¯è¿™æ ·å®ç°çš„ï¼Œä½¿ç”¨æ™ºèƒ½åˆçº¦ï¼Œå°† ETH è¾¾åˆ°æŒ‡å®šåˆçº¦åœ°å€ï¼Œåˆçº¦ä¼šæ‰“å›ä»£å¸ç»™ç”¨æˆ·ã€‚&lt;/p>
&lt;p>è¿™ç§æ–¹å¼ä¸ç”¨äººå·¥å‚ä¸ï¼Œä¹Ÿä¸ç”¨å¼€å‘ç¨‹åºã€‚ç¼ºç‚¹ä¸èƒ½åšåˆ°å®æ—¶æ±‡ç‡ï¼Œéœ€è¦äººå·¥è®¾ç½®æ±‡ç‡ã€‚&lt;/p>
&lt;p>ERC20 Token&lt;/p>
&lt;p>ERC20 â€œæè¿°äº†å®ç°ä»£å¸åˆçº¦çš„æ ‡å‡†åŠŸèƒ½â€ï¼ŒERC20 æ˜¯å„ä¸ªä»£å¸çš„æ ‡å‡†æ¥å£ã€‚ERC20 ä»£å¸ä»…ä»…æ˜¯ä»¥å¤ªåŠä»£å¸çš„å­é›†ã€‚ä¸ºäº†å……åˆ†å…¼å®¹ ERC20ï¼Œå¼€å‘è€…éœ€è¦å°†ä¸€ç»„ç‰¹å®šçš„å‡½æ•°é›†æˆåˆ°ä»–ä»¬çš„æ™ºèƒ½åˆçº¦ä¸­ï¼Œä»¥ä¾¿åœ¨é«˜å±‚é¢èƒ½å¤Ÿæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p>
&lt;ul>
&lt;li>è·å¾—ä»£å¸æ€»ä¾›åº”é‡&lt;/li>
&lt;li>è·å¾—è´¦æˆ·ä½™é¢&lt;/li>
&lt;li>è½¬è®©ä»£å¸&lt;/li>
&lt;li>æ‰¹å‡†èŠ±è´¹ä»£å¸&lt;/li>
&lt;/ul>
&lt;p>æœ€ç®€å•çš„åˆçº¦å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">pragma solidity ^0.4.24;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">contract EncryptToken {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uint256 INITIAL_SUPPLY = 666666;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mapping(address =&amp;gt; uint256) balances;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> constructor() public {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> balances[msg.sender] = INITIAL_SUPPLY;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function transfer(address to, uint256 amount) public{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> assert(balances[msg.sender] &amp;gt; amount);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> balances[msg.sender] -= amount;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> balances[to] += amount;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function balanceOf(address owner) constant public returns (uint256){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return balances[owner];
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨äº† openzeppeline-solidity çš„å®‰å…¨æ ‡å‡†ä»£å¸åˆçº¦æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"> pragma solidity ^0.4.24;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> import &amp;#34;openzeppelin-solidity/contracts/token/ERC20/StandardToken.sol&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> contract BloggerCoin is StandardToken{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> string public name = &amp;#34;BloggerCoin&amp;#34;; // åå­—
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> string public symbol = &amp;#34;BLC&amp;#34;; // ç®€ç§°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uint8 public decimals = 4; // 10çš„4æ¬¡æ–¹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uint256 public INITIAL_SUPPLY = 666666;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> constructor() public{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> totalSupply_ = INITIAL_SUPPLY;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> balances[msg.sender] = INITIAL_SUPPLY;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>è°ˆè°ˆèŠå¤©æœºå™¨äººæ¡†æ¶çš„å®ç°åŸç†</title><link>https://example.com/p/%E8%B0%88%E8%B0%88%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A1%86%E6%9E%B6%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</link><pubDate>Wed, 22 Aug 2018 19:39:12 +0000</pubDate><guid>https://example.com/p/%E8%B0%88%E8%B0%88%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%A1%86%E6%9E%B6%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</guid><description>&lt;p>åœ¨è¿™ç¯‡æ–‡ç« ä¸è€ƒè™‘äººå·¥æ™ºèƒ½ï¼Œè°ˆè°ˆæˆ‘å¯¹èŠå¤©æœºå™¨äººæ¡†æ¶å®ç°æœºåˆ¶çš„ç†è§£ã€‚&lt;/p>
&lt;h2 id="èŠå¤©æœºå™¨äºº">èŠå¤©æœºå™¨äºº&lt;/h2>
&lt;blockquote>
&lt;p>&lt;strong>èŠå¤©æœºå™¨äºº&lt;/strong>ï¼ˆChatterbotï¼‰æ˜¯ç»ç”±å¯¹è¯æˆ–æ–‡å­—è¿›è¡Œäº¤è°ˆçš„è®¡ç®—æœºç¨‹åº[&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E8%81%8A%E5%A4%A9%E6%A9%9F%E5%99%A8%E4%BA%BA#cite_note-target-1" target="_blank" rel="noopener"
>1]&lt;/a>ã€‚èƒ½å¤Ÿæ¨¡æ‹Ÿäººç±»å¯¹è¯ï¼Œé€šè¿‡&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E5%9B%BE%E7%81%B5%E6%B5%8B%E8%AF%95" target="_blank" rel="noopener"
>å›¾çµæµ‹è¯•&lt;/a>ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç°æœ‰çš„ IM å·¥å…·ä¸Šå·²ç»æœ‰äº†å¾ˆå¤šæœºå™¨äººï¼Œå…¶å®èŠå¤©æœºå™¨äººä¸åªæ˜¯å•çº¯çš„å’Œç”¨æˆ·è¿›è¡ŒèŠå¤©ï¼Œä»–å…¶å®è¿˜å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ä¸€äº›è¯ï¼Œå¯ä»¥å¸®ç”¨æˆ·è®¢é¤ã€‚å¦å¤–åœ¨è¿ç»´é¢†åŸŸï¼Œä¹Ÿå‡ºç°äº† chatopsï¼Œé€šè¿‡å’Œæœºå™¨äººèŠå¤©ï¼Œè¿›è¡Œè¿ç»´æ“ä½œã€‚&lt;/p>
&lt;h2 id="æœºå™¨äººå¼€å‘æ¡†æ¶">æœºå™¨äººå¼€å‘æ¡†æ¶&lt;/h2>
&lt;p>ä½œä¸ºèŠå¤©æœºå™¨äººå¼€å‘è€…ï¼Œé¢å¯¹å¦‚æ­¤å¤šçš„ IM å·¥å…·å’Œ SDKï¼Œå¸¸ä¼šæ„Ÿåˆ°æ— æ‰€é€‚ä»ã€‚Bot å¼€å‘æ¡†æ¶å°±æ˜¯å¯¹èŠå¤©æœºå™¨äººå¼€å‘è¿‡ç¨‹ä¸­çš„äººå·¥å†…å®¹åšæŠ½è±¡åŒ–å¤„ç†ã€‚ç®€å•åœ°è§£é‡Šï¼Œæœºå™¨äººå¼€å‘æ¡†æ¶å°±æ˜¯ç”¨æ¥åˆ¶é€ æœºå™¨äººå¹¶å®šä¹‰å…¶è¡Œä¸ºã€‚&lt;/p>
&lt;p>ç„¶è€Œå°½ç®¡å¾ˆå¤šæœºå™¨äººæ¡†æ¶å®£ç§°ã€Œä»£ç ä¸€æ—¦å†™å¥½å¯éƒ¨ç½²åˆ°ä»»ä½•åœ°æ–¹ã€ï¼Œä½†æ˜¯è¿˜ä¼šæ˜¯å‡ºç°ä¸ºæ¯ä¸€ä¸ª IM å·¥å…·å¼€å‘ä¸€ä¸ªå•ç‹¬çš„èŠå¤©æœºå™¨äººã€‚è€Œä¸€ä¸ªè‰¯å¥½çš„æœºå™¨äººæ¡†æ¶ä¸»è¦åŒ…å«å¼€å‘ SDKï¼Œè¿æ¥å™¨å’Œæ¨¡æ‹Ÿå™¨ç­‰ã€‚&lt;/p>
&lt;p>ä½¿ç”¨æœºå™¨äººæ¡†æ¶å…¶å®å¹¶ä¸é€‚åˆåˆå­¦è€…å­¦ä¹ èŠå¤©æœºå™¨äººå¼€å‘ã€‚å®ƒä»¬å°è¯•è‡ªåŠ¨åŒ–å¤ªå¤šå·¥ä½œï¼Œå¯¹åˆå­¦è€…æ©ç›–äº†åŸºç¡€æœºåˆ¶ã€‚&lt;/p>
&lt;h2 id="å®ç°æ–¹å¼">å®ç°æ–¹å¼&lt;/h2>
&lt;ul>
&lt;li>webhook äº‹ä»¶å›è°ƒ&lt;/li>
&lt;li>FSM çŠ¶æ€æœº&lt;/li>
&lt;li>workflow å·¥ä½œæµ&lt;/li>
&lt;/ul>
&lt;p>æœ€ç®€å•çš„æœºå™¨äººæ˜¯æ²¡æœ‰ä¸Šä¸‹æ–‡çš„è¯­ä¹‰ç†è§£çš„ä¸€é—®ä¸€ç­”ï¼Œä»…ä»…æ˜¯å¯¹ç”¨æˆ·çš„å¯¹è¯è¿›è¡Œå“åº”ï¼Œè¿™ç§å°±å¯ä»¥é‡‡ç”¨ webhook çš„æ–¹å¼è¿›è¡Œå¼€å‘ã€‚ä¸éœ€è¦é‡‡ç”¨ä»€ä¹ˆå¼€å‘æ¡†æ¶ã€‚&lt;/p>
&lt;p>é‚£ä¹ˆå¯¹äºå¤šè½®å¯¹è¯çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿›è¡Œä¸€å®šçš„å¯¹è¯ç®¡ç†ã€‚ç”±æ­¤å¼•å…¥äº† FSM çŠ¶æ€æœºã€‚&lt;/p>
&lt;p>å¯èƒ½æœ‰äººä¸æ˜¯å¾ˆæ‡‚æœ‰é™çŠ¶æ€æœºï¼Œè¿™é‡Œåšä¸€ä¸‹ç®€å•è¯´æ˜ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æœ‰é™çŠ¶æ€æœºåœ¨ç°å®ç”Ÿæ´»ä¸­å…¶å®éšå¤„å¯è§ï¼Œä¼¸ç¼©å¼åœ†ç ç¬”å…¶å®å°±æ˜¯ä¸€ä¸ªæœ‰é™çŠ¶æ€æœºï¼ˆä¸¤ç§çŠ¶æ€äº’ç›¸è½¬æ¢ï¼‰ã€‚&lt;/p>
&lt;p>æœ‰é™çŠ¶æ€æœºï¼Œç¼©å†™ä¸º FSMï¼Œåˆç§°ä¸ºæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼Œç®€ç§°çŠ¶æ€æœºã€‚æ˜¯è¡¨ç¤ºæœ‰é™ä¸ª&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E7%8A%B6%E6%80%81" target="_blank" rel="noopener"
>çŠ¶æ€&lt;/a>ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E6%95%B0%E5%AD%A6%E6%A8%A1%E5%9E%8B" target="_blank" rel="noopener"
>æ•°å­¦æ¨¡å‹&lt;/a>ã€‚&lt;/p>
&lt;p>å¯ä»¥æ€»ç»“ä¸ºï¼šf(state, action) =&amp;gt; stateâ€™&lt;/p>
&lt;p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå‡½æ•°é‡‡ç”¨å½“å‰çš„çŠ¶æ€å’Œä¸€æ¬¡è¡ŒåŠ¨ï¼ˆå³æ›´æ”¹çŠ¶æ€çš„æ–¹æ³•ï¼‰ï¼Œä¹‹åå°†è¯¥è¡ŒåŠ¨åº”ç”¨äºè¿™ç§çŠ¶æ€å¹¶è¿”å›æ–°çš„çŠ¶æ€ã€‚&lt;/p>
&lt;p>å¯ä»¥è®¤ä¸ºçŠ¶æ€æœºæ˜¯å›¾çµå®Œå¤‡çš„ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æˆ‘ä»¬å¯ä»¥å°†å¯¹è¯çœ‹åšæ˜¯åœ¨æœ‰é™çŠ¶æ€å†…è·³è½¬çš„è¿‡ç¨‹ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æœ‰å¯¹åº”çš„åŠ¨ä½œå’Œå›å¤ï¼Œå¦‚æœèƒ½ä»å¼€å§‹èŠ‚ç‚¹é¡ºåˆ©çš„æµè½¬åˆ°ç»ˆæ­¢èŠ‚ç‚¹ï¼Œä»»åŠ¡å°±å®Œæˆäº†ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥å°†å¯¹è¯çš„è¿‡ç¨‹ï¼Œåˆ†ä¸ºä¸€ä¸ªä¸ªçš„çŠ¶æ€ï¼Œç„¶åä½¿ç”¨ DSL æ¥å®ç°ä¸€ä¸ª FSMï¼Œå¯¹äºå¼€å‘è€…æ¥è®²ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ä¸€ä¸ªä¸ªçŠ¶æ€å‡½æ•°å³å¯ã€‚&lt;/p>
&lt;p>ç‰¹ç‚¹æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>äººä¸ºå®šä¹‰å¯¹è¯æµç¨‹&lt;/li>
&lt;li>å®Œå…¨æœ‰ç³»ç»Ÿä¸»å¯¼ï¼Œç³»ç»Ÿé—®ç”¨æˆ·ç­”&lt;/li>
&lt;li>ç­”éæ‰€é—®çš„æƒ…å†µç›´æ¥å¿½ç•¥&lt;/li>
&lt;li>å»ºæ¨¡ç®€å•ï¼Œèƒ½æ¸…æ™°æ˜äº†çš„æŠŠäº¤äº’åŒ¹é…åˆ°æ¨¡å‹&lt;/li>
&lt;li>éš¾ä»¥æ‰©å±•ï¼Œå¾ˆå®¹æ˜“å˜çš„å¤æ‚&lt;/li>
&lt;li>é€‚ç”¨äºç®€å•çš„ä»»åŠ¡ï¼Œéš¾ä»¥å¤„ç†å¤æ‚é—®é¢˜&lt;/li>
&lt;li>ç¼ºå°‘çµæ´»æ€§ï¼Œè¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œè¾“å…¥æœ‰é™ï¼Œå¯¹è¯ç»“æ„å’Œæµè½¬è·¯å¾„æœ‰é™&lt;/li>
&lt;/ul>
&lt;p>ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const {startWith, when, goto, stay, stop} = botkit.DSL(fsm);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">startWith(MyStates.IDLE, {counter: 0});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">when(MyStates.IDLE)(async (sender, content, data) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">when(MyStates.UI)((sender, content, data) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">when(MyStates.STEP1)((sender, content, data) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">when(MyStates.STEP2)((sender, content, data) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">when(MyStates.DONE)((sender, content, data) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">when(MyStates.EMPTY)((sender, content, data) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">when(MyStates.LOOP)((sender, content, data) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»ç¤ºä¾‹ä¸­å¯ä»¥å‘ç°ï¼ŒåŸºäº fsm çš„æœºå™¨äººæ¡†æ¶éœ€è¦ä½¿ç”¨ç±»ä¼¼ DSL é¢†åŸŸç‰¹å®šè¯­è¨€ä¸€æ ·çš„æè¿°è¯­è¨€ï¼Œå®šä¹‰å„ç§å„æ ·çš„çŠ¶æ€ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€éƒ½æœ‰è§¦å‘ç‚¹ã€‚å½“æ»¡è¶³æŸä¸ªçŠ¶æ€æ¡ä»¶æ—¶ï¼Œè¿›å…¥è¯¥çŠ¶æ€ï¼Œæ‰§è¡Œè¯¥çŠ¶æ€çš„é€»è¾‘ã€‚è¿™ç§åŸºäºçŠ¶æ€æœºçš„æœºå™¨äººæ¡†æ¶ï¼Œå¯¹äºç®€å•çš„åœºæ™¯æ¯”è¾ƒå®¹æ˜“å†™ï¼Œä½†æ˜¯å¦‚æœæ˜¯é‡åˆ°äº†å¤æ‚çš„åœºæ™¯ï¼Œæ¯”å¦‚å¤šè½®å¯¹è¯ä¸­è¿˜é™„å¸¦ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå°±ä¼šå†™èµ·æ¥éå¸¸å¤æ‚ã€‚&lt;/p>
&lt;p>äºæ˜¯å¼•å…¥äº†åŸºäºå·¥ä½œæµçš„ chatbot æ¡†æ¶ã€‚å…¶å®å·¥ä½œæµæ˜¯å¯¹ fsm çš„ä¸€ç§ç®€åŒ–å°è£…ï¼Œæœ¬è´¨ä¸Šæ¥è®²ï¼Œå·¥ä½œæµèƒ½åšåˆ°çš„ï¼Œfsm çŠ¶æ€æœºä¹Ÿèƒ½åšåˆ°ï¼Œè€Œä¸” fsm çŠ¶æ€æœºæˆ–è®¸èƒ½æ‹†çš„æ›´ç»†ï¼Œä½†æ˜¯å·¥ä½œæµçš„ä¸€ä¸ªä¸ª functionï¼Œæˆ–è€…æ˜¯ function çš„é›†åˆ dialogï¼Œå¯ä»¥äº’ç›¸ç»„åˆï¼Œå¼€å‘èµ·æ¥æ›´ç¬¦åˆå¤§éƒ¨åˆ†äººçš„ç›´è§‰ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>routing dialog&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// hotels.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports = [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // Destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function (session) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.send(&amp;#39;Welcome to the Hotels finder!&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> builder.Prompts.text(session, &amp;#39;Please enter your destination&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function (session, results, next) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.dialogData.destination = results.response;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.send(&amp;#39;Looking for hotels in %s&amp;#39;, results.response);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">];
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// app.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var bot = new builder.UniversalBot(connector, [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function (session) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">]);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bot.dialog(&amp;#39;hotels&amp;#39;, require(&amp;#39;./hotels&amp;#39;));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bot.dialog(&amp;#39;flights&amp;#39;, require(&amp;#39;./flights&amp;#39;));
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ routing dialogï¼Œæˆ‘ä»¬å¯ä»¥å®ç° dialog çš„å¤ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>waterfall dialog&lt;/p>
&lt;p>ä¸€ä¸ªç€‘å¸ƒæµçš„ dialogï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸€ä¸ª dialog ä¸­åƒæµä¸€æ ·å®Œæˆä¸€ç³»åˆ—çš„åŠ¨ä½œã€‚å°±åƒ fsm çš„å¤šç§çŠ¶æ€çš„é›†åˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">[
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // Destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function (session) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.send(&amp;#39;Welcome to the Hotels finder!&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> builder.Prompts.text(session, &amp;#39;Please enter your destination&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function (session, results, next) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.dialogData.destination = results.response;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.send(&amp;#39;Looking for hotels in %s&amp;#39;, results.response);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function (session) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var destination = session.dialogData.destination;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var checkIn = new Date(session.dialogData.checkIn);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var checkOut = checkIn.addDays(session.dialogData.nights);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.send(
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;Ok. Searching for Hotels in %s from %d/%d to %d/%d...&amp;#39;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> destination,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> checkIn.getMonth() + 1, checkIn.getDate(),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> checkOut.getMonth() + 1, checkOut.getDate());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // Async search
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Store
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .searchHotels(destination, checkIn, checkOut)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .then(function (hotels) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // Results
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.send(&amp;#39;I found in total %d hotels for your dates:&amp;#39;, hotels.length);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var message = new builder.Message()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .attachmentLayout(builder.AttachmentLayout.carousel)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .attachments(hotels.map(hotelAsAttachment));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.send(message);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // End
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> session.endDialog();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>state&lt;/p>
&lt;p>åœ¨ä¸€ä¸ª dialog ä¸Šä¸‹æ–‡ä¸­å…±äº«çš„æ•°æ®ï¼Œæˆ–è€…åœ¨å¤šä¸ª dialog ä¸­å…±äº«çš„æ•°æ®ã€‚å¯¹äºå¾®è½¯çš„ botbuilder æ¥è®²ï¼Œä»–ä»¬æä¾›äº†å¦‚ä¸‹å‡ ä¸ª APIï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Field&lt;/th>
&lt;th>Use Cases&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>userData&lt;/td>
&lt;td>Stores information globally for the user across all conversations.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>conversationData&lt;/td>
&lt;td>Stores information globally for a single conversation. This data is visible to everyone within the conversation so care should be used to whatâ€™s stored there. Itâ€™s disabled by default and needs to be enabled using the bots &lt;a class="link" href="https://docs.botframework.com/en-us/node/builder/chat-reference/interfaces/_botbuilder_d_.iuniversalbotsettings.html#persistconversationdata" target="_blank" rel="noopener"
>&lt;code>persistConversationData&lt;/code>&lt;/a> setting.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>privateConversationData&lt;/td>
&lt;td>Stores information globally for a single conversation but its private data for the current user. This data spans all dialogs so itâ€™s useful for storing temporary state that you want cleaned up when the conversation ends.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dialogData&lt;/td>
&lt;td>Persists information for a single dialog instance. This is essential for storing temporary information in between the steps of a waterfall.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;/ul>
&lt;h2 id="conversation-ui">Conversation UI&lt;/h2>
&lt;p>å¯¹è¯å¼ UIï¼ˆConversation UIï¼Œä¸‹æ–‡ç®€ç§° CUIï¼‰ã€‚&lt;/p>
&lt;p>CUI åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬æ—¥å¸¸è·ŸäººèŠå¤©çš„å¾®ä¿¡ã€çŸ­ä¿¡ç•Œé¢å°±æ˜¯ã€‚ç”±ä¸€æ¡æ¡æ¶ˆæ¯ç»„æˆï¼ŒæŒ‰æ—¶é—´å…ˆåå±•ç¤ºå‡ºæ¥ï¼Œå°±å¯ä»¥çœ‹ä½œ CUIã€‚&lt;/p>
&lt;p>chatbot åœ¨ä¸ç”¨æˆ·äº¤æµæ—¶ï¼Œä¸å•å•æ˜¯åªæœ‰æ–‡å­—ï¼Œè¿˜ä¼šéœ€è¦ç”¨æˆ·è¿›è¡Œäº’åŠ¨ï¼Œè¿™æ—¶å€™å°±æ˜¯ CUI çš„ç”¨æ­¦ä¹‹åœ°äº†ã€‚æˆ‘ä»¬å¯ä»¥å’Œç§»åŠ¨ç«¯è¿›è¡Œçº¦å®šï¼Œå¯¹ä¸€äº›ç‰¹å®šçš„æ¶ˆæ¯æ ¼å¼è¿›è¡Œæ¸²æŸ“ï¼Œè¿™æ ·å°±å¯ä»¥åšå‡ºæŒ‰é’®ï¼Œåˆ—è¡¨ç­‰ã€‚&lt;/p>
&lt;h2 id="bot-service">Bot Service&lt;/h2>
&lt;p>ä½œä¸ºä¸€ä¸ªæœºå™¨äººæ¡†æ¶ï¼Œå¼€å‘å®Œæˆä¹‹åï¼Œè¿˜éœ€è¦å’Œ telegramï¼ŒFacebook messengerï¼Œslack ç­‰ IM å¹³å°è¿›è¡Œå¯¹æ¥ï¼Œå¦‚æœè¦å¼€å‘è€…ä¸€ä¸ªä¸ªå¯¹æ¥çš„è¯ï¼Œå°†ä¼šç‰¹åˆ«éº»çƒ¦ã€‚ä½œä¸º chatbot å¼€å‘æ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œbot service çš„å·¥ä½œå°±æ˜¯å¯¹æ¥ IM å¹³å°ã€‚&lt;/p>
&lt;h2 id="bot-builder-æºç é˜…è¯»">Bot Builder æºç é˜…è¯»&lt;/h2>
&lt;p>å¾®è½¯çš„ botbuilder-js å‡ºåˆ°äº† V4 ç‰ˆæœ¬ï¼Œåœ¨æ–°ç‰ˆæœ¬çš„æœºå™¨äººæ¡†æ¶æœ‰ç€å¾ˆå¤§çš„å˜åŠ¨ï¼Œç›¸æ¯”äº V3 ç›®å½•ç»“æ„å˜åŒ–äº†ï¼Œè€Œä¸”æœºå™¨äººç¼–å†™æµç¨‹ä¹Ÿæœ‰äº†ä¸€å®šçš„å·®å¼‚ã€‚&lt;/p>
&lt;p>é¡¹ç›®ç»“æ„&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ botbuilder
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ botbuilder-ai
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ botbuilder-azure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ botbuilder-core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ botbuilder-dialogs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ botframework-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ botframework-connector
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ botframework-schema
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›®å½•ç»“æ„æ›´åŠ çš„ç»„ä»¶åŒ–ã€‚&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨å¾®è½¯çš„æœåŠ¡ï¼Œé‚£ä¹ˆ botbuilder-ai å’Œ botbuilder-azure å…¶å®ä¸é‡è¦ã€‚&lt;/p>
&lt;h3 id="botbuilder">botbuilder&lt;/h3>
&lt;p>botbuilder æ˜¯æ¡†æ¶çš„å…¥å£ï¼Œåœ¨è¿™ä¸ª package ä¸­åšçš„äº‹æƒ…æ¯”è¾ƒç®€å•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./botFrameworkAdapter&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./fileTranscriptStore&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;../../botbuilder-core/lib&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¼å‡º botbuilder-core å’Œç»§æ‰¿äº† botAdapter çš„å­ç±» botFrameworkAdapterã€‚&lt;/p>
&lt;p>fileTranscriptStore æ˜¯å­˜å‚¨æ¯ä¸ª activity çš„ transcript åˆ°æ–‡ä»¶ä¸­ï¼ŒTranscript æ˜¯äººå’Œ bot çš„å¯¹è¯åŠ¨ä½œçš„æ—¥å¿—ã€‚&lt;/p>
&lt;p>å¦‚æœæˆ‘ä»¬è¦å®šåˆ¶è‡ªå·±çš„ bot åŠ¨ä½œï¼Œå…¶å®å°±å¯ä»¥ç»§æ‰¿ botAdapterï¼Œç„¶åå¯¹æ¥è‡ªå·±çš„ IM ç­‰ç­‰ã€‚botAdapter ä¹Ÿæ˜¯ botbuilder-core ä¸­çš„ï¼Œæ‰€ä»¥ botbuilder-core æ˜¯æ ¸å¿ƒï¼Œåªè¦è¯»æ‡‚äº† botbuilder-coreï¼Œå°±å¯ä»¥è¯´æ˜¯ç†è§£äº†å¾®è½¯çš„æœºå™¨äººæ¡†æ¶ã€‚&lt;/p>
&lt;h3 id="botbuilder-core">botbuilder-core&lt;/h3>
&lt;p>çœ‹ botbuilder-coreï¼Œä¹Ÿä» index.ts å¼€å§‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;../../botframework-schema/lib&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./autoSaveStateMiddleware&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./botAdapter&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./botState&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./botStatePropertyAccessor&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./botStateSet&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./browserStorage&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./cardFactory&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./conversationState&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./memoryStorage&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./memoryTranscriptStore&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./messageFactory&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./middlewareSet&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./privateConversationState&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./propertyManager&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./recognizerResult&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./showTypingMiddleware&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./storage&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./testAdapter&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./transcriptLogger&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./turnContext&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;./userState&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œå¼•å…¥äº†ä¸€ä¸ª botframework-schemaï¼Œé€šè¿‡åå­—å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç±»å‹å®šä¹‰çš„åŒ…ï¼Œä¸»è¦æ˜¯æœºå™¨äºº Activity çš„ Schemaã€‚Activity æ˜¯äººå’Œ bot æ‰€åšçš„ä¼šè¯çš„ç¨‹åºçº§åˆ«çš„è¡¨ç¤ºï¼Œè¯¥ schema ä¸­åŒ…å«äº†æ–‡æœ¬åè®®ã€å¤šåª’ä½“å’Œéå†…å®¹åŠ¨ä½œï¼ˆå¦‚ç¤¾äº¤äº’åŠ¨å’Œæ‰“å­—æŒ‡ç¤ºç¬¦ï¼‰çš„è§„å®šã€‚&lt;/p></description></item><item><title>åŸºäºä»¥å¤ªåŠçš„ Parity è”ç›Ÿé“¾éƒ¨ç½²</title><link>https://example.com/p/%E5%9F%BA%E4%BA%8E%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%9A%84-parity-%E8%81%94%E7%9B%9F%E9%93%BE%E9%83%A8%E7%BD%B2/</link><pubDate>Wed, 22 Aug 2018 16:51:13 +0000</pubDate><guid>https://example.com/p/%E5%9F%BA%E4%BA%8E%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%9A%84-parity-%E8%81%94%E7%9B%9F%E9%93%BE%E9%83%A8%E7%BD%B2/</guid><description>&lt;p>å…¬å¸é¡¹ç›®ä¸­ä½¿ç”¨å…¬ç½‘ä¸Šçš„ä»¥å¤ªåŠç§é“¾ï¼Œäº¤æ˜“é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œäºæ˜¯è¿™å‡ å¤©éƒ½åœ¨é¼“æ£åŸºäºä»¥å¤ªåŠçš„è”ç›Ÿé“¾ï¼Œparity æ˜¯å¯ä»¥æ„å»ºå‡ºä¸€ä¸ªåŸºäº PoA å…±è¯†çš„ç§é“¾ï¼Œè€Œä¸”å…¼å®¹ä»¥å¤ªåŠçš„åˆçº¦ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è®°å½•è‡ªå·±çš„è¸©å‘ç»å†ï¼Œä¸»è¦å®ç°äº†èŠ‚ç‚¹çš„æ­å»ºï¼Œåˆçº¦çš„éƒ¨ç½²ä»¥åŠæœ¬åœ°ä»¥å¤ªåŠæµè§ˆå™¨çš„å¯åŠ¨ã€‚&lt;/p>
&lt;h2 id="éƒ¨ç½²è”ç›Ÿé“¾">éƒ¨ç½²è”ç›Ÿé“¾&lt;/h2>
&lt;p>parity çš„æ–‡æ¡£ï¼š&lt;a class="link" href="https://wiki.parity.io/Demo-PoA-tutorial" target="_blank" rel="noopener"
>https://wiki.parity.io/Demo-PoA-tutorial&lt;/a>&lt;/p>
&lt;h3 id="å®‰è£…">å®‰è£…&lt;/h3>
&lt;p>é¦–å…ˆæ˜¯ä¸‹è½½ parityï¼Œåœ¨ mac ä¸‹æ˜¯ç›´æ¥ brew å®‰è£…å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">brew tap paritytech/paritytech
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">brew install parity
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åˆ›ä¸–åŒºå—">åˆ›ä¸–åŒºå—&lt;/h3>
&lt;p>åˆ›ä¸–åŒºå—çš„é…ç½®æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">// demo-spec.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;DemoPoA&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;engine&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;authorityRound&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;params&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;stepDuration&amp;#34;: &amp;#34;5&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;validators&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;list&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;0x00bd138abd70e2f00903268f3db08f2d25677c9e&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;0x00aa39d30f0d20ff03a22ccfc30b7efbfca597c2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;params&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;gasLimitBoundDivisor&amp;#34;: &amp;#34;0x400&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;maximumExtraDataSize&amp;#34;: &amp;#34;0x20&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;minGasLimit&amp;#34;: &amp;#34;0x1388&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;networkID&amp;#34;: &amp;#34;0x2323&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;eip155Transition&amp;#34;: 0,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;validateChainIdTransition&amp;#34;: 0,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;eip140Transition&amp;#34;: 0,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;eip211Transition&amp;#34;: 0,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;eip214Transition&amp;#34;: 0,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;eip658Transition&amp;#34;: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;genesis&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;seal&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;authorityRound&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;step&amp;#34;: &amp;#34;0x0&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;signature&amp;#34;: &amp;#34;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;difficulty&amp;#34;: &amp;#34;0x20000&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;gasLimit&amp;#34;: &amp;#34;0x5B8D80&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;accounts&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;0x0000000000000000000000000000000000000001&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;balance&amp;#34;: &amp;#34;1&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;builtin&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;ecrecover&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;pricing&amp;#34;: { &amp;#34;linear&amp;#34;: { &amp;#34;base&amp;#34;: 3000, &amp;#34;word&amp;#34;: 0 } }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;0x0000000000000000000000000000000000000002&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;balance&amp;#34;: &amp;#34;1&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;builtin&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;sha256&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;pricing&amp;#34;: { &amp;#34;linear&amp;#34;: { &amp;#34;base&amp;#34;: 60, &amp;#34;word&amp;#34;: 12 } }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;0x0000000000000000000000000000000000000003&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;balance&amp;#34;: &amp;#34;1&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;builtin&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;ripemd160&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;pricing&amp;#34;: { &amp;#34;linear&amp;#34;: { &amp;#34;base&amp;#34;: 600, &amp;#34;word&amp;#34;: 120 } }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;0x0000000000000000000000000000000000000004&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;balance&amp;#34;: &amp;#34;1&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;builtin&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;identity&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;pricing&amp;#34;: { &amp;#34;linear&amp;#34;: { &amp;#34;base&amp;#34;: 15, &amp;#34;word&amp;#34;: 3 } }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;0x004ec07d2329997267ec62b4166639513386f32e&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;balance&amp;#34;: &amp;#34;10000000000000000000000&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="node0">node0&lt;/h3>
&lt;p>node0 èŠ‚ç‚¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="c">## node0.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">parity&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">chain&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;demo-spec.json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">base_path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;parity0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">network&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">30300&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">rpc&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8546&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">apis&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;web3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;eth&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;net&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;personal&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;parity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;parity_set&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;traces&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rpc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;parity_accounts&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">interface&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cors&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;*&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">hosts&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;all&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">websockets&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">account&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">password&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;node.pwds&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">mining&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">engine_signer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;0x00bd138abd70e2f00903268f3db08f2d25677c9e&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">reseal_on_txs&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;none&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="node1">node1&lt;/h3>
&lt;p>node1 èŠ‚ç‚¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="c">## node1.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">parity&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">chain&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;demo-spec.json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">base_path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;parity1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">network&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">30301&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">rpc&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8541&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">apis&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;web3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;eth&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;net&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;personal&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;parity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;parity_set&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;traces&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;rpc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;parity_accounts&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">websockets&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">8451&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">ipc&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">disable&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">account&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">password&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;node.pwds&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">mining&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">engine_signer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;0x00aa39d30f0d20ff03a22ccfc30b7efbfca597c2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">reseal_on_txs&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;none&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">disable&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¯åŠ¨å¹¶åˆ›å»ºè´¦æˆ·">å¯åŠ¨å¹¶åˆ›å»ºè´¦æˆ·&lt;/h3>
&lt;p>å¯åŠ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">parity --config node0.toml --fat-db=on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parity --config node1.toml --fat-db=on
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºè´¦æˆ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">curl --data &amp;#39;{&amp;#34;jsonrpc&amp;#34;:&amp;#34;2.0&amp;#34;,&amp;#34;method&amp;#34;:&amp;#34;parity_newAccountFromPhrase&amp;#34;,&amp;#34;params&amp;#34;:[&amp;#34;node0&amp;#34;, &amp;#34;node0&amp;#34;],&amp;#34;id&amp;#34;:0}&amp;#39; -H &amp;#34;Content-Type: application/json&amp;#34; -X POST localhost:8546
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">curl --data &amp;#39;{&amp;#34;jsonrpc&amp;#34;:&amp;#34;2.0&amp;#34;,&amp;#34;method&amp;#34;:&amp;#34;parity_newAccountFromPhrase&amp;#34;,&amp;#34;params&amp;#34;:[&amp;#34;user&amp;#34;, &amp;#34;user&amp;#34;],&amp;#34;id&amp;#34;:0}&amp;#39; -H &amp;#34;Content-Type: application/json&amp;#34; -X POST localhost:8546
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">curl --data &amp;#39;{&amp;#34;jsonrpc&amp;#34;:&amp;#34;2.0&amp;#34;,&amp;#34;method&amp;#34;:&amp;#34;parity_newAccountFromPhrase&amp;#34;,&amp;#34;params&amp;#34;:[&amp;#34;node1&amp;#34;, &amp;#34;node1&amp;#34;],&amp;#34;id&amp;#34;:0}&amp;#39; -H &amp;#34;Content-Type: application/json&amp;#34; -X POST localhost:8541
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·å°±åˆ›å»ºäº† 3 ä¸ªè´¦æˆ·ï¼Œå…¶ä¸­ node0 å’Œ node1 æ˜¯è§è¯è€… user æ˜¯åˆå§‹å‘é’±çš„ã€‚&lt;/p>
&lt;p>å› ä¸º parity ui æ˜¯è¦è¿æ¥ 8546 ç«¯å£ï¼Œæ‰€ä»¥è¿™é‡Œå°±è®© node0 çš„ rpc çš„ç«¯å£æ˜¯ 8546ã€‚&lt;/p>
&lt;h3 id="èŠ‚ç‚¹äº’é€šå’Œè½¬è´¦">èŠ‚ç‚¹äº’é€šå’Œè½¬è´¦&lt;/h3>
&lt;p>è®© node0 å’Œ node1 èŠ‚ç‚¹ç›¸é€šï¼Œå…¶å®å°±æ˜¯è®©ä¸¤ä¸ªèŠ‚ç‚¹æˆä¸ºä¸€ä¸ªç½‘ç»œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// è·å–node0çš„encode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl --data &amp;#39;{&amp;#34;jsonrpc&amp;#34;:&amp;#34;2.0&amp;#34;,&amp;#34;method&amp;#34;:&amp;#34;parity_enode&amp;#34;,&amp;#34;params&amp;#34;:[],&amp;#34;id&amp;#34;:0}&amp;#39; -H &amp;#34;Content-Type: application/json&amp;#34; -X POST localhost:8546
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// è°ƒç”¨node1çš„rpcï¼Œå°†node0åŠ å…¥ï¼Œ RESULTå°±æ˜¯ä¸Šä¸€æ­¥è·å–çš„
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl --data &amp;#39;{&amp;#34;jsonrpc&amp;#34;:&amp;#34;2.0&amp;#34;,&amp;#34;method&amp;#34;:&amp;#34;parity_addReservedPeer&amp;#34;,&amp;#34;params&amp;#34;:[&amp;#34;enode://RESULT&amp;#34;],&amp;#34;id&amp;#34;:0}&amp;#39; -H &amp;#34;Content-Type: application/json&amp;#34; -X POST localhost:8541
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å…ˆç»™ä¸¤ä¸ªè´¦æˆ·è½¬è´¦ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">curl --data &amp;#39;{&amp;#34;jsonrpc&amp;#34;:&amp;#34;2.0&amp;#34;,&amp;#34;method&amp;#34;:&amp;#34;personal_sendTransaction&amp;#34;,&amp;#34;params&amp;#34;:[{&amp;#34;from&amp;#34;:&amp;#34;0x004ec07d2329997267Ec62b4166639513386F32e&amp;#34;,&amp;#34;to&amp;#34;:&amp;#34;0x00Bd138aBD70e2F00903268F3Db08f2D25677C9e&amp;#34;,&amp;#34;value&amp;#34;:&amp;#34;0xde0b6b3a7640000&amp;#34;}, &amp;#34;user&amp;#34;],&amp;#34;id&amp;#34;:0}&amp;#39; -H &amp;#34;Content-Type: application/json&amp;#34; -X POST localhost:8540
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä» user ä¸­è½¬äº† 1 ä¸ªä»¥å¤ªåŠåˆ°äº† node0 è´¦æˆ·ä¸­ï¼ŒåŒæ ·å†è½¬ç»™ node1ã€‚&lt;/p>
&lt;h2 id="éƒ¨ç½²åˆçº¦">éƒ¨ç½²åˆçº¦&lt;/h2>
&lt;p>å†ä½¿ç”¨ truffle å¼€å‘å®Œåˆçº¦ä¹‹åï¼ŒæŠŠè´¦æˆ·éƒ¨ç½²åˆ°æˆ‘ä»¬åˆšåˆšèµ·æ¥çš„è”ç›Ÿé“¾ã€‚éƒ¨ç½²åˆçº¦éœ€è¦æ¶ˆè€—ä¸€å®šçš„ gasï¼Œtruffle ä½¿ç”¨çš„æ˜¯ HD wallet çš„ Providerï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆç»™ä¸€ä¸ªé’±åŒ…è½¬ä¸€äº›ä»¥å¤ªå¸ã€‚&lt;/p>
&lt;p>å› ä¸ºè¿™é‡Œç”¨çš„æ˜¯ metamaskï¼Œåœ¨æœ€åˆåˆ›å»ºé’±åŒ…çš„æ—¶å€™æœ‰è®¾ç½® 12 ä¸ªåŠ©è®°è¯ï¼Œæ‰€ä»¥å…ˆè®©é’±åŒ…è¿æ¥åˆ° node0 èŠ‚ç‚¹ï¼š&lt;/p>
&lt;p>&lt;img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fuioo9rlayj30ab0h2gne.jpg"
loading="lazy"
>&lt;/p>
&lt;p>åˆ›å»ºä¸€ä¸ªè´¦æˆ·ï¼Œå‘é‚£ä¸ªè´¦æˆ·è½¬å‡ ä¸ªä»¥å¤ªå¸ã€‚&lt;/p>
&lt;p>ç„¶ååœ¨ truffle ä¸­ï¼Œé…ç½®å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// truffle.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // See &amp;lt;http://truffleframework.com/docs/advanced/configuration&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // to customize your Truffle configuration!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networks: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> development: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> host: &amp;#34;127.0.0.1&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 8545,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> network_id: &amp;#34;*&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> parity: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> provider: function () {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return new HDWalletProvider(&amp;#39;è¿™é‡Œå†™åŠ©è®°è¯&amp;#39;, &amp;#34;http://127.0.0.1:8546&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> network_id: 3,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gas: 4700000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶ååœ¨æ‰§è¡Œéƒ¨ç½²åˆçº¦çš„æ—¶å€™ï¼ŒæŒ‡å®š parity å³å¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">truffle migrate --network parity
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="éƒ¨ç½²ä»¥å¤ªåŠæµè§ˆå™¨">éƒ¨ç½²ä»¥å¤ªåŠæµè§ˆå™¨&lt;/h2>
&lt;p>ä»¥å¤ªåŠçš„æµè§ˆå™¨æ‰¾äº†å¥½å‡ ä¸ªï¼Œæœ€åé€‰ä¸­äº†&lt;a class="link" href="https://github.com/gobitfly/etherchain-light" target="_blank" rel="noopener"
>etherchain-light&lt;/a>ã€‚éƒ¨ç½²èµ·æ¥ç®€å•ã€‚&lt;/p>
&lt;p>é¦–å…ˆ clone ä»£ç åˆ°æœ¬åœ°ï¼Œç„¶å npm å®‰è£…ä¾èµ–ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git clone https://github.com/gobitfly/etherchain-light --recursive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd etherchain-light &amp;amp;&amp;amp; yarn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸€å®šè¦ç”¨&lt;code>â€”-recursive&lt;/code>ï¼Œå°†æ‰€æœ‰ git çš„å­æ¨¡å—éƒ½ä¸‹è½½ä¸‹æ¥ã€‚&lt;/p>
&lt;p>ä¿®æ”¹ config.js.example æ–‡ä»¶ä¸º config.jsï¼Œç„¶åæŠŠ Provider æ”¹ä¸º HttpProviderï¼Œè¿æ¥åˆ° node0 çš„èŠ‚ç‚¹å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// config.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var web3 = require(&amp;#39;web3&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var net = require(&amp;#39;net&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var config = function () {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> this.logFormat = &amp;#34;combined&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // this.ipcPath = process.env[&amp;#34;HOME&amp;#34;] + &amp;#34;/.local/share/io.parity.ethereum/jsonrpc.ipc&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // this.provider = new web3.providers.IpcProvider(this.ipcPath, net);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> this.provider = new web3.providers.HttpProvider(&amp;#34;http://127.0.0.1:8546&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // ... çœç•¥å…¶ä½™ä»£ç 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports = config;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œ&lt;code>npm start&lt;/code>ä¹‹åå³å¯å°†ä»¥å¤ªåŠæµè§ˆå™¨è¿è¡Œèµ·æ¥ã€‚ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—®&lt;code>http://localhost:3000&lt;/code>ã€‚&lt;/p>
&lt;h2 id="æ€è€ƒ">æ€è€ƒ&lt;/h2>
&lt;p>PoA å…±è¯†åŸºäºæƒå¨çš„å…±è¯†æœºåˆ¶ï¼Œå’ŒåŸºäº raft åè®®çš„å…±è¯†æœºåˆ¶å…·ä½“å“ªä¸ªæ›´å¿«ï¼Ÿ&lt;/p>
&lt;p>Parity æ–‡æ¡£ä¸­æ²¡æœ‰æ‰¾åˆ°å’Œæƒé™æ§åˆ¶ç›¸å…³çš„æ¨¡å—ï¼Œç”¨å®ƒæ¥åšè”ç›Ÿé“¾è¿˜æœ‰å¾…ç¡®å®šã€‚&lt;/p>
&lt;p>Quorum æ˜¯ JP æ‘©æ ¹å¼€æºçš„åŸºäºä»¥å¤ªåŠçš„è”ç›Ÿé“¾ï¼Œä½¿ç”¨çš„ raft ç®—æ³•ï¼Œå¯ä»¥ç ”ç©¶ç ”ç©¶ã€‚&lt;/p>
&lt;p>è¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œfabric å·²ç»æ˜¯è”ç›Ÿé“¾ä¸»æµçš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©ä»¥å¤ªåŠåšè”ç›Ÿé“¾çš„å¥½å¤„æœ‰å¤šå¤§ã€‚&lt;/p></description></item><item><title>dive-into-redis</title><link>https://example.com/p/dive-into-redis/</link><pubDate>Mon, 20 Aug 2018 09:39:08 +0000</pubDate><guid>https://example.com/p/dive-into-redis/</guid><description>&lt;p>redis æŒä¹…åŒ–ï¼Œ&lt;/p>
&lt;p>æœºåˆ¶æœ‰ä¸¤ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>å¿«ç…§ï¼šå…¨é‡å¤‡ä»½ï¼ŒäºŒè¿›åˆ¶åºåˆ—åŒ–ï¼Œå­˜å‚¨ç´§å‡‘&lt;/li>
&lt;li>AOF æ—¥å¿—ï¼šè¿ç»­çš„å¢é‡å¤‡ä»½ï¼Œå†…å­˜æ•°æ®ä¿®æ”¹çš„æ–‡æœ¬&lt;/li>
&lt;/ul></description></item><item><title>golang è¸©å‘</title><link>https://example.com/p/golang-%E8%B8%A9%E5%9D%91/</link><pubDate>Tue, 14 Aug 2018 20:10:55 +0000</pubDate><guid>https://example.com/p/golang-%E8%B8%A9%E5%9D%91/</guid><description>&lt;h3 id="ä¸€">ä¸€&lt;/h3>
&lt;blockquote>
&lt;p>x509 error when using HTTPS inside a Docker container&lt;/p>
&lt;/blockquote>
&lt;p>å› ä¸º docker ä¸­æ²¡æœ‰ CA è¯ä¹¦ã€‚&lt;/p>
&lt;p>æ™®é€šçš„é•œåƒè§£å†³åŠæ³•&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">FROM ubuntu:14.04.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RUN apt-get update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RUN apt-get install -y ca-certificates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CMD curl https://www.google.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæ˜¯ alpine çš„å‚è€ƒè¿™ä¸ªï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">FROM docker.finogeeks.club/base/alpine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAINTAINER &amp;#34;zhuzhenfeng@finogeeks.club&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RUN set -ex \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;amp;&amp;amp; apk add --no-cache ca-certificates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">COPY src/wallet/wallet /opt/wallet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ENTRYPOINT /opt/wallet
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="äºŒ">äºŒ&lt;/h3>
&lt;blockquote>
&lt;p>panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x38 pc=0x26df]&lt;/p>
&lt;/blockquote>
&lt;p>&lt;em>&amp;ldquo;An error is returned if caused by client policy (such as CheckRedirect), or if there was an HTTP protocol error. A non-2xx response doesn&amp;rsquo;t cause an error.&lt;/em>&lt;/p>
&lt;p>&lt;em>When err is nil, resp always contains a non-nil resp.Body.&amp;rdquo;&lt;/em>&lt;/p>
&lt;p>æ˜¯ http è¯·æ±‚çš„æ—¶å€™ï¼Œdefer res.Body.Close()å¼•èµ·çš„ï¼Œåº”è¯¥åœ¨ err æ£€æŸ¥ä¹‹åã€‚&lt;/p>
&lt;p>TheÂ &lt;code>defer&lt;/code>Â only defers the function call. The field and method are accessed immediately.&lt;/p></description></item><item><title>ä»¥å¤ªåŠå¼€å‘æ€»ç»“</title><link>https://example.com/p/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/</link><pubDate>Fri, 10 Aug 2018 18:57:09 +0000</pubDate><guid>https://example.com/p/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/</guid><description>&lt;p>æœ€è¿‘å› å…¬å¸é¡¹ç›®éœ€è¦ï¼Œåšä¸ºä¸€ä¸ªæ‰“æ‚å·¥ç¨‹å¸ˆï¼Œæ“èµ·é”®ç›˜å’Œç¬”è®°æœ¬å¼€å§‹äº†ä»¥å¤ªåŠçš„è¸©å‘ä¹‹æ—…ã€‚ä»¥å¤ªåŠçš„å¼€å‘æ¯”è¾ƒæ–°ï¼Œå˜åŒ–ä¹Ÿæ¯”è¾ƒå¤šï¼Œè¿˜å¥½æœ‰&lt;a class="link" href="https://github.com/cctanfujun" target="_blank" rel="noopener"
>@cctanfujun&lt;/a>çš„æ‰‹æŠŠæ‰‹å¸¦é¢†ä¸‹ï¼ŒåŠåªè„šè¸å…¥äº†ä»¥å¤ªåŠçš„å¼€å‘çš„å¤§é—¨ã€‚&lt;/p>
&lt;p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä¼šç®€å•ä»‹ç»ä¸€ä¸‹ä»¥å¤ªåŠçš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠæˆ‘ç°åœ¨ç”¨åˆ°çš„ä¸€äº›å·¥å…·ï¼Œè¿˜æœ‰å…·ä½“çš„ä¸€ä¸ªå¼€å‘æµç¨‹ã€‚å› ä¸ºæˆ‘è¿˜æ²¡æœ‰æ¥è§¦åˆ°å¦‚ä½•ä¸Šä¸»é“¾ï¼Œæ‰€ä»¥è¿™äº›éƒ½æ˜¯åŸºäºæµ‹è¯•é“¾è®²è§£ã€‚å¸Œæœ›èƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€äº›å¸®åŠ©ã€‚&lt;/p>
&lt;p>ä»€ä¹ˆæ˜¯åŒºå—é“¾&lt;/p>
&lt;p>ç›¸ä¿¡å¤§å®¶å¯¹åŒºå—é“¾éƒ½æœ‰è‡ªå·±çš„ç†è§£ï¼Œä¸ä»…ä»…æ˜¯äº’è”ç½‘å…¬å¸ï¼Œä¼ ç»Ÿä¼ä¸šä¹Ÿåœ¨â€œå¸æ”¹è½¬å‹â€ã€‚&lt;/p>
&lt;p>**ç®€è¨€ä¹‹ï¼ŒåŒºå—é“¾å°±æ˜¯æ•°æ®åº“ã€‚**å®ƒæ˜¯ç‰¹å®šæ•°æ®çš„æ•°æ®åº“ï¼Œé‡Œé¢çš„æ•°æ®ä¸æ–­å¢é•¿ï¼Œå…·æœ‰éå‡¡ç‰¹æ€§ï¼š&lt;/p>
&lt;ol>
&lt;li>ä¸€æ—¦æ•°æ®å­˜å‚¨äºæ•°æ®åº“ï¼Œæ°¸è¿œéƒ½æ— æ³•è¢«ä¿®æ”¹æˆ–åˆ é™¤ã€‚åŒºå—é“¾ä¸Šçš„æ¯ä¸ªè®°å½•ä¼šè¢«æ°¸ä¹…ä¿å­˜ä¸‹æ¥ã€‚&lt;/li>
&lt;li>æ²¡æœ‰å•ç‹¬çš„ä¸ªäººæˆ–ç»„ç»‡èƒ½ç»´æŠ¤è¯¥æ•°æ®åº“ã€‚å¿…é¡»è¦ä¸Šåƒä¸ªäººæ‰è¡Œï¼Œæ¯ä¸ªäººéƒ½æœ‰æ•°æ®åº“çš„å‰¯æœ¬ã€‚&lt;/li>
&lt;/ol>
&lt;p>ä»€ä¹ˆæ˜¯ä»¥å¤ªåŠï¼Ÿ&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>ä»¥å¤ªåŠ&lt;/strong>ï¼ˆè‹±è¯­ï¼šEthereumï¼‰æ˜¯ä¸€ä¸ª&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E5%BC%80%E6%BA%90" target="_blank" rel="noopener"
>å¼€æº&lt;/a>çš„æœ‰&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6" target="_blank" rel="noopener"
>æ™ºèƒ½åˆçº¦&lt;/a>åŠŸèƒ½çš„å…¬å…±&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E5%8C%BA%E5%9D%97%E9%93%BE" target="_blank" rel="noopener"
>åŒºå—é“¾&lt;/a>å¹³å°[&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E4%BB%A5%E5%A4%AA%E5%9D%8A#cite_note-Gray-2014-04-07-1" target="_blank" rel="noopener"
>1]&lt;/a>[&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E4%BB%A5%E5%A4%AA%E5%9D%8A#cite_note-Vigna-28-Oct-2015-2" target="_blank" rel="noopener"
>2]&lt;/a>ã€‚é€šè¿‡å…¶ä¸“ç”¨&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E5%8A%A0%E5%AF%86%E8%B4%A7%E5%B8%81" target="_blank" rel="noopener"
>åŠ å¯†è´§å¸&lt;/a>&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E4%BB%A5%E5%A4%AA%E5%B8%81" target="_blank" rel="noopener"
>ä»¥å¤ªå¸&lt;/a>ï¼ˆEtherï¼Œåˆç§°â€œä»¥å¤ªå¸â€ï¼‰æä¾›&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96" target="_blank" rel="noopener"
>å»ä¸­å¿ƒåŒ–&lt;/a>çš„&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E8%99%9A%E6%8B%9F%E6%9C%BA" target="_blank" rel="noopener"
>è™šæ‹Ÿæœº&lt;/a>ï¼ˆç§°ä¸ºâ€œä»¥å¤ªè™šæ‹Ÿæœºâ€Ethereum Virtual Machineï¼‰æ¥å¤„ç†&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E7%82%B9%E5%AF%B9%E7%82%B9" target="_blank" rel="noopener"
>ç‚¹å¯¹ç‚¹&lt;/a>åˆçº¦ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä¸ºä»€ä¹ˆé€‰æ‹©ä»¥å¤ªåŠï¼Ÿ&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ™ºèƒ½åˆçº¦&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä»£å¸&lt;/p>
&lt;/li>
&lt;li>
&lt;p>èµ„æ–™ç›¸å¯¹å®Œå–„ï¼Œç›¸å¯¹å®¹æ˜“å¼€å‘&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¤§ä½¬å¯¹ä»¥å¤ªåŠæ¯”è¾ƒç†Ÿæ‚‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¤§ä½¬å¯¹ä»¥å¤ªåŠæ¯”è¾ƒç†Ÿæ‚‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¤§ä½¬å¯¹ä»¥å¤ªåŠæ¯”è¾ƒç†Ÿæ‚‰&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œæœ‰ä¸€ä¸ªç»éªŒä¸°å¯Œçš„äººå¸¦é¢†ï¼Œåšä¸œè¥¿è‚¯å®šäº‹åŠåŠŸå€ã€‚&lt;/p>
&lt;p>è‡ªå·±åŠ¨æ‰‹å†™åŒºå—é“¾&lt;/p>
&lt;p>è¿™é‡Œæä¾›ä¸¤ä¸ªæ•™ç¨‹ï¼Œä¸€ä¸ªæ˜¯ä¹¦ï¼Œä¸€ä¸ªæ˜¯è§†é¢‘ã€‚å…¶ä¸­è§†é¢‘å’Œä¹¦æ˜¯å¯¹åº”çš„ï¼Œä¸æ¸…æ¥šæ˜¯ä¸æ˜¯åŒä¸€ä¸ªä½œè€…ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/liuchengxu/blockchain-tutorial" target="_blank" rel="noopener"
>Blockchain Tutorial&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://www.imooc.com/learn/1021?mc_marking=cfb7fb7f097d2fca6dabbe4c5e71cf77&amp;amp;mc_channel=syb38" target="_blank" rel="noopener"
>ç§æœ‰åŒºå—é“¾ï¼Œæˆ‘ä»¬ä¸€èµ· GO&lt;/a>&lt;/p>
&lt;p>ä»¥å¤ªåŠå¼€å‘&lt;/p>
&lt;p>ç”±äºæˆ‘æ˜¯ä¸“æ³¨äºåç«¯çš„å¼€å‘ï¼Œç°åœ¨çš„æŠ€æœ¯æ ˆæ˜¯&lt;/p>
&lt;ul>
&lt;li>node&lt;/li>
&lt;li>go&lt;/li>
&lt;/ul>
&lt;p>æ­£å¼è¿›å…¥ä»¥å¤ªåŠçš„å¼€å‘ã€‚è¿™æ˜¯æˆ‘è¿™æ®µæ—¶é—´æ¥è§¦åˆ°çš„ä¸€äº›èµ„æºï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>go-ethereumï¼šä¹Ÿå°±æ˜¯ gethï¼Œå®˜æ–¹çš„ go ç‰ˆæœ¬çš„å®¢æˆ·ç«¯&lt;/p>
&lt;/li>
&lt;li>
&lt;p>solidityï¼šæ™ºèƒ½åˆçº¦ç¼–ç¨‹è¯­è¨€&lt;/p>
&lt;/li>
&lt;li>
&lt;p>truffleï¼šæ™ºèƒ½åˆçº¦çš„ç¼–ç¨‹æ¡†æ¶ï¼ŒåŸºäº nodejs&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ganacheï¼šå¯åŠ¨äº†å¤šä¸ªèŠ‚ç‚¹æœ¬åœ°ç§é“¾&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Rinkebyï¼šä»¥å¤ªåŠæµ‹è¯•é“¾&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Etherscanï¼šä»¥å¤ªåŠåŒºå—é“¾æµè§ˆå™¨ï¼Œå¯ä»¥æŸ¥è¯¢äº¤æ˜“&lt;/p>
&lt;/li>
&lt;li>
&lt;p>MetaMaskï¼šchrome çš„é’±åŒ…æ’ä»¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>web3ï¼šå®˜æ–¹å°è£…çš„å¼€å‘ Dapp çš„åº“ï¼Œå¯ä»¥è°ƒç”¨åˆçº¦&lt;/p>
&lt;/li>
&lt;li>
&lt;p>truffle-hdwallet-providerï¼šweb3 çš„ç¡®å®šæ€§é’±åŒ… provider&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>æ¦‚å¿µ&lt;/p>
&lt;p>è´¦æˆ·å’Œé’±åŒ…&lt;/p>
&lt;p>åœ¨ä»¥å¤ªåŠä¸­ï¼Œä¸€ä¸ªè´¦å·å°±æ˜¯ä¸€ä¸ªåœ°å€ï¼ˆaddressï¼‰ï¼Œé‡Œé¢æœ‰ä½™é¢ã€‚&lt;/p>
&lt;p>é’±åŒ…æ˜¯ä¿ç®¡ç§é’¥çš„åœ°å€ï¼Œ ç§é’¥-&amp;gt;å…¬é’¥-&amp;gt;åœ°å€ è¿™æ˜¯ä¸€ä¸ªä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œé’±åŒ…é‡Œé¢å¯ä»¥æœ‰å¤šä¸ªè´¦æˆ·ã€‚&lt;/p>
&lt;p>ç§é’¥ä¸åŒçš„ç”Ÿæˆæ–¹æ³•ï¼Œå¯¹åº”ç€ä¸åŒçš„é’±åŒ…ç»“æ„ï¼Œå› æ­¤åˆ†ä¸ºäº†ç¡®å®šæ€§é’±åŒ…å’Œéç¡®å®šæ€§é’±åŒ…ã€‚&lt;/p>
&lt;ul>
&lt;li>æ¯”ç‰¹å¸æœ€æ—©çš„å®¢æˆ·ç«¯ï¼ˆSatoshi clientï¼‰å°±æ˜¯éç¡®å®šæ€§é’±åŒ…ï¼Œé’±åŒ…æ˜¯ä¸€å †éšæœºç”Ÿæˆçš„ç§é’¥çš„é›†åˆã€‚ å®¢æˆ·ç«¯ä¼šé¢„å…ˆç”Ÿæˆ 100 ä¸ªéšæœºç§é’¥ï¼Œå¹¶ä¸”æ¯ä¸ªç§é’¥åªä½¿ç”¨ä¸€æ¬¡ã€‚&lt;/li>
&lt;li>ç¡®å®šæ€§é’±åŒ…åˆ™ä¸éœ€è¦æ¯æ¬¡è½¬è´¦éƒ½è¦å¤‡ä»½ï¼Œç¡®å®šæ€§é’±åŒ…çš„ç§é’¥æ˜¯å¯¹ç§å­è¿›è¡Œå•å‘å“ˆå¸Œè¿ç®—ç”Ÿæˆçš„ï¼Œç§å­æ˜¯ä¸€ä¸²ç”±éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆçš„éšæœºæ•°ã€‚åœ¨ç¡®å®šæ€§é’±åŒ…ä¸­ï¼Œåªè¦æœ‰è¿™ä¸ªç§å­ï¼Œå°±å¯ä»¥æ‰¾å›æ‰€æœ‰ç§é’¥&lt;/li>
&lt;/ul>
&lt;p>HD é’±åŒ…æ˜¯ç›®å‰å¸¸ç”¨çš„ç¡®å®šæ€§é’±åŒ… ï¼Œè¯´åˆ° HD é’±åŒ…ï¼Œå¤§å®¶å¯èƒ½ç¬¬ä¸€ååº”ä¼šæƒ³åˆ°ç¡¬ä»¶é’±åŒ… ï¼ˆHardware Walletï¼‰ï¼Œå…¶å®è¿™é‡Œçš„ HD æ˜¯ Hierarchical Deterministicï¼ˆåˆ†å±‚ç¡®å®šæ€§ï¼‰çš„ç¼©å†™ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ‰€è°“åˆ†å±‚ï¼Œå°±æ˜¯ä¸€ä¸ªå¤§å…¬å¸å¯ä»¥ä¸ºæ¯ä¸ªå­éƒ¨é—¨åˆ†åˆ«ç”Ÿæˆä¸åŒçš„ç§é’¥ï¼Œå­éƒ¨é—¨è¿˜å¯ä»¥å†ç®¡ç†å­å­éƒ¨é—¨çš„ç§é’¥ï¼Œæ¯ä¸ªéƒ¨é—¨å¯ä»¥çœ‹åˆ°æ‰€æœ‰å­éƒ¨é—¨é‡Œçš„å¸ï¼Œä¹Ÿå¯ä»¥èŠ±è¿™é‡Œé¢çš„å¸ã€‚ä¹Ÿå¯ä»¥åªç»™ä¼šè®¡äººå‘˜æŸä¸ªå±‚çº§çš„å…¬é’¥ï¼Œè®©ä»–å¯ä»¥çœ‹è§è¿™ä¸ªéƒ¨é—¨åŠå­éƒ¨é—¨çš„æ”¶æ”¯è®°å½•ï¼Œä½†ä¸èƒ½èŠ±é‡Œé¢çš„é’±ï¼Œä½¿å¾—è´¢åŠ¡ç®¡ç†æ›´æ–¹ä¾¿äº†ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ç”Ÿæˆè§„åˆ™æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>ç”Ÿæˆä¸€ä¸ªåŠ©è®°è¯ï¼ˆå‚è§ BIP39ï¼‰&lt;/li>
&lt;li>è¯¥åŠ©è®°è¯ä½¿ç”¨ PBKDF2 è½¬åŒ–ä¸ºç§å­ï¼ˆå‚è§ BIP39ï¼‰&lt;/li>
&lt;li>ç§å­ç”¨äºä½¿ç”¨ HMAC-SHA512 ç”Ÿæˆæ ¹ç§é’¥ï¼ˆå‚è§ BIP32ï¼‰&lt;/li>
&lt;li>ä»è¯¥æ ¹ç§é’¥ï¼Œå¯¼å‡ºå­ç§é’¥ï¼ˆå‚è§ BIP32ï¼‰ï¼Œå…¶ä¸­èŠ‚ç‚¹å¸ƒå±€ç”± BIP44 è®¾ç½®&lt;/li>
&lt;/ol>
&lt;p>DAPP&lt;/p>
&lt;p>ä»¥å¤ªåŠä¸å…¶ä»–åŠ å¯†è´§å¸çš„ä¸»è¦ä¸åŒåœ¨äºï¼Œä»¥å¤ªåŠä¸æ˜¯å•çº¯çš„è´§å¸ï¼Œè€Œæ˜¯ä¸€ä¸ªç¯å¢ƒ/å¹³å°ã€‚åœ¨è¿™ä¸ªå¹³å°ä¸Šï¼Œä»»ä½•äººéƒ½å¯ä»¥åˆ©ç”¨åŒºå—é“¾çš„æŠ€æœ¯ï¼Œé€šè¿‡æ™ºèƒ½åˆçº¦æ¥æ„å»ºè‡ªå·±çš„é¡¹ç›®å’Œ DAPPSï¼ˆå»ä¸­å¿ƒåŒ–åº”ç”¨ï¼‰ã€‚DAPPS å‘å¸ƒçš„æ–¹å¼é€šå¸¸æ˜¯é‡‡ç”¨è¢«ç§°ä¸ºâ€œICOâ€çš„ä¼—ç­¹æ–¹å¼ã€‚ç®€å•æ¥è¯´ï¼Œä½ éœ€è¦ç”¨ä½ çš„ä»¥å¤ªæ¥è´­ä¹°ç›¸åº” DAPP çš„ä¸€äº› tokensã€‚&lt;/p>
&lt;p>ä»£å¸&lt;/p>
&lt;p>ä¸ºä»€ä¹ˆä¸èƒ½åœ¨è¿™äº› DAPPS ä¸­ç›´æ¥ä½¿ç”¨ä»¥å¤ªå®Œæˆäº¤æ˜“ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ç»™ DAPPS åˆ›é€ ä¸€ç§åŸç”Ÿçš„è´§å¸ï¼Ÿ&lt;/p>
&lt;p>å› ä¸ºå³ä½¿åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨ä½¿ç”¨æŸç§å½¢å¼çš„ Token æ¥ä»£æ›¿ç°é‡‘ã€‚æ¯”å¦‚ï¼šåœ¨æ¸¸ä¹åœºé‡Œï¼Œä½ å…ˆç”¨ç°é‡‘å…‘æ¢ä»£å¸ï¼Œç„¶åç”¨ä»£å¸æ¥æ”¯ä»˜å„ç§æœåŠ¡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç°é‡‘å°±æ˜¯ä»¥å¤ªï¼Œä»£å¸å°±æ˜¯ tokenã€‚&lt;/p>
&lt;p>ERC20ï¼šä»¥å¤ªåŠ token æ ‡å‡†&lt;/p>
&lt;p>ç®€å•æ¥è¯´ï¼ŒERC20 æ˜¯å¼€å‘è€…åœ¨è‡ªå·±çš„ tokens ä¸­å¿…é¡»é‡‡ç”¨çš„ä¸€å¥—å…·ä½“çš„å…¬å¼/æ–¹æ³•ï¼Œä»è€Œç¡®ä¿è¯¥ token ä¸ ERC20 å…¼å®¹ã€‚åœ¨åˆçº¦æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸‹é¢çš„å››ä¸ªè¡Œä¸ºæ˜¯ ERC20 tokens æ‰€éœ€è¦å®Œæˆçš„ï¼š&lt;/p>
&lt;ul>
&lt;li>è·å¾— Token ä¾›ç»™æ€»é‡.&lt;/li>
&lt;li>è·å¾—è´¦æˆ·ä½™é¢.&lt;/li>
&lt;li>ä»ä¸€æ–¹å‘å¦ä¸€æ–¹è½¬ç§» Token.&lt;/li>
&lt;li>è®¤å¯ Token ä½œä¸ºè´§å¸æ€§èµ„äº§çš„ä½¿ç”¨.&lt;/li>
&lt;/ul>
&lt;p>å¤§ä½¬è¯´ï¼šä»£å¸å…¶å®å°±æ˜¯æ™ºèƒ½åˆçº¦ï¼Œè€Œè¿™ä¸ªåˆçº¦æ˜¯å‘ç”Ÿäº† 0 ä¸ªä»¥å¤ªçš„è½¬è´¦ã€‚&lt;/p>
&lt;p>Gas å’ŒæŒ–çŸ¿&lt;/p>
&lt;p>ä¸å°‘å°å“¥å“¥æˆ–å°å§å§ä¼šè®¤ä¸ºæŒ–çŸ¿å°±æ˜¯æŒ–ä»¥å¤ªå¸ï¼Œå…¶å®ä»£å¸ä¸ç”¨æŒ–çš„ï¼Œå½“ä½ æŒ–åˆ°äº†åŒºå—ï¼Œä»£å¸æ˜¯ç»™ä½ çš„å¥–åŠ±ã€‚å› ä¸ºä»»ä½•ä¸€ç¬”äº¤æ˜“éƒ½éœ€è¦è®°å½•ï¼Œä¸€ä¸ªåŒºå—çš„å¤§å°ä¹Ÿå°±å‡  Mï¼Œå­˜å‚¨ä¸äº†é‚£ä¹ˆå¤šäº¤æ˜“ä¿¡æ¯ï¼Œæ‰€ä»¥è¦æŒç»­æŒ–åŒºå—æ¥è®°å½•äº¤æ˜“ï¼ŒåŒæ—¶åªè¦æ˜¯ä½ å‘èµ·äº†äº¤æ˜“ï¼Œå°±å¾—ä»˜æ‰‹ç»­è´¹ï¼Œè¿™äº›æ‰‹ç»­è´¹ä¹Ÿæˆä¸º Gasï¼Œä¼šæŒ‰ç…§ä¸€å®šçš„ç®—æ³•å¥–åŠ±ç»™æŒ–å‡ºåŒºå—çš„äººã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥ä¼šè®²ä¸€ä¸‹ï¼Œå¹³æ—¶å¼€å‘ä¸­å¦‚ä½•åˆ›å»ºé’±åŒ…ï¼Œå¦‚ä½•è½¬è´¦ï¼Œå¦‚ä½•è‡ªå·±å‘ä»£å¸ï¼Œå¦‚ä½•éƒ¨ç½²åˆçº¦å¹¶è°ƒç”¨ã€‚&lt;/p>
&lt;p>ç¯å¢ƒå‡†å¤‡&lt;/p>
&lt;ul>
&lt;li>å®‰è£… Ganache å¹¶å¯åŠ¨&lt;/li>
&lt;li>å®‰è£… truffle æ¡†æ¶&lt;/li>
&lt;/ul>
&lt;p>åˆ›å»ºé’±åŒ…&lt;/p>
&lt;p>golang&lt;/p>
&lt;p>ä¾èµ–&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">github.com/ethereum/go-ethereum
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é¦–å…ˆè¦è¿æ¥åˆ°æµ‹è¯•é“¾ï¼Œæµ‹è¯•é“¾å¯ä»¥æ˜¯æœ¬åœ°çš„ä¹Ÿå¯ä»¥æ˜¯å…¬ç½‘çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func connectRPC() (*ethclient.Client, error) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // è¿æ¥æµ‹è¯•é“¾çš„èŠ‚ç‚¹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //rpcClient, err := rpc.Dial(&amp;#34;https://rinkeby.infura.io/v3/6c81fb1b66804f0698d49f2ec242afc9&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rpcClient, err := rpc.Dial(&amp;#34;http://127.0.0.1:7545&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return nil, err
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> conn := ethclient.NewClient(rpcClient)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return conn, nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸€èˆ¬éƒ½é€‰æ‹©ä»¥ keystore çš„å½¢å¼åˆ›å»ºè´¦æˆ·&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func CreateWallet() (key, addr string) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ks := keystore.NewKeyStore(&amp;#34;~/Documents/github/gowork/src/geth-demo/&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> keystore.StandardScryptN, keystore.StandardScryptP)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> account, _ := ks.NewAccount(&amp;#34;password&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key_json, err := ks.Export(account, &amp;#34;password&amp;#34;, &amp;#34;password&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(&amp;#34;å¯¼å‡ºè´¦æˆ·é”™è¯¯: &amp;#34;, err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> panic(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key = string(key_json)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> addr = account.Address.Hex()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶å¦ä¸€ç§åˆ›å»ºè´¦æˆ·çš„æ–¹å¼æ˜¯ç”¨ç§é’¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func CreateWallet() (string, error) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key, err := crypto.GenerateKey()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return &amp;#34;&amp;#34;, nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address := crypto.PubkeyToAddress(key.PublicKey).Hex()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(&amp;#34;address: &amp;#34;, address)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> privateKey := hex.EncodeToString(key.D.Bytes())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(&amp;#34;privateKey: &amp;#34;, privateKey)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return address, nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Node&lt;/p>
&lt;p>node ä¸€èˆ¬ä½¿ç”¨ web3ã€‚åˆ›å»º web3 å¯¹è±¡çš„æ—¶å€™è¦ä½¿ç”¨ä¸€ä¸ª providerï¼Œè¿™ä¸ª provider ç”¨æ¥è¿æ¥åˆ°æµ‹è¯•é“¾ï¼Œå¯ä»¥æ˜¯é’±åŒ…çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª HttpProviderã€‚&lt;/p>
&lt;p>åˆ›å»º web3&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const web3 = new Web3(new Web3.providers.HttpProvider(&amp;#34;http://localhost:7545&amp;#34;));
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ä½¿ç”¨&lt;code>truffle-hdwallet-provider&lt;/code>æ¥åˆ›å»ºï¼Œä½¿ç”¨è¿™ä¸ªçš„å‰ææ˜¯ï¼Œè‡ªå·±å·²ç»åˆ›å»ºäº†ä¸€ä¸ªé’±åŒ…ï¼Œå¹¶ä¸”è¿™ä¸ªé’±åŒ…æ˜¯ HD çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const Web3 = require(&amp;#39;web3&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const HDWalletProvider = require(&amp;#39;truffle-hdwallet-provider&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const provider = new HDWalletProvider(åŠ©è®°è¯, æµ‹è¯•é“¾url);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const web3 = new Web3(provider);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºè´¦æˆ·&lt;/p></description></item><item><title>ä»¥å¤ªåŠ</title><link>https://example.com/p/%E4%BB%A5%E5%A4%AA%E5%9D%8A/</link><pubDate>Tue, 07 Aug 2018 20:09:26 +0000</pubDate><guid>https://example.com/p/%E4%BB%A5%E5%A4%AA%E5%9D%8A/</guid><description>&lt;p>å‚ä¸äº†å…¬å¸çš„ä¸€ä¸ªé¡¹ç›®ï¼Œä¸Šäº†ä»¥å¤ªåŠï¼Œè¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹è¸©å‘ã€‚&lt;/p>
&lt;p>é¦–å…ˆå…ˆæŠŠ go çš„ä¾èµ–ä¸‹è½½ä¸‹æ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">go get -u -v github.com/ethereum/go-ethereum
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ‰æ—¶å€™ä¸‹è½½çš„å¾ˆæ…¢ï¼Œå¯ä»¥ä» github ä¸Šæ‹‰ä¸‹æ¥ä»£ç ã€‚&lt;/p>
&lt;h2 id="è´¦æˆ·">è´¦æˆ·&lt;/h2>
&lt;p>ä»¥å¤ªåŠçš„åœ°å€åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿå¯ä»¥åˆ›å»ºåˆ°ã€‚&lt;/p>
&lt;p>åˆ›å»ºè´¦æˆ·æœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p>
&lt;h4 id="ä»¥å…¬é’¥å’Œç§é’¥çš„å½¢å¼åˆ›å»º">ä»¥å…¬é’¥å’Œç§é’¥çš„å½¢å¼åˆ›å»º&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func CreateAccount() (string, error) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key, err := crypto.GenerateKey()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return &amp;#34;&amp;#34;, nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address := crypto.PubkeyToAddress(key.PublicKey).Hex()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(&amp;#34;address: &amp;#34;, address)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> privateKey := hex.EncodeToString(key.D.Bytes())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(&amp;#34;privateKey: &amp;#34;, privateKey)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return address, nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨çš„æ¯”è¾ƒå°‘ã€‚&lt;/p>
&lt;h4 id="ä»¥-keystore-çš„å½¢å¼åˆ›å»º">ä»¥ keystore çš„å½¢å¼åˆ›å»º&lt;/h4>
&lt;p>keystore ä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;address&amp;#34;: &amp;#34;d93688757810e644f0b9c162102d9c598813f0dd&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;crypto&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cipher&amp;#34;: &amp;#34;aes-128-ctr&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;ciphertext&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;71ae7c8144729b2f9e0c51d95c6dfb73e63f14b5332b3594e8a1f325237c27ed&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cipherparams&amp;#34;: { &amp;#34;iv&amp;#34;: &amp;#34;620c73001081c014a862ce80003a4648&amp;#34; },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;kdf&amp;#34;: &amp;#34;scrypt&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;kdfparams&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;dklen&amp;#34;: 32,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;n&amp;#34;: 262144,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;p&amp;#34;: 1,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;r&amp;#34;: 8,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;salt&amp;#34;: &amp;#34;bd272aa37271ef9913eb095a4d143be238e348c48fce6459896e1bb1b0236741&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;mac&amp;#34;: &amp;#34;2b3ade771645090a2b34c214906c592a1300d529e459faefb1421ba496b6fe1d&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;id&amp;#34;: &amp;#34;e4dd5384-56a8-4ec7-b6e0-492dcd3742e9&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;version&amp;#34;: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šè®©ä½ è¾“ä¸€ä¸ªå¯†ç ï¼Œè¿™ä¸ªæ–‡ä»¶åŠ å¯†ç å…¶å®å°±æ˜¯ä¸€ä¸ªç§é’¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// ç†è®ºä¸Šæ¥è®²ï¼Œè¿™ä¸ªå‡½æ•°åº”è¯¥åªè¢«åˆ›å»ºä¸€æ¬¡å³å¯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// åˆ›å»ºä¸€ä¸ªè´¦æˆ·
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func CreateWallet() (key, addr string) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ks := keystore.NewKeyStore(&amp;#34;/Users/zhuzhenfeng/Documents/github/gowork/src/geth-demo/&amp;#34;, keystore.StandardScryptN, keystore.StandardScryptP)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> account, _ := ks.NewAccount(&amp;#34;password&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key_json, err := ks.Export(account, &amp;#34;password&amp;#34;, &amp;#34;password&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(&amp;#34;å¯¼å‡ºè´¦æˆ·é”™è¯¯: &amp;#34;, err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> panic(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key = string(key_json)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> addr = account.Address.Hex()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ª key å’Œ addressï¼Œ&amp;ldquo;password&amp;quot;æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å¯†ç ã€‚&lt;/p>
&lt;h2 id="ç§é“¾">ç§é“¾&lt;/h2>
&lt;p>ä¸€ç§æ–¹å¼æ˜¯è¿æ¥äº’è”ç½‘ä¸Šçš„æµ‹è¯•é“¾ï¼Œä¸€ç§æ˜¯è¿æ¥æœ¬åœ°çš„ç§é“¾ã€‚&lt;/p>
&lt;h4 id="æœ¬åœ°ç§é“¾çš„å¯åŠ¨">æœ¬åœ°ç§é“¾çš„å¯åŠ¨&lt;/h4>
&lt;p>å¯åŠ¨æœ¬åœ°ç§é“¾æœ€ç®€å•çš„ä¸€ç§æ–¹å¼æ˜¯ç”¨ Truffle æä¾›çš„ Ganacheï¼Œåªè¦å°†å®ƒä¸‹è½½ä¸‹æ¥ï¼Œå¯åŠ¨èµ·æ¥å³å¯ã€‚&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/0069RVTdgy1fu1f8kub6vj30xc0m8aet.jpg"
loading="lazy"
alt="image-20180807202239542"
>&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°å·²ç»å¯åŠ¨äº†ï¼Œè¿æ¥çš„åœ°å€æ˜¯:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">http://127.0.0.1:7545
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="äº’è”ç½‘ä¸Šçš„æµ‹è¯•é“¾åœ°å€">äº’è”ç½‘ä¸Šçš„æµ‹è¯•é“¾åœ°å€&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">https://rinkeby.infura.io/v3/6c81fb1b66804f0698d49f2ec242afc9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="è¿æ¥">è¿æ¥&lt;/h4>
&lt;p>æˆ‘ä»¬ç”¨ geth çš„ rpc è¿æ¥ä¸Šé¢çš„ç§é“¾åœ°å€å³å¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func connectRPC() (*ethclient.Client, error) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // è¿æ¥æµ‹è¯•é“¾çš„èŠ‚ç‚¹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //rpcClient, err := rpc.Dial(&amp;#34;https://rinkeby.infura.io/v3/6c81fb1b66804f0698d49f2ec242afc9&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rpcClient, err := rpc.Dial(&amp;#34;http://127.0.0.1:7545&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return nil, err
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> conn := ethclient.NewClient(rpcClient)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return conn, nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å…¶ä»–æ“ä½œ">å…¶ä»–æ“ä½œ&lt;/h2>
&lt;p>åœ¨ä¸Šä¸€æ­¥ä¸­è¿æ¥ rpc ä¸­ï¼Œæ‹¿åˆ°äº† clientã€‚ç”¨è¿™ä¸ª client å°±å¯ä»¥åšå¾ˆå¤šäº‹å„¿ï¼š&lt;/p>
&lt;h3 id="è·å–ä½™é¢">è·å–ä½™é¢&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func GetBalance(address string) (float64, error) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client, err := connectRPC()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(&amp;#34;err: &amp;#34;, err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> panic(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> balance, err := client.BalanceAt(context.TODO(), common.HexToAddress(address), nil)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(balance)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return 0, err
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> balanceV := float64(balance.Int64()) * math.Pow(10, -18)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return balanceV, nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä»£å¸è½¬è´¦">ä»£å¸è½¬è´¦&lt;/h3>
&lt;p>è¦ç”Ÿæˆä»£å¸ï¼Œéœ€è¦å†™ä¸€ä¸ª token çš„åˆçº¦ã€‚å¯ä»¥ç”¨è¿™ä¸€ä¸ªæœ€ç®€å•çš„ token.abiã€‚å¤æ‚ä¸€èˆ¬å¯ä»¥ç”¨ truffle æ¡†æ¶æ¥ç¼–å†™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">// token.abi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;anonymous&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;inputs&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;indexed&amp;#34;: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;from&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;address&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;indexed&amp;#34;: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;to&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;address&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;indexed&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;value&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;uint256&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;Transfer&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;event&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;constant&amp;#34;: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;inputs&amp;#34;: [],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;totalSupply&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;outputs&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;uint256&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;payable&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;stateMutability&amp;#34;: &amp;#34;view&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;function&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;constant&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;inputs&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;_to&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;address&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;_value&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;uint256&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;transfer&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;outputs&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;bool&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;payable&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;stateMutability&amp;#34;: &amp;#34;nonpayable&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;function&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;constant&amp;#34;: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;inputs&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;_owner&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;address&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;balanceOf&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;outputs&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;uint256&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ],
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;payable&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;stateMutability&amp;#34;: &amp;#34;view&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;function&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åå°†å…¶è½¬æ¢ä¸º go æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">abigen --abi token.abi --pkg main --type Token --out token.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”Ÿæˆçš„ token.go æ–‡ä»¶ï¼Œæ‰æ˜¯å¯ä»¥è¢«æ“ä½œçš„æ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func TransferToken() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key, to_address := CreateWallet()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client, err := connectRPC()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> panic(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> auth, err := bind.NewTransactor(strings.NewReader(key), &amp;#34;password&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(&amp;#34;è¯»å–keystoreå¤±è´¥&amp;#34;, err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> panic(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> token, err := cont.NewToken(common.HexToAddress(&amp;#34;0x75a26aaaecda412bd914e8fbfaed586a467fa8b5&amp;#34;), client)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(&amp;#34;è·å–tokenå¤±è´¥&amp;#34;, err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> panic(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> balance, err := token.BalanceOf(nil, common.HexToAddress(to_address))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatalln(&amp;#34;token balance of&amp;#34;, err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(&amp;#34;to address balance: &amp;#34;, balance)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> amount := big.NewFloat(10.00)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //è¿™æ˜¯å¤„ç†ä½æ•°çš„ä»£ç æ®µ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tenDecimal := big.NewFloat(math.Pow(10, 18))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> convertAmount, _ := new(big.Float).Mul(tenDecimal, amount).Int(&amp;amp;big.Int{})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tx, err := token.Transfer(auth, common.HexToAddress(to_address), convertAmount)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if nil != err {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt.Printf(&amp;#34;err: %v \n&amp;#34;, err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fmt.Printf(&amp;#34;result: %v\n&amp;#34;, tx)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>ä¸çŸ¥ä¸ºä½•ä¼šå‡ºç° failed to estimate gas needed çš„æƒ…å†µ&lt;/p>
&lt;/blockquote>
&lt;p>ä»£å¸è½¬è´¦çš„ä»£ç å°±å¦‚ä¸Šæ‰€ç¤ºï¼Œæœ‰äº†è¿™ä¸ªï¼Œå…¶å®æˆ‘ä»¬å°±å¯ä»¥å‘å¸äº†ã€‚&lt;/p>
&lt;p>è‡³äºä¸Šé¢çš„ä¸€å¥ä»£ç ä¸­çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">token, err := cont.NewToken(common.HexToAddress(&amp;#34;0x75a26aaaecda412bd914e8fbfaed586a467fa8b5&amp;#34;), client)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ª&lt;code>0x75a26aaaecda412bd914e8fbfaed586a467fa8b5&lt;/code>åœ°å€ï¼Œå°±æ˜¯åˆçº¦çš„åœ°å€ã€‚å…³äºåˆçº¦çš„éƒ¨ç½²ï¼Œå…¶å®å¦‚æœæ˜¯åœ¨æœ¬åœ°è°ƒè¯•çš„è¯ï¼Œå¯ä»¥ç”¨ truffleã€‚truffle åœ¨éƒ¨ç½²çš„æ—¶å€™ï¼Œä¼šå°†åˆçº¦åœ°å€è¿”å›ã€‚&lt;/p>
&lt;p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://ws4.sinaimg.cn/large/0069RVTdgy1fu1f8bx1xvj30xc0m8mzv.jpg"
loading="lazy"
alt="image-20180807203645670"
>&lt;/p>
&lt;p>å…³äºå¦‚ä½•åœ¨ä»¥å¤ªåŠä¸Šå†™ä»£å¸çš„åˆçº¦ï¼Œä¸‹æ¬¡å†å†™ä¸€ä¸‹ç¬”è®°ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>å¯ä»¥ç”¨ web3 å»åšè¿™äº›äº‹å„¿ï¼Œä¼šæ›´ç®€å•ä¸€äº›ã€‚å› ä¸ºæœåŠ¡ç«¯é€‰å‹ç”¨çš„ goï¼Œæ‰€ä»¥å°±ç”¨ go è¸©äº†ä¸€äº›å‘ã€‚&lt;/p></description></item><item><title>contract</title><link>https://example.com/p/contract/</link><pubDate>Fri, 03 Aug 2018 14:32:03 +0000</pubDate><guid>https://example.com/p/contract/</guid><description>&lt;h2 id="ç±»å‹">ç±»å‹&lt;/h2>
&lt;p>Solidity æ˜¯é™æ€ç±»å‹çš„è¯­è¨€ã€‚&lt;/p>
&lt;h3 id="å€¼ç±»å‹">å€¼ç±»å‹&lt;/h3>
&lt;ul>
&lt;li>bool&lt;/li>
&lt;li>int/uint&lt;/li>
&lt;li>fixed/unfixed&lt;/li>
&lt;li>address
&lt;ul>
&lt;li>balance å’Œ transfer&lt;/li>
&lt;li>send&lt;/li>
&lt;li>call, callcode å’Œ delegatecall&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>byte&lt;/li>
&lt;li>bytes å’Œ string&lt;/li>
&lt;li>åå…­è¿›åˆ¶ hex&amp;quot;0012&amp;quot;&lt;/li>
&lt;li>enum&lt;/li>
&lt;li>function&lt;/li>
&lt;/ul>
&lt;h3 id="å¼•ç”¨ç±»å‹">å¼•ç”¨ç±»å‹&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>æ•°ç»„&lt;/p>
&lt;p>uint[]&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç»“æ„ä½“&lt;/p>
&lt;p>struct&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Map&lt;/p>
&lt;p>mapping(key =&amp;gt; value)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="å•å…ƒå’Œå…¨å±€å˜é‡">å•å…ƒå’Œå…¨å±€å˜é‡&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>ä»¥å¤ªå¸çš„å•ä½&lt;/p>
&lt;p>åœ¨æ•°å­—åé¢åŠ ä¸ŠÂ &lt;code>wei&lt;/code>ã€Â &lt;code>finney&lt;/code>ã€Â &lt;code>szabo&lt;/code>Â æˆ–Â &lt;code>ether&lt;/code>ã€‚é»˜è®¤æ˜¯ wei&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ—¶é—´å•ä½&lt;/p>
&lt;p>æ•°å­—åé¢å¸¦æœ‰Â &lt;code>seconds&lt;/code>ã€Â &lt;code>minutes&lt;/code>ã€Â &lt;code>hours&lt;/code>ã€Â &lt;code>days&lt;/code>ã€Â &lt;code>weeks&lt;/code>Â å’ŒÂ &lt;code>years&lt;/code>ã€‚é»˜è®¤æ˜¯ç§’ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åŒºå—å’Œäº¤æ˜“&lt;/p>
&lt;ul>
&lt;li>&lt;code>block.blockhash(uintÂ blockNumber)Â returnsÂ (bytes32)&lt;/code>ï¼šæŒ‡å®šåŒºå—çš„åŒºå—å“ˆå¸Œã€‚&lt;/li>
&lt;li>&lt;code>block.coinbase&lt;/code> (&lt;code>address&lt;/code>): æŒ–å‡ºå½“å‰åŒºå—çš„çŸ¿å·¥åœ°å€&lt;/li>
&lt;li>&lt;code>block.difficulty&lt;/code> (&lt;code>uint&lt;/code>): å½“å‰åŒºå—éš¾åº¦&lt;/li>
&lt;li>&lt;code>block.gaslimit&lt;/code> (&lt;code>uint&lt;/code>): å½“å‰åŒºå— gas é™é¢&lt;/li>
&lt;li>&lt;code>block.number&lt;/code> (&lt;code>uint&lt;/code>): å½“å‰åŒºå—å·&lt;/li>
&lt;li>&lt;code>block.timestamp&lt;/code> (&lt;code>uint&lt;/code>): è‡ª unix epoch èµ·å§‹å½“å‰åŒºå—ä»¥ç§’è®¡çš„æ—¶é—´æˆ³&lt;/li>
&lt;li>&lt;code>gasleft() returns (uint256)&lt;/code>ï¼šå‰©ä½™çš„ gas&lt;/li>
&lt;li>&lt;code>msg.data&lt;/code> (&lt;code>bytes&lt;/code>): å®Œæ•´çš„ calldata&lt;/li>
&lt;li>&lt;code>msg.gas&lt;/code> (&lt;code>uint&lt;/code>): å‰©ä½™ gas - è‡ª 0.4.21 ç‰ˆæœ¬å¼€å§‹å·²ç»ä¸æ¨èä½¿ç”¨ï¼Œç”± &lt;code>gesleft()&lt;/code> ä»£æ›¿&lt;/li>
&lt;li>&lt;code>msg.sender&lt;/code> (&lt;code>address&lt;/code>): æ¶ˆæ¯å‘é€è€…ï¼ˆå½“å‰è°ƒç”¨ï¼‰&lt;/li>
&lt;li>&lt;code>msg.sig&lt;/code> (&lt;code>bytes4&lt;/code>): calldata çš„å‰ 4 å­—èŠ‚ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°æ ‡è¯†ç¬¦ï¼‰&lt;/li>
&lt;li>&lt;code>msg.value&lt;/code> (&lt;code>uint&lt;/code>): éšæ¶ˆæ¯å‘é€çš„ wei çš„æ•°é‡&lt;/li>
&lt;li>&lt;code>now&lt;/code> (&lt;code>uint&lt;/code>): ç›®å‰åŒºå—æ—¶é—´æˆ³ï¼ˆ&lt;code>block.timestamp&lt;/code>ï¼‰&lt;/li>
&lt;li>&lt;code>tx.gasprice&lt;/code> (&lt;code>uint&lt;/code>): äº¤æ˜“çš„ gas ä»·æ ¼&lt;/li>
&lt;li>&lt;code>tx.origin&lt;/code> (&lt;code>address&lt;/code>): äº¤æ˜“å‘èµ·è€…ï¼ˆå®Œå…¨çš„è°ƒç”¨é“¾ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>åœ°å€ç›¸å…³&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>&amp;lt;address&amp;gt;.balance&lt;/code> (&lt;code>uint256&lt;/code>):&lt;/p>
&lt;p>ä»¥ Wei ä¸ºå•ä½çš„ &lt;a class="link" href="http://solidity-cn.readthedocs.io/zh/develop/types.html#address" target="_blank" rel="noopener"
>åœ°å€ç±»å‹&lt;/a> çš„ä½™é¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>&amp;lt;address&amp;gt;.transfer(uint256 amount)&lt;/code>:&lt;/p>
&lt;p>å‘ &lt;a class="link" href="http://solidity-cn.readthedocs.io/zh/develop/types.html#address" target="_blank" rel="noopener"
>åœ°å€ç±»å‹&lt;/a> å‘é€æ•°é‡ä¸º amount çš„ Weiï¼Œå¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œå‘é€ 2300 gas çš„çŸ¿å·¥è´¹ï¼Œä¸å¯è°ƒèŠ‚ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>&amp;lt;address&amp;gt;.send(uint256 amount) returns (bool)&lt;/code>:&lt;/p>
&lt;p>å‘ &lt;a class="link" href="http://solidity-cn.readthedocs.io/zh/develop/types.html#address" target="_blank" rel="noopener"
>åœ°å€ç±»å‹&lt;/a> å‘é€æ•°é‡ä¸º amount çš„ Weiï¼Œå¤±è´¥æ—¶è¿”å› &lt;code>false&lt;/code>ï¼Œå‘é€ 2300 gas çš„çŸ¿å·¥è´¹ç”¨ï¼Œä¸å¯è°ƒèŠ‚ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>&amp;lt;address&amp;gt;.call(...) returns (bool)&lt;/code>:&lt;/p>
&lt;p>å‘å‡ºä½çº§å‡½æ•° &lt;code>CALL&lt;/code>ï¼Œå¤±è´¥æ—¶è¿”å› &lt;code>false&lt;/code>ï¼Œå‘é€æ‰€æœ‰å¯ç”¨ gasï¼Œå¯è°ƒèŠ‚ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>&amp;lt;address&amp;gt;.callcode(...) returns (bool)&lt;/code>ï¼š&lt;/p>
&lt;p>å‘å‡ºä½çº§å‡½æ•° &lt;code>CALLCODE&lt;/code>ï¼Œå¤±è´¥æ—¶è¿”å› &lt;code>false&lt;/code>ï¼Œå‘é€æ‰€æœ‰å¯ç”¨ gasï¼Œå¯è°ƒèŠ‚ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>&amp;lt;address&amp;gt;.delegatecall(...) returns (bool)&lt;/code>:&lt;/p>
&lt;p>å‘å‡ºä½çº§å‡½æ•° &lt;code>DELEGATECALL&lt;/code>ï¼Œå¤±è´¥æ—¶è¿”å› &lt;code>false&lt;/code>ï¼Œå‘é€æ‰€æœ‰å¯ç”¨ gasï¼Œå¯è°ƒèŠ‚ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>åˆçº¦ç›¸å…³&lt;/p>
&lt;p>&lt;code>this&lt;/code> (current contract&amp;rsquo;s type):&lt;/p>
&lt;p>å½“å‰åˆçº¦ï¼Œå¯ä»¥æ˜ç¡®è½¬æ¢ä¸º &lt;a class="link" href="http://solidity-cn.readthedocs.io/zh/develop/types.html#address" target="_blank" rel="noopener"
>åœ°å€ç±»å‹&lt;/a>ã€‚&lt;/p>
&lt;p>&lt;code>selfdestruct(address recipient)&lt;/code>:&lt;/p>
&lt;p>é”€æ¯åˆçº¦ï¼Œå¹¶æŠŠä½™é¢å‘é€åˆ°æŒ‡å®š &lt;a class="link" href="http://solidity-cn.readthedocs.io/zh/develop/types.html#address" target="_blank" rel="noopener"
>åœ°å€ç±»å‹&lt;/a>ã€‚&lt;/p>
&lt;p>&lt;code>suicide(address recipient)&lt;/code>:&lt;/p>
&lt;p>ä¸ selfdestruct ç­‰ä»·ï¼Œä½†å·²ä¸æ¨èä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="æ§åˆ¶ç»“æ„">æ§åˆ¶ç»“æ„&lt;/h2>
&lt;p>è¾“å…¥å‚æ•°å’Œæˆ‘ä»¬å¸¸è§çš„å‡½æ•°çš„å‚æ•°ç›¸åŒ&lt;/p>
&lt;p>è¾“å‡ºå‚æ•°å¿…é¡»è¦åœ¨ returns åé¢ï¼Œå’Œ go çš„ç±»ä¼¼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">function arithmetics(uint _a, uint _b) returns (uint o_sum, uint o_product) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> o_sum = _a + _b;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> o_product = _a * _b;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">function arithmetics(uint _a, uint _b) returns (uint , uint ) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> o_sum = _a + _b;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> o_product = _a * _b;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return o_sum, o_product;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸èƒ½ç”¨ switch å’Œ goto&lt;/p>
&lt;p>å†…éƒ¨å‡½æ•°è°ƒç”¨ï¼Œå°±å’Œæ™®é€šçš„æ–¹æ³•è°ƒç”¨ä¸€æ ·ã€‚&lt;/p>
&lt;p>ä»å¤–éƒ¨è°ƒç”¨åˆçº¦çš„å‡½æ•°ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªåˆçº¦å®ä¾‹ï¼ˆå’Œç±»çš„å¯¹è±¡ä¸€æ ·ï¼‰ï¼Œç„¶åè°ƒç”¨å®ä¾‹æ–¹æ³•ã€‚&lt;/p>
&lt;p>è°ƒå‡½æ•°è¦å‘é€ wei å’Œ gasï¼Œå°±åƒä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">pragma solidity ^0.4.0;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">contract InfoFeed {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function info() public payable returns (uint ret) { return 42; }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">contract Consumer {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> InfoFeed feed;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function setFeed(address addr) public { feed = InfoFeed(addr); }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> function callFeed() public { feed.info.value(10).gas(800)(); }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>payable&lt;/code> ä¿®é¥°ç¬¦è¦ç”¨äºä¿®é¥° &lt;code>info&lt;/code>ï¼Œå¦åˆ™ï¼Œ.value() é€‰é¡¹å°†ä¸å¯ç”¨ã€‚&lt;/p>
&lt;p>å¯ä»¥é€šè¿‡ new åˆ›å»ºä¸€ä¸ªåˆçº¦ï¼Œå’Œ new å‡ºä¸€ä¸ªå¯¹è±¡ä¸€æ ·ã€‚&lt;/p>
&lt;h2 id="åˆçº¦ç»“æ„">åˆçº¦ç»“æ„&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>çŠ¶æ€å˜é‡&lt;/p>
&lt;p>çŠ¶æ€å˜é‡æ˜¯æ°¸ä¹…å­˜å‚¨åœ¨åˆçº¦ä¸­çš„å€¼ï¼Œå…¶å®å¯ä»¥ç†è§£ä¸ºç±»çš„æˆå‘˜å˜é‡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‡½æ•°&lt;/p>
&lt;p>å‡½æ•°æ˜¯åˆçº¦çš„å¯æ‰§è¡Œå•å…ƒï¼Œå¯ä»¥ç†è§£ä¸ºç±»çš„æˆå‘˜å‡½æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‡½æ•°ä¿®é¥°å™¨&lt;/p>
&lt;p>ä»¥å£°æ˜çš„å½¢å¼æ”¹è‰¯å‡½æ•°è¯­ä¹‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>äº‹ä»¶&lt;/p>
&lt;p>ä»¥å¤ªåŠçš„æ—¥å¿—å·¥å…·æ¥å£ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">event HighestBidIncreased(address bidder, uint amount); // äº‹ä»¶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emit HighestBidIncreased(msg.sender, msg.value); // è§¦å‘äº‹ä»¶
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>ç»“æ„ä½“&lt;/p>
&lt;p>ç†è§£ä¸ºæ•°æ®ç±»ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æšä¸¾&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>åˆçº¦å‡½æ•°å¯è§æ€§ä¿®é¥°&lt;/p></description></item><item><title>faas-provider</title><link>https://example.com/p/faas-provider/</link><pubDate>Wed, 01 Aug 2018 19:53:23 +0000</pubDate><guid>https://example.com/p/faas-provider/</guid><description>&lt;p>faas-provider æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œåªè¦å®ç°äº†è¿™ä¸ªæ¨¡æ¿çš„æ¥å£ï¼Œå°±å¯ä»¥è‡ªå®šä¹‰å®ç°è‡ªå·±çš„ providerã€‚&lt;/p>
&lt;h2 id="faas-provider">faas-provider&lt;/h2>
&lt;p>OpenFaaS å®˜æ–¹æä¾›äº†ä¸¤å¥—åå° providerï¼š&lt;/p>
&lt;ul>
&lt;li>Docker Swarm&lt;/li>
&lt;li>Kubernetes&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸¤è€…åœ¨éƒ¨ç½²å’Œè°ƒç”¨å‡½æ•°çš„æ—¶å€™æµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>éƒ¨ç½²ä¸€ä¸ªå‡½æ•°&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/b831e4c7gy1ftuggjuhtpj20xc07k0x7.jpg"
loading="lazy"
>&lt;/p>
&lt;p>è°ƒç”¨ä¸€ä¸ªå‡½æ•°&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/b831e4c7gy1ftuggyto07j20xc071n1c.jpg"
loading="lazy"
>&lt;/p>
&lt;p>provider è¦æä¾›çš„ä¸€äº› API æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>List / Create / Delete ä¸€ä¸ªå‡½æ•°&lt;/li>
&lt;/ul>
&lt;p>&lt;code>/system/functions&lt;/code>&lt;/p>
&lt;p>æ–¹æ³•: GET / POST / DELETE&lt;/p>
&lt;ul>
&lt;li>è·å–ä¸€ä¸ªå‡½æ•°&lt;/li>
&lt;/ul>
&lt;p>&lt;code>/system/function/{name:[-a-zA-Z_0-9]+}&lt;/code>&lt;/p>
&lt;p>æ–¹æ³•: GET&lt;/p>
&lt;ul>
&lt;li>ä¼¸ç¼©ä¸€ä¸ªå‡½æ•°&lt;/li>
&lt;/ul>
&lt;p>&lt;code>/system/scale-function/{name:[-a-zA-Z_0-9]+}&lt;/code>&lt;/p>
&lt;p>æ–¹æ³•: POST&lt;/p>
&lt;ul>
&lt;li>è°ƒç”¨ä¸€ä¸ªå‡½æ•°&lt;/li>
&lt;/ul>
&lt;p>&lt;code>/function/{name:[-a-zA-Z_0-9]+}&lt;/code>&lt;/p>
&lt;p>æ–¹æ³•: POST&lt;/p>
&lt;p>åœ¨ provider çš„ server.go çš„ serve æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ª serve æ–¹æ³•åˆ›å»ºäº†å‡ ä¸ªè·¯ç”±ï¼Œæ¥å—ä¸€ä¸ª FaaSHandler å¯¹è±¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// Serve load your handlers into the correct OpenFaaS route spec. This function is blocking.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func Serve(handlers *types.FaaSHandlers, config *types.FaaSConfig) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/system/functions&amp;#34;, handlers.FunctionReader).Methods(&amp;#34;GET&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/system/functions&amp;#34;, handlers.DeployHandler).Methods(&amp;#34;POST&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/system/functions&amp;#34;, handlers.DeleteHandler).Methods(&amp;#34;DELETE&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/system/functions&amp;#34;, handlers.UpdateHandler).Methods(&amp;#34;PUT&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/system/function/{name:[-a-zA-Z_0-9]+}&amp;#34;, handlers.ReplicaReader).Methods(&amp;#34;GET&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/system/scale-function/{name:[-a-zA-Z_0-9]+}&amp;#34;, handlers.ReplicaUpdater).Methods(&amp;#34;POST&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/function/{name:[-a-zA-Z_0-9]+}&amp;#34;, handlers.FunctionProxy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/function/{name:[-a-zA-Z_0-9]+}/&amp;#34;, handlers.FunctionProxy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/system/info&amp;#34;, handlers.InfoHandler).Methods(&amp;#34;GET&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if config.EnableHealth {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r.HandleFunc(&amp;#34;/healthz&amp;#34;, handlers.Health).Methods(&amp;#34;GET&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // çœç•¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› æ­¤åœ¨è‡ªå®šä¹‰çš„ providerï¼Œåªéœ€å®ç° FaaSHandlers ä¸­çš„å‡ ä¸ªè·¯ç”±å¤„ç†å‡½æ•°å³å¯ã€‚è¿™å‡ ä¸ª handler æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// FaaSHandlers provide handlers for OpenFaaS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type FaaSHandlers struct {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> FunctionReader http.HandlerFunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DeployHandler http.HandlerFunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DeleteHandler http.HandlerFunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ReplicaReader http.HandlerFunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> FunctionProxy http.HandlerFunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ReplicaUpdater http.HandlerFunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // Optional: Update an existing function
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> UpdateHandler http.HandlerFunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Health http.HandlerFunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> InfoHandler http.HandlerFunc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬ä»¥å®˜æ–¹å®ç°çš„ faas-netes ä¸ºä¾‹ï¼Œè®²è§£ä¸€ä¸‹è¿™å‡ ä¸ª hander çš„å®ç°è¿‡ç¨‹ã€‚&lt;/p>
&lt;h2 id="faas-netes">faas-netes&lt;/h2>
&lt;p>æˆ‘ä»¬çœ‹ä¸‹åœ¨ faas-netes çš„ä¸­çš„ FaaSHandlers å®ç°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bootstrapHandlers := bootTypes.FaaSHandlers{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> FunctionProxy: handlers.MakeProxy(functionNamespace, cfg.ReadTimeout),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DeleteHandler: handlers.MakeDeleteHandler(functionNamespace, clientset),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DeployHandler: handlers.MakeDeployHandler(functionNamespace, clientset, deployConfig),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> FunctionReader: handlers.MakeFunctionReader(functionNamespace, clientset),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ReplicaReader: handlers.MakeReplicaReader(functionNamespace, clientset),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ReplicaUpdater: handlers.MakeReplicaUpdater(functionNamespace, clientset),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> UpdateHandler: handlers.MakeUpdateHandler(functionNamespace, clientset),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Health: handlers.MakeHealthHandler(),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> InfoHandler: handlers.MakeInfoHandler(version.BuildVersion(), version.GitCommit),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› ä¸ºæ˜¯ Kubernetes ä¸Šçš„ provider å®ç°ï¼Œæ‰€ä»¥è¿™äº›å‡½æ•°éƒ½å¸¦æœ‰ä¸€ä¸ª namespace çš„å‚æ•°ã€‚&lt;/p>
&lt;h3 id="functionproxy">FunctionProxy&lt;/h3>
&lt;p>è¿™é‡Œæœ€é‡è¦çš„å°±æ˜¯ FunctionProxyï¼Œå®ƒä¸»è¦è´Ÿè´£è°ƒç”¨å‡½æ•°ã€‚è¿™ä¸ª handler å…¶å®ä¹Ÿæ˜¯èµ·åˆ°äº†ä¸€ä¸ªä»£ç†è½¬å‘çš„ä½œç”¨ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œåªæ¥å— get å’Œ postã€‚è°ƒç”¨å‡½æ•°åªæ¥å— post å’Œ get è¯·æ±‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>åˆ›å»ºä¸€ä¸ª http çš„ client å¯¹è±¡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åªå¤„ç† get å’Œ post è¯·æ±‚ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç»„è£…ä»£ç†è½¬å‘çš„ watchdog çš„åœ°å€&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">url := forwardReq.ToURL(fmt.Sprintf(&amp;#34;%s.%s&amp;#34;, service, functionNamespace), watchdogPort)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥æœ€åè¯·æ±‚çš„æ ¼å¼å°±ä¼šå½¢å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">http://å‡½æ•°å.namespace:ç›‘è§†å™¨çš„ç«¯å£/è·¯å¾„
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å°†è¯·æ±‚å‘å‡ºå»&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è®¾ç½® http å“åº”çš„å¤´&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="replicareader-å’Œ-replicaupdater">ReplicaReader å’Œ ReplicaUpdater&lt;/h3>
&lt;p>è¿™ä¸¤ä¸ªæ˜¯å’Œå‰¯æœ¬æ•°ç›¸å…³çš„ï¼Œæ‰€ä»¥æ”¾åœ¨ä¸€èµ·å¯¹æ¯”è®²è§£ã€‚è¿™ä¸¤ä¸ªçš„å®ç°ä¾èµ–äº Kubernetes çš„å®¢æˆ·ç«¯ï¼Œè·å–ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">clientset, err := kubernetes.NewForConfig(config)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ª config ä¸»è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶å°±è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">Config{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // TODO: switch to using cluster DNS.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Host: &amp;#34;https://&amp;#34; + net.JoinHostPort(host, port),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> BearerToken: string(token),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> TLSClientConfig: tlsClientConfig,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Kubernetes çš„æ‰€æœ‰æ“ä½œéƒ½å¯ä»¥é€šè¿‡ rest api æ¥å®Œæˆï¼Œè¿™ä¸¤ä¸ª handler ä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨ Kubernetes çš„ api æ¥åšçš„ã€‚&lt;/p>
&lt;h4 id="replicareader">ReplicaReader&lt;/h4>
&lt;p>&lt;code>MakeReplicaReader&lt;/code>å‡½æ•°æ˜¯è·å–å½“å‰çš„å‰¯æœ¬æ•°ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é€šè¿‡ mux ä»è·¯ç”±ä¸­è·å–åˆ° name å‚æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è°ƒç”¨ getService æ–¹æ³•è·å–å‰¯æœ¬æ•°ï¼ŒgetService çš„æ ¸å¿ƒä»£ç å°±ä¸€å¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">item, err := clientset.ExtensionsV1beta1().Deployments(functionNamespace).Get(functionName, getOpts)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åºåˆ—åŒ–ä¹‹åï¼ŒæŠŠç»“æœè¿”å›&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="replicaupdater">ReplicaUpdater&lt;/h4>
&lt;p>&lt;code>MakeReplicaUpdater&lt;/code>æ˜¯è§£æä» gateway ä¼ è¿‡æ¥çš„ post è¯·æ±‚ï¼Œè°ƒç”¨ k8s çš„ API è®¾ç½®å‰¯æœ¬æ•°ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ä»è¯·æ±‚ä¸­å–å‡º body&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é¦–å…ˆè·å–è¯¥å‡½æ•°çš„å·²éƒ¨ç½²çš„ deployment å¯¹è±¡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç„¶åå°† deployment çš„å‰¯æœ¬æ•°é‡è®¾ç½®ä¸ºåº”è®¾æ•°é‡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†ä»…ä»…ä¿®æ”¹å‰¯æœ¬æ•°ï¼Œè€Œä¸ä¿®æ”¹åˆ«çš„å±æ€§ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">_, err = clientset.ExtensionsV1beta1().Deployments(functionNamespace).Update(deployment)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>æ³¨ï¼šmux åšè·¯ç”±çš„æ—¶å€™ï¼Œå¦‚æœæˆåŠŸçš„æ—¶å€™ä¸å¯¹ w åšä»»ä½•å¤„ç†ï¼Œæ˜¯ä¼šé»˜è®¤çŠ¶æ€ç ä¸º 200ï¼Œç©ºå­—ç¬¦ä¸²ã€‚&lt;/p>
&lt;/blockquote>
&lt;h4 id="deletehandlerdeployhandlerfunctionreader-å’Œ-updatehandler">DeleteHandlerï¼ŒDeployHandlerï¼ŒFunctionReader å’Œ UpdateHandler&lt;/h4>
&lt;p>è¿™å‡ ä¸ªéƒ½æ˜¯å¯¹å‡½æ•°çš„æ“ä½œï¼Œå…¶å®å°±æ˜¯è°ƒç”¨ä¸€ä¸‹ Kubernetes çš„ API è¿›è¡Œæ“ä½œã€‚&lt;/p>
&lt;p>è¿™å‡ ä¸ªæ˜¯æ ¸å¿ƒçš„å‡ å¥ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">clientset.ExtensionsV1beta1().Deployments(functionNamespace).Delete(request.FunctionName, opts)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deploy := clientset.Extensions().Deployments(functionNamespace)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">res, err := clientset.ExtensionsV1beta1().Deployments(functionNamespace).List(listOpts)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">_, updateErr := clientset.CoreV1().Services(functionNamespace).Update(service)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>å®˜æ–¹è¿˜æä¾›äº†ä¸€ä¸ª faas-swarmï¼Œå…¶å®ç°æ€è·¯ä¹Ÿæ˜¯è¿™æ ·ï¼Œæ“ä½œ swarm çš„ api æ¥åšå¯¹å®¹å™¨çš„æ“ä½œã€‚è‡³äºå¦‚ä½•è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½æ˜¯åœ¨å‡½æ•°çš„ watchdog ä¸­å®ç°ã€‚&lt;/p></description></item><item><title>gateway-reading</title><link>https://example.com/p/gateway-reading/</link><pubDate>Wed, 01 Aug 2018 09:15:35 +0000</pubDate><guid>https://example.com/p/gateway-reading/</guid><description>&lt;p>OpenFaaS çš„ Gateway æ˜¯ä¸€ä¸ª golang å®ç°çš„è¯·æ±‚è½¬å‘çš„ç½‘å…³ï¼Œåœ¨è¿™ä¸ªç½‘å…³æœåŠ¡ä¸­ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š&lt;/p>
&lt;ul>
&lt;li>UI&lt;/li>
&lt;li>éƒ¨ç½²å‡½æ•°&lt;/li>
&lt;li>ç›‘æ§&lt;/li>
&lt;li>è‡ªåŠ¨ä¼¸ç¼©&lt;/li>
&lt;/ul>
&lt;h2 id="æ¶æ„åˆ†æ">æ¶æ„åˆ†æ&lt;/h2>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/b831e4c7gy1fttxzimdp3j20sm0hqabx.jpg"
loading="lazy"
alt="å›¾ï¼šKubernetesä½œä¸ºProviderçš„æ¶æ„å›¾"
>&lt;/p>
&lt;p>ä»å›¾ä¸­å¯ä»¥å‘ç°ï¼Œå½“ Gateway ä½œä¸ºä¸€ä¸ªå…¥å£ï¼Œå½“ CLI æˆ–è€… web é¡µé¢å‘æ¥è¦éƒ¨ç½²æˆ–è€…è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒGateway ä¼šå°†è¯·æ±‚è½¬å‘ç»™ Providerï¼ŒåŒæ—¶ä¼šå°†ç›‘æ§æŒ‡æ ‡å‘ç»™ Prometheusã€‚AlterManager ä¼šæ ¹æ®éœ€æ±‚ï¼Œè°ƒç”¨ API è‡ªåŠ¨ä¼¸ç¼©å‡½æ•°ã€‚&lt;/p>
&lt;h2 id="æºç åˆ†æ">æºç åˆ†æ&lt;/h2>
&lt;h3 id="ä¾èµ–">ä¾èµ–&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">github.com/gorilla/mux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com/nats-io/go-nats-streaming
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com/nats-io/go-nats
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com/openfaas/nats-queue-worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com/prometheus/client_golang
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>mux æ˜¯ä¸€ä¸ªç”¨æ¥æ‰§è¡Œ http è¯·æ±‚çš„è·¯ç”±å’Œåˆ†å‘çš„ç¬¬ä¸‰æ–¹æ‰©å±•åŒ…ã€‚&lt;/p>
&lt;p>go-nats-streamingï¼Œgo-natsï¼Œnats-queue-worker è¿™ä¸‰ä¸ªä¾èµ–æ˜¯å¼‚æ­¥å‡½æ•°çš„æ—¶å€™æ‰ä¼šç”¨åˆ°ï¼Œåœ¨åˆ†æ queue-worker çš„æ—¶å€™æœ‰è¯´åˆ° Gateway ä¹Ÿæ˜¯ä¸€ä¸ªå‘å¸ƒè€…ã€‚&lt;/p>
&lt;p>client_golang æ˜¯ Prometheus çš„å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;h3 id="é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ Dockerfile.arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ Dockerfile.armhf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ Gopkg.lock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ Gopkg.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ assets
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ build.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ handlers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ alerthandler.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ alerthandler_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ asyncreport.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ baseurlresolver_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ basic_auth.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ basic_auth_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ callid_middleware.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ cors.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ cors_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ forwarding_proxy.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ forwarding_proxy_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ function_cache.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ function_cache_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ infohandler.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ metrics.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ queueproxy.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ scaling.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â””â”€â”€ service_query.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ metrics
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ add_metrics.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ add_metrics_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ externalwatcher.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ metrics.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â””â”€â”€ prometheus_query.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ plugin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ external.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â””â”€â”€ external_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ queue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â””â”€â”€ types.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ requests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ forward_request.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ forward_request_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ prometheus.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ prometheus_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â””â”€â”€ requests.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ server.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ tests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â””â”€â”€ integration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ types
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ handler_set.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ inforequest.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ load_credentials.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ proxy_client.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â”œâ”€â”€ readconfig.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â””â”€â”€ readconfig_test.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ vendor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â””â”€â”€ github.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ version.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Gateway çš„ç›®å½•æ˜æ˜¾å¤šäº†å¾ˆå¤šï¼Œçœ‹æºç çš„æ—¶å€™ï¼Œé¦–å…ˆè¦æ‰¾åˆ°çš„æ˜¯ main åŒ…ï¼Œä» main å‡½æ•°çœ‹èµ·ï¼Œå°±èƒ½å¾ˆå®¹æ˜“åˆ†æå‡ºæ¥é¡¹ç›®æ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚&lt;/p>
&lt;p>ä» server.go çš„ main å‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®æœ‰å¦‚ä¸‹å‡ ä¸ªæ¨¡å—ï¼š&lt;/p>
&lt;ul>
&lt;li>åŸºæœ¬çš„å®‰å…¨éªŒè¯&lt;/li>
&lt;li>å’Œå‡½æ•°ç›¸å…³çš„ä»£ç†è½¬å‘
&lt;ul>
&lt;li>åŒæ­¥å‡½æ•°
&lt;ul>
&lt;li>åˆ—å‡ºå‡½æ•°&lt;/li>
&lt;li>éƒ¨ç½²å‡½æ•°&lt;/li>
&lt;li>åˆ é™¤å‡½æ•°&lt;/li>
&lt;li>æ›´æ–°å‡½æ•°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¼‚æ­¥å‡½æ•°&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Prometheus çš„ç›‘æ§&lt;/li>
&lt;li>ui&lt;/li>
&lt;li>è‡ªåŠ¨ä¼¸ç¼©&lt;/li>
&lt;/ul>
&lt;h3 id="åŸºæœ¬çš„å®‰å…¨éªŒè¯">åŸºæœ¬çš„å®‰å…¨éªŒè¯&lt;/h3>
&lt;p>å¦‚æœé…ç½®äº†å¼€å¯åŸºæœ¬å®‰å…¨éªŒè¯ï¼Œä¼šä»ç£ç›˜ä¸­è¯»å–å¯†é’¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var credentials *types.BasicAuthCredentials
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">if config.UseBasicAuth {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var readErr error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reader := types.ReadBasicAuthFromDisk{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SecretMountPath: config.SecretMountPath,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> credentials, readErr = reader.Read()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if readErr != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Panicf(readErr.Error())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ Gateway çš„é…ç½®ç›¸å…³çš„ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ª read()æ–¹æ³•ï¼Œè¿›è¡Œåˆå§‹åŒ–èµ‹å€¼ã€‚&lt;/p>
&lt;p>å¦‚æœ credentials è¢«èµ‹å€¼ä¹‹åï¼Œå°±ä¼šå¯¹ä¸€äº›è¦åŠ å¯†çš„ API handler è¿›è¡Œä¸€ä¸ªä¿®é¥°ï¼Œè¢«ä¿®é¥°çš„ API æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>UpdateFunction&lt;/li>
&lt;li>DeleteFunction&lt;/li>
&lt;li>DeployFunction&lt;/li>
&lt;li>ListFunctions&lt;/li>
&lt;li>ScaleFunction&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">if credentials != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.UpdateFunction =
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> handlers.DecorateWithBasicAuth(faasHandlers.UpdateFunction, credentials)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.DeleteFunction =
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> handlers.DecorateWithBasicAuth(faasHandlers.DeleteFunction, credentials)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.DeployFunction =
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> handlers.DecorateWithBasicAuth(faasHandlers.DeployFunction, credentials)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.ListFunctions =
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> handlers.DecorateWithBasicAuth(faasHandlers.ListFunctions, credentials)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.ScaleFunction =
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> handlers.DecorateWithBasicAuth(faasHandlers.ScaleFunction, credentials)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ª DecorateWithBasicAuth()æ–¹æ³•æ˜¯ä¸€ä¸ªè·¯ç”±ä¸­é—´ä»¶ï¼š&lt;/p>
&lt;ol>
&lt;li>è°ƒç”¨ mux è·¯ç”±çš„ BasicAuth()ï¼Œä» http çš„ header ä¸­å–åˆ°ç”¨æˆ·åå’Œå¯†ç &lt;/li>
&lt;li>ç„¶åç»™è¯·æ±‚å¤´ä¸Šè®¾ç½®ä¸€ä¸ªå­—æ®µ&lt;code>WWW-Authenticate&lt;/code>ï¼Œå€¼ä¸º&lt;code>Basic realm=&amp;quot;Restricted&amp;quot;&lt;/code>&lt;/li>
&lt;li>å¦‚æœæ ¡éªŒå¤±è´¥ï¼Œåˆ™è¿”å›é”™è¯¯ï¼ŒæˆåŠŸçš„è¯è°ƒç”¨ next æ–¹æ³•ç»§ç»­è¿›å…¥ä¸‹ä¸€ä¸ª handlerã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// DecorateWithBasicAuth enforces basic auth as a middleware with given credentials
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func DecorateWithBasicAuth(next http.HandlerFunc, credentials *types.BasicAuthCredentials) http.HandlerFunc {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return func(w http.ResponseWriter, r *http.Request) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user, password, ok := r.BasicAuth()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> w.Header().Set(&amp;#34;WWW-Authenticate&amp;#34;, `Basic realm=&amp;#34;Restricted&amp;#34;`)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if !ok || !(credentials.Password == password &amp;amp;&amp;amp; user == credentials.User) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> w.WriteHeader(http.StatusUnauthorized)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> w.Write([]byte(&amp;#34;invalid credentials&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next.ServeHTTP(w, r)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä»£ç†è½¬å‘">ä»£ç†è½¬å‘&lt;/h3>
&lt;p>Gateway æœ¬èº«ä¸åšä»»ä½•å’Œéƒ¨ç½²å‘å¸ƒå‡½æ•°çš„äº‹æƒ…ï¼Œå®ƒåªæ˜¯ä½œä¸ºä¸€ä¸ªä»£ç†ï¼ŒæŠŠè¯·æ±‚è½¬å‘ç»™ç›¸åº”çš„ Provider å»å¤„ç†ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½è¦é€šè¿‡è¿™ä¸ªç½‘å…³ã€‚&lt;/p>
&lt;h4 id="åŒæ­¥å‡½æ•°è½¬å‘">åŒæ­¥å‡½æ•°è½¬å‘&lt;/h4>
&lt;p>ä¸»è¦è½¬å‘çš„ API æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>RoutelessProxy&lt;/li>
&lt;li>ListFunctions&lt;/li>
&lt;li>DeployFunction&lt;/li>
&lt;li>DeleteFunction&lt;/li>
&lt;li>UpdateFunction&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faasHandlers.RoutelessProxy = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.ListFunctions = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.DeployFunction = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.DeleteFunction = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> faasHandlers.UpdateFunction = handlers.MakeForwardingProxyHandler(reverseProxy, forwardingNotifiers, urlResolver)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>MakeForwardingProxyHandler()æœ‰ä¸‰ä¸ªå‚æ•°ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>proxy&lt;/p>
&lt;p>è¿™æ˜¯ä¸€ä¸ª http çš„å®¢æˆ·ç«¯ï¼Œä½œè€…æŠŠè¿™ä¸ªå®¢æˆ·ç«¯æŠ½æˆä¸€ä¸ªç±»ï¼Œç„¶åä½¿ç”¨è¯¥ç±»çš„ NewHTTPClientReverseProxy æ–¹æ³•åˆ›å»ºå®ä¾‹ï¼Œè¿™æ ·å°±ç®€åŒ–äº†ä»£ç ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å¾—å†™ä¸€å †ç›¸åŒçš„é…ç½®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>notifiers&lt;/p>
&lt;p>è¿™ä¸ªå…¶å®æ˜¯è¦æ‰“å°çš„æ—¥å¿—ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ª HTTPNotifier çš„æ¥å£ã€‚è€Œåœ¨è¿™ä¸ª MakeForwardingProxyHandler ä¸­å…¶å®æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼Œä¸€ä¸ªæ˜¯ LoggingNotifierï¼Œä¸€ä¸ªæ˜¯ PrometheusFunctionNotifierï¼Œåˆ†åˆ«ç”¨æ¥æ‰“å°å’Œå‡½æ•° http è¯·æ±‚ç›¸å…³çš„æ—¥å¿—ä»¥åŠå’Œ Prometheus ç›‘æ§ç›¸å…³çš„æ—¥å¿—ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>baseURLResolver&lt;/p>
&lt;p>è¿™ä¸ªå°±æ˜¯ Provider çš„ url åœ°å€ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>åœ¨è¿™ä¸ª MakeForwardingProxyHandler ä¸­ä¸»è¦åšäº†ä¸‰ä»¶äº‹å„¿ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>è§£æè¦è½¬å‘çš„ url&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è°ƒç”¨ forwardRequest æ–¹æ³•è½¬å‘è¯·æ±‚ï¼Œ&lt;/p>
&lt;p>forwardRequest æ–¹æ³•çš„é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯æŠŠè¯·æ±‚å‘å‡ºå»ã€‚è¿™é‡Œå°±ä¸æ·±å…¥åˆ†æäº†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰“å°æ—¥å¿—&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// MakeForwardingProxyHandler create a handler which forwards HTTP requests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func MakeForwardingProxyHandler(proxy *types.HTTPClientReverseProxy, notifiers []HTTPNotifier, baseURLResolver BaseURLResolver) http.HandlerFunc {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return func(w http.ResponseWriter, r *http.Request) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> baseURL := baseURLResolver.Resolve(r)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requestURL := r.URL.Path
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> start := time.Now()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> statusCode, err := forwardRequest(w, r, proxy.Client, baseURL, requestURL, proxy.Timeout)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> seconds := time.Since(start)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;error with upstream request to: %s, %s\n&amp;#34;, requestURL, err.Error())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for _, notifier := range notifiers {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> notifier.Notify(r.Method, requestURL, statusCode, seconds)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="å¼‚æ­¥å‡½æ•°è½¬å‘">å¼‚æ­¥å‡½æ•°è½¬å‘&lt;/h4>
&lt;p>å‰é¢è¯´è¿‡ï¼Œå¦‚æœæ˜¯å¼‚æ­¥å‡½æ•°ï¼ŒGateway å°±ä½œä¸ºä¸€ä¸ªå‘å¸ƒè€…ï¼Œå°†å‡½æ•°æ”¾åˆ°é˜Ÿåˆ—é‡Œã€‚MakeQueuedProxy æ–¹æ³•å°±æ˜¯åšè¿™ä»¶äº‹å„¿çš„ï¼š&lt;/p>
&lt;ol>
&lt;li>è¯»å–è¯·æ±‚ä½“&lt;/li>
&lt;li>å°†&lt;code>X-Callback-Url&lt;/code>å‚æ•°ä»å‚æ•°ä¸­ http çš„ header ä¸­è¯»å‡ºæ¥&lt;/li>
&lt;li>å®ä¾‹åŒ–ç”¨äºå¼‚æ­¥å¤„ç†çš„ Request å¯¹è±¡&lt;/li>
&lt;li>è°ƒç”¨ canQueueRequests.Queue(req)ï¼Œå°†è¯·æ±‚å‘å¸ƒåˆ°é˜Ÿåˆ—ä¸­&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// MakeQueuedProxy accepts work onto a queue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func MakeQueuedProxy(metrics metrics.MetricOptions, wildcard bool, canQueueRequests queue.CanQueueRequests) http.HandlerFunc {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return func(w http.ResponseWriter, r *http.Request) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> defer r.Body.Close()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> body, err := ioutil.ReadAll(r.Body)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // çœç•¥é”™è¯¯å¤„ç†ä»£ç 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vars := mux.Vars(r)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name := vars[&amp;#34;name&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> callbackURLHeader := r.Header.Get(&amp;#34;X-Callback-Url&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var callbackURL *url.URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if len(callbackURLHeader) &amp;gt; 0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> urlVal, urlErr := url.Parse(callbackURLHeader)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // çœç•¥é”™è¯¯å¤„ç†ä»£ç 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> callbackURL = urlVal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> req := &amp;amp;queue.Request{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Function: name,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Body: body,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Method: r.Method,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> QueryString: r.URL.RawQuery,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Header: r.Header,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CallbackURL: callbackURL,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> err = canQueueRequests.Queue(req)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // çœç•¥é”™è¯¯å¤„ç†ä»£ç 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> w.WriteHeader(http.StatusAccepted)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="è‡ªåŠ¨ä¼¸ç¼©">è‡ªåŠ¨ä¼¸ç¼©&lt;/h4>
&lt;p>ä¼¸ç¼©æ€§å…¶å®æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¯ä»¥é€šè¿‡è°ƒç”¨ API æ¥å£ï¼Œæ¥å°†å‡½æ•°è¿›è¡Œç¼©æ”¾ã€‚å¦å¤–ä¸€ç§å°±æ˜¯é€šè¿‡ AlertHandlerã€‚&lt;/p>
&lt;p>è‡ªåŠ¨ä¼¸ç¼©æ˜¯ OpenFaaS çš„ä¸€å¤§ç‰¹ç‚¹ï¼Œè§¦å‘è‡ªåŠ¨ä¼¸ç¼©ä¸»è¦æ˜¯æ ¹æ®ä¸åŒçš„æŒ‡æ ‡éœ€æ±‚ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ ¹æ®æ¯ç§’è¯·æ±‚æ•°æ¥åšä¼¸ç¼©&lt;/p>
&lt;p>OpenFaaS é™„å¸¦äº†ä¸€ä¸ªè‡ªåŠ¨ä¼¸ç¼©çš„è§„åˆ™ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯åœ¨ AlertManager é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ã€‚AlertManager ä» Prometheus ä¸­è¯»å–ä½¿ç”¨æƒ…å†µï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰ï¼Œç„¶ååœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶æ—¶å‘ Gateway å‘é€è­¦æŠ¥ã€‚&lt;/p>
&lt;p>å¯ä»¥é€šè¿‡åˆ é™¤ AlertManagerï¼Œæˆ–è€…å°†éƒ¨ç½²æ‰©å±•çš„ç¯å¢ƒå˜é‡è®¾ç½®ä¸º 0ï¼Œæ¥ç¦ç”¨æ­¤æ–¹å¼ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœ€å°/æœ€å¤§å‰¯æœ¬æ•°&lt;/p>
&lt;p>é€šè¿‡å‘å‡½æ•°æ·»åŠ æ ‡ç­¾, å¯ä»¥åœ¨éƒ¨ç½²æ—¶è®¾ç½®æœ€å° (åˆå§‹) å’Œæœ€å¤§å‰¯æœ¬æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>com.openfaas.scale.min&lt;/code> é»˜è®¤æ˜¯ &lt;code>1&lt;/code>&lt;/li>
&lt;li>&lt;code>com.openfaas.scale.max&lt;/code> é»˜è®¤æ˜¯ &lt;code>20&lt;/code>&lt;/li>
&lt;li>&lt;code>com.openfaas.scale.factor&lt;/code> é»˜è®¤æ˜¯ &lt;code>20%&lt;/code> ï¼Œåœ¨ 0-100 ä¹‹é—´ï¼Œè¿™æ˜¯æ¯æ¬¡æ‰©å®¹çš„æ—¶å€™ï¼Œæ–°å¢å®ä¾‹çš„ç™¾åˆ†æ¯”ï¼Œè‹¥æ˜¯ 100 çš„è¯ï¼Œä¼šç¬é—´é£™å‡åˆ°å‰¯æœ¬æ•°çš„æœ€å¤§å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;code>com.openfaas.scale.min&lt;/code>Â å’ŒÂ &lt;code>com.openfaas.scale.max&lt;/code>å€¼ä¸€æ ·çš„æ—¶å€™ï¼Œå¯ä»¥å…³é—­è‡ªåŠ¨ä¼¸ç¼©ã€‚&lt;/p>
&lt;p>&lt;code>com.openfaas.scale.factor&lt;/code>æ˜¯ 0 æ—¶ï¼Œä¹Ÿä¼šå…³é—­è‡ªåŠ¨ä¼¸ç¼©ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡å†…å­˜å’Œ CPU çš„ä½¿ç”¨é‡ã€‚&lt;/p>
&lt;p>ä½¿ç”¨ k8s å†…ç½®çš„ HPAï¼Œä¹Ÿå¯ä»¥è§¦å‘ AlertManagerã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h5 id="æ‰‹åŠ¨æŒ‡å®šä¼¸ç¼©çš„å€¼">æ‰‹åŠ¨æŒ‡å®šä¼¸ç¼©çš„å€¼&lt;/h5>
&lt;p>å¯ä»¥ä»è¿™å¥ä»£ç ä¸­å‘ç°ï¼Œè°ƒç”¨è¿™ä¸ªè·¯ç”±ï¼Œè½¬å‘ç»™äº† provider å¤„ç†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">r.HandleFunc(&amp;#34;/system/scale-function/{name:[-a-zA-Z_0-9]+}&amp;#34;, faasHandlers.ScaleFunction).Methods(http.MethodPost)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="å¤„ç†-alertmanager-çš„ä¼¸ç¼©è¯·æ±‚">å¤„ç† AlertManager çš„ä¼¸ç¼©è¯·æ±‚&lt;/h5>
&lt;p>Prometheus å°†ç›‘æ§æŒ‡æ ‡å‘ç»™ AlertManager ä¹‹åï¼Œä¼šè§¦å‘ AlterManager è°ƒç”¨&lt;code>/system/alert&lt;/code>æ¥å£ï¼Œè¿™ä¸ªæ¥å£çš„ handler æ˜¯ç”±&lt;code>handlers.MakeAlertHandler&lt;/code>æ–¹æ³•ç”Ÿæˆã€‚&lt;/p>
&lt;p>MakeAlertHandler æ–¹æ³•æ¥æ”¶çš„å‚æ•°æ˜¯ ServiceQueryã€‚ServiceQuery æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œç”¨æ¥ get æˆ–è€… ser æœ€å¤§çš„å‰¯æœ¬æ•°ã€‚Gateway ä¸­å®ç°è¿™ä¸ªæ¥å£çš„ç±»æ˜¯ ExternalServiceQueryï¼Œè¿™ä¸ªå®ç°ç±»æ˜¯åœ¨ plugin åŒ…ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å®šåˆ¶è¿™ä¸ªå®ç°ç±»ï¼Œç”¨æ¥å®ç°æ»¡è¶³ç‰¹å®šæ¡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// ServiceQuery provides interface for replica querying/setting
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type ServiceQuery interface {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> GetReplicas(service string) (response ServiceQueryResponse, err error)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SetReplicas(service string, count uint64) error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// ExternalServiceQuery proxies service queries to external plugin via HTTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type ExternalServiceQuery struct {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> URL url.URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ProxyClient http.Client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ª ExternalServiceQuery æœ‰ä¸€ä¸ª&lt;code>NewExternalServiceQuery&lt;/code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œç”¨æ¥åˆ›å»ºå®ä¾‹ã€‚è¿™ä¸ª url å…¶å®å°±æ˜¯ provider çš„ urlï¼ŒproxyClient å°±æ˜¯ä¸€ä¸ª http çš„ client å¯¹è±¡ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>GetReplicas&lt;/code>æ–¹æ³•&lt;/p>
&lt;p>ä»&lt;code>system/function/:name&lt;/code>æ¥å£è·å–åˆ°å‡½æ•°çš„ä¿¡æ¯ï¼Œç»„è£…ä¸€ä¸ª&lt;code>ServiceQueryResponse&lt;/code>å¯¹è±¡å³å¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>SetReplicas&lt;/code>æ–¹æ³•&lt;/p>
&lt;p>è°ƒç”¨&lt;code>system/scale-function/:name&lt;/code>æ¥å£ï¼Œè®¾ç½®å‰¯æœ¬æ•°ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>MakeAlertHandler çš„å‡½æ•°ä¸»è¦æ˜¯ä»&lt;code>http.Request&lt;/code>ä¸­è¯»å– bodyï¼Œç„¶åååºåˆ—åŒ–æˆ&lt;code>PrometheusAlert&lt;/code>å¯¹è±¡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// PrometheusAlert as produced by AlertManager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type PrometheusAlert struct {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status string `json:&amp;#34;status&amp;#34;`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Receiver string `json:&amp;#34;receiver&amp;#34;`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Alerts []PrometheusInnerAlert `json:&amp;#34;alerts&amp;#34;`
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å‘ç°ï¼Œè¿™ä¸ª Alerts æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥æ˜¯å¯¹å¤šä¸ªå‡½æ•°è¿›è¡Œç¼©æ”¾ã€‚ååºåˆ—åŒ–ä¹‹åï¼Œè°ƒç”¨&lt;code>handleAlerts&lt;/code>æ–¹æ³•ï¼Œè€Œ&lt;code>handleAlerts&lt;/code>å¯¹ Alerts è¿›è¡Œéå†ï¼Œé’ˆå¯¹æ¯ä¸ª Alerts è°ƒç”¨äº†&lt;code>scaleService&lt;/code>æ–¹æ³•ã€‚&lt;code>scaleService&lt;/code>æ‰æ˜¯çœŸæ­£å¤„ç†ä¼¸ç¼©æœåŠ¡çš„å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func scaleService(alert requests.PrometheusInnerAlert, service ServiceQuery) error {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var err error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serviceName := alert.Labels.FunctionName
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if len(serviceName) &amp;gt; 0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> queryResponse, getErr := service.GetReplicas(serviceName)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if getErr == nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> status := alert.Status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> newReplicas := CalculateReplicas(status, queryResponse.Replicas, uint64(queryResponse.MaxReplicas), queryResponse.MinReplicas, queryResponse.ScalingFactor)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;[Scale] function=%s %d =&amp;gt; %d.\n&amp;#34;, serviceName, queryResponse.Replicas, newReplicas)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if newReplicas == queryResponse.Replicas {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return nil
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> updateErr := service.SetReplicas(serviceName, newReplicas)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if updateErr != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> err = updateErr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return err
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»ä»£ç æ€»å°±å¯ä»¥çœ‹åˆ°ï¼ŒscaleService åšäº†ä¸‰ä»¶äº‹å„¿ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è·å–ç°åœ¨çš„å‰¯æœ¬æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è®¡ç®—æ–°çš„å‰¯æœ¬æ•°&lt;/p>
&lt;p>æ–°å‰¯æœ¬æ•°çš„è®¡ç®—æ–¹æ³•æ˜¯æ ¹æ®&lt;code>com.openfaas.scale.factor&lt;/code>è®¡ç®—æ­¥é•¿ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">step := uint64((float64(maxReplicas) / 100) * float64(scalingFactor))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>è®¾ç½®ä¸ºæ–°çš„å‰¯æœ¬æ•°&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h5 id="ä»-0-å¢åŠ å‰¯æœ¬åˆ°çš„æœ€å°å€¼">ä» 0 å¢åŠ å‰¯æœ¬åˆ°çš„æœ€å°å€¼&lt;/h5>
&lt;p>æˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œç”¨çš„è·¯ç”±æ˜¯ï¼š&lt;code>/function/:name&lt;/code>ã€‚å¦‚æœç¯å¢ƒå˜é‡é‡Œæœ‰é…ç½®&lt;code>scale_from_zero&lt;/code>ä¸º trueï¼Œå…ˆç”¨&lt;code>MakeScalingHandler()&lt;/code>æ–¹æ³•å¯¹ proxyHandler è¿›è¡Œä¸€æ¬¡åŒ…è£…ã€‚&lt;/p>
&lt;p>&lt;code>MakeScalingHandler&lt;/code>æ¥å—å‚æ•°ä¸»è¦æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>nextï¼šå°±æ˜¯ä¸‹ä¸€ä¸ª httpHandlerFuncï¼Œä¸­é—´ä»¶éƒ½ä¼šæœ‰è¿™æ ·ä¸€ä¸ªå‚æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>configï¼š&lt;code>ScalingConfig&lt;/code>çš„å¯¹è±¡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// ScalingConfig for scaling behaviours
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type ScalingConfig struct {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> MaxPollCount uint // æŸ¥åˆ°çš„æœ€å¤§æ•°é‡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> FunctionPollInterval time.Duration // å‡½æ•°è°ƒç”¨æ—¶é—´é—´éš”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CacheExpiry time.Duration // ç¼“å­˜è¿‡æœŸæ—¶é—´
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ServiceQuery ServiceQuery // å¤–éƒ¨æœåŠ¡è°ƒç”¨çš„ä¸€ä¸ªæ¥å£
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸ª&lt;code>MakeScalingHandler&lt;/code>ä¸­é—´ä»¶ä¸»è¦åšäº†å¦‚ä¸‹çš„äº‹æƒ…ï¼š&lt;/p>
&lt;ul>
&lt;li>å…ˆä» FunctionCache ç¼“å­˜ä¸­è·å–è¯¥å‡½æ•°çš„åŸºæœ¬ä¿¡æ¯ï¼Œä»è¿™ä¸ªç¼“å­˜å¯ä»¥æ‹¿åˆ°æ¯ä¸ªå‡½æ•°çš„å‰¯æœ¬æ•°é‡ã€‚&lt;/li>
&lt;li>ä¸ºäº†åŠ å¿«å‡½æ•°çš„å¯åŠ¨é€Ÿåº¦ï¼Œå¦‚æœç¼“å­˜ä¸­å¯ä»¥è·è¯¥å¾—å‡½æ•°ï¼Œä¸”å‡½æ•°çš„å‰¯æœ¬æ•°å¤§äº 0ï¼Œæ»¡è¶³æ¡ä»¶ï¼Œreturn å³å¯ã€‚&lt;/li>
&lt;li>å¦‚æœä¸æ»¡è¶³ä¸Šä¸€æ­¥ï¼Œå°±ä¼šè°ƒç”¨&lt;code>SetReplicas&lt;/code>æ–¹æ³•è®¾ç½®å‰¯æœ¬æ•°ï¼Œå¹¶æ›´æ–° FunctionCache çš„ç¼“å­˜ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// MakeScalingHandler creates handler which can scale a function from
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// zero to 1 replica(s).
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func MakeScalingHandler(next http.HandlerFunc, upstream http.HandlerFunc, config ScalingConfig) http.HandlerFunc {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache := FunctionCache{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cache: make(map[string]*FunctionMeta),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Expiry: config.CacheExpiry,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return func(w http.ResponseWriter, r *http.Request) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> functionName := getServiceName(r.URL.String())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if serviceQueryResponse, hit := cache.Get(functionName); hit &amp;amp;&amp;amp; serviceQueryResponse.AvailableReplicas &amp;gt; 0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next.ServeHTTP(w, r)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> queryResponse, err := config.ServiceQuery.GetReplicas(functionName)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache.Set(functionName, queryResponse)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // çœç•¥é”™è¯¯å¤„ç†
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if queryResponse.AvailableReplicas == 0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> minReplicas := uint64(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if queryResponse.MinReplicas &amp;gt; 0 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> minReplicas = queryResponse.MinReplicas
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> err := config.ServiceQuery.SetReplicas(functionName, minReplicas)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // çœç•¥é”™è¯¯å¤„ç†ä»£ç 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for i := 0; i &amp;lt; int(config.MaxPollCount); i++ {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> queryResponse, err := config.ServiceQuery.GetReplicas(functionName)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache.Set(functionName, queryResponse)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // çœç•¥é”™è¯¯å¤„ç†
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> time.Sleep(config.FunctionPollInterval)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next.ServeHTTP(w, r)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç›‘æ§">ç›‘æ§&lt;/h3>
&lt;p>ç›‘æ§æ˜¯ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå¼€å¯äº†ä¸€ä¸ªæ–°åç¨‹ï¼Œåˆ©ç”¨ go çš„ ticker.C çš„é—´éš”ä¸åœçš„å»è°ƒç”¨&lt;code>/system/functions&lt;/code>æ¥å£ã€‚ååºåˆ—åŒ–åˆ° MetricOptions å¯¹è±¡ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func AttachExternalWatcher(endpointURL url.URL, metricsOptions MetricOptions, label string, interval time.Duration) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ticker := time.NewTicker(interval)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> quit := make(chan struct{})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxyClient := // çœç•¥åˆ›å»ºä¸€ä¸ªhttp.Clientå¯¹è±¡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go func() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> select {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> case &amp;lt;-ticker.C:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> get, _ := http.NewRequest(http.MethodGet, endpointURL.String()+&amp;#34;system/functions&amp;#34;, nil)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> services := []requests.Function{}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res, err := proxyClient.Do(get)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // çœç•¥ååºåˆ—çš„ä»£ç 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for _, service := range services {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metricsOptions.ServiceReplicasCounter.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> WithLabelValues(service.Name).
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Set(float64(service.Replicas))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> break
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> case &amp;lt;-quit:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ui">UI&lt;/h3>
&lt;p>UI çš„ä»£ç å¾ˆç®€å•ï¼Œä¸»è¦å°±æ˜¯ä¸€äº›å‰ç«¯çš„ä»£ç ï¼Œè°ƒç”¨ä¸Šé¢çš„è®²çš„ä¸€äº› API æ¥å£å³å¯ï¼Œè¿™é‡Œå°±ç•¥å»ä¸è¡¨ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>Gateway æ˜¯ OpenFaaS æœ€ä¸ºé‡è¦çš„ä¸€ä¸ªç»„ä»¶ã€‚å›è¿‡å¤´çœ‹æ•´ä¸ªé¡¹ç›®çš„ç»“æ„ï¼ŒGateway å°±æ˜¯ä¸€ä¸ª rest è½¬å‘æœåŠ¡ï¼Œä¸€ä¸ªä¸€ä¸ªçš„ handlerï¼Œæ¯ä¸ªæ¨¡å—ä¹‹é—´çš„è€¦åˆæ€§ä¸æ˜¯å¾ˆé«˜ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å»æ‹†å¸ï¼Œè‡ªå®šä¹‰å®ç°ç›¸åº”çš„æ¨¡å—ã€‚&lt;/p></description></item><item><title>NATS streaming</title><link>https://example.com/p/nats-streaming/</link><pubDate>Mon, 30 Jul 2018 14:51:26 +0000</pubDate><guid>https://example.com/p/nats-streaming/</guid><description>&lt;p>å¸‚é¢ä¸Šå¸¸è§åˆ°çš„å’Œ Nats åŠŸèƒ½ç±»ä¼¼çš„æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿæœ‰ï¼š&lt;/p>
&lt;p>ActiveMQï¼ˆJava ç¼–å†™ï¼‰ã€KafKaï¼ˆScala ç¼–å†™ï¼‰ã€RabbitMqï¼ˆRuby ç¼–å†™ï¼‰ã€Natsï¼ˆä¹‹å‰æ˜¯ Ruby ç¼–å†™ç°å·²ä¿®æ”¹ä¸º Goï¼‰ã€Redisï¼ˆC è¯­è¨€ç¼–å†™ï¼‰ã€Kestrelï¼ˆScala ç¼–å†™ä¸å¸¸ç”¨ï¼‰ã€NSQï¼ˆGo è¯­è¨€ç¼–å†™ï¼‰ï¼Œè¿™äº›æ¶ˆæ¯é€šä¿¡ç³»ç»Ÿåœ¨ Broker ååé‡æ–¹é¢çš„æ¯”è¾ƒï¼š&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/b831e4c7gy1fts2j6kv9mj20mv0c8aa8.jpg"
loading="lazy"
>&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ° NATS çš„ååé‡ç‰¹åˆ«é«˜ï¼ŒÂ NATS åŸæ¥æ˜¯ä½¿ç”¨ Ruby ç¼–å†™ï¼Œå¯ä»¥å®ç°æ¯ç§’ 150k æ¶ˆæ¯ï¼Œåæ¥ä½¿ç”¨ Go è¯­è¨€é‡å†™ï¼Œèƒ½å¤Ÿè¾¾åˆ°æ¯ç§’ 8-11 ç™¾ä¸‡ä¸ªæ¶ˆæ¯ï¼Œæ•´ä¸ªç¨‹åºå¾ˆå°åªæœ‰ 3M Docker imageï¼Œå®ƒä¸æ”¯æŒæŒä¹…åŒ–æ¶ˆæ¯ï¼Œå¦‚æœä½ ç¦»çº¿ï¼Œä½ å°±ä¸èƒ½è·å¾—æ¶ˆæ¯ã€‚å…³äº NATS çš„è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚è€ƒä¸Šç¯‡æ–‡ç« ï¼š&lt;a class="link" href="https://zhuanlan.zhihu.com/p/40871363" target="_blank" rel="noopener"
>NATS ç®€ä»‹&lt;/a>&lt;/p>
&lt;h2 id="nats-streaming">NATS Streaming&lt;/h2>
&lt;p>NATS Streaming æ˜¯ç”± NATS é©±åŠ¨çš„æ•°æ®æµç³»ç»Ÿï¼Œä¹Ÿæ˜¯ç”± go è¯­è¨€å†™æˆçš„ï¼Œåœ¨ä¿è¯ååé‡å’Œæ—¶å»¶çš„åŸºç¡€ä¸Šï¼Œè§£å†³äº† Nats æ¶ˆæ¯æŠ•é€’ä¸€è‡´æ€§çš„é—®é¢˜ã€‚nats streaming å¯ä»¥å’Œæ ¸å¿ƒ nats å¹³å°æ— ç¼åµŒå…¥ï¼Œæ‰©å±•å’Œäº’åŠ¨ã€‚&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/b831e4c7gy1fts2wctrfzj20tk0r8afy.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;p>é™¤äº† nats å¹³å°çš„ä¸€äº›åŠŸèƒ½ï¼Œnats streaming è¿˜æ”¯æŒä»¥ä¸‹çš„ï¼š&lt;/p>
&lt;ul>
&lt;li>å¢å¼ºçš„æ¶ˆæ¯åè®®&lt;/li>
&lt;li>æ¶ˆæ¯/äº‹ä»¶æŒä¹…åŒ–&lt;/li>
&lt;li>è‡³å°‘ä¸€æ¬¡æŠ•é€’&lt;/li>
&lt;li>å‘å¸ƒè€…é€Ÿç‡é™åˆ¶&lt;/li>
&lt;li>æ¯ä¸ªè®¢é˜…è€…çš„é€Ÿç‡åŒ¹é…/é™åˆ¶&lt;/li>
&lt;li>å¯é‡å¤æ¶ˆè´¹&lt;/li>
&lt;li>æŒä¹…è®¢é˜…&lt;/li>
&lt;/ul>
&lt;h3 id="ä½¿ç”¨">ä½¿ç”¨&lt;/h3>
&lt;p>é¦–å…ˆå®‰è£… nats-streaming-server æœåŠ¡ï¼Œæœ‰å¤šç§æ–¹å¼ï¼Œè¿™é‡Œä»‹ç»ä¸¤ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>homebrew&lt;/p>
&lt;p>ç›´æ¥åœ¨å‘½ä»¤è¡Œå¯åŠ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">brew install nats-streaming-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>go get&lt;/p>
&lt;p>è¿™ç§æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬ç›´æ¥è¿è¡Œæºç å¯åŠ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">go get github.com/nats-io/nats-streaming-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>å¯åŠ¨ nats-streaming-server&lt;/p>
&lt;p>æœ‰ä¸‰ç§å¯åŠ¨æ–¹å¼&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç›´æ¥å¯åŠ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">nats-streaming-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å¼€å¯ nats ç›‘æ§çš„å¯åŠ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">nats-streaming-server -m 8222
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æºç æ–¹å¼å¯åŠ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">cd $GOPATH/src/github.com/nats-io/nats-streaming-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go run nats-streaming-server.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯&lt;/h3>
&lt;p>ç›´æ¥ä¸‹è½½ go çš„å®¢æˆ·ç«¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">go get github.com/nats-io/go-nats-streaming
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œå‘å¸ƒè€…&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">cd $GOPATH/src/github.com/nats-io/go-nats-streaming/examples/stan-pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go run main.go foo &amp;#34;msg one&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go run main.go foo &amp;#34;msg two&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go run main.go foo &amp;#34;msg three&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/b831e4c7gy1ftrx4gytrhj20q50g0juj.jpg"
loading="lazy"
>&lt;/p>
&lt;p>è¿è¡Œè®¢é˜…è€…&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">cd $GOPATH/src/github.com/nats-io/go-nats-streaming/examples/stan-sub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go run main.go --all -c test-cluster -id myID foo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/b831e4c7gy1ftrx8h85rpj20qq0fu41n.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="å®ä¾‹">å®ä¾‹&lt;/h3>
&lt;p>é¦–å…ˆåœ¨æœ¬åœ°å¯åŠ¨ nats-streaming-serverï¼Œç„¶åä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å‘å¸ƒè®¢é˜…çš„è¿‡ç¨‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;github.com/nats-io/go-nats-streaming&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;github.com/nats-io/go-nats-streaming/pb&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;log&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;strconv&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;time&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func main() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var clusterId string = &amp;#34;test-cluster&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var clientId string = &amp;#34;test-client&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sc, err := stan.Connect(clusterId, clientId, stan.NatsURL(&amp;#34;nats://localhost:4222&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatal(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // å¼€å¯ä¸€ä¸ªåç¨‹ï¼Œä¸åœçš„ç”Ÿäº§æ•°æ®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go func() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> m := 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> m++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sc.Publish(&amp;#34;foo1&amp;#34;, []byte(&amp;#34;hello message &amp;#34;+strconv.Itoa(m)))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> time.Sleep(time.Second)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // æ¶ˆè´¹æ•°æ®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> i := 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mcb := func(msg *stan.Msg) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> i++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Println(i, &amp;#34;----&amp;gt;&amp;#34;, msg.Subject, msg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> startOpt := stan.StartAt(pb.StartPosition_LastReceived)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //_, err = sc.QueueSubscribe(&amp;#34;foo1&amp;#34;, &amp;#34;&amp;#34;, mcb, startOpt) // ä¹Ÿå¯ä»¥ç”¨queue subscribe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> _, err = sc.Subscribe(&amp;#34;foo1&amp;#34;, mcb, startOpt)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if err != nil {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sc.Close()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Fatal(err)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // åˆ›å»ºä¸€ä¸ªchannelï¼Œé˜»å¡ç€
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> signalChan := make(chan int)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;-signalChan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">2018/07/30 18:04:01 2 ----&amp;gt; foo1 sequence:546 subject:&amp;#34;foo1&amp;#34; data:&amp;#34;hello message 1&amp;#34; timestamp:1532945041825538757
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/07/30 18:04:02 3 ----&amp;gt; foo1 sequence:547 subject:&amp;#34;foo1&amp;#34; data:&amp;#34;hello message 2&amp;#34; timestamp:1532945042828881383
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/07/30 18:04:03 4 ----&amp;gt; foo1 sequence:548 subject:&amp;#34;foo1&amp;#34; data:&amp;#34;hello message 3&amp;#34; timestamp:1532945043833360222
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/07/30 18:04:04 5 ----&amp;gt; foo1 sequence:549 subject:&amp;#34;foo1&amp;#34; data:&amp;#34;hello message 4&amp;#34; timestamp:1532945044833810697
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/07/30 18:04:05 6 ----&amp;gt; foo1 sequence:550 subject:&amp;#34;foo1&amp;#34; data:&amp;#34;hello message 5&amp;#34; timestamp:1532945045838056450
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/07/30 18:04:06 7 ----&amp;gt; foo1 sequence:551 subject:&amp;#34;foo1&amp;#34; data:&amp;#34;hello message 6&amp;#34; timestamp:1532945046838585417
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/07/30 18:04:07 8 ----&amp;gt; foo1 sequence:552 subject:&amp;#34;foo1&amp;#34; data:&amp;#34;hello message 7&amp;#34; timestamp:1532945047840775810
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æºç åœ¨ï¼š&lt;a class="link" href="https://github.com/zhenfeng-zhu/nats-demo" target="_blank" rel="noopener"
>https://github.com/zhenfeng-zhu/nats-demo&lt;/a>&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>NATS Streaming çš„é«˜çº§åŠŸèƒ½ç±»ä¼¼äº Apache Kafka çš„åŠŸèƒ½ï¼Œä½†å½“ä½ è€ƒè™‘ç®€å•æ€§è€Œéå¤æ‚æ€§æ—¶å‰è€…æ›´ä¼˜ã€‚ç”±äº NATS Streaming ç›¸å¯¹æ¥è¯´æ˜¯ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œä¸ Apache Kafka ç›¸æ¯”ï¼Œå®ƒåœ¨æŸäº›é¢†åŸŸéœ€è¦æ”¹è¿›ï¼Œå°¤å…¶æ˜¯ä¸ºè´Ÿè½½å‡è¡¡åœºæ™¯æä¾›æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p></description></item><item><title>nats ç®€ä»‹</title><link>https://example.com/p/nats-%E7%AE%80%E4%BB%8B/</link><pubDate>Mon, 30 Jul 2018 11:15:39 +0000</pubDate><guid>https://example.com/p/nats-%E7%AE%80%E4%BB%8B/</guid><description>&lt;p>nats æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œäº‘åŸç”Ÿçš„æ¶ˆæ¯ç³»ç»Ÿã€‚Apceraï¼Œç™¾åº¦ï¼Œè¥¿é—¨å­ï¼ŒVMwareï¼ŒHTC å’Œçˆ±ç«‹ä¿¡ç­‰å…¬å¸éƒ½æœ‰åœ¨ä½¿ç”¨ã€‚&lt;/p>
&lt;p>æ ¸å¿ƒåŸºäº EventMachine å¼€å‘ï¼ŒåŸç†æ˜¯åŸºäºæ¶ˆæ¯å‘å¸ƒè®¢é˜…æœºåˆ¶ï¼Œæ¯å°æœåŠ¡å™¨ä¸Šçš„æ¯ä¸ªæ¨¡å—ä¼šæ ¹æ®è‡ªå·±çš„æ¶ˆæ¯ç±»åˆ«å‘ MessageBus å‘å¸ƒå¤šä¸ªæ¶ˆæ¯ä¸»é¢˜ï¼Œè€ŒåŒæ—¶ä¹Ÿå‘è‡ªå·±éœ€è¦äº¤äº’çš„æ¨¡å—ï¼ŒæŒ‰ç…§éœ€è¦çš„ä¸»é¢˜è®¢é˜…æ¶ˆæ¯ã€‚èƒ½å¤Ÿè¾¾åˆ°æ¯ç§’ 8-11 ç™¾ä¸‡ä¸ªæ¶ˆæ¯ï¼Œæ•´ä¸ªç¨‹åºå¾ˆå°åªæœ‰ 3M Docker imageï¼Œå®ƒä¸æ”¯æŒæŒä¹…åŒ–æ¶ˆæ¯ï¼Œå¦‚æœä½ ç¦»çº¿ï¼Œä½ å°±ä¸èƒ½è·å¾—æ¶ˆæ¯ã€‚ä½¿ç”¨ nats streaming å¯ä»¥åšåˆ°æŒä¹…åŒ–ï¼Œç¼“å­˜ç­‰åŠŸèƒ½ã€‚&lt;/p>
&lt;h2 id="nats-server">NATS server&lt;/h2>
&lt;p>nats æä¾›äº†ä¸€ä¸ª go ç¼–å†™çš„è½»é‡çº§æœåŠ¡å™¨ã€‚å‘è¡Œç‰ˆåŒ…æ‹¬äºŒè¿›åˆ¶å’Œ docker é•œåƒ&lt;/p>
&lt;p>NATS clients&lt;/p>
&lt;p>nats å®˜æ–¹æä¾›çš„å®¢æˆ·ç«¯æœ‰ Goï¼ŒNodeï¼ŒRubyï¼ŒJavaï¼ŒCï¼ŒCï¼ƒï¼ŒNGINX ç­‰ã€‚&lt;/p>
&lt;p>NATS è®¾è®¡ç›®æ ‡&lt;/p>
&lt;p>æ ¸å¿ƒåŸåˆ™æ˜¯æ€§èƒ½ï¼Œå¯ä¼¸ç¼©å’Œæ˜“ç”¨æ€§ã€‚&lt;/p>
&lt;ul>
&lt;li>é«˜æ•ˆ&lt;/li>
&lt;li>å§‹ç»ˆåœ¨çº¿å’Œå¯ç”¨&lt;/li>
&lt;li>éå¸¸è½»å·§&lt;/li>
&lt;li>æ”¯æŒå¤šç§è´¨é‡çš„æœåŠ¡&lt;/li>
&lt;li>æ”¯æŒå„ç§æ¶ˆæ¯ä¼ é€’æ¨¡å‹å’Œä½¿ç”¨åœºæ™¯&lt;/li>
&lt;/ul>
&lt;h2 id="nats-ä½¿ç”¨åœºæ™¯">NATS ä½¿ç”¨åœºæ™¯&lt;/h2>
&lt;p>nats æ˜¯ä¸€ä¸ªç®€å•ä¸”å¼ºå¤§çš„æ¶ˆæ¯ç³»ç»Ÿï¼Œä¸ºæ”¯æŒç°ä»£äº‘åŸç”Ÿæ¶æ„è®¾è®¡ã€‚ç”±äºå¯ä¼¸ç¼©æ€§çš„å¤æ‚æ€§ï¼Œnats æ—¨åœ¨å®¹æ˜“ä½¿ç”¨å’Œå®ç°ï¼Œä¸”èƒ½æä¾›å¤šç§è´¨é‡çš„æœåŠ¡ã€‚&lt;/p>
&lt;p>ä¸€äº›é€‚ç”¨ nats çš„åœºæ™¯æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>é«˜ååé‡çš„æ¶ˆæ¯åˆ†æ•£ â€”â€” å°‘æ•°çš„ç”Ÿäº§è€…éœ€è¦å°†æ•°æ®å‘é€ç»™å¾ˆå¤šçš„æ¶ˆè´¹è€…ã€‚&lt;/li>
&lt;li>å¯»å€å’Œå‘ç° â€”â€” å°†æ•°æ®å‘é€ç»™ç‰¹å®šçš„åº”ç”¨å®ä¾‹ï¼Œè®¾å¤‡æˆ–è€…ç”¨æˆ·ï¼Œä¹Ÿå¯ç”¨äºå‘ç°å¹¶è¿æ¥åˆ°åŸºç¡€æ¶æ„ä¸­çš„å®ä¾‹ï¼Œè®¾å¤‡æˆ–ç”¨æˆ·ã€‚&lt;/li>
&lt;li>å‘½ä»¤å’Œæ§åˆ¶ï¼ˆæ§åˆ¶é¢æ¿ï¼‰â€”â€” å‘ç¨‹åºæˆ–è®¾å¤‡å‘é€æŒ‡ä»¤ï¼Œå¹¶ä»ç¨‹åº/è®¾å¤‡ä¸­æ¥æ”¶çŠ¶æ€ï¼Œå¦‚ SCADAï¼Œå«æ˜Ÿé¥æ„Ÿï¼Œç‰©è”ç½‘ç­‰ã€‚&lt;/li>
&lt;li>è´Ÿè½½å‡è¡¡ â€”â€” ä¸»è¦åº”ç”¨äºç¨‹åºä¼šç”Ÿæˆå¤§é‡çš„è¯·æ±‚ï¼Œä¸”å¯åŠ¨æ€ä¼¸ç¼©ç¨‹åºå®ä¾‹ã€‚&lt;/li>
&lt;li>N è·¯å¯æ‰©å±•æ€§ â€”â€” é€šä¿¡åŸºç¡€æ¶æ„èƒ½å¤Ÿå……åˆ†åˆ©ç”¨ go çš„é«˜æ•ˆå¹¶å‘/è°ƒåº¦æœºåˆ¶ï¼Œä»¥å¢å¼ºæ°´å¹³å’Œå‚ç›´çš„æ‰©å±•æ€§ã€‚&lt;/li>
&lt;li>ä½ç½®é€æ˜ â€”â€” ç¨‹åºåœ¨å„ä¸ªåœ°ç†ä½ç½®ä¸Šåˆ†å¸ƒè€…å¤§é‡å®ä¾‹ï¼Œä¸”ä½ æ— æ³•äº†è§£åˆ°ç¨‹åºä¹‹é—´çš„ç«¯ç‚¹é…ç½®è¯¦æƒ…ï¼ŒåŠä»–ä»¬æ‰€ç”Ÿäº§æˆ–æ¶ˆè´¹çš„æ•°æ®ã€‚&lt;/li>
&lt;li>å®¹é”™&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ nats-streaming çš„é™„åŠ åœºæ™¯æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>ä»ç‰¹å®šæ—¶é—´æˆ–é¡ºåºæ¶ˆè´¹&lt;/li>
&lt;li>æŒä¹…æ€§&lt;/li>
&lt;li>æœ‰ä¿è¯çš„æ¶ˆæ¯æŠ•é€’&lt;/li>
&lt;/ul>
&lt;h2 id="nats-æ¶ˆæ¯ä¼ é€’æ¨¡å‹">NATS æ¶ˆæ¯ä¼ é€’æ¨¡å‹&lt;/h2>
&lt;ul>
&lt;li>å‘å¸ƒè®¢é˜…&lt;/li>
&lt;li>è¯·æ±‚å›å¤&lt;/li>
&lt;li>æ’é˜Ÿ&lt;/li>
&lt;/ul>
&lt;h2 id="nats-çš„ç‰¹ç‚¹">NATS çš„ç‰¹ç‚¹&lt;/h2>
&lt;p>nats çš„ç‹¬ç‰¹åŠŸèƒ½æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>çº¯å‡€çš„ pub-sub&lt;/li>
&lt;li>é›†ç¾¤æ¨¡å¼çš„ server&lt;/li>
&lt;li>è®¢é˜…è€…çš„è‡ªåŠ¨è£å‰ª&lt;/li>
&lt;li>åŸºäºæ–‡æœ¬çš„åè®®&lt;/li>
&lt;li>å¤šç§æœåŠ¡è´¨é‡
&lt;ul>
&lt;li>æœ€å¤šä¸€æ¬¡æŠ•é€’&lt;/li>
&lt;li>è‡³å°‘ä¸€æ¬¡æŠ•é€’&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æŒä¹…&lt;/li>
&lt;li>ç¼“å­˜&lt;/li>
&lt;/ul></description></item><item><title>overview-of-openfaas</title><link>https://example.com/p/overview-of-openfaas/</link><pubDate>Thu, 26 Jul 2018 17:41:33 +0000</pubDate><guid>https://example.com/p/overview-of-openfaas/</guid><description>&lt;h2 id="openfaas-æ¦‚è§ˆ">OpenFaaS æ¦‚è§ˆ&lt;/h2>
&lt;blockquote>
&lt;p>æ— æœåŠ¡å™¨å‡½æ•°å˜å¾—ç®€å•ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/b831e4c7gy1ftucj00kylj20xc0j511g.jpg"
loading="lazy"
>&lt;/p>
&lt;h3 id="å‡½æ•°ç›‘è§†å™¨">å‡½æ•°ç›‘è§†å™¨&lt;/h3>
&lt;ul>
&lt;li>ä½ å¯ä»¥é€šè¿‡æ·»åŠ &lt;em>å‡½æ•°ç›‘è§†å™¨&lt;/em> (ä¸€ä¸ªå°å‹çš„ Golang HTTP æœåŠ¡)æŠŠä»»ä½•ä¸€ä¸ª Docker é•œåƒå˜æˆæ— æœåŠ¡å™¨å‡½æ•°ã€‚&lt;/li>
&lt;li>&lt;em>å‡½æ•°ç›‘è§†å™¨&lt;/em>æ˜¯å…è®¸ HTTP è¯·æ±‚é€šè¿‡ STDIN è½¬å‘åˆ°ç›®æ ‡è¿›ç¨‹çš„å…¥å£ç‚¹ã€‚å“åº”ä¼šä»ä½ åº”ç”¨å†™å…¥ STDOUT è¿”å›ç»™è°ƒç”¨è€…ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="api-ç½‘å…³ui-é—¨æˆ·">API ç½‘å…³/UI é—¨æˆ·&lt;/h3>
&lt;ul>
&lt;li>API ç½‘å…³ä¸ºä½ çš„å‡½æ•°æä¾›å¤–éƒ¨è·¯ç”±ï¼Œå¹¶é€šè¿‡ Prometheus æ”¶é›†äº‘åŸç”ŸæŒ‡æ ‡ã€‚&lt;/li>
&lt;li>ä½ çš„ API ç½‘å…³å°†ä¼šæ ¹æ®éœ€æ±‚æ›´æ”¹ Docker Swarm æˆ– Kubernetes API ä¸­çš„æœåŠ¡å‰¯æœ¬æ•°æ¥å®ç°ä¼¸ç¼©æ€§ã€‚&lt;/li>
&lt;li>UI æ˜¯å…è®¸ä½ åœ¨æµè§ˆå™¨ä¸­è°ƒç”¨å‡½æ•°æˆ–è€…æ ¹æ®éœ€è¦åˆ›å»ºæ–°çš„å‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>API ç½‘å…³æ˜¯ä¸€ä¸ª RESTful å½¢å¼çš„å¾®æœåŠ¡ï¼Œä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹&lt;a class="link" href="https://github.com/openfaas/faas/tree/master/api-docs" target="_blank" rel="noopener"
>Swagger æ–‡æ¡£&lt;/a>ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="å‘½ä»¤è¡Œ">å‘½ä»¤è¡Œ&lt;/h3>
&lt;p>Docker ä¸­çš„ä»»ä½•å®¹å™¨æˆ–è€…è¿›ç¨‹éƒ½å¯ä»¥æ˜¯ FaaS ä¸­çš„ä¸€ä¸ªæ— æœåŠ¡å™¨å‡½æ•°ã€‚ä½¿ç”¨&lt;a class="link" href="http://github.com/openfaas/faas-cli" target="_blank" rel="noopener"
>FaaS CLI&lt;/a> ï¼Œä½ å¯ä»¥å¿«é€Ÿçš„éƒ¨ç½²å‡½æ•°ã€‚&lt;/p>
&lt;p>å¯ä»¥ä» Node.js, Python, &lt;a class="link" href="https://blog.alexellis.io/serverless-golang-with-openfaas/" target="_blank" rel="noopener"
>Go&lt;/a> æˆ–è€…æ›´å¤šçš„è¯­è¨€æ¨¡æ¿ä¸­åˆ›å»ºæ–°çš„å‡½æ•°ã€‚å¦‚æœä½ æ— æ³•æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„æ¨¡æ¿ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ä¸€ä¸ª Dockerfileã€‚&lt;/p>
&lt;blockquote>
&lt;p>CLI å®é™…ä¸Šæ˜¯ API ç½‘å…³çš„ä¸€ä¸ª RESTful å®¢æˆ·ç«¯ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>åœ¨é…ç½®å¥½ OpenFaaS ä¹‹åï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå¼€å§‹å­¦ä¹  CLI&lt;a class="link" href="https://blog.alexellis.io/quickstart-openfaas-cli/" target="_blank" rel="noopener"
>å¼€å§‹å­¦ä¹  CLI&lt;/a>&lt;/p>
&lt;h3 id="å‡½æ•°ç¤ºä¾‹">å‡½æ•°ç¤ºä¾‹&lt;/h3>
&lt;p>ä½ å¯ä»¥é€šè¿‡ ä½¿ç”¨ FaaS-CLI å’Œå…¶å†…ç½®çš„æ¨¡æ¿åˆ›å»ºæ–°å‡½æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨ Docker ä¸­ä½¿ç”¨ Windows æˆ– Linux çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚&lt;/p>
&lt;ul>
&lt;li>Python ç¤ºä¾‹ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">import requests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">def handle(req):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> r = requests.get(req, timeout = 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print(req +&amp;#34; =&amp;gt; &amp;#34; + str(r.status_code))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;em>handler.py&lt;/em>&lt;/p>
&lt;ul>
&lt;li>Node.js ç¤ºä¾‹ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;#34;use strict&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports = (callback, context) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> callback(null, {&amp;#34;message&amp;#34;: &amp;#34;You said: &amp;#34; + context})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;em>handler.js&lt;/em>&lt;/p>
&lt;p>åœ¨ Github ä»“åº“ä¸­æä¾›äº†ä¸€ç³»åˆ—ç¼–ç¨‹è¯­è¨€çš„å…¶ä»–&lt;a class="link" href="https://github.com/openfaas/faas/tree/master/sample-functions" target="_blank" rel="noopener"
>ç¤ºä¾‹å‡½æ•°&lt;/a> ã€‚&lt;/p></description></item><item><title>OpenFaaS on Rancher 2.0</title><link>https://example.com/p/openfaas-on-rancher-2.0/</link><pubDate>Thu, 26 Jul 2018 09:50:46 +0000</pubDate><guid>https://example.com/p/openfaas-on-rancher-2.0/</guid><description>&lt;p>è¿™æ˜¯ä¸€ç¯‡å…³äºå¦‚ä½•åœ¨ Rancher 2.0 ä¸Šåˆ›å»º OpenFaaS æ ˆçš„æ–‡ç« ã€‚æˆ‘å‡è®¾ä½ å·²ç»å‡†å¤‡å¥½äº† Rancher 2.0 é›†ç¾¤ï¼Œå¦‚æœæ²¡æœ‰è¯·æŒ‰ç…§å®˜æ–¹æ–‡æ¡£åˆ›å»ºä¸€ä¸ªã€‚&lt;/p>
&lt;p>ä¸‹é¢çš„è§†é¢‘å±•ç¤ºäº†å¦‚ä½•åˆ›å»º OpenFaaS æ ˆï¼Œå¹¶åœ¨å®é™…ä¸­ä½¿ç”¨ï¼š&lt;/p>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=kX8mXv5d1qg&amp;amp;feature=youtu.be" target="_blank" rel="noopener"
>https://www.youtube.com/watch?v=kX8mXv5d1qg&amp;feature=youtu.be&lt;/a>&lt;/p>
&lt;p>è¿™é‡Œæ˜¯åˆ›å»ºæ ˆçš„&lt;code>compose.yml&lt;/code>æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">alertmanager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">functions/alertmanager:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">io.rancher.container.pull_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stop_signal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">SIGTERM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stdin_open&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tty&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scale&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">faas-rancher&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">CATTLE_URL=${CATTLE_URL}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">CATTLE_ACCESS_KEY=${CATTLE_ACCESS_KEY}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">CATTLE_SECRET_KEY=${CATTLE_SECRET_KEY}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">FUNCTION_STACK_NAME=faas-functions&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kenfdev/faas-rancher:v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">io.rancher.container.pull_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stop_signal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">SIGTERM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stdin_open&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tty&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scale&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">functions_provider_url=http://faas-rancher:8080/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">functions/gateway:0.6.6-beta1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">io.rancher.container.pull_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8080&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="l">/tcp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stop_signal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">SIGTERM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stdin_open&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tty&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scale&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>-&lt;span class="l">config.file=/etc/prometheus/prometheus.yml, -storage.local.path=/prometheus,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>-&lt;span class="l">storage.local.memory-chunks=10000, &amp;#39;--alertmanager.url=http://alertmanager:9093&amp;#39;]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kenfdev/prometheus:latest-cattle&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">io.rancher.container.pull_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stop_signal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">SIGTERM&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stdin_open&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tty&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scale&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘åœ¨ Rancher 2.0 ä¸­æ‰¾åˆ°ä¸€ä¸ªæ¯”è¾ƒé…·çš„ç‚¹æ˜¯&lt;code>compose.yml&lt;/code>æ–‡ä»¶ä¸­çš„å˜é‡éƒ½å¯ä»¥åœ¨ UI ä¸­è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://cdn-images-1.medium.com/max/800/1*EBWsJ76oelqjtXIFozZSkQ.png"
loading="lazy"
>&lt;/p>
&lt;p>æ–°çš„&lt;a class="link" href="https://github.com/kenfdev/faas-rancher/tree/v3" target="_blank" rel="noopener"
>faas-rancher&lt;/a>é¡¹ç›®å·²ç»è½¬æ¢ä¸ºä½¿ç”¨ Rancher çš„ v3 ç‰ˆæœ¬çš„ APIï¼Œè€Œä¸”åŸºæœ¬ä¸Šå·²ç»é€šè¿‡äº†æµ‹è¯•ã€‚æ¬¢è¿è´¡çŒ®å’Œåé¦ˆã€‚&lt;/p></description></item><item><title>openfaas-workshop-lab4</title><link>https://example.com/p/openfaas-workshop-lab4/</link><pubDate>Mon, 02 Jul 2018 09:32:59 +0000</pubDate><guid>https://example.com/p/openfaas-workshop-lab4/</guid><description>&lt;h1 id="å®éªŒ-4--æ›´æ·±å…¥åœ°ä½¿ç”¨å‡½æ•°">å®éªŒ 4&amp;ndash;æ›´æ·±å…¥åœ°ä½¿ç”¨å‡½æ•°&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>åœ¨å¼€å§‹æœ¬å®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚ç”±äºæœ¬å®éªŒæ˜¯å»ºç«‹åœ¨æ—©æœŸå®éªŒçš„åŸºç¡€ä¸Šçš„ï¼Œæ‰€ä»¥è¯·å¤åˆ¶ lab3ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ cp -r lab3 lab4\
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;amp;&amp;amp; cd lab4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥é…ç½®">é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥é…ç½®&lt;/h2>
&lt;p>èƒ½å¤Ÿæ§åˆ¶ä¸€ä¸ªå‡½æ•°åœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºæ–¹å¼æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®ç°è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;h3 id="åœ¨éƒ¨ç½²æ—¶">åœ¨éƒ¨ç½²æ—¶&lt;/h3>
&lt;p>*åœ¨éƒ¨ç½²æ—¶è®¾ç½®ç¯å¢ƒå˜é‡&lt;/p>
&lt;p>æˆ‘ä»¬åœ¨&lt;a class="link" href="./lab3.md" >Lab 3&lt;/a>ä¸­ç”¨&lt;code>write_debug&lt;/code>åšäº†è¿™ä¸ª - ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®ä»»ä½•ä½ æƒ³è¦çš„è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ - ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ä¸ºä½ çš„&lt;em>hello world&lt;/em>å‡½æ•°é…ç½®ä¸€ç§è¯­è¨€ï¼Œä½ å¯ä»¥å¼•å…¥ä¸€ä¸ª&lt;code>spoken_language&lt;/code>å˜é‡ã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨-http-ä¸Šä¸‹æ–‡--querystring--headers">ä½¿ç”¨ HTTP ä¸Šä¸‹æ–‡&amp;ndash;querystring / headers&lt;/h3>
&lt;p>*ä½¿ç”¨ querystring å’Œ HTTP headers&lt;/p>
&lt;p>å¦ä¸€ä¸ªæ›´åŠ¨æ€çš„ã€å¯ä»¥åœ¨æ¯ä¸ªè¯·æ±‚å±‚é¢ä¸Šæ”¹å˜çš„é€‰é¡¹æ˜¯ä½¿ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²å’Œ HTTP å¤´ä¿¡æ¯ï¼Œä¸¤è€…éƒ½å¯ä»¥é€šè¿‡&lt;code>faas-cli&lt;/code>æˆ–&lt;code>curl&lt;/code>ä¼ é€’ã€‚&lt;/p>
&lt;p>è¿™äº›å¤´ä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡æš´éœ²å‡ºæ¥ï¼Œæ‰€ä»¥å®ƒä»¬å¾ˆå®¹æ˜“åœ¨ä½ çš„å‡½æ•°ä¸­è¢«ä½¿ç”¨ã€‚æ‰€ä»¥ä»»ä½•å¤´ä¿¡æ¯éƒ½ä»¥&lt;code>Http_&lt;/code>ä¸ºå‰ç¼€ï¼Œæ‰€æœ‰&lt;code>-&lt;/code>è¿å­—ç¬¦éƒ½è¢«æ›¿æ¢æˆ&lt;code>_&lt;/code>ä¸‹åˆ’çº¿ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬ç”¨ querystring å’Œä¸€ä¸ªåˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡çš„å‡½æ•°æ¥è¯•è¯•ã€‚&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ BusyBox çš„å†…ç½®å‘½ä»¤ï¼Œéƒ¨ç½²ä¸€ä¸ªæ‰“å°ç¯å¢ƒå˜é‡çš„å‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli deploy --name env --fprocess=&amp;#34;env&amp;#34; --image=&amp;#34;function/alpine:latest&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ç”¨ä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²è°ƒç”¨è¯¥å‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke env --query &lt;span class="nv">workshop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/bin:/usr/local/bin:/usr/bin:/sbin:/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOSTNAME&lt;/span>&lt;span class="o">=&lt;/span>05e8db360c5a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fprocess&lt;/span>&lt;span class="o">=&lt;/span>env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOME&lt;/span>&lt;span class="o">=&lt;/span>/root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Connection&lt;/span>&lt;span class="o">=&lt;/span>close
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Content_Type&lt;/span>&lt;span class="o">=&lt;/span>text/plain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Call_Id&lt;/span>&lt;span class="o">=&lt;/span>cdbed396-a20a-43fe-9123-1d5a122c976d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Forwarded_For&lt;/span>&lt;span class="o">=&lt;/span>10.255.0.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Start_Time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1519729562486546741&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_User_Agent&lt;/span>&lt;span class="o">=&lt;/span>Go-http-client/1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Accept_Encoding&lt;/span>&lt;span class="o">=&lt;/span>gzip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Method&lt;/span>&lt;span class="o">=&lt;/span>POST
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_ContentLength&lt;/span>&lt;span class="o">=&lt;/span>-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Path&lt;/span>&lt;span class="o">=&lt;/span>/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Query&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">workshop&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ Python ä»£ç ä¸­ï¼Œä½ ä¼šè¾“å…¥&lt;code>os.getenv(&amp;quot;Http_Query&amp;quot;)&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>å°†è·¯å¾„é™„åŠ åˆ°ä½ çš„å‡½æ•° URL ä¸Š&lt;/li>
&lt;/ul>
&lt;p>ç”¨ä»¥ä¸‹æ–¹æ³•è°ƒç”¨ env å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ curl -X GET &lt;span class="nv">$OPENFAAS_URL&lt;/span>/function/env/some/path -d &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/sbin:/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOSTNAME&lt;/span>&lt;span class="o">=&lt;/span>fae2ac4b75f9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fprocess&lt;/span>&lt;span class="o">=&lt;/span>env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOME&lt;/span>&lt;span class="o">=&lt;/span>/root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Forwarded_Host&lt;/span>&lt;span class="o">=&lt;/span>127.0.0.1:8080
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Start_Time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1539370471902481800&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Accept_Encoding&lt;/span>&lt;span class="o">=&lt;/span>gzip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_User_Agent&lt;/span>&lt;span class="o">=&lt;/span>curl/7.54.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Accept&lt;/span>&lt;span class="o">=&lt;/span>*/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Forwarded_For&lt;/span>&lt;span class="o">=&lt;/span>10.255.0.2:60460
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Call_Id&lt;/span>&lt;span class="o">=&lt;/span>bb86b4fb-641b-463d-ae45-af68c1aa0d42
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Method&lt;/span>&lt;span class="o">=&lt;/span>GET
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_ContentLength&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Path&lt;/span>&lt;span class="o">=&lt;/span>/some/path
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œ&lt;code>Http_Path&lt;/code>å¤´åŒ…å«ä½ çš„è·¯å¾„ã€‚
å¦‚æœä½ æƒ³åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨å®ƒï¼Œåªè¦ç”¨&lt;code>os.getenv(&amp;quot;Http_Path&amp;quot;)&lt;/code>æ¥è·å–å®ƒã€‚&lt;/p>
&lt;ul>
&lt;li>ç°åœ¨ç”¨æ ‡å¤´æ¥è°ƒç”¨å®ƒã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ curl &lt;span class="nv">$OPENFAAS_URL&lt;/span>/function/env --header &lt;span class="s2">&amp;#34;X-Output-Mode: json&amp;#34;&lt;/span> -d &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/bin:/usr/local/bin:/usr/bin:/sbin:/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOSTNAME&lt;/span>&lt;span class="o">=&lt;/span>05e8db360c5a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">fprocess&lt;/span>&lt;span class="o">=&lt;/span>env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HOME&lt;/span>&lt;span class="o">=&lt;/span>/root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Call_Id&lt;/span>&lt;span class="o">=&lt;/span>8e597bcf-614f-4ca5-8f2e-f345d660db5e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Forwarded_For&lt;/span>&lt;span class="o">=&lt;/span>10.255.0.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Start_Time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1519729577415481886&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Accept&lt;/span>&lt;span class="o">=&lt;/span>*/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Accept_Encoding&lt;/span>&lt;span class="o">=&lt;/span>gzip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Connection&lt;/span>&lt;span class="o">=&lt;/span>close
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_User_Agent&lt;/span>&lt;span class="o">=&lt;/span>curl/7.55.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Method&lt;/span>&lt;span class="o">=&lt;/span>GET
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_ContentLength&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_Path&lt;/span>&lt;span class="o">=&lt;/span>/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Http_X_Output_Mode&lt;/span>&lt;span class="o">=&lt;/span>json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ Python ä»£ç ä¸­ï¼Œä½ ä¼šè¾“å…¥`os.getenv(&amp;ldquo;Http_X_Output_Mode&amp;rdquo;)&amp;rsquo;ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥çœ‹åˆ°æ‰€æœ‰å…¶ä»–çš„ HTTP ä¸Šä¸‹æ–‡ä¹Ÿè¢«æä¾›äº†ï¼Œæ¯”å¦‚å½“ &lt;code>Http_Method&lt;/code>æ˜¯ &lt;code>POST&lt;/code>æ—¶çš„ &lt;code>Content-Length&lt;/code>ï¼Œ&lt;code>User_Agent&lt;/code>ï¼ŒCookies å’Œå…¶ä»–ä½ æœŸæœ›ä» HTTP è¯·æ±‚ä¸­çœ‹åˆ°çš„ä¸œè¥¿ã€‚&lt;/p>
&lt;h2 id="å®‰å…¨åªè¯»æ–‡ä»¶ç³»ç»Ÿ">å®‰å…¨ï¼šåªè¯»æ–‡ä»¶ç³»ç»Ÿ&lt;/h2>
&lt;p>OpenFaaS å¯ä»¥ä½¿ç”¨çš„å®¹å™¨å®‰å…¨ç‰¹æ€§ä¹‹ä¸€æ˜¯ä½¿æˆ‘ä»¬æ‰§è¡Œç¯å¢ƒçš„æ ¹æ–‡ä»¶ç³»ç»Ÿåªè¯»çš„èƒ½åŠ›ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°è¢«ç ´åï¼Œè¿™å¯ä»¥å‡å°‘æ”»å‡»é¢ã€‚&lt;/p>
&lt;p>ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œå°†æ–‡ä»¶ä¿å­˜åˆ°å‡½æ•°çš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli new --lang python3 ingest-file --prefix&lt;span class="o">=&lt;/span>your-name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´æ–°å¤„ç†ç¨‹åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Read the path or a default from environment variable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;save_path&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/home/app/&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># generate a name using the current timestamp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># write a file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">file_name&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å»ºç«‹è¿™ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli up -f ingest-file.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è°ƒç”¨è¯¥ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Hello function&amp;#34;&lt;/span> &amp;gt; message.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat message.txt &lt;span class="p">|&lt;/span> faas-cli invoke -f ingest-file.yml ingest-file
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯¥æ–‡ä»¶å°†è¢«å†™å…¥&lt;code>/home/app&lt;/code>è·¯å¾„ä¸­ã€‚&lt;/p>
&lt;p>ç°åœ¨ç¼–è¾‘ ingest-file.yml å¹¶ä½¿è¯¥å‡½æ•°ä¸ºåªè¯»ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ingest-file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./ingest-file&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">alexellis2/ingest-file:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">readonly_root_filesystem&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>ä¹Ÿè¯·å‚è§ã€‚&lt;a class="link" href="https://docs.openfaas.com/reference/yaml/#function-read-only-root-filesystem" target="_blank" rel="noopener"
>YAML å‚è€ƒ&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>å†æ¬¡éƒ¨ç½²ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli up -f ingest-file.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨è¿™å°†ä¼šå¤±è´¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Hello function&amp;#34;&lt;/span> &amp;gt; message.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat message.txt &lt;span class="p">|&lt;/span> faas-cli invoke -f ingest-file.yml ingest-file
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯·çœ‹é”™è¯¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">Server returned unexpected status code: &lt;span class="m">500&lt;/span> - &lt;span class="nb">exit&lt;/span> status &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Traceback &lt;span class="o">(&lt;/span>most recent call last&lt;span class="o">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> File &lt;span class="s2">&amp;#34;index.py&amp;#34;&lt;/span>, line 19, in &amp;lt;module&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">ret&lt;/span> &lt;span class="o">=&lt;/span> handler.handle&lt;span class="o">(&lt;/span>st&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> File &lt;span class="s2">&amp;#34;/home/app/function/handler.py&amp;#34;&lt;/span>, line 13, in handle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with open&lt;span class="o">(&lt;/span>file_name, &lt;span class="s2">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> as f:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OSError: &lt;span class="o">[&lt;/span>Errno 30&lt;span class="o">]&lt;/span> Read-only file system: &lt;span class="s1">&amp;#39;/home/app/1556714998.092464&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†å†™åˆ°ä¸€ä¸ªä¸´æ—¶åŒºåŸŸï¼Œè®¾ç½®ç¯å¢ƒå˜é‡&lt;code>save_path&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ingest-file&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./ingest-file&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">alexellis2/ingest-file:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">readonly_root_filesystem&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">save_path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/tmp/&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ å¯ä»¥å†è¿è¡Œä¸€æ¬¡&lt;code>faas-cli up -f ingest-file.yml&lt;/code>æ¥æµ‹è¯•è¿™ä¸ªä¿®æ­£ï¼Œæ–‡ä»¶å°†è¢«å†™å…¥&lt;code>/tmp/&lt;/code>ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ç°åœ¨æœ‰èƒ½åŠ›é”å®šæˆ‘ä»¬çš„å‡½æ•°ä»£ç ï¼Œä½¿å…¶ä¸èƒ½è¢«æ„å¤–æ”¹å˜æˆ–æ¶æ„æ›´æ–°ã€‚&lt;/p>
&lt;h2 id="åˆ©ç”¨æ—¥å¿—è®°å½•">åˆ©ç”¨æ—¥å¿—è®°å½•&lt;/h2>
&lt;p>OpenFaaS çœ‹é—¨ç‹—é€šè¿‡æ ‡å‡† I/O æµ&lt;code>stdin&lt;/code>å’Œ&lt;code>stdout&lt;/code>ä¼ å…¥ HTTP è¯·æ±‚å’Œè¯»å– HTTP å“åº”æ¥è¿è¡Œã€‚è¿™æ„å‘³ç€ä½œä¸ºä¸€ä¸ªå‡½æ•°è¿è¡Œçš„è¿›ç¨‹ä¸éœ€è¦çŸ¥é“ä»»ä½•å…³äºç½‘ç»œæˆ– HTTP çš„ä¿¡æ¯ã€‚&lt;/p>
&lt;p>ä¸€ä¸ªæœ‰è¶£çš„æƒ…å†µæ˜¯ï¼Œå½“ä¸€ä¸ªå‡½æ•°ä»¥éé›¶é€€å‡ºä»£ç é€€å‡ºæ—¶ï¼Œ&lt;code>stderr&lt;/code>ä¸æ˜¯ç©ºçš„ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå‡½æ•°çš„&lt;code>stdout/stderr&lt;/code>æ˜¯åˆå¹¶çš„ï¼Œ&lt;code>stderr&lt;/code>ä¸è¢«æ‰“å°åˆ°æ—¥å¿—ä¸­ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬ç”¨&lt;a class="link" href="./lab3.md#hello-world-in-python" >Lab 3&lt;/a>ä¸­çš„&lt;code>hello-openfaas&lt;/code>å‡½æ•°æ¥æ£€æŸ¥ã€‚&lt;/p>
&lt;p>å°†&lt;code>handler.py&lt;/code>çš„ä»£ç æ”¹ä¸º&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">sys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">stderr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;This should be an error message.&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dumps&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s2">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;OpenFaaS&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ„å»ºå’Œéƒ¨ç½²&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli up -f hello-openfaas.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ç”¨ä»¥ä¸‹æ–¹æ³•è°ƒç”¨è¯¥å‡½æ•°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke hello-openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ åº”è¯¥çœ‹åˆ°åˆå¹¶è¾“å‡ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">This should be an error message.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{&amp;#34;Hello&amp;#34;: &amp;#34;OpenFaaS&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šå¦‚æœä½ ç”¨&lt;code>docker service logs hello-openfaas&lt;/code>æ£€æŸ¥å®¹å™¨æ—¥å¿—ï¼ˆæˆ–è€…&lt;code>kubectl logs deployment/hello-openfaas -n openfaas-fn&lt;/code>ï¼‰ï¼Œä½ åº”è¯¥çœ‹ä¸åˆ° stderr è¾“å‡ºã€‚&lt;/p>
&lt;/blockquote>
&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸ªå‡½æ•°è¿”å›æœ‰æ•ˆçš„ JSONï¼Œå¯ä»¥è¢«è§£æã€‚ä¸å¹¸çš„æ˜¯ï¼Œæ—¥å¿—ä¿¡æ¯ä½¿è¾“å‡ºæ— æ•ˆã€‚
æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†è¿™äº›ä¿¡æ¯ä» stderr é‡å®šå‘åˆ°å®¹å™¨çš„æ—¥å¿—ä¸­ã€‚
OpenFaaS æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥ä½ å¯ä»¥å°†é”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ—¥å¿—ä¸­ï¼Œå¹¶ä¿æŒå‡½æ•°å“åº”çš„æ¸…æ™°ï¼Œåªè¿”å›&lt;code>stdout&lt;/code>ã€‚
ä¸ºæ­¤ä½ åº”è¯¥ä½¿ç”¨&lt;code>combine_output&lt;/code>æ ‡å¿—ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬æ¥è¯•è¯•ã€‚æ‰“å¼€&lt;code>hello-openfaas.yml&lt;/code>æ–‡ä»¶ï¼Œæ·»åŠ è¿™äº›è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">combine_output&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éƒ¨ç½²å¹¶è°ƒç”¨è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;p>è¾“å‡ºåº”è¯¥æ˜¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">{&amp;#34;Hello&amp;#34;: &amp;#34;OpenFaaS&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ£€æŸ¥å®¹å™¨æ—¥å¿—ä¸­çš„&lt;code>stderr&lt;/code>ã€‚ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼çš„ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">hello-openfaas.1.2xtrr2ckkkth@linuxkit-025000000001 | 2018/04/03 08:35:24 stderr: This should be an error message.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åˆ›å»ºå·¥ä½œæµ">åˆ›å»ºå·¥ä½œæµ&lt;/h2>
&lt;p>åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼ŒæŠŠä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ è¿™åœ¨å®¢æˆ·ç«¯å’Œé€šè¿‡ API ç½‘å…³éƒ½å¯ä»¥å®ç°ã€‚&lt;/p>
&lt;h3 id="å®¢æˆ·ç«¯ä¸Šçš„è¿é”å‡½æ•°">å®¢æˆ·ç«¯ä¸Šçš„è¿é”å‡½æ•°&lt;/h3>
&lt;p>ä½ å¯ä»¥ä½¿ç”¨&lt;code>curl&lt;/code>ã€&lt;code>faas-cli&lt;/code>æˆ–ä¸€äº›ä½ è‡ªå·±çš„ä»£ç å°†ä¸€ä¸ªå‡½æ•°çš„ç»“æœè¾“é€åˆ°å¦ä¸€ä¸ªå‡½æ•°ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ã€‚&lt;/p>
&lt;p>ä¼˜ç‚¹ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¸éœ€è¦ä»£ç  - å¯ä»¥ç”¨ CLI ç¨‹åºå®Œæˆ
*å¿«é€Ÿå¼€å‘å’Œæµ‹è¯•
*å®¹æ˜“åœ¨ä»£ç ä¸­å»ºæ¨¡&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹ã€‚&lt;/p>
&lt;ul>
&lt;li>é¢å¤–çš„å»¶è¿Ÿ - æ¯ä¸ªå‡½æ•°éƒ½è¦è¿”å›åˆ°æœåŠ¡å™¨ä¸Š&lt;/li>
&lt;li>èŠå¤©ï¼ˆæ›´å¤šçš„ä¿¡æ¯ï¼‰&lt;/li>
&lt;/ul>
&lt;p>ä¾‹å­ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä»&lt;em>å‡½æ•°åº“&lt;/em>éƒ¨ç½² NodeInfo å‡½æ•°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç„¶åé€šè¿‡ Markdown è½¬æ¢å™¨æ¨é€ NodeInfo çš„è¾“å‡º&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> -n &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke nodeinfo &lt;span class="p">|&lt;/span> faas-cli invoke markdown
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p&amp;gt;Hostname: 64767782518c&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p&amp;gt;Platform: linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Arch: x64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CPU count: &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Uptime: 1121466&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ ä¼šçœ‹åˆ° NodeInfo å‡½æ•°çš„è¾“å‡ºè¢«è£…é¥°æˆ HTML æ ‡ç­¾ï¼Œä¾‹å¦‚ã€‚&lt;code>&amp;lt;p&amp;gt;&lt;/code>.&lt;/p>
&lt;p>å¦ä¸€ä¸ªå®¢æˆ·ç«¯å‡½æ•°é“¾çš„ä¾‹å­å¯èƒ½æ˜¯è°ƒç”¨ä¸€ä¸ªç”Ÿæˆå›¾åƒçš„å‡½æ•°ï¼Œç„¶åå°†è¯¥å›¾åƒå‘é€åˆ°å¦ä¸€ä¸ªæ·»åŠ æ°´å°çš„å‡½æ•°ä¸­ã€‚&lt;/p>
&lt;h3 id="ä»å¦ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•°">ä»å¦ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•°&lt;/h3>
&lt;p>ä»å¦ä¸€ä¸ªå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æœ€ç®€å•æ–¹æ³•æ˜¯é€šè¿‡ OpenFaaS &lt;em>API ç½‘å…³&lt;/em>é€šè¿‡ HTTP è¿›è¡Œè°ƒç”¨ã€‚è¿™ä¸ªè°ƒç”¨ä¸éœ€è¦çŸ¥é“å¤–éƒ¨åŸŸåæˆ– IP åœ°å€ï¼Œå®ƒå¯ä»¥ç®€å•åœ°é€šè¿‡ DNS æ¡ç›®å°† API ç½‘å…³ç§°ä¸º&lt;code>gateway&lt;/code>ã€‚&lt;/p>
&lt;p>å½“ä»ä¸€ä¸ªå‡½æ•°è®¿é—® API ç½‘å…³ç­‰æœåŠ¡æ—¶ï¼Œæœ€å¥½çš„åšæ³•æ˜¯ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥é…ç½®ä¸»æœºåï¼Œè¿™å¾ˆé‡è¦ï¼Œæœ‰ä¸¤ä¸ªåŸå› &amp;ndash;åç§°å¯èƒ½ä¼šæ”¹å˜ï¼Œåœ¨ Kubernetes ä¸­æœ‰æ—¶éœ€è¦ä¸€ä¸ªåç¼€ã€‚&lt;/p>
&lt;p>ä¼˜ç‚¹ã€‚&lt;/p>
&lt;ul>
&lt;li>å‡½æ•°ä¹‹é—´å¯ä»¥ç›´æ¥åˆ©ç”¨å¯¹æ–¹&lt;/li>
&lt;li>ä½å»¶è¿Ÿï¼Œå› ä¸ºå‡½æ•°å¯ä»¥åœ¨åŒä¸€ç½‘ç»œä¸Šç›¸äº’è®¿é—®&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹ã€‚&lt;/p>
&lt;ul>
&lt;li>éœ€è¦ä¸€ä¸ªä»£ç åº“æ¥è¿›è¡Œ HTTP è¯·æ±‚&lt;/li>
&lt;/ul>
&lt;p>ä¾‹å­ã€‚&lt;/p>
&lt;p>åœ¨&lt;a class="link" href="./lab3.md" >å®éªŒå®¤ 3&lt;/a>ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† request æ¨¡å—ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥è°ƒç”¨ä¸€ä¸ªè¿œç¨‹ APIï¼Œä»¥è·å¾—å›½é™…ç©ºé—´ç«™ä¸Šçš„ä¸€ä¸ªå®‡èˆªå‘˜çš„åå­—ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæ ·çš„æŠ€æœ¯æ¥è°ƒç”¨éƒ¨ç½²åœ¨ OpenFaaS ä¸Šçš„å¦ä¸€ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ç”¨æˆ·ç•Œé¢ï¼Œè¿›å…¥&lt;em>å‡½æ•°å•†åº—&lt;/em>å¹¶éƒ¨ç½²&lt;em>æƒ…æ„Ÿåˆ†æ&lt;/em>å‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;p>æˆ–è€…ä½¿ç”¨ CLIã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli store deploy SentimentAnalysis
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æƒ…æ„Ÿåˆ†æå‡½æ•°å°†å‘Šè¯‰ä½ ä»»ä½•å¥å­çš„ä¸»è§‚æ€§å’Œææ€§ï¼ˆç§¯ææ€§è¯„çº§ï¼‰ã€‚è¯¥å‡½æ•°çš„ç»“æœæ˜¯ä»¥ JSON æ ¼å¼æ˜¾ç¤ºçš„ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> -n &lt;span class="s2">&amp;#34;California is great, it&amp;#39;s always sunny there.&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke sentimentanalysis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;polarity&amp;#34;&lt;/span>: 0.8, &lt;span class="s2">&amp;#34;sentence_count&amp;#34;&lt;/span>: 1, &lt;span class="s2">&amp;#34;subjectivity&amp;#34;&lt;/span>: 0.75&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å› æ­¤ï¼Œç»“æœæ˜¾ç¤ºæˆ‘ä»¬çš„æµ‹è¯•å¥å­æ—¢éå¸¸ä¸»è§‚ï¼ˆ75%ï¼‰åˆéå¸¸ç§¯æï¼ˆ80%ï¼‰ã€‚è¿™ä¸¤ä¸ªå­—æ®µçš„å€¼æ€»æ˜¯åœ¨&lt;code>-1.00&lt;/code>å’Œ&lt;code>1.00&lt;/code>ä¹‹é—´ã€‚&lt;/p>
&lt;p>ä¸‹é¢çš„ä»£ç å¯ä»¥ç”¨æ¥è°ƒç”¨&lt;em>æƒ…ç»ªåˆ†æ&lt;/em>å‡½æ•°æˆ–ä»»ä½•å…¶ä»–å‡½æ•°ã€‚&lt;/p>
&lt;p>ç»™ç½‘å…³ä¸»æœºåŠ ä¸Š&lt;code>openfaas&lt;/code>å‘½åç©ºé—´çš„åç¼€ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http://gateway.openfaas:8080/function/sentimentanalysis&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">text&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">test_sentence&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…é€šè¿‡ä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gateway_hostname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;gateway_hostname&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;gateway.openfaas&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># uses a default of &amp;#34;gateway.openfaas&amp;#34; for when &amp;#34;gateway_hostname&amp;#34; is not set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">test_sentence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;California is great, it&amp;#39;s always sunny there.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http://&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">gateway_hostname&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;:8080/function/sentimentanalysis&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">test_sentence&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”±äºç»“æœæ€»æ˜¯ä»¥ JSON æ ¼å¼å‡ºç°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¾…åŠ©å‡½æ•°&lt;code>.json()&lt;/code>æ¥è½¬æ¢å“åº”ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;polarity&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mf">0.45&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;That was probably positive&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;That was neutral or negative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ï¼Œåœ¨ Python ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶å°†å…¶å…¨éƒ¨æ•´åˆèµ·æ¥&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">requests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">sys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;handle a request to the function
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Args:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> req (str): request body
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gateway_hostname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;gateway_hostname&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;gateway.openfaas&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># uses a default of &amp;#34;gateway&amp;#34; for when &amp;#34;gateway_hostname&amp;#34; is not set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">test_sentence&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">req&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http://&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">gateway_hostname&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;:8080/function/sentimentanalysis&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">test_sentence&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Error with sentimentanalysis, expected: &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s2">, got: &lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">status_code&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;polarity&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mf">0.45&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;That was probably positive&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;That was neutral or negative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>è®°å¾—åœ¨ä½ çš„&lt;code>requirements.txt&lt;/code>æ–‡ä»¶ä¸­åŠ å…¥&lt;code>requests&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ³¨æ„ï¼šä½ ä¸éœ€è¦ä¿®æ”¹æˆ–æ”¹å˜ SentimentAnalysis å‡½æ•°çš„æºä»£ç ï¼Œæˆ‘ä»¬å·²ç»éƒ¨ç½²äº†å®ƒå¹¶å°†é€šè¿‡ API ç½‘å…³è®¿é—®å®ƒã€‚&lt;/p>
&lt;p>ç°åœ¨è½¬åˆ°&lt;a class="link" href="lab5.md" >å®éªŒå®¤ 5&lt;/a>ã€‚&lt;/p></description></item><item><title>ubuntu-docker-sudo</title><link>https://example.com/p/ubuntu-docker-sudo/</link><pubDate>Fri, 29 Jun 2018 13:54:25 +0000</pubDate><guid>https://example.com/p/ubuntu-docker-sudo/</guid><description>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">sudo chown &amp;#34;$USER&amp;#34;:&amp;#34;$USER&amp;#34; /home/&amp;#34;$USER&amp;#34;/.docker -R
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chmod g+rwx &amp;#34;/home/$USER/.docker&amp;#34; -R
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">https://api.finochat.com/api/v1/platform/apps/RETAIL/profiles/@custom:finolabs.com.cn/avatar?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmY2lkIjoiQHBjdXN0b20tMTA6Zmlub2xhYnMuY29tLmNuIiwiaXNzIjoieUNkNXVhaWRhWU4zc1pwTTdHU2V5WWVqSGdlN3hSa1EiLCJpYXQiOjE1MzAyNjk5NDh9.UUsO2xw1f8cA6FiG1bNAGyYQh-vh32hKHKSJ2EKZicI
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http://localhost:3000/api/v1/platform/apps/RETAIL/profiles/@custom:finolabs.com.cn/avatar?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJmY2lkIjoiQHBjdXN0b20tMTA6Zmlub2xhYnMuY29tLmNuIiwiaXNzIjoieUNkNXVhaWRhWU4zc1pwTTdHU2V5WWVqSGdlN3hSa1EiLCJpYXQiOjE1MzAyNjk5NDh9.UUsO2xw1f8cA6FiG1bNAGyYQh-vh32hKHKSJ2EKZicI
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>openfaas-workshop-lab3</title><link>https://example.com/p/openfaas-workshop-lab3/</link><pubDate>Thu, 28 Jun 2018 17:29:56 +0000</pubDate><guid>https://example.com/p/openfaas-workshop-lab3/</guid><description>&lt;h1 id="å®éªŒ-3--å‡½æ•°ä»‹ç»">å®éªŒ 3&amp;ndash;å‡½æ•°ä»‹ç»&lt;/h1>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>åœ¨å¼€å§‹è¿™ä¸ªå®éªŒä¹‹å‰ï¼Œä¸ºä½ çš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ mkdir -p lab3&lt;span class="se">\`&lt;/span>s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> lab3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°">åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°&lt;/h2>
&lt;p>æœ‰ä¸¤ç§æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ä¸€ä¸ªå†…ç½®çš„æˆ–ç¤¾åŒºçš„ä»£ç æ¨¡æ¿å»ºç«‹ä¸€ä¸ªå‡½æ•°ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰&lt;/li>
&lt;li>ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶å¹¶å°†å…¶ä½œä¸ºä½ çš„å‡½æ•°ï¼ˆé«˜çº§ï¼‰&lt;/li>
&lt;/ul>
&lt;h3 id="æ„å»ºæˆ–ç”Ÿæˆä¸€ä¸ªæ–°å‡½æ•°">æ„å»ºæˆ–ç”Ÿæˆä¸€ä¸ªæ–°å‡½æ•°&lt;/h3>
&lt;p>åœ¨ç”¨æ¨¡æ¿åˆ›å»ºæ–°å‡½æ•°ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ ä» GitHub ä¸Šæå–äº†&lt;a class="link" href="https://github.com/openfaas/templates" target="_blank" rel="noopener"
>æ¨¡æ¿&lt;/a>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ faas-cli template pull
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Fetch templates from repository: https://github.com/openfaas/templates.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Attempting to expand templates from https://github.com/openfaas/templates.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2021/08/25 15:58:10 Fetched &lt;span class="m">13&lt;/span> template&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> : &lt;span class="o">[&lt;/span>csharp dockerfile go java11 java11-vert-x node node12 node14 php7 python python3 python3-debian ruby&lt;span class="o">]&lt;/span> from https://github.com/openfaas/templates.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹‹åï¼Œè¦æƒ³çŸ¥é“å“ªäº›è¯­è¨€æ˜¯å¯ç”¨çš„ï¼Œè¯·é”®å…¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ faas-cli new --list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Languages available as templates:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- csharp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- java11
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- java11-vert-x
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- node12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- node14
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- php7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- python3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- python3-debian
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- ruby
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…åˆ›å»ºä¸€ä¸ªåŒ…å«&lt;code>Dockerfile&lt;/code>çš„æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨ YAML æ–‡ä»¶ä¸­é€‰æ‹© &lt;code>Dockerfile&lt;/code>è¯­è¨€ç±»å‹ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ å¯ä»¥ä¸º Pythonã€Python 3ã€Rubyã€Goã€Nodeã€CSharp ç­‰åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>å…³äºæˆ‘ä»¬çš„ä¾‹å­çš„è¯´æ˜&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬è¿™æ¬¡ç ”è®¨ä¼šçš„æ‰€æœ‰ä¾‹å­éƒ½ç»è¿‡äº† OpenFaaS ç¤¾åŒºå¯¹&lt;em>Python 3&lt;/em>çš„å…¨é¢æµ‹è¯•ï¼Œä½†ä¹Ÿåº”è¯¥ä¸&lt;em>Python 2.7&lt;/em>å…¼å®¹ã€‚&lt;/p>
&lt;p>å¦‚æœä½ å–œæ¬¢ä½¿ç”¨ Python 2.7 è€Œä¸æ˜¯ Python 3ï¼Œé‚£ä¹ˆæŠŠ&lt;code>faas-cli new --lang python3&lt;/code>æ¢æˆ&lt;code>faas-cli new --lang python&lt;/code>ã€‚&lt;/p>
&lt;h3 id="python-ä¸­çš„-hello-world">Python ä¸­çš„ Hello world&lt;/h3>
&lt;p>æˆ‘ä»¬å°†åœ¨ Python ä¸­åˆ›å»ºä¸€ä¸ª hello-world å‡½æ•°ï¼Œç„¶åè½¬åˆ°ä¹Ÿä½¿ç”¨é¢å¤–ä¾èµ–çš„ä¸œè¥¿ä¸Šã€‚&lt;/p>
&lt;ul>
&lt;li>æ„å»ºå‡½æ•°çš„è„šæ‰‹æ¶&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli new --lang python3 hello-openfaas --prefix&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;your-docker-username-here&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‚æ•°&lt;code>--prefix&lt;/code>å°†æ›´æ–°&lt;code>image:&lt;/code>&amp;ndash;prefix&lt;code>å‚æ•°å°†æ›´æ–°&lt;/code>hello-openfaas.yml&lt;code>ä¸­çš„å€¼ï¼Œå…¶å‰ç¼€åº”è¯¥æ˜¯ä½ çš„Docker Hubè´¦å·ã€‚å¯¹äº[OpenFaaS](https://hub.docker.com/r/functions)æ¥è¯´ï¼Œè¿™æ˜¯&lt;/code>image: functions/hello-openfaas&lt;code>ï¼Œå‚æ•°å°†æ˜¯&lt;/code>&amp;ndash;prefix=&amp;ldquo;function&amp;rdquo;`ã€‚&lt;/p>
&lt;p>å¦‚æœä½ åœ¨åˆ›å»ºå‡½æ•°æ—¶æ²¡æœ‰æŒ‡å®šå‰ç¼€ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºåç¼–è¾‘ YAML æ–‡ä»¶ã€‚&lt;/p>
&lt;p>è¿™å°†åˆ›å»ºä¸‰ä¸ªæ–‡ä»¶å’Œä¸€ä¸ªç›®å½•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">./hello-openfaas.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./hello-openfaas
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./hello-openfaas/handler.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./hello-openfaas/requirements.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>YAML (.yml) æ–‡ä»¶æ˜¯ç”¨æ¥é…ç½® CLI æ¥æ„å»ºã€æ¨é€å’Œéƒ¨ç½²ä½ çš„å‡½æ•°ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šæ¯å½“ä½ éœ€è¦åœ¨ Kubernetes æˆ–è¿œç¨‹ OpenFaaS å®ä¾‹ä¸Šéƒ¨ç½²ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä½ å¿…é¡»åœ¨æ„å»ºå‡½æ•°åæ¨é€å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªç¯å¢ƒå˜é‡è¦†ç›–é»˜è®¤çš„ç½‘å…³ URLï¼Œå³ 127.0.0.1:8080&lt;code>ã€‚&lt;/code>export OPENFAAS_URL=127.0.0.1:31112`.&lt;/p>
&lt;/blockquote>
&lt;p>ä¸‹é¢æ˜¯ YAML æ–‡ä»¶çš„å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://127.0.0.1:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hello-openfaas&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./hello-openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hello-openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>å‡½æ•°çš„åç§°ç”±&lt;code>functions&lt;/code>ä¸‹çš„é”®è¡¨ç¤ºï¼Œå³&lt;code>hello-openfaas&lt;/code>ã€‚&lt;/li>
&lt;li>è¯­è¨€ç”± &lt;code>lang&lt;/code> å­—æ®µè¡¨ç¤ºã€‚&lt;/li>
&lt;li>ç”¨äºæ„å»ºçš„æ–‡ä»¶å¤¹è¢«ç§°ä¸º &lt;code>handler&lt;/code>ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹è€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚&lt;/li>
&lt;li>è¦ä½¿ç”¨çš„ Docker é•œåƒåç§°åœ¨&lt;code>image&lt;/code>å­—æ®µä¸‹ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¯·è®°ä½ï¼Œ&lt;code>gateway&lt;/code>URL å¯ä»¥åœ¨ YAML æ–‡ä»¶ä¸­ï¼ˆé€šè¿‡ç¼–è¾‘&lt;code>provider:&lt;/code>ä¸‹çš„&lt;code>gateway:&lt;/code>å€¼ï¼‰æˆ–åœ¨ CLI ä¸Šï¼ˆé€šè¿‡ä½¿ç”¨&lt;code>--gateway&lt;/code>æˆ–è®¾ç½®&lt;code>OPENFAAS_URL&lt;/code>ç¯å¢ƒå˜é‡ï¼‰è¿›è¡Œè¦†ç›–ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯&lt;code>handler.py&lt;/code>æ–‡ä»¶çš„å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;handle a request to the function
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Args:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> req (str): request body
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">req&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªå‡½æ•°å°†åªæ˜¯è¿”å›è¾“å…¥ï¼Œæ‰€ä»¥å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ª&lt;code>echo&lt;/code>å‡½æ•°ã€‚&lt;/p>
&lt;p>ç¼–è¾‘ä¿¡æ¯ï¼Œä½¿å…¶è¿”å› &lt;code>Hello OpenFaaS&lt;/code>ï¼Œä¾‹å¦‚ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;Hello OpenFaaS&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»»ä½•è¿”å›åˆ° stdout çš„å€¼éƒ½ä¼šéšåè¿”å›åˆ°è°ƒç”¨ç¨‹åºã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code>print()&lt;/code>è¯­å¥ï¼Œå®ƒå°†è¡¨ç°å‡ºç±»ä¼¼çš„æµå‘ï¼Œå¹¶ä¼ é€’ç»™è°ƒç”¨ç¨‹åºã€‚&lt;/p>
&lt;p>è¿™æ˜¯æœ¬åœ°å¼€å‘äººå‘˜å¯¹å‡½æ•°çš„å·¥ä½œæµç¨‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli up -f hello-openfaas.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šåœ¨è¿è¡Œè¿™ä¸ªå‘½ä»¤ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»ç”¨&lt;code>docker login&lt;/code>å‘½ä»¤ç™»å½•äº† docker æ³¨å†Œä¸­å¿ƒã€‚
æ³¨æ„: &lt;code>faas-cli up&lt;/code>å‘½ä»¤å°†&lt;code>faas-cli&lt;/code>çš„æ„å»ºã€æ¨é€å’Œéƒ¨ç½²å‘½ä»¤åˆå¹¶ä¸ºä¸€æ¡å‘½ä»¤ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>éšåé€šè¿‡ç”¨æˆ·ç•Œé¢ã€CLIã€&lt;code>curl&lt;/code>æˆ–å…¶ä»–åº”ç”¨ç¨‹åºè°ƒç”¨è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;p>è¯¥å‡½æ•°å°†å§‹ç»ˆè·å¾—ä¸€ä¸ªè·¯ç”±ï¼Œä¾‹å¦‚ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$OPENFAAS_URL&lt;/span>/function/&amp;lt;function_name&amp;gt;ï¼ˆå‡½æ•°åï¼‰ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$OPENFAAS_URL&lt;/span>/function/figlet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$OPENFAAS_URL&lt;/span>/function/hello-openfaas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æç¤ºï¼šå¦‚æœä½ æŠŠ YAML æ–‡ä»¶é‡å‘½åä¸º&lt;code>stack.yml&lt;/code>ï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦å‘ä»»ä½•å‘½ä»¤ä¼ é€’&lt;code>-f&lt;/code>æ ‡å¿—ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å‡½æ•°åªèƒ½é€šè¿‡&lt;code>GET&lt;/code>æˆ–&lt;code>POST&lt;/code>æ–¹æ³•æ¥è°ƒç”¨ã€‚&lt;/p>
&lt;ul>
&lt;li>è°ƒç”¨ä½ çš„å‡½æ•°&lt;/li>
&lt;/ul>
&lt;p>ç”¨&lt;code>faas-cli invoke&lt;/code>æµ‹è¯•å‡½æ•°ï¼ŒæŸ¥çœ‹&lt;code>faas-cli invoke --help&lt;/code>è·å–æ›´å¤šé€‰é¡¹ã€‚&lt;/p>
&lt;h3 id="ç¤ºä¾‹å‡½æ•°astronaut-finder">ç¤ºä¾‹å‡½æ•°ï¼šastronaut-finder&lt;/h3>
&lt;p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸º &lt;code>astronaut-finder&lt;/code> çš„å‡½æ•°ï¼Œåœ¨å›½é™…ç©ºé—´ç«™ï¼ˆISSï¼‰ä¸Šéšæœºæ‹‰å‡ºä¸€ä¸ªå¤ªç©ºäººçš„åå­—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli new --lang python3 astronaut-finder --prefix&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;your-docker-username-here&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å°†ä¸ºæˆ‘ä»¬å†™ä¸‰ä¸ªæ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">./astronaut-finder/handler.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡½æ•°çš„å¤„ç†ç¨‹åº&amp;ndash;ä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¸¦æœ‰åŸå§‹è¯·æ±‚çš„&lt;code>req&lt;/code>å¯¹è±¡ï¼Œå¹¶å¯ä»¥å°†å‡½æ•°çš„ç»“æœæ‰“å°åˆ°æ§åˆ¶å°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">./astronaut-finder/requirements.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªæ–‡ä»¶ç”¨æ¥ç®¡ç†å‡½æ•°&amp;ndash;å®ƒæœ‰å‡½æ•°çš„åç§°ã€Docker é•œåƒå’Œä»»ä½•å…¶ä»–éœ€è¦çš„å®šåˆ¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">./astronaut-finder.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨è¯¥æ–‡ä»¶åˆ—å‡ºä½ è¦å®‰è£…çš„ä»»ä½•&lt;code>pip&lt;/code>æ¨¡å—ï¼Œå¦‚&lt;code>requests&lt;/code>æˆ–&lt;code>urllib&lt;/code>ã€‚&lt;/p>
&lt;ul>
&lt;li>ç¼–è¾‘&lt;code>./astronaut-finder/requirements.txt&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">requests
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å‘Šè¯‰å‡½æ•°å®ƒéœ€è¦ä½¿ç”¨ä¸€ä¸ªåä¸º&lt;a class="link" href="http://docs.python-requests.org/en/master/" target="_blank" rel="noopener"
>requests&lt;/a>çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œç”¨äºé€šè¿‡ HTTP è®¿é—®ç½‘ç«™ã€‚&lt;/p>
&lt;ul>
&lt;li>ç¼–å†™è¯¥å‡½æ•°çš„ä»£ç ã€‚&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬å°†ä»ä»¥ä¸‹åœ°æ–¹æ‹‰å…¥æ•°æ®ï¼š &lt;a class="link" href="http://api.open-notify.org/astros.json" target="_blank" rel="noopener"
>http://api.open-notify.org/astros.json&lt;/a>&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªç»“æœçš„ä¾‹å­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;number&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;people&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[{&lt;/span>&lt;span class="nt">&amp;#34;craft&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ISS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Alexander Misurkin&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;craft&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ISS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Mark Vande Hei&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;craft&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ISS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Joe Acaba&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;craft&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ISS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Anton Shkaplerov&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;craft&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ISS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Scott Tingle&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;craft&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ISS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Norishige Kanai&amp;#34;&lt;/span>&lt;span class="p">}],&lt;/span> &lt;span class="nt">&amp;#34;message&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;success&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ›´æ–°&lt;code>handler.py&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">requests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">random&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">requests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http://api.open-notify.org/astros.json&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">random&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">randint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;people&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;people&amp;#34;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2"> is in space&amp;#34;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æ³¨æ„ï¼šåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨å‚æ•°&lt;code>req&lt;/code>ï¼Œä½†å¿…é¡»æŠŠå®ƒæ”¾åœ¨å‡½æ•°çš„å¤´éƒ¨ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ç°åœ¨å»ºç«‹è¿™ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli build -f ./astronaut-finder.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>æç¤ºã€‚è¯•ç€æŠŠ astronaut-finder.yml é‡å‘½åä¸º&lt;code>stack.yml&lt;/code>ï¼Œç„¶ååªè°ƒç”¨&lt;code>faas-cli build&lt;/code>ã€‚&lt;code>stack.yml&lt;/code>æ˜¯ CLI çš„é»˜è®¤æ–‡ä»¶åã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ¨é€å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli push -f ./astronaut-finder.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli deploy -f ./astronaut-finder.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è°ƒç”¨è¯¥å‡½æ•°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke astronaut-finder
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å®‰ä¸œ-å²å¡æ™®å‹’å¤«åœ¨å¤ªç©ºä¸­
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="p">|&lt;/span> faas-cli invoke astronaut-finder
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä¹”-é˜¿å¡å·´åœ¨å¤ªç©ºä¸­
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ•…éšœæ’é™¤æ‰¾åˆ°å®¹å™¨çš„æ—¥å¿—">æ•…éšœæ’é™¤ï¼šæ‰¾åˆ°å®¹å™¨çš„æ—¥å¿—&lt;/h2>
&lt;p>ä½ å¯ä»¥é€šè¿‡å®¹å™¨çš„æ—¥å¿—æ‰¾åˆ°ä½ çš„å‡½æ•°çš„æ¯æ¬¡è°ƒç”¨çš„é«˜çº§ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">kubectl logs deployment/astronaut-finder -n openfaas-fn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ•…éšœæ’é™¤ä½¿ç”¨write_debugçš„-verbose-è¾“å‡º">æ•…éšœæ’é™¤ï¼šä½¿ç”¨`write_debug&amp;rsquo;çš„ verbose è¾“å‡º&lt;/h2>
&lt;p>è®©æˆ‘ä»¬ä¸ºä½ çš„å‡½æ•°æ‰“å¼€ verbose è¾“å‡ºã€‚è¿™åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å…³é—­çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šç”¨æ•°æ®æ·¹æ²¡ä½ çš„å‡½æ•°çš„æ—¥å¿—&amp;ndash;è¿™åœ¨å¤„ç†äºŒè¿›åˆ¶æ•°æ®æ—¶å°¤å…¶é‡è¦ï¼Œå› ä¸ºäºŒè¿›åˆ¶æ•°æ®åœ¨æ—¥å¿—ä¸­æ²¡æœ‰æ„ä¹‰ã€‚&lt;/p>
&lt;p>è¿™æ˜¯æ ‡å‡†çš„ YAML é…ç½®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://127.0.0.1:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">astronaut-finder&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./astronaut-finder&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">astronaut-finder&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºè¯¥å‡½æ•°ç¼–è¾‘ YAML æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸ª &lt;code>environment&lt;/code> éƒ¨åˆ†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">astronaut-finder&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./astronaut-finder&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">astronaut-finder&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">write_debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ç”¨&lt;code>faas-cli deploy -f ./astronaut-finder.yml&lt;/code>å†æ¬¡éƒ¨ç½²ä½ çš„å‡½æ•°ã€‚&lt;/p>
&lt;p>è°ƒç”¨è¯¥å‡½æ•°ï¼Œç„¶åå†æ¬¡æ£€æŸ¥æ—¥å¿—ï¼ŒæŸ¥çœ‹å‡½æ•°çš„å“åº”ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">kubectl logs deployment/astronaut-finder -n openfaas-fn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç®¡ç†å¤šä¸ªå‡½æ•°">ç®¡ç†å¤šä¸ªå‡½æ•°&lt;/h3>
&lt;p>CLI çš„ YAML æ–‡ä»¶å…è®¸å°†å‡½æ•°åˆ†ç»„ä¸ºå †æ ˆï¼Œè¿™åœ¨å¤„ç†ä¸€ç»„ç›¸å…³å‡½æ•°æ—¶å¾ˆæœ‰å¸®åŠ©ã€‚&lt;/p>
&lt;p>ä¸ºäº†äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œç”Ÿæˆä¸¤ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli new --lang python3 first
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äºç¬¬äºŒä¸ªå‡½æ•°ä½¿ç”¨&lt;code>--append&lt;/code>æ ‡å¿—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli new --lang python3 second --append&lt;span class="o">=&lt;/span>./first.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬æŠŠ&lt;code>first.yml&lt;/code>æ”¹åä¸º&lt;code>example.yml&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mv first.yml example.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">provider&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">openfaas&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http://127.0.0.1:8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">functions&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">first&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./first&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">first&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">second&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./second&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">second&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œæœ‰å‡ ä¸ªæ ‡å¿—ï¼Œåœ¨å¤„ç†å‡½æ•°å †æ ˆæ—¶æœ‰å¸®åŠ©ã€‚&lt;/p>
&lt;ul>
&lt;li>ä»¥å¹¶è¡Œæ–¹å¼æ„å»ºã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli build -f ./example.yml --parallel&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>åªå»ºç«‹/æ¨é€ä¸€ä¸ªå‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli build -f ./example.yml --filter&lt;span class="o">=&lt;/span>second
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>èŠ±ç‚¹æ—¶é—´æ¥æ¢ç´¢&lt;code>build&lt;/code>/&lt;code>push&lt;/code>å’Œ&lt;code>deploy&lt;/code>çš„é€‰é¡¹ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>faas-cli build --help&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>faas-cli push --help&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;code>faas-cli deploy --help&lt;/code>ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¦åŒæ—¶è¿è¡Œ&lt;code>faas-cli build &amp;amp;&amp;amp;faas-cli push &amp;amp;&amp;amp;faas-cli deploy&lt;/code>ï¼Œè¯·ä½¿ç”¨&lt;code>faas-cli up&lt;/code>ä»£æ›¿ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä¸“ä¸šæç¤ºï¼šå¦‚æœä½ ä¸æƒ³ä¼ é€’&lt;code>-f&lt;/code>å‚æ•°ï¼Œ&lt;code>stack.yml&lt;/code>æ˜¯ faas-cli å¯»æ‰¾çš„é»˜è®¤åç§°ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code>faas-cli deploy -f https://....&lt;/code>é€šè¿‡ HTTPï¼ˆsï¼‰éƒ¨ç½²è¿œç¨‹å‡½æ•°æ ˆï¼ˆyamlï¼‰æ–‡ä»¶ã€‚&lt;/p>
&lt;h3 id="è‡ªå®šä¹‰æ¨¡æ¿">è‡ªå®šä¹‰æ¨¡æ¿&lt;/h3>
&lt;p>å¦‚æœä½ æœ‰è‡ªå·±çš„ä¸€å¥—åˆ†å‰æ¨¡æ¿æˆ–è‡ªå®šä¹‰æ¨¡æ¿ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠŠå®ƒä»¬æ‹‰ä¸‹æ¥ï¼Œç”¨ CLI ä½¿ç”¨ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªè·å– Python 3 æ¨¡æ¿çš„ä¾‹å­ï¼Œå®ƒä½¿ç”¨ Debian Linuxã€‚&lt;/p>
&lt;p>ä½¿ç”¨ &lt;code>git&lt;/code> URL æ‹‰å–æ¨¡æ¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli template pull https://github.com/openfaas-incubator/python3-debian
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨é”®å…¥ &lt;code>faas-cli new --list&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ faas-cli new --list &lt;span class="p">|&lt;/span> grep python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- python3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- python3-debian
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™äº›æ–°æ¨¡æ¿ä¼šè¢«ä¿å­˜åœ¨ä½ å½“å‰çš„å·¥ä½œç›®å½•ä¸‹&lt;code>./templates/&lt;/code>ã€‚&lt;/p>
&lt;h4 id="è‡ªå®šä¹‰æ¨¡æ¿æ¨¡æ¿å•†åº—">è‡ªå®šä¹‰æ¨¡æ¿ã€‚æ¨¡æ¿å•†åº—&lt;/h4>
&lt;p>æ¨¡æ¿å•†åº—&lt;em>æ˜¯ä¸€ä¸ªç±»ä¼¼äº&lt;/em>å‡½æ•°å•†åº—*çš„æ¦‚å¿µï¼Œå®ƒä½¿ç”¨æˆ·å¯ä»¥é€šè¿‡åˆ†äº«ä»–ä»¬çš„æ¨¡æ¿æ¥è¿›è¡Œåä½œã€‚æ¨¡æ¿å•†åº—ä¹Ÿæ„å‘³ç€ä½ ä¸å¿…è®°ä½ä»»ä½• URL æ¥åˆ©ç”¨ä½ å–œæ¬¢çš„ç¤¾åŒºæˆ–é¡¹ç›®æ¨¡æ¿ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤æ¥æœç´¢å’Œå‘ç°æ¨¡æ¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ faas-cli template store list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ faas-cli template store list -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME SOURCE DESCRIPTION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csharp openfaas Classic C# template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dockerfile openfaas Classic Dockerfile template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go openfaas Classic Golang template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†è·å¾—æ›´å¤šçš„ç»†èŠ‚ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;code>--verbose&lt;/code>æ ‡å¿—ï¼Œæˆ–è€…&lt;code>describe&lt;/code>å‘½ä»¤ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªå…·æœ‰ HTTP æ ¼å¼çš„ Golang æ¨¡æ¿ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">faas-cli template store list &lt;span class="p">|&lt;/span> grep golang
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">golang-http openfaas
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Golang HTTP template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">golang-middleware openfaas
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Golang Middleware template
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæŸ¥çœ‹å…¶ä¸Šæ¸¸ä»“åº“ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ faas-cli template store describe golang-http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: golang-http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Platform: x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Language: Go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Source: openfaas
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description: Golang HTTP template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Repository: https://github.com/openfaas/golang-http-template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Official Template: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŠŠæ¨¡æ¿æ‹‰ä¸‹æ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli template store pull golang-http
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨ä½ å¯ä»¥é€šè¿‡è¾“å…¥ä»¥ä¸‹å†…å®¹ç”¨è¿™ä¸ªæ¨¡æ¿åˆ›å»ºä¸€ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;p>bash
faas-cli new &amp;ndash;lang golang-http NAME&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä¸ºäº†æ¯”è¿è¡Œ`faas-cli template store pull golang-http`æ¥åˆ›å»ºå‡½æ•°æ›´å®¹æ˜“ï¼Œä½ å¯ä»¥åœ¨ä½ çš„stack.ymlæ–‡ä»¶ä¸­é™„åŠ ä»¥ä¸‹å†…å®¹ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configuration:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> templates:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: golang-http
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åè¿è¡Œä»¥ä¸‹å†…å®¹ï¼Œè€Œä¸æ˜¯æŒ‡å®šæ¨¡æ¿åç§°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">faas-cli template store pull
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿè¯·å‚è§ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.openfaas.com/reference/yaml/" target="_blank" rel="noopener"
>OpenFaaS YAML å‚è€ƒæŒ‡å—&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/openfaas/store/" target="_blank" rel="noopener"
>å‡½æ•°ä¸æ¨¡æ¿å­˜å‚¨&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="yaml-æ–‡ä»¶ä¸­çš„å˜é‡æ›¿æ¢å¯é€‰ç»ƒä¹ ">YAML æ–‡ä»¶ä¸­çš„å˜é‡æ›¿æ¢ï¼ˆå¯é€‰ç»ƒä¹ )&lt;/h3>
&lt;p>ç”¨äºé…ç½® CLI çš„&lt;code>.yml&lt;/code>æ–‡ä»¶èƒ½å¤Ÿè¿›è¡Œå˜é‡æ›¿æ¢ï¼Œè¿™æ ·ä½ å°±èƒ½å¤Ÿä½¿ç”¨åŒä¸€ä¸ª&lt;code>.yml&lt;/code>æ–‡ä»¶è¿›è¡Œå¤šç§é…ç½®ã€‚&lt;/p>
&lt;p>å…¶ä¸­ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œå½“å¼€å‘å’Œç”Ÿäº§å›¾åƒæœ‰ä¸åŒçš„æ³¨å†Œè¡¨æ—¶ï¼Œè¿™å°±å¾ˆæœ‰ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨å˜é‡æ›¿æ¢ï¼Œä½¿æœ¬åœ°å’Œæµ‹è¯•ç¯å¢ƒä½¿ç”¨é»˜è®¤è´¦æˆ·ï¼Œè€Œ CI æœåŠ¡å™¨å¯ä»¥è¢«é…ç½®ä¸ºä½¿ç”¨ç”Ÿäº§è´¦æˆ·ã€‚&lt;/p>
&lt;blockquote>
&lt;p>è¿™æ˜¯ç”±[envsubst åº“]ï¼ˆ&lt;a class="link" href="https://github.com/drone/envsubst" target="_blank" rel="noopener"
>https://github.com/drone/envsubst&lt;/a>ï¼‰æä¾›çš„ã€‚éµå¾ªè¯¥é“¾æ¥å¯ä»¥çœ‹åˆ°æ”¯æŒçš„å˜é‡çš„ä¾‹å­&lt;/p>
&lt;/blockquote>
&lt;p>ç¼–è¾‘ä½ çš„&lt;code>astronaut-finder.yml&lt;/code>ä»¥åŒ¹é…ä»¥ä¸‹å†…å®¹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">astronaut-finder&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">lang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">handler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./astronaut-finder&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${DOCKER_USER:-development}/astronaut-finder&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">write_debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¼šæ³¨æ„åˆ°&lt;code>image&lt;/code>å±æ€§å·²è¢«æ›´æ–°ï¼ŒåŒ…æ‹¬ä¸€ä¸ªå˜é‡å®šä¹‰ï¼ˆ&lt;code>DOCKER_USER&lt;/code>ï¼‰ã€‚è¯¥å€¼å°†è¢«æ›¿æ¢ä¸ºåŒåçš„ç¯å¢ƒå˜é‡çš„å€¼ã€‚å¦‚æœç¯å¢ƒå˜é‡ä¸å­˜åœ¨ï¼Œæˆ–ä¸ºç©ºï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼ï¼ˆ&lt;code>development&lt;/code>ï¼‰ã€‚&lt;/p>
&lt;p>è¯¥å˜é‡å°†åœ¨æ•´ä¸ªæ–‡ä»¶ä¸­è¢«æ›¿æ¢æˆè¯¥å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ çš„&lt;code>.yml&lt;/code>æ–‡ä»¶ä¸­æœ‰å‡ ä¸ªå‡½æ•°ï¼Œæ‰€æœ‰å¯¹&lt;code>DOCKER_USER&lt;/code>å˜é‡çš„å¼•ç”¨å°†è¢«æ›¿æ¢ä¸ºè¯¥ç¯å¢ƒå˜é‡çš„å€¼&lt;/p>
&lt;p>è¿è¡Œä¸‹é¢çš„å‘½ä»¤å¹¶è§‚å¯Ÿè¾“å‡ºã€‚&lt;/p>
&lt;p>&lt;code>faas-cli build -f ./astronaut-finder.yml&lt;/code>ã€‚&lt;/p>
&lt;p>è¾“å‡ºåº”è¯¥æ˜¾ç¤ºï¼Œæ„å»ºçš„é•œåƒè¢«æ ‡è®°ä¸º&lt;code>development/astronaut-finder:latest&lt;/code>ã€‚&lt;/p>
&lt;p>ç°åœ¨ï¼Œå°†ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºä½ çš„ Docker Hub è´¦æˆ·åï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ OpenFaaS çš„ &lt;code>function&lt;/code>è´¦æˆ·ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">DOCKER_USER&lt;/span>&lt;span class="o">=&lt;/span>functions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿è¡Œä¸ä¹‹å‰ç›¸åŒçš„æ„å»ºå‘½ä»¤ï¼Œè§‚å¯Ÿè¾“å‡ºã€‚&lt;/p>
&lt;p>&lt;code>faas-cli build -f ./astronaut-finder.yml&lt;/code>ã€‚&lt;/p>
&lt;p>ç°åœ¨è¾“å‡ºåº”è¯¥æ˜¾ç¤ºï¼Œé•œåƒæ˜¯ç”¨æ›´æ–°çš„æ ‡ç­¾ &lt;code>functions/astronaut-finder:latest&lt;/code>æ„å»ºçš„ã€‚&lt;/p>
&lt;h3 id="è‡ªå®šä¹‰äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸ºå‡½æ•°å¯é€‰ç»ƒä¹ ">è‡ªå®šä¹‰äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸ºå‡½æ•°(å¯é€‰ç»ƒä¹ )&lt;/h3>
&lt;p>è‡ªå®šä¹‰äºŒè¿›åˆ¶æ–‡ä»¶æˆ–å®¹å™¨å¯ä»¥ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œä½†å¤§å¤šæ•°æ—¶å€™ï¼Œä½¿ç”¨è¯­è¨€æ¨¡æ¿åº”è¯¥æ¶µç›–æ‰€æœ‰æœ€å¸¸è§çš„æƒ…å†µã€‚&lt;/p>
&lt;p>ä¸ºäº†ä½¿ç”¨è‡ªå®šä¹‰äºŒè¿›åˆ¶æ–‡ä»¶æˆ– Dockerfileï¼Œä½¿ç”¨&lt;code>dockerfile&lt;/code>è¯­è¨€åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli new --lang dockerfile sorter --prefix&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;your-docker-username-here&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªåä¸º &lt;code>sorter&lt;/code>å’Œ &lt;code>sorter.yml&lt;/code>çš„æ–‡ä»¶å¤¹è¢«åˆ›å»ºã€‚&lt;/p>
&lt;p>ç¼–è¾‘&lt;code>sorter/Dockerfile&lt;/code>å¹¶æ›´æ–°è®¾ç½®&lt;code>fprocess'çš„é‚£ä¸€è¡Œã€‚è®©æˆ‘ä»¬æŠŠå®ƒæ”¹æˆå†…ç½®çš„bashå‘½ä»¤&lt;/code>sort`ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨æŒ‰å­—æ¯æ•°å­—é¡ºåºè¿›è¡Œæ’åºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ENV&lt;/span> &lt;span class="nv">fprocess&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨æ„å»ºã€æ¨é€å’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">faas-cli up -f sorter.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç°åœ¨é€šè¿‡ç”¨æˆ·ç•Œé¢æˆ– CLI æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> -n &lt;span class="s1">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">elephant
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">zebra
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">horse
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">aardvark
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">monkey&amp;#39;&lt;/span>&lt;span class="p">|&lt;/span> faas-cli invoke sorter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aardvark
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elephant
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">horse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monkey
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zebra
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†&lt;a class="link" href="https://busybox.net/downloads/BusyBox.html" target="_blank" rel="noopener"
>BusyBox&lt;/a>ä¸­çš„&lt;code>sort&lt;/code>ï¼Œå®ƒæ˜¯å†…ç½®çš„å‡½æ•°ã€‚è¿˜æœ‰å…¶ä»–æœ‰ç”¨çš„å‘½ä»¤ï¼Œå¦‚&lt;code>sha512sum&lt;/code>ï¼Œç”šè‡³æ˜¯&lt;code>bash&lt;/code>æˆ– shell è„šæœ¬ï¼Œä½†ä½ å¹¶ä¸å±€é™äºè¿™äº›å†…ç½®å‘½ä»¤ã€‚ä»»ä½•äºŒè¿›åˆ¶æˆ–ç°æœ‰çš„å®¹å™¨éƒ½å¯ä»¥é€šè¿‡æ·»åŠ  OpenFaaS å‡½æ•°çœ‹é—¨ç‹—è€Œæˆä¸ºæ— æœåŠ¡å™¨å‡½æ•°ã€‚&lt;/p>
&lt;blockquote>
&lt;p>æç¤ºï¼šä½ çŸ¥é“ OpenFaaS ä¹Ÿæ”¯æŒ Windows äºŒè¿›åˆ¶æ–‡ä»¶å—ï¼Ÿæ¯”å¦‚ C#ã€VB æˆ– PowerShellï¼Ÿ&lt;/p>
&lt;/blockquote>
&lt;p>ç°åœ¨è¿›å…¥&lt;a class="link" href="lab4.md" >å®éªŒå®¤ 4&lt;/a>&lt;/p></description></item><item><title>è¯‘ï¼šopenfaas-workshop-Lab1</title><link>https://example.com/p/%E8%AF%91openfaas-workshop-lab1/</link><pubDate>Mon, 25 Jun 2018 18:04:09 +0000</pubDate><guid>https://example.com/p/%E8%AF%91openfaas-workshop-lab1/</guid><description>&lt;p>ä»Šå¤©å¤§å¤šæ•°å…¬å¸åœ¨å¼€å‘åº”ç”¨ç¨‹åºå¹¶å°†å…¶éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„æ—¶å€™ï¼Œæ— è®ºæ˜¯é€‰æ‹©å…¬æœ‰äº‘è¿˜æ˜¯ç§æœ‰çš„æ•°æ®ä¸­å¿ƒï¼Œéƒ½éœ€è¦æå‰äº†è§£ç©¶ç«Ÿéœ€è¦å¤šå°‘å°æœåŠ¡å™¨ã€å¤šå¤§å®¹é‡çš„å­˜å‚¨å’Œæ•°æ®åº“çš„åŠŸèƒ½ç­‰ã€‚å¹¶éœ€è¦éƒ¨ç½²è¿è¡Œåº”ç”¨ç¨‹åºå’Œä¾èµ–çš„è½¯ä»¶åˆ°åŸºç¡€è®¾æ–½ä¹‹ä¸Šã€‚å‡è®¾æˆ‘ä»¬ä¸æƒ³åœ¨è¿™äº›ç»†èŠ‚ä¸ŠèŠ±è´¹ç²¾åŠ›ï¼Œæ˜¯å¦æœ‰ä¸€ç§ç®€å•çš„æ¶æ„æ¨¡å‹èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬è¿™ç§æƒ³æ³•ï¼Ÿè¿™ä¸ªç­”æ¡ˆå·²ç»å­˜åœ¨ï¼Œè¿™å°±æ˜¯ä»Šå¤©è½¯ä»¶æ¶æ„ä¸–ç•Œä¸­æ–°é²œä½†æ˜¯å¾ˆçƒ­é—¨çš„ä¸€ä¸ªè¯é¢˜â€”â€”Serverlessï¼ˆæ— æœåŠ¡å™¨ï¼‰æ¶æ„ã€‚&lt;/p>
&lt;p>ç›®å‰å·²ç»æœ‰ä¸€æ‰¹ä¼˜ç§€çš„ serverless æ¶æ„å¼€æºé¡¹ç›®ï¼ŒOpenFaas å°±æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ã€‚å¥ˆä½•å…¶ä¸­çš„ä¸­æ–‡èµ„æ–™æ¯”è¾ƒå°‘ï¼Œæˆ‘ä¹Ÿæ˜¯è¾¹å­¦è¾¹ç¿»è¯‘ï¼Œå¸Œæœ›èƒ½å¤ŸæŠ›ç –å¼•ç‰ï¼ŒåŠ©åŠ› serverless çš„å‘å±•ã€‚&lt;/p>
&lt;p>è¿™æ˜¯ä¸€ä¸ªè‡ªå­¦ç ”è®¨ä¼šï¼Œå­¦ä¹ å¦‚ä½•æ„å»ºã€éƒ¨ç½²å’Œè¿è¡Œ OpenFaas å‡½æ•°ã€‚&lt;/p>
&lt;h1 id="lab1---openfaas-çš„å‡†å¤‡å·¥ä½œ">Lab1 - OpenFaas çš„å‡†å¤‡å·¥ä½œ&lt;/h1>
&lt;p>OpenFaas å¯ä»¥åœ¨ Docker Swarm å’Œ Kubernetes çš„è¿‡å‡ ä¸ªä¸»è¦å¹³å°ä¹‹ä¸Šè¿è¡Œã€‚åœ¨æ­¤æ•™ç¨‹é‡Œï¼Œæˆ‘ä»¬å°†ä¼šåœ¨çš„æ‚¨æœ¬åœ°ç”µè„‘ä½¿ç”¨ Docker Swarm æ¥å…¥é—¨ã€‚&lt;/p>
&lt;h2 id="é¢„å¤‡æ¡ä»¶">é¢„å¤‡æ¡ä»¶&lt;/h2>
&lt;h3 id="docker">Docker&lt;/h3>
&lt;p>Mac&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://store.docker.com/editions/community/docker-ce-desktop-mac" target="_blank" rel="noopener"
>Docker CE for Mac Edge Edition&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Windows&lt;/p>
&lt;ul>
&lt;li>ä»…é’ˆå¯¹ windows10 ä¸“ä¸šç‰ˆæˆ–ä¼ä¸šç‰ˆ&lt;/li>
&lt;li>å®‰è£…&lt;a class="link" href="https://store.docker.com/editions/community/docker-ce-desktop-windows" target="_blank" rel="noopener"
>Docker CE for Windows&lt;/a>&lt;/li>
&lt;li>å®‰è£…&lt;a class="link" href="https://git-scm.com/downloads" target="_blank" rel="noopener"
>Git Bash&lt;/a>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>å¤‡æ³¨ï¼šæ‰€æœ‰æ­¥éª¤ä¸­è¯·ä½¿ç”¨ Git Bashï¼šä¸è¦å°è¯•ä½¿ç”¨ WSL æˆ– Bash for Windowsã€‚&lt;/p>
&lt;/blockquote>
&lt;p>Linux - Ubuntu æˆ– Debian&lt;/p>
&lt;ul>
&lt;li>Docker CE for Linux&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ä½ å¯ä»¥ä»&lt;a class="link" href="https://store.docker.com/" target="_blank" rel="noopener"
>Docker Store&lt;/a>ä¸­å®‰è£… Docker CE&lt;/p>
&lt;/blockquote>
&lt;h3 id="è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹çš„-docker-swarm">è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹çš„ Docker Swarm&lt;/h3>
&lt;p>OpenFaas åœ¨ Docker Swarm å’Œ Kubernetes ä¸Šå·¥ä½œã€‚å› ä¸º Docker Swarm å¾ˆå®¹æ˜“è®¾ç½®ï¼Œæ‰€ä»¥åœ¨æ­¤ Workshop ä¸­æˆ‘ä»¬ä½¿ç”¨ Docker Swarmã€‚åœ¨æ–‡æ¡£ä¸­æœ‰ä»–ä»¬ä¸¤ä¸ªçš„æŒ‡å—ã€‚&lt;/p>
&lt;p>åœ¨ä½ çš„ç¬”è®°æœ¬æˆ–è™šæ‹Ÿæœºä¸­è®¾ç½®ä¸€ä¸ªå•èŠ‚ç‚¹çš„ Docker Swarmï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">docker swarm init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>å¦‚æœè¿è¡Œæ­¤å‘½ä»¤å‡ºé”™ï¼ŒåŠ ä¸Š &amp;ndash;advertise-addr ä½ çš„ IP å‚æ•°ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="docker-hub">Docker Hub&lt;/h3>
&lt;p>æ³¨å†Œä¸€ä¸ª Docker Hub è´¦å·ã€‚Docker Hub å…è®¸ä½ åœ¨äº’è”ç½‘ä¸­å‘å¸ƒè‡ªå·±çš„ Docker é•œåƒæ¥ç”¨äºå¤šèŠ‚ç‚¹é›†ç¾¤æˆ–ç¤¾åŒºå…±äº«ã€‚åœ¨ Workshop ä¸­æˆ‘ä»¬ä½¿ç”¨ Docker Hub å‘å¸ƒå‡½æ•°ã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥åœ¨è¿™é‡Œæ³¨å†Œï¼š&lt;a class="link" href="https://hub.docker.com/" target="_blank" rel="noopener"
>Docker Hub&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>å¤‡æ³¨ï¼šDocker Hub ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºè‡ªåŠ¨æ„å»ºé•œåƒã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ–è€… Git Bash çª—å£ï¼Œç„¶åä½¿ç”¨ä¸Šé¢æ³¨å†Œçš„ç”¨æˆ·åç™»é™† Docker Hubã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">docker login
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="openfaas-cli">OpenFaas CLI&lt;/h3>
&lt;p>ä½ å¯ä»¥åœ¨ mac ä¸Šä½¿ç”¨ brew æˆ–è€…åœ¨ Linu å’Œ mac ä¸Šä½¿ç”¨ä¸€ä¸ªé›†æˆè„šæœ¬æ¥å®‰è£… OpenFaas CLIã€‚&lt;/p>
&lt;p>åœ¨ Mac æˆ– Linux ä¸Šç»ˆç«¯ä¸­è¾“å…¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">curl -sL cli.openfaas.com | sudo sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äº windows å¹³å°ï¼Œä»&lt;a class="link" href="https://github.com/openfaas/faas-cli" target="_blank" rel="noopener"
>releases page&lt;/a>ä¸­ä¸‹è½½æœ€æ–°çš„çš„ faas-cli.exeã€‚ä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ª local æ–‡ä»¶å¤¹æˆ–è€…åœ¨ C:\Windows\è·¯å¾„ä¸­ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ã€‚&lt;/p>
&lt;blockquote>
&lt;p>å¦‚æœä½ æ˜¯ä¸€ä¸ªé«˜çº§ Windows ç”¨æˆ·ï¼ŒæŠŠ CLI æ”¾åœ¨ä½ è‡ªå®šä¹‰çš„æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åæŠŠæ­¤æ–‡ä»¶å¤¹æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æˆ‘ä»¬å°†ä¼šä½¿ç”¨ faas-åˆ›å»ºæ–°å‡½æ•°çš„è„šæ‰‹æ¶ï¼Œbuildï¼Œdeploy å’Œ invoke å‡½æ•°ã€‚ä½ å¯ä»¥ä» faas-cli â€”help ä¸­æ‰¾åˆ°è¿™äº›å‘½ä»¤ã€‚&lt;/p>
&lt;p>æµ‹è¯• faas-cli&lt;/p>
&lt;p>æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ– Git Bash çª—å£ï¼Œç„¶åè¾“å…¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">faas-cli version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="éƒ¨ç½²-openfaas">éƒ¨ç½² OpenFaas&lt;/h3>
&lt;p>å‘å¸ƒ OpenFaas çš„è¯´æ˜æ–‡æ¡£ä¿®æ”¹äº†å¾ˆå¤šæ¬¡ï¼Œå› ä¸ºæˆ‘ä»¬åŠªåŠ›ä½¿ä»–ç®€å•ã€‚æ¥ä¸‹æ¥å°†ä¼šåœ¨ 60 ç§’å·¦å³çš„æ—¶é—´ä½¿å¾— OpenFaas éƒ¨ç½²èµ·æ¥ã€‚&lt;/p>
&lt;ul>
&lt;li>é¦–å…ˆ clone é¡¹ç›®&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git clone https://github.com/openfaas/faas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ç„¶åä½¿ç”¨ git æ£€å‡ºåˆ°æœ€æ–°ç‰ˆæœ¬&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">$ cd faas &amp;amp;&amp;amp; \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git checkout master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>å¤‡æ³¨ï¼šä½ ä¹Ÿå¯ä»¥åœ¨&lt;a class="link" href="https://github.com/openfaas/faas/releases" target="_blank" rel="noopener"
>project release page&lt;/a>ä¸­æ‰¾åˆ°æœ€æ–°å¯¼å…¥ release ç‰ˆæœ¬ã€‚&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>ç°åœ¨ä½¿ç”¨ Docker Swarm éƒ¨ç½² stack&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">./deploy_stack.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½ ç°åœ¨åº”è¯¥å·²ç»æŠŠ OpenFaas éƒ¨ç½²äº†ã€‚&lt;/p>
&lt;p>å¦‚æœä½ ç°åœ¨åœ¨ä¸€ä¸ªå…±äº« WIFI è¿æ¥ä¸­ï¼Œå®ƒå°†ä¼šéœ€è¦å‡ åˆ†é’Ÿæ—¶é—´æ‹‰å–é•œåƒå¹¶å¯åŠ¨ã€‚&lt;/p>
&lt;p>åœ¨æ­¤å±å¹•ä¸Šæ£€æŸ¥æœåŠ¡æ˜¯å¦æ˜¾ç¤ºä¸º 1/1:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">docker service ls
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä½ æœŸé—´æœ‰é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·æŸ¥é˜… Docker Swarm çš„Â &lt;a class="link" href="https://github.com/openfaas/faas/blob/master/guide/deployment_swarm.md" target="_blank" rel="noopener"
>éƒ¨ç½²æŒ‡å—&lt;/a>ã€‚&lt;/p>
&lt;p>ç°åœ¨è¿›å…¥&lt;a class="link" href="https://github.com/openfaas/workshop/blob/master/lab2.md" target="_blank" rel="noopener"
>Lab 2&lt;/a>ã€‚&lt;/p>
&lt;h1 id="æœªå®Œå¾…ç»­">æœªå®Œå¾…ç»­&lt;/h1></description></item><item><title>openfaas</title><link>https://example.com/p/openfaas/</link><pubDate>Sun, 24 Jun 2018 15:43:46 +0000</pubDate><guid>https://example.com/p/openfaas/</guid><description>&lt;p>å¯¹äº mac ç¯å¢ƒæ¥è®²ï¼Œé¦–å…ˆå®‰è£…æ–°ç‰ˆ docker:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">brew cask install docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åå¯åŠ¨ dockerã€‚&lt;/p>
&lt;p>å‘½ä»¤è¡Œç™»é™† docker hub&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">docker login
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯åŠ¨ docker swarm&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">docker swarm init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£… faas-cli&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">brew install faas-cli
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>clone ä¸‹æ¥ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git clone https://github.com/openfaas/faas
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæ‰§è¡Œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">./deploy_stack.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éƒ¨ç½²ä¸€äº›ç¤ºä¾‹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli deploy -f https://raw.githubusercontent.com/openfaas/faas/master/stack.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ &lt;a class="link" href="http://127.0.0.1:8080" target="_blank" rel="noopener"
>http://127.0.0.1:8080&lt;/a> å°±å¯ä»¥çœ‹åˆ° ui ç•Œé¢äº†ã€‚&lt;/p>
&lt;p>å®‰è£… grafana è¿›è¡Œç›‘æ§&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">docker service create -d \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--name=grafana \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--publish=3000:3000 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--network=func_functions \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stefanprodan/faas-grafana:4.6.3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æµè§ˆå™¨æ‰“å¼€ï¼š &lt;a class="link" href="http://127.0.0.1:3000" target="_blank" rel="noopener"
>http://127.0.0.1:3000&lt;/a> ç™»é™† admin admin æŸ¥çœ‹ã€‚&lt;/p>
&lt;p>å¸¸ç”¨å‘½ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">faas-cli new --list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">faas-cli build -f ./hello-openfaas.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">faas-cli push -f ./hello-openfaas.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">faas-cli deploy -f ./hello-openfaas.yml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>java-reactive-web</title><link>https://example.com/p/java-reactive-web/</link><pubDate>Sat, 23 Jun 2018 15:05:32 +0000</pubDate><guid>https://example.com/p/java-reactive-web/</guid><description>&lt;p>Spring web mvcï¼š ä¼ ç»Ÿ servlet web&lt;/p>
&lt;p>spring web fluxï¼š Reactive web&lt;/p>
&lt;ul>
&lt;li>ç¼–ç¨‹æ¨¡å¼ï¼š non-blocking éé˜»å¡
&lt;ul>
&lt;li>nioï¼šåŒæ­¥ï¼Ÿå¼‚æ­¥ï¼Ÿ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¹¶è¡Œæ¨¡å‹
&lt;ul>
&lt;li>sync åŒæ­¥&lt;/li>
&lt;li>async å¼‚æ­¥&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h1 id="reactive-æ¦‚å¿µ">Reactive æ¦‚å¿µ&lt;/h1>
&lt;p>Reactive programmingï¼š å“åº”å¼ç¼–ç¨‹&lt;/p>
&lt;p>InÂ &lt;a class="link" href="https://en.wikipedia.org/wiki/Computing" target="_blank" rel="noopener"
>computing&lt;/a>,Â &lt;strong>reactive programming&lt;/strong>Â is a declarativeÂ &lt;a class="link" href="https://en.wikipedia.org/wiki/Programming_paradigm" target="_blank" rel="noopener"
>programming paradigm&lt;/a>Â concerned withÂ &lt;a class="link" href="https://en.wikipedia.org/wiki/Dataflow_programming" target="_blank" rel="noopener"
>data streams&lt;/a>Â and the propagation of change. With this paradigm it is possible to express static (e.g. arrays) or dynamic (e.g. event emitters)Â &lt;em>data streams&lt;/em>Â with ease, and also communicate that an inferred dependency within the associatedÂ &lt;em>execution model&lt;/em>Â exists, which facilitates the automatic propagation of the changed data flow.&lt;/p>
&lt;h2 id="å®ç°æ¡†æ¶">å®ç°æ¡†æ¶&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>RxJava&lt;/p>
&lt;p>ReactiveX is a library for composing asynchronous and event-based programs by using observable sequences.&lt;/p>
&lt;p>è¿™ç§å°±æ˜¯æ¨çš„æ¨¡å¼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">int[] a=[1, 2, 3]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">for(int i: a){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package com.reactive.demo.reactivedemo;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import java.util.Observable;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/**
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * todo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * @author zhuzhenfeng
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * @date 2018/6/23
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class ObserverPatternDemo {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static void main(String[] args) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> MyObservable observable = new MyObservable();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // 1 observable nä¸ªobserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> observable.addObserver((o, value) -&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;1 æ”¶åˆ°æ•°æ®æ›´æ–°&amp;#34; + value);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> observable.addObserver((o, value) -&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;2 æ”¶åˆ°æ•°æ®æ›´æ–°&amp;#34; + value);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> observable.setChanged();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> observable.notifyObservers(&amp;#34;hello world&amp;#34;);// push data å‘å¸ƒæ•°æ®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static class MyObservable extends Observable {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protected synchronized void setChanged() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> super.setChanged();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">/Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/bin/java &amp;#34;-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2 æ”¶åˆ°æ•°æ®æ›´æ–°hello world
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 æ”¶åˆ°æ•°æ®æ›´æ–°hello world
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Process finished with exit code 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“æ—¶ä¸é˜»å¡ï¼Œåç»­å›è°ƒã€‚éé˜»å¡åŸºæœ¬ä¸Šé‡‡ç”¨ callback çš„å½¢å¼ã€‚&lt;/p>
&lt;p>å¯¹äº java æ¥è®²ï¼Œå¼‚æ­¥ä»£è¡¨åˆ‡æ¢äº†çº¿ç¨‹ã€‚&lt;/p>
&lt;p>å½“å‰çš„å®ç°ï¼š åŒæ­¥+éé˜»å¡&lt;/p>
&lt;p>å¦‚æœæ˜¯åˆ‡æ¢äº†çº¿ç¨‹ï¼Œä»£è¡¨æ˜¯å¼‚æ­¥ çš„éé˜»å¡ï¼Œä¸€èˆ¬æ˜¯ gui ç¨‹åºçš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Reactor&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="ç‰¹æ€§">ç‰¹æ€§&lt;/h2>
&lt;ul>
&lt;li>å¼‚æ­¥&lt;/li>
&lt;li>éé˜»å¡&lt;/li>
&lt;li>äº‹ä»¶é©±åŠ¨&lt;/li>
&lt;li>å¯èƒ½æœ‰èƒŒå‹ backpressure&lt;/li>
&lt;li>é˜²æ­¢å›è°ƒåœ°ç‹±&lt;/li>
&lt;/ul>
&lt;h1 id="reactive-ä½¿ç”¨åœºæ™¯">Reactive ä½¿ç”¨åœºæ™¯&lt;/h1>
&lt;p>Long Live æ¨¡å¼ï¼š netty çš„ io è¿æ¥ï¼ˆrpcï¼‰ timeout&lt;/p>
&lt;p>short live æ¨¡å¼ï¼šä¸å¤ªé€‚åˆ Reactive webï¼Œå› ä¸ºè¿™æ˜¯ç­‰å¾…ã€‚åªæ˜¯ä¼šå¿«é€Ÿè¿”å›ï¼Œä½†æ˜¯å¹¶ä¸ä¼šç»™ä½ çœŸæ­£çš„ç»“æœã€‚çŸ­é¢‘å¿«çš„è¿æ¥ï¼Œä¸å¤ªæœ‰ç”¨æ­¦ä¹‹åœ°ã€‚&lt;/p>
&lt;ul>
&lt;li>http&lt;/li>
&lt;li>http è¶…æ—¶æ—¶é—´&lt;/li>
&lt;/ul>
&lt;h1 id="reactive-ç†è§£è¯¯åŒº">Reactive ç†è§£è¯¯åŒº&lt;/h1>
&lt;p>webï¼šå¿«é€Ÿå“åº”&lt;/p>
&lt;p>200 Q-&amp;gt;200 T -&amp;gt; 50T&lt;/p>
&lt;p>1-50&lt;/p>
&lt;p>Tomcat connector thread pool(200)-&amp;gt;reactive thread pool(50)&lt;/p>
&lt;p>io è¿æ¥ä» Tomcat-&amp;gt;Reactive&lt;/p>
&lt;p>è¿æ¥&lt;/p>
&lt;p>Reactive thread poolï¼ˆ50ï¼‰&lt;/p>
&lt;p>ä¸å¤ªé€‚åˆ web è¯·æ±‚ã€‚&lt;/p>
&lt;p>webflux å…¶å®å¹¶ä¸ä¼šæå‡æ€§èƒ½ã€‚&lt;/p>
&lt;p>&lt;img src="http://ww1.sinaimg.cn/large/b831e4c7gy1fsl9ian4ezj20ma0g7tg4.jpg"
loading="lazy"
>&lt;/p>
&lt;p>å°‘é‡çš„çº¿ç¨‹ï¼Œå°‘é‡çš„å†…å­˜æ¥åšæ›´å¥½çš„ä¼¸ç¼©æ€§ï¼Œè€Œå¹¶ä¸æ˜¯ä¸ºäº†æå‡æ›´å¥½çš„æ€§èƒ½ã€‚ä½¿ç”¨ Reactive åªä¼šæ˜¯ä½¿å•ä½æ—¶é—´å†…æ¥å—è¯·æ±‚çš„æ•°é‡å¢åŠ ï¼Œå•ä½æ—¶é—´å†…çš„å¤„ç†è¯·æ±‚çš„æ•°é‡ä¸‹é™ã€‚&lt;/p></description></item><item><title>kafka</title><link>https://example.com/p/kafka/</link><pubDate>Thu, 21 Jun 2018 17:49:46 +0000</pubDate><guid>https://example.com/p/kafka/</guid><description>&lt;p>å¯åŠ¨ zookeeper&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bin/zookeeper-server-start.sh config/zookeeper.properties
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯åŠ¨ kafka&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bin/kafka-server-start.sh config/server.properties
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºä¸€ä¸ªä¸»é¢˜&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bin/kafka-topics.sh --list --zookeeper localhost:2181
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”Ÿäº§è€…&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¶ˆè´¹è€…&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>kafka connect&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">echo -e &amp;#34;zhisheng\ntian&amp;#34; &amp;gt; test.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ls&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… echo -e &amp;#34;zhisheng\ntian&amp;#34; &amp;gt; test.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á…
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á… ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LICENSE NOTICE bin config libs logs site-docs test.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zhuzhenfengdeMacBook-Proâœ kafka_2.12-1.1.0 á…
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯åŠ¨è¿æ¥å™¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bin/connect-standalone.sh config/connect-standalone.properties config/connect-file-source.properties config/connect-file-sink.properties
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åå‘ç°å¤šäº†ä¸€ä¸ªæ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">/Users/zhuzhenfeng/Documents/software/kafka_2.12-1.1.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[kafka_2.12-1.1.0] ls 18:25:38
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LICENSE NOTICE bin config libs logs site-docs test.sink.txt test.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[kafka_2.12-1.1.0]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæ¶ˆè´¹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt; bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic connect-test --from-beginning
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{&amp;#34;schema&amp;#34;:{&amp;#34;type&amp;#34;:&amp;#34;string&amp;#34;,&amp;#34;optional&amp;#34;:false},&amp;#34;payload&amp;#34;:&amp;#34;zhisheng&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{&amp;#34;schema&amp;#34;:{&amp;#34;type&amp;#34;:&amp;#34;string&amp;#34;,&amp;#34;optional&amp;#34;:false},&amp;#34;payload&amp;#34;:&amp;#34;tian&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{&amp;#34;schema&amp;#34;:{&amp;#34;type&amp;#34;:&amp;#34;string&amp;#34;,&amp;#34;optional&amp;#34;:false},&amp;#34;payload&amp;#34;:&amp;#34;sd&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{&amp;#34;schema&amp;#34;:{&amp;#34;type&amp;#34;:&amp;#34;string&amp;#34;,&amp;#34;optional&amp;#34;:false},&amp;#34;payload&amp;#34;:&amp;#34;sdafasdfasdfdsa&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>è¯‘ï¼švertx-kotlin-coroutine</title><link>https://example.com/p/%E8%AF%91vertx-kotlin-coroutine/</link><pubDate>Sat, 02 Jun 2018 16:00:52 +0000</pubDate><guid>https://example.com/p/%E8%AF%91vertx-kotlin-coroutine/</guid><description>&lt;blockquote>
&lt;p>å°è¯•ç¿»è¯‘ vertx çš„æ–‡æ¡£ã€‚å°Šé‡åŸæ–‡ï¼Œéƒ¨åˆ†ä½¿ç”¨è‡ªå·±çš„ç†è§£ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>Vert.x çš„ kotlin åç¨‹æä¾›äº† async/await æˆ–è€…å’Œ go ç±»ä¼¼çš„ channelã€‚è¿™ä½¿å¾—ä½ èƒ½å¤Ÿä»¥ç†Ÿæ‚‰çš„é¡ºåºé£æ ¼å†™å‚ç›´ä»£ç ã€‚&lt;/p>
&lt;p>vertx-lang-kotlin-coroutines é›†æˆäº† kotlin åç¨‹ï¼Œç”¨äºæ‰§è¡Œå¼‚æ­¥æ“ä½œå’Œå¤„ç†äº‹ä»¶ã€‚è¿™æ ·å°±èƒ½å¤Ÿä»¥åŒæ­¥ä»£ç çš„æ¨¡å‹ç¼–å†™ä»£ç ï¼Œè€Œä¸”ä¸ä¼šé˜»å¡å†…æ ¸çº¿ç¨‹ã€‚&lt;/p>
&lt;h1 id="ç®€ä»‹">ç®€ä»‹&lt;/h1>
&lt;p>vert.x ä¸è®¸å¤šæ—§çš„åº”ç”¨å¹³å°ç›¸æ¯”çš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿æ˜¯å®ƒå‡ ä¹å®Œå…¨æ˜¯éé˜»å¡çš„ï¼ˆå†…æ ¸çº¿ç¨‹ï¼‰ã€‚è¿™å…è®¸åŸºäº vert.x çš„ç¨‹åºä½¿ç”¨æå°‘æ•°çš„å†…æ ¸çº¿ç¨‹å¤„ç†å¤§é‡çš„å¹¶å‘ï¼ˆä¾‹å¦‚ï¼šè®¸å¤šè¿æ¥å’Œæ¶ˆæ¯ï¼‰ï¼Œå¯ä»¥è·å¾—æ›´å¥½çš„ä¼¸ç¼©æ€§ã€‚&lt;/p>
&lt;p>vert.x çš„éé˜»å¡ç‰¹æ€§å½¢æˆäº†éé˜»å¡ APIã€‚éé˜»å¡ API å¯ä»¥é‡‡ç”¨å¤šç§å½¢å¼æ¥å®ç°ï¼ŒåŒ…æ‹¬å›è°ƒå‡½æ•°ï¼Œpromiseï¼Œfibers æˆ–è€…å“åº”å¼æ‰©å±•ã€‚vert.x çš„æ ¸å¿ƒ API ä½¿ç”¨å›è°ƒå‡½æ•°çš„é£æ ¼ï¼Œä½†æ˜¯å®ƒä¹Ÿæ”¯æŒå…¶ä»–æ¨¡å‹ï¼Œå¦‚ RxJava 1 å’Œ 2ã€‚&lt;/p>
&lt;p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨å¼‚æ­¥çš„ API ç¼–ç¨‹å¯èƒ½æ¯”ä½¿ç”¨ç»å…¸çš„é¡ºåºä»£ç é£æ ¼æ›´å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œç‰¹åˆ«æ˜¯éœ€è¦æŒ‰ç…§é¡ºåºå®Œæˆè‹¥å¹²æ“ä½œã€‚å¦å¤–ï¼Œä½¿ç”¨å¼‚æ­¥ API æ—¶ï¼Œé”™è¯¯çš„ä¼ æ’­ä¹Ÿæ›´ä¸ºå¤æ‚ã€‚&lt;/p>
&lt;p>vertx-lang-kotlin-coroutines ä½¿ç”¨åç¨‹ã€‚åç¨‹æ˜¯éå¸¸è½»é‡çº§çš„çº¿ç¨‹ï¼Œè€Œä¸”ä¸ä¸åº•å±‚çš„å†…æ ¸çº¿ç¨‹å¯¹åº”ã€‚æ‰€ä»¥å½“åç¨‹éœ€è¦â€œé˜»å¡â€æ—¶ï¼Œå®ƒä¼šæš‚åœå¹¶é‡Šæ”¾å½“å‰çš„å†…æ ¸çº¿ç¨‹ï¼Œä½¿å¾—å¦ä¸€ä¸ªåç¨‹å¯ä»¥å¤„ç†äº‹ä»¶ã€‚&lt;/p>
&lt;p>vertx-lang-kotlin-coroutines ä½¿ç”¨ kotlinx.coroutines æ¥å®ç°åç¨‹ã€‚&lt;/p>
&lt;blockquote>
&lt;p>vertx-lang-kotlin-coroutines ç›®å‰ä»…é€‚ç”¨äº kotlinï¼Œè€Œä¸”æ˜¯ kotlin1.1 çš„ä¸€ä¸ªå®éªŒç‰¹æ€§ã€‚&lt;/p>
&lt;/blockquote>
&lt;h1 id="ä»ä¸€ä¸ª-vertxx-çš„-contex-ä¸­å¯åŠ¨åç¨‹">ä»ä¸€ä¸ª vertx.x çš„ contex ä¸­å¯åŠ¨åç¨‹&lt;/h1>
&lt;p>å¯¼å…¥ io.vertx.kotlin.coroutines.VertxCoroutineï¼Œlaunchï¼ˆåç¨‹ç”Ÿæˆå™¨ï¼‰æ–¹æ³•ä¸­å…è®¸è¿è¡Œä¸€æ®µä»£ç ä½œä¸ºå¯ä»¥æš‚åœçš„åç¨‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">vertx&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">vertx&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">deployVerticle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ExampleVerticle&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">launch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dispatcher&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">timerId&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">awaitEvent&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Long&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">handler&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">setTimer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">handler&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Event fired from timer with id &lt;/span>&lt;span class="si">${timerId}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>vertx.dispatcher()è¿”å›ä¸€ä¸ªä½¿ç”¨ vert.x çš„äº‹ä»¶å¾ªç¯æ‰§è¡Œåç¨‹çš„ disptacherã€‚&lt;/p>
&lt;p>awaitEvent å‡½æ•°æš‚åœåç¨‹çš„æ‰§è¡Œç›´åˆ°å®šæ—¶å™¨è§¦å‘ä¸ºæ­¢ï¼Œå¹¶ä½¿ç”¨èµ‹ç»™ handler çš„å€¼æ¢å¤åç¨‹ã€‚&lt;/p>
&lt;p>æœ‰å…³ handlersï¼Œevents å’Œäº‹ä»¶æµçš„æ›´å¤šç»†èŠ‚ï¼Œå°†åœ¨ä¸‹ä¸€èŠ‚ä¸­ç»™å‡ºã€‚&lt;/p>
&lt;h1 id="ç»§æ‰¿-coroutineverticle">ç»§æ‰¿ CoroutineVerticle&lt;/h1>
&lt;p>ä½ å¯ä»¥å°†ä»£ç éƒ¨ç½²ä¸º io.vertx.kotlin.coroutines.CoroutineVerticle çš„å®ä¾‹ï¼Œè¿™æ˜¯ kotlin åç¨‹çš„ä¸“ç”¨ç±»å‹ã€‚ä½ åº”è¯¥é‡è½½ verticle çš„ start()æ–¹æ³•ï¼Œstop()æ–¹æ³•çš„é‡è½½æ˜¯å¯é€‰çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">MyVerticle&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">CoroutineVerticle&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">suspend&lt;/span> &lt;span class="k">override&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">start&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="è·å¾—ä¸€æ¬¡æ€§çš„å¼‚æ­¥ç»“æœ">è·å¾—ä¸€æ¬¡æ€§çš„å¼‚æ­¥ç»“æœ&lt;/h1>
&lt;p>vert.x çš„è®¸å¤šå¼‚æ­¥æ“ä½œéƒ½é‡‡ç”¨ &lt;code>Handler&amp;lt;AsyncResult&amp;lt;T&amp;gt;&amp;gt;&lt;/code> ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ã€‚ä¸€ä¸ªä¾‹å­å°±æ˜¯ä½¿ç”¨ vert.x çš„ mongo client æ‰§è¡Œå¯¹è±¡æ£€ç´¢ï¼Œæˆ–è€…æ˜¯å‘é€ä¸€ä¸ªäº‹ä»¶æ€»çº¿æ¶ˆæ¯ä¹‹åç­‰å¾…å›å¤ã€‚&lt;/p>
&lt;p>è¿™æ˜¯é€šè¿‡ awaitResult æ–¹æ³•æ¥å®ç°ï¼Œå®ƒè¿”å›ä¸€ä¸ªå€¼æˆ–è€…æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚&lt;/p>
&lt;p>åç¨‹ä¼šä¸€ç›´å¤„äºæš‚åœçš„çŠ¶æ€çŸ¥é“äº‹ä»¶è¢«å¤„ç†ï¼Œå¹¶ä¸”è¿™æ—¶æ²¡æœ‰å†…æ ¸çº¿ç¨‹è¢«é˜»å¡ã€‚&lt;/p>
&lt;p>The method is executed by specifying the asynchronous operation that needs to be executed in the form of a block that is passed to the handler at run-time.&lt;/p>
&lt;p>è¿™ä¸ªæ–¹æ³•æ˜¯é€šè¿‡æŒ‡å®šä¸€ä¸ªå¼‚æ­¥æ“ä½œæ¥æ‰§è¡Œï¼Œè¿™ä¸ªå¼‚æ­¥æ“ä½œéœ€è¦ä»¥å—çš„å½¢å¼æ‰§è¡Œï¼Œè€Œè¿™ä¸ªå¼‚æ­¥æ“ä½œå—åœ¨è¿è¡Œæ—¶ä¼šè¢«ä¼ ç»™ handlerã€‚&lt;/p>
&lt;p>è¿™é‡Œæ˜¯ä¸€ä¸ªä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">suspend&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">awaitResultExample&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">consumer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">eventBus&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">localConsumer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="s2">&amp;#34;a.b.c&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">consumer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">handler&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">message&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Consumer received: &lt;/span>&lt;span class="si">${message.body()}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">reply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;pong&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Send a message and wait for a reply
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">reply&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">awaitResult&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Message&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">h&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">eventBus&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;a.b.c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">h&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Reply received: &lt;/span>&lt;span class="si">${reply.body()}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“æ­¤å—äº§ç”Ÿå¤±è´¥æ—¶ï¼Œè°ƒç”¨è€…å¯ä»¥ä½¿ç”¨ try/catch ç»“æ„å¤„ç†å¼‚å¸¸ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">suspend&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">awaitResultFailureExample&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">consumer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">eventBus&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">localConsumer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="s2">&amp;#34;a.b.c&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">consumer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">handler&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">message&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// The consumer will get a failure
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">message&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fail&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;it failed!!!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Send a message and wait for a reply
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">reply&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Message&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">awaitResult&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Message&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">h&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">eventBus&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;a.b.c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">h&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ReplyException&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Handle specific reply exception here
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Reply failure: &lt;/span>&lt;span class="si">${e.message}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="è·å–ä¸€æ¬¡æ€§äº‹ä»¶">è·å–ä¸€æ¬¡æ€§äº‹ä»¶&lt;/h1>
&lt;p>ä½¿ç”¨ awaitEvent å‡½æ•°å¤„ç†ä¸€æ¬¡æ€§äº‹ä»¶ï¼ˆè€Œä¸æ˜¯ä¸‹ä¸€æ¬¡å‡ºç°çš„äº‹ä»¶ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">suspend&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">awaitEventExample&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">awaitEvent&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Long&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">h&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">setTimer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">2000L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">h&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;This should be fired in 2s by some time with id=&lt;/span>&lt;span class="si">$id&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="è·å–ä¸€æ¬¡æ€§-worker-çš„ç»“æœ">è·å–ä¸€æ¬¡æ€§ worker çš„ç»“æœ&lt;/h1>
&lt;p>ä½¿ç”¨ awaitBlocking å‡½æ•°å¤„ç†é˜»å¡è®¡ç®—ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">suspend&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">awaitBlockingExample&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">awaitBlocking&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Thread&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;some-string&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="äº‹ä»¶æµ">äº‹ä»¶æµ&lt;/h1>
&lt;p>åœ¨ vert.x API çš„å¾ˆå¤šåœ°æ–¹ï¼Œäº‹ä»¶æµéƒ½æ˜¯é€šè¿‡ handler æ¥å¤„ç†ã€‚è¿™äº›ä¾‹å­åŒ…æ‹¬äº‹ä»¶æ¶ˆæ¯æ€»çº¿çš„ä½¿ç”¨è€…å’Œ http æœåŠ¡å™¨çš„è¯·æ±‚ã€‚&lt;/p>
&lt;p>ReceiveChannelHandler ç±»å…è®¸é€šè¿‡(suspendable)receive æ–¹æ³•æ¥æ”¶äº‹ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">suspend&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">streamExample&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">adapter&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">receiveChannelHandler&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Message&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Int&lt;/span>&lt;span class="p">&amp;gt;&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">eventBus&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">localConsumer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Int&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="s2">&amp;#34;a.b.c&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Send 15 messages
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="m">0.&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">15&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">eventBus&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;a.b.c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Receive the first 10 messages
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="m">0.&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">10&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">message&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">adapter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">receive&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Received: &lt;/span>&lt;span class="si">${message.body()}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="ç­‰å¾…-vertx-çš„-future-çš„å®Œæˆ">ç­‰å¾… vert.x çš„ future çš„å®Œæˆ&lt;/h1>
&lt;p>vert.x çš„ future ç±»å®ä¾‹çš„æ‰©å±•æ–¹æ³• awaitï¼Œå¯ä»¥æš‚åœåç¨‹ç›´åˆ°ä»–ä»¬å®Œæˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•è¿”å›ç›¸åº”çš„ &lt;code>AsyncResult&amp;lt;T&amp;gt;&lt;/code> å¯¹è±¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">suspend&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">awaitingFuture&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">httpServerFuture&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Future&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">future&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">HttpServer&lt;/span>&lt;span class="p">&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">createHttpServer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">requestHandler&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">req&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Hello!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">8000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">httpServerFuture&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">httpServer&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">httpServerFuture&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">await&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;HTTP server port: &lt;/span>&lt;span class="si">${httpServer.actualPort()}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">result&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">CompositeFuture&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">httpServerFuture&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">httpServerFuture&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">await&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">succeeded&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;The server is now running!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cause&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">printStackTrace&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="é€šé“">é€šé“&lt;/h1>
&lt;p>channel å’Œ java çš„ BlockingQueue ç±»ä¼¼ï¼Œåªæ˜¯ Channel ä¸ä¼šé˜»å¡è€Œæ˜¯æš‚åœåç¨‹ã€‚&lt;/p>
&lt;ul>
&lt;li>å°†å€¼å‘é€åˆ°æ»¡äº†çš„ Channel ä¼šæš‚åœåç¨‹&lt;/li>
&lt;li>ä»ä¸€ä¸ªç©º Channel ä¸­æ¥æ”¶å€¼ä¹Ÿä¼šæš‚åœåç¨‹&lt;/li>
&lt;/ul>
&lt;p>ä½¿ç”¨ toChannel çš„æ‰©å±•æ–¹æ³•å¯ä»¥å°† vert.x çš„ ReadStreamÂ å’ŒÂ WriteStream é€‚é…æˆé€šé“ã€‚&lt;/p>
&lt;p>è¿™äº›é€‚é…å™¨è´Ÿè´£ç®¡ç†èƒŒå‹å’Œæµç»ˆç«¯ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>ReadStream&amp;lt;T&amp;gt;&lt;/code> é€‚é…ä¸º &lt;code>ReceiveChannel&amp;lt;T&amp;gt;&lt;/code>&lt;/li>
&lt;li>&lt;code>WriteStream&amp;lt;T&amp;gt;&lt;/code> é€‚é…ä¸º &lt;code>SendChannel&amp;lt;T&amp;gt;&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="æ¥æ”¶æ•°æ®">æ¥æ”¶æ•°æ®&lt;/h2>
&lt;p>å½“ä½ éœ€è¦å¤„ç†ä¸€ç³»åˆ—ç›¸å…³å€¼çš„æ—¶å€™ï¼Œchannel å¯èƒ½éå¸¸æœ‰ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Kotlin" data-lang="Kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">suspend&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">handleTemperatureStream&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">stream&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">eventBus&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">consumer&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Double&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="s2">&amp;#34;temperature&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">channel&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">stream&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">toChannel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vertx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="py">min&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Double&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MAX_VALUE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="py">max&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Double&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MIN_VALUE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Iterate until the stream is closed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Non-blocking
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">msg&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">channel&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">temperature&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">min&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">temperature&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">max&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">temperature&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// The stream is now closed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»–ä¹Ÿå¯ä»¥ç”¨äºè§£æåè®®ã€‚æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªéé˜»å¡çš„ http è¯·æ±‚è§£æå™¨æ¥å±•ç¤ºé€šé“çš„åŠŸèƒ½ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å°†ä¾é  RecordParser å°†ä»¥\r \n åˆ†å‰²çš„ buffer æµè¿›è¡Œåˆ†å‰²ã€‚&lt;/p>
&lt;p>è¿™æ˜¯è§£æå™¨çš„åˆå§‹ç‰ˆæœ¬ï¼Œå®ƒåªå¤„ç† http çš„è¯·æ±‚è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">server&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">createNetServer&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">connectHandler&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">socket&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// The record parser provides a stream of buffers delimited by \r\n
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">stream&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">RecordParser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">newDelimited&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\r\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">socket&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Convert the stream to a Kotlin channel
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">channel&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">stream&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">toChannel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vertx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Run the coroutine
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">launch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dispatcher&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Receive the request-line
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Non-blocking
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">line&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">channel&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">receive&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">method&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">line&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">uri&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">line&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Received HTTP request (&lt;/span>&lt;span class="si">$method&lt;/span>&lt;span class="s2">, &lt;/span>&lt;span class="si">$uri&lt;/span>&lt;span class="s2">)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Still need to parse headers and body...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è§£æè¯·æ±‚è¡Œå°±åƒåœ¨ channel ä¸Šè°ƒç”¨ receive ä¸€æ ·ç®€å•ã€‚&lt;/p>
&lt;p>ä¸‹ä¸€æ­¥æ˜¯é€šè¿‡æ¥æ”¶å—æ¥è§£æ http å¤´ï¼Œç›´åˆ°æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªç©ºå—ä¸ºæ­¢ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Receive HTTP headers
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">val&lt;/span> &lt;span class="py">headers&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">HashMap&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Non-blocking
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">header&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">channel&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">receive&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Done with parsing headers
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">isEmpty&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">pos&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">header&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">headers&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pos&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">toLowerCase&lt;/span>&lt;span class="p">()]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">header&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">substring&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pos&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">trim&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Received HTTP request (&lt;/span>&lt;span class="si">$method&lt;/span>&lt;span class="s2">, &lt;/span>&lt;span class="si">$uri&lt;/span>&lt;span class="s2">) with headers &lt;/span>&lt;span class="si">${headers.keys}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åï¼Œæˆ‘ä»¬é€šè¿‡å¤„ç†å¯é€‰çš„è¯·æ±‚ä½“æ¥ç»ˆæ­¢è§£æå™¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Receive the request body
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">val&lt;/span> &lt;span class="py">transferEncoding&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;transfer-encoding&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">contentLength&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">headers&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;content-length&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">body&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Buffer&lt;/span>&lt;span class="p">?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">transferEncoding&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;chunked&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Handle chunked encoding, e.g
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// 5\r\n
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// HELLO\r\n
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// 0\r\n
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// \r\n
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">body&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Buffer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">buffer&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Parse length chunk
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Non-blocking
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">len&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">channel&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">receive&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">toString&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">toInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">16&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">len&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// The stream is flipped to parse a chunk of the exact size
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">stream&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fixedSizeMode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">len&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Receive the chunk and append it
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Non-blocking
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">chunk&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">channel&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">receive&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">body&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">appendBuffer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">chunk&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">chunk&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// The stream is flipped back to the \r\n delimiter to parse the next chunk
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">stream&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">delimitedMode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\r\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">contentLength&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="k">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// The stream is flipped to parse a body of the exact size
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">stream&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fixedSizeMode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">contentLength&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">toInt&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Non-blocking
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">body&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">channel&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">receive&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">body&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Received HTTP request (&lt;/span>&lt;span class="si">$method&lt;/span>&lt;span class="s2">, &lt;/span>&lt;span class="si">$uri&lt;/span>&lt;span class="s2">) with headers &lt;/span>&lt;span class="si">${headers.keys}&lt;/span>&lt;span class="s2"> and body with size &lt;/span>&lt;span class="si">${body?.length() ?: 0}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å‘é€æ•°æ®">å‘é€æ•°æ®&lt;/h2>
&lt;p>ä½¿ç”¨ channel å‘é€æ•°æ®ä¹Ÿéå¸¸ç›´æ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Kotlin" data-lang="Kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">suspend&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">sendChannel&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">stream&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">eventBus&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">publisher&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Double&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="s2">&amp;#34;temperature&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">channel&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">stream&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">toChannel&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vertx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">temperature&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">readTemperatureSensor&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Broadcast the temperature
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// Non-blocking but could be suspended
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">channel&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temperature&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Wait for one second
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">awaitEvent&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Long&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">setTimer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">it&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>SendChannel#send å’Œ WriteStream#write éƒ½æ˜¯éé˜»å¡æ“ä½œã€‚ä¸åƒå½“ channel æ»¡çš„æ—¶å€™ SendChannel#send å¯ä»¥åœæ­¢æ‰§è¡Œï¼Œè€Œç­‰æ•ˆ WriteStream#writ çš„æ—  channel æ“ä½œå¯èƒ½åƒè¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Check we can write in the stream
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">stream&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">writeQueueFull&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// We can&amp;#39;t write so we set a drain handler to be called when we can write again
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">stream&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">drainHandler&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">broadcastTemperature&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Read temperature
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">temperature&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">readTemperatureSensor&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Write it to the stream
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">stream&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">temperature&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Wait for one second
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">setTimer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">broadcastTemperature&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="å»¶è¿Ÿå–æ¶ˆå’Œè¶…æ—¶">å»¶è¿Ÿï¼Œå–æ¶ˆå’Œè¶…æ—¶&lt;/h1>
&lt;p>å€ŸåŠ©äº vert.x çš„å®šæ—¶å™¨ï¼Œvert.x çš„è°ƒåº¦å™¨å®Œå…¨æ”¯æŒåç¨‹çš„ delay å‡½æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="n">launch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dispatcher&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Set a one second Vertx timer
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®šæ—¶å™¨ä¹Ÿæ”¯æŒå–æ¶ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">job&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">launch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dispatcher&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Set a one second Vertx timer
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delay&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Do something periodically
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Sometimes later
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cancel&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å–æ¶ˆæ˜¯åˆä½œçš„ã€‚&lt;/p>
&lt;p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ withTimeout å‡½æ•°å®‰æ’è¶…æ—¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Kotlin" data-lang="Kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="n">launch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vertx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">dispatcher&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">withTimeout&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;(&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">awaitEvent&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">anAsyncMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">it&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">TimeoutCancellationException&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// Cancelled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Vert.x æ”¯æŒæ‰€æœ‰çš„åç¨‹æ„å»ºå™¨ï¼šlaunchï¼Œasync å’Œ runBlockingã€‚runBlocking æ„å»ºå™¨ä¸èƒ½å† vert.x çš„æ—¶é—´å¾ªç¯çº¿ç¨‹ä¸­ä½¿ç”¨ã€‚&lt;/p>
&lt;h1 id="åç¨‹çš„äº’æ“ä½œæ€§">åç¨‹çš„äº’æ“ä½œæ€§&lt;/h1>
&lt;p>vert.x é›†æˆåç¨‹è¢«è®¾è®¡ä¸ºå®Œå…¨å¯ä»¥å’Œ kotlin åç¨‹äº’æ“ä½œã€‚&lt;/p>
&lt;p>kotlinx.coroutines.experimental.sync.Mutex è¢«æ‰§è¡Œåœ¨ä½¿ç”¨ vert.x è°ƒåº¦å™¨çš„äº‹ä»¶å¾ªç¯çº¿ç¨‹ã€‚&lt;/p>
&lt;h1 id="rxjava-çš„äº’æ“ä½œæ€§">RxJava çš„äº’æ“ä½œæ€§&lt;/h1>
&lt;p>è™½ç„¶ vertx-lang-kotlin-coroutines æ¨¡å—æ²¡æœ‰ä¸ RxJava ç‰¹å®šé›†æˆï¼Œä½†æ˜¯ kotlin åç¨‹æä¾›äº† RxJava çš„é›†æˆã€‚RxJava å¯ä»¥å’Œ vertx-lang-kotlin-coroutines å¾ˆå¥½çš„ååŒå·¥ä½œã€‚&lt;/p>
&lt;p>ä½ å¯ä»¥é˜…è¯»å“åº”æµå’Œåç¨‹çš„æŒ‡å—ã€‚&lt;/p></description></item><item><title>å°è®® async/await å’Œ coroutine</title><link>https://example.com/p/%E5%B0%8F%E8%AE%AE-async/await-%E5%92%8C-coroutine/</link><pubDate>Mon, 21 May 2018 19:37:14 +0000</pubDate><guid>https://example.com/p/%E5%B0%8F%E8%AE%AE-async/await-%E5%92%8C-coroutine/</guid><description>&lt;blockquote>
&lt;p>Being happy doesn&amp;rsquo;t mean that everything is perfect. It means that you decided to look beyond the imperfections.&lt;/p>
&lt;/blockquote>
&lt;p>åç«¯ç¼–ç¨‹ï¼Œæ¶‰åŠæœ€å¤šçš„å°±æ˜¯å¹¶å‘ã€‚ç®€å•ç†è§£å°±æ˜¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>å¹¶å‘æ˜¯åŒæ—¶ç®¡ç†å¤šä¸ªä»»åŠ¡å»æ‰§è¡Œï¼Œå¹¶è¡Œæ˜¯é’ˆå¯¹å¤šæ ¸å¤„ç†å™¨ï¼ŒåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ˜¯ manageï¼Œä¸€ä¸ªæ˜¯ runã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å¹¶å‘ä¸€èˆ¬ç‰¹æŒ‡ IOï¼ŒIO æ˜¯ç‹¬ç«‹äº CPU çš„è®¾å¤‡ï¼ŒIO è®¾å¤‡é€šå¸¸è¿œè¿œæ…¢äº CPUï¼Œæ‰€ä»¥æˆ‘ä»¬å¼•å…¥äº†å¹¶å‘çš„æ¦‚å¿µï¼Œè®© CPU å¯ä»¥ä¸€æ¬¡æ€§å‘èµ·å¤šä¸ª IO æ“ä½œè€Œä¸ç”¨ç­‰å¾… IO è®¾å¤‡åšå®Œä¸€ä¸ªæ“ä½œå†åšä»¤ä¸€ä¸ªã€‚åŸç†å°±æ˜¯éé˜»å¡æ“ä½œ+äº‹ä»¶é€šçŸ¥ã€‚&lt;/p>
&lt;p>ç¡¬ä»¶åº•å±‚ä¸Šæˆ‘å…¶å®ä¸å…³å¿ƒï¼Œä¸»è¦å°±æ˜¯åœ¨å†™ç¨‹åºä¸Šï¼Œå¦‚ä½•ç®€å•çš„å»å†™å¹¶å‘çš„ä»£ç ã€‚åœ¨è¯­æ³•å±‚é¢ä¸Šå¯¹å¹¶å‘åšçš„æ¯”è¾ƒå¥½çš„ï¼Œå¾ˆé€‚åˆåšæœåŠ¡ç«¯ï¼Œæ¯”å¦‚ goï¼Œæ¯”å¦‚ nodeï¼Œåˆæ¯”å¦‚æŸäº›å‡½æ•°å¼è¯­è¨€ã€‚æˆ‘æœ€è¿‘æœ€è¿‘ä¸»è¦ä½¿ç”¨çš„æ˜¯ node å’Œ kotlinã€‚&lt;/p>
&lt;p>é‚£ä¹ˆåœ¨å†™å¹¶å‘ä»£ç çš„æ—¶å€™ï¼Œå°±ä¼šæ—¶ä¸æ—¶çš„æƒ³è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;h2 id="ä¸€ä¸ªé—®é¢˜">ä¸€ä¸ªé—®é¢˜&lt;/h2>
&lt;p>å½“ä»£ç é‡åˆ°ä¸€ä¸ªâ€œæš‚æ—¶ä¸èƒ½å®Œæˆâ€çš„æµç¨‹æ—¶ï¼ˆä¾‹å¦‚å»ºç«‹ä¸€ä¸ª tcp é“¾æ¥ï¼Œå¯èƒ½éœ€è¦ 5ms æ‰èƒ½å»ºç«‹ï¼‰ï¼Œä»–ä¸æƒ³é˜»å¡åœ¨è¿™é‡Œç¡çœ ï¼Œæƒ³æš‚æ—¶ç¦»å¼€ç°åœºå»å¹²ç‚¹åˆ«çš„äº‹æƒ…ï¼ˆä¾‹å¦‚çœ‹çœ‹å¦å¤–ä¸€ä¸ªå·²ç»å»ºç«‹çš„é“¾æ¥æ˜¯å¦å¯ä»¥æ”¶åŒ…äº†ï¼‰ã€‚é—®é¢˜æ˜¯ï¼šç¦»å¼€ç°åœºåï¼Œå½“ä½ å›æ¥çš„æ—¶å€™ï¼Œä¸Šä¸‹æ–‡è¿˜åƒä½ èµ°çš„æ—¶å€™å—ï¼Ÿ&lt;/p>
&lt;p>è·³è½¬ç¦»å¼€ï¼Œåœ¨ä»»ä½•è¯­è¨€é‡Œéƒ½æœ‰ 2 ç§æœ€åŸºæœ¬çš„æ–¹æ³•ï¼š1ï¼‰ä»å½“å‰å‡½æ•°è¿”å›ï¼› 2ï¼‰è°ƒç”¨ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ å‰è€…ä¼šæŠŠä¸Šä¸‹æ–‡ä¸­çš„å±€éƒ¨å˜é‡å’Œå‡½æ•°å‚æ•°å…¨éƒ¨æ‘§æ¯ï¼Œé™¤éä»–è¿”å›å‰æŠŠè¿™äº›å˜é‡æ‰¾ä¸ªåˆ«çš„åœ°æ–¹ä¿å­˜èµ·æ¥ï¼›åè€…åˆ™èƒ½ä¿æŠ¤ä½æ•´ä¸ªä¸Šä¸‹æ–‡çš„å†…å­˜ï¼ˆé™¤äº†åç¨‹åˆ‡æ¢åä¼šæ‘§æ¯ä¸€äº›å¯„å­˜å™¨ï¼‰ï¼Œè€Œä¸”è·³è½¬å›æ¥ä¹Ÿæ˜¯å¸¸è§„æ–¹æ³•ï¼šå‡½æ•°è¿”å›ã€‚&lt;/p>
&lt;p>åœ¨å†™ node çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ— è„‘ä¸Š async/awaitã€‚æ¯æ¬¡çœ‹åˆ°å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œå¼ºè¿«ç—‡å°±çŠ¯äº†ï¼Œæ€»æ˜¯æƒ³æ–¹è®¾æ³•å°†é‚£ä¸ªæ–¹æ³•è½¬æˆ promiseï¼Œç„¶åä½¿ç”¨ await è·å¾—ç»“æœã€‚æ— è„‘å°è¯•äº† bluebird å’Œ node çš„ utilï¼Œè™½ç„¶æœ‰äº›æ˜¯å¾ˆå¥½ç”¨çš„ï¼Œä½†æ˜¯æœ‰çš„è¿˜æ˜¯æ— æ³•è¾¾åˆ°æˆ‘é¢„æœŸçš„ã€‚é ç€æ— è„‘çš„ async/awaitï¼Œå®ç°äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä»£ç å†™èµ·æ¥ä¹Ÿæ˜¯å¿«çš„é£èµ·ï¼Œä½†æ˜¯åªé¡¾ç€åšä¸šåŠ¡è€Œä¸æ·±å…¥æ€è€ƒçš„è¯ï¼Œæ˜¯ä¸€ä¸ªä¸å¥½çš„è¡¨ç°ï¼Œæ‰€ä»¥æˆ‘å°±åœä¸‹æ¥æœäº†å¾ˆå¤š async/await çš„ä¸œè¥¿ï¼Œç‰¹åˆ«æ˜¯ä»é˜®ä¸€å³°è€å¸ˆé‚£é‡Œæ”¶è·äº†å¾ˆå¤šã€‚&lt;/p>
&lt;h2 id="js-å¼‚æ­¥ç¼–ç¨‹">js å¼‚æ­¥ç¼–ç¨‹&lt;/h2>
&lt;p>å› ä¸º js æ˜¯å•çº¿ç¨‹ï¼Œæ‰€ä»¥å¼‚æ­¥ç¼–ç¨‹å¯¹ js ç‰¹åˆ«é‡è¦ã€‚&lt;/p>
&lt;p>å®ç°å¼‚æ­¥ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å›è°ƒå‡½æ•°&lt;/p>
&lt;p>callbackï¼Œè‹±è¯­ç›´è¯‘å°±æ˜¯é‡æ–°è°ƒç”¨ã€‚&lt;/p>
&lt;p>æ‰€è°“çš„å›è°ƒå‡½æ•°å°±æ˜¯æŠŠä»»åŠ¡çš„ç¬¬äºŒæ®µå•ç‹¬å†™åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œç­‰åˆ°é‡æ–°æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚&lt;/p>
&lt;p>å›è°ƒæœ¬èº«æ²¡é—®é¢˜ï¼Œä½†æ˜¯å°±æ€•å¤šé‡åµŒå¥—ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>promise&lt;/p>
&lt;p>promise æ˜¯ä¸€ç§æ–°çš„å†™æ³•ï¼ŒæŠŠå›è°ƒå‡½æ•°çš„æ¨ªå‘åµŒå¥—ï¼Œç”¨ then çš„å½¢å¼æ”¹æˆçºµå‘çš„åŠ è½½ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åç¨‹&lt;/p>
&lt;p>åç¨‹å°±æ˜¯æ¯”çº¿ç¨‹æ›´å°çš„å•ä½ã€‚&lt;/p>
&lt;p>æ‰§è¡Œè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>ç¬¬ä¸€æ­¥ï¼Œåç¨‹ A å¼€å§‹æ‰§è¡Œã€‚&lt;/p>
&lt;p>ç¬¬äºŒæ­¥ï¼Œåç¨‹ A æ‰§è¡Œåˆ°ä¸€åŠï¼Œè¿›å…¥æš‚åœï¼Œæ‰§è¡Œæƒè½¬ç§»åˆ°åç¨‹ Bã€‚&lt;/p>
&lt;p>ç¬¬ä¸‰æ­¥ï¼Œï¼ˆä¸€æ®µæ—¶é—´åï¼‰åç¨‹ B äº¤è¿˜æ‰§è¡Œæƒã€‚&lt;/p>
&lt;p>ç¬¬å››æ­¥ï¼Œåç¨‹ A æ¢å¤æ‰§è¡Œã€‚&lt;/p>
&lt;p>åé¢å†å±•å¼€è¯´åç¨‹ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>å¾ˆæ˜æ˜¾ï¼Œåœ¨ go ç«èµ·æ¥ä¹‹åï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½åœ¨å¾€åç¨‹ä¸Šé ï¼Œå› ä¸ºåç¨‹å¾ˆå¥½çš„å°†å¼‚æ­¥çš„å†™æ³•è½¬åŒ–æˆäº†åŒæ­¥çš„å†™æ³•ï¼Œé™ä½äº†å¿ƒæ™ºè´Ÿæ‹…ã€‚js å½“ç„¶ä¹Ÿä¸è½åã€‚&lt;/p>
&lt;p>js çš„å¼‚æ­¥å†™æ³•çš„æ¼”è¿›&lt;/p>
&lt;ul>
&lt;li>
&lt;p>generator&lt;/p>
&lt;p>es6 å¢åŠ äº† generator å‡½æ•°ï¼Œå°±æ˜¯åç¨‹çš„ä¸€ç§å®ç°ï¼Œæœ€å¤§ç‰¹ç‚¹å°±æ˜¯ä½¿ç”¨ yield å…³é”®å­—å°±æ˜¯ç”¨æ¥äº¤å‡ºå‡½æ•°çš„æ‰§è¡Œæƒã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">function* gen(x){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var y = yield x + 2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return y;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸åŒäºæ™®é€šå‡½æ•°çš„åœ°æ–¹åœ¨äºè°ƒç”¨ generator å‡½æ•°çš„æ—¶å€™ï¼Œä¸è¿”å›ç»“æœï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ªå†…éƒ¨çš„æŒ‡é’ˆã€‚è°ƒç”¨æŒ‡é’ˆçš„ next æ–¹æ³•ï¼Œä¼šç§»åŠ¨å†…éƒ¨æŒ‡é’ˆï¼ˆå³æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„ç¬¬ä¸€æ®µï¼‰ï¼Œé‡åˆ°çš„ yield è¯­å¥å°±äº¤å‡ºæ‰§è¡Œæƒï¼Œæ‰§è¡Œåˆ«çš„ä»£ç ã€‚ä¸‹æ¬¡å†è°ƒç”¨è¯¥å‡½æ•°æŒ‡é’ˆçš„ next æ–¹æ³•ï¼Œå°±ç»§ç»­æ‰§è¡Œåˆ°è¯¥å‡½æ•°çš„ä¸‹ä¸€ä¸ª yield è¯­å¥ã€‚&lt;/p>
&lt;p>è™½ç„¶ Generator å‡½æ•°å°†å¼‚æ­¥æ“ä½œè¡¨ç¤ºå¾—å¾ˆç®€æ´ï¼Œä½†æ˜¯æµç¨‹ç®¡ç†å´ä¸æ–¹ä¾¿ï¼ˆå³ä½•æ—¶æ‰§è¡Œç¬¬ä¸€é˜¶æ®µã€ä½•æ—¶æ‰§è¡Œç¬¬äºŒé˜¶æ®µï¼‰ï¼Œè¿™æ ·çœ‹æ¥å…¶å® generator å‡½æ•°å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„å®¹å™¨ï¼Œéœ€è¦æœ‰ä¸€ä¸ªè§¦å‘å®ƒè‡ªåŠ¨æ‰§è¡Œçš„æœºåˆ¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Thunk å‡½æ•°&lt;/p>
&lt;p>è¯´åˆ° thunk å‡½æ•°ï¼Œå°±å¾—å…ˆäº†è§£ä¸€ä¸‹å‚æ•°çš„æ±‚å€¼ç­–ç•¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">let m=1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">function f(x){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return x*2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">f(m+5)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>
&lt;p>ä¼ å€¼è°ƒç”¨&lt;/p>
&lt;p>å…ˆè®¡ç®—å‡ºæ¥ m+5 çš„å€¼ 6ï¼Œç„¶åå†å°†å€¼ä¼ ç»™å‡½æ•° fï¼Œå³ 6*2&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¼ åè°ƒç”¨&lt;/p>
&lt;p>æŠŠ m+5 ä¼ å…¥åˆ° f ä¸­ï¼Œåœ¨ç”¨åˆ°çš„æ—¶å€™å†è®¡ç®—ï¼Œå³(x+5)*2ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ä¼ å€¼è°ƒç”¨æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å¯¹å‚æ•°æ±‚å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šè¿˜æ²¡ç”¨åˆ°è¿™ä¸ªå‚æ•°ï¼Œæœ‰å¯èƒ½é€ æˆæ€§èƒ½æŸå¤±ã€‚&lt;/p>
&lt;p>ç¼–è¯‘å™¨çš„&amp;quot;ä¼ åè°ƒç”¨&amp;quot;å®ç°ï¼Œå¾€å¾€æ˜¯å°†å‚æ•°æ”¾åˆ°ä¸€ä¸ªä¸´æ—¶å‡½æ•°ä¹‹ä¸­ï¼Œå†å°†è¿™ä¸ªä¸´æ—¶å‡½æ•°ä¼ å…¥å‡½æ•°ä½“ã€‚è¿™ä¸ªä¸´æ—¶å‡½æ•°å°±å«åš Thunk å‡½æ•°ã€‚&lt;/p>
&lt;p>js æ˜¯ä¼ å€¼è°ƒç”¨ã€‚ä»–çš„ thunk å‡½æ•°æ˜¯å°†å¤šå‚æ•°çš„å‡½æ•°ï¼Œæ›¿æ¢æˆäº†å•å‚æ•°çš„ç‰ˆæœ¬ï¼Œè€Œä¸”åªæ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚&lt;/p>
&lt;p>è¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°äº†åŸºäº thunk å‡½æ•°çš„ generator è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚&lt;/p>
&lt;p>å…·ä½“çš„å®ç°å’Œå¦‚ä½•ä½¿ç”¨ï¼Œå‚è€ƒ&lt;a class="link" href="http://www.ruanyifeng.com/blog/2015/05/thunk.html" target="_blank" rel="noopener"
>http://www.ruanyifeng.com/blog/2015/05/thunk.html&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>co å‡½æ•°&lt;/p>
&lt;p>co å‡½æ•°æ˜¯åŸºäº Promise çš„ generator å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚&lt;/p>
&lt;p>æºä»£ç åªæœ‰å‡ åè¡Œï¼Œtj å¤§ç¥å¤ªå¼ºğŸ‘äº†ã€‚&lt;/p>
&lt;p>&lt;a class="link" href="http://www.ruanyifeng.com/blog/2015/05/co.html" target="_blank" rel="noopener"
>http://www.ruanyifeng.com/blog/2015/05/co.html&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>async/await&lt;/p>
&lt;p>async å‡½æ•°å°±æ˜¯ generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚&lt;/p>
&lt;p>async å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ï¼Œæ— è„‘å†™ async å’Œ await çš„æ—¶å€™å°±æ˜¯ï¼Œå‡ ä¹æ‰€æœ‰çš„å‡½æ•°éƒ½å†™æˆäº† async å‡½æ•°ï¼Œåªè¦éœ€è¦ç­‰å¾…çš„æ–¹æ³•ï¼Œéƒ½ç”¨ await å»ç­‰å¾…ï¼Œè¿™æ ·å°±é€ æˆäº†å¾ˆå¤šæ— æ„ä¹‰çš„ç­‰å¾…ã€‚æœ¬æ¥ä¸¤ä¸ªä¸ç›¸å¹²çš„æ“ä½œï¼Œå¦‚æœæ¯ä¸ªéƒ½æ˜¯ç”¨ await ç­‰çš„è¯ï¼Œå°±ä¼šå¾ˆå½±å“æ€§èƒ½ã€‚&lt;/p>
&lt;p>å¤šä¸ªè¯·æ±‚å¹¶å‘æ‰§è¡Œçš„æ—¶å€™ï¼Œå°½é‡é€‰ç”¨ Promise.all æ–¹æ³•ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ç†è§£äº†ä»¥ä¸Šçš„æ¼”è¿›è¿‡ç¨‹ï¼Œæ„Ÿè§‰è‡ªå·±ç»ˆäºæ‘†è„±äº† java æ€ç»´çš„æªï¼Œå¯¹ node ç»ˆäºå…¥é—¨äº†ã€‚ç„¶åï¼ŒåŒæ­¥åœ°å†™ç€ kotlin é¡¹ç›®ï¼Œåˆé™·å…¥äº†æ³¥æ½­ä¸­ã€‚&lt;/p>
&lt;h2 id="futurerxjavaactor-å’Œ-kotlin-åç¨‹">Futureã€RxJavaã€Actor å’Œ kotlin åç¨‹&lt;/h2>
&lt;p>æˆ‘ç†è§£çš„ä¹Ÿä¸æ˜¯å¾ˆæ·±ï¼Œæ±‚ç§‘æ™®ã€‚&lt;/p>
&lt;p>ä»¥å‰å†™ java çš„æ—¶å€™ï¼Œè‡ªå·±éƒ½æ˜¯æ— è„‘ç”¨çº¿ç¨‹æ± ï¼Œå¼€å¤šçº¿ç¨‹å»å¤„ç†ï¼Œä¸€èˆ¬è¿™ç§æƒ…å†µä¸‹ä¸éœ€è¦çº¿ç¨‹çš„ç»“æœã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>future&lt;/p>
&lt;p>å› ä¸ºä¸èƒ½ç›´æ¥ä»åˆ«çš„çº¿ç¨‹ä¸­å¾—åˆ°å‡½æ•°çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ future å°±å‡ºåœºäº†ã€‚&lt;/p>
&lt;p>Futrue å¯ä»¥ç›‘è§†ç›®æ ‡çº¿ç¨‹è°ƒç”¨ call çš„æƒ…å†µï¼Œå½“ä½ è°ƒç”¨ Future çš„ get()æ–¹æ³•ä»¥è·å¾—ç»“æœæ—¶ï¼Œå½“å‰çº¿ç¨‹å°±å¼€å§‹é˜»å¡ï¼Œç›´æ¥ call æ–¹æ³•ç»“æŸè¿”å›ç»“æœã€‚&lt;/p>
&lt;p>Future å¯¹è±¡æœ¬èº«å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ˜¾å¼çš„å¼•ç”¨ï¼Œä¸€ä¸ªå¯¹å¼‚æ­¥å¤„ç†ç»“æœçš„å¼•ç”¨ã€‚ç”±äºå…¶å¼‚æ­¥æ€§è´¨ï¼Œåœ¨åˆ›å»ºä¹‹åˆï¼Œå®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡å¯èƒ½è¿˜å¹¶ä¸å¯ç”¨ï¼ˆæ¯”å¦‚å°šåœ¨è¿ç®—ä¸­ï¼Œç½‘ç»œä¼ è¾“ä¸­æˆ–ç­‰å¾…ä¸­ï¼‰ã€‚è¿™æ—¶ï¼Œå¾—åˆ° Future çš„ç¨‹åºæµç¨‹å¦‚æœå¹¶ä¸æ€¥äºä½¿ç”¨ Future æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥åšå…¶å®ƒä»»ä½•æƒ³åšçš„äº‹å„¿ï¼Œå½“æµç¨‹è¿›è¡Œåˆ°éœ€è¦ Future èƒŒåå¼•ç”¨çš„å¯¹è±¡æ—¶ï¼Œå¯èƒ½æœ‰ä¸¤ç§æƒ…å†µï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>å¸Œæœ›èƒ½çœ‹åˆ°è¿™ä¸ªå¯¹è±¡å¯ç”¨ï¼Œå¹¶å®Œæˆä¸€äº›ç›¸å…³çš„åç»­æµç¨‹ã€‚&lt;/p>
&lt;p>å¯ä»¥é€šè¿‡è°ƒç”¨ Future.isDone()åˆ¤æ–­å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°±ç»ªï¼Œå¹¶é‡‡å–ä¸åŒçš„å¤„ç†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœå®åœ¨ä¸å¯ç”¨ï¼Œä¹Ÿå¯ä»¥è¿›å…¥å…¶å®ƒåˆ†æ”¯æµç¨‹ã€‚&lt;/p>
&lt;p>åªéœ€è°ƒç”¨ get()æˆ– get(long timeout, TimeUnit unit)é€šè¿‡åŒæ­¥é˜»å¡æ–¹å¼ç­‰å¾…å¯¹è±¡å°±ç»ªã€‚å®é™…è¿è¡ŒæœŸæ˜¯é˜»å¡è¿˜æ˜¯ç«‹å³è¿”å›å°±å–å†³äº get()çš„è°ƒç”¨æ—¶æœºå’Œå¯¹è±¡å°±ç»ªçš„å…ˆåäº†ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>rxjava&lt;/p>
&lt;/li>
&lt;li>
&lt;p>actor&lt;/p>
&lt;/li>
&lt;li>
&lt;p>coroutine&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>è·ªæ±‚ç§‘æ™®ï¼Œç­‰ç†è§£äº†å†æ¥ç€å®Œå–„ã€‚&lt;/p>
&lt;h2 id="æµ…è°ˆåç¨‹">æµ…è°ˆåç¨‹&lt;/h2>
&lt;p>è¯´åˆ°åç¨‹ï¼Œå°±è¦è¯´çº¿ç¨‹ã€‚&lt;/p>
&lt;p>çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·æ€æ¦‚å¿µï¼Œçº¿ç¨‹æœ¬èº«ä¹Ÿä¾èµ–ä¸­æ–­æ¥è¿›è¡Œè°ƒåº¦ã€‚æ—©æœŸçš„ç”¨æˆ·æ€ IO å¹¶å‘å¤„ç†æ˜¯ç”¨ poll(select)æ¨¡å‹å»è½®è¯¢ IO çŠ¶æ€ï¼Œç„¶åå‘èµ·ç›¸åº”çš„ IO æ“ä½œï¼Œç§°ä¹‹ä¸ºäº‹ä»¶å“åº”å¼çš„å¼‚æ­¥æ¨¡å‹ï¼Œè¿™ç§æ–¹å¼å¹¶ä¸å®¹æ˜“ä½¿ç”¨ï¼Œæ‰€ä»¥åˆå‘å±•å‡ºäº†é˜»å¡å¼ IO æ“ä½œï¼Œè®©é€»è¾‘æŒ‚èµ·å¹¶ç­‰å¾… IO å®Œæˆï¼Œä¸ºäº†è®©é˜»å¡å¼ IO èƒ½å¤Ÿå¹¶å‘å°±å¿…é¡»ä¾èµ–å¤šçº¿ç¨‹æˆ–è€…å¤šè¿›ç¨‹æ¨¡å‹æ¥å®ç°ã€‚ä½†æ˜¯çº¿ç¨‹çš„å¼€é”€æ˜¯éå¸¸å¤§çš„ï¼Œå½“é‡åˆ°å¤§è§„æ¨¡å¹¶å‘çš„æ—¶å€™å¤šçº¿ç¨‹æ¨¡å‹å°±æ— æ³•èƒœä»»äº†ã€‚æ‰€ä»¥å¤§è§„æ¨¡å¹¶å‘æ—¶æˆ‘ä»¬åˆé€€å›å»ä½¿ç”¨äº‹ä»¶å“åº”ï¼Œepoll åœ¨æœ¬è´¨ä¸Šè¿˜æ˜¯ poll æ¨¡å‹ï¼Œåªæ˜¯åœ¨ç®—æ³•ä¸Šä¼˜åŒ–äº†å®ç°ï¼Œæ­¤æ—¶æˆ‘ä»¬åªç”¨å•çº¿ç¨‹å°±å¯ä»¥å¤„ç†ä¸Šä¸‡çš„å¹¶å‘è¯·æ±‚äº†ã€‚&lt;/p>
&lt;p>ç›´åˆ°å¤šæ ¸ CPU çš„å‡ºç°ï¼Œæˆ‘ä»¬å‘ç°åªç”¨ä¸€ä¸ªçº¿ç¨‹æ˜¯æ— æ³•å‘æŒ¥å¤šæ ¸ CPU çš„å¨åŠ›çš„ï¼Œæ‰€ä»¥å†æ¬¡å¼•å…¥çº¿ç¨‹æ± æ¥åˆ†æ‘Š IO æ“ä½œçš„ CPU æ¶ˆè€—ï¼Œç”šè‡³ CPU çš„ä¸­æ–­å“åº”ä¹Ÿå¯ä»¥ç”±å¤šä¸ªæ ¸æ¥åˆ†æ‘Šæ‰§è¡Œï¼Œæ­¤æ—¶çš„çº¿ç¨‹æ•°é‡æ˜¯å¤§è‡´ç­‰äº CPU çš„æ ¸å¿ƒæ•°è€Œè¿œå°äºå¹¶å‘ IO æ•°çš„ï¼ˆè¿™æ—¶ CPU èƒ½å¤„ç†ç™¾ä¸‡çº§çš„å¹¶å‘ï¼‰ï¼Œçº¿ç¨‹çš„å¼•å…¥å®Œå…¨æ˜¯ä¸ºäº†è´Ÿè½½å‡è¡¡è€Œè·Ÿå¹¶å‘æ²¡æœ‰å…³ç³»ã€‚æ‰€ä»¥ä¸ç®¡æ˜¯ç”¨ select/epoll/iocp åœ¨é€»è¾‘å±‚éƒ½ç»•ä¸å¼€åŸºäºäº‹ä»¶å“åº”çš„å¼‚æ­¥æ“ä½œï¼Œé¢å¯¹å¼‚æ­¥é€»è¾‘æœ¬èº«çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬æ‰å¼•å…¥äº† async/await ä»¥åŠ coroutine æ¥é™ä½å¤æ‚æ€§ã€‚&lt;/p>
&lt;p>coroutine æ˜¯ä¸ªå¾ˆå®½æ³›çš„æ¦‚å¿µï¼Œasync/await ä¹Ÿå±äº coroutine çš„ä¸€ç§ã€‚&lt;/p>
&lt;p>è€Œåç¨‹åœ¨å®ç°æ¨¡å¼ä¸Šåˆåˆ†ä¸ºï¼šstackful coroutine å’Œ stackless coroutineã€‚&lt;/p>
&lt;p>æ‰€è°“ stackful æ˜¯æŒ‡æ¯ä¸ª coroutine æœ‰ç‹¬ç«‹çš„è¿è¡Œæ ˆï¼Œæ¯”å¦‚ go è¯­è¨€çš„æ¯ä¸ª goroutine ä¼šåˆ†é…ä¸€ä¸ª 4k çš„å†…å­˜æ¥åšä¸ºè¿è¡Œæ ˆï¼Œåˆ‡æ¢ goroutine çš„æ—¶å€™è¿è¡Œæ ˆä¹Ÿä¼šåˆ‡æ¢ã€‚stackful çš„å¥½å¤„åœ¨äºè¿™ç§ coroutine æ˜¯å®Œæ•´çš„ï¼Œcoroutine å¯ä»¥åµŒå¥—ã€å¾ªç¯ã€‚&lt;/p>
&lt;p>ä¸ stackful å¯¹åº”çš„æ˜¯ stackless coroutineï¼Œæ¯”å¦‚ js çš„ generator å‡½æ•°ï¼Œè¿™ç±» coroutine ä¸éœ€è¦åˆ†é…å•ç‹¬çš„æ ˆç©ºé—´ï¼Œcoroutine çŠ¶æ€ä¿å­˜åœ¨é—­åŒ…é‡Œï¼Œä½†ç¼ºç‚¹æ˜¯åŠŸèƒ½æ¯”è¾ƒå¼±ï¼Œä¸èƒ½è¢«åµŒå¥—è°ƒç”¨ï¼Œä¹Ÿæ²¡åŠæ³•å’Œå¼‚æ­¥å‡½æ•°é…åˆä½¿ç”¨è¿›è¡Œæ§åˆ¶æµçš„è°ƒåº¦ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ²¡åŠæ³•è·Ÿ stackful coroutine åšæ¯”è¾ƒã€‚ä¿å­˜è¿™äº›çŠ¶æ€çš„æ—¶å€™ï¼Œæœ‰çš„è¯­è¨€å°±å¼•å…¥äº†çŠ¶æ€æœºçš„æ¨¡å‹æ¥å®ç°çº¿ç¨‹ã€‚&lt;/p>
&lt;p>async/await çš„å‡ºç°ï¼Œå®ç°äº†åŸºäº stackless coroutine çš„å®Œæ•´ coroutineã€‚åœ¨ç‰¹æ€§ä¸Šå·²ç»éå¸¸æ¥è¿‘ stackful coroutine äº†ï¼Œä¸ä½†å¯ä»¥åµŒå¥—ä½¿ç”¨ä¹Ÿå¯ä»¥æ”¯æŒ try catchã€‚&lt;/p>
&lt;h2 id="ç»“è¯­">ç»“è¯­&lt;/h2>
&lt;p>å‘ç°è‡ªå·±æŒºæ— è„‘çš„ï¼Œå­¦ä¼šäº†ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ— è„‘çš„å»ç”¨ï¼Œç›´åˆ°ç¢°å£äº†æ‰ä¼šå»æ€è€ƒã€‚&lt;/p></description></item><item><title>elasticsearch</title><link>https://example.com/p/elasticsearch/</link><pubDate>Sun, 20 May 2018 14:17:07 +0000</pubDate><guid>https://example.com/p/elasticsearch/</guid><description>&lt;p>ä»¥å‰æ²¡æœ‰å¥½å¥½å­¦çš„ä¸œè¥¿ï¼Œç°åœ¨åœ¨å·¥ä½œä¸­æ…¢æ…¢çš„è¡¥å›æ¥äº†ã€‚&lt;/p>
&lt;h1 id="åŸºç¡€æ¦‚å¿µ">åŸºç¡€æ¦‚å¿µ&lt;/h1>
&lt;ul>
&lt;li>ç´¢å¼•&lt;/li>
&lt;/ul>
&lt;p>es æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªç´¢å¼•ï¼ˆindexï¼‰ä¸­ã€‚&lt;/p>
&lt;p>ç´¢å¼•å°±åƒæ˜¯æ•°æ®åº“ã€‚&lt;/p>
&lt;ul>
&lt;li>æ–‡æ¡£&lt;/li>
&lt;/ul>
&lt;p>æ–‡æ¡£æ˜¯ es çš„å®ä½“ã€‚ç”±å­—æ®µæ„æˆï¼Œæ¯ä¸ªå­—æ®µåŒ…å«å­—æ®µåå’Œä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—æ®µå€¼ã€‚&lt;/p>
&lt;p>æ–‡æ¡£å°±åƒæ•°æ®åº“ä¸­çš„ä¸€æ¡æ¡è®°å½•ã€‚&lt;/p>
&lt;ul>
&lt;li>ç±»å‹&lt;/li>
&lt;/ul>
&lt;p>æ¯ä¸ªæ–‡æ¡£éƒ½æœ‰ä¸€ä¸ªç±»å‹ä¸ä¹‹ç›¸å¯¹åº”ã€‚&lt;/p>
&lt;p>ç±»å‹å°±åƒæ•°æ®åº“ä¸­çš„è¡¨ã€‚&lt;/p>
&lt;ul>
&lt;li>Map&lt;/li>
&lt;/ul>
&lt;p>æ‰€æœ‰æ–‡æ¡£åœ¨è¢«å†™å…¥åˆ° es ä¸­ï¼Œéƒ½ä¼šè¢«åˆ†æã€‚ç”±ç”¨æˆ·è®¾ç½®ä¸€äº›å‚æ•°å†³å®šå¦‚ä½•åˆ†å‰²è¯æ¡ã€å“ªäº›å­—åº”è¯¥è¢«è¿‡æ»¤æ‰ç­‰ç­‰ã€‚&lt;/p>
&lt;ul>
&lt;li>èŠ‚ç‚¹&lt;/li>
&lt;/ul>
&lt;p>å•ä¸ª es æœåŠ¡å®ä¾‹å°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚&lt;/p>
&lt;ul>
&lt;li>é›†ç¾¤&lt;/li>
&lt;/ul>
&lt;p>å¤šä¸ªååŒå·¥ä½œçš„ es èŠ‚ç‚¹çš„é›†åˆå°±æ˜¯é›†ç¾¤ã€‚&lt;/p>
&lt;ul>
&lt;li>åˆ†ç‰‡&lt;/li>
&lt;/ul>
&lt;p>es å°†æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªç‰©ç†çš„ Lucene ç´¢å¼•ä¸Šï¼Œè¿™äº›ç‰©ç† Lucene ç´¢å¼•è¢«ç§°ä¸ºåˆ†ç‰‡ã€‚&lt;/p>
&lt;ul>
&lt;li>å‰¯æœ¬&lt;/li>
&lt;/ul>
&lt;p>å‰¯æœ¬å°±æ˜¯æ¯ä¸ªåˆ†ç‰‡éƒ½åšå†—ä½™å¤„ç†ï¼Œä¸€ä¸ªå®•æœºä¹‹åï¼Œä¸å½±å“æœåŠ¡ã€‚&lt;/p>
&lt;h1 id="å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨&lt;/h1>
&lt;h2 id="å®‰è£…">å®‰è£…&lt;/h2>
&lt;p>es çš„å®‰è£…å¾ˆç®€å•ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ macï¼Œä¸‹è½½ä¸‹æ¥ zip åŒ…ï¼Œè§£å‹å³å¯ä½¿ç”¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">[elasticsearch-6.2.4] pwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/Users/zhuzhenfeng/Documents/software/elasticsearch-6.2.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[elasticsearch-6.2.4] ./bin/elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[2018-05-20T17:18:37,619][INFO ][o.e.n.Node ] [] initializing ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[2018-05-20T17:18:37,766][INFO ][o.e.e.NodeEnvironment ] [M41310-] using [1] data paths, mounts [[/ (/dev/disk1s1)]], net usable_space [136gb], net total_space [233.4gb], types [apfs]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[2018-05-20T17:18:37,767][INFO ][o.e.e.NodeEnvironment ] [M41310-] heap size [990.7mb], compressed ordinary object pointers [true]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·å°±å°† es å¯åŠ¨äº†ï¼Œç„¶ååœ¨ chrome ä¸­ï¼Œè¾“å…¥&lt;a class="link" href="http://localhost:9200" target="_blank" rel="noopener"
>http://localhost:9200&lt;/a>ï¼Œå³å¯æŸ¥çœ‹æœ‰æ²¡æœ‰å¯åŠ¨æˆåŠŸã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;name&amp;#34;: &amp;#34;M41310-&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cluster_name&amp;#34;: &amp;#34;elasticsearch&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;cluster_uuid&amp;#34;: &amp;#34;58U11tViTYuXpI2b5SiGrg&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;version&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;number&amp;#34;: &amp;#34;6.2.4&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;build_hash&amp;#34;: &amp;#34;ccec39f&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;build_date&amp;#34;: &amp;#34;2018-04-12T20:37:28.497551Z&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;build_snapshot&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;lucene_version&amp;#34;: &amp;#34;7.2.1&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;minimum_wire_compatibility_version&amp;#34;: &amp;#34;5.6.0&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;minimum_index_compatibility_version&amp;#34;: &amp;#34;5.0.0&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;tagline&amp;#34;: &amp;#34;You Know, for Search&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å¸¸ç”¨çš„å‘½ä»¤">å¸¸ç”¨çš„å‘½ä»¤&lt;/h2>
&lt;p>ä½¿ç”¨ postman æ¥æ¨¡æ‹Ÿå‘é€è¯·æ±‚ã€‚&lt;/p>
&lt;h3 id="åˆ›å»º-index">åˆ›å»º index&lt;/h3>
&lt;p>PUT&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">http://127.0.0.1:9200/myindex
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>response&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;acknowledged&amp;#34;: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;shards_acknowledged&amp;#34;: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;index&amp;#34;: &amp;#34;myindex&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºäº†ä¸€ä¸ªå« myindex çš„ç´¢å¼•&lt;/p>
&lt;h3 id="åˆ é™¤-index">åˆ é™¤ index&lt;/h3>
&lt;p>DELETE&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">http://127.0.0.1:9200/myindex
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>response&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;acknowledged&amp;#34;: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ delete æ–¹æ³•å°±å¯ä»¥åˆ é™¤ç´¢å¼•ï¼Œè€Œä¸”å¯ä»¥å‘ç° es çš„ response ç‰¹åˆ«äººæ€§åŒ–ã€‚&lt;/p>
&lt;h3 id="åˆ›å»º-maping">åˆ›å»º maping&lt;/h3>
&lt;p>POST&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">http://localhost:9200/myindex/fulltext/_mapping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>body&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;properties&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;content&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;type&amp;#34;: &amp;#34;text&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;analyzer&amp;#34;: &amp;#34;ik_max_word&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;search_analyzer&amp;#34;: &amp;#34;ik_max_word&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>response&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;acknowledged&amp;#34;: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™é‡Œåœ¨åˆ›å»ºä¸€ä¸ª type æ˜¯ fulltext çš„åŒæ—¶ï¼ŒæŒ‡å®šäº†è¿™ä¸ª fulltext ç±»å‹çš„å­—æ®µ Mapã€‚åœ¨ mapping ä¸­ï¼Œä¸€èˆ¬æ˜¯è®¾ç½®å­—æ®µæ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œæ¯”å¦‚ boolï¼Œtext ç­‰ã€‚analyzer æ˜¯ç»™æ–‡æ¡£å»ºç´¢å¼•çš„åˆ†è¯æ–¹æ³•ï¼Œsearch_analyzer æ˜¯æœç´¢æ—¶å¯¹æœç´¢çš„å†…å®¹è¿›è¡Œåˆ†è¯çš„æ–¹æ³•ã€‚è¿™é‡Œéƒ½æ˜¯ç”¨äº† ik çš„åˆ†è¯å™¨ã€‚&lt;/p>
&lt;h3 id="æ–°å¢-doc">æ–°å¢ doc&lt;/h3>
&lt;p>POST&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">http://localhost:9200/myindex/fulltext/1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>body&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;content&amp;#34;: &amp;#34;ä¸­å›½å´›èµ·å“¦&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>response&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_index&amp;#34;: &amp;#34;myindex&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_type&amp;#34;: &amp;#34;fulltext&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_id&amp;#34;: &amp;#34;1&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_version&amp;#34;: 1,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;result&amp;#34;: &amp;#34;created&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_shards&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;total&amp;#34;: 2,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;successful&amp;#34;: 1,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;failed&amp;#34;: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_seq_no&amp;#34;: 0,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_primary_term&amp;#34;: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæ²¡æœ‰æŒ‡å®š id çš„è¯ï¼Œæ¯æ¬¡æ–°å¢çš„æ—¶å€™éƒ½ä¼šç”¨ es è‡ªåŠ¨ç»™çš„ idã€‚å¦‚æœä¸æ³¨æ„çš„è¯ï¼Œå¯èƒ½ä¼šå‡ºç°é‡å¤æ–°å¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æƒ…å†µä¸‹ä¼šä½¿ç”¨è‡ªå·±ç»™çš„çš„ idã€‚&lt;/p>
&lt;h3 id="æœç´¢">æœç´¢&lt;/h3>
&lt;p>POST&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">http://127.0.0.1:9200/myindex/fulltext/_search
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>body&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;query&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;match&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;content&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;query&amp;#34;: &amp;#34;ä¸­å›½&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>response&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;took&amp;#34;: 98,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;timed_out&amp;#34;: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_shards&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;total&amp;#34;: 5,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;successful&amp;#34;: 5,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;skipped&amp;#34;: 0,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;failed&amp;#34;: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;hits&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;total&amp;#34;: 1,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;max_score&amp;#34;: 0.2876821,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;hits&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_index&amp;#34;: &amp;#34;myindex&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_type&amp;#34;: &amp;#34;fulltext&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_id&amp;#34;: &amp;#34;1&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_score&amp;#34;: 0.2876821,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;_source&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;content&amp;#34;: &amp;#34;ä¸­å›½å´›èµ·å“¦&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‰é¢éƒ½æ²¡å•¥ï¼Œä¸»è¦å°±æ˜¯å¦‚ä½•æŠŠæ•°æ®çŒåˆ° es ä¸­ã€‚es ä½œä¸ºä¸€ä¸ªæœç´¢å¼•æ“ï¼Œè‚¯å®šæœç´¢æ‰æ˜¯æœ€é‡è¦çš„ã€‚è¿™é‡Œåªæ˜¯ç”¨çš„æœ€ç®€å•çš„æœç´¢ã€‚å…³äº es çš„æœç´¢ï¼Œæˆ‘åœ¨å®é™…ç”Ÿäº§ä¸­ä¸»è¦ä½¿ç”¨çš„æ˜¯ï¼Œå¤šå­—æ®µçš„æœç´¢ï¼Œä½¿ç”¨äº† bool æ“ä½œç¬¦ã€‚&lt;/p>
&lt;h1 id="åŸç†">åŸç†&lt;/h1>
&lt;h2 id="ç›¸å…³æ€§å¾—åˆ†">ç›¸å…³æ€§å¾—åˆ†&lt;/h2>
&lt;p>ElasticsearchÂ é»˜è®¤æŒ‰ç…§ç›¸å…³æ€§å¾—åˆ†æ’åºï¼Œå³æ¯ä¸ªæ–‡æ¡£è·ŸæŸ¥è¯¢çš„åŒ¹é…ç¨‹åº¦ã€‚Elasticsearch ä¸­çš„Â &lt;em>ç›¸å…³æ€§&lt;/em>Â æ¦‚å¿µéå¸¸é‡è¦ï¼Œä¹Ÿæ˜¯å®Œå…¨åŒºåˆ«äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ•°æ®åº“ä¸­çš„ä¸€æ¡è®°å½•è¦ä¹ˆåŒ¹é…è¦ä¹ˆä¸åŒ¹é…ã€‚&lt;/p>
&lt;h1 id="æœç´¢-1">æœç´¢&lt;/h1>
&lt;h2 id="è½»é‡çº§æœç´¢">è½»é‡çº§æœç´¢&lt;/h2>
&lt;p>_search&lt;/p>
&lt;p>_search?q=content:ä¸­å›½&lt;/p>
&lt;p>è¿™ç§æœç´¢æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œå¾ˆè½»é‡ã€‚&lt;/p>
&lt;h2 id="æŸ¥è¯¢è¡¨è¾¾å¼">æŸ¥è¯¢è¡¨è¾¾å¼&lt;/h2>
&lt;p>å³ dsl å½¢å¼çš„ã€‚ä½¿ç”¨çš„æ˜¯ POST æ–¹æ³•ï¼Œåœ¨ body ä¸­ï¼Œå†™æœç´¢çš„ dslã€‚&lt;/p>
&lt;h3 id="ç®€å•çš„-dsl">ç®€å•çš„ dsl&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;query&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;match&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;content&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;query&amp;#34;: &amp;#34;ä¸­å›½&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="bool-æ“ä½œç¬¦çš„-dsl">bool æ“ä½œç¬¦çš„ DSL&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;query&amp;#34; : {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;bool&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;must&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;match&amp;#34; : {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;last_name&amp;#34; : &amp;#34;smith&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;filter&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;range&amp;#34; : {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;age&amp;#34; : { &amp;#34;gt&amp;#34; : 30 }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªÂ &lt;em>è¿‡æ»¤å™¨&lt;/em>Â ç”¨äºæ‰§è¡Œä¸€ä¸ªèŒƒå›´æŸ¥è¯¢ï¼Œå¹¶å¤ç”¨ä¹‹å‰çš„Â &lt;code>match&lt;/code>Â æŸ¥è¯¢ã€‚&lt;/p>
&lt;h3 id="çŸ­è¯­æœç´¢">çŸ­è¯­æœç´¢&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;query&amp;#34; : {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;match_phrase&amp;#34; : {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;about&amp;#34; : &amp;#34;rock climbing&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä¸ç”¨çŸ­è¯­æœç´¢çš„è¯ï¼Œä¼šå°†åªå«æœ‰ rock æˆ–è€… climbing çš„è¿”å›ã€‚ä¸ºäº†èƒ½è®©äºŒè€…æ˜¯çŸ­è¯­å½¢å¼ï¼Œes ä¸­æ–°å¢äº†çŸ­è¯­æœç´¢ dslã€‚&lt;/p>
&lt;h3 id="é«˜äº®">é«˜äº®&lt;/h3>
&lt;p>è®¸å¤šåº”ç”¨éƒ½å€¾å‘äºåœ¨æ¯ä¸ªæœç´¢ç»“æœä¸­Â &lt;em>é«˜äº®&lt;/em>Â éƒ¨åˆ†æ–‡æœ¬ç‰‡æ®µï¼Œä»¥ä¾¿è®©ç”¨æˆ·çŸ¥é“ä¸ºä½•è¯¥æ–‡æ¡£ç¬¦åˆæŸ¥è¯¢æ¡ä»¶ã€‚åœ¨ Elasticsearch ä¸­æ£€ç´¢å‡ºé«˜äº®ç‰‡æ®µä¹Ÿå¾ˆå®¹æ˜“ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;query&amp;#34; : {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;match_phrase&amp;#34; : {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;about&amp;#34; : &amp;#34;rock climbing&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;highlight&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;fields&amp;#34; : {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;about&amp;#34; : {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŠ ä¸Š highlight å…³é”®å­—å³å¯ã€‚&lt;/p>
&lt;h3 id="èšåˆ">èšåˆ&lt;/h3>
&lt;p>Â Elasticsearch æœ‰ä¸€ä¸ªåŠŸèƒ½å«èšåˆï¼ˆaggregationsï¼‰ï¼Œå…è®¸æˆ‘ä»¬åŸºäºæ•°æ®ç”Ÿæˆä¸€äº›ç²¾ç»†çš„åˆ†æç»“æœã€‚èšåˆä¸ SQL ä¸­çš„Â &lt;code>GROUP BY&lt;/code>Â ç±»ä¼¼ä½†æ›´å¼ºå¤§ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;aggs&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;all_interests&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;terms&amp;#34;: { &amp;#34;field&amp;#34;: &amp;#34;interests&amp;#34; }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>git å¸¸ç”¨æ“ä½œ</title><link>https://example.com/p/git-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/</link><pubDate>Mon, 14 May 2018 10:04:02 +0000</pubDate><guid>https://example.com/p/git-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/</guid><description>&lt;p>æ•´ç†ä¸€ä¸‹å¸¸ç”¨çš„ git æ“ä½œï¼Œä¸ç”¨å†åˆ°å¤„æ‰¾äº†ã€‚&lt;/p>
&lt;h1 id="git-æ”¾å¼ƒæœ¬åœ°ä¿®æ”¹å¼ºåˆ¶æ›´æ–°">git æ”¾å¼ƒæœ¬åœ°ä¿®æ”¹ï¼Œå¼ºåˆ¶æ›´æ–°&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git fetch --all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git reset --hard origin/master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="git-ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€">git ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€&lt;/h1>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git remote set-url origin url
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="cherry-pick">cherry-pick&lt;/h1>
&lt;p>å½“ä½ é€šè¿‡ä¸€ç•ªæŒ£æ‰ç»ˆäºæå®šä¸€ä¸ª bug,é¡ºæ‰‹æäº¤åˆ° git æœåŠ¡å™¨,å¿ƒé‡Œä¸€é˜µæš—çˆ½. è¿™æ—¶å‘ç°ä½ å½“å‰æ‰€åœ¨çš„åˆ†æ”¯æ˜¯ master !!!&lt;/p>
&lt;p>è¿™ä¸ªåˆ†æ”¯ä¸æ˜¯å¼€å‘è€…ç”¨æ¥æäº¤ä»£ç çš„,å¯æƒœç°åœ¨å‰æ‰‹ä¹Ÿæ™šäº†.&lt;/p>
&lt;ol>
&lt;li>å…ˆåˆ‡æ¢åˆ° master&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git checkout master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>
&lt;p>å¤åˆ¶æäº¤çš„ commit id&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ‡æ¢åˆ° dev, cherry-pick&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git checkout dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git cherry-pic ${commit_id}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="å¸¸ç”¨å¼€å‘æµç¨‹">å¸¸ç”¨å¼€å‘æµç¨‹&lt;/h1>
&lt;p>git checkout -b feature1&lt;/p>
&lt;p>git commit ä¹‹åï¼Œè¿›è¡Œ rebase&lt;/p>
&lt;p>git pull &amp;ndash;rebase&lt;/p>
&lt;p>gca!&lt;/p>
&lt;p>git rvm&lt;/p></description></item><item><title>node çš„ cluster</title><link>https://example.com/p/node-%E7%9A%84-cluster/</link><pubDate>Sat, 05 May 2018 15:45:47 +0000</pubDate><guid>https://example.com/p/node-%E7%9A%84-cluster/</guid><description>&lt;p>æˆ‘ä»¬çŸ¥é“ js æ˜¯è¿è¡Œå•çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ª node è¿›ç¨‹åªèƒ½è¿è¡Œåœ¨ä¸€ä¸ª cpu ä¸Šã€‚é‚£ä¹ˆå¦‚æœç”¨ node æ¥åš web server çš„è¯ï¼Œå°±æ— æ³•äº«å—åˆ°å¤šæ ¸è¿ç®—çš„å¥½å¤„ã€‚&lt;/p>
&lt;p>ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">å¦‚ä½•æ¦¨å¹²æœåŠ¡å™¨èµ„æºï¼Œåˆ©ç”¨å¤šæ ¸CPUçš„å¹¶å‘ä¼˜åŠ¿ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>node å®˜æ–¹æä¾›çš„è§£å†³æ–¹æ¡ˆæ˜¯ clusterã€‚&lt;/p>
&lt;h2 id="1-cluster-æ˜¯ä»€ä¹ˆ">1 cluster æ˜¯ä»€ä¹ˆ&lt;/h2>
&lt;p>ç®€å•æ¥è¯´ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨æœåŠ¡å™¨ä¸ŠåŒæ—¶å¯åŠ¨å¤šä¸ªè¿›ç¨‹ã€‚&lt;/li>
&lt;li>æ¯ä¸ªè¿›ç¨‹éƒ½è·‘çš„æ˜¯åŒä¸€ä»½æºç ã€‚&lt;/li>
&lt;li>è¿™äº›è¿›ç¨‹å¯ä»¥åŒæ—¶ç›‘å¬ä¸€ä¸ªç«¯å£ã€‚&lt;/li>
&lt;/ul>
&lt;p>å…¶ä¸­ï¼š&lt;/p>
&lt;ul>
&lt;li>è´Ÿè´£å¯åŠ¨å…¶ä»–è¿›ç¨‹çš„å«åš master è¿›ç¨‹ï¼Œä¸åšå…·ä½“å·¥ä½œï¼Œåªè´Ÿè´£å¯åŠ¨å…¶ä»–è¿›ç¨‹ã€‚&lt;/li>
&lt;li>å…¶ä»–è¢«å¯åŠ¨çš„å« worker è¿›ç¨‹ã€‚ä»–ä»¬æ¥æ”¶è¯·æ±‚ï¼Œå¯¹å¤–æä¾›æœåŠ¡ã€‚&lt;/li>
&lt;li>worker è¿›ç¨‹çš„æ•°é‡ä¸€èˆ¬æ ¹æ®æœåŠ¡å™¨çš„ cpu æ ¸æ•°æ¥å†³å®šï¼Œè¿™æ ·å°±å¯ä»¥å®Œç¾åˆ©ç”¨å¤šæ ¸èµ„æºã€‚&lt;/li>
&lt;/ul>
&lt;p>ä»¥ä¸‹æ˜¯å®˜æ–¹æ–‡æ¡£çš„ä¸€ä¸ªä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const cluster = require(&amp;#39;cluster&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const http = require(&amp;#39;http&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const numCPUs = require(&amp;#39;os&amp;#39;).cpus().length;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">if (cluster.isMaster) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(`ä¸»è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // è¡ç”Ÿå·¥ä½œè¿›ç¨‹ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for (let i = 0; i &amp;lt; numCPUs; i++) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster.fork();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster.on(&amp;#39;exit&amp;#39;, (worker, code, signal) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} å·²é€€å‡º`);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">} else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // å·¥ä½œè¿›ç¨‹å¯ä»¥å…±äº«ä»»ä½• TCP è¿æ¥ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // åœ¨æœ¬ä¾‹å­ä¸­ï¼Œå…±äº«çš„æ˜¯ä¸€ä¸ª HTTP æœåŠ¡å™¨ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> http.createServer((req, res) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.writeHead(200);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.end(&amp;#39;ä½ å¥½ä¸–ç•Œ\n&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }).listen(8000);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(`å·¥ä½œè¿›ç¨‹ ${process.pid} å·²å¯åŠ¨`);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">% node cluster.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ä¸»è¿›ç¨‹ 16391 æ­£åœ¨è¿è¡Œ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å·¥ä½œè¿›ç¨‹ 16394 å·²å¯åŠ¨
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å·¥ä½œè¿›ç¨‹ 16393 å·²å¯åŠ¨
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å·¥ä½œè¿›ç¨‹ 16395 å·²å¯åŠ¨
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">å·¥ä½œè¿›ç¨‹ 16392 å·²å¯åŠ¨
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="2-å¤šè¿›ç¨‹æ¨¡å‹">2 å¤šè¿›ç¨‹æ¨¡å‹&lt;/h2>
&lt;p>å®˜ç½‘çš„ç¤ºä¾‹å¾ˆç®€å•ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜è¦è€ƒè™‘å¾ˆå¤šä¸œè¥¿ã€‚&lt;/p>
&lt;ul>
&lt;li>worker è¿›ç¨‹å¼‚å¸¸é€€å‡ºä»¥åå¦‚ä½•å¤„ç†ï¼Ÿ&lt;/li>
&lt;li>å¤šä¸ª worker è¿›ç¨‹ä¹‹é—´å¦‚ä½•å…±äº«èµ„æºï¼Ÿ&lt;/li>
&lt;li>å¤šä¸ª worker è¿›ç¨‹ä¹‹é—´å¦‚ä½•è°ƒåº¦ï¼Ÿ&lt;/li>
&lt;li>ã€‚ã€‚ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="è¿›ç¨‹å®ˆæŠ¤">è¿›ç¨‹å®ˆæŠ¤&lt;/h3>
&lt;p>å¥å£®æ€§æ˜¯æˆ‘ä»¬åšå¤§å‹åº”ç”¨è¦è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œnode çš„è¿›ç¨‹é€€å‡ºå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š&lt;/p>
&lt;ul>
&lt;li>æœªæ•è·å¼‚å¸¸&lt;/li>
&lt;li>å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰æˆ–è€…ç³»ç»Ÿå¼‚å¸¸&lt;/li>
&lt;/ul>
&lt;p>ä»£ç è·‘å‡ºäº†å¼‚å¸¸å´æ²¡æœ‰æ²¡æ•æ‰æ—¶ï¼Œè¿›ç¨‹å°†ä¼šé€€å‡ºï¼Œæ­¤æ—¶ node æä¾›äº† process.on(&amp;lsquo;uncaughtException&amp;rsquo;, handler)æ¥æ•è·ã€‚ä½†æ˜¯å½“ä¸€ä¸ª worker è¿›ç¨‹é‡åˆ°æœª æ•è·çš„å¼‚å¸¸æ—¶ï¼Œä»–å·²ç»å¤„äºä¸€ä¸ªä¸ç¡®å®šçš„çŠ¶æ€ï¼Œæ­¤æ—¶æˆ‘ä»¬åº”è¯¥è®©è¿™ä¸ªè¿›ç¨‹ä¼˜é›…çš„é€€å‡ºã€‚&lt;/p>
&lt;p>ä¼˜é›…é€€å‡ºçš„æµç¨‹æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>å…³é—­å¼‚å¸¸ worker è¿›ç¨‹å’Œæ‰€æœ‰çš„ tcp server(å°†å·²æœ‰çš„è¿æ¥å¿«é€Ÿæ–­å¼€ï¼Œä¸”ä¸å†æ¥æ”¶æ–°çš„è¿æ¥)ï¼Œæ–­å¼€å’Œ master çš„ ipc é€šé“ï¼Œä¸å†æ¥æ”¶æ–°çš„ç”¨æˆ·è¯·æ±‚ã€‚&lt;/li>
&lt;li>master ç«‹å³ fork ä¸€ä¸ªæ–°çš„ worker è¿›ç¨‹ï¼Œä¿è¯åœ¨çº¿çš„â€œå·¥äººâ€æ€»æ•°ä¸å˜ã€‚&lt;/li>
&lt;li>å¼‚å¸¸ worker ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå¤„ç†å®Œå·²ç»æ¥å—çš„è¯·æ±‚åé€€å‡ºã€‚&lt;/li>
&lt;/ol>
&lt;p>è€Œå½“ä¸€ä¸ªè¿›ç¨‹å‡ºç°å¼‚å¸¸å¯¼è‡´ crash æˆ–è€… OOM è¢«ç³»ç»Ÿæ€æ­»æ—¶ï¼Œä¸åƒæœªæ•è·å¼‚å¸¸å‘ç”Ÿæ—¶æˆ‘ä»¬è¿˜æœ‰æœºä¼šè®©è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼Œåªèƒ½å¤Ÿè®©å½“å‰è¿›ç¨‹ç›´æ¥é€€å‡ºï¼ŒMaster ç«‹åˆ» fork ä¸€ä¸ªæ–°çš„ Workerã€‚&lt;/p>
&lt;h3 id="agent-æœºåˆ¶">Agent æœºåˆ¶&lt;/h3>
&lt;p>æœ‰äº›å·¥ä½œå¹¶ä¸éœ€è¦æ¯ä¸ª worker éƒ½å»åšï¼Œå¦‚æœéƒ½åšï¼Œä¸€ä¸ªæ˜¯æµªè´¹èµ„æºï¼Œå¦ä¸€ä¸ªæ›´é‡è¦çš„æ˜¯å¯èƒ½ä¼šå¯¼è‡´å¤šè¿›ç¨‹ä¹‹é—´èµ„æºè®¿é—®å†²çªã€‚&lt;/p>
&lt;p>æ¯”å¦‚ï¼šç”Ÿäº§ç¯å¢ƒä¸­ä¸€èˆ¬ä¼šæŒ‰ç…§æ—¥æœŸè¿›è¡Œå½’æ¡£ï¼Œåœ¨å•è¿›ç¨‹æ¨¡å‹çš„æ—¶å€™æ¯”è¾ƒç®€å•ï¼š&lt;/p>
&lt;ol>
&lt;li>æ¯å¤©å‡Œæ™¨ï¼Œæ‰¹é‡å°†æ—¥å¿—æ–‡ä»¶é‡å‘½å&lt;/li>
&lt;li>åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶ç»§ç»­å†™å…¥ã€‚&lt;/li>
&lt;/ol>
&lt;p>å¦‚æœè¿™ä¸ªä»»åŠ¡ç”± 4 ä¸ªè¿›ç¨‹åŒæ—¶åšï¼Œå°±ä¹±å¥—äº†ã€‚æ‰€ä»¥å¯¹äºè¿™ä¸€ç±»çš„åå°è¿è¡Œé€»è¾‘ï¼Œåº”è¯¥æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹å»æ‰§è¡Œï¼Œè¿™ä¸ªè¿›ç¨‹å°±æ˜¯ agentã€‚agent å¥½æ¯”æ˜¯ç»™å…¶ä»– worker è¯·çš„ä¸€ä¸ªç§˜ä¹¦ï¼Œå®ƒä¸å¯¹å¤–æä¾›æœåŠ¡ï¼Œåªç»™ worker æ‰“å·¥ï¼Œå¤„ç†ä¸€äº›å…¬å…±äº‹åŠ¡ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œå…³äº Agent Worker è¿˜æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>ç”±äº Worker ä¾èµ–äº Agentï¼Œæ‰€ä»¥å¿…é¡»ç­‰ Agent åˆå§‹åŒ–å®Œæˆåæ‰èƒ½ fork Worker&lt;/li>
&lt;li>Agent è™½ç„¶æ˜¯ Worker çš„ã€å°ç§˜ã€ï¼Œä½†æ˜¯ä¸šåŠ¡ç›¸å…³çš„å·¥ä½œä¸åº”è¯¥æ”¾åˆ° Agent ä¸Šå»åšã€‚&lt;/li>
&lt;li>ç”±äº Agent çš„ç‰¹æ®Šå®šä½ï¼Œ&lt;strong>æˆ‘ä»¬åº”è¯¥ä¿è¯å®ƒç›¸å¯¹ç¨³å®š&lt;/strong>ã€‚å½“å®ƒå‘ç”Ÿæœªæ•è·å¼‚å¸¸ï¼Œä¸åº”è¯¥åƒ Worker ä¸€æ ·è®©ä»–é€€å‡ºé‡å¯ï¼Œè€Œæ˜¯è®°å½•å¼‚å¸¸æ—¥å¿—ã€æŠ¥è­¦ç­‰å¾…äººå·¥å¤„ç†ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="3-è¿›ç¨‹é—´é€šè®¯ipc">3 è¿›ç¨‹é—´é€šè®¯ï¼ˆIPCï¼‰&lt;/h2>
&lt;p>è™½ç„¶æ¯ä¸ª Worker è¿›ç¨‹æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´å§‹ç»ˆè¿˜æ˜¯éœ€è¦é€šè®¯çš„ï¼Œå«è¿›ç¨‹é—´é€šè®¯ï¼ˆIPCï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">if (cluster.isMaster) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> const worker = cluster.fork();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> worker.send(&amp;#39;hi there&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">} else if (cluster.isWorker) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> process.on(&amp;#39;message&amp;#39;, (msg) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> process.send(msg);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œå·¥ä½œè¿›ç¨‹å°†ä¸»è¿›ç¨‹å‘é€çš„æ¶ˆæ¯ echo å›å»ã€‚&lt;/p>
&lt;h2 id="4-é•¿è¿æ¥">4 é•¿è¿æ¥&lt;/h2>
&lt;p>ä¸€äº›ä¸­é—´ä»¶å®¢æˆ·ç«¯éœ€è¦å’ŒæœåŠ¡å™¨å»ºç«‹é•¿è¿æ¥ï¼Œç†è®ºä¸Šä¸€å°æœåŠ¡å™¨æœ€å¥½åªå»ºç«‹ä¸€ä¸ªé•¿è¿æ¥ï¼Œä½†å¤šè¿›ç¨‹æ¨¡å‹ä¼šå¯¼è‡´ n å€ï¼ˆn = Worker è¿›ç¨‹æ•°ï¼‰è¿æ¥è¢«åˆ›å»ºã€‚&lt;/p>
&lt;p>ä¸ºäº†å°½å¯èƒ½çš„å¤ç”¨é•¿è¿æ¥ï¼ˆå› ä¸ºå®ƒä»¬å¯¹äºæœåŠ¡ç«¯æ¥è¯´æ˜¯éå¸¸å®è´µçš„èµ„æºï¼‰ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒæ”¾åˆ° Agent è¿›ç¨‹é‡Œç»´æŠ¤ï¼Œç„¶åé€šè¿‡ messenger å°†æ•°æ®ä¼ é€’ç»™å„ä¸ª Workerã€‚è¿™ç§åšæ³•æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å¾€å¾€éœ€è¦å†™å¤§é‡ä»£ç å»å°è£…æ¥å£å’Œå®ç°æ•°æ®çš„ä¼ é€’ï¼Œéå¸¸éº»çƒ¦ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œé€šè¿‡ messenger ä¼ é€’æ•°æ®æ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ï¼Œå› ä¸ºå®ƒä¼šé€šè¿‡ Master æ¥åšä¸­è½¬ï¼›ä¸‡ä¸€ IPC é€šé“å‡ºç°é—®é¢˜è¿˜å¯èƒ½å°† Master è¿›ç¨‹ææŒ‚ã€‚&lt;/p>
&lt;p>é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬æä¾›ä¸€ç§æ–°çš„æ¨¡å¼æ¥é™ä½è¿™ç±»å®¢æˆ·ç«¯å°è£…çš„å¤æ‚åº¦ã€‚é€šè¿‡å»ºç«‹ Agent å’Œ Worker çš„ socket ç›´è¿è·³è¿‡ Master çš„ä¸­è½¬ã€‚Agent ä½œä¸ºå¯¹å¤–çš„é—¨é¢ç»´æŒå¤šä¸ª Worker è¿›ç¨‹çš„å…±äº«è¿æ¥ã€‚&lt;/p>
&lt;h3 id="æ ¸å¿ƒæ€æƒ³">æ ¸å¿ƒæ€æƒ³&lt;/h3>
&lt;ul>
&lt;li>å—åˆ° &lt;a class="link" href="http://www.cs.wustl.edu/~schmidt/PDF/lf.pdf" target="_blank" rel="noopener"
>Leader/Follower&lt;/a> æ¨¡å¼çš„å¯å‘&lt;/li>
&lt;li>å®¢æˆ·ç«¯ä¼šè¢«åŒºåˆ†ä¸ºä¸¤ç§è§’è‰²ï¼š
&lt;ul>
&lt;li>Leader: è´Ÿè´£å’Œè¿œç¨‹æœåŠ¡ç«¯ç»´æŒè¿æ¥ï¼Œå¯¹äºåŒä¸€ç±»çš„å®¢æˆ·ç«¯åªæœ‰ä¸€ä¸ª Leader&lt;/li>
&lt;li>Follower: ä¼šå°†å…·ä½“çš„æ“ä½œå§”æ‰˜ç»™ Leaderï¼Œå¸¸è§çš„æ˜¯è®¢é˜…æ¨¡å‹ï¼ˆè®© Leader å’Œè¿œç¨‹æœåŠ¡ç«¯äº¤äº’ï¼Œå¹¶ç­‰å¾…å…¶è¿”å›ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¦‚ä½•ç¡®å®šè°æ˜¯ Leaderï¼Œè°æ˜¯ Follower å‘¢ï¼Ÿæœ‰ä¸¤ç§æ¨¡å¼ï¼š
&lt;ul>
&lt;li>è‡ªç”±ç«äº‰æ¨¡å¼ï¼šå®¢æˆ·ç«¯å¯åŠ¨çš„æ—¶å€™é€šè¿‡æœ¬åœ°ç«¯å£çš„äº‰å¤ºæ¥ç¡®å®š Leaderã€‚ä¾‹å¦‚ï¼šå¤§å®¶éƒ½å°è¯•ç›‘å¬ 7777 ç«¯å£ï¼Œæœ€ååªä¼šæœ‰ä¸€ä¸ªå®ä¾‹æŠ¢å åˆ°ï¼Œé‚£å®ƒå°±å˜æˆ Leaderï¼Œå…¶ä½™çš„éƒ½æ˜¯ Followerã€‚&lt;/li>
&lt;li>å¼ºåˆ¶æŒ‡å®šæ¨¡å¼ï¼šæ¡†æ¶æŒ‡å®šæŸä¸€ä¸ª Leaderï¼Œå…¶ä½™çš„å°±æ˜¯ Follower&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¯åŠ¨çš„æ—¶å€™ Master ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„ç«¯å£ä½œä¸º Cluster Client ç›‘å¬çš„é€šè®¯ç«¯å£ï¼Œå¹¶å°†å®ƒé€šè¿‡å‚æ•°ä¼ é€’ç»™ Agent å’Œ App Worker&lt;/li>
&lt;li>Leader å’Œ Follower ä¹‹é—´é€šè¿‡ socket ç›´è¿ï¼ˆé€šè¿‡é€šè®¯ç«¯å£ï¼‰ï¼Œä¸å†éœ€è¦ Master ä¸­è½¬&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="5-å‚è€ƒèµ„æ–™">5 å‚è€ƒèµ„æ–™&lt;/h2>
&lt;p>&lt;a class="link" href="https://eggjs.org/zh-cn/core/cluster-and-ipc.html" target="_blank" rel="noopener"
>å¤šè¿›ç¨‹æ¨¡å‹å’Œè¿›ç¨‹é—´é€šè®¯&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://nodejs.cn/api/cluster.html" target="_blank" rel="noopener"
>Node.js v8.11.1 æ–‡æ¡£ cluster&lt;/a>&lt;/p></description></item><item><title>node è¸©å‘</title><link>https://example.com/p/node-%E8%B8%A9%E5%9D%91/</link><pubDate>Sat, 05 May 2018 15:32:59 +0000</pubDate><guid>https://example.com/p/node-%E8%B8%A9%E5%9D%91/</guid><description>&lt;h1 id="module">module&lt;/h1>
&lt;p>é¦–å…ˆç¬¬ä¸€ä¸ªå°±æ˜¯ es6 çš„ moduleã€‚&lt;/p>
&lt;p>çœ‹åˆ°åˆ«äººå†™çš„&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">import { a } from &amp;#34;./module&amp;#34;;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰€ä»¥è‡ªå·±ä¹Ÿæƒ³è¦è¿™ä¹ˆå†™ï¼Œä½†æ˜¯æ¯æ¬¡è¿è¡Œçš„æ—¶å€™éƒ½ä¼šæŠ¥é”™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// demo2.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">export const a = &amp;#34;hello&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//demo1.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import { a } from &amp;#34;./demo2&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">function hello() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(a);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">zhuzhenfengdeMacBook-Pro :: node/node-example Â» node demo1.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/Users/zhuzhenfeng/Documents/github/node/node-example/demo1.js:1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(function (exports, require, module, __filename, __dirname) { import { a } from &amp;#34;./demo2&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ^
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SyntaxError: Unexpected token {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at new Script (vm.js:74:7)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at createScript (vm.js:246:10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at Object.runInThisContext (vm.js:298:10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at Module._compile (internal/modules/cjs/loader.js:646:28)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at Object.Module._extensions..js (internal/modules/cjs/loader.js:689:10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at Module.load (internal/modules/cjs/loader.js:589:32)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at tryModuleLoad (internal/modules/cjs/loader.js:528:12)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at Function.Module._load (internal/modules/cjs/loader.js:520:3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at Function.Module.runMain (internal/modules/cjs/loader.js:719:10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> at startup (internal/bootstrap/node.js:228:19)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zhuzhenfengdeMacBook-Pro :: node/node-example Â»
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åæ¥ä»”ç»†æŸ¥äº†èµ„æ–™ä¹‹åï¼Œæ‰å‘ç°ï¼Œnode ç°åœ¨è¿˜ä¸èƒ½è¿™ä¹ˆä½¿ç”¨ã€‚&lt;/p>
&lt;p>å¦‚ä¸‹æ˜¯è§£å†³çš„åŠæ³•ã€‚&lt;/p>
&lt;p>ç»™æ¯ä¸ª js æ–‡ä»¶éƒ½ä»¥ mjs å‘½åã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// module.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">export const a = &amp;#34;hello&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// useModule.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import { a } from &amp;#34;./module.mjs&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">function hello() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(a);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello();
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">zhuzhenfengdeMacBook-Pro :: node/node-example Â» node --experimental-modules useModule.mjs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(node:15282) ExperimentalWarning: The ESM module loader is experimental.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zhuzhenfengdeMacBook-Pro :: node/node-example Â»
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·æ‰èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ã€‚&lt;/p></description></item><item><title>node å­¦ä¹ ç¬”è®°</title><link>https://example.com/p/node-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link><pubDate>Sun, 22 Apr 2018 15:41:21 +0000</pubDate><guid>https://example.com/p/node-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid><description>&lt;p>å†™ node ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ•´ç†ä¸€ä¸‹å­¦ä¹ ç¬”è®°ï¼Œå…±åŒè¿›æ­¥&lt;/p>
&lt;h1 id="ä»€ä¹ˆæ˜¯-node">ä»€ä¹ˆæ˜¯ node&lt;/h1>
&lt;p>é¦–å…ˆçœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯ node.js&lt;/p>
&lt;ul>
&lt;li>Node æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç«¯ JavaScript&lt;/li>
&lt;li>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒ&lt;/li>
&lt;li>Node.js ä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O çš„æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆ&lt;/li>
&lt;li>Node.js çš„åŒ…ç®¡ç†å™¨ npmï¼Œæ˜¯å…¨çƒæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿ&lt;/li>
&lt;/ul>
&lt;p>æ¨¡å—ç³»ç»Ÿæ˜¯ node æœ€åŸºæœ¬ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ã€‚ä¸€èˆ¬å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š&lt;/p>
&lt;ul>
&lt;li>åŸç”Ÿæ¨¡å—&lt;/li>
&lt;li>æ–‡ä»¶æ¨¡å—&lt;/li>
&lt;li>ç¬¬ä¸‰æ–¹æ¨¡å—&lt;/li>
&lt;li>è‡ªå®šä¹‰æ¨¡å—&lt;/li>
&lt;/ul>
&lt;p>node ç¤¾åŒºå´‡å°š DRY æ–‡åŒ–ï¼Œå³ Don&amp;rsquo;t repeate yourselfã€‚è¿™ç§æ–‡åŒ–ä½¿å¾— node çš„ç”Ÿæ€å¼‚å¸¸ç¹è£ï¼ŒåŒæ ·ä¹Ÿç”±äºæŸäº›åŒ…çš„è´¨é‡ä½ä¸‹å¼•æ¥äº†ä¸€äº›è¯Ÿç—…ã€‚&lt;/p>
&lt;h1 id="è°ˆè°ˆè‡ªå®šä¹‰æ¨¡å—">è°ˆè°ˆè‡ªå®šä¹‰æ¨¡å—&lt;/h1>
&lt;p>æˆ‘ä»¬åœ¨å†™ node ç¨‹åºçš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨å†™è‡ªå®šä¹‰æ¨¡å—ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>åˆ›å»ºæ¨¡å—&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// b.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">function FunA(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return &amp;#34;hello world&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// æš´éœ²æ–¹æ³•FunA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports = FunA;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>åŠ è½½æ¨¡å—&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">// a.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const FunA=require(&amp;#39;./b.js&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// è¿è¡ŒFunA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const name=FunA();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">console.log(name);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;p>åœ¨åšæ¨¡å—åˆ°å¤„çš„æ—¶å€™æœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>module.exports&lt;/p>
&lt;p>module.exports å°± Node.js ç”¨äºå¯¹å¤–æš´éœ²ï¼Œæˆ–è€…è¯´å¯¹å¤–å¼€æ”¾æŒ‡å®šè®¿é—®æƒé™çš„ä¸€ä¸ªå¯¹è±¡ã€‚&lt;/p>
&lt;p>ä¸€ä¸ªæ¨¡å—ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª module.exportsï¼Œå¦‚æœæœ‰å¤šä¸ªé‚£åé¢çš„åˆ™ä¼šè¦†ç›–å‰é¢çš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>exports&lt;/p>
&lt;p>exports æ˜¯ module å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨å¾ˆå¤šæ—¶å€™ä¸€ä¸ª js æ–‡ä»¶æœ‰å¤šä¸ªéœ€è¦æš´éœ²çš„æ–¹æ³•æˆ–æ˜¯å¯¹è±¡ï¼Œmodule.exports åˆåªèƒ½æš´éœ²ä¸€ä¸ªï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ° exports:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">function FunA(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return &amp;#39;Tom&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">function FunB(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return &amp;#39;Sam&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exports.FunA = FunA;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exports.FunB = FunB;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">//FunA = exports,exports æ˜¯ä¸€ä¸ªå¯¹è±¡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var FunA = require(&amp;#39;./b.js&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var name1 = FunA.FunA();// è¿è¡Œ FunAï¼Œname = &amp;#39;Tom&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var name2 = FunA.FunB();// è¿è¡Œ FunBï¼Œname = &amp;#39;Sam&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">console.log(name1);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">console.log(name2);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶åœ¨å¼•å…¥çš„æ—¶å€™ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">//FunA = exports,exports æ˜¯ä¸€ä¸ªå¯¹è±¡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var {FunA, FunB} = require(&amp;#39;./b.js&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var name1 = FunA();// è¿è¡Œ FunAï¼Œname = &amp;#39;Tom&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var name2 = FunB();// è¿è¡Œ FunBï¼Œname = &amp;#39;Sam&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">console.log(name1);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">console.log(name2);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h1 id="å¸¸ç”¨çš„åŸç”Ÿæ¨¡å—">å¸¸ç”¨çš„åŸç”Ÿæ¨¡å—&lt;/h1>
&lt;p>å¸¸ç”¨çš„åŸç”Ÿæ¨¡å—æœ‰å¦‚ä¸‹å››ä¸ªï¼š&lt;/p>
&lt;ul>
&lt;li>http&lt;/li>
&lt;li>url&lt;/li>
&lt;li>queryString&lt;/li>
&lt;li>fs&lt;/li>
&lt;/ul>
&lt;h2 id="http">http&lt;/h2>
&lt;p>æ‰€æœ‰åç«¯çš„è¯­è¨€è¦æƒ³è¿è¡Œèµ·æ¥ï¼Œéƒ½å¾—æœ‰æœåŠ¡å™¨ã€‚node é€šè¿‡åŸç”Ÿçš„ http æ¨¡å—æ¥æ­å»ºæœåŠ¡å™¨ï¼š&lt;/p>
&lt;ol>
&lt;li>åŠ è½½ http æ¨¡å—&lt;/li>
&lt;li>è°ƒç”¨ http.createServer() æ–¹æ³•åˆ›å»ºæœåŠ¡ï¼Œæ–¹æ³•æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°ä¸­æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¯·æ±‚ä½“ï¼Œç¬¬äºŒä¸ªæ˜¯å“åº”ä½“ã€‚&lt;/li>
&lt;li>åœ¨å›è°ƒå‡½æ•°ä¸­ä¸€å®šè¦ä½¿ç”¨ response.end() æ–¹æ³•ï¼Œç”¨äºç»“æŸå½“å‰è¯·æ±‚ï¼Œä¸ç„¶å½“å‰è¯·æ±‚ä¼šä¸€ç›´å¤„åœ¨ç­‰å¾…çš„çŠ¶æ€ã€‚&lt;/li>
&lt;li>è°ƒç”¨ listen ç›‘å¬ä¸€ä¸ªç«¯å£ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">//åŸç”Ÿæ¨¡å—
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var http = require(&amp;#39;http&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http.createServer(function(reqeust, response){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.end(&amp;#39;Hello Node&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}).listen(8080);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¤„ç†å‚æ•°&lt;/p>
&lt;ul>
&lt;li>
&lt;p>get&lt;/p>
&lt;p>å½“ get è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨é€šè¿‡ request.method æ¥åˆ¤æ–­å½“å‰çš„è¯·æ±‚æ–¹å¼å¹¶é€šè¿‡ request.url æ¥è·å–å½“å‰çš„è¯·æ±‚å‚æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var http = require(&amp;#39;http&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var url = require(&amp;#39;url&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http.createServer(function(req, res){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var params = url.parse(req.url, true).query;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.end(params);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}).listen(3000);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>post&lt;/p>
&lt;p>post è¯·æ±‚åˆ™ä¸èƒ½é€šè¿‡ url æ¥è·å–ï¼Œè¿™æ—¶å€™å°±å¾—å¯¹è¯·æ±‚ä½“è¿›è¡Œäº‹ä»¶ç›‘å¬ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var http = require(&amp;#39;http&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var util = require(&amp;#39;util&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var querystring = require(&amp;#39;querystring&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http.createServer(function(req, res){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // å®šä¹‰äº†ä¸€ä¸ªpostå˜é‡ï¼Œç”¨äºæš‚å­˜è¯·æ±‚ä½“çš„ä¿¡æ¯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var post = &amp;#39;&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // é€šè¿‡reqçš„dataäº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œæ¯å½“æ¥å—åˆ°è¯·æ±‚ä½“çš„æ•°æ®ï¼Œå°±ç´¯åŠ åˆ°postå˜é‡ä¸­
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> req.on(&amp;#39;data&amp;#39;, function(chunk){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> post += chunk;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // åœ¨endäº‹ä»¶è§¦å‘åï¼Œé€šè¿‡querystring.parseå°†postè§£æä¸ºçœŸæ­£çš„POSTè¯·æ±‚æ ¼å¼ï¼Œç„¶åå‘å®¢æˆ·ç«¯è¿”å›ã€‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> req.on(&amp;#39;end&amp;#39;, function(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> post = querystring.parse(post);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.end(util.inspect(post));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}).listen(3000);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="url">url&lt;/h2>
&lt;p>url å’Œ http æ˜¯é…åˆä½¿ç”¨çš„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ url éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ï¼ŒåŒ…å«çš„ä¿¡æ¯ä¹Ÿæ¯”è¾ƒå¤šï¼Œæ¯”å¦‚æœ‰ï¼šåè®®ã€ä¸»æœºåã€ç«¯å£ã€è·¯å¾„ã€å‚æ•°ã€é”šç‚¹ç­‰ã€‚å¦‚æœæ˜¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œç›´æ¥è§£æçš„è¯ï¼Œç›¸å½“éº»çƒ¦ï¼Œnode æä¾›çš„ url æ¨¡å—ä¾¿å¯è½»æ¾è§£å†³è¿™ä¸€ç±»çš„é—®é¢˜ã€‚&lt;/p>
&lt;h3 id="å­—ç¬¦ä¸²è½¬å¯¹è±¡">å­—ç¬¦ä¸²è½¬å¯¹è±¡&lt;/h3>
&lt;ul>
&lt;li>æ ¼å¼ï¼šurl.parse(urlstring, boolean)&lt;/li>
&lt;li>å‚æ•°
&lt;ul>
&lt;li>urlstringï¼šå­—ç¬¦ä¸²æ ¼å¼çš„ url&lt;/li>
&lt;li>booleanï¼šåœ¨ url ä¸­æœ‰å‚æ•°ï¼Œé»˜è®¤å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚æœæ­¤å‚æ•°ä¸º trueï¼Œåˆ™ä¼šè‡ªåŠ¨å°†å‚æ•°è½¬è½¬å¯¹è±¡&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¸¸ç”¨å±æ€§
&lt;ul>
&lt;li>hrefï¼š è§£æå‰çš„å®Œæ•´åŸå§‹ URLï¼Œåè®®åå’Œä¸»æœºåå·²è½¬ä¸ºå°å†™&lt;/li>
&lt;li>protocolï¼š è¯·æ±‚åè®®ï¼Œå°å†™&lt;/li>
&lt;li>hostï¼š url ä¸»æœºåï¼ŒåŒ…æ‹¬ç«¯å£ä¿¡æ¯ï¼Œå°å†™&lt;/li>
&lt;li>hostname: ä¸»æœºåï¼Œå°å†™&lt;/li>
&lt;li>port: ä¸»æœºçš„ç«¯å£å·&lt;/li>
&lt;li>pathname: URL ä¸­è·¯å¾„ï¼Œä¸‹é¢ä¾‹å­çš„ /one&lt;/li>
&lt;li>search: æŸ¥è¯¢å¯¹è±¡ï¼Œå³ï¼šqueryStringï¼ŒåŒ…æ‹¬ä¹‹å‰çš„é—®å·â€œ?â€&lt;/li>
&lt;li>path: pathname å’Œ search çš„åˆé›†&lt;/li>
&lt;li>query: æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­çš„å‚æ•°éƒ¨åˆ†ï¼ˆé—®å·åé¢éƒ¨åˆ†å­—ç¬¦ä¸²ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ querystring.parse() è§£æåè¿”å›çš„å¯¹è±¡&lt;/li>
&lt;li>hash: é”šç‚¹éƒ¨åˆ†ï¼ˆå³ï¼šâ€œ#â€åŠå…¶åçš„éƒ¨åˆ†ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="å¯¹è±¡è½¬å­—ç¬¦ä¸²">å¯¹è±¡è½¬å­—ç¬¦ä¸²&lt;/h3>
&lt;ul>
&lt;li>æ ¼å¼ï¼šurl.format(urlObj)&lt;/li>
&lt;li>å‚æ•° urlObj åœ¨æ ¼å¼åŒ–çš„æ—¶å€™ä¼šåšå¦‚ä¸‹å¤„ç†
&lt;ul>
&lt;li>href: ä¼šè¢«å¿½ç•¥ï¼Œä¸åšå¤„ç†&lt;/li>
&lt;li>protocolï¼šæ— è®ºæœ«å°¾æ˜¯å¦æœ‰å†’å·éƒ½ä¼šå¤„ç†ï¼Œåè®®åŒ…æ‹¬ http, https, ftp, gopher, file åç¼€æ˜¯ :// (å†’å·-æ–œæ -æ–œæ )&lt;/li>
&lt;li>hostnameï¼šå¦‚æœ host å±æ€§æ²¡è¢«å®šä¹‰ï¼Œåˆ™ä¼šä½¿ç”¨æ­¤å±æ€§&lt;/li>
&lt;li>portï¼šå¦‚æœ host å±æ€§æ²¡è¢«å®šä¹‰ï¼Œåˆ™ä¼šä½¿ç”¨æ­¤å±æ€§&lt;/li>
&lt;li>hostï¼šä¼˜å…ˆä½¿ç”¨ï¼Œå°†ä¼šæ›¿ä»£ hostname å’Œ port&lt;/li>
&lt;li>pathnameï¼šå°†ä¼šåŒæ ·å¤„ç†æ— è®ºç»“å°¾æ˜¯å¦æœ‰/ (æ–œæ )&lt;/li>
&lt;li>searchï¼šå°†ä¼šæ›¿ä»£ query å±æ€§ï¼Œæ— è®ºå‰é¢æ˜¯å¦æœ‰ ? (é—®å·)ï¼Œéƒ½ä¼šåŒæ ·çš„å¤„ç†&lt;/li>
&lt;li>queryï¼š(object ç±»å‹; è¯¦ç»†è¯·çœ‹ querystring) å¦‚æœæ²¡æœ‰ search,å°†ä¼šä½¿ç”¨æ­¤å±æ€§.&lt;/li>
&lt;li>hashï¼šæ— è®ºå‰é¢æ˜¯å¦æœ‰# (äº•å·, é”šç‚¹)ï¼Œéƒ½ä¼šåŒæ ·å¤„ç†&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="æ‹¼æ¥">æ‹¼æ¥&lt;/h3>
&lt;p>å½“æœ‰å¤šä¸ª url éœ€è¦æ‹¼æ¥å¤„ç†çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨åˆ° url.resolve&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var url = require(&amp;#39;url&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">url.resolve(&amp;#39;http://dk-lan.com/&amp;#39;, &amp;#39;/one&amp;#39;)// &amp;#39;http://dk-lan.com/one&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="querystring">querystring&lt;/h2>
&lt;p>url æ˜¯å¯¹ url å­—ç¬¦ä¸²çš„å¤„ç†ï¼Œè€Œ querystring å°±æ˜¯ä»…é’ˆå¯¹å‚æ•°çš„å¤„ç†ã€‚&lt;/p>
&lt;h3 id="å­—ç¬¦ä¸²è½¬å¯¹è±¡-1">å­—ç¬¦ä¸²è½¬å¯¹è±¡&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var str = &amp;#39;firstname=dk&amp;amp;url=http%3A%2F%2Fdk-lan.com&amp;amp;lastname=tom&amp;amp;passowrd=123456&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var param = querystring.parse(param);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//ç»“æœ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//{firstname:&amp;#34;dk&amp;#34;, url:&amp;#34;http://dk-lan.com&amp;#34;, lastname: &amp;#39;tom&amp;#39;, passowrd: 123456};
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¯¹è±¡è½¬å­—ç¬¦ä¸²-1">å¯¹è±¡è½¬å­—ç¬¦ä¸²&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var querystring = require(&amp;#39;querystring&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var obj = {firstname:&amp;#34;dk&amp;#34;, url:&amp;#34;http://dk-lan.com&amp;#34;, lastname: &amp;#39;tom&amp;#39;, passowrd: 123456};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var param = querystring.stringify(obj);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//ç»“æœ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//firstname=dk&amp;amp;url=http%3A%2F%2Fdk-lan.com&amp;amp;lastname=tom&amp;amp;passowrd=123456
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="fs">fs&lt;/h2>
&lt;p>ä»»ä½•æœåŠ¡ç«¯è¯­è¨€éƒ½ä¸èƒ½ç¼ºå¤±æ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚&lt;/p>
&lt;h3 id="è¯»å–æ–‡æœ¬----å¼‚æ­¥è¯»å–">è¯»å–æ–‡æœ¬ &amp;ndash; å¼‚æ­¥è¯»å–&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var fs = require(&amp;#39;fs&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// å¼‚æ­¥è¯»å–
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// å‚æ•°1ï¼šæ–‡ä»¶è·¯å¾„ï¼Œ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// å‚æ•°2ï¼šè¯»å–æ–‡ä»¶åçš„å›è°ƒ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fs.readFile(&amp;#39;demoFile.txt&amp;#39;, function (err, data) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return console.error(err);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;å¼‚æ­¥è¯»å–: &amp;#34; + data.toString());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è¯»å–æ–‡æœ¬----åŒæ­¥è¯»å–">è¯»å–æ–‡æœ¬ &amp;ndash; åŒæ­¥è¯»å–&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var fs = require(&amp;#39;fs&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var data = fs.readFileSync(&amp;#39;demoFile.txt&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">console.log(&amp;#34;åŒæ­¥è¯»å–: &amp;#34; + data.toString());
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å†™å…¥æ–‡æœ¬----è¦†ç›–å†™å…¥">å†™å…¥æ–‡æœ¬ &amp;ndash; è¦†ç›–å†™å…¥&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var fs = require(&amp;#39;fs&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//æ¯æ¬¡å†™å…¥æ–‡æœ¬éƒ½ä¼šè¦†ç›–ä¹‹å‰çš„æ–‡æœ¬å†…å®¹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fs.writeFile(&amp;#39;input.txt&amp;#39;, &amp;#39;æŠµåˆ¶ä¸€åˆ‡ä¸åˆ©äºä¸­å›½å’Œä¸–ç•Œå’Œå¹³çš„åŠ¨æœºï¼&amp;#39;, function(err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return console.error(err);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;æ•°æ®å†™å…¥æˆåŠŸï¼&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;--------æˆ‘æ˜¯åˆ†å‰²çº¿-------------&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;è¯»å–å†™å…¥çš„æ•°æ®ï¼&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fs.readFile(&amp;#39;input.txt&amp;#39;, function (err, data) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return console.error(err);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;å¼‚æ­¥è¯»å–æ–‡ä»¶æ•°æ®: &amp;#34; + data.toString());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å†™å…¥æ–‡æœ¬----è¿½åŠ å†™å…¥">å†™å…¥æ–‡æœ¬ &amp;ndash; è¿½åŠ å†™å…¥&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var fs = require(&amp;#39;fs&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fs.appendFile(&amp;#39;input.txt&amp;#39;, &amp;#39;æ„¿ä¸–ç•Œå’Œå¹³ï¼&amp;#39;, function (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return console.error(err);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;æ•°æ®å†™å…¥æˆåŠŸï¼&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;--------æˆ‘æ˜¯åˆ†å‰²çº¿-------------&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;è¯»å–å†™å…¥çš„æ•°æ®ï¼&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fs.readFile(&amp;#39;input.txt&amp;#39;, function (err, data) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return console.error(err);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;å¼‚æ­¥è¯»å–æ–‡ä»¶æ•°æ®: &amp;#34; + data.toString());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å›¾ç‰‡è¯»å–">å›¾ç‰‡è¯»å–&lt;/h3>
&lt;p>å›¾ç‰‡è¯»å–ä¸åŒäºæ–‡æœ¬ï¼Œå› ä¸ºæ–‡æœ¬è¯»å‡ºæ¥å¯ä»¥ç›´æ¥ç”¨ console.log() æ‰“å°ï¼Œä½†å›¾ç‰‡åˆ™éœ€è¦åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºï¼Œæ‰€ä»¥éœ€è¦å…ˆæ­å»º web æœåŠ¡ï¼Œç„¶åæŠŠä»¥å­—èŠ‚æ–¹å¼è¯»å–çš„å›¾ç‰‡åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“ã€‚&lt;/p>
&lt;ol>
&lt;li>å›¾ç‰‡è¯»å–æ˜¯ä»¥å­—èŠ‚çš„æ–¹å¼&lt;/li>
&lt;li>å›¾ç‰‡åœ¨æµè§ˆå™¨çš„æ¸²æŸ“å› ä¸ºæ²¡æœ‰ img æ ‡ç­¾ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®å“åº”å¤´ä¸º image&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var http = require(&amp;#39;http&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var fs = require(&amp;#39;fs&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var content = fs.readFileSync(&amp;#39;001.jpg&amp;#39;, &amp;#34;binary&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http.createServer(function(request, response){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.writeHead(200, {&amp;#39;Content-Type&amp;#39;: &amp;#39;image/jpeg&amp;#39;});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.write(content, &amp;#34;binary&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.end();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}).listen(8888);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">console.log(&amp;#39;Server running at http://127.0.0.1:8888/&amp;#39;);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="stream-æµå¤„ç†">stream æµå¤„ç†&lt;/h2>
&lt;p>å¯¹ http æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„ request å¯¹è±¡å°±æ˜¯ä¸€ä¸ª Streamï¼Œè¿˜æœ‰ stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ã€‚å¾€å¾€ç”¨äºæ‰“å¼€å¤§å‹çš„æ–‡æœ¬æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªè¯»å–æ“ä½œçš„æ•°æ®æµã€‚æ‰€è°“å¤§å‹æ–‡æœ¬æ–‡ä»¶ï¼ŒæŒ‡çš„æ˜¯æ–‡æœ¬æ–‡ä»¶çš„ä½“ç§¯å¾ˆå¤§ï¼Œè¯»å–æ“ä½œçš„ç¼“å­˜è£…ä¸ä¸‹ï¼Œåªèƒ½åˆ†æˆå‡ æ¬¡å‘é€ï¼Œæ¯æ¬¡å‘é€ä¼šè§¦å‘ä¸€ä¸ª data äº‹ä»¶ï¼Œå‘é€ç»“æŸä¼šè§¦å‘ end äº‹ä»¶ã€‚&lt;/p>
&lt;p>ä¸»è¦åˆ†ä¸º&lt;/p>
&lt;ul>
&lt;li>è¯»å–æµ&lt;/li>
&lt;li>å†™å…¥æµ&lt;/li>
&lt;li>ç®¡é“æµ&lt;/li>
&lt;li>é“¾å¼æµ&lt;/li>
&lt;/ul>
&lt;p>è¿™å‡ ç§æµéƒ½æ˜¯ fs çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p>
&lt;h2 id="è·¯ç”±">è·¯ç”±&lt;/h2>
&lt;p>åœ¨ BS æ¶æ„ä¸­ï¼Œè·¯ç”±çš„æ¦‚å¿µéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥ç†è§£ä¸ºæ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚çš„ url æ˜ å°„åˆ°ä¸åŒçš„æ–¹æ³•å®ç°ã€‚ä¸€èˆ¬ web æ¡†æ¶ä¸­éƒ½ä¼šæœ‰ç›¸åº”çš„è·¯ç”±æ¨¡å—ã€‚ä½†æ˜¯åœ¨åŸç”Ÿ node ä¸­å»å¤„ç†çš„è¯åªèƒ½æ˜¯è§£æ url æ¥è¿›è¡Œæ˜ å°„ï¼Œå®ç°èµ·æ¥ä¸å¤Ÿç®€æ´ã€‚&lt;/p>
&lt;h1 id="fetch">fetch&lt;/h1>
&lt;p>axios æ˜¯ä¸€ç§å¯¹ ajax çš„å°è£…ï¼Œfetch æ˜¯ä¸€ç§æµè§ˆå™¨åŸç”Ÿå®ç°çš„è¯·æ±‚æ–¹å¼ï¼Œè·Ÿ ajax å¯¹ç­‰ã€‚&lt;/p>
&lt;p>åœ¨ç°åœ¨å‘èµ· http è¯·æ±‚é‡Œï¼Œéƒ½æ˜¯é€šè¿‡ fetch æ¥å‘é€è¯·æ±‚ï¼Œå’Œ ajax ç±»ä¼¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const fetch=require(&amp;#39;isomorphic-fetch&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const options={
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> header:{},
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> body:JSON.strify({}),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> method: &amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">try{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> const res=await fetch(&amp;#39;url&amp;#39;, options);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}catch(err){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="async">Async&lt;/h1>
&lt;p>Node.js æ˜¯ä¸€ä¸ªå¼‚æ­¥æœºåˆ¶çš„æœåŠ¡ç«¯è¯­è¨€ï¼Œåœ¨å¤§é‡å¼‚æ­¥çš„åœºæ™¯ä¸‹éœ€è¦æŒ‰é¡ºåºæ‰§è¡Œï¼Œé‚£æ­£å¸¸åšæ³•å°±æ˜¯å›è°ƒåµŒå¥—å›è°ƒï¼Œå›è°ƒåµŒå¥—å¤ªå¤šçš„é—®é¢˜è¢«ç§°ä¹‹å›è°ƒåœ°ç‹±ã€‚&lt;/p>
&lt;p>Node.js ä¸ºè§£å†³è¿™ä¸€é—®é¢˜æ¨å‡ºäº†å¼‚æ­¥æ§åˆ¶æµ â€”â€”â€”â€” Async&lt;/p>
&lt;p>Async/Await&lt;/p>
&lt;p>Async/Await å°± ES7 çš„æ–¹æ¡ˆï¼Œç»“åˆ ES6 çš„ Promise å¯¹è±¡ï¼Œä½¿ç”¨å‰è¯·ç¡®å®š Node.js çš„ç‰ˆæœ¬æ˜¯ 7.6 ä»¥ä¸Šã€‚&lt;/p>
&lt;p>Async/await çš„ä¸»è¦ç›Šå¤„æ˜¯å¯ä»¥é¿å…å›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰ï¼Œä¸”ä»¥æœ€æ¥è¿‘åŒæ­¥ä»£ç çš„æ–¹å¼ç¼–å†™å¼‚æ­¥ä»£ç ã€‚&lt;/p>
&lt;p>åŸºæœ¬è§„åˆ™&lt;/p>
&lt;ul>
&lt;li>async è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª async å‡½æ•°ï¼Œawait åªèƒ½ç”¨åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ã€‚&lt;/li>
&lt;li>await è¡¨ç¤ºåœ¨è¿™é‡Œç­‰å¾… promise è¿”å›ç»“æœäº†ï¼Œå†ç»§ç»­æ‰§è¡Œã€‚&lt;/li>
&lt;li>await åé¢è·Ÿç€çš„åº”è¯¥æ˜¯ä¸€ä¸ª promise å¯¹è±¡&lt;/li>
&lt;/ul>
&lt;h1 id="express-æ¡†æ¶">express æ¡†æ¶&lt;/h1>
&lt;p>ä½¿ç”¨ nodeï¼Œéƒ½ç»•ä¸å¼€ expressã€‚&lt;/p>
&lt;h2 id="ç®€å•ä½¿ç”¨">ç®€å•ä½¿ç”¨&lt;/h2>
&lt;p>express çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œç”±äºæˆ‘æœ€æ—©æ¥è§¦çš„æ˜¯ spring é‚£å¥— web æ¡†æ¶ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨åˆ° express çš„æ—¶å€™è§‰å¾— node çš„ web ç‰¹åˆ«è½»é‡ç®€å•ã€‚&lt;/p>
&lt;p>åŠ è½½æ¨¡å—&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const express=require(&amp;#39;express&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const app=express();
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç›‘å¬ç«¯å£ 8080&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.listen(3000, ()=&amp;gt;consloe.log(&amp;#39;running&amp;#39;));
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="è·¯ç”±-1">è·¯ç”±&lt;/h2>
&lt;p>express å¯¹è·¯ç”±çš„å¤„ç†ç‰¹åˆ«ç®€å•ï¼Œé…åˆä¸­é—´ä»¶ body parserï¼Œå¾ˆæ–¹ä¾¿çš„æä¾› rest æ¥å£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/&amp;#39;, (req, res)=&amp;gt;{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(&amp;#39;hello world&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>response.send()&lt;/code> å¯ç†è§£ä¸º &lt;code>response.end()&lt;/code>ï¼Œå…¶ä¸­ä¸€ä¸ªä¸åŒç‚¹åœ¨äº &lt;code>response.send()&lt;/code> å‚æ•°å¯ä¸ºå¯¹è±¡ã€‚&lt;/p>
&lt;p>Node.js é»˜è®¤æ˜¯ä¸èƒ½è®¿é—®é™æ€èµ„æºæ–‡ä»¶ï¼ˆ&lt;em>.htmlã€&lt;/em>.jsã€&lt;em>.cssã€&lt;/em>.jpg ç­‰ï¼‰ï¼Œå¦‚æœè¦è®¿é—®æœåŠ¡ç«¯çš„é™æ€èµ„æºæ–‡ä»¶åˆ™è¦ç”¨åˆ°æ–¹æ³• &lt;code>sendFile&lt;/code>&lt;/p>
&lt;p>__dirname ä¸º Node.js çš„ç³»ç»Ÿå˜é‡ï¼ŒæŒ‡å‘æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/index.html&amp;#39;, function (req, res) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.sendFile( __dirname + &amp;#34;/&amp;#34; + &amp;#34;index.html&amp;#34; );
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Express &amp;ndash; GET å‚æ•°æ¥æ”¶ä¹‹è·¯å¾„æ–¹å¼&lt;/p>
&lt;p>è®¿é—®åœ°å€ï¼š&lt;code>http://localhost:8080/getusers/admin/18&lt;/code>ï¼Œå¯é€šè¿‡ &lt;code>request.params&lt;/code> æ¥è·å–å‚æ•°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/getUsers/:username/:age&amp;#39;, function(request, response){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var params = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: request.params.username,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> age: request.params.age
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.send(params);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Express &amp;ndash; POST&lt;/p>
&lt;ul>
&lt;li>post å‚æ•°æ¥æ”¶ï¼Œå¯ä¾èµ–ç¬¬ä¸‰æ–¹æ¨¡å— body-parser è¿›è¡Œè½¬æ¢ä¼šæ›´æ–¹ä¾¿ã€æ›´ç®€å•ï¼Œè¯¥æ¨¡å—ç”¨äºå¤„ç† JSON, Raw, Text å’Œ URL ç¼–ç çš„æ•°æ®ã€‚&lt;/li>
&lt;li>å®‰è£… body-parser &lt;code>npm install body-parser&lt;/code>&lt;/li>
&lt;li>å‚æ•°æ¥å—å’Œ GET åŸºæœ¬ä¸€æ ·ï¼Œä¸åŒçš„åœ¨äº GET æ˜¯ &lt;code>request.query&lt;/code> è€Œ POST çš„æ˜¯ &lt;code>request.body&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var bodyParser = require(&amp;#39;body-parser&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// åˆ›å»º application/x-www-form-urlencoded ç¼–ç è§£æ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var urlencodedParser = bodyParser.urlencoded({ extended: false })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.post(&amp;#39;/getUsers&amp;#39;, urlencodedParser, function (request, response) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var params = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: request.body.username,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> age: request.body.age
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.send(params);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Express &amp;ndash; è·¨åŸŸæ”¯æŒ(æ”¾åœ¨æœ€å‰é¢)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.all(&amp;#39;*&amp;#39;, function(req, res, next) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.header(&amp;#34;Access-Control-Allow-Origin&amp;#34;, &amp;#34;*&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.header(&amp;#34;Access-Control-Allow-Headers&amp;#34;, &amp;#34;Content-Type,Content-Length, Authorization, Accept,X-Requested-With&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.header(&amp;#34;Access-Control-Allow-Methods&amp;#34;,&amp;#34;PUT,POST,GET,DELETE,OPTIONS&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.header(&amp;#34;X-Powered-By&amp;#34;,&amp;#39; 3.2.1&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(req.method==&amp;#34;OPTIONS&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(200);/*è®©optionsè¯·æ±‚å¿«é€Ÿè¿”å›*/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ä¸­é—´ä»¶">ä¸­é—´ä»¶&lt;/h2>
&lt;p>express çš„ä¸­é—´ä»¶ç¼–å†™â€”â€”è¿‡æ»¤å™¨&lt;/p>
&lt;p>ç®€å•ä½¿ç”¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const express = require(&amp;#39;express&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const app = express();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">let filter = (req, res, next) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(req.params.name == &amp;#39;admin&amp;#39; &amp;amp;&amp;amp; req.params.pwd == &amp;#39;admin&amp;#39;){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next(&amp;#39;ç”¨æˆ·åå¯†ç ä¸æ­£ç¡®&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/:name/:pwd&amp;#39;, filter, (req, res) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(&amp;#39;ok&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}).listen(88)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œå†™äº†ä¸€ä¸ª filter æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ª next å‚æ•°ã€‚åœ¨è·¯ç”±çš„æ—¶å€™ï¼ŒæŠŠ filter ä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œåˆ™å°±å¯ä»¥å…ˆæ‰§è¡Œ filter å‡½æ•°ï¼Œç„¶åæ‰§è¡Œè·¯ç”±çš„é€»è¾‘ã€‚&lt;/p>
&lt;p>å¦‚æœæƒ³è¦å…¨å±€ä½¿ç”¨çš„è¯ï¼Œå°±ç›´æ¥ä½¿ç”¨ use æ–¹æ³•å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.use(filter);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ–‡ä»¶ä¸Šä¼ ">æ–‡ä»¶ä¸Šä¼ &lt;/h2>
&lt;p>å‰é¢è¯´åˆ°çš„ body-parser ä¸æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œé‚£ä¹ˆä½¿ç”¨ multer åˆ™å¯ä»¥å®ç°ã€‚&lt;/p>
&lt;h1 id="æ“ä½œæ•°æ®åº“">æ“ä½œæ•°æ®åº“&lt;/h1>
&lt;p>node ä¸€èˆ¬ä¼šä½¿ç”¨ mongo å’Œ mysqlï¼Œä½¿ç”¨ä¸‹é¢è¿™ä¸ªä¾‹å­å³å¯ï¼š&lt;/p>
&lt;h2 id="æ“ä½œ-mongodb">æ“ä½œ MongoDB&lt;/h2>
&lt;p>å®˜æ–¹ api &lt;code>http://mongodb.github.io/node-mongodb-native/&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var mongodb = require(&amp;#39;mongodb&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var MongoClient = mongodb.MongoClient;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var db;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MongoClient.connect(&amp;#34;mongodb://localhost:27017/test1705candel&amp;#34;, function(err, database) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(err) throw err;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> db = database;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> insert: function(_collection, _data, _callback){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var i = db.collection(_collection).insert(_data).then(function(result){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> _callback(result);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> select: function(_collection, _condition, _callback){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var i = db.collection(_collection).find(_condition || {}).toArray(function(error, dataset){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> _callback({status: true, data: dataset});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ“ä½œ-mysql">æ“ä½œ MySql&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var mysql = require(&amp;#39;mysql&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//åˆ›å»ºè¿æ¥æ± 
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var pool = mysql.createPool({
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> host : &amp;#39;localhost&amp;#39;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user : &amp;#39;root&amp;#39;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password : &amp;#39;root&amp;#39;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 3306,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> database: &amp;#39;1000phone&amp;#39;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> multipleStatements: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> select: function(tsql, callback){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pool.query(tsql, function(error, rows){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(rows.length &amp;gt; 1){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> callback({rowsCount: rows[1][0][&amp;#39;rowsCount&amp;#39;], data: rows[0]});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> callback(rows);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="session">session&lt;/h1>
&lt;p>Session æ˜¯ä¸€ç§è®°å½•å®¢æˆ·çŠ¶æ€çš„æœºåˆ¶ï¼Œä¸åŒçš„æ˜¯ Cookie ä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ï¼Œè€Œ Session ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šçš„è¿›ç¨‹ä¸­ã€‚&lt;/p>
&lt;p>å®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æŠŠå®¢æˆ·ç«¯ä¿¡æ¯ä»¥æŸç§å½¢å¼è®°å½•åœ¨æœåŠ¡å™¨ä¸Šï¼Œè¿™å°±æ˜¯ Sessionã€‚å®¢æˆ·ç«¯æµè§ˆå™¨å†æ¬¡è®¿é—®æ—¶åªéœ€è¦ä»è¯¥ Session ä¸­æŸ¥æ‰¾è¯¥å®¢æˆ·çš„çŠ¶æ€å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;p>å¦‚æœè¯´ Cookie æœºåˆ¶æ˜¯é€šè¿‡æ£€æŸ¥å®¢æˆ·èº«ä¸Šçš„â€œé€šè¡Œè¯â€æ¥ç¡®å®šå®¢æˆ·èº«ä»½çš„è¯ï¼Œé‚£ä¹ˆ Session æœºåˆ¶å°±æ˜¯é€šè¿‡æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„â€œå®¢æˆ·æ˜ç»†è¡¨â€æ¥ç¡®è®¤å®¢æˆ·èº«ä»½ã€‚&lt;/p>
&lt;p>Session ç›¸å½“äºç¨‹åºåœ¨æœåŠ¡å™¨ä¸Šå»ºç«‹çš„ä¸€ä»½å®¢æˆ·æ¡£æ¡ˆï¼Œå®¢æˆ·æ¥è®¿çš„æ—¶å€™åªéœ€è¦æŸ¥è¯¢å®¢æˆ·æ¡£æ¡ˆè¡¨å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;p>Session ä¸èƒ½è·¨åŸŸã€‚&lt;/p>
&lt;p>node æ“ä½œ session å’Œ cookie ä¹Ÿå¾ˆç®€å•ï¼Œä¹Ÿæ˜¯é€šè¿‡ä¸­é—´ä»¶çš„å½¢å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const express = require(&amp;#39;express&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const path = require(&amp;#39;path&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const app = express();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const bodyParser = require(&amp;#39;body-parser&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const cp = require(&amp;#39;cookie-parser&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const session = require(&amp;#39;express-session&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.use(cp());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.use(session({
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> secret: &amp;#39;12345&amp;#39;,//ç”¨æ¥å¯¹sessionæ•°æ®è¿›è¡ŒåŠ å¯†çš„å­—ç¬¦ä¸².è¿™ä¸ªå±æ€§å€¼ä¸ºå¿…é¡»æŒ‡å®šçš„å±æ€§
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#39;testapp&amp;#39;, //è¿™é‡Œçš„nameå€¼å¾—æ˜¯cookieçš„nameï¼Œé»˜è®¤cookieçš„nameæ˜¯ï¼šconnect.sid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cookie: {maxAge: 5000 }, //è®¾ç½®maxAgeæ˜¯5000msï¼Œå³5såsessionå’Œç›¸åº”çš„cookieå¤±æ•ˆè¿‡æœŸ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resave: false,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> saveUninitialized: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.use(bodyParser.urlencoded({extended: false}));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.use(express.static(path.join(__dirname, &amp;#39;/&amp;#39;)));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/setsession&amp;#39;, (request, response) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> request.session.user = {username: &amp;#39;admin&amp;#39;};
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.send(&amp;#39;set session success&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/getsession&amp;#39;, (request, response) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.send(request.session.user);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/delsession&amp;#39;, (request, response) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> delete reqeust.session.user;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.send(request.session.user);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.listen(88)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="token">Token&lt;/h1>
&lt;p>Token çš„ç‰¹ç‚¹&lt;/p>
&lt;ul>
&lt;li>éšæœºæ€§&lt;/li>
&lt;li>ä¸å¯é¢„æµ‹æ€§&lt;/li>
&lt;li>æ—¶æ•ˆæ€§&lt;/li>
&lt;li>æ— çŠ¶æ€ã€å¯æ‰©å±•&lt;/li>
&lt;li>è·¨åŸŸ&lt;/li>
&lt;/ul>
&lt;p>åŸºäº Token çš„èº«ä»½éªŒè¯åœºæ™¯&lt;/p>
&lt;ol>
&lt;li>å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è¯·æ±‚ç™»å½•&lt;/li>
&lt;li>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯ç™»å½•æ˜¯å¦æˆåŠŸ&lt;/li>
&lt;li>éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›ä¸€ä¸ª Token ç»™å®¢æˆ·ç«¯ï¼Œåä¹‹ï¼Œè¿”å›èº«ä»½éªŒè¯å¤±è´¥çš„ä¿¡æ¯&lt;/li>
&lt;li>å®¢æˆ·ç«¯æ”¶åˆ° Token åæŠŠ Token ç”¨ä¸€ç§æ–¹å¼(cookie/localstorage/sessionstorage/å…¶ä»–)å­˜å‚¨èµ·æ¥&lt;/li>
&lt;li>å®¢æˆ·ç«¯æ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶éƒ½é€‰å“¦å°† Token å‘ç»™æœåŠ¡ç«¯&lt;/li>
&lt;li>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼ŒéªŒè¯ Token çš„åˆæ³•æ€§ï¼Œåˆæ³•å°±è¿”å›å®¢æˆ·ç«¯æ‰€éœ€æ•°æ®ï¼Œåä¹‹ï¼Œè¿”å›éªŒè¯å¤±è´¥çš„ä¿¡æ¯&lt;/li>
&lt;/ol>
&lt;p>Token èº«ä»½éªŒè¯å®ç° â€”â€” jsonwebtoken&lt;/p>
&lt;p>å…ˆå®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å— jsonwebtoken &lt;code>npm install jsonwebtoken&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const express = require(&amp;#39;express&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const path = require(&amp;#39;path&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const app = express();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const bodyParser = require(&amp;#39;body-parser&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const jwt = require(&amp;#39;jsonwebtoken&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.use(bodyParser.urlencoded({extended: false}));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.use(express.static(path.join(__dirname, &amp;#39;/&amp;#39;)));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.all(&amp;#39;*&amp;#39;, function(req, res, next) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.header(&amp;#34;Access-Control-Allow-Origin&amp;#34;, &amp;#34;*&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.header(&amp;#34;Access-Control-Allow-Headers&amp;#34;, &amp;#34;Content-Type,Content-Length, Auth, Accept,X-Requested-With&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.header(&amp;#34;Access-Control-Allow-Methods&amp;#34;,&amp;#34;PUT,POST,GET,DELETE,OPTIONS&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.header(&amp;#34;X-Powered-By&amp;#34;,&amp;#39; 3.2.1&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(req.method==&amp;#34;OPTIONS&amp;#34;) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.sendStatus(200);/*è®©optionsè¯·æ±‚å¿«é€Ÿè¿”å›*/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/createtoken&amp;#39;, (request, response) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //è¦ç”Ÿæˆ token çš„ä¸»é¢˜ä¿¡æ¯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> let user = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: &amp;#39;admin&amp;#39;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //è¿™æ˜¯åŠ å¯†çš„ keyï¼ˆå¯†é’¥ï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> let secret = &amp;#39;dktoken&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //ç”Ÿæˆ Token
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> let token = jwt.sign(user, secret, {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#39;expiresIn&amp;#39;: 60*60*24 // è®¾ç½®è¿‡æœŸæ—¶é—´, 24 å°æ—¶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.send({status: true, token});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.post(&amp;#39;/verifytoken&amp;#39;, (request, response) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //è¿™æ˜¯åŠ å¯†çš„ keyï¼ˆå¯†é’¥ï¼‰ï¼Œå’Œç”Ÿæˆ token æ—¶çš„å¿…é¡»ä¸€æ ·
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> let secret = &amp;#39;dktoken&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> let token = request.headers[&amp;#39;auth&amp;#39;];
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(!token){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.send({status: false, message: &amp;#39;tokenä¸èƒ½ä¸ºç©º&amp;#39;});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> jwt.verify(token, secret, (error, result) =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if(error){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.send({status: false});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> response.send({status: true, data: result});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.listen(88)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="web-socket">web socket&lt;/h1>
&lt;p>HTTP åè®®å¯ä»¥æ€»ç»“å‡ ä¸ªç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸€æ¬¡æ€§çš„ã€æ— çŠ¶æ€çš„çŸ­è¿æ¥ï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ã€æœåŠ¡ç«¯å“åº”ã€ç»“æŸã€‚&lt;/li>
&lt;li>è¢«åŠ¨æ€§å“åº”ï¼šåªæœ‰å½“å®¢æˆ·ç«¯è¯·æ±‚æ—¶æ‰è¢«æ‰§è¡Œï¼Œç»™äºˆå“åº”ï¼Œä¸èƒ½ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·å“åº”ã€‚&lt;/li>
&lt;li>ä¿¡æ¯å®‰å…¨æ€§ï¼šå¾—åœ¨æœåŠ¡å™¨æ·»åŠ  SSL è¯ä¹¦ï¼Œè®¿é—®æ—¶ç”¨ HTTPSã€‚&lt;/li>
&lt;li>è·¨åŸŸï¼šæœåŠ¡å™¨é»˜è®¤ä¸æ”¯æŒè·¨åŸŸï¼Œå¯åœ¨æœåŠ¡ç«¯è®¾ç½®æ”¯æŒè·¨åŸŸçš„ä»£ç æˆ–å¯¹åº”çš„é…ç½®ã€‚&lt;/li>
&lt;/ul>
&lt;p>TCP åè®®å¯ä»¥æ€»ç»“å‡ ä¸ªç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>æœ‰çŠ¶æ€çš„é•¿è¿æ¥ï¼šå®¢æˆ·ç«¯å‘èµ·è¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å“åº”å¹¶å»ºç«‹è¿æ¥ï¼Œè¿æ¥ä¼šä¸€ç›´ä¿æŒç›´åˆ°ä¸€æ–¹ä¸»åŠ¨æ–­å¼€ã€‚&lt;/li>
&lt;li>ä¸»åŠ¨æ€§ï¼šå»ºç«‹èµ·ä¸å®¢æˆ·ç«¯çš„è¿æ¥åï¼ŒæœåŠ¡ç«¯å¯ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·è°ƒç”¨ã€‚&lt;/li>
&lt;li>ä¿¡æ¯å®‰å…¨æ€§ï¼šåŒæ ·å¯ä»¥ä½¿ç”¨ SSL è¯ä¹¦è¿›è¡Œä¿¡æ¯åŠ å¯†ï¼Œè®¿é—®æ—¶ç”¨ WSS ã€‚&lt;/li>
&lt;li>è·¨åŸŸï¼šé»˜è®¤æ”¯æŒè·¨åŸŸã€‚&lt;/li>
&lt;/ul>
&lt;p>å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å— wsï¼š&lt;code>npm install ws&lt;/code>&lt;/p>
&lt;p>å¼€å¯ä¸€ä¸ª WebSocket çš„æœåŠ¡å™¨ï¼Œç«¯å£ä¸º 8080&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var socketServer = require(&amp;#39;ws&amp;#39;).Server;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var wss = new socketServer({
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 8080
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿå¯ä»¥åˆ©ç”¨ Express æ¥å¼€å¯ WebSocket çš„æœåŠ¡å™¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var app = require(&amp;#39;express&amp;#39;)();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var server = require(&amp;#39;http&amp;#39;).Server(app);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var socketServer = require(&amp;#39;ws&amp;#39;).Server;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var wss = new socketServer({server: server, port: 8080});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ç”¨ on æ¥è¿›è¡Œäº‹ä»¶ç›‘å¬&lt;/li>
&lt;li>connectionï¼šè¿æ¥ç›‘å¬ï¼Œå½“å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡ç«¯æ—¶è§¦å‘è¯¥äº‹ä»¶&lt;/li>
&lt;li>closeï¼šè¿æ¥æ–­å¼€ç›‘å¬ï¼Œå½“å®¢æˆ·ç«¯æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥æ—¶è§¦å‘&lt;/li>
&lt;li>messageï¼šæ¶ˆæ¯æ¥å—ç›‘å¬ï¼Œå½“å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¿¡æ¯æ—¶è§¦å‘è¯¥äº‹ä»¶&lt;/li>
&lt;li>send: å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯&lt;/li>
&lt;/ul>
&lt;p>soket.io å¯ä»¥ç†è§£ä¸ºå¯¹ WebSocket çš„ä¸€ç§å°è£…ã€‚å¥½æ¯”å‰ç«¯çš„ jQuery å¯¹åŸç”Ÿ javascript çš„å°è£…ã€‚
soket.io ä¾é äº‹ä»¶é©±åŠ¨çš„æ¨¡å¼ï¼Œçµæ´»çš„ä½¿ç”¨äº†è‡ªå®šä¹‰äº‹ä»¶å’Œè°ƒç”¨äº‹ä»¶æ¥å®Œæˆæ›´å¤šçš„åœºæ™¯ï¼Œä¸å¿…ä¾èµ–è¿‡å¤šçš„åŸç”Ÿäº‹ä»¶ã€‚&lt;/p>
&lt;ul>
&lt;li>å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å— &lt;code>npm install express socket.io&lt;/code>&lt;/li>
&lt;li>å¼€æˆ· Socket æœåŠ¡å™¨ï¼Œç«¯å£ä¸º 88&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var express = require(&amp;#39;express&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var app = express();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var http = require(&amp;#39;http&amp;#39;).Server(app);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var io = require(&amp;#39;socket.io&amp;#39;)(http);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http.listen(88);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ç”¨ on æ¥è¿›è¡Œäº‹ä»¶ç›‘å¬å’Œå®šä¹‰äº‹ä»¶&lt;/li>
&lt;li>connectionï¼šç›‘å¬å®¢æˆ·ç«¯è¿æ¥,å›è°ƒå‡½æ•°ä¼šä¼ é€’æœ¬æ¬¡è¿æ¥çš„ socket&lt;/li>
&lt;li>emitï¼šè§¦å‘ç”¨å®¢æˆ·ç«¯çš„äº‹ä»¶&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">io.on(&amp;#39;connection&amp;#39;, function(client){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //æŠŠå½“å‰ç™»å½•çš„ç”¨æˆ·ä¿å­˜åˆ°å¯¹è±¡ onlinePersonsï¼Œå¹¶å‘æ‰€æœ‰åœ¨çº¿çš„ç”¨æˆ·å‘èµ·ä¸Šçº¿æç¤º
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //serverLogin ä¸ºè‡ªå®šä¹‰äº‹ä»¶ï¼Œä¾›å®¢æˆ·ç«¯è°ƒç”¨
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client.on(&amp;#39;serverLogin&amp;#39;, function(_person){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var _personObj = JSON.parse(_person);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> onlinePersons[_personObj.id] = _personObj;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //å‘æ‰€æœ‰åœ¨çº¿çš„ç”¨æˆ·å‘èµ·ä¸Šçº¿æç¤º
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //è§¦å‘å®¢æˆ·ç«¯çš„ clientTips äº‹ä»¶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //clientTips ä¸ºå®¢æˆ·ç«¯çš„è‡ªå®šä¹‰äº‹ä»¶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> io.emit(&amp;#39;clientTips&amp;#39;, JSON.stringify(onlinePersons));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //å½“ç›‘å¬åˆ°å®¢æˆ·ç«¯æœ‰ç”¨æˆ·åœ¨ç§»åŠ¨ï¼Œå°±å‘æ‰€æœ‰åœ¨çº¿ç”¨æˆ·å‘èµ·ç§»åŠ¨ä¿¡æ¯ï¼Œè§¦å‘å®¢æˆ·ç«¯ clientMove äº‹ä»¶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //serverMove ä¸ºè‡ªå®šä¹‰äº‹ä»¶ï¼Œä¾›å®¢æˆ·ç«¯è°ƒç”¨
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client.on(&amp;#39;serverMove&amp;#39;, function(_person){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var _personObj = JSON.parse(_person);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> onlinePersons[_personObj.id] = _personObj;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#39;serverLogin&amp;#39;, onlinePersons);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //clientTips ä¸ºå®¢æˆ·ç«¯çš„è‡ªå®šä¹‰äº‹ä»¶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> io.emit(&amp;#39;clientMove&amp;#39;, _person);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="kafka-node">kafka-node&lt;/h1>
&lt;p>node ä¹Ÿå¯ä»¥å»è¯»å†™ kafkaï¼Œè€Œä¸”å¾ˆç®€å•ã€‚åªéœ€è¦å¼•å…¥ kafka çš„åº“å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">yarn add kafka-node
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…·ä½“ api å¯ä»¥çœ‹æ–‡æ¡£ï¼š&lt;a class="link" href="https://github.com/SOHU-Co/kafka-node" target="_blank" rel="noopener"
>https://github.com/SOHU-Co/kafka-node&lt;/a>&lt;/p>
&lt;p>ç”Ÿäº§è€…&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var kafka = require(&amp;#39;..&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var Producer = kafka.Producer;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var KeyedMessage = kafka.KeyedMessage;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var Client = kafka.Client;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var client = new Client(&amp;#39;localhost:2181&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var argv = require(&amp;#39;optimist&amp;#39;).argv;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var topic = argv.topic || &amp;#39;topic1&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var p = argv.p || 0;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var a = argv.a || 0;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var producer = new Producer(client, { requireAcks: 1 });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">producer.on(&amp;#39;ready&amp;#39;, function () {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var message = &amp;#39;a message&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var keyedMessage = new KeyedMessage(&amp;#39;keyed&amp;#39;, &amp;#39;a keyed message&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> producer.send([
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> { topic: topic, partition: p, messages: [message, keyedMessage], attributes: a }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ], function (err, result) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(err || result);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> process.exit();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">producer.on(&amp;#39;error&amp;#39;, function (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#39;error&amp;#39;, err);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¶ˆè´¹è€…&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;#39;use strict&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var kafka = require(&amp;#39;..&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var Consumer = kafka.Consumer;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var Offset = kafka.Offset;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var Client = kafka.Client;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var argv = require(&amp;#39;optimist&amp;#39;).argv;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var topic = argv.topic || &amp;#39;topic1&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var client = new Client(&amp;#39;localhost:2181&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var topics = [{ topic: topic, partition: 1 }, { topic: topic, partition: 0 }];
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var options = { autoCommit: false, fetchMaxWaitMs: 1000, fetchMaxBytes: 1024 * 1024 };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var consumer = new Consumer(client, topics, options);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var offset = new Offset(client);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">consumer.on(&amp;#39;message&amp;#39;, function (message) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(message);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">consumer.on(&amp;#39;error&amp;#39;, function (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#39;error&amp;#39;, err);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* If consumer get `offsetOutOfRange` event, fetch data from the smallest(oldest) offset
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">consumer.on(&amp;#39;offsetOutOfRange&amp;#39;, function (topic) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> topic.maxNum = 2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> offset.fetch([topic], function (err, offsets) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> if (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return console.error(err);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var min = Math.min.apply(null, offsets[topic.topic][topic.partition]);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> consumer.setOffset(topic.topic, topic.partition, min);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="node-å•å…ƒæµ‹è¯•">Node å•å…ƒæµ‹è¯•&lt;/h1>
&lt;p>ä»¥ function ä¸ºæœ€å°å•ä½ï¼ŒéªŒè¯ç‰¹å®šæƒ…å†µä¸‹çš„ input å’Œ output æ˜¯å¦æ­£ç¡®ã€‚&lt;/p>
&lt;ul>
&lt;li>é˜²æ­¢æ”¹ A å Bï¼Œé¿å…ä¸èƒ½è·‘çš„ä»£ç æ¯”èƒ½è·‘çš„è¿˜å¤šã€‚&lt;/li>
&lt;li>æ˜ç¡®æŒ‡å‡ºé—®é¢˜æ‰€åœ¨ã€å‘ŠçŸ¥æ­£ç¡®çš„è¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Œå‡å°‘ debug çš„æ—¶é—´ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¯¹äº node æ¥è¯´ï¼Œå•å…ƒæµ‹è¯•ä¹Ÿå¾ˆå®¹æ˜“åšã€‚&lt;/p>
&lt;p>æµ‹è¯•ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼ŒTDD å’Œ BDDã€‚&lt;/p>
&lt;h2 id="tdd-vs-bdd">TDD VS. BDD&lt;/h2>
&lt;p>æ¯”è¾ƒ TDD ä¸ BDD çš„å·®å¼‚ã€‚&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>TDD&lt;/th>
&lt;th>BDD&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>å…¨å&lt;/td>
&lt;td>æµ‹è¯•é©±åŠ¨å¼€å‘ Test-Driven Development&lt;/td>
&lt;td>è¡Œä¸ºé©±åŠ¨å¼€å‘ Behavior Driven Development&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>å®šä¹‰&lt;/td>
&lt;td>åœ¨å¼€å‘å‰å…ˆæ’°å†™æµ‹è¯•ç¨‹å¼ï¼Œä»¥ç¡®ä¿ç¨‹å¼ç å“è´¨ä¸ç¬¦åˆéªŒæ”¶è§„æ ¼ã€‚&lt;/td>
&lt;td>TDD çš„è¿›åŒ–ç‰ˆã€‚é™¤äº†å®ä½œå‰å…ˆå†™æµ‹è¯•å¤–ï¼Œè¿˜è¦å†™ä¸€ä»½ã€Œå¯ä»¥æ‰§è¡Œçš„è§„æ ¼ã€ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ç‰¹æ€§&lt;/td>
&lt;td>ä»æµ‹è¯•å»æ€è€ƒç¨‹å¼å¦‚ä½•å®ä½œã€‚å¼ºè°ƒå°æ­¥å‰è¿›ã€å¿«é€Ÿä¸”æŒç»­å›é¦ˆã€æ‹¥æŠ±å˜åŒ–ã€é‡è§†æ²Ÿé€šã€æ»¡è¶³éœ€æ±‚ã€‚&lt;/td>
&lt;td>ä»ç”¨æˆ·çš„éœ€æ±‚å‡ºå‘ï¼Œå¼ºè°ƒç³»ç»Ÿè¡Œä¸ºã€‚ä½¿ç”¨è‡ªç„¶è¯­è¨€æè¿°æµ‹è¯•æ¡ˆä¾‹ï¼Œä»¥å‡å°‘ä½¿ç”¨è€…å’Œå·¥ç¨‹å¸ˆçš„æ²Ÿé€šæˆæœ¬ã€‚æµ‹è¯•åçš„è¾“å‡ºç»“æœå¯ä»¥ç›´æ¥åšä¸ºæ–‡ä»¶é˜…è¯»ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä»ä»£ç å±‚é¢æ¥çœ‹ï¼š&lt;/p>
&lt;p>TDD&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">suite(&amp;#39;Array&amp;#39;, ()=&amp;gt;{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> setup(()={
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> test(&amp;#39;equal -1 when index beyond array length&amp;#39;, ()=&amp;gt;{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> assert.equal(-1, [1,2,3].indexOf(4));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>BDD&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">describe(&amp;#39;Array&amp;#39;, function() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> before(function() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> it(&amp;#39;should return -1 when no such index&amp;#39;, function() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [1,2,3].indexOf(4).should.equal(-1);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹æ¯”äº†è¿™ä¸¤ç§ç±»å‹çš„è¯­æ³•ä¹‹åï¼Œæˆ‘é€‰æ‹©äº† BDDã€‚&lt;/p>
&lt;h2 id="æµ‹è¯•æ¡†æ¶å®è·µ">æµ‹è¯•æ¡†æ¶å®è·µ&lt;/h2>
&lt;p>åœ¨ node ç¤¾åŒºï¼Œæ¯”è¾ƒæˆç†Ÿçš„æ˜¯ mochaã€‚mocha æœ¬èº«æ˜¯ä¸æä¾›æ–­è¨€åº“çš„ï¼Œä¸€èˆ¬æ¥è¯´æ–­è¨€åº“æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ chaiã€‚mocha å’Œ chaiï¼Œåˆèµ·æ¥å°±è¢«æˆç§°ä¸ºæŠ¹èŒ¶ã€‚&lt;/p>
&lt;p>mocha ä¸€èˆ¬éœ€è¦å…¨å±€å®‰è£…ï¼Œchai å®‰è£…åˆ°é¡¹ç›®ç›®å½•ä¸‹å³å¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">yarn global add mocha
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yarn add chai
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="mocha">mocha&lt;/h3>
&lt;h4 id="è¯­æ³•è¯´æ˜">è¯­æ³•è¯´æ˜&lt;/h4>
&lt;ul>
&lt;li>&lt;code>describe()&lt;/code>ï¼šæè¿°åœºæ™¯æˆ–åœˆå‡ºç‰¹å®šåŒºå—ï¼Œä¾‹å¦‚ï¼šæ ‡æ˜æµ‹è¯•çš„åŠŸèƒ½æˆ– functionã€‚&lt;/li>
&lt;li>&lt;code>it()&lt;/code>ï¼šæ’°å†™æµ‹è¯•æ¡ˆä¾‹ï¼ˆTest Caseï¼‰ã€‚&lt;/li>
&lt;li>&lt;code>before()&lt;/code>ï¼šåœ¨æ‰€æœ‰æµ‹è¯•å¼€å§‹å‰ä¼šæ‰§è¡Œçš„ä»£ç ã€‚&lt;/li>
&lt;li>&lt;code>after()&lt;/code>ï¼šåœ¨æ‰€æœ‰æµ‹è¯•ç»“æŸåä¼šæ‰§è¡Œçš„ä»£ç ã€‚&lt;/li>
&lt;li>&lt;code>beforeEach()&lt;/code>ï¼šåœ¨æ¯ä¸ª Test Case å¼€å§‹å‰æ‰§è¡Œçš„ä»£ç ã€‚&lt;/li>
&lt;li>&lt;code>afterEach()&lt;/code>ï¼šåœ¨æ¯ä¸ª Test Case ç»“æŸåæ‰§è¡Œçš„ä»£ç ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="ä»£ç ç¤ºä¾‹">ä»£ç ç¤ºä¾‹&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">describe(&amp;#39;hooks&amp;#39;, function() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> before(function() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> after(function() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> beforeEach(function() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> afterEach(function() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> it(&amp;#39;should ...&amp;#39;, function() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="chai">chai&lt;/h3>
&lt;h4 id="assert">assert&lt;/h4>
&lt;p>assert(expression, message)ï¼šæµ‹è¯•è¿™ä¸ªé¡¹ç›®çš„ expression æ˜¯å¦ä¸ºçœŸï¼Œè‹¥ä¸ºå‡åˆ™æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ messageã€‚&lt;/p>
&lt;h4 id="expect--should">Expect / Should&lt;/h4>
&lt;p>é¢„æœŸ 3 ç­‰äºï¼ˆ===ï¼‰2ã€‚è¿™æ˜¯ä½¿ç”¨å¯ä¸²è¿çš„æ“ä½œç¬¦ æ¥å®Œæˆæ–­è¨€ã€‚è¿™äº›å¯ä¸²è”çš„æœ‰ toã€isã€have ç­‰ã€‚å®ƒå¾ˆåƒè‹±æ–‡ï¼Œç”¨å¾ˆå£è¯­çš„æ–¹å¼åšåˆ¤æ–­ã€‚&lt;/p>
&lt;h2 id="è¦†ç›–ç‡">è¦†ç›–ç‡&lt;/h2>
&lt;p>æ—¢ç„¶æ˜¯ç»™åŠŸèƒ½ä»£ç å†™å•å…ƒæµ‹è¯•ï¼Œé‚£å°±åº”è¯¥æœ‰ä¸ªæŒ‡æ ‡å»è¡¡é‡å•å…ƒæµ‹è¯•è¦†ç›–äº†å“ªäº›åŠŸèƒ½ä»£ç ï¼Œè¿™å°±æ˜¯æ¥ä¸‹æ¥è¦ä»‹ç»çš„æµ‹è¯•è¦†ç›–ç‡ã€‚&lt;/p>
&lt;p>åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ istanbul ä½œä¸ºè¦†ç›–ç‡ç»Ÿè®¡çš„å·¥å…·ï¼Œistanbul å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç»Ÿè®¡åˆ°ä»£ç çš„è¯­å¥è¦†ç›–ç‡ã€åˆ†æ”¯è¦†ç›–ç‡ã€å‡½æ•°è¦†ç›–ç‡ä»¥åŠè¡Œè¦†ç›–ç‡ã€‚&lt;/p>
&lt;p>å…¨å±€å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">yarn global add istanbul
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åªéœ€è¦ä½¿ç”¨ istanbul cover å°±å¯ä»¥å¾—åˆ°è¦†ç›–ç‡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">istanbul cover simple.js
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å’Œ mocha é…åˆä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">isbuntal cover _mocha test/simple-test.js
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>mocha å’Œ _mocha æ˜¯ä¸¤ä¸ªä¸åŒçš„å‘½ä»¤ï¼Œå‰è€…ä¼šæ–°å»ºä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ï¼Œè€Œåè€…æ˜¯åœ¨å½“å‰è¿›ç¨‹ï¼ˆå³ istanbul æ‰€åœ¨çš„è¿›ç¨‹ï¼‰æ‰§è¡Œæµ‹è¯•ï¼Œåªæœ‰è¿™æ ·ï¼Œ istanbul æ‰ä¼šæ•æ‰åˆ°è¦†ç›–ç‡æ•°æ®ã€‚å…¶ä»–æµ‹è¯•æ¡†æ¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¿…é¡»åœ¨åŒä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œæµ‹è¯•ã€‚&lt;/p>
&lt;h1 id="å¼•å…¥-typescript">å¼•å…¥ typescript&lt;/h1>
&lt;p>typescript å…¶å®å°±æ˜¯åŠ äº†ç±»å‹çš„ jsã€‚&lt;/p>
&lt;p>æ‰€è°“ç±»å‹ï¼Œå°±æ˜¯çº¦å®šå˜é‡çš„å†…å­˜å¸ƒå±€ã€‚js ä½œä¸ºä¸€ä¸ªåŠ¨æ€å¼±ç±»å‹çš„è¯­è¨€ï¼Œåœ¨å¼€å‘å¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œä¸å…å¯èƒ½å‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥æœ‰ç±»å‹çš„è¯­è¨€å¯ä»¥åœ¨ç¼–è¯‘æœŸå°±èƒ½æ£€æµ‹åˆ°é”™è¯¯ï¼Œå‡å°‘ debug çš„æ—¶é—´ã€‚&lt;/p>
&lt;h2 id="å®‰è£…">å®‰è£…&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">yarn global add typescript
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="æ–°é¡¹ç›®å¼•å…¥-ts">æ–°é¡¹ç›®å¼•å…¥ ts&lt;/h2>
&lt;p>ç°åœ¨æ–°å»ºæ–‡ä»¶&lt;code>server.ts&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">as&lt;/span> &lt;span class="nx">http&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;http&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">server&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createServer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Hello, world&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;server is listening&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†èƒ½æ‰§è¡Œæ­¤æ–‡ä»¶ï¼Œéœ€è¦é€šè¿‡ &lt;strong>tsc&lt;/strong> å‘½ä»¤æ¥ç¼–è¯‘è¯¥ TypeScript æºç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">tsc server.ts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæ²¡æœ‰ä»€ä¹ˆæ„å¤–çš„è¯ï¼Œæ­¤æ—¶æ§åˆ¶å°ä¼šæ‰“å°å‡ºä»¥ä¸‹çš„å‡ºé”™ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">server.ts(1,23): error TS2307: Cannot find module &amp;#39;http&amp;#39;.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™è¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°&lt;code>http&lt;/code>è¿™ä¸ªæ¨¡å—å®šä¹‰ï¼ˆTyprScript ç¼–è¯‘æ—¶æ˜¯é€šè¿‡æŸ¥æ‰¾æ¨¡å—çš„ typings å£°æ˜æ–‡ä»¶æ¥åˆ¤æ–­æ¨¡å—æ˜¯å¦å­˜åœ¨çš„ï¼Œè€Œä¸æ˜¯æ ¹æ®çœŸå®çš„ js æ–‡ä»¶ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†è§£é‡Šï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬å½“å‰ç›®å½•ä¸‹è¿˜æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶&lt;code>server.js&lt;/code>ï¼Œæˆ‘ä»¬å¯ä»¥è¯•ç€æ‰§è¡Œå®ƒï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">node server.js
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œé‚£ä¹ˆæ§åˆ¶å°å°†ä¼šæ‰“å°å‡º &lt;strong>server is listening&lt;/strong> è¿™æ ·çš„ä¿¡æ¯ï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è®¿é—® &lt;a class="link" href="http://127.0.0.1:3000/" target="_blank" rel="noopener"
>http://127.0.0.1:3000&lt;/a>æ—¶ä¹Ÿèƒ½çœ‹åˆ°æ­£ç¡®çš„ç»“æœï¼š&lt;strong>Hello, world&lt;/strong>&lt;/p>
&lt;p>ç°åœ¨å†å›è¿‡å¤´æ¥çœ‹çœ‹åˆšæ‰çš„ç¼–è¯‘é”™è¯¯ä¿¡æ¯ã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ª Node.js é¡¹ç›®ï¼Œtypescript è¯­è¨€ä¸­å¹¶æ²¡æœ‰å®šä¹‰&lt;code>http&lt;/code>è¿™ä¸ªæ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£… Node.js è¿è¡Œç¯å¢ƒçš„å£°æ˜æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">yarn global add @types/node
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£…å®Œæ¯•ä¹‹åï¼Œå†é‡å¤ä¸Šæ–‡çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œæ­¤æ—¶ &lt;strong>tsc&lt;/strong> ä¸å†æŠ¥é”™äº†ã€‚&lt;/p>
&lt;p>å¤§å¤šæ•°æ—¶å€™ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ &lt;strong>ts-node&lt;/strong> å‘½ä»¤æ‰§è¡Œ TypeScript æºæ–‡ä»¶è€Œä¸éœ€è¦é¢„å…ˆç¼–è¯‘ã€‚é¦–å…ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… &lt;strong>ts-node&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">yarn global add -g ts-node
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åä½¿ç”¨ &lt;strong>ts-node&lt;/strong> å‘½ä»¤æ‰§è¡Œå³å¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">ts-node --no-cache server.ts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¯´æ˜ï¼šä½¿ç”¨ &lt;strong>ts-node&lt;/strong> æ‰§è¡Œ TypeScript ç¨‹åºæ—¶ï¼Œä¸ºäº†æé«˜ç¼–è¯‘é€Ÿåº¦ï¼Œé»˜è®¤ä¼šç¼“å­˜æœªä¿®æ”¹è¿‡çš„ &lt;strong>.ts&lt;/strong> æ–‡ä»¶ï¼Œä½†æœ‰æ—¶å€™ä¼šå¯¼è‡´ä¸€äº› Bugï¼Œæ‰€ä»¥å»ºè®®å¯åŠ¨æ—¶åŠ ä¸Š &lt;code>--no-cache&lt;/code> å‚æ•°ã€‚&lt;/p>
&lt;h3 id="tsconfigjson-é…ç½®æ–‡ä»¶">tsconfig.json é…ç½®æ–‡ä»¶&lt;/h3>
&lt;p>æ¯ä¸ª TypeScript é¡¹ç›®éƒ½éœ€è¦ä¸€ä¸ª &lt;strong>tsconfig.json&lt;/strong> æ–‡ä»¶æ¥æŒ‡å®šç›¸å…³çš„é…ç½®ï¼Œæ¯”å¦‚å‘Šè¯‰ TypeScript ç¼–è¯‘å™¨è¦å°†ä»£ç è½¬æ¢æˆ ES5 è¿˜æ˜¯ ES6 ä»£ç ç­‰ã€‚&lt;/p>
&lt;p>å¯ä»¥ä½¿ç”¨ tsc å‘½ä»¤ç”Ÿæˆã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">tsc --init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—">ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—&lt;/h3>
&lt;p>ä¸€èˆ¬æƒ…å†µä¸‹åœ¨ TypeScript ä¸­æ˜¯ä¸èƒ½â€&lt;em>ç›´æ¥&lt;/em>â€œä½¿ç”¨ npm ä¸Šçš„æ¨¡å—çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦ä½¿ç”¨ express æ¨¡å—ï¼Œå…ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">yarn add express
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæ–°å»ºæ–‡ä»¶ &lt;code>server.ts&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="kr">as&lt;/span> &lt;span class="nx">express&lt;/span> &lt;span class="kr">from&lt;/span> &lt;span class="s1">&amp;#39;express&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">express&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">end&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hello, world&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;server is listening&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰§è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">ts-node server.ts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä¸å‡ºæ„å¤–ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°è¿™æ ·çš„æŠ¥é”™ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">src/server.ts(1,26): error TS7016: Could not find a declaration file for module &amp;#39;express&amp;#39;.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŠ¥é”™çš„ä¿¡æ¯è¡¨æ˜æ²¡æœ‰æ‰¾åˆ°&lt;code>express&lt;/code>æ¨¡å—çš„å£°æ˜æ–‡ä»¶ã€‚ç”±äº TypeScript é¡¹ç›®æœ€ç»ˆä¼šç¼–è¯‘æˆ JavaScript ä»£ç æ‰§è¡Œï¼Œå½“æˆ‘ä»¬åœ¨ TypeScript æºç ä¸­å¼•å…¥è¿™äº›è¢«ç¼–è¯‘æˆ JavaScript çš„æ¨¡å—æ—¶ï¼Œå®ƒéœ€è¦ç›¸åº”çš„å£°æ˜æ–‡ä»¶ï¼ˆ&lt;strong>.d.ts&lt;/strong>æ–‡ä»¶ï¼‰æ¥çŸ¥é“è¯¥æ¨¡å—ç±»å‹ä¿¡æ¯ï¼Œè¿™äº›å£°æ˜æ–‡ä»¶å¯ä»¥é€šè¿‡è®¾ç½®&lt;code>tsconfig.json&lt;/code>ä¸­çš„&lt;code>declaration: true&lt;/code>æ¥è‡ªåŠ¨ç”Ÿæˆã€‚è€Œé‚£äº›ä¸æ˜¯ä½¿ç”¨ TypeScript ç¼–å†™çš„æ¨¡å—ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ‰‹åŠ¨ç¼–å†™å£°æ˜æ–‡ä»¶æ¥å…¼å®¹ TypeScriptã€‚&lt;/p>
&lt;p>å½“é‡åˆ°ç¼ºå°‘æ¨¡å—å£°æ˜æ–‡ä»¶çš„æƒ…å†µï¼Œå¼€å‘è€…å¯ä»¥å°è¯•é€šè¿‡ yarn addl @types/xxx æ¥å®‰è£…æ¨¡å—å£°æ˜æ–‡ä»¶å³å¯ã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬å°è¯•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… &lt;strong>express&lt;/strong> æ¨¡å—çš„å£°æ˜æ–‡ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">yarn add @types/express
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ²¡æœ‰æ„å¤–ï¼Œæœç„¶èƒ½æˆåŠŸå®‰è£…ã€‚ç°åœ¨å†é€šè¿‡ &lt;strong>ts-node&lt;/strong> æ¥æ‰§è¡Œçš„æ—¶å€™ï¼Œå‘ç°å·²ç»æ²¡æœ‰æŠ¥é”™äº†ã€‚&lt;/p>
&lt;h3 id="å•å…ƒæµ‹è¯•">å•å…ƒæµ‹è¯•&lt;/h3>
&lt;p>ç›´æ¥ä½¿ç”¨ mocha å’Œ chaiï¼Œè¿›è¡Œ ts çš„æµ‹è¯•ã€‚&lt;/p>
&lt;h2 id="æ—§é¡¹ç›®è¿ç§»">æ—§é¡¹ç›®è¿ç§»&lt;/h2>
&lt;p>é€šå¸¸æ¥è¯´è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬äº†ä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p>
&lt;ul>
&lt;li>æ·»åŠ  &lt;code>tsconfig.json&lt;/code>&lt;/li>
&lt;li>å°†ä½ çš„æºä»£ç æ–‡ä»¶æ‰©å±•åä» &lt;code>.js&lt;/code> æ”¹æˆ &lt;code>.ts&lt;/code>ã€‚ä½¿ç”¨ &lt;code>any&lt;/code> æ¥å¼€å§‹&lt;em>æŠ‘æ­¢&lt;/em>é”™è¯¯ã€‚&lt;/li>
&lt;li>ä½¿ç”¨ TypeScript æ¥ç¼–å†™æ–°çš„ä»£ç å¹¶ä¸”å°½å¯èƒ½å°‘åœ°ä½¿ç”¨ &lt;code>any&lt;/code>ã€‚&lt;/li>
&lt;li>è¿”å›åˆ°æ—§ä»£ç é‡Œå¹¶ä¸”å¼€å§‹åŠ å…¥ç±»å‹æ ‡æ³¨å’Œè§£å†³å‘ç°çš„ bugsã€‚&lt;/li>
&lt;li>ä¸ºç¬¬ä¸‰æ–¹ JavaScript ä»£ç ä½¿ç”¨ç¯å¢ƒå®šä¹‰ã€‚&lt;/li>
&lt;/ul></description></item><item><title>node çš„ redis å®æˆ˜</title><link>https://example.com/p/node-%E7%9A%84-redis-%E5%AE%9E%E6%88%98/</link><pubDate>Fri, 13 Apr 2018 10:00:12 +0000</pubDate><guid>https://example.com/p/node-%E7%9A%84-redis-%E5%AE%9E%E6%88%98/</guid><description>&lt;h1 id="nodejs-redis-å®¢æˆ·ç«¯æ¨¡å—">Node.js Redis å®¢æˆ·ç«¯æ¨¡å—&lt;/h1>
&lt;p>ä¸ºäº†è¿½æ–°ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„ yarnï¼Œæ¯•ç«Ÿæˆ‘æ˜¯ HDDï¼ˆé¢å‘çƒ­ç‚¹ç¼–ç¨‹ï¼‰ç¼–ç¨‹å®è·µè€…ã€‚&lt;/p>
&lt;p>æ¨¡å—å®‰è£…&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">yarn add redis
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¨¡å—ä½¿ç”¨å®ä¾‹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const redis = require(&amp;#39;redis&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const client = redis.createClient(&amp;#39;6379&amp;#39;, &amp;#39;127.0.0.1&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client.on(&amp;#34;error&amp;#34;, function (err) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34;Error &amp;#34; + err);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client.set(&amp;#34;string key&amp;#34;, &amp;#34;string val&amp;#34;, redis.print);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client.hset(&amp;#34;hash key&amp;#34;, &amp;#34;hashtest 1&amp;#34;, &amp;#34;some value&amp;#34;, redis.print);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client.hset([&amp;#34;hash key&amp;#34;, &amp;#34;hashtest 2&amp;#34;, &amp;#34;some other value&amp;#34;], redis.print);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client.hkeys(&amp;#34;hash key&amp;#34;, function (err, replies) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(replies.length + &amp;#34; replies:&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replies.forEach(function (reply, i) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#34; &amp;#34; + i + &amp;#34;: &amp;#34; + reply);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client.quit();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¾“å‡ºçš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">âœ node-example git:(master) âœ— node redis-demo.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reply: OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reply: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reply: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2 replies:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0: hashtest 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1: hashtest 2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Promises&lt;/p>
&lt;p>å¦‚æœæ˜¯ä½¿ç”¨ node 8 æˆ–è€…ä¹‹ä¸Šçš„è¯ï¼Œä½¿ç”¨ node çš„ util.promisify æ¥å°†è¯·æ±‚å˜æˆ promise çš„ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">const {promisify}=require(&amp;#39;util&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const redis = require(&amp;#39;redis&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const client = redis.createClient(&amp;#39;6379&amp;#39;, &amp;#39;127.0.0.1&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">const getAsync=promisify(client.get).bind(client)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">function getFoo(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return getAsync(&amp;#39;foo&amp;#39;).then(res =&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(res)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">getFoo()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‘é€å‘½ä»¤&lt;/p>
&lt;p>æ¯ä¸ª redis å‘½ä»¤éƒ½ä¼šé€šè¿‡ client å¯¹è±¡çš„ä¸€ä¸ªå‡½æ•°æš´éœ²ï¼Œæ‰€æœ‰è¿™äº›å‡½æ•°éƒ½ä¼šæœ‰ä¸€ä¸ª args æ•°ç»„é€‰é¡¹å’Œä¸€ä¸ª callback å›è°ƒå‡½æ•°ã€‚&lt;/p>
&lt;p>å­—ç¬¦ä¸²æ“ä½œ&lt;/p>
&lt;p>set key value&lt;/p>
&lt;p>get key&lt;/p>
&lt;p>å“ˆå¸Œæ“ä½œ&lt;/p>
&lt;p>hmset key field1 value1&lt;/p>
&lt;p>hget key field1 value1&lt;/p>
&lt;p>åˆ—è¡¨æ“ä½œ&lt;/p>
&lt;p>lpush key value1 value2&lt;/p>
&lt;p>lrange key 0 n&lt;/p>
&lt;p>é›†åˆæ“ä½œ&lt;/p>
&lt;p>sadd key member1 member2&lt;/p>
&lt;p>smembers key&lt;/p>
&lt;p>æœ‰åºé›†åˆæ“ä½œ&lt;/p>
&lt;p>zadd key index value&lt;/p>
&lt;p>zrange key 0 n&lt;/p></description></item><item><title>è°ˆè°ˆ web æ¡†æ¶</title><link>https://example.com/p/%E8%B0%88%E8%B0%88-web-%E6%A1%86%E6%9E%B6/</link><pubDate>Sun, 08 Apr 2018 16:01:48 +0000</pubDate><guid>https://example.com/p/%E8%B0%88%E8%B0%88-web-%E6%A1%86%E6%9E%B6/</guid><description>&lt;p>è¿™ç¯‡æ–‡ç« æ‰“çš„æ ‡ç­¾æ¯”è¾ƒå¤šï¼Œä¹ŸåŸºæœ¬æ¶µç›–äº†æˆ‘æ‰€äº†è§£çš„ä¸€äº›çŸ¥è¯†ï¼Œå½’çº³æ€»ç»“ä¸€ä¸‹è‡ªå·±å¯¹ web æ¡†æ¶çš„ç†è§£ã€‚è‡ªå·±äº†è§£çš„ä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œä¹Ÿè¯·å¤šå¤šæŒ‡æ•™ã€‚&lt;/p>
&lt;p>å†™ç¨‹åºå…ä¸äº†è¦åš web ç›¸å…³çš„ï¼Œç°åœ¨ç”±äºå‰åç«¯çš„åˆ†ç¦»ï¼Œåç«¯ä¸€èˆ¬åªæä¾› rest æ¥å£ï¼Œå‰ç«¯ä¸€èˆ¬ä½¿ç”¨ node æ¥åšæ¸²æŸ“ã€‚åœ¨ä¹‹å‰ä½¿ç”¨ jsp é‚£ä¸€å¥—çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šéƒ½è¦å†™ html+js çš„å‰ç«¯çš„ä¸€å¥—ï¼Œä¹Ÿè¦å†™åç«¯ java çš„ CRUDã€‚&lt;/p>
&lt;p>æˆ‘ç†è§£çš„ web æ¡†æ¶ä¸­ï¼Œå¤§è‡´æ˜¯åˆ†ä¸ºè¿™ä¹ˆä¸¤ç±»ï¼š&lt;/p>
&lt;ul>
&lt;li>router æ¡†æ¶&lt;/li>
&lt;li>mvc æ¡†æ¶&lt;/li>
&lt;/ul>
&lt;h2 id="mvc-ç±»æ¡†æ¶">mvc ç±»æ¡†æ¶&lt;/h2>
&lt;p>mvcï¼Œåˆçº§ç¨‹åºå‘˜é¢è¯•ç¬”è¯•çš„æ—¶å€™å¿…è€ƒçš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚model-view-controllerï¼Œå³æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ã€‚&lt;/p>
&lt;ul>
&lt;li>mï¼Œæ¨¡å‹ä¸»è¦ç”¨äºå°è£…ä¸åº”ç”¨ç¨‹åºç›¸å…³çš„æ•°æ®ä»¥åŠå¯¹æ•°æ®çš„å¤„ç†æ–¹æ³•ã€‚&lt;/li>
&lt;li>vï¼Œåœ¨ View ä¸­ä¸€èˆ¬æ²¡æœ‰ç¨‹åºä¸Šçš„é€»è¾‘ã€‚ä¸ºäº†å®ç° View ä¸Šçš„åˆ·æ–°åŠŸèƒ½ï¼ŒView éœ€è¦è®¿é—®å®ƒç›‘è§†çš„æ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ï¼Œå› æ­¤åº”è¯¥äº‹å…ˆåœ¨è¢«å®ƒç›‘è§†çš„æ•°æ®é‚£é‡Œæ³¨å†Œã€‚&lt;/li>
&lt;li>cï¼Œç”¨äºæ§åˆ¶åº”ç”¨ç¨‹åºçš„æµç¨‹ã€‚&lt;/li>
&lt;/ul>
&lt;p>æˆ‘äº†è§£æ¯”è¾ƒå¤šçš„ mvc æ¡†æ¶æ˜¯ spring mvcã€‚springã€spring mvc å’Œ spring boot ç­‰ï¼Œä»–ä»¬å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œä¹Ÿä¸æ˜¯ä»…ä»…ç”¨äº web å¼€å‘ã€‚ä½†æ˜¯åœ¨è¿™é‡Œæˆ‘å°±ä¸åˆ†é‚£ä¹ˆç»†ï¼Œç»Ÿä¸€ç”¨ spring æ¥ä»£æ›¿ã€‚è¿™é‡Œæ‰€è¯´çš„ spring éƒ½æ˜¯æŒ‡ç‹­ä¹‰ä¸Šçš„ web å¼€å‘æ–¹é¢ã€‚&lt;/p>
&lt;p>åœ¨åš web å¼€å‘çš„æ—¶å€™ï¼Œé¡¹ç›®ç›®å½•ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"> $ tree [16:23:43]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ mvnw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ mvnw.cmd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ pom.xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ src
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â”œâ”€â”€ java
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â”‚Â Â  â””â”€â”€ com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â”‚Â Â  â””â”€â”€ example
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â”‚Â Â  â””â”€â”€ demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â”‚Â Â  â””â”€â”€ DemoApplication.java
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â””â”€â”€ resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â”œâ”€â”€ application.properties
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â”œâ”€â”€ static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â””â”€â”€ templates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ java
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ example
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ DemoApplicationTests.java
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">14 directories, 6 files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¦æ¸²æŸ“é¡µé¢çš„æ—¶å€™ï¼Œä¼šæŠŠç›¸å…³çš„ç±»å†™åœ¨ controller åŒ…ä¸‹é¢ï¼Œç„¶åä½¿ç”¨@Controlle æ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª controllerã€‚&lt;/p>
&lt;p>å¦‚æœæ˜¯å®ä½“ç±»ï¼Œä¸€èˆ¬ä¼šæ”¾åœ¨ entity åŒ…æˆ–è€… domain åŒ…ä¸­ã€‚&lt;/p>
&lt;p>å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œçš„ç±»ï¼Œä¸€èˆ¬ä¼šæ”¾åœ¨ repository æˆ–è€… dao ä¸­ã€‚&lt;/p>
&lt;p>controller ä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨ daoï¼Œè€Œæ˜¯ä¼šå•ç‹¬å†™ä¸€ä¸ª service è´Ÿè´£å»åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ã€‚&lt;/p>
&lt;p>æ¯ä¸ªåŒ…åˆ†å·¥æ˜ç¡®ã€‚&lt;/p>
&lt;p>è€Œ url çš„è·¯ç”±æ‹¦æˆªå¤„ç†æ˜¯åœ¨ controller äº†ä¸­å»å®ç°çš„ã€‚&lt;/p>
&lt;h2 id="router-æ¡†æ¶">router æ¡†æ¶&lt;/h2>
&lt;p>æˆ‘ç†è§£çš„ router æ¡†æ¶ä¸»è¦æ˜¯ä»¥ express ä¸ºä»£è¡¨çš„æ¡†æ¶ã€‚ç°åœ¨çš„è½»é‡çº§çš„ web æ¡†æ¶ä¼šæœ‰è·¯ç”±è¿™ä¹ˆä¸€ä¸ªé‡è¦çš„æ¦‚å¿µã€‚&lt;/p>
&lt;p>&lt;em>è·¯ç”±&lt;/em>ç”¨äºç¡®å®šåº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹çš„å®¢æˆ·æœºè¯·æ±‚ï¼ŒåŒ…å«ä¸€ä¸ª URIï¼ˆæˆ–è·¯å¾„ï¼‰å’Œä¸€ä¸ªç‰¹å®šçš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚&lt;/p>
&lt;p>æ¯ä¸ªè·¯ç”±å¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¤„ç†ç¨‹åºå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œã€‚&lt;/p>
&lt;p>è·¯ç”±ä¸€èˆ¬é‡‡ç”¨å¦‚ä¸‹çš„ç»“æ„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">router.METHOD(PATH, HANDLER)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ï¼š&lt;/p>
&lt;ul>
&lt;li>router æ˜¯è·¯ç”±å®ä¾‹ã€‚&lt;/li>
&lt;li>METHOD æ˜¯ http çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚ GETï¼ŒPOST ç­‰ã€‚&lt;/li>
&lt;li>PATH æ˜¯ URL è¯·æ±‚è·¯å¾„ã€‚&lt;/li>
&lt;li>HANDLER æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨è·¯ç”±åŒ¹é…æˆåŠŸæ—¶æ‰§è¡Œçš„ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¯ä»¥å‘ç°ï¼Œåœ¨ router ç±»æ¡†æ¶ä¸­ï¼Œhandler æ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„ï¼Œè¿™æ˜¯ä¸€ç§ç¼–ç¨‹çš„æ¨¡å¼â€”â€”è¡Œä¸ºå‚æ•°åŒ–ã€‚&lt;/p>
&lt;p>java çš„ vertx å’Œ go çš„ gin æ¡†æ¶ä¹Ÿæ˜¯è¿™æ ·ä¸€ç§æ€è·¯ã€‚&lt;/p>
&lt;p>ä¸‹é¢è¿™ä¸ªç¤ºä¾‹æ˜¯ gin çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;github.com/gin-gonic/gin&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;net/http&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func main() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> router:=gin.Default()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> router.GET(&amp;#34;/hello&amp;#34;, greeting)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // ä¹Ÿå¯ä»¥å†™æˆåŒ¿åå‡½æ•°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> router.GET(&amp;#34;/&amp;#34;, func(context *gin.Context) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> context.String(http.StatusOK, &amp;#34;I am Lucas&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> router.Run()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// å¯ä»¥å•ç‹¬å†™ä¸€ä¸ªhandlerå‡½æ•°
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func greeting(context *gin.Context) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> context.String(http.StatusOK, &amp;#34;hello world&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ° router ç±»çš„æ¡†æ¶ç‰¹åˆ«è½»é‡çº§ï¼Œè€Œä¸”å¾ˆé€‚åˆå†™ rest api æ¥å£ã€‚&lt;/p>
&lt;h3 id="router-çš„åŸç†">router çš„åŸç†&lt;/h3>
&lt;p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œrouter ä½¿ç”¨çš„æ•°æ®ç»“æ„æ˜¯ radix treeï¼Œå‹ç¼©å­—å…¸æ ‘ã€‚&lt;/p>
&lt;p>å­—å…¸æ ‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œä¸‹å›¾æ˜¯ä¸€ä¸ªå…¸å‹çš„å­—å…¸æ ‘ç»“æ„ï¼š&lt;/p>
&lt;p>&lt;img src="http://ww1.sinaimg.cn/large/b831e4c7gy1fq5cnri5emj212o0vagm1.jpg"
loading="lazy"
>&lt;/p>
&lt;p>å­—å…¸æ ‘ä¸€èˆ¬ç”¨æ¥è¿›è¡Œå­—ç¬¦ä¸²çš„æ£€ç´¢ã€‚å¯¹äºç›®æ ‡å­—ç¬¦ä¸²ï¼Œåªè¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå³å¯åˆ¤æ–­å‡ºè¯¥å­—ç¬¦ä¸²æ˜¯å¦æ›¾ç»å‡ºç°è¿‡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œn å¯ä»¥è®¤ä¸ºæ˜¯ç›®æ ‡å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿå­—ç¬¦ä¸²æœ¬èº«ä¸åƒæ•°å€¼ç±»å‹å¯ä»¥è¿›è¡Œæ•°å€¼æ¯”è¾ƒï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹æ¯”çš„æ—¶é—´å¤æ‚åº¦å–å†³äºå­—ç¬¦ä¸²é•¿åº¦ã€‚å¦‚æœä¸ç”¨å­—å…¸æ ‘æ¥å®Œæˆä¸Šè¿°åŠŸèƒ½ï¼Œè¦å¯¹å†å²å­—ç¬¦ä¸²è¿›è¡Œæ’åºï¼Œå†åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ä¹‹ç±»çš„ç®—æ³•å»æœç´¢ï¼Œæ—¶é—´å¤æ‚åº¦åªé«˜ä¸ä½ã€‚å¯è®¤ä¸ºå­—å…¸æ ‘æ˜¯ä¸€ç§ç©ºé—´æ¢æ—¶é—´çš„å…¸å‹åšæ³•ã€‚&lt;/p>
&lt;p>æ™®é€šçš„å­—å…¸æ ‘æœ‰ä¸€ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå°±æ˜¯æ¯ä¸ªå­—æ¯éƒ½éœ€è¦å»ºç«‹ä¸€ä¸ªå­©å­èŠ‚ç‚¹ï¼Œè¿™æ ·ä¼šå¯¼è‡´å­—å…¸æ ‘çš„å±‚æ ‘æ¯”è¾ƒæ·±ï¼Œå‹ç¼©å­—å…¸æ ‘ç›¸å¯¹å¥½åœ°å¹³è¡¡äº†å­—å…¸æ ‘çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚ä¸‹å›¾æ˜¯å…¸å‹çš„å‹ç¼©å­—å…¸æ ‘ç»“æ„ï¼š&lt;/p>
&lt;p>&lt;img src="http://ww1.sinaimg.cn/large/b831e4c7gy1fq5cpko9n2j212o0vaq3g.jpg"
loading="lazy"
>&lt;/p>
&lt;p>æ¯ä¸ªèŠ‚ç‚¹ä¸Šä¸åªå­˜å‚¨ä¸€ä¸ªå­—æ¯äº†ï¼Œè¿™ä¹Ÿæ˜¯å‹ç¼©å­—å…¸æ ‘ä¸­â€œå‹ç¼©â€çš„ä¸»è¦å«ä¹‰ã€‚ä½¿ç”¨å‹ç¼©å­—å…¸æ ‘å¯ä»¥å‡å°‘æ ‘çš„å±‚æ•°ï¼ŒåŒæ—¶å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹ä¸Šæ•°æ®å­˜å‚¨ä¹Ÿæ¯”é€šå¸¸çš„å­—å…¸æ ‘è¦å¤šï¼Œæ‰€ä»¥ç¨‹åºçš„å±€éƒ¨æ€§è¾ƒå¥½(ä¸€ä¸ªèŠ‚ç‚¹çš„ path åŠ è½½åˆ° cache å³å¯è¿›è¡Œå¤šä¸ªå­—ç¬¦çš„å¯¹æ¯”)ï¼Œä»è€Œå¯¹ CPU ç¼“å­˜å‹å¥½ã€‚&lt;/p>
&lt;h2 id="ä¸­é—´ä»¶">ä¸­é—´ä»¶&lt;/h2>
&lt;p>å¯¹äºå¤§å¤šæ•°çš„åœºæ™¯æ¥è®²ï¼Œéä¸šåŠ¡çš„éœ€æ±‚éƒ½æ˜¯åœ¨ http è¯·æ±‚å¤„ç†å‰åšä¸€äº›äº‹æƒ…ï¼Œæˆ–è€…/å¹¶ä¸”åœ¨å“åº”å®Œæˆä¹‹ååšä¸€äº›äº‹æƒ…ã€‚æˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•ä½¿ç”¨ä¸€äº›é‡æ„æ€è·¯æŠŠè¿™äº›å…¬å…±çš„éä¸šåŠ¡åŠŸèƒ½ä»£ç å‰¥ç¦»å‡ºå»å‘¢ï¼Ÿ&lt;/p>
&lt;p>è¿™ä¸ªæ—¶å€™å°±æ˜¯å°±å¼•å…¥äº†ä¸­é—´ä»¶çš„æ¦‚å¿µã€‚&lt;/p>
&lt;p>&lt;em>ä¸­é—´ä»¶&lt;/em>å‡½æ•°èƒ½å¤Ÿè®¿é—®&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#req" target="_blank" rel="noopener"
>è¯·æ±‚å¯¹è±¡&lt;/a> (&lt;code>req&lt;/code>)ã€&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res" target="_blank" rel="noopener"
>å“åº”å¯¹è±¡&lt;/a> (&lt;code>res&lt;/code>) ä»¥åŠåº”ç”¨ç¨‹åºçš„è¯·æ±‚/å“åº”å¾ªç¯ä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚&lt;/p>
&lt;p>ä¸­é—´ä»¶å‡½æ•°å¯ä»¥æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š&lt;/p>
&lt;ul>
&lt;li>æ‰§è¡Œä»»ä½•ä»£ç ã€‚&lt;/li>
&lt;li>å¯¹è¯·æ±‚å’Œå“åº”å¯¹è±¡è¿›è¡Œæ›´æ”¹ã€‚&lt;/li>
&lt;li>ç»“æŸè¯·æ±‚/å“åº”å¾ªç¯ã€‚&lt;/li>
&lt;li>è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™äº›ä¸­é—´ä»¶å…¶å®å°±æ˜¯ä¸€äº›å¯æ’æ‹”çš„å‡½æ•°ç»„ä»¶ï¼Œå¯¹è¯·æ±‚å’Œå“åº”çš„å¯¹è±¡è¿›è¡Œå°è£…å¤„ç†ã€‚&lt;/p>
&lt;h3 id="å“ªäº›äº‹æƒ…é€‚åˆåœ¨ä¸­é—´ä»¶ä¸­åš">å“ªäº›äº‹æƒ…é€‚åˆåœ¨ä¸­é—´ä»¶ä¸­åš&lt;/h3>
&lt;p>ä»¥è¾ƒæµè¡Œçš„å¼€æº go æ¡†æ¶ chi ä¸ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">compress.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> =&amp;gt; å¯¹ http çš„ response body è¿›è¡Œå‹ç¼©å¤„ç†
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">heartbeat.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> =&amp;gt; è®¾ç½®ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±ï¼Œä¾‹å¦‚ /pingï¼Œ/healthcheckï¼Œç”¨æ¥ç»™ load balancer ä¸€ç±»çš„å‰ç½®æœåŠ¡è¿›è¡Œæ¢æ´»
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logger.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> =&amp;gt; æ‰“å° request å¤„ç†æ—¥å¿—ï¼Œä¾‹å¦‚è¯·æ±‚å¤„ç†æ—¶é—´ï¼Œè¯·æ±‚è·¯ç”±
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">profiler.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> =&amp;gt; æŒ‚è½½ pprof éœ€è¦çš„è·¯ç”±ï¼Œå¦‚ /pprofã€/pprof/trace åˆ°ç³»ç»Ÿä¸­
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">realip.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> =&amp;gt; ä»è¯·æ±‚å¤´ä¸­è¯»å– X-Forwarded-For å’Œ X-Real-IPï¼Œå°† http.Request ä¸­çš„ RemoteAddr ä¿®æ”¹ä¸ºå¾—åˆ°çš„ RealIP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">requestid.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> =&amp;gt; ä¸ºæœ¬æ¬¡è¯·æ±‚ç”Ÿæˆå•ç‹¬çš„ requestidï¼Œå¯ä¸€è·¯é€ä¼ ï¼Œç”¨æ¥ç”Ÿæˆåˆ†å¸ƒå¼è°ƒç”¨é“¾è·¯ï¼Œä¹Ÿå¯ç”¨äºåœ¨æ—¥å¿—ä¸­ä¸²è¿å•æ¬¡è¯·æ±‚çš„æ‰€æœ‰é€»è¾‘
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">timeout.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> =&amp;gt; ç”¨ context.Timeout è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå¹¶å°†å…¶é€šè¿‡ http.Request ä¸€è·¯é€ä¼ ä¸‹å»
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">throttler.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> =&amp;gt; é€šè¿‡å®šé•¿å¤§å°çš„ channel å­˜å‚¨ tokenï¼Œå¹¶é€šè¿‡è¿™äº› token å¯¹æ¥å£è¿›è¡Œé™æµ
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸€äº›é€šç”¨çš„éä¸šåŠ¡åœºæ™¯çš„éƒ½å¯ä»¥ç”¨ä¸­é—´ä»¶æ¥åŒ…è£¹ã€‚&lt;/p>
&lt;p>spring æœ‰ AOP è¿™ä¸ªå¤§æ€å™¨ï¼Œå®ƒé‡‡ç”¨åŠ¨æ€ä»£ç†çš„æ–¹å¼ä¹Ÿå¯ä»¥å®ç°ä¸­é—´ä»¶çš„è¡Œä¸ºã€‚&lt;/p></description></item><item><title>æŠ€æœ¯æ ˆ</title><link>https://example.com/p/%E6%8A%80%E6%9C%AF%E6%A0%88/</link><pubDate>Thu, 05 Apr 2018 09:49:06 +0000</pubDate><guid>https://example.com/p/%E6%8A%80%E6%9C%AF%E6%A0%88/</guid><description>&lt;p>åˆ›ä¸šå…¬å¸çœŸçš„æ¯”è¾ƒé”»ç‚¼äººï¼Œæ¥è§¦äº†å¾ˆå¤šçš„ä¸œè¥¿ï¼Œè§†é‡å¼€é˜”äº†ï¼Œä½†æ˜¯åœ¨æŸäº›æ—¶å€™è‡ªå·±ç–²äºå¥”å‘½ï¼Œæ¯ä¸ªä¸œè¥¿éƒ½æ˜¯æ¥è§¦äº†ä¸€ç‚¹ç‚¹å°±è¢«èµ¶é¸­å­ä¸Šæ¶å¼€å§‹å¼€å‘äº†ã€‚&lt;/p>
&lt;h1 id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ&lt;/h1>
&lt;ul>
&lt;li>Docker&lt;/li>
&lt;/ul>
&lt;p>docker æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä»¥å‰å°±çœ‹è¿‡ docker ç›¸å…³çš„ä¸œè¥¿ï¼Œä½†æ˜¯æ²¡æœ‰ä»”ç»†ç ”ç©¶ï¼Œdocker çš„å‘½ä»¤ä¼šç”¨ä¸€äº›ï¼Œåœ¨å·¥ä½œä¸­ä½¿ç”¨äº†ï¼Œçœ‹äº†ä¸€æœ¬ docker çš„ä¹¦ï¼Œèƒ½å¤Ÿç¼–å†™ docker çš„ compose æ–‡ä»¶ã€‚&lt;/p>
&lt;ul>
&lt;li>rancher&lt;/li>
&lt;/ul>
&lt;p>rancher æ˜¯ä¸€ä¸ªåšå®¹å™¨ç®¡ç†çš„ã€‚æˆ‘ä»¬æŠŠä¸»æœºæ·»åŠ åˆ° rancher ä¸­ï¼Œä»–å°±å¯ä»¥è‡ªåŠ¨åšåˆ° LBï¼ŒæœåŠ¡çš„å‘ç°ç¼–æ’ã€‚æˆ‘ä»¬éƒ¨ç½²çš„æ—¶å€™åªéœ€è¦ç¼–å†™ catalogï¼Œä»–å°±å¯ä»¥è‡ªåŠ¨å‘ç° docker åº”ç”¨ï¼Œç„¶åæ‹‰å–é•œåƒï¼Œéƒ¨ç½²åˆ°ç›¸å…³çš„æœºå™¨ä¸Šï¼Œå¾ˆæ˜¯æ–¹ä¾¿ã€‚&lt;/p>
&lt;ul>
&lt;li>aws&lt;/li>
&lt;/ul>
&lt;p>è¿‘æœŸä¸»è¦æ˜¯å¯¹ aws çš„è¿›è¡Œå…¬å¸æœåŠ¡çš„éƒ¨ç½²ï¼Œæ­å»ºä¸€å¥— rancher çš„ç¯å¢ƒã€‚aws çš„æœåŠ¡ç‰¹åˆ«å¤šï¼Œec2 æ˜¯å®ä¾‹ä¸»æœºï¼Œå°±å’Œè™šæ‹Ÿæœºä¸€æ ·ï¼ŒVPC å°±åƒæœºæˆ¿ï¼Œec2 ä¾æ‰˜äº VPC è€Œå­˜åœ¨ï¼Œåœ¨è¿™åŸºç¡€ä¸Šåˆäº†è§£äº†å­ç½‘ã€DHCP å¼¹æ€§ IP ç­‰ç­‰ã€‚&lt;/p>
&lt;ul>
&lt;li>kotlin&lt;/li>
&lt;/ul>
&lt;p>ä¹‹å‰è‡ªå·±ç”¨ kotlin å¼€å‘è¿‡ä¸€ä¸ªåšå®¢ï¼Œå¯¹ kotlin çš„æ„Ÿè§‰æ˜¯æœ‰äº›ä¸œè¥¿å†™çš„å¾ˆçˆ½ï¼Œä½†æ˜¯è¿˜æ˜¯è§‰å¾— java å¥½ç”¨ä¸€äº›ï¼Œå¯¹ kotlin çš„æ€åº¦æ˜¯ç”¨ä¸ç”¨éƒ½æ— æ‰€è°“ã€‚&lt;/p>
&lt;ul>
&lt;li>guice&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸ªæˆ‘ä¹‹å‰éƒ½è¯»é”™äº†ï¼Œæˆ‘è¯»æˆäº†ç›–æ–¯ï¼Œå…¶å®æ˜¯å’Œæœæ±çš„è‹±æ–‡å‘éŸ³å¾ˆåƒï¼Œju æ–¯ã€‚åªæ˜¯ä¸€ä¸ªä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œåªæ˜¯å•çº¯çš„å»åš DIï¼Œæ¯” spring æ›´è½»é‡çº§ä¸€äº›ã€‚&lt;/p>
&lt;p>éœ€è¦æˆ‘ä»¬ç¼–å†™ AppModule.java å»æ‰‹åŠ¨é…ç½®å“ªä¸ªç±»æ³¨å…¥å“ªä¸ªç±»ã€‚&lt;/p>
&lt;ul>
&lt;li>rxjava&lt;/li>
&lt;/ul>
&lt;p>rxjava æˆ‘éƒ½æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªç³»ç»Ÿçš„æ•™ç¨‹ï¼Œä¸çŸ¥é“è¯¥ä»å“ªé‡Œå­¦ä¹ ã€‚&lt;/p>
&lt;ul>
&lt;li>vertx&lt;/li>
&lt;/ul>
&lt;p>vertx+Reactive ç¼–ç¨‹çš„æ–¹å¼ç›¸å½“è€ƒéªŒå¿ƒæ™ºï¼Œè‡ªå·±è„‘å­ä¸­çš„ç¼–ç¨‹æ–¹å¼è¿˜æ²¡è½¬è¿‡æ¥ã€‚&lt;/p>
&lt;ul>
&lt;li>ES6&lt;/li>
&lt;/ul>
&lt;p>node ä»£ç ä¸­éƒ½æ˜¯ç”¨ es6 æ¥å†™çš„ï¼Œasync å’Œ await ç°åœ¨ä¹Ÿä¼šç”¨äº†ã€‚&lt;/p>
&lt;ul>
&lt;li>express&lt;/li>
&lt;/ul>
&lt;p>æƒ³åˆ°è‡ªå·±å¤§å­¦çš„æ—¶å€™çœ‹è¿‡ node çš„ä¹¦ï¼Œé‡Œé¢è®²çš„å°±æ˜¯ expressï¼Œåªæ˜¯è‡ªå·±å½“æ—¶æ²¡æƒ³æ˜ç™½ï¼Œç°åœ¨çœ‹çš„å›è°ƒå¤šäº†ï¼Œç®—æ˜¯ç†Ÿæ‚‰äº†ä»–è¿™ç§çš„ç¼–ç¨‹æ¨¡å¼ï¼Œæ‰€ä»¥è§‰å¾— express ç‰¹åˆ«ç®€å•æ˜“ä¸Šæ‰‹ã€‚&lt;/p>
&lt;ul>
&lt;li>typescript&lt;/li>
&lt;/ul>
&lt;p>è¿˜æ²¡å®ƒå»å†™ä¸œè¥¿ï¼Œå¯èƒ½ä¸‹å‘¨ä¼šç”¨å®ƒæ¥å†™ä¸ªæœºå™¨äººã€‚&lt;/p>
&lt;p>è²Œä¼¼è‡ªå·±å·²ç»å®Œå…¨æŠ›å¼ƒäº† spring+java çš„é‚£ä¸€å¥—ä¸œè¥¿ï¼Œæ²¡æœºä¼šç”¨åˆ°ã€‚&lt;/p>
&lt;h2 id="çŸ¥è¯†é¢æ‰©å±•">çŸ¥è¯†é¢æ‰©å±•&lt;/h2>
&lt;ul>
&lt;li>ç›‘æ§&lt;/li>
&lt;/ul>
&lt;p>grafana+Prometheus+graylog å»åšå¯è§†åŒ–å’Œæ—¥å¿—çš„ç›‘æ§ã€‚&lt;/p>
&lt;p>å¯¹äºä¸šåŠ¡çš„æ•°æ®ï¼Œéœ€è¦åœ¨ä»£ç å±‚é¢è¿›è¡ŒåŸ‹ç‚¹ï¼ŒæŠŠè¦ç›‘æ§çš„æ•°æ®ä¼ ç»™æ™®ç½—ç±³ä¿®æ–¯ã€‚&lt;/p>
&lt;ul>
&lt;li>FSM çŠ¶æ€æœº&lt;/li>
&lt;/ul>
&lt;p>æœºå™¨äººçš„æ¡†æ¶ä½¿ç”¨çš„æ˜¯ FSM çŠ¶æ€æœºæ¥ç®¡ç†ï¼Œä»¥å‰åšæ¸¸æˆçš„æ—¶å€™æ¥è§¦è¿‡ã€‚&lt;/p>
&lt;ul>
&lt;li>ç½‘å…³&lt;/li>
&lt;/ul>
&lt;p>ç½‘å…³ç°åœ¨å·²ç»æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„æ ‡é…äº†ï¼Œç”¨å®ƒæ¥åšä¸€äº›é™æµï¼ŒLB å’Œæ—¥å¿—æ”¶é›†ç­‰ç­‰ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ kongï¼Œåœ¨è¿™é‡Œ kong åŠ ä¸Šä¸€äº›æ’ä»¶ï¼Œç›¸å½“å¥½ç”¨ã€‚&lt;/p>
&lt;ul>
&lt;li>è§„åˆ™å¼•æ“&lt;/li>
&lt;/ul>
&lt;p>åœ¨è§„åˆ™å¼•æ“ä¸­ï¼Œéƒ½æ˜¯ä¸€ä¸ªä¸ªè§„åˆ™ã€‚&lt;/p>
&lt;ul>
&lt;li>DSL&lt;/li>
&lt;/ul>
&lt;p>é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œåœ¨è§„åˆ™å¼•æ“å’Œæœºå™¨äººçš„æ—¶å€™ï¼Œå°±ç”¨äº† DSLã€‚æˆ‘ç°åœ¨çš„ç†è§£å°±æ˜¯ DSL å°±æ˜¯ç”¨ç¼–ç¨‹è¯­è¨€å®ç°çš„ä¸€äº›å‡½æ•°ã€‚&lt;/p>
&lt;ul>
&lt;li>Key Transparency&lt;/li>
&lt;/ul>
&lt;p>è°·æ­Œçš„ä¸€ä¸ªå…¬é’¥ç®¡ç†åº“ï¼Œä¿è¯äº†æ— æ³•è¢«ç¯¡æ”¹ã€‚&lt;/p>
&lt;h2 id="æœªæ¥å¯èƒ½è¦æ¥è§¦">æœªæ¥å¯èƒ½è¦æ¥è§¦&lt;/h2>
&lt;ul>
&lt;li>go&lt;/li>
&lt;/ul></description></item><item><title>åŒæ­¥ä¸€ä¸ª fork</title><link>https://example.com/p/%E5%90%8C%E6%AD%A5%E4%B8%80%E4%B8%AA-fork/</link><pubDate>Wed, 04 Apr 2018 16:01:31 +0000</pubDate><guid>https://example.com/p/%E5%90%8C%E6%AD%A5%E4%B8%80%E4%B8%AA-fork/</guid><description>&lt;h2 id="å…·ä½“æ–¹æ³•">å…·ä½“æ–¹æ³•&lt;/h2>
&lt;h3 id="configuring-a-remote-for-a-fork">Configuring a remote for a fork&lt;/h3>
&lt;ul>
&lt;li>ç»™ fork é…ç½®ä¸€ä¸ª remote&lt;/li>
&lt;li>ä¸»è¦ä½¿ç”¨ &lt;code>git remote -v&lt;/code> æŸ¥çœ‹è¿œç¨‹çŠ¶æ€ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git remote -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (push)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>æ·»åŠ ä¸€ä¸ªå°†è¢«åŒæ­¥ç»™ fork è¿œç¨‹çš„ä¸Šæ¸¸ä»“åº“&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git remote add upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>å†æ¬¡æŸ¥çœ‹çŠ¶æ€ç¡®è®¤æ˜¯å¦é…ç½®æˆåŠŸã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git remote -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (fetch)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># origin https://github.com/YOUR_USERNAME/YOUR_FORK.git (push)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (fetch)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git (push)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="syncing-a-fork">Syncing a fork&lt;/h3>
&lt;ul>
&lt;li>ä»ä¸Šæ¸¸ä»“åº“ fetch åˆ†æ”¯å’Œæäº¤ç‚¹ï¼Œä¼ é€åˆ°æœ¬åœ°ï¼Œå¹¶ä¼šè¢«å­˜å‚¨åœ¨ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ upstream/master
&lt;code>git fetch upstream&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git fetch upstream
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># remote: Counting objects: 75, done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># remote: Compressing objects: 100% (53/53), done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># remote: Total 62 (delta 27), reused 44 (delta 9)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Unpacking objects: 100% (62/62), done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># From https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># * [new branch] master -&amp;gt; upstream/master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>åˆ‡æ¢åˆ°æœ¬åœ°ä¸»åˆ†æ”¯(å¦‚æœä¸åœ¨çš„è¯)
&lt;code>git checkout master&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git checkout master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Switched to branch &amp;#39;master&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>æŠŠ upstream/master åˆ†æ”¯åˆå¹¶åˆ°æœ¬åœ° master ä¸Šï¼Œè¿™æ ·å°±å®Œæˆäº†åŒæ­¥ï¼Œå¹¶ä¸”ä¸ä¼šä¸¢æ‰æœ¬åœ°ä¿®æ”¹çš„å†…å®¹ã€‚
&lt;code>git merge upstream/master&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">git merge upstream/master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Updating a422352..5fdff0f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Fast-forward
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># README | 9 -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># README.md | 7 ++++++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 2 files changed, 7 insertions(+), 9 deletions(-)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># delete mode 100644 README
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># create mode 100644 README.md
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>å¦‚æœæƒ³æ›´æ–°åˆ° GitHub çš„ fork ä¸Šï¼Œç›´æ¥ &lt;code>git push origin master&lt;/code> å°±å¥½äº†ã€‚&lt;/li>
&lt;/ul></description></item><item><title>Go è¯­è¨€ä½“ä¼š</title><link>https://example.com/p/go-%E8%AF%AD%E8%A8%80%E4%BD%93%E4%BC%9A/</link><pubDate>Wed, 04 Apr 2018 13:48:57 +0000</pubDate><guid>https://example.com/p/go-%E8%AF%AD%E8%A8%80%E4%BD%93%E4%BC%9A/</guid><description>&lt;p>æœ€è¿‘å…¬å¸è¦ç»Ÿä¸€æŠ€æœ¯æ ˆï¼Œåœ¨ kotlin å’Œ go ä¹‹é—´é€‰ã€‚æˆ‘å¿ƒé‡Œæ˜¯æ¯”è¾ƒå€¾å‘ go çš„ï¼Œä¸»è¦æœ‰å¦‚ä¸‹å‡ ç‚¹ä½“ä¼šã€‚&lt;/p>
&lt;ul>
&lt;li>è¯­è¨€ç®€å•ï¼Œä¸Šæ‰‹å¿«ã€‚&lt;/li>
&lt;li>gorotuine&lt;/li>
&lt;li>æ˜“å‘å¸ƒ&lt;/li>
&lt;li>åƒåœ¾å›æ”¶&lt;/li>
&lt;li>çº¦å®šå¤§äºé…ç½®&lt;/li>
&lt;/ul>
&lt;p>æˆ‘æœ€æ—©å¬è¯´åç¨‹ï¼Œæ˜¯åœ¨å¤§ä¸‰æ‰¾å®ä¹ çš„æ—¶å€™ï¼Œé‚£ä¸ªæ—¶å€™é¢è¯•ä¼šé—®çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»ï¼Œé—®çš„æ·±ä¸€äº›å°±æ˜¯åç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ã€‚æ¸¸æˆå…¬å¸åŸºæœ¬éƒ½ç”¨ luaï¼Œçœ‹äº† lua çš„èµ„æ–™åï¼Œå¯¹åç¨‹æœ‰äº†ä¸€äº›è‡ªå·±çš„äº†è§£ï¼Œéšåå°±æ˜¯åœ¨åš Unity ç›¸å…³çš„å¼€å‘ï¼Œåœ¨ unity ä¸­ä½¿ç”¨äº†å¾ˆå¤šçš„åç¨‹ï¼Œä½†æ˜¯åœ¨ unity ä¸­ä½¿ç”¨çš„åç¨‹å¥½åƒè·Ÿä¸»æµçš„ä¸å¤ªä¸€æ ·ï¼Œåœ¨çœ‹äº† go ä¹‹åï¼Œè±ç„¶å¼€æœ—ã€‚&lt;/p>
&lt;p>goroutine ä½¿ç”¨çš„å†…å­˜æ¯”çº¿ç¨‹æ›´å°‘ï¼Œgo åœ¨è¿è¡Œçš„æ—¶å€™ä¼šè‡ªåŠ¨åœ¨é…ç½®çš„ä¸€ç»„é€»è¾‘å¤„ç†å™¨ä¸Šè°ƒåº¦æ‰§è¡Œã€‚æ¯”å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">func log(msg string){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go log(&amp;#34;&amp;#34;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨å…³é”®å­— goï¼Œå³å¯è®© log å‡½æ•°åœ¨ä¸€ä¸ª goroutine é‡Œæ‰§è¡Œäº†ã€‚&lt;/p>
&lt;p>å¹¶å‘æœ€éš¾çš„éƒ¨åˆ†æ˜¯è¦ç¡®ä¿å…¶ä»–å¹¶å‘è¿è¡Œçš„è¿›ç¨‹ã€çº¿ç¨‹æˆ–è€… goroutine ä¸ä¼šä»¥å¤–çš„ä¿®æ”¹æ•°æ®ã€‚go ä½¿ç”¨äº† Channel çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¯¹äºé€šé“æ¨¡å¼ï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ª goroutine ä¿®æ”¹æ•°æ®ã€‚&lt;/p>
&lt;p>è¯´èµ· go çš„è¯­è¨€ç®€å•ï¼Œå…¶å®ä¸»è¦æ˜¯ä»–çš„ç±»å‹æ¯”è¾ƒç®€å•ã€‚go ä½¿ç”¨çš„æ˜¯ç»„åˆæ¨¡å¼ï¼Œåªéœ€è¦å°†ä¸€ä¸ªç±»å‹åµŒå…¥åˆ°å¦å¤–ä¸€ä¸ªç±»å‹å°±å¯ä»¥å¤ç”¨æ‰€æœ‰çš„åŠŸèƒ½ã€‚è€Œä¸” go è¿˜å…·æœ‰ç‹¬ç‰¹çš„æ¥å£å®ç°æœºåˆ¶ï¼Œå…è®¸ç”¨æˆ·å¯¹è¡Œä¸ºè¿›è¡Œå»ºæ¨¡ï¼Œåœ¨ go ä¸­ä¸éœ€è¦å£°æ˜æŸä¸ªç±»å‹å®ç°äº†æŸä¸ªæ¥å£ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯ä½¿ç”¨ä»€ä¹ˆæ¥å£ã€‚&lt;/p>
&lt;p>å¯¹äº java æ¥è¯´ï¼Œæ‰€æœ‰çš„è®¾è®¡éƒ½æ˜¯å›´ç»•ç€æ¥å£å±•å¼€ï¼Œäºæ˜¯åœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼Œå°±æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">interface User{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> void login();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> void logout();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ java ä¸­ï¼Œç»§æ‰¿çš„ç±»å¿…é¡»æ˜¾å¼å£°æ˜ç»§æ‰¿äº†æ­¤æ¥å£ã€‚è€Œåœ¨ go ä¸­æ¥å£åªæ˜¯æè¿°ä¸€ä¸ªåŠ¨ä½œï¼Œå¦‚æœè¯´æ˜¯å®ç°è¿™ä¸ªæ¥å£ï¼Œåªéœ€è¦è®©æŸä¸ªå®ä¾‹å®ç°äº†è¿™ä¸ªæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•å°±è¡Œäº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">type Reader interface{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Read(p []byte))(n int, err error)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å…¶å®å’Œä¼ ç»Ÿçš„ oop è¯­è¨€çš„æ¥å£æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼Œgo ä¸­çš„æ¥å£ä¸€èˆ¬åªå®šä¹‰ä¸€ä¸ªå•ä¸€çš„åŠ¨ä½œï¼Œå®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œè¿™æ›´æœ‰åˆ©äºä½¿ç”¨ç»„åˆæ¥å¤ç”¨ä»£ç ã€‚&lt;/p>
&lt;p>çº¦å®šå¤§äºé…ç½®è¿™ç‚¹ï¼Œgo åœ¨è¿™æ–¹é¢ä¸Šåšçš„æ„Ÿè§‰æœ‰ç‚¹å„¿å¹æ¯›æ±‚ç–µäº†ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿä½¿å¾—ç¨‹åºå¯è¯»æ€§æ›´å¼ºï¼Œæ²¡æœ‰å¾ˆå¤šåƒåœ¾ä»£ç ã€‚æ¯”å¦‚ go çš„æ–‡ä»¶ç»“æ„å¿…é¡»æ˜¯ src pkg å’Œ bin ä¸‰ä¸ªåŒ…ï¼Œè€Œä¸” go ä¹Ÿä¸å…è®¸ä½ å£°æ˜ä¸€ä¸ªå˜é‡å´ä¸ä½¿ç”¨ï¼Œå¯¼å…¥äº†ä¸€ä¸ªåŒ…å´ä¸ä½¿ç”¨ï¼Œè€Œä¸”ç¨‹åºçš„ä»£ç ä¹Ÿæœ‰çº¦å®šï¼Œinit æ–¹æ³•æ¯” main æ–¹æ³•æ›´æ—©æ‰§è¡Œã€‚&lt;/p>
&lt;h2 id="go-çš„å¹¶å‘">go çš„å¹¶å‘&lt;/h2>
&lt;p>è¯´åˆ°å¹¶å‘ï¼Œå°±ä¼šæƒ³åˆ°å¦å¤–ä¸€ä¸ªæ¦‚å¿µï¼Œå¹¶è¡Œã€‚å¯ä»¥ç®€å•è¿™æ ·çš„ç†è§£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">å¹¶å‘æ˜¯åŒæ—¶ç®¡ç†å¤šä¸ªäº‹æƒ…ï¼Œè€Œå¹¶è¡Œæ˜¯åŒæ—¶åšå¾ˆå¤šäº‹æƒ…ã€‚ä¹Ÿå°±æ˜¯å¹¶å‘æ˜¯manageï¼Œå¹¶è¡Œæ˜¯runã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äºå•æ ¸å¤„ç†å™¨æ¥è®²ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œï¼Œé‚£ä¹ˆå¹¶å‘å°±æ˜¯åŒæ—¶ç®¡ç†å¤šä¸ªä»»åŠ¡ï¼Œè®©ä»–ä»¬äº¤æ›¿æ‰§è¡Œã€‚å¹¶è¡Œæ˜¯é’ˆå¯¹äºå¤šæ ¸å¤„ç†å™¨çš„ï¼ŒåŒä¸€æ—¶åˆ»å¯ä»¥æŠŠå¤šä¸ªä»»åŠ¡æ”¾åœ¨ä¸åŒçš„å¤„ç†å™¨ä¸Šæ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶æ‰§è¡Œã€‚&lt;/p>
&lt;p>åœ¨ go é‡Œé¢ä¸»è¦æ˜¯é‡‡ç”¨åç¨‹æ¥å®ç°å¹¶å‘çš„ï¼Œä¹Ÿå°±æ˜¯ goroutineã€‚ä¸å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œgo æ˜¯åœ¨è¯­æ³•å±‚é¢åšåˆ°çš„ï¼Œå³ go func();&lt;/p>
&lt;h3 id="è¯­æ³•">è¯­æ³•&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">go f(x, y)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>go æ˜¯å…³é”®å­—ï¼Œåé¢è·Ÿå‡½æ•°ã€‚&lt;/p>
&lt;h3 id="ä¾‹å­">ä¾‹å­&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;log&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;time&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func doSomething(id int) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;before do job:(%d) \n&amp;#34;, id)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> time.Sleep(3 * time.Second)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;after do job:(%d) \n&amp;#34;, id)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func main() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> doSomething(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> doSomething(2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> doSomething(3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä¾‹å­çš„è¾“å‡ºæ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">2018/04/15 17:06:05 before do job:(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:06:08 after do job:(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:06:08 before do job:(2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:06:11 after do job:(2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:06:11 before do job:(3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:06:14 after do job:(3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°æ˜¯ç”¨äº† 9 ç§’çš„æ—¶é—´æ‰å®Œæˆï¼Œå¦‚æœæ˜¯é‡‡ç”¨ goroutine çš„è¯ï¼Œå°±å¾ˆå¿«ã€‚å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨æ‰§è¡Œ doSomething ä¹‹å‰ï¼ŒåŠ ä¸Š go å…³é”®å­—ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">import (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;log&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;time&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func doSomething(id int) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;before do job:(%d) \n&amp;#34;, id)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> time.Sleep(3 * time.Second)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;after do job:(%d) \n&amp;#34;, id)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func main() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go doSomething(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go doSomething(2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go doSomething(3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½†æ˜¯è¿™æ ·çš„è¯ï¼Œä»€ä¹ˆç»“æœä¹Ÿæ²¡æœ‰ï¼Œæ˜¯å› ä¸º main å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª goroutineï¼Œmain æ‰§è¡Œå®Œä¹‹åï¼Œå…¶ä»–çš„è¿˜æ²¡å¼€å§‹ï¼Œæ‰€ä»¥ä»€ä¹ˆä¹Ÿçœ‹ä¸åˆ°ã€‚æœ€ç®€å•çš„åŠæ³•å°±æ˜¯è®© main å‡½æ•°ç­‰å¾…ä¸€æ®µæ—¶é—´å†ç»“æŸï¼Œä½†æ˜¯è¿™æ ·ä¸å¤Ÿä¼˜é›…ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬åº”è¯¥é‡‡ç”¨ sync.WaitGroup æ¥ç­‰å¾…æ‰€æœ‰çš„ goroutine ç»“æŸã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;log&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;sync&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;time&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func doSomething(id int, wg *sync.WaitGroup) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> defer wg.Done()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;before do job:(%d) \n&amp;#34;, id)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> time.Sleep(3 * time.Second)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;after do job:(%d) \n&amp;#34;, id)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">func main() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> var wg sync.WaitGroup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> wg.Add(3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // å› ä¸ºæˆ‘ä»¬è¦ä¿®æ”¹wgçš„çŠ¶æ€ï¼Œæ‰€ä»¥è¦ä¼ æŒ‡é’ˆè¿‡å»
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go doSomething(1, &amp;amp;wg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go doSomething(2, &amp;amp;wg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> go doSomething(3, &amp;amp;wg)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> wg.Wait()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log.Printf(&amp;#34;finish all jobs\n&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œç»“æœæ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">2018/04/15 17:13:14 before do job:(3)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:13:14 before do job:(2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:13:14 before do job:(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:13:17 after do job:(2)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:13:17 after do job:(1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2018/04/15 17:13:17 after do job:(3)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°è¿™æ¬¡åªç”¨äº† 3 ç§’å·¦å³å°±æ‰§è¡Œå®Œäº†ï¼Œè€Œä¸”ä»–ä»¬çš„æ‰§è¡Œé¡ºåºä¹Ÿä¸ç¡®å®šï¼Œç«äº‰æ‰§è¡Œã€‚&lt;/p>
&lt;h3 id="channel">channel&lt;/h3>
&lt;p>æ¯ä¸ªåç¨‹ä¹‹é—´è¦è¿›è¡Œé€šä¿¡ï¼Œé‚£ä¹ˆåœ¨é€šä¿¡çš„æ—¶å€™é‡‡ç”¨çš„æ˜¯ Channel çš„å½¢å¼ï¼Œå³ä¸€ä¸ª goroutine å°†æ•°æ®ä¼ é€’ç»™ Channelï¼Œå¦ä¸€ä¸ª goroutine ä» Channel ä¸­è¯»å–æ•°æ®ã€‚&lt;/p>
&lt;p>åˆ›å»º Channel æœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p>
&lt;p>ä½¿ç”¨å†…å»ºå‡½æ•° make å¯ä»¥åˆ›å»º channelï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">ch := make(chan int) // æ³¨æ„ï¼š channel å¿…é¡»å®šä¹‰å…¶ä¼ é€’çš„æ•°æ®ç±»å‹
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹Ÿå¯ä»¥ç”¨ var å£°æ˜ channel, å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var ch chan int
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šå£°æ˜çš„ channel éƒ½æ˜¯åŒå‘çš„ï¼Œæ„å‘³ç€å¯ä»¥è¯¥ channel å¯ä»¥å‘é€æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶æ•°æ®ã€‚&lt;/p></description></item><item><title>å…³äºæ—¶é—´ç®¡ç†</title><link>https://example.com/p/%E5%85%B3%E4%BA%8E%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/</link><pubDate>Sun, 25 Mar 2018 20:28:42 +0000</pubDate><guid>https://example.com/p/%E5%85%B3%E4%BA%8E%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/</guid><description>&lt;p>&lt;img src="https://static001.geekbang.org/resource/image/a7/e4/a7e048981c7d5a853232422d792790e4.jpg"
loading="lazy"
>&lt;/p>
&lt;p>ä¸»åŠ¨ç®¡ç†æ—¶é—´ï¼Œæ•¢äºè¯´ä¸ã€‚&lt;/p>
&lt;p>æœ‰ç›®æ ‡å‘å‰çœ‹ï¼Œæ²¡ç›®æ ‡å‘é’±çœ‹ã€‚&lt;/p></description></item><item><title>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</title><link>https://example.com/p/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/</link><pubDate>Sat, 24 Mar 2018 19:03:58 +0000</pubDate><guid>https://example.com/p/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/</guid><description>&lt;p>å½“æˆ‘ä»¬åœ¨åšæ•°æ®åº“åˆ†åº“åˆ†è¡¨æˆ–è€…åšåˆ†å¸ƒå¼ç¼“å­˜çš„æ—¶å€™ï¼Œä¸å¯é¿å…çš„éƒ½ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;p>&lt;strong>å¦‚ä½•å°†æ•°æ®å‡åŒ€çš„åˆ†æ•£åˆ°å„ä¸ªèŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”å°½é‡çš„åœ¨åŠ å‡èŠ‚ç‚¹çš„æ—¶èƒ½ä½¿å—å½±å“çš„æ•°æ®æœ€å°‘ã€‚&lt;/strong>&lt;/p>
&lt;h2 id="1-hash-å–æ¨¡">1 hash å–æ¨¡&lt;/h2>
&lt;p>éšæœºæ”¾ç½®å°±ä¸å¤šè¯´äº†ã€‚é€šå¸¸æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ¡ˆæ˜¯å“ˆå¸Œå–æ¨¡äº†ã€‚&lt;/p>
&lt;p>å¯ä»¥å°†ä¼ å…¥çš„ key æŒ‰ç…§
$$
index=hash(key) % N
$$
è¿™æ ·æ¥è®¡ç®—å‡ºéœ€è¦å­˜æ”¾çš„èŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>è¿™æ ·å¯ä»¥æ»¡è¶³æ•°æ®çš„å‡åŒ€åˆ†é…ï¼Œä½†æ˜¯è¿™ä¸ªç®—æ³•çš„å®¹é”™æ€§å’Œæ‰©å±•æ€§æ¯”è¾ƒå·®ã€‚æ¯”å¦‚å¢åŠ æˆ–è€…åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ key éƒ½è¦é‡æ–°è®¡ç®—ï¼Œæ˜¾ç„¶è¿™æ ·çš„æˆæœ¬æ¯”è¾ƒé«˜ï¼Œä¸ºæ­¤éœ€è¦ä¸€ä¸ªç®—æ³•æ¥æ»¡è¶³å‡åŒ€çš„åŒæ—¶ä¹Ÿè¦æœ‰è‰¯å¥½çš„å®¹é”™æ€§å’Œæ‰©å±•æ€§ã€‚&lt;/p>
&lt;h2 id="2-ä¸€è‡´æ€§-hash-ç®—æ³•">2 ä¸€è‡´æ€§ hash ç®—æ³•&lt;/h2>
&lt;p>ä¸€è‡´æ€§ hash ç®—æ³•æ˜¯å°†æ‰€æœ‰çš„å“ˆå¸Œå€¼æ„æˆäº†ä¸€ä¸ªç¯ï¼Œå…¶èŒƒå›´æ˜¯ 0~2^32-1ã€‚å¦‚å›¾ï¼š&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/006tNc79gy1fn8kbmd4ncj30ad08y3yn.jpg"
loading="lazy"
alt="å“ˆå¸Œç¯"
>&lt;/p>
&lt;p>ä¹‹åå°†å„ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹æ•£åˆ—åˆ°è¿™ä¸ªç¯ä¸Šï¼Œå¯ä»¥ç”¨èŠ‚ç‚¹çš„ IPï¼Œhostname è¿™æ ·å”¯ä¸€æ€§çš„å­—æ®µä½œä¸º key è¿›è¡Œ hashã€‚æ•£åˆ—ä¹‹åå¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://ws3.sinaimg.cn/large/006tNc79gy1fn8kf72uwuj30a40a70t5.jpg"
loading="lazy"
>&lt;/p>
&lt;p>ä¹‹åéœ€è¦å°†æ•°æ®å®šä½åˆ°å¯¹åº”çš„èŠ‚ç‚¹ä¸Šï¼Œä½¿ç”¨åŒæ ·çš„ hash å‡½æ•°å°† key ä¹Ÿæ˜ å°„åˆ°è¿™ä¸ªç¯ä¸Šã€‚&lt;/p>
&lt;p>&lt;img src="https://ws3.sinaimg.cn/large/006tNc79gy1fn8kj9kd4oj30ax0aomxq.jpg"
loading="lazy"
>&lt;/p>
&lt;p>è¿™æ ·å°±æŒ‰ç…§é¡ºæ—¶é’ˆæ–¹å‘å°±å¯ä»¥å°† k1 å®šä½åˆ° N1 èŠ‚ç‚¹ï¼Œk2 å®šä½åˆ° N3 èŠ‚ç‚¹ï¼Œk3 å®šä½åˆ° N2 èŠ‚ç‚¹ã€‚&lt;/p>
&lt;h3 id="21-å®¹é”™æ€§">2.1 å®¹é”™æ€§&lt;/h3>
&lt;p>å‡è®¾ N1 å®•æœºäº†ï¼š&lt;/p>
&lt;p>&lt;img src="https://ws3.sinaimg.cn/large/006tNc79gy1fn8kl9pp06j30a409waaj.jpg"
loading="lazy"
>&lt;/p>
&lt;p>ä¾ç„¶æ ¹æ®é¡ºæ—¶é’ˆæ–¹å‘ï¼Œk2 å’Œ k3 ä¿æŒä¸å˜ï¼Œåªæœ‰ k1 è¢«é‡æ–°æ˜ å°„åˆ°äº† N3ã€‚è¿™æ ·å°±å¾ˆå¥½çš„ä¿è¯äº†å®¹é”™æ€§ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºæ—¶åªä¼šå½±å“åˆ°å°‘éƒ¨åˆ†æ•°æ®ã€‚&lt;/p>
&lt;h3 id="22-æ‰©å±•æ€§">2.2 æ‰©å±•æ€§&lt;/h3>
&lt;p>å½“æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼š&lt;/p>
&lt;p>&lt;img src="https://ws1.sinaimg.cn/large/006tNc79gy1fn8kp1fc9xj30ca0abt9c.jpg"
loading="lazy"
>&lt;/p>
&lt;p>åœ¨ N2 å’Œ N3 ä¹‹é—´æ–°å¢äº†ä¸€ä¸ªèŠ‚ç‚¹ N4ï¼Œè¿™æ—¶å—å½±å“çš„æ•°æ®åªæœ‰ k3ï¼Œå…¶ä½™çš„æ•°æ®ä¹Ÿæ˜¯ä¿æŒä¸å˜ã€‚&lt;/p>
&lt;h3 id="23-è™šæ‹ŸèŠ‚ç‚¹">2.3 è™šæ‹ŸèŠ‚ç‚¹&lt;/h3>
&lt;p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¯¥ç®—æ³•ä¹Ÿæœ‰ä¸€äº›é—®é¢˜ï¼š&lt;/p>
&lt;p>å½“èŠ‚ç‚¹è¾ƒå°‘çš„æ—¶å€™å¯èƒ½å‡ºç°æ•°æ®ä¸å‡åŒ€çš„æƒ…å†µï¼š&lt;/p>
&lt;p>&lt;img src="https://ws2.sinaimg.cn/large/006tNc79gy1fn8krttekbj30c10a5dg5.jpg"
loading="lazy"
>&lt;/p>
&lt;p>è¿™æ ·ä¼šå¯¼è‡´å¤§éƒ¨åˆ†æ•°æ®éƒ½åœ¨ N1 èŠ‚ç‚¹ï¼Œåªæœ‰å°‘é‡çš„æ•°æ®åœ¨ N2 èŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>å°†æ¯ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œå¤šæ¬¡å“ˆå¸Œï¼Œç”Ÿæˆçš„èŠ‚ç‚¹æ”¾ç½®åœ¨ç¯ä¸Šæˆä¸º&lt;strong>è™šæ‹ŸèŠ‚ç‚¹&lt;/strong>ã€‚&lt;/p>
&lt;p>&lt;img src="https://ws2.sinaimg.cn/large/006tNc79gy1fn8ktzuswkj30ae0abdgb.jpg"
loading="lazy"
>&lt;/p>
&lt;p>è®¡ç®—æ—¶å¯ä»¥åœ¨ IP ååŠ ä¸Šç¼–å·æ¥ç”Ÿæˆå“ˆå¸Œå€¼ã€‚&lt;/p>
&lt;p>è¿™æ ·åªéœ€è¦åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šå¤šä¸€æ­¥ç”±è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°å®é™…èŠ‚ç‚¹çš„æ­¥éª¤å³å¯è®©å°‘é‡èŠ‚ç‚¹ä¹Ÿèƒ½æ»¡è¶³å‡åŒ€æ€§ã€‚&lt;/p>
&lt;h2 id="3-å‚è€ƒ">3 å‚è€ƒ&lt;/h2>
&lt;p>&lt;a class="link" href="https://crossoverjie.top/2018/01/08/Consistent-Hash/#more" target="_blank" rel="noopener"
>https://crossoverjie.top/2018/01/08/Consistent-Hash/#more&lt;/a>&lt;/p></description></item><item><title>Spring Boot å¯åŠ¨åŸç†åˆ†æ</title><link>https://example.com/p/spring-boot-%E5%90%AF%E5%8A%A8%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/</link><pubDate>Sat, 24 Mar 2018 19:03:22 +0000</pubDate><guid>https://example.com/p/spring-boot-%E5%90%AF%E5%8A%A8%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/</guid><description>&lt;h1 id="spring-boot-å¯åŠ¨åŸç†åˆ†æ">Spring Boot å¯åŠ¨åŸç†åˆ†æ&lt;/h1>
&lt;p>æˆ‘ä»¬åœ¨å¼€å‘ spring boot åº”ç”¨çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šé‡åˆ°å¦‚ä¸‹çš„å¯åŠ¨ç±»ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@SpringBootApplication
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class DemoApplication {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static void main(String[] args) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SpringApplication.run(DemoApplication.class, args);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»è¿™æ®µä»£ç å¯ä»¥çœ‹å‡ºï¼Œæ³¨è§£@SpringBootApplication å’Œ SpringApplication.run()æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸¤ä¸ªä¸œè¥¿ã€‚&lt;/p>
&lt;h2 id="1-springapplication-æ³¨è§£">1 @SpringApplication æ³¨è§£&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Target(ElementType.TYPE)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Retention(RetentionPolicy.RUNTIME)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Documented
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Inherited
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@SpringBootConfiguration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@EnableAutoConfiguration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@ComponentScan(excludeFilters = {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public @interface SpringBootApplication {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™æ®µä»£ç é‡Œï¼Œæ¯”è¾ƒé‡è¦çš„åªæœ‰ä¸‰ä¸ªæ³¨è§£ï¼š&lt;/p>
&lt;ul>
&lt;li>@Configurationï¼ˆ@SpringBootConfiguration ç‚¹å¼€æŸ¥çœ‹å‘ç°é‡Œé¢è¿˜æ˜¯åº”ç”¨äº†@Configurationï¼‰&lt;/li>
&lt;li>@EnableAutoConfiguration&lt;/li>
&lt;li>@ComponentScan&lt;/li>
&lt;/ul>
&lt;p>å…¶å®ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸‰ä¸ªæ³¨è§£æ¥ä¿®é¥° springboot çš„å¯åŠ¨ç±»ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œ,å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@ComponentScan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@EnableAutoConfiguration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class DemoApplication {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static void main(String[] args) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SpringApplication.run(DemoApplication.class, args);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¯æ¬¡å†™è¿™ä¸‰ä¸ªæ³¨è§£çš„è¯ï¼Œæ¯”è¾ƒç¹çï¼Œæ‰€ä»¥å°± spring å›¢é˜Ÿå°±å°è£…äº†ä¸€ä¸ª@SpringBootApplicationã€‚&lt;/p>
&lt;h2 id="11-configuration">1.1 @Configuration&lt;/h2>
&lt;p>@Configuration å°±æ˜¯ JavaConfig å½¢å¼çš„ Spring Ioc å®¹å™¨çš„é…ç½®ç±»ä½¿ç”¨çš„é‚£ä¸ª@Configurationï¼ŒSpringBoot ç¤¾åŒºæ¨èä½¿ç”¨åŸºäº JavaConfig çš„é…ç½®å½¢å¼ï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œçš„å¯åŠ¨ç±»æ ‡æ³¨äº†@Configuration ä¹‹åï¼Œæœ¬èº«å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ª IoC å®¹å™¨çš„é…ç½®ç±»ã€‚&lt;/p>
&lt;p>XML è·Ÿ config é…ç½®æ–¹å¼çš„åŒºåˆ«å¯ä»¥ä»å¦‚ä¸‹å‡ ä¸ªæ–¹é¢æ¥è¯´ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è¡¨è¾¾å½¢å¼å±‚é¢
åŸºäº xml çš„é…ç½®æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;beans&lt;/span> &lt;span class="na">xmlns=&lt;/span>&lt;span class="s">&amp;#34;http://www.springframework.org/schema/beans&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">xsi:schemaLocation=&lt;/span>&lt;span class="s">&amp;#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">default-lazy-init=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!--beanå®šä¹‰--&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/beans&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸºäº java config é…ç½®æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class MockConfiguration{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //beanå®šä¹‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ³¨å†Œ bean å®šä¹‰å±‚é¢
åŸºäº XML çš„é…ç½®å½¢å¼æ˜¯è¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;bean&lt;/span> &lt;span class="na">id=&lt;/span>&lt;span class="s">&amp;#34;mockService&amp;#34;&lt;/span> &lt;span class="na">class=&lt;/span>&lt;span class="s">&amp;#34;..MockServiceImpl&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/bean&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€ŒåŸºäº Java config çš„é…ç½®å½¢å¼æ˜¯è¿™æ ·çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class MockConfiguration{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public MockService mockService(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return new MockServiceImpl();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»»ä½•ä¸€ä¸ªæ ‡æ³¨äº†@Bean çš„æ–¹æ³•ï¼Œå…¶è¿”å›å€¼å°†ä½œä¸ºä¸€ä¸ª bean å®šä¹‰æ³¨å†Œåˆ° Spring çš„ IoC å®¹å™¨ï¼Œæ–¹æ³•åå°†é»˜è®¤æˆè¯¥ bean å®šä¹‰çš„ idã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¡¨è¾¾ä¾èµ–æ³¨å…¥å…³ç³»å±‚é¢
ä¸ºäº†è¡¨è¾¾ bean ä¸ bean ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œåœ¨ XML å½¢å¼ä¸­ä¸€èˆ¬æ˜¯è¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;bean&lt;/span> &lt;span class="na">id=&lt;/span>&lt;span class="s">&amp;#34;mockService&amp;#34;&lt;/span> &lt;span class="na">class=&lt;/span>&lt;span class="s">&amp;#34;..MockServiceImpl&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;propery&lt;/span> &lt;span class="na">name =&lt;/span>&lt;span class="s">&amp;#34;dependencyService&amp;#34;&lt;/span> &lt;span class="na">ref=&lt;/span>&lt;span class="s">&amp;#34;dependencyService&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/bean&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;bean&lt;/span> &lt;span class="na">id=&lt;/span>&lt;span class="s">&amp;#34;dependencyService&amp;#34;&lt;/span> &lt;span class="na">class=&lt;/span>&lt;span class="s">&amp;#34;DependencyServiceImpl&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&amp;lt;/bean&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€ŒåŸºäº Java config çš„é…ç½®å½¢å¼æ˜¯è¿™æ ·çš„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class MockConfiguration{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public MockService mockService(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return new MockServiceImpl(dependencyService());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public DependencyService dependencyService(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return new DependencyServiceImpl();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä¸€ä¸ª bean çš„å®šä¹‰ä¾èµ–å…¶ä»– bean,åˆ™ç›´æ¥è°ƒç”¨å¯¹åº”çš„ JavaConfig ç±»ä¸­ä¾èµ– bean çš„åˆ›å»ºæ–¹æ³•å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="12-componentscan">1.2 @ComponentScan&lt;/h3>
&lt;p>@ComponentScan çš„åŠŸèƒ½å…¶å®å°±æ˜¯è‡ªåŠ¨æ‰«æå¹¶åŠ è½½ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶ï¼ˆæ¯”å¦‚@Component å’Œ@Repository ç­‰ï¼‰æˆ–è€… bean å®šä¹‰ï¼Œæœ€ç»ˆå°†è¿™äº› bean å®šä¹‰åŠ è½½åˆ° IoC å®¹å™¨ä¸­ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ basePackages ç­‰å±æ€§æ¥ç»†ç²’åº¦çš„å®šåˆ¶@ComponentScan è‡ªåŠ¨æ‰«æçš„èŒƒå›´ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ Spring æ¡†æ¶å®ç°ä¼šä»å£°æ˜@ComponentScan æ‰€åœ¨ç±»çš„ package è¿›è¡Œæ‰«æã€‚&lt;/p>
&lt;p>æ‰€ä»¥ SpringBoot çš„å¯åŠ¨ç±»æœ€å¥½æ˜¯æ”¾åœ¨ root package ä¸‹ï¼Œå› ä¸ºé»˜è®¤ä¸æŒ‡å®š basePackagesã€‚&lt;/p>
&lt;h3 id="13-enableautoconfiguration">1.3 @EnableAutoConfiguration&lt;/h3>
&lt;p>Spring æ¡†æ¶æä¾›äº†å„ç§åå­—ä¸º@Enable å¼€å¤´çš„ Annotation å®šä¹‰ï¼Œæ¯”å¦‚@EnableSchedulingã€@EnableCachingã€@EnableMBeanExport ç­‰ã€‚@EnableAutoConfiguration çš„ç†å¿µå’Œåšäº‹æ–¹å¼å…¶å®ä¸€è„‰ç›¸æ‰¿ï¼Œç®€å•æ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯ï¼Œå€ŸåŠ©@Import çš„æ”¯æŒï¼Œæ”¶é›†å’Œæ³¨å†Œç‰¹å®šåœºæ™¯ç›¸å…³çš„ bean å®šä¹‰ã€‚&lt;/p>
&lt;p>@EnableAutoConfiguration ä¹Ÿæ˜¯å€ŸåŠ©@Import çš„å¸®åŠ©ï¼Œå°†æ‰€æœ‰ç¬¦åˆè‡ªåŠ¨é…ç½®æ¡ä»¶çš„ bean å®šä¹‰åŠ è½½åˆ° IoC å®¹å™¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@SuppressWarnings(&amp;#34;deprecation&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Target(ElementType.TYPE)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Retention(RetentionPolicy.RUNTIME)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Documented
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Inherited
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@AutoConfigurationPackage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Import(EnableAutoConfigurationImportSelector.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public @interface EnableAutoConfiguration {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>@EnableAutoConfiguration ä½œä¸ºä¸€ä¸ªå¤åˆ Annotationï¼Œ&lt;/p>
&lt;p>å…¶ä¸­ï¼Œæœ€å…³é”®çš„è¦å±@Import(EnableAutoConfigurationImportSelector.class)ï¼Œå€ŸåŠ© EnableAutoConfigurationImportSelectorï¼Œ@EnableAutoConfiguration å€ŸåŠ©äº SpringFactoriesLoader çš„æ”¯æŒå¯ä»¥å¸®åŠ© SpringBoot åº”ç”¨å°†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„@Configuration é…ç½®éƒ½åŠ è½½åˆ°å½“å‰ SpringBoot åˆ›å»ºå¹¶ä½¿ç”¨çš„ IoC å®¹å™¨ã€‚SpringFactoriesLoader çš„æ”¯æŒã€‚&lt;/p>
&lt;h3 id="14-springfactoriesloader">1.4 SpringFactoriesLoader&lt;/h3>
&lt;p>SpringFactoriesLoader å±äº Spring æ¡†æ¶ç§æœ‰çš„ä¸€ç§æ‰©å±•æ–¹æ¡ˆï¼Œå…¶ä¸»è¦åŠŸèƒ½å°±æ˜¯ä»æŒ‡å®šçš„é…ç½®æ–‡ä»¶&lt;code>META-INF/spring.factories&lt;/code>åŠ è½½é…ç½®ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">public abstract class SpringFactoriesLoader {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; loadFactories(Class&amp;lt;T&amp;gt; factoryClass, ClassLoader classLoader) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static List&amp;lt;String&amp;gt; loadFactoryNames(Class&amp;lt;?&amp;gt; factoryClass, ClassLoader classLoader){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ....
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é…åˆ@EnableAutoConfiguration ä½¿ç”¨çš„è¯ï¼Œå®ƒæ›´å¤šæ˜¯æä¾›ä¸€ç§é…ç½®æŸ¥æ‰¾çš„åŠŸèƒ½æ”¯æŒï¼Œå³æ ¹æ®@EnableAutoConfiguration çš„å®Œæ•´ç±»å org.springframework.boot.autoconfigure.EnableAutoConfiguration ä½œä¸ºæŸ¥æ‰¾çš„ Key,è·å–å¯¹åº”çš„ä¸€ç»„@Configuration ç±»ã€‚&lt;/p>
&lt;p>&lt;img src="http://7xqch5.com1.z0.glb.clouddn.com/springboot3-2.jpg"
loading="lazy"
>&lt;/p>
&lt;p>@EnableAutoConfiguration è‡ªåŠ¨é…ç½®æµç¨‹å°±æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>ä» classpath ä¸­æœå¯»æ‰€æœ‰çš„ META-INF/spring.factories é…ç½®æ–‡ä»¶ï¼›&lt;/li>
&lt;li>å¹¶å°†å…¶ä¸­ org.springframework.boot.autoconfigure.EnableutoConfiguration å¯¹åº”çš„é…ç½®é¡¹é€šè¿‡åå°„ï¼ˆJava Refletionï¼‰å®ä¾‹åŒ–ä¸ºå¯¹åº”çš„æ ‡æ³¨äº†@Configuration çš„ JavaConfig å½¢å¼çš„ IoC å®¹å™¨é…ç½®ç±»ï¼›&lt;/li>
&lt;li>ç„¶åæ±‡æ€»ä¸ºä¸€ä¸ªå¹¶åŠ è½½åˆ° IoC å®¹å™¨ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="2-springapplication">2 SpringApplication&lt;/h2>
&lt;p>SpringApplication çš„ run è¯¥æ–¹æ³•çš„ä¸»è¦æµç¨‹å¤§ä½“å¯ä»¥å½’çº³å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;strong>1ï¼‰&lt;/strong> å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ SpringApplication çš„é™æ€ run æ–¹æ³•ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ª SpringApplication å¯¹è±¡å®ä¾‹ï¼Œç„¶åè°ƒç”¨è¿™ä¸ªåˆ›å»ºå¥½çš„ SpringApplication çš„å®ä¾‹æ–¹æ³•ã€‚åœ¨ SpringApplication å®ä¾‹åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå®ƒä¼šæå‰åšå‡ ä»¶äº‹æƒ…ï¼š&lt;/p>
&lt;ul>
&lt;li>æ ¹æ® classpath é‡Œé¢æ˜¯å¦å­˜åœ¨æŸä¸ªç‰¹å¾ç±»ï¼ˆorg.springframework.web.context.ConfigurableWebApplicationContextï¼‰æ¥å†³å®šæ˜¯å¦åº”è¯¥åˆ›å»ºä¸€ä¸ªä¸º Web åº”ç”¨ä½¿ç”¨çš„ ApplicationContext ç±»å‹ã€‚&lt;/li>
&lt;li>ä½¿ç”¨ SpringFactoriesLoader åœ¨åº”ç”¨çš„ classpath ä¸­æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨çš„ ApplicationContextInitializerã€‚&lt;/li>
&lt;li>ä½¿ç”¨ SpringFactoriesLoader åœ¨åº”ç”¨çš„ classpath ä¸­æŸ¥æ‰¾å¹¶åŠ è½½æ‰€æœ‰å¯ç”¨çš„ ApplicationListenerã€‚&lt;/li>
&lt;li>æ¨æ–­å¹¶è®¾ç½® main æ–¹æ³•çš„å®šä¹‰ç±»ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>2ï¼‰&lt;/strong> SpringApplication å®ä¾‹åˆå§‹åŒ–å®Œæˆå¹¶ä¸”å®Œæˆè®¾ç½®åï¼Œå°±å¼€å§‹æ‰§è¡Œ run æ–¹æ³•çš„é€»è¾‘äº†ï¼Œæ–¹æ³•æ‰§è¡Œä¼Šå§‹ï¼Œé¦–å…ˆéå†æ‰§è¡Œæ‰€æœ‰é€šè¿‡ SpringFactoriesLoader å¯ä»¥æŸ¥æ‰¾åˆ°å¹¶åŠ è½½çš„ SpringApplicationRunListenerã€‚è°ƒç”¨å®ƒä»¬çš„ started()æ–¹æ³•ï¼Œå‘Šè¯‰è¿™äº› SpringApplicationRunListenerï¼Œâ€œå˜¿ï¼ŒSpringBoot åº”ç”¨è¦å¼€å§‹æ‰§è¡Œå’¯ï¼â€ã€‚&lt;/p>
&lt;p>&lt;strong>3ï¼‰&lt;/strong> åˆ›å»ºå¹¶é…ç½®å½“å‰ Spring Boot åº”ç”¨å°†è¦ä½¿ç”¨çš„ Environmentï¼ˆåŒ…æ‹¬é…ç½®è¦ä½¿ç”¨çš„ PropertySource ä»¥åŠ Profileï¼‰ã€‚&lt;/p>
&lt;p>&lt;strong>4ï¼‰&lt;/strong> éå†è°ƒç”¨æ‰€æœ‰ SpringApplicationRunListener çš„ environmentPrepared()çš„æ–¹æ³•ï¼Œå‘Šè¯‰ä»–ä»¬ï¼šâ€œå½“å‰ SpringBoot åº”ç”¨ä½¿ç”¨çš„ Environment å‡†å¤‡å¥½äº†å’¯ï¼â€ã€‚&lt;/p>
&lt;p>&lt;strong>5ï¼‰&lt;/strong> å¦‚æœ SpringApplication çš„ showBanner å±æ€§è¢«è®¾ç½®ä¸º trueï¼Œåˆ™æ‰“å° bannerã€‚&lt;/p>
&lt;p>&lt;strong>6ï¼‰&lt;/strong> æ ¹æ®ç”¨æˆ·æ˜¯å¦æ˜ç¡®è®¾ç½®äº† applicationContextClass ç±»å‹ä»¥åŠåˆå§‹åŒ–é˜¶æ®µçš„æ¨æ–­ç»“æœï¼Œå†³å®šè¯¥ä¸ºå½“å‰ SpringBoot åº”ç”¨åˆ›å»ºä»€ä¹ˆç±»å‹çš„ ApplicationContext å¹¶åˆ›å»ºå®Œæˆï¼Œç„¶åæ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦æ·»åŠ  ShutdownHookï¼Œå†³å®šæ˜¯å¦ä½¿ç”¨è‡ªå®šä¹‰çš„ BeanNameGeneratorï¼Œå†³å®šæ˜¯å¦ä½¿ç”¨è‡ªå®šä¹‰çš„ ResourceLoaderï¼Œå½“ç„¶ï¼Œæœ€é‡è¦çš„ï¼Œå°†ä¹‹å‰å‡†å¤‡å¥½çš„ Environment è®¾ç½®ç»™åˆ›å»ºå¥½çš„ ApplicationContext ä½¿ç”¨ã€‚&lt;/p>
&lt;p>&lt;strong>7ï¼‰&lt;/strong> ApplicationContext åˆ›å»ºå¥½ä¹‹åï¼ŒSpringApplication ä¼šå†æ¬¡å€ŸåŠ© Spring-FactoriesLoaderï¼ŒæŸ¥æ‰¾å¹¶åŠ è½½ classpath ä¸­æ‰€æœ‰å¯ç”¨çš„ ApplicationContext-Initializerï¼Œç„¶åéå†è°ƒç”¨è¿™äº› ApplicationContextInitializer çš„ initializeï¼ˆapplicationContextï¼‰æ–¹æ³•æ¥å¯¹å·²ç»åˆ›å»ºå¥½çš„ ApplicationContext è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†ã€‚&lt;/p>
&lt;p>&lt;strong>8ï¼‰&lt;/strong> éå†è°ƒç”¨æ‰€æœ‰ SpringApplicationRunListener çš„ contextPrepared()æ–¹æ³•ã€‚&lt;/p>
&lt;p>&lt;strong>9ï¼‰&lt;/strong> æœ€æ ¸å¿ƒçš„ä¸€æ­¥ï¼Œå°†ä¹‹å‰é€šè¿‡@EnableAutoConfiguration è·å–çš„æ‰€æœ‰é…ç½®ä»¥åŠå…¶ä»–å½¢å¼çš„ IoC å®¹å™¨é…ç½®åŠ è½½åˆ°å·²ç»å‡†å¤‡å®Œæ¯•çš„ ApplicationContextã€‚&lt;/p>
&lt;p>&lt;strong>10ï¼‰&lt;/strong> éå†è°ƒç”¨æ‰€æœ‰ SpringApplicationRunListener çš„ contextLoaded()æ–¹æ³•ã€‚&lt;/p>
&lt;p>&lt;strong>11ï¼‰&lt;/strong> è°ƒç”¨ ApplicationContext çš„ refresh()æ–¹æ³•ï¼Œå®Œæˆ IoC å®¹å™¨å¯ç”¨çš„æœ€åä¸€é“å·¥åºã€‚&lt;/p>
&lt;p>&lt;strong>12ï¼‰&lt;/strong> æŸ¥æ‰¾å½“å‰ ApplicationContext ä¸­æ˜¯å¦æ³¨å†Œæœ‰ CommandLineRunnerï¼Œå¦‚æœæœ‰ï¼Œåˆ™éå†æ‰§è¡Œå®ƒä»¬ã€‚&lt;/p>
&lt;p>&lt;strong>13ï¼‰&lt;/strong> æ­£å¸¸æƒ…å†µä¸‹ï¼Œéå†æ‰§è¡Œ SpringApplicationRunListener çš„ finished()æ–¹æ³•ã€ï¼ˆå¦‚æœæ•´ä¸ªè¿‡ç¨‹å‡ºç°å¼‚å¸¸ï¼Œåˆ™ä¾ç„¶è°ƒç”¨æ‰€æœ‰ SpringApplicationRunListener çš„ finished()æ–¹æ³•ï¼Œåªä¸è¿‡è¿™ç§æƒ…å†µä¸‹ä¼šå°†å¼‚å¸¸ä¿¡æ¯ä¸€å¹¶ä¼ å…¥å¤„ç†ï¼‰&lt;/p>
&lt;p>å»é™¤äº‹ä»¶é€šçŸ¥ç‚¹åï¼Œæ•´ä¸ªæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="http://7xqch5.com1.z0.glb.clouddn.com/springboot3-3.jpg"
loading="lazy"
>&lt;/p>
&lt;h2 id="3-å‚è€ƒèµ„æ–™">3 å‚è€ƒèµ„æ–™&lt;/h2>
&lt;p>&lt;a class="link" href="http://tengj.top/2017/04/24/springboot0/" target="_blank" rel="noopener"
>Spring Boot å¹²è´§ç³»åˆ—ï¼šï¼ˆä¸‰ï¼‰å¯åŠ¨åŸç†è§£æ&lt;/a>
&lt;a class="link" href="http://product.dangdang.com/23964779.html" target="_blank" rel="noopener"
>SpringBoot æ­ç§˜å¿«é€Ÿæ„å»ºä¸ºæœåŠ¡ä½“ç³»&lt;/a>&lt;/p></description></item><item><title>Spring Data Jpa å®æˆ˜</title><link>https://example.com/p/spring-data-jpa-%E5%AE%9E%E6%88%98/</link><pubDate>Sat, 24 Mar 2018 19:02:48 +0000</pubDate><guid>https://example.com/p/spring-data-jpa-%E5%AE%9E%E6%88%98/</guid><description>&lt;p>ä¸ºäº†è§£å†³æŠ½è±¡å„ä¸ª Java å®ä½“åŸºæœ¬çš„â€œå¢åˆ æ”¹æŸ¥â€æ“ä½œï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä»¥æ³›å‹çš„æ–¹å¼å°è£…ä¸€ä¸ªæ¨¡æ¿ Dao æ¥è¿›è¡ŒæŠ½è±¡ç®€åŒ–ï¼Œä½†æ˜¯è¿™æ ·ä¾ç„¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹æ¯ä¸ªå®ä½“ç¼–å†™ä¸€ä¸ªç»§æ‰¿è‡ªæ³›å‹æ¨¡æ¿ Dao çš„æ¥å£ï¼Œå†ç¼–å†™è¯¥æ¥å£çš„å®ç°ã€‚è™½ç„¶ä¸€äº›åŸºç¡€çš„æ•°æ®è®¿é—®å·²ç»å¯ä»¥å¾—åˆ°å¾ˆå¥½çš„å¤ç”¨ï¼Œä½†æ˜¯åœ¨ä»£ç ç»“æ„ä¸Šé’ˆå¯¹æ¯ä¸ªå®ä½“éƒ½ä¼šæœ‰ä¸€å † Dao çš„æ¥å£å’Œå®ç°ã€‚&lt;/p>
&lt;p>ç”±äºæ¨¡æ¿ Dao çš„å®ç°ï¼Œä½¿å¾—è¿™äº›å…·ä½“å®ä½“çš„ Dao å±‚å·²ç»å˜çš„éå¸¸â€œè–„â€ï¼Œæœ‰ä¸€äº›å…·ä½“å®ä½“çš„ Dao å®ç°å¯èƒ½å®Œå…¨å°±æ˜¯å¯¹æ¨¡æ¿ Dao çš„ç®€å•ä»£ç†ï¼Œå¹¶ä¸”å¾€å¾€è¿™æ ·çš„å®ç°ç±»å¯èƒ½ä¼šå‡ºç°åœ¨å¾ˆå¤šå®ä½“ä¸Šã€‚Spring-data-jpa çš„å‡ºç°æ­£å¯ä»¥è®©è¿™æ ·ä¸€ä¸ªå·²ç»å¾ˆâ€œè–„â€çš„æ•°æ®è®¿é—®å±‚å˜æˆåªæ˜¯ä¸€å±‚æ¥å£çš„ç¼–å†™æ–¹å¼ã€‚&lt;/p>
&lt;h2 id="1-å·¥ç¨‹é…ç½®">1 å·¥ç¨‹é…ç½®&lt;/h2>
&lt;h3 id="11-pom">1.1 pom&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;project&lt;/span> &lt;span class="na">xmlns=&lt;/span>&lt;span class="s">&amp;#34;http://maven.apache.org/POM/4.0.0&amp;#34;&lt;/span> &lt;span class="na">xmlns:xsi=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">xsi:schemaLocation=&lt;/span>&lt;span class="s">&amp;#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;modelVersion&amp;gt;&lt;/span>4.0.0&lt;span class="nt">&amp;lt;/modelVersion&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>com.example&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>jpa-demo&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;version&amp;gt;&lt;/span>0.0.1-SNAPSHOT&lt;span class="nt">&amp;lt;/version&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;packaging&amp;gt;&lt;/span>jar&lt;span class="nt">&amp;lt;/packaging&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;name&amp;gt;&lt;/span>jpa-demo&lt;span class="nt">&amp;lt;/name&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;description&amp;gt;&lt;/span>Demo project for Spring Boot&lt;span class="nt">&amp;lt;/description&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-parent&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;version&amp;gt;&lt;/span>1.5.9.RELEASE&lt;span class="nt">&amp;lt;/version&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;relativePath/&amp;gt;&lt;/span> &lt;span class="c">&amp;lt;!-- lookup parent from repository --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/parent&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;properties&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;project.build.sourceEncoding&amp;gt;&lt;/span>UTF-8&lt;span class="nt">&amp;lt;/project.build.sourceEncoding&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;project.reporting.outputEncoding&amp;gt;&lt;/span>UTF-8&lt;span class="nt">&amp;lt;/project.reporting.outputEncoding&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;java.version&amp;gt;&lt;/span>1.8&lt;span class="nt">&amp;lt;/java.version&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/properties&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;dependencies&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-data-jpa&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-web&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>mysql&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>mysql-connector-java&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;scope&amp;gt;&lt;/span>runtime&lt;span class="nt">&amp;lt;/scope&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.projectlombok&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>lombok&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;optional&amp;gt;&lt;/span>true&lt;span class="nt">&amp;lt;/optional&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-test&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;scope&amp;gt;&lt;/span>test&lt;span class="nt">&amp;lt;/scope&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/dependencies&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;build&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;plugins&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;plugin&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-maven-plugin&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/plugin&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/plugins&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/build&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/project&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="12-applicationproperties">1.2 application.properties&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">spring.datasource.url=jdbc:mysql://localhost:3306/test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.username=root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.password=root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.driver-class-name=com.mysql.jdbc.Driver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.jpa.properties.hibernate.hbm2ddl.auto=create-drop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>spring.jpa.properties.hibernate.hbm2ddl.auto&lt;/code>æ˜¯ hibernate çš„é…ç½®å±æ€§ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯ï¼šè‡ªåŠ¨åˆ›å»ºã€æ›´æ–°ã€éªŒè¯æ•°æ®åº“è¡¨ç»“æ„ã€‚è¯¥å‚æ•°çš„å‡ ç§é…ç½®å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>create&lt;/code>ï¼šæ¯æ¬¡åŠ è½½ hibernate æ—¶éƒ½ä¼šåˆ é™¤ä¸Šä¸€æ¬¡çš„ç”Ÿæˆçš„è¡¨ï¼Œç„¶åæ ¹æ®ä½ çš„ model ç±»å†é‡æ–°æ¥ç”Ÿæˆæ–°è¡¨ï¼Œå“ªæ€•ä¸¤æ¬¡æ²¡æœ‰ä»»ä½•æ”¹å˜ä¹Ÿè¦è¿™æ ·æ‰§è¡Œï¼Œè¿™å°±æ˜¯å¯¼è‡´æ•°æ®åº“è¡¨æ•°æ®ä¸¢å¤±çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚&lt;/li>
&lt;li>&lt;code>create-drop&lt;/code>ï¼šæ¯æ¬¡åŠ è½½ hibernate æ—¶æ ¹æ® model ç±»ç”Ÿæˆè¡¨ï¼Œä½†æ˜¯ sessionFactory ä¸€å…³é—­,è¡¨å°±è‡ªåŠ¨åˆ é™¤ã€‚&lt;/li>
&lt;li>&lt;code>update&lt;/code>ï¼šæœ€å¸¸ç”¨çš„å±æ€§ï¼Œç¬¬ä¸€æ¬¡åŠ è½½ hibernate æ—¶æ ¹æ® model ç±»ä¼šè‡ªåŠ¨å»ºç«‹èµ·è¡¨çš„ç»“æ„ï¼ˆå‰ææ˜¯å…ˆå»ºç«‹å¥½æ•°æ®åº“ï¼‰ï¼Œä»¥ååŠ è½½ hibernate æ—¶æ ¹æ® model ç±»è‡ªåŠ¨æ›´æ–°è¡¨ç»“æ„ï¼Œå³ä½¿è¡¨ç»“æ„æ”¹å˜äº†ä½†è¡¨ä¸­çš„è¡Œä»ç„¶å­˜åœ¨ä¸ä¼šåˆ é™¤ä»¥å‰çš„è¡Œã€‚è¦æ³¨æ„çš„æ˜¯å½“éƒ¨ç½²åˆ°æœåŠ¡å™¨åï¼Œè¡¨ç»“æ„æ˜¯ä¸ä¼šè¢«é©¬ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œæ˜¯è¦ç­‰åº”ç”¨ç¬¬ä¸€æ¬¡è¿è¡Œèµ·æ¥åæ‰ä¼šã€‚&lt;/li>
&lt;li>&lt;code>validate&lt;/code>ï¼šæ¯æ¬¡åŠ è½½ hibernate æ—¶ï¼ŒéªŒè¯åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼Œåªä¼šå’Œæ•°æ®åº“ä¸­çš„è¡¨è¿›è¡Œæ¯”è¾ƒï¼Œä¸ä¼šåˆ›å»ºæ–°è¡¨ï¼Œä½†æ˜¯ä¼šæ’å…¥æ–°å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="2-å®ä½“ç±»">2 å®ä½“ç±»&lt;/h2>
&lt;p>åˆ›å»ºä¸€ä¸ª User å®ä½“ï¼ŒåŒ…å« idï¼ˆä¸»é”®ï¼‰ã€nameï¼ˆå§“åï¼‰ã€ageï¼ˆå¹´é¾„ï¼‰å±æ€§ï¼Œé€šè¿‡ ORM æ¡†æ¶å…¶ä¼šè¢«æ˜ å°„åˆ°æ•°æ®åº“è¡¨ä¸­ï¼Œç”±äºé…ç½®äº†&lt;code>hibernate.hbm2ddl.auto&lt;/code>ï¼Œåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™æ¡†æ¶ä¼šè‡ªåŠ¨å»æ•°æ®åº“ä¸­åˆ›å»ºå¯¹åº”çš„è¡¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@NoArgsConstructor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Entity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class Users {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Id
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @GeneratedValue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private Long id;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Column(nullable = false)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private String name;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Column(nullable = false)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private Integer age;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public Users(String name, Integer age) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> this.name = name;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> this.age = age;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="3-repository">3 repository&lt;/h2>
&lt;p>é’ˆå¯¹ User å®ä½“åˆ›å»ºå¯¹åº”çš„&lt;code>Repository&lt;/code>æ¥å£å®ç°å¯¹è¯¥å®ä½“çš„æ•°æ®è®¿é—®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public interface UsersRepository extends JpaRepository&amp;lt;Users, Long&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Users findByName(String name);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Users findByNameAndAge(String name, Integer age);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Query(&amp;#34;from Users u where u.name=:name&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Users findUser(@Param(&amp;#34;name&amp;#34;) String name);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ Spring-data-jpa ä¸­ï¼Œåªéœ€è¦ç¼–å†™ç±»ä¼¼ä¸Šé¢è¿™æ ·çš„æ¥å£å°±å¯å®ç°æ•°æ®è®¿é—®ã€‚ä¸å†åƒæˆ‘ä»¬ä»¥å¾€ç¼–å†™äº†æ¥å£æ—¶å€™è¿˜éœ€è¦è‡ªå·±ç¼–å†™æ¥å£å®ç°ç±»ï¼Œç›´æ¥å‡å°‘äº†æˆ‘ä»¬çš„æ–‡ä»¶æ¸…å•ã€‚&lt;/p>
&lt;p>ä¸‹é¢å¯¹ä¸Šé¢çš„&lt;code>UserRepository&lt;/code>åšä¸€äº›è§£é‡Šï¼Œè¯¥æ¥å£ç»§æ‰¿è‡ª&lt;code>JpaRepository&lt;/code>ï¼Œé€šè¿‡æŸ¥çœ‹&lt;code>JpaRepository&lt;/code>æ¥å£çš„&lt;a class="link" href="http://docs.spring.io/spring-data/data-jpa/docs/current/api/" target="_blank" rel="noopener"
>API æ–‡æ¡£&lt;/a>ï¼Œå¯ä»¥çœ‹åˆ°è¯¥æ¥å£æœ¬èº«å·²ç»å®ç°äº†åˆ›å»ºï¼ˆsaveï¼‰ã€æ›´æ–°ï¼ˆsaveï¼‰ã€åˆ é™¤ï¼ˆdeleteï¼‰ã€æŸ¥è¯¢ï¼ˆfindAllã€findOneï¼‰ç­‰åŸºæœ¬æ“ä½œçš„å‡½æ•°ï¼Œå› æ­¤å¯¹äºè¿™äº›åŸºç¡€æ“ä½œçš„æ•°æ®è®¿é—®å°±ä¸éœ€è¦å¼€å‘è€…å†è‡ªå·±å®šä¹‰ã€‚&lt;/p>
&lt;p>åœ¨ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹é¢ä¸¤ä¸ªå‡½æ•°ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>User findByName(String name)&lt;/code>&lt;/li>
&lt;li>&lt;code>User findByNameAndAge(String name, Integer age)&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>å®ƒä»¬åˆ†åˆ«å®ç°äº†æŒ‰ name æŸ¥è¯¢ User å®ä½“å’ŒæŒ‰ name å’Œ age æŸ¥è¯¢ User å®ä½“ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰ä»»ä½•ç±» SQL è¯­å¥å°±å®Œæˆäº†ä¸¤ä¸ªæ¡ä»¶æŸ¥è¯¢æ–¹æ³•ã€‚è¿™å°±æ˜¯ Spring-data-jpa çš„ä¸€å¤§ç‰¹æ€§ï¼š&lt;strong>é€šè¿‡è§£ææ–¹æ³•ååˆ›å»ºæŸ¥è¯¢&lt;/strong>ã€‚&lt;/p>
&lt;p>é™¤äº†é€šè¿‡è§£ææ–¹æ³•åæ¥åˆ›å»ºæŸ¥è¯¢å¤–ï¼Œå®ƒä¹Ÿæä¾›é€šè¿‡ä½¿ç”¨@Query æ³¨è§£æ¥åˆ›å»ºæŸ¥è¯¢ï¼Œæ‚¨åªéœ€è¦ç¼–å†™ JPQL è¯­å¥ï¼Œå¹¶é€šè¿‡ç±»ä¼¼â€œ:nameâ€æ¥æ˜ å°„@Param æŒ‡å®šçš„å‚æ•°ï¼Œå°±åƒä¾‹å­ä¸­çš„ç¬¬ä¸‰ä¸ª findUser å‡½æ•°ä¸€æ ·ã€‚&lt;/p>
&lt;h2 id="4-å•å…ƒæµ‹è¯•">4 å•å…ƒæµ‹è¯•&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@RunWith(SpringRunner.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@SpringBootTest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class JpaDemoApplicationTests {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private UsersRepository usersRepository;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void contextLoads() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void testJPA() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // åˆ›å»º10æ¡è®°å½•
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;AAA&amp;#34;, 10));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;BBB&amp;#34;, 20));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;CCC&amp;#34;, 30));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;DDD&amp;#34;, 40));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;EEE&amp;#34;, 50));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;FFF&amp;#34;, 60));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;GGG&amp;#34;, 70));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;HHH&amp;#34;, 80));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;III&amp;#34;, 90));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.save(new Users(&amp;#34;JJJ&amp;#34;, 100));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // æµ‹è¯•findAll, æŸ¥è¯¢æ‰€æœ‰è®°å½•
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(10, usersRepository.findAll().size());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // æµ‹è¯•findByName, æŸ¥è¯¢å§“åä¸ºFFFçš„User
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(60, usersRepository.findByName(&amp;#34;FFF&amp;#34;).getAge().longValue());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // æµ‹è¯•findUser, æŸ¥è¯¢å§“åä¸ºFFFçš„User
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(60, usersRepository.findUser(&amp;#34;FFF&amp;#34;).getAge().longValue());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // æµ‹è¯•findByNameAndAge, æŸ¥è¯¢å§“åä¸ºFFFå¹¶ä¸”å¹´é¾„ä¸º60çš„User
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(&amp;#34;FFF&amp;#34;, usersRepository.findByNameAndAge(&amp;#34;FFF&amp;#34;, 60).getName());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // æµ‹è¯•åˆ é™¤å§“åä¸ºAAAçš„User
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usersRepository.delete(usersRepository.findByName(&amp;#34;AAA&amp;#34;));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // æµ‹è¯•findAll, æŸ¥è¯¢æ‰€æœ‰è®°å½•, éªŒè¯ä¸Šé¢çš„åˆ é™¤æ˜¯å¦æˆåŠŸ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(9, usersRepository.findAll().size());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="5-å‚è€ƒèµ„æ–™">5 å‚è€ƒèµ„æ–™&lt;/h2>
&lt;p>&lt;a class="link" href="http://www.spring4all.com/article/252" target="_blank" rel="noopener"
>Spring Boot ä½¿ç”¨ Spring-data-jpa ç®€åŒ–æ•°æ®è®¿é—®å±‚&lt;/a>&lt;/p></description></item><item><title>spring boot å¤šæ•°æ®æºé…ç½®</title><link>https://example.com/p/spring-boot-%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE/</link><pubDate>Sat, 24 Mar 2018 19:01:37 +0000</pubDate><guid>https://example.com/p/spring-boot-%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE/</guid><description>&lt;h1 id="spring-boot-å¤šæ•°æ®æºé…ç½®">spring boot å¤šæ•°æ®æºé…ç½®&lt;/h1>
&lt;p>åœ¨å•æ•°æ®æºçš„æƒ…å†µä¸‹ï¼ŒSpring Boot çš„é…ç½®éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ application.properties æ–‡ä»¶ä¸­é…ç½®è¿æ¥å‚æ•°å³å¯ã€‚ä½†æ˜¯å¾€å¾€éšç€ä¸šåŠ¡é‡å‘å±•ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¿›è¡Œæ•°æ®åº“æ‹†åˆ†æˆ–æ˜¯å¼•å…¥å…¶ä»–æ•°æ®åº“ï¼Œä»è€Œæˆ‘ä»¬éœ€è¦é…ç½®å¤šä¸ªæ•°æ®æºã€‚&lt;/p>
&lt;h2 id="1-å‡†å¤‡">1 å‡†å¤‡&lt;/h2>
&lt;h3 id="11-ç¦æ­¢-datasourceautoconfiguration">1.1 ç¦æ­¢ DataSourceAutoConfiguration&lt;/h3>
&lt;p>é¦–å…ˆè¦å°† spring boot è‡ªå¸¦çš„&lt;code>DataSourceAutoConfiguration&lt;/code>ç¦æ‰ï¼Œå› ä¸ºå®ƒä¼šè¯»å–&lt;code>application.properties&lt;/code>æ–‡ä»¶çš„&lt;code>spring.datasource.*&lt;/code>å±æ€§å¹¶è‡ªåŠ¨é…ç½®å•æ•°æ®æºã€‚åœ¨&lt;code>@SpringBootApplication&lt;/code>æ³¨è§£ä¸­æ·»åŠ &lt;code>exclude&lt;/code>å±æ€§å³å¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class DemoApplication {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static void main(String[] args) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SpringApplication.run(JpaDemoApplication.class, args);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="12-é…ç½®æ•°æ®åº“è¿æ¥">1.2 é…ç½®æ•°æ®åº“è¿æ¥&lt;/h3>
&lt;p>ç„¶ååœ¨&lt;code>application.properties&lt;/code>ä¸­é…ç½®å¤šæ•°æ®æºè¿æ¥ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">spring.datasource.primary.url=jdbc:mysql://localhost:3306/test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.primary.username=root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.primary.password=root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.primary.driver-class-name=com.mysql.jdbc.Driver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.secondary.url=jdbc:mysql://localhost:3306/test1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.secondary.username=root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.secondary.password=root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.datasource.secondary.driver-class-name=com.mysql.jdbc.Driver
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="13-æ‰‹æ®µåˆ›å»ºæ•°æ®æº">1.3 æ‰‹æ®µåˆ›å»ºæ•°æ®æº&lt;/h3>
&lt;p>ç”±äºæˆ‘ä»¬ç¦æ‰äº†è‡ªåŠ¨æ•°æ®æºé…ç½®ï¼Œå› äº›ä¸‹ä¸€æ­¥å°±éœ€è¦æ‰‹åŠ¨å°†è¿™äº›æ•°æ®æºåˆ›å»ºå‡ºæ¥ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class DataSourceConfig {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean(name = &amp;#34;primaryDataSource&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// @Qualifier(value = &amp;#34;primaryDataSource&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @ConfigurationProperties(prefix = &amp;#34;spring.datasource.primary&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public DataSource primaryDataSource(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return DataSourceBuilder.create().build();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean(name = &amp;#34;secondaryDataSource&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// @Qualifier(value = &amp;#34;secondaryDataSource&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @ConfigurationProperties(prefix = &amp;#34;spring.datasource.secondary&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public DataSource secondaryDataSource() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return DataSourceBuilder.create().build();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="2-jdbctemplate-å¤šæ•°æ®æº">2 jdbcTemplate å¤šæ•°æ®æº&lt;/h2>
&lt;h3 id="21-jdbctemplate-çš„æ•°æ®æºé…ç½®">2.1 jdbcTemplate çš„æ•°æ®æºé…ç½®&lt;/h3>
&lt;p>æ–°å»º jdbcTemplate çš„æ•°æ®æºé…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class JdbcTemplateConfig {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean(name = &amp;#34;primaryJdbcTemplate&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public JdbcTemplate primaryJdbcTemplate(
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Qualifier(&amp;#34;primaryDataSource&amp;#34;) DataSource dataSource) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return new JdbcTemplate(dataSource);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean(name = &amp;#34;secondaryJdbcTemplate&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public JdbcTemplate secondaryJdbcTemplate(
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Qualifier(&amp;#34;secondaryDataSource&amp;#34;) DataSource dataSource) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return new JdbcTemplate(dataSource);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="22-å•å…ƒæµ‹è¯•">2.2 å•å…ƒæµ‹è¯•&lt;/h3>
&lt;p>ç„¶åç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@RunWith(SpringRunner.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@SpringBootTest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class JpaDemoApplicationTests {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Qualifier(&amp;#34;primaryJdbcTemplate&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protected JdbcTemplate jdbcTemplate1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Qualifier(&amp;#34;secondaryJdbcTemplate&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protected JdbcTemplate jdbcTemplate2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void testJdbc() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // å¾€ç¬¬ä¸€ä¸ªæ•°æ®æºä¸­æ’å…¥ä¸¤æ¡æ•°æ®
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> jdbcTemplate1.update(&amp;#34;insert into users(id,name,age) values(?, ?, ?)&amp;#34;, 1, &amp;#34;aaa&amp;#34;, 20);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> jdbcTemplate1.update(&amp;#34;insert into users(id,name,age) values(?, ?, ?)&amp;#34;, 2, &amp;#34;bbb&amp;#34;, 30);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // å¾€ç¬¬äºŒä¸ªæ•°æ®æºä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œè‹¥æ’å…¥çš„æ˜¯ç¬¬ä¸€ä¸ªæ•°æ®æºï¼Œåˆ™ä¼šä¸»é”®å†²çªæŠ¥é”™
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> jdbcTemplate2.update(&amp;#34;insert into users(id,name,age) values(?, ?, ?)&amp;#34;, 1, &amp;#34;aaa&amp;#34;, 20);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // æŸ¥ä¸€ä¸‹ç¬¬ä¸€ä¸ªæ•°æ®æºä¸­æ˜¯å¦æœ‰ä¸¤æ¡æ•°æ®ï¼ŒéªŒè¯æ’å…¥æ˜¯å¦æˆåŠŸ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(&amp;#34;2&amp;#34;, jdbcTemplate1.queryForObject(&amp;#34;select count(1) from users&amp;#34;, String.class));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // æŸ¥ä¸€ä¸‹ç¬¬ä¸€ä¸ªæ•°æ®æºä¸­æ˜¯å¦æœ‰ä¸¤æ¡æ•°æ®ï¼ŒéªŒè¯æ’å…¥æ˜¯å¦æˆåŠŸ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(&amp;#34;1&amp;#34;, jdbcTemplate2.queryForObject(&amp;#34;select count(1) from users&amp;#34;, String.class));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void contextLoads() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="3-mybatis-å¤šæ•°æ®æºé…ç½®">3 mybatis å¤šæ•°æ®æºé…ç½®&lt;/h2>
&lt;h3 id="31-è‡ªå®šä¹‰-sqlsessionfactory">3.1 è‡ªå®šä¹‰ SqlSessionFactory&lt;/h3>
&lt;p>æ–°å»ºä¸¤ä¸ª mybatis çš„ SqlSessionFactory é…ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@MapperScan(basePackages = {&amp;#34;com.example.jpademo.primary.mapper&amp;#34;}, sqlSessionFactoryRef = &amp;#34;sqlSessionFactory1&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class MybatisPrimaryConfig {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Qualifier(&amp;#34;primaryDataSource&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private DataSource primaryDataSource;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public SqlSessionFactory sqlSessionFactory1() throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // ä½¿ç”¨primaryDataSourceæ•°æ®æº
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> factoryBean.setDataSource(primaryDataSource);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return factoryBean.getObject();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public SqlSessionTemplate sqlSessionTemplate1() throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // ä½¿ç”¨ä¸Šé¢é…ç½®çš„Factory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SqlSessionTemplate template = new SqlSessionTemplate(sqlSessionFactory1());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return template;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·ï¼Œ&lt;code>com.example.jpademo.primary.mapper&lt;/code>åŒ…ä¸‹çš„æ‰€æœ‰ mapper å°±ä¼šç”¨&lt;code>sqlSessionFactory1&lt;/code>ã€‚åŒç†å¯ä»¥åˆ›å»º&lt;/p>
&lt;p>&lt;code>sqlSessionFactory2&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@MapperScan(basePackages = {&amp;#34;com.example.jpademo.secondary.mapper&amp;#34;}, sqlSessionFactoryRef = &amp;#34;sqlSessionFactory2&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class MybatisSecondaryConfig {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Qualifier(&amp;#34;secondaryDataSource&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private DataSource secondaryDataSource;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public SqlSessionFactory sqlSessionFactory2() throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // ä½¿ç”¨primaryDataSourceæ•°æ®æº
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> factoryBean.setDataSource(secondaryDataSource);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return factoryBean.getObject();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Bean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public SqlSessionTemplate sqlSessionTemplate1() throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // ä½¿ç”¨ä¸Šé¢é…ç½®çš„Factory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SqlSessionTemplate template = new SqlSessionTemplate(sqlSessionFactory2());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return template;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="32-mapper-å’Œå®ä½“ç±»">3.2 mapper å’Œå®ä½“ç±»&lt;/h3>
&lt;p>ç„¶åç¼–å†™ mapper å’Œå®ä½“ç±»ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class User {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private Integer id;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private String name;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private Integer age;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package com.example.jpademo.primary.mapper;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import com.example.jpademo.domain.User;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import org.apache.ibatis.annotations.Mapper;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import org.apache.ibatis.annotations.Param;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import org.apache.ibatis.annotations.Select;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import org.springframework.beans.factory.annotation.Qualifier;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Mapper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Qualifier(&amp;#34;userMapper1&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public interface UserMapper1 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Select(&amp;#34;select * from users where id=#{id}&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> User findById(@Param(&amp;#34;id&amp;#34;) Integer id);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package com.example.jpademo.secondary.mapper;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import com.example.jpademo.domain.User;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import org.apache.ibatis.annotations.Mapper;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import org.apache.ibatis.annotations.Select;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import org.springframework.beans.factory.annotation.Qualifier;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Mapper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@Qualifier(&amp;#34;userMapper2&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public interface UserMapper2 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Select(&amp;#34;select * from users where id=#{id}&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> User findById(Integer id);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="33-å•å…ƒæµ‹è¯•">3.3 å•å…ƒæµ‹è¯•&lt;/h3>
&lt;p>ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@RunWith(SpringRunner.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@SpringBootTest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class JpaDemoApplicationTests {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private UserMapper1 userMapper1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private UserMapper2 userMapper2;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void testMybatis() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> User user1 = userMapper1.findById(1);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> User user2 = userMapper2.findById(1);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(&amp;#34;aaa&amp;#34;, user1.getName());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(&amp;#34;ccc&amp;#34;, user2.getName());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="4-å‚è€ƒèµ„æ–™">4 å‚è€ƒèµ„æ–™&lt;/h2>
&lt;p>&lt;a class="link" href="http://blog.csdn.net/neosmith/article/details/61202084" target="_blank" rel="noopener"
>Spring Boot + Mybatis å¤šæ•°æ®æºå’ŒåŠ¨æ€æ•°æ®æºé…ç½®&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://www.spring4all.com/article/253" target="_blank" rel="noopener"
>Spring Boot ä¸¤ç§å¤šæ•°æ®æºé…ç½®ï¼šJdbcTemplateã€Spring-data-jpa&lt;/a>&lt;/p></description></item><item><title>spring boot è¿æ¥ redis</title><link>https://example.com/p/spring-boot-%E8%BF%9E%E6%8E%A5-redis/</link><pubDate>Sat, 24 Mar 2018 19:00:48 +0000</pubDate><guid>https://example.com/p/spring-boot-%E8%BF%9E%E6%8E%A5-redis/</guid><description>&lt;p>&lt;strong>Spring-data-redis&lt;/strong>ä¸º spring-data æ¨¡å—ä¸­å¯¹ redis çš„æ”¯æŒéƒ¨åˆ†ï¼Œç®€ç§°ä¸ºâ€œSDRâ€ï¼Œæä¾›äº†åŸºäº jedis å®¢æˆ·ç«¯ API çš„é«˜åº¦å°è£…ä»¥åŠä¸ spring å®¹å™¨çš„æ•´åˆï¼Œ&lt;/p>
&lt;p>jedis å®¢æˆ·ç«¯åœ¨ç¼–ç¨‹å®æ–½æ–¹é¢å­˜åœ¨å¦‚ä¸‹ä¸è¶³ï¼š&lt;/p>
&lt;ul>
&lt;li>connection ç®¡ç†ç¼ºä¹è‡ªåŠ¨åŒ–ï¼Œconnection-pool çš„è®¾è®¡ç¼ºå°‘å¿…è¦çš„å®¹å™¨æ”¯æŒã€‚&lt;/li>
&lt;li>æ•°æ®æ“ä½œéœ€è¦å…³æ³¨â€œåºåˆ—åŒ–â€/â€œååºåˆ—åŒ–â€ï¼Œå› ä¸º jedis çš„å®¢æˆ·ç«¯ API æ¥å—çš„æ•°æ®ç±»å‹ä¸º string å’Œ byteï¼Œå¯¹ç»“æ„åŒ–æ•°æ®(json,xml,pojo ç­‰)æ“ä½œéœ€è¦é¢å¤–çš„æ”¯æŒã€‚&lt;/li>
&lt;li>äº‹åŠ¡æ“ä½œçº¯ç²¹ä¸ºç¡¬ç¼–ç &lt;/li>
&lt;li>pub/sub åŠŸèƒ½ï¼Œç¼ºä¹å¿…è¦çš„è®¾è®¡æ¨¡å¼æ”¯æŒï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€éœ€è¦å…³æ³¨çš„å¤ªå¤šã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="1-spring-data-redis-ç‰¹æ€§">1 spring-data-redis ç‰¹æ€§&lt;/h2>
&lt;ol>
&lt;li>è¿æ¥æ± è‡ªåŠ¨ç®¡ç†ï¼Œæä¾›äº†ä¸€ä¸ªé«˜åº¦å°è£…çš„â€œRedisTemplateâ€ç±»&lt;/li>
&lt;li>é’ˆå¯¹ jedis å®¢æˆ·ç«¯ä¸­å¤§é‡ api è¿›è¡Œäº†å½’ç±»å°è£…,å°†åŒä¸€ç±»å‹æ“ä½œå°è£…ä¸º operation æ¥å£
&lt;ul>
&lt;li>&lt;code>ValueOperations&lt;/code>ï¼šç®€å• K-V æ“ä½œ&lt;/li>
&lt;li>&lt;code>SetOperations&lt;/code>ï¼šset ç±»å‹æ•°æ®æ“ä½œ&lt;/li>
&lt;li>&lt;code>ZSetOperations&lt;/code>ï¼šzset ç±»å‹æ•°æ®æ“ä½œ&lt;/li>
&lt;li>&lt;code>HashOperations&lt;/code>ï¼šé’ˆå¯¹ map ç±»å‹çš„æ•°æ®æ“ä½œ&lt;/li>
&lt;li>&lt;code>ListOperations&lt;/code>ï¼šé’ˆå¯¹ list ç±»å‹çš„æ•°æ®æ“ä½œ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æä¾›äº†å¯¹ key çš„â€œboundâ€(ç»‘å®š)ä¾¿æ·åŒ–æ“ä½œ APIï¼Œå¯ä»¥é€šè¿‡ bound å°è£…æŒ‡å®šçš„ keyï¼Œç„¶åè¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œè€Œæ— é¡»â€œæ˜¾å¼â€çš„å†æ¬¡æŒ‡å®š Keyï¼Œå³ BoundKeyOperationsï¼š
&lt;ul>
&lt;li>&lt;code>BoundValueOperations&lt;/code>&lt;/li>
&lt;li>&lt;code>BoundSetOperations&lt;/code>&lt;/li>
&lt;li>&lt;code>BoundListOperations&lt;/code>&lt;/li>
&lt;li>&lt;code>BoundSetOperations&lt;/code>&lt;/li>
&lt;li>&lt;code>BoundHashOperations&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å°†äº‹åŠ¡æ“ä½œå°è£…ï¼Œæœ‰å®¹å™¨æ§åˆ¶ã€‚&lt;/li>
&lt;li>é’ˆå¯¹æ•°æ®çš„â€œåºåˆ—åŒ–/ååºåˆ—åŒ–â€ï¼Œæä¾›äº†å¤šç§å¯é€‰æ‹©ç­–ç•¥(RedisSerializer)
&lt;ul>
&lt;li>&lt;code>JdkSerializationRedisSerializer&lt;/code>ï¼šPOJO å¯¹è±¡çš„å­˜å–åœºæ™¯ï¼Œä½¿ç”¨ JDK æœ¬èº«åºåˆ—åŒ–æœºåˆ¶ï¼Œå°† pojo ç±»é€šè¿‡ ObjectInputStream/ObjectOutputStream è¿›è¡Œåºåˆ—åŒ–æ“ä½œï¼Œæœ€ç»ˆ redis-server ä¸­å°†å­˜å‚¨å­—èŠ‚åºåˆ—ã€‚æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„åºåˆ—åŒ–ç­–ç•¥ã€‚&lt;/li>
&lt;li>&lt;code>StringRedisSerializer&lt;/code>ï¼šKey æˆ–è€… value ä¸ºå­—ç¬¦ä¸²çš„åœºæ™¯ï¼Œæ ¹æ®æŒ‡å®šçš„ charset å¯¹æ•°æ®çš„å­—èŠ‚åºåˆ—ç¼–ç æˆ stringï¼Œæ˜¯â€œnew String(bytes, charset)â€å’Œâ€œstring.getBytes(charset)â€çš„ç›´æ¥å°è£…ã€‚æ˜¯æœ€è½»é‡çº§å’Œé«˜æ•ˆçš„ç­–ç•¥ã€‚&lt;/li>
&lt;li>&lt;code>JacksonJsonRedisSerializer&lt;/code>ï¼šjackson-json å·¥å…·æä¾›äº† javabean ä¸ json ä¹‹é—´çš„è½¬æ¢èƒ½åŠ›ï¼Œå¯ä»¥å°† pojo å®ä¾‹åºåˆ—åŒ–æˆ json æ ¼å¼å­˜å‚¨åœ¨ redis ä¸­ï¼Œä¹Ÿå¯ä»¥å°† json æ ¼å¼çš„æ•°æ®è½¬æ¢æˆ pojo å®ä¾‹ã€‚å› ä¸º jackson å·¥å…·åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶ï¼Œéœ€è¦æ˜ç¡®æŒ‡å®š Class ç±»å‹ï¼Œå› æ­¤æ­¤ç­–ç•¥å°è£…èµ·æ¥ç¨å¾®å¤æ‚ã€‚&lt;/li>
&lt;li>&lt;code>OxmSerializer&lt;/code>ï¼šæä¾›äº†å°† javabean ä¸ xml ä¹‹é—´çš„è½¬æ¢èƒ½åŠ›ï¼Œç›®å‰å¯ç”¨çš„ä¸‰æ–¹æ”¯æŒåŒ…æ‹¬ jaxbï¼Œapache-xmlbeansï¼›redis å­˜å‚¨çš„æ•°æ®å°†æ˜¯ xml å·¥å…·ã€‚ä¸è¿‡ä½¿ç”¨æ­¤ç­–ç•¥ï¼Œç¼–ç¨‹å°†ä¼šæœ‰äº›éš¾åº¦ï¼Œè€Œä¸”æ•ˆç‡æœ€ä½ï¼›ä¸å»ºè®®ä½¿ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>åŸºäºè®¾è®¡æ¨¡å¼ï¼Œå’Œ JMS å¼€å‘æ€è·¯ï¼Œå°† pub/sub çš„ API è®¾è®¡è¿›è¡Œäº†å°è£…ï¼Œä½¿å¼€å‘æ›´åŠ ä¾¿æ·ã€‚&lt;/li>
&lt;li>spring-data-redis ä¸­ï¼Œå¹¶æ²¡æœ‰å¯¹ sharding æä¾›è‰¯å¥½çš„å°è£…ï¼Œå¦‚æœä½ çš„æ¶æ„æ˜¯åŸºäº shardingï¼Œé‚£ä¹ˆä½ éœ€è¦è‡ªå·±å»å®ç°ï¼Œè¿™ä¹Ÿæ˜¯ sdr å’Œ jedis ç›¸æ¯”ï¼Œå”¯ä¸€ç¼ºå°‘çš„ç‰¹æ€§ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="2-å¼•å…¥ä¾èµ–">2 å¼•å…¥ä¾èµ–&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span class="nt">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-data-redis&lt;span class="nt">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="3-é…ç½®">3 é…ç½®&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># REDIS (RedisProperties)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Redisæ•°æ®åº“ç´¢å¼•ï¼ˆé»˜è®¤ä¸º0ï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.redis.database=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># RedisæœåŠ¡å™¨åœ°å€
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.redis.host=localhost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># RedisæœåŠ¡å™¨è¿æ¥ç«¯å£
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.redis.port=6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># RedisæœåŠ¡å™¨è¿æ¥å¯†ç ï¼ˆé»˜è®¤ä¸ºç©ºï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.redis.password=root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.redis.pool.max-active=8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># è¿æ¥æ± æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.redis.pool.max-wait=-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.redis.pool.max-idle=8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.redis.pool.min-idle=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring.redis.timeout=0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ spring.redis.database çš„é…ç½®é€šå¸¸ä½¿ç”¨ 0 å³å¯ï¼ŒRedis åœ¨é…ç½®çš„æ—¶å€™å¯ä»¥è®¾ç½®æ•°æ®åº“æ•°é‡ï¼Œé»˜è®¤ä¸º 16ï¼Œå¯ä»¥ç†è§£ä¸ºæ•°æ®åº“çš„ schema&lt;/p>
&lt;h3 id="31-stringredistemplate">3.1 &lt;code>StringRedisTemplate&lt;/code>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@RunWith(SpringRunner.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@SpringBootTest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class DemoApplicationTests {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private StringRedisTemplate stringRedisTemplate;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void testRedis(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stringRedisTemplate.opsForValue().set(&amp;#34;myKey&amp;#34;, &amp;#34;hello redis&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(&amp;#34;hello redis&amp;#34;, stringRedisTemplate.opsForValue().get(&amp;#34;myKey&amp;#34;));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ä¸Šé¢è¿™æ®µæä¸ºç®€å•çš„æµ‹è¯•æ¡ˆä¾‹æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡è‡ªåŠ¨é…ç½®çš„ StringRedisTemplate å¯¹è±¡è¿›è¡Œ Redis çš„è¯»å†™æ“ä½œï¼Œè¯¥å¯¹è±¡ä»å‘½åä¸­å°±å¯æ³¨æ„åˆ°æ”¯æŒçš„æ˜¯ String ç±»å‹ã€‚å¦‚æœæœ‰ä½¿ç”¨è¿‡ spring-data-redis çš„å¼€å‘è€…ä¸€å®šç†Ÿæ‚‰ RedisTemplate&amp;lt;K, V&amp;gt;æ¥å£ï¼ŒStringRedisTemplate å°±ç›¸å½“äº RedisTemplate&amp;lt;String, String&amp;gt;çš„å®ç°ã€‚&lt;/p>
&lt;p>é™¤äº† String ç±»å‹ï¼Œæˆ‘ä»¬è¿˜ç»å¸¸ä¼šåœ¨ Redis ä¸­å­˜å‚¨å¯¹è±¡ã€‚&lt;/p>
&lt;h3 id="32-redistemplateobject-object">3.2 &lt;code>RedisTemplate&amp;lt;Object, Object&amp;gt;&lt;/code>&lt;/h3>
&lt;h4 id="321-æ–°å»º-user-ç±»">3.2.1 æ–°å»º User ç±»&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@AllArgsConstructor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class User implements Serializable{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private static final long serialVersionUID = 1L;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private Integer id;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private String username;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private Integer age;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="322-åˆ›å»º-userrepository">3.2.2 åˆ›å»º UserRepository&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class UserRepository {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private RedisTemplate&amp;lt;Object, Object&amp;gt; redisTemplate;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Resource(name = &amp;#34;redisTemplate&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ValueOperations&amp;lt;Object, Object&amp;gt; valOps;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /**
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * ä¿å­˜
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * @param user
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void save(User user) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> int id = user.getId();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> valOps.set(id, user);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /**
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * è·å–
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * @param id
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * @return
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public User getUserById(int id) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return (User) valOps.get(id);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>@Resource æ³¨è§£å’Œ@Autowired ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥æ ‡æ³¨åœ¨å­—æ®µæˆ–å±æ€§çš„ setter æ–¹æ³•ä¸Šï¼Œä½†å®ƒé»˜è®¤æŒ‰åç§°è£…é…ã€‚åç§°å¯ä»¥é€šè¿‡@Resource çš„ name å±æ€§æŒ‡å®šï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š name å±æ€§ï¼Œå½“æ³¨è§£æ ‡æ³¨åœ¨å­—æ®µä¸Šï¼Œå³é»˜è®¤å–å­—æ®µçš„åç§°ä½œä¸º bean åç§°å¯»æ‰¾ä¾èµ–å¯¹è±¡ï¼Œå½“æ³¨è§£æ ‡æ³¨åœ¨å±æ€§çš„ setter æ–¹æ³•ä¸Šï¼Œå³é»˜è®¤å–å±æ€§åä½œä¸º bean åç§°å¯»æ‰¾ä¾èµ–å¯¹è±¡ã€‚&lt;/p>
&lt;h4 id="323-å•å…ƒæµ‹è¯•">3.2.3 å•å…ƒæµ‹è¯•&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@RunWith(SpringRunner.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@SpringBootTest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class DemoApplicationTests {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Autowired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private UserRepository userRepository;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void testRedis(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> User user=new User(1, &amp;#34;hello&amp;#34;, 12);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> userRepository.save(user);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Assert.assertEquals(&amp;#34;hello&amp;#34;, userRepository.getUserById(1).getUsername());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="4-å‚è€ƒèµ„æ–™">4 å‚è€ƒèµ„æ–™&lt;/h2>
&lt;p>&lt;a class="link" href="http://blog.csdn.net/smartdt/article/details/78894013" target="_blank" rel="noopener"
>SpringBoot ä¹‹ Redis çš„æ”¯æŒ&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://shift-alt-ctrl.iteye.com/blog/1886831" target="_blank" rel="noopener"
>Spring-data-redis ç‰¹æ€§ä¸å®ä¾‹&lt;/a>&lt;/p></description></item><item><title>æœ€ç»ˆä¸€è‡´æ€§çš„å®ç°æ‰‹æ®µ</title><link>https://example.com/p/%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%89%8B%E6%AE%B5/</link><pubDate>Sat, 24 Mar 2018 18:59:55 +0000</pubDate><guid>https://example.com/p/%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%89%8B%E6%AE%B5/</guid><description>&lt;h1 id="æœ€ç»ˆä¸€è‡´æ€§çš„å®ç°æ‰‹æ®µ">æœ€ç»ˆä¸€è‡´æ€§çš„å®ç°æ‰‹æ®µ&lt;/h1>
&lt;p>å®ç°æœ€ç»ˆä¸€è‡´æ€§æœ‰ä¸‰ç§æ‰‹æ®µï¼šå¯é äº‹ä»¶æ¨¡å¼ã€ä¸šåŠ¡è¡¥å¿æ¨¡å¼å’Œ TCC æ¨¡å¼&lt;/p>
&lt;h2 id="1-å¯é äº‹ä»¶æ¨¡å¼">1 å¯é äº‹ä»¶æ¨¡å¼&lt;/h2>
&lt;p>å¯é äº‹ä»¶æ¨¡å¼å±äºäº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œå½“æŸä»¶é‡è¦çš„äº‹æƒ…å‘ç”Ÿæ—¶ï¼Œæ¯”å¦‚æ›´æ–°ä¸€ä¸ªä¸šåŠ¡å®ä½“ï¼Œå¾®æœåŠ¡ä¼šå‘æ¶ˆæ¯ä»£ç†å‘å¸ƒä¸€ä¸ªäº‹ä»¶ã€‚æ¶ˆæ¯ä»£ç†ä¼šå°†è®¢é˜…äº‹ä»¶çš„å¾®æœåŠ¡æ¨é€äº‹ä»¶ã€‚&lt;/p>
&lt;p>è¦å®ç°è¿™ç§æ¨¡å¼éœ€è¦æ¶ˆæ¯é˜Ÿåˆ—å®ç°äº‹ä»¶çš„æŒä¹…åŒ–å’Œ at least once çš„å¯é äº‹ä»¶æŠ•é€’æ¨¡å¼ã€‚&lt;/p>
&lt;h3 id="11-æœ¬åœ°äº‹ä»¶è¡¨">1.1 æœ¬åœ°äº‹ä»¶è¡¨&lt;/h3>
&lt;p>æœ¬åœ°äº‹ä»¶è¡¨æ–¹æ³•æ˜¯å°†äº‹ä»¶å’Œä¸šåŠ¡æ•°æ®ä¿å­˜åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„äº‹ä»¶æ¢å¤æœåŠ¡æ¥æ¢å¤äº‹ä»¶ï¼Œç”±æœ¬åœ°äº‹ç‰©ä¿è¯æ›´æ–°ä¸šåŠ¡å’Œå‘å¸ƒäº‹ä»¶çš„åŸå­æ€§ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ä¸šåŠ¡ç³»ç»Ÿå’Œäº‹ä»¶ç³»ç»Ÿè€¦åˆæ¯”è¾ƒç´§å¯†ï¼Œé¢å¤–çš„äº‹ä»¶æ•°æ®åº“æ“ä½œä¹Ÿä¼šç»™æ•°æ®åº“å¸¦æ¥é¢å¤–çš„å‹åŠ›ï¼Œå¯èƒ½æˆä¸ºç“¶é¢ˆã€‚&lt;/p>
&lt;h3 id="12-å¤–éƒ¨äº‹ä»¶">1.2 å¤–éƒ¨äº‹ä»¶&lt;/h3>
&lt;p>æ­¤æ–¹æ³•æ˜¯å°†äº‹ä»¶æŒä¹…åŒ–åˆ°å¤–éƒ¨çš„äº‹ä»¶ç³»ç»Ÿï¼Œäº‹ä»¶ç³»ç»Ÿéœ€è¦æä¾›å®æ—¶äº‹ä»¶æœåŠ¡ä»¥æ¥å—å¾®æœåŠ¡å‘å¸ƒçš„äº‹ä»¶ï¼ŒåŒæ—¶äº‹ä»¶ç³»ç»Ÿè¿˜éœ€è¦æä¾›äº‹ä»¶æ¢å¤æœåŠ¡æ¥ç¡®è®¤æ¢å¤äº‹ä»¶ã€‚&lt;/p>
&lt;h3 id="13-ä¸è¶³">1.3 ä¸è¶³&lt;/h3>
&lt;p>æ­¤è¿‡ç¨‹å¯èƒ½å‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å†µã€‚&lt;/p>
&lt;h2 id="2-è¡¥å¿æ¨¡å¼">2 è¡¥å¿æ¨¡å¼&lt;/h2>
&lt;p>ä¸€èˆ¬æ¥è®²ï¼Œå¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ä»¥ä¸‹ä¸¤ç§æƒ…å†µé€ æˆçš„ï¼š&lt;/p>
&lt;p>ä¸šåŠ¡å¼‚å¸¸ï¼šä¸šåŠ¡é€»è¾‘äº§ç”Ÿçš„é”™è¯¯ï¼Œæ¯”å¦‚ä½™é¢ä¸è¶³ã€åº“å­˜ä¸è¶³ç­‰ã€‚&lt;/p>
&lt;p>æŠ€æœ¯å¼‚å¸¸ï¼šéä¸šåŠ¡é€»è¾‘äº§ç”Ÿçš„å¼‚å¸¸ï¼Œæ¯”å¦‚ç½‘ç»œè¿æ¥å¼‚å¸¸ã€è¶…æ—¶ç­‰ã€‚&lt;/p>
&lt;p>è¡¥å¿æ¨¡å¼å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„åè°ƒæœåŠ¡æ¥åè°ƒå„ä¸ªéœ€è¦ä¿è¯ä¸€è‡´æ€§çš„å…¶ä»–æœåŠ¡ã€‚åè°ƒæœåŠ¡æŒ‰é¡ºåºè°ƒç”¨æ¯ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœæŸä¸ªæœåŠ¡è°ƒç”¨å¼‚å¸¸å°±å–æ¶ˆä¹‹å‰æ‰€æœ‰å·²ç»è°ƒç”¨æˆåŠŸçš„æœåŠ¡ã€‚&lt;/p>
&lt;p>å»ºè®®ä»…ç”¨äºæŠ€æœ¯å¼‚å¸¸çš„æƒ…å†µã€‚å¯¹äºä¸šåŠ¡å¼‚å¸¸æ¥è®²ï¼Œåº”è¯¥å°½å¯èƒ½çš„å»ä¼˜åŒ–ä¸šåŠ¡æ¨¡å¼ï¼Œä»¥é¿å…è¦æ±‚è¡¥å¿äº‹åŠ¡ã€‚&lt;/p>
&lt;h3 id="21-å¸¸ç”¨æ‰‹æ®µ">2.1 å¸¸ç”¨æ‰‹æ®µ&lt;/h3>
&lt;p>åœ¨å®ç°è¡¥å¿æ¨¡å¼æ—¶åº”è¯¥åšåˆ°ä¸¤ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>é¦–å…ˆè¦ç¡®å®šå¤±è´¥çš„æ­¥éª¤å’ŒçŠ¶æ€ï¼Œä»è€Œç¡®å®šè¦è¡¥å¿çš„èŒƒå›´ã€‚&lt;/li>
&lt;li>å…¶æ¬¡è¦èƒ½æä¾›è¡¥å¿æ“ä½œä½¿ç”¨çš„ä¸šåŠ¡æ•°æ®ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¯ä»¥é€šè¿‡è®°å½•å®Œæ•´çš„ä¸šåŠ¡æµæ°´çš„æ–¹æ³•æ¥å®ç°ä¸Šé¢ä¸¤ç‚¹è¦æ±‚ã€‚ä½†æ˜¯å¯¹äºä¸€ä¸ªé€šç”¨çš„è¡¥å¿æ¡†æ¶æ¥è¯´ï¼Œé¢„å…ˆçŸ¥é“å¾®æœåŠ¡éœ€è¦è®°å½•çš„ä¸šåŠ¡è¦ç´ æ˜¯ä¸å¯èƒ½çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ç§åŠæ³•æ¥ä¿è¯ä¸šåŠ¡æµæ°´çš„å¯æ‰©å±•æ€§ï¼Œå®è·µä¸­ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼šå¤§è¡¨å’Œå…³è”è¡¨ã€‚&lt;/p>
&lt;ul>
&lt;li>å¤§è¡¨ï¼Œé¡¾æ˜æ€è®®å°±æ˜¯è®¾è®¡æ—¶é™¤äº†å¿…é¡»çš„å­—æ®µå¤–ï¼Œè¿˜éœ€è¦é¢„ç•™å¤§é‡çš„å¤‡ç”¨å­—æ®µï¼Œæ¡†æ¶å¯ä»¥æä¾›è¾…åŠ©å·¥å…·æ¥å°†ä¸šåŠ¡æ•°æ®æ˜ å°„åˆ°å¤‡ç”¨å­—æ®µä¸­ã€‚å¤§è¡¨å¯¹äºæ¡†æ¶å±‚å®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›éš¾ç‚¹ï¼Œæ¯”å¦‚é¢„ç•™å¤šå°‘ä¸ªå­—æ®µåˆé€‚ï¼Œæ¯ä¸ªå­—æ®µåˆéœ€è¦é¢„ç•™å¤šé•¿ã€‚è¿˜æœ‰ä¸€ä¸ªéš¾ç‚¹æ˜¯å¦‚æœä»…ä»æ•°æ®å±‚é¢æ¥æŸ¥è¯¢æ•°æ®ï¼Œå¾ˆéš¾ä¸€çœ¼çœ‹å‡ºå¤‡ç”¨å­—æ®µçš„ä¸šåŠ¡å«ä¹‰ï¼Œç»´æŠ¤è¿‡ç¨‹ä¸å‹å¥½ã€‚&lt;/li>
&lt;li>å…³è”è¡¨ï¼Œåˆ†ä¸ºæŠ€æœ¯è¡¨å’Œä¸šåŠ¡è¡¨ã€‚æŠ€æœ¯è¡¨ä¸­ä¿å­˜ä¸ºå®ç°è¡¥å¿æ“ä½œæ‰€éœ€è¦çš„æŠ€æœ¯æ•°æ®ï¼Œä¸šåŠ¡è¡¨ä¸­ä¿å­˜ä¸šåŠ¡æ•°æ®ã€‚é€šè¿‡åœ¨æŠ€æœ¯è¡¨ä¸­å¢åŠ ä¸šåŠ¡è¡¨åå’Œä¸šåŠ¡è¡¨ä¸»é”®æ¥å»ºç«‹å’Œä¸šåŠ¡æ•°æ®çš„å…³è”ã€‚å…³è”è¡¨æ›´çµæ´»ï¼Œèƒ½æ”¯æŒä¸åŒä¸šåŠ¡ç±»å‹è®°å½•ä¸åŒçš„ä¸šåŠ¡è¦ç´ ã€‚ä½†æ˜¯åœ¨æ¡†æ¶çš„å®ç°ä¸Šéš¾åº¦è¾ƒé«˜ï¼Œæ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦å¤æ‚çš„å…³è”åŠ¨ä½œï¼Œæ€§èƒ½ä¼šå—åˆ°å½±å“ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="22-é‡è¯•">2.2 é‡è¯•&lt;/h3>
&lt;p>è¡¥å¿è¿‡ç¨‹ä½œä¸ºä¸€ä¸ªæœåŠ¡ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™ä¹Ÿä¼šå‡ºç°ä¸æˆåŠŸçš„æƒ…å†µï¼Œè¿™æ—¶å°±è¦é€šè¿‡é‡è¯•æœºåˆ¶æ¥ä¿è¯è¡¥å¿çš„æˆåŠŸç‡ã€‚å› æ­¤è¦æ±‚è¡¥å¿æ“ä½œå…·æœ‰å¹‚ç­‰æ€§ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ä¹Ÿä¸æ˜¯ç›²ç›®çš„é‡è¯•ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æœåŠ¡æ‰§è¡Œå¤±è´¥çš„åŸå› æ¥é€‰æ‹©ä¸åŒçš„ç­–ç•¥ï¼š&lt;/p>
&lt;ul>
&lt;li>å› ä¸šåŠ¡å› ç´ å¯¼è‡´å¤±è´¥ï¼Œéœ€è¦åœæ­¢é‡è¯•ã€‚&lt;/li>
&lt;li>ç½•è§çš„å¼‚å¸¸ï¼Œå¦‚ç½‘ç»œä¸­æ–­ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®ä¸¢å¤±ï¼Œåº”è¯¥ç«‹å³é‡è¯•ã€‚&lt;/li>
&lt;li>å¦‚æœæ˜¯å› ä¸ºç³»ç»Ÿç¹å¿™ï¼Œæ­¤æ—¶éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´å†é‡è¯•ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="23-ä¸è¶³">2.3 ä¸è¶³&lt;/h3>
&lt;p>åœ¨è¡¥å¿æ¨¡å¼ä¸­æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ç¼ºé™·æ˜¯éš”ç¦»æ€§ï¼Œä»ç¬¬ä¸€ä¸ªæœåŠ¡å¼€å§‹ä¸€ç›´åˆ°è¡¥å¿å®Œæˆï¼Œä¸ä¸€è‡´æ€§æ˜¯å¯¹å…¶ä»–æœåŠ¡å¯è§çš„ã€‚å¦å¤–è¡¥å¿æ¨¡å¼è¿‡åˆ†ä¾èµ–åè°ƒæœåŠ¡çš„å¥å£®æ€§ï¼Œå¦‚æœåè°ƒæœåŠ¡å¼‚å¸¸ï¼Œåˆ™æ²¡åŠæ³•è¾¾åˆ°ä¸€è‡´æ€§ã€‚&lt;/p>
&lt;h2 id="3-tcc-æ¨¡å¼">3 TCC æ¨¡å¼&lt;/h2>
&lt;p>TCCï¼Œæ˜¯ Tryï¼ŒConfirm å’Œ Cancel çš„ç¼©å†™ã€‚ä¸€ä¸ªå®Œæ•´çš„ TCC ä¸šåŠ¡ä¸€èˆ¬æ˜¯ç”±ä¸€ä¸ªä¸»ä¸šåŠ¡å’Œè‹¥å¹²ä¸ªä»ä¸šåŠ¡ç»„æˆã€‚&lt;/p>
&lt;ul>
&lt;li>Try
&lt;ul>
&lt;li>å®Œæˆæ‰€æœ‰ä¸šåŠ¡æ£€æŸ¥&lt;/li>
&lt;li>é¢„ç•™å¿…é¡»çš„ä¸šåŠ¡èµ„æº&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Confirm
&lt;ul>
&lt;li>çœŸæ­£æ‰§è¡Œä¸šåŠ¡&lt;/li>
&lt;li>ä¸åšä»»ä½•ä¸šåŠ¡æ£€æŸ¥&lt;/li>
&lt;li>åªä½¿ç”¨ Try é˜¶æ®µé¢„ç•™çš„ä¸šåŠ¡èµ„æº&lt;/li>
&lt;li>æ»¡è¶³å¹‚ç­‰æ€§&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Cancel
&lt;ul>
&lt;li>é‡Šæ”¾ Try é˜¶æ®µé¢„ç•™çš„ä¸šåŠ¡èµ„æº&lt;/li>
&lt;li>æ»¡è¶³å¹‚ç­‰æ€§&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="31-å®ç°è¿‡ç¨‹">3.1 å®ç°è¿‡ç¨‹&lt;/h3>
&lt;p>æ•´ä¸ª TCC ä¸šåŠ¡åˆ†æˆä¸¤ä¸ªé˜¶æ®µå®Œæˆï¼š&lt;/p>
&lt;p>ç¬¬ä¸€é˜¶æ®µï¼šä¸»ä¸šåŠ¡æœåŠ¡åˆ†åˆ«è°ƒç”¨æ‰€æœ‰ä»ä¸šåŠ¡çš„ try æ“ä½œï¼Œå¹¶åœ¨æ´»åŠ¨ç®¡ç†å™¨ä¸­ç™»è®°æ‰€æœ‰ä»ä¸šåŠ¡æœåŠ¡ã€‚å½“æ‰€æœ‰ä»ä¸šåŠ¡æœåŠ¡çš„ try æ“ä½œéƒ½è°ƒç”¨æˆåŠŸæˆ–è€…æŸä¸ªä»ä¸šåŠ¡æœåŠ¡çš„ try æ“ä½œå¤±è´¥ï¼Œè¿›å…¥ç¬¬äºŒé˜¶æ®µã€‚&lt;/p>
&lt;p>ç¬¬äºŒé˜¶æ®µï¼šæ´»åŠ¨ç®¡ç†å™¨æ ¹æ®ç¬¬ä¸€é˜¶æ®µçš„æ‰§è¡Œç»“æœæ¥æ‰§è¡Œ Confirm æˆ– Cancel æ“ä½œã€‚å¦‚æœç¬¬ä¸€é˜¶æ®µæ‰€æœ‰çš„ try æ“ä½œæ˜¯æˆåŠŸçš„ï¼Œåˆ™è°ƒç”¨æ‰€æœ‰ä»ä¸šåŠ¡çš„ Confirm æ“ä½œï¼Œå¦åˆ™éƒ½è°ƒç”¨ Cancel æ“ä½œã€‚&lt;/p>
&lt;p>TCC æ¨¡å¼ä¸å†éœ€è¦è®°å½•è¯¦ç»†çš„ä¸šåŠ¡æµæ°´ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†è¡¥å¿æ¨¡å¼çš„ç¼ºé™·ï¼Œåœ¨ TCC æ¨¡å¼ä¸­ï¼Œç›´åˆ°æ˜ç¡®çš„ Confirm åŠ¨ä½œï¼Œæ‰€æœ‰çš„ä¸šåŠ¡æ“ä½œéƒ½æ˜¯éš”ç¦»çš„ã€‚è€Œä¸”è¿˜å¯ä»¥é€šè¿‡æŒ‡å®š try çš„è¶…æ—¶æ—¶é—´ï¼Œä¸»åŠ¨çš„ Cancel é¢„ç•™çš„èµ„æºï¼Œä»è€Œå®ç°äº†è‡ªæ²»ã€‚&lt;/p>
&lt;h3 id="32-ä¸è¶³">3.2 ä¸è¶³&lt;/h3>
&lt;p>TCC æ¨¡å¼ä¸èƒ½ç™¾åˆ†ç™¾ä¿è¯ä¸€è‡´æ€§ï¼Œå¦‚æœæŸæœåŠ¡æäº¤äº† Confirm æˆåŠŸï¼Œä½†æ˜¯ç”±äºç½‘ç»œæ•…éšœï¼Œå¯¼è‡´ä¸»æœåŠ¡æ”¶åˆ°çš„å¤±è´¥ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸ä¸€è‡´æ€§ï¼Œè¿™è¢«ç§°ä¸º heuristic exceptionã€‚å› æ­¤ä¸ºä¿è¯æˆåŠŸç‡ï¼Œéƒ½éœ€è¦æ”¯æŒé‡è¯•ã€‚&lt;/p>
&lt;p>heuristic exception æ˜¯ä¸å¯æœç»çš„ï¼Œä½†æ˜¯é€šè¿‡è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ã€é‡è¯•é¢‘ç‡ä»¥åŠç›‘æ§ï¼Œå¯ä»¥ä½¿æ­¤å¼‚å¸¸çš„å¯èƒ½æ€§é™åˆ°å¾ˆä½ï¼Œå¦å¤–å¦‚æœå‡ºç°äº†æ­¤å¼‚å¸¸ï¼Œè¿˜å¯é€šè¿‡äººå·¥æ‰‹æ®µè¡¥æ•‘ã€‚&lt;/p></description></item><item><title>Reactive å¾®æœåŠ¡</title><link>https://example.com/p/reactive-%E5%BE%AE%E6%9C%8D%E5%8A%A1/</link><pubDate>Sat, 24 Mar 2018 17:57:58 +0000</pubDate><guid>https://example.com/p/reactive-%E5%BE%AE%E6%9C%8D%E5%8A%A1/</guid><description>&lt;h1 id="reactive-å¾®æœåŠ¡">Reactive å¾®æœåŠ¡&lt;/h1>
&lt;p>åˆ†å¸ƒå¼ç³»ç»Ÿæ„å»ºèµ·æ¥å¾ˆå›°éš¾ï¼Œå› ä¸ºå®ƒä»¬å®¹æ˜“å‡ºé—®é¢˜ï¼Œè¿è¡Œç¼“æ…¢ï¼Œå¹¶ä¸”è¢« CAP å’Œ FLP ç†è®ºæ‰€é™åˆ¶ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬çš„æ„å»ºå’Œè¿ç»´éƒ½ç‰¹åˆ«å¤æ‚ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œreactive ä¾¿å‡ºç°äº†ã€‚&lt;/p>
&lt;p>Reactive ç¼–ç¨‹ï¼šä¸€ç§å¼€å‘æ¨¡å‹ï¼Œå…¶ä¸“æ³¨äºæ•°æ®æµå‘ã€å¯¹å˜åŒ–çš„åé¦ˆï¼Œä»¥åŠä¼ æ’­ä»–ä»¬ã€‚&lt;/p>
&lt;p>åœ¨ reactive ç¼–ç¨‹ä¸­ï¼Œåˆºæ¿€ä¿¡å·æ˜¯æ•°æ®çš„è½¬ç§»ï¼Œå«åš streamsã€‚å…¶å®å¾ˆåƒç”Ÿäº§è€…â€”â€”æ¶ˆè´¹è€…æ¨¡å¼ï¼Œæ¶ˆè´¹è€…å¯¹å€¼è¿›è¡Œè®¢é˜…å¹¶å“åº”ã€‚&lt;/p>
&lt;p>Reactive ç³»ç»Ÿï¼šä¸€ç§æ¶æ„é£æ ¼ï¼Œå…¶åŸºäºå¼‚æ­¥æ¶ˆæ¯æ¥æ„å»ºå“åº”å¼çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚&lt;/p>
&lt;p>reactive ç³»ç»Ÿä½¿ç”¨äº†æ¶ˆæ¯é©±åŠ¨çš„æ–¹æ³•ã€‚æ‰€æœ‰çš„æ„å»ºé€šè¿‡å¼‚æ­¥æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶æ¥äº¤äº’ã€‚æ¶ˆæ¯æŠ•é€’çš„é€»è¾‘ç”±åº•å±‚çš„å®ç°å†³å®šã€‚å‘é€è€…ä¸ä¼šé˜»å¡ç€ç­‰å¾…å›å¤ï¼Œå®ƒä»¬å¯èƒ½ä¼šç¨åæ‰æ¥æ”¶åˆ°å›å¤ã€‚&lt;/p>
&lt;p>reactive ç³»ç»Ÿä¼šæœ‰ä¸¤ä¸ªé‡è¦çš„ç‰¹å¾ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä¼¸ç¼©æ€§â€”â€”å¯ä»¥æ¨ªå‘ä¼¸ç¼©&lt;/p>
&lt;p>ä¼¸ç¼©æ€§æ¥è‡ªæ¶ˆæ¯ä¼ é€’çš„è§£è€¦ã€‚æ¶ˆæ¯è¢«å‘é€åˆ°ä¸€ä¸ªåœ°å€ä¹‹åï¼Œå¯ä»¥è¢«ä¸€ç»„æ¶ˆè´¹è€…æŒ‰ç…§ä¸€ç§è´Ÿè½½å‡è¡¡æ–¹æ³•æ¶ˆè´¹ã€‚å½“ reactive ç³»ç»Ÿé‡åˆ°è´Ÿè½½é«˜å³°æ—¶ï¼Œå®ƒå¯ä»¥åˆ›é€ å‡ºæ–°çš„æ¶ˆè´¹è€…ï¼Œå¹¶åœ¨æ­¤ä¹‹åé”€æ¯å®ƒä»¬ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ¢å¤æ€§â€”â€”å¯ä»¥å¤„ç†é”™è¯¯å¹¶ä¸”æ¢å¤&lt;/p>
&lt;p>é¦–å…ˆï¼Œè¿™ç§æ¶ˆæ¯äº¤äº’æ¨¡å¼å…è®¸ç»„ä»¶åœ¨å…¶æœ¬åœ°å¤„ç†é”™è¯¯ï¼Œç»„ä»¶ä¸éœ€è¦ç­‰å¾…æ¶ˆæ¯ï¼Œå› æ­¤å½“ä¸€ä¸ªç»„ä»¶å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå…¶ä»–ç»„ä»¶ä»ç„¶ä¼šæ­£å¸¸å·¥ä½œã€‚å…¶æ¬¡ï¼Œå½“ä¸€ä¸ªå¤„ç†æ¶ˆæ¯çš„ç»„ä»¶å‘ç”Ÿé”™è¯¯åï¼Œæ¶ˆæ¯å¯ä»¥å¯ä»¥ä¼ é€’ç»™åœ¨ç›¸åŒåœ°å€æ³¨å†Œçš„å…¶ä»–ç»„ä»¶ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>reactive å¾®æœåŠ¡ç³»ç»Ÿæ˜¯ç”± reactive å¾®æœåŠ¡ç»„æˆçš„ã€‚è¿™äº›å¾®æœåŠ¡æœ‰ä¸‹é¢å››ä¸ªç‰¹å¾ï¼š&lt;/p>
&lt;ul>
&lt;li>è‡ªæ²»æ€§&lt;/li>
&lt;li>å¼‚æ­¥æ€§&lt;/li>
&lt;li>æ¢å¤æ€§&lt;/li>
&lt;li>ä¼¸ç¼©æ€§&lt;/li>
&lt;/ul>
&lt;p>Reactive å¾®æœåŠ¡æ˜¯å¯è‡ªæ²»çš„ã€‚ä»–ä»¬å¯ä»¥æ ¹æ®å‘¨å›´çš„æœåŠ¡æ˜¯å¦å¯ç”¨æ¥è°ƒæ•´è‡ªå·±çš„è¡Œä¸ºã€‚è‡ªæ²»æ€§å¾€å¾€ä¼´éšç€å­¤ç«‹æ€§ï¼›Reactive å¾®æœåŠ¡å¯ä»¥åœ¨æœ¬åœ°å¤„ç†é”™è¯¯ã€ç‹¬ç«‹åœ°å®Œæˆä»»åŠ¡ï¼Œå¹¶åœ¨å¿…è¦æ—¶å’Œå…¶ä»–æœåŠ¡åˆä½œã€‚å®ƒä»¬ä½¿ç”¨å¼‚æ­¥æ¶ˆæ¯ä¼ é€’çš„æœºåˆ¶å’Œå…¶ä»–æœåŠ¡æ²Ÿé€šï¼›å®ƒä»¬ä¹Ÿä¼šæ¥æ”¶æ¶ˆæ¯å¹¶ä¸”å¯¹å…¶ä½œå‡ºå›åº”ã€‚&lt;/p>
&lt;p>å¾—ç›Šäºå¼‚æ­¥æ¶ˆæ¯æœºåˆ¶ï¼Œreactive å¾®æœåŠ¡å¯ä»¥å¤„ç†é”™è¯¯å¹¶æ ¹æ®æƒ…å†µè°ƒæ•´è‡ªå·±çš„è¡Œä¸ºã€‚é”™è¯¯ä¸ä¼šè¢«æ‰©æ•£ï¼Œè€Œæ˜¯åœ¨é è¿‘é”™è¯¯æºå¤´çš„åœ°æ–¹è¢«å¤„ç†æ‰ã€‚å½“ä¸€ä¸ªå¾®æœåŠ¡æŒ‚æ‰ä¹‹åï¼Œå®ƒçš„æ¶ˆè´¹è€…å¾®æœåŠ¡è¦èƒ½å¤Ÿå¤„ç†é”™è¯¯å¹¶é¿å…æ‰©æ•£ã€‚è¿™ä¸€å­¤ç«‹åŸåˆ™æ˜¯é¿å…é”™è¯¯é€å±‚ä¸Šæµ®è€Œæ¯æ‰æ•´ä¸ªç³»ç»Ÿçš„å…³é”®ã€‚å¯æ¢å¤æ€§ä¸åªæ˜¯å…³äºå¤„ç†é”™è¯¯ï¼Œå®ƒè¿˜æ¶‰åŠåˆ°è‡ªæ„ˆæ€§ï¼›ä¸€ä¸ª reactive å¾®æœåŠ¡åº”è¯¥èƒ½å¤Ÿä»é”™è¯¯ä¸­æ¢å¤å¹¶ä¸”å¯¹é”™è¯¯è¿›è¡Œè¡¥æ•‘ã€‚&lt;/p>
&lt;p>æœ€åï¼Œreactive å¾®æœåŠ¡å¿…é¡»æ˜¯å¯ä¼¸ç¼©çš„ï¼Œè¿™æ ·ç³»ç»Ÿæ‰å¯ä»¥æ ¹æ®è´Ÿè½½æƒ…å†µæ¥è°ƒæ•´èŠ‚ç‚¹æ•°é‡ã€‚è¿™ä¸€ç‰¹æ€§æ„å‘³ç€å°†ä¼šæœ‰ä¸€ç³»åˆ—çš„é™åˆ¶ï¼Œæ¯”å¦‚ä¸èƒ½æœ‰åœ¨å†…å­˜ä¸­çš„çŠ¶æ€ï¼Œè¦èƒ½å¤Ÿåœ¨å¿…è¦æ—¶åŒæ­¥çŠ¶æ€ä¿¡æ¯ï¼Œæˆ–è€…è¦èƒ½å¤Ÿå°†æ¶ˆæ¯è·¯ç”±åˆ°çŠ¶æ€ä¿¡æ¯ç›¸åŒçš„èŠ‚ç‚¹ã€‚&lt;/p>
&lt;h2 id="vertx">Vert.x&lt;/h2>
&lt;p>Vert.x æ˜¯ä¸€ä¸ªç”¨äºæ„å»º reactive å’Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„å·¥å…·ç®±ï¼Œå…¶ä½¿ç”¨äº†å¼‚æ­¥éé˜»å¡ç¼–ç¨‹æ¨¡å‹ã€‚å½“ä½¿ç”¨ Vert.x æ„å»ºå¾®æœåŠ¡çš„æ—¶å€™ï¼Œå¾®æœåŠ¡ä¼šè‡ªç„¶åœ°å¸¦ä¸Šä¸€ä¸ªæ ¸å¿ƒç‰¹å¾ï¼šæ‰€æœ‰äº‹æƒ…éƒ½æ˜¯å¼‚æ­¥çš„ã€‚&lt;/p>
&lt;p>ä¼ ç»Ÿç¼–ç¨‹æ¨¡å¼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">int res = compute(1, 2);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæ˜¯åœ¨ç­‰å¾… compute å‡½æ•°è®¡ç®—å‡ºæ¥ç»“æœä¹‹åå†è¿›è¡Œå‰©ä¸‹çš„æ“ä½œã€‚è€Œåœ¨å¼‚æ­¥éé˜»å¡çš„ç¼–ç¨‹æ¨¡å¼ä¸­ï¼Œå°†ä¼šåˆ›å»ºä¸€ä¸ª handlerï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">compute(1, 2, res -&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // called with the result
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œcompute å‡½æ•°ä¸å†è¿”å›ä¸€ä¸ªç»“æœï¼Œè€Œæ˜¯ä¼ ä¸€ä¸ª handlerï¼Œå½“ç»“æœå‡†å¤‡å¥½æ—¶è°ƒç”¨å°±å¯ä»¥äº†ã€‚å¾—ç›Šäºè¿™ç§å¼€å‘æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨å¾ˆå°‘çš„çº¿ç¨‹å»å¤„ç†é«˜å¹¶å‘å·¥ä½œã€‚åœ¨ vert.x ä¸­ï¼Œåˆ°å¤„éƒ½å¯ä»¥çœ‹åˆ°è¿™ç§å½¢å¼çš„ä»£ç ï¼Œæ¯”å¦‚åˆ›å»º http æœåŠ¡å™¨æ—¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">vertx.createHttpServer()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .requestHandler(request -&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> request.response().end(&amp;#34;hello vert.x&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .listen(8080);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®©ä¸€ä¸ª requestHandler æ¥æ”¶ HTTP è¯·æ±‚(äº‹ä»¶)å¹¶ä¸”è¿”å›&amp;quot;hello vert.x&amp;quot;ã€‚Handler æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå®ƒä¼šè¢«è°ƒç”¨ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œhandler ä»£ç ä¼šåœ¨æ¯æ¬¡è¯·æ±‚è¿›æ¥æ—¶è¢«è°ƒç”¨æ‰§è¡Œã€‚è¦æ³¨æ„çš„æ˜¯ï¼ŒHandler å¹¶ä¸ä¼šè¿”å›ä¸€ä¸ªç»“æœï¼Œä½†æ˜¯å®ƒå¯ä»¥æä¾›ä¸€ä¸ªç»“æœï¼›è¿™ä¸ªç»“æœæ˜¯æ€æ ·è¢«æä¾›çš„ï¼Œè¿™ä¸ªè¦çœ‹æ˜¯å“ªç§äº¤äº’è¡Œä¸ºã€‚åœ¨ä¸Šé¢çš„ä»£ç æ®µä¸­ï¼Œå®ƒåªæ˜¯å‘ä¸€ä¸ª HTTP response å†™å…¥äº†ç»“æœã€‚è¿™ä¸ª Handler åé¢è·Ÿäº†ä¸€ä¸ªæ–¹æ³•ä»¤å…¶ç›‘å¬ 8080 ç«¯å£ã€‚è°ƒç”¨è¿™ä¸ª HTTP æœåŠ¡å®ƒä¼šè¿”å›ä¸€ä¸ªç®€å•çš„ responseã€‚&lt;/p>
&lt;h3 id="event-loop">event loop&lt;/h3>
&lt;p>ç»å¤§å¤šæ•°æƒ…å†µï¼ŒVert.x ä¼šç”¨ä¸€ä¸ªå«åš event loop çš„çº¿ç¨‹æ¥è°ƒç”¨æ‰€æœ‰çš„ handlerã€‚&lt;/p>
&lt;p>&lt;img src="https://upload-images.jianshu.io/upload_images/3153856-e1219f95986959b0.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/700"
loading="lazy"
>&lt;/p>
&lt;p>åŸºäºæ¶ˆæ¯å¾ªç¯çš„çº¿ç¨‹æ¨¡å‹æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜ç‚¹ï¼šå®ƒç®€åŒ–äº†å¹¶å‘ã€‚å› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹å­˜åœ¨ï¼Œå› æ­¤æ°¸è¿œéƒ½åªè¢«ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è€Œä¸å­˜åœ¨å¹¶å‘çš„æƒ…å†µã€‚ä½†æ˜¯åŒæ ·ä¹Ÿæœ‰ä¸€ä¸ªé™åˆ¶ï¼š&lt;/p>
&lt;blockquote>
&lt;p>ä¸è¦é˜»å¡æ¶ˆæ¯å¾ªç¯&lt;/p>
&lt;/blockquote>
&lt;p>å› ä¸ºæ²¡æœ‰é˜»å¡ï¼Œä¸€ä¸ªæ¶ˆæ¯å¾ªç¯çº¿ç¨‹å¯ä»¥çŸ­æ—¶é—´å†…åˆ†å‘å·¨é‡çš„äº‹ä»¶ï¼Œè¿™ä¸ªæ¨¡å¼å°±å«åš reactor æ¨¡å¼ã€‚&lt;/p>
&lt;h3 id="verticles">verticles&lt;/h3>
&lt;p>Verticles æ˜¯è¢« Vert.x éƒ¨ç½²å’Œè¿è¡Œçš„ä»£ç å—ã€‚ä¸€ä¸ªå¾®æœåŠ¡çš„åº”ç”¨ï¼Œæ˜¯ç”±è¿è¡Œåœ¨åŒä¸€ä¸ª Vert.x å®ä¾‹ä¸Šçš„è‹¥å¹² verticle ç»„æˆçš„ã€‚ä¸€ä¸ª verticle é€šå¸¸ä¼šåˆ›å»ºæœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ã€æ³¨å†Œä¸€ç»„ Handlerï¼Œä»¥åŠå°è£…ä¸€éƒ¨åˆ†ç³»ç»Ÿçš„ä¸šåŠ¡å¤„ç†é€»è¾‘ã€‚&lt;/p>
&lt;h4 id="æ ‡å‡†çš„-verticle">æ ‡å‡†çš„ verticle&lt;/h4>
&lt;p>æ ‡å‡†çš„ verticle ä¼šåœ¨ Vert.x çš„æ¶ˆæ¯å¾ªç¯ä¸­è¢«æ‰§è¡Œï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šé˜»å¡ã€‚Vert.x ä¿è¯äº†æ¯ä¸€ä¸ª verticle éƒ½ä¼šåªè¢«åŒä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè€Œä¸ä¼šæœ‰å¹¶å‘å‘ç”Ÿï¼Œä»è€Œé¿å…åŒæ­¥å·¥ä½œã€‚&lt;/p>
&lt;h4 id="worker-verticle">Worker Verticle&lt;/h4>
&lt;p>å’Œæ ‡å‡†çš„ verticle ä¸åŒï¼Œworker verticle ä¸æ˜¯åœ¨æ¶ˆæ¯å¾ªç¯ä¸­æ‰§è¡Œçš„ï¼Œè¿™å°±æ„å‘³ç€ä»–ä»¬å¯ä»¥æ‰§è¡Œé˜»å¡ä»£ç ã€‚ä½†æ˜¯ï¼Œè¿™ä¼šé™åˆ¶ä½ çš„å¯æ‰©å±•æ€§ã€‚&lt;/p>
&lt;p>Verticle å¯ä»¥è®¿é—® vertx æˆå‘˜å˜é‡(æ˜¯ç”± AbstractVerticle ç±»æä¾›çš„)æ¥åˆ›å»ºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼Œä»¥åŠå’Œå…¶ä»–çš„ verticle äº¤äº’ã€‚Verticle è¿˜å¯ä»¥éƒ¨ç½²å…¶ä»–çš„ verticleï¼Œå¯¹å®ƒä»¬è¿›è¡Œé…ç½®ï¼Œå¹¶è®¾ç½®åˆ›å»ºå®ä¾‹çš„æ•°é‡ã€‚è¿™äº›å®ä¾‹ä¼šå’Œä¸åŒçš„æ¶ˆæ¯å¾ªç¯çº¿ç¨‹ç»‘å®šï¼ŒVert.x é€šè¿‡è¿™äº›å®ä¾‹æ¥å‡è¡¡è´Ÿè½½ã€‚&lt;/p>
&lt;h3 id="ä»-callbacks-åˆ°-observables">ä» Callbacks åˆ° Observables&lt;/h3>
&lt;p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒVert.x å¼€å‘æ¨¡å¼ä½¿ç”¨å›è°ƒæ–¹æ³•ã€‚åœ¨ç»„ç»‡ç®¡ç†å¤šä¸ªå¼‚æ­¥åŠ¨ä½œæ—¶ï¼Œè¿™ç§åŸºäºå›è°ƒçš„å¼€å‘æ¨¡å¼å®¹æ˜“äº§ç”Ÿå¤æ‚çš„ä»£ç ï¼Œé™·å…¥ callback hellã€‚&lt;/p>
&lt;p>Vert.x æä¾›äº†è§£å†³è¿™ä¸ªå¼€å‘éš¾é¢˜çš„ç­”æ¡ˆâ€”â€”RxJava APIã€‚&lt;/p></description></item><item><title>Guice å¿«é€Ÿå…¥é—¨</title><link>https://example.com/p/guice-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</link><pubDate>Sat, 24 Mar 2018 17:57:15 +0000</pubDate><guid>https://example.com/p/guice-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</guid><description>&lt;h1 id="guice-å¿«é€Ÿå…¥é—¨">Guice å¿«é€Ÿå…¥é—¨&lt;/h1>
&lt;p>æ¥æ‰‹çš„æ–°é¡¹ç›®ä¸»è¦æ˜¯ä½¿ç”¨ kotlin+vert.x æ¥å†™çš„ï¼Œä½¿ç”¨ gradle æ„å»ºï¼Œä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨äº† guiceã€‚è¿™æ®µæ—¶é—´éƒ½æ˜¯åœ¨ç†Ÿæ‚‰ä»£ç çš„è¿‡ç¨‹ï¼Œæ¶è¡¥ä¸€äº›çŸ¥è¯†ã€‚&lt;/p>
&lt;p>guice æ˜¯è°·æ­Œæ¨å‡ºçš„ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå½“ç„¶ spring ä¹Ÿå¯ä»¥å®ç°ä¾èµ–æ³¨å…¥ï¼Œåªæ˜¯ spring å¤ªåºå¤§äº†ã€‚&lt;/p>
&lt;h2 id="1-åŸºæœ¬ä½¿ç”¨">1 åŸºæœ¬ä½¿ç”¨&lt;/h2>
&lt;h3 id="å¼•å…¥ä¾èµ–">å¼•å…¥ä¾èµ–&lt;/h3>
&lt;p>ä½¿ç”¨ gradle æˆ–è€… mavenï¼Œå¼•å…¥ guiceã€‚&lt;/p>
&lt;p>maven:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;lt;dependency&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;groupId&amp;gt;com.google.inject&amp;lt;/groupId&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;artifactId&amp;gt;guice&amp;lt;/artifactId&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;version&amp;gt;4.1.0&amp;lt;/version&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/dependency&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Gradle:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">compile &amp;#34;com.google.inject:guice:4.1.0&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é¡¹ç›®éª¨æ¶">é¡¹ç›®éª¨æ¶&lt;/h3>
&lt;p>é¦–å…ˆéœ€è¦ä¸€ä¸ªä¸šåŠ¡æ¥å£ï¼ŒåŒ…å«ä¸€ä¸ªæ–¹æ³•æ¥æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå®ƒçš„å®ç°éå¸¸ç®€å•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package com.learning.guice;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public interface UserService {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> void process();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">package com.learning.guice;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class UserServiceImpl implements UserService {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void process() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åå†™ä¸€ä¸ªæ—¥å¿—çš„æ¥å£ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package com.learning.guice;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public interface LogService {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> void log(String msg);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">package com.learning.guice;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class LogServiceImpl implements LogService {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void log(String msg) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;------LOG: &amp;#34; + msg);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ€åæ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å£å’Œç›¸åº”çš„å®ç°ï¼Œåœ¨å®ç°ä¸­ä½¿ç”¨äº†ä¸šåŠ¡æ¥å£å’Œæ—¥å¿—æ¥å£å¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ‰“å°æ—¥å¿—ä¿¡æ¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package com.learning.guice;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public interface Application {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> void work();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">package com.learning.guice;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import com.google.inject.Inject;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class MyApp implements Application {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private UserService userService;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private LogService logService;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Inject
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public MyApp(UserService userService, LogService logService) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> this.userService = userService;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> this.logService = logService;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void work() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> userService.process();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> logService.log(&amp;#34;ç¨‹åºæ­£å¸¸è¿è¡Œ&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é…ç½®ä¾èµ–æ³¨å…¥">é…ç½®ä¾èµ–æ³¨å…¥&lt;/h3>
&lt;p>guice æ˜¯ä½¿ç”¨ java ä»£ç æ¥é…ç½®ä¾èµ–ã€‚ç»§æ‰¿ AbstractModule ç±»ï¼Œå¹¶é‡å†™å…¶ä¸­çš„ config æ–¹æ³•ã€‚åœ¨ config æ–¹æ³•ä¸­ï¼Œè°ƒç”¨ AbstractModule ç±»ä¸­æä¾›çš„æ–¹æ³•æ¥é…ç½®ä¾èµ–å…³ç³»ã€‚æœ€å¸¸ç”¨çš„æ˜¯ bind(æ¥å£).to(å®ç°ç±»)ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package com.learning.guice;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import com.google.inject.AbstractModule;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class MyAppModule extends AbstractModule {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protected void configure() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bind(LogService.class).to(LogServiceImpl.class);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bind(UserService.class).to(UserServiceImpl.class);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bind(Application.class).to(MyApp.class);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å•å…ƒæµ‹è¯•">å•å…ƒæµ‹è¯•&lt;/h3>
&lt;p>guice é…ç½®å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨ Guice.createInjector æ–¹æ³•ä¼ å…¥é…ç½®ç±»æ¥åˆ›å»ºä¸€ä¸ªæ³¨å…¥å™¨ï¼Œç„¶åä½¿ç”¨æ³¨å…¥å™¨ä¸­çš„ getInstance æ–¹æ³•è·å–ç›®æ ‡ç±»ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">package com.learning.guice;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import com.google.inject.Guice;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import com.google.inject.Injector;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import org.junit.BeforeClass;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import org.junit.Test;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class MyAppTest {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private static Injector injector;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @BeforeClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public static void init(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> injector= Guice.createInjector(new MyAppModule());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void testMyApp(){
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Application application=injector.getInstance(Application.class);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> application.work();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¨‹åºæ‰§è¡Œç»“æœæ˜¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">/Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/bin/java -ea -...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">æˆ‘éœ€è¦åšä¸€äº›ä¸šåŠ¡é€»è¾‘
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------LOG: ç¨‹åºæ­£å¸¸è¿è¡Œ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Process finished with exit code 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="2-åŸºæœ¬æ¦‚å¿µ">2 åŸºæœ¬æ¦‚å¿µ&lt;/h2>
&lt;h3 id="21-bingdings-ç»‘å®š">2.1 Bingdings ç»‘å®š&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>é“¾å¼ç»‘å®š&lt;/p>
&lt;p>åœ¨ç»‘å®šä¾èµ–çš„æ—¶å€™ä¸ä»…å¯ä»¥å°†çˆ¶ç±»å’Œå­ç±»ç»‘å®šï¼Œè¿˜å¯ä»¥å°†å­ç±»å’Œå­ç±»çš„å­ç±»è¿›è¡Œç»‘å®šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">public class BillingModule extends AbstractModule {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protected void configure() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bind(TransactionLog.class).to(DatabaseTransactionLog.class);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bind(DatabaseTransactionLog.class).to(MySqlDatabaseTransactionLog.class);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œinjector ä¼šæŠŠæ‰€æœ‰ TransactionLog æ›¿æ¢ä¸º MySqlDatabaseTransactionLogã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ³¨è§£ç»‘å®š&lt;/p>
&lt;p>å½“æˆ‘ä»¬éœ€è¦å°†å¤šä¸ªåŒä¸€ç±»å‹çš„å¯¹è±¡æ³¨å…¥ä¸åŒå¯¹è±¡çš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨æ³¨è§£åŒºåˆ†è¿™äº›ä¾èµ–äº†ã€‚æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ä½¿ç”¨@Named æ³¨è§£è¿›è¡ŒåŒºåˆ†ã€‚&lt;/p>
&lt;p>é¦–å…ˆéœ€è¦åœ¨è¦æ³¨å…¥çš„åœ°æ–¹æ·»åŠ @Named æ³¨è§£ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">public class RealBillingService implements BillingService {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Inject
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public RealBillingService(@Named(&amp;#34;Checkout&amp;#34;) CreditCardProcessor processor,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> TransactionLog transactionLog) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶ååœ¨ç»‘å®šä¸­æ·»åŠ  annotatedWith æ–¹æ³•æŒ‡å®š@Named ä¸­æŒ‡å®šçš„åç§°ã€‚ç”±äºç¼–è¯‘å™¨æ— æ³•æ£€æŸ¥å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ Guice å®˜æ–¹å»ºè®®æˆ‘ä»¬ä¿å®ˆåœ°ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bind(CreditCardProcessor.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .annotatedWith(Names.named(&amp;#34;Checkout&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .to(CheckoutCreditCardProcessor.class);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å®ä¾‹ç»‘å®š&lt;/p>
&lt;p>æœ‰æ—¶å€™éœ€è¦ç›´æ¥æ³¨å…¥ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ä»ä¾èµ–å…³ç³»ä¸­è§£æã€‚å¦‚æœæˆ‘ä»¬è¦æ³¨å…¥åŸºæœ¬ç±»å‹çš„è¯åªèƒ½è¿™ä¹ˆåšã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bind(String.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .annotatedWith(Names.named(&amp;#34;JDBC URL&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .toInstance(&amp;#34;jdbc:mysql://localhost/pizza&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bind(Integer.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .annotatedWith(Names.named(&amp;#34;login timeout seconds&amp;#34;))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .toInstance(10);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>@Privides æ–¹æ³•&lt;/p>
&lt;p>å½“ä¸€ä¸ªå¯¹è±¡å¾ˆå¤æ‚ï¼Œæ— æ³•ä½¿ç”¨ç®€å•çš„æ„é€ å™¨æ¥ç”Ÿæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Provides æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯åœ¨é…ç½®ç±»ä¸­ç”Ÿæˆä¸€ä¸ªæ³¨è§£äº†@Provides çš„æ–¹æ³•ã€‚åœ¨è¯¥æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥ç¼–å†™ä»»æ„ä»£ç æ¥æ„é€ å¯¹è±¡ã€‚&lt;/p>
&lt;p>@Provides æ–¹æ³•ä¹Ÿå¯ä»¥åº”ç”¨@Named å’Œè‡ªå®šä¹‰æ³¨è§£ï¼Œè¿˜å¯ä»¥æ³¨å…¥å…¶ä»–ä¾èµ–ï¼ŒGuice ä¼šåœ¨è°ƒç”¨æ–¹æ³•ä¹‹å‰æ³¨å…¥éœ€è¦çš„å¯¹è±¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">public class BillingModule extends AbstractModule {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protected void configure() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Provides
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> TransactionLog provideTransactionLog() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DatabaseTransactionLog transactionLog = new DatabaseTransactionLog();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> transactionLog.setJdbcUrl(&amp;#34;jdbc:mysql://localhost/pizza&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> transactionLog.setThreadPoolSize(30);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return transactionLog;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Provider ç»‘å®š&lt;/p>
&lt;p>å¦‚æœé¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªæ¯”è¾ƒå¤æ‚çš„å¯¹è±¡éœ€è¦æ„å»ºï¼Œä½¿ç”¨@Provide æ–¹æ³•ä¼šè®©é…ç½®ç±»å˜å¾—æ¯”è¾ƒä¹±ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Guice æä¾›çš„ Provider æ¥å£å°†å¤æ‚çš„ä»£ç æ”¾åˆ°å•ç‹¬çš„ç±»ä¸­ã€‚åŠæ³•å¾ˆç®€å•ï¼Œå®ç° Provider&lt;!-- raw HTML omitted -->æ¥å£çš„ get æ–¹æ³•å³å¯ã€‚åœ¨ Provider ç±»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Inject ä»»æ„æ³¨å…¥å¯¹è±¡ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">public class DatabaseTransactionLogProvider implements Provider&amp;lt;TransactionLog&amp;gt; {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> private final Connection connection;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Inject
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public DatabaseTransactionLogProvider(Connection connection) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> this.connection = connection;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public TransactionLog get() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DatabaseTransactionLog transactionLog = new DatabaseTransactionLog();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> transactionLog.setConnection(connection);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return transactionLog;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶ååœ¨ config æ–¹æ³•ä¸­ï¼Œè°ƒç”¨.toProvider æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">public class BillingModule extends AbstractModule {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protected void configure() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bind(TransactionLog.class)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .toProvider(DatabaseTransactionLogProvider.class);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>æ— ç›®æ ‡ç»‘å®š&lt;/p>
&lt;p>æ— ç›®æ ‡ç»‘å®šæ²¡æœ‰ to å­å¥&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ„é€ å™¨ç»‘å®š&lt;/p>
&lt;p>æŸäº›åœºæ™¯ä¸‹ï¼Œä½ èƒ½éœ€è¦æŠŠæŸä¸ªç±»å‹ç»‘å®šåˆ°ä»»æ„ä¸€ä¸ªæ„é€ å‡½æ•°ä¸Šã€‚ä»¥ä¸‹æƒ…å†µä¼šæœ‰è¿™ç§éœ€æ±‚ï¼š1ã€ @Inject æ³¨è§£æ— æ³•è¢«åº”ç”¨åˆ°ç›®æ ‡æ„é€ å‡½æ•°ï¼›2ã€ç›®æ ‡ç±»æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»ï¼›3ã€ç›®æ ‡ç±»æœ‰å¤šä¸ªæ„é€ å‡½æ•°å‚ä¸ DIã€‚&lt;/p>
&lt;p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œguice æä¾›äº† toConstructor()ç»‘å®š ï¼Œå®ƒéœ€è¦ä½ æŒ‡å®šè¦ä½¿ç”¨çš„ç¡®åˆ‡çš„æŸä¸ªç›®æ ‡æ„é€ å‡½æ•°ï¼Œå¹¶å¤„ç† &amp;ldquo;constructor annot be found&amp;rdquo; å¼‚å¸¸ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">public class BillingModule extends AbstractModule {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protected void configure() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bind(TransactionLog.class).toConstructor(
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DatabaseTransactionLog.class.getConstructor(DatabaseConnection.class));
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } catch (NoSuchMethodException e) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> addError(e);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>å†…ç½®ç»‘å®š&lt;/p>
&lt;p>é™¤äº†æ˜¾ç¤ºç»‘å®šå’Œå³æ—¶ç»‘å®š just-in-time bindingsï¼Œå‰©ä¸‹çš„ç»‘å®šéƒ½å±äº injector çš„å†…ç½®ç»‘å®šã€‚è¿™äº›ç»‘å®šåªèƒ½ç”± injector è‡ªå·±åˆ›å»ºï¼Œä¸å…è®¸å¤–éƒ¨è°ƒç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å³æ—¶ç»‘å®š&lt;/p>
&lt;p>å½“ injector éœ€è¦æŸä¸€ä¸ªç±»å‹çš„å®ä¾‹çš„æ—¶å€™ï¼Œå®ƒéœ€è¦è·å–ä¸€ä¸ªç»‘å®šã€‚åœ¨ Module ç±»ä¸­çš„ç»‘å®šå«åšæ˜¾å¼ç»‘å®šï¼Œåªè¦ä»–ä»¬å¯ç”¨ï¼Œinjector å°±ä¼šåœ¨ä»»ä½•æ—¶å€™ä½¿ç”¨å®ƒä»¬ã€‚å¦‚æœéœ€è¦æŸä¸€ç±»å‹çš„å®ä¾‹ï¼Œä½†æ˜¯åˆæ²¡æœ‰æ˜¾å¼ç»‘å®šï¼Œé‚£ä¹ˆ injector å°†ä¼šè¯•å›¾åˆ›å»ºä¸€ä¸ªå³æ—¶ç»‘å®šï¼ˆJust-in-time Bindingsï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º JIT ç»‘å®š æˆ– éšå¼ç»‘å®šã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="22-ä½œç”¨åŸŸ">2.2 ä½œç”¨åŸŸ&lt;/h3>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ Guice ä¼šåœ¨æ¯æ¬¡æ³¨å…¥çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚å¦‚æœå¸Œæœ›åˆ›å»ºä¸€ä¸ªå•ä¾‹ä¾èµ–çš„è¯ï¼Œå¯ä»¥åœ¨å®ç°ç±»ä¸Šåº”ç”¨@Singleton æ³¨è§£ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Singleton
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">public class InMemoryTransactionLog implements TransactionLog {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /* everything here should be threadsafe! */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ä¹Ÿå¯ä»¥åœ¨é…ç½®ç±»ä¸­æŒ‡å®šã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">bind(TransactionLog.class).to(InMemoryTransactionLog.class).in(Singleton.class);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨&lt;code>@Provides&lt;/code>æ–¹æ³•ä¸­ä¹Ÿå¯ä»¥æŒ‡å®šå•ä¾‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">@Provides @Singleton
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> TransactionLog provideTransactionLog() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœä¸€ä¸ªç±»å‹ä¸Šå­˜åœ¨å¤šä¸ªå†²çªçš„ä½œç”¨åŸŸï¼ŒGuice ä¼šä½¿ç”¨ bind()æ–¹æ³•ä¸­æŒ‡å®šçš„ä½œç”¨åŸŸã€‚å¦‚æœä¸æƒ³ä½¿ç”¨æ³¨è§£çš„ä½œç”¨åŸŸï¼Œå¯ä»¥åœ¨ bind()æ–¹æ³•ä¸­å°†å¯¹è±¡ç»‘å®šä¸º Scopes.NO_SCOPEã€‚&lt;/p>
&lt;p>Guice å’Œå®ƒçš„æ‰©å±•æä¾›äº†å¾ˆå¤šä½œç”¨åŸŸï¼Œå’Œ spring ä¸€æ ·ï¼Œæœ‰å•ä¾‹ Singletonï¼ŒSession ä½œç”¨åŸŸ SessionScopedï¼ŒRequest è¯·æ±‚ä½œç”¨åŸŸ RequestScoped ç­‰ç­‰ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸã€‚&lt;/p>
&lt;h3 id="23-æ³¨å…¥">2.3 æ³¨å…¥&lt;/h3>
&lt;p>guice çš„æ³¨å…¥å’Œ spring ç±»ä¼¼ï¼Œè€Œä¸”è¿˜åšäº†ä¸€äº›æ‰©å±•ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ„é€ å™¨æ³¨å…¥&lt;/p>
&lt;p>ä½¿ç”¨ @Inject æ³¨è§£æ ‡è®°ç±»çš„æ„é€ æ–¹æ³•ï¼Œè¿™ä¸ªæ„é€ æ–¹æ³•éœ€è¦æ¥å—ç±»ä¾èµ–ä½œä¸ºå‚æ•°ã€‚å¤§å¤šæ•°æ„é€ å­å°†ä¼šæŠŠæ¥æ”¶åˆ°çš„å‚æ•°åˆ†æ´¾ç»™å†…éƒ¨æˆå‘˜å˜é‡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ–¹æ³•æ³¨å…¥&lt;/p>
&lt;p>Guice å¯ä»¥å‘æ ‡æ³¨äº† @Inject çš„æ–¹æ³•ä¸­æ³¨å…¥ä¾èµ–ã€‚ä¾èµ–é¡¹ä»¥å‚æ•°çš„å½¢å¼ä¼ ç»™æ–¹æ³•ï¼ŒGuice ä¼šåœ¨è°ƒç”¨æ³¨å…¥æ–¹æ³•å‰å®Œæˆä¾èµ–é¡¹çš„æ„å»ºã€‚æ³¨å…¥æ–¹æ³•å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå¹¶ä¸”æ–¹æ³•åå¯¹æ³¨å…¥æ“ä½œä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å­—æ®µæ³¨å…¥&lt;/p>
&lt;p>ä½¿ç”¨ @Inject æ³¨è§£æ ‡è®°å­—æ®µã€‚è¿™æ˜¯æœ€ç®€æ´çš„æ³¨å…¥æ–¹å¼ã€‚&lt;/p>
&lt;p>æ³¨æ„ï¼šä¸èƒ½ç»™ final å­—æ®µåŠ @Inject æ³¨è§£ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯é€‰æ³¨å…¥&lt;/p>
&lt;p>æœ‰çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦ä¸€ä¸ªä¾èµ–é¡¹å­˜åœ¨åˆ™è¿›è¡Œæ³¨å…¥ï¼Œä¸å­˜åœ¨åˆ™ä¸æ³¨å…¥ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨æ–¹æ³•æ³¨å…¥æˆ–å­—æ®µæ³¨å…¥æ¥åšè¿™ä»¶äº‹ï¼Œå½“ä¾èµ–é¡¹ä¸å¯ç”¨çš„æ—¶å€™ Guice å°±ä¼šå¿½ç•¥è¿™äº›æ³¨å…¥ã€‚å¦‚æœä½ éœ€è¦é…ç½®å¯é€‰æ³¨å…¥çš„è¯ï¼Œä½¿ç”¨ @Inject(optional = true) æ³¨è§£å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŒ‰éœ€æ³¨å…¥&lt;/p>
&lt;p>æ–¹æ³•æ³¨å…¥å’Œå­—æ®µæ³¨å…¥å¯ä»¥å¯ä»¥ç”¨æ¥åˆå§‹åŒ–ç°æœ‰å®ä¾‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ Injector.injectMembersã€‚&lt;/p>
&lt;p>è¿™ä¸ªä¸å¸¸ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é™æ€æ³¨å…¥&lt;/p>
&lt;p>ä¸å»ºè®®ä½¿ç”¨é™æ€æ³¨å…¥ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è‡ªåŠ¨æ³¨å…¥&lt;/p>
&lt;p>Guice ä¼šå¯¹ä»¥ä¸‹æƒ…å½¢åšè‡ªåŠ¨æ³¨å…¥ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨ç»‘å®šè¯­å¥é‡Œï¼Œé€šè¿‡ toInstance() æ³¨å…¥å®ä¾‹ã€‚&lt;/li>
&lt;li>åœ¨ç»‘å®šè¯­å¥é‡Œï¼Œé€šè¿‡ toProvider() æ³¨å…¥ Provider å®ä¾‹ã€‚è¿™äº›å¯¹è±¡ä¼šåœ¨æ³¨å…¥å™¨åˆ›å»ºçš„æ—¶å€™è¢«åˆ›å»ºå¹¶æ³¨å…¥å®¹å™¨ã€‚å¦‚æœå®ƒä»¬éœ€è¦æ»¡è¶³å…¶ä»–å¯åŠ¨æ³¨å…¥ï¼ŒGuice ä¼šåœ¨å®ƒä»¬è¢«ä½¿ç”¨å‰å°†ä»–ä»¬æ³¨å…¥è¿›å»ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="24-aop">2.4 AOP&lt;/h3>
&lt;p>guice çš„ aop åŠŸèƒ½è¾ƒå¼±ï¼Œæ—¶é—´åŸå› è¿˜æ²¡ç ”ç©¶é€ï¼Œåç»­ç»§ç»­å†™ã€‚&lt;/p></description></item><item><title>kotlin å¿«é€Ÿå…¥é—¨</title><link>https://example.com/p/kotlin-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</link><pubDate>Sat, 24 Mar 2018 17:56:45 +0000</pubDate><guid>https://example.com/p/kotlin-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</guid><description>&lt;p>å¿«é€Ÿæµè§ˆä¸€ä¸‹ Kotlin çš„è¯­æ³•ã€‚&lt;/p>
&lt;h1 id="åŸºæœ¬è¯­æ³•">åŸºæœ¬è¯­æ³•&lt;/h1>
&lt;h3 id="åŒ…å®šä¹‰å’Œå¼•ç”¨">åŒ…å®šä¹‰å’Œå¼•ç”¨&lt;/h3>
&lt;p>åœ¨æºæ–‡ä»¶å¤´éƒ¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Kotlin" data-lang="Kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">package&lt;/span> &lt;span class="nn">my.demo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="nn">java.util.*&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ–¹æ³•å®šä¹‰">æ–¹æ³•å®šä¹‰&lt;/h3>
&lt;ul>
&lt;li>å¸¦æœ‰æ–¹æ³•ä½“ï¼Œå¹¶ä¸”è¿”å›ç¡®å®šç±»å‹æ•°æ®çš„å®šä¹‰æ–¹å¼ï¼Œä¾‹å¦‚æ¥å— &lt;code>Int&lt;/code> ç±»å‹çš„å‚æ•°å¹¶è¿”å› &lt;code>Int&lt;/code> ç±»å‹çš„å€¼ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Kotlin" data-lang="Kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">Int&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>å¸¦æœ‰æ–¹æ³•ä½“ï¼Œè¿”å›æ¨æ–­ç±»å‹æ•°æ®çš„å®šä¹‰æ–¹å¼ï¼Œä¾‹å¦‚ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Kotlin" data-lang="Kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">sum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="p">+&lt;/span> &lt;span class="n">b&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>è¿”å›æ— æ„ä¹‰ç±»å‹çš„å®šä¹‰æ–¹å¼ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Kotlin" data-lang="Kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">printSum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">Unit&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sum of &lt;/span>&lt;span class="si">$a&lt;/span>&lt;span class="s2"> and &lt;/span>&lt;span class="si">$b&lt;/span>&lt;span class="s2"> is &lt;/span>&lt;span class="si">${a + b}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…çœç•¥ &lt;code>Unit&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">printSum&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sum of &lt;/span>&lt;span class="si">$a&lt;/span>&lt;span class="s2"> and &lt;/span>&lt;span class="si">$b&lt;/span>&lt;span class="s2"> is &lt;/span>&lt;span class="si">${a + b}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å˜é‡å®šä¹‰">å˜é‡å®šä¹‰&lt;/h3>
&lt;ul>
&lt;li>åªèµ‹å€¼ä¸€æ¬¡ï¼ˆåªè¯»ï¼‰æœ¬åœ°å˜é‡ï¼Œ&lt;strong>val&lt;/strong>ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">a&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">Int&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="c1">// æŒ‡å®šåˆå§‹å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">val&lt;/span> &lt;span class="py">b&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="c1">// ç±»å‹è‡ªæ¨æ–­ä¸º `Int`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">val&lt;/span> &lt;span class="py">c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">Int&lt;/span> &lt;span class="c1">// å½“ä¸æŒ‡å®šåˆå§‹å€¼æ—¶éœ€è¦æŒ‡å®šç±»å‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">3&lt;/span> &lt;span class="c1">// å»¶è¿Ÿèµ‹å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>å¯å˜å˜é‡ï¼Œ &lt;strong>var&lt;/strong>ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Kotlin" data-lang="Kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="py">x&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">5&lt;/span> &lt;span class="c1">// ç±»å‹è‡ªæ¨æ–­ä¸º `Int`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>é¡¶å±‚å˜é‡&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">PI&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">3.14&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="py">x&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">incrementX&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ³¨é‡Š">æ³¨é‡Š&lt;/h3>
&lt;p>ä¸ Java å’Œ JavaScript ä¸€æ ·ï¼ŒKotlin æ”¯æŒè¡Œå°¾æ³¨é‡Šå’Œå—æ³¨é‡Šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¡Œå°¾æ³¨é‡Š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="cm">/* å¤šè¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> å—æ³¨é‡Š */&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ Java ä¸åŒï¼ŒKotlin ä¸­çš„å—æ³¨é‡Šå¯ä»¥åµŒå¥—ã€‚&lt;/p>
&lt;h3 id="string-æ¨¡æ¿">string æ¨¡æ¿&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="py">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">s1&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;a is &lt;/span>&lt;span class="si">$a&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">a&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">s2&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${s1.replace(&amp;#34;is&amp;#34;, &amp;#34;was&amp;#34;)}&lt;/span>&lt;span class="s2">, but now is &lt;/span>&lt;span class="si">$a&lt;/span>&lt;span class="s2">}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ¡ä»¶è¡¨è¾¾å¼">æ¡ä»¶è¡¨è¾¾å¼&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-Kotlin" data-lang="Kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">maxOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">Int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">Int&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">Int&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ &lt;code>if&lt;/code> åšä¸ºè¡¨è¾¾å¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">maxOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">Int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">Int&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="n">b&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¯èƒ½ä¸º-null-çš„å€¼æ£€æŸ¥æ˜¯å¦ä¸º-null">å¯èƒ½ä¸º null çš„å€¼ï¼Œæ£€æŸ¥æ˜¯å¦ä¸º null&lt;/h3>
&lt;p>å¦‚æœå€¼å¯èƒ½ä¸º &lt;code>null&lt;/code> æ—¶ï¼Œå¿…é¡»æ˜¾ç¤ºçš„æŒ‡å‡ºã€‚
ä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">parseInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„æ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">printProduct&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arg1&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">arg2&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">x&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">parseInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arg1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">y&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">parseInt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">arg2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="k">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="k">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">either&lt;/span> &lt;span class="err">&amp;#39;$&lt;/span>&lt;span class="n">arg1&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="n">or&lt;/span> &lt;span class="err">&amp;#39;$&lt;/span>&lt;span class="n">arg2&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="n">not&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">number&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="k">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Wrong number format in arg1: &amp;#39;&lt;/span>&lt;span class="si">$arg1&lt;/span>&lt;span class="s2">&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="k">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Wrong number format in arg2: &amp;#39;&lt;/span>&lt;span class="si">$arg2&lt;/span>&lt;span class="s2">&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç±»å‹æ£€æŸ¥å’Œè‡ªåŠ¨è½¬æ¢">ç±»å‹æ£€æŸ¥å’Œè‡ªåŠ¨è½¬æ¢&lt;/h3>
&lt;p>&lt;code>is&lt;/code> æ“ä½œç¬¦ç”¨äºæ£€æŸ¥æŸä¸ªå®ä¾‹æ˜¯å¦ä¸ºæŸç§ç±»å‹ã€‚å¦‚æœä¸€ä¸ªä¸å¯å˜æœ¬åœ°å˜é‡æˆ–å±æ€§å·²ç»åšè¿‡ç±»å‹æ£€æŸ¥ï¼Œé‚£ä¹ˆå¯ä»¥ä¸å¿…æ˜¾ç¤ºçš„è¿›è¡Œç±»å‹è½¬æ¢å°±å¯ä»¥ä½¿ç”¨å¯¹åº”ç±»å‹çš„å±æ€§æˆ–æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">getStringLength&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">obj&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Any&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">obj&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span> &lt;span class="c1">// åœ¨è¿™ä¸ªç±»å‹æ£€æŸ¥åˆ†æ”¯ä¸­ï¼Œ`obj` è‡ªåŠ¨è½¬æ¢ä¸º `String`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">null&lt;/span> &lt;span class="c1">// åœ¨ç±»å‹æ£€æŸ¥åˆ†æ”¯å¤–ï¼Œ`obj` ä»ç„¶ä¸º `Any`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">getStringLength&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">obj&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Any&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">obj&lt;/span> &lt;span class="o">!is&lt;/span> &lt;span class="n">String&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span> &lt;span class="c1">// åœ¨è¿™ä¸ªåˆ†æ”¯ä¸­ï¼Œ`obj` è‡ªåŠ¨è½¬æ¢ä¸º `String`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å†æˆ–è€…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">getStringLength&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">obj&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Any&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">Int&lt;/span>&lt;span class="p">?&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">obj&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// åœ¨ `&amp;amp;&amp;amp;` æ“ä½œç¬¦çš„å³ä¾§ï¼Œ`obj` è‡ªåŠ¨è½¬æ¢ä¸º `String`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">obj&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="for-å¾ªç¯">for å¾ªç¯&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">items&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">listOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;banana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;kiwi&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">item&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">items&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">item&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">items&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">listOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;banana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;kiwi&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">items&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">indices&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;item at &lt;/span>&lt;span class="si">$index&lt;/span>&lt;span class="s2"> is &lt;/span>&lt;span class="si">${items[index]}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="while-å¾ªç¯">while å¾ªç¯&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">items&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">listOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;banana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;kiwi&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="py">index&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="n">items&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;item at &lt;/span>&lt;span class="si">$index&lt;/span>&lt;span class="s2"> is &lt;/span>&lt;span class="si">${items[index]}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index&lt;/span> &lt;span class="o">++&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="when-è¡¨è¾¾å¼">when è¡¨è¾¾å¼&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">describe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">obj&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Any&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="p">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">when&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">obj&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s2">&amp;#34;one&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;hello&amp;#34;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s2">&amp;#34;Greeting&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">is&lt;/span> &lt;span class="n">Long&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s2">&amp;#34;Long&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">!is&lt;/span> &lt;span class="n">String&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s2">&amp;#34;Not a String&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s2">&amp;#34;Unknown&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åŒºé—´">åŒºé—´&lt;/h3>
&lt;ul>
&lt;li>ä½¿ç”¨ &lt;code>in&lt;/code> æ“ä½œç¬¦æ£€æŸ¥æ•°å­—æ˜¯å¦åœ¨åŒºé—´å†…ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">x&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">y&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="m">9&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="m">1.&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;fits in range&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>æ£€æŸ¥æ•°å­—æ˜¯å¦åœ¨èŒƒå›´å¤–ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">list&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">listOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;c&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(-&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="o">!in&lt;/span> &lt;span class="m">0.&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">lastIndex&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;-1 is out of range&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">size&lt;/span> &lt;span class="o">!in&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">indices&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;list size is out of valid list indices range too&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>åŒºé—´éå†&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="m">1.&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é›†åˆ">é›†åˆ&lt;/h3>
&lt;ul>
&lt;li>éå†é›†åˆï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">item&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">items&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">item&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ä½¿ç”¨ &lt;code>in&lt;/code> æ“ä½œç¬¦åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŸä¸ªå¯¹è±¡ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">when&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;orange&amp;#34;&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">items&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;juicy&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;apple&amp;#34;&lt;/span> &lt;span class="k">in&lt;/span> &lt;span class="n">items&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;apple is fine too&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ä½¿ç”¨ lambda è¡¨è¾¾å¼è¿‡æ»¤å’Œ map é›†åˆï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">fruits&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">listOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;banana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;avocado&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;kiwi&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fruits&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="n">filter&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="k">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">startWith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="n">sortedBy&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="k">it&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="n">map&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="k">it&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">upperCase&lt;/span>&lt;span class="p">()}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="n">forEach&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">it&lt;/span>&lt;span class="p">)}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="åˆ›å»ºåŸºæœ¬ç±»å’Œå®ä¾‹">åˆ›å»ºåŸºæœ¬ç±»å’Œå®ä¾‹&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fun&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Array&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">&amp;gt;)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">rectangle&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Rectangle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">5.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">2.0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// ä¸éœ€è¦ä½¿ç”¨ &amp;#39;new&amp;#39; å…³é”®è¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">triangle&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">Triangle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">3.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">4.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">5.0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Area of rectangle is &lt;/span>&lt;span class="si">${rectangle.calculateArea()}&lt;/span>&lt;span class="s2">, its perimeter is &lt;/span>&lt;span class="si">${rectangle.perimeter}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Area of triangle is &lt;/span>&lt;span class="si">${triangle.calculateArea()}&lt;/span>&lt;span class="s2">, its perimeter is &lt;/span>&lt;span class="si">${triangle.perimeter}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">abstract&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="nc">Shape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">val&lt;/span> &lt;span class="py">sides&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="n">Double&lt;/span>&lt;span class="p">&amp;gt;)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">perimeter&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Double&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">sides&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sum&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">abstract&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">calculateArea&lt;/span>&lt;span class="p">():&lt;/span> &lt;span class="n">Double&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">interface&lt;/span> &lt;span class="nc">RectangleProperties&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">isSquare&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Boolean&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Rectangle&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="py">height&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Double&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="py">length&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Double&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Shape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">listOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">height&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">length&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">height&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">length&lt;/span>&lt;span class="p">)),&lt;/span> &lt;span class="n">RectangleProperties&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">val&lt;/span> &lt;span class="py">isSquare&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Boolean&lt;/span> &lt;span class="k">get&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">height&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">length&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">calculateArea&lt;/span>&lt;span class="p">():&lt;/span> &lt;span class="n">Double&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">height&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="n">length&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Triangle&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="py">sideA&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Double&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="py">sideB&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Double&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="py">sideC&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Double&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Shape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">listOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sideA&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sideB&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sideC&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="n">fyb&lt;/span> &lt;span class="n">calculateArre&lt;/span>&lt;span class="p">():&lt;/span> &lt;span class="n">Double&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">perimeter&lt;/span> &lt;span class="p">/&lt;/span> &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sqrt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">sideA&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">sideB&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="p">-&lt;/span> &lt;span class="n">sideC&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;p>ä»¥ä¸Šå¼•è‡ªï¼š&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://link.jianshu.com?t=http://kotlinlang.org/docs/reference/basic-syntax.html" target="_blank" rel="noopener"
>http://kotlinlang.org/docs/reference/basic-syntax.html&lt;/a>&lt;/p>
&lt;/blockquote></description></item><item><title>RxJava2 å¿«é€Ÿå…¥é—¨</title><link>https://example.com/p/rxjava2-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</link><pubDate>Sat, 24 Mar 2018 17:55:56 +0000</pubDate><guid>https://example.com/p/rxjava2-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</guid><description>&lt;h1 id="rxjava2-å¿«é€Ÿå…¥é—¨">RxJava2 å¿«é€Ÿå…¥é—¨&lt;/h1>
&lt;h2 id="å¼•å…¥ä¾èµ–">å¼•å…¥ä¾èµ–&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">compile &amp;#39;io.reactivex.rxjava2:rxjava:2.0.1&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å†™æ³•">å†™æ³•&lt;/h2>
&lt;h3 id="ç®€å•ç‰ˆæœ¬">ç®€å•ç‰ˆæœ¬&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"> private static void helloSimple() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Consumer&amp;lt;String&amp;gt; consumer = new Consumer&amp;lt;String&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void accept(String s) throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;consumer accept is &amp;#34; + s);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observable.just(&amp;#34;hello world&amp;#34;).subscribe(consumer);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å¤æ‚ç‰ˆæœ¬">å¤æ‚ç‰ˆæœ¬&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"> private static void helloComplex() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observer&amp;lt;String&amp;gt; observer = new Observer&amp;lt;String&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onSubscribe(Disposable d) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onSubscribe: &amp;#34; + d);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onNext(String s) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onNext: &amp;#34; + s);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onError(Throwable e) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onError: &amp;#34; + e);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onComplete() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onComplete: &amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observable.just(&amp;#34;Hello world&amp;#34;).subscribe(observer);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å˜æ€ç‰ˆæœ¬">å˜æ€ç‰ˆæœ¬&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"> private static void helloPlus() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observer&amp;lt;String&amp;gt; observer = new Observer&amp;lt;String&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onSubscribe(Disposable d) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onSubscribe: &amp;#34; + d);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onNext(String s) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onNext: &amp;#34; + s);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onError(Throwable e) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onError: &amp;#34; + e);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onComplete() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onComplete: &amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observable&amp;lt;String&amp;gt; observable = Observable.create(new ObservableOnSubscribe&amp;lt;String&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void subscribe(ObservableEmitter&amp;lt;String&amp;gt; e) throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> e.onNext(&amp;#34;hello world&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> e.onComplete();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> observable.subscribe(observer);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å¸¸ç”¨æ“ä½œç¬¦">å¸¸ç”¨æ“ä½œç¬¦&lt;/h2>
&lt;h3 id="filter">filter&lt;/h3>
&lt;p>ä½ æ—©ä¸Šå»åƒæ—©é¤ï¼Œå¸ˆå‚…æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œè¯´å’±è¿™æœ‰&amp;quot;åŒ…å­&amp;quot;, &amp;ldquo;é¦’å¤´&amp;rdquo;, &amp;ldquo;èŠ±ç”Ÿ&amp;rdquo;, &amp;ldquo;ç‰›å¥¶&amp;rdquo;, &amp;ldquo;é¥ºå­&amp;rdquo;, &amp;ldquo;æ˜¥å·&amp;rdquo;, &amp;ldquo;æ²¹æ¡&amp;rdquo;ï¼Œä½ ä»”ç»†æƒ³äº†æƒ³ï¼Œå‘ç°ä½ æ˜¯æœ€å–œæ¬¢é¥ºå­çš„ï¼Œæ‰€ä»¥æŠŠå…¶ä»–çš„éƒ½æ’é™¤æ‰ï¼Œ
äºæ˜¯ä½ å°±åƒåˆ°äº†é¥ºå­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"> private static void helloFilter() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Consumer&amp;lt;String&amp;gt; consumer = new Consumer&amp;lt;String&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void accept(String s) throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;accept: &amp;#34; + s);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observable.just(&amp;#34;åŒ…å­&amp;#34;, &amp;#34;é¦’å¤´&amp;#34;, &amp;#34;èŠ±ç”Ÿ&amp;#34;, &amp;#34;ç‰›å¥¶&amp;#34;, &amp;#34;é¥ºå­&amp;#34;, &amp;#34;æ˜¥å·&amp;#34;, &amp;#34;æ²¹æ¡&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .filter(new Predicate&amp;lt;String&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public boolean test(String s) throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;test: &amp;#34; + s);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return s.equals(&amp;#34;é¥ºå­&amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .subscribe(consumer);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="map">Map&lt;/h3>
&lt;p>map æ“ä½œç¬¦èƒ½å¤Ÿå®Œæˆæ•°æ®ç±»å‹çš„è½¬æ¢ã€‚&lt;/p>
&lt;p>å°† String ç±»å‹è½¬æ¢ä¸º Integer ç±»å‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"> private static void helloMap() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // è§‚å¯Ÿè€…è§‚å¯ŸInteger
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observer&amp;lt;Integer&amp;gt; observer = new Observer&amp;lt;Integer&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onSubscribe(Disposable d) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onSubscribe: &amp;#34; + d);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onNext(Integer s) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onNext: &amp;#34; + s);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onError(Throwable e) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onError: &amp;#34; + e);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onComplete() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System.out.println(&amp;#34;onComplete: &amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> };
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observable.just(&amp;#34;100&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .map(new Function&amp;lt;String, Integer&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public Integer apply(String s) throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return Integer.valueOf(s);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .subscribe(observer);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="flatmap">FlatMap&lt;/h3>
&lt;p>flatmap èƒ½å¤Ÿé“¾å¼åœ°å®Œæˆæ•°æ®ç±»å‹çš„è½¬æ¢å’ŒåŠ å·¥ã€‚&lt;/p>
&lt;p>éå†ä¸€ä¸ªå­¦æ ¡æ‰€æœ‰ç­çº§æ‰€æœ‰ç»„çš„æ‰€æœ‰å­¦ç”Ÿ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">private void flatmapClassToGroupToStudent() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observable.fromIterable(new School().getClasses())
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //è¾“å…¥æ˜¯Classç±»å‹ï¼Œè¾“å‡ºæ˜¯ObservableSource&amp;lt;Group&amp;gt;ç±»å‹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .flatMap(new Function&amp;lt;Class, ObservableSource&amp;lt;Group&amp;gt;&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public ObservableSource&amp;lt;Group&amp;gt; apply(Class aClass) throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Log.d(TAG, &amp;#34;apply: &amp;#34; + aClass.toString());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return Observable.fromIterable(aClass.getGroups());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> //è¾“å…¥ç±»å‹æ˜¯Groupï¼Œè¾“å‡ºç±»å‹æ˜¯ObservableSource&amp;lt;Student&amp;gt;ç±»å‹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .flatMap(new Function&amp;lt;Group, ObservableSource&amp;lt;Student&amp;gt;&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public ObservableSource&amp;lt;Student&amp;gt; apply(Group group) throws Exception {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Log.d(TAG, &amp;#34;apply: &amp;#34; + group.toString());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return Observable.fromIterable(group.getStudents());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .subscribe(
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> new Observer&amp;lt;Student&amp;gt;() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onSubscribe(Disposable d) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Log.d(TAG, &amp;#34;onSubscribe: &amp;#34;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onNext(Student value) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Log.d(TAG, &amp;#34;onNext: &amp;#34; + value.toString());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onError(Throwable e) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @Override
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> public void onComplete() {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="çº¿ç¨‹è°ƒåº¦">çº¿ç¨‹è°ƒåº¦&lt;/h1>
&lt;p>å…³äº RxJava çš„çº¿ç¨‹è°ƒåº¦ï¼Œåˆå­¦è€…åªéœ€è¦æŒæ¡ä¸¤ä¸ª api å°±å¤Ÿå¤Ÿçš„å•¦ã€‚&lt;/p>
&lt;h2 id="subscribeon">subscribeOn&lt;/h2>
&lt;p>æŒ‡å®š Observable åœ¨ä¸€ä¸ªæŒ‡å®šçš„çº¿ç¨‹è°ƒåº¦å™¨ä¸Šåˆ›å»ºã€‚åªèƒ½æŒ‡å®šä¸€æ¬¡ï¼Œå¦‚æœæŒ‡å®šå¤šæ¬¡åˆ™ä»¥ç¬¬ä¸€æ¬¡ä¸ºå‡†&lt;/p>
&lt;h2 id="observeon">observeOn&lt;/h2>
&lt;p>æŒ‡å®šåœ¨äº‹ä»¶ä¼ é€’ï¼Œè½¬æ¢ï¼ŒåŠ å·¥å’Œæœ€ç»ˆè¢«è§‚å¯Ÿè€…æ¥å—å‘ç”Ÿåœ¨å“ªä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨ã€‚å¯æŒ‡å®šå¤šæ¬¡ï¼Œæ¯æ¬¡æŒ‡å®šå®Œéƒ½åœ¨ä¸‹ä¸€æ­¥ç”Ÿæ•ˆã€‚&lt;/p>
&lt;h2 id="å¸¸ç”¨çº¿ç¨‹è°ƒåº¦å™¨ç±»å‹">å¸¸ç”¨çº¿ç¨‹è°ƒåº¦å™¨ç±»å‹&lt;/h2>
&lt;ul>
&lt;li>Schedulers.single() å•çº¿ç¨‹è°ƒåº¦å™¨ï¼Œçº¿ç¨‹å¯å¤ç”¨&lt;/li>
&lt;li>Schedulers.newThread() ä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºæ–°çš„çº¿ç¨‹&lt;/li>
&lt;li>Schedulers.io() å¤„ç† io å¯†é›†å‹ä»»åŠ¡ï¼Œå†…éƒ¨æ˜¯çº¿ç¨‹æ± å®ç°ï¼Œå¯è‡ªåŠ¨æ ¹æ®éœ€æ±‚å¢é•¿&lt;/li>
&lt;li>Schedulers.computation() å¤„ç†è®¡ç®—ä»»åŠ¡ï¼Œå¦‚äº‹ä»¶å¾ªç¯å’Œå›è°ƒä»»åŠ¡&lt;/li>
&lt;li>AndroidSchedulers.mainThread() Android ä¸»çº¿ç¨‹è°ƒåº¦å™¨&lt;/li>
&lt;/ul></description></item><item><title>é¢†åŸŸå®ä½“ç±»</title><link>https://example.com/p/%E9%A2%86%E5%9F%9F%E5%AE%9E%E4%BD%93%E7%B1%BB/</link><pubDate>Sat, 24 Mar 2018 17:53:42 +0000</pubDate><guid>https://example.com/p/%E9%A2%86%E5%9F%9F%E5%AE%9E%E4%BD%93%E7%B1%BB/</guid><description>&lt;p>åœ¨çœ‹é¡¹ç›®ä»£ç çš„æ—¶å€™ï¼Œå‘ç°äº† entity åŒ…å’Œ dto åŒ…ï¼Œé‡Œé¢éƒ½æ˜¯åªä¿å­˜æ•°æ®çš„ç±»ï¼Œä»”ç»†æŸ¥äº†èµ„æ–™ï¼Œæ‰å‘ç° java å¯¹äºåªä¿å­˜æ•°æ®çš„ç±»æœ‰å¥½å‡ ä¸ªåˆ†ç±»ã€‚&lt;/p>
&lt;ul>
&lt;li>pojo ç±»ï¼šè¿™æ˜¯æ™®é€šçš„ java ç±»ï¼Œå…·æœ‰ä¸€éƒ¨åˆ†çš„ get å’Œ set æ–¹æ³•ã€‚&lt;/li>
&lt;li>dto ç±»ï¼šdata transfer object æ•°æ®ä¼ è¾“å¯¹è±¡ç±»ï¼Œæ³›æŒ‡ç”¨äºå±•ç¤ºå±‚ä¸æœåŠ¡å±‚ä¹‹é—´ä¼ è¾“çš„å¯¹è±¡ã€‚&lt;/li>
&lt;li>vo ç±»ï¼švo æœ‰ä¸¤ç§è¯´æ³•ï¼Œä¸€ç§æ˜¯ view objectï¼Œä¸€ç§æ˜¯ value objectã€‚&lt;/li>
&lt;li>po ç±»ï¼špersisent object æŒä¹…å¯¹è±¡ã€‚å’Œ pojo ç±»ä¸€æ ·ï¼Œä¹Ÿæ˜¯åªæœ‰ get set æ–¹æ³•ï¼Œä½†æ˜¯è¿™ç§ç±»ä¸€èˆ¬æ˜¯ç”¨äºæŒä¹…å±‚ã€‚&lt;/li>
&lt;li>bo ç±»ï¼šbusiness objectï¼Œä¸šåŠ¡å¯¹è±¡ï¼Œè¡¨ç¤ºåº”ç”¨ç¨‹åºé¢†åŸŸå†…äº‹ç‰©çš„æ‰€æœ‰å®ä½“ç±»ã€‚&lt;/li>
&lt;li>do ç±»ï¼šdomain objectï¼Œé¢†åŸŸå¯¹è±¡ï¼Œå°±æ˜¯ä»ç°å®ä¸­æŠ½è±¡å‡ºæ¥çš„æœ‰å½¢æˆ–è€…æ— å½¢çš„ä¸šåŠ¡å®ä½“ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ ¹æ®æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œå¤§éƒ¨åˆ†äººéƒ½æ²¡æœ‰åˆ†é‚£ä¹ˆæ¸…æ¥šï¼Œä¸€èˆ¬æ˜¯æŠŠæ•°æ®ç±»æ”¾åœ¨ domain åŒ…ï¼Œæˆ–è€… entity åŒ…é‡Œã€‚å†ç»†åˆ†ä¸€ä¸‹çš„è¯ï¼Œå¯ä»¥æŠŠ dto ç±»å•ç‹¬æå–åˆ°ä¸€ä¸ªåŒ…é‡Œã€‚&lt;/p></description></item><item><title>docker</title><link>https://example.com/p/docker/</link><pubDate>Sat, 24 Mar 2018 17:42:58 +0000</pubDate><guid>https://example.com/p/docker/</guid><description>&lt;h1 id="docker-å¸¸ç”¨å‘½ä»¤">docker å¸¸ç”¨å‘½ä»¤&lt;/h1>
&lt;h2 id="docker">docker&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>è·å–é•œåƒ&lt;/p>
&lt;p>docker pull&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ–°å»ºå¹¶å¯åŠ¨&lt;/p>
&lt;p>docker run&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ—å‡ºé•œåƒ&lt;/p>
&lt;p>docker image ls&lt;/p>
&lt;p>docker images&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤è™šæ‚¬é•œåƒ&lt;/p>
&lt;p>docker image prune&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤æœ¬åœ°é•œåƒ&lt;/p>
&lt;p>docker iamge rm&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŸ¥çœ‹åº”ç”¨ä¿¡æ¯&lt;/p>
&lt;p>docker logs&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="dockerfile">dockerfile&lt;/h2>
&lt;h3 id="ä¸€èˆ¬æ­¥éª¤">ä¸€èˆ¬æ­¥éª¤&lt;/h3>
&lt;ul>
&lt;li>åœ¨ä¸€ä¸ªç›®å½•é‡Œï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º Dockerfile&lt;/li>
&lt;li>åœ¨ Dockerfile çš„ç›®å½•å†…ï¼Œæ‰§è¡Œ docker build&lt;/li>
&lt;/ul>
&lt;h3 id="å¸¸ç”¨æŒ‡ä»¤">å¸¸ç”¨æŒ‡ä»¤&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>FROM æŒ‡å®šåŸºç¡€é•œåƒï¼Œä¸”æ˜¯ç¬¬ä¸€æ¡å‘½ä»¤&lt;/p>
&lt;/li>
&lt;li>
&lt;p>RUN æ‰§è¡Œå‘½ä»¤&lt;/p>
&lt;p>shell æ ¼å¼&lt;/p>
&lt;p>exec æ ¼å¼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>COPY å’Œ ADD æŒ‡ä»¤æ˜¯å¤åˆ¶æ–‡ä»¶&lt;/p>
&lt;/li>
&lt;li>
&lt;p>CMD æŒ‡ä»¤å’Œ RUN ç±»ä¼¼ï¼Œå®¹å™¨å¯åŠ¨å‘½ä»¤&lt;/p>
&lt;p>shell æ ¼å¼&lt;/p>
&lt;p>exec æ ¼å¼&lt;/p>
&lt;p>å‚æ•°åˆ—è¡¨æ ¼å¼&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ENV è®¾ç½®ç¯å¢ƒå˜é‡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>EXPOSE å£°æ˜å¯¹å¤–æš´éœ²çš„ç«¯å£&lt;/p>
&lt;/li>
&lt;li>
&lt;p>WORKDIR æŒ‡å®šå·¥ä½œç›®å½•&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="compose">compose&lt;/h2>
&lt;h3 id="ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µ">ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µ&lt;/h3>
&lt;ul>
&lt;li>service æœåŠ¡ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®ä¾‹ã€‚&lt;/li>
&lt;li>project é¡¹ç›®ï¼šç”±ä¸€ç»„å…³è”çš„å®¹å™¨ç»„æˆä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ docker-compose.yml æ–‡ä»¶ä¸­å®šä¹‰ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="ä¸€èˆ¬æ­¥éª¤-1">ä¸€èˆ¬æ­¥éª¤&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>åœ¨ä¸€ä¸ªé¡¹ç›®ç›®å½•é‡Œï¼Œæ–°å»ºä¸€ä¸ª Dockerfile&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶ docker-compose.yml&lt;/p>
&lt;p>æ¨¡æ¿æ ¼å¼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">version: 3.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> web:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> build: .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;5000:5000&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> redis:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> images: &amp;#34;redis:alpine&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>docker-compose up è¿è¡Œé¡¹ç›®&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤&lt;/h3>
&lt;ol>
&lt;li>docker-compose build é‡æ–°æ„å»ºé¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨&lt;/li>
&lt;li>config éªŒè¯ compose æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®&lt;/li>
&lt;li>down åœæ­¢ up å‘½ä»¤æ‰€å¯åŠ¨çš„å®¹å™¨&lt;/li>
&lt;li>images åˆ—å‡º compose æ–‡ä»¶ä¸­åŒ…å«çš„é•œåƒ&lt;/li>
&lt;li>exec è¿›å…¥æŒ‡å®šçš„å®¹å™¨&lt;/li>
&lt;li>kill å¼ºåˆ¶åœæ­¢æœåŠ¡å®¹å™¨&lt;/li>
&lt;li>ps åˆ—å‡ºç›®å‰æ‰€æœ‰å®¹å™¨&lt;/li>
&lt;li>rm åˆ é™¤åœæ­¢çŠ¶æ€çš„å®¹å™¨&lt;/li>
&lt;li>top æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨çš„è¿›ç¨‹&lt;/li>
&lt;/ol>
&lt;h3 id="compose-æ¨¡æ¿æ–‡ä»¶">compose æ¨¡æ¿æ–‡ä»¶&lt;/h3>
&lt;p>æ¯ä¸ªæœåŠ¡éƒ½å¿…é¡»é€šè¿‡ image æŒ‡ä»¤æŒ‡å®šé•œåƒæˆ–è€… build æŒ‡ä»¤ï¼ˆéœ€è¦ dockerfileï¼‰æ¥æ„å»ºç”Ÿæˆçš„é•œåƒã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>build&lt;/p>
&lt;p>æŒ‡å®š dockerfile æ‰€åœ¨çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œcompose å°†ä¼šåˆ©ç”¨å®ƒæ¥è‡ªåŠ¨æ„å»ºè¿™ä¸ªé•œåƒï¼Œç„¶åä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>depends_on&lt;/p>
&lt;p>è§£å†³å®¹å™¨çš„ä¾èµ–å’Œå…ˆåå¯åŠ¨é—®é¢˜ã€‚ä½†æ˜¯ä¸ä¼šç­‰å¾…å®Œæˆå¯åŠ¨ä¹‹åå†å¯åŠ¨ï¼Œè€Œæ˜¯åœ¨ä»–ä»¬å¯åŠ¨ä¹‹åå°±å»å¯åŠ¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>environment&lt;/p>
&lt;p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåœ¨è¿™é‡ŒæŒ‡å®šç¨‹åºæˆ–è€…å®¹å™¨å¯åŠ¨æ—¶æ‰€ä¾èµ–çš„ç¯å¢ƒå‚æ•°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>expose&lt;/p>
&lt;p>æŒ‡å®šæš´éœ²çš„ç«¯å£ï¼Œåªè¢«è¿æ¥çš„æœåŠ¡è®¿é—®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>image&lt;/p>
&lt;p>æŒ‡å®šé•œåƒåç§°ï¼Œå¦‚æœæœ¬åœ°ä¸å­˜åœ¨åˆ™å»æ‹‰å–è¿™ä¸ªé•œåƒã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>labels&lt;/p>
&lt;p>ä¸ºå®¹å™¨æ·»åŠ  docker å…ƒæ•°æ®ä¿¡æ¯ï¼Œå³ä¸€äº›è¾…åŠ©è¯´æ˜ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ports&lt;/p>
&lt;p>æš´éœ²ç«¯å£ä¿¡æ¯ï¼Œå®¿ä¸»ç«¯å£:å®¹å™¨ç«¯å£ï¼Œæˆ–è€…åªæŒ‡å®šå®¹å™¨ç«¯å£ã€‚&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>express</title><link>https://example.com/p/express/</link><pubDate>Sat, 24 Mar 2018 17:41:01 +0000</pubDate><guid>https://example.com/p/express/</guid><description>&lt;h2 id="express-å¿«é€Ÿå…¥é—¨">Express å¿«é€Ÿå…¥é—¨&lt;/h2>
&lt;h3 id="å®‰è£…">å®‰è£…&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">npm init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm install --save express
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="hello-world">hello world&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var express = require(&amp;#39;express&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var app = express();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/&amp;#39;, function (req, res) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(&amp;#39;Hello World!&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.listen(3000, function () {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#39;Example app listening on port 3000!&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ‰§è¡Œå‘½ä»¤è¿è¡Œåº”ç”¨ç¨‹åº&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">node app.js
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ &lt;a class="link" href="http://localhost:3000/" target="_blank" rel="noopener"
>http://localhost:3000/&lt;/a> ä»¥æŸ¥çœ‹è¾“å‡ºã€‚&lt;/p>
&lt;h2 id="express-ç¨‹åºç”Ÿæˆå™¨">express ç¨‹åºç”Ÿæˆå™¨&lt;/h2>
&lt;h3 id="å®‰è£…-1">å®‰è£…&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">npm install -g express-generator
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç¤ºä¾‹">ç¤ºä¾‹&lt;/h3>
&lt;p>ä»¥ä¸‹è¯­å¥åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­åˆ›å»ºåä¸º &lt;em>myapp&lt;/em> çš„ Express åº”ç”¨ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">express --view=pug myapp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ MacOS æˆ– Linux ä¸Šï¼Œé‡‡ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œæ­¤åº”ç”¨ç¨‹åºï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">DEBUG=myapp:* npm start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥ &lt;code>http://localhost:3000/&lt;/code> ä»¥è®¿é—®æ­¤åº”ç”¨ç¨‹åºã€‚&lt;/p>
&lt;h2 id="è·¯ç”±">è·¯ç”±&lt;/h2>
&lt;h3 id="åŸºæœ¬è·¯ç”±">åŸºæœ¬è·¯ç”±&lt;/h3>
&lt;p>&lt;em>è·¯ç”±&lt;/em>ç”¨äºç¡®å®šåº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹çš„å®¢æˆ·æœºè¯·æ±‚ï¼ŒåŒ…å«ä¸€ä¸ª URIï¼ˆæˆ–è·¯å¾„ï¼‰å’Œä¸€ä¸ªç‰¹å®šçš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚&lt;/p>
&lt;p>æ¯ä¸ªè·¯ç”±å¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¤„ç†ç¨‹åºå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œã€‚&lt;/p>
&lt;p>è·¯ç”±å®šä¹‰é‡‡ç”¨ä»¥ä¸‹ç»“æ„ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.METHOD(PATH, HANDLER)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>app&lt;/code> æ˜¯ &lt;code>express&lt;/code> çš„å®ä¾‹ã€‚&lt;/li>
&lt;li>&lt;code>METHOD&lt;/code> æ˜¯ &lt;a class="link" href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="_blank" rel="noopener"
>HTTP è¯·æ±‚æ–¹æ³•&lt;/a>ã€‚&lt;/li>
&lt;li>&lt;code>PATH&lt;/code> æ˜¯æœåŠ¡å™¨ä¸Šçš„è·¯å¾„ã€‚&lt;/li>
&lt;li>&lt;code>HANDLER&lt;/code> æ˜¯åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œçš„å‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;p>æ¯”å¦‚ç®€å•çš„ Hello worldï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/&amp;#39;, function (req, res) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(&amp;#39;Hello World!&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å“åº”æ–¹æ³•">å“åº”æ–¹æ³•&lt;/h3>
&lt;p>ä¸‹è¡¨ä¸­å“åº”å¯¹è±¡ (&lt;code>res&lt;/code>) çš„æ–¹æ³•å¯ä»¥å‘å®¢æˆ·æœºå‘é€å“åº”ï¼Œå¹¶ç»ˆæ­¢è¯·æ±‚/å“åº”å¾ªç¯ã€‚å¦‚æœæ²¡æœ‰ä»è·¯ç”±å¤„ç†ç¨‹åºè°ƒç”¨å…¶ä¸­ä»»ä½•æ–¹æ³•ï¼Œå®¢æˆ·æœºè¯·æ±‚å°†ä¿æŒæŒ‚èµ·çŠ¶æ€ã€‚&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ–¹æ³•&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res.download" target="_blank" rel="noopener"
>res.download()&lt;/a>&lt;/td>
&lt;td>æç¤ºå°†è¦ä¸‹è½½æ–‡ä»¶ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res.end" target="_blank" rel="noopener"
>res.end()&lt;/a>&lt;/td>
&lt;td>ç»“æŸå“åº”è¿›ç¨‹ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res.json" target="_blank" rel="noopener"
>res.json()&lt;/a>&lt;/td>
&lt;td>å‘é€ JSON å“åº”ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res.jsonp" target="_blank" rel="noopener"
>res.jsonp()&lt;/a>&lt;/td>
&lt;td>åœ¨ JSONP çš„æ”¯æŒä¸‹å‘é€ JSON å“åº”ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res.redirect" target="_blank" rel="noopener"
>res.redirect()&lt;/a>&lt;/td>
&lt;td>é‡å®šå‘è¯·æ±‚ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res.render" target="_blank" rel="noopener"
>res.render()&lt;/a>&lt;/td>
&lt;td>å‘ˆç°è§†å›¾æ¨¡æ¿ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res.send" target="_blank" rel="noopener"
>res.send()&lt;/a>&lt;/td>
&lt;td>å‘é€å„ç§ç±»å‹çš„å“åº”ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res.sendFile" target="_blank" rel="noopener"
>res.sendFile&lt;/a>&lt;/td>
&lt;td>ä»¥å…«ä½å…ƒæµå½¢å¼å‘é€æ–‡ä»¶ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res.sendStatus" target="_blank" rel="noopener"
>res.sendStatus()&lt;/a>&lt;/td>
&lt;td>è®¾ç½®å“åº”çŠ¶æ€ç å¹¶ä»¥å“åº”ä¸»ä½“å½¢å¼å‘é€å…¶å­—ç¬¦ä¸²è¡¨ç¤ºã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="approute">app.route()&lt;/h3>
&lt;p>å¯ä»¥ä½¿ç”¨ &lt;code>app.route()&lt;/code> ä¸ºè·¯ç”±è·¯å¾„åˆ›å»ºå¯é“¾æ¥çš„è·¯ç”±å¤„ç†ç¨‹åºã€‚ å› ä¸ºåœ¨å•ä¸€ä½ç½®æŒ‡å®šè·¯å¾„ï¼Œæ‰€ä»¥å¯ä»¥å‡å°‘å†—ä½™å’Œè¾“å…¥é”™è¯¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.route(&amp;#39;/book&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .get(function(req, res) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(&amp;#39;Get a random book&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .post(function(req, res) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(&amp;#39;Add a book&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> })
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .put(function(req, res) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(&amp;#39;Update the book&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="expressrouter">express.Router&lt;/h3>
&lt;p>ä½¿ç”¨ &lt;code>express.Router&lt;/code> ç±»æ¥åˆ›å»ºå¯å®‰è£…çš„æ¨¡å—åŒ–è·¯ç”±å¤„ç†ç¨‹åºã€‚&lt;code>Router&lt;/code> å®ä¾‹æ˜¯å®Œæ•´çš„ä¸­é—´ä»¶å’Œè·¯ç”±ç³»ç»Ÿï¼›å› æ­¤ï¼Œå¸¸å¸¸å°†å…¶ç§°ä¸ºâ€œå¾®å‹åº”ç”¨ç¨‹åºâ€ã€‚&lt;/p>
&lt;p>ä»¥ä¸‹ç¤ºä¾‹å°†è·¯ç”±å™¨åˆ›å»ºä¸ºæ¨¡å—ï¼Œåœ¨å…¶ä¸­è£…å…¥ä¸­é—´ä»¶ï¼Œå®šä¹‰ä¸€äº›è·¯ç”±ï¼Œç„¶åå®‰è£…åœ¨ä¸»åº”ç”¨ç¨‹åºçš„è·¯å¾„ä¸­ã€‚&lt;/p>
&lt;p>åœ¨åº”ç”¨ç¨‹åºç›®å½•ä¸­åˆ›å»ºåä¸º &lt;code>birds.js&lt;/code> çš„è·¯ç”±å™¨æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var express = require(&amp;#39;express&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">var router = express.Router();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// middleware that is specific to this router
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">router.use(function timeLog(req, res, next) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> console.log(&amp;#39;Time: &amp;#39;, Date.now());
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> next();
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// define the home page route
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">router.get(&amp;#39;/&amp;#39;, function(req, res) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(&amp;#39;Birds home page&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">// define the about route
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">router.get(&amp;#39;/about&amp;#39;, function(req, res) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.send(&amp;#39;About birds&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports = router;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ç€ï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­è£…å…¥è·¯ç”±å™¨æ¨¡å—ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">var birds = require(&amp;#39;./birds&amp;#39;);
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app.use(&amp;#39;/birds&amp;#39;, birds);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ­¤åº”ç”¨ç¨‹åºç°åœ¨å¯å¤„ç†é’ˆå¯¹ &lt;code>/birds&lt;/code> å’Œ &lt;code>/birds/about&lt;/code> çš„è¯·æ±‚ï¼Œè°ƒç”¨ç‰¹å®šäºæ­¤è·¯ç”±çš„ &lt;code>timeLog&lt;/code> ä¸­é—´ä»¶å‡½æ•°ã€‚&lt;/p>
&lt;h2 id="ä¸­é—´ä»¶">ä¸­é—´ä»¶&lt;/h2>
&lt;p>&lt;em>ä¸­é—´ä»¶&lt;/em>å‡½æ•°èƒ½å¤Ÿè®¿é—®&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#req" target="_blank" rel="noopener"
>è¯·æ±‚å¯¹è±¡&lt;/a> (&lt;code>req&lt;/code>)ã€&lt;a class="link" href="http://expressjs.com/zh-cn/4x/api.html#res" target="_blank" rel="noopener"
>å“åº”å¯¹è±¡&lt;/a> (&lt;code>res&lt;/code>) ä»¥åŠåº”ç”¨ç¨‹åºçš„è¯·æ±‚/å“åº”å¾ªç¯ä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°é€šå¸¸ç”±åä¸º &lt;code>next&lt;/code> çš„å˜é‡æ¥è¡¨ç¤ºã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>next()&lt;/code> å‡½æ•°ä¸æ˜¯ Node.js æˆ– Express API çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¼ é€’ç»™ä¸­é—´ä»¶å‡½æ•°çš„ç¬¬ä¸‰è‡ªå˜é‡ã€‚&lt;code>next()&lt;/code> å‡½æ•°å¯ä»¥å‘½åä¸ºä»»ä½•åç§°ï¼Œä½†æ˜¯æŒ‰çº¦å®šï¼Œå§‹ç»ˆå‘½åä¸ºâ€œnextâ€ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä¸­é—´ä»¶å‡½æ•°å¯ä»¥æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š&lt;/p>
&lt;ul>
&lt;li>æ‰§è¡Œä»»ä½•ä»£ç ã€‚&lt;/li>
&lt;li>å¯¹è¯·æ±‚å’Œå“åº”å¯¹è±¡è¿›è¡Œæ›´æ”¹ã€‚&lt;/li>
&lt;li>ç»“æŸè¯·æ±‚/å“åº”å¾ªç¯ã€‚&lt;/li>
&lt;li>è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœå½“å‰ä¸­é—´ä»¶å‡½æ•°æ²¡æœ‰ç»“æŸè¯·æ±‚/å“åº”å¾ªç¯ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»è°ƒç”¨ &lt;code>next()&lt;/code>ï¼Œä»¥å°†æ§åˆ¶æƒä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚å¦åˆ™ï¼Œè¯·æ±‚å°†ä¿æŒæŒ‚èµ·çŠ¶æ€ã€‚&lt;/p>
&lt;p>Express åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç±»å‹çš„ä¸­é—´ä»¶ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://expressjs.com/zh-cn/guide/using-middleware.html#middleware.application" target="_blank" rel="noopener"
>åº”ç”¨å±‚ä¸­é—´ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://expressjs.com/zh-cn/guide/using-middleware.html#middleware.router" target="_blank" rel="noopener"
>è·¯ç”±å™¨å±‚ä¸­é—´ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://expressjs.com/zh-cn/guide/using-middleware.html#middleware.error-handling" target="_blank" rel="noopener"
>é”™è¯¯å¤„ç†ä¸­é—´ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://expressjs.com/zh-cn/guide/using-middleware.html#middleware.built-in" target="_blank" rel="noopener"
>å†…ç½®ä¸­é—´ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://expressjs.com/zh-cn/guide/using-middleware.html#middleware.third-party" target="_blank" rel="noopener"
>ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="æ¨¡æ¿å¼•æ“">æ¨¡æ¿å¼•æ“&lt;/h2>
&lt;p>åœ¨ Express å¯ä»¥å‘ˆç°æ¨¡æ¿æ–‡ä»¶ä¹‹å‰ï¼Œå¿…é¡»è®¾ç½®ä»¥ä¸‹åº”ç”¨ç¨‹åºè®¾ç½®ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>views&lt;/code>ï¼šæ¨¡æ¿æ–‡ä»¶æ‰€åœ¨ç›®å½•ã€‚ä¾‹å¦‚ï¼š&lt;code>app.set('views', './views')&lt;/code>&lt;/li>
&lt;li>&lt;code>view engine&lt;/code>ï¼šè¦ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“ã€‚ä¾‹å¦‚ï¼š&lt;code>app.set('view engine', 'pug')&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>ç„¶åå®‰è£…å¯¹åº”çš„æ¨¡æ¿å¼•æ“ npm åŒ…ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">npm install pug --save
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ &lt;code>views&lt;/code> ç›®å½•ä¸­åˆ›å»ºåä¸º &lt;code>index.pug&lt;/code> çš„ Pug æ¨¡æ¿æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> head
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> title!= title
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> body
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> h1!= message
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>éšååˆ›å»ºè·¯ç”±ä»¥å‘ˆç° &lt;code>index.pug&lt;/code> æ–‡ä»¶ã€‚å¦‚æœæœªè®¾ç½® &lt;code>view engine&lt;/code> å±æ€§ï¼Œå¿…é¡»æŒ‡å®š &lt;code>view&lt;/code> æ–‡ä»¶çš„æ‰©å±•åã€‚å¦åˆ™ï¼Œå¯ä»¥å°†å…¶å¿½ç•¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">app.get(&amp;#39;/&amp;#39;, function (req, res) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> res.render(&amp;#39;index&amp;#39;, { title: &amp;#39;Hey&amp;#39;, message: &amp;#39;Hello there!&amp;#39;});
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">});
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‘ä¸»é¡µå‘å‡ºè¯·æ±‚æ—¶ï¼Œ&lt;code>index.pug&lt;/code> æ–‡ä»¶å°†å‘ˆç°ä¸º HTMLã€‚&lt;/p></description></item><item><title>ç¢ç¢å¿µ</title><link>https://example.com/p/%E7%A2%8E%E7%A2%8E%E5%BF%B5/</link><pubDate>Sat, 24 Mar 2018 15:55:58 +0000</pubDate><guid>https://example.com/p/%E7%A2%8E%E7%A2%8E%E5%BF%B5/</guid><description>&lt;p>ä¸€ç›´æ²¡æœ‰æœºä¼šå†™ 2017 çš„å¹´ç»ˆæ€»ç»“ï¼Œæƒ³åˆ°å»å¹´å†™çš„æ–°çš„ä¸€å¹´çš„è®¡åˆ’ï¼Œå¥½åƒè‡ªå·±éƒ½æ²¡æœ‰æŒ‰ç…§è®¡åˆ’æ¥åšï¼Œè€Œä¸”å†™çš„è®¡åˆ’ä¹Ÿä¸çŸ¥é“å†™åˆ°å“ªé‡Œå»äº†ã€‚&lt;/p>
&lt;p>ç«™åœ¨ç°åœ¨çš„æ—¶é—´ç‚¹å»å®¡è§†è¿‡å»çš„ä¸€å¹´ï¼Œè¿™ä¸ªæœ¬å‘½å¹´è¿˜æ˜¯å‘ç”Ÿäº†å¾ˆå¤šå¯¹è‡ªå·±çš„æœªæ¥æœ‰ç€æ¯”è¾ƒå¤§å½±å“çš„çš„äº‹æƒ…ã€‚æˆ¿å­+å¥³æœ‹å‹+æ–°å·¥ä½œï¼Œè¿™äº›äº‹æƒ…çªç„¶çš„æ¶Œç°å‡ºæ¥ï¼Œæå¾—è‡ªå·±æœ‰äº›æ‰‹å¿™è„šä¹±ã€‚&lt;/p>
&lt;p>æ¢³ç†ä¸€ä¸‹è‡ªå·±çš„æ”¶è·å§ï¼š&lt;/p>
&lt;p>é¦–å…ˆå½“ç„¶æ˜¯ç»“è¯†äº†ä¸€å¸®å°ä¼™ä¼´ï¼Œæˆ‘ä»¬ä¸€èµ·æ‰“å†œè¯ï¼Œä¸€èµ·è°ƒ bugï¼Œä¸€èµ·å¥‹æˆ˜åŒåä¸€ã€‚&lt;/p>
&lt;p>åœ¨æŠ€æœ¯ä¸Šä¹Ÿæœ‰äº†ä¸€å®šçš„æå‡ï¼Œå…³é”®æ˜¯è‡ªå·±çš„è§†é‡ä¸Šæœ‰äº†å¾ˆå¤§çš„å˜åŒ–ï¼Œä¸å†æ˜¯åƒå½“åˆå¤§å­¦çš„æ—¶å€™ï¼Œä¸çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆã€‚è¿™é‡Œå¯¹æˆ‘å½±å“æ¯”è¾ƒå¤§çš„ä¸€ä¸ªæ˜¯ phodalï¼Œçœ‹äº†ä»–å†™çš„åšå®¢å’Œä¹¦ä¹‹åï¼Œå¯¹è‡ªå·±çš„è§¦åŠ¨å¾ˆå¤§ï¼Œæ„Ÿè§‰ä»–æ‡‚å¾—å¾ˆå¤šä¸œè¥¿ï¼ŒçŸ¥è¯†é¢å¾ˆå¹¿ï¼Œè€Œä¸”èƒ½å¤Ÿå†™å‡ºæ¥ï¼Œæ‰©å¤§äº†è‡ªå·±çš„å½±å“åŠ›ï¼Œæ‰€ä»¥æˆ‘å°±æƒ³ç€è‡ªå·±èƒ½ä¸èƒ½æ¨¡ä»¿ä»–ã€‚å¦å¤–ä¸€ä¸ªå°±æ˜¯ç”°å“¥äº†ï¼Œæˆ‘è§‰å¾—ä»–æ˜¯æˆ‘è®¤è¯†çš„åŒé¾„äººä¸­ï¼Œæ¯”è¾ƒæœ‰è‡ªå·±æƒ³æ³•çš„ä¸€ä¸ªäººï¼Œæ‰“è¿› acm world final çš„äººå°±æ˜¯ä¸ä¸€æ ·ï¼Œä»–çœ‹é—®é¢˜çš„è§’åº¦æ¯”è¾ƒæ–°é¢–ï¼Œè€Œä¸”å½’çº³æ€»ç»“èƒ½åŠ›å¾ˆå¼ºï¼Œç»™äº†æˆ‘ä¸€äº›åœ¨ç¼–ç¨‹ä¸Šçš„æŒ‡ç‚¹ï¼Œè®©æˆ‘å°‘èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚&lt;/p>
&lt;p>ä¹Ÿå¾ˆæ„Ÿè°¢è‡ªå·±çš„å‡ ä¸ªå®¤å‹ï¼Œè®©æˆ‘ä¸å†æ„Ÿåˆ°å­¤å•ã€‚è‡ªä»åˆ˜å·æ¥äº†æ·±åœ³ä¹‹åï¼Œ11I æ›´æ¬¢ä¹äº†ï¼Œä¹Ÿæ›´æ±¡äº†ã€‚æˆ‘ä»¬ç»å¸¸åœ¨å®¶é‡Œç…®ç«é”…åƒï¼Œåƒçš„ç‰¹åˆ«çˆ½ï¼Œä»¥è‡³äºç°åœ¨æˆ‘éƒ½ä¸æƒ³å»ç«é”…åº—é‡Œåƒï¼Œæ€»è§‰å¾—åœ¨å®¶åƒçš„æ¯”è¾ƒçˆ½ã€‚&lt;/p>
&lt;p>å¥³æœ‹å‹ï¼Œå‡ºä¹æˆ‘çš„æ„æ–™ï¼Œç°åœ¨æƒ³æƒ³è¿˜æ˜¯æ„Ÿè§‰æ´»åœ¨æ¢¦é‡Œï¼Œç•¥è¿‡ç•¥è¿‡ã€‚&lt;/p>
&lt;p>è‡³äºä¹°æˆ¿ï¼Œæ²¡ä¹°ä¹‹å‰çš„æƒ³æ³•ç›²ç›®ä¹è§‚ï¼Œåæ¥ç®—äº†ä¸€ä¸‹ï¼Œè¦æ˜¯åœ¨æ·±åœ³ä¹°æˆ¿çš„è¯ï¼Œæˆ‘æ¯ä¸ªæœˆçš„æˆ¿è´·æ˜¯ 2 ä¸‡å¤šï¼Œå…³é”®æ˜¯é¦–ä»˜è¿˜ä¸ä¸€å®šèƒ½æå¾—å‡ºæ¥ã€‚è¿˜æ˜¯å»ºè®®åœ¨åŒ—ä¸Šå¹¿æ·±å·¥ä½œçš„äººï¼Œæœ‰æœºä¼šç°åœ¨è€å®¶çš„çœä¼šä¸€ç±»çš„åŸå¸‚ï¼Œå…ˆæä¸€å¥—ï¼Œä»¥åå¯ä»¥ç½®æ¢ï¼Œèƒ½ä¸Šè½¦çš„æ—¶å€™æ—©ç‚¹ä¸Šè½¦ï¼Œä¹Ÿæ˜¯ç›¸å½“äºå˜ç›¸æ”’é’±äº†ã€‚å¯¹äºä¸ä¼šæŠ•èµ„æˆ–è€…åˆ›ä¸šçš„æœ‹å‹ï¼Œæœ‰æ—¶å€™è¾›è¾›è‹¦è‹¦å¹²ä¸€å¹´ä¹‹åç®—ä¸€ä¸‹ï¼Œä¸çŸ¥ä¸è§‰ä¸­ï¼Œè‡ªå·±çš„é’±éƒ½ä¸çŸ¥é“èŠ±åœ¨äº†å“ªé‡Œï¼Œå¦‚æœæœ‰æˆ¿è´·çš„è¯ï¼Œç­‰ç”¨çš„æ—¶å€™è¯´ä¸å®šå–æ‰è¿˜èƒ½èµšä¸€äº›é’±ã€‚&lt;/p>
&lt;p>æ„Ÿè§‰è‡ªå·±æ¢å…¬å¸è¿˜æ˜¯æŒºæˆå‰§åŒ–çš„ï¼Œå½“æ—¶ä¹Ÿæ²¡æƒ³ç€çœŸçš„å°±æ¢å·¥ä½œå§ï¼Œåªæ˜¯æƒ³æŠ•æŠ•ç®€å†ï¼Œç„¶åå»é¢è¯•ä¸€æ³¢çœ‹çœ‹è‡ªå·±çš„æ°´å¹³æ€ä¹ˆæ ·ã€‚æ€»è§‰å¾—è‡ªå·±åœ¨æ‹›é“¶çš„èˆ’é€‚åŒºå¾…çš„å¤ªä¹…äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¿€æƒ…äº†ã€‚åŒæ—¶è‡ªå·±ä¹Ÿæƒ³å‡ºæ¥è¯•è¯•ï¼Œä¸‡ä¸€å…¬å¸ä¸Šå¸‚ï¼Œæ‘‡èº«ä¸€å˜æˆä¸ºå¯Œç¿äº†ã€‚å½“ç„¶è¿™æ˜¯ç™½æ—¥æ¢¦äº†ï¼Œè·¯è¿˜æ˜¯è¦ä¸€æ­¥ä¸€æ­¥çš„èµ°çš„ã€‚&lt;/p>
&lt;p>æ€»æ„Ÿè§‰è‡ªå·±æƒ³äº†å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯å°±æ˜¯å†™ä¸å‡ºæ¥ï¼Œè‡ªå·±è®²æ•…äº‹çš„èƒ½åŠ›è¿˜æ˜¯è¦æå‡ä¸€äº›ã€‚&lt;/p></description></item><item><title>Java å†…å­˜æ¨¡å‹å’Œçº¿ç¨‹</title><link>https://example.com/p/java-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/</link><pubDate>Thu, 22 Mar 2018 19:16:37 +0000</pubDate><guid>https://example.com/p/java-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/</guid><description>&lt;h1 id="java-å†…å­˜æ¨¡å‹å’Œçº¿ç¨‹">java å†…å­˜æ¨¡å‹å’Œçº¿ç¨‹&lt;/h1>
&lt;blockquote>
&lt;p>å¹¶å‘ä¸ä¸€å®šä¾èµ–å¤šçº¿ç¨‹ï¼Œä½†æ˜¯åœ¨ java é‡Œé¢è°ˆè®ºå¹¶å‘ï¼Œå¤§å¤šä¸çº¿ç¨‹è„±ä¸å¼€å…³ç³»ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>çº¿ç¨‹æ˜¯å¤§å¤šæ˜¯é¢è¯•éƒ½ä¼šé—®åˆ°çš„é—®é¢˜ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œçº¿ç¨‹æ˜¯æ¯”è¿›ç¨‹æ›´è½»é‡çº§çš„è°ƒåº¦å•ä½ï¼Œçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ã€‚ä¹‹å‰é¢è¯•çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è¿™æ ·å›ç­”ï¼Œè¿·è¿·ç³Šç³Šï¼Œæ²¡æœ‰ä¸€ä¸ªæ¸…æ™°çš„æ¦‚å¿µã€‚&lt;/p>
&lt;p>å¤§å­¦çš„å­¦ä¹ çš„æ—¶å€™ï¼Œå†™ C å’Œ C++ï¼Œè‡ªå·±éƒ½æ²¡æœ‰ç”¨è¿‡å¤šçº¿ç¨‹ï¼Œçœ‹è¿‡ä¸€ä¸ª Windows ç¼–ç¨‹çš„ä¹¦ï¼Œé‡Œé¢è®²å¤šçº¿ç¨‹çš„æ—¶å€™ï¼Œä¸€å¤§å †å¤§å†™çš„å­—æ¯ï¼Œçœ‹ç€ä¸€ç‚¹éƒ½ä¸çˆ½ï¼Œä¹Ÿæ˜¯æƒ­æ„§ã€‚åæ¥çš„å®ä¹ ï¼Œå†™ unityï¼Œunity çš„ C#ä½¿ç”¨çš„æ˜¯åç¨‹ã€‚åªæœ‰åœ¨åšäº† java åç«¯ä¹‹åï¼Œæ‰çŸ¥é“çº¿ç¨‹åˆ°åº•æ˜¯æ€ä¹ˆç”¨çš„ã€‚äº†è§£äº†&lt;strong>java å†…å­˜æ¨¡å‹&lt;/strong>ä¹‹åï¼Œä»”ç»†çœ‹äº†ä¸€äº›èµ„æ–™ï¼Œå¯¹ java çº¿ç¨‹æœ‰äº†æ›´æ·±å…¥çš„è®¤è¯†ï¼Œæ•´ç†å†™æˆè¿™ç¯‡æ–‡ç« ï¼Œç”¨æ¥ä»¥åå‚è€ƒã€‚&lt;/p>
&lt;h2 id="1-java-å†…å­˜æ¨¡å‹">1 Java å†…å­˜æ¨¡å‹&lt;/h2>
&lt;p>Java è™šæ‹Ÿæœºè§„èŒƒè¯•å›¾å®šä¹‰ä¸€ç§ java å†…å­˜æ¨¡å‹æ¥å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œä»¥å®ç°è®© java ç¨‹åºåœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´æ€§å†…å­˜è®¿é—®çš„æ•ˆæœã€‚&lt;/p>
&lt;p>java å†…å­˜æ¨¡å‹çš„ä¸»è¦ç›®æ ‡æ˜¯å®šä¹‰ç¨‹åºä¸­å„ä¸ªå˜é‡çš„è®¿é—®è§„åˆ™ï¼Œå³åœ¨è™šæ‹Ÿæœºä¸­å°†å˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­å–å‡ºå˜é‡çš„åº•å±‚ç»†èŠ‚ã€‚ï¼ˆè¿™é‡Œæ‰€è¯´çš„å˜é‡åŒ…æ‹¬äº†å®ä¾‹å­—æ®µã€é™æ€å­—æ®µå’Œæ•°ç»„ç­‰ï¼Œä½†ä¸åŒ…æ‹¬å±€éƒ¨å˜é‡ä¸æ–¹æ³•å‚æ•°ï¼Œå› ä¸ºè¿™äº›æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œä¸è¢«å…±äº«ã€‚ï¼‰&lt;/p>
&lt;h3 id="11-ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜">1.1 ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜&lt;/h3>
&lt;p>java è§„å®šæ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨&lt;strong>ä¸»å†…å­˜&lt;/strong>ã€‚æ¯æ¡çº¿ç¨‹æœ‰è‡ªå·±çš„&lt;strong>å·¥ä½œå†…å­˜&lt;/strong>ã€‚&lt;/p>
&lt;p>çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­çš„å˜é‡æ˜¯ä¸»å†…å­˜ä¸­è¯¥å˜é‡çš„å‰¯æœ¬ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ä¸­çš„å˜é‡ã€‚ä¸åŒçº¿ç¨‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡å€¼çš„ä¼ é€’éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚&lt;/p>
&lt;h3 id="12-å†…å­˜ä¹‹é—´çš„äº¤äº’">1.2 å†…å­˜ä¹‹é—´çš„äº¤äº’&lt;/h3>
&lt;p>å…³äºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„å…·ä½“äº¤äº’åè®®ï¼Œjava å†…å­˜æ¨¡å‹å®šä¹‰äº† 8 ä¸­æ“ä½œæ¥å®Œæˆï¼Œè™šæ‹Ÿæœºå®ç°çš„æ—¶å€™å¿…é¡»ä¿è¯æ¯ä¸ªæ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œä¸å¯åˆ†å‰²çš„ï¼ˆå¯¹äº long å’Œ double æœ‰ä¾‹å¤–ï¼‰&lt;/p>
&lt;ul>
&lt;li>lock é”å®šï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼Œä»£è¡¨ä¸€ä¸ªå˜é‡æ˜¯ä¸€æ¡çº¿ç¨‹ç‹¬å ã€‚&lt;/li>
&lt;li>unlock è§£é”ï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼ŒæŠŠé”å®šçš„å˜é‡è§£é”ã€‚&lt;/li>
&lt;li>read è¯»å–ï¼šä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼ŒæŠŠå˜é‡å€¼ä»ä¸»å†…å­˜ä¼ åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä¾› load ä½¿ç”¨ã€‚&lt;/li>
&lt;li>load è½½å…¥ï¼šä½œç”¨å·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠä¸Šä¸€ä¸ª read åˆ°çš„å€¼æ”¾å…¥åˆ°å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ä¸­ã€‚&lt;/li>
&lt;li>use ä½¿ç”¨ï¼šä½œç”¨äºå·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ã€‚&lt;/li>
&lt;li>assignï¼šä½œç”¨äºå·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠæ‰§è¡Œå¼•æ“æ‰§è¡Œè¿‡çš„å€¼èµ‹ç»™å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ã€‚&lt;/li>
&lt;li>store å­˜å‚¨ï¼šä½œç”¨äºå·¥ä½œå†…å­˜å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„å˜é‡å€¼ä¼ ç»™ä¸»å†…å­˜ï¼Œä¾› write ä½¿ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™äº›æ“ä½œè¦æ»¡è¶³ä¸€å®šçš„è§„åˆ™ã€‚&lt;/p>
&lt;h3 id="13-volatile">1.3 volatile&lt;/h3>
&lt;p>volatile å¯ä»¥è¯´æ˜¯ java çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ã€‚&lt;/p>
&lt;p>å½“ä¸€ä¸ªå˜é‡è¢«å®šä¹‰ä¸º volatile ä¹‹åï¼Œä»–å°±å…·å¤‡ä¸¤ç§ç‰¹æ€§ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ä¿è¯æ­¤å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„&lt;/p>
&lt;p>è¿™é‡Œçš„å¯è§æ€§æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸå˜é‡çš„å€¼ï¼Œæ–°å€¼å¯¹äºå…¶ä»–çº¿ç¨‹æ¥è®²æ˜¯ç«‹å³å¾—çŸ¥çš„ã€‚è€Œæ™®é€šå˜é‡åšä¸åˆ°ï¼Œå› ä¸ºæ™®é€šå˜é‡éœ€è¦ä¼ é€’åˆ°ä¸»å†…å­˜ä¸­æ‰å¯ä»¥åšåˆ°è¿™ç‚¹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç¦æ­¢æŒ‡ä»¤é‡æ’&lt;/p>
&lt;p>å¯¹äºæ™®é€šå˜é‡æ¥è¯´ï¼Œä»…ä»…ä¼šä¿è¯åœ¨è¯¥æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€æœ‰ä¾èµ–èµ‹å€¼ç»“æœçš„åœ°æ–¹éƒ½èƒ½è·å–åˆ°æ­£ç¡®çš„ç»“æœï¼Œè€Œä¸èƒ½ä¿è¯å˜é‡èµ‹å€¼æ“ä½œçš„é¡ºåºä¸ç¨‹åºä»£ç ä¸­çš„æ‰§æ€§é¡ºåºä¸€è‡´ã€‚&lt;/p>
&lt;p>è‹¥ç”¨ volatile ä¿®é¥°å˜é‡ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šåœ¨æŒ‡ä»¤åºåˆ—ä¸­æ’å…¥å†…å­˜å±éšœæ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>volatile å¯¹äºå•ä¸ªçš„å…±äº«å˜é‡çš„è¯»/å†™å…·æœ‰åŸå­æ€§ï¼Œä½†æ˜¯åƒ num++è¿™ç§å¤åˆæ“ä½œï¼Œvolatile æ— æ³•ä¿è¯å…¶åŸå­æ€§ã€‚&lt;/p>
&lt;h3 id="14-long-å’Œ-double">1.4 long å’Œ double&lt;/h3>
&lt;p>long å’Œ double æ˜¯ä¸€ä¸ª 64 ä½çš„æ•°æ®ç±»å‹ã€‚&lt;/p>
&lt;p>è™šæ‹Ÿæœºå…è®¸å°†æ²¡æœ‰è¢« volatile ä¿®é¥°çš„ 64 ä½å˜é‡çš„è¯»å†™æ“ä½œåˆ†ä¸ºä¸¤æ¬¡ 32 ä½çš„æ“ä½œæ¥è¿›è¡Œã€‚å› æ­¤å½“å¤šä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ªæ²¡æœ‰å£°æ˜ä¸º volatile çš„ long æˆ–è€… double å˜é‡ï¼Œå¯èƒ½å‡ºç°æ“ä½œåŠä¸ªå˜é‡çš„æƒ…å†µã€‚&lt;/p>
&lt;p>ä½†æ˜¯è¿™ç§æƒ…å†µæ˜¯ç½•è§çš„ï¼Œä¸€èˆ¬å•†ç”¨çš„è™šæ‹Ÿæœºéƒ½æ˜¯è®² long å’Œ double çš„è¯»å†™å½“æˆåŸå­æ“ä½œè¿›è¡Œçš„ï¼Œæ‰€ä»¥åœ¨å†™ä»£ç æ—¶ä¸éœ€è¦å°† long å’Œ double ä¸“é—¨å£°æ˜ä¸º volatileã€‚&lt;/p>
&lt;h3 id="15-åŸå­æ€§å¯è§æ€§å’Œæœ‰åºæ€§">1.5 åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§&lt;/h3>
&lt;p>java çš„å†…å­˜æ¨¡å‹æ˜¯å›´ç»•ç€åœ¨å¹¶å‘è¿‡ç¨‹ä¸­å¦‚ä½•å¤„ç†åŸå­æ€§ã€å¯è§æ€§å’Œæœ‰åºæ€§ã€‚&lt;/p>
&lt;p>&lt;strong>åŸå­æ€§&lt;/strong>&lt;/p>
&lt;p>åŸºæœ¬æ•°æ®ç±»å‹çš„è®¿é—®è¯»å†™æ˜¯å‰§æœ¬åŸå­æ€§çš„ã€‚&lt;/p>
&lt;p>å¦‚æœéœ€è¦ä¸€ä¸ªæ›´å¤§èŒƒå›´çš„åŸå­æ€§ä¿è¯ï¼Œjava æä¾›äº† lock å’Œ unlock æ“ä½œï¼Œå¯¹åº”äºå†™ä»£ç æ—¶å°±æ˜¯ synchronized å…³é”®å­—ï¼Œå› æ­¤åœ¨ synchronized å—ä¹‹é—´çš„æ“ä½œä¹Ÿæ˜¯å…·å¤‡åŸå­æ€§çš„ã€‚&lt;/p>
&lt;p>&lt;strong>å¯è§æ€§&lt;/strong>&lt;/p>
&lt;p>å¯è§æ€§æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹åˆ°äº†ä¸€ä¸ªå…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çš„çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚å…±äº«å˜é‡çš„è¯»å†™éƒ½æ˜¯é€šè¿‡ä¸»å†…å­˜ä½œä¸ºåª’ä»‹æ¥å¤„ç†å¯è§æ€§çš„ã€‚&lt;/p>
&lt;p>volatile çš„ç‰¹æ®Šè§„åˆ™ä¿è¯äº†æ–°å€¼å¯ä»¥ç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œæ¯æ¬¡ä½¿ç”¨å‰ç«‹å³ä»ä¸»å†…å­˜åˆ·æ–°ã€‚&lt;/p>
&lt;p>synchronized åŒæ­¥å—çš„å¯è§æ€§æ˜¯ç”±â€å¯¹äºä¸€ä¸ªå˜é‡ unlock æ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥å›å†…å­˜ä¸­â€œæ¥å®ç°çš„ã€‚&lt;/p>
&lt;p>final çš„å¯è§æ€§æ˜¯æŒ‡è¢« final ä¿®é¥°çš„å­—æ®µåœ¨æ„é€ å™¨ä¸­ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œå¹¶ä¸”æ„é€ å™¨æ²¡æœ‰æŠŠ this çš„å¼•ç”¨ä¼ é€’å‡ºå»ï¼Œé‚£ä¹ˆåœ¨å…¶ä»–çº¿ç¨‹ä¸­å°±èƒ½çœ‹è§ final å­—æ®µçš„å€¼ã€‚&lt;/p>
&lt;p>&lt;strong>æœ‰åºæ€§&lt;/strong>&lt;/p>
&lt;p>å¦‚æœåœ¨æœ¬çº¿ç¨‹å†…è§‚å¯Ÿï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼›å¦‚æœåœ¨ä¸€ä¸ªçº¿ç¨‹å†…è§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚
volatile å…³é”®å­—æœ¬èº«å°±åŒ…å«äº†ç¦æ­¢æŒ‡ä»¤é‡æ’çš„è¯­ä¹‰ï¼Œè€Œ synchronized åˆ™æ˜¯ç”±â€œä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œ lock æ“ä½œâ€è¿™æ¡è§„åˆ™æ¥å®ç°æœ‰åºæ€§çš„ã€‚&lt;/p>
&lt;h3 id="16-å…ˆè¡Œå‘ç”ŸåŸåˆ™">1.6 å…ˆè¡Œå‘ç”ŸåŸåˆ™&lt;/h3>
&lt;p>å¦‚æœ java å†…å­˜æ¨¡å‹ä¸­çš„æ‰€æœ‰æœ‰åºæ€§éƒ½æ˜¯é ç€ volatile å’Œ synchronized æ¥å®Œæˆï¼Œé‚£æœ‰äº›æ“ä½œå°†ä¼šå˜å¾—å¾ˆç¹çï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å†™ java å¹¶å‘ä»£ç çš„æ—¶å€™æ²¡æœ‰æ„Ÿå—åˆ°è¿™ä¸€ç‚¹ï¼Œéƒ½æ˜¯å› ä¸º java æœ‰ä¸€ä¸ªâ€œå…ˆè¡Œå‘ç”Ÿâ€åŸåˆ™ã€‚&lt;/p>
&lt;p>å…ˆè¡Œå‘ç”Ÿæ˜¯ java å†…å­˜æ¨¡å‹ä¸­å®šä¹‰çš„ä¸¤é¡¹æ“ä½œä¹‹é—´çš„ååºå…³ç³»ï¼Œå¦‚æœè¯´æ“ä½œ A å…ˆå‘ç”Ÿäºæ“ä½œ Bï¼Œå…¶å®å°±æ˜¯è¯´åœ¨å‘ç”Ÿ B ä¹‹å‰ï¼ŒA äº§ç”Ÿçš„å½±å“éƒ½èƒ½è¢« B è§‚å¯Ÿåˆ°ï¼Œè¿™é‡Œçš„å½±å“åŒ…æ‹¬ä¿®æ”¹äº†å†…å­˜ä¸­å…±äº«å˜é‡çš„å€¼ã€å‘é€äº†æ¶ˆæ¯ã€è°ƒç”¨äº†æ–¹æ³•ç­‰ç­‰ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç¨‹åºæ¬¡åºè§„åˆ™&lt;/p>
&lt;p>åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç¨‹åºä»£ç æ§åˆ¶æµé¡ºåºæ‰§è¡Œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç®¡ç¨‹é”å®šè§„åˆ™&lt;/p>
&lt;p>unlock å‘ç”Ÿåœ¨åé¢æ—¶é—´åŒä¸€ä¸ªé”çš„ lock æ“ä½œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>volatile å˜é‡è§„åˆ™&lt;/p>
&lt;p>volatile å˜é‡çš„å†™æ“ä½œå‘ç”Ÿåœ¨åé¢æ—¶é—´çš„è¯»æ“ä½œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>çº¿ç¨‹å¯åŠ¨è§„åˆ™&lt;/p>
&lt;/li>
&lt;li>
&lt;p>çº¿ç¨‹ç»ˆæ­¢è§„åˆ™&lt;/p>
&lt;/li>
&lt;li>
&lt;p>çº¿ç¨‹ä¸­æ–­è§„åˆ™&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¯¹è±¡ç»ˆç»“è§„åˆ™&lt;/p>
&lt;p>ä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆåœ¨ finalize æ–¹æ³•ä¹‹å‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¼ é€’æ€§&lt;/p>
&lt;p>å¦‚æœ A å…ˆè¡Œå‘ç”Ÿ Bï¼ŒB å…ˆè¡Œå‘ç”Ÿ Cï¼Œé‚£ä¹ˆ A å…ˆè¡Œå‘ç”Ÿ Cã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ç”±äºæŒ‡ä»¤é‡æ’çš„åŸå› ï¼Œæ‰€ä»¥ä¸€ä¸ªæ“ä½œçš„æ—¶é—´ä¸Šçš„å…ˆå‘ç”Ÿï¼Œä¸ä»£è¡¨è¿™ä¸ªæ“ä½œå°±æ˜¯å…ˆè¡Œå‘ç”Ÿï¼›åŒæ ·ä¸€ä¸ªæ“ä½œçš„å…ˆè¡Œå‘ç”Ÿï¼Œä¹Ÿä¸ä»£è¡¨è¿™ä¸ªæ“ä½œå¿…å®šåœ¨æ—¶é—´ä¸Šå…ˆå‘ç”Ÿã€‚&lt;/p>
&lt;h2 id="2-java-çº¿ç¨‹">2 Java çº¿ç¨‹&lt;/h2>
&lt;h3 id="21-çº¿ç¨‹çš„å®ç°">2.1 çº¿ç¨‹çš„å®ç°&lt;/h3>
&lt;p>ä¸»æµçš„æ“ä½œç³»ç»Ÿéƒ½æä¾›äº†çº¿ç¨‹çš„å®ç°ï¼Œjava åˆ™æ˜¯åœ¨ä¸åŒçš„ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å¹³å°ä¸‹ï¼Œå¯¹çº¿ç¨‹çš„æ“ä½œæä¾›äº†ç»Ÿä¸€çš„å¤„ç†ï¼Œä¸€ä¸ª Thread ç±»çš„å®ä¾‹å°±ä»£è¡¨äº†ä¸€ä¸ªçº¿ç¨‹ã€‚Thread ç±»çš„å…³é”®æ–¹æ³•éƒ½æ˜¯ native çš„ï¼Œæ‰€ä»¥ java çš„çº¿ç¨‹å®ç°ä¹Ÿéƒ½æ˜¯ä¾èµ–äºå¹³å°ç›¸å…³çš„æŠ€æœ¯æ‰‹æ®µæ¥å®ç°çš„ã€‚&lt;/p>
&lt;p>å®ç°çº¿ç¨‹ä¸»è¦æœ‰ 3 ç§æ–¹å¼ï¼šä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°ï¼Œä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°å’Œä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹å®ç°ã€‚&lt;/p>
&lt;h4 id="211-ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°">2.1.1 ä½¿ç”¨å†…æ ¸çº¿ç¨‹å®ç°&lt;/h4>
&lt;p>å†…æ ¸çº¿ç¨‹å°±æ˜¯ç›´æ¥ç”±æ“ä½œç³»ç»Ÿå†…æ ¸æ”¯æŒçš„çº¿ç¨‹ï¼Œè¿™ç§çº¿ç¨‹ç”±å†…æ ¸æ¥å®Œæˆçº¿ç¨‹çš„åˆ‡æ¢ï¼Œå†…æ ¸é€šè¿‡æ“çºµè°ƒåº¦å™¨å¯¹çº¿ç¨‹è¿›è¡Œè°ƒåº¦ï¼Œå¹¶è´Ÿè´£å°†çº¿ç¨‹çš„ä»»åŠ¡æ˜ å°„åˆ°å„ä¸ªå¤„ç†å™¨ä¸Šã€‚&lt;/p>
&lt;p>ç¨‹åºä¸€èˆ¬ä¸ä¼šç›´æ¥å»è°ƒç”¨å†…æ ¸çº¿ç¨‹ï¼Œè€Œæ˜¯ä½¿ç”¨å†…æ ¸çº¿ç¨‹çš„ä¸€ä¸ªé«˜çº§æ¥å£â€”â€”è½»é‡çº§è¿›ç¨‹ï¼ˆLight Weigh Processï¼‰ï¼ŒLWP å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ„ä¹‰ä¸Šæ‰€è¯´çš„çº¿ç¨‹ã€‚&lt;/p>
&lt;p>ç”±äºæ¯ä¸ªè½»é‡çº§è¿›ç¨‹éƒ½ç”±ä¸€ä¸ªå†…æ ¸çº¿ç¨‹æ”¯æŒï¼Œè¿™ç§è½»é‡çº§è¿›ç¨‹ä¸å†…æ ¸çº¿ç¨‹ä¹‹é—´ 1:1 çš„å…³ç³»æˆä¸ºä¸€å¯¹ä¸€çº¿ç¨‹æ¨¡å‹ã€‚&lt;/p>
&lt;p>&lt;strong>å±€é™æ€§&lt;/strong>&lt;/p>
&lt;p>è™½ç„¶ç”±äºå†…æ ¸çº¿ç¨‹çš„æ”¯æŒï¼Œæ¯ä¸ªè½»é‡çº§è¿›ç¨‹éƒ½æˆä¸ºäº†ä¸€ä¸ªç‹¬ç«‹çš„è°ƒåº¦å•å…ƒï¼Œå³ä½¿æœ‰ä¸€ä¸ªé˜»å¡ï¼Œä¹Ÿä¸å½±å“æ•´ä¸ªè¿›ç¨‹çš„å·¥ä½œï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€å®šçš„å±€é™æ€§ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ç³»ç»Ÿè°ƒç”¨ä»£ä»·è¾ƒé«˜&lt;/p>
&lt;p>ç”±äºåŸºäºå†…æ ¸çº¿ç¨‹å®ç°ï¼Œæ‰€ä»¥å„ç§çº¿ç¨‹çš„æ“ä½œéƒ½è¦è¿›è¡Œç³»ç»Ÿè°ƒç”¨ã€‚è€Œç³»ç»Ÿè°ƒç”¨çš„ä»£ä»·æ¯”è¾ƒé«˜ï¼Œéœ€è¦åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€æ¥å›åˆ‡æ¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç³»ç»Ÿæ”¯æŒæ•°é‡æœ‰é™&lt;/p>
&lt;p>æ¯ä¸ªè½»é‡çº§è¿›ç¨‹éƒ½éœ€è¦ä¸€ä¸ªå†…æ ¸çº¿ç¨‹æ”¯æŒï¼Œéœ€è¦æ¶ˆè€—ä¸€å®šçš„å†…æ ¸èµ„æºï¼Œæ‰€ä»¥æ”¯æŒçš„çº¿ç¨‹æ•°é‡æ˜¯æœ‰é™çš„ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="212-ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°">2.1.2 ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹å®ç°&lt;/h4>
&lt;p>æŒ‡çš„æ˜¯å®Œå…¨å»ºç«‹åœ¨ç”¨æˆ·ç©ºé—´çš„çº¿ç¨‹åº“ä¸Šï¼Œç³»ç»Ÿå†…æ ¸ä¸èƒ½æ„ŸçŸ¥çº¿ç¨‹å­˜åœ¨çš„å®ç°ã€‚ç”¨æˆ·çº¿ç¨‹çš„å»ºç«‹ã€åŒå¸ƒã€é”€æ¯å’Œè°ƒåº¦å®Œå…¨åœ¨ç”¨æˆ·æ€ä¸­å®Œæˆï¼Œä¸éœ€è¦å†…æ ¸å¸®åŠ©ã€‚&lt;/p>
&lt;p>å¦‚æœç¨‹åºå®ç°å¾—å½“ï¼Œåˆ™è¿™äº›çº¿ç¨‹éƒ½ä¸éœ€è¦åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œæ“ä½œéå¸¸å¿«é€Ÿæ¶ˆè€—ä½ï¼Œå¯ä»¥æ”¯æŒå¤§è§„æ¨¡çº¿ç¨‹æ•°é‡ã€‚è¿™ç§è¿›ç¨‹å’Œç”¨æˆ·çº¿ç¨‹ä¹‹é—´ 1:N çš„å…³ç³»æˆä¸ºä¸€å¯¹å¤šçº¿ç¨‹æ¨¡å‹ã€‚&lt;/p>
&lt;p>&lt;strong>å±€é™æ€§&lt;/strong>&lt;/p>
&lt;p>ä¸éœ€è¦ç³»ç»Ÿå†…æ ¸çš„ï¼Œæ—¢æ˜¯ä¼˜åŠ¿ä¹Ÿæ˜¯åŠ£åŠ¿ã€‚ç”±äºæ²¡æœ‰ç³»ç»Ÿå†…æ ¸æ”¯æ´ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½éœ€è¦ç¨‹åºå»å¤„ç†ï¼Œç”±äºæ“ä½œç³»ç»Ÿåªæ˜¯æŠŠå¤„ç†å™¨èµ„æºåˆ†ç»™è¿›ç¨‹ï¼Œé‚£â€œé˜»å¡å¦‚ä½•å¤„ç†â€ã€â€œå¤šå¤„ç†å™¨ç³»ç»Ÿå¦‚ä½•å°†çº¿ç¨‹æ˜ å°„åˆ°å…¶ä»–å¤„ç†å™¨ä¸Šâ€è¿™ç±»é—®é¢˜çš„è§£å†³ååˆ†å›°éš¾ï¼Œæ‰€ä»¥ç°åœ¨ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹çš„è¶Šæ¥è¶Šå°‘äº†ã€‚&lt;/p>
&lt;h4 id="213-ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°">2.1.3 ä½¿ç”¨ç”¨æˆ·çº¿ç¨‹åŠ è½»é‡çº§è¿›ç¨‹æ··åˆå®ç°&lt;/h4>
&lt;p>åœ¨è¿™ç§æ··åˆæ¨¡å¼ä¸‹ï¼Œæ—¢å­˜åœ¨ç”¨æˆ·çº¿ç¨‹ï¼Œä¹Ÿå­˜åœ¨è½»é‡çº§è¿›ç¨‹ã€‚&lt;/p>
&lt;p>ç”¨æˆ·çº¿ç¨‹è¿˜æ˜¯å®Œå…¨å»ºç«‹åœ¨ç”¨æˆ·ç©ºé—´ä¸­ï¼Œå› æ­¤ç”¨æˆ·çº¿ç¨‹çš„åˆ›å»ºã€åˆ‡æ¢ã€ææ„ç­‰æ“ä½œä¾ç„¶å»‰ä»·ï¼Œè€Œä¸”æ”¯æŒå¤§è§„æ¨¡ç”¨æˆ·çº¿ç¨‹å¹¶å‘ã€è€Œæ“ä½œç³»ç»Ÿæä¾›æ”¯æŒçš„è½»é‡çº§è¿›ç¨‹åˆ™ä½œä¸ºç”¨æˆ·çº¿ç¨‹å’Œå†…æ ¸çº¿ç¨‹ä¹‹é—´çš„æ¡¥æ¢ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨å†…æ ¸æä¾›çš„çº¿ç¨‹è°ƒåº¦å’Œå¤„ç†å™¨æ˜ å°„ï¼Œå¹¶ä¸”ç”¨æˆ·çº¿ç¨‹çš„ç³»ç»Ÿè°ƒç”¨è¦é€šè¿‡è½»é‡çº§è¿›ç¨‹æ¥å®Œæˆï¼Œå¤§å¤§é™ä½äº†æ•´ä¸ªè¿›ç¨‹è¢«å®Œå…¨é˜»å¡çš„é£é™©ã€‚&lt;/p>
&lt;p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·çº¿ç¨‹å’Œè½»é‡çº§è¿›ç¨‹æ•°é‡æ¯”ä¸å›ºå®š N:Mï¼Œè¿™ç§æ¨¡å¼å°±æ˜¯å¤šå¯¹å¤šçº¿ç¨‹æ¨¡å‹ã€‚&lt;/p>
&lt;h4 id="214-java-çº¿ç¨‹çš„å®ç°">2.1.4 java çº¿ç¨‹çš„å®ç°&lt;/h4>
&lt;p>ç›®å‰çš„ jdk ç‰ˆæœ¬ä¸­ï¼Œæ“ä½œç³»ç»Ÿæ”¯æŒæ€æ ·çš„çº¿ç¨‹æ¨¡å‹ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå°±å†³å®šäº† jvm çš„çº¿ç¨‹æ˜¯æ€ä¹ˆæ˜ å°„çš„ï¼Œè¿™ç‚¹åœ¨ä¸åŒçš„å¹³å°æ²¡åŠæ³•æ‰“æˆä¸€è‡´ã€‚çº¿ç¨‹æ¨¡å‹åªå¯¹çº¿ç¨‹çš„å¹¶å‘è§„æ¨¡å’Œæ“ä½œæˆæœ¬äº§ç”Ÿå½±å“ï¼Œå¯¹ç¼–ç å’Œè¿è¡Œéƒ½æ²¡ä»€ä¹ˆå·®å¼‚ã€‚&lt;/p>
&lt;p>windows å’Œ linux éƒ½æ˜¯ä¸€å¯¹ä¸€çš„çº¿ç¨‹æ¨¡å‹ã€‚&lt;/p>
&lt;h3 id="22-çº¿ç¨‹è°ƒåº¦">2.2 çº¿ç¨‹è°ƒåº¦&lt;/h3>
&lt;p>çº¿ç¨‹çš„è°ƒåº¦æ˜¯æŒ‡ç³»ç»Ÿä¸ºçº¿ç¨‹åˆ†é…å¤„ç†å™¨ä½¿ç”¨æƒçš„è¿‡ç¨‹ï¼Œä¸»è¦çš„è°ƒåº¦æ–¹å¼æœ‰ä¸¤ç§ï¼šååŒå¼çº¿ç¨‹è°ƒåº¦å’ŒæŠ¢å å¼çº¿ç¨‹è°ƒåº¦ã€‚&lt;/p>
&lt;h4 id="221-ååŒå¼çº¿ç¨‹è°ƒåº¦">2.2.1 ååŒå¼çº¿ç¨‹è°ƒåº¦&lt;/h4>
&lt;p>çº¿ç¨‹çš„æ‰§æ€§æ—¶é—´ç”±çº¿ç¨‹æœ¬èº«æ¥æ§åˆ¶ï¼Œçº¿ç¨‹æŠŠè‡ªå·±çš„å·¥ä½œæ‰§æ€§å®Œäº†ä¹‹åï¼Œè¦ä¸»åŠ¨é€šçŸ¥ç³»ç»Ÿåˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸Šã€‚Lua çš„åç¨‹å°±æ˜¯è¿™æ ·ã€‚&lt;/p>
&lt;p>&lt;strong>å¥½å¤„&lt;/strong>&lt;/p>
&lt;p>ååŒå¼å¤šçº¿ç¨‹æœ€å¤§çš„å¥½å¤„å°±æ˜¯å®ç°ç®€å•ã€‚&lt;/p>
&lt;p>ç”±äºçº¿ç¨‹è¦æŠŠè‡ªå·±çš„äº‹æƒ…å¹²å®Œä¹‹åæ‰è¿›è¡Œçº¿ç¨‹åˆ‡æ¢ï¼Œåˆ‡æ¢æ“ä½œå¯¹çº¿ç¨‹æ˜¯å…‹åˆ¶çš„ï¼Œæ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆçº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>&lt;strong>åå¤„&lt;/strong>&lt;/p>
&lt;p>åå¤„ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œçº¿ç¨‹æ‰§è¡Œæ—¶é—´ä¸å¯æ§ã€‚ç”šè‡³å¦‚æœä¸€ä¸ªçº¿ç¨‹å†™çš„é—®é¢˜ï¼Œä¸€ç›´ä¸å‘Šè¯‰ç³»ç»Ÿåˆ‡æ¢ï¼Œé‚£ç¨‹åºå°±ä¼šä¸€ç›´é˜»å¡ã€‚&lt;/p>
&lt;h4 id="222-æŠ¢å å¼çº¿ç¨‹è°ƒåº¦">2.2.2 æŠ¢å å¼çº¿ç¨‹è°ƒåº¦&lt;/h4>
&lt;p>æ¯ä¸ªçº¿ç¨‹ç”±ç³»ç»Ÿåˆ†é…æ‰§è¡Œæ—¶é—´ï¼Œçº¿ç¨‹çš„åˆ‡æ¢ä¸æ˜¯åˆçº¿ç¨‹æœ¬èº«æ¥å†³å®šã€‚&lt;/p>
&lt;p>ä½¿ç”¨ yield æ–¹æ³•æ˜¯å¯ä»¥è®©å‡ºæ‰§è¡Œæ—¶é—´ï¼Œä½†æ˜¯è¦è·å–æ‰§è¡Œæ—¶é—´ï¼Œçº¿ç¨‹æœ¬èº«æ˜¯æ²¡æœ‰ä»€ä¹ˆåŠæ³•çš„ã€‚&lt;/p>
&lt;p>åœ¨è¿™ç§è°ƒåº¦æ¨¡å¼ä¸‹ï¼Œçº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´æ˜¯ç³»ç»Ÿå¯æ§çš„ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°ä¸€ä¸ªçº¿ç¨‹å¯¼è‡´æ•´ä¸ªè¿›ç¨‹é˜»å¡ã€‚&lt;/p>
&lt;h4 id="223-java-çº¿ç¨‹è°ƒåº¦">2.2.3 java çº¿ç¨‹è°ƒåº¦&lt;/h4>
&lt;p>java ä½¿ç”¨çš„æ˜¯æŠ¢å å¼çº¿ç¨‹è°ƒåº¦ã€‚&lt;/p>
&lt;p>è™½ç„¶ java çš„çº¿ç¨‹è°ƒåº¦æ˜¯ç³»ç»Ÿæ¥æ§åˆ¶çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§çš„æ–¹å¼ï¼Œè®©æŸäº›çº¿ç¨‹å¤šåˆ†é…ä¸€äº›æ—¶é—´ï¼ŒæŸäº›çº¿ç¨‹å°‘åˆ†é…ä¸€äº›æ—¶é—´ã€‚&lt;/p>
&lt;p>ä¸è¿‡çº¿ç¨‹ä¼˜å…ˆçº§è¿˜æ˜¯ä¸å¤ªé è°±ï¼ŒåŸå› å°±æ˜¯ java çš„çº¿ç¨‹æ˜¯é€šè¿‡æ˜ å°„åˆ°ç³»ç»Ÿçš„åŸç”Ÿçº¿ç¨‹æ¥å®ç°çš„ï¼Œæ‰€ä»¥çº¿ç¨‹çš„è°ƒåº¦è¿˜æ˜¯å–å†³äºæ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ä¼˜å…ˆçº§ä¸ä¸€å®šå’Œ java çš„çº¿ç¨‹ä¼˜å…ˆçº§ä¸€ä¸€å¯¹åº”ã€‚è€Œä¸”ä¼˜å…ˆçº§è¿˜å¯èƒ½è¢«ç³»ç»Ÿè‡ªè¡Œæ”¹å˜ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨ç¨‹åºä¸­é€šè¿‡ä¼˜å…ˆçº§æ¥å‡†ç¡®çš„åˆ¤æ–­å…ˆæ‰§è¡Œå“ªä¸€ä¸ªçº¿ç¨‹ã€‚&lt;/p>
&lt;h3 id="23-çº¿ç¨‹çš„çŠ¶æ€è½¬æ¢">2.3 çº¿ç¨‹çš„çŠ¶æ€è½¬æ¢&lt;/h3>
&lt;p>çœ‹åˆ°ç½‘ä¸Šæœ‰å¥½å¤šç§è¯´æ³•ï¼Œä¸è¿‡å¤§è‡´ä¹Ÿéƒ½æ˜¯è¯´ 5 ç§çŠ¶æ€ï¼šæ–°å»ºï¼ˆnewï¼‰ã€å¯è¿è¡Œï¼ˆrunnableï¼‰ã€è¿è¡Œï¼ˆrunningï¼‰ã€é˜»å¡ï¼ˆblockedï¼‰å’Œæ­»äº¡ï¼ˆdeadï¼‰ã€‚&lt;/p>
&lt;p>è€Œæ·±å…¥ç†è§£ jvm è™šæ‹Ÿæœºä¸­è¯´ java å®šä¹‰äº† 5 ç§çº¿ç¨‹çŠ¶æ€ï¼Œåœ¨ä»»ä¸€æ—¶é—´ç‚¹ï¼Œä¸€ä¸ªçº¿ç¨‹åªèƒ½æœ‰å…¶ä¸­çš„ä¸€ç§çŠ¶æ€ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ–°å»º new&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¿è¡Œ runnable&lt;/p>
&lt;p>åŒ…æ‹¬äº†æ“ä½œç³»ç»Ÿçº¿ç¨‹çŠ¶æ€çš„ running å’Œ readyï¼Œä¹Ÿå°±æ˜¯è¯´å¤„äºæ­¤çŠ¶æ€çš„çº¿ç¨‹å¯èƒ½æ­£åœ¨æ‰§è¡Œï¼Œä¹Ÿå¯èƒ½æ­£åœ¨ç­‰å¾… cpu ç»™åˆ†é…æ‰§è¡Œæ—¶é—´ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ— é™æœŸç­‰å¾… waiting&lt;/p>
&lt;p>å¤„äºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¸ä¼šè¢« cpu åˆ†é…æ‰§è¡Œæ—¶é—´ï¼Œéœ€è¦è¢«å…¶ä»–çº¿ç¨‹æ˜¾ç¤ºå”¤é†’ï¼Œèƒ½å¤Ÿå¯¼è‡´çº¿ç¨‹é™·å…¥æ— é™æœŸç­‰å¾…çš„æ–¹æ³•æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>æ²¡æœ‰è®¾ç½® timeout å‚æ•°çš„ wait æ–¹æ³•ã€‚&lt;/li>
&lt;li>æ²¡æœ‰è®¾ç½® timeout å‚æ•°çš„ join æ–¹æ³•ã€‚&lt;/li>
&lt;li>LockSupport.park æ–¹æ³•ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>é™æœŸç­‰å¾… timed waiting&lt;/p>
&lt;p>å¤„äºè¿™ç§çŠ¶æ€çš„çº¿ç¨‹ä¹Ÿä¸ä¼šè¢« cpu åˆ†é…æ‰§è¡Œæ—¶é—´ï¼Œä¸è¿‡ä¸éœ€è¦è¢«å…¶ä»–çº¿ç¨‹æ˜¾ç¤ºå”¤é†’ï¼Œæ˜¯ç»è¿‡ä¸€æ®µæ—¶é—´ä¹‹åï¼Œè¢«æ“ä½œç³»ç»Ÿè‡ªåŠ¨å”¤é†’ã€‚èƒ½å¤Ÿå¯¼è‡´çº¿ç¨‹é™·å…¥é™æœŸç­‰å¾…çš„æ–¹æ³•æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>sleep æ–¹æ³•ã€‚&lt;/li>
&lt;li>è®¾ç½® timeout å‚æ•°çš„ wait æ–¹æ³•ã€‚&lt;/li>
&lt;li>è®¾ç½®å‚æ•°çš„ join æ–¹æ³•ã€‚&lt;/li>
&lt;li>LockSupport.parkNanos æ–¹æ³•ã€‚&lt;/li>
&lt;li>LockSupport.parkUntil æ–¹æ³•ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>é˜»å¡ blocked&lt;/p>
&lt;p>çº¿ç¨‹è¢«é˜»å¡äº†ã€‚åœ¨çº¿ç¨‹ç­‰å¾…è¿›å…¥åŒæ­¥åŒºåŸŸçš„æ—¶å€™æ˜¯è¿™ä¸ªçŠ¶æ€ã€‚&lt;/p>
&lt;p>é˜»å¡å’Œç­‰å¾…çš„åŒºåˆ«æ˜¯ï¼šé˜»å¡æ˜¯æ’é˜Ÿç­‰å¾…è·å–ä¸€ä¸ªæ’ä»–é”ï¼Œè€Œç­‰å¾…æ˜¯æŒ‡ç­‰ä¸€æ®µæ—¶é—´æˆ–è€…ä¸€ä¸ªå”¤é†’åŠ¨ä½œã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç»“æŸ terminated&lt;/p>
&lt;p>å·²ç»ç»ˆæ­¢çš„çº¿ç¨‹ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="3-å†™åœ¨æœ€å">3 å†™åœ¨æœ€å&lt;/h2>
&lt;p>å¹¶å‘å¤„ç†çš„å¹¿æ³›åº”ç”¨æ˜¯ä½¿å¾— Amdahl å®šå¾‹ä»£æ›¿æ‘©å°”å®šå¾‹æˆä¸ºè®¡ç®—æœºæ€§èƒ½å‘å±•æºåŠ¨åŠ›çš„æ ¹æœ¬åŸå› ï¼Œä¹Ÿæ˜¯äººç±»å‹æ¦¨è®¡ç®—æœºè¿ç®—èƒ½åŠ›çš„æœ€æœ‰åŠ›æ­¦å™¨ã€‚æœ‰äº›é—®é¢˜ä½¿ç”¨è¶Šå¤šçš„èµ„æºå°±èƒ½è¶Šå¿«åœ°è§£å†³â€”â€”è¶Šå¤šçš„å·¥äººå‚ä¸æ”¶å‰²åº„ç¨¼ï¼Œé‚£ä¹ˆå°±èƒ½è¶Šå¿«åœ°å®Œæˆæ”¶è·ã€‚ä½†æ˜¯å¦ä¸€äº›ä»»åŠ¡æ ¹æœ¬å°±æ˜¯ä¸²è¡ŒåŒ–çš„â€”â€”å¢åŠ æ›´å¤šçš„å·¥äººæ ¹æœ¬ä¸å¯èƒ½æé«˜æ”¶å‰²é€Ÿåº¦ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä½¿ç”¨çº¿ç¨‹çš„é‡è¦åŸå› ä¹‹ä¸€æ˜¯ä¸ºäº†æ”¯é…å¤šå¤„ç†å™¨çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯é—®é¢˜è¢«æ°å½“åœ°è¿›è¡Œäº†å¹¶è¡ŒåŒ–çš„åˆ†è§£ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„ç¨‹åºæœ‰æ•ˆåœ°ä½¿ç”¨äº†è¿™ç§å¹¶è¡Œçš„æ½œèƒ½ã€‚æœ‰æ—¶å€™è‰¯å¥½çš„è®¾è®¡åŸåˆ™ä¸å¾—ä¸å‘ç°å®åšå‡ºä¸€äº›è®©æ­¥ï¼Œæˆ‘ä»¬å¿…é¡»è®©è®¡ç®—æœºæ­£ç¡®æ— è¯¯çš„è¿è¡Œï¼Œé¦–å…ˆä¿è¯å¹¶å‘çš„æ­£ç¡®æ€§ï¼Œæ‰èƒ½å¤Ÿåœ¨æ­¤åŸºç¡€ä¸Šè°ˆé«˜æ•ˆï¼Œæ‰€ä»¥çº¿ç¨‹çš„å®‰å…¨é—®é¢˜æ˜¯ä¸€ä¸ªå¾ˆå€¼å¾—è€ƒè™‘çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>è™½ç„¶ä¸€ç›´è¯´ java ä¸å¥½ï¼Œä½†æ˜¯ java å¸¦ç»™æˆ‘çš„å½±å“ç¡®å®æœ€å¤§çš„ï¼Œä» java è¿™ä¸ªå¹³å°é‡Œå­¦åˆ°äº†å¾ˆå¤šæœ‰ç”¨çš„ä¸œè¥¿ã€‚ç°åœ¨ golangï¼Œnodejsï¼Œpython ç­‰è¯­è¨€ï¼Œæ¯ä¸ªéƒ½æ˜¯åœ¨ä¸€æ–¹é¢èƒ½ç§’ javaï¼Œå¯æ˜¯ java ç”Ÿæ€å’Œ java å¯¹è½¯ä»¶è¡Œä¸šçš„å½±å“ï¼Œæ˜¯æ— æ³•è¢«è¶…è¶Šçš„ï¼Œjava è¿™ç§è¯­è¨€ï¼Œä»å‡ºç”Ÿåˆ°ç°åœ¨å‡ åå¹´äº†ï¼ŒåŸºæœ¬ä¸Šæ¯æ¬¡è½¯ä»¶æŠ€æœ¯çš„é©å‘½éƒ½æ²¡æœ‰è½ä¸‹ï¼Œæ¯æ¬¡éƒ½è§‰å¾—è¦æ­»çš„æ—¶å€™ï¼Œå¿½ç„¶é—´æŸ³æš—èŠ±æ˜ï¼Œæ¯æœ¨é€¢æ˜¥ã€‚å’³å’³ï¼Œæ‰¯è¿œäº†ã€‚&lt;/p></description></item><item><title>aws.md</title><link>https://example.com/p/aws.md/</link><pubDate>Thu, 22 Mar 2018 14:04:09 +0000</pubDate><guid>https://example.com/p/aws.md/</guid><description>&lt;p>ä¸€äº›åŸºç¡€æ¦‚å¿µ&lt;/p>
&lt;h2 id="ec2">EC2&lt;/h2>
&lt;p>äº‘æœåŠ¡å™¨ï¼Œå¯ä»¥ç†è§£æˆè™šæ‹Ÿæœºï¼Œæ–°å»ºä¸€ä¸ªå®ä¾‹ï¼Œå°±æ˜¯æ–°å»ºä¸€ä¸ªè™šæ‹Ÿæœºå¹¶å®‰è£…æ“ä½œç³»ç»Ÿï¼ˆLinux æˆ–è€… windowsï¼‰ã€‚&lt;/p>
&lt;h2 id="vpc">VPC&lt;/h2>
&lt;p>Virtual Private Cloudã€‚å¯ä»¥ç†è§£æˆæ•°æ®ä¸­å¿ƒï¼Œæœºæˆ¿ã€‚å¯¹äºç¾å¤‡æˆ–è€…åŒæ´»éœ€è¦çš„ï¼Œå¯ä»¥åˆ›å»ºä¸¤ä¸ª VPCã€‚&lt;/p>
&lt;h2 id="å­ç½‘">å­ç½‘&lt;/h2>
&lt;p>ä¸€ä¸ª VPC é‡Œå¯ä»¥æœ‰å¤šä¸ªå­ç½‘ã€‚æ¯”å¦‚æŸæœºæ„çš„ä¸€ä¸ª VPC å¯ä»¥åŠå…¬ç½‘å’Œç”Ÿäº§ç½‘æ®µï¼Œæˆ–è€…å†…ç½‘å’Œå¤–ç½‘ã€‚ä¸€èˆ¬å¤–ç½‘å¯ä»¥è¢«è®¿é—®ï¼Œå†…ç½‘çš„è¯å¯ä»¥æ˜¯æ•°æ®åº“çš„æœåŠ¡å™¨ä¹‹ç±»çš„ã€‚&lt;/p>
&lt;h2 id="iam-è§’è‰²">IAM è§’è‰²&lt;/h2>
&lt;p>ç±»ä¼¼äºç”¨æˆ·ï¼Œå¯ä»¥è¢«åˆ†é…æƒé™ã€‚&lt;/p>
&lt;h2 id="å®‰å…¨ç»„">å®‰å…¨ç»„&lt;/h2>
&lt;p>æ§åˆ¶è¿æ¥åˆ°æ­¤ EC2 å®ä¾‹çš„æµé‡ï¼Œæˆ–è€…æ˜¯æ§åˆ¶å¯¹å¤–æš´éœ²çš„ç«¯å£ã€‚&lt;/p>
&lt;h2 id="cidr">CIDR&lt;/h2>
&lt;p>CIDR ä¸»è¦æ˜¯ä¸€ä¸ªæŒ‰ä½çš„ã€åŸºäºå‰ç¼€çš„ï¼Œç”¨äºè§£é‡Š IP åœ°å€çš„æ ‡å‡†ã€‚å½“ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºè¿™äº›åœ°å€æ—¶ï¼Œå®ƒä»¬æœ‰ç€åœ¨å¼€å¤´éƒ¨åˆ†çš„ä¸€ç³»åˆ—ç›¸åŒçš„ä½ã€‚&lt;/p>
&lt;p>IPv4 çš„ CIDR åœ°å€å—çš„è¡¨ç¤ºæ–¹æ³•å’Œ IPv4 åœ°å€çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ç›¸ä¼¼çš„ï¼šç”±å››éƒ¨åˆ†ç»„æˆçš„ç‚¹åˆ†åè¿›åˆ¶åœ°å€ï¼Œåè·Ÿä¸€ä¸ªæ–œçº¿ï¼Œæœ€åæ˜¯èŒƒå›´åœ¨ 0 åˆ° 32 ä¹‹é—´çš„ä¸€ä¸ªæ•°å­—ï¼šA.B.C.D/Nã€‚ç‚¹åˆ†åè¿›åˆ¶çš„éƒ¨åˆ†å’Œ IPv4 åœ°å€ä¸€æ ·æ˜¯ä¸€ä¸ªè¢«åˆ†æˆå››ä¸ªå…«ä½ä½ç»„çš„ 32 ä½äºŒè¿›åˆ¶æ•°ã€‚æ–œçº¿åé¢çš„æ•°å­—å°±æ˜¯å‰ç¼€é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ä»å·¦åˆ°å³ï¼Œè¢«åœ°å€å—é‡Œçš„åœ°å€æ‰€å…±äº«çš„ä½çš„æ•°ç›®ã€‚&lt;/p>
&lt;p>åè¿›åˆ¶éƒ¨åˆ†æœ‰æ—¶ä¼šè¢«çœç•¥ï¼Œå› æ­¤ï¼Œ/20 å°±è¡¨ç¤ºä¸€ä¸ªå‰ç¼€é•¿åº¦æ˜¯ 20 çš„ CIDR åœ°å€å—ã€‚å¦‚æœä¸€ä¸ª IP åœ°å€çš„å‰ N ä½ä¸ä¸€ä¸ª CIDR åœ°å€å—çš„å‰ç¼€æ˜¯ç›¸åŒçš„è¯ï¼Œé‚£ä¹ˆå°±è¯´è¿™ä¸ªåœ°å€å±äºè¿™ä¸ª CIDR åœ°å€å—ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸ CIDR åœ°å€å—çš„å‰ç¼€åŒ¹é…ã€‚æ‰€ä»¥ï¼Œè¦ç†è§£ CIDRï¼Œå°±è¦æŠŠåœ°å€å†™æˆäºŒè¿›åˆ¶çš„å½¢å¼ã€‚&lt;/p></description></item></channel></rss>